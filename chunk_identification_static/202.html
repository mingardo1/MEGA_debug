<!DOCTYPE html>
    <html lang="en">
              <head>
                <meta charset="utf-8">
                <title>202</title>
                    <style>
                        #top {
                            height: 48vh;
                            overflow-y: auto;
                        }
                        #bottom {
                            height: 48vh;
                            overflow-y: auto;
                        }
                        .highlighted {
                            background-color: rgba(177, 82, 227, 0.85) !important;
                        }
                    </style>
                    <script>
                        function enter(c) {
                            const lines = document.getElementsByClassName(c);
                            for (let i = 0; i < lines.length; i++) {
                               lines.item(i).classList.add('highlighted');
                            }
                        }
                        function out(c) {
                            const lines = document.getElementsByClassName(c);
                            for (let i = 0; i < lines.length; i++) {
                               lines.item(i).classList.remove('highlighted');
                            }
                        }
                    </script>
              </head>
              <body>
                <span style="height: 4vh">
                    202
                    <a href="201.html">prev</a>
                    <a href="203.html">next</a>
                    <a href="202_chunks.html">chunks</a>
                    <a href="index.html">index</a>
                    BroadleafCommerce/BroadleafCommerce_6bb99c2e165c1531f99c2c66b0212e1f0df50635_admin/broadleaf-open-admin-platform/src/main/java/org/broadleafcommerce/openadmin/web/service/FormBuilderServiceImpl.java
                    <textarea rows=1 onclick='navigator.clipboard.writeText(this.value)'>cd C:\studies\se\mega\git-analyzer-plus\notebooks\debug
del /Q *
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\BroadleafCommerce\BroadleafCommerce show &quot;6bb99c2e165c1531f99c2c66b0212e1f0df50635:admin/broadleaf-open-admin-platform/src/main/java/org/broadleafcommerce/openadmin/web/service/FormBuilderServiceImpl.java&quot; &gt; committed.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\BroadleafCommerce\BroadleafCommerce show &quot;6bb99c2e165c1531f99c2c66b0212e1f0df50635^1:admin/broadleaf-open-admin-platform/src/main/java/org/broadleafcommerce/openadmin/web/service/FormBuilderServiceImpl.java&quot; &gt; ours.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\BroadleafCommerce\BroadleafCommerce show &quot;6bb99c2e165c1531f99c2c66b0212e1f0df50635^2:admin/broadleaf-open-admin-platform/src/main/java/org/broadleafcommerce/openadmin/web/service/FormBuilderServiceImpl.java&quot; &gt; theirs.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\BroadleafCommerce\BroadleafCommerce show &quot;df478ca5d04870811a3cd35fc095ce4923365ab4:admin/broadleaf-open-admin-platform/src/main/java/org/broadleafcommerce/openadmin/web/service/FormBuilderServiceImpl.java&quot; &gt; base.java
copy ours.java 1ours.java
copy ours.java 2ours.java
copy theirs.java 1theirs.java
copy theirs.java 2theirs.java
copy base.java 1base.java
copy base.java 2base.java
&quot;C:\Program Files\Java\jdk1.8.0_241\bin\java.exe&quot; -Dfile.encoding=UTF-8 -jar &quot;C:\studies\se\jFSTMerge\build\libs\jFSTMerge-all.jar&quot; C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1ours.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1base.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1theirs.java -o C:\studies\se\mega\git-analyzer-plus\notebooks\debug\jfstmerge.java --show-base
&quot;C:\Program Files\Eclipse Adoptium\jdk-17.0.11.9-hotspot\bin\java.exe&quot; -Dfile.encoding=UTF-8 -jar &quot;C:\studies\se\spork\target\spork-0.5.0-SNAPSHOT.jar&quot; C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2ours.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2base.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2theirs.java -o C:\studies\se\mega\git-analyzer-plus\notebooks\debug\spork.java
del /Q 1*.java
del /Q 2*.java
del /Q jfstmerge.java.merge
</textarea>
                    {strict: [[b]], subset: [[b]]}
                </span>
                <div id="top">

                    <table>
                        <tr>
                            <th>line based (standard git)</th>
                            <th>jfstmerge</th>
                            <th>spork</th>
                        </tr>
                        <tr>
                            <td><pre><span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style="">   1 /*                                                                                                       </span>
<span class="7283730021202772321" onmouseenter="enter('7283730021202772321');" onmouseout="out('7283730021202772321');" style="">   2  * #%L                                                                                                   </span>
<span class="-3339060969767811416" onmouseenter="enter('-3339060969767811416');" onmouseout="out('-3339060969767811416');" style="">   3  * BroadleafCommerce Open Admin Platform                                                                 </span>
<span class="305149960078729975" onmouseenter="enter('305149960078729975');" onmouseout="out('305149960078729975');" style="">   4  * %%                                                                                                    </span>
<span class="1978304592184257722" onmouseenter="enter('1978304592184257722');" onmouseout="out('1978304592184257722');" style="">   5  * Copyright (C) 2009 - 2016 Broadleaf Commerce                                                          </span>
<span class="305149960078729975" onmouseenter="enter('305149960078729975');" onmouseout="out('305149960078729975');" style="">   6  * %%                                                                                                    </span>
<span class="4430451662992926684" onmouseenter="enter('4430451662992926684');" onmouseout="out('4430451662992926684');" style="">   7  * Licensed under the Broadleaf Fair Use License Agreement, Version 1.0                                  </span>
<span class="8206099442596739681" onmouseenter="enter('8206099442596739681');" onmouseout="out('8206099442596739681');" style="">   8  * (the &quot;Fair Use License&quot; located  at http://license.broadleafcommerce.org/fair_use_license-1.0.txt)    </span>
<span class="-4338570431005413339" onmouseenter="enter('-4338570431005413339');" onmouseout="out('-4338570431005413339');" style="">   9  * unless the restrictions on use therein are violated and require payment to Broadleaf in which case    </span>
<span class="-5739615313038505012" onmouseenter="enter('-5739615313038505012');" onmouseout="out('-5739615313038505012');" style="">  10  * the Broadleaf End User License Agreement (EULA), Version 1.1                                          </span>
<span class="-196756316119086558" onmouseenter="enter('-196756316119086558');" onmouseout="out('-196756316119086558');" style="">  11  * (the &quot;Commercial License&quot; located at http://license.broadleafcommerce.org/commercial_license-1.1.txt) </span>
<span class="-3691518077331372763" onmouseenter="enter('-3691518077331372763');" onmouseout="out('-3691518077331372763');" style="">  12  * shall apply.                                                                                          </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">  13  *                                                                                                       </span>
<span class="-3333434530440420199" onmouseenter="enter('-3333434530440420199');" onmouseout="out('-3333434530440420199');" style=""><abbr title="  14  * Alternatively, the Commercial License may be replaced with a mutually agreed upon license (the &quot;Custom License&quot;)">  14  * Alternatively, the Commercial License may be replaced with a mutually agreed upon license (the &quot;CustomðŸ”µ</abbr></span>
<span class="-2556272520656899284" onmouseenter="enter('-2556272520656899284');" onmouseout="out('-2556272520656899284');" style=""><abbr title="  15  * between you and Broadleaf Commerce. You may not use this file except in compliance with the applicable license.">  15  * between you and Broadleaf Commerce. You may not use this file except in compliance with the applicableðŸ”µ</abbr></span>
<span class="3739716589509259313" onmouseenter="enter('3739716589509259313');" onmouseout="out('3739716589509259313');" style="">  16  * #L%                                                                                                   </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  17  */                                                                                                      </span>
<span class="-6621374416165604736" onmouseenter="enter('-6621374416165604736');" onmouseout="out('-6621374416165604736');" style="">  18 package org.broadleafcommerce.openadmin.web.service;                                                     </span>
<span  style="">  19                                                                                                          </span>
<span class="8596464405353709537" onmouseenter="enter('8596464405353709537');" onmouseout="out('8596464405353709537');" style="">  20 import org.apache.commons.collections.CollectionUtils;                                                   </span>
<span class="-6731128730698523533" onmouseenter="enter('-6731128730698523533');" onmouseout="out('-6731128730698523533');" style="">  21 import org.apache.commons.collections.Predicate;                                                         </span>
<span class="-7366736394295216840" onmouseenter="enter('-7366736394295216840');" onmouseout="out('-7366736394295216840');" style="">  22 import org.apache.commons.lang.ArrayUtils;                                                               </span>
<span class="-4661043417888464228" onmouseenter="enter('-4661043417888464228');" onmouseout="out('-4661043417888464228');" style="">  23 import org.apache.commons.lang.BooleanUtils;                                                             </span>
<span class="-8105670274694144339" onmouseenter="enter('-8105670274694144339');" onmouseout="out('-8105670274694144339');" style="">  24 import org.apache.commons.lang3.StringUtils;                                                             </span>
<span class="494203924075255110" onmouseenter="enter('494203924075255110');" onmouseout="out('494203924075255110');" style="">  25 import org.apache.commons.logging.Log;                                                                   </span>
<span class="-8227491862907452788" onmouseenter="enter('-8227491862907452788');" onmouseout="out('-8227491862907452788');" style="">  26 import org.apache.commons.logging.LogFactory;                                                            </span>
<span class="-6287859968194756382" onmouseenter="enter('-6287859968194756382');" onmouseout="out('-6287859968194756382');" style="">  27 import org.broadleafcommerce.common.admin.domain.AdminMainEntity;                                        </span>
<span class="-9066890226896155571" onmouseenter="enter('-9066890226896155571');" onmouseout="out('-9066890226896155571');" style="">  28 import org.broadleafcommerce.common.exception.ExceptionHelper;                                           </span>
<span class="3542918789910249764" onmouseenter="enter('3542918789910249764');" onmouseout="out('3542918789910249764');" style="">  29 import org.broadleafcommerce.common.exception.SecurityServiceException;                                  </span>
<span class="5945096539699516699" onmouseenter="enter('5945096539699516699');" onmouseout="out('5945096539699516699');" style="">  30 import org.broadleafcommerce.common.exception.ServiceException;                                          </span>
<span class="-8339254235515724670" onmouseenter="enter('-8339254235515724670');" onmouseout="out('-8339254235515724670');" style="">  31 import org.broadleafcommerce.common.extension.ExtensionResultStatusType;                                 </span>
<span class="-4810625992201169553" onmouseenter="enter('-4810625992201169553');" onmouseout="out('-4810625992201169553');" style="">  32 import org.broadleafcommerce.common.i18n.domain.TranslatedEntity;                                        </span>
<span class="1881391036720633454" onmouseenter="enter('1881391036720633454');" onmouseout="out('1881391036720633454');" style="">  33 import org.broadleafcommerce.common.i18n.service.TranslationService;                                     </span>
<span class="3092944370275379663" onmouseenter="enter('3092944370275379663');" onmouseout="out('3092944370275379663');" style="">  34 import org.broadleafcommerce.common.locale.service.LocaleService;                                        </span>
<span class="-2454560082833257555" onmouseenter="enter('-2454560082833257555');" onmouseout="out('-2454560082833257555');" style="">  35 import org.broadleafcommerce.common.media.domain.MediaDto;                                               </span>
<span class="4111478795314305516" onmouseenter="enter('4111478795314305516');" onmouseout="out('4111478795314305516');" style="">  36 import org.broadleafcommerce.common.persistence.EntityConfiguration;                                     </span>
<span class="-3349026188166660873" onmouseenter="enter('-3349026188166660873');" onmouseout="out('-3349026188166660873');" style="">  37 import org.broadleafcommerce.common.persistence.EntityDuplicator;                                        </span>
<span class="-6648433550510659033" onmouseenter="enter('-6648433550510659033');" onmouseout="out('-6648433550510659033');" style="">  38 import org.broadleafcommerce.common.presentation.client.AddMethodType;                                   </span>
<span class="-7832706263011125937" onmouseenter="enter('-7832706263011125937');" onmouseout="out('-7832706263011125937');" style="">  39 import org.broadleafcommerce.common.presentation.client.AdornedTargetAddMethodType;                      </span>
<span class="-2413957740330241600" onmouseenter="enter('-2413957740330241600');" onmouseout="out('-2413957740330241600');" style="">  40 import org.broadleafcommerce.common.presentation.client.LookupType;                                      </span>
<span class="7296089998360266547" onmouseenter="enter('7296089998360266547');" onmouseout="out('7296089998360266547');" style="">  41 import org.broadleafcommerce.common.presentation.client.PersistencePerspectiveItemType;                  </span>
<span class="1362364260528215152" onmouseenter="enter('1362364260528215152');" onmouseout="out('1362364260528215152');" style="">  42 import org.broadleafcommerce.common.presentation.client.SupportedFieldType;                              </span>
<span class="-7583443881845767348" onmouseenter="enter('-7583443881845767348');" onmouseout="out('-7583443881845767348');" style="">  43 import org.broadleafcommerce.common.presentation.client.VisibilityEnum;                                  </span>
<span class="2428099238642943960" onmouseenter="enter('2428099238642943960');" onmouseout="out('2428099238642943960');" style="">  44 import org.broadleafcommerce.common.util.BLCMessageUtils;                                                </span>
<span class="578947422765016559" onmouseenter="enter('578947422765016559');" onmouseout="out('578947422765016559');" style="">  45 import org.broadleafcommerce.common.util.FormatUtil;                                                     </span>
<span class="-3347161074136237116" onmouseenter="enter('-3347161074136237116');" onmouseout="out('-3347161074136237116');" style="">  46 import org.broadleafcommerce.common.util.StringUtil;                                                     </span>
<span class="8689743329875302887" onmouseenter="enter('8689743329875302887');" onmouseout="out('8689743329875302887');" style="">  47 import org.broadleafcommerce.common.web.BroadleafRequestContext;                                         </span>
<span class="-3361215363157046739" onmouseenter="enter('-3361215363157046739');" onmouseout="out('-3361215363157046739');" style="">  48 import org.broadleafcommerce.openadmin.dto.AdornedTargetCollectionMetadata;                              </span>
<span class="-1781055592725563383" onmouseenter="enter('-1781055592725563383');" onmouseout="out('-1781055592725563383');" style="">  49 import org.broadleafcommerce.openadmin.dto.AdornedTargetList;                                            </span>
<span class="-6140296335181984013" onmouseenter="enter('-6140296335181984013');" onmouseout="out('-6140296335181984013');" style="">  50 import org.broadleafcommerce.openadmin.dto.BasicCollectionMetadata;                                      </span>
<span class="4427537537958608766" onmouseenter="enter('4427537537958608766');" onmouseout="out('4427537537958608766');" style="">  51 import org.broadleafcommerce.openadmin.dto.BasicFieldMetadata;                                           </span>
<span class="-1607559599739253077" onmouseenter="enter('-1607559599739253077');" onmouseout="out('-1607559599739253077');" style="">  52 import org.broadleafcommerce.openadmin.dto.ClassMetadata;                                                </span>
<span class="5550564421881377532" onmouseenter="enter('5550564421881377532');" onmouseout="out('5550564421881377532');" style="">  53 import org.broadleafcommerce.openadmin.dto.ClassTree;                                                    </span>
<span class="-3165611006566133086" onmouseenter="enter('-3165611006566133086');" onmouseout="out('-3165611006566133086');" style="">  54 import org.broadleafcommerce.openadmin.dto.CollectionMetadata;                                           </span>
<span class="-4742435063138209714" onmouseenter="enter('-4742435063138209714');" onmouseout="out('-4742435063138209714');" style="">  55 import org.broadleafcommerce.openadmin.dto.DynamicResultSet;                                             </span>
<span class="-5093421835888664541" onmouseenter="enter('-5093421835888664541');" onmouseout="out('-5093421835888664541');" style="">  56 import org.broadleafcommerce.openadmin.dto.Entity;                                                       </span>
<span class="-8829499667991596741" onmouseenter="enter('-8829499667991596741');" onmouseout="out('-8829499667991596741');" style="">  57 import org.broadleafcommerce.openadmin.dto.FieldMetadata;                                                </span>
<span class="-2271266034558779994" onmouseenter="enter('-2271266034558779994');" onmouseout="out('-2271266034558779994');" style="">  58 import org.broadleafcommerce.openadmin.dto.ForeignKey;                                                   </span>
<span class="826821438795056004" onmouseenter="enter('826821438795056004');" onmouseout="out('826821438795056004');" style="">  59 import org.broadleafcommerce.openadmin.dto.MapMetadata;                                                  </span>
<span class="-7888875133556467044" onmouseenter="enter('-7888875133556467044');" onmouseout="out('-7888875133556467044');" style="">  60 import org.broadleafcommerce.openadmin.dto.MapStructure;                                                 </span>
<span class="1983554291461039357" onmouseenter="enter('1983554291461039357');" onmouseout="out('1983554291461039357');" style="">  61 import org.broadleafcommerce.openadmin.dto.Property;                                                     </span>
<span class="1696571253156436279" onmouseenter="enter('1696571253156436279');" onmouseout="out('1696571253156436279');" style="">  62 import org.broadleafcommerce.openadmin.dto.SectionCrumb;                                                 </span>
<span class="5662236005419086618" onmouseenter="enter('5662236005419086618');" onmouseout="out('5662236005419086618');" style="">  63 import org.broadleafcommerce.openadmin.dto.TabMetadata;                                                  </span>
<span class="-8828889589519173652" onmouseenter="enter('-8828889589519173652');" onmouseout="out('-8828889589519173652');" style="">  64 import org.broadleafcommerce.openadmin.server.dao.DynamicEntityDao;                                      </span>
<span class="4410643013278245372" onmouseenter="enter('4410643013278245372');" onmouseout="out('4410643013278245372');" style="">  65 import org.broadleafcommerce.openadmin.server.domain.PersistencePackageRequest;                          </span>
<span class="-7620175268967942501" onmouseenter="enter('-7620175268967942501');" onmouseout="out('-7620175268967942501');" style="">  66 import org.broadleafcommerce.openadmin.server.security.domain.AdminSection;                              </span>
<span class="-6571883875867969954" onmouseenter="enter('-6571883875867969954');" onmouseout="out('-6571883875867969954');" style="">  67 import org.broadleafcommerce.openadmin.server.security.domain.AdminUser;                                 </span>
<span class="-4641149340176766185" onmouseenter="enter('-4641149340176766185');" onmouseout="out('-4641149340176766185');" style="">  68 import org.broadleafcommerce.openadmin.server.security.remote.EntityOperationType;                       </span>
<span class="8942483953505157490" onmouseenter="enter('8942483953505157490');" onmouseout="out('8942483953505157490');" style="">  69 import org.broadleafcommerce.openadmin.server.security.remote.SecurityVerifier;                          </span>
<span class="-5109104434282935941" onmouseenter="enter('-5109104434282935941');" onmouseout="out('-5109104434282935941');" style="">  70 import org.broadleafcommerce.openadmin.server.security.service.EntityFormModifier;                       </span>
<span class="-8160764320713173157" onmouseenter="enter('-8160764320713173157');" onmouseout="out('-8160764320713173157');" style="">  71 import org.broadleafcommerce.openadmin.server.security.service.EntityFormModifierConfiguration;          </span>
<span class="-7359249757017525541" onmouseenter="enter('-7359249757017525541');" onmouseout="out('-7359249757017525541');" style="">  72 import org.broadleafcommerce.openadmin.server.security.service.EntityFormModifierData;                   </span>
<span class="3347653686268274670" onmouseenter="enter('3347653686268274670');" onmouseout="out('3347653686268274670');" style="">  73 import org.broadleafcommerce.openadmin.server.security.service.EntityFormModifierDataPoint;              </span>
<span class="-5654897577089013652" onmouseenter="enter('-5654897577089013652');" onmouseout="out('-5654897577089013652');" style="">  74 import org.broadleafcommerce.openadmin.server.security.service.EntityFormModifierRequest;                </span>
<span class="8609771947297205873" onmouseenter="enter('8609771947297205873');" onmouseout="out('8609771947297205873');" style="">  75 import org.broadleafcommerce.openadmin.server.security.service.ExceptionAwareRowLevelSecurityProvider;   </span>
<span class="78786346091609662" onmouseenter="enter('78786346091609662');" onmouseout="out('78786346091609662');" style="">  76 import org.broadleafcommerce.openadmin.server.security.service.RowLevelSecurityService;                  </span>
<span class="-3170172369947649824" onmouseenter="enter('-3170172369947649824');" onmouseout="out('-3170172369947649824');" style="">  77 import org.broadleafcommerce.openadmin.server.security.service.navigation.AdminNavigationService;        </span>
<span class="-3881535627450957263" onmouseenter="enter('-3881535627450957263');" onmouseout="out('-3881535627450957263');" style="">  78 import org.broadleafcommerce.openadmin.server.service.AdminEntityService;                                </span>
<span class="-1454726158681359973" onmouseenter="enter('-1454726158681359973');" onmouseout="out('-1454726158681359973');" style="">  79 import org.broadleafcommerce.openadmin.server.service.persistence.PersistenceManager;                    </span>
<span class="97669409268306845" onmouseenter="enter('97669409268306845');" onmouseout="out('97669409268306845');" style="">  80 import org.broadleafcommerce.openadmin.server.service.persistence.PersistenceManagerFactory;             </span>
<span class="-3086540061138981164" onmouseenter="enter('-3086540061138981164');" onmouseout="out('-3086540061138981164');" style="">  81 import org.broadleafcommerce.openadmin.server.service.persistence.module.BasicPersistenceModule;         </span>
<span class="6020321283788374630" onmouseenter="enter('6020321283788374630');" onmouseout="out('6020321283788374630');" style="">  82 import org.broadleafcommerce.openadmin.server.service.persistence.module.FieldManager;                   </span>
<span class="-2042519459673859584" onmouseenter="enter('-2042519459673859584');" onmouseout="out('-2042519459673859584');" style="">  83 import org.broadleafcommerce.openadmin.web.form.component.DefaultListGridActions;                        </span>
<span class="3056790491614608405" onmouseenter="enter('3056790491614608405');" onmouseout="out('3056790491614608405');" style="">  84 import org.broadleafcommerce.openadmin.web.form.component.ListGrid;                                      </span>
<span class="5295362033766750426" onmouseenter="enter('5295362033766750426');" onmouseout="out('5295362033766750426');" style="">  85 import org.broadleafcommerce.openadmin.web.form.component.ListGridAction;                                </span>
<span class="-3450485825037219414" onmouseenter="enter('-3450485825037219414');" onmouseout="out('-3450485825037219414');" style="">  86 import org.broadleafcommerce.openadmin.web.form.component.ListGridActionGroup;                           </span>
<span class="-3405551311883594169" onmouseenter="enter('-3405551311883594169');" onmouseout="out('-3405551311883594169');" style="">  87 import org.broadleafcommerce.openadmin.web.form.component.ListGridRecord;                                </span>
<span class="-5608490858121609411" onmouseenter="enter('-5608490858121609411');" onmouseout="out('-5608490858121609411');" style="">  88 import org.broadleafcommerce.openadmin.web.form.component.MediaField;                                    </span>
<span class="-8639148455058795423" onmouseenter="enter('-8639148455058795423');" onmouseout="out('-8639148455058795423');" style="">  89 import org.broadleafcommerce.openadmin.web.form.component.RuleBuilderField;                              </span>
<span class="7920804437009762662" onmouseenter="enter('7920804437009762662');" onmouseout="out('7920804437009762662');" style="">  90 import org.broadleafcommerce.openadmin.web.form.entity.CodeField;                                        </span>
<span class="3594570724696916406" onmouseenter="enter('3594570724696916406');" onmouseout="out('3594570724696916406');" style="">  91 import org.broadleafcommerce.openadmin.web.form.entity.ComboField;                                       </span>
<span class="1405974373227613661" onmouseenter="enter('1405974373227613661');" onmouseout="out('1405974373227613661');" style="">  92 import org.broadleafcommerce.openadmin.web.form.entity.DefaultAdornedEntityFormActions;                  </span>
<span class="2718350422838759693" onmouseenter="enter('2718350422838759693');" onmouseout="out('2718350422838759693');" style="">  93 import org.broadleafcommerce.openadmin.web.form.entity.DefaultEntityFormActions;                         </span>
<span class="-7452009352681558215" onmouseenter="enter('-7452009352681558215');" onmouseout="out('-7452009352681558215');" style="">  94 import org.broadleafcommerce.openadmin.web.form.entity.DynamicEntityFormInfo;                            </span>
<span class="8035715143965725316" onmouseenter="enter('8035715143965725316');" onmouseout="out('8035715143965725316');" style="">  95 import org.broadleafcommerce.openadmin.web.form.entity.EntityForm;                                       </span>
<span class="6015559832933397076" onmouseenter="enter('6015559832933397076');" onmouseout="out('6015559832933397076');" style="">  96 import org.broadleafcommerce.openadmin.web.form.entity.Field;                                            </span>
<span class="-902704191270810798" onmouseenter="enter('-902704191270810798');" onmouseout="out('-902704191270810798');" style="">  97 import org.broadleafcommerce.openadmin.web.rulebuilder.DataDTODeserializer;                              </span>
<span class="-5891661051837252429" onmouseenter="enter('-5891661051837252429');" onmouseout="out('-5891661051837252429');" style="">  98 import org.broadleafcommerce.openadmin.web.rulebuilder.dto.DataDTO;                                      </span>
<span class="-5682953954690678360" onmouseenter="enter('-5682953954690678360');" onmouseout="out('-5682953954690678360');" style="">  99 import org.broadleafcommerce.openadmin.web.rulebuilder.dto.DataWrapper;                                  </span>
<span class="-5901812469549191870" onmouseenter="enter('-5901812469549191870');" onmouseout="out('-5901812469549191870');" style=""> 100 import org.broadleafcommerce.openadmin.web.rulebuilder.dto.FieldDTO;                                     </span>
<span class="5057654301829863353" onmouseenter="enter('5057654301829863353');" onmouseout="out('5057654301829863353');" style=""> 101 import org.broadleafcommerce.openadmin.web.rulebuilder.dto.FieldWrapper;                                 </span>
<span class="1299345749740405613" onmouseenter="enter('1299345749740405613');" onmouseout="out('1299345749740405613');" style=""> 102 import org.codehaus.jettison.json.JSONObject;                                                            </span>
<span class="-7404358339654927739" onmouseenter="enter('-7404358339654927739');" onmouseout="out('-7404358339654927739');" style=""> 103 import org.springframework.beans.factory.annotation.Value;                                               </span>
<span class="5894662938986881653" onmouseenter="enter('5894662938986881653');" onmouseout="out('5894662938986881653');" style=""> 104 import org.springframework.context.MessageSource;                                                        </span>
<span class="4998592591649731876" onmouseenter="enter('4998592591649731876');" onmouseout="out('4998592591649731876');" style=""> 105 import org.springframework.context.NoSuchMessageException;                                               </span>
<span class="-5275076188864034753" onmouseenter="enter('-5275076188864034753');" onmouseout="out('-5275076188864034753');" style=""> 106 import org.springframework.stereotype.Service;                                                           </span>
<span  style=""> 107                                                                                                          </span>
<span class="1687723025421661461" onmouseenter="enter('1687723025421661461');" onmouseout="out('1687723025421661461');" style=""> 108 import com.fasterxml.jackson.core.Version;                                                               </span>
<span class="3949390651369204057" onmouseenter="enter('3949390651369204057');" onmouseout="out('3949390651369204057');" style=""> 109 import com.fasterxml.jackson.databind.ObjectMapper;                                                      </span>
<span class="-4978580670739809564" onmouseenter="enter('-4978580670739809564');" onmouseout="out('-4978580670739809564');" style=""> 110 import com.fasterxml.jackson.databind.module.SimpleModule;                                               </span>
<span  style=""> 111                                                                                                          </span>
<span class="103340661636203254" onmouseenter="enter('103340661636203254');" onmouseout="out('103340661636203254');" style=""> 112 import java.io.IOException;                                                                              </span>
<span class="2075466404860203191" onmouseenter="enter('2075466404860203191');" onmouseout="out('2075466404860203191');" style=""> 113 import java.math.BigDecimal;                                                                             </span>
<span class="1238662365364477381" onmouseenter="enter('1238662365364477381');" onmouseout="out('1238662365364477381');" style=""> 114 import java.text.DateFormat;                                                                             </span>
<span class="5374616781072617946" onmouseenter="enter('5374616781072617946');" onmouseout="out('5374616781072617946');" style=""> 115 import java.text.DateFormatSymbols;                                                                      </span>
<span class="39790854174282861" onmouseenter="enter('39790854174282861');" onmouseout="out('39790854174282861');" style=""> 116 import java.text.ParseException;                                                                         </span>
<span class="54331962280914690" onmouseenter="enter('54331962280914690');" onmouseout="out('54331962280914690');" style=""> 117 import java.text.SimpleDateFormat;                                                                       </span>
<span class="9191247685397773893" onmouseenter="enter('9191247685397773893');" onmouseout="out('9191247685397773893');" style=""> 118 import java.util.ArrayList;                                                                              </span>
<span class="-28465676010609596" onmouseenter="enter('-28465676010609596');" onmouseout="out('-28465676010609596');" style=""> 119 import java.util.Arrays;                                                                                 </span>
<span class="2187055016371707860" onmouseenter="enter('2187055016371707860');" onmouseout="out('2187055016371707860');" style=""> 120 import java.util.Collections;                                                                            </span>
<span class="1748005127055838442" onmouseenter="enter('1748005127055838442');" onmouseout="out('1748005127055838442');" style=""> 121 import java.util.Date;                                                                                   </span>
<span class="4169599896190320038" onmouseenter="enter('4169599896190320038');" onmouseout="out('4169599896190320038');" style=""> 122 import java.util.HashMap;                                                                                </span>
<span class="-1786020958497218848" onmouseenter="enter('-1786020958497218848');" onmouseout="out('-1786020958497218848');" style=""> 123 import java.util.List;                                                                                   </span>
<span class="-4563680703184802189" onmouseenter="enter('-4563680703184802189');" onmouseout="out('-4563680703184802189');" style=""> 124 import java.util.Locale;                                                                                 </span>
<span class="6618655971923850695" onmouseenter="enter('6618655971923850695');" onmouseout="out('6618655971923850695');" style=""> 125 import java.util.Map;                                                                                    </span>
<span class="2393042000349901971" onmouseenter="enter('2393042000349901971');" onmouseout="out('2393042000349901971');" style=""> 126 import java.util.Map.Entry;                                                                              </span>
<span class="3384353015976675773" onmouseenter="enter('3384353015976675773');" onmouseout="out('3384353015976675773');" style=""> 127 import java.util.Set;                                                                                    </span>
<span  style=""> 128                                                                                                          </span>
<span class="-5292076237369528758" onmouseenter="enter('-5292076237369528758');" onmouseout="out('-5292076237369528758');" style=""> 129 import javax.annotation.Resource;                                                                        </span>
<span class="-2638882474121018940" onmouseenter="enter('-2638882474121018940');" onmouseout="out('-2638882474121018940');" style=""> 130 import javax.persistence.ManyToOne;                                                                      </span>
<span class="-1278149683069486932" onmouseenter="enter('-1278149683069486932');" onmouseout="out('-1278149683069486932');" style=""> 131 import javax.persistence.OneToOne;                                                                       </span>
<span class="-2972028083581866805" onmouseenter="enter('-2972028083581866805');" onmouseout="out('-2972028083581866805');" style=""> 132 import javax.servlet.http.HttpServletRequest;                                                            </span>
<span  style=""> 133                                                                                                          </span>
<span  style=""> 134                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 135 /**                                                                                                      </span>
<span class="-346667533686466806" onmouseenter="enter('-346667533686466806');" onmouseout="out('-346667533686466806');" style=""> 136  * @author Andre Azzolini (apazzolini)                                                                   </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 137  */                                                                                                      </span>
<span class="4305824758257676503" onmouseenter="enter('4305824758257676503');" onmouseout="out('4305824758257676503');" style=""> 138 @Service(&quot;blFormBuilderService&quot;)                                                                         </span>
<span class="1873196277582368359" onmouseenter="enter('1873196277582368359');" onmouseout="out('1873196277582368359');" style=""> 139 public class FormBuilderServiceImpl implements FormBuilderService {                                      </span>
<span  style=""> 140                                                                                                          </span>
<span class="4173594623362970870" onmouseenter="enter('4173594623362970870');" onmouseout="out('4173594623362970870');" style=""> 141     private static final Log LOG = LogFactory.getLog(FormBuilderServiceImpl.class);                      </span>
<span  style=""> 142                                                                                                          </span>
<span class="-3043900363751028803" onmouseenter="enter('-3043900363751028803');" onmouseout="out('-3043900363751028803');" style=""> 143     public static final String ALTERNATE_ID_PROPERTY = &quot;ALTERNATE_ID&quot;;                                   </span>
<span  style=""> 144                                                                                                          </span>
<span class="-7828706270204224343" onmouseenter="enter('-7828706270204224343');" onmouseout="out('-7828706270204224343');" style=""> 145     @Resource(name = &quot;blAdminEntityService&quot;)                                                             </span>
<span class="-8450140140941932116" onmouseenter="enter('-8450140140941932116');" onmouseout="out('-8450140140941932116');" style=""> 146     protected AdminEntityService adminEntityService;                                                     </span>
<span  style=""> 147                                                                                                          </span>
<span class="-1805811588903622951" onmouseenter="enter('-1805811588903622951');" onmouseout="out('-1805811588903622951');" style=""> 148     @Resource (name = &quot;blAdminNavigationService&quot;)                                                        </span>
<span class="-7781148449676317002" onmouseenter="enter('-7781148449676317002');" onmouseout="out('-7781148449676317002');" style=""> 149     protected AdminNavigationService navigationService;                                                  </span>
<span  style=""> 150                                                                                                          </span>
<span class="7211766058790837589" onmouseenter="enter('7211766058790837589');" onmouseout="out('7211766058790837589');" style=""> 151     @Resource(name = &quot;blFormBuilderExtensionManager&quot;)                                                    </span>
<span class="1458252146616806516" onmouseenter="enter('1458252146616806516');" onmouseout="out('1458252146616806516');" style=""> 152     protected FormBuilderExtensionManager extensionManager;                                              </span>
<span  style=""> 153                                                                                                          </span>
<span class="1637373992155499263" onmouseenter="enter('1637373992155499263');" onmouseout="out('1637373992155499263');" style=""> 154     @Resource(name=&quot;blEntityConfiguration&quot;)                                                              </span>
<span class="-8812870795397979367" onmouseenter="enter('-8812870795397979367');" onmouseout="out('-8812870795397979367');" style=""> 155     protected EntityConfiguration entityConfiguration;                                                   </span>
<span  style=""> 156                                                                                                          </span>
<span class="318567755561422223" onmouseenter="enter('318567755561422223');" onmouseout="out('318567755561422223');" style=""> 157     @Resource(name=&quot;blAdminSecurityRemoteService&quot;)                                                       </span>
<span class="-293302832217381009" onmouseenter="enter('-293302832217381009');" onmouseout="out('-293302832217381009');" style=""> 158     protected SecurityVerifier adminRemoteSecurityService;                                               </span>
<span  style=""> 159                                                                                                          </span>
<span class="-1073312679381587606" onmouseenter="enter('-1073312679381587606');" onmouseout="out('-1073312679381587606');" style=""> 160     @Resource(name = &quot;blRowLevelSecurityService&quot;)                                                        </span>
<span class="7292046362506695965" onmouseenter="enter('7292046362506695965');" onmouseout="out('7292046362506695965');" style=""> 161     protected RowLevelSecurityService rowLevelSecurityService;                                           </span>
<span  style=""> 162                                                                                                          </span>
<span class="582138269496436951" onmouseenter="enter('582138269496436951');" onmouseout="out('582138269496436951');" style=""> 163     @Resource(name = &quot;blMediaBuilderService&quot;)                                                            </span>
<span class="8749601783428818980" onmouseenter="enter('8749601783428818980');" onmouseout="out('8749601783428818980');" style=""> 164     protected MediaBuilderService mediaBuilderService;                                                   </span>
<span  style=""> 165                                                                                                          </span>
<span class="1982131321477089315" onmouseenter="enter('1982131321477089315');" onmouseout="out('1982131321477089315');" style=""> 166     @Resource(name = &quot;blListGridErrorMessageExtensionManager&quot;)                                           </span>
<span class="4649294380733883401" onmouseenter="enter('4649294380733883401');" onmouseout="out('4649294380733883401');" style=""> 167     protected ListGridErrorMessageExtensionManager listGridErrorExtensionManager;                        </span>
<span  style=""> 168                                                                                                          </span>
<span class="-6302300657638714180" onmouseenter="enter('-6302300657638714180');" onmouseout="out('-6302300657638714180');" style=""> 169     @Resource(name = &quot;blAdminNavigationService&quot;)                                                         </span>
<span class="-6025330588276587017" onmouseenter="enter('-6025330588276587017');" onmouseout="out('-6025330588276587017');" style=""> 170     protected AdminNavigationService adminNavigationService;                                             </span>
<span  style=""> 171                                                                                                          </span>
<span class="-4667942192763773056" onmouseenter="enter('-4667942192763773056');" onmouseout="out('-4667942192763773056');" style=""> 172 &lt;&lt;&lt;&lt;&lt;&lt;&lt; GitAnalyzerPlus_ours                                                                             </span>
<span class="4471392044492296285" onmouseenter="enter('4471392044492296285');" onmouseout="out('4471392044492296285');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 173     @Resource(name = &quot;blEntityDuplicator&quot;)                                                               </span>
<span class="-9194612273021432316" onmouseenter="enter('-9194612273021432316');" onmouseout="out('-9194612273021432316');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 174     protected EntityDuplicator duplicator;                                                               </span>
<span  style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 175                                                                                                          </span>
<span class="-8242037663383389708" onmouseenter="enter('-8242037663383389708');" onmouseout="out('-8242037663383389708');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 176     @Resource(name = &quot;blDynamicEntityDao&quot;)                                                               </span>
<span class="-6629482740079052882" onmouseenter="enter('-6629482740079052882');" onmouseout="out('-6629482740079052882');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 177     protected DynamicEntityDao dynamicEntityDao;                                                         </span>
<span class="6741223626729319096" onmouseenter="enter('6741223626729319096');" onmouseout="out('6741223626729319096');" style=""> 178 ||||||| GitAnalyzerPlus_base                                                                             </span>
<span class="4001768864648272267" onmouseenter="enter('4001768864648272267');" onmouseout="out('4001768864648272267');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 179     protected static final VisibilityEnum[] GRID_HIDDEN_VISIBILITIES = new VisibilityEnum[] {            </span>
<span class="5602397837491933700" onmouseenter="enter('5602397837491933700');" onmouseout="out('5602397837491933700');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 180             VisibilityEnum.HIDDEN_ALL, VisibilityEnum.GRID_HIDDEN                                        </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 181     };                                                                                                   </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 182                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 183     @Override                                                                                            </span>
<span class="3931952365643845454" onmouseenter="enter('3931952365643845454');" onmouseout="out('3931952365643845454');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"><abbr title=" 184     public ListGrid buildMainListGrid(DynamicResultSet drs, ClassMetadata cmd, String sectionKey, List&lt;SectionCrumb&gt; sectionCrumbs)"> 184     public ListGrid buildMainListGrid(DynamicResultSet drs, ClassMetadata cmd, String sectionKey, List&lt;SeðŸ”µ</abbr></span>
<span class="1998458335829271558" onmouseenter="enter('1998458335829271558');" onmouseout="out('1998458335829271558');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 185             throws ServiceException {                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 186                                                                                                          </span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style=""> 187 =======                                                                                                  </span>
<span class="6008764380027861894" onmouseenter="enter('6008764380027861894');" onmouseout="out('6008764380027861894');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 188     @Resource(name = &quot;blLocaleService&quot;)                                                                  </span>
<span class="-5080270678165807269" onmouseenter="enter('-5080270678165807269');" onmouseout="out('-5080270678165807269');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 189     protected LocaleService localeService;                                                               </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 190                                                                                                          </span>
<span class="2111635565141224242" onmouseenter="enter('2111635565141224242');" onmouseout="out('2111635565141224242');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 191     @Resource(name = &quot;blTranslationService&quot;)                                                             </span>
<span class="3630047639981215429" onmouseenter="enter('3630047639981215429');" onmouseout="out('3630047639981215429');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 192     protected TranslationService translationService;                                                     </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 193                                                                                                          </span>
<span class="-7553809325968652706" onmouseenter="enter('-7553809325968652706');" onmouseout="out('-7553809325968652706');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 194     @Value(&quot;${use.translation.search:false}&quot;)                                                            </span>
<span class="-2269006701771046036" onmouseenter="enter('-2269006701771046036');" onmouseout="out('-2269006701771046036');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 195     protected boolean useTranslationSearch;                                                              </span>
<span class="-1382546150375666264" onmouseenter="enter('-1382546150375666264');" onmouseout="out('-1382546150375666264');" style=""> 196 &gt;&gt;&gt;&gt;&gt;&gt;&gt; GitAnalyzerPlus_theirs                                                                           </span>
<span  style=""> 197                                                                                                          </span>
<span class="8033614225945187624" onmouseenter="enter('8033614225945187624');" onmouseout="out('8033614225945187624');" style=""> 198     protected static final VisibilityEnum[] FORM_HIDDEN_VISIBILITIES = new VisibilityEnum[] {            </span>
<span class="-8766489859370232859" onmouseenter="enter('-8766489859370232859');" onmouseout="out('-8766489859370232859');" style=""> 199             VisibilityEnum.HIDDEN_ALL, VisibilityEnum.FORM_HIDDEN                                        </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 200     };                                                                                                   </span>
<span  style=""> 201                                                                                                          </span>
<span class="4001768864648272267" onmouseenter="enter('4001768864648272267');" onmouseout="out('4001768864648272267');" style=""> 202     protected static final VisibilityEnum[] GRID_HIDDEN_VISIBILITIES = new VisibilityEnum[] {            </span>
<span class="5602397837491933700" onmouseenter="enter('5602397837491933700');" onmouseout="out('5602397837491933700');" style=""> 203             VisibilityEnum.HIDDEN_ALL, VisibilityEnum.GRID_HIDDEN                                        </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 204     };                                                                                                   </span>
<span  style=""> 205                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 206     @Override                                                                                            </span>
<span class="3931952365643845454" onmouseenter="enter('3931952365643845454');" onmouseout="out('3931952365643845454');" style=""><abbr title=" 207     public ListGrid buildMainListGrid(DynamicResultSet drs, ClassMetadata cmd, String sectionKey, List&lt;SectionCrumb&gt; sectionCrumbs)"> 207     public ListGrid buildMainListGrid(DynamicResultSet drs, ClassMetadata cmd, String sectionKey, List&lt;SeðŸ”µ</abbr></span>
<span class="1998458335829271558" onmouseenter="enter('1998458335829271558');" onmouseout="out('1998458335829271558');" style=""> 208             throws ServiceException {                                                                    </span>
<span  style=""> 209                                                                                                          </span>
<span class="-7098425003691580554" onmouseenter="enter('-7098425003691580554');" onmouseout="out('-7098425003691580554');" style=""> 210         List&lt;Field&gt; headerFields = new ArrayList&lt;&gt;();                                                    </span>
<span class="1627698519761414576" onmouseenter="enter('1627698519761414576');" onmouseout="out('1627698519761414576');" style=""> 211         ListGrid.Type type = ListGrid.Type.MAIN;                                                         </span>
<span class="-2507165338472177227" onmouseenter="enter('-2507165338472177227');" onmouseout="out('-2507165338472177227');" style=""> 212         String idProperty = &quot;id&quot;;                                                                        </span>
<span  style=""> 213                                                                                                          </span>
<span class="1914895525805456392" onmouseenter="enter('1914895525805456392');" onmouseout="out('1914895525805456392');" style=""> 214         FieldWrapper wrapper = new FieldWrapper();                                                       </span>
<span class="519132227955412437" onmouseenter="enter('519132227955412437');" onmouseout="out('519132227955412437');" style=""> 215         ArrayList&lt;FieldDTO&gt; defaultWrapperFields = new ArrayList&lt;&gt;();                                    </span>
<span class="3681854507729164346" onmouseenter="enter('3681854507729164346');" onmouseout="out('3681854507729164346');" style=""> 216         for (Property p : cmd.getProperties()) {                                                         </span>
<span class="-1029066852878262358" onmouseenter="enter('-1029066852878262358');" onmouseout="out('-1029066852878262358');" style=""> 217             if (p.getMetadata() instanceof BasicFieldMetadata) {                                         </span>
<span class="-5664285287189453326" onmouseenter="enter('-5664285287189453326');" onmouseout="out('-5664285287189453326');" style=""> 218                 BasicFieldMetadata fmd = (BasicFieldMetadata) p.getMetadata();                           </span>
<span  style=""> 219                                                                                                          </span>
<span class="18031332680368663" onmouseenter="enter('18031332680368663');" onmouseout="out('18031332680368663');" style=""> 220                 if (SupportedFieldType.ID.equals(fmd.getFieldType())) {                                  </span>
<span class="-3962609225474086388" onmouseenter="enter('-3962609225474086388');" onmouseout="out('-3962609225474086388');" style=""> 221                     idProperty = fmd.getName();                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 222                 }                                                                                        </span>
<span  style=""> 223                                                                                                          </span>
<span class="-4421297623821608279" onmouseenter="enter('-4421297623821608279');" onmouseout="out('-4421297623821608279');" style=""> 224                 if (fmd.isProminent() != null &amp;&amp; fmd.isProminent()                                       </span>
<span class="-1250799748677743340" onmouseenter="enter('-1250799748677743340');" onmouseout="out('-1250799748677743340');" style=""> 225                         &amp;&amp; !ArrayUtils.contains(getGridHiddenVisibilities(), fmd.getVisibility())) {     </span>
<span class="-8490871683061304534" onmouseenter="enter('-8490871683061304534');" onmouseout="out('-8490871683061304534');" style=""> 226                     Field hf = createHeaderField(p, fmd);                                                </span>
<span class="465504053416102059" onmouseenter="enter('465504053416102059');" onmouseout="out('465504053416102059');" style=""> 227                     headerFields.add(hf);                                                                </span>
<span class="6861300594848012112" onmouseenter="enter('6861300594848012112');" onmouseout="out('6861300594848012112');" style=""> 228                     defaultWrapperFields.add(constructFieldDTOFromFieldData(hf, fmd));                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 229                 }                                                                                        </span>
<span  style=""> 230                                                                                                          </span>
<span class="7456310891309661190" onmouseenter="enter('7456310891309661190');" onmouseout="out('7456310891309661190');" style=""> 231                 if (fmd.getIsFilter() != null &amp;&amp; fmd.getIsFilter()) {                                    </span>
<span class="2276813412477598729" onmouseenter="enter('2276813412477598729');" onmouseout="out('2276813412477598729');" style=""><abbr title=" 232                     wrapper.getFields().add(constructFieldDTOFromFieldData(createHeaderField(p, fmd), fmd));"> 232                     wrapper.getFields().add(constructFieldDTOFromFieldData(createHeaderField(p, fmd), fmdðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 233                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 234             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 235         }                                                                                                </span>
<span  style=""> 236                                                                                                          </span>
<span class="7035902688492109722" onmouseenter="enter('7035902688492109722');" onmouseout="out('7035902688492109722');" style=""> 237         if (useTranslationSearch) {                                                                      </span>
<span class="5781419264587889352" onmouseenter="enter('5781419264587889352');" onmouseout="out('5781419264587889352');" style=""> 238             getTranslationSearchField(cmd.getCeilingType(), defaultWrapperFields);                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 239         }                                                                                                </span>
<span  style=""> 240                                                                                                          </span>
<span class="-2480148942784560805" onmouseenter="enter('-2480148942784560805');" onmouseout="out('-2480148942784560805');" style=""><abbr title=" 241         ListGrid listGrid = createListGrid(cmd.getCeilingType(), headerFields, type, drs, sectionKey, 0, idProperty, sectionCrumbs);"> 241         ListGrid listGrid = createListGrid(cmd.getCeilingType(), headerFields, type, drs, sectionKey, 0, ðŸ”µ</abbr></span>
<span  style=""> 242                                                                                                          </span>
<span class="5965161931380536237" onmouseenter="enter('5965161931380536237');" onmouseout="out('5965161931380536237');" style=""> 243         if (CollectionUtils.isNotEmpty(listGrid.getHeaderFields())) {                                    </span>
<span class="3953700823140818229" onmouseenter="enter('3953700823140818229');" onmouseout="out('3953700823140818229');" style=""> 244             // Set the first column to be able to link to the main entity                                </span>
<span class="2105374103692198201" onmouseenter="enter('2105374103692198201');" onmouseout="out('2105374103692198201');" style=""> 245             listGrid.getHeaderFields().iterator().next().setMainEntityLink(true);                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 246         } else {                                                                                         </span>
<span class="-7706502187775684276" onmouseenter="enter('-7706502187775684276');" onmouseout="out('-7706502187775684276');" style=""><abbr title=" 247             String message = &quot;There are no listgrid header fields configured for the class &quot; + cmd.getCeilingType();"> 247             String message = &quot;There are no listgrid header fields configured for the class &quot; + cmd.getCeiðŸ”µ</abbr></span>
<span class="4913519471581000034" onmouseenter="enter('4913519471581000034');" onmouseout="out('4913519471581000034');" style=""> 248             message += &quot;Please mark some @AdminPresentation fields with &#x27;prominent = true&#x27;&quot;;             </span>
<span class="683988342023046623" onmouseenter="enter('683988342023046623');" onmouseout="out('683988342023046623');" style=""> 249             LOG.error(message);                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 250         }                                                                                                </span>
<span  style=""> 251                                                                                                          </span>
<span class="1067693587814186246" onmouseenter="enter('1067693587814186246');" onmouseout="out('1067693587814186246');" style=""> 252         Date c = new Date();                                                                             </span>
<span class="488922592354253720" onmouseenter="enter('488922592354253720');" onmouseout="out('488922592354253720');" style=""> 253         String friendlyName = &quot;listGrid&quot; + c.getTime();                                                  </span>
<span class="2615168876841014995" onmouseenter="enter('2615168876841014995');" onmouseout="out('2615168876841014995');" style=""> 254         // Set up the filter builder params                                                              </span>
<span class="3627072983536168024" onmouseenter="enter('3627072983536168024');" onmouseout="out('3627072983536168024');" style=""> 255         listGrid.setJsonFieldName(friendlyName + &quot;Json&quot;);                                                </span>
<span class="6488323689834765207" onmouseenter="enter('6488323689834765207');" onmouseout="out('6488323689834765207');" style=""> 256         listGrid.setFriendlyName(friendlyName);                                                          </span>
<span class="-4532597237542010033" onmouseenter="enter('-4532597237542010033');" onmouseout="out('-4532597237542010033');" style=""> 257         listGrid.setFieldBuilder(&quot;RULE_SIMPLE&quot;);                                                         </span>
<span class="2366326534416496613" onmouseenter="enter('2366326534416496613');" onmouseout="out('2366326534416496613');" style=""> 258         if (CollectionUtils.isEmpty(wrapper.getFields())) {                                              </span>
<span class="532531496111421469" onmouseenter="enter('532531496111421469');" onmouseout="out('532531496111421469');" style=""> 259             wrapper.setFields(defaultWrapperFields);                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 260         }                                                                                                </span>
<span class="8083895692807517727" onmouseenter="enter('8083895692807517727');" onmouseout="out('8083895692807517727');" style=""> 261         listGrid.setFieldWrapper(wrapper);                                                               </span>
<span class="-5116449029302148886" onmouseenter="enter('-5116449029302148886');" onmouseout="out('-5116449029302148886');" style=""> 262         listGrid.setHideFriendlyName(true);                                                              </span>
<span  style=""> 263                                                                                                          </span>
<span class="4466331963824990789" onmouseenter="enter('4466331963824990789');" onmouseout="out('4466331963824990789');" style=""> 264         String blankJsonString =  &quot;{\&quot;data\&quot;:[]}&quot;;                                                       </span>
<span class="7445610059504327235" onmouseenter="enter('7445610059504327235');" onmouseout="out('7445610059504327235');" style=""> 265         listGrid.setJson(blankJsonString);                                                               </span>
<span class="-6647315222721447684" onmouseenter="enter('-6647315222721447684');" onmouseout="out('-6647315222721447684');" style=""> 266         DataWrapper dw = convertJsonToDataWrapper(blankJsonString);                                      </span>
<span class="-3408161092817379645" onmouseenter="enter('-3408161092817379645');" onmouseout="out('-3408161092817379645');" style=""> 267         if (dw != null) {                                                                                </span>
<span class="-933372440492481068" onmouseenter="enter('-933372440492481068');" onmouseout="out('-933372440492481068');" style=""> 268             listGrid.setDataWrapper(dw);                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 269         }                                                                                                </span>
<span  style=""> 270                                                                                                          </span>
<span class="2808273481648426142" onmouseenter="enter('2808273481648426142');" onmouseout="out('2808273481648426142');" style=""> 271         listGrid.addModalRowAction(DefaultListGridActions.SINGLE_SELECT);                                </span>
<span class="-7419173722157864798" onmouseenter="enter('-7419173722157864798');" onmouseout="out('-7419173722157864798');" style=""> 272         listGrid.setSelectType(ListGrid.SelectType.SINGLE_SELECT);                                       </span>
<span  style=""> 273                                                                                                          </span>
<span class="-5511350038403165520" onmouseenter="enter('-5511350038403165520');" onmouseout="out('-5511350038403165520');" style=""> 274         extensionManager.getProxy().modifyListGrid(listGrid.getClassName(), listGrid);                   </span>
<span  style=""> 275                                                                                                          </span>
<span class="8338561479600990216" onmouseenter="enter('8338561479600990216');" onmouseout="out('8338561479600990216');" style=""> 276         return listGrid;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 277     }                                                                                                    </span>
<span  style=""> 278                                                                                                          </span>
<span class="-2473495746700041727" onmouseenter="enter('-2473495746700041727');" onmouseout="out('-2473495746700041727');" style=""><abbr title=" 279     private void getTranslationSearchField(String ceilingEntity, ArrayList&lt;FieldDTO&gt; defaultWrapperFields) {"> 279     private void getTranslationSearchField(String ceilingEntity, ArrayList&lt;FieldDTO&gt; defaultWrapperFieldsðŸ”µ</abbr></span>
<span  style=""> 280                                                                                                          </span>
<span class="-3232888912368159607" onmouseenter="enter('-3232888912368159607');" onmouseout="out('-3232888912368159607');" style=""> 281         TranslatedEntity translatedEntity;                                                               </span>
<span  style=""> 282                                                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 283         try {                                                                                            </span>
<span class="-5244579722591725998" onmouseenter="enter('-5244579722591725998');" onmouseout="out('-5244579722591725998');" style=""> 284             translatedEntity = translationService.getAssignableEntityType(ceilingEntity);                </span>
<span  style=""> 285                                                                                                          </span>
<span class="-7754722203743621702" onmouseenter="enter('-7754722203743621702');" onmouseout="out('-7754722203743621702');" style=""> 286             FieldDTO localeField = new FieldDTO();                                                       </span>
<span class="-650403806001508418" onmouseenter="enter('-650403806001508418');" onmouseout="out('-650403806001508418');" style=""> 287             localeField.setId(&quot;translationLocale&quot;);                                                      </span>
<span class="8883986331867249527" onmouseenter="enter('8883986331867249527');" onmouseout="out('8883986331867249527');" style=""> 288             localeField.setLabel(&quot;Translation locale&quot;);                                                  </span>
<span class="7199208923750727297" onmouseenter="enter('7199208923750727297');" onmouseout="out('7199208923750727297');" style=""> 289             localeField.setOperators(&quot;blcFilterOperators_Enumeration&quot;);                                  </span>
<span class="448314703673594143" onmouseenter="enter('448314703673594143');" onmouseout="out('448314703673594143');" style=""> 290             localeField.setInput(&quot;select&quot;);                                                              </span>
<span class="-8761693359075365287" onmouseenter="enter('-8761693359075365287');" onmouseout="out('-8761693359075365287');" style=""> 291             localeField.setType(&quot;string&quot;);                                                               </span>
<span  style=""> 292                                                                                                          </span>
<span class="-5174724837975624583" onmouseenter="enter('-5174724837975624583');" onmouseout="out('-5174724837975624583');" style=""><abbr title=" 293             List&lt;org.broadleafcommerce.common.locale.domain.Locale&gt; locales = localeService.findAllLocales();"> 293             List&lt;org.broadleafcommerce.common.locale.domain.Locale&gt; locales = localeService.findAllLocaleðŸ”µ</abbr></span>
<span  style=""> 294                                                                                                          </span>
<span class="-3424573618742224536" onmouseenter="enter('-3424573618742224536');" onmouseout="out('-3424573618742224536');" style=""> 295             Map&lt;String, String&gt; localeMap = new HashMap&lt;String, String&gt;();                               </span>
<span class="1309094753405556630" onmouseenter="enter('1309094753405556630');" onmouseout="out('1309094753405556630');" style=""> 296             for (org.broadleafcommerce.common.locale.domain.Locale l : locales) {                        </span>
<span class="-2731689503985129359" onmouseenter="enter('-2731689503985129359');" onmouseout="out('-2731689503985129359');" style=""> 297                 localeMap.put(l.getLocaleCode(), l.getFriendlyName());                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 298             }                                                                                            </span>
<span class="-1902025200407977862" onmouseenter="enter('-1902025200407977862');" onmouseout="out('-1902025200407977862');" style=""> 299             localeField.setValues((new JSONObject(localeMap)).toString());                               </span>
<span  style=""> 300                                                                                                          </span>
<span class="-5238173597469744650" onmouseenter="enter('-5238173597469744650');" onmouseout="out('-5238173597469744650');" style=""> 301             defaultWrapperFields.add(localeField);                                                       </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 302         } catch (Exception e) {                                                                          </span>
<span class="-6052835720919181276" onmouseenter="enter('-6052835720919181276');" onmouseout="out('-6052835720919181276');" style=""> 303             translatedEntity = null;                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 304         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 305     }                                                                                                    </span>
<span  style=""> 306                                                                                                          </span>
<span class="699891459148766711" onmouseenter="enter('699891459148766711');" onmouseout="out('699891459148766711');" style=""> 307     protected FieldDTO constructFieldDTOFromFieldData(Field field, BasicFieldMetadata fmd) {             </span>
<span class="-2352177721144438592" onmouseenter="enter('-2352177721144438592');" onmouseout="out('-2352177721144438592');" style=""> 308         FieldDTO fieldDTO = new FieldDTO();                                                              </span>
<span class="-1955942127076587982" onmouseenter="enter('-1955942127076587982');" onmouseout="out('-1955942127076587982');" style=""> 309         //translate the label to display                                                                 </span>
<span class="-4249384918250439089" onmouseenter="enter('-4249384918250439089');" onmouseout="out('-4249384918250439089');" style=""> 310         String label = field.getFriendlyName();                                                          </span>
<span class="-7826420477706002406" onmouseenter="enter('-7826420477706002406');" onmouseout="out('-7826420477706002406');" style=""> 311         BroadleafRequestContext context = BroadleafRequestContext.getBroadleafRequestContext();          </span>
<span class="6441987552844354413" onmouseenter="enter('6441987552844354413');" onmouseout="out('6441987552844354413');" style=""> 312         MessageSource messages = context.getMessageSource();                                             </span>
<span class="5121225958291793486" onmouseenter="enter('5121225958291793486');" onmouseout="out('5121225958291793486');" style=""> 313         if (messages != null) {                                                                          </span>
<span class="8253723406718302376" onmouseenter="enter('8253723406718302376');" onmouseout="out('8253723406718302376');" style=""> 314             label = messages.getMessage(label, null, label, context.getJavaLocale());                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 315         }                                                                                                </span>
<span class="7762483336458153581" onmouseenter="enter('7762483336458153581');" onmouseout="out('7762483336458153581');" style=""> 316         fieldDTO.setLabel(label);                                                                        </span>
<span  style=""> 317                                                                                                          </span>
<span class="-8673723023935338374" onmouseenter="enter('-8673723023935338374');" onmouseout="out('-8673723023935338374');" style=""> 318         fieldDTO.setId(field.getName());                                                                 </span>
<span class="199309371382711712" onmouseenter="enter('199309371382711712');" onmouseout="out('199309371382711712');" style=""> 319         if (field.getFieldType().equals(&quot;STRING&quot;)) {                                                     </span>
<span class="8880270445034694758" onmouseenter="enter('8880270445034694758');" onmouseout="out('8880270445034694758');" style=""> 320             fieldDTO.setOperators(&quot;blcFilterOperators_Text&quot;);                                            </span>
<span class="362132093975857936" onmouseenter="enter('362132093975857936');" onmouseout="out('362132093975857936');" style=""> 321         } else if (field.getFieldType().equals(&quot;DATE&quot;)) {                                                </span>
<span class="-933802372622143860" onmouseenter="enter('-933802372622143860');" onmouseout="out('-933802372622143860');" style=""> 322             fieldDTO.setOperators(&quot;blcFilterOperators_Date&quot;);                                            </span>
<span class="6478164380950858712" onmouseenter="enter('6478164380950858712');" onmouseout="out('6478164380950858712');" style=""><abbr title=" 323         } else if (field.getFieldType().equals(&quot;NUMBER&quot;) || field.getFieldType().equals(&quot;MONEY&quot;) || field.getFieldType().equals(&quot;DECIMAL&quot;)) {"> 323         } else if (field.getFieldType().equals(&quot;NUMBER&quot;) || field.getFieldType().equals(&quot;MONEY&quot;) || fieldðŸ”µ</abbr></span>
<span class="8490956018155589877" onmouseenter="enter('8490956018155589877');" onmouseout="out('8490956018155589877');" style=""> 324             fieldDTO.setOperators(&quot;blcFilterOperators_Numeric&quot;);                                         </span>
<span class="-3955546677505185448" onmouseenter="enter('-3955546677505185448');" onmouseout="out('-3955546677505185448');" style=""> 325         } else if (field.getFieldType().equals(&quot;BOOLEAN&quot;)) {                                             </span>
<span class="-8455532459880737207" onmouseenter="enter('-8455532459880737207');" onmouseout="out('-8455532459880737207');" style=""> 326             fieldDTO.setOperators(&quot;blcFilterOperators_Boolean&quot;);                                         </span>
<span class="-8945465979032715781" onmouseenter="enter('-8945465979032715781');" onmouseout="out('-8945465979032715781');" style=""> 327         } else if (field.getFieldType().equals(&quot;BROADLEAF_ENUMERATION&quot;)) {                               </span>
<span class="7946158486041049881" onmouseenter="enter('7946158486041049881');" onmouseout="out('7946158486041049881');" style=""> 328             fieldDTO.setOperators(&quot;blcFilterOperators_Enumeration&quot;);                                     </span>
<span class="-1687118105305598570" onmouseenter="enter('-1687118105305598570');" onmouseout="out('-1687118105305598570');" style=""> 329             fieldDTO.setInput(&quot;select&quot;);                                                                 </span>
<span class="5956593754221125403" onmouseenter="enter('5956593754221125403');" onmouseout="out('5956593754221125403');" style=""> 330             fieldDTO.setType(&quot;string&quot;);                                                                  </span>
<span class="-8055867514585232964" onmouseenter="enter('-8055867514585232964');" onmouseout="out('-8055867514585232964');" style=""> 331             String[][] enumerationValues = fmd.getEnumerationValues ();                                  </span>
<span class="-2928874460015298174" onmouseenter="enter('-2928874460015298174');" onmouseout="out('-2928874460015298174');" style=""> 332             Map&lt;String, String&gt; enumMap = new HashMap&lt;&gt;();                                               </span>
<span class="-8241397125169255693" onmouseenter="enter('-8241397125169255693');" onmouseout="out('-8241397125169255693');" style=""> 333             for (int i = 0; i &lt; enumerationValues.length; i++) {                                         </span>
<span class="3518234982487844996" onmouseenter="enter('3518234982487844996');" onmouseout="out('3518234982487844996');" style=""> 334                 enumMap.put(enumerationValues[i][0], enumerationValues[i][1]);                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 335             }                                                                                            </span>
<span  style=""> 336                                                                                                          </span>
<span class="6553005935364150402" onmouseenter="enter('6553005935364150402');" onmouseout="out('6553005935364150402');" style=""> 337             fieldDTO.setValues(new JSONObject(enumMap).toString());                                      </span>
<span class="-5703564682837731123" onmouseenter="enter('-5703564682837731123');" onmouseout="out('-5703564682837731123');" style=""> 338         } else if (field.getFieldType().equals(&quot;ADDITIONAL_FOREIGN_KEY&quot;)) {                              </span>
<span class="4888432392511853941" onmouseenter="enter('4888432392511853941');" onmouseout="out('4888432392511853941');" style=""> 339             fieldDTO.setOperators(&quot;blcFilterOperators_Selectize&quot;);                                       </span>
<span class="5956593754221125403" onmouseenter="enter('5956593754221125403');" onmouseout="out('5956593754221125403');" style=""> 340             fieldDTO.setType(&quot;string&quot;);                                                                  </span>
<span  style=""> 341                                                                                                          </span>
<span class="-7218290231764700666" onmouseenter="enter('-7218290231764700666');" onmouseout="out('-7218290231764700666');" style=""><abbr title=" 342             AdminSection section = adminNavigationService.findAdminSectionByClassAndSectionId(fmd.getForeignKeyClass(), null);"> 342             AdminSection section = adminNavigationService.findAdminSectionByClassAndSectionId(fmd.getForeðŸ”µ</abbr></span>
<span class="2297837107111400660" onmouseenter="enter('2297837107111400660');" onmouseout="out('2297837107111400660');" style=""> 343             if (section != null) {                                                                       </span>
<span class="7209555309149439987" onmouseenter="enter('7209555309149439987');" onmouseout="out('7209555309149439987');" style=""> 344                 String sectionKey = section.getUrl().substring(1);                                       </span>
<span class="-1035532662553188661" onmouseenter="enter('-1035532662553188661');" onmouseout="out('-1035532662553188661');" style=""> 345                 fieldDTO.setSelectizeSectionKey(sectionKey);                                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 346             } else {                                                                                     </span>
<span class="-1256248398739173538" onmouseenter="enter('-1256248398739173538');" onmouseout="out('-1256248398739173538');" style=""> 347                 fieldDTO.setSelectizeSectionKey(fmd.getForeignKeyClass());                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 348             }                                                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 349         } else {                                                                                         </span>
<span class="8880270445034694758" onmouseenter="enter('8880270445034694758');" onmouseout="out('8880270445034694758');" style=""> 350             fieldDTO.setOperators(&quot;blcFilterOperators_Text&quot;);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 351         }                                                                                                </span>
<span  style=""> 352                                                                                                          </span>
<span class="1806966708924182038" onmouseenter="enter('1806966708924182038');" onmouseout="out('1806966708924182038');" style=""> 353         return fieldDTO;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 354     }                                                                                                    </span>
<span  style=""> 355                                                                                                          </span>
<span class="2032004802479742635" onmouseenter="enter('2032004802479742635');" onmouseout="out('2032004802479742635');" style=""> 356     protected Field createHeaderField(Property p, BasicFieldMetadata fmd) {                              </span>
<span class="427159967034734869" onmouseenter="enter('427159967034734869');" onmouseout="out('427159967034734869');" style=""> 357         Field hf;                                                                                        </span>
<span class="-6909671090697516708" onmouseenter="enter('-6909671090697516708');" onmouseout="out('-6909671090697516708');" style=""> 358         if (fmd.getFieldType().equals(SupportedFieldType.EXPLICIT_ENUMERATION) ||                        </span>
<span class="7742695259499854892" onmouseenter="enter('7742695259499854892');" onmouseout="out('7742695259499854892');" style=""> 359                 fmd.getFieldType().equals(SupportedFieldType.BROADLEAF_ENUMERATION) ||                   </span>
<span class="-7610412024039368203" onmouseenter="enter('-7610412024039368203');" onmouseout="out('-7610412024039368203');" style=""> 360                 fmd.getFieldType().equals(SupportedFieldType.DATA_DRIVEN_ENUMERATION) ||                 </span>
<span class="4727590924096529195" onmouseenter="enter('4727590924096529195');" onmouseout="out('4727590924096529195');" style=""> 361                 fmd.getFieldType().equals(SupportedFieldType.EMPTY_ENUMERATION)) {                       </span>
<span class="-4376407603411664672" onmouseenter="enter('-4376407603411664672');" onmouseout="out('-4376407603411664672');" style=""> 362             hf = new ComboField();                                                                       </span>
<span class="5290847828500288961" onmouseenter="enter('5290847828500288961');" onmouseout="out('5290847828500288961');" style=""> 363             ((ComboField) hf).setOptions(fmd.getEnumerationValues());                                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 364         } else {                                                                                         </span>
<span class="5244670954290190768" onmouseenter="enter('5244670954290190768');" onmouseout="out('5244670954290190768');" style=""> 365             hf = new Field();                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 366         }                                                                                                </span>
<span  style=""> 367                                                                                                          </span>
<span class="-8016020800600825313" onmouseenter="enter('-8016020800600825313');" onmouseout="out('-8016020800600825313');" style=""> 368         hf.withName(p.getName())                                                                         </span>
<span class="-6196212150372307342" onmouseenter="enter('-6196212150372307342');" onmouseout="out('-6196212150372307342');" style=""><abbr title=" 369           .withFriendlyName(StringUtils.isNotEmpty(fmd.getFriendlyName()) ? fmd.getFriendlyName() : p.getName())"> 369           .withFriendlyName(StringUtils.isNotEmpty(fmd.getFriendlyName()) ? fmd.getFriendlyName() : p.getðŸ”µ</abbr></span>
<span class="-8419553007953225668" onmouseenter="enter('-8419553007953225668');" onmouseout="out('-8419553007953225668');" style=""> 370           .withOrder(fmd.getGridOrder())                                                                 </span>
<span class="1117956679003990491" onmouseenter="enter('1117956679003990491');" onmouseout="out('1117956679003990491');" style=""> 371           .withColumnWidth(fmd.getColumnWidth())                                                         </span>
<span class="3058247827263925638" onmouseenter="enter('3058247827263925638');" onmouseout="out('3058247827263925638');" style=""> 372           .withForeignKeyDisplayValueProperty(fmd.getForeignKeyDisplayValueProperty())                   </span>
<span class="3198496511046166958" onmouseenter="enter('3198496511046166958');" onmouseout="out('3198496511046166958');" style=""> 373           .withForeignKeyClass(fmd.getForeignKeyClass())                                                 </span>
<span class="-2338070414188990290" onmouseenter="enter('-2338070414188990290');" onmouseout="out('-2338070414188990290');" style=""> 374           .withForeignKeySectionPath(getAdminSectionPath(fmd.getForeignKeyClass()))                      </span>
<span class="6217223457568112539" onmouseenter="enter('6217223457568112539');" onmouseout="out('6217223457568112539');" style=""><abbr title=" 375           .withOwningEntityClass(fmd.getOwningClass() != null ? fmd.getOwningClass() : fmd.getTargetClass())"> 375           .withOwningEntityClass(fmd.getOwningClass() != null ? fmd.getOwningClass() : fmd.getTargetClassðŸ”µ</abbr></span>
<span class="-5416800581554261750" onmouseenter="enter('-5416800581554261750');" onmouseout="out('-5416800581554261750');" style=""> 376           .withCanLinkToExternalEntity(fmd.getCanLinkToExternalEntity());                                </span>
<span class="5921747215124261866" onmouseenter="enter('5921747215124261866');" onmouseout="out('5921747215124261866');" style=""> 377         String fieldType = fmd.getFieldType() == null ? null : fmd.getFieldType().toString();            </span>
<span class="6628044949969244118" onmouseenter="enter('6628044949969244118');" onmouseout="out('6628044949969244118');" style=""> 378         hf.setFieldType(fieldType);                                                                      </span>
<span  style=""> 379                                                                                                          </span>
<span class="-6552084929958187472" onmouseenter="enter('-6552084929958187472');" onmouseout="out('-6552084929958187472');" style=""> 380         return hf;                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 381     }                                                                                                    </span>
<span  style=""> 382                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 383     @Override                                                                                            </span>
<span class="-5402852713479232147" onmouseenter="enter('-5402852713479232147');" onmouseout="out('-5402852713479232147');" style=""><abbr title=" 384     public ListGrid buildCollectionListGrid(String containingEntityId, DynamicResultSet drs, Property field, "> 384     public ListGrid buildCollectionListGrid(String containingEntityId, DynamicResultSet drs, Property fieðŸ”µ</abbr></span>
<span class="8976903068062443392" onmouseenter="enter('8976903068062443392');" onmouseout="out('8976903068062443392');" style=""> 385             String sectionKey, List&lt;SectionCrumb&gt; sectionCrumbs)                                         </span>
<span class="1998458335829271558" onmouseenter="enter('1998458335829271558');" onmouseout="out('1998458335829271558');" style=""> 386             throws ServiceException {                                                                    </span>
<span class="3501499603601527305" onmouseenter="enter('3501499603601527305');" onmouseout="out('3501499603601527305');" style=""> 387         FieldMetadata fmd = field.getMetadata();                                                         </span>
<span class="6565595844041240946" onmouseenter="enter('6565595844041240946');" onmouseout="out('6565595844041240946');" style=""> 388         // Get the class metadata for this particular field                                              </span>
<span class="-8834884127458938753" onmouseenter="enter('-8834884127458938753');" onmouseout="out('-8834884127458938753');" style=""> 389         PersistencePackageRequest ppr = PersistencePackageRequest.fromMetadata(fmd, sectionCrumbs);      </span>
<span class="-470699824173107204" onmouseenter="enter('-470699824173107204');" onmouseout="out('-470699824173107204');" style=""> 390         if (field != null) {                                                                             </span>
<span class="8971896145704334353" onmouseenter="enter('8971896145704334353');" onmouseout="out('8971896145704334353');" style=""> 391             ppr.setSectionEntityField(field.getName());                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 392         }                                                                                                </span>
<span class="1142804962458743647" onmouseenter="enter('1142804962458743647');" onmouseout="out('1142804962458743647');" style=""><abbr title=" 393         ClassMetadata cmd = adminEntityService.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();"> 393         ClassMetadata cmd = adminEntityService.getClassMetadata(ppr).getDynamicResultSet().getClassMetaDaðŸ”µ</abbr></span>
<span  style=""> 394                                                                                                          </span>
<span class="-7098425003691580554" onmouseenter="enter('-7098425003691580554');" onmouseout="out('-7098425003691580554');" style=""> 395         List&lt;Field&gt; headerFields = new ArrayList&lt;&gt;();                                                    </span>
<span class="-9156899327835473831" onmouseenter="enter('-9156899327835473831');" onmouseout="out('-9156899327835473831');" style=""> 396         ListGrid.Type type = null;                                                                       </span>
<span class="2210107579970549810" onmouseenter="enter('2210107579970549810');" onmouseout="out('2210107579970549810');" style=""> 397         boolean editable = false;                                                                        </span>
<span class="-5174966648729145523" onmouseenter="enter('-5174966648729145523');" onmouseout="out('-5174966648729145523');" style=""> 398         boolean sortable = false;                                                                        </span>
<span class="6635173913482908092" onmouseenter="enter('6635173913482908092');" onmouseout="out('6635173913482908092');" style=""> 399         boolean readOnly = false;                                                                        </span>
<span class="-239666301548818102" onmouseenter="enter('-239666301548818102');" onmouseout="out('-239666301548818102');" style=""> 400         boolean hideIdColumn = false;                                                                    </span>
<span class="-8650993504988805305" onmouseenter="enter('-8650993504988805305');" onmouseout="out('-8650993504988805305');" style=""> 401         boolean canFilterAndSort = true;                                                                 </span>
<span class="-2910642919012813708" onmouseenter="enter('-2910642919012813708');" onmouseout="out('-2910642919012813708');" style=""> 402         boolean modalSingleSelectable = false;                                                           </span>
<span class="-5712500441207558612" onmouseenter="enter('-5712500441207558612');" onmouseout="out('-5712500441207558612');" style=""> 403         boolean modalMultiSelectable = false;                                                            </span>
<span class="4919598248352463197" onmouseenter="enter('4919598248352463197');" onmouseout="out('4919598248352463197');" style=""> 404         boolean selectize = false;                                                                       </span>
<span class="3512909155182388697" onmouseenter="enter('3512909155182388697');" onmouseout="out('3512909155182388697');" style=""> 405         boolean isMedia = false;                                                                         </span>
<span class="-2503475837959180700" onmouseenter="enter('-2503475837959180700');" onmouseout="out('-2503475837959180700');" style=""> 406         boolean isLookup = false;                                                                        </span>
<span class="4230800067451301552" onmouseenter="enter('4230800067451301552');" onmouseout="out('4230800067451301552');" style=""> 407         String sortProperty = null;                                                                      </span>
<span class="1914895525805456392" onmouseenter="enter('1914895525805456392');" onmouseout="out('1914895525805456392');" style=""> 408         FieldWrapper wrapper = new FieldWrapper();                                                       </span>
<span class="519132227955412437" onmouseenter="enter('519132227955412437');" onmouseout="out('519132227955412437');" style=""> 409         ArrayList&lt;FieldDTO&gt; defaultWrapperFields = new ArrayList&lt;&gt;();                                    </span>
<span  style=""> 410                                                                                                          </span>
<span  style=""> 411                                                                                                          </span>
<span class="-2507165338472177227" onmouseenter="enter('-2507165338472177227');" onmouseout="out('-2507165338472177227');" style=""> 412         String idProperty = &quot;id&quot;;                                                                        </span>
<span class="-3497335608114491506" onmouseenter="enter('-3497335608114491506');" onmouseout="out('-3497335608114491506');" style=""> 413         for (Property property : cmd.getProperties()) {                                                  </span>
<span class="8031432354977321026" onmouseenter="enter('8031432354977321026');" onmouseout="out('8031432354977321026');" style=""> 414             if (property.getMetadata() instanceof BasicFieldMetadata &amp;&amp;                                  </span>
<span class="-5839489581778150379" onmouseenter="enter('-5839489581778150379');" onmouseout="out('-5839489581778150379');" style=""><abbr title=" 415                     SupportedFieldType.ID==((BasicFieldMetadata) property.getMetadata()).getFieldType() &amp;&amp;"> 415                     SupportedFieldType.ID==((BasicFieldMetadata) property.getMetadata()).getFieldType() &amp;ðŸ”µ</abbr></span>
<span class="493640064601793810" onmouseenter="enter('493640064601793810');" onmouseout="out('493640064601793810');" style=""> 416                     //make sure it&#x27;s a property for this entity - not an association                     </span>
<span class="1409226213228097655" onmouseenter="enter('1409226213228097655');" onmouseout="out('1409226213228097655');" style=""> 417                     !property.getName().contains(&quot;.&quot;)) {                                                 </span>
<span class="2195830063219251158" onmouseenter="enter('2195830063219251158');" onmouseout="out('2195830063219251158');" style=""> 418                 idProperty = property.getName();                                                         </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 419                 break;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 420             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 421         }                                                                                                </span>
<span class="6884921877918156743" onmouseenter="enter('6884921877918156743');" onmouseout="out('6884921877918156743');" style=""><abbr title=" 422         // Get the header fields for this list grid. Note that the header fields are different depending on the"> 422         // Get the header fields for this list grid. Note that the header fields are different depending ðŸ”µ</abbr></span>
<span class="-3735179050749022362" onmouseenter="enter('-3735179050749022362');" onmouseout="out('-3735179050749022362');" style=""> 423         // kind of field this is.                                                                        </span>
<span class="9198797156358178451" onmouseenter="enter('9198797156358178451');" onmouseout="out('9198797156358178451');" style=""> 424         if (fmd instanceof BasicFieldMetadata) {                                                         </span>
<span class="6405821464206093762" onmouseenter="enter('6405821464206093762');" onmouseout="out('6405821464206093762');" style=""> 425             readOnly = ((BasicFieldMetadata) fmd).getReadOnly();                                         </span>
<span class="-1800504749677095068" onmouseenter="enter('-1800504749677095068');" onmouseout="out('-1800504749677095068');" style=""> 426             modalSingleSelectable = true;                                                                </span>
<span class="3681854507729164346" onmouseenter="enter('3681854507729164346');" onmouseout="out('3681854507729164346');" style=""> 427             for (Property p : cmd.getProperties()) {                                                     </span>
<span class="-1029066852878262358" onmouseenter="enter('-1029066852878262358');" onmouseout="out('-1029066852878262358');" style=""> 428                 if (p.getMetadata() instanceof BasicFieldMetadata) {                                     </span>
<span class="-941768582779766785" onmouseenter="enter('-941768582779766785');" onmouseout="out('-941768582779766785');" style=""> 429                     BasicFieldMetadata md = (BasicFieldMetadata) p.getMetadata();                        </span>
<span  style=""> 430                                                                                                          </span>
<span class="-5406944276814759650" onmouseenter="enter('-5406944276814759650');" onmouseout="out('-5406944276814759650');" style=""> 431                     if (SupportedFieldType.ID.equals(md.getFieldType())) {                               </span>
<span class="4761882765386854544" onmouseenter="enter('4761882765386854544');" onmouseout="out('4761882765386854544');" style=""> 432                         idProperty = md.getName();                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 433                     }                                                                                    </span>
<span  style=""> 434                                                                                                          </span>
<span class="-3346338779761665081" onmouseenter="enter('-3346338779761665081');" onmouseout="out('-3346338779761665081');" style=""> 435                     if (md.isProminent() != null &amp;&amp; md.isProminent()                                     </span>
<span class="-8627428290755725902" onmouseenter="enter('-8627428290755725902');" onmouseout="out('-8627428290755725902');" style=""> 436                             &amp;&amp; !ArrayUtils.contains(getGridHiddenVisibilities(), md.getVisibility())) {  </span>
<span class="-1913804071468350989" onmouseenter="enter('-1913804071468350989');" onmouseout="out('-1913804071468350989');" style=""> 437                         Field hf = createHeaderField(p, md);                                             </span>
<span class="465504053416102059" onmouseenter="enter('465504053416102059');" onmouseout="out('465504053416102059');" style=""> 438                         headerFields.add(hf);                                                            </span>
<span class="1435471691691453270" onmouseenter="enter('1435471691691453270');" onmouseout="out('1435471691691453270');" style=""> 439                         defaultWrapperFields.add(constructFieldDTOFromFieldData(hf, md));                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 440                     }                                                                                    </span>
<span  style=""> 441                                                                                                          </span>
<span class="2885325040802931258" onmouseenter="enter('2885325040802931258');" onmouseout="out('2885325040802931258');" style=""> 442                     if (md.getIsFilter() != null &amp;&amp; md.getIsFilter()) {                                  </span>
<span class="6602106188311855247" onmouseenter="enter('6602106188311855247');" onmouseout="out('6602106188311855247');" style=""> 443                         Field f = createHeaderField(p, md);                                              </span>
<span class="-6869394336056843666" onmouseenter="enter('-6869394336056843666');" onmouseout="out('-6869394336056843666');" style=""> 444                         wrapper.getFields().add(constructFieldDTOFromFieldData(f, md));                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 445                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 446                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 447             }                                                                                            </span>
<span  style=""> 448                                                                                                          </span>
<span class="6210556782412808449" onmouseenter="enter('6210556782412808449');" onmouseout="out('6210556782412808449');" style=""> 449             type = ListGrid.Type.TO_ONE;                                                                 </span>
<span class="-1553716655191536539" onmouseenter="enter('-1553716655191536539');" onmouseout="out('-1553716655191536539');" style=""> 450         } else if (fmd instanceof BasicCollectionMetadata) {                                             </span>
<span class="-8775784672799201545" onmouseenter="enter('-8775784672799201545');" onmouseout="out('-8775784672799201545');" style=""> 451             BasicCollectionMetadata bcm = (BasicCollectionMetadata) fmd;                                 </span>
<span class="3088375959257191151" onmouseenter="enter('3088375959257191151');" onmouseout="out('3088375959257191151');" style=""> 452             readOnly = !bcm.isMutable();                                                                 </span>
<span  style=""> 453                                                                                                          </span>
<span class="-7423610773734855911" onmouseenter="enter('-7423610773734855911');" onmouseout="out('-7423610773734855911');" style=""> 454             if(AddMethodType.LOOKUP.equals(bcm.getAddMethodType())) {                                    </span>
<span class="394788880007387168" onmouseenter="enter('394788880007387168');" onmouseout="out('394788880007387168');" style=""> 455                 isLookup = true;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 456             }                                                                                            </span>
<span  style=""> 457                                                                                                          </span>
<span class="-8334523343019219245" onmouseenter="enter('-8334523343019219245');" onmouseout="out('-8334523343019219245');" style=""> 458             if (AddMethodType.SELECTIZE_LOOKUP.equals(bcm.getAddMethodType())) {                         </span>
<span class="-7023171196031834591" onmouseenter="enter('-7023171196031834591');" onmouseout="out('-7023171196031834591');" style=""> 459                 Property p = cmd.getPMap().get(bcm.getSelectizeVisibleField());                          </span>
<span class="-4724213940983805674" onmouseenter="enter('-4724213940983805674');" onmouseout="out('-4724213940983805674');" style=""> 460                 if (p != null) {                                                                         </span>
<span class="-941768582779766785" onmouseenter="enter('-941768582779766785');" onmouseout="out('-941768582779766785');" style=""> 461                     BasicFieldMetadata md = (BasicFieldMetadata) p.getMetadata();                        </span>
<span  style=""> 462                                                                                                          </span>
<span class="-1913804071468350989" onmouseenter="enter('-1913804071468350989');" onmouseout="out('-1913804071468350989');" style=""> 463                     Field hf = createHeaderField(p, md);                                                 </span>
<span class="465504053416102059" onmouseenter="enter('465504053416102059');" onmouseout="out('465504053416102059');" style=""> 464                     headerFields.add(hf);                                                                </span>
<span class="4412272633078565706" onmouseenter="enter('4412272633078565706');" onmouseout="out('4412272633078565706');" style=""> 465                     wrapper.getFields().add(constructFieldDTOFromFieldData(hf, md));                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 466                 }                                                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 467             } else {                                                                                     </span>
<span class="3681854507729164346" onmouseenter="enter('3681854507729164346');" onmouseout="out('3681854507729164346');" style=""> 468                 for (Property p : cmd.getProperties()) {                                                 </span>
<span class="-1029066852878262358" onmouseenter="enter('-1029066852878262358');" onmouseout="out('-1029066852878262358');" style=""> 469                     if (p.getMetadata() instanceof BasicFieldMetadata) {                                 </span>
<span class="-941768582779766785" onmouseenter="enter('-941768582779766785');" onmouseout="out('-941768582779766785');" style=""> 470                         BasicFieldMetadata md = (BasicFieldMetadata) p.getMetadata();                    </span>
<span class="-3346338779761665081" onmouseenter="enter('-3346338779761665081');" onmouseout="out('-3346338779761665081');" style=""> 471                         if (md.isProminent() != null &amp;&amp; md.isProminent()                                 </span>
<span class="-8627428290755725902" onmouseenter="enter('-8627428290755725902');" onmouseout="out('-8627428290755725902');" style=""><abbr title=" 472                                 &amp;&amp; !ArrayUtils.contains(getGridHiddenVisibilities(), md.getVisibility())) {"> 472                                 &amp;&amp; !ArrayUtils.contains(getGridHiddenVisibilities(), md.getVisibility()))ðŸ”µ</abbr></span>
<span class="-1913804071468350989" onmouseenter="enter('-1913804071468350989');" onmouseout="out('-1913804071468350989');" style=""> 473                             Field hf = createHeaderField(p, md);                                         </span>
<span class="465504053416102059" onmouseenter="enter('465504053416102059');" onmouseout="out('465504053416102059');" style=""> 474                             headerFields.add(hf);                                                        </span>
<span class="1435471691691453270" onmouseenter="enter('1435471691691453270');" onmouseout="out('1435471691691453270');" style=""> 475                             defaultWrapperFields.add(constructFieldDTOFromFieldData(hf, md));            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 476                         }                                                                                </span>
<span  style=""> 477                                                                                                          </span>
<span class="2885325040802931258" onmouseenter="enter('2885325040802931258');" onmouseout="out('2885325040802931258');" style=""> 478                         if (md.getIsFilter() != null &amp;&amp; md.getIsFilter()) {                              </span>
<span class="6602106188311855247" onmouseenter="enter('6602106188311855247');" onmouseout="out('6602106188311855247');" style=""> 479                             Field f = createHeaderField(p, md);                                          </span>
<span class="-6869394336056843666" onmouseenter="enter('-6869394336056843666');" onmouseout="out('-6869394336056843666');" style=""> 480                             wrapper.getFields().add(constructFieldDTOFromFieldData(f, md));              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 481                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 482                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 483                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 484             }                                                                                            </span>
<span  style=""> 485                                                                                                          </span>
<span class="5616863682741119985" onmouseenter="enter('5616863682741119985');" onmouseout="out('5616863682741119985');" style=""> 486             type = ListGrid.Type.BASIC;                                                                  </span>
<span  style=""> 487                                                                                                          </span>
<span class="4789284002623142077" onmouseenter="enter('4789284002623142077');" onmouseout="out('4789284002623142077');" style=""><abbr title=" 488             if (AddMethodType.PERSIST.equals(bcm.getAddMethodType()) || AddMethodType.PERSIST_EMPTY.equals(bcm.getAddMethodType())) {"> 488             if (AddMethodType.PERSIST.equals(bcm.getAddMethodType()) || AddMethodType.PERSIST_EMPTY.equalðŸ”µ</abbr></span>
<span class="-5907191702643786371" onmouseenter="enter('-5907191702643786371');" onmouseout="out('-5907191702643786371');" style=""> 489                 editable = true;                                                                         </span>
<span class="-3279362726035609266" onmouseenter="enter('-3279362726035609266');" onmouseout="out('-3279362726035609266');" style=""> 490             } else if (AddMethodType.SELECTIZE_LOOKUP.equals(bcm.getAddMethodType())) {                  </span>
<span class="7652343580882391271" onmouseenter="enter('7652343580882391271');" onmouseout="out('7652343580882391271');" style=""> 491                 selectize = true;                                                                        </span>
<span class="-1800504749677095068" onmouseenter="enter('-1800504749677095068');" onmouseout="out('-1800504749677095068');" style=""> 492                 modalSingleSelectable = true;                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 493             } else {                                                                                     </span>
<span class="-1800504749677095068" onmouseenter="enter('-1800504749677095068');" onmouseout="out('-1800504749677095068');" style=""> 494                 modalSingleSelectable = true;                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 495             }                                                                                            </span>
<span class="-5601810365028455374" onmouseenter="enter('-5601810365028455374');" onmouseout="out('-5601810365028455374');" style=""> 496             sortable = StringUtils.isNotBlank(bcm.getSortProperty());                                    </span>
<span class="5410259152944409683" onmouseenter="enter('5410259152944409683');" onmouseout="out('5410259152944409683');" style=""> 497             if (sortable) {                                                                              </span>
<span class="5401130852877516905" onmouseenter="enter('5401130852877516905');" onmouseout="out('5401130852877516905');" style=""> 498                 sortProperty = bcm.getSortProperty();                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 499             }                                                                                            </span>
<span class="-242736616410190546" onmouseenter="enter('-242736616410190546');" onmouseout="out('-242736616410190546');" style=""> 500         } else if (fmd instanceof AdornedTargetCollectionMetadata) {                                     </span>
<span class="-1800504749677095068" onmouseenter="enter('-1800504749677095068');" onmouseout="out('-1800504749677095068');" style=""> 501             modalSingleSelectable = true;                                                                </span>
<span class="8372678663626684591" onmouseenter="enter('8372678663626684591');" onmouseout="out('8372678663626684591');" style=""> 502             readOnly = !((AdornedTargetCollectionMetadata) fmd).isMutable();                             </span>
<span class="5808828893872341029" onmouseenter="enter('5808828893872341029');" onmouseout="out('5808828893872341029');" style=""> 503             AdornedTargetCollectionMetadata atcmd = (AdornedTargetCollectionMetadata) fmd;               </span>
<span  style=""> 504                                                                                                          </span>
<span class="-8744153650676911691" onmouseenter="enter('-8744153650676911691');" onmouseout="out('-8744153650676911691');" style=""> 505             if(AdornedTargetAddMethodType.LOOKUP.equals(atcmd.getAdornedTargetAddMethodType())) {        </span>
<span class="394788880007387168" onmouseenter="enter('394788880007387168');" onmouseout="out('394788880007387168');" style=""> 506                 isLookup = true;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 507             }                                                                                            </span>
<span  style=""> 508                                                                                                          </span>
<span class="5256125016531832923" onmouseenter="enter('5256125016531832923');" onmouseout="out('5256125016531832923');" style=""><abbr title=" 509             if (AdornedTargetAddMethodType.SELECTIZE_LOOKUP.equals(atcmd.getAdornedTargetAddMethodType())) {"> 509             if (AdornedTargetAddMethodType.SELECTIZE_LOOKUP.equals(atcmd.getAdornedTargetAddMethodType())ðŸ”µ</abbr></span>
<span class="7652343580882391271" onmouseenter="enter('7652343580882391271');" onmouseout="out('7652343580882391271');" style=""> 510                 selectize = true;                                                                        </span>
<span  style=""> 511                                                                                                          </span>
<span class="6698696772959199393" onmouseenter="enter('6698696772959199393');" onmouseout="out('6698696772959199393');" style=""> 512                 Property p = cmd.getPMap().get(atcmd.getSelectizeVisibleField());                        </span>
<span class="-4724213940983805674" onmouseenter="enter('-4724213940983805674');" onmouseout="out('-4724213940983805674');" style=""> 513                 if (p != null) {                                                                         </span>
<span class="-941768582779766785" onmouseenter="enter('-941768582779766785');" onmouseout="out('-941768582779766785');" style=""> 514                     BasicFieldMetadata md = (BasicFieldMetadata) p.getMetadata();                        </span>
<span  style=""> 515                                                                                                          </span>
<span class="-1913804071468350989" onmouseenter="enter('-1913804071468350989');" onmouseout="out('-1913804071468350989');" style=""> 516                     Field hf = createHeaderField(p, md);                                                 </span>
<span class="465504053416102059" onmouseenter="enter('465504053416102059');" onmouseout="out('465504053416102059');" style=""> 517                     headerFields.add(hf);                                                                </span>
<span class="4412272633078565706" onmouseenter="enter('4412272633078565706');" onmouseout="out('4412272633078565706');" style=""> 518                     wrapper.getFields().add(constructFieldDTOFromFieldData(hf, md));                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 519                 }                                                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 520             } else {                                                                                     </span>
<span class="7815744478908232711" onmouseenter="enter('7815744478908232711');" onmouseout="out('7815744478908232711');" style=""> 521                 for (String fieldName : atcmd.getGridVisibleFields()) {                                  </span>
<span class="6577951603357424858" onmouseenter="enter('6577951603357424858');" onmouseout="out('6577951603357424858');" style=""> 522                     Property p = cmd.getPMap().get(fieldName);                                           </span>
<span class="-4724213940983805674" onmouseenter="enter('-4724213940983805674');" onmouseout="out('-4724213940983805674');" style=""> 523                     if (p != null) {                                                                     </span>
<span class="-941768582779766785" onmouseenter="enter('-941768582779766785');" onmouseout="out('-941768582779766785');" style=""> 524                         BasicFieldMetadata md = (BasicFieldMetadata) p.getMetadata();                    </span>
<span  style=""> 525                                                                                                          </span>
<span class="-1913804071468350989" onmouseenter="enter('-1913804071468350989');" onmouseout="out('-1913804071468350989');" style=""> 526                         Field hf = createHeaderField(p, md);                                             </span>
<span class="465504053416102059" onmouseenter="enter('465504053416102059');" onmouseout="out('465504053416102059');" style=""> 527                         headerFields.add(hf);                                                            </span>
<span class="4412272633078565706" onmouseenter="enter('4412272633078565706');" onmouseout="out('4412272633078565706');" style=""> 528                         wrapper.getFields().add(constructFieldDTOFromFieldData(hf, md));                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 529                     }                                                                                    </span>
<span  style=""> 530                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 531                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 532             }                                                                                            </span>
<span  style=""> 533                                                                                                          </span>
<span class="9155103560587761905" onmouseenter="enter('9155103560587761905');" onmouseout="out('9155103560587761905');" style=""> 534             type = ListGrid.Type.ADORNED;                                                                </span>
<span  style=""> 535                                                                                                          </span>
<span class="6020748960132993219" onmouseenter="enter('6020748960132993219');" onmouseout="out('6020748960132993219');" style=""> 536             if (atcmd.getMaintainedAdornedTargetFields().length &gt; 0) {                                   </span>
<span class="-5907191702643786371" onmouseenter="enter('-5907191702643786371');" onmouseout="out('-5907191702643786371');" style=""> 537                 editable = true;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 538             }                                                                                            </span>
<span  style=""> 539                                                                                                          </span>
<span class="5921221796736617807" onmouseenter="enter('5921221796736617807');" onmouseout="out('5921221796736617807');" style=""> 540             AdornedTargetList adornedList = (AdornedTargetList) atcmd.getPersistencePerspective()        </span>
<span class="551023238709431279" onmouseenter="enter('551023238709431279');" onmouseout="out('551023238709431279');" style=""><abbr title=" 541                     .getPersistencePerspectiveItems().get(PersistencePerspectiveItemType.ADORNEDTARGETLIST);"> 541                     .getPersistencePerspectiveItems().get(PersistencePerspectiveItemType.ADORNEDTARGETLISðŸ”µ</abbr></span>
<span class="-3485770976150587717" onmouseenter="enter('-3485770976150587717');" onmouseout="out('-3485770976150587717');" style=""> 542             sortable = StringUtils.isNotBlank(adornedList.getSortField());                               </span>
<span class="5410259152944409683" onmouseenter="enter('5410259152944409683');" onmouseout="out('5410259152944409683');" style=""> 543             if (sortable) {                                                                              </span>
<span class="-4257122370377854741" onmouseenter="enter('-4257122370377854741');" onmouseout="out('-4257122370377854741');" style=""> 544                 sortProperty = adornedList.getSortField();                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 545             }                                                                                            </span>
<span class="-2779851479168607918" onmouseenter="enter('-2779851479168607918');" onmouseout="out('-2779851479168607918');" style=""> 546         } else if (fmd instanceof MapMetadata) {                                                         </span>
<span class="-579137610819846940" onmouseenter="enter('-579137610819846940');" onmouseout="out('-579137610819846940');" style=""> 547             readOnly = !((MapMetadata) fmd).isMutable();                                                 </span>
<span class="4906504520834467748" onmouseenter="enter('4906504520834467748');" onmouseout="out('4906504520834467748');" style=""> 548             MapMetadata mmd = (MapMetadata) fmd;                                                         </span>
<span  style=""> 549                                                                                                          </span>
<span class="8195378525472973548" onmouseenter="enter('8195378525472973548');" onmouseout="out('8195378525472973548');" style=""> 550             Property p2 = cmd.getPMap().get(&quot;key&quot;);                                                      </span>
<span class="8564668864688579354" onmouseenter="enter('8564668864688579354');" onmouseout="out('8564668864688579354');" style=""> 551             BasicFieldMetadata keyMd = (BasicFieldMetadata) p2.getMetadata();                            </span>
<span class="1816634897954632003" onmouseenter="enter('1816634897954632003');" onmouseout="out('1816634897954632003');" style=""> 552             keyMd.setFriendlyName(getMapKeyFriendlyName(p2));                                            </span>
<span class="2754310034023241051" onmouseenter="enter('2754310034023241051');" onmouseout="out('2754310034023241051');" style=""> 553             Field hf = createHeaderField(p2, keyMd);                                                     </span>
<span class="465504053416102059" onmouseenter="enter('465504053416102059');" onmouseout="out('465504053416102059');" style=""> 554             headerFields.add(hf);                                                                        </span>
<span class="-7053544519634906156" onmouseenter="enter('-7053544519634906156');" onmouseout="out('-7053544519634906156');" style=""> 555             wrapper.getFields().add(constructFieldDTOFromFieldData(hf, keyMd));                          </span>
<span  style=""> 556                                                                                                          </span>
<span class="5591331798883124479" onmouseenter="enter('5591331798883124479');" onmouseout="out('5591331798883124479');" style=""> 557             if (mmd.isSimpleValue()) {                                                                   </span>
<span class="4182323386511173091" onmouseenter="enter('4182323386511173091');" onmouseout="out('4182323386511173091');" style=""> 558                 Property valueProperty = cmd.getPMap().get(&quot;value&quot;);                                     </span>
<span class="-6095977990841346888" onmouseenter="enter('-6095977990841346888');" onmouseout="out('-6095977990841346888');" style=""> 559                 BasicFieldMetadata valueMd = (BasicFieldMetadata) valueProperty.getMetadata();           </span>
<span class="-3484742708607220925" onmouseenter="enter('-3484742708607220925');" onmouseout="out('-3484742708607220925');" style=""> 560                 valueMd.setFriendlyName(&quot;Value&quot;);                                                        </span>
<span class="4972432646543922921" onmouseenter="enter('4972432646543922921');" onmouseout="out('4972432646543922921');" style=""> 561                 hf = createHeaderField(valueProperty, valueMd);                                          </span>
<span class="465504053416102059" onmouseenter="enter('465504053416102059');" onmouseout="out('465504053416102059');" style=""> 562                 headerFields.add(hf);                                                                    </span>
<span class="-8637026344597097366" onmouseenter="enter('-8637026344597097366');" onmouseout="out('-8637026344597097366');" style=""> 563                 wrapper.getFields().add(constructFieldDTOFromFieldData(hf, valueMd));                    </span>
<span  style=""> 564                                                                                                          </span>
<span class="-4161155795101164165" onmouseenter="enter('-4161155795101164165');" onmouseout="out('-4161155795101164165');" style=""> 565                 idProperty = &quot;key&quot;;                                                                      </span>
<span class="6613126032600711146" onmouseenter="enter('6613126032600711146');" onmouseout="out('6613126032600711146');" style=""> 566                 hideIdColumn = true;                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 567             } else {                                                                                     </span>
<span class="3681854507729164346" onmouseenter="enter('3681854507729164346');" onmouseout="out('3681854507729164346');" style=""> 568                 for (Property p : cmd.getProperties()) {                                                 </span>
<span class="-1029066852878262358" onmouseenter="enter('-1029066852878262358');" onmouseout="out('-1029066852878262358');" style=""> 569                     if (p.getMetadata() instanceof BasicFieldMetadata) {                                 </span>
<span class="-941768582779766785" onmouseenter="enter('-941768582779766785');" onmouseout="out('-941768582779766785');" style=""> 570                         BasicFieldMetadata md = (BasicFieldMetadata) p.getMetadata();                    </span>
<span class="-8642867949481309577" onmouseenter="enter('-8642867949481309577');" onmouseout="out('-8642867949481309577');" style=""> 571                         String valueClassName = mmd.getValueClassName();                                 </span>
<span class="5979911607115189688" onmouseenter="enter('5979911607115189688');" onmouseout="out('5979911607115189688');" style=""> 572                         if (!StringUtils.isEmpty(mmd.getToOneTargetProperty())) {                        </span>
<span class="-1482207026423407472" onmouseenter="enter('-1482207026423407472');" onmouseout="out('-1482207026423407472');" style=""> 573                             Class&lt;?&gt; clazz;                                                              </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 574                             try {                                                                        </span>
<span class="4641764173848337901" onmouseenter="enter('4641764173848337901');" onmouseout="out('4641764173848337901');" style=""> 575                                 clazz = Class.forName(mmd.getValueClassName());                          </span>
<span class="1054888787890391626" onmouseenter="enter('1054888787890391626');" onmouseout="out('1054888787890391626');" style=""> 576                             } catch (ClassNotFoundException e) {                                         </span>
<span class="-1035238313469204420" onmouseenter="enter('-1035238313469204420');" onmouseout="out('-1035238313469204420');" style=""> 577                                 throw ExceptionHelper.refineException(e);                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 578                             }                                                                            </span>
<span class="-1735437066010488223" onmouseenter="enter('-1735437066010488223');" onmouseout="out('-1735437066010488223');" style=""><abbr title=" 579                             java.lang.reflect.Field nestedField = FieldManager.getSingleField(clazz, mmd.getToOneTargetProperty());"> 579                             java.lang.reflect.Field nestedField = FieldManager.getSingleField(clazz, mmd.ðŸ”µ</abbr></span>
<span class="-7513153605302333321" onmouseenter="enter('-7513153605302333321');" onmouseout="out('-7513153605302333321');" style=""> 580                             ManyToOne manyToOne = nestedField.getAnnotation(ManyToOne.class);            </span>
<span class="3426777525282342717" onmouseenter="enter('3426777525282342717');" onmouseout="out('3426777525282342717');" style=""><abbr title=" 581                             if (manyToOne != null &amp;&amp; !manyToOne.targetEntity().getName().equals(void.class.getName())) {"> 581                             if (manyToOne != null &amp;&amp; !manyToOne.targetEntity().getName().equals(void.clasðŸ”µ</abbr></span>
<span class="2472701616060797628" onmouseenter="enter('2472701616060797628');" onmouseout="out('2472701616060797628');" style=""> 582                                 valueClassName = manyToOne.targetEntity().getName();                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 583                             } else {                                                                     </span>
<span class="7605310444155773026" onmouseenter="enter('7605310444155773026');" onmouseout="out('7605310444155773026');" style=""> 584                                 OneToOne oneToOne = nestedField.getAnnotation(OneToOne.class);           </span>
<span class="6473385945565798584" onmouseenter="enter('6473385945565798584');" onmouseout="out('6473385945565798584');" style=""><abbr title=" 585                                 if (oneToOne != null &amp;&amp; !oneToOne.targetEntity().getName().equals(void.class.getName())) {"> 585                                 if (oneToOne != null &amp;&amp; !oneToOne.targetEntity().getName().equals(void.clðŸ”µ</abbr></span>
<span class="-7479915108694096025" onmouseenter="enter('-7479915108694096025');" onmouseout="out('-7479915108694096025');" style=""> 586                                     valueClassName = oneToOne.targetEntity().getName();                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 587                                 }                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 588                             }                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 589                         }                                                                                </span>
<span class="-5540922815730228658" onmouseenter="enter('-5540922815730228658');" onmouseout="out('-5540922815730228658');" style=""> 590                         if (md.getTargetClass().equals(valueClassName)) {                                </span>
<span class="-3346338779761665081" onmouseenter="enter('-3346338779761665081');" onmouseout="out('-3346338779761665081');" style=""> 591                             if (md.isProminent() != null &amp;&amp; md.isProminent()                             </span>
<span class="-8627428290755725902" onmouseenter="enter('-8627428290755725902');" onmouseout="out('-8627428290755725902');" style=""><abbr title=" 592                                     &amp;&amp; !ArrayUtils.contains(getGridHiddenVisibilities(), md.getVisibility())) {"> 592                                     &amp;&amp; !ArrayUtils.contains(getGridHiddenVisibilities(), md.getVisibilityðŸ”µ</abbr></span>
<span class="8960496946946728749" onmouseenter="enter('8960496946946728749');" onmouseout="out('8960496946946728749');" style=""> 593                                 hf = createHeaderField(p, md);                                           </span>
<span class="465504053416102059" onmouseenter="enter('465504053416102059');" onmouseout="out('465504053416102059');" style=""> 594                                 headerFields.add(hf);                                                    </span>
<span class="1435471691691453270" onmouseenter="enter('1435471691691453270');" onmouseout="out('1435471691691453270');" style=""> 595                                 defaultWrapperFields.add(constructFieldDTOFromFieldData(hf, md));        </span>
<span  style=""> 596                                                                                                          </span>
<span class="-5289673653677501347" onmouseenter="enter('-5289673653677501347');" onmouseout="out('-5289673653677501347');" style=""> 597                                 // Is this a media listgrid                                              </span>
<span class="4853086335987625590" onmouseenter="enter('4853086335987625590');" onmouseout="out('4853086335987625590');" style=""> 598                                 if (hf.getFieldType().equals(&quot;ASSET_LOOKUP&quot;)) {                          </span>
<span class="-8476912243297643828" onmouseenter="enter('-8476912243297643828');" onmouseout="out('-8476912243297643828');" style=""> 599                                     isMedia = true;                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 600                                 }                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 601                             }                                                                            </span>
<span  style=""> 602                                                                                                          </span>
<span class="2885325040802931258" onmouseenter="enter('2885325040802931258');" onmouseout="out('2885325040802931258');" style=""> 603                             if (md.getIsFilter() != null &amp;&amp; md.getIsFilter()) {                          </span>
<span class="1044073206381351305" onmouseenter="enter('1044073206381351305');" onmouseout="out('1044073206381351305');" style=""> 604                                 wrapper.getFields().add(constructFieldDTOFromFieldData(hf,md));          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 605                             }                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 606                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 607                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 608                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 609             }                                                                                            </span>
<span  style=""> 610                                                                                                          </span>
<span class="1402378997093770695" onmouseenter="enter('1402378997093770695');" onmouseout="out('1402378997093770695');" style=""> 611             type = ListGrid.Type.MAP;                                                                    </span>
<span class="-5907191702643786371" onmouseenter="enter('-5907191702643786371');" onmouseout="out('-5907191702643786371');" style=""> 612             editable = true;                                                                             </span>
<span class="8307590133204211823" onmouseenter="enter('8307590133204211823');" onmouseout="out('8307590133204211823');" style=""> 613             canFilterAndSort = false;                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 614         }                                                                                                </span>
<span  style=""> 615                                                                                                          </span>
<span class="4544421216027686155" onmouseenter="enter('4544421216027686155');" onmouseout="out('4544421216027686155');" style=""> 616         String ceilingType = &quot;&quot;;                                                                         </span>
<span class="9198797156358178451" onmouseenter="enter('9198797156358178451');" onmouseout="out('9198797156358178451');" style=""> 617         if (fmd instanceof BasicFieldMetadata) {                                                         </span>
<span class="7794440236473789134" onmouseenter="enter('7794440236473789134');" onmouseout="out('7794440236473789134');" style=""> 618             ceilingType = cmd.getCeilingType();                                                          </span>
<span class="3746105937327671455" onmouseenter="enter('3746105937327671455');" onmouseout="out('3746105937327671455');" style=""> 619         } else if (fmd instanceof CollectionMetadata) {                                                  </span>
<span class="958831769715126463" onmouseenter="enter('958831769715126463');" onmouseout="out('958831769715126463');" style=""> 620             ceilingType = ((CollectionMetadata) fmd).getCollectionCeilingEntity();                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 621         }                                                                                                </span>
<span  style=""> 622                                                                                                          </span>
<span class="5585496722375029284" onmouseenter="enter('5585496722375029284');" onmouseout="out('5585496722375029284');" style=""> 623         if (CollectionUtils.isEmpty(headerFields)) {                                                     </span>
<span class="-3348290953650583379" onmouseenter="enter('-3348290953650583379');" onmouseout="out('-3348290953650583379');" style=""><abbr title=" 624             String message = &quot;There are no listgrid header fields configured for the class &quot; + ceilingType + &quot; and property &#x27;&quot; +"> 624             String message = &quot;There are no listgrid header fields configured for the class &quot; + ceilingTypðŸ”µ</abbr></span>
<span class="7723961843711254229" onmouseenter="enter('7723961843711254229');" onmouseout="out('7723961843711254229');" style=""> 625                     StringUtil.sanitize(field.getName()) + &quot;&#x27;.&quot;;                                         </span>
<span class="-8247546196580792399" onmouseenter="enter('-8247546196580792399');" onmouseout="out('-8247546196580792399');" style=""><abbr title=" 626             if (selectize &amp;&amp; (type == ListGrid.Type.ADORNED || type == ListGrid.Type.ADORNED_WITH_FORM)) {"> 626             if (selectize &amp;&amp; (type == ListGrid.Type.ADORNED || type == ListGrid.Type.ADORNED_WITH_FORM)) ðŸ”µ</abbr></span>
<span class="3128472952734575237" onmouseenter="enter('3128472952734575237');" onmouseout="out('3128472952734575237');" style=""><abbr title=" 627                 message += &quot; Please configure &#x27;selectizeVisibleField&#x27; in your @AdminPresentationAdornedTargetCollection configuration&quot;;"> 627                 message += &quot; Please configure &#x27;selectizeVisibleField&#x27; in your @AdminPresentationAdornedTaðŸ”µ</abbr></span>
<span class="8636226295625239860" onmouseenter="enter('8636226295625239860');" onmouseout="out('8636226295625239860');" style=""> 628             } else if (type == ListGrid.Type.ADORNED || type == ListGrid.Type.ADORNED_WITH_FORM) {       </span>
<span class="2402628808600951472" onmouseenter="enter('2402628808600951472');" onmouseout="out('2402628808600951472');" style=""><abbr title=" 629                 message += &quot; Please configure &#x27;gridVisibleFields&#x27; in your @AdminPresentationAdornedTargetCollection configuration&quot;;"> 629                 message += &quot; Please configure &#x27;gridVisibleFields&#x27; in your @AdminPresentationAdornedTargetðŸ”µ</abbr></span>
<span class="-9137226596697213695" onmouseenter="enter('-9137226596697213695');" onmouseout="out('-9137226596697213695');" style=""> 630             } else if (selectize &amp;&amp; type == ListGrid.Type.BASIC) {                                       </span>
<span class="-3735757397027600216" onmouseenter="enter('-3735757397027600216');" onmouseout="out('-3735757397027600216');" style=""><abbr title=" 631                 message += &quot; Please configure &#x27;selectizeVisibleField&#x27; in your @AdminPresentationCollection configuration&quot;;"> 631                 message += &quot; Please configure &#x27;selectizeVisibleField&#x27; in your @AdminPresentationCollectioðŸ”µ</abbr></span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 632             } else {                                                                                     </span>
<span class="-6242089898795718984" onmouseenter="enter('-6242089898795718984');" onmouseout="out('-6242089898795718984');" style=""> 633                 message += &quot; Please mark some @AdminPresentation fields with &#x27;prominent = true&#x27;&quot;;        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 634             }                                                                                            </span>
<span class="683988342023046623" onmouseenter="enter('683988342023046623');" onmouseout="out('683988342023046623');" style=""> 635             LOG.error(message);                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 636         }                                                                                                </span>
<span  style=""> 637                                                                                                          </span>
<span class="8018024767617726350" onmouseenter="enter('8018024767617726350');" onmouseout="out('8018024767617726350');" style=""><abbr title=" 638         ListGrid listGrid = createListGrid(ceilingType, headerFields, type, drs, sectionKey, fmd.getOrder(), idProperty, sectionCrumbs, sortProperty);"> 638         ListGrid listGrid = createListGrid(ceilingType, headerFields, type, drs, sectionKey, fmd.getOrderðŸ”µ</abbr></span>
<span class="-8260607636786156523" onmouseenter="enter('-8260607636786156523');" onmouseout="out('-8260607636786156523');" style=""> 639         listGrid.setSubCollectionFieldName(field.getName());                                             </span>
<span class="6077403992574006974" onmouseenter="enter('6077403992574006974');" onmouseout="out('6077403992574006974');" style=""> 640         listGrid.setFriendlyName(field.getMetadata().getFriendlyName());                                 </span>
<span class="7905107023107584311" onmouseenter="enter('7905107023107584311');" onmouseout="out('7905107023107584311');" style=""> 641         if (StringUtils.isEmpty(listGrid.getFriendlyName())) {                                           </span>
<span class="7450505976451149249" onmouseenter="enter('7450505976451149249');" onmouseout="out('7450505976451149249');" style=""> 642             listGrid.setFriendlyName(field.getName());                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 643         }                                                                                                </span>
<span class="4004853909217037199" onmouseenter="enter('4004853909217037199');" onmouseout="out('4004853909217037199');" style=""> 644         listGrid.setContainingEntityId(containingEntityId);                                              </span>
<span class="5941008318995473126" onmouseenter="enter('5941008318995473126');" onmouseout="out('5941008318995473126');" style=""> 645         listGrid.setIsReadOnly(readOnly);                                                                </span>
<span class="5221697846686143736" onmouseenter="enter('5221697846686143736');" onmouseout="out('5221697846686143736');" style=""> 646         listGrid.setHideIdColumn(hideIdColumn);                                                          </span>
<span class="103202019101048665" onmouseenter="enter('103202019101048665');" onmouseout="out('103202019101048665');" style=""> 647         listGrid.setCanFilterAndSort(canFilterAndSort);                                                  </span>
<span  style=""> 648                                                                                                          </span>
<span class="2615168876841014995" onmouseenter="enter('2615168876841014995');" onmouseout="out('2615168876841014995');" style=""> 649         // Set up the filter builder params                                                              </span>
<span class="1067693587814186246" onmouseenter="enter('1067693587814186246');" onmouseout="out('1067693587814186246');" style=""> 650         Date c = new Date();                                                                             </span>
<span class="7632548446248454393" onmouseenter="enter('7632548446248454393');" onmouseout="out('7632548446248454393');" style=""> 651         String friendlyName = field.getMetadata().getFriendlyName();                                     </span>
<span class="-1543374359693074653" onmouseenter="enter('-1543374359693074653');" onmouseout="out('-1543374359693074653');" style=""> 652         String jsonFriendlyName = friendlyName.replaceAll(&quot; &quot;, &quot;_&quot;);                                     </span>
<span class="-5194767828410940587" onmouseenter="enter('-5194767828410940587');" onmouseout="out('-5194767828410940587');" style=""> 653         listGrid.setJsonFieldName(jsonFriendlyName + c.getTime() + &quot;Json&quot;);                              </span>
<span class="6488323689834765207" onmouseenter="enter('6488323689834765207');" onmouseout="out('6488323689834765207');" style=""> 654         listGrid.setFriendlyName(friendlyName);                                                          </span>
<span class="-4532597237542010033" onmouseenter="enter('-4532597237542010033');" onmouseout="out('-4532597237542010033');" style=""> 655         listGrid.setFieldBuilder(&quot;RULE_SIMPLE&quot;);                                                         </span>
<span class="2366326534416496613" onmouseenter="enter('2366326534416496613');" onmouseout="out('2366326534416496613');" style=""> 656         if (CollectionUtils.isEmpty(wrapper.getFields())) {                                              </span>
<span class="532531496111421469" onmouseenter="enter('532531496111421469');" onmouseout="out('532531496111421469');" style=""> 657             wrapper.setFields(defaultWrapperFields);                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 658         }                                                                                                </span>
<span class="8083895692807517727" onmouseenter="enter('8083895692807517727');" onmouseout="out('8083895692807517727');" style=""> 659         listGrid.setFieldWrapper(wrapper);                                                               </span>
<span  style=""> 660                                                                                                          </span>
<span class="4466331963824990789" onmouseenter="enter('4466331963824990789');" onmouseout="out('4466331963824990789');" style=""> 661         String blankJsonString =  &quot;{\&quot;data\&quot;:[]}&quot;;                                                       </span>
<span class="7445610059504327235" onmouseenter="enter('7445610059504327235');" onmouseout="out('7445610059504327235');" style=""> 662         listGrid.setJson(blankJsonString);                                                               </span>
<span class="-6647315222721447684" onmouseenter="enter('-6647315222721447684');" onmouseout="out('-6647315222721447684');" style=""> 663         DataWrapper dw = convertJsonToDataWrapper(blankJsonString);                                      </span>
<span class="-3408161092817379645" onmouseenter="enter('-3408161092817379645');" onmouseout="out('-3408161092817379645');" style=""> 664         if (dw != null) {                                                                                </span>
<span class="-933372440492481068" onmouseenter="enter('-933372440492481068');" onmouseout="out('-933372440492481068');" style=""> 665             listGrid.setDataWrapper(dw);                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 666         }                                                                                                </span>
<span  style=""> 667                                                                                                          </span>
<span class="-1934188124142515927" onmouseenter="enter('-1934188124142515927');" onmouseout="out('-1934188124142515927');" style=""> 668         if (editable) {                                                                                  </span>
<span class="-8324356505432784037" onmouseenter="enter('-8324356505432784037');" onmouseout="out('-8324356505432784037');" style=""> 669             listGrid.getRowActions().add(DefaultListGridActions.UPDATE);                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 670         }                                                                                                </span>
<span class="7378462715957185244" onmouseenter="enter('7378462715957185244');" onmouseout="out('7378462715957185244');" style=""> 671         if (readOnly) {                                                                                  </span>
<span class="-5818500246922120128" onmouseenter="enter('-5818500246922120128');" onmouseout="out('-5818500246922120128');" style=""> 672             listGrid.getRowActions().add(DefaultListGridActions.VIEW);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 673         }                                                                                                </span>
<span class="5410259152944409683" onmouseenter="enter('5410259152944409683');" onmouseout="out('5410259152944409683');" style=""> 674         if (sortable) {                                                                                  </span>
<span class="-607660971412807673" onmouseenter="enter('-607660971412807673');" onmouseout="out('-607660971412807673');" style=""> 675             listGrid.setCanFilterAndSort(false);                                                         </span>
<span class="4388200762412113532" onmouseenter="enter('4388200762412113532');" onmouseout="out('4388200762412113532');" style=""> 676             listGrid.setIsSortable(true);                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 677         }                                                                                                </span>
<span  style=""> 678                                                                                                          </span>
<span class="-4128949180761209250" onmouseenter="enter('-4128949180761209250');" onmouseout="out('-4128949180761209250');" style=""> 679         if (modalSingleSelectable) {                                                                     </span>
<span class="7378462715957185244" onmouseenter="enter('7378462715957185244');" onmouseout="out('7378462715957185244');" style=""> 680             if (readOnly) {                                                                              </span>
<span class="876416575304580897" onmouseenter="enter('876416575304580897');" onmouseout="out('876416575304580897');" style=""><abbr title=" 681                 listGrid.addModalRowAction(DefaultListGridActions.SINGLE_SELECT.clone().withForListGridReadOnly(true));"> 681                 listGrid.addModalRowAction(DefaultListGridActions.SINGLE_SELECT.clone().withForListGridReðŸ”µ</abbr></span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 682             } else {                                                                                     </span>
<span class="2808273481648426142" onmouseenter="enter('2808273481648426142');" onmouseout="out('2808273481648426142');" style=""> 683                 listGrid.addModalRowAction(DefaultListGridActions.SINGLE_SELECT);                        </span>
<span  style=""> 684                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 685             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 686         }                                                                                                </span>
<span class="-7419173722157864798" onmouseenter="enter('-7419173722157864798');" onmouseout="out('-7419173722157864798');" style=""> 687         listGrid.setSelectType(ListGrid.SelectType.SINGLE_SELECT);                                       </span>
<span  style=""> 688                                                                                                          </span>
<span class="4421519193138811338" onmouseenter="enter('4421519193138811338');" onmouseout="out('4421519193138811338');" style=""> 689         if (selectize) {                                                                                 </span>
<span class="4330210937183071205" onmouseenter="enter('4330210937183071205');" onmouseout="out('4330210937183071205');" style=""> 690             listGrid.setSelectizeUrl(buildSelectizeUrl(listGrid));                                       </span>
<span class="-6778616649865275600" onmouseenter="enter('-6778616649865275600');" onmouseout="out('-6778616649865275600');" style=""> 691             listGrid.setSelectType(ListGrid.SelectType.SELECTIZE);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 692         }                                                                                                </span>
<span  style=""> 693                                                                                                          </span>
<span class="-318424289412267832" onmouseenter="enter('-318424289412267832');" onmouseout="out('-318424289412267832');" style=""> 694         if (modalMultiSelectable) {                                                                      </span>
<span class="-2076946817204501330" onmouseenter="enter('-2076946817204501330');" onmouseout="out('-2076946817204501330');" style=""> 695             listGrid.addModalRowAction(DefaultListGridActions.MULTI_SELECT);                             </span>
<span class="7572617953044326144" onmouseenter="enter('7572617953044326144');" onmouseout="out('7572617953044326144');" style=""> 696             listGrid.setSelectType(ListGrid.SelectType.MULTI_SELECT);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 697         }                                                                                                </span>
<span class="-8712474510741391938" onmouseenter="enter('-8712474510741391938');" onmouseout="out('-8712474510741391938');" style=""> 698         listGrid.getRowActions().add(DefaultListGridActions.REMOVE);                                     </span>
<span  style=""> 699                                                                                                          </span>
<span class="5224232002379484564" onmouseenter="enter('5224232002379484564');" onmouseout="out('5224232002379484564');" style=""> 700         if (fmd.getManualFetch()) {                                                                      </span>
<span class="-9107723200038018431" onmouseenter="enter('-9107723200038018431');" onmouseout="out('-9107723200038018431');" style=""> 701             listGrid.setManualFetch(true);                                                               </span>
<span class="-1990881339892073084" onmouseenter="enter('-1990881339892073084');" onmouseout="out('-1990881339892073084');" style=""> 702             listGrid.getToolbarActions().add(DefaultListGridActions.MANUAL_FETCH);                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 703         }                                                                                                </span>
<span class="963954107021870727" onmouseenter="enter('963954107021870727');" onmouseout="out('963954107021870727');" style=""> 704         if (isMedia) {                                                                                   </span>
<span class="8560894537765048923" onmouseenter="enter('8560894537765048923');" onmouseout="out('8560894537765048923');" style=""> 705             listGrid.setListGridType(ListGrid.Type.ASSET_GRID);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 706         }                                                                                                </span>
<span  style=""> 707                                                                                                          </span>
<span class="-5511350038403165520" onmouseenter="enter('-5511350038403165520');" onmouseout="out('-5511350038403165520');" style=""> 708         extensionManager.getProxy().modifyListGrid(listGrid.getClassName(), listGrid);                   </span>
<span  style=""> 709                                                                                                          </span>
<span class="-1010311312628539836" onmouseenter="enter('-1010311312628539836');" onmouseout="out('-1010311312628539836');" style=""><abbr title=" 710         //If someone has replaced RowLevelSecurityService, check here to make sure the replacement implements the expected interface"> 710         //If someone has replaced RowLevelSecurityService, check here to make sure the replacement implemðŸ”µ</abbr></span>
<span class="8968842492276656547" onmouseenter="enter('8968842492276656547');" onmouseout="out('8968842492276656547');" style=""> 711         if (rowLevelSecurityService instanceof ExceptionAwareRowLevelSecurityProvider) {                 </span>
<span class="2057574043580690918" onmouseenter="enter('2057574043580690918');" onmouseout="out('2057574043580690918');" style=""><abbr title=" 712             EntityFormModifierConfiguration entityFormModifierConfiguration = ((ExceptionAwareRowLevelSecurityProvider) rowLevelSecurityService).getUpdateDenialExceptions();"> 712             EntityFormModifierConfiguration entityFormModifierConfiguration = ((ExceptionAwareRowLevelSecðŸ”µ</abbr></span>
<span class="-3023990582845647391" onmouseenter="enter('-3023990582845647391');" onmouseout="out('-3023990582845647391');" style=""><abbr title=" 713             for (EntityFormModifierData&lt;EntityFormModifierDataPoint&gt; data : entityFormModifierConfiguration.getData()) {"> 713             for (EntityFormModifierData&lt;EntityFormModifierDataPoint&gt; data : entityFormModifierConfiguratiðŸ”µ</abbr></span>
<span class="9148632731325481398" onmouseenter="enter('9148632731325481398');" onmouseout="out('9148632731325481398');" style=""> 714                 for (EntityFormModifier modifier : entityFormModifierConfiguration.getModifier()) {      </span>
<span class="7131836139928065231" onmouseenter="enter('7131836139928065231');" onmouseout="out('7131836139928065231');" style=""> 715                     if (modifier.isQualified(data.getModifierType())) {                                  </span>
<span class="-3065342187112967306" onmouseenter="enter('-3065342187112967306');" onmouseout="out('-3065342187112967306');" style=""> 716                         modifier.modifyListGrid(new EntityFormModifierRequest()                          </span>
<span class="118085653176366406" onmouseenter="enter('118085653176366406');" onmouseout="out('118085653176366406');" style=""> 717                                 .withListGrid(listGrid)                                                  </span>
<span class="-1014541830042934633" onmouseenter="enter('-1014541830042934633');" onmouseout="out('-1014541830042934633');" style=""> 718                                 .withConfiguration(data)                                                 </span>
<span class="-7538620272607121359" onmouseenter="enter('-7538620272607121359');" onmouseout="out('-7538620272607121359');" style=""> 719                                 .withCurrentUser(adminRemoteSecurityService.getPersistentAdminUser())    </span>
<span class="680994463596247300" onmouseenter="enter('680994463596247300');" onmouseout="out('680994463596247300');" style=""> 720                                 .withRowLevelSecurityService(rowLevelSecurityService));                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 721                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 722                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 723             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 724         }                                                                                                </span>
<span class="8338561479600990216" onmouseenter="enter('8338561479600990216');" onmouseout="out('8338561479600990216');" style=""> 725         return listGrid;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 726     }                                                                                                    </span>
<span  style=""> 727                                                                                                          </span>
<span class="1351139520445861423" onmouseenter="enter('1351139520445861423');" onmouseout="out('1351139520445861423');" style=""> 728     protected String getMapKeyFriendlyName(Property property) {                                          </span>
<span class="5871990330597606657" onmouseenter="enter('5871990330597606657');" onmouseout="out('5871990330597606657');" style=""> 729         String friendlyNameFromMetadata = property.getMetadata().getFriendlyName();                      </span>
<span  style=""> 730                                                                                                          </span>
<span class="3779076262581559101" onmouseenter="enter('3779076262581559101');" onmouseout="out('3779076262581559101');" style=""> 731         return (friendlyNameFromMetadata == null) ? &quot;Key&quot; : friendlyNameFromMetadata;                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 732     }                                                                                                    </span>
<span  style=""> 733                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 734     @Override                                                                                            </span>
<span class="-1413517427251419025" onmouseenter="enter('-1413517427251419025');" onmouseout="out('-1413517427251419025');" style=""><abbr title=" 735     public Map&lt;String, Object&gt; buildSelectizeCollectionInfo(String containingEntityId, DynamicResultSet drs, Property field,"> 735     public Map&lt;String, Object&gt; buildSelectizeCollectionInfo(String containingEntityId, DynamicResultSet dðŸ”µ</abbr></span>
<span class="8976903068062443392" onmouseenter="enter('8976903068062443392');" onmouseout="out('8976903068062443392');" style=""> 736         String sectionKey, List&lt;SectionCrumb&gt; sectionCrumbs)                                             </span>
<span class="1998458335829271558" onmouseenter="enter('1998458335829271558');" onmouseout="out('1998458335829271558');" style=""> 737             throws ServiceException {                                                                    </span>
<span class="3501499603601527305" onmouseenter="enter('3501499603601527305');" onmouseout="out('3501499603601527305');" style=""> 738         FieldMetadata fmd = field.getMetadata();                                                         </span>
<span class="6565595844041240946" onmouseenter="enter('6565595844041240946');" onmouseout="out('6565595844041240946');" style=""> 739         // Get the class metadata for this particular field                                              </span>
<span class="-8834884127458938753" onmouseenter="enter('-8834884127458938753');" onmouseout="out('-8834884127458938753');" style=""> 740         PersistencePackageRequest ppr = PersistencePackageRequest.fromMetadata(fmd, sectionCrumbs);      </span>
<span class="-470699824173107204" onmouseenter="enter('-470699824173107204');" onmouseout="out('-470699824173107204');" style=""> 741         if (field != null) {                                                                             </span>
<span class="8971896145704334353" onmouseenter="enter('8971896145704334353');" onmouseout="out('8971896145704334353');" style=""> 742             ppr.setSectionEntityField(field.getName());                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 743         }                                                                                                </span>
<span class="1142804962458743647" onmouseenter="enter('1142804962458743647');" onmouseout="out('1142804962458743647');" style=""><abbr title=" 744         ClassMetadata cmd = adminEntityService.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();"> 744         ClassMetadata cmd = adminEntityService.getClassMetadata(ppr).getDynamicResultSet().getClassMetaDaðŸ”µ</abbr></span>
<span  style=""> 745                                                                                                          </span>
<span class="-5595331836292860562" onmouseenter="enter('-5595331836292860562');" onmouseout="out('-5595331836292860562');" style=""> 746         Map&lt;String, Object&gt; result = constructSelectizeOptionMap(drs, cmd);                              </span>
<span  style=""> 747                                                                                                          </span>
<span class="-1689031862376375101" onmouseenter="enter('-1689031862376375101');" onmouseout="out('-1689031862376375101');" style=""> 748         AdornedTargetList adornedList = ppr.getAdornedList();                                            </span>
<span class="4210226056962324596" onmouseenter="enter('4210226056962324596');" onmouseout="out('4210226056962324596');" style=""> 749         if (adornedList != null &amp;&amp; adornedList.getLinkedObjectPath() != null                             </span>
<span class="-5584956232917922083" onmouseenter="enter('-5584956232917922083');" onmouseout="out('-5584956232917922083');" style=""> 750             &amp;&amp; adornedList.getTargetObjectPath() != null &amp;&amp; adornedList.getLinkedIdProperty() != null    </span>
<span class="8487613505903596752" onmouseenter="enter('8487613505903596752');" onmouseout="out('8487613505903596752');" style=""> 751             &amp;&amp; adornedList.getTargetIdProperty() != null) {                                              </span>
<span class="7309159037806205694" onmouseenter="enter('7309159037806205694');" onmouseout="out('7309159037806205694');" style=""><abbr title=" 752             result.put(&quot;linkedObjectPath&quot;, adornedList.getLinkedObjectPath() + &quot;.&quot; + adornedList.getLinkedIdProperty());"> 752             result.put(&quot;linkedObjectPath&quot;, adornedList.getLinkedObjectPath() + &quot;.&quot; + adornedList.getLinkeðŸ”µ</abbr></span>
<span class="-6077713782492983195" onmouseenter="enter('-6077713782492983195');" onmouseout="out('-6077713782492983195');" style=""> 753             result.put(&quot;linkedObjectId&quot;, containingEntityId);                                            </span>
<span class="3248709869136196767" onmouseenter="enter('3248709869136196767');" onmouseout="out('3248709869136196767');" style=""><abbr title=" 754             result.put(&quot;targetObjectPath&quot;, adornedList.getTargetObjectPath() + &quot;.&quot; + adornedList.getTargetIdProperty());"> 754             result.put(&quot;targetObjectPath&quot;, adornedList.getTargetObjectPath() + &quot;.&quot; + adornedList.getTargeðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 755         }                                                                                                </span>
<span  style=""> 756                                                                                                          </span>
<span class="-6419540350677864751" onmouseenter="enter('-6419540350677864751');" onmouseout="out('-6419540350677864751');" style=""> 757         return result;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 758     }                                                                                                    </span>
<span  style=""> 759                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 760     @Override                                                                                            </span>
<span class="6193659363548015244" onmouseenter="enter('6193659363548015244');" onmouseout="out('6193659363548015244');" style=""> 761     public Map&lt;String, Object&gt; constructSelectizeOptionMap(DynamicResultSet drs, ClassMetadata cmd) {    </span>
<span class="-2547625323269156657" onmouseenter="enter('-2547625323269156657');" onmouseout="out('-2547625323269156657');" style=""> 762         Map&lt;String, Object&gt; result = new HashMap&lt;&gt;();                                                    </span>
<span class="-1525294692883767948" onmouseenter="enter('-1525294692883767948');" onmouseout="out('-1525294692883767948');" style=""> 763         List&lt;Map&lt;String, String&gt;&gt; options = new ArrayList&lt;&gt;();                                           </span>
<span  style=""> 764                                                                                                          </span>
<span class="-7098425003691580554" onmouseenter="enter('-7098425003691580554');" onmouseout="out('-7098425003691580554');" style=""> 765         List&lt;Field&gt; headerFields = new ArrayList&lt;&gt;();                                                    </span>
<span class="3681854507729164346" onmouseenter="enter('3681854507729164346');" onmouseout="out('3681854507729164346');" style=""> 766         for (Property p : cmd.getProperties()) {                                                         </span>
<span class="-1029066852878262358" onmouseenter="enter('-1029066852878262358');" onmouseout="out('-1029066852878262358');" style=""> 767             if (p.getMetadata() instanceof BasicFieldMetadata) {                                         </span>
<span class="-941768582779766785" onmouseenter="enter('-941768582779766785');" onmouseout="out('-941768582779766785');" style=""> 768                 BasicFieldMetadata md = (BasicFieldMetadata) p.getMetadata();                            </span>
<span class="-3346338779761665081" onmouseenter="enter('-3346338779761665081');" onmouseout="out('-3346338779761665081');" style=""> 769                 if (md.isProminent() != null &amp;&amp; md.isProminent()                                         </span>
<span class="-8627428290755725902" onmouseenter="enter('-8627428290755725902');" onmouseout="out('-8627428290755725902');" style=""> 770                         &amp;&amp; !ArrayUtils.contains(getGridHiddenVisibilities(), md.getVisibility())) {      </span>
<span class="-1913804071468350989" onmouseenter="enter('-1913804071468350989');" onmouseout="out('-1913804071468350989');" style=""> 771                     Field hf = createHeaderField(p, md);                                                 </span>
<span class="465504053416102059" onmouseenter="enter('465504053416102059');" onmouseout="out('465504053416102059');" style=""> 772                     headerFields.add(hf);                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 773                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 774             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 775         }                                                                                                </span>
<span  style=""> 776                                                                                                          </span>
<span class="-5517026699518874938" onmouseenter="enter('-5517026699518874938');" onmouseout="out('-5517026699518874938');" style=""> 777         for (Entity e : drs.getRecords()) {                                                              </span>
<span class="-6136638466040784110" onmouseenter="enter('-6136638466040784110');" onmouseout="out('-6136638466040784110');" style=""> 778             Map&lt;String, String&gt; selectizeOption = new HashMap&lt;&gt;();                                       </span>
<span class="4163901938958293625" onmouseenter="enter('4163901938958293625');" onmouseout="out('4163901938958293625');" style=""> 779             for (Field headerField : headerFields) {                                                     </span>
<span class="5027179794052216178" onmouseenter="enter('5027179794052216178');" onmouseout="out('5027179794052216178');" style=""> 780                 Property p = e.findProperty(headerField.getName());                                      </span>
<span class="-4724213940983805674" onmouseenter="enter('-4724213940983805674');" onmouseout="out('-4724213940983805674');" style=""> 781                 if (p != null) {                                                                         </span>
<span class="4028188550890348466" onmouseenter="enter('4028188550890348466');" onmouseout="out('4028188550890348466');" style=""> 782                     selectizeOption.put(&quot;name&quot;, p.getValue());                                           </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 783                     break;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 784                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 785             }                                                                                            </span>
<span class="842570185536784204" onmouseenter="enter('842570185536784204');" onmouseout="out('842570185536784204');" style=""> 786             if (e.findProperty(&quot;id&quot;) != null) {                                                          </span>
<span class="1619295801241413088" onmouseenter="enter('1619295801241413088');" onmouseout="out('1619295801241413088');" style=""> 787                 selectizeOption.put(&quot;id&quot;, e.findProperty(&quot;id&quot;).getValue());                              </span>
<span class="-5830252244987930005" onmouseenter="enter('-5830252244987930005');" onmouseout="out('-5830252244987930005');" style=""> 788             //  &quot;Locale&quot; entity is a special occasion. Because it have not &quot;ID&quot; column with &quot;Long&quot; type  </span>
<span class="4697280149551476993" onmouseenter="enter('4697280149551476993');" onmouseout="out('4697280149551476993');" style=""> 789             } else if (e.findProperty(&quot;localeCode&quot;) != null) {                                           </span>
<span class="7405190492767879460" onmouseenter="enter('7405190492767879460');" onmouseout="out('7405190492767879460');" style=""> 790                 selectizeOption.put(&quot;id&quot;, e.findProperty(&quot;localeCode&quot;).getValue());                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 791             }                                                                                            </span>
<span class="-7996413909894304887" onmouseenter="enter('-7996413909894304887');" onmouseout="out('-7996413909894304887');" style=""> 792             if (e.findProperty(ALTERNATE_ID_PROPERTY) != null) {                                         </span>
<span class="-2834809076191022214" onmouseenter="enter('-2834809076191022214');" onmouseout="out('-2834809076191022214');" style=""> 793                 selectizeOption.put(&quot;alternateId&quot;, e.findProperty(ALTERNATE_ID_PROPERTY).getValue());    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 794             }                                                                                            </span>
<span class="2407499722406116097" onmouseenter="enter('2407499722406116097');" onmouseout="out('2407499722406116097');" style=""> 795             options.add(selectizeOption);                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 796         }                                                                                                </span>
<span class="-7448816453305947647" onmouseenter="enter('-7448816453305947647');" onmouseout="out('-7448816453305947647');" style=""> 797         result.put(&quot;options&quot;, options);                                                                  </span>
<span  style=""> 798                                                                                                          </span>
<span class="-6419540350677864751" onmouseenter="enter('-6419540350677864751');" onmouseout="out('-6419540350677864751');" style=""> 799         return result;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 800     }                                                                                                    </span>
<span  style=""> 801                                                                                                          </span>
<span class="3610563618424293176" onmouseenter="enter('3610563618424293176');" onmouseout="out('3610563618424293176');" style=""> 802     protected String buildSelectizeUrl(ListGrid listGrid) {                                              </span>
<span class="4360254575720880810" onmouseenter="enter('4360254575720880810');" onmouseout="out('4360254575720880810');" style=""> 803         HttpServletRequest request = BroadleafRequestContext.getBroadleafRequestContext().getRequest();  </span>
<span class="-1223345315803337981" onmouseenter="enter('-1223345315803337981');" onmouseout="out('-1223345315803337981');" style=""> 804         String url = request.getContextPath();                                                           </span>
<span class="-5859217039633283919" onmouseenter="enter('-5859217039633283919');" onmouseout="out('-5859217039633283919');" style=""><abbr title=" 805         url += url.endsWith(&quot;/&quot;) || listGrid.getSectionKey().startsWith(&quot;/&quot;) ? listGrid.getSectionKey() : &quot;/&quot; + listGrid.getSectionKey();"> 805         url += url.endsWith(&quot;/&quot;) || listGrid.getSectionKey().startsWith(&quot;/&quot;) ? listGrid.getSectionKey() :ðŸ”µ</abbr></span>
<span class="5990790066724047703" onmouseenter="enter('5990790066724047703');" onmouseout="out('5990790066724047703');" style=""> 806         url += &quot;/&quot; + listGrid.getContainingEntityId();                                                   </span>
<span class="-5189302616019367476" onmouseenter="enter('-5189302616019367476');" onmouseout="out('-5189302616019367476');" style=""> 807         url += &quot;/&quot; + listGrid.getSubCollectionFieldName();                                               </span>
<span class="6645977004086329618" onmouseenter="enter('6645977004086329618');" onmouseout="out('6645977004086329618');" style=""> 808         return url;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 809     }                                                                                                    </span>
<span  style=""> 810                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 811     /**                                                                                                  </span>
<span class="-3142901546145506196" onmouseenter="enter('-3142901546145506196');" onmouseout="out('-3142901546145506196');" style=""><abbr title=" 812      * @deprecated use {@link #createListGrid(String, List, ListGrid.Type, DynamicResultSet, String, Integer, String, List, String)}"> 812      * @deprecated use {@link #createListGrid(String, List, ListGrid.Type, DynamicResultSet, String, InteðŸ”µ</abbr></span>
<span class="3292690528203019011" onmouseenter="enter('3292690528203019011');" onmouseout="out('3292690528203019011');" style=""> 813      * @param className                                                                                  </span>
<span class="5783752320936502160" onmouseenter="enter('5783752320936502160');" onmouseout="out('5783752320936502160');" style=""> 814      * @param headerFields                                                                               </span>
<span class="4180172247960880324" onmouseenter="enter('4180172247960880324');" onmouseout="out('4180172247960880324');" style=""> 815      * @param type                                                                                       </span>
<span class="-7324022876786324498" onmouseenter="enter('-7324022876786324498');" onmouseout="out('-7324022876786324498');" style=""> 816      * @param drs                                                                                        </span>
<span class="7403666429378321004" onmouseenter="enter('7403666429378321004');" onmouseout="out('7403666429378321004');" style=""> 817      * @param sectionKey                                                                                 </span>
<span class="6414796960983960786" onmouseenter="enter('6414796960983960786');" onmouseout="out('6414796960983960786');" style=""> 818      * @param order                                                                                      </span>
<span class="-2237647657818576638" onmouseenter="enter('-2237647657818576638');" onmouseout="out('-2237647657818576638');" style=""> 819      * @param idProperty                                                                                 </span>
<span class="6383674454506135847" onmouseenter="enter('6383674454506135847');" onmouseout="out('6383674454506135847');" style=""> 820      * @param sectionCrumbs                                                                              </span>
<span class="-9165797340485297481" onmouseenter="enter('-9165797340485297481');" onmouseout="out('-9165797340485297481');" style=""> 821      * @return                                                                                           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 822      */                                                                                                  </span>
<span class="-9122364098618956613" onmouseenter="enter('-9122364098618956613');" onmouseout="out('-9122364098618956613');" style=""> 823     @Deprecated                                                                                          </span>
<span class="4478013600751804718" onmouseenter="enter('4478013600751804718');" onmouseout="out('4478013600751804718');" style=""><abbr title=" 824     protected ListGrid createListGrid(String className, List&lt;Field&gt; headerFields, ListGrid.Type type, DynamicResultSet drs, "> 824     protected ListGrid createListGrid(String className, List&lt;Field&gt; headerFields, ListGrid.Type type, DynðŸ”µ</abbr></span>
<span class="-2475961144071468437" onmouseenter="enter('-2475961144071468437');" onmouseout="out('-2475961144071468437');" style=""> 825             String sectionKey, int order, String idProperty, List&lt;SectionCrumb&gt; sectionCrumbs) {         </span>
<span class="-7836467015459082374" onmouseenter="enter('-7836467015459082374');" onmouseout="out('-7836467015459082374');" style=""><abbr title=" 826        return createListGrid(className,headerFields,type,drs,sectionKey,order,idProperty,sectionCrumbs,null);"> 826        return createListGrid(className,headerFields,type,drs,sectionKey,order,idProperty,sectionCrumbs,nuðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 827     }                                                                                                    </span>
<span  style=""> 828                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 829     /**                                                                                                  </span>
<span class="-6553954062731574601" onmouseenter="enter('-6553954062731574601');" onmouseout="out('-6553954062731574601');" style=""> 830      * Populate a ListGrid with ListGridRecords.                                                         </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 831      *                                                                                                   </span>
<span class="3292690528203019011" onmouseenter="enter('3292690528203019011');" onmouseout="out('3292690528203019011');" style=""> 832      * @param className                                                                                  </span>
<span class="5783752320936502160" onmouseenter="enter('5783752320936502160');" onmouseout="out('5783752320936502160');" style=""> 833      * @param headerFields                                                                               </span>
<span class="4180172247960880324" onmouseenter="enter('4180172247960880324');" onmouseout="out('4180172247960880324');" style=""> 834      * @param type                                                                                       </span>
<span class="-7324022876786324498" onmouseenter="enter('-7324022876786324498');" onmouseout="out('-7324022876786324498');" style=""> 835      * @param drs                                                                                        </span>
<span class="7403666429378321004" onmouseenter="enter('7403666429378321004');" onmouseout="out('7403666429378321004');" style=""> 836      * @param sectionKey                                                                                 </span>
<span class="6414796960983960786" onmouseenter="enter('6414796960983960786');" onmouseout="out('6414796960983960786');" style=""> 837      * @param order                                                                                      </span>
<span class="-2237647657818576638" onmouseenter="enter('-2237647657818576638');" onmouseout="out('-2237647657818576638');" style=""> 838      * @param idProperty                                                                                 </span>
<span class="6383674454506135847" onmouseenter="enter('6383674454506135847');" onmouseout="out('6383674454506135847');" style=""> 839      * @param sectionCrumbs                                                                              </span>
<span class="958697608627838498" onmouseenter="enter('958697608627838498');" onmouseout="out('958697608627838498');" style=""> 840      * @param sortPropery                                                                                </span>
<span class="-9165797340485297481" onmouseenter="enter('-9165797340485297481');" onmouseout="out('-9165797340485297481');" style=""> 841      * @return                                                                                           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 842      */                                                                                                  </span>
<span class="4478013600751804718" onmouseenter="enter('4478013600751804718');" onmouseout="out('4478013600751804718');" style=""><abbr title=" 843     protected ListGrid createListGrid(String className, List&lt;Field&gt; headerFields, ListGrid.Type type, DynamicResultSet drs,"> 843     protected ListGrid createListGrid(String className, List&lt;Field&gt; headerFields, ListGrid.Type type, DynðŸ”µ</abbr></span>
<span class="-6113374608895219377" onmouseenter="enter('-6113374608895219377');" onmouseout="out('-6113374608895219377');" style=""><abbr title=" 844             String sectionKey, Integer order, String idProperty, List&lt;SectionCrumb&gt; sectionCrumbs, String sortPropery) {"> 844             String sectionKey, Integer order, String idProperty, List&lt;SectionCrumb&gt; sectionCrumbs, StringðŸ”µ</abbr></span>
<span class="-449286439783514832" onmouseenter="enter('-449286439783514832');" onmouseout="out('-449286439783514832');" style=""> 845         // Create the list grid and set some basic attributes                                            </span>
<span class="9183228219526841185" onmouseenter="enter('9183228219526841185');" onmouseout="out('9183228219526841185');" style=""> 846         ListGrid listGrid = new ListGrid();                                                              </span>
<span class="-6947819430094733929" onmouseenter="enter('-6947819430094733929');" onmouseout="out('-6947819430094733929');" style=""> 847         listGrid.setClassName(className);                                                                </span>
<span class="4219128016198228062" onmouseenter="enter('4219128016198228062');" onmouseout="out('4219128016198228062');" style=""> 848         listGrid.getHeaderFields().addAll(headerFields);                                                 </span>
<span class="-7949709696885802288" onmouseenter="enter('-7949709696885802288');" onmouseout="out('-7949709696885802288');" style=""> 849         listGrid.setListGridType(type);                                                                  </span>
<span class="8360738814350031256" onmouseenter="enter('8360738814350031256');" onmouseout="out('8360738814350031256');" style=""> 850         listGrid.setSectionCrumbs(sectionCrumbs);                                                        </span>
<span class="-7038501348455923153" onmouseenter="enter('-7038501348455923153');" onmouseout="out('-7038501348455923153');" style=""> 851         listGrid.setSectionKey(sectionKey);                                                              </span>
<span class="5588432900267028426" onmouseenter="enter('5588432900267028426');" onmouseout="out('5588432900267028426');" style=""> 852         listGrid.setOrder(order);                                                                        </span>
<span class="-2959509556644296161" onmouseenter="enter('-2959509556644296161');" onmouseout="out('-2959509556644296161');" style=""> 853         listGrid.setIdProperty(idProperty);                                                              </span>
<span class="-1574850005689313985" onmouseenter="enter('-1574850005689313985');" onmouseout="out('-1574850005689313985');" style=""> 854         listGrid.setStartIndex(drs.getStartIndex());                                                     </span>
<span class="-1229635168663567378" onmouseenter="enter('-1229635168663567378');" onmouseout="out('-1229635168663567378');" style=""> 855         listGrid.setTotalRecords(drs.getTotalRecords());                                                 </span>
<span class="-8685641121402901146" onmouseenter="enter('-8685641121402901146');" onmouseout="out('-8685641121402901146');" style=""> 856         listGrid.setPageSize(drs.getPageSize());                                                         </span>
<span  style=""> 857                                                                                                          </span>
<span class="6809887928661746160" onmouseenter="enter('6809887928661746160');" onmouseout="out('6809887928661746160');" style=""> 858         String sectionIdentifier = extractSectionIdentifierFromCrumb(sectionCrumbs);                     </span>
<span class="-666381629022378153" onmouseenter="enter('-666381629022378153');" onmouseout="out('-666381629022378153');" style=""><abbr title=" 859         AdminSection section = navigationService.findAdminSectionByClassAndSectionId(className, sectionIdentifier);"> 859         AdminSection section = navigationService.findAdminSectionByClassAndSectionId(className, sectionIdðŸ”µ</abbr></span>
<span class="2297837107111400660" onmouseenter="enter('2297837107111400660');" onmouseout="out('2297837107111400660');" style=""> 860         if (section != null) {                                                                           </span>
<span class="-6658763311085780957" onmouseenter="enter('-6658763311085780957');" onmouseout="out('-6658763311085780957');" style=""> 861             listGrid.setExternalEntitySectionKey(section.getUrl());                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 862         }                                                                                                </span>
<span  style=""> 863                                                                                                          </span>
<span class="2209008320918265390" onmouseenter="enter('2209008320918265390');" onmouseout="out('2209008320918265390');" style=""> 864         // format date list grid cells                                                                   </span>
<span class="8206468207203445529" onmouseenter="enter('8206468207203445529');" onmouseout="out('8206468207203445529');" style=""> 865         SimpleDateFormat formatter = new SimpleDateFormat(&quot;MMM d, y @ hh:mma&quot;);                          </span>
<span class="-3380881449399951408" onmouseenter="enter('-3380881449399951408');" onmouseout="out('-3380881449399951408');" style=""> 866         DateFormatSymbols symbols = new DateFormatSymbols(Locale.getDefault());                          </span>
<span class="4107867186349432276" onmouseenter="enter('4107867186349432276');" onmouseout="out('4107867186349432276');" style=""> 867         symbols.setAmPmStrings(new String[] { &quot;am&quot;, &quot;pm&quot; });                                             </span>
<span class="8033599572947753762" onmouseenter="enter('8033599572947753762');" onmouseout="out('8033599572947753762');" style=""> 868         formatter.setDateFormatSymbols(symbols);                                                         </span>
<span  style=""> 869                                                                                                          </span>
<span class="-8955150404377737735" onmouseenter="enter('-8955150404377737735');" onmouseout="out('-8955150404377737735');" style=""> 870         // For each of the entities (rows) in the list grid, we need to build the associated             </span>
<span class="7780135600729227159" onmouseenter="enter('7780135600729227159');" onmouseout="out('7780135600729227159');" style=""> 871         // ListGridRecord and set the required fields on the record. These fields are the same ones      </span>
<span class="-4274337481121146447" onmouseenter="enter('-4274337481121146447');" onmouseout="out('-4274337481121146447');" style=""> 872         // that are used for the header fields.                                                          </span>
<span class="-5517026699518874938" onmouseenter="enter('-5517026699518874938');" onmouseout="out('-5517026699518874938');" style=""> 873         for (Entity e : drs.getRecords()) {                                                              </span>
<span class="1299256644552050382" onmouseenter="enter('1299256644552050382');" onmouseout="out('1299256644552050382');" style=""> 874             ListGridRecord record = new ListGridRecord();                                                </span>
<span class="-8742186718038750131" onmouseenter="enter('-8742186718038750131');" onmouseout="out('-8742186718038750131');" style=""> 875             record.setListGrid(listGrid);                                                                </span>
<span class="6901251098959405515" onmouseenter="enter('6901251098959405515');" onmouseout="out('6901251098959405515');" style=""> 876             record.setDirty(e.isDirty());                                                                </span>
<span class="-5328520837276209835" onmouseenter="enter('-5328520837276209835');" onmouseout="out('-5328520837276209835');" style=""> 877             record.setEntity(e);                                                                         </span>
<span class="4295036974122714095" onmouseenter="enter('4295036974122714095');" onmouseout="out('4295036974122714095');" style=""> 878             if (StringUtils.isNotBlank(sortPropery) &amp;&amp; e.findProperty(sortPropery) != null) {            </span>
<span class="6298096210056644819" onmouseenter="enter('6298096210056644819');" onmouseout="out('6298096210056644819');" style=""> 879                 Property sort = e.findProperty(sortPropery);                                             </span>
<span class="-3019357169870438428" onmouseenter="enter('-3019357169870438428');" onmouseout="out('-3019357169870438428');" style=""> 880                 record.setDisplayOrder(sort.getValue());                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 881             }                                                                                            </span>
<span class="-6805099362032074066" onmouseenter="enter('-6805099362032074066');" onmouseout="out('-6805099362032074066');" style=""> 882             if (e.findProperty(&quot;hasError&quot;) != null) {                                                    </span>
<span class="893890618648542494" onmouseenter="enter('893890618648542494');" onmouseout="out('893890618648542494');" style=""> 883                 Boolean hasError = Boolean.parseBoolean(e.findProperty(&quot;hasError&quot;).getValue());          </span>
<span class="5018109180834939283" onmouseenter="enter('5018109180834939283');" onmouseout="out('5018109180834939283');" style=""> 884                 record.setIsError(hasError);                                                             </span>
<span class="6284086923287170648" onmouseenter="enter('6284086923287170648');" onmouseout="out('6284086923287170648');" style=""> 885                 if (hasError) {                                                                          </span>
<span class="-2405869569788439449" onmouseenter="enter('-2405869569788439449');" onmouseout="out('-2405869569788439449');" style=""> 886                     ExtensionResultStatusType messageResultStatus = listGridErrorExtensionManager        </span>
<span class="60178842478893139" onmouseenter="enter('60178842478893139');" onmouseout="out('60178842478893139');" style=""> 887                             .getProxy().determineErrorMessageForEntity(e, record);                       </span>
<span  style=""> 888                                                                                                          </span>
<span class="4336715785327594030" onmouseenter="enter('4336715785327594030');" onmouseout="out('4336715785327594030');" style=""> 889                     if (ExtensionResultStatusType.NOT_HANDLED.equals(messageResultStatus)) {             </span>
<span class="-5328227180306975968" onmouseenter="enter('-5328227180306975968');" onmouseout="out('-5328227180306975968');" style=""> 890                         record.setErrorKey(&quot;listgrid.record.error&quot;);                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 891                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 892                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 893             }                                                                                            </span>
<span  style=""> 894                                                                                                          </span>
<span class="-6673642350284825111" onmouseenter="enter('-6673642350284825111');" onmouseout="out('-6673642350284825111');" style=""> 895             if (e.findProperty(&quot;progressStatus&quot;) != null) {                                              </span>
<span class="-2405869569788439449" onmouseenter="enter('-2405869569788439449');" onmouseout="out('-2405869569788439449');" style=""> 896                 ExtensionResultStatusType messageResultStatus = listGridErrorExtensionManager            </span>
<span class="-4105959264543865488" onmouseenter="enter('-4105959264543865488');" onmouseout="out('-4105959264543865488');" style=""> 897                         .getProxy().determineStatusMessageForEntity(e, record);                          </span>
<span class="4336715785327594030" onmouseenter="enter('4336715785327594030');" onmouseout="out('4336715785327594030');" style=""> 898                 if (ExtensionResultStatusType.NOT_HANDLED.equals(messageResultStatus)) {                 </span>
<span class="-1619149624396289128" onmouseenter="enter('-1619149624396289128');" onmouseout="out('-1619149624396289128');" style=""> 899                     record.setStatus(e.findProperty(&quot;progressStatus&quot;).getValue());                       </span>
<span class="-5097013158362698405" onmouseenter="enter('-5097013158362698405');" onmouseout="out('-5097013158362698405');" style=""> 900                     record.setStatusCssClass(&quot;listgrid.record.status&quot;);                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 901                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 902             }                                                                                            </span>
<span  style=""> 903                                                                                                          </span>
<span class="6661978459482218631" onmouseenter="enter('6661978459482218631');" onmouseout="out('6661978459482218631');" style=""> 904             if (e.findProperty(idProperty) != null) {                                                    </span>
<span class="-8868360599888536047" onmouseenter="enter('-8868360599888536047');" onmouseout="out('-8868360599888536047');" style=""> 905                 record.setId(e.findProperty(idProperty).getValue());                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 906             }                                                                                            </span>
<span  style=""> 907                                                                                                          </span>
<span class="4163901938958293625" onmouseenter="enter('4163901938958293625');" onmouseout="out('4163901938958293625');" style=""> 908             for (Field headerField : headerFields) {                                                     </span>
<span class="5027179794052216178" onmouseenter="enter('5027179794052216178');" onmouseout="out('5027179794052216178');" style=""> 909                 Property p = e.findProperty(headerField.getName());                                      </span>
<span class="-4724213940983805674" onmouseenter="enter('-4724213940983805674');" onmouseout="out('-4724213940983805674');" style=""> 910                 if (p != null) {                                                                         </span>
<span class="-3806855064372020025" onmouseenter="enter('-3806855064372020025');" onmouseout="out('-3806855064372020025');" style=""> 911                     Field recordField = new Field().withName(headerField.getName())                      </span>
<span class="5094071872860659780" onmouseenter="enter('5094071872860659780');" onmouseout="out('5094071872860659780');" style=""> 912                             .withFriendlyName(headerField.getFriendlyName())                             </span>
<span class="-5738388783204669504" onmouseenter="enter('-5738388783204669504');" onmouseout="out('-5738388783204669504');" style=""> 913                             .withOrder(p.getMetadata().getOrder());                                      </span>
<span  style=""> 914                                                                                                          </span>
<span class="6797523520890025382" onmouseenter="enter('6797523520890025382');" onmouseout="out('6797523520890025382');" style=""> 915                     if (headerField instanceof ComboField) {                                             </span>
<span class="-1809643957227997284" onmouseenter="enter('-1809643957227997284');" onmouseout="out('-1809643957227997284');" style=""> 916                         recordField.setValue(((ComboField) headerField).getOption(p.getValue()));        </span>
<span class="-5676530272089615334" onmouseenter="enter('-5676530272089615334');" onmouseout="out('-5676530272089615334');" style=""> 917                         recordField.setDisplayValue(p.getDisplayValue());                                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 918                     } else {                                                                             </span>
<span class="3939566750475024909" onmouseenter="enter('3939566750475024909');" onmouseout="out('3939566750475024909');" style=""> 919                         if (headerField.getFieldType().equals(&quot;DATE&quot;)) {                                 </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 920                             try {                                                                        </span>
<span class="6474778173321313180" onmouseenter="enter('6474778173321313180');" onmouseout="out('6474778173321313180');" style=""><abbr title=" 921                                 Date date = new SimpleDateFormat(&quot;yyyy.MM.dd HH:mm:ss&quot;).parse(p.getValue());"> 921                                 Date date = new SimpleDateFormat(&quot;yyyy.MM.dd HH:mm:ss&quot;).parse(p.getValue(ðŸ”µ</abbr></span>
<span class="3880682438474898081" onmouseenter="enter('3880682438474898081');" onmouseout="out('3880682438474898081');" style=""> 922                                 String newValue = formatter.format(date);                                </span>
<span class="6595195419554741000" onmouseenter="enter('6595195419554741000');" onmouseout="out('6595195419554741000');" style=""> 923                                 recordField.setValue(newValue);                                          </span>
<span class="2273034781883266774" onmouseenter="enter('2273034781883266774');" onmouseout="out('2273034781883266774');" style=""> 924                             } catch (Exception ex) {                                                     </span>
<span class="-1278861869857480835" onmouseenter="enter('-1278861869857480835');" onmouseout="out('-1278861869857480835');" style=""> 925                                 recordField.setValue(p.getValue());                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 926                             }                                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 927                         } else {                                                                         </span>
<span class="-1278861869857480835" onmouseenter="enter('-1278861869857480835');" onmouseout="out('-1278861869857480835');" style=""> 928                             recordField.setValue(p.getValue());                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 929                         }                                                                                </span>
<span class="-5676530272089615334" onmouseenter="enter('-5676530272089615334');" onmouseout="out('-5676530272089615334');" style=""> 930                         recordField.setDisplayValue(p.getDisplayValue());                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 931                     }                                                                                    </span>
<span  style=""> 932                                                                                                          </span>
<span class="1395793512456166896" onmouseenter="enter('1395793512456166896');" onmouseout="out('1395793512456166896');" style=""> 933                     recordField.setDerived(isDerivedField(headerField, recordField, p));                 </span>
<span  style=""> 934                                                                                                          </span>
<span class="1474914769688142515" onmouseenter="enter('1474914769688142515');" onmouseout="out('1474914769688142515');" style=""> 935                     record.getFields().add(recordField);                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 936                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 937             }                                                                                            </span>
<span  style=""> 938                                                                                                          </span>
<span class="7681410006718809906" onmouseenter="enter('7681410006718809906');" onmouseout="out('7681410006718809906');" style=""> 939             if (e.findProperty(AdminMainEntity.MAIN_ENTITY_NAME_PROPERTY) != null) {                     </span>
<span class="-2560058380276440283" onmouseenter="enter('-2560058380276440283');" onmouseout="out('-2560058380276440283');" style=""> 940                 Field hiddenField = new Field().withName(AdminMainEntity.MAIN_ENTITY_NAME_PROPERTY);     </span>
<span class="-3700863118643080175" onmouseenter="enter('-3700863118643080175');" onmouseout="out('-3700863118643080175');" style=""><abbr title=" 941                 hiddenField.setValue(e.findProperty(AdminMainEntity.MAIN_ENTITY_NAME_PROPERTY).getValue());"> 941                 hiddenField.setValue(e.findProperty(AdminMainEntity.MAIN_ENTITY_NAME_PROPERTY).getValue()ðŸ”µ</abbr></span>
<span class="-8926099734580015874" onmouseenter="enter('-8926099734580015874');" onmouseout="out('-8926099734580015874');" style=""> 942                 record.getHiddenFields().add(hiddenField);                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 943             }                                                                                            </span>
<span  style=""> 944                                                                                                          </span>
<span class="-767503360667085643" onmouseenter="enter('-767503360667085643');" onmouseout="out('-767503360667085643');" style=""> 945             if (e.findProperty(BasicPersistenceModule.ALTERNATE_ID_PROPERTY) != null) {                  </span>
<span class="6815728707096626977" onmouseenter="enter('6815728707096626977');" onmouseout="out('6815728707096626977');" style=""> 946                 record.setAltId(e.findProperty(BasicPersistenceModule.ALTERNATE_ID_PROPERTY).getValue());</span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 947             }                                                                                            </span>
<span  style=""> 948                                                                                                          </span>
<span class="4454208436841958265" onmouseenter="enter('4454208436841958265');" onmouseout="out('4454208436841958265');" style=""> 949             extensionManager.getProxy().modifyListGridRecord(className, record, e);                      </span>
<span  style=""> 950                                                                                                          </span>
<span class="-2046562633600316152" onmouseenter="enter('-2046562633600316152');" onmouseout="out('-2046562633600316152');" style=""> 951             listGrid.getRecords().add(record);                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 952         }                                                                                                </span>
<span  style=""> 953                                                                                                          </span>
<span class="3400018439585714383" onmouseenter="enter('3400018439585714383');" onmouseout="out('3400018439585714383');" style=""> 954         if (drs.getFirstId() != null) {                                                                  </span>
<span class="657069941572346003" onmouseenter="enter('657069941572346003');" onmouseout="out('657069941572346003');" style=""> 955             listGrid.setFirstId(drs.getFirstId());                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 956         }                                                                                                </span>
<span class="-8589701589672818150" onmouseenter="enter('-8589701589672818150');" onmouseout="out('-8589701589672818150');" style=""> 957         if (drs.getLastId() != null) {                                                                   </span>
<span class="8426729182884352986" onmouseenter="enter('8426729182884352986');" onmouseout="out('8426729182884352986');" style=""> 958             listGrid.setLastId(drs.getLastId());                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 959         }                                                                                                </span>
<span class="6275187001061462238" onmouseenter="enter('6275187001061462238');" onmouseout="out('6275187001061462238');" style=""> 960         if (drs.getUpperCount() != null) {                                                               </span>
<span class="-576914595282790069" onmouseenter="enter('-576914595282790069');" onmouseout="out('-576914595282790069');" style=""> 961             listGrid.setUpperCount(drs.getUpperCount());                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 962         }                                                                                                </span>
<span class="4823072466704399057" onmouseenter="enter('4823072466704399057');" onmouseout="out('4823072466704399057');" style=""> 963         if (drs.getLowerCount() != null) {                                                               </span>
<span class="-1903228332443717343" onmouseenter="enter('-1903228332443717343');" onmouseout="out('-1903228332443717343');" style=""> 964             listGrid.setLowerCount(drs.getLowerCount());                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 965         }                                                                                                </span>
<span class="4841764865893204927" onmouseenter="enter('4841764865893204927');" onmouseout="out('4841764865893204927');" style=""> 966         if (drs.getFetchType() != null) {                                                                </span>
<span class="-77798786805735884" onmouseenter="enter('-77798786805735884');" onmouseout="out('-77798786805735884');" style=""> 967             listGrid.setFetchType(drs.getFetchType().toString());                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 968         }                                                                                                </span>
<span class="-9150092368605969111" onmouseenter="enter('-9150092368605969111');" onmouseout="out('-9150092368605969111');" style=""> 969         if (drs.getTotalCountLessThanPageSize() != null) {                                               </span>
<span class="192650896043853585" onmouseenter="enter('192650896043853585');" onmouseout="out('192650896043853585');" style=""> 970             listGrid.setTotalCountLessThanPageSize(drs.getTotalCountLessThanPageSize());                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 971         }                                                                                                </span>
<span class="3404741154469919162" onmouseenter="enter('3404741154469919162');" onmouseout="out('3404741154469919162');" style=""> 972         if (drs.getPromptSearch() != null) {                                                             </span>
<span class="-6611592537868887580" onmouseenter="enter('-6611592537868887580');" onmouseout="out('-6611592537868887580');" style=""> 973             listGrid.setPromptSearch(drs.getPromptSearch());                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 974         }                                                                                                </span>
<span  style=""> 975                                                                                                          </span>
<span class="8338561479600990216" onmouseenter="enter('8338561479600990216');" onmouseout="out('8338561479600990216');" style=""> 976         return listGrid;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 977     }                                                                                                    </span>
<span  style=""> 978                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 979     /**                                                                                                  </span>
<span class="7203476035615582402" onmouseenter="enter('7203476035615582402');" onmouseout="out('7203476035615582402');" style=""><abbr title=" 980      * Determines whether or not a particular field in a record is derived. By default this checks the {@link BasicFieldMetadata}"> 980      * Determines whether or not a particular field in a record is derived. By default this checks the {@ðŸ”µ</abbr></span>
<span class="-4069675647285817004" onmouseenter="enter('-4069675647285817004');" onmouseout="out('-4069675647285817004');" style=""> 981      * for the given Property to see if something on the backend has marked it as derived                </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 982      *                                                                                                   </span>
<span class="2786059063596769946" onmouseenter="enter('2786059063596769946');" onmouseout="out('2786059063596769946');" style=""> 983      * @param headerField the header for this recordField                                                </span>
<span class="7447440891213078037" onmouseenter="enter('7447440891213078037');" onmouseout="out('7447440891213078037');" style=""> 984      * @param recordField the recordField being populated                                                </span>
<span class="8242400819290521133" onmouseenter="enter('8242400819290521133');" onmouseout="out('8242400819290521133');" style=""> 985      * @param p the property that relates to this recordField                                            </span>
<span class="2097819629215924500" onmouseenter="enter('2097819629215924500');" onmouseout="out('2097819629215924500');" style=""> 986      * @return whether or not this field is derived                                                      </span>
<span class="5916081075383634288" onmouseenter="enter('5916081075383634288');" onmouseout="out('5916081075383634288');" style=""><abbr title=" 987      * @see {@link #createListGrid(String, List, ListGrid.Type, DynamicResultSet, String, Integer, String, List, String)}"> 987      * @see {@link #createListGrid(String, List, ListGrid.Type, DynamicResultSet, String, Integer, StringðŸ”µ</abbr></span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 988      */                                                                                                  </span>
<span class="-8637325260962674117" onmouseenter="enter('-8637325260962674117');" onmouseout="out('-8637325260962674117');" style=""> 989     protected Boolean isDerivedField(Field headerField, Field recordField, Property p) {                 </span>
<span class="1661867973140043253" onmouseenter="enter('1661867973140043253');" onmouseout="out('1661867973140043253');" style=""> 990         return BooleanUtils.isTrue(((BasicFieldMetadata) p.getMetadata()).getIsDerived());               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 991     }                                                                                                    </span>
<span  style=""> 992                                                                                                          </span>
<span class="7122600949652716635" onmouseenter="enter('7122600949652716635');" onmouseout="out('7122600949652716635');" style=""> 993     protected void setEntityFormFields(ClassMetadata cmd, EntityForm ef, List&lt;Property&gt; properties) {    </span>
<span class="6325387712166170506" onmouseenter="enter('6325387712166170506');" onmouseout="out('6325387712166170506');" style=""> 994         List&lt;Field&gt; homelessFields = new ArrayList&lt;&gt;();                                                  </span>
<span class="4866400253676981137" onmouseenter="enter('4866400253676981137');" onmouseout="out('4866400253676981137');" style=""> 995         List&lt;Field&gt; fieldsWithAssociations = new ArrayList&lt;&gt;();                                          </span>
<span  style=""> 996                                                                                                          </span>
<span class="2404180692851035070" onmouseenter="enter('2404180692851035070');" onmouseout="out('2404180692851035070');" style=""> 997         for (Property property : properties) {                                                           </span>
<span class="-446642995335437650" onmouseenter="enter('-446642995335437650');" onmouseout="out('-446642995335437650');" style=""> 998             if (property.getMetadata() instanceof BasicFieldMetadata) {                                  </span>
<span class="6647472598704819567" onmouseenter="enter('6647472598704819567');" onmouseout="out('6647472598704819567');" style=""> 999                 BasicFieldMetadata fmd = (BasicFieldMetadata) property.getMetadata();                    </span>
<span  style="">1000                                                                                                          </span>
<span  style="">1001                                                                                                          </span>
<span class="-4475069031736235173" onmouseenter="enter('-4475069031736235173');" onmouseout="out('-4475069031736235173');" style="">1002                 if (!ArrayUtils.contains(getFormHiddenVisibilities(), fmd.getVisibility())) {            </span>
<span class="-6270154255315256607" onmouseenter="enter('-6270154255315256607');" onmouseout="out('-6270154255315256607');" style=""><abbr title="1003                     // Depending on visibility, field for the particular property is not created on the form">1003                     // Depending on visibility, field for the particular property is not created on the fðŸ”µ</abbr></span>
<span class="5921747215124261866" onmouseenter="enter('5921747215124261866');" onmouseout="out('5921747215124261866');" style="">1004                     String fieldType = fmd.getFieldType() == null ? null : fmd.getFieldType().toString();</span>
<span  style="">1005                                                                                                          </span>
<span class="6708987068205782652" onmouseenter="enter('6708987068205782652');" onmouseout="out('6708987068205782652');" style="">1006                     // Create the field and set some basic attributes                                    </span>
<span class="8116345463116621173" onmouseenter="enter('8116345463116621173');" onmouseout="out('8116345463116621173');" style="">1007                     Field f;                                                                             </span>
<span  style="">1008                                                                                                          </span>
<span class="8199797825370303284" onmouseenter="enter('8199797825370303284');" onmouseout="out('8199797825370303284');" style="">1009                     if (fieldType.equals(SupportedFieldType.BROADLEAF_ENUMERATION.toString())            </span>
<span class="7716913215106788406" onmouseenter="enter('7716913215106788406');" onmouseout="out('7716913215106788406');" style="">1010                             || fieldType.equals(SupportedFieldType.EXPLICIT_ENUMERATION.toString())      </span>
<span class="2980977699228922095" onmouseenter="enter('2980977699228922095');" onmouseout="out('2980977699228922095');" style="">1011                             || fieldType.equals(SupportedFieldType.DATA_DRIVEN_ENUMERATION.toString())   </span>
<span class="7388471135187367898" onmouseenter="enter('7388471135187367898');" onmouseout="out('7388471135187367898');" style="">1012                             || fieldType.equals(SupportedFieldType.EMPTY_ENUMERATION.toString())) {      </span>
<span class="3276444675754694915" onmouseenter="enter('3276444675754694915');" onmouseout="out('3276444675754694915');" style=""><abbr title="1013                         // We&#x27;re dealing with fields that should render as drop-downs, so set their possible values">1013                         // We&#x27;re dealing with fields that should render as drop-downs, so set their possiðŸ”µ</abbr></span>
<span class="3203856539989077186" onmouseenter="enter('3203856539989077186');" onmouseout="out('3203856539989077186');" style="">1014                         f = new ComboField();                                                            </span>
<span class="6120731816730172045" onmouseenter="enter('6120731816730172045');" onmouseout="out('6120731816730172045');" style="">1015                         ((ComboField) f).setOptions(fmd.getEnumerationValues());                         </span>
<span class="-4628034205462573751" onmouseenter="enter('-4628034205462573751');" onmouseout="out('-4628034205462573751');" style=""><abbr title="1016                         if (fmd.getHideEnumerationIfEmpty() != null &amp;&amp; fmd.getHideEnumerationIfEmpty().booleanValue()">1016                         if (fmd.getHideEnumerationIfEmpty() != null &amp;&amp; fmd.getHideEnumerationIfEmpty().boðŸ”µ</abbr></span>
<span class="-6675389158909418663" onmouseenter="enter('-6675389158909418663');" onmouseout="out('-6675389158909418663');" style="">1017                                 &amp;&amp; ((ComboField) f).getOptions().size() == 0) {                          </span>
<span class="-8620847541322007209" onmouseenter="enter('-8620847541322007209');" onmouseout="out('-8620847541322007209');" style="">1018                             f.setIsVisible(false);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1019                         }                                                                                </span>
<span class="86452670050279225" onmouseenter="enter('86452670050279225');" onmouseout="out('86452670050279225');" style="">1020                     } else if (fieldType.equals(SupportedFieldType.CODE.toString())) {                   </span>
<span class="-7620786431462842147" onmouseenter="enter('-7620786431462842147');" onmouseout="out('-7620786431462842147');" style="">1021                         f = new CodeField();                                                             </span>
<span class="-3831443983095651615" onmouseenter="enter('-3831443983095651615');" onmouseout="out('-3831443983095651615');" style="">1022                     } else if (fieldType.equals(SupportedFieldType.RULE_SIMPLE.toString())               </span>
<span class="-6155398851072788654" onmouseenter="enter('-6155398851072788654');" onmouseout="out('-6155398851072788654');" style="">1023                             || fieldType.equals(SupportedFieldType.RULE_SIMPLE_TIME.toString())          </span>
<span class="-7731003048108517996" onmouseenter="enter('-7731003048108517996');" onmouseout="out('-7731003048108517996');" style="">1024                             || fieldType.equals(SupportedFieldType.RULE_WITH_QUANTITY.toString())) {     </span>
<span class="1510588759783913078" onmouseenter="enter('1510588759783913078');" onmouseout="out('1510588759783913078');" style="">1025                         // We&#x27;re dealing with rule builders, so we&#x27;ll create those specialized fields    </span>
<span class="439535866421335144" onmouseenter="enter('439535866421335144');" onmouseout="out('439535866421335144');" style="">1026                         f = new RuleBuilderField();                                                      </span>
<span class="-1112724631648616512" onmouseenter="enter('-1112724631648616512');" onmouseout="out('-1112724631648616512');" style="">1027                         ((RuleBuilderField) f).setJsonFieldName(property.getName() + &quot;Json&quot;);            </span>
<span class="1732596643653885393" onmouseenter="enter('1732596643653885393');" onmouseout="out('1732596643653885393');" style="">1028                         ((RuleBuilderField) f).setDataWrapper(new DataWrapper());                        </span>
<span class="7228657391391942788" onmouseenter="enter('7228657391391942788');" onmouseout="out('7228657391391942788');" style="">1029                         ((RuleBuilderField) f).setFieldBuilder(fmd.getRuleIdentifier());                 </span>
<span class="6741378243253493035" onmouseenter="enter('6741378243253493035');" onmouseout="out('6741378243253493035');" style="">1030                         ((RuleBuilderField) f).setDisplayType(fmd.getDisplayType().toString());          </span>
<span  style="">1031                                                                                                          </span>
<span class="4466331963824990789" onmouseenter="enter('4466331963824990789');" onmouseout="out('4466331963824990789');" style="">1032                         String blankJsonString =  &quot;{\&quot;data\&quot;:[]}&quot;;                                       </span>
<span class="-7753853041517398518" onmouseenter="enter('-7753853041517398518');" onmouseout="out('-7753853041517398518');" style="">1033                         ((RuleBuilderField) f).setJson(blankJsonString);                                 </span>
<span class="-6647315222721447684" onmouseenter="enter('-6647315222721447684');" onmouseout="out('-6647315222721447684');" style="">1034                         DataWrapper dw = convertJsonToDataWrapper(blankJsonString);                      </span>
<span class="-3408161092817379645" onmouseenter="enter('-3408161092817379645');" onmouseout="out('-3408161092817379645');" style="">1035                         if (dw != null) {                                                                </span>
<span class="-5096298828793309103" onmouseenter="enter('-5096298828793309103');" onmouseout="out('-5096298828793309103');" style="">1036                             ((RuleBuilderField) f).setDataWrapper(dw);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1037                         }                                                                                </span>
<span  style="">1038                                                                                                          </span>
<span class="3046581447506121497" onmouseenter="enter('3046581447506121497');" onmouseout="out('3046581447506121497');" style="">1039                         if (fieldType.equals(SupportedFieldType.RULE_SIMPLE.toString())) {               </span>
<span class="-1186924665685770541" onmouseenter="enter('-1186924665685770541');" onmouseout="out('-1186924665685770541');" style="">1040                             ((RuleBuilderField) f).setRuleType(&quot;rule-builder-simple&quot;);                   </span>
<span class="-4608843455051291020" onmouseenter="enter('-4608843455051291020');" onmouseout="out('-4608843455051291020');" style="">1041                         } else if (fieldType.equals(SupportedFieldType.RULE_WITH_QUANTITY.toString())) { </span>
<span class="-4088622747979962571" onmouseenter="enter('-4088622747979962571');" onmouseout="out('-4088622747979962571');" style="">1042                             ((RuleBuilderField) f).setRuleType(&quot;rule-builder-with-quantity&quot;);            </span>
<span class="6638316396690215710" onmouseenter="enter('6638316396690215710');" onmouseout="out('6638316396690215710');" style="">1043                         } else if (fieldType.equals(SupportedFieldType.RULE_SIMPLE_TIME.toString())) {   </span>
<span class="-5927097931654974492" onmouseenter="enter('-5927097931654974492');" onmouseout="out('-5927097931654974492');" style="">1044                             ((RuleBuilderField) f).setRuleType(&quot;rule-builder-simple-time&quot;);              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1045                         }                                                                                </span>
<span class="-76815898427635828" onmouseenter="enter('-76815898427635828');" onmouseout="out('-76815898427635828');" style="">1046                     } else if (LookupType.DROPDOWN.equals(fmd.getLookupType())) {                        </span>
<span class="2821913588763042756" onmouseenter="enter('2821913588763042756');" onmouseout="out('2821913588763042756');" style=""><abbr title="1047                         // We&#x27;re dealing with a to-one field that wants to be rendered as a dropdown instead of in a ">1047                         // We&#x27;re dealing with a to-one field that wants to be rendered as a dropdown instðŸ”µ</abbr></span>
<span class="566288030321676498" onmouseenter="enter('566288030321676498');" onmouseout="out('566288030321676498');" style=""><abbr title="1048                         // modal, so we&#x27;ll provision the combo field here. Available options will be set as part of a">1048                         // modal, so we&#x27;ll provision the combo field here. Available options will be set ðŸ”µ</abbr></span>
<span class="7172718814241780846" onmouseenter="enter('7172718814241780846');" onmouseout="out('7172718814241780846');" style="">1049                         // subsequent operation                                                          </span>
<span class="3203856539989077186" onmouseenter="enter('3203856539989077186');" onmouseout="out('3203856539989077186');" style="">1050                         f = new ComboField();                                                            </span>
<span class="-1555139312653833561" onmouseenter="enter('-1555139312653833561');" onmouseout="out('-1555139312653833561');" style="">1051                     } else if (fieldType.equals(SupportedFieldType.MEDIA.toString())) {                  </span>
<span class="7851932113124846293" onmouseenter="enter('7851932113124846293');" onmouseout="out('7851932113124846293');" style="">1052                         f = new MediaField();                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1053                     } else {                                                                             </span>
<span class="-4540598357129068716" onmouseenter="enter('-4540598357129068716');" onmouseout="out('-4540598357129068716');" style="">1054                         // Create a default field since there was no specialized handler                 </span>
<span class="8445500457207430044" onmouseenter="enter('8445500457207430044');" onmouseout="out('8445500457207430044');" style="">1055                         f = new Field();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1056                     }                                                                                    </span>
<span  style="">1057                                                                                                          </span>
<span class="-1589475346053267562" onmouseenter="enter('-1589475346053267562');" onmouseout="out('-1589475346053267562');" style="">1058                     Boolean required = fmd.getRequiredOverride();                                        </span>
<span class="-1593138839980229401" onmouseenter="enter('-1593138839980229401');" onmouseout="out('-1593138839980229401');" style="">1059                     if (required == null) {                                                              </span>
<span class="-6716674851132060026" onmouseenter="enter('-6716674851132060026');" onmouseout="out('-6716674851132060026');" style="">1060                         required = fmd.getRequired();                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1061                     }                                                                                    </span>
<span  style="">1062                                                                                                          </span>
<span class="981510687991453845" onmouseenter="enter('981510687991453845');" onmouseout="out('981510687991453845');" style="">1063                     Boolean allowNoValueEnum = fmd.getAllowNoValueEnumOption();                          </span>
<span class="2453461306820272647" onmouseenter="enter('2453461306820272647');" onmouseout="out('2453461306820272647');" style="">1064                     if (allowNoValueEnum != null) {                                                      </span>
<span class="511249052530710714" onmouseenter="enter('511249052530710714');" onmouseout="out('511249052530710714');" style="">1065                         f.setAllowNoValueEnumOption(allowNoValueEnum);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1066                     }                                                                                    </span>
<span  style="">1067                                                                                                          </span>
<span class="-1986899161047350602" onmouseenter="enter('-1986899161047350602');" onmouseout="out('-1986899161047350602');" style="">1068                     f.withName(property.getName())                                                       </span>
<span class="-6128468031482469561" onmouseenter="enter('-6128468031482469561');" onmouseout="out('-6128468031482469561');" style="">1069                      .withFieldType(fieldType)                                                           </span>
<span class="-7927263150118151701" onmouseenter="enter('-7927263150118151701');" onmouseout="out('-7927263150118151701');" style="">1070                      .withFieldComponentRenderer(getFieldComponentRenderer(fmd))                         </span>
<span class="-4099331664389877516" onmouseenter="enter('-4099331664389877516');" onmouseout="out('-4099331664389877516');" style="">1071                      .withGridFieldComponentRenderer(getGridFieldComponentRenderer(fmd))                 </span>
<span class="654425426992808056" onmouseenter="enter('654425426992808056');" onmouseout="out('654425426992808056');" style="">1072                      .withOrder(fmd.getOrder())                                                          </span>
<span class="8839654145383232945" onmouseenter="enter('8839654145383232945');" onmouseout="out('8839654145383232945');" style="">1073                      .withFriendlyName(fmd.getFriendlyName())                                            </span>
<span class="3058247827263925638" onmouseenter="enter('3058247827263925638');" onmouseout="out('3058247827263925638');" style="">1074                      .withForeignKeyDisplayValueProperty(fmd.getForeignKeyDisplayValueProperty())        </span>
<span class="3198496511046166958" onmouseenter="enter('3198496511046166958');" onmouseout="out('3198496511046166958');" style="">1075                      .withForeignKeyClass(fmd.getForeignKeyClass())                                      </span>
<span class="-2338070414188990290" onmouseenter="enter('-2338070414188990290');" onmouseout="out('-2338070414188990290');" style="">1076                      .withForeignKeySectionPath(getAdminSectionPath(fmd.getForeignKeyClass()))           </span>
<span class="-6320050738227309064" onmouseenter="enter('-6320050738227309064');" onmouseout="out('-6320050738227309064');" style=""><abbr title="1077                      .withOwningEntityClass(fmd.getOwningClass()!=null?fmd.getOwningClass():fmd.getInheritedFromType())">1077                      .withOwningEntityClass(fmd.getOwningClass()!=null?fmd.getOwningClass():fmd.getInheriðŸ”µ</abbr></span>
<span class="3975803686122841065" onmouseenter="enter('3975803686122841065');" onmouseout="out('3975803686122841065');" style="">1078                      .withRequired(required)                                                             </span>
<span class="359983231603260957" onmouseenter="enter('359983231603260957');" onmouseout="out('359983231603260957');" style="">1079                      .withReadOnly(fmd.getReadOnly())                                                    </span>
<span class="5042583388418599955" onmouseenter="enter('5042583388418599955');" onmouseout="out('5042583388418599955');" style="">1080                      .withTranslatable(fmd.getTranslatable())                                            </span>
<span class="850947769734677156" onmouseenter="enter('850947769734677156');" onmouseout="out('850947769734677156');" style=""><abbr title="1081                      .withAlternateOrdering((Boolean) fmd.getAdditionalMetadata().get(Field.ALTERNATE_ORDERING))">1081                      .withAlternateOrdering((Boolean) fmd.getAdditionalMetadata().get(Field.ALTERNATE_ORDðŸ”µ</abbr></span>
<span class="3384004197069247045" onmouseenter="enter('3384004197069247045');" onmouseout="out('3384004197069247045');" style="">1082                      .withLargeEntry(fmd.isLargeEntry())                                                 </span>
<span class="8358279492731939259" onmouseenter="enter('8358279492731939259');" onmouseout="out('8358279492731939259');" style="">1083                      .withHint(fmd.getHint())                                                            </span>
<span class="2950855740871622056" onmouseenter="enter('2950855740871622056');" onmouseout="out('2950855740871622056');" style="">1084                      .withTooltip(fmd.getTooltip())                                                      </span>
<span class="-4063412654801023815" onmouseenter="enter('-4063412654801023815');" onmouseout="out('-4063412654801023815');" style="">1085                      .withHelp(fmd.getHelpText())                                                        </span>
<span class="-2322162613997207656" onmouseenter="enter('-2322162613997207656');" onmouseout="out('-2322162613997207656');" style="">1086                      .withTypeaheadEnabled(fmd.getEnableTypeaheadLookup())                               </span>
<span class="3999494576911658619" onmouseenter="enter('3999494576911658619');" onmouseout="out('3999494576911658619');" style="">1087                      .withCanLinkToExternalEntity(fmd.getCanLinkToExternalEntity())                      </span>
<span class="6462182061714529877" onmouseenter="enter('6462182061714529877');" onmouseout="out('6462182061714529877');" style="">1088                      .withAssociatedFieldName(fmd.getAssociatedFieldName());                             </span>
<span  style="">1089                                                                                                          </span>
<span class="-269468944390639664" onmouseenter="enter('-269468944390639664');" onmouseout="out('-269468944390639664');" style="">1090                     String defaultValue = fmd.getDefaultValue();                                         </span>
<span class="517621878739872731" onmouseenter="enter('517621878739872731');" onmouseout="out('517621878739872731');" style="">1091                     if (defaultValue != null) {                                                          </span>
<span class="4532975392407713565" onmouseenter="enter('4532975392407713565');" onmouseout="out('4532975392407713565');" style="">1092                         defaultValue = extractDefaultValueFromFieldData(fieldType, fmd);                 </span>
<span class="-4862494673796786760" onmouseenter="enter('-4862494673796786760');" onmouseout="out('-4862494673796786760');" style="">1093                         f.withValue(defaultValue);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1094                     }                                                                                    </span>
<span  style="">1095                                                                                                          </span>
<span class="-2242732727084199547" onmouseenter="enter('-2242732727084199547');" onmouseout="out('-2242732727084199547');" style="">1096                     if (StringUtils.isBlank(f.getFriendlyName())) {                                      </span>
<span class="4951409134206579242" onmouseenter="enter('4951409134206579242');" onmouseout="out('4951409134206579242');" style="">1097                         f.setFriendlyName(f.getName());                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1098                     }                                                                                    </span>
<span  style="">1099                                                                                                          </span>
<span class="4434831944931004928" onmouseenter="enter('4434831944931004928');" onmouseout="out('4434831944931004928');" style="">1100                     // If is form hidden, set visible to false                                           </span>
<span class="-7962146999992485704" onmouseenter="enter('-7962146999992485704');" onmouseout="out('-7962146999992485704');" style="">1101                     if (VisibilityEnum.FORM_EXPLICITLY_HIDDEN.equals(fmd.getVisibility())) {             </span>
<span class="-8620847541322007209" onmouseenter="enter('-8620847541322007209');" onmouseout="out('-8620847541322007209');" style="">1102                         f.setIsVisible(false);                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1103                     }                                                                                    </span>
<span  style="">1104                                                                                                          </span>
<span class="5627296841760402753" onmouseenter="enter('5627296841760402753');" onmouseout="out('5627296841760402753');" style="">1105                     if (VisibilityEnum.VISIBLE_ALL.equals(fmd.getVisibility())) {                        </span>
<span class="2458976513889241970" onmouseenter="enter('2458976513889241970');" onmouseout="out('2458976513889241970');" style="">1106                         f.setIsVisible(true);                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1107                     }                                                                                    </span>
<span  style="">1108                                                                                                          </span>
<span class="5834486891091757584" onmouseenter="enter('5834486891091757584');" onmouseout="out('5834486891091757584');" style="">1109                     // Add the field to the appropriate FieldGroup                                       </span>
<span class="-1630394947978608902" onmouseenter="enter('-1630394947978608902');" onmouseout="out('-1630394947978608902');" style="">1110                     if (fmd.getGroup() == null) {                                                        </span>
<span class="3071880473996022899" onmouseenter="enter('3071880473996022899');" onmouseout="out('3071880473996022899');" style="">1111                         homelessFields.add(f);                                                           </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1112                     } else {                                                                             </span>
<span class="-627881575057280692" onmouseenter="enter('-627881575057280692');" onmouseout="out('-627881575057280692');" style=""><abbr title="1113                         ef.addField(cmd, f, fmd.getGroup(), fmd.getGroupOrder(), fmd.getTab(), fmd.getTabOrder());">1113                         ef.addField(cmd, f, fmd.getGroup(), fmd.getGroupOrder(), fmd.getTab(), fmd.getTabðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1114                     }                                                                                    </span>
<span  style="">1115                                                                                                          </span>
<span class="-260794109391612652" onmouseenter="enter('-260794109391612652');" onmouseout="out('-260794109391612652');" style="">1116                     if (StringUtils.isNotEmpty(fmd.getAssociatedFieldName())) {                          </span>
<span class="1585765122221468977" onmouseenter="enter('1585765122221468977');" onmouseout="out('1585765122221468977');" style="">1117                         fieldsWithAssociations.add(f);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1118                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1119                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1120             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1121         }                                                                                                </span>
<span  style="">1122                                                                                                          </span>
<span class="6148030130019845419" onmouseenter="enter('6148030130019845419');" onmouseout="out('6148030130019845419');" style="">1123         for (Field f : homelessFields) {                                                                 </span>
<span class="-6046258263556396205" onmouseenter="enter('-6046258263556396205');" onmouseout="out('-6046258263556396205');" style="">1124             ef.addField(cmd, f, null, null, null, null);                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1125         }                                                                                                </span>
<span  style="">1126                                                                                                          </span>
<span class="-3286982672520556792" onmouseenter="enter('-3286982672520556792');" onmouseout="out('-3286982672520556792');" style="">1127         for (Field f : fieldsWithAssociations) {                                                         </span>
<span class="785772779687320855" onmouseenter="enter('785772779687320855');" onmouseout="out('785772779687320855');" style="">1128             Field associatedField = findAssociatedField(ef, f);                                          </span>
<span class="6919514124287833745" onmouseenter="enter('6919514124287833745');" onmouseout="out('6919514124287833745');" style="">1129             if (associatedField != null) {                                                               </span>
<span class="-9095335942205451536" onmouseenter="enter('-9095335942205451536');" onmouseout="out('-9095335942205451536');" style="">1130                 associatedField.setShouldRender(false);                                                  </span>
<span class="-2878946802658158988" onmouseenter="enter('-2878946802658158988');" onmouseout="out('-2878946802658158988');" style="">1131                 f.setAssociatedFieldName(associatedField.getName());                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1132             } else {                                                                                     </span>
<span class="7502764524857913063" onmouseenter="enter('7502764524857913063');" onmouseout="out('7502764524857913063');" style="">1133                 f.setAssociatedFieldName(null);                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1134             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1135         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1136     }                                                                                                    </span>
<span  style="">1137                                                                                                          </span>
<span class="5762152267566694667" onmouseenter="enter('5762152267566694667');" onmouseout="out('5762152267566694667');" style="">1138     protected String getFieldComponentRenderer(BasicFieldMetadata fmd) {                                 </span>
<span class="-6767392947458941920" onmouseenter="enter('-6767392947458941920');" onmouseout="out('-6767392947458941920');" style="">1139         if (StringUtils.isNotBlank(fmd.getFieldComponentRendererTemplate())) {                           </span>
<span class="-4402549852767313598" onmouseenter="enter('-4402549852767313598');" onmouseout="out('-4402549852767313598');" style="">1140             return fmd.getFieldComponentRendererTemplate();                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1141         }                                                                                                </span>
<span class="-2438701386053680498" onmouseenter="enter('-2438701386053680498');" onmouseout="out('-2438701386053680498');" style="">1142         return fmd.getFieldComponentRenderer()==null?null:fmd.getFieldComponentRenderer().toString();    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1143     }                                                                                                    </span>
<span  style="">1144                                                                                                          </span>
<span class="590879222954667418" onmouseenter="enter('590879222954667418');" onmouseout="out('590879222954667418');" style="">1145     protected String getGridFieldComponentRenderer(BasicFieldMetadata fmd) {                             </span>
<span class="7087363204431348668" onmouseenter="enter('7087363204431348668');" onmouseout="out('7087363204431348668');" style="">1146         if (StringUtils.isNotBlank(fmd.getGridFieldComponentRendererTemplate())) {                       </span>
<span class="5883340390214386055" onmouseenter="enter('5883340390214386055');" onmouseout="out('5883340390214386055');" style="">1147             return fmd.getGridFieldComponentRendererTemplate();                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1148         }                                                                                                </span>
<span class="-7287009246855470147" onmouseenter="enter('-7287009246855470147');" onmouseout="out('-7287009246855470147');" style=""><abbr title="1149         return fmd.getGridFieldComponentRenderer()==null?null:fmd.getGridFieldComponentRenderer().toString();">1149         return fmd.getGridFieldComponentRenderer()==null?null:fmd.getGridFieldComponentRenderer().toStrinðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1150     }                                                                                                    </span>
<span  style="">1151                                                                                                          </span>
<span class="-6562218165361923864" onmouseenter="enter('-6562218165361923864');" onmouseout="out('-6562218165361923864');" style="">1152     private Field findAssociatedField(EntityForm ef, Field f) {                                          </span>
<span class="4174722207334262365" onmouseenter="enter('4174722207334262365');" onmouseout="out('4174722207334262365');" style="">1153         // Try on the parent object                                                                      </span>
<span class="-1388610369938356597" onmouseenter="enter('-1388610369938356597');" onmouseout="out('-1388610369938356597');" style="">1154         Field associatedField = ef.findField(f.getAssociatedFieldName());                                </span>
<span  style="">1155                                                                                                          </span>
<span class="-8057832969882318537" onmouseenter="enter('-8057832969882318537');" onmouseout="out('-8057832969882318537');" style="">1156         if (associatedField == null) {                                                                   </span>
<span class="-4315839339096222496" onmouseenter="enter('-4315839339096222496');" onmouseout="out('-4315839339096222496');" style="">1157             // Check the field&#x27;s path                                                                    </span>
<span class="-3489350751131411992" onmouseenter="enter('-3489350751131411992');" onmouseout="out('-3489350751131411992');" style="">1158             String[] fieldPathParts = f.getName().split(&quot;\\.&quot;);                                          </span>
<span class="1068980887755244265" onmouseenter="enter('1068980887755244265');" onmouseout="out('1068980887755244265');" style="">1159             String testPath = &quot;&quot;;                                                                        </span>
<span  style="">1160                                                                                                          </span>
<span class="8677207579218271674" onmouseenter="enter('8677207579218271674');" onmouseout="out('8677207579218271674');" style="">1161             for (String path : fieldPathParts) {                                                         </span>
<span class="-680931118424370884" onmouseenter="enter('-680931118424370884');" onmouseout="out('-680931118424370884');" style="">1162                 testPath += path + &quot;.&quot;;                                                                  </span>
<span  style="">1163                                                                                                          </span>
<span class="-7538860418203958404" onmouseenter="enter('-7538860418203958404');" onmouseout="out('-7538860418203958404');" style="">1164                 associatedField = ef.findField(testPath + f.getAssociatedFieldName());                   </span>
<span class="6919514124287833745" onmouseenter="enter('6919514124287833745');" onmouseout="out('6919514124287833745');" style="">1165                 if (associatedField != null) {                                                           </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1166                     break;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1167                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1168             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1169         }                                                                                                </span>
<span class="6563544998135133572" onmouseenter="enter('6563544998135133572');" onmouseout="out('6563544998135133572');" style="">1170         return associatedField;                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1171     }                                                                                                    </span>
<span  style="">1172                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1173     /**                                                                                                  </span>
<span class="4647529469504582079" onmouseenter="enter('4647529469504582079');" onmouseout="out('4647529469504582079');" style="">1174      * This method gets the {@link AdminSection} for the given foreignKeyClass parameter. If none exists,</span>
<span class="2236731749674454246" onmouseenter="enter('2236731749674454246');" onmouseout="out('2236731749674454246');" style="">1175      * it returns the foreignKeyClass.                                                                   </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1176      *                                                                                                   </span>
<span class="-7514279057842438906" onmouseenter="enter('-7514279057842438906');" onmouseout="out('-7514279057842438906');" style="">1177      * @param foreignKeyClass the {@link String} class name                                              </span>
<span class="7993230679639641523" onmouseenter="enter('7993230679639641523');" onmouseout="out('7993230679639641523');" style="">1178      * @return the admin section pathname                                                                </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1179      */                                                                                                  </span>
<span class="-6189454574455820362" onmouseenter="enter('-6189454574455820362');" onmouseout="out('-6189454574455820362');" style="">1180     protected String getAdminSectionPath(String foreignKeyClass) {                                       </span>
<span class="8135436521484469970" onmouseenter="enter('8135436521484469970');" onmouseout="out('8135436521484469970');" style="">1181         if (foreignKeyClass != null) {                                                                   </span>
<span class="-4650736007503046520" onmouseenter="enter('-4650736007503046520');" onmouseout="out('-4650736007503046520');" style=""><abbr title="1182             AdminSection foreignKeySection = adminNavigationService.findAdminSectionByClassAndSectionId(foreignKeyClass, null);">1182             AdminSection foreignKeySection = adminNavigationService.findAdminSectionByClassAndSectionId(fðŸ”µ</abbr></span>
<span class="-7201502785940326159" onmouseenter="enter('-7201502785940326159');" onmouseout="out('-7201502785940326159');" style="">1183             return foreignKeySection != null ? foreignKeySection.getUrl() : foreignKeyClass;             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1184         }                                                                                                </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1185         return null;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1186     }                                                                                                    </span>
<span  style="">1187                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1188     /**                                                                                                  </span>
<span class="-9148493238200404936" onmouseenter="enter('-9148493238200404936');" onmouseout="out('-9148493238200404936');" style=""><abbr title="1189      * NOTE: This method will attempt to merge tabs if the unprocessed {@link TabMetadata#getTabName()} is equal to">1189      * NOTE: This method will attempt to merge tabs if the unprocessed {@link TabMetadata#getTabName()} iðŸ”µ</abbr></span>
<span class="-1274816497587979877" onmouseenter="enter('-1274816497587979877');" onmouseout="out('-1274816497587979877');" style="">1190      *  the processed value of another tab.                                                              </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1191      *                                                                                                   </span>
<span class="-2406703893472258014" onmouseenter="enter('-2406703893472258014');" onmouseout="out('-2406703893472258014');" style="">1192      * For example, if {@link TabMetadata#getTabName()} is &quot;Example&quot;, there is a another tab where       </span>
<span class="9184140520214431771" onmouseenter="enter('9184140520214431771');" onmouseout="out('9184140520214431771');" style=""><abbr title="1193      *  {@link TabMetadata#getTabName()} is &quot;Example_Tab&quot;, and a message property where &#x27;Example_Tab=Example&#x27;,">1193      *  {@link TabMetadata#getTabName()} is &quot;Example_Tab&quot;, and a message property where &#x27;Example_Tab=ExamðŸ”µ</abbr></span>
<span class="8352702158102966043" onmouseenter="enter('8352702158102966043');" onmouseout="out('8352702158102966043');" style=""><abbr title="1194      *  then the tabs should be merged together, so that we do not end up rendering multiple &quot;Example&quot; tabs.">1194      *  then the tabs should be merged together, so that we do not end up rendering multiple &quot;Example&quot; taðŸ”µ</abbr></span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1195      */                                                                                                  </span>
<span class="-3548818374011565463" onmouseenter="enter('-3548818374011565463');" onmouseout="out('-3548818374011565463');" style="">1196     protected void setEntityFormTabsAndGroups(EntityForm ef, Map&lt;String, TabMetadata&gt; tabMetadataMap) {  </span>
<span class="-1610887690100779398" onmouseenter="enter('-1610887690100779398');" onmouseout="out('-1610887690100779398');" style="">1197         if (tabMetadataMap != null) {                                                                    </span>
<span class="8239819812127968949" onmouseenter="enter('8239819812127968949');" onmouseout="out('8239819812127968949');" style="">1198             Set&lt;String&gt; tabMetadataKeySet = tabMetadataMap.keySet();                                     </span>
<span class="-8816277474934611824" onmouseenter="enter('-8816277474934611824');" onmouseout="out('-8816277474934611824');" style="">1199             for (String tabKey : tabMetadataKeySet) {                                                    </span>
<span class="7310777629515294934" onmouseenter="enter('7310777629515294934');" onmouseout="out('7310777629515294934');" style="">1200                 TabMetadata tabMetadata = tabMetadataMap.get(tabKey);                                    </span>
<span class="-3382451411952830270" onmouseenter="enter('-3382451411952830270');" onmouseout="out('-3382451411952830270');" style=""><abbr title="1201                 String unprocessedTabName = getUnprocessedNameOfMatchingTab(tabMetadata, tabMetadataKeySet);">1201                 String unprocessedTabName = getUnprocessedNameOfMatchingTab(tabMetadata, tabMetadataKeySeðŸ”µ</abbr></span>
<span  style="">1202                                                                                                          </span>
<span class="-4558225351015241817" onmouseenter="enter('-4558225351015241817');" onmouseout="out('-4558225351015241817');" style="">1203                 if (foundMatchingTab(unprocessedTabName)) {                                              </span>
<span class="7976020367549586090" onmouseenter="enter('7976020367549586090');" onmouseout="out('7976020367549586090');" style="">1204                     if (!tabExists(ef, unprocessedTabName)) {                                            </span>
<span class="-6968658869865565527" onmouseenter="enter('-6968658869865565527');" onmouseout="out('-6968658869865565527');" style="">1205                         TabMetadata originalTabMetadata = tabMetadataMap.get(unprocessedTabName);        </span>
<span class="6840551509140741312" onmouseenter="enter('6840551509140741312');" onmouseout="out('6840551509140741312');" style="">1206                         unprocessedTabName = ef.addTabFromTabMetadata(originalTabMetadata);              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1207                     }                                                                                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1208                 } else {                                                                                 </span>
<span class="2531268367420417827" onmouseenter="enter('2531268367420417827');" onmouseout="out('2531268367420417827');" style="">1209                     if (tabExists(ef, tabKey)) {                                                         </span>
<span class="3894487325805599765" onmouseenter="enter('3894487325805599765');" onmouseout="out('3894487325805599765');" style="">1210                         unprocessedTabName = tabKey;                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1211                     } else {                                                                             </span>
<span class="-854176188216766174" onmouseenter="enter('-854176188216766174');" onmouseout="out('-854176188216766174');" style="">1212                         unprocessedTabName = ef.addTabFromTabMetadata(tabMetadata);                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1213                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1214                 }                                                                                        </span>
<span  style="">1215                                                                                                          </span>
<span class="4976299653458575754" onmouseenter="enter('4976299653458575754');" onmouseout="out('4976299653458575754');" style="">1216                 Set&lt;String&gt; groupMetadataKeySet = tabMetadata.getGroupMetadata().keySet();               </span>
<span class="-7961344655248674499" onmouseenter="enter('-7961344655248674499');" onmouseout="out('-7961344655248674499');" style="">1217                 for (String groupKey : groupMetadataKeySet) {                                            </span>
<span class="6345765707562916689" onmouseenter="enter('6345765707562916689');" onmouseout="out('6345765707562916689');" style=""><abbr title="1218                     ef.addGroupFromGroupMetadata(tabMetadata.getGroupMetadata().get(groupKey), unprocessedTabName);">1218                     ef.addGroupFromGroupMetadata(tabMetadata.getGroupMetadata().get(groupKey), unprocesseðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1219                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1220             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1221         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1222     }                                                                                                    </span>
<span  style="">1223                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1224     /**                                                                                                  </span>
<span class="7306113150058239600" onmouseenter="enter('7306113150058239600');" onmouseout="out('7306113150058239600');" style="">1225      * Search for any other tab on the target entity that has the same display value                     </span>
<span class="240467368059923303" onmouseenter="enter('240467368059923303');" onmouseout="out('240467368059923303');" style="">1226      *  as the value provided tab name.                                                                  </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1227      *                                                                                                   </span>
<span class="-4650758346108360443" onmouseenter="enter('-4650758346108360443');" onmouseout="out('-4650758346108360443');" style=""><abbr title="1228      * This assumes that the {@link TabMetadata#getTabName()} is in the form of a processed message property.">1228      * This assumes that the {@link TabMetadata#getTabName()} is in the form of a processed message propeðŸ”µ</abbr></span>
<span class="-478812681452175174" onmouseenter="enter('-478812681452175174');" onmouseout="out('-478812681452175174');" style=""><abbr title="1229      *  For example, if {@link TabMetadata#getTabName()} is &quot;Example&quot;, there is a tabKey from the tabMetadataKeySet">1229      *  For example, if {@link TabMetadata#getTabName()} is &quot;Example&quot;, there is a tabKey from the tabMetaðŸ”µ</abbr></span>
<span class="818185943405205448" onmouseenter="enter('818185943405205448');" onmouseout="out('818185943405205448');" style=""><abbr title="1230      *  that is &quot;Example_Tab&quot;, and a message property where &#x27;Example_Tab=Example&#x27;, then this method should return">1230      *  that is &quot;Example_Tab&quot;, and a message property where &#x27;Example_Tab=Example&#x27;, then this method shoulðŸ”µ</abbr></span>
<span class="-3733456167855611550" onmouseenter="enter('-3733456167855611550');" onmouseout="out('-3733456167855611550');" style="">1231      *  &quot;Example_Tab&quot; which will end up causing the tabs to merge together.                              </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1232      *                                                                                                   </span>
<span class="6715625924911503951" onmouseenter="enter('6715625924911503951');" onmouseout="out('6715625924911503951');" style=""><abbr title="1233      * If a tab with the same display value cannot be found, then we should return null to indicate that there">1233      * If a tab with the same display value cannot be found, then we should return null to indicate that ðŸ”µ</abbr></span>
<span class="-816382718997149765" onmouseenter="enter('-816382718997149765');" onmouseout="out('-816382718997149765');" style="">1234      *  is no matching tab with the same processed tabName value.                                        </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1235      */                                                                                                  </span>
<span class="2531890089338051353" onmouseenter="enter('2531890089338051353');" onmouseout="out('2531890089338051353');" style=""><abbr title="1236     protected String getUnprocessedNameOfMatchingTab(TabMetadata tabMetadata, Set&lt;String&gt; tabMetadataKeySet) {">1236     protected String getUnprocessedNameOfMatchingTab(TabMetadata tabMetadata, Set&lt;String&gt; tabMetadataKeySðŸ”µ</abbr></span>
<span class="-8816277474934611824" onmouseenter="enter('-8816277474934611824');" onmouseout="out('-8816277474934611824');" style="">1237         for (String tabKey : tabMetadataKeySet) {                                                        </span>
<span class="-5779793862119901002" onmouseenter="enter('-5779793862119901002');" onmouseout="out('-5779793862119901002');" style="">1238             String tabName = tabMetadata.getTabName();                                                   </span>
<span  style="">1239                                                                                                          </span>
<span class="-8422051325525888747" onmouseenter="enter('-8422051325525888747');" onmouseout="out('-8422051325525888747');" style="">1240             if (processedTabKeyMatchesTabName(tabName, tabKey)) {                                        </span>
<span class="3937451821444963358" onmouseenter="enter('3937451821444963358');" onmouseout="out('3937451821444963358');" style="">1241                 return tabKey;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1242             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1243         }                                                                                                </span>
<span  style="">1244                                                                                                          </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1245         return null;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1246     }                                                                                                    </span>
<span  style="">1247                                                                                                          </span>
<span class="-1619438245958020737" onmouseenter="enter('-1619438245958020737');" onmouseout="out('-1619438245958020737');" style="">1248     protected boolean processedTabKeyMatchesTabName(String tabName, String candidateTabKey) {            </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1249         try {                                                                                            </span>
<span class="-7659299375574203210" onmouseenter="enter('-7659299375574203210');" onmouseout="out('-7659299375574203210');" style="">1250             String processedCandidateTabKey = BLCMessageUtils.getMessage(candidateTabKey);               </span>
<span class="-2617676223106948028" onmouseenter="enter('-2617676223106948028');" onmouseout="out('-2617676223106948028');" style=""><abbr title="1251             boolean candidateTabKeyWasProcessed = !StringUtils.equals(candidateTabKey, processedCandidateTabKey);">1251             boolean candidateTabKeyWasProcessed = !StringUtils.equals(candidateTabKey, processedCandidateðŸ”µ</abbr></span>
<span  style="">1252                                                                                                          </span>
<span class="2100898845031278709" onmouseenter="enter('2100898845031278709');" onmouseout="out('2100898845031278709');" style=""><abbr title="1253             return candidateTabKeyWasProcessed &amp;&amp; StringUtils.equalsIgnoreCase(tabName, processedCandidateTabKey);">1253             return candidateTabKeyWasProcessed &amp;&amp; StringUtils.equalsIgnoreCase(tabName, processedCandidatðŸ”µ</abbr></span>
<span class="-2410148316212931681" onmouseenter="enter('-2410148316212931681');" onmouseout="out('-2410148316212931681');" style="">1254         } catch (NoSuchMessageException e) {                                                             </span>
<span class="1284296105156752555" onmouseenter="enter('1284296105156752555');" onmouseout="out('1284296105156752555');" style="">1255             LOG.debug(&quot;No such message exists for &quot; + candidateTabKey, e);                               </span>
<span  style="">1256                                                                                                          </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1257             return false;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1258         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1259     }                                                                                                    </span>
<span  style="">1260                                                                                                          </span>
<span class="-7105644214565709555" onmouseenter="enter('-7105644214565709555');" onmouseout="out('-7105644214565709555');" style="">1261     protected boolean foundMatchingTab(String unprocessedTabName) {                                      </span>
<span class="6373538944534305470" onmouseenter="enter('6373538944534305470');" onmouseout="out('6373538944534305470');" style="">1262         return (unprocessedTabName != null);                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1263     }                                                                                                    </span>
<span  style="">1264                                                                                                          </span>
<span class="-4736520597342818391" onmouseenter="enter('-4736520597342818391');" onmouseout="out('-4736520597342818391');" style="">1265     protected boolean tabExists(EntityForm ef, String tabKey) {                                          </span>
<span class="-9204309431556138424" onmouseenter="enter('-9204309431556138424');" onmouseout="out('-9204309431556138424');" style="">1266         return (ef.findTab(tabKey) != null);                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1267     }                                                                                                    </span>
<span  style="">1268                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1269     @Override                                                                                            </span>
<span class="1718091831588260637" onmouseenter="enter('1718091831588260637');" onmouseout="out('1718091831588260637');" style="">1270     public String extractDefaultValueFromFieldData(String fieldType, BasicFieldMetadata fmd) {           </span>
<span class="-269468944390639664" onmouseenter="enter('-269468944390639664');" onmouseout="out('-269468944390639664');" style="">1271         String defaultValue = fmd.getDefaultValue();                                                     </span>
<span class="8489757536552213717" onmouseenter="enter('8489757536552213717');" onmouseout="out('8489757536552213717');" style="">1272         if (fieldType.equals(SupportedFieldType.RULE_SIMPLE.toString())                                  </span>
<span class="-6155398851072788654" onmouseenter="enter('-6155398851072788654');" onmouseout="out('-6155398851072788654');" style="">1273                 || fieldType.equals(SupportedFieldType.RULE_SIMPLE_TIME.toString())                      </span>
<span class="-7731003048108517996" onmouseenter="enter('-7731003048108517996');" onmouseout="out('-7731003048108517996');" style="">1274                 || fieldType.equals(SupportedFieldType.RULE_WITH_QUANTITY.toString())) {                 </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1275             return null;                                                                                 </span>
<span class="1147822807152761026" onmouseenter="enter('1147822807152761026');" onmouseout="out('1147822807152761026');" style="">1276         } else if (fieldType.equals(SupportedFieldType.INTEGER.toString())) {                            </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1277             try {                                                                                        </span>
<span class="2272843703065247861" onmouseenter="enter('2272843703065247861');" onmouseout="out('2272843703065247861');" style="">1278                 Integer.parseInt(defaultValue);                                                          </span>
<span class="-1817228964429458922" onmouseenter="enter('-1817228964429458922');" onmouseout="out('-1817228964429458922');" style="">1279             } catch (NumberFormatException  e) {                                                         </span>
<span class="8614817519589782911" onmouseenter="enter('8614817519589782911');" onmouseout="out('8614817519589782911');" style=""><abbr title="1280                 String msg = buildMsgForDefValException(SupportedFieldType.INTEGER.toString(), fmd, defaultValue);">1280                 String msg = buildMsgForDefValException(SupportedFieldType.INTEGER.toString(), fmd, defauðŸ”µ</abbr></span>
<span class="8745206262250964374" onmouseenter="enter('8745206262250964374');" onmouseout="out('8745206262250964374');" style="">1281                 LOG.debug(msg);                                                                          </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1282                 return null;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1283             }                                                                                            </span>
<span class="5641784789080954731" onmouseenter="enter('5641784789080954731');" onmouseout="out('5641784789080954731');" style="">1284         } else if (fieldType.equals(SupportedFieldType.DECIMAL.toString())                               </span>
<span class="-1839121721540903009" onmouseenter="enter('-1839121721540903009');" onmouseout="out('-1839121721540903009');" style="">1285                 || fieldType.equals(SupportedFieldType.MONEY.toString())) {                              </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1286             try {                                                                                        </span>
<span class="6039577623543160332" onmouseenter="enter('6039577623543160332');" onmouseout="out('6039577623543160332');" style="">1287                 BigDecimal val = new BigDecimal(defaultValue);                                           </span>
<span class="-1817228964429458922" onmouseenter="enter('-1817228964429458922');" onmouseout="out('-1817228964429458922');" style="">1288             } catch (NumberFormatException  e) {                                                         </span>
<span class="-1552449043883066886" onmouseenter="enter('-1552449043883066886');" onmouseout="out('-1552449043883066886');" style="">1289                 String msg = buildMsgForDefValException(fieldType.toString(), fmd, defaultValue);        </span>
<span class="8745206262250964374" onmouseenter="enter('8745206262250964374');" onmouseout="out('8745206262250964374');" style="">1290                 LOG.debug(msg);                                                                          </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1291                 return null;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1292             }                                                                                            </span>
<span class="-6181979390419592035" onmouseenter="enter('-6181979390419592035');" onmouseout="out('-6181979390419592035');" style="">1293         } else if (fieldType.equals(SupportedFieldType.BOOLEAN.toString())) {                            </span>
<span class="-8619074302025013401" onmouseenter="enter('-8619074302025013401');" onmouseout="out('-8619074302025013401');" style="">1294             if (!defaultValue.toLowerCase().equals(&quot;true&quot;) &amp;&amp; !defaultValue.toLowerCase().equals(&quot;false&quot;)</span>
<span class="-3108075317025400269" onmouseenter="enter('-3108075317025400269');" onmouseout="out('-3108075317025400269');" style=""><abbr title="1295                     &amp;&amp; !defaultValue.toUpperCase().equals(&quot;Y&quot;) &amp;&amp; !defaultValue.toUpperCase().equals(&quot;N&quot;)) {">1295                     &amp;&amp; !defaultValue.toUpperCase().equals(&quot;Y&quot;) &amp;&amp; !defaultValue.toUpperCase().equals(&quot;N&quot;)ðŸ”µ</abbr></span>
<span class="6946244061563138313" onmouseenter="enter('6946244061563138313');" onmouseout="out('6946244061563138313');" style=""><abbr title="1296                 String msg = buildMsgForDefValException(SupportedFieldType.BOOLEAN.toString(), fmd, defaultValue);">1296                 String msg = buildMsgForDefValException(SupportedFieldType.BOOLEAN.toString(), fmd, defauðŸ”µ</abbr></span>
<span class="8745206262250964374" onmouseenter="enter('8745206262250964374');" onmouseout="out('8745206262250964374');" style="">1297                 LOG.debug(msg);                                                                          </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1298                 return null;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1299             }                                                                                            </span>
<span class="-3789417077200952901" onmouseenter="enter('-3789417077200952901');" onmouseout="out('-3789417077200952901');" style="">1300         } else if (fieldType.equals(SupportedFieldType.DATE.toString())) {                               </span>
<span class="4798322797585331848" onmouseenter="enter('4798322797585331848');" onmouseout="out('4798322797585331848');" style="">1301             DateFormat format = FormatUtil.getDateFormat();                                              </span>
<span class="-4817829731735260045" onmouseenter="enter('-4817829731735260045');" onmouseout="out('-4817829731735260045');" style="">1302             if (defaultValue.toLowerCase().contains(&quot;today&quot;)) {                                          </span>
<span class="-5510717227080119052" onmouseenter="enter('-5510717227080119052');" onmouseout="out('-5510717227080119052');" style="">1303                 defaultValue = format.format(new Date());                                                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1304             } else {                                                                                     </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1305                 try {                                                                                    </span>
<span class="8253580772209920524" onmouseenter="enter('8253580772209920524');" onmouseout="out('8253580772209920524');" style="">1306                     Date date = format.parse(defaultValue);                                              </span>
<span class="-692739804773039587" onmouseenter="enter('-692739804773039587');" onmouseout="out('-692739804773039587');" style="">1307                     defaultValue = format.format(date);                                                  </span>
<span class="-8792048397909294459" onmouseenter="enter('-8792048397909294459');" onmouseout="out('-8792048397909294459');" style="">1308                 } catch (ParseException e) {                                                             </span>
<span class="6717521370520655041" onmouseenter="enter('6717521370520655041');" onmouseout="out('6717521370520655041');" style=""><abbr title="1309                     String msg = buildMsgForDefValException(SupportedFieldType.DATE.toString(), fmd, defaultValue);">1309                     String msg = buildMsgForDefValException(SupportedFieldType.DATE.toString(), fmd, defaðŸ”µ</abbr></span>
<span class="8745206262250964374" onmouseenter="enter('8745206262250964374');" onmouseout="out('8745206262250964374');" style="">1310                     LOG.debug(msg);                                                                      </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1311                     return null;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1312                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1313             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1314         }                                                                                                </span>
<span class="8908764284674475175" onmouseenter="enter('8908764284674475175');" onmouseout="out('8908764284674475175');" style="">1315         return defaultValue;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1316     }                                                                                                    </span>
<span  style="">1317                                                                                                          </span>
<span class="-1197861841111609975" onmouseenter="enter('-1197861841111609975');" onmouseout="out('-1197861841111609975');" style=""><abbr title="1318     protected String buildMsgForDefValException(String type, BasicFieldMetadata fmd, String defaultValue) {">1318     protected String buildMsgForDefValException(String type, BasicFieldMetadata fmd, String defaultValue)ðŸ”µ</abbr></span>
<span class="5037735576431495054" onmouseenter="enter('5037735576431495054');" onmouseout="out('5037735576431495054');" style=""><abbr title="1319         return StringUtil.sanitize(fmd.getTargetClass()) + &quot; : &quot; + StringUtil.sanitize(fmd.getName()) + &quot; - Failed to parse &quot; ">1319         return StringUtil.sanitize(fmd.getTargetClass()) + &quot; : &quot; + StringUtil.sanitize(fmd.getName()) + &quot;ðŸ”µ</abbr></span>
<span class="-1280239945418423816" onmouseenter="enter('-1280239945418423816');" onmouseout="out('-1280239945418423816');" style=""><abbr title="1320                 + StringUtil.sanitize(type) + &quot; from DefaultValue [ &quot; + StringUtil.sanitize(defaultValue) + &quot; ]&quot;;">1320                 + StringUtil.sanitize(type) + &quot; from DefaultValue [ &quot; + StringUtil.sanitize(defaultValue)ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1321     }                                                                                                    </span>
<span  style="">1322                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1323     @Override                                                                                            </span>
<span class="-3338021322965865498" onmouseenter="enter('-3338021322965865498');" onmouseout="out('-3338021322965865498');" style="">1324     public void removeNonApplicableFields(ClassMetadata cmd, EntityForm entityForm, String entityType) { </span>
<span class="3681854507729164346" onmouseenter="enter('3681854507729164346');" onmouseout="out('3681854507729164346');" style="">1325         for (Property p : cmd.getProperties()) {                                                         </span>
<span class="2404027636674988266" onmouseenter="enter('2404027636674988266');" onmouseout="out('2404027636674988266');" style="">1326             if (!ArrayUtils.contains(p.getMetadata().getAvailableToTypes(), entityType)) {               </span>
<span class="3958420768854658911" onmouseenter="enter('3958420768854658911');" onmouseout="out('3958420768854658911');" style="">1327                 entityForm.removeField(p.getName());                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1328             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1329         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1330     }                                                                                                    </span>
<span  style="">1331                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1332     @Override                                                                                            </span>
<span class="-2894789102162308959" onmouseenter="enter('-2894789102162308959');" onmouseout="out('-2894789102162308959');" style="">1333     public EntityForm createEntityForm(ClassMetadata cmd, List&lt;SectionCrumb&gt; sectionCrumbs)              </span>
<span class="1998458335829271558" onmouseenter="enter('1998458335829271558');" onmouseout="out('1998458335829271558');" style="">1334             throws ServiceException {                                                                    </span>
<span class="-438894394526699599" onmouseenter="enter('-438894394526699599');" onmouseout="out('-438894394526699599');" style="">1335         EntityForm ef = createStandardEntityForm();                                                      </span>
<span class="1972535118391022312" onmouseenter="enter('1972535118391022312');" onmouseout="out('1972535118391022312');" style="">1336         populateEntityForm(cmd, ef, sectionCrumbs);                                                      </span>
<span class="3260120157565581788" onmouseenter="enter('3260120157565581788');" onmouseout="out('3260120157565581788');" style="">1337         return ef;                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1338     }                                                                                                    </span>
<span  style="">1339                                                                                                          </span>
<span class="1553424846104610474" onmouseenter="enter('1553424846104610474');" onmouseout="out('1553424846104610474');" style="">1340     protected String extractSectionIdentifierFromCrumb(List&lt;SectionCrumb&gt; sectionCrumbs) {               </span>
<span class="4444452196378800952" onmouseenter="enter('4444452196378800952');" onmouseout="out('4444452196378800952');" style="">1341         if (sectionCrumbs != null &amp;&amp; sectionCrumbs.size() &gt; 0) {                                         </span>
<span class="-4491351221393184649" onmouseenter="enter('-4491351221393184649');" onmouseout="out('-4491351221393184649');" style="">1342             return sectionCrumbs.get(0).getSectionIdentifier();                                          </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1343         } else {                                                                                         </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1344             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1345         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1346     }                                                                                                    </span>
<span  style="">1347                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1348     @Override                                                                                            </span>
<span class="-4968680944420537869" onmouseenter="enter('-4968680944420537869');" onmouseout="out('-4968680944420537869');" style="">1349     public void populateEntityForm(ClassMetadata cmd, EntityForm ef, List&lt;SectionCrumb&gt; sectionCrumbs)   </span>
<span class="1998458335829271558" onmouseenter="enter('1998458335829271558');" onmouseout="out('1998458335829271558');" style="">1350             throws ServiceException {                                                                    </span>
<span class="-4942912710752555081" onmouseenter="enter('-4942912710752555081');" onmouseout="out('-4942912710752555081');" style="">1351         ef.setCeilingEntityClassname(cmd.getCeilingType());                                              </span>
<span  style="">1352                                                                                                          </span>
<span class="6809887928661746160" onmouseenter="enter('6809887928661746160');" onmouseout="out('6809887928661746160');" style="">1353         String sectionIdentifier = extractSectionIdentifierFromCrumb(sectionCrumbs);                     </span>
<span  style="">1354                                                                                                          </span>
<span class="-3855604053801420635" onmouseenter="enter('-3855604053801420635');" onmouseout="out('-3855604053801420635');" style=""><abbr title="1355         AdminSection section = navigationService.findAdminSectionByClassAndSectionId(cmd.getCeilingType(),">1355         AdminSection section = navigationService.findAdminSectionByClassAndSectionId(cmd.getCeilingType()ðŸ”µ</abbr></span>
<span class="6889816604380354873" onmouseenter="enter('6889816604380354873');" onmouseout="out('6889816604380354873');" style="">1356                 sectionIdentifier);                                                                      </span>
<span class="2297837107111400660" onmouseenter="enter('2297837107111400660');" onmouseout="out('2297837107111400660');" style="">1357         if (section != null) {                                                                           </span>
<span class="4296466575148476303" onmouseenter="enter('4296466575148476303');" onmouseout="out('4296466575148476303');" style="">1358             ef.setSectionKey(section.getUrl());                                                          </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1359         } else {                                                                                         </span>
<span class="-1586535842116388806" onmouseenter="enter('-1586535842116388806');" onmouseout="out('-1586535842116388806');" style="">1360             ef.setSectionKey(cmd.getCeilingType());                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1361         }                                                                                                </span>
<span class="-5184985761895407688" onmouseenter="enter('-5184985761895407688');" onmouseout="out('-5184985761895407688');" style="">1362         ef.setSectionCrumbsImpl(sectionCrumbs);                                                          </span>
<span  style="">1363                                                                                                          </span>
<span class="-8713614433600438253" onmouseenter="enter('-8713614433600438253');" onmouseout="out('-8713614433600438253');" style="">1364         setEntityFormTabsAndGroups(ef, cmd.getTabAndGroupMetadata());                                    </span>
<span  style="">1365                                                                                                          </span>
<span class="3369160299270687085" onmouseenter="enter('3369160299270687085');" onmouseout="out('3369160299270687085');" style="">1366         setEntityFormFields(cmd, ef, Arrays.asList(cmd.getProperties()));                                </span>
<span  style="">1367                                                                                                          </span>
<span class="8675843354365413624" onmouseenter="enter('8675843354365413624');" onmouseout="out('8675843354365413624');" style="">1368         populateDropdownToOneFields(ef, cmd);                                                            </span>
<span  style="">1369                                                                                                          </span>
<span class="1014702433169640296" onmouseenter="enter('1014702433169640296');" onmouseout="out('1014702433169640296');" style="">1370         extensionManager.getProxy().modifyUnpopulatedEntityForm(ef);                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1371     }                                                                                                    </span>
<span  style="">1372                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1373     /**                                                                                                  </span>
<span class="7551045119262463393" onmouseenter="enter('7551045119262463393');" onmouseout="out('7551045119262463393');" style="">1374      * This method is invoked when EntityForms are created and is meant to provide a hook to add         </span>
<span class="-342244960216512570" onmouseenter="enter('-342244960216512570');" onmouseout="out('-342244960216512570');" style="">1375      * additional entity form actions for implementors of Broadleaf. Broadleaf modules will typically    </span>
<span class="-7928784631676494068" onmouseenter="enter('-7928784631676494068');" onmouseout="out('-7928784631676494068');" style="">1376      * leverage {@link FormBuilderExtensionHandler#addAdditionalFormActions(EntityForm)} method.         </span>
<span class="8361682950840699982" onmouseenter="enter('8361682950840699982');" onmouseout="out('8361682950840699982');" style="">1377      * @param ef                                                                                         </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1378      */                                                                                                  </span>
<span class="-8094119228358129217" onmouseenter="enter('-8094119228358129217');" onmouseout="out('-8094119228358129217');" style="">1379     protected void addAdditionalFormActions(EntityForm ef) {                                             </span>
<span  style="">1380                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1381     }                                                                                                    </span>
<span  style="">1382                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1383     @Override                                                                                            </span>
<span class="1394778707631761813" onmouseenter="enter('1394778707631761813');" onmouseout="out('1394778707631761813');" style=""><abbr title="1384     public EntityForm createEntityForm(ClassMetadata cmd, Entity entity, List&lt;SectionCrumb&gt; sectionCrumbs)">1384     public EntityForm createEntityForm(ClassMetadata cmd, Entity entity, List&lt;SectionCrumb&gt; sectionCrumbsðŸ”µ</abbr></span>
<span class="1998458335829271558" onmouseenter="enter('1998458335829271558');" onmouseout="out('1998458335829271558');" style="">1385             throws ServiceException {                                                                    </span>
<span class="-438894394526699599" onmouseenter="enter('-438894394526699599');" onmouseout="out('-438894394526699599');" style="">1386         EntityForm ef = createStandardEntityForm();                                                      </span>
<span class="-4073847895348507412" onmouseenter="enter('-4073847895348507412');" onmouseout="out('-4073847895348507412');" style="">1387         populateEntityForm(cmd, entity, ef, sectionCrumbs);                                              </span>
<span class="3191217127862437415" onmouseenter="enter('3191217127862437415');" onmouseout="out('3191217127862437415');" style="">1388         addAdditionalFormActions(ef);                                                                    </span>
<span class="8511655867693649187" onmouseenter="enter('8511655867693649187');" onmouseout="out('8511655867693649187');" style="">1389         extensionManager.getProxy().addAdditionalFormActions(ef);                                        </span>
<span class="3260120157565581788" onmouseenter="enter('3260120157565581788');" onmouseout="out('3260120157565581788');" style="">1390         return ef;                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1391     }                                                                                                    </span>
<span  style="">1392                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1393     @Override                                                                                            </span>
<span class="-6571706150833686716" onmouseenter="enter('-6571706150833686716');" onmouseout="out('-6571706150833686716');" style=""><abbr title="1394     public void populateEntityForm(ClassMetadata cmd, Entity entity, EntityForm ef, List&lt;SectionCrumb&gt; sectionCrumbs)">1394     public void populateEntityForm(ClassMetadata cmd, Entity entity, EntityForm ef, List&lt;SectionCrumb&gt; seðŸ”µ</abbr></span>
<span class="1998458335829271558" onmouseenter="enter('1998458335829271558');" onmouseout="out('1998458335829271558');" style="">1395             throws ServiceException {                                                                    </span>
<span class="-7069998291250786390" onmouseenter="enter('-7069998291250786390');" onmouseout="out('-7069998291250786390');" style="">1396         // Get the empty form with appropriate fields                                                    </span>
<span class="1972535118391022312" onmouseenter="enter('1972535118391022312');" onmouseout="out('1972535118391022312');" style="">1397         populateEntityForm(cmd, ef, sectionCrumbs);                                                      </span>
<span  style="">1398                                                                                                          </span>
<span class="-5459387306565336413" onmouseenter="enter('-5459387306565336413');" onmouseout="out('-5459387306565336413');" style="">1399         String idProperty = adminEntityService.getIdProperty(cmd);                                       </span>
<span class="1051557575021412686" onmouseenter="enter('1051557575021412686');" onmouseout="out('1051557575021412686');" style="">1400         ef.setId(entity.findProperty(idProperty).getValue());                                            </span>
<span class="2566657873931456162" onmouseenter="enter('2566657873931456162');" onmouseout="out('2566657873931456162');" style="">1401         ef.setEntityType(entity.getType()[0]);                                                           </span>
<span  style="">1402                                                                                                          </span>
<span class="-5752959739321640962" onmouseenter="enter('-5752959739321640962');" onmouseout="out('-5752959739321640962');" style="">1403         populateEntityFormFieldValues(cmd, entity, ef);                                                  </span>
<span  style="">1404                                                                                                          </span>
<span class="5257407325597611191" onmouseenter="enter('5257407325597611191');" onmouseout="out('5257407325597611191');" style="">1405         Property p = entity.findProperty(BasicPersistenceModule.MAIN_ENTITY_NAME_PROPERTY);              </span>
<span class="-4724213940983805674" onmouseenter="enter('-4724213940983805674');" onmouseout="out('-4724213940983805674');" style="">1406         if (p != null) {                                                                                 </span>
<span class="8443013364869289595" onmouseenter="enter('8443013364869289595');" onmouseout="out('8443013364869289595');" style="">1407             ef.setMainEntityName(p.getValue());                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1408         }                                                                                                </span>
<span  style="">1409                                                                                                          </span>
<span class="8285751274454564858" onmouseenter="enter('8285751274454564858');" onmouseout="out('8285751274454564858');" style="">1410         extensionManager.getProxy().modifyPopulatedEntityForm(ef, entity);                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1411     }                                                                                                    </span>
<span  style="">1412                                                                                                          </span>
<span class="2253933316337433516" onmouseenter="enter('2253933316337433516');" onmouseout="out('2253933316337433516');" style=""><abbr title="1413     protected void setVisibilityBasedOnShowIfFieldEquals(ClassMetadata cmd, Entity entity, EntityForm ef) {">1413     protected void setVisibilityBasedOnShowIfFieldEquals(ClassMetadata cmd, Entity entity, EntityForm ef)ðŸ”µ</abbr></span>
<span class="3681854507729164346" onmouseenter="enter('3681854507729164346');" onmouseout="out('3681854507729164346');" style="">1414         for (Property p : cmd.getProperties()) {                                                         </span>
<span class="5177519309013644806" onmouseenter="enter('5177519309013644806');" onmouseout="out('5177519309013644806');" style="">1415             FieldMetadata fmd = p.getMetadata();                                                         </span>
<span  style="">1416                                                                                                          </span>
<span class="-8245965221352030812" onmouseenter="enter('-8245965221352030812');" onmouseout="out('-8245965221352030812');" style="">1417             if (shouldHideField(fmd, entity)) {                                                          </span>
<span class="722393245301383233" onmouseenter="enter('722393245301383233');" onmouseout="out('722393245301383233');" style="">1418                 if (fmd instanceof CollectionMetadata) {                                                 </span>
<span class="7188659998484598345" onmouseenter="enter('7188659998484598345');" onmouseout="out('7188659998484598345');" style="">1419                     ef.removeListGrid(p.getName());                                                      </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1420                 } else {                                                                                 </span>
<span class="6870393746446615822" onmouseenter="enter('6870393746446615822');" onmouseout="out('6870393746446615822');" style="">1421                     ef.removeField(p.getName());                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1422                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1423             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1424         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1425     }                                                                                                    </span>
<span  style="">1426                                                                                                          </span>
<span class="-3330248760149008409" onmouseenter="enter('-3330248760149008409');" onmouseout="out('-3330248760149008409');" style="">1427     protected boolean shouldHideField(FieldMetadata fmd, Entity entity) {                                </span>
<span class="-345780899678155518" onmouseenter="enter('-345780899678155518');" onmouseout="out('-345780899678155518');" style="">1428         if (fmd == null || fmd.getShowIfFieldEquals() == null) {                                         </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1429             return false;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1430         }                                                                                                </span>
<span  style="">1431                                                                                                          </span>
<span class="-8659631323845256695" onmouseenter="enter('-8659631323845256695');" onmouseout="out('-8659631323845256695');" style="">1432         for (String property : fmd.getShowIfFieldEquals().keySet()) {                                    </span>
<span class="3930945657137454760" onmouseenter="enter('3930945657137454760');" onmouseout="out('3930945657137454760');" style="">1433             List&lt;String&gt; values = fmd.getShowIfFieldEquals().get(property);                              </span>
<span class="-2693573208742209473" onmouseenter="enter('-2693573208742209473');" onmouseout="out('-2693573208742209473');" style="">1434             Property entityProp = entity.findProperty(property);                                         </span>
<span  style="">1435                                                                                                          </span>
<span class="-167840816186910781" onmouseenter="enter('-167840816186910781');" onmouseout="out('-167840816186910781');" style="">1436             if (entityProp == null || values.contains(entityProp.getValue())) {                          </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1437                 return false;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1438             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1439         }                                                                                                </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">1440         return true;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1441     }                                                                                                    </span>
<span  style="">1442                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1443     @Override                                                                                            </span>
<span class="7910083739222815843" onmouseenter="enter('7910083739222815843');" onmouseout="out('7910083739222815843');" style="">1444     public void populateEntityFormFieldValues(ClassMetadata cmd, Entity entity, EntityForm ef) {         </span>
<span class="4641578827349754543" onmouseenter="enter('4641578827349754543');" onmouseout="out('4641578827349754543');" style="">1445         // Set the appropriate property values                                                           </span>
<span class="3681854507729164346" onmouseenter="enter('3681854507729164346');" onmouseout="out('3681854507729164346');" style="">1446         for (Property p : cmd.getProperties()) {                                                         </span>
<span class="-1029066852878262358" onmouseenter="enter('-1029066852878262358');" onmouseout="out('-1029066852878262358');" style="">1447             if (p.getMetadata() instanceof BasicFieldMetadata) {                                         </span>
<span class="-6469477226116674237" onmouseenter="enter('-6469477226116674237');" onmouseout="out('-6469477226116674237');" style="">1448                 BasicFieldMetadata basicFM = (BasicFieldMetadata) p.getMetadata();                       </span>
<span  style="">1449                                                                                                          </span>
<span class="7733316759648943983" onmouseenter="enter('7733316759648943983');" onmouseout="out('7733316759648943983');" style="">1450                 Property entityProp = entity.findProperty(p.getName());                                  </span>
<span  style="">1451                                                                                                          </span>
<span class="4021222749559453503" onmouseenter="enter('4021222749559453503');" onmouseout="out('4021222749559453503');" style=""><abbr title="1452                 boolean explicitlyShown = VisibilityEnum.FORM_EXPLICITLY_SHOWN.equals(basicFM.getVisibility());">1452                 boolean explicitlyShown = VisibilityEnum.FORM_EXPLICITLY_SHOWN.equals(basicFM.getVisibiliðŸ”µ</abbr></span>
<span class="7366025904056557465" onmouseenter="enter('7366025904056557465');" onmouseout="out('7366025904056557465');" style="">1453                 //always show special map fields                                                         </span>
<span class="-2401445545222685489" onmouseenter="enter('-2401445545222685489');" onmouseout="out('-2401445545222685489');" style="">1454                 if (p.getName().equals(&quot;key&quot;) || p.getName().equals(&quot;priorKey&quot;)) {                       </span>
<span class="7778793828648750297" onmouseenter="enter('7778793828648750297');" onmouseout="out('7778793828648750297');" style="">1455                     explicitlyShown = true;                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1456                 }                                                                                        </span>
<span  style="">1457                                                                                                          </span>
<span class="-6309572172727120265" onmouseenter="enter('-6309572172727120265');" onmouseout="out('-6309572172727120265');" style="">1458                 if (entityProp == null &amp;&amp; explicitlyShown) {                                             </span>
<span class="8909260264488361187" onmouseenter="enter('8909260264488361187');" onmouseout="out('8909260264488361187');" style="">1459                     Field field = ef.findField(p.getName());                                             </span>
<span class="-470699824173107204" onmouseenter="enter('-470699824173107204');" onmouseout="out('-470699824173107204');" style="">1460                     if (field != null) {                                                                 </span>
<span class="-412233450447024620" onmouseenter="enter('-412233450447024620');" onmouseout="out('-412233450447024620');" style="">1461                         field.setValue(null);                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1462                     }                                                                                    </span>
<span class="-3654453610792959969" onmouseenter="enter('-3654453610792959969');" onmouseout="out('-3654453610792959969');" style=""><abbr title="1463                 } else if (entityProp == null &amp;&amp; !SupportedFieldType.PASSWORD_CONFIRM.equals(basicFM.getExplicitFieldType())) {">1463                 } else if (entityProp == null &amp;&amp; !SupportedFieldType.PASSWORD_CONFIRM.equals(basicFM.getEðŸ”µ</abbr></span>
<span class="6870393746446615822" onmouseenter="enter('6870393746446615822');" onmouseout="out('6870393746446615822');" style="">1464                     ef.removeField(p.getName());                                                         </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1465                 } else {                                                                                 </span>
<span class="8909260264488361187" onmouseenter="enter('8909260264488361187');" onmouseout="out('8909260264488361187');" style="">1466                     Field field = ef.findField(p.getName());                                             </span>
<span class="-470699824173107204" onmouseenter="enter('-470699824173107204');" onmouseout="out('-470699824173107204');" style="">1467                     if (field != null) {                                                                 </span>
<span class="-2366650903096921345" onmouseenter="enter('-2366650903096921345');" onmouseout="out('-2366650903096921345');" style="">1468                         if (entityProp != null) {                                                        </span>
<span class="4638600769415474673" onmouseenter="enter('4638600769415474673');" onmouseout="out('4638600769415474673');" style=""><abbr title="1469                             //protect against null - can happen with password confirmation fields (i.e. admin user)">1469                             //protect against null - can happen with password confirmation fields (i.e. aðŸ”µ</abbr></span>
<span class="8379702483069295441" onmouseenter="enter('8379702483069295441');" onmouseout="out('8379702483069295441');" style="">1470                             field.setDirty(entityProp.getIsDirty());                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1471                         }                                                                                </span>
<span class="-7071797664598394524" onmouseenter="enter('-7071797664598394524');" onmouseout="out('-7071797664598394524');" style="">1472                         if (basicFM.getFieldType()==SupportedFieldType.RULE_SIMPLE                       </span>
<span class="-6985772052695519723" onmouseenter="enter('-6985772052695519723');" onmouseout="out('-6985772052695519723');" style="">1473                                 || basicFM.getFieldType()==SupportedFieldType.RULE_SIMPLE_TIME           </span>
<span class="8398044977893461025" onmouseenter="enter('8398044977893461025');" onmouseout="out('8398044977893461025');" style="">1474                                 || basicFM.getFieldType()==SupportedFieldType.RULE_WITH_QUANTITY) {      </span>
<span class="4021621821134603536" onmouseenter="enter('4021621821134603536');" onmouseout="out('4021621821134603536');" style="">1475                             RuleBuilderField rbf = (RuleBuilderField) field;                             </span>
<span class="-7695608741173734167" onmouseenter="enter('-7695608741173734167');" onmouseout="out('-7695608741173734167');" style="">1476                             if (entity.getPMap().containsKey(rbf.getJsonFieldName())) {                  </span>
<span class="-6319430319708671435" onmouseenter="enter('-6319430319708671435');" onmouseout="out('-6319430319708671435');" style="">1477                                 String json = entity.getPMap().get(rbf.getJsonFieldName()).getValue();   </span>
<span class="-6775685118155466056" onmouseenter="enter('-6775685118155466056');" onmouseout="out('-6775685118155466056');" style="">1478                                 rbf.setJson(json);                                                       </span>
<span class="-5885429731931553725" onmouseenter="enter('-5885429731931553725');" onmouseout="out('-5885429731931553725');" style="">1479                                 DataWrapper dw = convertJsonToDataWrapper(json);                         </span>
<span class="-3408161092817379645" onmouseenter="enter('-3408161092817379645');" onmouseout="out('-3408161092817379645');" style="">1480                                 if (dw != null) {                                                        </span>
<span class="7188823867343032185" onmouseenter="enter('7188823867343032185');" onmouseout="out('7188823867343032185');" style="">1481                                     rbf.setDataWrapper(dw);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1482                                 }                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1483                             }                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1484                         }                                                                                </span>
<span class="-4769937124220254644" onmouseenter="enter('-4769937124220254644');" onmouseout="out('-4769937124220254644');" style="">1485                         if (basicFM.getFieldType() == SupportedFieldType.MEDIA) {                        </span>
<span class="627899284580660581" onmouseenter="enter('627899284580660581');" onmouseout="out('627899284580660581');" style="">1486                             field.setValue(entityProp.getValue());                                       </span>
<span class="-3405146348302376065" onmouseenter="enter('-3405146348302376065');" onmouseout="out('-3405146348302376065');" style="">1487                             field.setDisplayValue(entityProp.getDisplayValue());                         </span>
<span class="7597965270557979966" onmouseenter="enter('7597965270557979966');" onmouseout="out('7597965270557979966');" style="">1488                             MediaField mf = (MediaField) field;                                          </span>
<span class="-7494069843850344001" onmouseenter="enter('-7494069843850344001');" onmouseout="out('-7494069843850344001');" style=""><abbr title="1489                             Class&lt;MediaDto&gt; type = entityConfiguration.lookupEntityClass(MediaDto.class.getName(), MediaDto.class);">1489                             Class&lt;MediaDto&gt; type = entityConfiguration.lookupEntityClass(MediaDto.class.gðŸ”µ</abbr></span>
<span class="8674870911105205925" onmouseenter="enter('8674870911105205925');" onmouseout="out('8674870911105205925');" style=""><abbr title="1490                             mf.setMedia(mediaBuilderService.convertJsonToMedia(entityProp.getUnHtmlEncodedValue(), type));">1490                             mf.setMedia(mediaBuilderService.convertJsonToMedia(entityProp.getUnHtmlEncodeðŸ”µ</abbr></span>
<span class="8860382562253463844" onmouseenter="enter('8860382562253463844');" onmouseout="out('8860382562253463844');" style=""><abbr title="1491                         } else if (!SupportedFieldType.PASSWORD_CONFIRM.equals(basicFM.getExplicitFieldType())) {">1491                         } else if (!SupportedFieldType.PASSWORD_CONFIRM.equals(basicFM.getExplicitFieldTyðŸ”µ</abbr></span>
<span class="627899284580660581" onmouseenter="enter('627899284580660581');" onmouseout="out('627899284580660581');" style="">1492                             field.setValue(entityProp.getValue());                                       </span>
<span class="-3405146348302376065" onmouseenter="enter('-3405146348302376065');" onmouseout="out('-3405146348302376065');" style="">1493                             field.setDisplayValue(entityProp.getDisplayValue());                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1494                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1495                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1496                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1497             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1498         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1499     }                                                                                                    </span>
<span  style="">1500                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1501     /**                                                                                                  </span>
<span class="-628877191560702928" onmouseenter="enter('-628877191560702928');" onmouseout="out('-628877191560702928');" style="">1502      * When using Thymeleaf, we need to convert the JSON string back to                                  </span>
<span class="1787417412343624491" onmouseenter="enter('1787417412343624491');" onmouseout="out('1787417412343624491');" style="">1503      * a DataWrapper object because Thymeleaf escapes JSON strings.                                      </span>
<span class="5903545593073761450" onmouseenter="enter('5903545593073761450');" onmouseout="out('5903545593073761450');" style="">1504      * Thymeleaf uses it&#x27;s own object de-serializer                                                      </span>
<span class="5324834623619770328" onmouseenter="enter('5324834623619770328');" onmouseout="out('5324834623619770328');" style="">1505      * see: https://github.com/thymeleaf/thymeleaf/issues/84                                             </span>
<span class="363134610140381216" onmouseenter="enter('363134610140381216');" onmouseout="out('363134610140381216');" style="">1506      * see: http://forum.thymeleaf.org/Spring-Javascript-and-escaped-JSON-td4024739.html                 </span>
<span class="-1207310572973527556" onmouseenter="enter('-1207310572973527556');" onmouseout="out('-1207310572973527556');" style="">1507      * @param json                                                                                       </span>
<span class="-6577536486120138335" onmouseenter="enter('-6577536486120138335');" onmouseout="out('-6577536486120138335');" style="">1508      * @return DataWrapper                                                                               </span>
<span class="-2042953791166134795" onmouseenter="enter('-2042953791166134795');" onmouseout="out('-2042953791166134795');" style="">1509      * @throws IOException                                                                               </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1510      */                                                                                                  </span>
<span class="2430913214947894128" onmouseenter="enter('2430913214947894128');" onmouseout="out('2430913214947894128');" style="">1511     protected DataWrapper convertJsonToDataWrapper(String json) {                                        </span>
<span class="-1540063925365497538" onmouseenter="enter('-1540063925365497538');" onmouseout="out('-1540063925365497538');" style="">1512         ObjectMapper mapper = new ObjectMapper();                                                        </span>
<span class="2504782713133203850" onmouseenter="enter('2504782713133203850');" onmouseout="out('2504782713133203850');" style="">1513         DataDTODeserializer dtoDeserializer = new DataDTODeserializer();                                 </span>
<span class="-7069332746071020099" onmouseenter="enter('-7069332746071020099');" onmouseout="out('-7069332746071020099');" style=""><abbr title="1514         SimpleModule module = new SimpleModule(&quot;DataDTODeserializerModule&quot;, new Version(1, 0, 0, null, null, null));">1514         SimpleModule module = new SimpleModule(&quot;DataDTODeserializerModule&quot;, new Version(1, 0, 0, null, nuðŸ”µ</abbr></span>
<span class="-4567775918027288963" onmouseenter="enter('-4567775918027288963');" onmouseout="out('-4567775918027288963');" style="">1515         module.addDeserializer(DataDTO.class, dtoDeserializer);                                          </span>
<span class="1730387754846602273" onmouseenter="enter('1730387754846602273');" onmouseout="out('1730387754846602273');" style="">1516         mapper.registerModule(module);                                                                   </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1517         try {                                                                                            </span>
<span class="-1255991149529842499" onmouseenter="enter('-1255991149529842499');" onmouseout="out('-1255991149529842499');" style="">1518             return mapper.readValue(json, DataWrapper.class);                                            </span>
<span class="7080241092423381085" onmouseenter="enter('7080241092423381085');" onmouseout="out('7080241092423381085');" style="">1519         } catch (IOException e) {                                                                        </span>
<span class="5897285764286536997" onmouseenter="enter('5897285764286536997');" onmouseout="out('5897285764286536997');" style="">1520             throw new RuntimeException(e);                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1521         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1522     }                                                                                                    </span>
<span  style="">1523                                                                                                          </span>
<span class="-186207403366028020" onmouseenter="enter('-186207403366028020');" onmouseout="out('-186207403366028020');" style="">1524     protected void populateDropdownToOneFields(EntityForm ef, ClassMetadata cmd)                         </span>
<span class="1998458335829271558" onmouseenter="enter('1998458335829271558');" onmouseout="out('1998458335829271558');" style="">1525             throws ServiceException {                                                                    </span>
<span class="3681854507729164346" onmouseenter="enter('3681854507729164346');" onmouseout="out('3681854507729164346');" style="">1526         for (Property p : cmd.getProperties()) {                                                         </span>
<span class="-1029066852878262358" onmouseenter="enter('-1029066852878262358');" onmouseout="out('-1029066852878262358');" style="">1527             if (p.getMetadata() instanceof BasicFieldMetadata) {                                         </span>
<span class="-5664285287189453326" onmouseenter="enter('-5664285287189453326');" onmouseout="out('-5664285287189453326');" style="">1528                 BasicFieldMetadata fmd = (BasicFieldMetadata) p.getMetadata();                           </span>
<span class="-5975886890404137502" onmouseenter="enter('-5975886890404137502');" onmouseout="out('-5975886890404137502');" style="">1529                 if (LookupType.DROPDOWN.equals(fmd.getLookupType())                                      </span>
<span class="3923559904233294352" onmouseenter="enter('3923559904233294352');" onmouseout="out('3923559904233294352');" style="">1530                         &amp;&amp; !ArrayUtils.contains(getFormHiddenVisibilities(), fmd.getVisibility())) {     </span>
<span class="7405748751598380621" onmouseenter="enter('7405748751598380621');" onmouseout="out('7405748751598380621');" style="">1531                     // Get the records                                                                   </span>
<span class="-8258870037901756296" onmouseenter="enter('-8258870037901756296');" onmouseout="out('-8258870037901756296');" style="">1532                     PersistencePackageRequest toOnePpr = PersistencePackageRequest.standard()            </span>
<span class="-1097107171578019007" onmouseenter="enter('-1097107171578019007');" onmouseout="out('-1097107171578019007');" style="">1533                             .withCeilingEntityClassname(fmd.getForeignKeyClass());                       </span>
<span class="6917610271852750158" onmouseenter="enter('6917610271852750158');" onmouseout="out('6917610271852750158');" style=""><abbr title="1534                     Entity[] rows = adminEntityService.getRecords(toOnePpr).getDynamicResultSet().getRecords();">1534                     Entity[] rows = adminEntityService.getRecords(toOnePpr).getDynamicResultSet().getRecoðŸ”µ</abbr></span>
<span  style="">1535                                                                                                          </span>
<span class="-7705887927793372443" onmouseenter="enter('-7705887927793372443');" onmouseout="out('-7705887927793372443');" style="">1536                     // Determine the id field                                                            </span>
<span class="6991332735797511760" onmouseenter="enter('6991332735797511760');" onmouseout="out('6991332735797511760');" style="">1537                     String idProp = null;                                                                </span>
<span class="-6188886223790300160" onmouseenter="enter('-6188886223790300160');" onmouseout="out('-6188886223790300160');" style=""><abbr title="1538                     ClassMetadata foreignClassMd = adminEntityService.getClassMetadata(toOnePpr).getDynamicResultSet().getClassMetaData();">1538                     ClassMetadata foreignClassMd = adminEntityService.getClassMetadata(toOnePpr).getDynamðŸ”µ</abbr></span>
<span class="-7740302606560587079" onmouseenter="enter('-7740302606560587079');" onmouseout="out('-7740302606560587079');" style="">1539                     for (Property foreignP : foreignClassMd.getProperties()) {                           </span>
<span class="-8528985220609178259" onmouseenter="enter('-8528985220609178259');" onmouseout="out('-8528985220609178259');" style="">1540                         if (foreignP.getMetadata() instanceof BasicFieldMetadata) {                      </span>
<span class="-8124244658776994002" onmouseenter="enter('-8124244658776994002');" onmouseout="out('-8124244658776994002');" style="">1541                             BasicFieldMetadata foreignFmd = (BasicFieldMetadata) foreignP.getMetadata(); </span>
<span class="-6615171596083676427" onmouseenter="enter('-6615171596083676427');" onmouseout="out('-6615171596083676427');" style="">1542                             if (SupportedFieldType.ID.equals(foreignFmd.getFieldType())) {               </span>
<span class="8626137451888256629" onmouseenter="enter('8626137451888256629');" onmouseout="out('8626137451888256629');" style="">1543                                 idProp = foreignP.getName();                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1544                             }                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1545                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1546                     }                                                                                    </span>
<span  style="">1547                                                                                                          </span>
<span class="-5011974389032314776" onmouseenter="enter('-5011974389032314776');" onmouseout="out('-5011974389032314776');" style="">1548                     if (idProp == null) {                                                                </span>
<span class="9029833375734478123" onmouseenter="enter('9029833375734478123');" onmouseout="out('9029833375734478123');" style=""><abbr title="1549                         throw new RuntimeException(&quot;Could not determine ID property for &quot; + fmd.getForeignKeyClass());">1549                         throw new RuntimeException(&quot;Could not determine ID property for &quot; + fmd.getForeigðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1550                     }                                                                                    </span>
<span  style="">1551                                                                                                          </span>
<span class="-606725638262986950" onmouseenter="enter('-606725638262986950');" onmouseout="out('-606725638262986950');" style="">1552                     // Determine the display field                                                       </span>
<span class="-6330673322776160197" onmouseenter="enter('-6330673322776160197');" onmouseout="out('-6330673322776160197');" style="">1553                     String displayProp = fmd.getLookupDisplayProperty();                                 </span>
<span  style="">1554                                                                                                          </span>
<span class="-282229918032301960" onmouseenter="enter('-282229918032301960');" onmouseout="out('-282229918032301960');" style="">1555                     // Build the options map                                                             </span>
<span class="-4401347179302263251" onmouseenter="enter('-4401347179302263251');" onmouseout="out('-4401347179302263251');" style="">1556                     Map&lt;String, String&gt; options = new HashMap&lt;&gt;();                                       </span>
<span class="-2921615155367105394" onmouseenter="enter('-2921615155367105394');" onmouseout="out('-2921615155367105394');" style="">1557                     for (Entity row : rows) {                                                            </span>
<span class="-9011123629733297811" onmouseenter="enter('-9011123629733297811');" onmouseout="out('-9011123629733297811');" style="">1558                         Property prop = row.findProperty(displayProp);                                   </span>
<span class="-3136494705922445009" onmouseenter="enter('-3136494705922445009');" onmouseout="out('-3136494705922445009');" style="">1559                         if (prop == null) {                                                              </span>
<span class="-2859923640341758966" onmouseenter="enter('-2859923640341758966');" onmouseout="out('-2859923640341758966');" style=""><abbr title="1560                             LOG.warn(&quot;Could not find displayProp [&quot; + StringUtil.sanitize(displayProp) + &quot;] on entity [&quot; + ">1560                             LOG.warn(&quot;Could not find displayProp [&quot; + StringUtil.sanitize(displayProp) + ðŸ”µ</abbr></span>
<span class="-2254314617729442046" onmouseenter="enter('-2254314617729442046');" onmouseout="out('-2254314617729442046');" style="">1561                                     ef.getCeilingEntityClassname() + &quot;]&quot;);                               </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1562                         } else {                                                                         </span>
<span class="-8909758360620292667" onmouseenter="enter('-8909758360620292667');" onmouseout="out('-8909758360620292667');" style="">1563                             String displayValue = prop.getDisplayValue();                                </span>
<span class="987960060831169722" onmouseenter="enter('987960060831169722');" onmouseout="out('987960060831169722');" style="">1564                             if (StringUtils.isBlank(displayValue)) {                                     </span>
<span class="23109960353036152" onmouseenter="enter('23109960353036152');" onmouseout="out('23109960353036152');" style="">1565                                 displayValue = prop.getValue();                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1566                             }                                                                            </span>
<span class="-4077682651397635801" onmouseenter="enter('-4077682651397635801');" onmouseout="out('-4077682651397635801');" style="">1567                             options.put(row.findProperty(idProp).getValue(), displayValue);              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1568                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1569                     }                                                                                    </span>
<span  style="">1570                                                                                                          </span>
<span class="4340190494430873223" onmouseenter="enter('4340190494430873223');" onmouseout="out('4340190494430873223');" style="">1571                     // Set the options on the entity field                                               </span>
<span class="2851644107781283227" onmouseenter="enter('2851644107781283227');" onmouseout="out('2851644107781283227');" style="">1572                     ComboField cf = (ComboField) ef.findField(p.getName());                              </span>
<span class="-5242484842909969229" onmouseenter="enter('-5242484842909969229');" onmouseout="out('-5242484842909969229');" style="">1573                     cf.setOptions(options);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1574                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1575             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1576         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1577     }                                                                                                    </span>
<span  style="">1578                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1579     @Override                                                                                            </span>
<span class="763969629629221745" onmouseenter="enter('763969629629221745');" onmouseout="out('763969629629221745');" style=""><abbr title="1580     public EntityForm createEntityForm(ClassMetadata cmd, Entity entity, Map&lt;String, DynamicResultSet&gt; collectionRecords, List&lt;SectionCrumb&gt; sectionCrumbs)">1580     public EntityForm createEntityForm(ClassMetadata cmd, Entity entity, Map&lt;String, DynamicResultSet&gt; coðŸ”µ</abbr></span>
<span class="1998458335829271558" onmouseenter="enter('1998458335829271558');" onmouseout="out('1998458335829271558');" style="">1581             throws ServiceException {                                                                    </span>
<span class="-438894394526699599" onmouseenter="enter('-438894394526699599');" onmouseout="out('-438894394526699599');" style="">1582         EntityForm ef = createStandardEntityForm();                                                      </span>
<span class="-6955297876613536298" onmouseenter="enter('-6955297876613536298');" onmouseout="out('-6955297876613536298');" style="">1583         populateEntityForm(cmd, entity, collectionRecords, ef, sectionCrumbs);                           </span>
<span class="3191217127862437415" onmouseenter="enter('3191217127862437415');" onmouseout="out('3191217127862437415');" style="">1584         addAdditionalFormActions(ef);                                                                    </span>
<span class="8511655867693649187" onmouseenter="enter('8511655867693649187');" onmouseout="out('8511655867693649187');" style="">1585         extensionManager.getProxy().addAdditionalFormActions(ef);                                        </span>
<span class="3260120157565581788" onmouseenter="enter('3260120157565581788');" onmouseout="out('3260120157565581788');" style="">1586         return ef;                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1587     }                                                                                                    </span>
<span  style="">1588                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1589     @Override                                                                                            </span>
<span class="8407616833525381833" onmouseenter="enter('8407616833525381833');" onmouseout="out('8407616833525381833');" style=""><abbr title="1590     public void populateEntityForm(ClassMetadata cmd, Entity entity, Map&lt;String, DynamicResultSet&gt; collectionRecords, EntityForm ef, List&lt;SectionCrumb&gt; sectionCrumbs)">1590     public void populateEntityForm(ClassMetadata cmd, Entity entity, Map&lt;String, DynamicResultSet&gt; collecðŸ”µ</abbr></span>
<span class="1998458335829271558" onmouseenter="enter('1998458335829271558');" onmouseout="out('1998458335829271558');" style="">1591             throws ServiceException {                                                                    </span>
<span class="-7842928199694637195" onmouseenter="enter('-7842928199694637195');" onmouseout="out('-7842928199694637195');" style="">1592         // Get the form with values for this entity                                                      </span>
<span class="-4073847895348507412" onmouseenter="enter('-4073847895348507412');" onmouseout="out('-4073847895348507412');" style="">1593         populateEntityForm(cmd, entity, ef, sectionCrumbs);                                              </span>
<span  style="">1594                                                                                                          </span>
<span class="-5693049027716773876" onmouseenter="enter('-5693049027716773876');" onmouseout="out('-5693049027716773876');" style="">1595         // Attach the sub-collection list grids and specialty UI support                                 </span>
<span class="3681854507729164346" onmouseenter="enter('3681854507729164346');" onmouseout="out('3681854507729164346');" style="">1596         for (Property p : cmd.getProperties()) {                                                         </span>
<span class="-1029066852878262358" onmouseenter="enter('-1029066852878262358');" onmouseout="out('-1029066852878262358');" style="">1597             if (p.getMetadata() instanceof BasicFieldMetadata) {                                         </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">1598                 continue;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1599             }                                                                                            </span>
<span  style="">1600                                                                                                          </span>
<span class="7939644157431336741" onmouseenter="enter('7939644157431336741');" onmouseout="out('7939644157431336741');" style="">1601             if (!ArrayUtils.contains(p.getMetadata().getAvailableToTypes(), entity.getType()[0])) {      </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">1602                 continue;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1603             }                                                                                            </span>
<span  style="">1604                                                                                                          </span>
<span class="5057378952086585538" onmouseenter="enter('5057378952086585538');" onmouseout="out('5057378952086585538');" style="">1605             if (collectionRecords != null &amp;&amp; !collectionRecords.isEmpty()) {                             </span>
<span class="-2000540039355299527" onmouseenter="enter('-2000540039355299527');" onmouseout="out('-2000540039355299527');" style="">1606                 DynamicResultSet subCollectionEntities = collectionRecords.get(p.getName());             </span>
<span class="732471662007756244" onmouseenter="enter('732471662007756244');" onmouseout="out('732471662007756244');" style="">1607                 String containingEntityId = entity.getPMap().get(ef.getIdProperty()).getValue();         </span>
<span class="-2703128427729187311" onmouseenter="enter('-2703128427729187311');" onmouseout="out('-2703128427729187311');" style=""><abbr title="1608                 ListGrid listGrid = buildCollectionListGrid(containingEntityId, subCollectionEntities, p, ef.getSectionKey(), sectionCrumbs);">1608                 ListGrid listGrid = buildCollectionListGrid(containingEntityId, subCollectionEntities, p,ðŸ”µ</abbr></span>
<span  style="">1609                                                                                                          </span>
<span class="-4703142262249660615" onmouseenter="enter('-4703142262249660615');" onmouseout="out('-4703142262249660615');" style="">1610                 CollectionMetadata md = ((CollectionMetadata) p.getMetadata());                          </span>
<span class="-1532720970191757712" onmouseenter="enter('-1532720970191757712');" onmouseout="out('-1532720970191757712');" style="">1611                 if (md instanceof BasicCollectionMetadata) {                                             </span>
<span class="-1665410210923963053" onmouseenter="enter('-1665410210923963053');" onmouseout="out('-1665410210923963053');" style=""><abbr title="1612                     PersistencePackageRequest ppr = PersistencePackageRequest.fromMetadata(md, sectionCrumbs);">1612                     PersistencePackageRequest ppr = PersistencePackageRequest.fromMetadata(md, sectionCruðŸ”µ</abbr></span>
<span class="-9036890390079986870" onmouseenter="enter('-9036890390079986870');" onmouseout="out('-9036890390079986870');" style=""><abbr title="1613                     ClassMetadata collectionCmd = adminEntityService.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();">1613                     ClassMetadata collectionCmd = adminEntityService.getClassMetadata(ppr).getDynamicResuðŸ”µ</abbr></span>
<span class="7118158235764717040" onmouseenter="enter('7118158235764717040');" onmouseout="out('7118158235764717040');" style="">1614                     if (collectionCmd.getPolymorphicEntities().getChildren().length != 0) {              </span>
<span class="-2529377774460288369" onmouseenter="enter('-2529377774460288369');" onmouseout="out('-2529377774460288369');" style=""><abbr title="1615                         List&lt;ClassTree&gt; entityTypes = collectionCmd.getPolymorphicEntities().getCollapsedClassTrees();">1615                         List&lt;ClassTree&gt; entityTypes = collectionCmd.getPolymorphicEntities().getCollapsedðŸ”µ</abbr></span>
<span class="5700663076602659421" onmouseenter="enter('5700663076602659421');" onmouseout="out('5700663076602659421');" style="">1616                         ListGridActionGroup actionGroup = new ListGridActionGroup().withName(&quot;Add&quot;);     </span>
<span class="-8628780103469525246" onmouseenter="enter('-8628780103469525246');" onmouseout="out('-8628780103469525246');" style="">1617                         for (ClassTree entityType : entityTypes) {                                       </span>
<span class="-6085370745551409442" onmouseenter="enter('-6085370745551409442');" onmouseout="out('-6085370745551409442');" style="">1618                             ListGridAction ADD = new ListGridAction(ListGridAction.ADD)                  </span>
<span class="-8123842595880337680" onmouseenter="enter('-8123842595880337680');" onmouseout="out('-8123842595880337680');" style="">1619                                     .withButtonClass(AddMethodType.PERSIST_EMPTY==                       </span>
<span class="2458863346051852504" onmouseenter="enter('2458863346051852504');" onmouseout="out('2458863346051852504');" style=""><abbr title="1620                                             ((BasicCollectionMetadata) md).getAddMethodType()?&quot;sub-list-grid-add-empty&quot;:&quot;sub-list-grid-add&quot;)">1620                                             ((BasicCollectionMetadata) md).getAddMethodType()?&quot;sub-list-gðŸ”µ</abbr></span>
<span class="625982968125452177" onmouseenter="enter('625982968125452177');" onmouseout="out('625982968125452177');" style="">1621                                     .withActionTargetEntity(entityType.getFullyQualifiedClassname())     </span>
<span class="1979584669038484989" onmouseenter="enter('1979584669038484989');" onmouseout="out('1979584669038484989');" style="">1622                                     .withUrlPostfix(&quot;/add&quot;)                                              </span>
<span class="-2605498948604397141" onmouseenter="enter('-2605498948604397141');" onmouseout="out('-2605498948604397141');" style="">1623                                     .withIconClass(&quot;fa fa-plus&quot;)                                         </span>
<span class="1382163113890128554" onmouseenter="enter('1382163113890128554');" onmouseout="out('1382163113890128554');" style=""><abbr title="1624                                     .withDisplayText(BLCMessageUtils.getMessage(entityType.getFriendlyName()));">1624                                     .withDisplayText(BLCMessageUtils.getMessage(entityType.getFriendlyNamðŸ”µ</abbr></span>
<span class="-362768101277236570" onmouseenter="enter('-362768101277236570');" onmouseout="out('-362768101277236570');" style="">1625                             actionGroup.getListGridActions().add(0, ADD);                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1626                         }                                                                                </span>
<span class="4272855771145592976" onmouseenter="enter('4272855771145592976');" onmouseout="out('4272855771145592976');" style="">1627                         listGrid.addToolbarActionGroup(actionGroup);                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1628                     } else {                                                                             </span>
<span class="-686829543212379321" onmouseenter="enter('-686829543212379321');" onmouseout="out('-686829543212379321');" style="">1629                         listGrid.getToolbarActions().add(0, AddMethodType.PERSIST_EMPTY==                </span>
<span class="452604423250167593" onmouseenter="enter('452604423250167593');" onmouseout="out('452604423250167593');" style=""><abbr title="1630                                 ((BasicCollectionMetadata) md).getAddMethodType()?DefaultListGridActions.ADD_EMPTY:DefaultListGridActions.ADD);">1630                                 ((BasicCollectionMetadata) md).getAddMethodType()?DefaultListGridActions.ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1631                     }                                                                                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1632                 } else {                                                                                 </span>
<span class="-8192307858907059023" onmouseenter="enter('-8192307858907059023');" onmouseout="out('-8192307858907059023');" style="">1633                     listGrid.getToolbarActions().add(0, DefaultListGridActions.ADD);                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1634                 }                                                                                        </span>
<span  style="">1635                                                                                                          </span>
<span class="1698654555130612252" onmouseenter="enter('1698654555130612252');" onmouseout="out('1698654555130612252');" style="">1636                 if (subCollectionEntities.getUnselectedTabMetadata().get(md.getTab())!=null) {           </span>
<span class="-6246999191581452259" onmouseenter="enter('-6246999191581452259');" onmouseout="out('-6246999191581452259');" style="">1637                     ef.addListGrid(cmd, listGrid, md.getTab(), md.getTabOrder(), md.getGroup(), true);   </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1638                 } else {                                                                                 </span>
<span class="-3682322762406032422" onmouseenter="enter('-3682322762406032422');" onmouseout="out('-3682322762406032422');" style="">1639                     ef.addListGrid(cmd, listGrid, md.getTab(), md.getTabOrder(), md.getGroup(), false);  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1640                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1641             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1642         }                                                                                                </span>
<span  style="">1643                                                                                                          </span>
<span class="-8574421891214577202" onmouseenter="enter('-8574421891214577202');" onmouseout="out('-8574421891214577202');" style="">1644         if (CollectionUtils.isEmpty(ef.getActions())) {                                                  </span>
<span class="-2237425030372835917" onmouseenter="enter('-2237425030372835917');" onmouseout="out('-2237425030372835917');" style="">1645             ef.addAction(DefaultEntityFormActions.SAVE);                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1646         }                                                                                                </span>
<span  style="">1647                                                                                                          </span>
<span class="-3017596271040445246" onmouseenter="enter('-3017596271040445246');" onmouseout="out('-3017596271040445246');" style="">1648         addDeleteActionIfAllowed(ef, cmd, entity);                                                       </span>
<span class="-1573379781634260780" onmouseenter="enter('-1573379781634260780');" onmouseout="out('-1573379781634260780');" style="">1649         addDuplicateActionIfAllowed(ef, cmd);                                                            </span>
<span class="-4992665792206214706" onmouseenter="enter('-4992665792206214706');" onmouseout="out('-4992665792206214706');" style="">1650         setReadOnlyState(ef, cmd, entity);                                                               </span>
<span  style="">1651                                                                                                          </span>
<span class="-2369176302071135940" onmouseenter="enter('-2369176302071135940');" onmouseout="out('-2369176302071135940');" style="">1652         // check for fields that should be hidden based on annotations                                   </span>
<span class="-7540431012384828138" onmouseenter="enter('-7540431012384828138');" onmouseout="out('-7540431012384828138');" style="">1653         setVisibilityBasedOnShowIfFieldEquals(cmd, entity, ef);                                          </span>
<span  style="">1654                                                                                                          </span>
<span class="-6573999189247732385" onmouseenter="enter('-6573999189247732385');" onmouseout="out('-6573999189247732385');" style="">1655         extensionManager.getProxy().modifyDetailEntityForm(ef);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1656     }                                                                                                    </span>
<span  style="">1657                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1658     /**                                                                                                  </span>
<span class="352645507222005893" onmouseenter="enter('352645507222005893');" onmouseout="out('352645507222005893');" style=""><abbr title="1659      * Adds the {@link DefaultEntityFormActions#DELETE} if the user is allowed to delete the &lt;b&gt;entity&lt;/b&gt;. The user can">1659      * Adds the {@link DefaultEntityFormActions#DELETE} if the user is allowed to delete the &lt;b&gt;entity&lt;/bðŸ”µ</abbr></span>
<span class="-3708177379444774538" onmouseenter="enter('-3708177379444774538');" onmouseout="out('-3708177379444774538');" style="">1660      * delete an entity for the following cases:                                                         </span>
<span class="3244483720103844454" onmouseenter="enter('3244483720103844454');" onmouseout="out('3244483720103844454');" style="">1661      * &lt;ol&gt;                                                                                              </span>
<span class="5070277409715594588" onmouseenter="enter('5070277409715594588');" onmouseout="out('5070277409715594588');" style=""><abbr title="1662      *  &lt;li&gt;The user has the security to {@link EntityOperationType#REMOVE} the given class name represented by">1662      *  &lt;li&gt;The user has the security to {@link EntityOperationType#REMOVE} the given class name represenðŸ”µ</abbr></span>
<span class="8957232178890049809" onmouseenter="enter('8957232178890049809');" onmouseout="out('8957232178890049809');" style=""><abbr title="1663      *  the &lt;b&gt;entityForm&lt;/b&gt; (determined by {@link #getSecurityClassname(EntityForm, ClassMetadata)})&lt;/li&gt;">1663      *  the &lt;b&gt;entityForm&lt;/b&gt; (determined by {@link #getSecurityClassname(EntityForm, ClassMetadata)})&lt;/lðŸ”µ</abbr></span>
<span class="980044994252332631" onmouseenter="enter('980044994252332631');" onmouseout="out('980044994252332631');" style="">1664      *  &lt;li&gt;The user has the security necessary to delete the given &lt;b&gt;entity&lt;/b&gt; according to the       </span>
<span class="8011888861168395573" onmouseenter="enter('8011888861168395573');" onmouseout="out('8011888861168395573');" style="">1665      *  {@link RowLevelSecurityService#canRemove(AdminUser, Entity)}&lt;/li&gt;                                </span>
<span class="6987349732947823565" onmouseenter="enter('6987349732947823565');" onmouseout="out('6987349732947823565');" style="">1666      * &lt;/ol&gt;                                                                                             </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1667      *                                                                                                   </span>
<span class="-8102393608813481146" onmouseenter="enter('-8102393608813481146');" onmouseout="out('-8102393608813481146');" style="">1668      * @param entityForm the form being generated                                                        </span>
<span class="-5184866399254269391" onmouseenter="enter('-5184866399254269391');" onmouseout="out('-5184866399254269391');" style="">1669      * @param cmd the metatadata used to build the &lt;b&gt;entityForm&lt;/b&gt; for the &lt;b&gt;entity&lt;/b&gt;               </span>
<span class="-6994238295290465877" onmouseenter="enter('-6994238295290465877');" onmouseout="out('-6994238295290465877');" style="">1670      * @param entity the entity being edited                                                             </span>
<span class="-8891442921277557778" onmouseenter="enter('-8891442921277557778');" onmouseout="out('-8891442921277557778');" style="">1671      * @see {@link SecurityVerifier#securityCheck(String, EntityOperationType)}                          </span>
<span class="-3828641031793918168" onmouseenter="enter('-3828641031793918168');" onmouseout="out('-3828641031793918168');" style="">1672      * @see {@link #getSecurityClassname(EntityForm, ClassMetadata)}                                     </span>
<span class="8925161549930098588" onmouseenter="enter('8925161549930098588');" onmouseout="out('8925161549930098588');" style="">1673      * @see {@link RowLevelSecurityService#canRemove(AdminUser, Entity)}                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1674      */                                                                                                  </span>
<span class="1590261750272169439" onmouseenter="enter('1590261750272169439');" onmouseout="out('1590261750272169439');" style="">1675     protected void addDeleteActionIfAllowed(EntityForm entityForm, ClassMetadata cmd, Entity entity) {   </span>
<span class="9176849152277833812" onmouseenter="enter('9176849152277833812');" onmouseout="out('9176849152277833812');" style="">1676         if (isDeletionAllowed(entityForm, cmd, entity)) {                                                </span>
<span class="-8844177275906434182" onmouseenter="enter('-8844177275906434182');" onmouseout="out('-8844177275906434182');" style="">1677             entityForm.addAction(DefaultEntityFormActions.DELETE);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1678         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1679     }                                                                                                    </span>
<span  style="">1680                                                                                                          </span>
<span class="1233024099247846166" onmouseenter="enter('1233024099247846166');" onmouseout="out('1233024099247846166');" style="">1681     protected boolean isDeletionAllowed(final EntityForm entityForm, final ClassMetadata cmd,            </span>
<span class="-5681436677530159700" onmouseenter="enter('-5681436677530159700');" onmouseout="out('-5681436677530159700');" style="">1682             final Entity entity) {                                                                       </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1683         try {                                                                                            </span>
<span class="5476366109962905346" onmouseenter="enter('5476366109962905346');" onmouseout="out('5476366109962905346');" style="">1684             String securityEntityClassname = getSecurityClassname(entityForm, cmd);                      </span>
<span class="-1437365640597623792" onmouseenter="enter('-1437365640597623792');" onmouseout="out('-1437365640597623792');" style="">1685             adminRemoteSecurityService                                                                   </span>
<span class="9049592859337879981" onmouseenter="enter('9049592859337879981');" onmouseout="out('9049592859337879981');" style="">1686                     .securityCheck(securityEntityClassname, EntityOperationType.REMOVE);                 </span>
<span class="9220844322816084446" onmouseenter="enter('9220844322816084446');" onmouseout="out('9220844322816084446');" style="">1687         } catch (ServiceException e) {                                                                   </span>
<span class="-8912377967087217182" onmouseenter="enter('-8912377967087217182');" onmouseout="out('-8912377967087217182');" style="">1688             if (e instanceof SecurityServiceException) {                                                 </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1689                 return false;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1690             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1691         }                                                                                                </span>
<span  style="">1692                                                                                                          </span>
<span class="-6544480517582328932" onmouseenter="enter('-6544480517582328932');" onmouseout="out('-6544480517582328932');" style="">1693         final AdminUser persistentAdminUser = adminRemoteSecurityService.getPersistentAdminUser();       </span>
<span  style="">1694                                                                                                          </span>
<span class="-4253696723384610596" onmouseenter="enter('-4253696723384610596');" onmouseout="out('-4253696723384610596');" style="">1695         return rowLevelSecurityService.canUpdate(persistentAdminUser, entity)                            </span>
<span class="6878671858526625956" onmouseenter="enter('6878671858526625956');" onmouseout="out('6878671858526625956');" style="">1696                 &amp;&amp; rowLevelSecurityService.canRemove(persistentAdminUser, entity);                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1697     }                                                                                                    </span>
<span  style="">1698                                                                                                          </span>
<span class="8744244153887540139" onmouseenter="enter('8744244153887540139');" onmouseout="out('8744244153887540139');" style="">1699     protected void addDuplicateActionIfAllowed(final EntityForm entityForm,                              </span>
<span class="7968956867409491481" onmouseenter="enter('7968956867409491481');" onmouseout="out('7968956867409491481');" style="">1700             final ClassMetadata cmd) {                                                                   </span>
<span class="-4074855000497140283" onmouseenter="enter('-4074855000497140283');" onmouseout="out('-4074855000497140283');" style="">1701         if (isDuplicationAllowed(entityForm, cmd)) {                                                     </span>
<span class="6780575287202109079" onmouseenter="enter('6780575287202109079');" onmouseout="out('6780575287202109079');" style="">1702             entityForm.addAction(DefaultEntityFormActions.DUPLICATE);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1703         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1704     }                                                                                                    </span>
<span  style="">1705                                                                                                          </span>
<span class="2750172847360880677" onmouseenter="enter('2750172847360880677');" onmouseout="out('2750172847360880677');" style="">1706     protected boolean isDuplicationAllowed(final EntityForm entityForm, final ClassMetadata cmd) {       </span>
<span class="5761145246382260648" onmouseenter="enter('5761145246382260648');" onmouseout="out('5761145246382260648');" style="">1707         final String securityClassname = getSecurityClassname(entityForm, cmd);                          </span>
<span  style="">1708                                                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1709         try {                                                                                            </span>
<span class="7910151490387293712" onmouseenter="enter('7910151490387293712');" onmouseout="out('7910151490387293712');" style="">1710             adminRemoteSecurityService.securityCheck(securityClassname, EntityOperationType.ADD);        </span>
<span class="9220844322816084446" onmouseenter="enter('9220844322816084446');" onmouseout="out('9220844322816084446');" style="">1711         } catch (ServiceException e) {                                                                   </span>
<span class="-8912377967087217182" onmouseenter="enter('-8912377967087217182');" onmouseout="out('-8912377967087217182');" style="">1712             if (e instanceof SecurityServiceException) {                                                 </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1713                 return false;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1714             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1715         }                                                                                                </span>
<span  style="">1716                                                                                                          </span>
<span class="3631252767096747840" onmouseenter="enter('3631252767096747840');" onmouseout="out('3631252767096747840');" style="">1717         final Class&lt;?&gt; entityClass = dynamicEntityDao.getImplClass(securityClassname);                   </span>
<span  style="">1718                                                                                                          </span>
<span class="-7591397042021229268" onmouseenter="enter('-7591397042021229268');" onmouseout="out('-7591397042021229268');" style="">1719         return duplicator.validate(entityClass, Long.valueOf(entityForm.getId())) &amp;&amp;                     </span>
<span class="5950039316725693002" onmouseenter="enter('5950039316725693002');" onmouseout="out('5950039316725693002');" style="">1720                 rowLevelSecurityService.canAdd(adminRemoteSecurityService.getPersistentAdminUser(),      </span>
<span class="-9091740986951777867" onmouseenter="enter('-9091740986951777867');" onmouseout="out('-9091740986951777867');" style="">1721                         securityClassname, cmd);                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1722     }                                                                                                    </span>
<span  style="">1723                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1724     /**                                                                                                  </span>
<span class="-8604925744257744736" onmouseenter="enter('-8604925744257744736');" onmouseout="out('-8604925744257744736');" style="">1725      * The given &lt;b&gt;entityForm&lt;/b&gt; is marked as readonly for the following cases:                        </span>
<span class="3244483720103844454" onmouseenter="enter('3244483720103844454');" onmouseout="out('3244483720103844454');" style="">1726      * &lt;ol&gt;                                                                                              </span>
<span class="8384568302593626864" onmouseenter="enter('8384568302593626864');" onmouseout="out('8384568302593626864');" style="">1727      *  &lt;li&gt;All of the properties from &lt;b&gt;cmd&lt;/b&gt; are readonly&lt;/b&gt;&lt;/li&gt;                                  </span>
<span class="3259494465539702713" onmouseenter="enter('3259494465539702713');" onmouseout="out('3259494465539702713');" style=""><abbr title="1728      *  &lt;li&gt;The user does not have the security to {@link EntityOperationType#UPDATE} the given class name represented by">1728      *  &lt;li&gt;The user does not have the security to {@link EntityOperationType#UPDATE} the given class namðŸ”µ</abbr></span>
<span class="8957232178890049809" onmouseenter="enter('8957232178890049809');" onmouseout="out('8957232178890049809');" style=""><abbr title="1729      *  the &lt;b&gt;entityForm&lt;/b&gt; (determined by {@link #getSecurityClassname(EntityForm, ClassMetadata)})&lt;/li&gt;">1729      *  the &lt;b&gt;entityForm&lt;/b&gt; (determined by {@link #getSecurityClassname(EntityForm, ClassMetadata)})&lt;/lðŸ”µ</abbr></span>
<span class="-661097031284754018" onmouseenter="enter('-661097031284754018');" onmouseout="out('-661097031284754018');" style=""><abbr title="1730      *  &lt;li&gt;The user does not have the security necessary to modify the given &lt;b&gt;entity&lt;/b&gt; according to the">1730      *  &lt;li&gt;The user does not have the security necessary to modify the given &lt;b&gt;entity&lt;/b&gt; according to ðŸ”µ</abbr></span>
<span class="1476257847894540357" onmouseenter="enter('1476257847894540357');" onmouseout="out('1476257847894540357');" style="">1731      *  {@link RowLevelSecurityService#canUpdate(AdminUser, Entity)}&lt;/li&gt;                                </span>
<span class="6987349732947823565" onmouseenter="enter('6987349732947823565');" onmouseout="out('6987349732947823565');" style="">1732      * &lt;/ol&gt;                                                                                             </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1733      *                                                                                                   </span>
<span class="-8102393608813481146" onmouseenter="enter('-8102393608813481146');" onmouseout="out('-8102393608813481146');" style="">1734      * @param entityForm the form being generated                                                        </span>
<span class="-5184866399254269391" onmouseenter="enter('-5184866399254269391');" onmouseout="out('-5184866399254269391');" style="">1735      * @param cmd the metatadata used to build the &lt;b&gt;entityForm&lt;/b&gt; for the &lt;b&gt;entity&lt;/b&gt;               </span>
<span class="-6994238295290465877" onmouseenter="enter('-6994238295290465877');" onmouseout="out('-6994238295290465877');" style="">1736      * @param entity the entity being edited                                                             </span>
<span class="-8891442921277557778" onmouseenter="enter('-8891442921277557778');" onmouseout="out('-8891442921277557778');" style="">1737      * @see {@link SecurityVerifier#securityCheck(String, EntityOperationType)}                          </span>
<span class="-3828641031793918168" onmouseenter="enter('-3828641031793918168');" onmouseout="out('-3828641031793918168');" style="">1738      * @see {@link #getSecurityClassname(EntityForm, ClassMetadata)}                                     </span>
<span class="3340343931427513832" onmouseenter="enter('3340343931427513832');" onmouseout="out('3340343931427513832');" style="">1739      * @see {@link RowLevelSecurityService#canUpdate(AdminUser, Entity)}                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1740      */                                                                                                  </span>
<span class="7475800010460682445" onmouseenter="enter('7475800010460682445');" onmouseout="out('7475800010460682445');" style="">1741     protected void setReadOnlyState(EntityForm entityForm, ClassMetadata cmd, Entity entity) {           </span>
<span class="-3754358688511165958" onmouseenter="enter('-3754358688511165958');" onmouseout="out('-3754358688511165958');" style="">1742         boolean readOnly = true;                                                                         </span>
<span  style="">1743                                                                                                          </span>
<span class="-2305007204320036324" onmouseenter="enter('-2305007204320036324');" onmouseout="out('-2305007204320036324');" style="">1744         // If all of the fields are read only, we&#x27;ll mark the form as such                               </span>
<span class="-3497335608114491506" onmouseenter="enter('-3497335608114491506');" onmouseout="out('-3497335608114491506');" style="">1745         for (Property property : cmd.getProperties()) {                                                  </span>
<span class="-5795738539482972481" onmouseenter="enter('-5795738539482972481');" onmouseout="out('-5795738539482972481');" style="">1746             FieldMetadata fieldMetadata = property.getMetadata();                                        </span>
<span class="-638676474141600706" onmouseenter="enter('-638676474141600706');" onmouseout="out('-638676474141600706');" style="">1747             if (fieldMetadata instanceof BasicFieldMetadata) {                                           </span>
<span class="-3122303192863427007" onmouseenter="enter('-3122303192863427007');" onmouseout="out('-3122303192863427007');" style=""><abbr title="1748                 readOnly = ((BasicFieldMetadata) fieldMetadata).getReadOnly() != null &amp;&amp; ((BasicFieldMetadata) fieldMetadata).getReadOnly();">1748                 readOnly = ((BasicFieldMetadata) fieldMetadata).getReadOnly() != null &amp;&amp; ((BasicFieldMetaðŸ”µ</abbr></span>
<span class="2916396140375617365" onmouseenter="enter('2916396140375617365');" onmouseout="out('2916396140375617365');" style="">1749                 if (!readOnly) {                                                                         </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1750                     break;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1751                 }                                                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1752             } else {                                                                                     </span>
<span class="2490832096811631077" onmouseenter="enter('2490832096811631077');" onmouseout="out('2490832096811631077');" style="">1753                 readOnly = ((CollectionMetadata) fieldMetadata).isMutable();                             </span>
<span class="2916396140375617365" onmouseenter="enter('2916396140375617365');" onmouseout="out('2916396140375617365');" style="">1754                 if (!readOnly) {                                                                         </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1755                     break;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1756                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1757             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1758         }                                                                                                </span>
<span  style="">1759                                                                                                          </span>
<span class="2916396140375617365" onmouseenter="enter('2916396140375617365');" onmouseout="out('2916396140375617365');" style="">1760         if (!readOnly) {                                                                                 </span>
<span class="8591967978504453740" onmouseenter="enter('8591967978504453740');" onmouseout="out('8591967978504453740');" style=""><abbr title="1761             // If the user does not have edit permissions, we will go ahead and make the form read only to prevent confusion">1761             // If the user does not have edit permissions, we will go ahead and make the form read only tðŸ”µ</abbr></span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1762             try {                                                                                        </span>
<span class="5476366109962905346" onmouseenter="enter('5476366109962905346');" onmouseout="out('5476366109962905346');" style="">1763                 String securityEntityClassname = getSecurityClassname(entityForm, cmd);                  </span>
<span class="7305757249405162956" onmouseenter="enter('7305757249405162956');" onmouseout="out('7305757249405162956');" style=""><abbr title="1764                 adminRemoteSecurityService.securityCheck(securityEntityClassname, EntityOperationType.UPDATE);">1764                 adminRemoteSecurityService.securityCheck(securityEntityClassname, EntityOperationType.UPDðŸ”µ</abbr></span>
<span class="9220844322816084446" onmouseenter="enter('9220844322816084446');" onmouseout="out('9220844322816084446');" style="">1765             } catch (ServiceException e) {                                                               </span>
<span class="-8912377967087217182" onmouseenter="enter('-8912377967087217182');" onmouseout="out('-8912377967087217182');" style="">1766                 if (e instanceof SecurityServiceException) {                                             </span>
<span class="6120466793575593078" onmouseenter="enter('6120466793575593078');" onmouseout="out('6120466793575593078');" style="">1767                     readOnly = true;                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1768                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1769             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1770         }                                                                                                </span>
<span  style="">1771                                                                                                          </span>
<span class="-2506720598607900340" onmouseenter="enter('-2506720598607900340');" onmouseout="out('-2506720598607900340');" style=""><abbr title="1772         // if the normal admin security service has not deemed this readonly and the all of the properties on the entity">1772         // if the normal admin security service has not deemed this readonly and the all of the propertieðŸ”µ</abbr></span>
<span class="-360101994104390021" onmouseenter="enter('-360101994104390021');" onmouseout="out('-360101994104390021');" style="">1773         // are not readonly, then check the row-level security                                           </span>
<span class="2916396140375617365" onmouseenter="enter('2916396140375617365');" onmouseout="out('2916396140375617365');" style="">1774         if (!readOnly) {                                                                                 </span>
<span class="7094483165734488508" onmouseenter="enter('7094483165734488508');" onmouseout="out('7094483165734488508');" style=""><abbr title="1775             readOnly = !rowLevelSecurityService.canUpdate(adminRemoteSecurityService.getPersistentAdminUser(), entity);">1775             readOnly = !rowLevelSecurityService.canUpdate(adminRemoteSecurityService.getPersistentAdminUsðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1776         }                                                                                                </span>
<span  style="">1777                                                                                                          </span>
<span class="7378462715957185244" onmouseenter="enter('7378462715957185244');" onmouseout="out('7378462715957185244');" style="">1778         if (readOnly) {                                                                                  </span>
<span class="7356620202531041753" onmouseenter="enter('7356620202531041753');" onmouseout="out('7356620202531041753');" style="">1779             entityForm.setReadOnly();                                                                    </span>
<span class="-1010311312628539836" onmouseenter="enter('-1010311312628539836');" onmouseout="out('-1010311312628539836');" style=""><abbr title="1780             //If someone has replaced RowLevelSecurityService, check here to make sure the replacement implements the expected interface">1780             //If someone has replaced RowLevelSecurityService, check here to make sure the replacement imðŸ”µ</abbr></span>
<span class="8968842492276656547" onmouseenter="enter('8968842492276656547');" onmouseout="out('8968842492276656547');" style="">1781             if (rowLevelSecurityService instanceof ExceptionAwareRowLevelSecurityProvider) {             </span>
<span class="2057574043580690918" onmouseenter="enter('2057574043580690918');" onmouseout="out('2057574043580690918');" style=""><abbr title="1782                 EntityFormModifierConfiguration entityFormModifierConfiguration = ((ExceptionAwareRowLevelSecurityProvider) rowLevelSecurityService).getUpdateDenialExceptions();">1782                 EntityFormModifierConfiguration entityFormModifierConfiguration = ((ExceptionAwareRowLeveðŸ”µ</abbr></span>
<span class="-3023990582845647391" onmouseenter="enter('-3023990582845647391');" onmouseout="out('-3023990582845647391');" style=""><abbr title="1783                 for (EntityFormModifierData&lt;EntityFormModifierDataPoint&gt; data : entityFormModifierConfiguration.getData()) {">1783                 for (EntityFormModifierData&lt;EntityFormModifierDataPoint&gt; data : entityFormModifierConfiguðŸ”µ</abbr></span>
<span class="9148632731325481398" onmouseenter="enter('9148632731325481398');" onmouseout="out('9148632731325481398');" style="">1784                     for (EntityFormModifier modifier : entityFormModifierConfiguration.getModifier()) {  </span>
<span class="7131836139928065231" onmouseenter="enter('7131836139928065231');" onmouseout="out('7131836139928065231');" style="">1785                         if (modifier.isQualified(data.getModifierType())) {                              </span>
<span class="-3482148637742284796" onmouseenter="enter('-3482148637742284796');" onmouseout="out('-3482148637742284796');" style="">1786                             modifier.modifyEntityForm(new EntityFormModifierRequest()                    </span>
<span class="8232027775022174594" onmouseenter="enter('8232027775022174594');" onmouseout="out('8232027775022174594');" style="">1787                                     .withEntityForm(entityForm)                                          </span>
<span class="-1014541830042934633" onmouseenter="enter('-1014541830042934633');" onmouseout="out('-1014541830042934633');" style="">1788                                     .withConfiguration(data)                                             </span>
<span class="-7538620272607121359" onmouseenter="enter('-7538620272607121359');" onmouseout="out('-7538620272607121359');" style="">1789                                     .withCurrentUser(adminRemoteSecurityService.getPersistentAdminUser())</span>
<span class="-2471313258794916634" onmouseenter="enter('-2471313258794916634');" onmouseout="out('-2471313258794916634');" style="">1790                                     .withEntity(entity)                                                  </span>
<span class="680994463596247300" onmouseenter="enter('680994463596247300');" onmouseout="out('680994463596247300');" style="">1791                                     .withRowLevelSecurityService(rowLevelSecurityService));              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1792                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1793                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1794                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1795             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1796         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1797     }                                                                                                    </span>
<span  style="">1798                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1799     /**                                                                                                  </span>
<span class="4825906517632270050" onmouseenter="enter('4825906517632270050');" onmouseout="out('4825906517632270050');" style="">1800      * Obtains the class name suitable for passing along to the {@link SecurityVerifier}                 </span>
<span class="-4758509257574949373" onmouseenter="enter('-4758509257574949373');" onmouseout="out('-4758509257574949373');" style="">1801      * @param entityForm                                                                                 </span>
<span class="3340688165449077744" onmouseenter="enter('3340688165449077744');" onmouseout="out('3340688165449077744');" style="">1802      * @param cmd                                                                                        </span>
<span class="-9165797340485297481" onmouseenter="enter('-9165797340485297481');" onmouseout="out('-9165797340485297481');" style="">1803      * @return                                                                                           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1804      */                                                                                                  </span>
<span class="-4629711814814156723" onmouseenter="enter('-4629711814814156723');" onmouseout="out('-4629711814814156723');" style="">1805     protected String getSecurityClassname(EntityForm entityForm, ClassMetadata cmd) {                    </span>
<span class="-6496925357216982154" onmouseenter="enter('-6496925357216982154');" onmouseout="out('-6496925357216982154');" style="">1806         String securityEntityClassname = entityForm.getCeilingEntityClassname();                         </span>
<span  style="">1807                                                                                                          </span>
<span class="-7034725187183815217" onmouseenter="enter('-7034725187183815217');" onmouseout="out('-7034725187183815217');" style="">1808         if (!StringUtils.isEmpty(cmd.getSecurityCeilingType())) {                                        </span>
<span class="5083723888191082683" onmouseenter="enter('5083723888191082683');" onmouseout="out('5083723888191082683');" style="">1809             securityEntityClassname = cmd.getSecurityCeilingType();                                      </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1810         } else {                                                                                         </span>
<span class="7913947527267397417" onmouseenter="enter('7913947527267397417');" onmouseout="out('7913947527267397417');" style="">1811             if (entityForm.getDynamicFormInfos() != null) {                                              </span>
<span class="7790362624567421850" onmouseenter="enter('7790362624567421850');" onmouseout="out('7790362624567421850');" style="">1812                 for (DynamicEntityFormInfo info : entityForm.getDynamicFormInfos().values()) {           </span>
<span class="-1917944725928650662" onmouseenter="enter('-1917944725928650662');" onmouseout="out('-1917944725928650662');" style="">1813                     if (!StringUtils.isEmpty(info.getSecurityCeilingClassName())) {                      </span>
<span class="4842268456536900985" onmouseenter="enter('4842268456536900985');" onmouseout="out('4842268456536900985');" style="">1814                         securityEntityClassname = info.getSecurityCeilingClassName();                    </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1815                         break;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1816                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1817                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1818             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1819         }                                                                                                </span>
<span  style="">1820                                                                                                          </span>
<span class="-4632494495444562964" onmouseenter="enter('-4632494495444562964');" onmouseout="out('-4632494495444562964');" style="">1821         return securityEntityClassname;                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1822     }                                                                                                    </span>
<span  style="">1823                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1824     @Override                                                                                            </span>
<span class="-2624998369196687024" onmouseenter="enter('-2624998369196687024');" onmouseout="out('-2624998369196687024');" style="">1825     public void populateEntityFormFields(EntityForm ef, Entity entity) {                                 </span>
<span class="-5366055867936531883" onmouseenter="enter('-5366055867936531883');" onmouseout="out('-5366055867936531883');" style="">1826         populateEntityFormFields(ef, entity, true, true);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1827     }                                                                                                    </span>
<span  style="">1828                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1829     @Override                                                                                            </span>
<span class="-6740512050797749179" onmouseenter="enter('-6740512050797749179');" onmouseout="out('-6740512050797749179');" style=""><abbr title="1830     public void populateEntityFormFields(EntityForm ef, Entity entity, boolean populateType, boolean populateId) {">1830     public void populateEntityFormFields(EntityForm ef, Entity entity, boolean populateType, boolean popuðŸ”µ</abbr></span>
<span class="-8844360907694676103" onmouseenter="enter('-8844360907694676103');" onmouseout="out('-8844360907694676103');" style="">1831         if (populateId) {                                                                                </span>
<span class="-5951790405273252562" onmouseenter="enter('-5951790405273252562');" onmouseout="out('-5951790405273252562');" style="">1832             ef.setId(entity.findProperty(ef.getIdProperty()).getValue());                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1833         }                                                                                                </span>
<span class="6008447871872074898" onmouseenter="enter('6008447871872074898');" onmouseout="out('6008447871872074898');" style="">1834         if (populateType) {                                                                              </span>
<span class="2566657873931456162" onmouseenter="enter('2566657873931456162');" onmouseout="out('2566657873931456162');" style="">1835             ef.setEntityType(entity.getType()[0]);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1836         }                                                                                                </span>
<span  style="">1837                                                                                                          </span>
<span class="-4264420628414385505" onmouseenter="enter('-4264420628414385505');" onmouseout="out('-4264420628414385505');" style="">1838         for (Entry&lt;String, Field&gt; entry : ef.getFields().entrySet()) {                                   </span>
<span class="2420686282896377848" onmouseenter="enter('2420686282896377848');" onmouseout="out('2420686282896377848');" style="">1839             Property entityProp = entity.findProperty(entry.getKey());                                   </span>
<span class="-2366650903096921345" onmouseenter="enter('-2366650903096921345');" onmouseout="out('-2366650903096921345');" style="">1840             if (entityProp != null) {                                                                    </span>
<span class="-7617915495394948835" onmouseenter="enter('-7617915495394948835');" onmouseout="out('-7617915495394948835');" style="">1841                 entry.getValue().setValue(entityProp.getValue());                                        </span>
<span class="-4933731915633510416" onmouseenter="enter('-4933731915633510416');" onmouseout="out('-4933731915633510416');" style="">1842                 entry.getValue().setDisplayValue(entityProp.getDisplayValue());                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1843             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1844         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1845     }                                                                                                    </span>
<span  style="">1846                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1847     @Override                                                                                            </span>
<span class="8490818103305754450" onmouseenter="enter('8490818103305754450');" onmouseout="out('8490818103305754450');" style=""><abbr title="1848     public void populateAdornedEntityFormFields(EntityForm ef, Entity entity, AdornedTargetList adornedList) {">1848     public void populateAdornedEntityFormFields(EntityForm ef, Entity entity, AdornedTargetList adornedLiðŸ”µ</abbr></span>
<span class="-7724922710012225100" onmouseenter="enter('-7724922710012225100');" onmouseout="out('-7724922710012225100');" style=""><abbr title="1849         Field field = ef.findField(adornedList.getTargetObjectPath() + &quot;.&quot; + adornedList.getTargetIdProperty());">1849         Field field = ef.findField(adornedList.getTargetObjectPath() + &quot;.&quot; + adornedList.getTargetIdPropeðŸ”µ</abbr></span>
<span class="6683657094444632615" onmouseenter="enter('6683657094444632615');" onmouseout="out('6683657094444632615');" style="">1850         Property entityProp = entity.findProperty(ef.getIdProperty());                                   </span>
<span class="627899284580660581" onmouseenter="enter('627899284580660581');" onmouseout="out('627899284580660581');" style="">1851         field.setValue(entityProp.getValue());                                                           </span>
<span  style="">1852                                                                                                          </span>
<span class="2111689089149990625" onmouseenter="enter('2111689089149990625');" onmouseout="out('2111689089149990625');" style="">1853         if (StringUtils.isNotBlank(adornedList.getSortField())) {                                        </span>
<span class="6344948819160968120" onmouseenter="enter('6344948819160968120');" onmouseout="out('6344948819160968120');" style="">1854             field = ef.findField(adornedList.getSortField());                                            </span>
<span class="8964070033667700490" onmouseenter="enter('8964070033667700490');" onmouseout="out('8964070033667700490');" style="">1855             entityProp = entity.findProperty(adornedList.getSortField());                                </span>
<span class="-2263433618148702675" onmouseenter="enter('-2263433618148702675');" onmouseout="out('-2263433618148702675');" style="">1856             if (field != null &amp;&amp; entityProp != null) {                                                   </span>
<span class="627899284580660581" onmouseenter="enter('627899284580660581');" onmouseout="out('627899284580660581');" style="">1857                 field.setValue(entityProp.getValue());                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1858             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1859         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1860     }                                                                                                    </span>
<span  style="">1861                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1862     @Override                                                                                            </span>
<span class="8114269508855532827" onmouseenter="enter('8114269508855532827');" onmouseout="out('8114269508855532827');" style="">1863     public void populateMapEntityFormFields(EntityForm ef, Entity entity) {                              </span>
<span class="4628483460047019115" onmouseenter="enter('4628483460047019115');" onmouseout="out('4628483460047019115');" style="">1864         Field field = ef.findField(&quot;priorKey&quot;);                                                          </span>
<span class="263056657127968906" onmouseenter="enter('263056657127968906');" onmouseout="out('263056657127968906');" style="">1865         Property entityProp = entity.findProperty(&quot;key&quot;);                                                </span>
<span class="-2263433618148702675" onmouseenter="enter('-2263433618148702675');" onmouseout="out('-2263433618148702675');" style="">1866         if (field != null &amp;&amp; entityProp != null) {                                                       </span>
<span class="627899284580660581" onmouseenter="enter('627899284580660581');" onmouseout="out('627899284580660581');" style="">1867             field.setValue(entityProp.getValue());                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1868         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1869     }                                                                                                    </span>
<span  style="">1870                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1871     @Override                                                                                            </span>
<span class="150942895693350371" onmouseenter="enter('150942895693350371');" onmouseout="out('150942895693350371');" style=""><abbr title="1872     public EntityForm buildAdornedListForm(AdornedTargetCollectionMetadata adornedMd, AdornedTargetList adornedList,">1872     public EntityForm buildAdornedListForm(AdornedTargetCollectionMetadata adornedMd, AdornedTargetList aðŸ”µ</abbr></span>
<span class="12000407411688948" onmouseenter="enter('12000407411688948');" onmouseout="out('12000407411688948');" style=""><abbr title="1873             String parentId, boolean isViewCollectionItem, List&lt;SectionCrumb&gt; sectionCrumbs, boolean isAdd)">1873             String parentId, boolean isViewCollectionItem, List&lt;SectionCrumb&gt; sectionCrumbs, boolean isAdðŸ”µ</abbr></span>
<span class="1998458335829271558" onmouseenter="enter('1998458335829271558');" onmouseout="out('1998458335829271558');" style="">1874             throws ServiceException {                                                                    </span>
<span class="7440011096899970462" onmouseenter="enter('7440011096899970462');" onmouseout="out('7440011096899970462');" style="">1875         EntityForm ef = createStandardAdornedEntityForm();                                               </span>
<span class="3191357523588163011" onmouseenter="enter('3191357523588163011');" onmouseout="out('3191357523588163011');" style=""><abbr title="1876         return buildAdornedListForm(adornedMd, adornedList, parentId, isViewCollectionItem, ef, sectionCrumbs, isAdd);">1876         return buildAdornedListForm(adornedMd, adornedList, parentId, isViewCollectionItem, ef, sectionCrðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1877     }                                                                                                    </span>
<span  style="">1878                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1879     @Override                                                                                            </span>
<span class="150942895693350371" onmouseenter="enter('150942895693350371');" onmouseout="out('150942895693350371');" style=""><abbr title="1880     public EntityForm buildAdornedListForm(AdornedTargetCollectionMetadata adornedMd, AdornedTargetList adornedList,">1880     public EntityForm buildAdornedListForm(AdornedTargetCollectionMetadata adornedMd, AdornedTargetList aðŸ”µ</abbr></span>
<span class="3984058849831877067" onmouseenter="enter('3984058849831877067');" onmouseout="out('3984058849831877067');" style=""><abbr title="1881             String parentId, boolean isViewCollectionItem, EntityForm ef, List&lt;SectionCrumb&gt; sectionCrumbs, boolean isAdd)">1881             String parentId, boolean isViewCollectionItem, EntityForm ef, List&lt;SectionCrumb&gt; sectionCrumbðŸ”µ</abbr></span>
<span class="1998458335829271558" onmouseenter="enter('1998458335829271558');" onmouseout="out('1998458335829271558');" style="">1882             throws ServiceException {                                                                    </span>
<span class="2447703614414495939" onmouseenter="enter('2447703614414495939');" onmouseout="out('2447703614414495939');" style="">1883         ef.setEntityType(adornedList.getAdornedTargetEntityClassname());                                 </span>
<span  style="">1884                                                                                                          </span>
<span class="-5881575004956694509" onmouseenter="enter('-5881575004956694509');" onmouseout="out('-5881575004956694509');" style="">1885         // Get the metadata for this adorned field                                                       </span>
<span class="-3021134083097680634" onmouseenter="enter('-3021134083097680634');" onmouseout="out('-3021134083097680634');" style="">1886         PersistencePackageRequest request = PersistencePackageRequest.adorned()                          </span>
<span class="-7461338641125591711" onmouseenter="enter('-7461338641125591711');" onmouseout="out('-7461338641125591711');" style="">1887                 .withCeilingEntityClassname(adornedMd.getCollectionCeilingEntity())                      </span>
<span class="5166488781691104787" onmouseenter="enter('5166488781691104787');" onmouseout="out('5166488781691104787');" style="">1888                 .withAdornedList(adornedList)                                                            </span>
<span class="6300132115435073341" onmouseenter="enter('6300132115435073341');" onmouseout="out('6300132115435073341');" style="">1889                 .withSectionCrumbs(sectionCrumbs);                                                       </span>
<span class="-6327467589468547459" onmouseenter="enter('-6327467589468547459');" onmouseout="out('-6327467589468547459');" style="">1890         request.setAddOperationInspect(isAdd);                                                           </span>
<span class="8129278729958971412" onmouseenter="enter('8129278729958971412');" onmouseout="out('8129278729958971412');" style=""><abbr title="1891         ClassMetadata collectionMetadata = adminEntityService.getClassMetadata(request).getDynamicResultSet().getClassMetaData();">1891         ClassMetadata collectionMetadata = adminEntityService.getClassMetadata(request).getDynamicResultSðŸ”µ</abbr></span>
<span  style="">1892                                                                                                          </span>
<span class="-4937065852383367448" onmouseenter="enter('-4937065852383367448');" onmouseout="out('-4937065852383367448');" style="">1893         List&lt;Property&gt; entityFormProperties = new ArrayList&lt;&gt;();                                         </span>
<span class="9162843466163784659" onmouseenter="enter('9162843466163784659');" onmouseout="out('9162843466163784659');" style="">1894         if (isViewCollectionItem) {                                                                      </span>
<span class="-6444196324035087919" onmouseenter="enter('-6444196324035087919');" onmouseout="out('-6444196324035087919');" style="">1895             Collections.addAll(entityFormProperties, collectionMetadata.getProperties());                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1896         } else {                                                                                         </span>
<span class="8165943161441555593" onmouseenter="enter('8165943161441555593');" onmouseout="out('8165943161441555593');" style="">1897             // We want our entity form to only render the maintained adorned target fields               </span>
<span class="-6459504561228602972" onmouseenter="enter('-6459504561228602972');" onmouseout="out('-6459504561228602972');" style="">1898             for (String targetFieldName : adornedMd.getMaintainedAdornedTargetFields()) {                </span>
<span class="-5374323299509239162" onmouseenter="enter('-5374323299509239162');" onmouseout="out('-5374323299509239162');" style="">1899                 Property p = collectionMetadata.getPMap().get(targetFieldName);                          </span>
<span class="3623466133802910873" onmouseenter="enter('3623466133802910873');" onmouseout="out('3623466133802910873');" style=""><abbr title="1900                 if (p.getMetadata() instanceof BasicFieldMetadata &amp;&amp; BooleanUtils.isNotTrue( p.getMetadata().getExcluded())) {">1900                 if (p.getMetadata() instanceof BasicFieldMetadata &amp;&amp; BooleanUtils.isNotTrue( p.getMetadatðŸ”µ</abbr></span>
<span class="-8585934909139340387" onmouseenter="enter('-8585934909139340387');" onmouseout="out('-8585934909139340387');" style="">1901                     ((BasicFieldMetadata) p.getMetadata()).setVisibility(VisibilityEnum.VISIBLE_ALL);    </span>
<span class="-6393972713668288785" onmouseenter="enter('-6393972713668288785');" onmouseout="out('-6393972713668288785');" style="">1902                     entityFormProperties.add(p);                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1903                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1904             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1905         }                                                                                                </span>
<span  style="">1906                                                                                                          </span>
<span class="-1687272513553387314" onmouseenter="enter('-1687272513553387314');" onmouseout="out('-1687272513553387314');" style="">1907         // Set the maintained fields on the form                                                         </span>
<span class="6598971975233417362" onmouseenter="enter('6598971975233417362');" onmouseout="out('6598971975233417362');" style="">1908         setEntityFormFields(collectionMetadata, ef, entityFormProperties);                               </span>
<span  style="">1909                                                                                                          </span>
<span class="7903383611177038089" onmouseenter="enter('7903383611177038089');" onmouseout="out('7903383611177038089');" style="">1910         // Add these two additional hidden fields that are required for persistence                      </span>
<span class="-6303462610985739492" onmouseenter="enter('-6303462610985739492');" onmouseout="out('-6303462610985739492');" style="">1911         Field f = new Field()                                                                            </span>
<span class="-7418437452692570792" onmouseenter="enter('-7418437452692570792');" onmouseout="out('-7418437452692570792');" style="">1912                 .withName(adornedList.getLinkedObjectPath() + &quot;.&quot; + adornedList.getLinkedIdProperty())   </span>
<span class="8578132396126170845" onmouseenter="enter('8578132396126170845');" onmouseout="out('8578132396126170845');" style="">1913                 .withFieldType(SupportedFieldType.HIDDEN.toString())                                     </span>
<span class="3333593611580125868" onmouseenter="enter('3333593611580125868');" onmouseout="out('3333593611580125868');" style="">1914                 .withValue(parentId);                                                                    </span>
<span class="-6955921800298195002" onmouseenter="enter('-6955921800298195002');" onmouseout="out('-6955921800298195002');" style="">1915         ef.addHiddenField(collectionMetadata, f);                                                        </span>
<span  style="">1916                                                                                                          </span>
<span class="3649036859858659928" onmouseenter="enter('3649036859858659928');" onmouseout="out('3649036859858659928');" style="">1917         f = new Field()                                                                                  </span>
<span class="-8965183336188726297" onmouseenter="enter('-8965183336188726297');" onmouseout="out('-8965183336188726297');" style="">1918                 .withName(adornedList.getTargetObjectPath() + &quot;.&quot; + adornedList.getTargetIdProperty())   </span>
<span class="8578132396126170845" onmouseenter="enter('8578132396126170845');" onmouseout="out('8578132396126170845');" style="">1919                 .withFieldType(SupportedFieldType.HIDDEN.toString())                                     </span>
<span class="9105828036023594182" onmouseenter="enter('9105828036023594182');" onmouseout="out('9105828036023594182');" style="">1920                 .withIdOverride(&quot;adornedTargetIdProperty&quot;);                                              </span>
<span class="-6955921800298195002" onmouseenter="enter('-6955921800298195002');" onmouseout="out('-6955921800298195002');" style="">1921         ef.addHiddenField(collectionMetadata, f);                                                        </span>
<span  style="">1922                                                                                                          </span>
<span class="2111689089149990625" onmouseenter="enter('2111689089149990625');" onmouseout="out('2111689089149990625');" style="">1923         if (StringUtils.isNotBlank(adornedList.getSortField())) {                                        </span>
<span class="3649036859858659928" onmouseenter="enter('3649036859858659928');" onmouseout="out('3649036859858659928');" style="">1924             f = new Field()                                                                              </span>
<span class="-8039081797246474990" onmouseenter="enter('-8039081797246474990');" onmouseout="out('-8039081797246474990');" style="">1925                     .withName(adornedList.getSortField())                                                </span>
<span class="-2458072313875538806" onmouseenter="enter('-2458072313875538806');" onmouseout="out('-2458072313875538806');" style="">1926                     .withFieldType(SupportedFieldType.HIDDEN.toString());                                </span>
<span class="-6955921800298195002" onmouseenter="enter('-6955921800298195002');" onmouseout="out('-6955921800298195002');" style="">1927             ef.addHiddenField(collectionMetadata, f);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1928         }                                                                                                </span>
<span  style="">1929                                                                                                          </span>
<span class="-8148842246743906492" onmouseenter="enter('-8148842246743906492');" onmouseout="out('-8148842246743906492');" style="">1930         ef.setParentId(parentId);                                                                        </span>
<span  style="">1931                                                                                                          </span>
<span class="-9084846840215869888" onmouseenter="enter('-9084846840215869888');" onmouseout="out('-9084846840215869888');" style="">1932         extensionManager.getProxy().addAdditionalAdornedFormActions(ef);                                 </span>
<span  style="">1933                                                                                                          </span>
<span class="3260120157565581788" onmouseenter="enter('3260120157565581788');" onmouseout="out('3260120157565581788');" style="">1934         return ef;                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1935     }                                                                                                    </span>
<span  style="">1936                                                                                                          </span>
<span  style="">1937                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1938     @Override                                                                                            </span>
<span class="5776955838632823841" onmouseenter="enter('5776955838632823841');" onmouseout="out('5776955838632823841');" style=""><abbr title="1939     public EntityForm buildMapForm(MapMetadata mapMd, final MapStructure mapStructure, ClassMetadata cmd, String parentId)">1939     public EntityForm buildMapForm(MapMetadata mapMd, final MapStructure mapStructure, ClassMetadata cmd,ðŸ”µ</abbr></span>
<span class="1998458335829271558" onmouseenter="enter('1998458335829271558');" onmouseout="out('1998458335829271558');" style="">1940             throws ServiceException {                                                                    </span>
<span class="-438894394526699599" onmouseenter="enter('-438894394526699599');" onmouseout="out('-438894394526699599');" style="">1941         EntityForm ef = createStandardEntityForm();                                                      </span>
<span class="-4383087068394560961" onmouseenter="enter('-4383087068394560961');" onmouseout="out('-4383087068394560961');" style="">1942         return buildMapForm(mapMd, mapStructure, cmd, parentId, ef);                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1943     }                                                                                                    </span>
<span  style="">1944                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1945     @Override                                                                                            </span>
<span class="5263214445094463474" onmouseenter="enter('5263214445094463474');" onmouseout="out('5263214445094463474');" style=""><abbr title="1946     public EntityForm buildMapForm(MapMetadata mapMd, final MapStructure mapStructure, ClassMetadata cmd, String parentId, EntityForm ef)">1946     public EntityForm buildMapForm(MapMetadata mapMd, final MapStructure mapStructure, ClassMetadata cmd,ðŸ”µ</abbr></span>
<span class="1998458335829271558" onmouseenter="enter('1998458335829271558');" onmouseout="out('1998458335829271558');" style="">1947             throws ServiceException {                                                                    </span>
<span class="-8196381047300571419" onmouseenter="enter('-8196381047300571419');" onmouseout="out('-8196381047300571419');" style="">1948         ForeignKey foreignKey = (ForeignKey) mapMd.getPersistencePerspective()                           </span>
<span class="2694724777125959806" onmouseenter="enter('2694724777125959806');" onmouseout="out('2694724777125959806');" style="">1949                 .getPersistencePerspectiveItems().get(PersistencePerspectiveItemType.FOREIGNKEY);        </span>
<span class="-8152084553040114228" onmouseenter="enter('-8152084553040114228');" onmouseout="out('-8152084553040114228');" style="">1950         ef.setEntityType(foreignKey.getForeignKeyClass());                                               </span>
<span  style="">1951                                                                                                          </span>
<span class="2487263286005872069" onmouseenter="enter('2487263286005872069');" onmouseout="out('2487263286005872069');" style="">1952         Field keyField;                                                                                  </span>
<span class="8316613165925765769" onmouseenter="enter('8316613165925765769');" onmouseout="out('8316613165925765769');" style="">1953         if (!mapMd.getForceFreeFormKeys()) {                                                             </span>
<span class="4124947245467994317" onmouseenter="enter('4124947245467994317');" onmouseout="out('4124947245467994317');" style="">1954             // We will use a combo field to render the key choices                                       </span>
<span class="-1866848638996018677" onmouseenter="enter('-1866848638996018677');" onmouseout="out('-1866848638996018677');" style="">1955             ComboField temp = new ComboField();                                                          </span>
<span class="-6555255150639106657" onmouseenter="enter('-6555255150639106657');" onmouseout="out('-6555255150639106657');" style="">1956             temp.withName(&quot;key&quot;)                                                                         </span>
<span class="1841760667801252277" onmouseenter="enter('1841760667801252277');" onmouseout="out('1841760667801252277');" style="">1957                     .withFieldType(&quot;combo_field&quot;)                                                        </span>
<span class="-5198779959493179668" onmouseenter="enter('-5198779959493179668');" onmouseout="out('-5198779959493179668');" style="">1958                     .withFriendlyName(mapStructure.getKeyPropertyFriendlyName());                        </span>
<span class="3287055582339576619" onmouseenter="enter('3287055582339576619');" onmouseout="out('3287055582339576619');" style="">1959             if (mapMd.getKeys() != null) {                                                               </span>
<span class="-6322095491178263556" onmouseenter="enter('-6322095491178263556');" onmouseout="out('-6322095491178263556');" style="">1960                 // The keys can be explicitly set in the annotation...                                   </span>
<span class="-7850108399679610719" onmouseenter="enter('-7850108399679610719');" onmouseout="out('-7850108399679610719');" style="">1961                 temp.setOptions(mapMd.getKeys());                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1962             } else {                                                                                     </span>
<span class="7036564945591495423" onmouseenter="enter('7036564945591495423');" onmouseout="out('7036564945591495423');" style="">1963                 // Or they could be based on a different entity                                          </span>
<span class="2943675610735544566" onmouseenter="enter('2943675610735544566');" onmouseout="out('2943675610735544566');" style="">1964                 PersistencePackageRequest ppr = PersistencePackageRequest.standard()                     </span>
<span class="-7233152391809010418" onmouseenter="enter('-7233152391809010418');" onmouseout="out('-7233152391809010418');" style="">1965                         .withCeilingEntityClassname(mapMd.getMapKeyOptionEntityClass());                 </span>
<span  style="">1966                                                                                                          </span>
<span class="-4077831550260994387" onmouseenter="enter('-4077831550260994387');" onmouseout="out('-4077831550260994387');" style="">1967                 DynamicResultSet drs = adminEntityService.getRecords(ppr).getDynamicResultSet();         </span>
<span  style="">1968                                                                                                          </span>
<span class="5306875073536616661" onmouseenter="enter('5306875073536616661');" onmouseout="out('5306875073536616661');" style="">1969                 for (Entity entity : drs.getRecords()) {                                                 </span>
<span class="-6641717520052480574" onmouseenter="enter('-6641717520052480574');" onmouseout="out('-6641717520052480574');" style=""><abbr title="1970                     String keyValue = entity.getPMap().get(mapMd.getMapKeyOptionEntityValueField()).getValue();">1970                     String keyValue = entity.getPMap().get(mapMd.getMapKeyOptionEntityValueField()).getVaðŸ”µ</abbr></span>
<span class="1998582968522880029" onmouseenter="enter('1998582968522880029');" onmouseout="out('1998582968522880029');" style=""><abbr title="1971                     String keyDisplayValue = entity.getPMap().get(mapMd.getMapKeyOptionEntityDisplayField()).getValue();">1971                     String keyDisplayValue = entity.getPMap().get(mapMd.getMapKeyOptionEntityDisplayFieldðŸ”µ</abbr></span>
<span class="-6645431312205396504" onmouseenter="enter('-6645431312205396504');" onmouseout="out('-6645431312205396504');" style="">1972                     temp.putOption(keyValue, keyDisplayValue);                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1973                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1974             }                                                                                            </span>
<span class="3546270200362241310" onmouseenter="enter('3546270200362241310');" onmouseout="out('3546270200362241310');" style="">1975             keyField = temp;                                                                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1976         } else {                                                                                         </span>
<span class="-8573842998963738304" onmouseenter="enter('-8573842998963738304');" onmouseout="out('-8573842998963738304');" style="">1977             keyField = new Field().withName(&quot;key&quot;)                                                       </span>
<span class="7310006641400837736" onmouseenter="enter('7310006641400837736');" onmouseout="out('7310006641400837736');" style="">1978                                 .withFieldType(SupportedFieldType.STRING.toString())                     </span>
<span class="-5198779959493179668" onmouseenter="enter('-5198779959493179668');" onmouseout="out('-5198779959493179668');" style="">1979                                 .withFriendlyName(mapStructure.getKeyPropertyFriendlyName());            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1980         }                                                                                                </span>
<span class="7153206597057282580" onmouseenter="enter('7153206597057282580');" onmouseout="out('7153206597057282580');" style="">1981         keyField.setRequired(true);                                                                      </span>
<span class="6962995846651568894" onmouseenter="enter('6962995846651568894');" onmouseout="out('6962995846651568894');" style="">1982         ef.addMapKeyField(cmd, keyField);                                                                </span>
<span  style="">1983                                                                                                          </span>
<span class="-1847798595136835783" onmouseenter="enter('-1847798595136835783');" onmouseout="out('-1847798595136835783');" style="">1984         // Set the fields for this form                                                                  </span>
<span class="4702227326769048309" onmouseenter="enter('4702227326769048309');" onmouseout="out('4702227326769048309');" style="">1985         List&lt;Property&gt; mapFormProperties;                                                                </span>
<span class="-3881724092572027053" onmouseenter="enter('-3881724092572027053');" onmouseout="out('-3881724092572027053');" style="">1986         if (mapMd.isSimpleValue()) {                                                                     </span>
<span class="7835835150562546154" onmouseenter="enter('7835835150562546154');" onmouseout="out('7835835150562546154');" style="">1987             ef.setIdProperty(&quot;key&quot;);                                                                     </span>
<span class="7501966408885015423" onmouseenter="enter('7501966408885015423');" onmouseout="out('7501966408885015423');" style="">1988             mapFormProperties = new ArrayList&lt;&gt;();                                                       </span>
<span class="1155137054745373714" onmouseenter="enter('1155137054745373714');" onmouseout="out('1155137054745373714');" style="">1989             Property valueProp = cmd.getPMap().get(&quot;value&quot;);                                             </span>
<span class="4126012312120971947" onmouseenter="enter('4126012312120971947');" onmouseout="out('4126012312120971947');" style="">1990             mapFormProperties.add(valueProp);                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1991         } else {                                                                                         </span>
<span class="-200233704674088452" onmouseenter="enter('-200233704674088452');" onmouseout="out('-200233704674088452');" style="">1992             String valueClassName = mapStructure.getValueClassName();                                    </span>
<span class="4792123228934068864" onmouseenter="enter('4792123228934068864');" onmouseout="out('4792123228934068864');" style="">1993             List&lt;String&gt; classNames = getValueClassNames(valueClassName);                                </span>
<span  style="">1994                                                                                                          </span>
<span class="6736035458303245430" onmouseenter="enter('6736035458303245430');" onmouseout="out('6736035458303245430');" style="">1995             mapFormProperties = new ArrayList&lt;&gt;(Arrays.asList(cmd.getProperties()));                     </span>
<span class="-5375146325606190554" onmouseenter="enter('-5375146325606190554');" onmouseout="out('-5375146325606190554');" style="">1996             filterMapFormProperties(mapFormProperties, classNames);                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1997         }                                                                                                </span>
<span  style="">1998                                                                                                          </span>
<span class="-2821207520526953468" onmouseenter="enter('-2821207520526953468');" onmouseout="out('-2821207520526953468');" style="">1999         setEntityFormFields(cmd, ef, mapFormProperties);                                                 </span>
<span  style="">2000                                                                                                          </span>
<span class="-6303462610985739492" onmouseenter="enter('-6303462610985739492');" onmouseout="out('-6303462610985739492');" style="">2001         Field f = new Field()                                                                            </span>
<span class="4084107705668748282" onmouseenter="enter('4084107705668748282');" onmouseout="out('4084107705668748282');" style="">2002                 .withName(&quot;priorKey&quot;)                                                                    </span>
<span class="-2458072313875538806" onmouseenter="enter('-2458072313875538806');" onmouseout="out('-2458072313875538806');" style="">2003                 .withFieldType(SupportedFieldType.HIDDEN.toString());                                    </span>
<span class="-2135186019977572427" onmouseenter="enter('-2135186019977572427');" onmouseout="out('-2135186019977572427');" style="">2004         ef.addHiddenField(cmd, f);                                                                       </span>
<span  style="">2005                                                                                                          </span>
<span class="-8148842246743906492" onmouseenter="enter('-8148842246743906492');" onmouseout="out('-8148842246743906492');" style="">2006         ef.setParentId(parentId);                                                                        </span>
<span  style="">2007                                                                                                          </span>
<span class="3260120157565581788" onmouseenter="enter('3260120157565581788');" onmouseout="out('3260120157565581788');" style="">2008         return ef;                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2009     }                                                                                                    </span>
<span  style="">2010                                                                                                          </span>
<span class="-4829102623695042124" onmouseenter="enter('-4829102623695042124');" onmouseout="out('-4829102623695042124');" style="">2011     protected List&lt;String&gt; getValueClassNames(String valueClassName) {                                   </span>
<span class="636492465030384706" onmouseenter="enter('636492465030384706');" onmouseout="out('636492465030384706');" style="">2012         PersistenceManager pm = PersistenceManagerFactory.getPersistenceManager(valueClassName);         </span>
<span class="2246167872340129747" onmouseenter="enter('2246167872340129747');" onmouseout="out('2246167872340129747');" style="">2013         List&lt;String&gt; classNames = new ArrayList&lt;&gt;();                                                     </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">2014         try {                                                                                            </span>
<span class="3938321968230834834" onmouseenter="enter('3938321968230834834');" onmouseout="out('3938321968230834834');" style="">2015             Class&lt;?&gt;[] mapEntities = pm.getPolymorphicEntities(valueClassName);                          </span>
<span class="-4772743881626943892" onmouseenter="enter('-4772743881626943892');" onmouseout="out('-4772743881626943892');" style="">2016             for (Class clazz : mapEntities) {                                                            </span>
<span class="6466727849961562132" onmouseenter="enter('6466727849961562132');" onmouseout="out('6466727849961562132');" style="">2017                 classNames.add(clazz.getName());                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2018             }                                                                                            </span>
<span class="1054888787890391626" onmouseenter="enter('1054888787890391626');" onmouseout="out('1054888787890391626');" style="">2019         } catch (ClassNotFoundException e) {                                                             </span>
<span class="-942678047271525020" onmouseenter="enter('-942678047271525020');" onmouseout="out('-942678047271525020');" style="">2020             classNames.add(valueClassName);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2021         }                                                                                                </span>
<span class="-3648191997111592889" onmouseenter="enter('-3648191997111592889');" onmouseout="out('-3648191997111592889');" style="">2022         return classNames;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2023     }                                                                                                    </span>
<span  style="">2024                                                                                                          </span>
<span class="9085638029133270349" onmouseenter="enter('9085638029133270349');" onmouseout="out('9085638029133270349');" style=""><abbr title="2025     protected void filterMapFormProperties(List&lt;Property&gt; mapFormProperties, final List&lt;String&gt; classNames) {">2025     protected void filterMapFormProperties(List&lt;Property&gt; mapFormProperties, final List&lt;String&gt; classNameðŸ”µ</abbr></span>
<span class="-1689600506312159966" onmouseenter="enter('-1689600506312159966');" onmouseout="out('-1689600506312159966');" style="">2026         CollectionUtils.filter(mapFormProperties, new Predicate() {                                      </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">2027             @Override                                                                                    </span>
<span class="7760113550206984696" onmouseenter="enter('7760113550206984696');" onmouseout="out('7760113550206984696');" style="">2028             public boolean evaluate(Object object) {                                                     </span>
<span class="2621584028127774901" onmouseenter="enter('2621584028127774901');" onmouseout="out('2621584028127774901');" style="">2029                 Property p = (Property) object;                                                          </span>
<span class="5284872755288504872" onmouseenter="enter('5284872755288504872');" onmouseout="out('5284872755288504872');" style="">2030                 for (String availType : p.getMetadata().getAvailableToTypes()) {                         </span>
<span class="-1266753160152563645" onmouseenter="enter('-1266753160152563645');" onmouseout="out('-1266753160152563645');" style="">2031                     if (classNames.contains(availType)) {                                                </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">2032                         return true;                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2033                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2034                 }                                                                                        </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">2035                 return false;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2036             }                                                                                            </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">2037         });                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2038     }                                                                                                    </span>
<span  style="">2039                                                                                                          </span>
<span class="8263860057269155273" onmouseenter="enter('8263860057269155273');" onmouseout="out('8263860057269155273');" style="">2040     protected EntityForm createStandardEntityForm() {                                                    </span>
<span class="4163598687278852410" onmouseenter="enter('4163598687278852410');" onmouseout="out('4163598687278852410');" style="">2041         EntityForm ef = new EntityForm();                                                                </span>
<span class="-2237425030372835917" onmouseenter="enter('-2237425030372835917');" onmouseout="out('-2237425030372835917');" style="">2042         ef.addAction(DefaultEntityFormActions.SAVE);                                                     </span>
<span class="3260120157565581788" onmouseenter="enter('3260120157565581788');" onmouseout="out('3260120157565581788');" style="">2043         return ef;                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2044     }                                                                                                    </span>
<span  style="">2045                                                                                                          </span>
<span class="-7002137249022503423" onmouseenter="enter('-7002137249022503423');" onmouseout="out('-7002137249022503423');" style="">2046     protected EntityForm createStandardAdornedEntityForm() {                                             </span>
<span class="4163598687278852410" onmouseenter="enter('4163598687278852410');" onmouseout="out('4163598687278852410');" style="">2047         EntityForm ef = new EntityForm();                                                                </span>
<span class="3915105942460614290" onmouseenter="enter('3915105942460614290');" onmouseout="out('3915105942460614290');" style="">2048         ef.addAction(DefaultAdornedEntityFormActions.Add);                                               </span>
<span class="3260120157565581788" onmouseenter="enter('3260120157565581788');" onmouseout="out('3260120157565581788');" style="">2049         return ef;                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2050     }                                                                                                    </span>
<span  style="">2051                                                                                                          </span>
<span class="-8997817584059672482" onmouseenter="enter('-8997817584059672482');" onmouseout="out('-8997817584059672482');" style="">2052     protected VisibilityEnum[] getGridHiddenVisibilities() {                                             </span>
<span class="-4220328425458971190" onmouseenter="enter('-4220328425458971190');" onmouseout="out('-4220328425458971190');" style="">2053         return FormBuilderServiceImpl.GRID_HIDDEN_VISIBILITIES;                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2054     }                                                                                                    </span>
<span  style="">2055                                                                                                          </span>
<span class="5519346243833044852" onmouseenter="enter('5519346243833044852');" onmouseout="out('5519346243833044852');" style="">2056     protected VisibilityEnum[] getFormHiddenVisibilities() {                                             </span>
<span class="-3897912334343924171" onmouseenter="enter('-3897912334343924171');" onmouseout="out('-3897912334343924171');" style="">2057         return FormBuilderServiceImpl.FORM_HIDDEN_VISIBILITIES;                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2058     }                                                                                                    </span>
<span  style="">2059                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2060 }                                                                                                        </span></pre></td>
                            <td><pre><span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style="">   1 /*                                                                                                       </span>
<span class="7283730021202772321" onmouseenter="enter('7283730021202772321');" onmouseout="out('7283730021202772321');" style="">   2  * #%L                                                                                                   </span>
<span class="-3339060969767811416" onmouseenter="enter('-3339060969767811416');" onmouseout="out('-3339060969767811416');" style="">   3  * BroadleafCommerce Open Admin Platform                                                                 </span>
<span class="305149960078729975" onmouseenter="enter('305149960078729975');" onmouseout="out('305149960078729975');" style="">   4  * %%                                                                                                    </span>
<span class="1978304592184257722" onmouseenter="enter('1978304592184257722');" onmouseout="out('1978304592184257722');" style="">   5  * Copyright (C) 2009 - 2016 Broadleaf Commerce                                                          </span>
<span class="305149960078729975" onmouseenter="enter('305149960078729975');" onmouseout="out('305149960078729975');" style="">   6  * %%                                                                                                    </span>
<span class="4430451662992926684" onmouseenter="enter('4430451662992926684');" onmouseout="out('4430451662992926684');" style="">   7  * Licensed under the Broadleaf Fair Use License Agreement, Version 1.0                                  </span>
<span class="8206099442596739681" onmouseenter="enter('8206099442596739681');" onmouseout="out('8206099442596739681');" style="">   8  * (the &quot;Fair Use License&quot; located  at http://license.broadleafcommerce.org/fair_use_license-1.0.txt)    </span>
<span class="-4338570431005413339" onmouseenter="enter('-4338570431005413339');" onmouseout="out('-4338570431005413339');" style="">   9  * unless the restrictions on use therein are violated and require payment to Broadleaf in which case    </span>
<span class="-5739615313038505012" onmouseenter="enter('-5739615313038505012');" onmouseout="out('-5739615313038505012');" style="">  10  * the Broadleaf End User License Agreement (EULA), Version 1.1                                          </span>
<span class="-196756316119086558" onmouseenter="enter('-196756316119086558');" onmouseout="out('-196756316119086558');" style="">  11  * (the &quot;Commercial License&quot; located at http://license.broadleafcommerce.org/commercial_license-1.1.txt) </span>
<span class="-3691518077331372763" onmouseenter="enter('-3691518077331372763');" onmouseout="out('-3691518077331372763');" style="">  12  * shall apply.                                                                                          </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">  13  *                                                                                                       </span>
<span class="-3333434530440420199" onmouseenter="enter('-3333434530440420199');" onmouseout="out('-3333434530440420199');" style=""><abbr title="  14  * Alternatively, the Commercial License may be replaced with a mutually agreed upon license (the &quot;Custom License&quot;)">  14  * Alternatively, the Commercial License may be replaced with a mutually agreed upon license (the &quot;CustomðŸ”µ</abbr></span>
<span class="-2556272520656899284" onmouseenter="enter('-2556272520656899284');" onmouseout="out('-2556272520656899284');" style=""><abbr title="  15  * between you and Broadleaf Commerce. You may not use this file except in compliance with the applicable license.">  15  * between you and Broadleaf Commerce. You may not use this file except in compliance with the applicableðŸ”µ</abbr></span>
<span class="3739716589509259313" onmouseenter="enter('3739716589509259313');" onmouseout="out('3739716589509259313');" style="">  16  * #L%                                                                                                   </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  17  */                                                                                                      </span>
<span class="-6621374416165604736" onmouseenter="enter('-6621374416165604736');" onmouseout="out('-6621374416165604736');" style="">  18 package org.broadleafcommerce.openadmin.web.service;                                                     </span>
<span  style="">  19                                                                                                          </span>
<span class="8596464405353709537" onmouseenter="enter('8596464405353709537');" onmouseout="out('8596464405353709537');" style="">  20 import org.apache.commons.collections.CollectionUtils;                                                   </span>
<span class="-6731128730698523533" onmouseenter="enter('-6731128730698523533');" onmouseout="out('-6731128730698523533');" style="">  21 import org.apache.commons.collections.Predicate;                                                         </span>
<span class="-7366736394295216840" onmouseenter="enter('-7366736394295216840');" onmouseout="out('-7366736394295216840');" style="">  22 import org.apache.commons.lang.ArrayUtils;                                                               </span>
<span class="-4661043417888464228" onmouseenter="enter('-4661043417888464228');" onmouseout="out('-4661043417888464228');" style="">  23 import org.apache.commons.lang.BooleanUtils;                                                             </span>
<span class="-8105670274694144339" onmouseenter="enter('-8105670274694144339');" onmouseout="out('-8105670274694144339');" style="">  24 import org.apache.commons.lang3.StringUtils;                                                             </span>
<span class="494203924075255110" onmouseenter="enter('494203924075255110');" onmouseout="out('494203924075255110');" style="">  25 import org.apache.commons.logging.Log;                                                                   </span>
<span class="-8227491862907452788" onmouseenter="enter('-8227491862907452788');" onmouseout="out('-8227491862907452788');" style="">  26 import org.apache.commons.logging.LogFactory;                                                            </span>
<span class="-6287859968194756382" onmouseenter="enter('-6287859968194756382');" onmouseout="out('-6287859968194756382');" style="">  27 import org.broadleafcommerce.common.admin.domain.AdminMainEntity;                                        </span>
<span class="-9066890226896155571" onmouseenter="enter('-9066890226896155571');" onmouseout="out('-9066890226896155571');" style="">  28 import org.broadleafcommerce.common.exception.ExceptionHelper;                                           </span>
<span class="3542918789910249764" onmouseenter="enter('3542918789910249764');" onmouseout="out('3542918789910249764');" style="">  29 import org.broadleafcommerce.common.exception.SecurityServiceException;                                  </span>
<span class="5945096539699516699" onmouseenter="enter('5945096539699516699');" onmouseout="out('5945096539699516699');" style="">  30 import org.broadleafcommerce.common.exception.ServiceException;                                          </span>
<span class="-8339254235515724670" onmouseenter="enter('-8339254235515724670');" onmouseout="out('-8339254235515724670');" style="">  31 import org.broadleafcommerce.common.extension.ExtensionResultStatusType;                                 </span>
<span class="-4810625992201169553" onmouseenter="enter('-4810625992201169553');" onmouseout="out('-4810625992201169553');" style="">  32 import org.broadleafcommerce.common.i18n.domain.TranslatedEntity;                                        </span>
<span class="1881391036720633454" onmouseenter="enter('1881391036720633454');" onmouseout="out('1881391036720633454');" style="">  33 import org.broadleafcommerce.common.i18n.service.TranslationService;                                     </span>
<span class="3092944370275379663" onmouseenter="enter('3092944370275379663');" onmouseout="out('3092944370275379663');" style="">  34 import org.broadleafcommerce.common.locale.service.LocaleService;                                        </span>
<span class="-2454560082833257555" onmouseenter="enter('-2454560082833257555');" onmouseout="out('-2454560082833257555');" style="">  35 import org.broadleafcommerce.common.media.domain.MediaDto;                                               </span>
<span class="4111478795314305516" onmouseenter="enter('4111478795314305516');" onmouseout="out('4111478795314305516');" style="">  36 import org.broadleafcommerce.common.persistence.EntityConfiguration;                                     </span>
<span class="-3349026188166660873" onmouseenter="enter('-3349026188166660873');" onmouseout="out('-3349026188166660873');" style="">  37 import org.broadleafcommerce.common.persistence.EntityDuplicator;                                        </span>
<span class="-6648433550510659033" onmouseenter="enter('-6648433550510659033');" onmouseout="out('-6648433550510659033');" style="">  38 import org.broadleafcommerce.common.presentation.client.AddMethodType;                                   </span>
<span class="-7832706263011125937" onmouseenter="enter('-7832706263011125937');" onmouseout="out('-7832706263011125937');" style="">  39 import org.broadleafcommerce.common.presentation.client.AdornedTargetAddMethodType;                      </span>
<span class="-2413957740330241600" onmouseenter="enter('-2413957740330241600');" onmouseout="out('-2413957740330241600');" style="">  40 import org.broadleafcommerce.common.presentation.client.LookupType;                                      </span>
<span class="7296089998360266547" onmouseenter="enter('7296089998360266547');" onmouseout="out('7296089998360266547');" style="">  41 import org.broadleafcommerce.common.presentation.client.PersistencePerspectiveItemType;                  </span>
<span class="1362364260528215152" onmouseenter="enter('1362364260528215152');" onmouseout="out('1362364260528215152');" style="">  42 import org.broadleafcommerce.common.presentation.client.SupportedFieldType;                              </span>
<span class="-7583443881845767348" onmouseenter="enter('-7583443881845767348');" onmouseout="out('-7583443881845767348');" style="">  43 import org.broadleafcommerce.common.presentation.client.VisibilityEnum;                                  </span>
<span class="2428099238642943960" onmouseenter="enter('2428099238642943960');" onmouseout="out('2428099238642943960');" style="">  44 import org.broadleafcommerce.common.util.BLCMessageUtils;                                                </span>
<span class="578947422765016559" onmouseenter="enter('578947422765016559');" onmouseout="out('578947422765016559');" style="">  45 import org.broadleafcommerce.common.util.FormatUtil;                                                     </span>
<span class="-3347161074136237116" onmouseenter="enter('-3347161074136237116');" onmouseout="out('-3347161074136237116');" style="">  46 import org.broadleafcommerce.common.util.StringUtil;                                                     </span>
<span class="8689743329875302887" onmouseenter="enter('8689743329875302887');" onmouseout="out('8689743329875302887');" style="">  47 import org.broadleafcommerce.common.web.BroadleafRequestContext;                                         </span>
<span class="-3361215363157046739" onmouseenter="enter('-3361215363157046739');" onmouseout="out('-3361215363157046739');" style="">  48 import org.broadleafcommerce.openadmin.dto.AdornedTargetCollectionMetadata;                              </span>
<span class="-1781055592725563383" onmouseenter="enter('-1781055592725563383');" onmouseout="out('-1781055592725563383');" style="">  49 import org.broadleafcommerce.openadmin.dto.AdornedTargetList;                                            </span>
<span class="-6140296335181984013" onmouseenter="enter('-6140296335181984013');" onmouseout="out('-6140296335181984013');" style="">  50 import org.broadleafcommerce.openadmin.dto.BasicCollectionMetadata;                                      </span>
<span class="4427537537958608766" onmouseenter="enter('4427537537958608766');" onmouseout="out('4427537537958608766');" style="">  51 import org.broadleafcommerce.openadmin.dto.BasicFieldMetadata;                                           </span>
<span class="-1607559599739253077" onmouseenter="enter('-1607559599739253077');" onmouseout="out('-1607559599739253077');" style="">  52 import org.broadleafcommerce.openadmin.dto.ClassMetadata;                                                </span>
<span class="5550564421881377532" onmouseenter="enter('5550564421881377532');" onmouseout="out('5550564421881377532');" style="">  53 import org.broadleafcommerce.openadmin.dto.ClassTree;                                                    </span>
<span class="-3165611006566133086" onmouseenter="enter('-3165611006566133086');" onmouseout="out('-3165611006566133086');" style="">  54 import org.broadleafcommerce.openadmin.dto.CollectionMetadata;                                           </span>
<span class="-4742435063138209714" onmouseenter="enter('-4742435063138209714');" onmouseout="out('-4742435063138209714');" style="">  55 import org.broadleafcommerce.openadmin.dto.DynamicResultSet;                                             </span>
<span class="-5093421835888664541" onmouseenter="enter('-5093421835888664541');" onmouseout="out('-5093421835888664541');" style="">  56 import org.broadleafcommerce.openadmin.dto.Entity;                                                       </span>
<span class="-8829499667991596741" onmouseenter="enter('-8829499667991596741');" onmouseout="out('-8829499667991596741');" style="">  57 import org.broadleafcommerce.openadmin.dto.FieldMetadata;                                                </span>
<span class="-2271266034558779994" onmouseenter="enter('-2271266034558779994');" onmouseout="out('-2271266034558779994');" style="">  58 import org.broadleafcommerce.openadmin.dto.ForeignKey;                                                   </span>
<span class="826821438795056004" onmouseenter="enter('826821438795056004');" onmouseout="out('826821438795056004');" style="">  59 import org.broadleafcommerce.openadmin.dto.MapMetadata;                                                  </span>
<span class="-7888875133556467044" onmouseenter="enter('-7888875133556467044');" onmouseout="out('-7888875133556467044');" style="">  60 import org.broadleafcommerce.openadmin.dto.MapStructure;                                                 </span>
<span class="1983554291461039357" onmouseenter="enter('1983554291461039357');" onmouseout="out('1983554291461039357');" style="">  61 import org.broadleafcommerce.openadmin.dto.Property;                                                     </span>
<span class="1696571253156436279" onmouseenter="enter('1696571253156436279');" onmouseout="out('1696571253156436279');" style="">  62 import org.broadleafcommerce.openadmin.dto.SectionCrumb;                                                 </span>
<span class="5662236005419086618" onmouseenter="enter('5662236005419086618');" onmouseout="out('5662236005419086618');" style="">  63 import org.broadleafcommerce.openadmin.dto.TabMetadata;                                                  </span>
<span class="-8828889589519173652" onmouseenter="enter('-8828889589519173652');" onmouseout="out('-8828889589519173652');" style="">  64 import org.broadleafcommerce.openadmin.server.dao.DynamicEntityDao;                                      </span>
<span class="4410643013278245372" onmouseenter="enter('4410643013278245372');" onmouseout="out('4410643013278245372');" style="">  65 import org.broadleafcommerce.openadmin.server.domain.PersistencePackageRequest;                          </span>
<span class="-7620175268967942501" onmouseenter="enter('-7620175268967942501');" onmouseout="out('-7620175268967942501');" style="">  66 import org.broadleafcommerce.openadmin.server.security.domain.AdminSection;                              </span>
<span class="-6571883875867969954" onmouseenter="enter('-6571883875867969954');" onmouseout="out('-6571883875867969954');" style="">  67 import org.broadleafcommerce.openadmin.server.security.domain.AdminUser;                                 </span>
<span class="-4641149340176766185" onmouseenter="enter('-4641149340176766185');" onmouseout="out('-4641149340176766185');" style="">  68 import org.broadleafcommerce.openadmin.server.security.remote.EntityOperationType;                       </span>
<span class="8942483953505157490" onmouseenter="enter('8942483953505157490');" onmouseout="out('8942483953505157490');" style="">  69 import org.broadleafcommerce.openadmin.server.security.remote.SecurityVerifier;                          </span>
<span class="-5109104434282935941" onmouseenter="enter('-5109104434282935941');" onmouseout="out('-5109104434282935941');" style="">  70 import org.broadleafcommerce.openadmin.server.security.service.EntityFormModifier;                       </span>
<span class="-8160764320713173157" onmouseenter="enter('-8160764320713173157');" onmouseout="out('-8160764320713173157');" style="">  71 import org.broadleafcommerce.openadmin.server.security.service.EntityFormModifierConfiguration;          </span>
<span class="-7359249757017525541" onmouseenter="enter('-7359249757017525541');" onmouseout="out('-7359249757017525541');" style="">  72 import org.broadleafcommerce.openadmin.server.security.service.EntityFormModifierData;                   </span>
<span class="3347653686268274670" onmouseenter="enter('3347653686268274670');" onmouseout="out('3347653686268274670');" style="">  73 import org.broadleafcommerce.openadmin.server.security.service.EntityFormModifierDataPoint;              </span>
<span class="-5654897577089013652" onmouseenter="enter('-5654897577089013652');" onmouseout="out('-5654897577089013652');" style="">  74 import org.broadleafcommerce.openadmin.server.security.service.EntityFormModifierRequest;                </span>
<span class="8609771947297205873" onmouseenter="enter('8609771947297205873');" onmouseout="out('8609771947297205873');" style="">  75 import org.broadleafcommerce.openadmin.server.security.service.ExceptionAwareRowLevelSecurityProvider;   </span>
<span class="78786346091609662" onmouseenter="enter('78786346091609662');" onmouseout="out('78786346091609662');" style="">  76 import org.broadleafcommerce.openadmin.server.security.service.RowLevelSecurityService;                  </span>
<span class="-3170172369947649824" onmouseenter="enter('-3170172369947649824');" onmouseout="out('-3170172369947649824');" style="">  77 import org.broadleafcommerce.openadmin.server.security.service.navigation.AdminNavigationService;        </span>
<span class="-3881535627450957263" onmouseenter="enter('-3881535627450957263');" onmouseout="out('-3881535627450957263');" style="">  78 import org.broadleafcommerce.openadmin.server.service.AdminEntityService;                                </span>
<span class="-1454726158681359973" onmouseenter="enter('-1454726158681359973');" onmouseout="out('-1454726158681359973');" style="">  79 import org.broadleafcommerce.openadmin.server.service.persistence.PersistenceManager;                    </span>
<span class="97669409268306845" onmouseenter="enter('97669409268306845');" onmouseout="out('97669409268306845');" style="">  80 import org.broadleafcommerce.openadmin.server.service.persistence.PersistenceManagerFactory;             </span>
<span class="-3086540061138981164" onmouseenter="enter('-3086540061138981164');" onmouseout="out('-3086540061138981164');" style="">  81 import org.broadleafcommerce.openadmin.server.service.persistence.module.BasicPersistenceModule;         </span>
<span class="6020321283788374630" onmouseenter="enter('6020321283788374630');" onmouseout="out('6020321283788374630');" style="">  82 import org.broadleafcommerce.openadmin.server.service.persistence.module.FieldManager;                   </span>
<span class="-2042519459673859584" onmouseenter="enter('-2042519459673859584');" onmouseout="out('-2042519459673859584');" style="">  83 import org.broadleafcommerce.openadmin.web.form.component.DefaultListGridActions;                        </span>
<span class="3056790491614608405" onmouseenter="enter('3056790491614608405');" onmouseout="out('3056790491614608405');" style="">  84 import org.broadleafcommerce.openadmin.web.form.component.ListGrid;                                      </span>
<span class="5295362033766750426" onmouseenter="enter('5295362033766750426');" onmouseout="out('5295362033766750426');" style="">  85 import org.broadleafcommerce.openadmin.web.form.component.ListGridAction;                                </span>
<span class="-3450485825037219414" onmouseenter="enter('-3450485825037219414');" onmouseout="out('-3450485825037219414');" style="">  86 import org.broadleafcommerce.openadmin.web.form.component.ListGridActionGroup;                           </span>
<span class="-3405551311883594169" onmouseenter="enter('-3405551311883594169');" onmouseout="out('-3405551311883594169');" style="">  87 import org.broadleafcommerce.openadmin.web.form.component.ListGridRecord;                                </span>
<span class="-5608490858121609411" onmouseenter="enter('-5608490858121609411');" onmouseout="out('-5608490858121609411');" style="">  88 import org.broadleafcommerce.openadmin.web.form.component.MediaField;                                    </span>
<span class="-8639148455058795423" onmouseenter="enter('-8639148455058795423');" onmouseout="out('-8639148455058795423');" style="">  89 import org.broadleafcommerce.openadmin.web.form.component.RuleBuilderField;                              </span>
<span class="7920804437009762662" onmouseenter="enter('7920804437009762662');" onmouseout="out('7920804437009762662');" style="">  90 import org.broadleafcommerce.openadmin.web.form.entity.CodeField;                                        </span>
<span class="3594570724696916406" onmouseenter="enter('3594570724696916406');" onmouseout="out('3594570724696916406');" style="">  91 import org.broadleafcommerce.openadmin.web.form.entity.ComboField;                                       </span>
<span class="1405974373227613661" onmouseenter="enter('1405974373227613661');" onmouseout="out('1405974373227613661');" style="">  92 import org.broadleafcommerce.openadmin.web.form.entity.DefaultAdornedEntityFormActions;                  </span>
<span class="2718350422838759693" onmouseenter="enter('2718350422838759693');" onmouseout="out('2718350422838759693');" style="">  93 import org.broadleafcommerce.openadmin.web.form.entity.DefaultEntityFormActions;                         </span>
<span class="-7452009352681558215" onmouseenter="enter('-7452009352681558215');" onmouseout="out('-7452009352681558215');" style="">  94 import org.broadleafcommerce.openadmin.web.form.entity.DynamicEntityFormInfo;                            </span>
<span class="8035715143965725316" onmouseenter="enter('8035715143965725316');" onmouseout="out('8035715143965725316');" style="">  95 import org.broadleafcommerce.openadmin.web.form.entity.EntityForm;                                       </span>
<span class="6015559832933397076" onmouseenter="enter('6015559832933397076');" onmouseout="out('6015559832933397076');" style="">  96 import org.broadleafcommerce.openadmin.web.form.entity.Field;                                            </span>
<span class="-902704191270810798" onmouseenter="enter('-902704191270810798');" onmouseout="out('-902704191270810798');" style="">  97 import org.broadleafcommerce.openadmin.web.rulebuilder.DataDTODeserializer;                              </span>
<span class="-5891661051837252429" onmouseenter="enter('-5891661051837252429');" onmouseout="out('-5891661051837252429');" style="">  98 import org.broadleafcommerce.openadmin.web.rulebuilder.dto.DataDTO;                                      </span>
<span class="-5682953954690678360" onmouseenter="enter('-5682953954690678360');" onmouseout="out('-5682953954690678360');" style="">  99 import org.broadleafcommerce.openadmin.web.rulebuilder.dto.DataWrapper;                                  </span>
<span class="-5901812469549191870" onmouseenter="enter('-5901812469549191870');" onmouseout="out('-5901812469549191870');" style=""> 100 import org.broadleafcommerce.openadmin.web.rulebuilder.dto.FieldDTO;                                     </span>
<span class="5057654301829863353" onmouseenter="enter('5057654301829863353');" onmouseout="out('5057654301829863353');" style=""> 101 import org.broadleafcommerce.openadmin.web.rulebuilder.dto.FieldWrapper;                                 </span>
<span class="1299345749740405613" onmouseenter="enter('1299345749740405613');" onmouseout="out('1299345749740405613');" style=""> 102 import org.codehaus.jettison.json.JSONObject;                                                            </span>
<span class="-7404358339654927739" onmouseenter="enter('-7404358339654927739');" onmouseout="out('-7404358339654927739');" style=""> 103 import org.springframework.beans.factory.annotation.Value;                                               </span>
<span class="5894662938986881653" onmouseenter="enter('5894662938986881653');" onmouseout="out('5894662938986881653');" style=""> 104 import org.springframework.context.MessageSource;                                                        </span>
<span class="4998592591649731876" onmouseenter="enter('4998592591649731876');" onmouseout="out('4998592591649731876');" style=""> 105 import org.springframework.context.NoSuchMessageException;                                               </span>
<span class="-5275076188864034753" onmouseenter="enter('-5275076188864034753');" onmouseout="out('-5275076188864034753');" style=""> 106 import org.springframework.stereotype.Service;                                                           </span>
<span  style=""> 107                                                                                                          </span>
<span class="1687723025421661461" onmouseenter="enter('1687723025421661461');" onmouseout="out('1687723025421661461');" style=""> 108 import com.fasterxml.jackson.core.Version;                                                               </span>
<span class="3949390651369204057" onmouseenter="enter('3949390651369204057');" onmouseout="out('3949390651369204057');" style=""> 109 import com.fasterxml.jackson.databind.ObjectMapper;                                                      </span>
<span class="-4978580670739809564" onmouseenter="enter('-4978580670739809564');" onmouseout="out('-4978580670739809564');" style=""> 110 import com.fasterxml.jackson.databind.module.SimpleModule;                                               </span>
<span  style=""> 111                                                                                                          </span>
<span class="103340661636203254" onmouseenter="enter('103340661636203254');" onmouseout="out('103340661636203254');" style=""> 112 import java.io.IOException;                                                                              </span>
<span class="2075466404860203191" onmouseenter="enter('2075466404860203191');" onmouseout="out('2075466404860203191');" style=""> 113 import java.math.BigDecimal;                                                                             </span>
<span class="1238662365364477381" onmouseenter="enter('1238662365364477381');" onmouseout="out('1238662365364477381');" style=""> 114 import java.text.DateFormat;                                                                             </span>
<span class="5374616781072617946" onmouseenter="enter('5374616781072617946');" onmouseout="out('5374616781072617946');" style=""> 115 import java.text.DateFormatSymbols;                                                                      </span>
<span class="39790854174282861" onmouseenter="enter('39790854174282861');" onmouseout="out('39790854174282861');" style=""> 116 import java.text.ParseException;                                                                         </span>
<span class="54331962280914690" onmouseenter="enter('54331962280914690');" onmouseout="out('54331962280914690');" style=""> 117 import java.text.SimpleDateFormat;                                                                       </span>
<span class="9191247685397773893" onmouseenter="enter('9191247685397773893');" onmouseout="out('9191247685397773893');" style=""> 118 import java.util.ArrayList;                                                                              </span>
<span class="-28465676010609596" onmouseenter="enter('-28465676010609596');" onmouseout="out('-28465676010609596');" style=""> 119 import java.util.Arrays;                                                                                 </span>
<span class="2187055016371707860" onmouseenter="enter('2187055016371707860');" onmouseout="out('2187055016371707860');" style=""> 120 import java.util.Collections;                                                                            </span>
<span class="1748005127055838442" onmouseenter="enter('1748005127055838442');" onmouseout="out('1748005127055838442');" style=""> 121 import java.util.Date;                                                                                   </span>
<span class="4169599896190320038" onmouseenter="enter('4169599896190320038');" onmouseout="out('4169599896190320038');" style=""> 122 import java.util.HashMap;                                                                                </span>
<span class="-1786020958497218848" onmouseenter="enter('-1786020958497218848');" onmouseout="out('-1786020958497218848');" style=""> 123 import java.util.List;                                                                                   </span>
<span class="-4563680703184802189" onmouseenter="enter('-4563680703184802189');" onmouseout="out('-4563680703184802189');" style=""> 124 import java.util.Locale;                                                                                 </span>
<span class="6618655971923850695" onmouseenter="enter('6618655971923850695');" onmouseout="out('6618655971923850695');" style=""> 125 import java.util.Map;                                                                                    </span>
<span class="2393042000349901971" onmouseenter="enter('2393042000349901971');" onmouseout="out('2393042000349901971');" style=""> 126 import java.util.Map.Entry;                                                                              </span>
<span class="3384353015976675773" onmouseenter="enter('3384353015976675773');" onmouseout="out('3384353015976675773');" style=""> 127 import java.util.Set;                                                                                    </span>
<span  style=""> 128                                                                                                          </span>
<span class="-5292076237369528758" onmouseenter="enter('-5292076237369528758');" onmouseout="out('-5292076237369528758');" style=""> 129 import javax.annotation.Resource;                                                                        </span>
<span class="-2638882474121018940" onmouseenter="enter('-2638882474121018940');" onmouseout="out('-2638882474121018940');" style=""> 130 import javax.persistence.ManyToOne;                                                                      </span>
<span class="-1278149683069486932" onmouseenter="enter('-1278149683069486932');" onmouseout="out('-1278149683069486932');" style=""> 131 import javax.persistence.OneToOne;                                                                       </span>
<span class="-2972028083581866805" onmouseenter="enter('-2972028083581866805');" onmouseout="out('-2972028083581866805');" style=""> 132 import javax.servlet.http.HttpServletRequest;                                                            </span>
<span  style=""> 133                                                                                                          </span>
<span  style=""> 134                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 135 /**                                                                                                      </span>
<span class="-346667533686466806" onmouseenter="enter('-346667533686466806');" onmouseout="out('-346667533686466806');" style=""> 136  * @author Andre Azzolini (apazzolini)                                                                   </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 137  */                                                                                                      </span>
<span class="4305824758257676503" onmouseenter="enter('4305824758257676503');" onmouseout="out('4305824758257676503');" style=""> 138 @Service(&quot;blFormBuilderService&quot;)                                                                         </span>
<span class="1873196277582368359" onmouseenter="enter('1873196277582368359');" onmouseout="out('1873196277582368359');" style=""> 139 public class FormBuilderServiceImpl implements FormBuilderService {                                      </span>
<span  style=""> 140                                                                                                          </span>
<span class="4173594623362970870" onmouseenter="enter('4173594623362970870');" onmouseout="out('4173594623362970870');" style=""> 141     private static final Log LOG = LogFactory.getLog(FormBuilderServiceImpl.class);                      </span>
<span  style=""> 142                                                                                                          </span>
<span class="-3043900363751028803" onmouseenter="enter('-3043900363751028803');" onmouseout="out('-3043900363751028803');" style=""> 143     public static final String ALTERNATE_ID_PROPERTY = &quot;ALTERNATE_ID&quot;;                                   </span>
<span  style=""> 144                                                                                                          </span>
<span class="-7828706270204224343" onmouseenter="enter('-7828706270204224343');" onmouseout="out('-7828706270204224343');" style=""> 145     @Resource(name = &quot;blAdminEntityService&quot;)                                                             </span>
<span class="-8450140140941932116" onmouseenter="enter('-8450140140941932116');" onmouseout="out('-8450140140941932116');" style=""> 146     protected AdminEntityService adminEntityService;                                                     </span>
<span  style=""> 147                                                                                                          </span>
<span class="-1805811588903622951" onmouseenter="enter('-1805811588903622951');" onmouseout="out('-1805811588903622951');" style=""> 148     @Resource (name = &quot;blAdminNavigationService&quot;)                                                        </span>
<span class="-7781148449676317002" onmouseenter="enter('-7781148449676317002');" onmouseout="out('-7781148449676317002');" style=""> 149     protected AdminNavigationService navigationService;                                                  </span>
<span  style=""> 150                                                                                                          </span>
<span class="7211766058790837589" onmouseenter="enter('7211766058790837589');" onmouseout="out('7211766058790837589');" style=""> 151     @Resource(name = &quot;blFormBuilderExtensionManager&quot;)                                                    </span>
<span class="1458252146616806516" onmouseenter="enter('1458252146616806516');" onmouseout="out('1458252146616806516');" style=""> 152     protected FormBuilderExtensionManager extensionManager;                                              </span>
<span  style=""> 153                                                                                                          </span>
<span class="1637373992155499263" onmouseenter="enter('1637373992155499263');" onmouseout="out('1637373992155499263');" style=""> 154     @Resource(name=&quot;blEntityConfiguration&quot;)                                                              </span>
<span class="-8812870795397979367" onmouseenter="enter('-8812870795397979367');" onmouseout="out('-8812870795397979367');" style=""> 155     protected EntityConfiguration entityConfiguration;                                                   </span>
<span  style=""> 156                                                                                                          </span>
<span class="318567755561422223" onmouseenter="enter('318567755561422223');" onmouseout="out('318567755561422223');" style=""> 157     @Resource(name=&quot;blAdminSecurityRemoteService&quot;)                                                       </span>
<span class="-293302832217381009" onmouseenter="enter('-293302832217381009');" onmouseout="out('-293302832217381009');" style=""> 158     protected SecurityVerifier adminRemoteSecurityService;                                               </span>
<span  style=""> 159                                                                                                          </span>
<span class="-1073312679381587606" onmouseenter="enter('-1073312679381587606');" onmouseout="out('-1073312679381587606');" style=""> 160     @Resource(name = &quot;blRowLevelSecurityService&quot;)                                                        </span>
<span class="7292046362506695965" onmouseenter="enter('7292046362506695965');" onmouseout="out('7292046362506695965');" style=""> 161     protected RowLevelSecurityService rowLevelSecurityService;                                           </span>
<span  style=""> 162                                                                                                          </span>
<span class="582138269496436951" onmouseenter="enter('582138269496436951');" onmouseout="out('582138269496436951');" style=""> 163     @Resource(name = &quot;blMediaBuilderService&quot;)                                                            </span>
<span class="8749601783428818980" onmouseenter="enter('8749601783428818980');" onmouseout="out('8749601783428818980');" style=""> 164     protected MediaBuilderService mediaBuilderService;                                                   </span>
<span  style=""> 165                                                                                                          </span>
<span class="1982131321477089315" onmouseenter="enter('1982131321477089315');" onmouseout="out('1982131321477089315');" style=""> 166     @Resource(name = &quot;blListGridErrorMessageExtensionManager&quot;)                                           </span>
<span class="4649294380733883401" onmouseenter="enter('4649294380733883401');" onmouseout="out('4649294380733883401');" style=""> 167     protected ListGridErrorMessageExtensionManager listGridErrorExtensionManager;                        </span>
<span  style=""> 168                                                                                                          </span>
<span class="-6302300657638714180" onmouseenter="enter('-6302300657638714180');" onmouseout="out('-6302300657638714180');" style=""> 169     @Resource(name = &quot;blAdminNavigationService&quot;)                                                         </span>
<span class="-6025330588276587017" onmouseenter="enter('-6025330588276587017');" onmouseout="out('-6025330588276587017');" style=""> 170     protected AdminNavigationService adminNavigationService;                                             </span>
<span  style=""> 171                                                                                                          </span>
<span class="4471392044492296285" onmouseenter="enter('4471392044492296285');" onmouseout="out('4471392044492296285');" style=""> 172     @Resource(name = &quot;blEntityDuplicator&quot;)                                                               </span>
<span class="-9194612273021432316" onmouseenter="enter('-9194612273021432316');" onmouseout="out('-9194612273021432316');" style=""> 173     protected EntityDuplicator duplicator;                                                               </span>
<span  style=""> 174                                                                                                          </span>
<span class="-8242037663383389708" onmouseenter="enter('-8242037663383389708');" onmouseout="out('-8242037663383389708');" style=""> 175     @Resource(name = &quot;blDynamicEntityDao&quot;)                                                               </span>
<span class="-6629482740079052882" onmouseenter="enter('-6629482740079052882');" onmouseout="out('-6629482740079052882');" style=""> 176     protected DynamicEntityDao dynamicEntityDao;                                                         </span>
<span  style=""> 177                                                                                                          </span>
<span class="6008764380027861894" onmouseenter="enter('6008764380027861894');" onmouseout="out('6008764380027861894');" style=""> 178     @Resource(name = &quot;blLocaleService&quot;)                                                                  </span>
<span class="-5080270678165807269" onmouseenter="enter('-5080270678165807269');" onmouseout="out('-5080270678165807269');" style=""> 179     protected LocaleService localeService;                                                               </span>
<span  style=""> 180                                                                                                          </span>
<span class="2111635565141224242" onmouseenter="enter('2111635565141224242');" onmouseout="out('2111635565141224242');" style=""> 181     @Resource(name = &quot;blTranslationService&quot;)                                                             </span>
<span class="3630047639981215429" onmouseenter="enter('3630047639981215429');" onmouseout="out('3630047639981215429');" style=""> 182     protected TranslationService translationService;                                                     </span>
<span  style=""> 183                                                                                                          </span>
<span class="-7553809325968652706" onmouseenter="enter('-7553809325968652706');" onmouseout="out('-7553809325968652706');" style=""> 184     @Value(&quot;${use.translation.search:false}&quot;)                                                            </span>
<span class="-2269006701771046036" onmouseenter="enter('-2269006701771046036');" onmouseout="out('-2269006701771046036');" style=""> 185     protected boolean useTranslationSearch;                                                              </span>
<span  style=""> 186                                                                                                          </span>
<span class="8033614225945187624" onmouseenter="enter('8033614225945187624');" onmouseout="out('8033614225945187624');" style=""> 187     protected static final VisibilityEnum[] FORM_HIDDEN_VISIBILITIES = new VisibilityEnum[] {            </span>
<span class="-8766489859370232859" onmouseenter="enter('-8766489859370232859');" onmouseout="out('-8766489859370232859');" style=""> 188             VisibilityEnum.HIDDEN_ALL, VisibilityEnum.FORM_HIDDEN                                        </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 189     };                                                                                                   </span>
<span  style=""> 190                                                                                                          </span>
<span class="4001768864648272267" onmouseenter="enter('4001768864648272267');" onmouseout="out('4001768864648272267');" style=""> 191     protected static final VisibilityEnum[] GRID_HIDDEN_VISIBILITIES = new VisibilityEnum[] {            </span>
<span class="5602397837491933700" onmouseenter="enter('5602397837491933700');" onmouseout="out('5602397837491933700');" style=""> 192             VisibilityEnum.HIDDEN_ALL, VisibilityEnum.GRID_HIDDEN                                        </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 193     };                                                                                                   </span>
<span  style=""> 194                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 195     @Override                                                                                            </span>
<span class="3931952365643845454" onmouseenter="enter('3931952365643845454');" onmouseout="out('3931952365643845454');" style=""><abbr title=" 196     public ListGrid buildMainListGrid(DynamicResultSet drs, ClassMetadata cmd, String sectionKey, List&lt;SectionCrumb&gt; sectionCrumbs)"> 196     public ListGrid buildMainListGrid(DynamicResultSet drs, ClassMetadata cmd, String sectionKey, List&lt;SeðŸ”µ</abbr></span>
<span class="1998458335829271558" onmouseenter="enter('1998458335829271558');" onmouseout="out('1998458335829271558');" style=""> 197             throws ServiceException {                                                                    </span>
<span  style=""> 198                                                                                                          </span>
<span class="-7098425003691580554" onmouseenter="enter('-7098425003691580554');" onmouseout="out('-7098425003691580554');" style=""> 199         List&lt;Field&gt; headerFields = new ArrayList&lt;&gt;();                                                    </span>
<span class="1627698519761414576" onmouseenter="enter('1627698519761414576');" onmouseout="out('1627698519761414576');" style=""> 200         ListGrid.Type type = ListGrid.Type.MAIN;                                                         </span>
<span class="-2507165338472177227" onmouseenter="enter('-2507165338472177227');" onmouseout="out('-2507165338472177227');" style=""> 201         String idProperty = &quot;id&quot;;                                                                        </span>
<span  style=""> 202                                                                                                          </span>
<span class="1914895525805456392" onmouseenter="enter('1914895525805456392');" onmouseout="out('1914895525805456392');" style=""> 203         FieldWrapper wrapper = new FieldWrapper();                                                       </span>
<span class="519132227955412437" onmouseenter="enter('519132227955412437');" onmouseout="out('519132227955412437');" style=""> 204         ArrayList&lt;FieldDTO&gt; defaultWrapperFields = new ArrayList&lt;&gt;();                                    </span>
<span class="3681854507729164346" onmouseenter="enter('3681854507729164346');" onmouseout="out('3681854507729164346');" style=""> 205         for (Property p : cmd.getProperties()) {                                                         </span>
<span class="-1029066852878262358" onmouseenter="enter('-1029066852878262358');" onmouseout="out('-1029066852878262358');" style=""> 206             if (p.getMetadata() instanceof BasicFieldMetadata) {                                         </span>
<span class="-5664285287189453326" onmouseenter="enter('-5664285287189453326');" onmouseout="out('-5664285287189453326');" style=""> 207                 BasicFieldMetadata fmd = (BasicFieldMetadata) p.getMetadata();                           </span>
<span  style=""> 208                                                                                                          </span>
<span class="18031332680368663" onmouseenter="enter('18031332680368663');" onmouseout="out('18031332680368663');" style=""> 209                 if (SupportedFieldType.ID.equals(fmd.getFieldType())) {                                  </span>
<span class="-3962609225474086388" onmouseenter="enter('-3962609225474086388');" onmouseout="out('-3962609225474086388');" style=""> 210                     idProperty = fmd.getName();                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 211                 }                                                                                        </span>
<span  style=""> 212                                                                                                          </span>
<span class="-4421297623821608279" onmouseenter="enter('-4421297623821608279');" onmouseout="out('-4421297623821608279');" style=""> 213                 if (fmd.isProminent() != null &amp;&amp; fmd.isProminent()                                       </span>
<span class="-1250799748677743340" onmouseenter="enter('-1250799748677743340');" onmouseout="out('-1250799748677743340');" style=""> 214                         &amp;&amp; !ArrayUtils.contains(getGridHiddenVisibilities(), fmd.getVisibility())) {     </span>
<span class="-8490871683061304534" onmouseenter="enter('-8490871683061304534');" onmouseout="out('-8490871683061304534');" style=""> 215                     Field hf = createHeaderField(p, fmd);                                                </span>
<span class="465504053416102059" onmouseenter="enter('465504053416102059');" onmouseout="out('465504053416102059');" style=""> 216                     headerFields.add(hf);                                                                </span>
<span class="6861300594848012112" onmouseenter="enter('6861300594848012112');" onmouseout="out('6861300594848012112');" style=""> 217                     defaultWrapperFields.add(constructFieldDTOFromFieldData(hf, fmd));                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 218                 }                                                                                        </span>
<span  style=""> 219                                                                                                          </span>
<span class="7456310891309661190" onmouseenter="enter('7456310891309661190');" onmouseout="out('7456310891309661190');" style=""> 220                 if (fmd.getIsFilter() != null &amp;&amp; fmd.getIsFilter()) {                                    </span>
<span class="2276813412477598729" onmouseenter="enter('2276813412477598729');" onmouseout="out('2276813412477598729');" style=""><abbr title=" 221                     wrapper.getFields().add(constructFieldDTOFromFieldData(createHeaderField(p, fmd), fmd));"> 221                     wrapper.getFields().add(constructFieldDTOFromFieldData(createHeaderField(p, fmd), fmdðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 222                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 223             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 224         }                                                                                                </span>
<span  style=""> 225                                                                                                          </span>
<span class="7035902688492109722" onmouseenter="enter('7035902688492109722');" onmouseout="out('7035902688492109722');" style=""> 226         if (useTranslationSearch) {                                                                      </span>
<span class="5781419264587889352" onmouseenter="enter('5781419264587889352');" onmouseout="out('5781419264587889352');" style=""> 227             getTranslationSearchField(cmd.getCeilingType(), defaultWrapperFields);                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 228         }                                                                                                </span>
<span  style=""> 229                                                                                                          </span>
<span class="-2480148942784560805" onmouseenter="enter('-2480148942784560805');" onmouseout="out('-2480148942784560805');" style=""><abbr title=" 230         ListGrid listGrid = createListGrid(cmd.getCeilingType(), headerFields, type, drs, sectionKey, 0, idProperty, sectionCrumbs);"> 230         ListGrid listGrid = createListGrid(cmd.getCeilingType(), headerFields, type, drs, sectionKey, 0, ðŸ”µ</abbr></span>
<span  style=""> 231                                                                                                          </span>
<span class="5965161931380536237" onmouseenter="enter('5965161931380536237');" onmouseout="out('5965161931380536237');" style=""> 232         if (CollectionUtils.isNotEmpty(listGrid.getHeaderFields())) {                                    </span>
<span class="3953700823140818229" onmouseenter="enter('3953700823140818229');" onmouseout="out('3953700823140818229');" style=""> 233             // Set the first column to be able to link to the main entity                                </span>
<span class="2105374103692198201" onmouseenter="enter('2105374103692198201');" onmouseout="out('2105374103692198201');" style=""> 234             listGrid.getHeaderFields().iterator().next().setMainEntityLink(true);                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 235         } else {                                                                                         </span>
<span class="-7706502187775684276" onmouseenter="enter('-7706502187775684276');" onmouseout="out('-7706502187775684276');" style=""><abbr title=" 236             String message = &quot;There are no listgrid header fields configured for the class &quot; + cmd.getCeilingType();"> 236             String message = &quot;There are no listgrid header fields configured for the class &quot; + cmd.getCeiðŸ”µ</abbr></span>
<span class="4913519471581000034" onmouseenter="enter('4913519471581000034');" onmouseout="out('4913519471581000034');" style=""> 237             message += &quot;Please mark some @AdminPresentation fields with &#x27;prominent = true&#x27;&quot;;             </span>
<span class="683988342023046623" onmouseenter="enter('683988342023046623');" onmouseout="out('683988342023046623');" style=""> 238             LOG.error(message);                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 239         }                                                                                                </span>
<span  style=""> 240                                                                                                          </span>
<span class="1067693587814186246" onmouseenter="enter('1067693587814186246');" onmouseout="out('1067693587814186246');" style=""> 241         Date c = new Date();                                                                             </span>
<span class="488922592354253720" onmouseenter="enter('488922592354253720');" onmouseout="out('488922592354253720');" style=""> 242         String friendlyName = &quot;listGrid&quot; + c.getTime();                                                  </span>
<span class="2615168876841014995" onmouseenter="enter('2615168876841014995');" onmouseout="out('2615168876841014995');" style=""> 243         // Set up the filter builder params                                                              </span>
<span class="3627072983536168024" onmouseenter="enter('3627072983536168024');" onmouseout="out('3627072983536168024');" style=""> 244         listGrid.setJsonFieldName(friendlyName + &quot;Json&quot;);                                                </span>
<span class="6488323689834765207" onmouseenter="enter('6488323689834765207');" onmouseout="out('6488323689834765207');" style=""> 245         listGrid.setFriendlyName(friendlyName);                                                          </span>
<span class="-4532597237542010033" onmouseenter="enter('-4532597237542010033');" onmouseout="out('-4532597237542010033');" style=""> 246         listGrid.setFieldBuilder(&quot;RULE_SIMPLE&quot;);                                                         </span>
<span class="2366326534416496613" onmouseenter="enter('2366326534416496613');" onmouseout="out('2366326534416496613');" style=""> 247         if (CollectionUtils.isEmpty(wrapper.getFields())) {                                              </span>
<span class="532531496111421469" onmouseenter="enter('532531496111421469');" onmouseout="out('532531496111421469');" style=""> 248             wrapper.setFields(defaultWrapperFields);                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 249         }                                                                                                </span>
<span class="8083895692807517727" onmouseenter="enter('8083895692807517727');" onmouseout="out('8083895692807517727');" style=""> 250         listGrid.setFieldWrapper(wrapper);                                                               </span>
<span class="-5116449029302148886" onmouseenter="enter('-5116449029302148886');" onmouseout="out('-5116449029302148886');" style=""> 251         listGrid.setHideFriendlyName(true);                                                              </span>
<span  style=""> 252                                                                                                          </span>
<span class="4466331963824990789" onmouseenter="enter('4466331963824990789');" onmouseout="out('4466331963824990789');" style=""> 253         String blankJsonString =  &quot;{\&quot;data\&quot;:[]}&quot;;                                                       </span>
<span class="7445610059504327235" onmouseenter="enter('7445610059504327235');" onmouseout="out('7445610059504327235');" style=""> 254         listGrid.setJson(blankJsonString);                                                               </span>
<span class="-6647315222721447684" onmouseenter="enter('-6647315222721447684');" onmouseout="out('-6647315222721447684');" style=""> 255         DataWrapper dw = convertJsonToDataWrapper(blankJsonString);                                      </span>
<span class="-3408161092817379645" onmouseenter="enter('-3408161092817379645');" onmouseout="out('-3408161092817379645');" style=""> 256         if (dw != null) {                                                                                </span>
<span class="-933372440492481068" onmouseenter="enter('-933372440492481068');" onmouseout="out('-933372440492481068');" style=""> 257             listGrid.setDataWrapper(dw);                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 258         }                                                                                                </span>
<span  style=""> 259                                                                                                          </span>
<span class="2808273481648426142" onmouseenter="enter('2808273481648426142');" onmouseout="out('2808273481648426142');" style=""> 260         listGrid.addModalRowAction(DefaultListGridActions.SINGLE_SELECT);                                </span>
<span class="-7419173722157864798" onmouseenter="enter('-7419173722157864798');" onmouseout="out('-7419173722157864798');" style=""> 261         listGrid.setSelectType(ListGrid.SelectType.SINGLE_SELECT);                                       </span>
<span  style=""> 262                                                                                                          </span>
<span class="-5511350038403165520" onmouseenter="enter('-5511350038403165520');" onmouseout="out('-5511350038403165520');" style=""> 263         extensionManager.getProxy().modifyListGrid(listGrid.getClassName(), listGrid);                   </span>
<span  style=""> 264                                                                                                          </span>
<span class="8338561479600990216" onmouseenter="enter('8338561479600990216');" onmouseout="out('8338561479600990216');" style=""> 265         return listGrid;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 266     }                                                                                                    </span>
<span  style=""> 267                                                                                                          </span>
<span class="-2473495746700041727" onmouseenter="enter('-2473495746700041727');" onmouseout="out('-2473495746700041727');" style=""><abbr title=" 268     private void getTranslationSearchField(String ceilingEntity, ArrayList&lt;FieldDTO&gt; defaultWrapperFields) {"> 268     private void getTranslationSearchField(String ceilingEntity, ArrayList&lt;FieldDTO&gt; defaultWrapperFieldsðŸ”µ</abbr></span>
<span  style=""> 269                                                                                                          </span>
<span class="-3232888912368159607" onmouseenter="enter('-3232888912368159607');" onmouseout="out('-3232888912368159607');" style=""> 270         TranslatedEntity translatedEntity;                                                               </span>
<span  style=""> 271                                                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 272         try {                                                                                            </span>
<span class="-5244579722591725998" onmouseenter="enter('-5244579722591725998');" onmouseout="out('-5244579722591725998');" style=""> 273             translatedEntity = translationService.getAssignableEntityType(ceilingEntity);                </span>
<span  style=""> 274                                                                                                          </span>
<span class="-7754722203743621702" onmouseenter="enter('-7754722203743621702');" onmouseout="out('-7754722203743621702');" style=""> 275             FieldDTO localeField = new FieldDTO();                                                       </span>
<span class="-650403806001508418" onmouseenter="enter('-650403806001508418');" onmouseout="out('-650403806001508418');" style=""> 276             localeField.setId(&quot;translationLocale&quot;);                                                      </span>
<span class="8883986331867249527" onmouseenter="enter('8883986331867249527');" onmouseout="out('8883986331867249527');" style=""> 277             localeField.setLabel(&quot;Translation locale&quot;);                                                  </span>
<span class="7199208923750727297" onmouseenter="enter('7199208923750727297');" onmouseout="out('7199208923750727297');" style=""> 278             localeField.setOperators(&quot;blcFilterOperators_Enumeration&quot;);                                  </span>
<span class="448314703673594143" onmouseenter="enter('448314703673594143');" onmouseout="out('448314703673594143');" style=""> 279             localeField.setInput(&quot;select&quot;);                                                              </span>
<span class="-8761693359075365287" onmouseenter="enter('-8761693359075365287');" onmouseout="out('-8761693359075365287');" style=""> 280             localeField.setType(&quot;string&quot;);                                                               </span>
<span  style=""> 281                                                                                                          </span>
<span class="-5174724837975624583" onmouseenter="enter('-5174724837975624583');" onmouseout="out('-5174724837975624583');" style=""><abbr title=" 282             List&lt;org.broadleafcommerce.common.locale.domain.Locale&gt; locales = localeService.findAllLocales();"> 282             List&lt;org.broadleafcommerce.common.locale.domain.Locale&gt; locales = localeService.findAllLocaleðŸ”µ</abbr></span>
<span  style=""> 283                                                                                                          </span>
<span class="-3424573618742224536" onmouseenter="enter('-3424573618742224536');" onmouseout="out('-3424573618742224536');" style=""> 284             Map&lt;String, String&gt; localeMap = new HashMap&lt;String, String&gt;();                               </span>
<span class="1309094753405556630" onmouseenter="enter('1309094753405556630');" onmouseout="out('1309094753405556630');" style=""> 285             for (org.broadleafcommerce.common.locale.domain.Locale l : locales) {                        </span>
<span class="-2731689503985129359" onmouseenter="enter('-2731689503985129359');" onmouseout="out('-2731689503985129359');" style=""> 286                 localeMap.put(l.getLocaleCode(), l.getFriendlyName());                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 287             }                                                                                            </span>
<span class="-1902025200407977862" onmouseenter="enter('-1902025200407977862');" onmouseout="out('-1902025200407977862');" style=""> 288             localeField.setValues((new JSONObject(localeMap)).toString());                               </span>
<span  style=""> 289                                                                                                          </span>
<span class="-5238173597469744650" onmouseenter="enter('-5238173597469744650');" onmouseout="out('-5238173597469744650');" style=""> 290             defaultWrapperFields.add(localeField);                                                       </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 291         } catch (Exception e) {                                                                          </span>
<span class="-6052835720919181276" onmouseenter="enter('-6052835720919181276');" onmouseout="out('-6052835720919181276');" style=""> 292             translatedEntity = null;                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 293         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 294     }                                                                                                    </span>
<span  style=""> 295                                                                                                          </span>
<span class="699891459148766711" onmouseenter="enter('699891459148766711');" onmouseout="out('699891459148766711');" style=""> 296     protected FieldDTO constructFieldDTOFromFieldData(Field field, BasicFieldMetadata fmd) {             </span>
<span class="-2352177721144438592" onmouseenter="enter('-2352177721144438592');" onmouseout="out('-2352177721144438592');" style=""> 297         FieldDTO fieldDTO = new FieldDTO();                                                              </span>
<span class="-1955942127076587982" onmouseenter="enter('-1955942127076587982');" onmouseout="out('-1955942127076587982');" style=""> 298         //translate the label to display                                                                 </span>
<span class="-4249384918250439089" onmouseenter="enter('-4249384918250439089');" onmouseout="out('-4249384918250439089');" style=""> 299         String label = field.getFriendlyName();                                                          </span>
<span class="-7826420477706002406" onmouseenter="enter('-7826420477706002406');" onmouseout="out('-7826420477706002406');" style=""> 300         BroadleafRequestContext context = BroadleafRequestContext.getBroadleafRequestContext();          </span>
<span class="6441987552844354413" onmouseenter="enter('6441987552844354413');" onmouseout="out('6441987552844354413');" style=""> 301         MessageSource messages = context.getMessageSource();                                             </span>
<span class="5121225958291793486" onmouseenter="enter('5121225958291793486');" onmouseout="out('5121225958291793486');" style=""> 302         if (messages != null) {                                                                          </span>
<span class="8253723406718302376" onmouseenter="enter('8253723406718302376');" onmouseout="out('8253723406718302376');" style=""> 303             label = messages.getMessage(label, null, label, context.getJavaLocale());                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 304         }                                                                                                </span>
<span class="7762483336458153581" onmouseenter="enter('7762483336458153581');" onmouseout="out('7762483336458153581');" style=""> 305         fieldDTO.setLabel(label);                                                                        </span>
<span  style=""> 306                                                                                                          </span>
<span class="-8673723023935338374" onmouseenter="enter('-8673723023935338374');" onmouseout="out('-8673723023935338374');" style=""> 307         fieldDTO.setId(field.getName());                                                                 </span>
<span class="199309371382711712" onmouseenter="enter('199309371382711712');" onmouseout="out('199309371382711712');" style=""> 308         if (field.getFieldType().equals(&quot;STRING&quot;)) {                                                     </span>
<span class="8880270445034694758" onmouseenter="enter('8880270445034694758');" onmouseout="out('8880270445034694758');" style=""> 309             fieldDTO.setOperators(&quot;blcFilterOperators_Text&quot;);                                            </span>
<span class="362132093975857936" onmouseenter="enter('362132093975857936');" onmouseout="out('362132093975857936');" style=""> 310         } else if (field.getFieldType().equals(&quot;DATE&quot;)) {                                                </span>
<span class="-933802372622143860" onmouseenter="enter('-933802372622143860');" onmouseout="out('-933802372622143860');" style=""> 311             fieldDTO.setOperators(&quot;blcFilterOperators_Date&quot;);                                            </span>
<span class="6478164380950858712" onmouseenter="enter('6478164380950858712');" onmouseout="out('6478164380950858712');" style=""><abbr title=" 312         } else if (field.getFieldType().equals(&quot;NUMBER&quot;) || field.getFieldType().equals(&quot;MONEY&quot;) || field.getFieldType().equals(&quot;DECIMAL&quot;)) {"> 312         } else if (field.getFieldType().equals(&quot;NUMBER&quot;) || field.getFieldType().equals(&quot;MONEY&quot;) || fieldðŸ”µ</abbr></span>
<span class="8490956018155589877" onmouseenter="enter('8490956018155589877');" onmouseout="out('8490956018155589877');" style=""> 313             fieldDTO.setOperators(&quot;blcFilterOperators_Numeric&quot;);                                         </span>
<span class="-3955546677505185448" onmouseenter="enter('-3955546677505185448');" onmouseout="out('-3955546677505185448');" style=""> 314         } else if (field.getFieldType().equals(&quot;BOOLEAN&quot;)) {                                             </span>
<span class="-8455532459880737207" onmouseenter="enter('-8455532459880737207');" onmouseout="out('-8455532459880737207');" style=""> 315             fieldDTO.setOperators(&quot;blcFilterOperators_Boolean&quot;);                                         </span>
<span class="-8945465979032715781" onmouseenter="enter('-8945465979032715781');" onmouseout="out('-8945465979032715781');" style=""> 316         } else if (field.getFieldType().equals(&quot;BROADLEAF_ENUMERATION&quot;)) {                               </span>
<span class="7946158486041049881" onmouseenter="enter('7946158486041049881');" onmouseout="out('7946158486041049881');" style=""> 317             fieldDTO.setOperators(&quot;blcFilterOperators_Enumeration&quot;);                                     </span>
<span class="-1687118105305598570" onmouseenter="enter('-1687118105305598570');" onmouseout="out('-1687118105305598570');" style=""> 318             fieldDTO.setInput(&quot;select&quot;);                                                                 </span>
<span class="5956593754221125403" onmouseenter="enter('5956593754221125403');" onmouseout="out('5956593754221125403');" style=""> 319             fieldDTO.setType(&quot;string&quot;);                                                                  </span>
<span class="-8055867514585232964" onmouseenter="enter('-8055867514585232964');" onmouseout="out('-8055867514585232964');" style=""> 320             String[][] enumerationValues = fmd.getEnumerationValues ();                                  </span>
<span class="-2928874460015298174" onmouseenter="enter('-2928874460015298174');" onmouseout="out('-2928874460015298174');" style=""> 321             Map&lt;String, String&gt; enumMap = new HashMap&lt;&gt;();                                               </span>
<span class="-8241397125169255693" onmouseenter="enter('-8241397125169255693');" onmouseout="out('-8241397125169255693');" style=""> 322             for (int i = 0; i &lt; enumerationValues.length; i++) {                                         </span>
<span class="3518234982487844996" onmouseenter="enter('3518234982487844996');" onmouseout="out('3518234982487844996');" style=""> 323                 enumMap.put(enumerationValues[i][0], enumerationValues[i][1]);                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 324             }                                                                                            </span>
<span  style=""> 325                                                                                                          </span>
<span class="6553005935364150402" onmouseenter="enter('6553005935364150402');" onmouseout="out('6553005935364150402');" style=""> 326             fieldDTO.setValues(new JSONObject(enumMap).toString());                                      </span>
<span class="-5703564682837731123" onmouseenter="enter('-5703564682837731123');" onmouseout="out('-5703564682837731123');" style=""> 327         } else if (field.getFieldType().equals(&quot;ADDITIONAL_FOREIGN_KEY&quot;)) {                              </span>
<span class="4888432392511853941" onmouseenter="enter('4888432392511853941');" onmouseout="out('4888432392511853941');" style=""> 328             fieldDTO.setOperators(&quot;blcFilterOperators_Selectize&quot;);                                       </span>
<span class="5956593754221125403" onmouseenter="enter('5956593754221125403');" onmouseout="out('5956593754221125403');" style=""> 329             fieldDTO.setType(&quot;string&quot;);                                                                  </span>
<span  style=""> 330                                                                                                          </span>
<span class="-7218290231764700666" onmouseenter="enter('-7218290231764700666');" onmouseout="out('-7218290231764700666');" style=""><abbr title=" 331             AdminSection section = adminNavigationService.findAdminSectionByClassAndSectionId(fmd.getForeignKeyClass(), null);"> 331             AdminSection section = adminNavigationService.findAdminSectionByClassAndSectionId(fmd.getForeðŸ”µ</abbr></span>
<span class="2297837107111400660" onmouseenter="enter('2297837107111400660');" onmouseout="out('2297837107111400660');" style=""> 332             if (section != null) {                                                                       </span>
<span class="7209555309149439987" onmouseenter="enter('7209555309149439987');" onmouseout="out('7209555309149439987');" style=""> 333                 String sectionKey = section.getUrl().substring(1);                                       </span>
<span class="-1035532662553188661" onmouseenter="enter('-1035532662553188661');" onmouseout="out('-1035532662553188661');" style=""> 334                 fieldDTO.setSelectizeSectionKey(sectionKey);                                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 335             } else {                                                                                     </span>
<span class="-1256248398739173538" onmouseenter="enter('-1256248398739173538');" onmouseout="out('-1256248398739173538');" style=""> 336                 fieldDTO.setSelectizeSectionKey(fmd.getForeignKeyClass());                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 337             }                                                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 338         } else {                                                                                         </span>
<span class="8880270445034694758" onmouseenter="enter('8880270445034694758');" onmouseout="out('8880270445034694758');" style=""> 339             fieldDTO.setOperators(&quot;blcFilterOperators_Text&quot;);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 340         }                                                                                                </span>
<span  style=""> 341                                                                                                          </span>
<span class="1806966708924182038" onmouseenter="enter('1806966708924182038');" onmouseout="out('1806966708924182038');" style=""> 342         return fieldDTO;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 343     }                                                                                                    </span>
<span  style=""> 344                                                                                                          </span>
<span class="2032004802479742635" onmouseenter="enter('2032004802479742635');" onmouseout="out('2032004802479742635');" style=""> 345     protected Field createHeaderField(Property p, BasicFieldMetadata fmd) {                              </span>
<span class="427159967034734869" onmouseenter="enter('427159967034734869');" onmouseout="out('427159967034734869');" style=""> 346         Field hf;                                                                                        </span>
<span class="-6909671090697516708" onmouseenter="enter('-6909671090697516708');" onmouseout="out('-6909671090697516708');" style=""> 347         if (fmd.getFieldType().equals(SupportedFieldType.EXPLICIT_ENUMERATION) ||                        </span>
<span class="7742695259499854892" onmouseenter="enter('7742695259499854892');" onmouseout="out('7742695259499854892');" style=""> 348                 fmd.getFieldType().equals(SupportedFieldType.BROADLEAF_ENUMERATION) ||                   </span>
<span class="-7610412024039368203" onmouseenter="enter('-7610412024039368203');" onmouseout="out('-7610412024039368203');" style=""> 349                 fmd.getFieldType().equals(SupportedFieldType.DATA_DRIVEN_ENUMERATION) ||                 </span>
<span class="4727590924096529195" onmouseenter="enter('4727590924096529195');" onmouseout="out('4727590924096529195');" style=""> 350                 fmd.getFieldType().equals(SupportedFieldType.EMPTY_ENUMERATION)) {                       </span>
<span class="-4376407603411664672" onmouseenter="enter('-4376407603411664672');" onmouseout="out('-4376407603411664672');" style=""> 351             hf = new ComboField();                                                                       </span>
<span class="5290847828500288961" onmouseenter="enter('5290847828500288961');" onmouseout="out('5290847828500288961');" style=""> 352             ((ComboField) hf).setOptions(fmd.getEnumerationValues());                                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 353         } else {                                                                                         </span>
<span class="5244670954290190768" onmouseenter="enter('5244670954290190768');" onmouseout="out('5244670954290190768');" style=""> 354             hf = new Field();                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 355         }                                                                                                </span>
<span  style=""> 356                                                                                                          </span>
<span class="-8016020800600825313" onmouseenter="enter('-8016020800600825313');" onmouseout="out('-8016020800600825313');" style=""> 357         hf.withName(p.getName())                                                                         </span>
<span class="-6196212150372307342" onmouseenter="enter('-6196212150372307342');" onmouseout="out('-6196212150372307342');" style=""><abbr title=" 358           .withFriendlyName(StringUtils.isNotEmpty(fmd.getFriendlyName()) ? fmd.getFriendlyName() : p.getName())"> 358           .withFriendlyName(StringUtils.isNotEmpty(fmd.getFriendlyName()) ? fmd.getFriendlyName() : p.getðŸ”µ</abbr></span>
<span class="-8419553007953225668" onmouseenter="enter('-8419553007953225668');" onmouseout="out('-8419553007953225668');" style=""> 359           .withOrder(fmd.getGridOrder())                                                                 </span>
<span class="1117956679003990491" onmouseenter="enter('1117956679003990491');" onmouseout="out('1117956679003990491');" style=""> 360           .withColumnWidth(fmd.getColumnWidth())                                                         </span>
<span class="3058247827263925638" onmouseenter="enter('3058247827263925638');" onmouseout="out('3058247827263925638');" style=""> 361           .withForeignKeyDisplayValueProperty(fmd.getForeignKeyDisplayValueProperty())                   </span>
<span class="3198496511046166958" onmouseenter="enter('3198496511046166958');" onmouseout="out('3198496511046166958');" style=""> 362           .withForeignKeyClass(fmd.getForeignKeyClass())                                                 </span>
<span class="-2338070414188990290" onmouseenter="enter('-2338070414188990290');" onmouseout="out('-2338070414188990290');" style=""> 363           .withForeignKeySectionPath(getAdminSectionPath(fmd.getForeignKeyClass()))                      </span>
<span class="6217223457568112539" onmouseenter="enter('6217223457568112539');" onmouseout="out('6217223457568112539');" style=""><abbr title=" 364           .withOwningEntityClass(fmd.getOwningClass() != null ? fmd.getOwningClass() : fmd.getTargetClass())"> 364           .withOwningEntityClass(fmd.getOwningClass() != null ? fmd.getOwningClass() : fmd.getTargetClassðŸ”µ</abbr></span>
<span class="-5416800581554261750" onmouseenter="enter('-5416800581554261750');" onmouseout="out('-5416800581554261750');" style=""> 365           .withCanLinkToExternalEntity(fmd.getCanLinkToExternalEntity());                                </span>
<span class="5921747215124261866" onmouseenter="enter('5921747215124261866');" onmouseout="out('5921747215124261866');" style=""> 366         String fieldType = fmd.getFieldType() == null ? null : fmd.getFieldType().toString();            </span>
<span class="6628044949969244118" onmouseenter="enter('6628044949969244118');" onmouseout="out('6628044949969244118');" style=""> 367         hf.setFieldType(fieldType);                                                                      </span>
<span  style=""> 368                                                                                                          </span>
<span class="-6552084929958187472" onmouseenter="enter('-6552084929958187472');" onmouseout="out('-6552084929958187472');" style=""> 369         return hf;                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 370     }                                                                                                    </span>
<span  style=""> 371                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 372     @Override                                                                                            </span>
<span class="-5402852713479232147" onmouseenter="enter('-5402852713479232147');" onmouseout="out('-5402852713479232147');" style=""><abbr title=" 373     public ListGrid buildCollectionListGrid(String containingEntityId, DynamicResultSet drs, Property field,"> 373     public ListGrid buildCollectionListGrid(String containingEntityId, DynamicResultSet drs, Property fieðŸ”µ</abbr></span>
<span class="8976903068062443392" onmouseenter="enter('8976903068062443392');" onmouseout="out('8976903068062443392');" style=""> 374             String sectionKey, List&lt;SectionCrumb&gt; sectionCrumbs)                                         </span>
<span class="1998458335829271558" onmouseenter="enter('1998458335829271558');" onmouseout="out('1998458335829271558');" style=""> 375             throws ServiceException {                                                                    </span>
<span class="3501499603601527305" onmouseenter="enter('3501499603601527305');" onmouseout="out('3501499603601527305');" style=""> 376         FieldMetadata fmd = field.getMetadata();                                                         </span>
<span class="6565595844041240946" onmouseenter="enter('6565595844041240946');" onmouseout="out('6565595844041240946');" style=""> 377         // Get the class metadata for this particular field                                              </span>
<span class="-8834884127458938753" onmouseenter="enter('-8834884127458938753');" onmouseout="out('-8834884127458938753');" style=""> 378         PersistencePackageRequest ppr = PersistencePackageRequest.fromMetadata(fmd, sectionCrumbs);      </span>
<span class="-470699824173107204" onmouseenter="enter('-470699824173107204');" onmouseout="out('-470699824173107204');" style=""> 379         if (field != null) {                                                                             </span>
<span class="8971896145704334353" onmouseenter="enter('8971896145704334353');" onmouseout="out('8971896145704334353');" style=""> 380             ppr.setSectionEntityField(field.getName());                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 381         }                                                                                                </span>
<span class="1142804962458743647" onmouseenter="enter('1142804962458743647');" onmouseout="out('1142804962458743647');" style=""><abbr title=" 382         ClassMetadata cmd = adminEntityService.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();"> 382         ClassMetadata cmd = adminEntityService.getClassMetadata(ppr).getDynamicResultSet().getClassMetaDaðŸ”µ</abbr></span>
<span  style=""> 383                                                                                                          </span>
<span class="-7098425003691580554" onmouseenter="enter('-7098425003691580554');" onmouseout="out('-7098425003691580554');" style=""> 384         List&lt;Field&gt; headerFields = new ArrayList&lt;&gt;();                                                    </span>
<span class="-9156899327835473831" onmouseenter="enter('-9156899327835473831');" onmouseout="out('-9156899327835473831');" style=""> 385         ListGrid.Type type = null;                                                                       </span>
<span class="2210107579970549810" onmouseenter="enter('2210107579970549810');" onmouseout="out('2210107579970549810');" style=""> 386         boolean editable = false;                                                                        </span>
<span class="-5174966648729145523" onmouseenter="enter('-5174966648729145523');" onmouseout="out('-5174966648729145523');" style=""> 387         boolean sortable = false;                                                                        </span>
<span class="6635173913482908092" onmouseenter="enter('6635173913482908092');" onmouseout="out('6635173913482908092');" style=""> 388         boolean readOnly = false;                                                                        </span>
<span class="-239666301548818102" onmouseenter="enter('-239666301548818102');" onmouseout="out('-239666301548818102');" style=""> 389         boolean hideIdColumn = false;                                                                    </span>
<span class="-8650993504988805305" onmouseenter="enter('-8650993504988805305');" onmouseout="out('-8650993504988805305');" style=""> 390         boolean canFilterAndSort = true;                                                                 </span>
<span class="-2910642919012813708" onmouseenter="enter('-2910642919012813708');" onmouseout="out('-2910642919012813708');" style=""> 391         boolean modalSingleSelectable = false;                                                           </span>
<span class="-5712500441207558612" onmouseenter="enter('-5712500441207558612');" onmouseout="out('-5712500441207558612');" style=""> 392         boolean modalMultiSelectable = false;                                                            </span>
<span class="4919598248352463197" onmouseenter="enter('4919598248352463197');" onmouseout="out('4919598248352463197');" style=""> 393         boolean selectize = false;                                                                       </span>
<span class="3512909155182388697" onmouseenter="enter('3512909155182388697');" onmouseout="out('3512909155182388697');" style=""> 394         boolean isMedia = false;                                                                         </span>
<span class="-2503475837959180700" onmouseenter="enter('-2503475837959180700');" onmouseout="out('-2503475837959180700');" style=""> 395         boolean isLookup = false;                                                                        </span>
<span class="4230800067451301552" onmouseenter="enter('4230800067451301552');" onmouseout="out('4230800067451301552');" style=""> 396         String sortProperty = null;                                                                      </span>
<span class="1914895525805456392" onmouseenter="enter('1914895525805456392');" onmouseout="out('1914895525805456392');" style=""> 397         FieldWrapper wrapper = new FieldWrapper();                                                       </span>
<span class="519132227955412437" onmouseenter="enter('519132227955412437');" onmouseout="out('519132227955412437');" style=""> 398         ArrayList&lt;FieldDTO&gt; defaultWrapperFields = new ArrayList&lt;&gt;();                                    </span>
<span  style=""> 399                                                                                                          </span>
<span  style=""> 400                                                                                                          </span>
<span class="-2507165338472177227" onmouseenter="enter('-2507165338472177227');" onmouseout="out('-2507165338472177227');" style=""> 401         String idProperty = &quot;id&quot;;                                                                        </span>
<span class="-3497335608114491506" onmouseenter="enter('-3497335608114491506');" onmouseout="out('-3497335608114491506');" style=""> 402         for (Property property : cmd.getProperties()) {                                                  </span>
<span class="8031432354977321026" onmouseenter="enter('8031432354977321026');" onmouseout="out('8031432354977321026');" style=""> 403             if (property.getMetadata() instanceof BasicFieldMetadata &amp;&amp;                                  </span>
<span class="-5839489581778150379" onmouseenter="enter('-5839489581778150379');" onmouseout="out('-5839489581778150379');" style=""><abbr title=" 404                     SupportedFieldType.ID==((BasicFieldMetadata) property.getMetadata()).getFieldType() &amp;&amp;"> 404                     SupportedFieldType.ID==((BasicFieldMetadata) property.getMetadata()).getFieldType() &amp;ðŸ”µ</abbr></span>
<span class="493640064601793810" onmouseenter="enter('493640064601793810');" onmouseout="out('493640064601793810');" style=""> 405                     //make sure it&#x27;s a property for this entity - not an association                     </span>
<span class="1409226213228097655" onmouseenter="enter('1409226213228097655');" onmouseout="out('1409226213228097655');" style=""> 406                     !property.getName().contains(&quot;.&quot;)) {                                                 </span>
<span class="2195830063219251158" onmouseenter="enter('2195830063219251158');" onmouseout="out('2195830063219251158');" style=""> 407                 idProperty = property.getName();                                                         </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 408                 break;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 409             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 410         }                                                                                                </span>
<span class="6884921877918156743" onmouseenter="enter('6884921877918156743');" onmouseout="out('6884921877918156743');" style=""><abbr title=" 411         // Get the header fields for this list grid. Note that the header fields are different depending on the"> 411         // Get the header fields for this list grid. Note that the header fields are different depending ðŸ”µ</abbr></span>
<span class="-3735179050749022362" onmouseenter="enter('-3735179050749022362');" onmouseout="out('-3735179050749022362');" style=""> 412         // kind of field this is.                                                                        </span>
<span class="9198797156358178451" onmouseenter="enter('9198797156358178451');" onmouseout="out('9198797156358178451');" style=""> 413         if (fmd instanceof BasicFieldMetadata) {                                                         </span>
<span class="6405821464206093762" onmouseenter="enter('6405821464206093762');" onmouseout="out('6405821464206093762');" style=""> 414             readOnly = ((BasicFieldMetadata) fmd).getReadOnly();                                         </span>
<span class="-1800504749677095068" onmouseenter="enter('-1800504749677095068');" onmouseout="out('-1800504749677095068');" style=""> 415             modalSingleSelectable = true;                                                                </span>
<span class="3681854507729164346" onmouseenter="enter('3681854507729164346');" onmouseout="out('3681854507729164346');" style=""> 416             for (Property p : cmd.getProperties()) {                                                     </span>
<span class="-1029066852878262358" onmouseenter="enter('-1029066852878262358');" onmouseout="out('-1029066852878262358');" style=""> 417                 if (p.getMetadata() instanceof BasicFieldMetadata) {                                     </span>
<span class="-941768582779766785" onmouseenter="enter('-941768582779766785');" onmouseout="out('-941768582779766785');" style=""> 418                     BasicFieldMetadata md = (BasicFieldMetadata) p.getMetadata();                        </span>
<span  style=""> 419                                                                                                          </span>
<span class="-5406944276814759650" onmouseenter="enter('-5406944276814759650');" onmouseout="out('-5406944276814759650');" style=""> 420                     if (SupportedFieldType.ID.equals(md.getFieldType())) {                               </span>
<span class="4761882765386854544" onmouseenter="enter('4761882765386854544');" onmouseout="out('4761882765386854544');" style=""> 421                         idProperty = md.getName();                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 422                     }                                                                                    </span>
<span  style=""> 423                                                                                                          </span>
<span class="-3346338779761665081" onmouseenter="enter('-3346338779761665081');" onmouseout="out('-3346338779761665081');" style=""> 424                     if (md.isProminent() != null &amp;&amp; md.isProminent()                                     </span>
<span class="-8627428290755725902" onmouseenter="enter('-8627428290755725902');" onmouseout="out('-8627428290755725902');" style=""> 425                             &amp;&amp; !ArrayUtils.contains(getGridHiddenVisibilities(), md.getVisibility())) {  </span>
<span class="-1913804071468350989" onmouseenter="enter('-1913804071468350989');" onmouseout="out('-1913804071468350989');" style=""> 426                         Field hf = createHeaderField(p, md);                                             </span>
<span class="465504053416102059" onmouseenter="enter('465504053416102059');" onmouseout="out('465504053416102059');" style=""> 427                         headerFields.add(hf);                                                            </span>
<span class="1435471691691453270" onmouseenter="enter('1435471691691453270');" onmouseout="out('1435471691691453270');" style=""> 428                         defaultWrapperFields.add(constructFieldDTOFromFieldData(hf, md));                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 429                     }                                                                                    </span>
<span  style=""> 430                                                                                                          </span>
<span class="2885325040802931258" onmouseenter="enter('2885325040802931258');" onmouseout="out('2885325040802931258');" style=""> 431                     if (md.getIsFilter() != null &amp;&amp; md.getIsFilter()) {                                  </span>
<span class="6602106188311855247" onmouseenter="enter('6602106188311855247');" onmouseout="out('6602106188311855247');" style=""> 432                         Field f = createHeaderField(p, md);                                              </span>
<span class="-6869394336056843666" onmouseenter="enter('-6869394336056843666');" onmouseout="out('-6869394336056843666');" style=""> 433                         wrapper.getFields().add(constructFieldDTOFromFieldData(f, md));                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 434                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 435                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 436             }                                                                                            </span>
<span  style=""> 437                                                                                                          </span>
<span class="6210556782412808449" onmouseenter="enter('6210556782412808449');" onmouseout="out('6210556782412808449');" style=""> 438             type = ListGrid.Type.TO_ONE;                                                                 </span>
<span class="-1553716655191536539" onmouseenter="enter('-1553716655191536539');" onmouseout="out('-1553716655191536539');" style=""> 439         } else if (fmd instanceof BasicCollectionMetadata) {                                             </span>
<span class="-8775784672799201545" onmouseenter="enter('-8775784672799201545');" onmouseout="out('-8775784672799201545');" style=""> 440             BasicCollectionMetadata bcm = (BasicCollectionMetadata) fmd;                                 </span>
<span class="3088375959257191151" onmouseenter="enter('3088375959257191151');" onmouseout="out('3088375959257191151');" style=""> 441             readOnly = !bcm.isMutable();                                                                 </span>
<span  style=""> 442                                                                                                          </span>
<span class="-7423610773734855911" onmouseenter="enter('-7423610773734855911');" onmouseout="out('-7423610773734855911');" style=""> 443             if(AddMethodType.LOOKUP.equals(bcm.getAddMethodType())) {                                    </span>
<span class="394788880007387168" onmouseenter="enter('394788880007387168');" onmouseout="out('394788880007387168');" style=""> 444                 isLookup = true;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 445             }                                                                                            </span>
<span  style=""> 446                                                                                                          </span>
<span class="-8334523343019219245" onmouseenter="enter('-8334523343019219245');" onmouseout="out('-8334523343019219245');" style=""> 447             if (AddMethodType.SELECTIZE_LOOKUP.equals(bcm.getAddMethodType())) {                         </span>
<span class="-7023171196031834591" onmouseenter="enter('-7023171196031834591');" onmouseout="out('-7023171196031834591');" style=""> 448                 Property p = cmd.getPMap().get(bcm.getSelectizeVisibleField());                          </span>
<span class="-4724213940983805674" onmouseenter="enter('-4724213940983805674');" onmouseout="out('-4724213940983805674');" style=""> 449                 if (p != null) {                                                                         </span>
<span class="-941768582779766785" onmouseenter="enter('-941768582779766785');" onmouseout="out('-941768582779766785');" style=""> 450                     BasicFieldMetadata md = (BasicFieldMetadata) p.getMetadata();                        </span>
<span  style=""> 451                                                                                                          </span>
<span class="-1913804071468350989" onmouseenter="enter('-1913804071468350989');" onmouseout="out('-1913804071468350989');" style=""> 452                     Field hf = createHeaderField(p, md);                                                 </span>
<span class="465504053416102059" onmouseenter="enter('465504053416102059');" onmouseout="out('465504053416102059');" style=""> 453                     headerFields.add(hf);                                                                </span>
<span class="4412272633078565706" onmouseenter="enter('4412272633078565706');" onmouseout="out('4412272633078565706');" style=""> 454                     wrapper.getFields().add(constructFieldDTOFromFieldData(hf, md));                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 455                 }                                                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 456             } else {                                                                                     </span>
<span class="3681854507729164346" onmouseenter="enter('3681854507729164346');" onmouseout="out('3681854507729164346');" style=""> 457                 for (Property p : cmd.getProperties()) {                                                 </span>
<span class="-1029066852878262358" onmouseenter="enter('-1029066852878262358');" onmouseout="out('-1029066852878262358');" style=""> 458                     if (p.getMetadata() instanceof BasicFieldMetadata) {                                 </span>
<span class="-941768582779766785" onmouseenter="enter('-941768582779766785');" onmouseout="out('-941768582779766785');" style=""> 459                         BasicFieldMetadata md = (BasicFieldMetadata) p.getMetadata();                    </span>
<span class="-3346338779761665081" onmouseenter="enter('-3346338779761665081');" onmouseout="out('-3346338779761665081');" style=""> 460                         if (md.isProminent() != null &amp;&amp; md.isProminent()                                 </span>
<span class="-8627428290755725902" onmouseenter="enter('-8627428290755725902');" onmouseout="out('-8627428290755725902');" style=""><abbr title=" 461                                 &amp;&amp; !ArrayUtils.contains(getGridHiddenVisibilities(), md.getVisibility())) {"> 461                                 &amp;&amp; !ArrayUtils.contains(getGridHiddenVisibilities(), md.getVisibility()))ðŸ”µ</abbr></span>
<span class="-1913804071468350989" onmouseenter="enter('-1913804071468350989');" onmouseout="out('-1913804071468350989');" style=""> 462                             Field hf = createHeaderField(p, md);                                         </span>
<span class="465504053416102059" onmouseenter="enter('465504053416102059');" onmouseout="out('465504053416102059');" style=""> 463                             headerFields.add(hf);                                                        </span>
<span class="1435471691691453270" onmouseenter="enter('1435471691691453270');" onmouseout="out('1435471691691453270');" style=""> 464                             defaultWrapperFields.add(constructFieldDTOFromFieldData(hf, md));            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 465                         }                                                                                </span>
<span  style=""> 466                                                                                                          </span>
<span class="2885325040802931258" onmouseenter="enter('2885325040802931258');" onmouseout="out('2885325040802931258');" style=""> 467                         if (md.getIsFilter() != null &amp;&amp; md.getIsFilter()) {                              </span>
<span class="6602106188311855247" onmouseenter="enter('6602106188311855247');" onmouseout="out('6602106188311855247');" style=""> 468                             Field f = createHeaderField(p, md);                                          </span>
<span class="-6869394336056843666" onmouseenter="enter('-6869394336056843666');" onmouseout="out('-6869394336056843666');" style=""> 469                             wrapper.getFields().add(constructFieldDTOFromFieldData(f, md));              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 470                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 471                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 472                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 473             }                                                                                            </span>
<span  style=""> 474                                                                                                          </span>
<span class="5616863682741119985" onmouseenter="enter('5616863682741119985');" onmouseout="out('5616863682741119985');" style=""> 475             type = ListGrid.Type.BASIC;                                                                  </span>
<span  style=""> 476                                                                                                          </span>
<span class="4789284002623142077" onmouseenter="enter('4789284002623142077');" onmouseout="out('4789284002623142077');" style=""><abbr title=" 477             if (AddMethodType.PERSIST.equals(bcm.getAddMethodType()) || AddMethodType.PERSIST_EMPTY.equals(bcm.getAddMethodType())) {"> 477             if (AddMethodType.PERSIST.equals(bcm.getAddMethodType()) || AddMethodType.PERSIST_EMPTY.equalðŸ”µ</abbr></span>
<span class="-5907191702643786371" onmouseenter="enter('-5907191702643786371');" onmouseout="out('-5907191702643786371');" style=""> 478                 editable = true;                                                                         </span>
<span class="-3279362726035609266" onmouseenter="enter('-3279362726035609266');" onmouseout="out('-3279362726035609266');" style=""> 479             } else if (AddMethodType.SELECTIZE_LOOKUP.equals(bcm.getAddMethodType())) {                  </span>
<span class="7652343580882391271" onmouseenter="enter('7652343580882391271');" onmouseout="out('7652343580882391271');" style=""> 480                 selectize = true;                                                                        </span>
<span class="-1800504749677095068" onmouseenter="enter('-1800504749677095068');" onmouseout="out('-1800504749677095068');" style=""> 481                 modalSingleSelectable = true;                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 482             } else {                                                                                     </span>
<span class="-1800504749677095068" onmouseenter="enter('-1800504749677095068');" onmouseout="out('-1800504749677095068');" style=""> 483                 modalSingleSelectable = true;                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 484             }                                                                                            </span>
<span class="-5601810365028455374" onmouseenter="enter('-5601810365028455374');" onmouseout="out('-5601810365028455374');" style=""> 485             sortable = StringUtils.isNotBlank(bcm.getSortProperty());                                    </span>
<span class="5410259152944409683" onmouseenter="enter('5410259152944409683');" onmouseout="out('5410259152944409683');" style=""> 486             if (sortable) {                                                                              </span>
<span class="5401130852877516905" onmouseenter="enter('5401130852877516905');" onmouseout="out('5401130852877516905');" style=""> 487                 sortProperty = bcm.getSortProperty();                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 488             }                                                                                            </span>
<span class="-242736616410190546" onmouseenter="enter('-242736616410190546');" onmouseout="out('-242736616410190546');" style=""> 489         } else if (fmd instanceof AdornedTargetCollectionMetadata) {                                     </span>
<span class="-1800504749677095068" onmouseenter="enter('-1800504749677095068');" onmouseout="out('-1800504749677095068');" style=""> 490             modalSingleSelectable = true;                                                                </span>
<span class="8372678663626684591" onmouseenter="enter('8372678663626684591');" onmouseout="out('8372678663626684591');" style=""> 491             readOnly = !((AdornedTargetCollectionMetadata) fmd).isMutable();                             </span>
<span class="5808828893872341029" onmouseenter="enter('5808828893872341029');" onmouseout="out('5808828893872341029');" style=""> 492             AdornedTargetCollectionMetadata atcmd = (AdornedTargetCollectionMetadata) fmd;               </span>
<span  style=""> 493                                                                                                          </span>
<span class="-8744153650676911691" onmouseenter="enter('-8744153650676911691');" onmouseout="out('-8744153650676911691');" style=""> 494             if(AdornedTargetAddMethodType.LOOKUP.equals(atcmd.getAdornedTargetAddMethodType())) {        </span>
<span class="394788880007387168" onmouseenter="enter('394788880007387168');" onmouseout="out('394788880007387168');" style=""> 495                 isLookup = true;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 496             }                                                                                            </span>
<span  style=""> 497                                                                                                          </span>
<span class="5256125016531832923" onmouseenter="enter('5256125016531832923');" onmouseout="out('5256125016531832923');" style=""><abbr title=" 498             if (AdornedTargetAddMethodType.SELECTIZE_LOOKUP.equals(atcmd.getAdornedTargetAddMethodType())) {"> 498             if (AdornedTargetAddMethodType.SELECTIZE_LOOKUP.equals(atcmd.getAdornedTargetAddMethodType())ðŸ”µ</abbr></span>
<span class="7652343580882391271" onmouseenter="enter('7652343580882391271');" onmouseout="out('7652343580882391271');" style=""> 499                 selectize = true;                                                                        </span>
<span  style=""> 500                                                                                                          </span>
<span class="6698696772959199393" onmouseenter="enter('6698696772959199393');" onmouseout="out('6698696772959199393');" style=""> 501                 Property p = cmd.getPMap().get(atcmd.getSelectizeVisibleField());                        </span>
<span class="-4724213940983805674" onmouseenter="enter('-4724213940983805674');" onmouseout="out('-4724213940983805674');" style=""> 502                 if (p != null) {                                                                         </span>
<span class="-941768582779766785" onmouseenter="enter('-941768582779766785');" onmouseout="out('-941768582779766785');" style=""> 503                     BasicFieldMetadata md = (BasicFieldMetadata) p.getMetadata();                        </span>
<span  style=""> 504                                                                                                          </span>
<span class="-1913804071468350989" onmouseenter="enter('-1913804071468350989');" onmouseout="out('-1913804071468350989');" style=""> 505                     Field hf = createHeaderField(p, md);                                                 </span>
<span class="465504053416102059" onmouseenter="enter('465504053416102059');" onmouseout="out('465504053416102059');" style=""> 506                     headerFields.add(hf);                                                                </span>
<span class="4412272633078565706" onmouseenter="enter('4412272633078565706');" onmouseout="out('4412272633078565706');" style=""> 507                     wrapper.getFields().add(constructFieldDTOFromFieldData(hf, md));                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 508                 }                                                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 509             } else {                                                                                     </span>
<span class="7815744478908232711" onmouseenter="enter('7815744478908232711');" onmouseout="out('7815744478908232711');" style=""> 510                 for (String fieldName : atcmd.getGridVisibleFields()) {                                  </span>
<span class="6577951603357424858" onmouseenter="enter('6577951603357424858');" onmouseout="out('6577951603357424858');" style=""> 511                     Property p = cmd.getPMap().get(fieldName);                                           </span>
<span class="-4724213940983805674" onmouseenter="enter('-4724213940983805674');" onmouseout="out('-4724213940983805674');" style=""> 512                     if (p != null) {                                                                     </span>
<span class="-941768582779766785" onmouseenter="enter('-941768582779766785');" onmouseout="out('-941768582779766785');" style=""> 513                         BasicFieldMetadata md = (BasicFieldMetadata) p.getMetadata();                    </span>
<span  style=""> 514                                                                                                          </span>
<span class="-1913804071468350989" onmouseenter="enter('-1913804071468350989');" onmouseout="out('-1913804071468350989');" style=""> 515                         Field hf = createHeaderField(p, md);                                             </span>
<span class="465504053416102059" onmouseenter="enter('465504053416102059');" onmouseout="out('465504053416102059');" style=""> 516                         headerFields.add(hf);                                                            </span>
<span class="4412272633078565706" onmouseenter="enter('4412272633078565706');" onmouseout="out('4412272633078565706');" style=""> 517                         wrapper.getFields().add(constructFieldDTOFromFieldData(hf, md));                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 518                     }                                                                                    </span>
<span  style=""> 519                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 520                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 521             }                                                                                            </span>
<span  style=""> 522                                                                                                          </span>
<span class="9155103560587761905" onmouseenter="enter('9155103560587761905');" onmouseout="out('9155103560587761905');" style=""> 523             type = ListGrid.Type.ADORNED;                                                                </span>
<span  style=""> 524                                                                                                          </span>
<span class="6020748960132993219" onmouseenter="enter('6020748960132993219');" onmouseout="out('6020748960132993219');" style=""> 525             if (atcmd.getMaintainedAdornedTargetFields().length &gt; 0) {                                   </span>
<span class="-5907191702643786371" onmouseenter="enter('-5907191702643786371');" onmouseout="out('-5907191702643786371');" style=""> 526                 editable = true;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 527             }                                                                                            </span>
<span  style=""> 528                                                                                                          </span>
<span class="5921221796736617807" onmouseenter="enter('5921221796736617807');" onmouseout="out('5921221796736617807');" style=""> 529             AdornedTargetList adornedList = (AdornedTargetList) atcmd.getPersistencePerspective()        </span>
<span class="551023238709431279" onmouseenter="enter('551023238709431279');" onmouseout="out('551023238709431279');" style=""><abbr title=" 530                     .getPersistencePerspectiveItems().get(PersistencePerspectiveItemType.ADORNEDTARGETLIST);"> 530                     .getPersistencePerspectiveItems().get(PersistencePerspectiveItemType.ADORNEDTARGETLISðŸ”µ</abbr></span>
<span class="-3485770976150587717" onmouseenter="enter('-3485770976150587717');" onmouseout="out('-3485770976150587717');" style=""> 531             sortable = StringUtils.isNotBlank(adornedList.getSortField());                               </span>
<span class="5410259152944409683" onmouseenter="enter('5410259152944409683');" onmouseout="out('5410259152944409683');" style=""> 532             if (sortable) {                                                                              </span>
<span class="-4257122370377854741" onmouseenter="enter('-4257122370377854741');" onmouseout="out('-4257122370377854741');" style=""> 533                 sortProperty = adornedList.getSortField();                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 534             }                                                                                            </span>
<span class="-2779851479168607918" onmouseenter="enter('-2779851479168607918');" onmouseout="out('-2779851479168607918');" style=""> 535         } else if (fmd instanceof MapMetadata) {                                                         </span>
<span class="-579137610819846940" onmouseenter="enter('-579137610819846940');" onmouseout="out('-579137610819846940');" style=""> 536             readOnly = !((MapMetadata) fmd).isMutable();                                                 </span>
<span class="4906504520834467748" onmouseenter="enter('4906504520834467748');" onmouseout="out('4906504520834467748');" style=""> 537             MapMetadata mmd = (MapMetadata) fmd;                                                         </span>
<span  style=""> 538                                                                                                          </span>
<span class="8195378525472973548" onmouseenter="enter('8195378525472973548');" onmouseout="out('8195378525472973548');" style=""> 539             Property p2 = cmd.getPMap().get(&quot;key&quot;);                                                      </span>
<span class="8564668864688579354" onmouseenter="enter('8564668864688579354');" onmouseout="out('8564668864688579354');" style=""> 540             BasicFieldMetadata keyMd = (BasicFieldMetadata) p2.getMetadata();                            </span>
<span class="1816634897954632003" onmouseenter="enter('1816634897954632003');" onmouseout="out('1816634897954632003');" style=""> 541             keyMd.setFriendlyName(getMapKeyFriendlyName(p2));                                            </span>
<span class="2754310034023241051" onmouseenter="enter('2754310034023241051');" onmouseout="out('2754310034023241051');" style=""> 542             Field hf = createHeaderField(p2, keyMd);                                                     </span>
<span class="465504053416102059" onmouseenter="enter('465504053416102059');" onmouseout="out('465504053416102059');" style=""> 543             headerFields.add(hf);                                                                        </span>
<span class="-7053544519634906156" onmouseenter="enter('-7053544519634906156');" onmouseout="out('-7053544519634906156');" style=""> 544             wrapper.getFields().add(constructFieldDTOFromFieldData(hf, keyMd));                          </span>
<span  style=""> 545                                                                                                          </span>
<span class="5591331798883124479" onmouseenter="enter('5591331798883124479');" onmouseout="out('5591331798883124479');" style=""> 546             if (mmd.isSimpleValue()) {                                                                   </span>
<span class="4182323386511173091" onmouseenter="enter('4182323386511173091');" onmouseout="out('4182323386511173091');" style=""> 547                 Property valueProperty = cmd.getPMap().get(&quot;value&quot;);                                     </span>
<span class="-6095977990841346888" onmouseenter="enter('-6095977990841346888');" onmouseout="out('-6095977990841346888');" style=""> 548                 BasicFieldMetadata valueMd = (BasicFieldMetadata) valueProperty.getMetadata();           </span>
<span class="-3484742708607220925" onmouseenter="enter('-3484742708607220925');" onmouseout="out('-3484742708607220925');" style=""> 549                 valueMd.setFriendlyName(&quot;Value&quot;);                                                        </span>
<span class="4972432646543922921" onmouseenter="enter('4972432646543922921');" onmouseout="out('4972432646543922921');" style=""> 550                 hf = createHeaderField(valueProperty, valueMd);                                          </span>
<span class="465504053416102059" onmouseenter="enter('465504053416102059');" onmouseout="out('465504053416102059');" style=""> 551                 headerFields.add(hf);                                                                    </span>
<span class="-8637026344597097366" onmouseenter="enter('-8637026344597097366');" onmouseout="out('-8637026344597097366');" style=""> 552                 wrapper.getFields().add(constructFieldDTOFromFieldData(hf, valueMd));                    </span>
<span  style=""> 553                                                                                                          </span>
<span class="-4161155795101164165" onmouseenter="enter('-4161155795101164165');" onmouseout="out('-4161155795101164165');" style=""> 554                 idProperty = &quot;key&quot;;                                                                      </span>
<span class="6613126032600711146" onmouseenter="enter('6613126032600711146');" onmouseout="out('6613126032600711146');" style=""> 555                 hideIdColumn = true;                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 556             } else {                                                                                     </span>
<span class="3681854507729164346" onmouseenter="enter('3681854507729164346');" onmouseout="out('3681854507729164346');" style=""> 557                 for (Property p : cmd.getProperties()) {                                                 </span>
<span class="-1029066852878262358" onmouseenter="enter('-1029066852878262358');" onmouseout="out('-1029066852878262358');" style=""> 558                     if (p.getMetadata() instanceof BasicFieldMetadata) {                                 </span>
<span class="-941768582779766785" onmouseenter="enter('-941768582779766785');" onmouseout="out('-941768582779766785');" style=""> 559                         BasicFieldMetadata md = (BasicFieldMetadata) p.getMetadata();                    </span>
<span class="-8642867949481309577" onmouseenter="enter('-8642867949481309577');" onmouseout="out('-8642867949481309577');" style=""> 560                         String valueClassName = mmd.getValueClassName();                                 </span>
<span class="5979911607115189688" onmouseenter="enter('5979911607115189688');" onmouseout="out('5979911607115189688');" style=""> 561                         if (!StringUtils.isEmpty(mmd.getToOneTargetProperty())) {                        </span>
<span class="-1482207026423407472" onmouseenter="enter('-1482207026423407472');" onmouseout="out('-1482207026423407472');" style=""> 562                             Class&lt;?&gt; clazz;                                                              </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 563                             try {                                                                        </span>
<span class="4641764173848337901" onmouseenter="enter('4641764173848337901');" onmouseout="out('4641764173848337901');" style=""> 564                                 clazz = Class.forName(mmd.getValueClassName());                          </span>
<span class="1054888787890391626" onmouseenter="enter('1054888787890391626');" onmouseout="out('1054888787890391626');" style=""> 565                             } catch (ClassNotFoundException e) {                                         </span>
<span class="-1035238313469204420" onmouseenter="enter('-1035238313469204420');" onmouseout="out('-1035238313469204420');" style=""> 566                                 throw ExceptionHelper.refineException(e);                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 567                             }                                                                            </span>
<span class="-1735437066010488223" onmouseenter="enter('-1735437066010488223');" onmouseout="out('-1735437066010488223');" style=""><abbr title=" 568                             java.lang.reflect.Field nestedField = FieldManager.getSingleField(clazz, mmd.getToOneTargetProperty());"> 568                             java.lang.reflect.Field nestedField = FieldManager.getSingleField(clazz, mmd.ðŸ”µ</abbr></span>
<span class="-7513153605302333321" onmouseenter="enter('-7513153605302333321');" onmouseout="out('-7513153605302333321');" style=""> 569                             ManyToOne manyToOne = nestedField.getAnnotation(ManyToOne.class);            </span>
<span class="3426777525282342717" onmouseenter="enter('3426777525282342717');" onmouseout="out('3426777525282342717');" style=""><abbr title=" 570                             if (manyToOne != null &amp;&amp; !manyToOne.targetEntity().getName().equals(void.class.getName())) {"> 570                             if (manyToOne != null &amp;&amp; !manyToOne.targetEntity().getName().equals(void.clasðŸ”µ</abbr></span>
<span class="2472701616060797628" onmouseenter="enter('2472701616060797628');" onmouseout="out('2472701616060797628');" style=""> 571                                 valueClassName = manyToOne.targetEntity().getName();                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 572                             } else {                                                                     </span>
<span class="7605310444155773026" onmouseenter="enter('7605310444155773026');" onmouseout="out('7605310444155773026');" style=""> 573                                 OneToOne oneToOne = nestedField.getAnnotation(OneToOne.class);           </span>
<span class="6473385945565798584" onmouseenter="enter('6473385945565798584');" onmouseout="out('6473385945565798584');" style=""><abbr title=" 574                                 if (oneToOne != null &amp;&amp; !oneToOne.targetEntity().getName().equals(void.class.getName())) {"> 574                                 if (oneToOne != null &amp;&amp; !oneToOne.targetEntity().getName().equals(void.clðŸ”µ</abbr></span>
<span class="-7479915108694096025" onmouseenter="enter('-7479915108694096025');" onmouseout="out('-7479915108694096025');" style=""> 575                                     valueClassName = oneToOne.targetEntity().getName();                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 576                                 }                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 577                             }                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 578                         }                                                                                </span>
<span class="-5540922815730228658" onmouseenter="enter('-5540922815730228658');" onmouseout="out('-5540922815730228658');" style=""> 579                         if (md.getTargetClass().equals(valueClassName)) {                                </span>
<span class="-3346338779761665081" onmouseenter="enter('-3346338779761665081');" onmouseout="out('-3346338779761665081');" style=""> 580                             if (md.isProminent() != null &amp;&amp; md.isProminent()                             </span>
<span class="-8627428290755725902" onmouseenter="enter('-8627428290755725902');" onmouseout="out('-8627428290755725902');" style=""><abbr title=" 581                                     &amp;&amp; !ArrayUtils.contains(getGridHiddenVisibilities(), md.getVisibility())) {"> 581                                     &amp;&amp; !ArrayUtils.contains(getGridHiddenVisibilities(), md.getVisibilityðŸ”µ</abbr></span>
<span class="8960496946946728749" onmouseenter="enter('8960496946946728749');" onmouseout="out('8960496946946728749');" style=""> 582                                 hf = createHeaderField(p, md);                                           </span>
<span class="465504053416102059" onmouseenter="enter('465504053416102059');" onmouseout="out('465504053416102059');" style=""> 583                                 headerFields.add(hf);                                                    </span>
<span class="1435471691691453270" onmouseenter="enter('1435471691691453270');" onmouseout="out('1435471691691453270');" style=""> 584                                 defaultWrapperFields.add(constructFieldDTOFromFieldData(hf, md));        </span>
<span  style=""> 585                                                                                                          </span>
<span class="-5289673653677501347" onmouseenter="enter('-5289673653677501347');" onmouseout="out('-5289673653677501347');" style=""> 586                                 // Is this a media listgrid                                              </span>
<span class="4853086335987625590" onmouseenter="enter('4853086335987625590');" onmouseout="out('4853086335987625590');" style=""> 587                                 if (hf.getFieldType().equals(&quot;ASSET_LOOKUP&quot;)) {                          </span>
<span class="-8476912243297643828" onmouseenter="enter('-8476912243297643828');" onmouseout="out('-8476912243297643828');" style=""> 588                                     isMedia = true;                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 589                                 }                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 590                             }                                                                            </span>
<span  style=""> 591                                                                                                          </span>
<span class="2885325040802931258" onmouseenter="enter('2885325040802931258');" onmouseout="out('2885325040802931258');" style=""> 592                             if (md.getIsFilter() != null &amp;&amp; md.getIsFilter()) {                          </span>
<span class="1044073206381351305" onmouseenter="enter('1044073206381351305');" onmouseout="out('1044073206381351305');" style=""> 593                                 wrapper.getFields().add(constructFieldDTOFromFieldData(hf,md));          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 594                             }                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 595                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 596                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 597                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 598             }                                                                                            </span>
<span  style=""> 599                                                                                                          </span>
<span class="1402378997093770695" onmouseenter="enter('1402378997093770695');" onmouseout="out('1402378997093770695');" style=""> 600             type = ListGrid.Type.MAP;                                                                    </span>
<span class="-5907191702643786371" onmouseenter="enter('-5907191702643786371');" onmouseout="out('-5907191702643786371');" style=""> 601             editable = true;                                                                             </span>
<span class="8307590133204211823" onmouseenter="enter('8307590133204211823');" onmouseout="out('8307590133204211823');" style=""> 602             canFilterAndSort = false;                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 603         }                                                                                                </span>
<span  style=""> 604                                                                                                          </span>
<span class="4544421216027686155" onmouseenter="enter('4544421216027686155');" onmouseout="out('4544421216027686155');" style=""> 605         String ceilingType = &quot;&quot;;                                                                         </span>
<span class="9198797156358178451" onmouseenter="enter('9198797156358178451');" onmouseout="out('9198797156358178451');" style=""> 606         if (fmd instanceof BasicFieldMetadata) {                                                         </span>
<span class="7794440236473789134" onmouseenter="enter('7794440236473789134');" onmouseout="out('7794440236473789134');" style=""> 607             ceilingType = cmd.getCeilingType();                                                          </span>
<span class="3746105937327671455" onmouseenter="enter('3746105937327671455');" onmouseout="out('3746105937327671455');" style=""> 608         } else if (fmd instanceof CollectionMetadata) {                                                  </span>
<span class="958831769715126463" onmouseenter="enter('958831769715126463');" onmouseout="out('958831769715126463');" style=""> 609             ceilingType = ((CollectionMetadata) fmd).getCollectionCeilingEntity();                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 610         }                                                                                                </span>
<span  style=""> 611                                                                                                          </span>
<span class="5585496722375029284" onmouseenter="enter('5585496722375029284');" onmouseout="out('5585496722375029284');" style=""> 612         if (CollectionUtils.isEmpty(headerFields)) {                                                     </span>
<span class="-3348290953650583379" onmouseenter="enter('-3348290953650583379');" onmouseout="out('-3348290953650583379');" style=""><abbr title=" 613             String message = &quot;There are no listgrid header fields configured for the class &quot; + ceilingType + &quot; and property &#x27;&quot; +"> 613             String message = &quot;There are no listgrid header fields configured for the class &quot; + ceilingTypðŸ”µ</abbr></span>
<span class="7723961843711254229" onmouseenter="enter('7723961843711254229');" onmouseout="out('7723961843711254229');" style=""> 614                     StringUtil.sanitize(field.getName()) + &quot;&#x27;.&quot;;                                         </span>
<span class="-8247546196580792399" onmouseenter="enter('-8247546196580792399');" onmouseout="out('-8247546196580792399');" style=""><abbr title=" 615             if (selectize &amp;&amp; (type == ListGrid.Type.ADORNED || type == ListGrid.Type.ADORNED_WITH_FORM)) {"> 615             if (selectize &amp;&amp; (type == ListGrid.Type.ADORNED || type == ListGrid.Type.ADORNED_WITH_FORM)) ðŸ”µ</abbr></span>
<span class="3128472952734575237" onmouseenter="enter('3128472952734575237');" onmouseout="out('3128472952734575237');" style=""><abbr title=" 616                 message += &quot; Please configure &#x27;selectizeVisibleField&#x27; in your @AdminPresentationAdornedTargetCollection configuration&quot;;"> 616                 message += &quot; Please configure &#x27;selectizeVisibleField&#x27; in your @AdminPresentationAdornedTaðŸ”µ</abbr></span>
<span class="8636226295625239860" onmouseenter="enter('8636226295625239860');" onmouseout="out('8636226295625239860');" style=""> 617             } else if (type == ListGrid.Type.ADORNED || type == ListGrid.Type.ADORNED_WITH_FORM) {       </span>
<span class="2402628808600951472" onmouseenter="enter('2402628808600951472');" onmouseout="out('2402628808600951472');" style=""><abbr title=" 618                 message += &quot; Please configure &#x27;gridVisibleFields&#x27; in your @AdminPresentationAdornedTargetCollection configuration&quot;;"> 618                 message += &quot; Please configure &#x27;gridVisibleFields&#x27; in your @AdminPresentationAdornedTargetðŸ”µ</abbr></span>
<span class="-9137226596697213695" onmouseenter="enter('-9137226596697213695');" onmouseout="out('-9137226596697213695');" style=""> 619             } else if (selectize &amp;&amp; type == ListGrid.Type.BASIC) {                                       </span>
<span class="-3735757397027600216" onmouseenter="enter('-3735757397027600216');" onmouseout="out('-3735757397027600216');" style=""><abbr title=" 620                 message += &quot; Please configure &#x27;selectizeVisibleField&#x27; in your @AdminPresentationCollection configuration&quot;;"> 620                 message += &quot; Please configure &#x27;selectizeVisibleField&#x27; in your @AdminPresentationCollectioðŸ”µ</abbr></span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 621             } else {                                                                                     </span>
<span class="-6242089898795718984" onmouseenter="enter('-6242089898795718984');" onmouseout="out('-6242089898795718984');" style=""> 622                 message += &quot; Please mark some @AdminPresentation fields with &#x27;prominent = true&#x27;&quot;;        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 623             }                                                                                            </span>
<span class="683988342023046623" onmouseenter="enter('683988342023046623');" onmouseout="out('683988342023046623');" style=""> 624             LOG.error(message);                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 625         }                                                                                                </span>
<span  style=""> 626                                                                                                          </span>
<span class="8018024767617726350" onmouseenter="enter('8018024767617726350');" onmouseout="out('8018024767617726350');" style=""><abbr title=" 627         ListGrid listGrid = createListGrid(ceilingType, headerFields, type, drs, sectionKey, fmd.getOrder(), idProperty, sectionCrumbs, sortProperty);"> 627         ListGrid listGrid = createListGrid(ceilingType, headerFields, type, drs, sectionKey, fmd.getOrderðŸ”µ</abbr></span>
<span class="-8260607636786156523" onmouseenter="enter('-8260607636786156523');" onmouseout="out('-8260607636786156523');" style=""> 628         listGrid.setSubCollectionFieldName(field.getName());                                             </span>
<span class="6077403992574006974" onmouseenter="enter('6077403992574006974');" onmouseout="out('6077403992574006974');" style=""> 629         listGrid.setFriendlyName(field.getMetadata().getFriendlyName());                                 </span>
<span class="7905107023107584311" onmouseenter="enter('7905107023107584311');" onmouseout="out('7905107023107584311');" style=""> 630         if (StringUtils.isEmpty(listGrid.getFriendlyName())) {                                           </span>
<span class="7450505976451149249" onmouseenter="enter('7450505976451149249');" onmouseout="out('7450505976451149249');" style=""> 631             listGrid.setFriendlyName(field.getName());                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 632         }                                                                                                </span>
<span class="4004853909217037199" onmouseenter="enter('4004853909217037199');" onmouseout="out('4004853909217037199');" style=""> 633         listGrid.setContainingEntityId(containingEntityId);                                              </span>
<span class="5941008318995473126" onmouseenter="enter('5941008318995473126');" onmouseout="out('5941008318995473126');" style=""> 634         listGrid.setIsReadOnly(readOnly);                                                                </span>
<span class="5221697846686143736" onmouseenter="enter('5221697846686143736');" onmouseout="out('5221697846686143736');" style=""> 635         listGrid.setHideIdColumn(hideIdColumn);                                                          </span>
<span class="103202019101048665" onmouseenter="enter('103202019101048665');" onmouseout="out('103202019101048665');" style=""> 636         listGrid.setCanFilterAndSort(canFilterAndSort);                                                  </span>
<span  style=""> 637                                                                                                          </span>
<span class="2615168876841014995" onmouseenter="enter('2615168876841014995');" onmouseout="out('2615168876841014995');" style=""> 638         // Set up the filter builder params                                                              </span>
<span class="1067693587814186246" onmouseenter="enter('1067693587814186246');" onmouseout="out('1067693587814186246');" style=""> 639         Date c = new Date();                                                                             </span>
<span class="7632548446248454393" onmouseenter="enter('7632548446248454393');" onmouseout="out('7632548446248454393');" style=""> 640         String friendlyName = field.getMetadata().getFriendlyName();                                     </span>
<span class="-1543374359693074653" onmouseenter="enter('-1543374359693074653');" onmouseout="out('-1543374359693074653');" style=""> 641         String jsonFriendlyName = friendlyName.replaceAll(&quot; &quot;, &quot;_&quot;);                                     </span>
<span class="-5194767828410940587" onmouseenter="enter('-5194767828410940587');" onmouseout="out('-5194767828410940587');" style=""> 642         listGrid.setJsonFieldName(jsonFriendlyName + c.getTime() + &quot;Json&quot;);                              </span>
<span class="6488323689834765207" onmouseenter="enter('6488323689834765207');" onmouseout="out('6488323689834765207');" style=""> 643         listGrid.setFriendlyName(friendlyName);                                                          </span>
<span class="-4532597237542010033" onmouseenter="enter('-4532597237542010033');" onmouseout="out('-4532597237542010033');" style=""> 644         listGrid.setFieldBuilder(&quot;RULE_SIMPLE&quot;);                                                         </span>
<span class="2366326534416496613" onmouseenter="enter('2366326534416496613');" onmouseout="out('2366326534416496613');" style=""> 645         if (CollectionUtils.isEmpty(wrapper.getFields())) {                                              </span>
<span class="532531496111421469" onmouseenter="enter('532531496111421469');" onmouseout="out('532531496111421469');" style=""> 646             wrapper.setFields(defaultWrapperFields);                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 647         }                                                                                                </span>
<span class="8083895692807517727" onmouseenter="enter('8083895692807517727');" onmouseout="out('8083895692807517727');" style=""> 648         listGrid.setFieldWrapper(wrapper);                                                               </span>
<span  style=""> 649                                                                                                          </span>
<span class="4466331963824990789" onmouseenter="enter('4466331963824990789');" onmouseout="out('4466331963824990789');" style=""> 650         String blankJsonString =  &quot;{\&quot;data\&quot;:[]}&quot;;                                                       </span>
<span class="7445610059504327235" onmouseenter="enter('7445610059504327235');" onmouseout="out('7445610059504327235');" style=""> 651         listGrid.setJson(blankJsonString);                                                               </span>
<span class="-6647315222721447684" onmouseenter="enter('-6647315222721447684');" onmouseout="out('-6647315222721447684');" style=""> 652         DataWrapper dw = convertJsonToDataWrapper(blankJsonString);                                      </span>
<span class="-3408161092817379645" onmouseenter="enter('-3408161092817379645');" onmouseout="out('-3408161092817379645');" style=""> 653         if (dw != null) {                                                                                </span>
<span class="-933372440492481068" onmouseenter="enter('-933372440492481068');" onmouseout="out('-933372440492481068');" style=""> 654             listGrid.setDataWrapper(dw);                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 655         }                                                                                                </span>
<span  style=""> 656                                                                                                          </span>
<span class="-1934188124142515927" onmouseenter="enter('-1934188124142515927');" onmouseout="out('-1934188124142515927');" style=""> 657         if (editable) {                                                                                  </span>
<span class="-8324356505432784037" onmouseenter="enter('-8324356505432784037');" onmouseout="out('-8324356505432784037');" style=""> 658             listGrid.getRowActions().add(DefaultListGridActions.UPDATE);                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 659         }                                                                                                </span>
<span class="7378462715957185244" onmouseenter="enter('7378462715957185244');" onmouseout="out('7378462715957185244');" style=""> 660         if (readOnly) {                                                                                  </span>
<span class="-5818500246922120128" onmouseenter="enter('-5818500246922120128');" onmouseout="out('-5818500246922120128');" style=""> 661             listGrid.getRowActions().add(DefaultListGridActions.VIEW);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 662         }                                                                                                </span>
<span class="5410259152944409683" onmouseenter="enter('5410259152944409683');" onmouseout="out('5410259152944409683');" style=""> 663         if (sortable) {                                                                                  </span>
<span class="-607660971412807673" onmouseenter="enter('-607660971412807673');" onmouseout="out('-607660971412807673');" style=""> 664             listGrid.setCanFilterAndSort(false);                                                         </span>
<span class="4388200762412113532" onmouseenter="enter('4388200762412113532');" onmouseout="out('4388200762412113532');" style=""> 665             listGrid.setIsSortable(true);                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 666         }                                                                                                </span>
<span  style=""> 667                                                                                                          </span>
<span class="-4128949180761209250" onmouseenter="enter('-4128949180761209250');" onmouseout="out('-4128949180761209250');" style=""> 668         if (modalSingleSelectable) {                                                                     </span>
<span class="7378462715957185244" onmouseenter="enter('7378462715957185244');" onmouseout="out('7378462715957185244');" style=""> 669             if (readOnly) {                                                                              </span>
<span class="876416575304580897" onmouseenter="enter('876416575304580897');" onmouseout="out('876416575304580897');" style=""><abbr title=" 670                 listGrid.addModalRowAction(DefaultListGridActions.SINGLE_SELECT.clone().withForListGridReadOnly(true));"> 670                 listGrid.addModalRowAction(DefaultListGridActions.SINGLE_SELECT.clone().withForListGridReðŸ”µ</abbr></span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 671             } else {                                                                                     </span>
<span class="2808273481648426142" onmouseenter="enter('2808273481648426142');" onmouseout="out('2808273481648426142');" style=""> 672                 listGrid.addModalRowAction(DefaultListGridActions.SINGLE_SELECT);                        </span>
<span  style=""> 673                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 674             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 675         }                                                                                                </span>
<span class="-7419173722157864798" onmouseenter="enter('-7419173722157864798');" onmouseout="out('-7419173722157864798');" style=""> 676         listGrid.setSelectType(ListGrid.SelectType.SINGLE_SELECT);                                       </span>
<span  style=""> 677                                                                                                          </span>
<span class="4421519193138811338" onmouseenter="enter('4421519193138811338');" onmouseout="out('4421519193138811338');" style=""> 678         if (selectize) {                                                                                 </span>
<span class="4330210937183071205" onmouseenter="enter('4330210937183071205');" onmouseout="out('4330210937183071205');" style=""> 679             listGrid.setSelectizeUrl(buildSelectizeUrl(listGrid));                                       </span>
<span class="-6778616649865275600" onmouseenter="enter('-6778616649865275600');" onmouseout="out('-6778616649865275600');" style=""> 680             listGrid.setSelectType(ListGrid.SelectType.SELECTIZE);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 681         }                                                                                                </span>
<span  style=""> 682                                                                                                          </span>
<span class="-318424289412267832" onmouseenter="enter('-318424289412267832');" onmouseout="out('-318424289412267832');" style=""> 683         if (modalMultiSelectable) {                                                                      </span>
<span class="-2076946817204501330" onmouseenter="enter('-2076946817204501330');" onmouseout="out('-2076946817204501330');" style=""> 684             listGrid.addModalRowAction(DefaultListGridActions.MULTI_SELECT);                             </span>
<span class="7572617953044326144" onmouseenter="enter('7572617953044326144');" onmouseout="out('7572617953044326144');" style=""> 685             listGrid.setSelectType(ListGrid.SelectType.MULTI_SELECT);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 686         }                                                                                                </span>
<span class="-8712474510741391938" onmouseenter="enter('-8712474510741391938');" onmouseout="out('-8712474510741391938');" style=""> 687         listGrid.getRowActions().add(DefaultListGridActions.REMOVE);                                     </span>
<span  style=""> 688                                                                                                          </span>
<span class="5224232002379484564" onmouseenter="enter('5224232002379484564');" onmouseout="out('5224232002379484564');" style=""> 689         if (fmd.getManualFetch()) {                                                                      </span>
<span class="-9107723200038018431" onmouseenter="enter('-9107723200038018431');" onmouseout="out('-9107723200038018431');" style=""> 690             listGrid.setManualFetch(true);                                                               </span>
<span class="-1990881339892073084" onmouseenter="enter('-1990881339892073084');" onmouseout="out('-1990881339892073084');" style=""> 691             listGrid.getToolbarActions().add(DefaultListGridActions.MANUAL_FETCH);                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 692         }                                                                                                </span>
<span class="963954107021870727" onmouseenter="enter('963954107021870727');" onmouseout="out('963954107021870727');" style=""> 693         if (isMedia) {                                                                                   </span>
<span class="8560894537765048923" onmouseenter="enter('8560894537765048923');" onmouseout="out('8560894537765048923');" style=""> 694             listGrid.setListGridType(ListGrid.Type.ASSET_GRID);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 695         }                                                                                                </span>
<span  style=""> 696                                                                                                          </span>
<span class="-5511350038403165520" onmouseenter="enter('-5511350038403165520');" onmouseout="out('-5511350038403165520');" style=""> 697         extensionManager.getProxy().modifyListGrid(listGrid.getClassName(), listGrid);                   </span>
<span  style=""> 698                                                                                                          </span>
<span class="-1010311312628539836" onmouseenter="enter('-1010311312628539836');" onmouseout="out('-1010311312628539836');" style=""><abbr title=" 699         //If someone has replaced RowLevelSecurityService, check here to make sure the replacement implements the expected interface"> 699         //If someone has replaced RowLevelSecurityService, check here to make sure the replacement implemðŸ”µ</abbr></span>
<span class="8968842492276656547" onmouseenter="enter('8968842492276656547');" onmouseout="out('8968842492276656547');" style=""> 700         if (rowLevelSecurityService instanceof ExceptionAwareRowLevelSecurityProvider) {                 </span>
<span class="2057574043580690918" onmouseenter="enter('2057574043580690918');" onmouseout="out('2057574043580690918');" style=""><abbr title=" 701             EntityFormModifierConfiguration entityFormModifierConfiguration = ((ExceptionAwareRowLevelSecurityProvider) rowLevelSecurityService).getUpdateDenialExceptions();"> 701             EntityFormModifierConfiguration entityFormModifierConfiguration = ((ExceptionAwareRowLevelSecðŸ”µ</abbr></span>
<span class="-3023990582845647391" onmouseenter="enter('-3023990582845647391');" onmouseout="out('-3023990582845647391');" style=""><abbr title=" 702             for (EntityFormModifierData&lt;EntityFormModifierDataPoint&gt; data : entityFormModifierConfiguration.getData()) {"> 702             for (EntityFormModifierData&lt;EntityFormModifierDataPoint&gt; data : entityFormModifierConfiguratiðŸ”µ</abbr></span>
<span class="9148632731325481398" onmouseenter="enter('9148632731325481398');" onmouseout="out('9148632731325481398');" style=""> 703                 for (EntityFormModifier modifier : entityFormModifierConfiguration.getModifier()) {      </span>
<span class="7131836139928065231" onmouseenter="enter('7131836139928065231');" onmouseout="out('7131836139928065231');" style=""> 704                     if (modifier.isQualified(data.getModifierType())) {                                  </span>
<span class="-3065342187112967306" onmouseenter="enter('-3065342187112967306');" onmouseout="out('-3065342187112967306');" style=""> 705                         modifier.modifyListGrid(new EntityFormModifierRequest()                          </span>
<span class="118085653176366406" onmouseenter="enter('118085653176366406');" onmouseout="out('118085653176366406');" style=""> 706                                 .withListGrid(listGrid)                                                  </span>
<span class="-1014541830042934633" onmouseenter="enter('-1014541830042934633');" onmouseout="out('-1014541830042934633');" style=""> 707                                 .withConfiguration(data)                                                 </span>
<span class="-7538620272607121359" onmouseenter="enter('-7538620272607121359');" onmouseout="out('-7538620272607121359');" style=""> 708                                 .withCurrentUser(adminRemoteSecurityService.getPersistentAdminUser())    </span>
<span class="680994463596247300" onmouseenter="enter('680994463596247300');" onmouseout="out('680994463596247300');" style=""> 709                                 .withRowLevelSecurityService(rowLevelSecurityService));                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 710                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 711                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 712             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 713         }                                                                                                </span>
<span class="8338561479600990216" onmouseenter="enter('8338561479600990216');" onmouseout="out('8338561479600990216');" style=""> 714         return listGrid;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 715     }                                                                                                    </span>
<span  style=""> 716                                                                                                          </span>
<span class="1351139520445861423" onmouseenter="enter('1351139520445861423');" onmouseout="out('1351139520445861423');" style=""> 717     protected String getMapKeyFriendlyName(Property property) {                                          </span>
<span class="5871990330597606657" onmouseenter="enter('5871990330597606657');" onmouseout="out('5871990330597606657');" style=""> 718         String friendlyNameFromMetadata = property.getMetadata().getFriendlyName();                      </span>
<span  style=""> 719                                                                                                          </span>
<span class="3779076262581559101" onmouseenter="enter('3779076262581559101');" onmouseout="out('3779076262581559101');" style=""> 720         return (friendlyNameFromMetadata == null) ? &quot;Key&quot; : friendlyNameFromMetadata;                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 721     }                                                                                                    </span>
<span  style=""> 722                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 723     @Override                                                                                            </span>
<span class="-1413517427251419025" onmouseenter="enter('-1413517427251419025');" onmouseout="out('-1413517427251419025');" style=""><abbr title=" 724     public Map&lt;String, Object&gt; buildSelectizeCollectionInfo(String containingEntityId, DynamicResultSet drs, Property field,"> 724     public Map&lt;String, Object&gt; buildSelectizeCollectionInfo(String containingEntityId, DynamicResultSet dðŸ”µ</abbr></span>
<span class="8976903068062443392" onmouseenter="enter('8976903068062443392');" onmouseout="out('8976903068062443392');" style=""> 725         String sectionKey, List&lt;SectionCrumb&gt; sectionCrumbs)                                             </span>
<span class="1998458335829271558" onmouseenter="enter('1998458335829271558');" onmouseout="out('1998458335829271558');" style=""> 726             throws ServiceException {                                                                    </span>
<span class="3501499603601527305" onmouseenter="enter('3501499603601527305');" onmouseout="out('3501499603601527305');" style=""> 727         FieldMetadata fmd = field.getMetadata();                                                         </span>
<span class="6565595844041240946" onmouseenter="enter('6565595844041240946');" onmouseout="out('6565595844041240946');" style=""> 728         // Get the class metadata for this particular field                                              </span>
<span class="-8834884127458938753" onmouseenter="enter('-8834884127458938753');" onmouseout="out('-8834884127458938753');" style=""> 729         PersistencePackageRequest ppr = PersistencePackageRequest.fromMetadata(fmd, sectionCrumbs);      </span>
<span class="-470699824173107204" onmouseenter="enter('-470699824173107204');" onmouseout="out('-470699824173107204');" style=""> 730         if (field != null) {                                                                             </span>
<span class="8971896145704334353" onmouseenter="enter('8971896145704334353');" onmouseout="out('8971896145704334353');" style=""> 731             ppr.setSectionEntityField(field.getName());                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 732         }                                                                                                </span>
<span class="1142804962458743647" onmouseenter="enter('1142804962458743647');" onmouseout="out('1142804962458743647');" style=""><abbr title=" 733         ClassMetadata cmd = adminEntityService.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();"> 733         ClassMetadata cmd = adminEntityService.getClassMetadata(ppr).getDynamicResultSet().getClassMetaDaðŸ”µ</abbr></span>
<span  style=""> 734                                                                                                          </span>
<span class="-5595331836292860562" onmouseenter="enter('-5595331836292860562');" onmouseout="out('-5595331836292860562');" style=""> 735         Map&lt;String, Object&gt; result = constructSelectizeOptionMap(drs, cmd);                              </span>
<span  style=""> 736                                                                                                          </span>
<span class="-1689031862376375101" onmouseenter="enter('-1689031862376375101');" onmouseout="out('-1689031862376375101');" style=""> 737         AdornedTargetList adornedList = ppr.getAdornedList();                                            </span>
<span class="4210226056962324596" onmouseenter="enter('4210226056962324596');" onmouseout="out('4210226056962324596');" style=""> 738         if (adornedList != null &amp;&amp; adornedList.getLinkedObjectPath() != null                             </span>
<span class="-5584956232917922083" onmouseenter="enter('-5584956232917922083');" onmouseout="out('-5584956232917922083');" style=""> 739             &amp;&amp; adornedList.getTargetObjectPath() != null &amp;&amp; adornedList.getLinkedIdProperty() != null    </span>
<span class="8487613505903596752" onmouseenter="enter('8487613505903596752');" onmouseout="out('8487613505903596752');" style=""> 740             &amp;&amp; adornedList.getTargetIdProperty() != null) {                                              </span>
<span class="7309159037806205694" onmouseenter="enter('7309159037806205694');" onmouseout="out('7309159037806205694');" style=""><abbr title=" 741             result.put(&quot;linkedObjectPath&quot;, adornedList.getLinkedObjectPath() + &quot;.&quot; + adornedList.getLinkedIdProperty());"> 741             result.put(&quot;linkedObjectPath&quot;, adornedList.getLinkedObjectPath() + &quot;.&quot; + adornedList.getLinkeðŸ”µ</abbr></span>
<span class="-6077713782492983195" onmouseenter="enter('-6077713782492983195');" onmouseout="out('-6077713782492983195');" style=""> 742             result.put(&quot;linkedObjectId&quot;, containingEntityId);                                            </span>
<span class="3248709869136196767" onmouseenter="enter('3248709869136196767');" onmouseout="out('3248709869136196767');" style=""><abbr title=" 743             result.put(&quot;targetObjectPath&quot;, adornedList.getTargetObjectPath() + &quot;.&quot; + adornedList.getTargetIdProperty());"> 743             result.put(&quot;targetObjectPath&quot;, adornedList.getTargetObjectPath() + &quot;.&quot; + adornedList.getTargeðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 744         }                                                                                                </span>
<span  style=""> 745                                                                                                          </span>
<span class="-6419540350677864751" onmouseenter="enter('-6419540350677864751');" onmouseout="out('-6419540350677864751');" style=""> 746         return result;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 747     }                                                                                                    </span>
<span  style=""> 748                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 749     @Override                                                                                            </span>
<span class="6193659363548015244" onmouseenter="enter('6193659363548015244');" onmouseout="out('6193659363548015244');" style=""> 750     public Map&lt;String, Object&gt; constructSelectizeOptionMap(DynamicResultSet drs, ClassMetadata cmd) {    </span>
<span class="-2547625323269156657" onmouseenter="enter('-2547625323269156657');" onmouseout="out('-2547625323269156657');" style=""> 751         Map&lt;String, Object&gt; result = new HashMap&lt;&gt;();                                                    </span>
<span class="-1525294692883767948" onmouseenter="enter('-1525294692883767948');" onmouseout="out('-1525294692883767948');" style=""> 752         List&lt;Map&lt;String, String&gt;&gt; options = new ArrayList&lt;&gt;();                                           </span>
<span  style=""> 753                                                                                                          </span>
<span class="-7098425003691580554" onmouseenter="enter('-7098425003691580554');" onmouseout="out('-7098425003691580554');" style=""> 754         List&lt;Field&gt; headerFields = new ArrayList&lt;&gt;();                                                    </span>
<span class="3681854507729164346" onmouseenter="enter('3681854507729164346');" onmouseout="out('3681854507729164346');" style=""> 755         for (Property p : cmd.getProperties()) {                                                         </span>
<span class="-1029066852878262358" onmouseenter="enter('-1029066852878262358');" onmouseout="out('-1029066852878262358');" style=""> 756             if (p.getMetadata() instanceof BasicFieldMetadata) {                                         </span>
<span class="-941768582779766785" onmouseenter="enter('-941768582779766785');" onmouseout="out('-941768582779766785');" style=""> 757                 BasicFieldMetadata md = (BasicFieldMetadata) p.getMetadata();                            </span>
<span class="-3346338779761665081" onmouseenter="enter('-3346338779761665081');" onmouseout="out('-3346338779761665081');" style=""> 758                 if (md.isProminent() != null &amp;&amp; md.isProminent()                                         </span>
<span class="-8627428290755725902" onmouseenter="enter('-8627428290755725902');" onmouseout="out('-8627428290755725902');" style=""> 759                         &amp;&amp; !ArrayUtils.contains(getGridHiddenVisibilities(), md.getVisibility())) {      </span>
<span class="-1913804071468350989" onmouseenter="enter('-1913804071468350989');" onmouseout="out('-1913804071468350989');" style=""> 760                     Field hf = createHeaderField(p, md);                                                 </span>
<span class="465504053416102059" onmouseenter="enter('465504053416102059');" onmouseout="out('465504053416102059');" style=""> 761                     headerFields.add(hf);                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 762                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 763             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 764         }                                                                                                </span>
<span  style=""> 765                                                                                                          </span>
<span class="-5517026699518874938" onmouseenter="enter('-5517026699518874938');" onmouseout="out('-5517026699518874938');" style=""> 766         for (Entity e : drs.getRecords()) {                                                              </span>
<span class="-6136638466040784110" onmouseenter="enter('-6136638466040784110');" onmouseout="out('-6136638466040784110');" style=""> 767             Map&lt;String, String&gt; selectizeOption = new HashMap&lt;&gt;();                                       </span>
<span class="4163901938958293625" onmouseenter="enter('4163901938958293625');" onmouseout="out('4163901938958293625');" style=""> 768             for (Field headerField : headerFields) {                                                     </span>
<span class="5027179794052216178" onmouseenter="enter('5027179794052216178');" onmouseout="out('5027179794052216178');" style=""> 769                 Property p = e.findProperty(headerField.getName());                                      </span>
<span class="-4724213940983805674" onmouseenter="enter('-4724213940983805674');" onmouseout="out('-4724213940983805674');" style=""> 770                 if (p != null) {                                                                         </span>
<span class="4028188550890348466" onmouseenter="enter('4028188550890348466');" onmouseout="out('4028188550890348466');" style=""> 771                     selectizeOption.put(&quot;name&quot;, p.getValue());                                           </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 772                     break;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 773                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 774             }                                                                                            </span>
<span class="842570185536784204" onmouseenter="enter('842570185536784204');" onmouseout="out('842570185536784204');" style=""> 775             if (e.findProperty(&quot;id&quot;) != null) {                                                          </span>
<span class="1619295801241413088" onmouseenter="enter('1619295801241413088');" onmouseout="out('1619295801241413088');" style=""> 776                 selectizeOption.put(&quot;id&quot;, e.findProperty(&quot;id&quot;).getValue());                              </span>
<span class="-5830252244987930005" onmouseenter="enter('-5830252244987930005');" onmouseout="out('-5830252244987930005');" style=""> 777             //  &quot;Locale&quot; entity is a special occasion. Because it have not &quot;ID&quot; column with &quot;Long&quot; type  </span>
<span class="4697280149551476993" onmouseenter="enter('4697280149551476993');" onmouseout="out('4697280149551476993');" style=""> 778             } else if (e.findProperty(&quot;localeCode&quot;) != null) {                                           </span>
<span class="7405190492767879460" onmouseenter="enter('7405190492767879460');" onmouseout="out('7405190492767879460');" style=""> 779                 selectizeOption.put(&quot;id&quot;, e.findProperty(&quot;localeCode&quot;).getValue());                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 780             }                                                                                            </span>
<span class="-7996413909894304887" onmouseenter="enter('-7996413909894304887');" onmouseout="out('-7996413909894304887');" style=""> 781             if (e.findProperty(ALTERNATE_ID_PROPERTY) != null) {                                         </span>
<span class="-2834809076191022214" onmouseenter="enter('-2834809076191022214');" onmouseout="out('-2834809076191022214');" style=""> 782                 selectizeOption.put(&quot;alternateId&quot;, e.findProperty(ALTERNATE_ID_PROPERTY).getValue());    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 783             }                                                                                            </span>
<span class="2407499722406116097" onmouseenter="enter('2407499722406116097');" onmouseout="out('2407499722406116097');" style=""> 784             options.add(selectizeOption);                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 785         }                                                                                                </span>
<span class="-7448816453305947647" onmouseenter="enter('-7448816453305947647');" onmouseout="out('-7448816453305947647');" style=""> 786         result.put(&quot;options&quot;, options);                                                                  </span>
<span  style=""> 787                                                                                                          </span>
<span class="-6419540350677864751" onmouseenter="enter('-6419540350677864751');" onmouseout="out('-6419540350677864751');" style=""> 788         return result;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 789     }                                                                                                    </span>
<span  style=""> 790                                                                                                          </span>
<span class="3610563618424293176" onmouseenter="enter('3610563618424293176');" onmouseout="out('3610563618424293176');" style=""> 791     protected String buildSelectizeUrl(ListGrid listGrid) {                                              </span>
<span class="4360254575720880810" onmouseenter="enter('4360254575720880810');" onmouseout="out('4360254575720880810');" style=""> 792         HttpServletRequest request = BroadleafRequestContext.getBroadleafRequestContext().getRequest();  </span>
<span class="-1223345315803337981" onmouseenter="enter('-1223345315803337981');" onmouseout="out('-1223345315803337981');" style=""> 793         String url = request.getContextPath();                                                           </span>
<span class="-5859217039633283919" onmouseenter="enter('-5859217039633283919');" onmouseout="out('-5859217039633283919');" style=""><abbr title=" 794         url += url.endsWith(&quot;/&quot;) || listGrid.getSectionKey().startsWith(&quot;/&quot;) ? listGrid.getSectionKey() : &quot;/&quot; + listGrid.getSectionKey();"> 794         url += url.endsWith(&quot;/&quot;) || listGrid.getSectionKey().startsWith(&quot;/&quot;) ? listGrid.getSectionKey() :ðŸ”µ</abbr></span>
<span class="5990790066724047703" onmouseenter="enter('5990790066724047703');" onmouseout="out('5990790066724047703');" style=""> 795         url += &quot;/&quot; + listGrid.getContainingEntityId();                                                   </span>
<span class="-5189302616019367476" onmouseenter="enter('-5189302616019367476');" onmouseout="out('-5189302616019367476');" style=""> 796         url += &quot;/&quot; + listGrid.getSubCollectionFieldName();                                               </span>
<span class="6645977004086329618" onmouseenter="enter('6645977004086329618');" onmouseout="out('6645977004086329618');" style=""> 797         return url;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 798     }                                                                                                    </span>
<span  style=""> 799                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 800     /**                                                                                                  </span>
<span class="-3142901546145506196" onmouseenter="enter('-3142901546145506196');" onmouseout="out('-3142901546145506196');" style=""><abbr title=" 801      * @deprecated use {@link #createListGrid(String, List, ListGrid.Type, DynamicResultSet, String, Integer, String, List, String)}"> 801      * @deprecated use {@link #createListGrid(String, List, ListGrid.Type, DynamicResultSet, String, InteðŸ”µ</abbr></span>
<span class="3292690528203019011" onmouseenter="enter('3292690528203019011');" onmouseout="out('3292690528203019011');" style=""> 802      * @param className                                                                                  </span>
<span class="5783752320936502160" onmouseenter="enter('5783752320936502160');" onmouseout="out('5783752320936502160');" style=""> 803      * @param headerFields                                                                               </span>
<span class="4180172247960880324" onmouseenter="enter('4180172247960880324');" onmouseout="out('4180172247960880324');" style=""> 804      * @param type                                                                                       </span>
<span class="-7324022876786324498" onmouseenter="enter('-7324022876786324498');" onmouseout="out('-7324022876786324498');" style=""> 805      * @param drs                                                                                        </span>
<span class="7403666429378321004" onmouseenter="enter('7403666429378321004');" onmouseout="out('7403666429378321004');" style=""> 806      * @param sectionKey                                                                                 </span>
<span class="6414796960983960786" onmouseenter="enter('6414796960983960786');" onmouseout="out('6414796960983960786');" style=""> 807      * @param order                                                                                      </span>
<span class="-2237647657818576638" onmouseenter="enter('-2237647657818576638');" onmouseout="out('-2237647657818576638');" style=""> 808      * @param idProperty                                                                                 </span>
<span class="6383674454506135847" onmouseenter="enter('6383674454506135847');" onmouseout="out('6383674454506135847');" style=""> 809      * @param sectionCrumbs                                                                              </span>
<span class="-9165797340485297481" onmouseenter="enter('-9165797340485297481');" onmouseout="out('-9165797340485297481');" style=""> 810      * @return                                                                                           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 811      */                                                                                                  </span>
<span class="-9122364098618956613" onmouseenter="enter('-9122364098618956613');" onmouseout="out('-9122364098618956613');" style=""> 812     @Deprecated                                                                                          </span>
<span class="4478013600751804718" onmouseenter="enter('4478013600751804718');" onmouseout="out('4478013600751804718');" style=""><abbr title=" 813     protected ListGrid createListGrid(String className, List&lt;Field&gt; headerFields, ListGrid.Type type, DynamicResultSet drs,"> 813     protected ListGrid createListGrid(String className, List&lt;Field&gt; headerFields, ListGrid.Type type, DynðŸ”µ</abbr></span>
<span class="-2475961144071468437" onmouseenter="enter('-2475961144071468437');" onmouseout="out('-2475961144071468437');" style=""> 814             String sectionKey, int order, String idProperty, List&lt;SectionCrumb&gt; sectionCrumbs) {         </span>
<span class="-7836467015459082374" onmouseenter="enter('-7836467015459082374');" onmouseout="out('-7836467015459082374');" style=""><abbr title=" 815        return createListGrid(className,headerFields,type,drs,sectionKey,order,idProperty,sectionCrumbs,null);"> 815        return createListGrid(className,headerFields,type,drs,sectionKey,order,idProperty,sectionCrumbs,nuðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 816     }                                                                                                    </span>
<span  style=""> 817                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 818     /**                                                                                                  </span>
<span class="-6553954062731574601" onmouseenter="enter('-6553954062731574601');" onmouseout="out('-6553954062731574601');" style=""> 819      * Populate a ListGrid with ListGridRecords.                                                         </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 820      *                                                                                                   </span>
<span class="3292690528203019011" onmouseenter="enter('3292690528203019011');" onmouseout="out('3292690528203019011');" style=""> 821      * @param className                                                                                  </span>
<span class="5783752320936502160" onmouseenter="enter('5783752320936502160');" onmouseout="out('5783752320936502160');" style=""> 822      * @param headerFields                                                                               </span>
<span class="4180172247960880324" onmouseenter="enter('4180172247960880324');" onmouseout="out('4180172247960880324');" style=""> 823      * @param type                                                                                       </span>
<span class="-7324022876786324498" onmouseenter="enter('-7324022876786324498');" onmouseout="out('-7324022876786324498');" style=""> 824      * @param drs                                                                                        </span>
<span class="7403666429378321004" onmouseenter="enter('7403666429378321004');" onmouseout="out('7403666429378321004');" style=""> 825      * @param sectionKey                                                                                 </span>
<span class="6414796960983960786" onmouseenter="enter('6414796960983960786');" onmouseout="out('6414796960983960786');" style=""> 826      * @param order                                                                                      </span>
<span class="-2237647657818576638" onmouseenter="enter('-2237647657818576638');" onmouseout="out('-2237647657818576638');" style=""> 827      * @param idProperty                                                                                 </span>
<span class="6383674454506135847" onmouseenter="enter('6383674454506135847');" onmouseout="out('6383674454506135847');" style=""> 828      * @param sectionCrumbs                                                                              </span>
<span class="958697608627838498" onmouseenter="enter('958697608627838498');" onmouseout="out('958697608627838498');" style=""> 829      * @param sortPropery                                                                                </span>
<span class="-9165797340485297481" onmouseenter="enter('-9165797340485297481');" onmouseout="out('-9165797340485297481');" style=""> 830      * @return                                                                                           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 831      */                                                                                                  </span>
<span class="4478013600751804718" onmouseenter="enter('4478013600751804718');" onmouseout="out('4478013600751804718');" style=""><abbr title=" 832     protected ListGrid createListGrid(String className, List&lt;Field&gt; headerFields, ListGrid.Type type, DynamicResultSet drs,"> 832     protected ListGrid createListGrid(String className, List&lt;Field&gt; headerFields, ListGrid.Type type, DynðŸ”µ</abbr></span>
<span class="-6113374608895219377" onmouseenter="enter('-6113374608895219377');" onmouseout="out('-6113374608895219377');" style=""><abbr title=" 833             String sectionKey, Integer order, String idProperty, List&lt;SectionCrumb&gt; sectionCrumbs, String sortPropery) {"> 833             String sectionKey, Integer order, String idProperty, List&lt;SectionCrumb&gt; sectionCrumbs, StringðŸ”µ</abbr></span>
<span class="-449286439783514832" onmouseenter="enter('-449286439783514832');" onmouseout="out('-449286439783514832');" style=""> 834         // Create the list grid and set some basic attributes                                            </span>
<span class="9183228219526841185" onmouseenter="enter('9183228219526841185');" onmouseout="out('9183228219526841185');" style=""> 835         ListGrid listGrid = new ListGrid();                                                              </span>
<span class="-6947819430094733929" onmouseenter="enter('-6947819430094733929');" onmouseout="out('-6947819430094733929');" style=""> 836         listGrid.setClassName(className);                                                                </span>
<span class="4219128016198228062" onmouseenter="enter('4219128016198228062');" onmouseout="out('4219128016198228062');" style=""> 837         listGrid.getHeaderFields().addAll(headerFields);                                                 </span>
<span class="-7949709696885802288" onmouseenter="enter('-7949709696885802288');" onmouseout="out('-7949709696885802288');" style=""> 838         listGrid.setListGridType(type);                                                                  </span>
<span class="8360738814350031256" onmouseenter="enter('8360738814350031256');" onmouseout="out('8360738814350031256');" style=""> 839         listGrid.setSectionCrumbs(sectionCrumbs);                                                        </span>
<span class="-7038501348455923153" onmouseenter="enter('-7038501348455923153');" onmouseout="out('-7038501348455923153');" style=""> 840         listGrid.setSectionKey(sectionKey);                                                              </span>
<span class="5588432900267028426" onmouseenter="enter('5588432900267028426');" onmouseout="out('5588432900267028426');" style=""> 841         listGrid.setOrder(order);                                                                        </span>
<span class="-2959509556644296161" onmouseenter="enter('-2959509556644296161');" onmouseout="out('-2959509556644296161');" style=""> 842         listGrid.setIdProperty(idProperty);                                                              </span>
<span class="-1574850005689313985" onmouseenter="enter('-1574850005689313985');" onmouseout="out('-1574850005689313985');" style=""> 843         listGrid.setStartIndex(drs.getStartIndex());                                                     </span>
<span class="-1229635168663567378" onmouseenter="enter('-1229635168663567378');" onmouseout="out('-1229635168663567378');" style=""> 844         listGrid.setTotalRecords(drs.getTotalRecords());                                                 </span>
<span class="-8685641121402901146" onmouseenter="enter('-8685641121402901146');" onmouseout="out('-8685641121402901146');" style=""> 845         listGrid.setPageSize(drs.getPageSize());                                                         </span>
<span  style=""> 846                                                                                                          </span>
<span class="6809887928661746160" onmouseenter="enter('6809887928661746160');" onmouseout="out('6809887928661746160');" style=""> 847         String sectionIdentifier = extractSectionIdentifierFromCrumb(sectionCrumbs);                     </span>
<span class="-666381629022378153" onmouseenter="enter('-666381629022378153');" onmouseout="out('-666381629022378153');" style=""><abbr title=" 848         AdminSection section = navigationService.findAdminSectionByClassAndSectionId(className, sectionIdentifier);"> 848         AdminSection section = navigationService.findAdminSectionByClassAndSectionId(className, sectionIdðŸ”µ</abbr></span>
<span class="2297837107111400660" onmouseenter="enter('2297837107111400660');" onmouseout="out('2297837107111400660');" style=""> 849         if (section != null) {                                                                           </span>
<span class="-6658763311085780957" onmouseenter="enter('-6658763311085780957');" onmouseout="out('-6658763311085780957');" style=""> 850             listGrid.setExternalEntitySectionKey(section.getUrl());                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 851         }                                                                                                </span>
<span  style=""> 852                                                                                                          </span>
<span class="2209008320918265390" onmouseenter="enter('2209008320918265390');" onmouseout="out('2209008320918265390');" style=""> 853         // format date list grid cells                                                                   </span>
<span class="8206468207203445529" onmouseenter="enter('8206468207203445529');" onmouseout="out('8206468207203445529');" style=""> 854         SimpleDateFormat formatter = new SimpleDateFormat(&quot;MMM d, y @ hh:mma&quot;);                          </span>
<span class="-3380881449399951408" onmouseenter="enter('-3380881449399951408');" onmouseout="out('-3380881449399951408');" style=""> 855         DateFormatSymbols symbols = new DateFormatSymbols(Locale.getDefault());                          </span>
<span class="4107867186349432276" onmouseenter="enter('4107867186349432276');" onmouseout="out('4107867186349432276');" style=""> 856         symbols.setAmPmStrings(new String[] { &quot;am&quot;, &quot;pm&quot; });                                             </span>
<span class="8033599572947753762" onmouseenter="enter('8033599572947753762');" onmouseout="out('8033599572947753762');" style=""> 857         formatter.setDateFormatSymbols(symbols);                                                         </span>
<span  style=""> 858                                                                                                          </span>
<span class="-8955150404377737735" onmouseenter="enter('-8955150404377737735');" onmouseout="out('-8955150404377737735');" style=""> 859         // For each of the entities (rows) in the list grid, we need to build the associated             </span>
<span class="7780135600729227159" onmouseenter="enter('7780135600729227159');" onmouseout="out('7780135600729227159');" style=""> 860         // ListGridRecord and set the required fields on the record. These fields are the same ones      </span>
<span class="-4274337481121146447" onmouseenter="enter('-4274337481121146447');" onmouseout="out('-4274337481121146447');" style=""> 861         // that are used for the header fields.                                                          </span>
<span class="-5517026699518874938" onmouseenter="enter('-5517026699518874938');" onmouseout="out('-5517026699518874938');" style=""> 862         for (Entity e : drs.getRecords()) {                                                              </span>
<span class="1299256644552050382" onmouseenter="enter('1299256644552050382');" onmouseout="out('1299256644552050382');" style=""> 863             ListGridRecord record = new ListGridRecord();                                                </span>
<span class="-8742186718038750131" onmouseenter="enter('-8742186718038750131');" onmouseout="out('-8742186718038750131');" style=""> 864             record.setListGrid(listGrid);                                                                </span>
<span class="6901251098959405515" onmouseenter="enter('6901251098959405515');" onmouseout="out('6901251098959405515');" style=""> 865             record.setDirty(e.isDirty());                                                                </span>
<span class="-5328520837276209835" onmouseenter="enter('-5328520837276209835');" onmouseout="out('-5328520837276209835');" style=""> 866             record.setEntity(e);                                                                         </span>
<span class="4295036974122714095" onmouseenter="enter('4295036974122714095');" onmouseout="out('4295036974122714095');" style=""> 867             if (StringUtils.isNotBlank(sortPropery) &amp;&amp; e.findProperty(sortPropery) != null) {            </span>
<span class="6298096210056644819" onmouseenter="enter('6298096210056644819');" onmouseout="out('6298096210056644819');" style=""> 868                 Property sort = e.findProperty(sortPropery);                                             </span>
<span class="-3019357169870438428" onmouseenter="enter('-3019357169870438428');" onmouseout="out('-3019357169870438428');" style=""> 869                 record.setDisplayOrder(sort.getValue());                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 870             }                                                                                            </span>
<span class="-6805099362032074066" onmouseenter="enter('-6805099362032074066');" onmouseout="out('-6805099362032074066');" style=""> 871             if (e.findProperty(&quot;hasError&quot;) != null) {                                                    </span>
<span class="893890618648542494" onmouseenter="enter('893890618648542494');" onmouseout="out('893890618648542494');" style=""> 872                 Boolean hasError = Boolean.parseBoolean(e.findProperty(&quot;hasError&quot;).getValue());          </span>
<span class="5018109180834939283" onmouseenter="enter('5018109180834939283');" onmouseout="out('5018109180834939283');" style=""> 873                 record.setIsError(hasError);                                                             </span>
<span class="6284086923287170648" onmouseenter="enter('6284086923287170648');" onmouseout="out('6284086923287170648');" style=""> 874                 if (hasError) {                                                                          </span>
<span class="-2405869569788439449" onmouseenter="enter('-2405869569788439449');" onmouseout="out('-2405869569788439449');" style=""> 875                     ExtensionResultStatusType messageResultStatus = listGridErrorExtensionManager        </span>
<span class="60178842478893139" onmouseenter="enter('60178842478893139');" onmouseout="out('60178842478893139');" style=""> 876                             .getProxy().determineErrorMessageForEntity(e, record);                       </span>
<span  style=""> 877                                                                                                          </span>
<span class="4336715785327594030" onmouseenter="enter('4336715785327594030');" onmouseout="out('4336715785327594030');" style=""> 878                     if (ExtensionResultStatusType.NOT_HANDLED.equals(messageResultStatus)) {             </span>
<span class="-5328227180306975968" onmouseenter="enter('-5328227180306975968');" onmouseout="out('-5328227180306975968');" style=""> 879                         record.setErrorKey(&quot;listgrid.record.error&quot;);                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 880                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 881                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 882             }                                                                                            </span>
<span  style=""> 883                                                                                                          </span>
<span class="-6673642350284825111" onmouseenter="enter('-6673642350284825111');" onmouseout="out('-6673642350284825111');" style=""> 884             if (e.findProperty(&quot;progressStatus&quot;) != null) {                                              </span>
<span class="-2405869569788439449" onmouseenter="enter('-2405869569788439449');" onmouseout="out('-2405869569788439449');" style=""> 885                 ExtensionResultStatusType messageResultStatus = listGridErrorExtensionManager            </span>
<span class="-4105959264543865488" onmouseenter="enter('-4105959264543865488');" onmouseout="out('-4105959264543865488');" style=""> 886                         .getProxy().determineStatusMessageForEntity(e, record);                          </span>
<span class="4336715785327594030" onmouseenter="enter('4336715785327594030');" onmouseout="out('4336715785327594030');" style=""> 887                 if (ExtensionResultStatusType.NOT_HANDLED.equals(messageResultStatus)) {                 </span>
<span class="-1619149624396289128" onmouseenter="enter('-1619149624396289128');" onmouseout="out('-1619149624396289128');" style=""> 888                     record.setStatus(e.findProperty(&quot;progressStatus&quot;).getValue());                       </span>
<span class="-5097013158362698405" onmouseenter="enter('-5097013158362698405');" onmouseout="out('-5097013158362698405');" style=""> 889                     record.setStatusCssClass(&quot;listgrid.record.status&quot;);                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 890                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 891             }                                                                                            </span>
<span  style=""> 892                                                                                                          </span>
<span class="6661978459482218631" onmouseenter="enter('6661978459482218631');" onmouseout="out('6661978459482218631');" style=""> 893             if (e.findProperty(idProperty) != null) {                                                    </span>
<span class="-8868360599888536047" onmouseenter="enter('-8868360599888536047');" onmouseout="out('-8868360599888536047');" style=""> 894                 record.setId(e.findProperty(idProperty).getValue());                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 895             }                                                                                            </span>
<span  style=""> 896                                                                                                          </span>
<span class="4163901938958293625" onmouseenter="enter('4163901938958293625');" onmouseout="out('4163901938958293625');" style=""> 897             for (Field headerField : headerFields) {                                                     </span>
<span class="5027179794052216178" onmouseenter="enter('5027179794052216178');" onmouseout="out('5027179794052216178');" style=""> 898                 Property p = e.findProperty(headerField.getName());                                      </span>
<span class="-4724213940983805674" onmouseenter="enter('-4724213940983805674');" onmouseout="out('-4724213940983805674');" style=""> 899                 if (p != null) {                                                                         </span>
<span class="-3806855064372020025" onmouseenter="enter('-3806855064372020025');" onmouseout="out('-3806855064372020025');" style=""> 900                     Field recordField = new Field().withName(headerField.getName())                      </span>
<span class="5094071872860659780" onmouseenter="enter('5094071872860659780');" onmouseout="out('5094071872860659780');" style=""> 901                             .withFriendlyName(headerField.getFriendlyName())                             </span>
<span class="-5738388783204669504" onmouseenter="enter('-5738388783204669504');" onmouseout="out('-5738388783204669504');" style=""> 902                             .withOrder(p.getMetadata().getOrder());                                      </span>
<span  style=""> 903                                                                                                          </span>
<span class="6797523520890025382" onmouseenter="enter('6797523520890025382');" onmouseout="out('6797523520890025382');" style=""> 904                     if (headerField instanceof ComboField) {                                             </span>
<span class="-1809643957227997284" onmouseenter="enter('-1809643957227997284');" onmouseout="out('-1809643957227997284');" style=""> 905                         recordField.setValue(((ComboField) headerField).getOption(p.getValue()));        </span>
<span class="-5676530272089615334" onmouseenter="enter('-5676530272089615334');" onmouseout="out('-5676530272089615334');" style=""> 906                         recordField.setDisplayValue(p.getDisplayValue());                                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 907                     } else {                                                                             </span>
<span class="3939566750475024909" onmouseenter="enter('3939566750475024909');" onmouseout="out('3939566750475024909');" style=""> 908                         if (headerField.getFieldType().equals(&quot;DATE&quot;)) {                                 </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 909                             try {                                                                        </span>
<span class="6474778173321313180" onmouseenter="enter('6474778173321313180');" onmouseout="out('6474778173321313180');" style=""><abbr title=" 910                                 Date date = new SimpleDateFormat(&quot;yyyy.MM.dd HH:mm:ss&quot;).parse(p.getValue());"> 910                                 Date date = new SimpleDateFormat(&quot;yyyy.MM.dd HH:mm:ss&quot;).parse(p.getValue(ðŸ”µ</abbr></span>
<span class="3880682438474898081" onmouseenter="enter('3880682438474898081');" onmouseout="out('3880682438474898081');" style=""> 911                                 String newValue = formatter.format(date);                                </span>
<span class="6595195419554741000" onmouseenter="enter('6595195419554741000');" onmouseout="out('6595195419554741000');" style=""> 912                                 recordField.setValue(newValue);                                          </span>
<span class="2273034781883266774" onmouseenter="enter('2273034781883266774');" onmouseout="out('2273034781883266774');" style=""> 913                             } catch (Exception ex) {                                                     </span>
<span class="-1278861869857480835" onmouseenter="enter('-1278861869857480835');" onmouseout="out('-1278861869857480835');" style=""> 914                                 recordField.setValue(p.getValue());                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 915                             }                                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 916                         } else {                                                                         </span>
<span class="-1278861869857480835" onmouseenter="enter('-1278861869857480835');" onmouseout="out('-1278861869857480835');" style=""> 917                             recordField.setValue(p.getValue());                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 918                         }                                                                                </span>
<span class="-5676530272089615334" onmouseenter="enter('-5676530272089615334');" onmouseout="out('-5676530272089615334');" style=""> 919                         recordField.setDisplayValue(p.getDisplayValue());                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 920                     }                                                                                    </span>
<span  style=""> 921                                                                                                          </span>
<span class="1395793512456166896" onmouseenter="enter('1395793512456166896');" onmouseout="out('1395793512456166896');" style=""> 922                     recordField.setDerived(isDerivedField(headerField, recordField, p));                 </span>
<span  style=""> 923                                                                                                          </span>
<span class="1474914769688142515" onmouseenter="enter('1474914769688142515');" onmouseout="out('1474914769688142515');" style=""> 924                     record.getFields().add(recordField);                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 925                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 926             }                                                                                            </span>
<span  style=""> 927                                                                                                          </span>
<span class="7681410006718809906" onmouseenter="enter('7681410006718809906');" onmouseout="out('7681410006718809906');" style=""> 928             if (e.findProperty(AdminMainEntity.MAIN_ENTITY_NAME_PROPERTY) != null) {                     </span>
<span class="-2560058380276440283" onmouseenter="enter('-2560058380276440283');" onmouseout="out('-2560058380276440283');" style=""> 929                 Field hiddenField = new Field().withName(AdminMainEntity.MAIN_ENTITY_NAME_PROPERTY);     </span>
<span class="-3700863118643080175" onmouseenter="enter('-3700863118643080175');" onmouseout="out('-3700863118643080175');" style=""><abbr title=" 930                 hiddenField.setValue(e.findProperty(AdminMainEntity.MAIN_ENTITY_NAME_PROPERTY).getValue());"> 930                 hiddenField.setValue(e.findProperty(AdminMainEntity.MAIN_ENTITY_NAME_PROPERTY).getValue()ðŸ”µ</abbr></span>
<span class="-8926099734580015874" onmouseenter="enter('-8926099734580015874');" onmouseout="out('-8926099734580015874');" style=""> 931                 record.getHiddenFields().add(hiddenField);                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 932             }                                                                                            </span>
<span  style=""> 933                                                                                                          </span>
<span class="-767503360667085643" onmouseenter="enter('-767503360667085643');" onmouseout="out('-767503360667085643');" style=""> 934             if (e.findProperty(BasicPersistenceModule.ALTERNATE_ID_PROPERTY) != null) {                  </span>
<span class="6815728707096626977" onmouseenter="enter('6815728707096626977');" onmouseout="out('6815728707096626977');" style=""> 935                 record.setAltId(e.findProperty(BasicPersistenceModule.ALTERNATE_ID_PROPERTY).getValue());</span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 936             }                                                                                            </span>
<span  style=""> 937                                                                                                          </span>
<span class="4454208436841958265" onmouseenter="enter('4454208436841958265');" onmouseout="out('4454208436841958265');" style=""> 938             extensionManager.getProxy().modifyListGridRecord(className, record, e);                      </span>
<span  style=""> 939                                                                                                          </span>
<span class="-2046562633600316152" onmouseenter="enter('-2046562633600316152');" onmouseout="out('-2046562633600316152');" style=""> 940             listGrid.getRecords().add(record);                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 941         }                                                                                                </span>
<span  style=""> 942                                                                                                          </span>
<span class="3400018439585714383" onmouseenter="enter('3400018439585714383');" onmouseout="out('3400018439585714383');" style=""> 943         if (drs.getFirstId() != null) {                                                                  </span>
<span class="657069941572346003" onmouseenter="enter('657069941572346003');" onmouseout="out('657069941572346003');" style=""> 944             listGrid.setFirstId(drs.getFirstId());                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 945         }                                                                                                </span>
<span class="-8589701589672818150" onmouseenter="enter('-8589701589672818150');" onmouseout="out('-8589701589672818150');" style=""> 946         if (drs.getLastId() != null) {                                                                   </span>
<span class="8426729182884352986" onmouseenter="enter('8426729182884352986');" onmouseout="out('8426729182884352986');" style=""> 947             listGrid.setLastId(drs.getLastId());                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 948         }                                                                                                </span>
<span class="6275187001061462238" onmouseenter="enter('6275187001061462238');" onmouseout="out('6275187001061462238');" style=""> 949         if (drs.getUpperCount() != null) {                                                               </span>
<span class="-576914595282790069" onmouseenter="enter('-576914595282790069');" onmouseout="out('-576914595282790069');" style=""> 950             listGrid.setUpperCount(drs.getUpperCount());                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 951         }                                                                                                </span>
<span class="4823072466704399057" onmouseenter="enter('4823072466704399057');" onmouseout="out('4823072466704399057');" style=""> 952         if (drs.getLowerCount() != null) {                                                               </span>
<span class="-1903228332443717343" onmouseenter="enter('-1903228332443717343');" onmouseout="out('-1903228332443717343');" style=""> 953             listGrid.setLowerCount(drs.getLowerCount());                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 954         }                                                                                                </span>
<span class="4841764865893204927" onmouseenter="enter('4841764865893204927');" onmouseout="out('4841764865893204927');" style=""> 955         if (drs.getFetchType() != null) {                                                                </span>
<span class="-77798786805735884" onmouseenter="enter('-77798786805735884');" onmouseout="out('-77798786805735884');" style=""> 956             listGrid.setFetchType(drs.getFetchType().toString());                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 957         }                                                                                                </span>
<span class="-9150092368605969111" onmouseenter="enter('-9150092368605969111');" onmouseout="out('-9150092368605969111');" style=""> 958         if (drs.getTotalCountLessThanPageSize() != null) {                                               </span>
<span class="192650896043853585" onmouseenter="enter('192650896043853585');" onmouseout="out('192650896043853585');" style=""> 959             listGrid.setTotalCountLessThanPageSize(drs.getTotalCountLessThanPageSize());                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 960         }                                                                                                </span>
<span class="3404741154469919162" onmouseenter="enter('3404741154469919162');" onmouseout="out('3404741154469919162');" style=""> 961         if (drs.getPromptSearch() != null) {                                                             </span>
<span class="-6611592537868887580" onmouseenter="enter('-6611592537868887580');" onmouseout="out('-6611592537868887580');" style=""> 962             listGrid.setPromptSearch(drs.getPromptSearch());                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 963         }                                                                                                </span>
<span  style=""> 964                                                                                                          </span>
<span class="8338561479600990216" onmouseenter="enter('8338561479600990216');" onmouseout="out('8338561479600990216');" style=""> 965         return listGrid;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 966     }                                                                                                    </span>
<span  style=""> 967                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 968     /**                                                                                                  </span>
<span class="7203476035615582402" onmouseenter="enter('7203476035615582402');" onmouseout="out('7203476035615582402');" style=""><abbr title=" 969      * Determines whether or not a particular field in a record is derived. By default this checks the {@link BasicFieldMetadata}"> 969      * Determines whether or not a particular field in a record is derived. By default this checks the {@ðŸ”µ</abbr></span>
<span class="-4069675647285817004" onmouseenter="enter('-4069675647285817004');" onmouseout="out('-4069675647285817004');" style=""> 970      * for the given Property to see if something on the backend has marked it as derived                </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 971      *                                                                                                   </span>
<span class="2786059063596769946" onmouseenter="enter('2786059063596769946');" onmouseout="out('2786059063596769946');" style=""> 972      * @param headerField the header for this recordField                                                </span>
<span class="7447440891213078037" onmouseenter="enter('7447440891213078037');" onmouseout="out('7447440891213078037');" style=""> 973      * @param recordField the recordField being populated                                                </span>
<span class="8242400819290521133" onmouseenter="enter('8242400819290521133');" onmouseout="out('8242400819290521133');" style=""> 974      * @param p the property that relates to this recordField                                            </span>
<span class="2097819629215924500" onmouseenter="enter('2097819629215924500');" onmouseout="out('2097819629215924500');" style=""> 975      * @return whether or not this field is derived                                                      </span>
<span class="5916081075383634288" onmouseenter="enter('5916081075383634288');" onmouseout="out('5916081075383634288');" style=""><abbr title=" 976      * @see {@link #createListGrid(String, List, ListGrid.Type, DynamicResultSet, String, Integer, String, List, String)}"> 976      * @see {@link #createListGrid(String, List, ListGrid.Type, DynamicResultSet, String, Integer, StringðŸ”µ</abbr></span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 977      */                                                                                                  </span>
<span class="-8637325260962674117" onmouseenter="enter('-8637325260962674117');" onmouseout="out('-8637325260962674117');" style=""> 978     protected Boolean isDerivedField(Field headerField, Field recordField, Property p) {                 </span>
<span class="1661867973140043253" onmouseenter="enter('1661867973140043253');" onmouseout="out('1661867973140043253');" style=""> 979         return BooleanUtils.isTrue(((BasicFieldMetadata) p.getMetadata()).getIsDerived());               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 980     }                                                                                                    </span>
<span  style=""> 981                                                                                                          </span>
<span class="7122600949652716635" onmouseenter="enter('7122600949652716635');" onmouseout="out('7122600949652716635');" style=""> 982     protected void setEntityFormFields(ClassMetadata cmd, EntityForm ef, List&lt;Property&gt; properties) {    </span>
<span class="6325387712166170506" onmouseenter="enter('6325387712166170506');" onmouseout="out('6325387712166170506');" style=""> 983         List&lt;Field&gt; homelessFields = new ArrayList&lt;&gt;();                                                  </span>
<span class="4866400253676981137" onmouseenter="enter('4866400253676981137');" onmouseout="out('4866400253676981137');" style=""> 984         List&lt;Field&gt; fieldsWithAssociations = new ArrayList&lt;&gt;();                                          </span>
<span  style=""> 985                                                                                                          </span>
<span class="2404180692851035070" onmouseenter="enter('2404180692851035070');" onmouseout="out('2404180692851035070');" style=""> 986         for (Property property : properties) {                                                           </span>
<span class="-446642995335437650" onmouseenter="enter('-446642995335437650');" onmouseout="out('-446642995335437650');" style=""> 987             if (property.getMetadata() instanceof BasicFieldMetadata) {                                  </span>
<span class="6647472598704819567" onmouseenter="enter('6647472598704819567');" onmouseout="out('6647472598704819567');" style=""> 988                 BasicFieldMetadata fmd = (BasicFieldMetadata) property.getMetadata();                    </span>
<span  style=""> 989                                                                                                          </span>
<span  style=""> 990                                                                                                          </span>
<span class="-4475069031736235173" onmouseenter="enter('-4475069031736235173');" onmouseout="out('-4475069031736235173');" style=""> 991                 if (!ArrayUtils.contains(getFormHiddenVisibilities(), fmd.getVisibility())) {            </span>
<span class="-6270154255315256607" onmouseenter="enter('-6270154255315256607');" onmouseout="out('-6270154255315256607');" style=""><abbr title=" 992                     // Depending on visibility, field for the particular property is not created on the form"> 992                     // Depending on visibility, field for the particular property is not created on the fðŸ”µ</abbr></span>
<span class="5921747215124261866" onmouseenter="enter('5921747215124261866');" onmouseout="out('5921747215124261866');" style=""> 993                     String fieldType = fmd.getFieldType() == null ? null : fmd.getFieldType().toString();</span>
<span  style=""> 994                                                                                                          </span>
<span class="6708987068205782652" onmouseenter="enter('6708987068205782652');" onmouseout="out('6708987068205782652');" style=""> 995                     // Create the field and set some basic attributes                                    </span>
<span class="8116345463116621173" onmouseenter="enter('8116345463116621173');" onmouseout="out('8116345463116621173');" style=""> 996                     Field f;                                                                             </span>
<span  style=""> 997                                                                                                          </span>
<span class="8199797825370303284" onmouseenter="enter('8199797825370303284');" onmouseout="out('8199797825370303284');" style=""> 998                     if (fieldType.equals(SupportedFieldType.BROADLEAF_ENUMERATION.toString())            </span>
<span class="7716913215106788406" onmouseenter="enter('7716913215106788406');" onmouseout="out('7716913215106788406');" style=""> 999                             || fieldType.equals(SupportedFieldType.EXPLICIT_ENUMERATION.toString())      </span>
<span class="2980977699228922095" onmouseenter="enter('2980977699228922095');" onmouseout="out('2980977699228922095');" style="">1000                             || fieldType.equals(SupportedFieldType.DATA_DRIVEN_ENUMERATION.toString())   </span>
<span class="7388471135187367898" onmouseenter="enter('7388471135187367898');" onmouseout="out('7388471135187367898');" style="">1001                             || fieldType.equals(SupportedFieldType.EMPTY_ENUMERATION.toString())) {      </span>
<span class="3276444675754694915" onmouseenter="enter('3276444675754694915');" onmouseout="out('3276444675754694915');" style=""><abbr title="1002                         // We&#x27;re dealing with fields that should render as drop-downs, so set their possible values">1002                         // We&#x27;re dealing with fields that should render as drop-downs, so set their possiðŸ”µ</abbr></span>
<span class="3203856539989077186" onmouseenter="enter('3203856539989077186');" onmouseout="out('3203856539989077186');" style="">1003                         f = new ComboField();                                                            </span>
<span class="6120731816730172045" onmouseenter="enter('6120731816730172045');" onmouseout="out('6120731816730172045');" style="">1004                         ((ComboField) f).setOptions(fmd.getEnumerationValues());                         </span>
<span class="-4628034205462573751" onmouseenter="enter('-4628034205462573751');" onmouseout="out('-4628034205462573751');" style=""><abbr title="1005                         if (fmd.getHideEnumerationIfEmpty() != null &amp;&amp; fmd.getHideEnumerationIfEmpty().booleanValue()">1005                         if (fmd.getHideEnumerationIfEmpty() != null &amp;&amp; fmd.getHideEnumerationIfEmpty().boðŸ”µ</abbr></span>
<span class="-6675389158909418663" onmouseenter="enter('-6675389158909418663');" onmouseout="out('-6675389158909418663');" style="">1006                                 &amp;&amp; ((ComboField) f).getOptions().size() == 0) {                          </span>
<span class="-8620847541322007209" onmouseenter="enter('-8620847541322007209');" onmouseout="out('-8620847541322007209');" style="">1007                             f.setIsVisible(false);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1008                         }                                                                                </span>
<span class="86452670050279225" onmouseenter="enter('86452670050279225');" onmouseout="out('86452670050279225');" style="">1009                     } else if (fieldType.equals(SupportedFieldType.CODE.toString())) {                   </span>
<span class="-7620786431462842147" onmouseenter="enter('-7620786431462842147');" onmouseout="out('-7620786431462842147');" style="">1010                         f = new CodeField();                                                             </span>
<span class="-3831443983095651615" onmouseenter="enter('-3831443983095651615');" onmouseout="out('-3831443983095651615');" style="">1011                     } else if (fieldType.equals(SupportedFieldType.RULE_SIMPLE.toString())               </span>
<span class="-6155398851072788654" onmouseenter="enter('-6155398851072788654');" onmouseout="out('-6155398851072788654');" style="">1012                             || fieldType.equals(SupportedFieldType.RULE_SIMPLE_TIME.toString())          </span>
<span class="-7731003048108517996" onmouseenter="enter('-7731003048108517996');" onmouseout="out('-7731003048108517996');" style="">1013                             || fieldType.equals(SupportedFieldType.RULE_WITH_QUANTITY.toString())) {     </span>
<span class="1510588759783913078" onmouseenter="enter('1510588759783913078');" onmouseout="out('1510588759783913078');" style="">1014                         // We&#x27;re dealing with rule builders, so we&#x27;ll create those specialized fields    </span>
<span class="439535866421335144" onmouseenter="enter('439535866421335144');" onmouseout="out('439535866421335144');" style="">1015                         f = new RuleBuilderField();                                                      </span>
<span class="-1112724631648616512" onmouseenter="enter('-1112724631648616512');" onmouseout="out('-1112724631648616512');" style="">1016                         ((RuleBuilderField) f).setJsonFieldName(property.getName() + &quot;Json&quot;);            </span>
<span class="1732596643653885393" onmouseenter="enter('1732596643653885393');" onmouseout="out('1732596643653885393');" style="">1017                         ((RuleBuilderField) f).setDataWrapper(new DataWrapper());                        </span>
<span class="7228657391391942788" onmouseenter="enter('7228657391391942788');" onmouseout="out('7228657391391942788');" style="">1018                         ((RuleBuilderField) f).setFieldBuilder(fmd.getRuleIdentifier());                 </span>
<span class="6741378243253493035" onmouseenter="enter('6741378243253493035');" onmouseout="out('6741378243253493035');" style="">1019                         ((RuleBuilderField) f).setDisplayType(fmd.getDisplayType().toString());          </span>
<span  style="">1020                                                                                                          </span>
<span class="4466331963824990789" onmouseenter="enter('4466331963824990789');" onmouseout="out('4466331963824990789');" style="">1021                         String blankJsonString =  &quot;{\&quot;data\&quot;:[]}&quot;;                                       </span>
<span class="-7753853041517398518" onmouseenter="enter('-7753853041517398518');" onmouseout="out('-7753853041517398518');" style="">1022                         ((RuleBuilderField) f).setJson(blankJsonString);                                 </span>
<span class="-6647315222721447684" onmouseenter="enter('-6647315222721447684');" onmouseout="out('-6647315222721447684');" style="">1023                         DataWrapper dw = convertJsonToDataWrapper(blankJsonString);                      </span>
<span class="-3408161092817379645" onmouseenter="enter('-3408161092817379645');" onmouseout="out('-3408161092817379645');" style="">1024                         if (dw != null) {                                                                </span>
<span class="-5096298828793309103" onmouseenter="enter('-5096298828793309103');" onmouseout="out('-5096298828793309103');" style="">1025                             ((RuleBuilderField) f).setDataWrapper(dw);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1026                         }                                                                                </span>
<span  style="">1027                                                                                                          </span>
<span class="3046581447506121497" onmouseenter="enter('3046581447506121497');" onmouseout="out('3046581447506121497');" style="">1028                         if (fieldType.equals(SupportedFieldType.RULE_SIMPLE.toString())) {               </span>
<span class="-1186924665685770541" onmouseenter="enter('-1186924665685770541');" onmouseout="out('-1186924665685770541');" style="">1029                             ((RuleBuilderField) f).setRuleType(&quot;rule-builder-simple&quot;);                   </span>
<span class="-4608843455051291020" onmouseenter="enter('-4608843455051291020');" onmouseout="out('-4608843455051291020');" style="">1030                         } else if (fieldType.equals(SupportedFieldType.RULE_WITH_QUANTITY.toString())) { </span>
<span class="-4088622747979962571" onmouseenter="enter('-4088622747979962571');" onmouseout="out('-4088622747979962571');" style="">1031                             ((RuleBuilderField) f).setRuleType(&quot;rule-builder-with-quantity&quot;);            </span>
<span class="6638316396690215710" onmouseenter="enter('6638316396690215710');" onmouseout="out('6638316396690215710');" style="">1032                         } else if (fieldType.equals(SupportedFieldType.RULE_SIMPLE_TIME.toString())) {   </span>
<span class="-5927097931654974492" onmouseenter="enter('-5927097931654974492');" onmouseout="out('-5927097931654974492');" style="">1033                             ((RuleBuilderField) f).setRuleType(&quot;rule-builder-simple-time&quot;);              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1034                         }                                                                                </span>
<span class="-76815898427635828" onmouseenter="enter('-76815898427635828');" onmouseout="out('-76815898427635828');" style="">1035                     } else if (LookupType.DROPDOWN.equals(fmd.getLookupType())) {                        </span>
<span class="2821913588763042756" onmouseenter="enter('2821913588763042756');" onmouseout="out('2821913588763042756');" style=""><abbr title="1036                         // We&#x27;re dealing with a to-one field that wants to be rendered as a dropdown instead of in a">1036                         // We&#x27;re dealing with a to-one field that wants to be rendered as a dropdown instðŸ”µ</abbr></span>
<span class="566288030321676498" onmouseenter="enter('566288030321676498');" onmouseout="out('566288030321676498');" style=""><abbr title="1037                         // modal, so we&#x27;ll provision the combo field here. Available options will be set as part of a">1037                         // modal, so we&#x27;ll provision the combo field here. Available options will be set ðŸ”µ</abbr></span>
<span class="7172718814241780846" onmouseenter="enter('7172718814241780846');" onmouseout="out('7172718814241780846');" style="">1038                         // subsequent operation                                                          </span>
<span class="3203856539989077186" onmouseenter="enter('3203856539989077186');" onmouseout="out('3203856539989077186');" style="">1039                         f = new ComboField();                                                            </span>
<span class="-1555139312653833561" onmouseenter="enter('-1555139312653833561');" onmouseout="out('-1555139312653833561');" style="">1040                     } else if (fieldType.equals(SupportedFieldType.MEDIA.toString())) {                  </span>
<span class="7851932113124846293" onmouseenter="enter('7851932113124846293');" onmouseout="out('7851932113124846293');" style="">1041                         f = new MediaField();                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1042                     } else {                                                                             </span>
<span class="-4540598357129068716" onmouseenter="enter('-4540598357129068716');" onmouseout="out('-4540598357129068716');" style="">1043                         // Create a default field since there was no specialized handler                 </span>
<span class="8445500457207430044" onmouseenter="enter('8445500457207430044');" onmouseout="out('8445500457207430044');" style="">1044                         f = new Field();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1045                     }                                                                                    </span>
<span  style="">1046                                                                                                          </span>
<span class="-1589475346053267562" onmouseenter="enter('-1589475346053267562');" onmouseout="out('-1589475346053267562');" style="">1047                     Boolean required = fmd.getRequiredOverride();                                        </span>
<span class="-1593138839980229401" onmouseenter="enter('-1593138839980229401');" onmouseout="out('-1593138839980229401');" style="">1048                     if (required == null) {                                                              </span>
<span class="-6716674851132060026" onmouseenter="enter('-6716674851132060026');" onmouseout="out('-6716674851132060026');" style="">1049                         required = fmd.getRequired();                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1050                     }                                                                                    </span>
<span  style="">1051                                                                                                          </span>
<span class="981510687991453845" onmouseenter="enter('981510687991453845');" onmouseout="out('981510687991453845');" style="">1052                     Boolean allowNoValueEnum = fmd.getAllowNoValueEnumOption();                          </span>
<span class="2453461306820272647" onmouseenter="enter('2453461306820272647');" onmouseout="out('2453461306820272647');" style="">1053                     if (allowNoValueEnum != null) {                                                      </span>
<span class="511249052530710714" onmouseenter="enter('511249052530710714');" onmouseout="out('511249052530710714');" style="">1054                         f.setAllowNoValueEnumOption(allowNoValueEnum);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1055                     }                                                                                    </span>
<span  style="">1056                                                                                                          </span>
<span class="-1986899161047350602" onmouseenter="enter('-1986899161047350602');" onmouseout="out('-1986899161047350602');" style="">1057                     f.withName(property.getName())                                                       </span>
<span class="-6128468031482469561" onmouseenter="enter('-6128468031482469561');" onmouseout="out('-6128468031482469561');" style="">1058                      .withFieldType(fieldType)                                                           </span>
<span class="-7927263150118151701" onmouseenter="enter('-7927263150118151701');" onmouseout="out('-7927263150118151701');" style="">1059                      .withFieldComponentRenderer(getFieldComponentRenderer(fmd))                         </span>
<span class="-4099331664389877516" onmouseenter="enter('-4099331664389877516');" onmouseout="out('-4099331664389877516');" style="">1060                      .withGridFieldComponentRenderer(getGridFieldComponentRenderer(fmd))                 </span>
<span class="654425426992808056" onmouseenter="enter('654425426992808056');" onmouseout="out('654425426992808056');" style="">1061                      .withOrder(fmd.getOrder())                                                          </span>
<span class="8839654145383232945" onmouseenter="enter('8839654145383232945');" onmouseout="out('8839654145383232945');" style="">1062                      .withFriendlyName(fmd.getFriendlyName())                                            </span>
<span class="3058247827263925638" onmouseenter="enter('3058247827263925638');" onmouseout="out('3058247827263925638');" style="">1063                      .withForeignKeyDisplayValueProperty(fmd.getForeignKeyDisplayValueProperty())        </span>
<span class="3198496511046166958" onmouseenter="enter('3198496511046166958');" onmouseout="out('3198496511046166958');" style="">1064                      .withForeignKeyClass(fmd.getForeignKeyClass())                                      </span>
<span class="-2338070414188990290" onmouseenter="enter('-2338070414188990290');" onmouseout="out('-2338070414188990290');" style="">1065                      .withForeignKeySectionPath(getAdminSectionPath(fmd.getForeignKeyClass()))           </span>
<span class="-6320050738227309064" onmouseenter="enter('-6320050738227309064');" onmouseout="out('-6320050738227309064');" style=""><abbr title="1066                      .withOwningEntityClass(fmd.getOwningClass()!=null?fmd.getOwningClass():fmd.getInheritedFromType())">1066                      .withOwningEntityClass(fmd.getOwningClass()!=null?fmd.getOwningClass():fmd.getInheriðŸ”µ</abbr></span>
<span class="3975803686122841065" onmouseenter="enter('3975803686122841065');" onmouseout="out('3975803686122841065');" style="">1067                      .withRequired(required)                                                             </span>
<span class="359983231603260957" onmouseenter="enter('359983231603260957');" onmouseout="out('359983231603260957');" style="">1068                      .withReadOnly(fmd.getReadOnly())                                                    </span>
<span class="5042583388418599955" onmouseenter="enter('5042583388418599955');" onmouseout="out('5042583388418599955');" style="">1069                      .withTranslatable(fmd.getTranslatable())                                            </span>
<span class="850947769734677156" onmouseenter="enter('850947769734677156');" onmouseout="out('850947769734677156');" style=""><abbr title="1070                      .withAlternateOrdering((Boolean) fmd.getAdditionalMetadata().get(Field.ALTERNATE_ORDERING))">1070                      .withAlternateOrdering((Boolean) fmd.getAdditionalMetadata().get(Field.ALTERNATE_ORDðŸ”µ</abbr></span>
<span class="3384004197069247045" onmouseenter="enter('3384004197069247045');" onmouseout="out('3384004197069247045');" style="">1071                      .withLargeEntry(fmd.isLargeEntry())                                                 </span>
<span class="8358279492731939259" onmouseenter="enter('8358279492731939259');" onmouseout="out('8358279492731939259');" style="">1072                      .withHint(fmd.getHint())                                                            </span>
<span class="2950855740871622056" onmouseenter="enter('2950855740871622056');" onmouseout="out('2950855740871622056');" style="">1073                      .withTooltip(fmd.getTooltip())                                                      </span>
<span class="-4063412654801023815" onmouseenter="enter('-4063412654801023815');" onmouseout="out('-4063412654801023815');" style="">1074                      .withHelp(fmd.getHelpText())                                                        </span>
<span class="-2322162613997207656" onmouseenter="enter('-2322162613997207656');" onmouseout="out('-2322162613997207656');" style="">1075                      .withTypeaheadEnabled(fmd.getEnableTypeaheadLookup())                               </span>
<span class="3999494576911658619" onmouseenter="enter('3999494576911658619');" onmouseout="out('3999494576911658619');" style="">1076                      .withCanLinkToExternalEntity(fmd.getCanLinkToExternalEntity())                      </span>
<span class="6462182061714529877" onmouseenter="enter('6462182061714529877');" onmouseout="out('6462182061714529877');" style="">1077                      .withAssociatedFieldName(fmd.getAssociatedFieldName());                             </span>
<span  style="">1078                                                                                                          </span>
<span class="-269468944390639664" onmouseenter="enter('-269468944390639664');" onmouseout="out('-269468944390639664');" style="">1079                     String defaultValue = fmd.getDefaultValue();                                         </span>
<span class="517621878739872731" onmouseenter="enter('517621878739872731');" onmouseout="out('517621878739872731');" style="">1080                     if (defaultValue != null) {                                                          </span>
<span class="4532975392407713565" onmouseenter="enter('4532975392407713565');" onmouseout="out('4532975392407713565');" style="">1081                         defaultValue = extractDefaultValueFromFieldData(fieldType, fmd);                 </span>
<span class="-4862494673796786760" onmouseenter="enter('-4862494673796786760');" onmouseout="out('-4862494673796786760');" style="">1082                         f.withValue(defaultValue);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1083                     }                                                                                    </span>
<span  style="">1084                                                                                                          </span>
<span class="-2242732727084199547" onmouseenter="enter('-2242732727084199547');" onmouseout="out('-2242732727084199547');" style="">1085                     if (StringUtils.isBlank(f.getFriendlyName())) {                                      </span>
<span class="4951409134206579242" onmouseenter="enter('4951409134206579242');" onmouseout="out('4951409134206579242');" style="">1086                         f.setFriendlyName(f.getName());                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1087                     }                                                                                    </span>
<span  style="">1088                                                                                                          </span>
<span class="4434831944931004928" onmouseenter="enter('4434831944931004928');" onmouseout="out('4434831944931004928');" style="">1089                     // If is form hidden, set visible to false                                           </span>
<span class="-7962146999992485704" onmouseenter="enter('-7962146999992485704');" onmouseout="out('-7962146999992485704');" style="">1090                     if (VisibilityEnum.FORM_EXPLICITLY_HIDDEN.equals(fmd.getVisibility())) {             </span>
<span class="-8620847541322007209" onmouseenter="enter('-8620847541322007209');" onmouseout="out('-8620847541322007209');" style="">1091                         f.setIsVisible(false);                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1092                     }                                                                                    </span>
<span  style="">1093                                                                                                          </span>
<span class="5627296841760402753" onmouseenter="enter('5627296841760402753');" onmouseout="out('5627296841760402753');" style="">1094                     if (VisibilityEnum.VISIBLE_ALL.equals(fmd.getVisibility())) {                        </span>
<span class="2458976513889241970" onmouseenter="enter('2458976513889241970');" onmouseout="out('2458976513889241970');" style="">1095                         f.setIsVisible(true);                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1096                     }                                                                                    </span>
<span  style="">1097                                                                                                          </span>
<span class="5834486891091757584" onmouseenter="enter('5834486891091757584');" onmouseout="out('5834486891091757584');" style="">1098                     // Add the field to the appropriate FieldGroup                                       </span>
<span class="-1630394947978608902" onmouseenter="enter('-1630394947978608902');" onmouseout="out('-1630394947978608902');" style="">1099                     if (fmd.getGroup() == null) {                                                        </span>
<span class="3071880473996022899" onmouseenter="enter('3071880473996022899');" onmouseout="out('3071880473996022899');" style="">1100                         homelessFields.add(f);                                                           </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1101                     } else {                                                                             </span>
<span class="-627881575057280692" onmouseenter="enter('-627881575057280692');" onmouseout="out('-627881575057280692');" style=""><abbr title="1102                         ef.addField(cmd, f, fmd.getGroup(), fmd.getGroupOrder(), fmd.getTab(), fmd.getTabOrder());">1102                         ef.addField(cmd, f, fmd.getGroup(), fmd.getGroupOrder(), fmd.getTab(), fmd.getTabðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1103                     }                                                                                    </span>
<span  style="">1104                                                                                                          </span>
<span class="-260794109391612652" onmouseenter="enter('-260794109391612652');" onmouseout="out('-260794109391612652');" style="">1105                     if (StringUtils.isNotEmpty(fmd.getAssociatedFieldName())) {                          </span>
<span class="1585765122221468977" onmouseenter="enter('1585765122221468977');" onmouseout="out('1585765122221468977');" style="">1106                         fieldsWithAssociations.add(f);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1107                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1108                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1109             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1110         }                                                                                                </span>
<span  style="">1111                                                                                                          </span>
<span class="6148030130019845419" onmouseenter="enter('6148030130019845419');" onmouseout="out('6148030130019845419');" style="">1112         for (Field f : homelessFields) {                                                                 </span>
<span class="-6046258263556396205" onmouseenter="enter('-6046258263556396205');" onmouseout="out('-6046258263556396205');" style="">1113             ef.addField(cmd, f, null, null, null, null);                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1114         }                                                                                                </span>
<span  style="">1115                                                                                                          </span>
<span class="-3286982672520556792" onmouseenter="enter('-3286982672520556792');" onmouseout="out('-3286982672520556792');" style="">1116         for (Field f : fieldsWithAssociations) {                                                         </span>
<span class="785772779687320855" onmouseenter="enter('785772779687320855');" onmouseout="out('785772779687320855');" style="">1117             Field associatedField = findAssociatedField(ef, f);                                          </span>
<span class="6919514124287833745" onmouseenter="enter('6919514124287833745');" onmouseout="out('6919514124287833745');" style="">1118             if (associatedField != null) {                                                               </span>
<span class="-9095335942205451536" onmouseenter="enter('-9095335942205451536');" onmouseout="out('-9095335942205451536');" style="">1119                 associatedField.setShouldRender(false);                                                  </span>
<span class="-2878946802658158988" onmouseenter="enter('-2878946802658158988');" onmouseout="out('-2878946802658158988');" style="">1120                 f.setAssociatedFieldName(associatedField.getName());                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1121             } else {                                                                                     </span>
<span class="7502764524857913063" onmouseenter="enter('7502764524857913063');" onmouseout="out('7502764524857913063');" style="">1122                 f.setAssociatedFieldName(null);                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1123             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1124         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1125     }                                                                                                    </span>
<span  style="">1126                                                                                                          </span>
<span class="5762152267566694667" onmouseenter="enter('5762152267566694667');" onmouseout="out('5762152267566694667');" style="">1127     protected String getFieldComponentRenderer(BasicFieldMetadata fmd) {                                 </span>
<span class="-6767392947458941920" onmouseenter="enter('-6767392947458941920');" onmouseout="out('-6767392947458941920');" style="">1128         if (StringUtils.isNotBlank(fmd.getFieldComponentRendererTemplate())) {                           </span>
<span class="-4402549852767313598" onmouseenter="enter('-4402549852767313598');" onmouseout="out('-4402549852767313598');" style="">1129             return fmd.getFieldComponentRendererTemplate();                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1130         }                                                                                                </span>
<span class="-2438701386053680498" onmouseenter="enter('-2438701386053680498');" onmouseout="out('-2438701386053680498');" style="">1131         return fmd.getFieldComponentRenderer()==null?null:fmd.getFieldComponentRenderer().toString();    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1132     }                                                                                                    </span>
<span  style="">1133                                                                                                          </span>
<span class="590879222954667418" onmouseenter="enter('590879222954667418');" onmouseout="out('590879222954667418');" style="">1134     protected String getGridFieldComponentRenderer(BasicFieldMetadata fmd) {                             </span>
<span class="7087363204431348668" onmouseenter="enter('7087363204431348668');" onmouseout="out('7087363204431348668');" style="">1135         if (StringUtils.isNotBlank(fmd.getGridFieldComponentRendererTemplate())) {                       </span>
<span class="5883340390214386055" onmouseenter="enter('5883340390214386055');" onmouseout="out('5883340390214386055');" style="">1136             return fmd.getGridFieldComponentRendererTemplate();                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1137         }                                                                                                </span>
<span class="-7287009246855470147" onmouseenter="enter('-7287009246855470147');" onmouseout="out('-7287009246855470147');" style=""><abbr title="1138         return fmd.getGridFieldComponentRenderer()==null?null:fmd.getGridFieldComponentRenderer().toString();">1138         return fmd.getGridFieldComponentRenderer()==null?null:fmd.getGridFieldComponentRenderer().toStrinðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1139     }                                                                                                    </span>
<span  style="">1140                                                                                                          </span>
<span class="-6562218165361923864" onmouseenter="enter('-6562218165361923864');" onmouseout="out('-6562218165361923864');" style="">1141     private Field findAssociatedField(EntityForm ef, Field f) {                                          </span>
<span class="4174722207334262365" onmouseenter="enter('4174722207334262365');" onmouseout="out('4174722207334262365');" style="">1142         // Try on the parent object                                                                      </span>
<span class="-1388610369938356597" onmouseenter="enter('-1388610369938356597');" onmouseout="out('-1388610369938356597');" style="">1143         Field associatedField = ef.findField(f.getAssociatedFieldName());                                </span>
<span  style="">1144                                                                                                          </span>
<span class="-8057832969882318537" onmouseenter="enter('-8057832969882318537');" onmouseout="out('-8057832969882318537');" style="">1145         if (associatedField == null) {                                                                   </span>
<span class="-4315839339096222496" onmouseenter="enter('-4315839339096222496');" onmouseout="out('-4315839339096222496');" style="">1146             // Check the field&#x27;s path                                                                    </span>
<span class="-3489350751131411992" onmouseenter="enter('-3489350751131411992');" onmouseout="out('-3489350751131411992');" style="">1147             String[] fieldPathParts = f.getName().split(&quot;\\.&quot;);                                          </span>
<span class="1068980887755244265" onmouseenter="enter('1068980887755244265');" onmouseout="out('1068980887755244265');" style="">1148             String testPath = &quot;&quot;;                                                                        </span>
<span  style="">1149                                                                                                          </span>
<span class="8677207579218271674" onmouseenter="enter('8677207579218271674');" onmouseout="out('8677207579218271674');" style="">1150             for (String path : fieldPathParts) {                                                         </span>
<span class="-680931118424370884" onmouseenter="enter('-680931118424370884');" onmouseout="out('-680931118424370884');" style="">1151                 testPath += path + &quot;.&quot;;                                                                  </span>
<span  style="">1152                                                                                                          </span>
<span class="-7538860418203958404" onmouseenter="enter('-7538860418203958404');" onmouseout="out('-7538860418203958404');" style="">1153                 associatedField = ef.findField(testPath + f.getAssociatedFieldName());                   </span>
<span class="6919514124287833745" onmouseenter="enter('6919514124287833745');" onmouseout="out('6919514124287833745');" style="">1154                 if (associatedField != null) {                                                           </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1155                     break;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1156                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1157             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1158         }                                                                                                </span>
<span class="6563544998135133572" onmouseenter="enter('6563544998135133572');" onmouseout="out('6563544998135133572');" style="">1159         return associatedField;                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1160     }                                                                                                    </span>
<span  style="">1161                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1162     /**                                                                                                  </span>
<span class="4647529469504582079" onmouseenter="enter('4647529469504582079');" onmouseout="out('4647529469504582079');" style="">1163      * This method gets the {@link AdminSection} for the given foreignKeyClass parameter. If none exists,</span>
<span class="2236731749674454246" onmouseenter="enter('2236731749674454246');" onmouseout="out('2236731749674454246');" style="">1164      * it returns the foreignKeyClass.                                                                   </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1165      *                                                                                                   </span>
<span class="-7514279057842438906" onmouseenter="enter('-7514279057842438906');" onmouseout="out('-7514279057842438906');" style="">1166      * @param foreignKeyClass the {@link String} class name                                              </span>
<span class="7993230679639641523" onmouseenter="enter('7993230679639641523');" onmouseout="out('7993230679639641523');" style="">1167      * @return the admin section pathname                                                                </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1168      */                                                                                                  </span>
<span class="-6189454574455820362" onmouseenter="enter('-6189454574455820362');" onmouseout="out('-6189454574455820362');" style="">1169     protected String getAdminSectionPath(String foreignKeyClass) {                                       </span>
<span class="8135436521484469970" onmouseenter="enter('8135436521484469970');" onmouseout="out('8135436521484469970');" style="">1170         if (foreignKeyClass != null) {                                                                   </span>
<span class="-4650736007503046520" onmouseenter="enter('-4650736007503046520');" onmouseout="out('-4650736007503046520');" style=""><abbr title="1171             AdminSection foreignKeySection = adminNavigationService.findAdminSectionByClassAndSectionId(foreignKeyClass, null);">1171             AdminSection foreignKeySection = adminNavigationService.findAdminSectionByClassAndSectionId(fðŸ”µ</abbr></span>
<span class="-7201502785940326159" onmouseenter="enter('-7201502785940326159');" onmouseout="out('-7201502785940326159');" style="">1172             return foreignKeySection != null ? foreignKeySection.getUrl() : foreignKeyClass;             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1173         }                                                                                                </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1174         return null;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1175     }                                                                                                    </span>
<span  style="">1176                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1177     /**                                                                                                  </span>
<span class="-9148493238200404936" onmouseenter="enter('-9148493238200404936');" onmouseout="out('-9148493238200404936');" style=""><abbr title="1178      * NOTE: This method will attempt to merge tabs if the unprocessed {@link TabMetadata#getTabName()} is equal to">1178      * NOTE: This method will attempt to merge tabs if the unprocessed {@link TabMetadata#getTabName()} iðŸ”µ</abbr></span>
<span class="-1274816497587979877" onmouseenter="enter('-1274816497587979877');" onmouseout="out('-1274816497587979877');" style="">1179      *  the processed value of another tab.                                                              </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1180      *                                                                                                   </span>
<span class="-2406703893472258014" onmouseenter="enter('-2406703893472258014');" onmouseout="out('-2406703893472258014');" style="">1181      * For example, if {@link TabMetadata#getTabName()} is &quot;Example&quot;, there is a another tab where       </span>
<span class="9184140520214431771" onmouseenter="enter('9184140520214431771');" onmouseout="out('9184140520214431771');" style=""><abbr title="1182      *  {@link TabMetadata#getTabName()} is &quot;Example_Tab&quot;, and a message property where &#x27;Example_Tab=Example&#x27;,">1182      *  {@link TabMetadata#getTabName()} is &quot;Example_Tab&quot;, and a message property where &#x27;Example_Tab=ExamðŸ”µ</abbr></span>
<span class="8352702158102966043" onmouseenter="enter('8352702158102966043');" onmouseout="out('8352702158102966043');" style=""><abbr title="1183      *  then the tabs should be merged together, so that we do not end up rendering multiple &quot;Example&quot; tabs.">1183      *  then the tabs should be merged together, so that we do not end up rendering multiple &quot;Example&quot; taðŸ”µ</abbr></span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1184      */                                                                                                  </span>
<span class="-3548818374011565463" onmouseenter="enter('-3548818374011565463');" onmouseout="out('-3548818374011565463');" style="">1185     protected void setEntityFormTabsAndGroups(EntityForm ef, Map&lt;String, TabMetadata&gt; tabMetadataMap) {  </span>
<span class="-1610887690100779398" onmouseenter="enter('-1610887690100779398');" onmouseout="out('-1610887690100779398');" style="">1186         if (tabMetadataMap != null) {                                                                    </span>
<span class="8239819812127968949" onmouseenter="enter('8239819812127968949');" onmouseout="out('8239819812127968949');" style="">1187             Set&lt;String&gt; tabMetadataKeySet = tabMetadataMap.keySet();                                     </span>
<span class="-8816277474934611824" onmouseenter="enter('-8816277474934611824');" onmouseout="out('-8816277474934611824');" style="">1188             for (String tabKey : tabMetadataKeySet) {                                                    </span>
<span class="7310777629515294934" onmouseenter="enter('7310777629515294934');" onmouseout="out('7310777629515294934');" style="">1189                 TabMetadata tabMetadata = tabMetadataMap.get(tabKey);                                    </span>
<span class="-3382451411952830270" onmouseenter="enter('-3382451411952830270');" onmouseout="out('-3382451411952830270');" style=""><abbr title="1190                 String unprocessedTabName = getUnprocessedNameOfMatchingTab(tabMetadata, tabMetadataKeySet);">1190                 String unprocessedTabName = getUnprocessedNameOfMatchingTab(tabMetadata, tabMetadataKeySeðŸ”µ</abbr></span>
<span  style="">1191                                                                                                          </span>
<span class="-4558225351015241817" onmouseenter="enter('-4558225351015241817');" onmouseout="out('-4558225351015241817');" style="">1192                 if (foundMatchingTab(unprocessedTabName)) {                                              </span>
<span class="7976020367549586090" onmouseenter="enter('7976020367549586090');" onmouseout="out('7976020367549586090');" style="">1193                     if (!tabExists(ef, unprocessedTabName)) {                                            </span>
<span class="-6968658869865565527" onmouseenter="enter('-6968658869865565527');" onmouseout="out('-6968658869865565527');" style="">1194                         TabMetadata originalTabMetadata = tabMetadataMap.get(unprocessedTabName);        </span>
<span class="6840551509140741312" onmouseenter="enter('6840551509140741312');" onmouseout="out('6840551509140741312');" style="">1195                         unprocessedTabName = ef.addTabFromTabMetadata(originalTabMetadata);              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1196                     }                                                                                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1197                 } else {                                                                                 </span>
<span class="2531268367420417827" onmouseenter="enter('2531268367420417827');" onmouseout="out('2531268367420417827');" style="">1198                     if (tabExists(ef, tabKey)) {                                                         </span>
<span class="3894487325805599765" onmouseenter="enter('3894487325805599765');" onmouseout="out('3894487325805599765');" style="">1199                         unprocessedTabName = tabKey;                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1200                     } else {                                                                             </span>
<span class="-854176188216766174" onmouseenter="enter('-854176188216766174');" onmouseout="out('-854176188216766174');" style="">1201                         unprocessedTabName = ef.addTabFromTabMetadata(tabMetadata);                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1202                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1203                 }                                                                                        </span>
<span  style="">1204                                                                                                          </span>
<span class="4976299653458575754" onmouseenter="enter('4976299653458575754');" onmouseout="out('4976299653458575754');" style="">1205                 Set&lt;String&gt; groupMetadataKeySet = tabMetadata.getGroupMetadata().keySet();               </span>
<span class="-7961344655248674499" onmouseenter="enter('-7961344655248674499');" onmouseout="out('-7961344655248674499');" style="">1206                 for (String groupKey : groupMetadataKeySet) {                                            </span>
<span class="6345765707562916689" onmouseenter="enter('6345765707562916689');" onmouseout="out('6345765707562916689');" style=""><abbr title="1207                     ef.addGroupFromGroupMetadata(tabMetadata.getGroupMetadata().get(groupKey), unprocessedTabName);">1207                     ef.addGroupFromGroupMetadata(tabMetadata.getGroupMetadata().get(groupKey), unprocesseðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1208                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1209             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1210         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1211     }                                                                                                    </span>
<span  style="">1212                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1213     /**                                                                                                  </span>
<span class="7306113150058239600" onmouseenter="enter('7306113150058239600');" onmouseout="out('7306113150058239600');" style="">1214      * Search for any other tab on the target entity that has the same display value                     </span>
<span class="240467368059923303" onmouseenter="enter('240467368059923303');" onmouseout="out('240467368059923303');" style="">1215      *  as the value provided tab name.                                                                  </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1216      *                                                                                                   </span>
<span class="-4650758346108360443" onmouseenter="enter('-4650758346108360443');" onmouseout="out('-4650758346108360443');" style=""><abbr title="1217      * This assumes that the {@link TabMetadata#getTabName()} is in the form of a processed message property.">1217      * This assumes that the {@link TabMetadata#getTabName()} is in the form of a processed message propeðŸ”µ</abbr></span>
<span class="-478812681452175174" onmouseenter="enter('-478812681452175174');" onmouseout="out('-478812681452175174');" style=""><abbr title="1218      *  For example, if {@link TabMetadata#getTabName()} is &quot;Example&quot;, there is a tabKey from the tabMetadataKeySet">1218      *  For example, if {@link TabMetadata#getTabName()} is &quot;Example&quot;, there is a tabKey from the tabMetaðŸ”µ</abbr></span>
<span class="818185943405205448" onmouseenter="enter('818185943405205448');" onmouseout="out('818185943405205448');" style=""><abbr title="1219      *  that is &quot;Example_Tab&quot;, and a message property where &#x27;Example_Tab=Example&#x27;, then this method should return">1219      *  that is &quot;Example_Tab&quot;, and a message property where &#x27;Example_Tab=Example&#x27;, then this method shoulðŸ”µ</abbr></span>
<span class="-3733456167855611550" onmouseenter="enter('-3733456167855611550');" onmouseout="out('-3733456167855611550');" style="">1220      *  &quot;Example_Tab&quot; which will end up causing the tabs to merge together.                              </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1221      *                                                                                                   </span>
<span class="6715625924911503951" onmouseenter="enter('6715625924911503951');" onmouseout="out('6715625924911503951');" style=""><abbr title="1222      * If a tab with the same display value cannot be found, then we should return null to indicate that there">1222      * If a tab with the same display value cannot be found, then we should return null to indicate that ðŸ”µ</abbr></span>
<span class="-816382718997149765" onmouseenter="enter('-816382718997149765');" onmouseout="out('-816382718997149765');" style="">1223      *  is no matching tab with the same processed tabName value.                                        </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1224      */                                                                                                  </span>
<span class="2531890089338051353" onmouseenter="enter('2531890089338051353');" onmouseout="out('2531890089338051353');" style=""><abbr title="1225     protected String getUnprocessedNameOfMatchingTab(TabMetadata tabMetadata, Set&lt;String&gt; tabMetadataKeySet) {">1225     protected String getUnprocessedNameOfMatchingTab(TabMetadata tabMetadata, Set&lt;String&gt; tabMetadataKeySðŸ”µ</abbr></span>
<span class="-8816277474934611824" onmouseenter="enter('-8816277474934611824');" onmouseout="out('-8816277474934611824');" style="">1226         for (String tabKey : tabMetadataKeySet) {                                                        </span>
<span class="-5779793862119901002" onmouseenter="enter('-5779793862119901002');" onmouseout="out('-5779793862119901002');" style="">1227             String tabName = tabMetadata.getTabName();                                                   </span>
<span  style="">1228                                                                                                          </span>
<span class="-8422051325525888747" onmouseenter="enter('-8422051325525888747');" onmouseout="out('-8422051325525888747');" style="">1229             if (processedTabKeyMatchesTabName(tabName, tabKey)) {                                        </span>
<span class="3937451821444963358" onmouseenter="enter('3937451821444963358');" onmouseout="out('3937451821444963358');" style="">1230                 return tabKey;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1231             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1232         }                                                                                                </span>
<span  style="">1233                                                                                                          </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1234         return null;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1235     }                                                                                                    </span>
<span  style="">1236                                                                                                          </span>
<span class="-1619438245958020737" onmouseenter="enter('-1619438245958020737');" onmouseout="out('-1619438245958020737');" style="">1237     protected boolean processedTabKeyMatchesTabName(String tabName, String candidateTabKey) {            </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1238         try {                                                                                            </span>
<span class="-7659299375574203210" onmouseenter="enter('-7659299375574203210');" onmouseout="out('-7659299375574203210');" style="">1239             String processedCandidateTabKey = BLCMessageUtils.getMessage(candidateTabKey);               </span>
<span class="-2617676223106948028" onmouseenter="enter('-2617676223106948028');" onmouseout="out('-2617676223106948028');" style=""><abbr title="1240             boolean candidateTabKeyWasProcessed = !StringUtils.equals(candidateTabKey, processedCandidateTabKey);">1240             boolean candidateTabKeyWasProcessed = !StringUtils.equals(candidateTabKey, processedCandidateðŸ”µ</abbr></span>
<span  style="">1241                                                                                                          </span>
<span class="2100898845031278709" onmouseenter="enter('2100898845031278709');" onmouseout="out('2100898845031278709');" style=""><abbr title="1242             return candidateTabKeyWasProcessed &amp;&amp; StringUtils.equalsIgnoreCase(tabName, processedCandidateTabKey);">1242             return candidateTabKeyWasProcessed &amp;&amp; StringUtils.equalsIgnoreCase(tabName, processedCandidatðŸ”µ</abbr></span>
<span class="-2410148316212931681" onmouseenter="enter('-2410148316212931681');" onmouseout="out('-2410148316212931681');" style="">1243         } catch (NoSuchMessageException e) {                                                             </span>
<span class="1284296105156752555" onmouseenter="enter('1284296105156752555');" onmouseout="out('1284296105156752555');" style="">1244             LOG.debug(&quot;No such message exists for &quot; + candidateTabKey, e);                               </span>
<span  style="">1245                                                                                                          </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1246             return false;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1247         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1248     }                                                                                                    </span>
<span  style="">1249                                                                                                          </span>
<span class="-7105644214565709555" onmouseenter="enter('-7105644214565709555');" onmouseout="out('-7105644214565709555');" style="">1250     protected boolean foundMatchingTab(String unprocessedTabName) {                                      </span>
<span class="6373538944534305470" onmouseenter="enter('6373538944534305470');" onmouseout="out('6373538944534305470');" style="">1251         return (unprocessedTabName != null);                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1252     }                                                                                                    </span>
<span  style="">1253                                                                                                          </span>
<span class="-4736520597342818391" onmouseenter="enter('-4736520597342818391');" onmouseout="out('-4736520597342818391');" style="">1254     protected boolean tabExists(EntityForm ef, String tabKey) {                                          </span>
<span class="-9204309431556138424" onmouseenter="enter('-9204309431556138424');" onmouseout="out('-9204309431556138424');" style="">1255         return (ef.findTab(tabKey) != null);                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1256     }                                                                                                    </span>
<span  style="">1257                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1258     @Override                                                                                            </span>
<span class="1718091831588260637" onmouseenter="enter('1718091831588260637');" onmouseout="out('1718091831588260637');" style="">1259     public String extractDefaultValueFromFieldData(String fieldType, BasicFieldMetadata fmd) {           </span>
<span class="-269468944390639664" onmouseenter="enter('-269468944390639664');" onmouseout="out('-269468944390639664');" style="">1260         String defaultValue = fmd.getDefaultValue();                                                     </span>
<span class="8489757536552213717" onmouseenter="enter('8489757536552213717');" onmouseout="out('8489757536552213717');" style="">1261         if (fieldType.equals(SupportedFieldType.RULE_SIMPLE.toString())                                  </span>
<span class="-6155398851072788654" onmouseenter="enter('-6155398851072788654');" onmouseout="out('-6155398851072788654');" style="">1262                 || fieldType.equals(SupportedFieldType.RULE_SIMPLE_TIME.toString())                      </span>
<span class="-7731003048108517996" onmouseenter="enter('-7731003048108517996');" onmouseout="out('-7731003048108517996');" style="">1263                 || fieldType.equals(SupportedFieldType.RULE_WITH_QUANTITY.toString())) {                 </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1264             return null;                                                                                 </span>
<span class="1147822807152761026" onmouseenter="enter('1147822807152761026');" onmouseout="out('1147822807152761026');" style="">1265         } else if (fieldType.equals(SupportedFieldType.INTEGER.toString())) {                            </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1266             try {                                                                                        </span>
<span class="2272843703065247861" onmouseenter="enter('2272843703065247861');" onmouseout="out('2272843703065247861');" style="">1267                 Integer.parseInt(defaultValue);                                                          </span>
<span class="-1817228964429458922" onmouseenter="enter('-1817228964429458922');" onmouseout="out('-1817228964429458922');" style="">1268             } catch (NumberFormatException  e) {                                                         </span>
<span class="8614817519589782911" onmouseenter="enter('8614817519589782911');" onmouseout="out('8614817519589782911');" style=""><abbr title="1269                 String msg = buildMsgForDefValException(SupportedFieldType.INTEGER.toString(), fmd, defaultValue);">1269                 String msg = buildMsgForDefValException(SupportedFieldType.INTEGER.toString(), fmd, defauðŸ”µ</abbr></span>
<span class="8745206262250964374" onmouseenter="enter('8745206262250964374');" onmouseout="out('8745206262250964374');" style="">1270                 LOG.debug(msg);                                                                          </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1271                 return null;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1272             }                                                                                            </span>
<span class="5641784789080954731" onmouseenter="enter('5641784789080954731');" onmouseout="out('5641784789080954731');" style="">1273         } else if (fieldType.equals(SupportedFieldType.DECIMAL.toString())                               </span>
<span class="-1839121721540903009" onmouseenter="enter('-1839121721540903009');" onmouseout="out('-1839121721540903009');" style="">1274                 || fieldType.equals(SupportedFieldType.MONEY.toString())) {                              </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1275             try {                                                                                        </span>
<span class="6039577623543160332" onmouseenter="enter('6039577623543160332');" onmouseout="out('6039577623543160332');" style="">1276                 BigDecimal val = new BigDecimal(defaultValue);                                           </span>
<span class="-1817228964429458922" onmouseenter="enter('-1817228964429458922');" onmouseout="out('-1817228964429458922');" style="">1277             } catch (NumberFormatException  e) {                                                         </span>
<span class="-1552449043883066886" onmouseenter="enter('-1552449043883066886');" onmouseout="out('-1552449043883066886');" style="">1278                 String msg = buildMsgForDefValException(fieldType.toString(), fmd, defaultValue);        </span>
<span class="8745206262250964374" onmouseenter="enter('8745206262250964374');" onmouseout="out('8745206262250964374');" style="">1279                 LOG.debug(msg);                                                                          </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1280                 return null;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1281             }                                                                                            </span>
<span class="-6181979390419592035" onmouseenter="enter('-6181979390419592035');" onmouseout="out('-6181979390419592035');" style="">1282         } else if (fieldType.equals(SupportedFieldType.BOOLEAN.toString())) {                            </span>
<span class="-8619074302025013401" onmouseenter="enter('-8619074302025013401');" onmouseout="out('-8619074302025013401');" style="">1283             if (!defaultValue.toLowerCase().equals(&quot;true&quot;) &amp;&amp; !defaultValue.toLowerCase().equals(&quot;false&quot;)</span>
<span class="-3108075317025400269" onmouseenter="enter('-3108075317025400269');" onmouseout="out('-3108075317025400269');" style=""><abbr title="1284                     &amp;&amp; !defaultValue.toUpperCase().equals(&quot;Y&quot;) &amp;&amp; !defaultValue.toUpperCase().equals(&quot;N&quot;)) {">1284                     &amp;&amp; !defaultValue.toUpperCase().equals(&quot;Y&quot;) &amp;&amp; !defaultValue.toUpperCase().equals(&quot;N&quot;)ðŸ”µ</abbr></span>
<span class="6946244061563138313" onmouseenter="enter('6946244061563138313');" onmouseout="out('6946244061563138313');" style=""><abbr title="1285                 String msg = buildMsgForDefValException(SupportedFieldType.BOOLEAN.toString(), fmd, defaultValue);">1285                 String msg = buildMsgForDefValException(SupportedFieldType.BOOLEAN.toString(), fmd, defauðŸ”µ</abbr></span>
<span class="8745206262250964374" onmouseenter="enter('8745206262250964374');" onmouseout="out('8745206262250964374');" style="">1286                 LOG.debug(msg);                                                                          </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1287                 return null;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1288             }                                                                                            </span>
<span class="-3789417077200952901" onmouseenter="enter('-3789417077200952901');" onmouseout="out('-3789417077200952901');" style="">1289         } else if (fieldType.equals(SupportedFieldType.DATE.toString())) {                               </span>
<span class="4798322797585331848" onmouseenter="enter('4798322797585331848');" onmouseout="out('4798322797585331848');" style="">1290             DateFormat format = FormatUtil.getDateFormat();                                              </span>
<span class="-4817829731735260045" onmouseenter="enter('-4817829731735260045');" onmouseout="out('-4817829731735260045');" style="">1291             if (defaultValue.toLowerCase().contains(&quot;today&quot;)) {                                          </span>
<span class="-5510717227080119052" onmouseenter="enter('-5510717227080119052');" onmouseout="out('-5510717227080119052');" style="">1292                 defaultValue = format.format(new Date());                                                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1293             } else {                                                                                     </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1294                 try {                                                                                    </span>
<span class="8253580772209920524" onmouseenter="enter('8253580772209920524');" onmouseout="out('8253580772209920524');" style="">1295                     Date date = format.parse(defaultValue);                                              </span>
<span class="-692739804773039587" onmouseenter="enter('-692739804773039587');" onmouseout="out('-692739804773039587');" style="">1296                     defaultValue = format.format(date);                                                  </span>
<span class="-8792048397909294459" onmouseenter="enter('-8792048397909294459');" onmouseout="out('-8792048397909294459');" style="">1297                 } catch (ParseException e) {                                                             </span>
<span class="6717521370520655041" onmouseenter="enter('6717521370520655041');" onmouseout="out('6717521370520655041');" style=""><abbr title="1298                     String msg = buildMsgForDefValException(SupportedFieldType.DATE.toString(), fmd, defaultValue);">1298                     String msg = buildMsgForDefValException(SupportedFieldType.DATE.toString(), fmd, defaðŸ”µ</abbr></span>
<span class="8745206262250964374" onmouseenter="enter('8745206262250964374');" onmouseout="out('8745206262250964374');" style="">1299                     LOG.debug(msg);                                                                      </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1300                     return null;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1301                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1302             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1303         }                                                                                                </span>
<span class="8908764284674475175" onmouseenter="enter('8908764284674475175');" onmouseout="out('8908764284674475175');" style="">1304         return defaultValue;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1305     }                                                                                                    </span>
<span  style="">1306                                                                                                          </span>
<span class="-1197861841111609975" onmouseenter="enter('-1197861841111609975');" onmouseout="out('-1197861841111609975');" style=""><abbr title="1307     protected String buildMsgForDefValException(String type, BasicFieldMetadata fmd, String defaultValue) {">1307     protected String buildMsgForDefValException(String type, BasicFieldMetadata fmd, String defaultValue)ðŸ”µ</abbr></span>
<span class="5037735576431495054" onmouseenter="enter('5037735576431495054');" onmouseout="out('5037735576431495054');" style=""><abbr title="1308         return StringUtil.sanitize(fmd.getTargetClass()) + &quot; : &quot; + StringUtil.sanitize(fmd.getName()) + &quot; - Failed to parse &quot;">1308         return StringUtil.sanitize(fmd.getTargetClass()) + &quot; : &quot; + StringUtil.sanitize(fmd.getName()) + &quot;ðŸ”µ</abbr></span>
<span class="-1280239945418423816" onmouseenter="enter('-1280239945418423816');" onmouseout="out('-1280239945418423816');" style=""><abbr title="1309                 + StringUtil.sanitize(type) + &quot; from DefaultValue [ &quot; + StringUtil.sanitize(defaultValue) + &quot; ]&quot;;">1309                 + StringUtil.sanitize(type) + &quot; from DefaultValue [ &quot; + StringUtil.sanitize(defaultValue)ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1310     }                                                                                                    </span>
<span  style="">1311                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1312     @Override                                                                                            </span>
<span class="-3338021322965865498" onmouseenter="enter('-3338021322965865498');" onmouseout="out('-3338021322965865498');" style="">1313     public void removeNonApplicableFields(ClassMetadata cmd, EntityForm entityForm, String entityType) { </span>
<span class="3681854507729164346" onmouseenter="enter('3681854507729164346');" onmouseout="out('3681854507729164346');" style="">1314         for (Property p : cmd.getProperties()) {                                                         </span>
<span class="2404027636674988266" onmouseenter="enter('2404027636674988266');" onmouseout="out('2404027636674988266');" style="">1315             if (!ArrayUtils.contains(p.getMetadata().getAvailableToTypes(), entityType)) {               </span>
<span class="3958420768854658911" onmouseenter="enter('3958420768854658911');" onmouseout="out('3958420768854658911');" style="">1316                 entityForm.removeField(p.getName());                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1317             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1318         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1319     }                                                                                                    </span>
<span  style="">1320                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1321     @Override                                                                                            </span>
<span class="-2894789102162308959" onmouseenter="enter('-2894789102162308959');" onmouseout="out('-2894789102162308959');" style="">1322     public EntityForm createEntityForm(ClassMetadata cmd, List&lt;SectionCrumb&gt; sectionCrumbs)              </span>
<span class="1998458335829271558" onmouseenter="enter('1998458335829271558');" onmouseout="out('1998458335829271558');" style="">1323             throws ServiceException {                                                                    </span>
<span class="-438894394526699599" onmouseenter="enter('-438894394526699599');" onmouseout="out('-438894394526699599');" style="">1324         EntityForm ef = createStandardEntityForm();                                                      </span>
<span class="1972535118391022312" onmouseenter="enter('1972535118391022312');" onmouseout="out('1972535118391022312');" style="">1325         populateEntityForm(cmd, ef, sectionCrumbs);                                                      </span>
<span class="3260120157565581788" onmouseenter="enter('3260120157565581788');" onmouseout="out('3260120157565581788');" style="">1326         return ef;                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1327     }                                                                                                    </span>
<span  style="">1328                                                                                                          </span>
<span class="1553424846104610474" onmouseenter="enter('1553424846104610474');" onmouseout="out('1553424846104610474');" style="">1329     protected String extractSectionIdentifierFromCrumb(List&lt;SectionCrumb&gt; sectionCrumbs) {               </span>
<span class="4444452196378800952" onmouseenter="enter('4444452196378800952');" onmouseout="out('4444452196378800952');" style="">1330         if (sectionCrumbs != null &amp;&amp; sectionCrumbs.size() &gt; 0) {                                         </span>
<span class="-4491351221393184649" onmouseenter="enter('-4491351221393184649');" onmouseout="out('-4491351221393184649');" style="">1331             return sectionCrumbs.get(0).getSectionIdentifier();                                          </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1332         } else {                                                                                         </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1333             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1334         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1335     }                                                                                                    </span>
<span  style="">1336                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1337     @Override                                                                                            </span>
<span class="-4968680944420537869" onmouseenter="enter('-4968680944420537869');" onmouseout="out('-4968680944420537869');" style="">1338     public void populateEntityForm(ClassMetadata cmd, EntityForm ef, List&lt;SectionCrumb&gt; sectionCrumbs)   </span>
<span class="1998458335829271558" onmouseenter="enter('1998458335829271558');" onmouseout="out('1998458335829271558');" style="">1339             throws ServiceException {                                                                    </span>
<span class="-4942912710752555081" onmouseenter="enter('-4942912710752555081');" onmouseout="out('-4942912710752555081');" style="">1340         ef.setCeilingEntityClassname(cmd.getCeilingType());                                              </span>
<span  style="">1341                                                                                                          </span>
<span class="6809887928661746160" onmouseenter="enter('6809887928661746160');" onmouseout="out('6809887928661746160');" style="">1342         String sectionIdentifier = extractSectionIdentifierFromCrumb(sectionCrumbs);                     </span>
<span  style="">1343                                                                                                          </span>
<span class="-3855604053801420635" onmouseenter="enter('-3855604053801420635');" onmouseout="out('-3855604053801420635');" style=""><abbr title="1344         AdminSection section = navigationService.findAdminSectionByClassAndSectionId(cmd.getCeilingType(),">1344         AdminSection section = navigationService.findAdminSectionByClassAndSectionId(cmd.getCeilingType()ðŸ”µ</abbr></span>
<span class="6889816604380354873" onmouseenter="enter('6889816604380354873');" onmouseout="out('6889816604380354873');" style="">1345                 sectionIdentifier);                                                                      </span>
<span class="2297837107111400660" onmouseenter="enter('2297837107111400660');" onmouseout="out('2297837107111400660');" style="">1346         if (section != null) {                                                                           </span>
<span class="4296466575148476303" onmouseenter="enter('4296466575148476303');" onmouseout="out('4296466575148476303');" style="">1347             ef.setSectionKey(section.getUrl());                                                          </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1348         } else {                                                                                         </span>
<span class="-1586535842116388806" onmouseenter="enter('-1586535842116388806');" onmouseout="out('-1586535842116388806');" style="">1349             ef.setSectionKey(cmd.getCeilingType());                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1350         }                                                                                                </span>
<span class="-5184985761895407688" onmouseenter="enter('-5184985761895407688');" onmouseout="out('-5184985761895407688');" style="">1351         ef.setSectionCrumbsImpl(sectionCrumbs);                                                          </span>
<span  style="">1352                                                                                                          </span>
<span class="-8713614433600438253" onmouseenter="enter('-8713614433600438253');" onmouseout="out('-8713614433600438253');" style="">1353         setEntityFormTabsAndGroups(ef, cmd.getTabAndGroupMetadata());                                    </span>
<span  style="">1354                                                                                                          </span>
<span class="3369160299270687085" onmouseenter="enter('3369160299270687085');" onmouseout="out('3369160299270687085');" style="">1355         setEntityFormFields(cmd, ef, Arrays.asList(cmd.getProperties()));                                </span>
<span  style="">1356                                                                                                          </span>
<span class="8675843354365413624" onmouseenter="enter('8675843354365413624');" onmouseout="out('8675843354365413624');" style="">1357         populateDropdownToOneFields(ef, cmd);                                                            </span>
<span  style="">1358                                                                                                          </span>
<span class="1014702433169640296" onmouseenter="enter('1014702433169640296');" onmouseout="out('1014702433169640296');" style="">1359         extensionManager.getProxy().modifyUnpopulatedEntityForm(ef);                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1360     }                                                                                                    </span>
<span  style="">1361                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1362     /**                                                                                                  </span>
<span class="7551045119262463393" onmouseenter="enter('7551045119262463393');" onmouseout="out('7551045119262463393');" style="">1363      * This method is invoked when EntityForms are created and is meant to provide a hook to add         </span>
<span class="-342244960216512570" onmouseenter="enter('-342244960216512570');" onmouseout="out('-342244960216512570');" style="">1364      * additional entity form actions for implementors of Broadleaf. Broadleaf modules will typically    </span>
<span class="-7928784631676494068" onmouseenter="enter('-7928784631676494068');" onmouseout="out('-7928784631676494068');" style="">1365      * leverage {@link FormBuilderExtensionHandler#addAdditionalFormActions(EntityForm)} method.         </span>
<span class="8361682950840699982" onmouseenter="enter('8361682950840699982');" onmouseout="out('8361682950840699982');" style="">1366      * @param ef                                                                                         </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1367      */                                                                                                  </span>
<span class="-8094119228358129217" onmouseenter="enter('-8094119228358129217');" onmouseout="out('-8094119228358129217');" style="">1368     protected void addAdditionalFormActions(EntityForm ef) {                                             </span>
<span  style="">1369                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1370     }                                                                                                    </span>
<span  style="">1371                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1372     @Override                                                                                            </span>
<span class="1394778707631761813" onmouseenter="enter('1394778707631761813');" onmouseout="out('1394778707631761813');" style=""><abbr title="1373     public EntityForm createEntityForm(ClassMetadata cmd, Entity entity, List&lt;SectionCrumb&gt; sectionCrumbs)">1373     public EntityForm createEntityForm(ClassMetadata cmd, Entity entity, List&lt;SectionCrumb&gt; sectionCrumbsðŸ”µ</abbr></span>
<span class="1998458335829271558" onmouseenter="enter('1998458335829271558');" onmouseout="out('1998458335829271558');" style="">1374             throws ServiceException {                                                                    </span>
<span class="-438894394526699599" onmouseenter="enter('-438894394526699599');" onmouseout="out('-438894394526699599');" style="">1375         EntityForm ef = createStandardEntityForm();                                                      </span>
<span class="-4073847895348507412" onmouseenter="enter('-4073847895348507412');" onmouseout="out('-4073847895348507412');" style="">1376         populateEntityForm(cmd, entity, ef, sectionCrumbs);                                              </span>
<span class="3191217127862437415" onmouseenter="enter('3191217127862437415');" onmouseout="out('3191217127862437415');" style="">1377         addAdditionalFormActions(ef);                                                                    </span>
<span class="8511655867693649187" onmouseenter="enter('8511655867693649187');" onmouseout="out('8511655867693649187');" style="">1378         extensionManager.getProxy().addAdditionalFormActions(ef);                                        </span>
<span class="3260120157565581788" onmouseenter="enter('3260120157565581788');" onmouseout="out('3260120157565581788');" style="">1379         return ef;                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1380     }                                                                                                    </span>
<span  style="">1381                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1382     @Override                                                                                            </span>
<span class="-6571706150833686716" onmouseenter="enter('-6571706150833686716');" onmouseout="out('-6571706150833686716');" style=""><abbr title="1383     public void populateEntityForm(ClassMetadata cmd, Entity entity, EntityForm ef, List&lt;SectionCrumb&gt; sectionCrumbs)">1383     public void populateEntityForm(ClassMetadata cmd, Entity entity, EntityForm ef, List&lt;SectionCrumb&gt; seðŸ”µ</abbr></span>
<span class="1998458335829271558" onmouseenter="enter('1998458335829271558');" onmouseout="out('1998458335829271558');" style="">1384             throws ServiceException {                                                                    </span>
<span class="-7069998291250786390" onmouseenter="enter('-7069998291250786390');" onmouseout="out('-7069998291250786390');" style="">1385         // Get the empty form with appropriate fields                                                    </span>
<span class="1972535118391022312" onmouseenter="enter('1972535118391022312');" onmouseout="out('1972535118391022312');" style="">1386         populateEntityForm(cmd, ef, sectionCrumbs);                                                      </span>
<span  style="">1387                                                                                                          </span>
<span class="-5459387306565336413" onmouseenter="enter('-5459387306565336413');" onmouseout="out('-5459387306565336413');" style="">1388         String idProperty = adminEntityService.getIdProperty(cmd);                                       </span>
<span class="1051557575021412686" onmouseenter="enter('1051557575021412686');" onmouseout="out('1051557575021412686');" style="">1389         ef.setId(entity.findProperty(idProperty).getValue());                                            </span>
<span class="2566657873931456162" onmouseenter="enter('2566657873931456162');" onmouseout="out('2566657873931456162');" style="">1390         ef.setEntityType(entity.getType()[0]);                                                           </span>
<span  style="">1391                                                                                                          </span>
<span class="-5752959739321640962" onmouseenter="enter('-5752959739321640962');" onmouseout="out('-5752959739321640962');" style="">1392         populateEntityFormFieldValues(cmd, entity, ef);                                                  </span>
<span  style="">1393                                                                                                          </span>
<span class="5257407325597611191" onmouseenter="enter('5257407325597611191');" onmouseout="out('5257407325597611191');" style="">1394         Property p = entity.findProperty(BasicPersistenceModule.MAIN_ENTITY_NAME_PROPERTY);              </span>
<span class="-4724213940983805674" onmouseenter="enter('-4724213940983805674');" onmouseout="out('-4724213940983805674');" style="">1395         if (p != null) {                                                                                 </span>
<span class="8443013364869289595" onmouseenter="enter('8443013364869289595');" onmouseout="out('8443013364869289595');" style="">1396             ef.setMainEntityName(p.getValue());                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1397         }                                                                                                </span>
<span  style="">1398                                                                                                          </span>
<span class="8285751274454564858" onmouseenter="enter('8285751274454564858');" onmouseout="out('8285751274454564858');" style="">1399         extensionManager.getProxy().modifyPopulatedEntityForm(ef, entity);                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1400     }                                                                                                    </span>
<span  style="">1401                                                                                                          </span>
<span class="2253933316337433516" onmouseenter="enter('2253933316337433516');" onmouseout="out('2253933316337433516');" style=""><abbr title="1402     protected void setVisibilityBasedOnShowIfFieldEquals(ClassMetadata cmd, Entity entity, EntityForm ef) {">1402     protected void setVisibilityBasedOnShowIfFieldEquals(ClassMetadata cmd, Entity entity, EntityForm ef)ðŸ”µ</abbr></span>
<span class="3681854507729164346" onmouseenter="enter('3681854507729164346');" onmouseout="out('3681854507729164346');" style="">1403         for (Property p : cmd.getProperties()) {                                                         </span>
<span class="5177519309013644806" onmouseenter="enter('5177519309013644806');" onmouseout="out('5177519309013644806');" style="">1404             FieldMetadata fmd = p.getMetadata();                                                         </span>
<span  style="">1405                                                                                                          </span>
<span class="-8245965221352030812" onmouseenter="enter('-8245965221352030812');" onmouseout="out('-8245965221352030812');" style="">1406             if (shouldHideField(fmd, entity)) {                                                          </span>
<span class="722393245301383233" onmouseenter="enter('722393245301383233');" onmouseout="out('722393245301383233');" style="">1407                 if (fmd instanceof CollectionMetadata) {                                                 </span>
<span class="7188659998484598345" onmouseenter="enter('7188659998484598345');" onmouseout="out('7188659998484598345');" style="">1408                     ef.removeListGrid(p.getName());                                                      </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1409                 } else {                                                                                 </span>
<span class="6870393746446615822" onmouseenter="enter('6870393746446615822');" onmouseout="out('6870393746446615822');" style="">1410                     ef.removeField(p.getName());                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1411                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1412             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1413         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1414     }                                                                                                    </span>
<span  style="">1415                                                                                                          </span>
<span class="-3330248760149008409" onmouseenter="enter('-3330248760149008409');" onmouseout="out('-3330248760149008409');" style="">1416     protected boolean shouldHideField(FieldMetadata fmd, Entity entity) {                                </span>
<span class="-345780899678155518" onmouseenter="enter('-345780899678155518');" onmouseout="out('-345780899678155518');" style="">1417         if (fmd == null || fmd.getShowIfFieldEquals() == null) {                                         </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1418             return false;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1419         }                                                                                                </span>
<span  style="">1420                                                                                                          </span>
<span class="-8659631323845256695" onmouseenter="enter('-8659631323845256695');" onmouseout="out('-8659631323845256695');" style="">1421         for (String property : fmd.getShowIfFieldEquals().keySet()) {                                    </span>
<span class="3930945657137454760" onmouseenter="enter('3930945657137454760');" onmouseout="out('3930945657137454760');" style="">1422             List&lt;String&gt; values = fmd.getShowIfFieldEquals().get(property);                              </span>
<span class="-2693573208742209473" onmouseenter="enter('-2693573208742209473');" onmouseout="out('-2693573208742209473');" style="">1423             Property entityProp = entity.findProperty(property);                                         </span>
<span  style="">1424                                                                                                          </span>
<span class="-167840816186910781" onmouseenter="enter('-167840816186910781');" onmouseout="out('-167840816186910781');" style="">1425             if (entityProp == null || values.contains(entityProp.getValue())) {                          </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1426                 return false;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1427             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1428         }                                                                                                </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">1429         return true;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1430     }                                                                                                    </span>
<span  style="">1431                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1432     @Override                                                                                            </span>
<span class="7910083739222815843" onmouseenter="enter('7910083739222815843');" onmouseout="out('7910083739222815843');" style="">1433     public void populateEntityFormFieldValues(ClassMetadata cmd, Entity entity, EntityForm ef) {         </span>
<span class="4641578827349754543" onmouseenter="enter('4641578827349754543');" onmouseout="out('4641578827349754543');" style="">1434         // Set the appropriate property values                                                           </span>
<span class="3681854507729164346" onmouseenter="enter('3681854507729164346');" onmouseout="out('3681854507729164346');" style="">1435         for (Property p : cmd.getProperties()) {                                                         </span>
<span class="-1029066852878262358" onmouseenter="enter('-1029066852878262358');" onmouseout="out('-1029066852878262358');" style="">1436             if (p.getMetadata() instanceof BasicFieldMetadata) {                                         </span>
<span class="-6469477226116674237" onmouseenter="enter('-6469477226116674237');" onmouseout="out('-6469477226116674237');" style="">1437                 BasicFieldMetadata basicFM = (BasicFieldMetadata) p.getMetadata();                       </span>
<span  style="">1438                                                                                                          </span>
<span class="7733316759648943983" onmouseenter="enter('7733316759648943983');" onmouseout="out('7733316759648943983');" style="">1439                 Property entityProp = entity.findProperty(p.getName());                                  </span>
<span  style="">1440                                                                                                          </span>
<span class="4021222749559453503" onmouseenter="enter('4021222749559453503');" onmouseout="out('4021222749559453503');" style=""><abbr title="1441                 boolean explicitlyShown = VisibilityEnum.FORM_EXPLICITLY_SHOWN.equals(basicFM.getVisibility());">1441                 boolean explicitlyShown = VisibilityEnum.FORM_EXPLICITLY_SHOWN.equals(basicFM.getVisibiliðŸ”µ</abbr></span>
<span class="7366025904056557465" onmouseenter="enter('7366025904056557465');" onmouseout="out('7366025904056557465');" style="">1442                 //always show special map fields                                                         </span>
<span class="-2401445545222685489" onmouseenter="enter('-2401445545222685489');" onmouseout="out('-2401445545222685489');" style="">1443                 if (p.getName().equals(&quot;key&quot;) || p.getName().equals(&quot;priorKey&quot;)) {                       </span>
<span class="7778793828648750297" onmouseenter="enter('7778793828648750297');" onmouseout="out('7778793828648750297');" style="">1444                     explicitlyShown = true;                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1445                 }                                                                                        </span>
<span  style="">1446                                                                                                          </span>
<span class="-6309572172727120265" onmouseenter="enter('-6309572172727120265');" onmouseout="out('-6309572172727120265');" style="">1447                 if (entityProp == null &amp;&amp; explicitlyShown) {                                             </span>
<span class="8909260264488361187" onmouseenter="enter('8909260264488361187');" onmouseout="out('8909260264488361187');" style="">1448                     Field field = ef.findField(p.getName());                                             </span>
<span class="-470699824173107204" onmouseenter="enter('-470699824173107204');" onmouseout="out('-470699824173107204');" style="">1449                     if (field != null) {                                                                 </span>
<span class="-412233450447024620" onmouseenter="enter('-412233450447024620');" onmouseout="out('-412233450447024620');" style="">1450                         field.setValue(null);                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1451                     }                                                                                    </span>
<span class="-3654453610792959969" onmouseenter="enter('-3654453610792959969');" onmouseout="out('-3654453610792959969');" style=""><abbr title="1452                 } else if (entityProp == null &amp;&amp; !SupportedFieldType.PASSWORD_CONFIRM.equals(basicFM.getExplicitFieldType())) {">1452                 } else if (entityProp == null &amp;&amp; !SupportedFieldType.PASSWORD_CONFIRM.equals(basicFM.getEðŸ”µ</abbr></span>
<span class="6870393746446615822" onmouseenter="enter('6870393746446615822');" onmouseout="out('6870393746446615822');" style="">1453                     ef.removeField(p.getName());                                                         </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1454                 } else {                                                                                 </span>
<span class="8909260264488361187" onmouseenter="enter('8909260264488361187');" onmouseout="out('8909260264488361187');" style="">1455                     Field field = ef.findField(p.getName());                                             </span>
<span class="-470699824173107204" onmouseenter="enter('-470699824173107204');" onmouseout="out('-470699824173107204');" style="">1456                     if (field != null) {                                                                 </span>
<span class="-2366650903096921345" onmouseenter="enter('-2366650903096921345');" onmouseout="out('-2366650903096921345');" style="">1457                         if (entityProp != null) {                                                        </span>
<span class="4638600769415474673" onmouseenter="enter('4638600769415474673');" onmouseout="out('4638600769415474673');" style=""><abbr title="1458                             //protect against null - can happen with password confirmation fields (i.e. admin user)">1458                             //protect against null - can happen with password confirmation fields (i.e. aðŸ”µ</abbr></span>
<span class="8379702483069295441" onmouseenter="enter('8379702483069295441');" onmouseout="out('8379702483069295441');" style="">1459                             field.setDirty(entityProp.getIsDirty());                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1460                         }                                                                                </span>
<span class="-7071797664598394524" onmouseenter="enter('-7071797664598394524');" onmouseout="out('-7071797664598394524');" style="">1461                         if (basicFM.getFieldType()==SupportedFieldType.RULE_SIMPLE                       </span>
<span class="-6985772052695519723" onmouseenter="enter('-6985772052695519723');" onmouseout="out('-6985772052695519723');" style="">1462                                 || basicFM.getFieldType()==SupportedFieldType.RULE_SIMPLE_TIME           </span>
<span class="8398044977893461025" onmouseenter="enter('8398044977893461025');" onmouseout="out('8398044977893461025');" style="">1463                                 || basicFM.getFieldType()==SupportedFieldType.RULE_WITH_QUANTITY) {      </span>
<span class="4021621821134603536" onmouseenter="enter('4021621821134603536');" onmouseout="out('4021621821134603536');" style="">1464                             RuleBuilderField rbf = (RuleBuilderField) field;                             </span>
<span class="-7695608741173734167" onmouseenter="enter('-7695608741173734167');" onmouseout="out('-7695608741173734167');" style="">1465                             if (entity.getPMap().containsKey(rbf.getJsonFieldName())) {                  </span>
<span class="-6319430319708671435" onmouseenter="enter('-6319430319708671435');" onmouseout="out('-6319430319708671435');" style="">1466                                 String json = entity.getPMap().get(rbf.getJsonFieldName()).getValue();   </span>
<span class="-6775685118155466056" onmouseenter="enter('-6775685118155466056');" onmouseout="out('-6775685118155466056');" style="">1467                                 rbf.setJson(json);                                                       </span>
<span class="-5885429731931553725" onmouseenter="enter('-5885429731931553725');" onmouseout="out('-5885429731931553725');" style="">1468                                 DataWrapper dw = convertJsonToDataWrapper(json);                         </span>
<span class="-3408161092817379645" onmouseenter="enter('-3408161092817379645');" onmouseout="out('-3408161092817379645');" style="">1469                                 if (dw != null) {                                                        </span>
<span class="7188823867343032185" onmouseenter="enter('7188823867343032185');" onmouseout="out('7188823867343032185');" style="">1470                                     rbf.setDataWrapper(dw);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1471                                 }                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1472                             }                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1473                         }                                                                                </span>
<span class="-4769937124220254644" onmouseenter="enter('-4769937124220254644');" onmouseout="out('-4769937124220254644');" style="">1474                         if (basicFM.getFieldType() == SupportedFieldType.MEDIA) {                        </span>
<span class="627899284580660581" onmouseenter="enter('627899284580660581');" onmouseout="out('627899284580660581');" style="">1475                             field.setValue(entityProp.getValue());                                       </span>
<span class="-3405146348302376065" onmouseenter="enter('-3405146348302376065');" onmouseout="out('-3405146348302376065');" style="">1476                             field.setDisplayValue(entityProp.getDisplayValue());                         </span>
<span class="7597965270557979966" onmouseenter="enter('7597965270557979966');" onmouseout="out('7597965270557979966');" style="">1477                             MediaField mf = (MediaField) field;                                          </span>
<span class="-7494069843850344001" onmouseenter="enter('-7494069843850344001');" onmouseout="out('-7494069843850344001');" style=""><abbr title="1478                             Class&lt;MediaDto&gt; type = entityConfiguration.lookupEntityClass(MediaDto.class.getName(), MediaDto.class);">1478                             Class&lt;MediaDto&gt; type = entityConfiguration.lookupEntityClass(MediaDto.class.gðŸ”µ</abbr></span>
<span class="8674870911105205925" onmouseenter="enter('8674870911105205925');" onmouseout="out('8674870911105205925');" style=""><abbr title="1479                             mf.setMedia(mediaBuilderService.convertJsonToMedia(entityProp.getUnHtmlEncodedValue(), type));">1479                             mf.setMedia(mediaBuilderService.convertJsonToMedia(entityProp.getUnHtmlEncodeðŸ”µ</abbr></span>
<span class="8860382562253463844" onmouseenter="enter('8860382562253463844');" onmouseout="out('8860382562253463844');" style=""><abbr title="1480                         } else if (!SupportedFieldType.PASSWORD_CONFIRM.equals(basicFM.getExplicitFieldType())) {">1480                         } else if (!SupportedFieldType.PASSWORD_CONFIRM.equals(basicFM.getExplicitFieldTyðŸ”µ</abbr></span>
<span class="627899284580660581" onmouseenter="enter('627899284580660581');" onmouseout="out('627899284580660581');" style="">1481                             field.setValue(entityProp.getValue());                                       </span>
<span class="-3405146348302376065" onmouseenter="enter('-3405146348302376065');" onmouseout="out('-3405146348302376065');" style="">1482                             field.setDisplayValue(entityProp.getDisplayValue());                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1483                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1484                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1485                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1486             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1487         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1488     }                                                                                                    </span>
<span  style="">1489                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1490     /**                                                                                                  </span>
<span class="-628877191560702928" onmouseenter="enter('-628877191560702928');" onmouseout="out('-628877191560702928');" style="">1491      * When using Thymeleaf, we need to convert the JSON string back to                                  </span>
<span class="1787417412343624491" onmouseenter="enter('1787417412343624491');" onmouseout="out('1787417412343624491');" style="">1492      * a DataWrapper object because Thymeleaf escapes JSON strings.                                      </span>
<span class="5903545593073761450" onmouseenter="enter('5903545593073761450');" onmouseout="out('5903545593073761450');" style="">1493      * Thymeleaf uses it&#x27;s own object de-serializer                                                      </span>
<span class="5324834623619770328" onmouseenter="enter('5324834623619770328');" onmouseout="out('5324834623619770328');" style="">1494      * see: https://github.com/thymeleaf/thymeleaf/issues/84                                             </span>
<span class="363134610140381216" onmouseenter="enter('363134610140381216');" onmouseout="out('363134610140381216');" style="">1495      * see: http://forum.thymeleaf.org/Spring-Javascript-and-escaped-JSON-td4024739.html                 </span>
<span class="-1207310572973527556" onmouseenter="enter('-1207310572973527556');" onmouseout="out('-1207310572973527556');" style="">1496      * @param json                                                                                       </span>
<span class="-6577536486120138335" onmouseenter="enter('-6577536486120138335');" onmouseout="out('-6577536486120138335');" style="">1497      * @return DataWrapper                                                                               </span>
<span class="-2042953791166134795" onmouseenter="enter('-2042953791166134795');" onmouseout="out('-2042953791166134795');" style="">1498      * @throws IOException                                                                               </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1499      */                                                                                                  </span>
<span class="2430913214947894128" onmouseenter="enter('2430913214947894128');" onmouseout="out('2430913214947894128');" style="">1500     protected DataWrapper convertJsonToDataWrapper(String json) {                                        </span>
<span class="-1540063925365497538" onmouseenter="enter('-1540063925365497538');" onmouseout="out('-1540063925365497538');" style="">1501         ObjectMapper mapper = new ObjectMapper();                                                        </span>
<span class="2504782713133203850" onmouseenter="enter('2504782713133203850');" onmouseout="out('2504782713133203850');" style="">1502         DataDTODeserializer dtoDeserializer = new DataDTODeserializer();                                 </span>
<span class="-7069332746071020099" onmouseenter="enter('-7069332746071020099');" onmouseout="out('-7069332746071020099');" style=""><abbr title="1503         SimpleModule module = new SimpleModule(&quot;DataDTODeserializerModule&quot;, new Version(1, 0, 0, null, null, null));">1503         SimpleModule module = new SimpleModule(&quot;DataDTODeserializerModule&quot;, new Version(1, 0, 0, null, nuðŸ”µ</abbr></span>
<span class="-4567775918027288963" onmouseenter="enter('-4567775918027288963');" onmouseout="out('-4567775918027288963');" style="">1504         module.addDeserializer(DataDTO.class, dtoDeserializer);                                          </span>
<span class="1730387754846602273" onmouseenter="enter('1730387754846602273');" onmouseout="out('1730387754846602273');" style="">1505         mapper.registerModule(module);                                                                   </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1506         try {                                                                                            </span>
<span class="-1255991149529842499" onmouseenter="enter('-1255991149529842499');" onmouseout="out('-1255991149529842499');" style="">1507             return mapper.readValue(json, DataWrapper.class);                                            </span>
<span class="7080241092423381085" onmouseenter="enter('7080241092423381085');" onmouseout="out('7080241092423381085');" style="">1508         } catch (IOException e) {                                                                        </span>
<span class="5897285764286536997" onmouseenter="enter('5897285764286536997');" onmouseout="out('5897285764286536997');" style="">1509             throw new RuntimeException(e);                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1510         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1511     }                                                                                                    </span>
<span  style="">1512                                                                                                          </span>
<span class="-186207403366028020" onmouseenter="enter('-186207403366028020');" onmouseout="out('-186207403366028020');" style="">1513     protected void populateDropdownToOneFields(EntityForm ef, ClassMetadata cmd)                         </span>
<span class="1998458335829271558" onmouseenter="enter('1998458335829271558');" onmouseout="out('1998458335829271558');" style="">1514             throws ServiceException {                                                                    </span>
<span class="3681854507729164346" onmouseenter="enter('3681854507729164346');" onmouseout="out('3681854507729164346');" style="">1515         for (Property p : cmd.getProperties()) {                                                         </span>
<span class="-1029066852878262358" onmouseenter="enter('-1029066852878262358');" onmouseout="out('-1029066852878262358');" style="">1516             if (p.getMetadata() instanceof BasicFieldMetadata) {                                         </span>
<span class="-5664285287189453326" onmouseenter="enter('-5664285287189453326');" onmouseout="out('-5664285287189453326');" style="">1517                 BasicFieldMetadata fmd = (BasicFieldMetadata) p.getMetadata();                           </span>
<span class="-5975886890404137502" onmouseenter="enter('-5975886890404137502');" onmouseout="out('-5975886890404137502');" style="">1518                 if (LookupType.DROPDOWN.equals(fmd.getLookupType())                                      </span>
<span class="3923559904233294352" onmouseenter="enter('3923559904233294352');" onmouseout="out('3923559904233294352');" style="">1519                         &amp;&amp; !ArrayUtils.contains(getFormHiddenVisibilities(), fmd.getVisibility())) {     </span>
<span class="7405748751598380621" onmouseenter="enter('7405748751598380621');" onmouseout="out('7405748751598380621');" style="">1520                     // Get the records                                                                   </span>
<span class="-8258870037901756296" onmouseenter="enter('-8258870037901756296');" onmouseout="out('-8258870037901756296');" style="">1521                     PersistencePackageRequest toOnePpr = PersistencePackageRequest.standard()            </span>
<span class="-1097107171578019007" onmouseenter="enter('-1097107171578019007');" onmouseout="out('-1097107171578019007');" style="">1522                             .withCeilingEntityClassname(fmd.getForeignKeyClass());                       </span>
<span class="6917610271852750158" onmouseenter="enter('6917610271852750158');" onmouseout="out('6917610271852750158');" style=""><abbr title="1523                     Entity[] rows = adminEntityService.getRecords(toOnePpr).getDynamicResultSet().getRecords();">1523                     Entity[] rows = adminEntityService.getRecords(toOnePpr).getDynamicResultSet().getRecoðŸ”µ</abbr></span>
<span  style="">1524                                                                                                          </span>
<span class="-7705887927793372443" onmouseenter="enter('-7705887927793372443');" onmouseout="out('-7705887927793372443');" style="">1525                     // Determine the id field                                                            </span>
<span class="6991332735797511760" onmouseenter="enter('6991332735797511760');" onmouseout="out('6991332735797511760');" style="">1526                     String idProp = null;                                                                </span>
<span class="-6188886223790300160" onmouseenter="enter('-6188886223790300160');" onmouseout="out('-6188886223790300160');" style=""><abbr title="1527                     ClassMetadata foreignClassMd = adminEntityService.getClassMetadata(toOnePpr).getDynamicResultSet().getClassMetaData();">1527                     ClassMetadata foreignClassMd = adminEntityService.getClassMetadata(toOnePpr).getDynamðŸ”µ</abbr></span>
<span class="-7740302606560587079" onmouseenter="enter('-7740302606560587079');" onmouseout="out('-7740302606560587079');" style="">1528                     for (Property foreignP : foreignClassMd.getProperties()) {                           </span>
<span class="-8528985220609178259" onmouseenter="enter('-8528985220609178259');" onmouseout="out('-8528985220609178259');" style="">1529                         if (foreignP.getMetadata() instanceof BasicFieldMetadata) {                      </span>
<span class="-8124244658776994002" onmouseenter="enter('-8124244658776994002');" onmouseout="out('-8124244658776994002');" style="">1530                             BasicFieldMetadata foreignFmd = (BasicFieldMetadata) foreignP.getMetadata(); </span>
<span class="-6615171596083676427" onmouseenter="enter('-6615171596083676427');" onmouseout="out('-6615171596083676427');" style="">1531                             if (SupportedFieldType.ID.equals(foreignFmd.getFieldType())) {               </span>
<span class="8626137451888256629" onmouseenter="enter('8626137451888256629');" onmouseout="out('8626137451888256629');" style="">1532                                 idProp = foreignP.getName();                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1533                             }                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1534                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1535                     }                                                                                    </span>
<span  style="">1536                                                                                                          </span>
<span class="-5011974389032314776" onmouseenter="enter('-5011974389032314776');" onmouseout="out('-5011974389032314776');" style="">1537                     if (idProp == null) {                                                                </span>
<span class="9029833375734478123" onmouseenter="enter('9029833375734478123');" onmouseout="out('9029833375734478123');" style=""><abbr title="1538                         throw new RuntimeException(&quot;Could not determine ID property for &quot; + fmd.getForeignKeyClass());">1538                         throw new RuntimeException(&quot;Could not determine ID property for &quot; + fmd.getForeigðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1539                     }                                                                                    </span>
<span  style="">1540                                                                                                          </span>
<span class="-606725638262986950" onmouseenter="enter('-606725638262986950');" onmouseout="out('-606725638262986950');" style="">1541                     // Determine the display field                                                       </span>
<span class="-6330673322776160197" onmouseenter="enter('-6330673322776160197');" onmouseout="out('-6330673322776160197');" style="">1542                     String displayProp = fmd.getLookupDisplayProperty();                                 </span>
<span  style="">1543                                                                                                          </span>
<span class="-282229918032301960" onmouseenter="enter('-282229918032301960');" onmouseout="out('-282229918032301960');" style="">1544                     // Build the options map                                                             </span>
<span class="-4401347179302263251" onmouseenter="enter('-4401347179302263251');" onmouseout="out('-4401347179302263251');" style="">1545                     Map&lt;String, String&gt; options = new HashMap&lt;&gt;();                                       </span>
<span class="-2921615155367105394" onmouseenter="enter('-2921615155367105394');" onmouseout="out('-2921615155367105394');" style="">1546                     for (Entity row : rows) {                                                            </span>
<span class="-9011123629733297811" onmouseenter="enter('-9011123629733297811');" onmouseout="out('-9011123629733297811');" style="">1547                         Property prop = row.findProperty(displayProp);                                   </span>
<span class="-3136494705922445009" onmouseenter="enter('-3136494705922445009');" onmouseout="out('-3136494705922445009');" style="">1548                         if (prop == null) {                                                              </span>
<span class="-2859923640341758966" onmouseenter="enter('-2859923640341758966');" onmouseout="out('-2859923640341758966');" style=""><abbr title="1549                             LOG.warn(&quot;Could not find displayProp [&quot; + StringUtil.sanitize(displayProp) + &quot;] on entity [&quot; +">1549                             LOG.warn(&quot;Could not find displayProp [&quot; + StringUtil.sanitize(displayProp) + ðŸ”µ</abbr></span>
<span class="-2254314617729442046" onmouseenter="enter('-2254314617729442046');" onmouseout="out('-2254314617729442046');" style="">1550                                     ef.getCeilingEntityClassname() + &quot;]&quot;);                               </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1551                         } else {                                                                         </span>
<span class="-8909758360620292667" onmouseenter="enter('-8909758360620292667');" onmouseout="out('-8909758360620292667');" style="">1552                             String displayValue = prop.getDisplayValue();                                </span>
<span class="987960060831169722" onmouseenter="enter('987960060831169722');" onmouseout="out('987960060831169722');" style="">1553                             if (StringUtils.isBlank(displayValue)) {                                     </span>
<span class="23109960353036152" onmouseenter="enter('23109960353036152');" onmouseout="out('23109960353036152');" style="">1554                                 displayValue = prop.getValue();                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1555                             }                                                                            </span>
<span class="-4077682651397635801" onmouseenter="enter('-4077682651397635801');" onmouseout="out('-4077682651397635801');" style="">1556                             options.put(row.findProperty(idProp).getValue(), displayValue);              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1557                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1558                     }                                                                                    </span>
<span  style="">1559                                                                                                          </span>
<span class="4340190494430873223" onmouseenter="enter('4340190494430873223');" onmouseout="out('4340190494430873223');" style="">1560                     // Set the options on the entity field                                               </span>
<span class="2851644107781283227" onmouseenter="enter('2851644107781283227');" onmouseout="out('2851644107781283227');" style="">1561                     ComboField cf = (ComboField) ef.findField(p.getName());                              </span>
<span class="-5242484842909969229" onmouseenter="enter('-5242484842909969229');" onmouseout="out('-5242484842909969229');" style="">1562                     cf.setOptions(options);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1563                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1564             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1565         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1566     }                                                                                                    </span>
<span  style="">1567                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1568     @Override                                                                                            </span>
<span class="763969629629221745" onmouseenter="enter('763969629629221745');" onmouseout="out('763969629629221745');" style=""><abbr title="1569     public EntityForm createEntityForm(ClassMetadata cmd, Entity entity, Map&lt;String, DynamicResultSet&gt; collectionRecords, List&lt;SectionCrumb&gt; sectionCrumbs)">1569     public EntityForm createEntityForm(ClassMetadata cmd, Entity entity, Map&lt;String, DynamicResultSet&gt; coðŸ”µ</abbr></span>
<span class="1998458335829271558" onmouseenter="enter('1998458335829271558');" onmouseout="out('1998458335829271558');" style="">1570             throws ServiceException {                                                                    </span>
<span class="-438894394526699599" onmouseenter="enter('-438894394526699599');" onmouseout="out('-438894394526699599');" style="">1571         EntityForm ef = createStandardEntityForm();                                                      </span>
<span class="-6955297876613536298" onmouseenter="enter('-6955297876613536298');" onmouseout="out('-6955297876613536298');" style="">1572         populateEntityForm(cmd, entity, collectionRecords, ef, sectionCrumbs);                           </span>
<span class="3191217127862437415" onmouseenter="enter('3191217127862437415');" onmouseout="out('3191217127862437415');" style="">1573         addAdditionalFormActions(ef);                                                                    </span>
<span class="8511655867693649187" onmouseenter="enter('8511655867693649187');" onmouseout="out('8511655867693649187');" style="">1574         extensionManager.getProxy().addAdditionalFormActions(ef);                                        </span>
<span class="3260120157565581788" onmouseenter="enter('3260120157565581788');" onmouseout="out('3260120157565581788');" style="">1575         return ef;                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1576     }                                                                                                    </span>
<span  style="">1577                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1578     @Override                                                                                            </span>
<span class="8407616833525381833" onmouseenter="enter('8407616833525381833');" onmouseout="out('8407616833525381833');" style=""><abbr title="1579     public void populateEntityForm(ClassMetadata cmd, Entity entity, Map&lt;String, DynamicResultSet&gt; collectionRecords, EntityForm ef, List&lt;SectionCrumb&gt; sectionCrumbs)">1579     public void populateEntityForm(ClassMetadata cmd, Entity entity, Map&lt;String, DynamicResultSet&gt; collecðŸ”µ</abbr></span>
<span class="1998458335829271558" onmouseenter="enter('1998458335829271558');" onmouseout="out('1998458335829271558');" style="">1580             throws ServiceException {                                                                    </span>
<span class="-7842928199694637195" onmouseenter="enter('-7842928199694637195');" onmouseout="out('-7842928199694637195');" style="">1581         // Get the form with values for this entity                                                      </span>
<span class="-4073847895348507412" onmouseenter="enter('-4073847895348507412');" onmouseout="out('-4073847895348507412');" style="">1582         populateEntityForm(cmd, entity, ef, sectionCrumbs);                                              </span>
<span  style="">1583                                                                                                          </span>
<span class="-5693049027716773876" onmouseenter="enter('-5693049027716773876');" onmouseout="out('-5693049027716773876');" style="">1584         // Attach the sub-collection list grids and specialty UI support                                 </span>
<span class="3681854507729164346" onmouseenter="enter('3681854507729164346');" onmouseout="out('3681854507729164346');" style="">1585         for (Property p : cmd.getProperties()) {                                                         </span>
<span class="-1029066852878262358" onmouseenter="enter('-1029066852878262358');" onmouseout="out('-1029066852878262358');" style="">1586             if (p.getMetadata() instanceof BasicFieldMetadata) {                                         </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">1587                 continue;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1588             }                                                                                            </span>
<span  style="">1589                                                                                                          </span>
<span class="7939644157431336741" onmouseenter="enter('7939644157431336741');" onmouseout="out('7939644157431336741');" style="">1590             if (!ArrayUtils.contains(p.getMetadata().getAvailableToTypes(), entity.getType()[0])) {      </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">1591                 continue;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1592             }                                                                                            </span>
<span  style="">1593                                                                                                          </span>
<span class="5057378952086585538" onmouseenter="enter('5057378952086585538');" onmouseout="out('5057378952086585538');" style="">1594             if (collectionRecords != null &amp;&amp; !collectionRecords.isEmpty()) {                             </span>
<span class="-2000540039355299527" onmouseenter="enter('-2000540039355299527');" onmouseout="out('-2000540039355299527');" style="">1595                 DynamicResultSet subCollectionEntities = collectionRecords.get(p.getName());             </span>
<span class="732471662007756244" onmouseenter="enter('732471662007756244');" onmouseout="out('732471662007756244');" style="">1596                 String containingEntityId = entity.getPMap().get(ef.getIdProperty()).getValue();         </span>
<span class="-2703128427729187311" onmouseenter="enter('-2703128427729187311');" onmouseout="out('-2703128427729187311');" style=""><abbr title="1597                 ListGrid listGrid = buildCollectionListGrid(containingEntityId, subCollectionEntities, p, ef.getSectionKey(), sectionCrumbs);">1597                 ListGrid listGrid = buildCollectionListGrid(containingEntityId, subCollectionEntities, p,ðŸ”µ</abbr></span>
<span  style="">1598                                                                                                          </span>
<span class="-4703142262249660615" onmouseenter="enter('-4703142262249660615');" onmouseout="out('-4703142262249660615');" style="">1599                 CollectionMetadata md = ((CollectionMetadata) p.getMetadata());                          </span>
<span class="-1532720970191757712" onmouseenter="enter('-1532720970191757712');" onmouseout="out('-1532720970191757712');" style="">1600                 if (md instanceof BasicCollectionMetadata) {                                             </span>
<span class="-1665410210923963053" onmouseenter="enter('-1665410210923963053');" onmouseout="out('-1665410210923963053');" style=""><abbr title="1601                     PersistencePackageRequest ppr = PersistencePackageRequest.fromMetadata(md, sectionCrumbs);">1601                     PersistencePackageRequest ppr = PersistencePackageRequest.fromMetadata(md, sectionCruðŸ”µ</abbr></span>
<span class="-9036890390079986870" onmouseenter="enter('-9036890390079986870');" onmouseout="out('-9036890390079986870');" style=""><abbr title="1602                     ClassMetadata collectionCmd = adminEntityService.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();">1602                     ClassMetadata collectionCmd = adminEntityService.getClassMetadata(ppr).getDynamicResuðŸ”µ</abbr></span>
<span class="7118158235764717040" onmouseenter="enter('7118158235764717040');" onmouseout="out('7118158235764717040');" style="">1603                     if (collectionCmd.getPolymorphicEntities().getChildren().length != 0) {              </span>
<span class="-2529377774460288369" onmouseenter="enter('-2529377774460288369');" onmouseout="out('-2529377774460288369');" style=""><abbr title="1604                         List&lt;ClassTree&gt; entityTypes = collectionCmd.getPolymorphicEntities().getCollapsedClassTrees();">1604                         List&lt;ClassTree&gt; entityTypes = collectionCmd.getPolymorphicEntities().getCollapsedðŸ”µ</abbr></span>
<span class="5700663076602659421" onmouseenter="enter('5700663076602659421');" onmouseout="out('5700663076602659421');" style="">1605                         ListGridActionGroup actionGroup = new ListGridActionGroup().withName(&quot;Add&quot;);     </span>
<span class="-8628780103469525246" onmouseenter="enter('-8628780103469525246');" onmouseout="out('-8628780103469525246');" style="">1606                         for (ClassTree entityType : entityTypes) {                                       </span>
<span class="-6085370745551409442" onmouseenter="enter('-6085370745551409442');" onmouseout="out('-6085370745551409442');" style="">1607                             ListGridAction ADD = new ListGridAction(ListGridAction.ADD)                  </span>
<span class="-8123842595880337680" onmouseenter="enter('-8123842595880337680');" onmouseout="out('-8123842595880337680');" style="">1608                                     .withButtonClass(AddMethodType.PERSIST_EMPTY==                       </span>
<span class="2458863346051852504" onmouseenter="enter('2458863346051852504');" onmouseout="out('2458863346051852504');" style=""><abbr title="1609                                             ((BasicCollectionMetadata) md).getAddMethodType()?&quot;sub-list-grid-add-empty&quot;:&quot;sub-list-grid-add&quot;)">1609                                             ((BasicCollectionMetadata) md).getAddMethodType()?&quot;sub-list-gðŸ”µ</abbr></span>
<span class="625982968125452177" onmouseenter="enter('625982968125452177');" onmouseout="out('625982968125452177');" style="">1610                                     .withActionTargetEntity(entityType.getFullyQualifiedClassname())     </span>
<span class="1979584669038484989" onmouseenter="enter('1979584669038484989');" onmouseout="out('1979584669038484989');" style="">1611                                     .withUrlPostfix(&quot;/add&quot;)                                              </span>
<span class="-2605498948604397141" onmouseenter="enter('-2605498948604397141');" onmouseout="out('-2605498948604397141');" style="">1612                                     .withIconClass(&quot;fa fa-plus&quot;)                                         </span>
<span class="1382163113890128554" onmouseenter="enter('1382163113890128554');" onmouseout="out('1382163113890128554');" style=""><abbr title="1613                                     .withDisplayText(BLCMessageUtils.getMessage(entityType.getFriendlyName()));">1613                                     .withDisplayText(BLCMessageUtils.getMessage(entityType.getFriendlyNamðŸ”µ</abbr></span>
<span class="-362768101277236570" onmouseenter="enter('-362768101277236570');" onmouseout="out('-362768101277236570');" style="">1614                             actionGroup.getListGridActions().add(0, ADD);                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1615                         }                                                                                </span>
<span class="4272855771145592976" onmouseenter="enter('4272855771145592976');" onmouseout="out('4272855771145592976');" style="">1616                         listGrid.addToolbarActionGroup(actionGroup);                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1617                     } else {                                                                             </span>
<span class="-686829543212379321" onmouseenter="enter('-686829543212379321');" onmouseout="out('-686829543212379321');" style="">1618                         listGrid.getToolbarActions().add(0, AddMethodType.PERSIST_EMPTY==                </span>
<span class="452604423250167593" onmouseenter="enter('452604423250167593');" onmouseout="out('452604423250167593');" style=""><abbr title="1619                                 ((BasicCollectionMetadata) md).getAddMethodType()?DefaultListGridActions.ADD_EMPTY:DefaultListGridActions.ADD);">1619                                 ((BasicCollectionMetadata) md).getAddMethodType()?DefaultListGridActions.ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1620                     }                                                                                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1621                 } else {                                                                                 </span>
<span class="-8192307858907059023" onmouseenter="enter('-8192307858907059023');" onmouseout="out('-8192307858907059023');" style="">1622                     listGrid.getToolbarActions().add(0, DefaultListGridActions.ADD);                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1623                 }                                                                                        </span>
<span  style="">1624                                                                                                          </span>
<span class="1698654555130612252" onmouseenter="enter('1698654555130612252');" onmouseout="out('1698654555130612252');" style="">1625                 if (subCollectionEntities.getUnselectedTabMetadata().get(md.getTab())!=null) {           </span>
<span class="-6246999191581452259" onmouseenter="enter('-6246999191581452259');" onmouseout="out('-6246999191581452259');" style="">1626                     ef.addListGrid(cmd, listGrid, md.getTab(), md.getTabOrder(), md.getGroup(), true);   </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1627                 } else {                                                                                 </span>
<span class="-3682322762406032422" onmouseenter="enter('-3682322762406032422');" onmouseout="out('-3682322762406032422');" style="">1628                     ef.addListGrid(cmd, listGrid, md.getTab(), md.getTabOrder(), md.getGroup(), false);  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1629                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1630             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1631         }                                                                                                </span>
<span  style="">1632                                                                                                          </span>
<span class="-8574421891214577202" onmouseenter="enter('-8574421891214577202');" onmouseout="out('-8574421891214577202');" style="">1633         if (CollectionUtils.isEmpty(ef.getActions())) {                                                  </span>
<span class="-2237425030372835917" onmouseenter="enter('-2237425030372835917');" onmouseout="out('-2237425030372835917');" style="">1634             ef.addAction(DefaultEntityFormActions.SAVE);                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1635         }                                                                                                </span>
<span  style="">1636                                                                                                          </span>
<span class="-3017596271040445246" onmouseenter="enter('-3017596271040445246');" onmouseout="out('-3017596271040445246');" style="">1637         addDeleteActionIfAllowed(ef, cmd, entity);                                                       </span>
<span class="-1573379781634260780" onmouseenter="enter('-1573379781634260780');" onmouseout="out('-1573379781634260780');" style="">1638         addDuplicateActionIfAllowed(ef, cmd);                                                            </span>
<span class="-4992665792206214706" onmouseenter="enter('-4992665792206214706');" onmouseout="out('-4992665792206214706');" style="">1639         setReadOnlyState(ef, cmd, entity);                                                               </span>
<span  style="">1640                                                                                                          </span>
<span class="-2369176302071135940" onmouseenter="enter('-2369176302071135940');" onmouseout="out('-2369176302071135940');" style="">1641         // check for fields that should be hidden based on annotations                                   </span>
<span class="-7540431012384828138" onmouseenter="enter('-7540431012384828138');" onmouseout="out('-7540431012384828138');" style="">1642         setVisibilityBasedOnShowIfFieldEquals(cmd, entity, ef);                                          </span>
<span  style="">1643                                                                                                          </span>
<span class="-6573999189247732385" onmouseenter="enter('-6573999189247732385');" onmouseout="out('-6573999189247732385');" style="">1644         extensionManager.getProxy().modifyDetailEntityForm(ef);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1645     }                                                                                                    </span>
<span  style="">1646                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1647     /**                                                                                                  </span>
<span class="352645507222005893" onmouseenter="enter('352645507222005893');" onmouseout="out('352645507222005893');" style=""><abbr title="1648      * Adds the {@link DefaultEntityFormActions#DELETE} if the user is allowed to delete the &lt;b&gt;entity&lt;/b&gt;. The user can">1648      * Adds the {@link DefaultEntityFormActions#DELETE} if the user is allowed to delete the &lt;b&gt;entity&lt;/bðŸ”µ</abbr></span>
<span class="-3708177379444774538" onmouseenter="enter('-3708177379444774538');" onmouseout="out('-3708177379444774538');" style="">1649      * delete an entity for the following cases:                                                         </span>
<span class="3244483720103844454" onmouseenter="enter('3244483720103844454');" onmouseout="out('3244483720103844454');" style="">1650      * &lt;ol&gt;                                                                                              </span>
<span class="5070277409715594588" onmouseenter="enter('5070277409715594588');" onmouseout="out('5070277409715594588');" style=""><abbr title="1651      *  &lt;li&gt;The user has the security to {@link EntityOperationType#REMOVE} the given class name represented by">1651      *  &lt;li&gt;The user has the security to {@link EntityOperationType#REMOVE} the given class name represenðŸ”µ</abbr></span>
<span class="8957232178890049809" onmouseenter="enter('8957232178890049809');" onmouseout="out('8957232178890049809');" style=""><abbr title="1652      *  the &lt;b&gt;entityForm&lt;/b&gt; (determined by {@link #getSecurityClassname(EntityForm, ClassMetadata)})&lt;/li&gt;">1652      *  the &lt;b&gt;entityForm&lt;/b&gt; (determined by {@link #getSecurityClassname(EntityForm, ClassMetadata)})&lt;/lðŸ”µ</abbr></span>
<span class="980044994252332631" onmouseenter="enter('980044994252332631');" onmouseout="out('980044994252332631');" style="">1653      *  &lt;li&gt;The user has the security necessary to delete the given &lt;b&gt;entity&lt;/b&gt; according to the       </span>
<span class="8011888861168395573" onmouseenter="enter('8011888861168395573');" onmouseout="out('8011888861168395573');" style="">1654      *  {@link RowLevelSecurityService#canRemove(AdminUser, Entity)}&lt;/li&gt;                                </span>
<span class="6987349732947823565" onmouseenter="enter('6987349732947823565');" onmouseout="out('6987349732947823565');" style="">1655      * &lt;/ol&gt;                                                                                             </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1656      *                                                                                                   </span>
<span class="-8102393608813481146" onmouseenter="enter('-8102393608813481146');" onmouseout="out('-8102393608813481146');" style="">1657      * @param entityForm the form being generated                                                        </span>
<span class="-5184866399254269391" onmouseenter="enter('-5184866399254269391');" onmouseout="out('-5184866399254269391');" style="">1658      * @param cmd the metatadata used to build the &lt;b&gt;entityForm&lt;/b&gt; for the &lt;b&gt;entity&lt;/b&gt;               </span>
<span class="-6994238295290465877" onmouseenter="enter('-6994238295290465877');" onmouseout="out('-6994238295290465877');" style="">1659      * @param entity the entity being edited                                                             </span>
<span class="-8891442921277557778" onmouseenter="enter('-8891442921277557778');" onmouseout="out('-8891442921277557778');" style="">1660      * @see {@link SecurityVerifier#securityCheck(String, EntityOperationType)}                          </span>
<span class="-3828641031793918168" onmouseenter="enter('-3828641031793918168');" onmouseout="out('-3828641031793918168');" style="">1661      * @see {@link #getSecurityClassname(EntityForm, ClassMetadata)}                                     </span>
<span class="8925161549930098588" onmouseenter="enter('8925161549930098588');" onmouseout="out('8925161549930098588');" style="">1662      * @see {@link RowLevelSecurityService#canRemove(AdminUser, Entity)}                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1663      */                                                                                                  </span>
<span class="1590261750272169439" onmouseenter="enter('1590261750272169439');" onmouseout="out('1590261750272169439');" style="">1664     protected void addDeleteActionIfAllowed(EntityForm entityForm, ClassMetadata cmd, Entity entity) {   </span>
<span class="9176849152277833812" onmouseenter="enter('9176849152277833812');" onmouseout="out('9176849152277833812');" style="">1665         if (isDeletionAllowed(entityForm, cmd, entity)) {                                                </span>
<span class="-8844177275906434182" onmouseenter="enter('-8844177275906434182');" onmouseout="out('-8844177275906434182');" style="">1666             entityForm.addAction(DefaultEntityFormActions.DELETE);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1667         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1668     }                                                                                                    </span>
<span  style="">1669                                                                                                          </span>
<span class="1233024099247846166" onmouseenter="enter('1233024099247846166');" onmouseout="out('1233024099247846166');" style="">1670     protected boolean isDeletionAllowed(final EntityForm entityForm, final ClassMetadata cmd,            </span>
<span class="-5681436677530159700" onmouseenter="enter('-5681436677530159700');" onmouseout="out('-5681436677530159700');" style="">1671             final Entity entity) {                                                                       </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1672         try {                                                                                            </span>
<span class="5476366109962905346" onmouseenter="enter('5476366109962905346');" onmouseout="out('5476366109962905346');" style="">1673             String securityEntityClassname = getSecurityClassname(entityForm, cmd);                      </span>
<span class="-1437365640597623792" onmouseenter="enter('-1437365640597623792');" onmouseout="out('-1437365640597623792');" style="">1674             adminRemoteSecurityService                                                                   </span>
<span class="9049592859337879981" onmouseenter="enter('9049592859337879981');" onmouseout="out('9049592859337879981');" style="">1675                     .securityCheck(securityEntityClassname, EntityOperationType.REMOVE);                 </span>
<span class="9220844322816084446" onmouseenter="enter('9220844322816084446');" onmouseout="out('9220844322816084446');" style="">1676         } catch (ServiceException e) {                                                                   </span>
<span class="-8912377967087217182" onmouseenter="enter('-8912377967087217182');" onmouseout="out('-8912377967087217182');" style="">1677             if (e instanceof SecurityServiceException) {                                                 </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1678                 return false;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1679             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1680         }                                                                                                </span>
<span  style="">1681                                                                                                          </span>
<span class="-6544480517582328932" onmouseenter="enter('-6544480517582328932');" onmouseout="out('-6544480517582328932');" style="">1682         final AdminUser persistentAdminUser = adminRemoteSecurityService.getPersistentAdminUser();       </span>
<span  style="">1683                                                                                                          </span>
<span class="-4253696723384610596" onmouseenter="enter('-4253696723384610596');" onmouseout="out('-4253696723384610596');" style="">1684         return rowLevelSecurityService.canUpdate(persistentAdminUser, entity)                            </span>
<span class="6878671858526625956" onmouseenter="enter('6878671858526625956');" onmouseout="out('6878671858526625956');" style="">1685                 &amp;&amp; rowLevelSecurityService.canRemove(persistentAdminUser, entity);                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1686     }                                                                                                    </span>
<span  style="">1687                                                                                                          </span>
<span class="8744244153887540139" onmouseenter="enter('8744244153887540139');" onmouseout="out('8744244153887540139');" style="">1688     protected void addDuplicateActionIfAllowed(final EntityForm entityForm,                              </span>
<span class="7968956867409491481" onmouseenter="enter('7968956867409491481');" onmouseout="out('7968956867409491481');" style="">1689             final ClassMetadata cmd) {                                                                   </span>
<span class="-4074855000497140283" onmouseenter="enter('-4074855000497140283');" onmouseout="out('-4074855000497140283');" style="">1690         if (isDuplicationAllowed(entityForm, cmd)) {                                                     </span>
<span class="6780575287202109079" onmouseenter="enter('6780575287202109079');" onmouseout="out('6780575287202109079');" style="">1691             entityForm.addAction(DefaultEntityFormActions.DUPLICATE);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1692         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1693     }                                                                                                    </span>
<span  style="">1694                                                                                                          </span>
<span class="2750172847360880677" onmouseenter="enter('2750172847360880677');" onmouseout="out('2750172847360880677');" style="">1695     protected boolean isDuplicationAllowed(final EntityForm entityForm, final ClassMetadata cmd) {       </span>
<span class="5761145246382260648" onmouseenter="enter('5761145246382260648');" onmouseout="out('5761145246382260648');" style="">1696         final String securityClassname = getSecurityClassname(entityForm, cmd);                          </span>
<span  style="">1697                                                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1698         try {                                                                                            </span>
<span class="7910151490387293712" onmouseenter="enter('7910151490387293712');" onmouseout="out('7910151490387293712');" style="">1699             adminRemoteSecurityService.securityCheck(securityClassname, EntityOperationType.ADD);        </span>
<span class="9220844322816084446" onmouseenter="enter('9220844322816084446');" onmouseout="out('9220844322816084446');" style="">1700         } catch (ServiceException e) {                                                                   </span>
<span class="-8912377967087217182" onmouseenter="enter('-8912377967087217182');" onmouseout="out('-8912377967087217182');" style="">1701             if (e instanceof SecurityServiceException) {                                                 </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1702                 return false;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1703             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1704         }                                                                                                </span>
<span  style="">1705                                                                                                          </span>
<span class="3631252767096747840" onmouseenter="enter('3631252767096747840');" onmouseout="out('3631252767096747840');" style="">1706         final Class&lt;?&gt; entityClass = dynamicEntityDao.getImplClass(securityClassname);                   </span>
<span  style="">1707                                                                                                          </span>
<span class="-7591397042021229268" onmouseenter="enter('-7591397042021229268');" onmouseout="out('-7591397042021229268');" style="">1708         return duplicator.validate(entityClass, Long.valueOf(entityForm.getId())) &amp;&amp;                     </span>
<span class="5950039316725693002" onmouseenter="enter('5950039316725693002');" onmouseout="out('5950039316725693002');" style="">1709                 rowLevelSecurityService.canAdd(adminRemoteSecurityService.getPersistentAdminUser(),      </span>
<span class="-9091740986951777867" onmouseenter="enter('-9091740986951777867');" onmouseout="out('-9091740986951777867');" style="">1710                         securityClassname, cmd);                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1711     }                                                                                                    </span>
<span  style="">1712                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1713     /**                                                                                                  </span>
<span class="-8604925744257744736" onmouseenter="enter('-8604925744257744736');" onmouseout="out('-8604925744257744736');" style="">1714      * The given &lt;b&gt;entityForm&lt;/b&gt; is marked as readonly for the following cases:                        </span>
<span class="3244483720103844454" onmouseenter="enter('3244483720103844454');" onmouseout="out('3244483720103844454');" style="">1715      * &lt;ol&gt;                                                                                              </span>
<span class="8384568302593626864" onmouseenter="enter('8384568302593626864');" onmouseout="out('8384568302593626864');" style="">1716      *  &lt;li&gt;All of the properties from &lt;b&gt;cmd&lt;/b&gt; are readonly&lt;/b&gt;&lt;/li&gt;                                  </span>
<span class="3259494465539702713" onmouseenter="enter('3259494465539702713');" onmouseout="out('3259494465539702713');" style=""><abbr title="1717      *  &lt;li&gt;The user does not have the security to {@link EntityOperationType#UPDATE} the given class name represented by">1717      *  &lt;li&gt;The user does not have the security to {@link EntityOperationType#UPDATE} the given class namðŸ”µ</abbr></span>
<span class="8957232178890049809" onmouseenter="enter('8957232178890049809');" onmouseout="out('8957232178890049809');" style=""><abbr title="1718      *  the &lt;b&gt;entityForm&lt;/b&gt; (determined by {@link #getSecurityClassname(EntityForm, ClassMetadata)})&lt;/li&gt;">1718      *  the &lt;b&gt;entityForm&lt;/b&gt; (determined by {@link #getSecurityClassname(EntityForm, ClassMetadata)})&lt;/lðŸ”µ</abbr></span>
<span class="-661097031284754018" onmouseenter="enter('-661097031284754018');" onmouseout="out('-661097031284754018');" style=""><abbr title="1719      *  &lt;li&gt;The user does not have the security necessary to modify the given &lt;b&gt;entity&lt;/b&gt; according to the">1719      *  &lt;li&gt;The user does not have the security necessary to modify the given &lt;b&gt;entity&lt;/b&gt; according to ðŸ”µ</abbr></span>
<span class="1476257847894540357" onmouseenter="enter('1476257847894540357');" onmouseout="out('1476257847894540357');" style="">1720      *  {@link RowLevelSecurityService#canUpdate(AdminUser, Entity)}&lt;/li&gt;                                </span>
<span class="6987349732947823565" onmouseenter="enter('6987349732947823565');" onmouseout="out('6987349732947823565');" style="">1721      * &lt;/ol&gt;                                                                                             </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1722      *                                                                                                   </span>
<span class="-8102393608813481146" onmouseenter="enter('-8102393608813481146');" onmouseout="out('-8102393608813481146');" style="">1723      * @param entityForm the form being generated                                                        </span>
<span class="-5184866399254269391" onmouseenter="enter('-5184866399254269391');" onmouseout="out('-5184866399254269391');" style="">1724      * @param cmd the metatadata used to build the &lt;b&gt;entityForm&lt;/b&gt; for the &lt;b&gt;entity&lt;/b&gt;               </span>
<span class="-6994238295290465877" onmouseenter="enter('-6994238295290465877');" onmouseout="out('-6994238295290465877');" style="">1725      * @param entity the entity being edited                                                             </span>
<span class="-8891442921277557778" onmouseenter="enter('-8891442921277557778');" onmouseout="out('-8891442921277557778');" style="">1726      * @see {@link SecurityVerifier#securityCheck(String, EntityOperationType)}                          </span>
<span class="-3828641031793918168" onmouseenter="enter('-3828641031793918168');" onmouseout="out('-3828641031793918168');" style="">1727      * @see {@link #getSecurityClassname(EntityForm, ClassMetadata)}                                     </span>
<span class="3340343931427513832" onmouseenter="enter('3340343931427513832');" onmouseout="out('3340343931427513832');" style="">1728      * @see {@link RowLevelSecurityService#canUpdate(AdminUser, Entity)}                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1729      */                                                                                                  </span>
<span class="7475800010460682445" onmouseenter="enter('7475800010460682445');" onmouseout="out('7475800010460682445');" style="">1730     protected void setReadOnlyState(EntityForm entityForm, ClassMetadata cmd, Entity entity) {           </span>
<span class="-3754358688511165958" onmouseenter="enter('-3754358688511165958');" onmouseout="out('-3754358688511165958');" style="">1731         boolean readOnly = true;                                                                         </span>
<span  style="">1732                                                                                                          </span>
<span class="-2305007204320036324" onmouseenter="enter('-2305007204320036324');" onmouseout="out('-2305007204320036324');" style="">1733         // If all of the fields are read only, we&#x27;ll mark the form as such                               </span>
<span class="-3497335608114491506" onmouseenter="enter('-3497335608114491506');" onmouseout="out('-3497335608114491506');" style="">1734         for (Property property : cmd.getProperties()) {                                                  </span>
<span class="-5795738539482972481" onmouseenter="enter('-5795738539482972481');" onmouseout="out('-5795738539482972481');" style="">1735             FieldMetadata fieldMetadata = property.getMetadata();                                        </span>
<span class="-638676474141600706" onmouseenter="enter('-638676474141600706');" onmouseout="out('-638676474141600706');" style="">1736             if (fieldMetadata instanceof BasicFieldMetadata) {                                           </span>
<span class="-3122303192863427007" onmouseenter="enter('-3122303192863427007');" onmouseout="out('-3122303192863427007');" style=""><abbr title="1737                 readOnly = ((BasicFieldMetadata) fieldMetadata).getReadOnly() != null &amp;&amp; ((BasicFieldMetadata) fieldMetadata).getReadOnly();">1737                 readOnly = ((BasicFieldMetadata) fieldMetadata).getReadOnly() != null &amp;&amp; ((BasicFieldMetaðŸ”µ</abbr></span>
<span class="2916396140375617365" onmouseenter="enter('2916396140375617365');" onmouseout="out('2916396140375617365');" style="">1738                 if (!readOnly) {                                                                         </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1739                     break;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1740                 }                                                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1741             } else {                                                                                     </span>
<span class="2490832096811631077" onmouseenter="enter('2490832096811631077');" onmouseout="out('2490832096811631077');" style="">1742                 readOnly = ((CollectionMetadata) fieldMetadata).isMutable();                             </span>
<span class="2916396140375617365" onmouseenter="enter('2916396140375617365');" onmouseout="out('2916396140375617365');" style="">1743                 if (!readOnly) {                                                                         </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1744                     break;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1745                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1746             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1747         }                                                                                                </span>
<span  style="">1748                                                                                                          </span>
<span class="2916396140375617365" onmouseenter="enter('2916396140375617365');" onmouseout="out('2916396140375617365');" style="">1749         if (!readOnly) {                                                                                 </span>
<span class="8591967978504453740" onmouseenter="enter('8591967978504453740');" onmouseout="out('8591967978504453740');" style=""><abbr title="1750             // If the user does not have edit permissions, we will go ahead and make the form read only to prevent confusion">1750             // If the user does not have edit permissions, we will go ahead and make the form read only tðŸ”µ</abbr></span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1751             try {                                                                                        </span>
<span class="5476366109962905346" onmouseenter="enter('5476366109962905346');" onmouseout="out('5476366109962905346');" style="">1752                 String securityEntityClassname = getSecurityClassname(entityForm, cmd);                  </span>
<span class="7305757249405162956" onmouseenter="enter('7305757249405162956');" onmouseout="out('7305757249405162956');" style=""><abbr title="1753                 adminRemoteSecurityService.securityCheck(securityEntityClassname, EntityOperationType.UPDATE);">1753                 adminRemoteSecurityService.securityCheck(securityEntityClassname, EntityOperationType.UPDðŸ”µ</abbr></span>
<span class="9220844322816084446" onmouseenter="enter('9220844322816084446');" onmouseout="out('9220844322816084446');" style="">1754             } catch (ServiceException e) {                                                               </span>
<span class="-8912377967087217182" onmouseenter="enter('-8912377967087217182');" onmouseout="out('-8912377967087217182');" style="">1755                 if (e instanceof SecurityServiceException) {                                             </span>
<span class="6120466793575593078" onmouseenter="enter('6120466793575593078');" onmouseout="out('6120466793575593078');" style="">1756                     readOnly = true;                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1757                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1758             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1759         }                                                                                                </span>
<span  style="">1760                                                                                                          </span>
<span class="-2506720598607900340" onmouseenter="enter('-2506720598607900340');" onmouseout="out('-2506720598607900340');" style=""><abbr title="1761         // if the normal admin security service has not deemed this readonly and the all of the properties on the entity">1761         // if the normal admin security service has not deemed this readonly and the all of the propertieðŸ”µ</abbr></span>
<span class="-360101994104390021" onmouseenter="enter('-360101994104390021');" onmouseout="out('-360101994104390021');" style="">1762         // are not readonly, then check the row-level security                                           </span>
<span class="2916396140375617365" onmouseenter="enter('2916396140375617365');" onmouseout="out('2916396140375617365');" style="">1763         if (!readOnly) {                                                                                 </span>
<span class="7094483165734488508" onmouseenter="enter('7094483165734488508');" onmouseout="out('7094483165734488508');" style=""><abbr title="1764             readOnly = !rowLevelSecurityService.canUpdate(adminRemoteSecurityService.getPersistentAdminUser(), entity);">1764             readOnly = !rowLevelSecurityService.canUpdate(adminRemoteSecurityService.getPersistentAdminUsðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1765         }                                                                                                </span>
<span  style="">1766                                                                                                          </span>
<span class="7378462715957185244" onmouseenter="enter('7378462715957185244');" onmouseout="out('7378462715957185244');" style="">1767         if (readOnly) {                                                                                  </span>
<span class="7356620202531041753" onmouseenter="enter('7356620202531041753');" onmouseout="out('7356620202531041753');" style="">1768             entityForm.setReadOnly();                                                                    </span>
<span class="-1010311312628539836" onmouseenter="enter('-1010311312628539836');" onmouseout="out('-1010311312628539836');" style=""><abbr title="1769             //If someone has replaced RowLevelSecurityService, check here to make sure the replacement implements the expected interface">1769             //If someone has replaced RowLevelSecurityService, check here to make sure the replacement imðŸ”µ</abbr></span>
<span class="8968842492276656547" onmouseenter="enter('8968842492276656547');" onmouseout="out('8968842492276656547');" style="">1770             if (rowLevelSecurityService instanceof ExceptionAwareRowLevelSecurityProvider) {             </span>
<span class="2057574043580690918" onmouseenter="enter('2057574043580690918');" onmouseout="out('2057574043580690918');" style=""><abbr title="1771                 EntityFormModifierConfiguration entityFormModifierConfiguration = ((ExceptionAwareRowLevelSecurityProvider) rowLevelSecurityService).getUpdateDenialExceptions();">1771                 EntityFormModifierConfiguration entityFormModifierConfiguration = ((ExceptionAwareRowLeveðŸ”µ</abbr></span>
<span class="-3023990582845647391" onmouseenter="enter('-3023990582845647391');" onmouseout="out('-3023990582845647391');" style=""><abbr title="1772                 for (EntityFormModifierData&lt;EntityFormModifierDataPoint&gt; data : entityFormModifierConfiguration.getData()) {">1772                 for (EntityFormModifierData&lt;EntityFormModifierDataPoint&gt; data : entityFormModifierConfiguðŸ”µ</abbr></span>
<span class="9148632731325481398" onmouseenter="enter('9148632731325481398');" onmouseout="out('9148632731325481398');" style="">1773                     for (EntityFormModifier modifier : entityFormModifierConfiguration.getModifier()) {  </span>
<span class="7131836139928065231" onmouseenter="enter('7131836139928065231');" onmouseout="out('7131836139928065231');" style="">1774                         if (modifier.isQualified(data.getModifierType())) {                              </span>
<span class="-3482148637742284796" onmouseenter="enter('-3482148637742284796');" onmouseout="out('-3482148637742284796');" style="">1775                             modifier.modifyEntityForm(new EntityFormModifierRequest()                    </span>
<span class="8232027775022174594" onmouseenter="enter('8232027775022174594');" onmouseout="out('8232027775022174594');" style="">1776                                     .withEntityForm(entityForm)                                          </span>
<span class="-1014541830042934633" onmouseenter="enter('-1014541830042934633');" onmouseout="out('-1014541830042934633');" style="">1777                                     .withConfiguration(data)                                             </span>
<span class="-7538620272607121359" onmouseenter="enter('-7538620272607121359');" onmouseout="out('-7538620272607121359');" style="">1778                                     .withCurrentUser(adminRemoteSecurityService.getPersistentAdminUser())</span>
<span class="-2471313258794916634" onmouseenter="enter('-2471313258794916634');" onmouseout="out('-2471313258794916634');" style="">1779                                     .withEntity(entity)                                                  </span>
<span class="680994463596247300" onmouseenter="enter('680994463596247300');" onmouseout="out('680994463596247300');" style="">1780                                     .withRowLevelSecurityService(rowLevelSecurityService));              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1781                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1782                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1783                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1784             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1785         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1786     }                                                                                                    </span>
<span  style="">1787                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1788     /**                                                                                                  </span>
<span class="4825906517632270050" onmouseenter="enter('4825906517632270050');" onmouseout="out('4825906517632270050');" style="">1789      * Obtains the class name suitable for passing along to the {@link SecurityVerifier}                 </span>
<span class="-4758509257574949373" onmouseenter="enter('-4758509257574949373');" onmouseout="out('-4758509257574949373');" style="">1790      * @param entityForm                                                                                 </span>
<span class="3340688165449077744" onmouseenter="enter('3340688165449077744');" onmouseout="out('3340688165449077744');" style="">1791      * @param cmd                                                                                        </span>
<span class="-9165797340485297481" onmouseenter="enter('-9165797340485297481');" onmouseout="out('-9165797340485297481');" style="">1792      * @return                                                                                           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1793      */                                                                                                  </span>
<span class="-4629711814814156723" onmouseenter="enter('-4629711814814156723');" onmouseout="out('-4629711814814156723');" style="">1794     protected String getSecurityClassname(EntityForm entityForm, ClassMetadata cmd) {                    </span>
<span class="-6496925357216982154" onmouseenter="enter('-6496925357216982154');" onmouseout="out('-6496925357216982154');" style="">1795         String securityEntityClassname = entityForm.getCeilingEntityClassname();                         </span>
<span  style="">1796                                                                                                          </span>
<span class="-7034725187183815217" onmouseenter="enter('-7034725187183815217');" onmouseout="out('-7034725187183815217');" style="">1797         if (!StringUtils.isEmpty(cmd.getSecurityCeilingType())) {                                        </span>
<span class="5083723888191082683" onmouseenter="enter('5083723888191082683');" onmouseout="out('5083723888191082683');" style="">1798             securityEntityClassname = cmd.getSecurityCeilingType();                                      </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1799         } else {                                                                                         </span>
<span class="7913947527267397417" onmouseenter="enter('7913947527267397417');" onmouseout="out('7913947527267397417');" style="">1800             if (entityForm.getDynamicFormInfos() != null) {                                              </span>
<span class="7790362624567421850" onmouseenter="enter('7790362624567421850');" onmouseout="out('7790362624567421850');" style="">1801                 for (DynamicEntityFormInfo info : entityForm.getDynamicFormInfos().values()) {           </span>
<span class="-1917944725928650662" onmouseenter="enter('-1917944725928650662');" onmouseout="out('-1917944725928650662');" style="">1802                     if (!StringUtils.isEmpty(info.getSecurityCeilingClassName())) {                      </span>
<span class="4842268456536900985" onmouseenter="enter('4842268456536900985');" onmouseout="out('4842268456536900985');" style="">1803                         securityEntityClassname = info.getSecurityCeilingClassName();                    </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1804                         break;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1805                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1806                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1807             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1808         }                                                                                                </span>
<span  style="">1809                                                                                                          </span>
<span class="-4632494495444562964" onmouseenter="enter('-4632494495444562964');" onmouseout="out('-4632494495444562964');" style="">1810         return securityEntityClassname;                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1811     }                                                                                                    </span>
<span  style="">1812                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1813     @Override                                                                                            </span>
<span class="-2624998369196687024" onmouseenter="enter('-2624998369196687024');" onmouseout="out('-2624998369196687024');" style="">1814     public void populateEntityFormFields(EntityForm ef, Entity entity) {                                 </span>
<span class="-5366055867936531883" onmouseenter="enter('-5366055867936531883');" onmouseout="out('-5366055867936531883');" style="">1815         populateEntityFormFields(ef, entity, true, true);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1816     }                                                                                                    </span>
<span  style="">1817                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1818     @Override                                                                                            </span>
<span class="-6740512050797749179" onmouseenter="enter('-6740512050797749179');" onmouseout="out('-6740512050797749179');" style=""><abbr title="1819     public void populateEntityFormFields(EntityForm ef, Entity entity, boolean populateType, boolean populateId) {">1819     public void populateEntityFormFields(EntityForm ef, Entity entity, boolean populateType, boolean popuðŸ”µ</abbr></span>
<span class="-8844360907694676103" onmouseenter="enter('-8844360907694676103');" onmouseout="out('-8844360907694676103');" style="">1820         if (populateId) {                                                                                </span>
<span class="-5951790405273252562" onmouseenter="enter('-5951790405273252562');" onmouseout="out('-5951790405273252562');" style="">1821             ef.setId(entity.findProperty(ef.getIdProperty()).getValue());                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1822         }                                                                                                </span>
<span class="6008447871872074898" onmouseenter="enter('6008447871872074898');" onmouseout="out('6008447871872074898');" style="">1823         if (populateType) {                                                                              </span>
<span class="2566657873931456162" onmouseenter="enter('2566657873931456162');" onmouseout="out('2566657873931456162');" style="">1824             ef.setEntityType(entity.getType()[0]);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1825         }                                                                                                </span>
<span  style="">1826                                                                                                          </span>
<span class="-4264420628414385505" onmouseenter="enter('-4264420628414385505');" onmouseout="out('-4264420628414385505');" style="">1827         for (Entry&lt;String, Field&gt; entry : ef.getFields().entrySet()) {                                   </span>
<span class="2420686282896377848" onmouseenter="enter('2420686282896377848');" onmouseout="out('2420686282896377848');" style="">1828             Property entityProp = entity.findProperty(entry.getKey());                                   </span>
<span class="-2366650903096921345" onmouseenter="enter('-2366650903096921345');" onmouseout="out('-2366650903096921345');" style="">1829             if (entityProp != null) {                                                                    </span>
<span class="-7617915495394948835" onmouseenter="enter('-7617915495394948835');" onmouseout="out('-7617915495394948835');" style="">1830                 entry.getValue().setValue(entityProp.getValue());                                        </span>
<span class="-4933731915633510416" onmouseenter="enter('-4933731915633510416');" onmouseout="out('-4933731915633510416');" style="">1831                 entry.getValue().setDisplayValue(entityProp.getDisplayValue());                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1832             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1833         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1834     }                                                                                                    </span>
<span  style="">1835                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1836     @Override                                                                                            </span>
<span class="8490818103305754450" onmouseenter="enter('8490818103305754450');" onmouseout="out('8490818103305754450');" style=""><abbr title="1837     public void populateAdornedEntityFormFields(EntityForm ef, Entity entity, AdornedTargetList adornedList) {">1837     public void populateAdornedEntityFormFields(EntityForm ef, Entity entity, AdornedTargetList adornedLiðŸ”µ</abbr></span>
<span class="-7724922710012225100" onmouseenter="enter('-7724922710012225100');" onmouseout="out('-7724922710012225100');" style=""><abbr title="1838         Field field = ef.findField(adornedList.getTargetObjectPath() + &quot;.&quot; + adornedList.getTargetIdProperty());">1838         Field field = ef.findField(adornedList.getTargetObjectPath() + &quot;.&quot; + adornedList.getTargetIdPropeðŸ”µ</abbr></span>
<span class="6683657094444632615" onmouseenter="enter('6683657094444632615');" onmouseout="out('6683657094444632615');" style="">1839         Property entityProp = entity.findProperty(ef.getIdProperty());                                   </span>
<span class="627899284580660581" onmouseenter="enter('627899284580660581');" onmouseout="out('627899284580660581');" style="">1840         field.setValue(entityProp.getValue());                                                           </span>
<span  style="">1841                                                                                                          </span>
<span class="2111689089149990625" onmouseenter="enter('2111689089149990625');" onmouseout="out('2111689089149990625');" style="">1842         if (StringUtils.isNotBlank(adornedList.getSortField())) {                                        </span>
<span class="6344948819160968120" onmouseenter="enter('6344948819160968120');" onmouseout="out('6344948819160968120');" style="">1843             field = ef.findField(adornedList.getSortField());                                            </span>
<span class="8964070033667700490" onmouseenter="enter('8964070033667700490');" onmouseout="out('8964070033667700490');" style="">1844             entityProp = entity.findProperty(adornedList.getSortField());                                </span>
<span class="-2263433618148702675" onmouseenter="enter('-2263433618148702675');" onmouseout="out('-2263433618148702675');" style="">1845             if (field != null &amp;&amp; entityProp != null) {                                                   </span>
<span class="627899284580660581" onmouseenter="enter('627899284580660581');" onmouseout="out('627899284580660581');" style="">1846                 field.setValue(entityProp.getValue());                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1847             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1848         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1849     }                                                                                                    </span>
<span  style="">1850                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1851     @Override                                                                                            </span>
<span class="8114269508855532827" onmouseenter="enter('8114269508855532827');" onmouseout="out('8114269508855532827');" style="">1852     public void populateMapEntityFormFields(EntityForm ef, Entity entity) {                              </span>
<span class="4628483460047019115" onmouseenter="enter('4628483460047019115');" onmouseout="out('4628483460047019115');" style="">1853         Field field = ef.findField(&quot;priorKey&quot;);                                                          </span>
<span class="263056657127968906" onmouseenter="enter('263056657127968906');" onmouseout="out('263056657127968906');" style="">1854         Property entityProp = entity.findProperty(&quot;key&quot;);                                                </span>
<span class="-2263433618148702675" onmouseenter="enter('-2263433618148702675');" onmouseout="out('-2263433618148702675');" style="">1855         if (field != null &amp;&amp; entityProp != null) {                                                       </span>
<span class="627899284580660581" onmouseenter="enter('627899284580660581');" onmouseout="out('627899284580660581');" style="">1856             field.setValue(entityProp.getValue());                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1857         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1858     }                                                                                                    </span>
<span  style="">1859                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1860     @Override                                                                                            </span>
<span class="150942895693350371" onmouseenter="enter('150942895693350371');" onmouseout="out('150942895693350371');" style=""><abbr title="1861     public EntityForm buildAdornedListForm(AdornedTargetCollectionMetadata adornedMd, AdornedTargetList adornedList,">1861     public EntityForm buildAdornedListForm(AdornedTargetCollectionMetadata adornedMd, AdornedTargetList aðŸ”µ</abbr></span>
<span class="12000407411688948" onmouseenter="enter('12000407411688948');" onmouseout="out('12000407411688948');" style=""><abbr title="1862             String parentId, boolean isViewCollectionItem, List&lt;SectionCrumb&gt; sectionCrumbs, boolean isAdd)">1862             String parentId, boolean isViewCollectionItem, List&lt;SectionCrumb&gt; sectionCrumbs, boolean isAdðŸ”µ</abbr></span>
<span class="1998458335829271558" onmouseenter="enter('1998458335829271558');" onmouseout="out('1998458335829271558');" style="">1863             throws ServiceException {                                                                    </span>
<span class="7440011096899970462" onmouseenter="enter('7440011096899970462');" onmouseout="out('7440011096899970462');" style="">1864         EntityForm ef = createStandardAdornedEntityForm();                                               </span>
<span class="3191357523588163011" onmouseenter="enter('3191357523588163011');" onmouseout="out('3191357523588163011');" style=""><abbr title="1865         return buildAdornedListForm(adornedMd, adornedList, parentId, isViewCollectionItem, ef, sectionCrumbs, isAdd);">1865         return buildAdornedListForm(adornedMd, adornedList, parentId, isViewCollectionItem, ef, sectionCrðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1866     }                                                                                                    </span>
<span  style="">1867                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1868     @Override                                                                                            </span>
<span class="150942895693350371" onmouseenter="enter('150942895693350371');" onmouseout="out('150942895693350371');" style=""><abbr title="1869     public EntityForm buildAdornedListForm(AdornedTargetCollectionMetadata adornedMd, AdornedTargetList adornedList,">1869     public EntityForm buildAdornedListForm(AdornedTargetCollectionMetadata adornedMd, AdornedTargetList aðŸ”µ</abbr></span>
<span class="3984058849831877067" onmouseenter="enter('3984058849831877067');" onmouseout="out('3984058849831877067');" style=""><abbr title="1870             String parentId, boolean isViewCollectionItem, EntityForm ef, List&lt;SectionCrumb&gt; sectionCrumbs, boolean isAdd)">1870             String parentId, boolean isViewCollectionItem, EntityForm ef, List&lt;SectionCrumb&gt; sectionCrumbðŸ”µ</abbr></span>
<span class="1998458335829271558" onmouseenter="enter('1998458335829271558');" onmouseout="out('1998458335829271558');" style="">1871             throws ServiceException {                                                                    </span>
<span class="2447703614414495939" onmouseenter="enter('2447703614414495939');" onmouseout="out('2447703614414495939');" style="">1872         ef.setEntityType(adornedList.getAdornedTargetEntityClassname());                                 </span>
<span  style="">1873                                                                                                          </span>
<span class="-5881575004956694509" onmouseenter="enter('-5881575004956694509');" onmouseout="out('-5881575004956694509');" style="">1874         // Get the metadata for this adorned field                                                       </span>
<span class="-3021134083097680634" onmouseenter="enter('-3021134083097680634');" onmouseout="out('-3021134083097680634');" style="">1875         PersistencePackageRequest request = PersistencePackageRequest.adorned()                          </span>
<span class="-7461338641125591711" onmouseenter="enter('-7461338641125591711');" onmouseout="out('-7461338641125591711');" style="">1876                 .withCeilingEntityClassname(adornedMd.getCollectionCeilingEntity())                      </span>
<span class="5166488781691104787" onmouseenter="enter('5166488781691104787');" onmouseout="out('5166488781691104787');" style="">1877                 .withAdornedList(adornedList)                                                            </span>
<span class="6300132115435073341" onmouseenter="enter('6300132115435073341');" onmouseout="out('6300132115435073341');" style="">1878                 .withSectionCrumbs(sectionCrumbs);                                                       </span>
<span class="-6327467589468547459" onmouseenter="enter('-6327467589468547459');" onmouseout="out('-6327467589468547459');" style="">1879         request.setAddOperationInspect(isAdd);                                                           </span>
<span class="8129278729958971412" onmouseenter="enter('8129278729958971412');" onmouseout="out('8129278729958971412');" style=""><abbr title="1880         ClassMetadata collectionMetadata = adminEntityService.getClassMetadata(request).getDynamicResultSet().getClassMetaData();">1880         ClassMetadata collectionMetadata = adminEntityService.getClassMetadata(request).getDynamicResultSðŸ”µ</abbr></span>
<span  style="">1881                                                                                                          </span>
<span class="-4937065852383367448" onmouseenter="enter('-4937065852383367448');" onmouseout="out('-4937065852383367448');" style="">1882         List&lt;Property&gt; entityFormProperties = new ArrayList&lt;&gt;();                                         </span>
<span class="9162843466163784659" onmouseenter="enter('9162843466163784659');" onmouseout="out('9162843466163784659');" style="">1883         if (isViewCollectionItem) {                                                                      </span>
<span class="-6444196324035087919" onmouseenter="enter('-6444196324035087919');" onmouseout="out('-6444196324035087919');" style="">1884             Collections.addAll(entityFormProperties, collectionMetadata.getProperties());                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1885         } else {                                                                                         </span>
<span class="8165943161441555593" onmouseenter="enter('8165943161441555593');" onmouseout="out('8165943161441555593');" style="">1886             // We want our entity form to only render the maintained adorned target fields               </span>
<span class="-6459504561228602972" onmouseenter="enter('-6459504561228602972');" onmouseout="out('-6459504561228602972');" style="">1887             for (String targetFieldName : adornedMd.getMaintainedAdornedTargetFields()) {                </span>
<span class="-5374323299509239162" onmouseenter="enter('-5374323299509239162');" onmouseout="out('-5374323299509239162');" style="">1888                 Property p = collectionMetadata.getPMap().get(targetFieldName);                          </span>
<span class="3623466133802910873" onmouseenter="enter('3623466133802910873');" onmouseout="out('3623466133802910873');" style=""><abbr title="1889                 if (p.getMetadata() instanceof BasicFieldMetadata &amp;&amp; BooleanUtils.isNotTrue( p.getMetadata().getExcluded())) {">1889                 if (p.getMetadata() instanceof BasicFieldMetadata &amp;&amp; BooleanUtils.isNotTrue( p.getMetadatðŸ”µ</abbr></span>
<span class="-8585934909139340387" onmouseenter="enter('-8585934909139340387');" onmouseout="out('-8585934909139340387');" style="">1890                     ((BasicFieldMetadata) p.getMetadata()).setVisibility(VisibilityEnum.VISIBLE_ALL);    </span>
<span class="-6393972713668288785" onmouseenter="enter('-6393972713668288785');" onmouseout="out('-6393972713668288785');" style="">1891                     entityFormProperties.add(p);                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1892                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1893             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1894         }                                                                                                </span>
<span  style="">1895                                                                                                          </span>
<span class="-1687272513553387314" onmouseenter="enter('-1687272513553387314');" onmouseout="out('-1687272513553387314');" style="">1896         // Set the maintained fields on the form                                                         </span>
<span class="6598971975233417362" onmouseenter="enter('6598971975233417362');" onmouseout="out('6598971975233417362');" style="">1897         setEntityFormFields(collectionMetadata, ef, entityFormProperties);                               </span>
<span  style="">1898                                                                                                          </span>
<span class="7903383611177038089" onmouseenter="enter('7903383611177038089');" onmouseout="out('7903383611177038089');" style="">1899         // Add these two additional hidden fields that are required for persistence                      </span>
<span class="-6303462610985739492" onmouseenter="enter('-6303462610985739492');" onmouseout="out('-6303462610985739492');" style="">1900         Field f = new Field()                                                                            </span>
<span class="-7418437452692570792" onmouseenter="enter('-7418437452692570792');" onmouseout="out('-7418437452692570792');" style="">1901                 .withName(adornedList.getLinkedObjectPath() + &quot;.&quot; + adornedList.getLinkedIdProperty())   </span>
<span class="8578132396126170845" onmouseenter="enter('8578132396126170845');" onmouseout="out('8578132396126170845');" style="">1902                 .withFieldType(SupportedFieldType.HIDDEN.toString())                                     </span>
<span class="3333593611580125868" onmouseenter="enter('3333593611580125868');" onmouseout="out('3333593611580125868');" style="">1903                 .withValue(parentId);                                                                    </span>
<span class="-6955921800298195002" onmouseenter="enter('-6955921800298195002');" onmouseout="out('-6955921800298195002');" style="">1904         ef.addHiddenField(collectionMetadata, f);                                                        </span>
<span  style="">1905                                                                                                          </span>
<span class="3649036859858659928" onmouseenter="enter('3649036859858659928');" onmouseout="out('3649036859858659928');" style="">1906         f = new Field()                                                                                  </span>
<span class="-8965183336188726297" onmouseenter="enter('-8965183336188726297');" onmouseout="out('-8965183336188726297');" style="">1907                 .withName(adornedList.getTargetObjectPath() + &quot;.&quot; + adornedList.getTargetIdProperty())   </span>
<span class="8578132396126170845" onmouseenter="enter('8578132396126170845');" onmouseout="out('8578132396126170845');" style="">1908                 .withFieldType(SupportedFieldType.HIDDEN.toString())                                     </span>
<span class="9105828036023594182" onmouseenter="enter('9105828036023594182');" onmouseout="out('9105828036023594182');" style="">1909                 .withIdOverride(&quot;adornedTargetIdProperty&quot;);                                              </span>
<span class="-6955921800298195002" onmouseenter="enter('-6955921800298195002');" onmouseout="out('-6955921800298195002');" style="">1910         ef.addHiddenField(collectionMetadata, f);                                                        </span>
<span  style="">1911                                                                                                          </span>
<span class="2111689089149990625" onmouseenter="enter('2111689089149990625');" onmouseout="out('2111689089149990625');" style="">1912         if (StringUtils.isNotBlank(adornedList.getSortField())) {                                        </span>
<span class="3649036859858659928" onmouseenter="enter('3649036859858659928');" onmouseout="out('3649036859858659928');" style="">1913             f = new Field()                                                                              </span>
<span class="-8039081797246474990" onmouseenter="enter('-8039081797246474990');" onmouseout="out('-8039081797246474990');" style="">1914                     .withName(adornedList.getSortField())                                                </span>
<span class="-2458072313875538806" onmouseenter="enter('-2458072313875538806');" onmouseout="out('-2458072313875538806');" style="">1915                     .withFieldType(SupportedFieldType.HIDDEN.toString());                                </span>
<span class="-6955921800298195002" onmouseenter="enter('-6955921800298195002');" onmouseout="out('-6955921800298195002');" style="">1916             ef.addHiddenField(collectionMetadata, f);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1917         }                                                                                                </span>
<span  style="">1918                                                                                                          </span>
<span class="-8148842246743906492" onmouseenter="enter('-8148842246743906492');" onmouseout="out('-8148842246743906492');" style="">1919         ef.setParentId(parentId);                                                                        </span>
<span  style="">1920                                                                                                          </span>
<span class="-9084846840215869888" onmouseenter="enter('-9084846840215869888');" onmouseout="out('-9084846840215869888');" style="">1921         extensionManager.getProxy().addAdditionalAdornedFormActions(ef);                                 </span>
<span  style="">1922                                                                                                          </span>
<span class="3260120157565581788" onmouseenter="enter('3260120157565581788');" onmouseout="out('3260120157565581788');" style="">1923         return ef;                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1924     }                                                                                                    </span>
<span  style="">1925                                                                                                          </span>
<span  style="">1926                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1927     @Override                                                                                            </span>
<span class="5776955838632823841" onmouseenter="enter('5776955838632823841');" onmouseout="out('5776955838632823841');" style=""><abbr title="1928     public EntityForm buildMapForm(MapMetadata mapMd, final MapStructure mapStructure, ClassMetadata cmd, String parentId)">1928     public EntityForm buildMapForm(MapMetadata mapMd, final MapStructure mapStructure, ClassMetadata cmd,ðŸ”µ</abbr></span>
<span class="1998458335829271558" onmouseenter="enter('1998458335829271558');" onmouseout="out('1998458335829271558');" style="">1929             throws ServiceException {                                                                    </span>
<span class="-438894394526699599" onmouseenter="enter('-438894394526699599');" onmouseout="out('-438894394526699599');" style="">1930         EntityForm ef = createStandardEntityForm();                                                      </span>
<span class="-4383087068394560961" onmouseenter="enter('-4383087068394560961');" onmouseout="out('-4383087068394560961');" style="">1931         return buildMapForm(mapMd, mapStructure, cmd, parentId, ef);                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1932     }                                                                                                    </span>
<span  style="">1933                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1934     @Override                                                                                            </span>
<span class="5263214445094463474" onmouseenter="enter('5263214445094463474');" onmouseout="out('5263214445094463474');" style=""><abbr title="1935     public EntityForm buildMapForm(MapMetadata mapMd, final MapStructure mapStructure, ClassMetadata cmd, String parentId, EntityForm ef)">1935     public EntityForm buildMapForm(MapMetadata mapMd, final MapStructure mapStructure, ClassMetadata cmd,ðŸ”µ</abbr></span>
<span class="1998458335829271558" onmouseenter="enter('1998458335829271558');" onmouseout="out('1998458335829271558');" style="">1936             throws ServiceException {                                                                    </span>
<span class="-8196381047300571419" onmouseenter="enter('-8196381047300571419');" onmouseout="out('-8196381047300571419');" style="">1937         ForeignKey foreignKey = (ForeignKey) mapMd.getPersistencePerspective()                           </span>
<span class="2694724777125959806" onmouseenter="enter('2694724777125959806');" onmouseout="out('2694724777125959806');" style="">1938                 .getPersistencePerspectiveItems().get(PersistencePerspectiveItemType.FOREIGNKEY);        </span>
<span class="-8152084553040114228" onmouseenter="enter('-8152084553040114228');" onmouseout="out('-8152084553040114228');" style="">1939         ef.setEntityType(foreignKey.getForeignKeyClass());                                               </span>
<span  style="">1940                                                                                                          </span>
<span class="2487263286005872069" onmouseenter="enter('2487263286005872069');" onmouseout="out('2487263286005872069');" style="">1941         Field keyField;                                                                                  </span>
<span class="8316613165925765769" onmouseenter="enter('8316613165925765769');" onmouseout="out('8316613165925765769');" style="">1942         if (!mapMd.getForceFreeFormKeys()) {                                                             </span>
<span class="4124947245467994317" onmouseenter="enter('4124947245467994317');" onmouseout="out('4124947245467994317');" style="">1943             // We will use a combo field to render the key choices                                       </span>
<span class="-1866848638996018677" onmouseenter="enter('-1866848638996018677');" onmouseout="out('-1866848638996018677');" style="">1944             ComboField temp = new ComboField();                                                          </span>
<span class="-6555255150639106657" onmouseenter="enter('-6555255150639106657');" onmouseout="out('-6555255150639106657');" style="">1945             temp.withName(&quot;key&quot;)                                                                         </span>
<span class="1841760667801252277" onmouseenter="enter('1841760667801252277');" onmouseout="out('1841760667801252277');" style="">1946                     .withFieldType(&quot;combo_field&quot;)                                                        </span>
<span class="-5198779959493179668" onmouseenter="enter('-5198779959493179668');" onmouseout="out('-5198779959493179668');" style="">1947                     .withFriendlyName(mapStructure.getKeyPropertyFriendlyName());                        </span>
<span class="3287055582339576619" onmouseenter="enter('3287055582339576619');" onmouseout="out('3287055582339576619');" style="">1948             if (mapMd.getKeys() != null) {                                                               </span>
<span class="-6322095491178263556" onmouseenter="enter('-6322095491178263556');" onmouseout="out('-6322095491178263556');" style="">1949                 // The keys can be explicitly set in the annotation...                                   </span>
<span class="-7850108399679610719" onmouseenter="enter('-7850108399679610719');" onmouseout="out('-7850108399679610719');" style="">1950                 temp.setOptions(mapMd.getKeys());                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1951             } else {                                                                                     </span>
<span class="7036564945591495423" onmouseenter="enter('7036564945591495423');" onmouseout="out('7036564945591495423');" style="">1952                 // Or they could be based on a different entity                                          </span>
<span class="2943675610735544566" onmouseenter="enter('2943675610735544566');" onmouseout="out('2943675610735544566');" style="">1953                 PersistencePackageRequest ppr = PersistencePackageRequest.standard()                     </span>
<span class="-7233152391809010418" onmouseenter="enter('-7233152391809010418');" onmouseout="out('-7233152391809010418');" style="">1954                         .withCeilingEntityClassname(mapMd.getMapKeyOptionEntityClass());                 </span>
<span  style="">1955                                                                                                          </span>
<span class="-4077831550260994387" onmouseenter="enter('-4077831550260994387');" onmouseout="out('-4077831550260994387');" style="">1956                 DynamicResultSet drs = adminEntityService.getRecords(ppr).getDynamicResultSet();         </span>
<span  style="">1957                                                                                                          </span>
<span class="5306875073536616661" onmouseenter="enter('5306875073536616661');" onmouseout="out('5306875073536616661');" style="">1958                 for (Entity entity : drs.getRecords()) {                                                 </span>
<span class="-6641717520052480574" onmouseenter="enter('-6641717520052480574');" onmouseout="out('-6641717520052480574');" style=""><abbr title="1959                     String keyValue = entity.getPMap().get(mapMd.getMapKeyOptionEntityValueField()).getValue();">1959                     String keyValue = entity.getPMap().get(mapMd.getMapKeyOptionEntityValueField()).getVaðŸ”µ</abbr></span>
<span class="1998582968522880029" onmouseenter="enter('1998582968522880029');" onmouseout="out('1998582968522880029');" style=""><abbr title="1960                     String keyDisplayValue = entity.getPMap().get(mapMd.getMapKeyOptionEntityDisplayField()).getValue();">1960                     String keyDisplayValue = entity.getPMap().get(mapMd.getMapKeyOptionEntityDisplayFieldðŸ”µ</abbr></span>
<span class="-6645431312205396504" onmouseenter="enter('-6645431312205396504');" onmouseout="out('-6645431312205396504');" style="">1961                     temp.putOption(keyValue, keyDisplayValue);                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1962                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1963             }                                                                                            </span>
<span class="3546270200362241310" onmouseenter="enter('3546270200362241310');" onmouseout="out('3546270200362241310');" style="">1964             keyField = temp;                                                                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1965         } else {                                                                                         </span>
<span class="-8573842998963738304" onmouseenter="enter('-8573842998963738304');" onmouseout="out('-8573842998963738304');" style="">1966             keyField = new Field().withName(&quot;key&quot;)                                                       </span>
<span class="7310006641400837736" onmouseenter="enter('7310006641400837736');" onmouseout="out('7310006641400837736');" style="">1967                                 .withFieldType(SupportedFieldType.STRING.toString())                     </span>
<span class="-5198779959493179668" onmouseenter="enter('-5198779959493179668');" onmouseout="out('-5198779959493179668');" style="">1968                                 .withFriendlyName(mapStructure.getKeyPropertyFriendlyName());            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1969         }                                                                                                </span>
<span class="7153206597057282580" onmouseenter="enter('7153206597057282580');" onmouseout="out('7153206597057282580');" style="">1970         keyField.setRequired(true);                                                                      </span>
<span class="6962995846651568894" onmouseenter="enter('6962995846651568894');" onmouseout="out('6962995846651568894');" style="">1971         ef.addMapKeyField(cmd, keyField);                                                                </span>
<span  style="">1972                                                                                                          </span>
<span class="-1847798595136835783" onmouseenter="enter('-1847798595136835783');" onmouseout="out('-1847798595136835783');" style="">1973         // Set the fields for this form                                                                  </span>
<span class="4702227326769048309" onmouseenter="enter('4702227326769048309');" onmouseout="out('4702227326769048309');" style="">1974         List&lt;Property&gt; mapFormProperties;                                                                </span>
<span class="-3881724092572027053" onmouseenter="enter('-3881724092572027053');" onmouseout="out('-3881724092572027053');" style="">1975         if (mapMd.isSimpleValue()) {                                                                     </span>
<span class="7835835150562546154" onmouseenter="enter('7835835150562546154');" onmouseout="out('7835835150562546154');" style="">1976             ef.setIdProperty(&quot;key&quot;);                                                                     </span>
<span class="7501966408885015423" onmouseenter="enter('7501966408885015423');" onmouseout="out('7501966408885015423');" style="">1977             mapFormProperties = new ArrayList&lt;&gt;();                                                       </span>
<span class="1155137054745373714" onmouseenter="enter('1155137054745373714');" onmouseout="out('1155137054745373714');" style="">1978             Property valueProp = cmd.getPMap().get(&quot;value&quot;);                                             </span>
<span class="4126012312120971947" onmouseenter="enter('4126012312120971947');" onmouseout="out('4126012312120971947');" style="">1979             mapFormProperties.add(valueProp);                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1980         } else {                                                                                         </span>
<span class="-200233704674088452" onmouseenter="enter('-200233704674088452');" onmouseout="out('-200233704674088452');" style="">1981             String valueClassName = mapStructure.getValueClassName();                                    </span>
<span class="4792123228934068864" onmouseenter="enter('4792123228934068864');" onmouseout="out('4792123228934068864');" style="">1982             List&lt;String&gt; classNames = getValueClassNames(valueClassName);                                </span>
<span  style="">1983                                                                                                          </span>
<span class="6736035458303245430" onmouseenter="enter('6736035458303245430');" onmouseout="out('6736035458303245430');" style="">1984             mapFormProperties = new ArrayList&lt;&gt;(Arrays.asList(cmd.getProperties()));                     </span>
<span class="-5375146325606190554" onmouseenter="enter('-5375146325606190554');" onmouseout="out('-5375146325606190554');" style="">1985             filterMapFormProperties(mapFormProperties, classNames);                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1986         }                                                                                                </span>
<span  style="">1987                                                                                                          </span>
<span class="-2821207520526953468" onmouseenter="enter('-2821207520526953468');" onmouseout="out('-2821207520526953468');" style="">1988         setEntityFormFields(cmd, ef, mapFormProperties);                                                 </span>
<span  style="">1989                                                                                                          </span>
<span class="-6303462610985739492" onmouseenter="enter('-6303462610985739492');" onmouseout="out('-6303462610985739492');" style="">1990         Field f = new Field()                                                                            </span>
<span class="4084107705668748282" onmouseenter="enter('4084107705668748282');" onmouseout="out('4084107705668748282');" style="">1991                 .withName(&quot;priorKey&quot;)                                                                    </span>
<span class="-2458072313875538806" onmouseenter="enter('-2458072313875538806');" onmouseout="out('-2458072313875538806');" style="">1992                 .withFieldType(SupportedFieldType.HIDDEN.toString());                                    </span>
<span class="-2135186019977572427" onmouseenter="enter('-2135186019977572427');" onmouseout="out('-2135186019977572427');" style="">1993         ef.addHiddenField(cmd, f);                                                                       </span>
<span  style="">1994                                                                                                          </span>
<span class="-8148842246743906492" onmouseenter="enter('-8148842246743906492');" onmouseout="out('-8148842246743906492');" style="">1995         ef.setParentId(parentId);                                                                        </span>
<span  style="">1996                                                                                                          </span>
<span class="3260120157565581788" onmouseenter="enter('3260120157565581788');" onmouseout="out('3260120157565581788');" style="">1997         return ef;                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1998     }                                                                                                    </span>
<span  style="">1999                                                                                                          </span>
<span class="-4829102623695042124" onmouseenter="enter('-4829102623695042124');" onmouseout="out('-4829102623695042124');" style="">2000     protected List&lt;String&gt; getValueClassNames(String valueClassName) {                                   </span>
<span class="636492465030384706" onmouseenter="enter('636492465030384706');" onmouseout="out('636492465030384706');" style="">2001         PersistenceManager pm = PersistenceManagerFactory.getPersistenceManager(valueClassName);         </span>
<span class="2246167872340129747" onmouseenter="enter('2246167872340129747');" onmouseout="out('2246167872340129747');" style="">2002         List&lt;String&gt; classNames = new ArrayList&lt;&gt;();                                                     </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">2003         try {                                                                                            </span>
<span class="3938321968230834834" onmouseenter="enter('3938321968230834834');" onmouseout="out('3938321968230834834');" style="">2004             Class&lt;?&gt;[] mapEntities = pm.getPolymorphicEntities(valueClassName);                          </span>
<span class="-4772743881626943892" onmouseenter="enter('-4772743881626943892');" onmouseout="out('-4772743881626943892');" style="">2005             for (Class clazz : mapEntities) {                                                            </span>
<span class="6466727849961562132" onmouseenter="enter('6466727849961562132');" onmouseout="out('6466727849961562132');" style="">2006                 classNames.add(clazz.getName());                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2007             }                                                                                            </span>
<span class="1054888787890391626" onmouseenter="enter('1054888787890391626');" onmouseout="out('1054888787890391626');" style="">2008         } catch (ClassNotFoundException e) {                                                             </span>
<span class="-942678047271525020" onmouseenter="enter('-942678047271525020');" onmouseout="out('-942678047271525020');" style="">2009             classNames.add(valueClassName);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2010         }                                                                                                </span>
<span class="-3648191997111592889" onmouseenter="enter('-3648191997111592889');" onmouseout="out('-3648191997111592889');" style="">2011         return classNames;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2012     }                                                                                                    </span>
<span  style="">2013                                                                                                          </span>
<span class="9085638029133270349" onmouseenter="enter('9085638029133270349');" onmouseout="out('9085638029133270349');" style=""><abbr title="2014     protected void filterMapFormProperties(List&lt;Property&gt; mapFormProperties, final List&lt;String&gt; classNames) {">2014     protected void filterMapFormProperties(List&lt;Property&gt; mapFormProperties, final List&lt;String&gt; classNameðŸ”µ</abbr></span>
<span class="-1689600506312159966" onmouseenter="enter('-1689600506312159966');" onmouseout="out('-1689600506312159966');" style="">2015         CollectionUtils.filter(mapFormProperties, new Predicate() {                                      </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">2016             @Override                                                                                    </span>
<span class="7760113550206984696" onmouseenter="enter('7760113550206984696');" onmouseout="out('7760113550206984696');" style="">2017             public boolean evaluate(Object object) {                                                     </span>
<span class="2621584028127774901" onmouseenter="enter('2621584028127774901');" onmouseout="out('2621584028127774901');" style="">2018                 Property p = (Property) object;                                                          </span>
<span class="5284872755288504872" onmouseenter="enter('5284872755288504872');" onmouseout="out('5284872755288504872');" style="">2019                 for (String availType : p.getMetadata().getAvailableToTypes()) {                         </span>
<span class="-1266753160152563645" onmouseenter="enter('-1266753160152563645');" onmouseout="out('-1266753160152563645');" style="">2020                     if (classNames.contains(availType)) {                                                </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">2021                         return true;                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2022                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2023                 }                                                                                        </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">2024                 return false;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2025             }                                                                                            </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">2026         });                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2027     }                                                                                                    </span>
<span  style="">2028                                                                                                          </span>
<span class="8263860057269155273" onmouseenter="enter('8263860057269155273');" onmouseout="out('8263860057269155273');" style="">2029     protected EntityForm createStandardEntityForm() {                                                    </span>
<span class="4163598687278852410" onmouseenter="enter('4163598687278852410');" onmouseout="out('4163598687278852410');" style="">2030         EntityForm ef = new EntityForm();                                                                </span>
<span class="-2237425030372835917" onmouseenter="enter('-2237425030372835917');" onmouseout="out('-2237425030372835917');" style="">2031         ef.addAction(DefaultEntityFormActions.SAVE);                                                     </span>
<span class="3260120157565581788" onmouseenter="enter('3260120157565581788');" onmouseout="out('3260120157565581788');" style="">2032         return ef;                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2033     }                                                                                                    </span>
<span  style="">2034                                                                                                          </span>
<span class="-7002137249022503423" onmouseenter="enter('-7002137249022503423');" onmouseout="out('-7002137249022503423');" style="">2035     protected EntityForm createStandardAdornedEntityForm() {                                             </span>
<span class="4163598687278852410" onmouseenter="enter('4163598687278852410');" onmouseout="out('4163598687278852410');" style="">2036         EntityForm ef = new EntityForm();                                                                </span>
<span class="3915105942460614290" onmouseenter="enter('3915105942460614290');" onmouseout="out('3915105942460614290');" style="">2037         ef.addAction(DefaultAdornedEntityFormActions.Add);                                               </span>
<span class="3260120157565581788" onmouseenter="enter('3260120157565581788');" onmouseout="out('3260120157565581788');" style="">2038         return ef;                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2039     }                                                                                                    </span>
<span  style="">2040                                                                                                          </span>
<span class="-8997817584059672482" onmouseenter="enter('-8997817584059672482');" onmouseout="out('-8997817584059672482');" style="">2041     protected VisibilityEnum[] getGridHiddenVisibilities() {                                             </span>
<span class="-4220328425458971190" onmouseenter="enter('-4220328425458971190');" onmouseout="out('-4220328425458971190');" style="">2042         return FormBuilderServiceImpl.GRID_HIDDEN_VISIBILITIES;                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2043     }                                                                                                    </span>
<span  style="">2044                                                                                                          </span>
<span class="5519346243833044852" onmouseenter="enter('5519346243833044852');" onmouseout="out('5519346243833044852');" style="">2045     protected VisibilityEnum[] getFormHiddenVisibilities() {                                             </span>
<span class="-3897912334343924171" onmouseenter="enter('-3897912334343924171');" onmouseout="out('-3897912334343924171');" style="">2046         return FormBuilderServiceImpl.FORM_HIDDEN_VISIBILITIES;                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2047     }                                                                                                    </span>
<span  style="">2048                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2049 }                                                                                                        </span>









</pre></td>
                            <td><pre><span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style="">   1 /*                                                                                                       </span>
<span class="7283730021202772321" onmouseenter="enter('7283730021202772321');" onmouseout="out('7283730021202772321');" style="">   2  * #%L                                                                                                   </span>
<span class="-3339060969767811416" onmouseenter="enter('-3339060969767811416');" onmouseout="out('-3339060969767811416');" style="">   3  * BroadleafCommerce Open Admin Platform                                                                 </span>
<span class="305149960078729975" onmouseenter="enter('305149960078729975');" onmouseout="out('305149960078729975');" style="">   4  * %%                                                                                                    </span>
<span class="1978304592184257722" onmouseenter="enter('1978304592184257722');" onmouseout="out('1978304592184257722');" style="">   5  * Copyright (C) 2009 - 2016 Broadleaf Commerce                                                          </span>
<span class="305149960078729975" onmouseenter="enter('305149960078729975');" onmouseout="out('305149960078729975');" style="">   6  * %%                                                                                                    </span>
<span class="4430451662992926684" onmouseenter="enter('4430451662992926684');" onmouseout="out('4430451662992926684');" style="">   7  * Licensed under the Broadleaf Fair Use License Agreement, Version 1.0                                  </span>
<span class="8206099442596739681" onmouseenter="enter('8206099442596739681');" onmouseout="out('8206099442596739681');" style="">   8  * (the &quot;Fair Use License&quot; located  at http://license.broadleafcommerce.org/fair_use_license-1.0.txt)    </span>
<span class="-4338570431005413339" onmouseenter="enter('-4338570431005413339');" onmouseout="out('-4338570431005413339');" style="">   9  * unless the restrictions on use therein are violated and require payment to Broadleaf in which case    </span>
<span class="-5739615313038505012" onmouseenter="enter('-5739615313038505012');" onmouseout="out('-5739615313038505012');" style="">  10  * the Broadleaf End User License Agreement (EULA), Version 1.1                                          </span>
<span class="-196756316119086558" onmouseenter="enter('-196756316119086558');" onmouseout="out('-196756316119086558');" style="">  11  * (the &quot;Commercial License&quot; located at http://license.broadleafcommerce.org/commercial_license-1.1.txt) </span>
<span class="-3691518077331372763" onmouseenter="enter('-3691518077331372763');" onmouseout="out('-3691518077331372763');" style="">  12  * shall apply.                                                                                          </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">  13  *                                                                                                       </span>
<span class="-3333434530440420199" onmouseenter="enter('-3333434530440420199');" onmouseout="out('-3333434530440420199');" style=""><abbr title="  14  * Alternatively, the Commercial License may be replaced with a mutually agreed upon license (the &quot;Custom License&quot;)">  14  * Alternatively, the Commercial License may be replaced with a mutually agreed upon license (the &quot;CustomðŸ”µ</abbr></span>
<span class="-2556272520656899284" onmouseenter="enter('-2556272520656899284');" onmouseout="out('-2556272520656899284');" style=""><abbr title="  15  * between you and Broadleaf Commerce. You may not use this file except in compliance with the applicable license.">  15  * between you and Broadleaf Commerce. You may not use this file except in compliance with the applicableðŸ”µ</abbr></span>
<span class="3739716589509259313" onmouseenter="enter('3739716589509259313');" onmouseout="out('3739716589509259313');" style="">  16  * #L%                                                                                                   </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  17  */                                                                                                      </span>
<span class="-6621374416165604736" onmouseenter="enter('-6621374416165604736');" onmouseout="out('-6621374416165604736');" style="">  18 package org.broadleafcommerce.openadmin.web.service;                                                     </span>
<span  style="">  19                                                                                                          </span>
<span class="1687723025421661461" onmouseenter="enter('1687723025421661461');" onmouseout="out('1687723025421661461');" style="">  20 import com.fasterxml.jackson.core.Version;                                                               </span>
<span class="3949390651369204057" onmouseenter="enter('3949390651369204057');" onmouseout="out('3949390651369204057');" style="">  21 import com.fasterxml.jackson.databind.ObjectMapper;                                                      </span>
<span class="-4978580670739809564" onmouseenter="enter('-4978580670739809564');" onmouseout="out('-4978580670739809564');" style="">  22 import com.fasterxml.jackson.databind.module.SimpleModule;                                               </span>
<span class="103340661636203254" onmouseenter="enter('103340661636203254');" onmouseout="out('103340661636203254');" style="">  23 import java.io.IOException;                                                                              </span>
<span class="2075466404860203191" onmouseenter="enter('2075466404860203191');" onmouseout="out('2075466404860203191');" style="">  24 import java.math.BigDecimal;                                                                             </span>
<span class="1238662365364477381" onmouseenter="enter('1238662365364477381');" onmouseout="out('1238662365364477381');" style="">  25 import java.text.DateFormat;                                                                             </span>
<span class="5374616781072617946" onmouseenter="enter('5374616781072617946');" onmouseout="out('5374616781072617946');" style="">  26 import java.text.DateFormatSymbols;                                                                      </span>
<span class="39790854174282861" onmouseenter="enter('39790854174282861');" onmouseout="out('39790854174282861');" style="">  27 import java.text.ParseException;                                                                         </span>
<span class="54331962280914690" onmouseenter="enter('54331962280914690');" onmouseout="out('54331962280914690');" style="">  28 import java.text.SimpleDateFormat;                                                                       </span>
<span class="9191247685397773893" onmouseenter="enter('9191247685397773893');" onmouseout="out('9191247685397773893');" style="">  29 import java.util.ArrayList;                                                                              </span>
<span class="-28465676010609596" onmouseenter="enter('-28465676010609596');" onmouseout="out('-28465676010609596');" style="">  30 import java.util.Arrays;                                                                                 </span>
<span class="2187055016371707860" onmouseenter="enter('2187055016371707860');" onmouseout="out('2187055016371707860');" style="">  31 import java.util.Collections;                                                                            </span>
<span class="1748005127055838442" onmouseenter="enter('1748005127055838442');" onmouseout="out('1748005127055838442');" style="">  32 import java.util.Date;                                                                                   </span>
<span class="4169599896190320038" onmouseenter="enter('4169599896190320038');" onmouseout="out('4169599896190320038');" style="">  33 import java.util.HashMap;                                                                                </span>
<span class="-1786020958497218848" onmouseenter="enter('-1786020958497218848');" onmouseout="out('-1786020958497218848');" style="">  34 import java.util.List;                                                                                   </span>
<span class="-4563680703184802189" onmouseenter="enter('-4563680703184802189');" onmouseout="out('-4563680703184802189');" style="">  35 import java.util.Locale;                                                                                 </span>
<span class="2393042000349901971" onmouseenter="enter('2393042000349901971');" onmouseout="out('2393042000349901971');" style="">  36 import java.util.Map.Entry;                                                                              </span>
<span class="6618655971923850695" onmouseenter="enter('6618655971923850695');" onmouseout="out('6618655971923850695');" style="">  37 import java.util.Map;                                                                                    </span>
<span class="3384353015976675773" onmouseenter="enter('3384353015976675773');" onmouseout="out('3384353015976675773');" style="">  38 import java.util.Set;                                                                                    </span>
<span class="-5292076237369528758" onmouseenter="enter('-5292076237369528758');" onmouseout="out('-5292076237369528758');" style="">  39 import javax.annotation.Resource;                                                                        </span>
<span class="-2638882474121018940" onmouseenter="enter('-2638882474121018940');" onmouseout="out('-2638882474121018940');" style="">  40 import javax.persistence.ManyToOne;                                                                      </span>
<span class="-1278149683069486932" onmouseenter="enter('-1278149683069486932');" onmouseout="out('-1278149683069486932');" style="">  41 import javax.persistence.OneToOne;                                                                       </span>
<span class="-2972028083581866805" onmouseenter="enter('-2972028083581866805');" onmouseout="out('-2972028083581866805');" style="">  42 import javax.servlet.http.HttpServletRequest;                                                            </span>
<span class="8596464405353709537" onmouseenter="enter('8596464405353709537');" onmouseout="out('8596464405353709537');" style="">  43 import org.apache.commons.collections.CollectionUtils;                                                   </span>
<span class="-6731128730698523533" onmouseenter="enter('-6731128730698523533');" onmouseout="out('-6731128730698523533');" style="">  44 import org.apache.commons.collections.Predicate;                                                         </span>
<span class="-7366736394295216840" onmouseenter="enter('-7366736394295216840');" onmouseout="out('-7366736394295216840');" style="">  45 import org.apache.commons.lang.ArrayUtils;                                                               </span>
<span class="-4661043417888464228" onmouseenter="enter('-4661043417888464228');" onmouseout="out('-4661043417888464228');" style="">  46 import org.apache.commons.lang.BooleanUtils;                                                             </span>
<span class="-8105670274694144339" onmouseenter="enter('-8105670274694144339');" onmouseout="out('-8105670274694144339');" style="">  47 import org.apache.commons.lang3.StringUtils;                                                             </span>
<span class="494203924075255110" onmouseenter="enter('494203924075255110');" onmouseout="out('494203924075255110');" style="">  48 import org.apache.commons.logging.Log;                                                                   </span>
<span class="-8227491862907452788" onmouseenter="enter('-8227491862907452788');" onmouseout="out('-8227491862907452788');" style="">  49 import org.apache.commons.logging.LogFactory;                                                            </span>
<span class="-6287859968194756382" onmouseenter="enter('-6287859968194756382');" onmouseout="out('-6287859968194756382');" style="">  50 import org.broadleafcommerce.common.admin.domain.AdminMainEntity;                                        </span>
<span class="-9066890226896155571" onmouseenter="enter('-9066890226896155571');" onmouseout="out('-9066890226896155571');" style="">  51 import org.broadleafcommerce.common.exception.ExceptionHelper;                                           </span>
<span class="3542918789910249764" onmouseenter="enter('3542918789910249764');" onmouseout="out('3542918789910249764');" style="">  52 import org.broadleafcommerce.common.exception.SecurityServiceException;                                  </span>
<span class="5945096539699516699" onmouseenter="enter('5945096539699516699');" onmouseout="out('5945096539699516699');" style="">  53 import org.broadleafcommerce.common.exception.ServiceException;                                          </span>
<span class="-8339254235515724670" onmouseenter="enter('-8339254235515724670');" onmouseout="out('-8339254235515724670');" style="">  54 import org.broadleafcommerce.common.extension.ExtensionResultStatusType;                                 </span>
<span class="-4810625992201169553" onmouseenter="enter('-4810625992201169553');" onmouseout="out('-4810625992201169553');" style="">  55 import org.broadleafcommerce.common.i18n.domain.TranslatedEntity;                                        </span>
<span class="1881391036720633454" onmouseenter="enter('1881391036720633454');" onmouseout="out('1881391036720633454');" style="">  56 import org.broadleafcommerce.common.i18n.service.TranslationService;                                     </span>
<span class="3092944370275379663" onmouseenter="enter('3092944370275379663');" onmouseout="out('3092944370275379663');" style="">  57 import org.broadleafcommerce.common.locale.service.LocaleService;                                        </span>
<span class="-2454560082833257555" onmouseenter="enter('-2454560082833257555');" onmouseout="out('-2454560082833257555');" style="">  58 import org.broadleafcommerce.common.media.domain.MediaDto;                                               </span>
<span class="4111478795314305516" onmouseenter="enter('4111478795314305516');" onmouseout="out('4111478795314305516');" style="">  59 import org.broadleafcommerce.common.persistence.EntityConfiguration;                                     </span>
<span class="-3349026188166660873" onmouseenter="enter('-3349026188166660873');" onmouseout="out('-3349026188166660873');" style="">  60 import org.broadleafcommerce.common.persistence.EntityDuplicator;                                        </span>
<span class="-6648433550510659033" onmouseenter="enter('-6648433550510659033');" onmouseout="out('-6648433550510659033');" style="">  61 import org.broadleafcommerce.common.presentation.client.AddMethodType;                                   </span>
<span class="-7832706263011125937" onmouseenter="enter('-7832706263011125937');" onmouseout="out('-7832706263011125937');" style="">  62 import org.broadleafcommerce.common.presentation.client.AdornedTargetAddMethodType;                      </span>
<span class="-2413957740330241600" onmouseenter="enter('-2413957740330241600');" onmouseout="out('-2413957740330241600');" style="">  63 import org.broadleafcommerce.common.presentation.client.LookupType;                                      </span>
<span class="7296089998360266547" onmouseenter="enter('7296089998360266547');" onmouseout="out('7296089998360266547');" style="">  64 import org.broadleafcommerce.common.presentation.client.PersistencePerspectiveItemType;                  </span>
<span class="1362364260528215152" onmouseenter="enter('1362364260528215152');" onmouseout="out('1362364260528215152');" style="">  65 import org.broadleafcommerce.common.presentation.client.SupportedFieldType;                              </span>
<span class="-7583443881845767348" onmouseenter="enter('-7583443881845767348');" onmouseout="out('-7583443881845767348');" style="">  66 import org.broadleafcommerce.common.presentation.client.VisibilityEnum;                                  </span>
<span class="2428099238642943960" onmouseenter="enter('2428099238642943960');" onmouseout="out('2428099238642943960');" style="">  67 import org.broadleafcommerce.common.util.BLCMessageUtils;                                                </span>
<span class="578947422765016559" onmouseenter="enter('578947422765016559');" onmouseout="out('578947422765016559');" style="">  68 import org.broadleafcommerce.common.util.FormatUtil;                                                     </span>
<span class="-3347161074136237116" onmouseenter="enter('-3347161074136237116');" onmouseout="out('-3347161074136237116');" style="">  69 import org.broadleafcommerce.common.util.StringUtil;                                                     </span>
<span class="8689743329875302887" onmouseenter="enter('8689743329875302887');" onmouseout="out('8689743329875302887');" style="">  70 import org.broadleafcommerce.common.web.BroadleafRequestContext;                                         </span>
<span class="-3361215363157046739" onmouseenter="enter('-3361215363157046739');" onmouseout="out('-3361215363157046739');" style="">  71 import org.broadleafcommerce.openadmin.dto.AdornedTargetCollectionMetadata;                              </span>
<span class="-1781055592725563383" onmouseenter="enter('-1781055592725563383');" onmouseout="out('-1781055592725563383');" style="">  72 import org.broadleafcommerce.openadmin.dto.AdornedTargetList;                                            </span>
<span class="-6140296335181984013" onmouseenter="enter('-6140296335181984013');" onmouseout="out('-6140296335181984013');" style="">  73 import org.broadleafcommerce.openadmin.dto.BasicCollectionMetadata;                                      </span>
<span class="4427537537958608766" onmouseenter="enter('4427537537958608766');" onmouseout="out('4427537537958608766');" style="">  74 import org.broadleafcommerce.openadmin.dto.BasicFieldMetadata;                                           </span>
<span class="-1607559599739253077" onmouseenter="enter('-1607559599739253077');" onmouseout="out('-1607559599739253077');" style="">  75 import org.broadleafcommerce.openadmin.dto.ClassMetadata;                                                </span>
<span class="5550564421881377532" onmouseenter="enter('5550564421881377532');" onmouseout="out('5550564421881377532');" style="">  76 import org.broadleafcommerce.openadmin.dto.ClassTree;                                                    </span>
<span class="-3165611006566133086" onmouseenter="enter('-3165611006566133086');" onmouseout="out('-3165611006566133086');" style="">  77 import org.broadleafcommerce.openadmin.dto.CollectionMetadata;                                           </span>
<span class="-4742435063138209714" onmouseenter="enter('-4742435063138209714');" onmouseout="out('-4742435063138209714');" style="">  78 import org.broadleafcommerce.openadmin.dto.DynamicResultSet;                                             </span>
<span class="-5093421835888664541" onmouseenter="enter('-5093421835888664541');" onmouseout="out('-5093421835888664541');" style="">  79 import org.broadleafcommerce.openadmin.dto.Entity;                                                       </span>
<span class="-8829499667991596741" onmouseenter="enter('-8829499667991596741');" onmouseout="out('-8829499667991596741');" style="">  80 import org.broadleafcommerce.openadmin.dto.FieldMetadata;                                                </span>
<span class="-2271266034558779994" onmouseenter="enter('-2271266034558779994');" onmouseout="out('-2271266034558779994');" style="">  81 import org.broadleafcommerce.openadmin.dto.ForeignKey;                                                   </span>
<span class="826821438795056004" onmouseenter="enter('826821438795056004');" onmouseout="out('826821438795056004');" style="">  82 import org.broadleafcommerce.openadmin.dto.MapMetadata;                                                  </span>
<span class="-7888875133556467044" onmouseenter="enter('-7888875133556467044');" onmouseout="out('-7888875133556467044');" style="">  83 import org.broadleafcommerce.openadmin.dto.MapStructure;                                                 </span>
<span class="1983554291461039357" onmouseenter="enter('1983554291461039357');" onmouseout="out('1983554291461039357');" style="">  84 import org.broadleafcommerce.openadmin.dto.Property;                                                     </span>
<span class="1696571253156436279" onmouseenter="enter('1696571253156436279');" onmouseout="out('1696571253156436279');" style="">  85 import org.broadleafcommerce.openadmin.dto.SectionCrumb;                                                 </span>
<span class="5662236005419086618" onmouseenter="enter('5662236005419086618');" onmouseout="out('5662236005419086618');" style="">  86 import org.broadleafcommerce.openadmin.dto.TabMetadata;                                                  </span>
<span class="-8828889589519173652" onmouseenter="enter('-8828889589519173652');" onmouseout="out('-8828889589519173652');" style="">  87 import org.broadleafcommerce.openadmin.server.dao.DynamicEntityDao;                                      </span>
<span class="4410643013278245372" onmouseenter="enter('4410643013278245372');" onmouseout="out('4410643013278245372');" style="">  88 import org.broadleafcommerce.openadmin.server.domain.PersistencePackageRequest;                          </span>
<span class="-7620175268967942501" onmouseenter="enter('-7620175268967942501');" onmouseout="out('-7620175268967942501');" style="">  89 import org.broadleafcommerce.openadmin.server.security.domain.AdminSection;                              </span>
<span class="-6571883875867969954" onmouseenter="enter('-6571883875867969954');" onmouseout="out('-6571883875867969954');" style="">  90 import org.broadleafcommerce.openadmin.server.security.domain.AdminUser;                                 </span>
<span class="-4641149340176766185" onmouseenter="enter('-4641149340176766185');" onmouseout="out('-4641149340176766185');" style="">  91 import org.broadleafcommerce.openadmin.server.security.remote.EntityOperationType;                       </span>
<span class="8942483953505157490" onmouseenter="enter('8942483953505157490');" onmouseout="out('8942483953505157490');" style="">  92 import org.broadleafcommerce.openadmin.server.security.remote.SecurityVerifier;                          </span>
<span class="-5109104434282935941" onmouseenter="enter('-5109104434282935941');" onmouseout="out('-5109104434282935941');" style="">  93 import org.broadleafcommerce.openadmin.server.security.service.EntityFormModifier;                       </span>
<span class="-8160764320713173157" onmouseenter="enter('-8160764320713173157');" onmouseout="out('-8160764320713173157');" style="">  94 import org.broadleafcommerce.openadmin.server.security.service.EntityFormModifierConfiguration;          </span>
<span class="-7359249757017525541" onmouseenter="enter('-7359249757017525541');" onmouseout="out('-7359249757017525541');" style="">  95 import org.broadleafcommerce.openadmin.server.security.service.EntityFormModifierData;                   </span>
<span class="3347653686268274670" onmouseenter="enter('3347653686268274670');" onmouseout="out('3347653686268274670');" style="">  96 import org.broadleafcommerce.openadmin.server.security.service.EntityFormModifierDataPoint;              </span>
<span class="-5654897577089013652" onmouseenter="enter('-5654897577089013652');" onmouseout="out('-5654897577089013652');" style="">  97 import org.broadleafcommerce.openadmin.server.security.service.EntityFormModifierRequest;                </span>
<span class="8609771947297205873" onmouseenter="enter('8609771947297205873');" onmouseout="out('8609771947297205873');" style="">  98 import org.broadleafcommerce.openadmin.server.security.service.ExceptionAwareRowLevelSecurityProvider;   </span>
<span class="78786346091609662" onmouseenter="enter('78786346091609662');" onmouseout="out('78786346091609662');" style="">  99 import org.broadleafcommerce.openadmin.server.security.service.RowLevelSecurityService;                  </span>
<span class="-3170172369947649824" onmouseenter="enter('-3170172369947649824');" onmouseout="out('-3170172369947649824');" style=""> 100 import org.broadleafcommerce.openadmin.server.security.service.navigation.AdminNavigationService;        </span>
<span class="-3881535627450957263" onmouseenter="enter('-3881535627450957263');" onmouseout="out('-3881535627450957263');" style=""> 101 import org.broadleafcommerce.openadmin.server.service.AdminEntityService;                                </span>
<span class="-1454726158681359973" onmouseenter="enter('-1454726158681359973');" onmouseout="out('-1454726158681359973');" style=""> 102 import org.broadleafcommerce.openadmin.server.service.persistence.PersistenceManager;                    </span>
<span class="97669409268306845" onmouseenter="enter('97669409268306845');" onmouseout="out('97669409268306845');" style=""> 103 import org.broadleafcommerce.openadmin.server.service.persistence.PersistenceManagerFactory;             </span>
<span class="-3086540061138981164" onmouseenter="enter('-3086540061138981164');" onmouseout="out('-3086540061138981164');" style=""> 104 import org.broadleafcommerce.openadmin.server.service.persistence.module.BasicPersistenceModule;         </span>
<span class="6020321283788374630" onmouseenter="enter('6020321283788374630');" onmouseout="out('6020321283788374630');" style=""> 105 import org.broadleafcommerce.openadmin.server.service.persistence.module.FieldManager;                   </span>
<span class="-2042519459673859584" onmouseenter="enter('-2042519459673859584');" onmouseout="out('-2042519459673859584');" style=""> 106 import org.broadleafcommerce.openadmin.web.form.component.DefaultListGridActions;                        </span>
<span class="3056790491614608405" onmouseenter="enter('3056790491614608405');" onmouseout="out('3056790491614608405');" style=""> 107 import org.broadleafcommerce.openadmin.web.form.component.ListGrid;                                      </span>
<span class="5295362033766750426" onmouseenter="enter('5295362033766750426');" onmouseout="out('5295362033766750426');" style=""> 108 import org.broadleafcommerce.openadmin.web.form.component.ListGridAction;                                </span>
<span class="-3450485825037219414" onmouseenter="enter('-3450485825037219414');" onmouseout="out('-3450485825037219414');" style=""> 109 import org.broadleafcommerce.openadmin.web.form.component.ListGridActionGroup;                           </span>
<span class="-3405551311883594169" onmouseenter="enter('-3405551311883594169');" onmouseout="out('-3405551311883594169');" style=""> 110 import org.broadleafcommerce.openadmin.web.form.component.ListGridRecord;                                </span>
<span class="-5608490858121609411" onmouseenter="enter('-5608490858121609411');" onmouseout="out('-5608490858121609411');" style=""> 111 import org.broadleafcommerce.openadmin.web.form.component.MediaField;                                    </span>
<span class="-8639148455058795423" onmouseenter="enter('-8639148455058795423');" onmouseout="out('-8639148455058795423');" style=""> 112 import org.broadleafcommerce.openadmin.web.form.component.RuleBuilderField;                              </span>
<span class="7920804437009762662" onmouseenter="enter('7920804437009762662');" onmouseout="out('7920804437009762662');" style=""> 113 import org.broadleafcommerce.openadmin.web.form.entity.CodeField;                                        </span>
<span class="3594570724696916406" onmouseenter="enter('3594570724696916406');" onmouseout="out('3594570724696916406');" style=""> 114 import org.broadleafcommerce.openadmin.web.form.entity.ComboField;                                       </span>
<span class="1405974373227613661" onmouseenter="enter('1405974373227613661');" onmouseout="out('1405974373227613661');" style=""> 115 import org.broadleafcommerce.openadmin.web.form.entity.DefaultAdornedEntityFormActions;                  </span>
<span class="2718350422838759693" onmouseenter="enter('2718350422838759693');" onmouseout="out('2718350422838759693');" style=""> 116 import org.broadleafcommerce.openadmin.web.form.entity.DefaultEntityFormActions;                         </span>
<span class="-7452009352681558215" onmouseenter="enter('-7452009352681558215');" onmouseout="out('-7452009352681558215');" style=""> 117 import org.broadleafcommerce.openadmin.web.form.entity.DynamicEntityFormInfo;                            </span>
<span class="8035715143965725316" onmouseenter="enter('8035715143965725316');" onmouseout="out('8035715143965725316');" style=""> 118 import org.broadleafcommerce.openadmin.web.form.entity.EntityForm;                                       </span>
<span class="6015559832933397076" onmouseenter="enter('6015559832933397076');" onmouseout="out('6015559832933397076');" style=""> 119 import org.broadleafcommerce.openadmin.web.form.entity.Field;                                            </span>
<span class="-902704191270810798" onmouseenter="enter('-902704191270810798');" onmouseout="out('-902704191270810798');" style=""> 120 import org.broadleafcommerce.openadmin.web.rulebuilder.DataDTODeserializer;                              </span>
<span class="-5891661051837252429" onmouseenter="enter('-5891661051837252429');" onmouseout="out('-5891661051837252429');" style=""> 121 import org.broadleafcommerce.openadmin.web.rulebuilder.dto.DataDTO;                                      </span>
<span class="-5682953954690678360" onmouseenter="enter('-5682953954690678360');" onmouseout="out('-5682953954690678360');" style=""> 122 import org.broadleafcommerce.openadmin.web.rulebuilder.dto.DataWrapper;                                  </span>
<span class="-5901812469549191870" onmouseenter="enter('-5901812469549191870');" onmouseout="out('-5901812469549191870');" style=""> 123 import org.broadleafcommerce.openadmin.web.rulebuilder.dto.FieldDTO;                                     </span>
<span class="5057654301829863353" onmouseenter="enter('5057654301829863353');" onmouseout="out('5057654301829863353');" style=""> 124 import org.broadleafcommerce.openadmin.web.rulebuilder.dto.FieldWrapper;                                 </span>
<span class="1299345749740405613" onmouseenter="enter('1299345749740405613');" onmouseout="out('1299345749740405613');" style=""> 125 import org.codehaus.jettison.json.JSONObject;                                                            </span>
<span class="-7404358339654927739" onmouseenter="enter('-7404358339654927739');" onmouseout="out('-7404358339654927739');" style=""> 126 import org.springframework.beans.factory.annotation.Value;                                               </span>
<span class="5894662938986881653" onmouseenter="enter('5894662938986881653');" onmouseout="out('5894662938986881653');" style=""> 127 import org.springframework.context.MessageSource;                                                        </span>
<span class="4998592591649731876" onmouseenter="enter('4998592591649731876');" onmouseout="out('4998592591649731876');" style=""> 128 import org.springframework.context.NoSuchMessageException;                                               </span>
<span class="-5275076188864034753" onmouseenter="enter('-5275076188864034753');" onmouseout="out('-5275076188864034753');" style=""> 129 import org.springframework.stereotype.Service;                                                           </span>
<span  style=""> 130                                                                                                          </span>
<span  style=""> 131                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 132 /**                                                                                                      </span>
<span class="-346667533686466806" onmouseenter="enter('-346667533686466806');" onmouseout="out('-346667533686466806');" style=""> 133  * @author Andre Azzolini (apazzolini)                                                                   </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 134  */                                                                                                      </span>
<span class="4305824758257676503" onmouseenter="enter('4305824758257676503');" onmouseout="out('4305824758257676503');" style=""> 135 @Service(&quot;blFormBuilderService&quot;)                                                                         </span>
<span class="1873196277582368359" onmouseenter="enter('1873196277582368359');" onmouseout="out('1873196277582368359');" style=""> 136 public class FormBuilderServiceImpl implements FormBuilderService {                                      </span>
<span class="4173594623362970870" onmouseenter="enter('4173594623362970870');" onmouseout="out('4173594623362970870');" style=""> 137     private static final Log LOG = LogFactory.getLog(FormBuilderServiceImpl.class);                      </span>
<span  style=""> 138                                                                                                          </span>
<span class="-3043900363751028803" onmouseenter="enter('-3043900363751028803');" onmouseout="out('-3043900363751028803');" style=""> 139     public static final String ALTERNATE_ID_PROPERTY = &quot;ALTERNATE_ID&quot;;                                   </span>
<span  style=""> 140                                                                                                          </span>
<span class="-7828706270204224343" onmouseenter="enter('-7828706270204224343');" onmouseout="out('-7828706270204224343');" style=""> 141     @Resource(name = &quot;blAdminEntityService&quot;)                                                             </span>
<span class="-8450140140941932116" onmouseenter="enter('-8450140140941932116');" onmouseout="out('-8450140140941932116');" style=""> 142     protected AdminEntityService adminEntityService;                                                     </span>
<span  style=""> 143                                                                                                          </span>
<span class="-1805811588903622951" onmouseenter="enter('-1805811588903622951');" onmouseout="out('-1805811588903622951');" style=""> 144     @Resource (name = &quot;blAdminNavigationService&quot;)                                                        </span>
<span class="-7781148449676317002" onmouseenter="enter('-7781148449676317002');" onmouseout="out('-7781148449676317002');" style=""> 145     protected AdminNavigationService navigationService;                                                  </span>
<span  style=""> 146                                                                                                          </span>
<span class="7211766058790837589" onmouseenter="enter('7211766058790837589');" onmouseout="out('7211766058790837589');" style=""> 147     @Resource(name = &quot;blFormBuilderExtensionManager&quot;)                                                    </span>
<span class="1458252146616806516" onmouseenter="enter('1458252146616806516');" onmouseout="out('1458252146616806516');" style=""> 148     protected FormBuilderExtensionManager extensionManager;                                              </span>
<span  style=""> 149                                                                                                          </span>
<span class="1637373992155499263" onmouseenter="enter('1637373992155499263');" onmouseout="out('1637373992155499263');" style=""> 150     @Resource(name=&quot;blEntityConfiguration&quot;)                                                              </span>
<span class="-8812870795397979367" onmouseenter="enter('-8812870795397979367');" onmouseout="out('-8812870795397979367');" style=""> 151     protected EntityConfiguration entityConfiguration;                                                   </span>
<span  style=""> 152                                                                                                          </span>
<span class="318567755561422223" onmouseenter="enter('318567755561422223');" onmouseout="out('318567755561422223');" style=""> 153     @Resource(name=&quot;blAdminSecurityRemoteService&quot;)                                                       </span>
<span class="-293302832217381009" onmouseenter="enter('-293302832217381009');" onmouseout="out('-293302832217381009');" style=""> 154     protected SecurityVerifier adminRemoteSecurityService;                                               </span>
<span  style=""> 155                                                                                                          </span>
<span class="-1073312679381587606" onmouseenter="enter('-1073312679381587606');" onmouseout="out('-1073312679381587606');" style=""> 156     @Resource(name = &quot;blRowLevelSecurityService&quot;)                                                        </span>
<span class="7292046362506695965" onmouseenter="enter('7292046362506695965');" onmouseout="out('7292046362506695965');" style=""> 157     protected RowLevelSecurityService rowLevelSecurityService;                                           </span>
<span  style=""> 158                                                                                                          </span>
<span class="582138269496436951" onmouseenter="enter('582138269496436951');" onmouseout="out('582138269496436951');" style=""> 159     @Resource(name = &quot;blMediaBuilderService&quot;)                                                            </span>
<span class="8749601783428818980" onmouseenter="enter('8749601783428818980');" onmouseout="out('8749601783428818980');" style=""> 160     protected MediaBuilderService mediaBuilderService;                                                   </span>
<span  style=""> 161                                                                                                          </span>
<span class="1982131321477089315" onmouseenter="enter('1982131321477089315');" onmouseout="out('1982131321477089315');" style=""> 162     @Resource(name = &quot;blListGridErrorMessageExtensionManager&quot;)                                           </span>
<span class="4649294380733883401" onmouseenter="enter('4649294380733883401');" onmouseout="out('4649294380733883401');" style=""> 163     protected ListGridErrorMessageExtensionManager listGridErrorExtensionManager;                        </span>
<span  style=""> 164                                                                                                          </span>
<span class="-6302300657638714180" onmouseenter="enter('-6302300657638714180');" onmouseout="out('-6302300657638714180');" style=""> 165     @Resource(name = &quot;blAdminNavigationService&quot;)                                                         </span>
<span class="-6025330588276587017" onmouseenter="enter('-6025330588276587017');" onmouseout="out('-6025330588276587017');" style=""> 166     protected AdminNavigationService adminNavigationService;                                             </span>
<span  style=""> 167                                                                                                          </span>
<span class="4471392044492296285" onmouseenter="enter('4471392044492296285');" onmouseout="out('4471392044492296285');" style=""> 168     @Resource(name = &quot;blEntityDuplicator&quot;)                                                               </span>
<span class="-9194612273021432316" onmouseenter="enter('-9194612273021432316');" onmouseout="out('-9194612273021432316');" style=""> 169     protected EntityDuplicator duplicator;                                                               </span>
<span  style=""> 170                                                                                                          </span>
<span class="-8242037663383389708" onmouseenter="enter('-8242037663383389708');" onmouseout="out('-8242037663383389708');" style=""> 171     @Resource(name = &quot;blDynamicEntityDao&quot;)                                                               </span>
<span class="-6629482740079052882" onmouseenter="enter('-6629482740079052882');" onmouseout="out('-6629482740079052882');" style=""> 172     protected DynamicEntityDao dynamicEntityDao;                                                         </span>
<span  style=""> 173                                                                                                          </span>
<span class="6008764380027861894" onmouseenter="enter('6008764380027861894');" onmouseout="out('6008764380027861894');" style=""> 174     @Resource(name = &quot;blLocaleService&quot;)                                                                  </span>
<span class="-5080270678165807269" onmouseenter="enter('-5080270678165807269');" onmouseout="out('-5080270678165807269');" style=""> 175     protected LocaleService localeService;                                                               </span>
<span  style=""> 176                                                                                                          </span>
<span class="2111635565141224242" onmouseenter="enter('2111635565141224242');" onmouseout="out('2111635565141224242');" style=""> 177     @Resource(name = &quot;blTranslationService&quot;)                                                             </span>
<span class="3630047639981215429" onmouseenter="enter('3630047639981215429');" onmouseout="out('3630047639981215429');" style=""> 178     protected TranslationService translationService;                                                     </span>
<span  style=""> 179                                                                                                          </span>
<span class="-7553809325968652706" onmouseenter="enter('-7553809325968652706');" onmouseout="out('-7553809325968652706');" style=""> 180     @Value(&quot;${use.translation.search:false}&quot;)                                                            </span>
<span class="-2269006701771046036" onmouseenter="enter('-2269006701771046036');" onmouseout="out('-2269006701771046036');" style=""> 181     protected boolean useTranslationSearch;                                                              </span>
<span  style=""> 182                                                                                                          </span>
<span class="-5561960695501016515" onmouseenter="enter('-5561960695501016515');" onmouseout="out('-5561960695501016515');" style=""><abbr title=" 183     protected static final VisibilityEnum[] FORM_HIDDEN_VISIBILITIES = new VisibilityEnum[]{ VisibilityEnum.HIDDEN_ALL, VisibilityEnum.FORM_HIDDEN };"> 183     protected static final VisibilityEnum[] FORM_HIDDEN_VISIBILITIES = new VisibilityEnum[]{ VisibilityEnðŸ”µ</abbr></span>
<span  style=""> 184                                                                                                          </span>
<span class="-3352897524275042262" onmouseenter="enter('-3352897524275042262');" onmouseout="out('-3352897524275042262');" style=""><abbr title=" 185     protected static final VisibilityEnum[] GRID_HIDDEN_VISIBILITIES = new VisibilityEnum[]{ VisibilityEnum.HIDDEN_ALL, VisibilityEnum.GRID_HIDDEN };"> 185     protected static final VisibilityEnum[] GRID_HIDDEN_VISIBILITIES = new VisibilityEnum[]{ VisibilityEnðŸ”µ</abbr></span>
<span  style=""> 186                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 187     @Override                                                                                            </span>
<span class="8561107268355120937" onmouseenter="enter('8561107268355120937');" onmouseout="out('8561107268355120937');" style=""><abbr title=" 188     public ListGrid buildMainListGrid(DynamicResultSet drs, ClassMetadata cmd, String sectionKey, List&lt;SectionCrumb&gt; sectionCrumbs) throws ServiceException {"> 188     public ListGrid buildMainListGrid(DynamicResultSet drs, ClassMetadata cmd, String sectionKey, List&lt;SeðŸ”µ</abbr></span>
<span class="-7098425003691580554" onmouseenter="enter('-7098425003691580554');" onmouseout="out('-7098425003691580554');" style=""> 189         List&lt;Field&gt; headerFields = new ArrayList&lt;&gt;();                                                    </span>
<span class="1627698519761414576" onmouseenter="enter('1627698519761414576');" onmouseout="out('1627698519761414576');" style=""> 190         ListGrid.Type type = ListGrid.Type.MAIN;                                                         </span>
<span class="-2507165338472177227" onmouseenter="enter('-2507165338472177227');" onmouseout="out('-2507165338472177227');" style=""> 191         String idProperty = &quot;id&quot;;                                                                        </span>
<span class="1914895525805456392" onmouseenter="enter('1914895525805456392');" onmouseout="out('1914895525805456392');" style=""> 192         FieldWrapper wrapper = new FieldWrapper();                                                       </span>
<span class="519132227955412437" onmouseenter="enter('519132227955412437');" onmouseout="out('519132227955412437');" style=""> 193         ArrayList&lt;FieldDTO&gt; defaultWrapperFields = new ArrayList&lt;&gt;();                                    </span>
<span class="3681854507729164346" onmouseenter="enter('3681854507729164346');" onmouseout="out('3681854507729164346');" style=""> 194         for (Property p : cmd.getProperties()) {                                                         </span>
<span class="-1029066852878262358" onmouseenter="enter('-1029066852878262358');" onmouseout="out('-1029066852878262358');" style=""> 195             if (p.getMetadata() instanceof BasicFieldMetadata) {                                         </span>
<span class="-4205861585023903314" onmouseenter="enter('-4205861585023903314');" onmouseout="out('-4205861585023903314');" style=""> 196                 BasicFieldMetadata fmd = ((BasicFieldMetadata) (p.getMetadata()));                       </span>
<span class="18031332680368663" onmouseenter="enter('18031332680368663');" onmouseout="out('18031332680368663');" style=""> 197                 if (SupportedFieldType.ID.equals(fmd.getFieldType())) {                                  </span>
<span class="-3962609225474086388" onmouseenter="enter('-3962609225474086388');" onmouseout="out('-3962609225474086388');" style=""> 198                     idProperty = fmd.getName();                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 199                 }                                                                                        </span>
<span class="2669624042866698915" onmouseenter="enter('2669624042866698915');" onmouseout="out('2669624042866698915');" style=""><abbr title=" 200                 if (((fmd.isProminent() != null) &amp;&amp; fmd.isProminent()) &amp;&amp; (!ArrayUtils.contains(getGridHiddenVisibilities(), fmd.getVisibility()))) {"> 200                 if (((fmd.isProminent() != null) &amp;&amp; fmd.isProminent()) &amp;&amp; (!ArrayUtils.contains(getGridHiðŸ”µ</abbr></span>
<span class="-8490871683061304534" onmouseenter="enter('-8490871683061304534');" onmouseout="out('-8490871683061304534');" style=""> 201                     Field hf = createHeaderField(p, fmd);                                                </span>
<span class="465504053416102059" onmouseenter="enter('465504053416102059');" onmouseout="out('465504053416102059');" style=""> 202                     headerFields.add(hf);                                                                </span>
<span class="6861300594848012112" onmouseenter="enter('6861300594848012112');" onmouseout="out('6861300594848012112');" style=""> 203                     defaultWrapperFields.add(constructFieldDTOFromFieldData(hf, fmd));                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 204                 }                                                                                        </span>
<span class="-4094304170606241678" onmouseenter="enter('-4094304170606241678');" onmouseout="out('-4094304170606241678');" style=""> 205                 if ((fmd.getIsFilter() != null) &amp;&amp; fmd.getIsFilter()) {                                  </span>
<span class="2276813412477598729" onmouseenter="enter('2276813412477598729');" onmouseout="out('2276813412477598729');" style=""><abbr title=" 206                     wrapper.getFields().add(constructFieldDTOFromFieldData(createHeaderField(p, fmd), fmd));"> 206                     wrapper.getFields().add(constructFieldDTOFromFieldData(createHeaderField(p, fmd), fmdðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 207                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 208             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 209         }                                                                                                </span>
<span class="7035902688492109722" onmouseenter="enter('7035902688492109722');" onmouseout="out('7035902688492109722');" style=""> 210         if (useTranslationSearch) {                                                                      </span>
<span class="5781419264587889352" onmouseenter="enter('5781419264587889352');" onmouseout="out('5781419264587889352');" style=""> 211             getTranslationSearchField(cmd.getCeilingType(), defaultWrapperFields);                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 212         }                                                                                                </span>
<span class="-2480148942784560805" onmouseenter="enter('-2480148942784560805');" onmouseout="out('-2480148942784560805');" style=""><abbr title=" 213         ListGrid listGrid = createListGrid(cmd.getCeilingType(), headerFields, type, drs, sectionKey, 0, idProperty, sectionCrumbs);"> 213         ListGrid listGrid = createListGrid(cmd.getCeilingType(), headerFields, type, drs, sectionKey, 0, ðŸ”µ</abbr></span>
<span class="5965161931380536237" onmouseenter="enter('5965161931380536237');" onmouseout="out('5965161931380536237');" style=""> 214         if (CollectionUtils.isNotEmpty(listGrid.getHeaderFields())) {                                    </span>
<span class="3953700823140818229" onmouseenter="enter('3953700823140818229');" onmouseout="out('3953700823140818229');" style=""> 215             // Set the first column to be able to link to the main entity                                </span>
<span class="2105374103692198201" onmouseenter="enter('2105374103692198201');" onmouseout="out('2105374103692198201');" style=""> 216             listGrid.getHeaderFields().iterator().next().setMainEntityLink(true);                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 217         } else {                                                                                         </span>
<span class="-7706502187775684276" onmouseenter="enter('-7706502187775684276');" onmouseout="out('-7706502187775684276');" style=""><abbr title=" 218             String message = &quot;There are no listgrid header fields configured for the class &quot; + cmd.getCeilingType();"> 218             String message = &quot;There are no listgrid header fields configured for the class &quot; + cmd.getCeiðŸ”µ</abbr></span>
<span class="4913519471581000034" onmouseenter="enter('4913519471581000034');" onmouseout="out('4913519471581000034');" style=""> 219             message += &quot;Please mark some @AdminPresentation fields with &#x27;prominent = true&#x27;&quot;;             </span>
<span class="683988342023046623" onmouseenter="enter('683988342023046623');" onmouseout="out('683988342023046623');" style=""> 220             LOG.error(message);                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 221         }                                                                                                </span>
<span class="1067693587814186246" onmouseenter="enter('1067693587814186246');" onmouseout="out('1067693587814186246');" style=""> 222         Date c = new Date();                                                                             </span>
<span class="488922592354253720" onmouseenter="enter('488922592354253720');" onmouseout="out('488922592354253720');" style=""> 223         String friendlyName = &quot;listGrid&quot; + c.getTime();                                                  </span>
<span class="2615168876841014995" onmouseenter="enter('2615168876841014995');" onmouseout="out('2615168876841014995');" style=""> 224         // Set up the filter builder params                                                              </span>
<span class="3627072983536168024" onmouseenter="enter('3627072983536168024');" onmouseout="out('3627072983536168024');" style=""> 225         listGrid.setJsonFieldName(friendlyName + &quot;Json&quot;);                                                </span>
<span class="6488323689834765207" onmouseenter="enter('6488323689834765207');" onmouseout="out('6488323689834765207');" style=""> 226         listGrid.setFriendlyName(friendlyName);                                                          </span>
<span class="-4532597237542010033" onmouseenter="enter('-4532597237542010033');" onmouseout="out('-4532597237542010033');" style=""> 227         listGrid.setFieldBuilder(&quot;RULE_SIMPLE&quot;);                                                         </span>
<span class="2366326534416496613" onmouseenter="enter('2366326534416496613');" onmouseout="out('2366326534416496613');" style=""> 228         if (CollectionUtils.isEmpty(wrapper.getFields())) {                                              </span>
<span class="532531496111421469" onmouseenter="enter('532531496111421469');" onmouseout="out('532531496111421469');" style=""> 229             wrapper.setFields(defaultWrapperFields);                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 230         }                                                                                                </span>
<span class="8083895692807517727" onmouseenter="enter('8083895692807517727');" onmouseout="out('8083895692807517727');" style=""> 231         listGrid.setFieldWrapper(wrapper);                                                               </span>
<span class="-5116449029302148886" onmouseenter="enter('-5116449029302148886');" onmouseout="out('-5116449029302148886');" style=""> 232         listGrid.setHideFriendlyName(true);                                                              </span>
<span class="-3979456483013011463" onmouseenter="enter('-3979456483013011463');" onmouseout="out('-3979456483013011463');" style=""> 233         String blankJsonString = &quot;{\&quot;data\&quot;:[]}&quot;;                                                        </span>
<span class="7445610059504327235" onmouseenter="enter('7445610059504327235');" onmouseout="out('7445610059504327235');" style=""> 234         listGrid.setJson(blankJsonString);                                                               </span>
<span class="-6647315222721447684" onmouseenter="enter('-6647315222721447684');" onmouseout="out('-6647315222721447684');" style=""> 235         DataWrapper dw = convertJsonToDataWrapper(blankJsonString);                                      </span>
<span class="-3408161092817379645" onmouseenter="enter('-3408161092817379645');" onmouseout="out('-3408161092817379645');" style=""> 236         if (dw != null) {                                                                                </span>
<span class="-933372440492481068" onmouseenter="enter('-933372440492481068');" onmouseout="out('-933372440492481068');" style=""> 237             listGrid.setDataWrapper(dw);                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 238         }                                                                                                </span>
<span class="2808273481648426142" onmouseenter="enter('2808273481648426142');" onmouseout="out('2808273481648426142');" style=""> 239         listGrid.addModalRowAction(DefaultListGridActions.SINGLE_SELECT);                                </span>
<span class="-7419173722157864798" onmouseenter="enter('-7419173722157864798');" onmouseout="out('-7419173722157864798');" style=""> 240         listGrid.setSelectType(ListGrid.SelectType.SINGLE_SELECT);                                       </span>
<span class="-5511350038403165520" onmouseenter="enter('-5511350038403165520');" onmouseout="out('-5511350038403165520');" style=""> 241         extensionManager.getProxy().modifyListGrid(listGrid.getClassName(), listGrid);                   </span>
<span class="8338561479600990216" onmouseenter="enter('8338561479600990216');" onmouseout="out('8338561479600990216');" style=""> 242         return listGrid;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 243     }                                                                                                    </span>
<span  style=""> 244                                                                                                          </span>
<span class="-2473495746700041727" onmouseenter="enter('-2473495746700041727');" onmouseout="out('-2473495746700041727');" style=""><abbr title=" 245     private void getTranslationSearchField(String ceilingEntity, ArrayList&lt;FieldDTO&gt; defaultWrapperFields) {"> 245     private void getTranslationSearchField(String ceilingEntity, ArrayList&lt;FieldDTO&gt; defaultWrapperFieldsðŸ”µ</abbr></span>
<span  style=""> 246                                                                                                          </span>
<span class="-3232888912368159607" onmouseenter="enter('-3232888912368159607');" onmouseout="out('-3232888912368159607');" style=""> 247         TranslatedEntity translatedEntity;                                                               </span>
<span  style=""> 248                                                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 249         try {                                                                                            </span>
<span class="-5244579722591725998" onmouseenter="enter('-5244579722591725998');" onmouseout="out('-5244579722591725998');" style=""> 250             translatedEntity = translationService.getAssignableEntityType(ceilingEntity);                </span>
<span  style=""> 251                                                                                                          </span>
<span class="-7754722203743621702" onmouseenter="enter('-7754722203743621702');" onmouseout="out('-7754722203743621702');" style=""> 252             FieldDTO localeField = new FieldDTO();                                                       </span>
<span class="-650403806001508418" onmouseenter="enter('-650403806001508418');" onmouseout="out('-650403806001508418');" style=""> 253             localeField.setId(&quot;translationLocale&quot;);                                                      </span>
<span class="8883986331867249527" onmouseenter="enter('8883986331867249527');" onmouseout="out('8883986331867249527');" style=""> 254             localeField.setLabel(&quot;Translation locale&quot;);                                                  </span>
<span class="7199208923750727297" onmouseenter="enter('7199208923750727297');" onmouseout="out('7199208923750727297');" style=""> 255             localeField.setOperators(&quot;blcFilterOperators_Enumeration&quot;);                                  </span>
<span class="448314703673594143" onmouseenter="enter('448314703673594143');" onmouseout="out('448314703673594143');" style=""> 256             localeField.setInput(&quot;select&quot;);                                                              </span>
<span class="-8761693359075365287" onmouseenter="enter('-8761693359075365287');" onmouseout="out('-8761693359075365287');" style=""> 257             localeField.setType(&quot;string&quot;);                                                               </span>
<span  style=""> 258                                                                                                          </span>
<span class="-5174724837975624583" onmouseenter="enter('-5174724837975624583');" onmouseout="out('-5174724837975624583');" style=""><abbr title=" 259             List&lt;org.broadleafcommerce.common.locale.domain.Locale&gt; locales = localeService.findAllLocales();"> 259             List&lt;org.broadleafcommerce.common.locale.domain.Locale&gt; locales = localeService.findAllLocaleðŸ”µ</abbr></span>
<span  style=""> 260                                                                                                          </span>
<span class="-3424573618742224536" onmouseenter="enter('-3424573618742224536');" onmouseout="out('-3424573618742224536');" style=""> 261             Map&lt;String, String&gt; localeMap = new HashMap&lt;String, String&gt;();                               </span>
<span class="1309094753405556630" onmouseenter="enter('1309094753405556630');" onmouseout="out('1309094753405556630');" style=""> 262             for (org.broadleafcommerce.common.locale.domain.Locale l : locales) {                        </span>
<span class="-2731689503985129359" onmouseenter="enter('-2731689503985129359');" onmouseout="out('-2731689503985129359');" style=""> 263                 localeMap.put(l.getLocaleCode(), l.getFriendlyName());                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 264             }                                                                                            </span>
<span class="-1902025200407977862" onmouseenter="enter('-1902025200407977862');" onmouseout="out('-1902025200407977862');" style=""> 265             localeField.setValues((new JSONObject(localeMap)).toString());                               </span>
<span  style=""> 266                                                                                                          </span>
<span class="-5238173597469744650" onmouseenter="enter('-5238173597469744650');" onmouseout="out('-5238173597469744650');" style=""> 267             defaultWrapperFields.add(localeField);                                                       </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 268         } catch (Exception e) {                                                                          </span>
<span class="-6052835720919181276" onmouseenter="enter('-6052835720919181276');" onmouseout="out('-6052835720919181276');" style=""> 269             translatedEntity = null;                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 270         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 271     }                                                                                                    </span>
<span  style=""> 272                                                                                                          </span>
<span class="699891459148766711" onmouseenter="enter('699891459148766711');" onmouseout="out('699891459148766711');" style=""> 273     protected FieldDTO constructFieldDTOFromFieldData(Field field, BasicFieldMetadata fmd) {             </span>
<span class="-2352177721144438592" onmouseenter="enter('-2352177721144438592');" onmouseout="out('-2352177721144438592');" style=""> 274         FieldDTO fieldDTO = new FieldDTO();                                                              </span>
<span class="-1955942127076587982" onmouseenter="enter('-1955942127076587982');" onmouseout="out('-1955942127076587982');" style=""> 275         //translate the label to display                                                                 </span>
<span class="-4249384918250439089" onmouseenter="enter('-4249384918250439089');" onmouseout="out('-4249384918250439089');" style=""> 276         String label = field.getFriendlyName();                                                          </span>
<span class="-7826420477706002406" onmouseenter="enter('-7826420477706002406');" onmouseout="out('-7826420477706002406');" style=""> 277         BroadleafRequestContext context = BroadleafRequestContext.getBroadleafRequestContext();          </span>
<span class="6441987552844354413" onmouseenter="enter('6441987552844354413');" onmouseout="out('6441987552844354413');" style=""> 278         MessageSource messages = context.getMessageSource();                                             </span>
<span class="5121225958291793486" onmouseenter="enter('5121225958291793486');" onmouseout="out('5121225958291793486');" style=""> 279         if (messages != null) {                                                                          </span>
<span class="8253723406718302376" onmouseenter="enter('8253723406718302376');" onmouseout="out('8253723406718302376');" style=""> 280             label = messages.getMessage(label, null, label, context.getJavaLocale());                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 281         }                                                                                                </span>
<span class="7762483336458153581" onmouseenter="enter('7762483336458153581');" onmouseout="out('7762483336458153581');" style=""> 282         fieldDTO.setLabel(label);                                                                        </span>
<span  style=""> 283                                                                                                          </span>
<span class="-8673723023935338374" onmouseenter="enter('-8673723023935338374');" onmouseout="out('-8673723023935338374');" style=""> 284         fieldDTO.setId(field.getName());                                                                 </span>
<span class="199309371382711712" onmouseenter="enter('199309371382711712');" onmouseout="out('199309371382711712');" style=""> 285         if (field.getFieldType().equals(&quot;STRING&quot;)) {                                                     </span>
<span class="8880270445034694758" onmouseenter="enter('8880270445034694758');" onmouseout="out('8880270445034694758');" style=""> 286             fieldDTO.setOperators(&quot;blcFilterOperators_Text&quot;);                                            </span>
<span class="362132093975857936" onmouseenter="enter('362132093975857936');" onmouseout="out('362132093975857936');" style=""> 287         } else if (field.getFieldType().equals(&quot;DATE&quot;)) {                                                </span>
<span class="-933802372622143860" onmouseenter="enter('-933802372622143860');" onmouseout="out('-933802372622143860');" style=""> 288             fieldDTO.setOperators(&quot;blcFilterOperators_Date&quot;);                                            </span>
<span class="6478164380950858712" onmouseenter="enter('6478164380950858712');" onmouseout="out('6478164380950858712');" style=""><abbr title=" 289         } else if (field.getFieldType().equals(&quot;NUMBER&quot;) || field.getFieldType().equals(&quot;MONEY&quot;) || field.getFieldType().equals(&quot;DECIMAL&quot;)) {"> 289         } else if (field.getFieldType().equals(&quot;NUMBER&quot;) || field.getFieldType().equals(&quot;MONEY&quot;) || fieldðŸ”µ</abbr></span>
<span class="8490956018155589877" onmouseenter="enter('8490956018155589877');" onmouseout="out('8490956018155589877');" style=""> 290             fieldDTO.setOperators(&quot;blcFilterOperators_Numeric&quot;);                                         </span>
<span class="-3955546677505185448" onmouseenter="enter('-3955546677505185448');" onmouseout="out('-3955546677505185448');" style=""> 291         } else if (field.getFieldType().equals(&quot;BOOLEAN&quot;)) {                                             </span>
<span class="-8455532459880737207" onmouseenter="enter('-8455532459880737207');" onmouseout="out('-8455532459880737207');" style=""> 292             fieldDTO.setOperators(&quot;blcFilterOperators_Boolean&quot;);                                         </span>
<span class="-8945465979032715781" onmouseenter="enter('-8945465979032715781');" onmouseout="out('-8945465979032715781');" style=""> 293         } else if (field.getFieldType().equals(&quot;BROADLEAF_ENUMERATION&quot;)) {                               </span>
<span class="7946158486041049881" onmouseenter="enter('7946158486041049881');" onmouseout="out('7946158486041049881');" style=""> 294             fieldDTO.setOperators(&quot;blcFilterOperators_Enumeration&quot;);                                     </span>
<span class="-1687118105305598570" onmouseenter="enter('-1687118105305598570');" onmouseout="out('-1687118105305598570');" style=""> 295             fieldDTO.setInput(&quot;select&quot;);                                                                 </span>
<span class="5956593754221125403" onmouseenter="enter('5956593754221125403');" onmouseout="out('5956593754221125403');" style=""> 296             fieldDTO.setType(&quot;string&quot;);                                                                  </span>
<span class="-8055867514585232964" onmouseenter="enter('-8055867514585232964');" onmouseout="out('-8055867514585232964');" style=""> 297             String[][] enumerationValues = fmd.getEnumerationValues ();                                  </span>
<span class="-2928874460015298174" onmouseenter="enter('-2928874460015298174');" onmouseout="out('-2928874460015298174');" style=""> 298             Map&lt;String, String&gt; enumMap = new HashMap&lt;&gt;();                                               </span>
<span class="-8241397125169255693" onmouseenter="enter('-8241397125169255693');" onmouseout="out('-8241397125169255693');" style=""> 299             for (int i = 0; i &lt; enumerationValues.length; i++) {                                         </span>
<span class="3518234982487844996" onmouseenter="enter('3518234982487844996');" onmouseout="out('3518234982487844996');" style=""> 300                 enumMap.put(enumerationValues[i][0], enumerationValues[i][1]);                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 301             }                                                                                            </span>
<span  style=""> 302                                                                                                          </span>
<span class="6553005935364150402" onmouseenter="enter('6553005935364150402');" onmouseout="out('6553005935364150402');" style=""> 303             fieldDTO.setValues(new JSONObject(enumMap).toString());                                      </span>
<span class="-5703564682837731123" onmouseenter="enter('-5703564682837731123');" onmouseout="out('-5703564682837731123');" style=""> 304         } else if (field.getFieldType().equals(&quot;ADDITIONAL_FOREIGN_KEY&quot;)) {                              </span>
<span class="4888432392511853941" onmouseenter="enter('4888432392511853941');" onmouseout="out('4888432392511853941');" style=""> 305             fieldDTO.setOperators(&quot;blcFilterOperators_Selectize&quot;);                                       </span>
<span class="5956593754221125403" onmouseenter="enter('5956593754221125403');" onmouseout="out('5956593754221125403');" style=""> 306             fieldDTO.setType(&quot;string&quot;);                                                                  </span>
<span  style=""> 307                                                                                                          </span>
<span class="-7218290231764700666" onmouseenter="enter('-7218290231764700666');" onmouseout="out('-7218290231764700666');" style=""><abbr title=" 308             AdminSection section = adminNavigationService.findAdminSectionByClassAndSectionId(fmd.getForeignKeyClass(), null);"> 308             AdminSection section = adminNavigationService.findAdminSectionByClassAndSectionId(fmd.getForeðŸ”µ</abbr></span>
<span class="2297837107111400660" onmouseenter="enter('2297837107111400660');" onmouseout="out('2297837107111400660');" style=""> 309             if (section != null) {                                                                       </span>
<span class="7209555309149439987" onmouseenter="enter('7209555309149439987');" onmouseout="out('7209555309149439987');" style=""> 310                 String sectionKey = section.getUrl().substring(1);                                       </span>
<span class="-1035532662553188661" onmouseenter="enter('-1035532662553188661');" onmouseout="out('-1035532662553188661');" style=""> 311                 fieldDTO.setSelectizeSectionKey(sectionKey);                                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 312             } else {                                                                                     </span>
<span class="-1256248398739173538" onmouseenter="enter('-1256248398739173538');" onmouseout="out('-1256248398739173538');" style=""> 313                 fieldDTO.setSelectizeSectionKey(fmd.getForeignKeyClass());                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 314             }                                                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 315         } else {                                                                                         </span>
<span class="8880270445034694758" onmouseenter="enter('8880270445034694758');" onmouseout="out('8880270445034694758');" style=""> 316             fieldDTO.setOperators(&quot;blcFilterOperators_Text&quot;);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 317         }                                                                                                </span>
<span  style=""> 318                                                                                                          </span>
<span class="1806966708924182038" onmouseenter="enter('1806966708924182038');" onmouseout="out('1806966708924182038');" style=""> 319         return fieldDTO;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 320     }                                                                                                    </span>
<span  style=""> 321                                                                                                          </span>
<span class="2032004802479742635" onmouseenter="enter('2032004802479742635');" onmouseout="out('2032004802479742635');" style=""> 322     protected Field createHeaderField(Property p, BasicFieldMetadata fmd) {                              </span>
<span class="427159967034734869" onmouseenter="enter('427159967034734869');" onmouseout="out('427159967034734869');" style=""> 323         Field hf;                                                                                        </span>
<span class="-6909671090697516708" onmouseenter="enter('-6909671090697516708');" onmouseout="out('-6909671090697516708');" style=""> 324         if (fmd.getFieldType().equals(SupportedFieldType.EXPLICIT_ENUMERATION) ||                        </span>
<span class="7742695259499854892" onmouseenter="enter('7742695259499854892');" onmouseout="out('7742695259499854892');" style=""> 325                 fmd.getFieldType().equals(SupportedFieldType.BROADLEAF_ENUMERATION) ||                   </span>
<span class="-7610412024039368203" onmouseenter="enter('-7610412024039368203');" onmouseout="out('-7610412024039368203');" style=""> 326                 fmd.getFieldType().equals(SupportedFieldType.DATA_DRIVEN_ENUMERATION) ||                 </span>
<span class="4727590924096529195" onmouseenter="enter('4727590924096529195');" onmouseout="out('4727590924096529195');" style=""> 327                 fmd.getFieldType().equals(SupportedFieldType.EMPTY_ENUMERATION)) {                       </span>
<span class="-4376407603411664672" onmouseenter="enter('-4376407603411664672');" onmouseout="out('-4376407603411664672');" style=""> 328             hf = new ComboField();                                                                       </span>
<span class="5290847828500288961" onmouseenter="enter('5290847828500288961');" onmouseout="out('5290847828500288961');" style=""> 329             ((ComboField) hf).setOptions(fmd.getEnumerationValues());                                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 330         } else {                                                                                         </span>
<span class="5244670954290190768" onmouseenter="enter('5244670954290190768');" onmouseout="out('5244670954290190768');" style=""> 331             hf = new Field();                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 332         }                                                                                                </span>
<span  style=""> 333                                                                                                          </span>
<span class="-8016020800600825313" onmouseenter="enter('-8016020800600825313');" onmouseout="out('-8016020800600825313');" style=""> 334         hf.withName(p.getName())                                                                         </span>
<span class="-6196212150372307342" onmouseenter="enter('-6196212150372307342');" onmouseout="out('-6196212150372307342');" style=""><abbr title=" 335           .withFriendlyName(StringUtils.isNotEmpty(fmd.getFriendlyName()) ? fmd.getFriendlyName() : p.getName())"> 335           .withFriendlyName(StringUtils.isNotEmpty(fmd.getFriendlyName()) ? fmd.getFriendlyName() : p.getðŸ”µ</abbr></span>
<span class="-8419553007953225668" onmouseenter="enter('-8419553007953225668');" onmouseout="out('-8419553007953225668');" style=""> 336           .withOrder(fmd.getGridOrder())                                                                 </span>
<span class="1117956679003990491" onmouseenter="enter('1117956679003990491');" onmouseout="out('1117956679003990491');" style=""> 337           .withColumnWidth(fmd.getColumnWidth())                                                         </span>
<span class="3058247827263925638" onmouseenter="enter('3058247827263925638');" onmouseout="out('3058247827263925638');" style=""> 338           .withForeignKeyDisplayValueProperty(fmd.getForeignKeyDisplayValueProperty())                   </span>
<span class="3198496511046166958" onmouseenter="enter('3198496511046166958');" onmouseout="out('3198496511046166958');" style=""> 339           .withForeignKeyClass(fmd.getForeignKeyClass())                                                 </span>
<span class="-2338070414188990290" onmouseenter="enter('-2338070414188990290');" onmouseout="out('-2338070414188990290');" style=""> 340           .withForeignKeySectionPath(getAdminSectionPath(fmd.getForeignKeyClass()))                      </span>
<span class="6217223457568112539" onmouseenter="enter('6217223457568112539');" onmouseout="out('6217223457568112539');" style=""><abbr title=" 341           .withOwningEntityClass(fmd.getOwningClass() != null ? fmd.getOwningClass() : fmd.getTargetClass())"> 341           .withOwningEntityClass(fmd.getOwningClass() != null ? fmd.getOwningClass() : fmd.getTargetClassðŸ”µ</abbr></span>
<span class="-5416800581554261750" onmouseenter="enter('-5416800581554261750');" onmouseout="out('-5416800581554261750');" style=""> 342           .withCanLinkToExternalEntity(fmd.getCanLinkToExternalEntity());                                </span>
<span class="5921747215124261866" onmouseenter="enter('5921747215124261866');" onmouseout="out('5921747215124261866');" style=""> 343         String fieldType = fmd.getFieldType() == null ? null : fmd.getFieldType().toString();            </span>
<span class="6628044949969244118" onmouseenter="enter('6628044949969244118');" onmouseout="out('6628044949969244118');" style=""> 344         hf.setFieldType(fieldType);                                                                      </span>
<span  style=""> 345                                                                                                          </span>
<span class="-6552084929958187472" onmouseenter="enter('-6552084929958187472');" onmouseout="out('-6552084929958187472');" style=""> 346         return hf;                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 347     }                                                                                                    </span>
<span  style=""> 348                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 349     @Override                                                                                            </span>
<span class="-5402852713479232147" onmouseenter="enter('-5402852713479232147');" onmouseout="out('-5402852713479232147');" style=""><abbr title=" 350     public ListGrid buildCollectionListGrid(String containingEntityId, DynamicResultSet drs, Property field,"> 350     public ListGrid buildCollectionListGrid(String containingEntityId, DynamicResultSet drs, Property fieðŸ”µ</abbr></span>
<span class="8976903068062443392" onmouseenter="enter('8976903068062443392');" onmouseout="out('8976903068062443392');" style=""> 351             String sectionKey, List&lt;SectionCrumb&gt; sectionCrumbs)                                         </span>
<span class="1998458335829271558" onmouseenter="enter('1998458335829271558');" onmouseout="out('1998458335829271558');" style=""> 352             throws ServiceException {                                                                    </span>
<span class="3501499603601527305" onmouseenter="enter('3501499603601527305');" onmouseout="out('3501499603601527305');" style=""> 353         FieldMetadata fmd = field.getMetadata();                                                         </span>
<span class="6565595844041240946" onmouseenter="enter('6565595844041240946');" onmouseout="out('6565595844041240946');" style=""> 354         // Get the class metadata for this particular field                                              </span>
<span class="-8834884127458938753" onmouseenter="enter('-8834884127458938753');" onmouseout="out('-8834884127458938753');" style=""> 355         PersistencePackageRequest ppr = PersistencePackageRequest.fromMetadata(fmd, sectionCrumbs);      </span>
<span class="-470699824173107204" onmouseenter="enter('-470699824173107204');" onmouseout="out('-470699824173107204');" style=""> 356         if (field != null) {                                                                             </span>
<span class="8971896145704334353" onmouseenter="enter('8971896145704334353');" onmouseout="out('8971896145704334353');" style=""> 357             ppr.setSectionEntityField(field.getName());                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 358         }                                                                                                </span>
<span class="1142804962458743647" onmouseenter="enter('1142804962458743647');" onmouseout="out('1142804962458743647');" style=""><abbr title=" 359         ClassMetadata cmd = adminEntityService.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();"> 359         ClassMetadata cmd = adminEntityService.getClassMetadata(ppr).getDynamicResultSet().getClassMetaDaðŸ”µ</abbr></span>
<span  style=""> 360                                                                                                          </span>
<span class="-7098425003691580554" onmouseenter="enter('-7098425003691580554');" onmouseout="out('-7098425003691580554');" style=""> 361         List&lt;Field&gt; headerFields = new ArrayList&lt;&gt;();                                                    </span>
<span class="-9156899327835473831" onmouseenter="enter('-9156899327835473831');" onmouseout="out('-9156899327835473831');" style=""> 362         ListGrid.Type type = null;                                                                       </span>
<span class="2210107579970549810" onmouseenter="enter('2210107579970549810');" onmouseout="out('2210107579970549810');" style=""> 363         boolean editable = false;                                                                        </span>
<span class="-5174966648729145523" onmouseenter="enter('-5174966648729145523');" onmouseout="out('-5174966648729145523');" style=""> 364         boolean sortable = false;                                                                        </span>
<span class="6635173913482908092" onmouseenter="enter('6635173913482908092');" onmouseout="out('6635173913482908092');" style=""> 365         boolean readOnly = false;                                                                        </span>
<span class="-239666301548818102" onmouseenter="enter('-239666301548818102');" onmouseout="out('-239666301548818102');" style=""> 366         boolean hideIdColumn = false;                                                                    </span>
<span class="-8650993504988805305" onmouseenter="enter('-8650993504988805305');" onmouseout="out('-8650993504988805305');" style=""> 367         boolean canFilterAndSort = true;                                                                 </span>
<span class="-2910642919012813708" onmouseenter="enter('-2910642919012813708');" onmouseout="out('-2910642919012813708');" style=""> 368         boolean modalSingleSelectable = false;                                                           </span>
<span class="-5712500441207558612" onmouseenter="enter('-5712500441207558612');" onmouseout="out('-5712500441207558612');" style=""> 369         boolean modalMultiSelectable = false;                                                            </span>
<span class="4919598248352463197" onmouseenter="enter('4919598248352463197');" onmouseout="out('4919598248352463197');" style=""> 370         boolean selectize = false;                                                                       </span>
<span class="3512909155182388697" onmouseenter="enter('3512909155182388697');" onmouseout="out('3512909155182388697');" style=""> 371         boolean isMedia = false;                                                                         </span>
<span class="-2503475837959180700" onmouseenter="enter('-2503475837959180700');" onmouseout="out('-2503475837959180700');" style=""> 372         boolean isLookup = false;                                                                        </span>
<span class="4230800067451301552" onmouseenter="enter('4230800067451301552');" onmouseout="out('4230800067451301552');" style=""> 373         String sortProperty = null;                                                                      </span>
<span class="1914895525805456392" onmouseenter="enter('1914895525805456392');" onmouseout="out('1914895525805456392');" style=""> 374         FieldWrapper wrapper = new FieldWrapper();                                                       </span>
<span class="519132227955412437" onmouseenter="enter('519132227955412437');" onmouseout="out('519132227955412437');" style=""> 375         ArrayList&lt;FieldDTO&gt; defaultWrapperFields = new ArrayList&lt;&gt;();                                    </span>
<span  style=""> 376                                                                                                          </span>
<span  style=""> 377                                                                                                          </span>
<span class="-2507165338472177227" onmouseenter="enter('-2507165338472177227');" onmouseout="out('-2507165338472177227');" style=""> 378         String idProperty = &quot;id&quot;;                                                                        </span>
<span class="-3497335608114491506" onmouseenter="enter('-3497335608114491506');" onmouseout="out('-3497335608114491506');" style=""> 379         for (Property property : cmd.getProperties()) {                                                  </span>
<span class="8031432354977321026" onmouseenter="enter('8031432354977321026');" onmouseout="out('8031432354977321026');" style=""> 380             if (property.getMetadata() instanceof BasicFieldMetadata &amp;&amp;                                  </span>
<span class="-5839489581778150379" onmouseenter="enter('-5839489581778150379');" onmouseout="out('-5839489581778150379');" style=""><abbr title=" 381                     SupportedFieldType.ID==((BasicFieldMetadata) property.getMetadata()).getFieldType() &amp;&amp;"> 381                     SupportedFieldType.ID==((BasicFieldMetadata) property.getMetadata()).getFieldType() &amp;ðŸ”µ</abbr></span>
<span class="493640064601793810" onmouseenter="enter('493640064601793810');" onmouseout="out('493640064601793810');" style=""> 382                     //make sure it&#x27;s a property for this entity - not an association                     </span>
<span class="1409226213228097655" onmouseenter="enter('1409226213228097655');" onmouseout="out('1409226213228097655');" style=""> 383                     !property.getName().contains(&quot;.&quot;)) {                                                 </span>
<span class="2195830063219251158" onmouseenter="enter('2195830063219251158');" onmouseout="out('2195830063219251158');" style=""> 384                 idProperty = property.getName();                                                         </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 385                 break;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 386             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 387         }                                                                                                </span>
<span class="6884921877918156743" onmouseenter="enter('6884921877918156743');" onmouseout="out('6884921877918156743');" style=""><abbr title=" 388         // Get the header fields for this list grid. Note that the header fields are different depending on the"> 388         // Get the header fields for this list grid. Note that the header fields are different depending ðŸ”µ</abbr></span>
<span class="-3735179050749022362" onmouseenter="enter('-3735179050749022362');" onmouseout="out('-3735179050749022362');" style=""> 389         // kind of field this is.                                                                        </span>
<span class="9198797156358178451" onmouseenter="enter('9198797156358178451');" onmouseout="out('9198797156358178451');" style=""> 390         if (fmd instanceof BasicFieldMetadata) {                                                         </span>
<span class="6405821464206093762" onmouseenter="enter('6405821464206093762');" onmouseout="out('6405821464206093762');" style=""> 391             readOnly = ((BasicFieldMetadata) fmd).getReadOnly();                                         </span>
<span class="-1800504749677095068" onmouseenter="enter('-1800504749677095068');" onmouseout="out('-1800504749677095068');" style=""> 392             modalSingleSelectable = true;                                                                </span>
<span class="3681854507729164346" onmouseenter="enter('3681854507729164346');" onmouseout="out('3681854507729164346');" style=""> 393             for (Property p : cmd.getProperties()) {                                                     </span>
<span class="-1029066852878262358" onmouseenter="enter('-1029066852878262358');" onmouseout="out('-1029066852878262358');" style=""> 394                 if (p.getMetadata() instanceof BasicFieldMetadata) {                                     </span>
<span class="-941768582779766785" onmouseenter="enter('-941768582779766785');" onmouseout="out('-941768582779766785');" style=""> 395                     BasicFieldMetadata md = (BasicFieldMetadata) p.getMetadata();                        </span>
<span  style=""> 396                                                                                                          </span>
<span class="-5406944276814759650" onmouseenter="enter('-5406944276814759650');" onmouseout="out('-5406944276814759650');" style=""> 397                     if (SupportedFieldType.ID.equals(md.getFieldType())) {                               </span>
<span class="4761882765386854544" onmouseenter="enter('4761882765386854544');" onmouseout="out('4761882765386854544');" style=""> 398                         idProperty = md.getName();                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 399                     }                                                                                    </span>
<span  style=""> 400                                                                                                          </span>
<span class="-3346338779761665081" onmouseenter="enter('-3346338779761665081');" onmouseout="out('-3346338779761665081');" style=""> 401                     if (md.isProminent() != null &amp;&amp; md.isProminent()                                     </span>
<span class="-8627428290755725902" onmouseenter="enter('-8627428290755725902');" onmouseout="out('-8627428290755725902');" style=""> 402                             &amp;&amp; !ArrayUtils.contains(getGridHiddenVisibilities(), md.getVisibility())) {  </span>
<span class="-1913804071468350989" onmouseenter="enter('-1913804071468350989');" onmouseout="out('-1913804071468350989');" style=""> 403                         Field hf = createHeaderField(p, md);                                             </span>
<span class="465504053416102059" onmouseenter="enter('465504053416102059');" onmouseout="out('465504053416102059');" style=""> 404                         headerFields.add(hf);                                                            </span>
<span class="1435471691691453270" onmouseenter="enter('1435471691691453270');" onmouseout="out('1435471691691453270');" style=""> 405                         defaultWrapperFields.add(constructFieldDTOFromFieldData(hf, md));                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 406                     }                                                                                    </span>
<span  style=""> 407                                                                                                          </span>
<span class="2885325040802931258" onmouseenter="enter('2885325040802931258');" onmouseout="out('2885325040802931258');" style=""> 408                     if (md.getIsFilter() != null &amp;&amp; md.getIsFilter()) {                                  </span>
<span class="6602106188311855247" onmouseenter="enter('6602106188311855247');" onmouseout="out('6602106188311855247');" style=""> 409                         Field f = createHeaderField(p, md);                                              </span>
<span class="-6869394336056843666" onmouseenter="enter('-6869394336056843666');" onmouseout="out('-6869394336056843666');" style=""> 410                         wrapper.getFields().add(constructFieldDTOFromFieldData(f, md));                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 411                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 412                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 413             }                                                                                            </span>
<span  style=""> 414                                                                                                          </span>
<span class="6210556782412808449" onmouseenter="enter('6210556782412808449');" onmouseout="out('6210556782412808449');" style=""> 415             type = ListGrid.Type.TO_ONE;                                                                 </span>
<span class="-1553716655191536539" onmouseenter="enter('-1553716655191536539');" onmouseout="out('-1553716655191536539');" style=""> 416         } else if (fmd instanceof BasicCollectionMetadata) {                                             </span>
<span class="-8775784672799201545" onmouseenter="enter('-8775784672799201545');" onmouseout="out('-8775784672799201545');" style=""> 417             BasicCollectionMetadata bcm = (BasicCollectionMetadata) fmd;                                 </span>
<span class="3088375959257191151" onmouseenter="enter('3088375959257191151');" onmouseout="out('3088375959257191151');" style=""> 418             readOnly = !bcm.isMutable();                                                                 </span>
<span  style=""> 419                                                                                                          </span>
<span class="-7423610773734855911" onmouseenter="enter('-7423610773734855911');" onmouseout="out('-7423610773734855911');" style=""> 420             if(AddMethodType.LOOKUP.equals(bcm.getAddMethodType())) {                                    </span>
<span class="394788880007387168" onmouseenter="enter('394788880007387168');" onmouseout="out('394788880007387168');" style=""> 421                 isLookup = true;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 422             }                                                                                            </span>
<span  style=""> 423                                                                                                          </span>
<span class="-8334523343019219245" onmouseenter="enter('-8334523343019219245');" onmouseout="out('-8334523343019219245');" style=""> 424             if (AddMethodType.SELECTIZE_LOOKUP.equals(bcm.getAddMethodType())) {                         </span>
<span class="-7023171196031834591" onmouseenter="enter('-7023171196031834591');" onmouseout="out('-7023171196031834591');" style=""> 425                 Property p = cmd.getPMap().get(bcm.getSelectizeVisibleField());                          </span>
<span class="-4724213940983805674" onmouseenter="enter('-4724213940983805674');" onmouseout="out('-4724213940983805674');" style=""> 426                 if (p != null) {                                                                         </span>
<span class="-941768582779766785" onmouseenter="enter('-941768582779766785');" onmouseout="out('-941768582779766785');" style=""> 427                     BasicFieldMetadata md = (BasicFieldMetadata) p.getMetadata();                        </span>
<span  style=""> 428                                                                                                          </span>
<span class="-1913804071468350989" onmouseenter="enter('-1913804071468350989');" onmouseout="out('-1913804071468350989');" style=""> 429                     Field hf = createHeaderField(p, md);                                                 </span>
<span class="465504053416102059" onmouseenter="enter('465504053416102059');" onmouseout="out('465504053416102059');" style=""> 430                     headerFields.add(hf);                                                                </span>
<span class="4412272633078565706" onmouseenter="enter('4412272633078565706');" onmouseout="out('4412272633078565706');" style=""> 431                     wrapper.getFields().add(constructFieldDTOFromFieldData(hf, md));                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 432                 }                                                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 433             } else {                                                                                     </span>
<span class="3681854507729164346" onmouseenter="enter('3681854507729164346');" onmouseout="out('3681854507729164346');" style=""> 434                 for (Property p : cmd.getProperties()) {                                                 </span>
<span class="-1029066852878262358" onmouseenter="enter('-1029066852878262358');" onmouseout="out('-1029066852878262358');" style=""> 435                     if (p.getMetadata() instanceof BasicFieldMetadata) {                                 </span>
<span class="-941768582779766785" onmouseenter="enter('-941768582779766785');" onmouseout="out('-941768582779766785');" style=""> 436                         BasicFieldMetadata md = (BasicFieldMetadata) p.getMetadata();                    </span>
<span class="-3346338779761665081" onmouseenter="enter('-3346338779761665081');" onmouseout="out('-3346338779761665081');" style=""> 437                         if (md.isProminent() != null &amp;&amp; md.isProminent()                                 </span>
<span class="-8627428290755725902" onmouseenter="enter('-8627428290755725902');" onmouseout="out('-8627428290755725902');" style=""><abbr title=" 438                                 &amp;&amp; !ArrayUtils.contains(getGridHiddenVisibilities(), md.getVisibility())) {"> 438                                 &amp;&amp; !ArrayUtils.contains(getGridHiddenVisibilities(), md.getVisibility()))ðŸ”µ</abbr></span>
<span class="-1913804071468350989" onmouseenter="enter('-1913804071468350989');" onmouseout="out('-1913804071468350989');" style=""> 439                             Field hf = createHeaderField(p, md);                                         </span>
<span class="465504053416102059" onmouseenter="enter('465504053416102059');" onmouseout="out('465504053416102059');" style=""> 440                             headerFields.add(hf);                                                        </span>
<span class="1435471691691453270" onmouseenter="enter('1435471691691453270');" onmouseout="out('1435471691691453270');" style=""> 441                             defaultWrapperFields.add(constructFieldDTOFromFieldData(hf, md));            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 442                         }                                                                                </span>
<span  style=""> 443                                                                                                          </span>
<span class="2885325040802931258" onmouseenter="enter('2885325040802931258');" onmouseout="out('2885325040802931258');" style=""> 444                         if (md.getIsFilter() != null &amp;&amp; md.getIsFilter()) {                              </span>
<span class="6602106188311855247" onmouseenter="enter('6602106188311855247');" onmouseout="out('6602106188311855247');" style=""> 445                             Field f = createHeaderField(p, md);                                          </span>
<span class="-6869394336056843666" onmouseenter="enter('-6869394336056843666');" onmouseout="out('-6869394336056843666');" style=""> 446                             wrapper.getFields().add(constructFieldDTOFromFieldData(f, md));              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 447                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 448                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 449                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 450             }                                                                                            </span>
<span  style=""> 451                                                                                                          </span>
<span class="5616863682741119985" onmouseenter="enter('5616863682741119985');" onmouseout="out('5616863682741119985');" style=""> 452             type = ListGrid.Type.BASIC;                                                                  </span>
<span  style=""> 453                                                                                                          </span>
<span class="4789284002623142077" onmouseenter="enter('4789284002623142077');" onmouseout="out('4789284002623142077');" style=""><abbr title=" 454             if (AddMethodType.PERSIST.equals(bcm.getAddMethodType()) || AddMethodType.PERSIST_EMPTY.equals(bcm.getAddMethodType())) {"> 454             if (AddMethodType.PERSIST.equals(bcm.getAddMethodType()) || AddMethodType.PERSIST_EMPTY.equalðŸ”µ</abbr></span>
<span class="-5907191702643786371" onmouseenter="enter('-5907191702643786371');" onmouseout="out('-5907191702643786371');" style=""> 455                 editable = true;                                                                         </span>
<span class="-3279362726035609266" onmouseenter="enter('-3279362726035609266');" onmouseout="out('-3279362726035609266');" style=""> 456             } else if (AddMethodType.SELECTIZE_LOOKUP.equals(bcm.getAddMethodType())) {                  </span>
<span class="7652343580882391271" onmouseenter="enter('7652343580882391271');" onmouseout="out('7652343580882391271');" style=""> 457                 selectize = true;                                                                        </span>
<span class="-1800504749677095068" onmouseenter="enter('-1800504749677095068');" onmouseout="out('-1800504749677095068');" style=""> 458                 modalSingleSelectable = true;                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 459             } else {                                                                                     </span>
<span class="-1800504749677095068" onmouseenter="enter('-1800504749677095068');" onmouseout="out('-1800504749677095068');" style=""> 460                 modalSingleSelectable = true;                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 461             }                                                                                            </span>
<span class="-5601810365028455374" onmouseenter="enter('-5601810365028455374');" onmouseout="out('-5601810365028455374');" style=""> 462             sortable = StringUtils.isNotBlank(bcm.getSortProperty());                                    </span>
<span class="5410259152944409683" onmouseenter="enter('5410259152944409683');" onmouseout="out('5410259152944409683');" style=""> 463             if (sortable) {                                                                              </span>
<span class="5401130852877516905" onmouseenter="enter('5401130852877516905');" onmouseout="out('5401130852877516905');" style=""> 464                 sortProperty = bcm.getSortProperty();                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 465             }                                                                                            </span>
<span class="-242736616410190546" onmouseenter="enter('-242736616410190546');" onmouseout="out('-242736616410190546');" style=""> 466         } else if (fmd instanceof AdornedTargetCollectionMetadata) {                                     </span>
<span class="-1800504749677095068" onmouseenter="enter('-1800504749677095068');" onmouseout="out('-1800504749677095068');" style=""> 467             modalSingleSelectable = true;                                                                </span>
<span class="8372678663626684591" onmouseenter="enter('8372678663626684591');" onmouseout="out('8372678663626684591');" style=""> 468             readOnly = !((AdornedTargetCollectionMetadata) fmd).isMutable();                             </span>
<span class="5808828893872341029" onmouseenter="enter('5808828893872341029');" onmouseout="out('5808828893872341029');" style=""> 469             AdornedTargetCollectionMetadata atcmd = (AdornedTargetCollectionMetadata) fmd;               </span>
<span  style=""> 470                                                                                                          </span>
<span class="-8744153650676911691" onmouseenter="enter('-8744153650676911691');" onmouseout="out('-8744153650676911691');" style=""> 471             if(AdornedTargetAddMethodType.LOOKUP.equals(atcmd.getAdornedTargetAddMethodType())) {        </span>
<span class="394788880007387168" onmouseenter="enter('394788880007387168');" onmouseout="out('394788880007387168');" style=""> 472                 isLookup = true;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 473             }                                                                                            </span>
<span  style=""> 474                                                                                                          </span>
<span class="5256125016531832923" onmouseenter="enter('5256125016531832923');" onmouseout="out('5256125016531832923');" style=""><abbr title=" 475             if (AdornedTargetAddMethodType.SELECTIZE_LOOKUP.equals(atcmd.getAdornedTargetAddMethodType())) {"> 475             if (AdornedTargetAddMethodType.SELECTIZE_LOOKUP.equals(atcmd.getAdornedTargetAddMethodType())ðŸ”µ</abbr></span>
<span class="7652343580882391271" onmouseenter="enter('7652343580882391271');" onmouseout="out('7652343580882391271');" style=""> 476                 selectize = true;                                                                        </span>
<span  style=""> 477                                                                                                          </span>
<span class="6698696772959199393" onmouseenter="enter('6698696772959199393');" onmouseout="out('6698696772959199393');" style=""> 478                 Property p = cmd.getPMap().get(atcmd.getSelectizeVisibleField());                        </span>
<span class="-4724213940983805674" onmouseenter="enter('-4724213940983805674');" onmouseout="out('-4724213940983805674');" style=""> 479                 if (p != null) {                                                                         </span>
<span class="-941768582779766785" onmouseenter="enter('-941768582779766785');" onmouseout="out('-941768582779766785');" style=""> 480                     BasicFieldMetadata md = (BasicFieldMetadata) p.getMetadata();                        </span>
<span  style=""> 481                                                                                                          </span>
<span class="-1913804071468350989" onmouseenter="enter('-1913804071468350989');" onmouseout="out('-1913804071468350989');" style=""> 482                     Field hf = createHeaderField(p, md);                                                 </span>
<span class="465504053416102059" onmouseenter="enter('465504053416102059');" onmouseout="out('465504053416102059');" style=""> 483                     headerFields.add(hf);                                                                </span>
<span class="4412272633078565706" onmouseenter="enter('4412272633078565706');" onmouseout="out('4412272633078565706');" style=""> 484                     wrapper.getFields().add(constructFieldDTOFromFieldData(hf, md));                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 485                 }                                                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 486             } else {                                                                                     </span>
<span class="7815744478908232711" onmouseenter="enter('7815744478908232711');" onmouseout="out('7815744478908232711');" style=""> 487                 for (String fieldName : atcmd.getGridVisibleFields()) {                                  </span>
<span class="6577951603357424858" onmouseenter="enter('6577951603357424858');" onmouseout="out('6577951603357424858');" style=""> 488                     Property p = cmd.getPMap().get(fieldName);                                           </span>
<span class="-4724213940983805674" onmouseenter="enter('-4724213940983805674');" onmouseout="out('-4724213940983805674');" style=""> 489                     if (p != null) {                                                                     </span>
<span class="-941768582779766785" onmouseenter="enter('-941768582779766785');" onmouseout="out('-941768582779766785');" style=""> 490                         BasicFieldMetadata md = (BasicFieldMetadata) p.getMetadata();                    </span>
<span  style=""> 491                                                                                                          </span>
<span class="-1913804071468350989" onmouseenter="enter('-1913804071468350989');" onmouseout="out('-1913804071468350989');" style=""> 492                         Field hf = createHeaderField(p, md);                                             </span>
<span class="465504053416102059" onmouseenter="enter('465504053416102059');" onmouseout="out('465504053416102059');" style=""> 493                         headerFields.add(hf);                                                            </span>
<span class="4412272633078565706" onmouseenter="enter('4412272633078565706');" onmouseout="out('4412272633078565706');" style=""> 494                         wrapper.getFields().add(constructFieldDTOFromFieldData(hf, md));                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 495                     }                                                                                    </span>
<span  style=""> 496                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 497                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 498             }                                                                                            </span>
<span  style=""> 499                                                                                                          </span>
<span class="9155103560587761905" onmouseenter="enter('9155103560587761905');" onmouseout="out('9155103560587761905');" style=""> 500             type = ListGrid.Type.ADORNED;                                                                </span>
<span  style=""> 501                                                                                                          </span>
<span class="6020748960132993219" onmouseenter="enter('6020748960132993219');" onmouseout="out('6020748960132993219');" style=""> 502             if (atcmd.getMaintainedAdornedTargetFields().length &gt; 0) {                                   </span>
<span class="-5907191702643786371" onmouseenter="enter('-5907191702643786371');" onmouseout="out('-5907191702643786371');" style=""> 503                 editable = true;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 504             }                                                                                            </span>
<span  style=""> 505                                                                                                          </span>
<span class="5921221796736617807" onmouseenter="enter('5921221796736617807');" onmouseout="out('5921221796736617807');" style=""> 506             AdornedTargetList adornedList = (AdornedTargetList) atcmd.getPersistencePerspective()        </span>
<span class="551023238709431279" onmouseenter="enter('551023238709431279');" onmouseout="out('551023238709431279');" style=""><abbr title=" 507                     .getPersistencePerspectiveItems().get(PersistencePerspectiveItemType.ADORNEDTARGETLIST);"> 507                     .getPersistencePerspectiveItems().get(PersistencePerspectiveItemType.ADORNEDTARGETLISðŸ”µ</abbr></span>
<span class="-3485770976150587717" onmouseenter="enter('-3485770976150587717');" onmouseout="out('-3485770976150587717');" style=""> 508             sortable = StringUtils.isNotBlank(adornedList.getSortField());                               </span>
<span class="5410259152944409683" onmouseenter="enter('5410259152944409683');" onmouseout="out('5410259152944409683');" style=""> 509             if (sortable) {                                                                              </span>
<span class="-4257122370377854741" onmouseenter="enter('-4257122370377854741');" onmouseout="out('-4257122370377854741');" style=""> 510                 sortProperty = adornedList.getSortField();                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 511             }                                                                                            </span>
<span class="-2779851479168607918" onmouseenter="enter('-2779851479168607918');" onmouseout="out('-2779851479168607918');" style=""> 512         } else if (fmd instanceof MapMetadata) {                                                         </span>
<span class="-579137610819846940" onmouseenter="enter('-579137610819846940');" onmouseout="out('-579137610819846940');" style=""> 513             readOnly = !((MapMetadata) fmd).isMutable();                                                 </span>
<span class="4906504520834467748" onmouseenter="enter('4906504520834467748');" onmouseout="out('4906504520834467748');" style=""> 514             MapMetadata mmd = (MapMetadata) fmd;                                                         </span>
<span  style=""> 515                                                                                                          </span>
<span class="8195378525472973548" onmouseenter="enter('8195378525472973548');" onmouseout="out('8195378525472973548');" style=""> 516             Property p2 = cmd.getPMap().get(&quot;key&quot;);                                                      </span>
<span class="8564668864688579354" onmouseenter="enter('8564668864688579354');" onmouseout="out('8564668864688579354');" style=""> 517             BasicFieldMetadata keyMd = (BasicFieldMetadata) p2.getMetadata();                            </span>
<span class="1816634897954632003" onmouseenter="enter('1816634897954632003');" onmouseout="out('1816634897954632003');" style=""> 518             keyMd.setFriendlyName(getMapKeyFriendlyName(p2));                                            </span>
<span class="2754310034023241051" onmouseenter="enter('2754310034023241051');" onmouseout="out('2754310034023241051');" style=""> 519             Field hf = createHeaderField(p2, keyMd);                                                     </span>
<span class="465504053416102059" onmouseenter="enter('465504053416102059');" onmouseout="out('465504053416102059');" style=""> 520             headerFields.add(hf);                                                                        </span>
<span class="-7053544519634906156" onmouseenter="enter('-7053544519634906156');" onmouseout="out('-7053544519634906156');" style=""> 521             wrapper.getFields().add(constructFieldDTOFromFieldData(hf, keyMd));                          </span>
<span  style=""> 522                                                                                                          </span>
<span class="5591331798883124479" onmouseenter="enter('5591331798883124479');" onmouseout="out('5591331798883124479');" style=""> 523             if (mmd.isSimpleValue()) {                                                                   </span>
<span class="4182323386511173091" onmouseenter="enter('4182323386511173091');" onmouseout="out('4182323386511173091');" style=""> 524                 Property valueProperty = cmd.getPMap().get(&quot;value&quot;);                                     </span>
<span class="-6095977990841346888" onmouseenter="enter('-6095977990841346888');" onmouseout="out('-6095977990841346888');" style=""> 525                 BasicFieldMetadata valueMd = (BasicFieldMetadata) valueProperty.getMetadata();           </span>
<span class="-3484742708607220925" onmouseenter="enter('-3484742708607220925');" onmouseout="out('-3484742708607220925');" style=""> 526                 valueMd.setFriendlyName(&quot;Value&quot;);                                                        </span>
<span class="4972432646543922921" onmouseenter="enter('4972432646543922921');" onmouseout="out('4972432646543922921');" style=""> 527                 hf = createHeaderField(valueProperty, valueMd);                                          </span>
<span class="465504053416102059" onmouseenter="enter('465504053416102059');" onmouseout="out('465504053416102059');" style=""> 528                 headerFields.add(hf);                                                                    </span>
<span class="-8637026344597097366" onmouseenter="enter('-8637026344597097366');" onmouseout="out('-8637026344597097366');" style=""> 529                 wrapper.getFields().add(constructFieldDTOFromFieldData(hf, valueMd));                    </span>
<span  style=""> 530                                                                                                          </span>
<span class="-4161155795101164165" onmouseenter="enter('-4161155795101164165');" onmouseout="out('-4161155795101164165');" style=""> 531                 idProperty = &quot;key&quot;;                                                                      </span>
<span class="6613126032600711146" onmouseenter="enter('6613126032600711146');" onmouseout="out('6613126032600711146');" style=""> 532                 hideIdColumn = true;                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 533             } else {                                                                                     </span>
<span class="3681854507729164346" onmouseenter="enter('3681854507729164346');" onmouseout="out('3681854507729164346');" style=""> 534                 for (Property p : cmd.getProperties()) {                                                 </span>
<span class="-1029066852878262358" onmouseenter="enter('-1029066852878262358');" onmouseout="out('-1029066852878262358');" style=""> 535                     if (p.getMetadata() instanceof BasicFieldMetadata) {                                 </span>
<span class="-941768582779766785" onmouseenter="enter('-941768582779766785');" onmouseout="out('-941768582779766785');" style=""> 536                         BasicFieldMetadata md = (BasicFieldMetadata) p.getMetadata();                    </span>
<span class="-8642867949481309577" onmouseenter="enter('-8642867949481309577');" onmouseout="out('-8642867949481309577');" style=""> 537                         String valueClassName = mmd.getValueClassName();                                 </span>
<span class="5979911607115189688" onmouseenter="enter('5979911607115189688');" onmouseout="out('5979911607115189688');" style=""> 538                         if (!StringUtils.isEmpty(mmd.getToOneTargetProperty())) {                        </span>
<span class="-1482207026423407472" onmouseenter="enter('-1482207026423407472');" onmouseout="out('-1482207026423407472');" style=""> 539                             Class&lt;?&gt; clazz;                                                              </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 540                             try {                                                                        </span>
<span class="4641764173848337901" onmouseenter="enter('4641764173848337901');" onmouseout="out('4641764173848337901');" style=""> 541                                 clazz = Class.forName(mmd.getValueClassName());                          </span>
<span class="1054888787890391626" onmouseenter="enter('1054888787890391626');" onmouseout="out('1054888787890391626');" style=""> 542                             } catch (ClassNotFoundException e) {                                         </span>
<span class="-1035238313469204420" onmouseenter="enter('-1035238313469204420');" onmouseout="out('-1035238313469204420');" style=""> 543                                 throw ExceptionHelper.refineException(e);                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 544                             }                                                                            </span>
<span class="-1735437066010488223" onmouseenter="enter('-1735437066010488223');" onmouseout="out('-1735437066010488223');" style=""><abbr title=" 545                             java.lang.reflect.Field nestedField = FieldManager.getSingleField(clazz, mmd.getToOneTargetProperty());"> 545                             java.lang.reflect.Field nestedField = FieldManager.getSingleField(clazz, mmd.ðŸ”µ</abbr></span>
<span class="-7513153605302333321" onmouseenter="enter('-7513153605302333321');" onmouseout="out('-7513153605302333321');" style=""> 546                             ManyToOne manyToOne = nestedField.getAnnotation(ManyToOne.class);            </span>
<span class="3426777525282342717" onmouseenter="enter('3426777525282342717');" onmouseout="out('3426777525282342717');" style=""><abbr title=" 547                             if (manyToOne != null &amp;&amp; !manyToOne.targetEntity().getName().equals(void.class.getName())) {"> 547                             if (manyToOne != null &amp;&amp; !manyToOne.targetEntity().getName().equals(void.clasðŸ”µ</abbr></span>
<span class="2472701616060797628" onmouseenter="enter('2472701616060797628');" onmouseout="out('2472701616060797628');" style=""> 548                                 valueClassName = manyToOne.targetEntity().getName();                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 549                             } else {                                                                     </span>
<span class="7605310444155773026" onmouseenter="enter('7605310444155773026');" onmouseout="out('7605310444155773026');" style=""> 550                                 OneToOne oneToOne = nestedField.getAnnotation(OneToOne.class);           </span>
<span class="6473385945565798584" onmouseenter="enter('6473385945565798584');" onmouseout="out('6473385945565798584');" style=""><abbr title=" 551                                 if (oneToOne != null &amp;&amp; !oneToOne.targetEntity().getName().equals(void.class.getName())) {"> 551                                 if (oneToOne != null &amp;&amp; !oneToOne.targetEntity().getName().equals(void.clðŸ”µ</abbr></span>
<span class="-7479915108694096025" onmouseenter="enter('-7479915108694096025');" onmouseout="out('-7479915108694096025');" style=""> 552                                     valueClassName = oneToOne.targetEntity().getName();                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 553                                 }                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 554                             }                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 555                         }                                                                                </span>
<span class="-5540922815730228658" onmouseenter="enter('-5540922815730228658');" onmouseout="out('-5540922815730228658');" style=""> 556                         if (md.getTargetClass().equals(valueClassName)) {                                </span>
<span class="-3346338779761665081" onmouseenter="enter('-3346338779761665081');" onmouseout="out('-3346338779761665081');" style=""> 557                             if (md.isProminent() != null &amp;&amp; md.isProminent()                             </span>
<span class="-8627428290755725902" onmouseenter="enter('-8627428290755725902');" onmouseout="out('-8627428290755725902');" style=""><abbr title=" 558                                     &amp;&amp; !ArrayUtils.contains(getGridHiddenVisibilities(), md.getVisibility())) {"> 558                                     &amp;&amp; !ArrayUtils.contains(getGridHiddenVisibilities(), md.getVisibilityðŸ”µ</abbr></span>
<span class="8960496946946728749" onmouseenter="enter('8960496946946728749');" onmouseout="out('8960496946946728749');" style=""> 559                                 hf = createHeaderField(p, md);                                           </span>
<span class="465504053416102059" onmouseenter="enter('465504053416102059');" onmouseout="out('465504053416102059');" style=""> 560                                 headerFields.add(hf);                                                    </span>
<span class="1435471691691453270" onmouseenter="enter('1435471691691453270');" onmouseout="out('1435471691691453270');" style=""> 561                                 defaultWrapperFields.add(constructFieldDTOFromFieldData(hf, md));        </span>
<span  style=""> 562                                                                                                          </span>
<span class="-5289673653677501347" onmouseenter="enter('-5289673653677501347');" onmouseout="out('-5289673653677501347');" style=""> 563                                 // Is this a media listgrid                                              </span>
<span class="4853086335987625590" onmouseenter="enter('4853086335987625590');" onmouseout="out('4853086335987625590');" style=""> 564                                 if (hf.getFieldType().equals(&quot;ASSET_LOOKUP&quot;)) {                          </span>
<span class="-8476912243297643828" onmouseenter="enter('-8476912243297643828');" onmouseout="out('-8476912243297643828');" style=""> 565                                     isMedia = true;                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 566                                 }                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 567                             }                                                                            </span>
<span  style=""> 568                                                                                                          </span>
<span class="2885325040802931258" onmouseenter="enter('2885325040802931258');" onmouseout="out('2885325040802931258');" style=""> 569                             if (md.getIsFilter() != null &amp;&amp; md.getIsFilter()) {                          </span>
<span class="1044073206381351305" onmouseenter="enter('1044073206381351305');" onmouseout="out('1044073206381351305');" style=""> 570                                 wrapper.getFields().add(constructFieldDTOFromFieldData(hf,md));          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 571                             }                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 572                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 573                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 574                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 575             }                                                                                            </span>
<span  style=""> 576                                                                                                          </span>
<span class="1402378997093770695" onmouseenter="enter('1402378997093770695');" onmouseout="out('1402378997093770695');" style=""> 577             type = ListGrid.Type.MAP;                                                                    </span>
<span class="-5907191702643786371" onmouseenter="enter('-5907191702643786371');" onmouseout="out('-5907191702643786371');" style=""> 578             editable = true;                                                                             </span>
<span class="8307590133204211823" onmouseenter="enter('8307590133204211823');" onmouseout="out('8307590133204211823');" style=""> 579             canFilterAndSort = false;                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 580         }                                                                                                </span>
<span  style=""> 581                                                                                                          </span>
<span class="4544421216027686155" onmouseenter="enter('4544421216027686155');" onmouseout="out('4544421216027686155');" style=""> 582         String ceilingType = &quot;&quot;;                                                                         </span>
<span class="9198797156358178451" onmouseenter="enter('9198797156358178451');" onmouseout="out('9198797156358178451');" style=""> 583         if (fmd instanceof BasicFieldMetadata) {                                                         </span>
<span class="7794440236473789134" onmouseenter="enter('7794440236473789134');" onmouseout="out('7794440236473789134');" style=""> 584             ceilingType = cmd.getCeilingType();                                                          </span>
<span class="3746105937327671455" onmouseenter="enter('3746105937327671455');" onmouseout="out('3746105937327671455');" style=""> 585         } else if (fmd instanceof CollectionMetadata) {                                                  </span>
<span class="958831769715126463" onmouseenter="enter('958831769715126463');" onmouseout="out('958831769715126463');" style=""> 586             ceilingType = ((CollectionMetadata) fmd).getCollectionCeilingEntity();                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 587         }                                                                                                </span>
<span  style=""> 588                                                                                                          </span>
<span class="5585496722375029284" onmouseenter="enter('5585496722375029284');" onmouseout="out('5585496722375029284');" style=""> 589         if (CollectionUtils.isEmpty(headerFields)) {                                                     </span>
<span class="-3348290953650583379" onmouseenter="enter('-3348290953650583379');" onmouseout="out('-3348290953650583379');" style=""><abbr title=" 590             String message = &quot;There are no listgrid header fields configured for the class &quot; + ceilingType + &quot; and property &#x27;&quot; +"> 590             String message = &quot;There are no listgrid header fields configured for the class &quot; + ceilingTypðŸ”µ</abbr></span>
<span class="7723961843711254229" onmouseenter="enter('7723961843711254229');" onmouseout="out('7723961843711254229');" style=""> 591                     StringUtil.sanitize(field.getName()) + &quot;&#x27;.&quot;;                                         </span>
<span class="-8247546196580792399" onmouseenter="enter('-8247546196580792399');" onmouseout="out('-8247546196580792399');" style=""><abbr title=" 592             if (selectize &amp;&amp; (type == ListGrid.Type.ADORNED || type == ListGrid.Type.ADORNED_WITH_FORM)) {"> 592             if (selectize &amp;&amp; (type == ListGrid.Type.ADORNED || type == ListGrid.Type.ADORNED_WITH_FORM)) ðŸ”µ</abbr></span>
<span class="3128472952734575237" onmouseenter="enter('3128472952734575237');" onmouseout="out('3128472952734575237');" style=""><abbr title=" 593                 message += &quot; Please configure &#x27;selectizeVisibleField&#x27; in your @AdminPresentationAdornedTargetCollection configuration&quot;;"> 593                 message += &quot; Please configure &#x27;selectizeVisibleField&#x27; in your @AdminPresentationAdornedTaðŸ”µ</abbr></span>
<span class="8636226295625239860" onmouseenter="enter('8636226295625239860');" onmouseout="out('8636226295625239860');" style=""> 594             } else if (type == ListGrid.Type.ADORNED || type == ListGrid.Type.ADORNED_WITH_FORM) {       </span>
<span class="2402628808600951472" onmouseenter="enter('2402628808600951472');" onmouseout="out('2402628808600951472');" style=""><abbr title=" 595                 message += &quot; Please configure &#x27;gridVisibleFields&#x27; in your @AdminPresentationAdornedTargetCollection configuration&quot;;"> 595                 message += &quot; Please configure &#x27;gridVisibleFields&#x27; in your @AdminPresentationAdornedTargetðŸ”µ</abbr></span>
<span class="-9137226596697213695" onmouseenter="enter('-9137226596697213695');" onmouseout="out('-9137226596697213695');" style=""> 596             } else if (selectize &amp;&amp; type == ListGrid.Type.BASIC) {                                       </span>
<span class="-3735757397027600216" onmouseenter="enter('-3735757397027600216');" onmouseout="out('-3735757397027600216');" style=""><abbr title=" 597                 message += &quot; Please configure &#x27;selectizeVisibleField&#x27; in your @AdminPresentationCollection configuration&quot;;"> 597                 message += &quot; Please configure &#x27;selectizeVisibleField&#x27; in your @AdminPresentationCollectioðŸ”µ</abbr></span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 598             } else {                                                                                     </span>
<span class="-6242089898795718984" onmouseenter="enter('-6242089898795718984');" onmouseout="out('-6242089898795718984');" style=""> 599                 message += &quot; Please mark some @AdminPresentation fields with &#x27;prominent = true&#x27;&quot;;        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 600             }                                                                                            </span>
<span class="683988342023046623" onmouseenter="enter('683988342023046623');" onmouseout="out('683988342023046623');" style=""> 601             LOG.error(message);                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 602         }                                                                                                </span>
<span  style=""> 603                                                                                                          </span>
<span class="8018024767617726350" onmouseenter="enter('8018024767617726350');" onmouseout="out('8018024767617726350');" style=""><abbr title=" 604         ListGrid listGrid = createListGrid(ceilingType, headerFields, type, drs, sectionKey, fmd.getOrder(), idProperty, sectionCrumbs, sortProperty);"> 604         ListGrid listGrid = createListGrid(ceilingType, headerFields, type, drs, sectionKey, fmd.getOrderðŸ”µ</abbr></span>
<span class="-8260607636786156523" onmouseenter="enter('-8260607636786156523');" onmouseout="out('-8260607636786156523');" style=""> 605         listGrid.setSubCollectionFieldName(field.getName());                                             </span>
<span class="6077403992574006974" onmouseenter="enter('6077403992574006974');" onmouseout="out('6077403992574006974');" style=""> 606         listGrid.setFriendlyName(field.getMetadata().getFriendlyName());                                 </span>
<span class="7905107023107584311" onmouseenter="enter('7905107023107584311');" onmouseout="out('7905107023107584311');" style=""> 607         if (StringUtils.isEmpty(listGrid.getFriendlyName())) {                                           </span>
<span class="7450505976451149249" onmouseenter="enter('7450505976451149249');" onmouseout="out('7450505976451149249');" style=""> 608             listGrid.setFriendlyName(field.getName());                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 609         }                                                                                                </span>
<span class="4004853909217037199" onmouseenter="enter('4004853909217037199');" onmouseout="out('4004853909217037199');" style=""> 610         listGrid.setContainingEntityId(containingEntityId);                                              </span>
<span class="5941008318995473126" onmouseenter="enter('5941008318995473126');" onmouseout="out('5941008318995473126');" style=""> 611         listGrid.setIsReadOnly(readOnly);                                                                </span>
<span class="5221697846686143736" onmouseenter="enter('5221697846686143736');" onmouseout="out('5221697846686143736');" style=""> 612         listGrid.setHideIdColumn(hideIdColumn);                                                          </span>
<span class="103202019101048665" onmouseenter="enter('103202019101048665');" onmouseout="out('103202019101048665');" style=""> 613         listGrid.setCanFilterAndSort(canFilterAndSort);                                                  </span>
<span  style=""> 614                                                                                                          </span>
<span class="2615168876841014995" onmouseenter="enter('2615168876841014995');" onmouseout="out('2615168876841014995');" style=""> 615         // Set up the filter builder params                                                              </span>
<span class="1067693587814186246" onmouseenter="enter('1067693587814186246');" onmouseout="out('1067693587814186246');" style=""> 616         Date c = new Date();                                                                             </span>
<span class="7632548446248454393" onmouseenter="enter('7632548446248454393');" onmouseout="out('7632548446248454393');" style=""> 617         String friendlyName = field.getMetadata().getFriendlyName();                                     </span>
<span class="-1543374359693074653" onmouseenter="enter('-1543374359693074653');" onmouseout="out('-1543374359693074653');" style=""> 618         String jsonFriendlyName = friendlyName.replaceAll(&quot; &quot;, &quot;_&quot;);                                     </span>
<span class="-5194767828410940587" onmouseenter="enter('-5194767828410940587');" onmouseout="out('-5194767828410940587');" style=""> 619         listGrid.setJsonFieldName(jsonFriendlyName + c.getTime() + &quot;Json&quot;);                              </span>
<span class="6488323689834765207" onmouseenter="enter('6488323689834765207');" onmouseout="out('6488323689834765207');" style=""> 620         listGrid.setFriendlyName(friendlyName);                                                          </span>
<span class="-4532597237542010033" onmouseenter="enter('-4532597237542010033');" onmouseout="out('-4532597237542010033');" style=""> 621         listGrid.setFieldBuilder(&quot;RULE_SIMPLE&quot;);                                                         </span>
<span class="2366326534416496613" onmouseenter="enter('2366326534416496613');" onmouseout="out('2366326534416496613');" style=""> 622         if (CollectionUtils.isEmpty(wrapper.getFields())) {                                              </span>
<span class="532531496111421469" onmouseenter="enter('532531496111421469');" onmouseout="out('532531496111421469');" style=""> 623             wrapper.setFields(defaultWrapperFields);                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 624         }                                                                                                </span>
<span class="8083895692807517727" onmouseenter="enter('8083895692807517727');" onmouseout="out('8083895692807517727');" style=""> 625         listGrid.setFieldWrapper(wrapper);                                                               </span>
<span  style=""> 626                                                                                                          </span>
<span class="4466331963824990789" onmouseenter="enter('4466331963824990789');" onmouseout="out('4466331963824990789');" style=""> 627         String blankJsonString =  &quot;{\&quot;data\&quot;:[]}&quot;;                                                       </span>
<span class="7445610059504327235" onmouseenter="enter('7445610059504327235');" onmouseout="out('7445610059504327235');" style=""> 628         listGrid.setJson(blankJsonString);                                                               </span>
<span class="-6647315222721447684" onmouseenter="enter('-6647315222721447684');" onmouseout="out('-6647315222721447684');" style=""> 629         DataWrapper dw = convertJsonToDataWrapper(blankJsonString);                                      </span>
<span class="-3408161092817379645" onmouseenter="enter('-3408161092817379645');" onmouseout="out('-3408161092817379645');" style=""> 630         if (dw != null) {                                                                                </span>
<span class="-933372440492481068" onmouseenter="enter('-933372440492481068');" onmouseout="out('-933372440492481068');" style=""> 631             listGrid.setDataWrapper(dw);                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 632         }                                                                                                </span>
<span  style=""> 633                                                                                                          </span>
<span class="-1934188124142515927" onmouseenter="enter('-1934188124142515927');" onmouseout="out('-1934188124142515927');" style=""> 634         if (editable) {                                                                                  </span>
<span class="-8324356505432784037" onmouseenter="enter('-8324356505432784037');" onmouseout="out('-8324356505432784037');" style=""> 635             listGrid.getRowActions().add(DefaultListGridActions.UPDATE);                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 636         }                                                                                                </span>
<span class="7378462715957185244" onmouseenter="enter('7378462715957185244');" onmouseout="out('7378462715957185244');" style=""> 637         if (readOnly) {                                                                                  </span>
<span class="-5818500246922120128" onmouseenter="enter('-5818500246922120128');" onmouseout="out('-5818500246922120128');" style=""> 638             listGrid.getRowActions().add(DefaultListGridActions.VIEW);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 639         }                                                                                                </span>
<span class="5410259152944409683" onmouseenter="enter('5410259152944409683');" onmouseout="out('5410259152944409683');" style=""> 640         if (sortable) {                                                                                  </span>
<span class="-607660971412807673" onmouseenter="enter('-607660971412807673');" onmouseout="out('-607660971412807673');" style=""> 641             listGrid.setCanFilterAndSort(false);                                                         </span>
<span class="4388200762412113532" onmouseenter="enter('4388200762412113532');" onmouseout="out('4388200762412113532');" style=""> 642             listGrid.setIsSortable(true);                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 643         }                                                                                                </span>
<span  style=""> 644                                                                                                          </span>
<span class="-4128949180761209250" onmouseenter="enter('-4128949180761209250');" onmouseout="out('-4128949180761209250');" style=""> 645         if (modalSingleSelectable) {                                                                     </span>
<span class="7378462715957185244" onmouseenter="enter('7378462715957185244');" onmouseout="out('7378462715957185244');" style=""> 646             if (readOnly) {                                                                              </span>
<span class="876416575304580897" onmouseenter="enter('876416575304580897');" onmouseout="out('876416575304580897');" style=""><abbr title=" 647                 listGrid.addModalRowAction(DefaultListGridActions.SINGLE_SELECT.clone().withForListGridReadOnly(true));"> 647                 listGrid.addModalRowAction(DefaultListGridActions.SINGLE_SELECT.clone().withForListGridReðŸ”µ</abbr></span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 648             } else {                                                                                     </span>
<span class="2808273481648426142" onmouseenter="enter('2808273481648426142');" onmouseout="out('2808273481648426142');" style=""> 649                 listGrid.addModalRowAction(DefaultListGridActions.SINGLE_SELECT);                        </span>
<span  style=""> 650                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 651             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 652         }                                                                                                </span>
<span class="-7419173722157864798" onmouseenter="enter('-7419173722157864798');" onmouseout="out('-7419173722157864798');" style=""> 653         listGrid.setSelectType(ListGrid.SelectType.SINGLE_SELECT);                                       </span>
<span  style=""> 654                                                                                                          </span>
<span class="4421519193138811338" onmouseenter="enter('4421519193138811338');" onmouseout="out('4421519193138811338');" style=""> 655         if (selectize) {                                                                                 </span>
<span class="4330210937183071205" onmouseenter="enter('4330210937183071205');" onmouseout="out('4330210937183071205');" style=""> 656             listGrid.setSelectizeUrl(buildSelectizeUrl(listGrid));                                       </span>
<span class="-6778616649865275600" onmouseenter="enter('-6778616649865275600');" onmouseout="out('-6778616649865275600');" style=""> 657             listGrid.setSelectType(ListGrid.SelectType.SELECTIZE);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 658         }                                                                                                </span>
<span  style=""> 659                                                                                                          </span>
<span class="-318424289412267832" onmouseenter="enter('-318424289412267832');" onmouseout="out('-318424289412267832');" style=""> 660         if (modalMultiSelectable) {                                                                      </span>
<span class="-2076946817204501330" onmouseenter="enter('-2076946817204501330');" onmouseout="out('-2076946817204501330');" style=""> 661             listGrid.addModalRowAction(DefaultListGridActions.MULTI_SELECT);                             </span>
<span class="7572617953044326144" onmouseenter="enter('7572617953044326144');" onmouseout="out('7572617953044326144');" style=""> 662             listGrid.setSelectType(ListGrid.SelectType.MULTI_SELECT);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 663         }                                                                                                </span>
<span class="-8712474510741391938" onmouseenter="enter('-8712474510741391938');" onmouseout="out('-8712474510741391938');" style=""> 664         listGrid.getRowActions().add(DefaultListGridActions.REMOVE);                                     </span>
<span  style=""> 665                                                                                                          </span>
<span class="5224232002379484564" onmouseenter="enter('5224232002379484564');" onmouseout="out('5224232002379484564');" style=""> 666         if (fmd.getManualFetch()) {                                                                      </span>
<span class="-9107723200038018431" onmouseenter="enter('-9107723200038018431');" onmouseout="out('-9107723200038018431');" style=""> 667             listGrid.setManualFetch(true);                                                               </span>
<span class="-1990881339892073084" onmouseenter="enter('-1990881339892073084');" onmouseout="out('-1990881339892073084');" style=""> 668             listGrid.getToolbarActions().add(DefaultListGridActions.MANUAL_FETCH);                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 669         }                                                                                                </span>
<span class="963954107021870727" onmouseenter="enter('963954107021870727');" onmouseout="out('963954107021870727');" style=""> 670         if (isMedia) {                                                                                   </span>
<span class="8560894537765048923" onmouseenter="enter('8560894537765048923');" onmouseout="out('8560894537765048923');" style=""> 671             listGrid.setListGridType(ListGrid.Type.ASSET_GRID);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 672         }                                                                                                </span>
<span  style=""> 673                                                                                                          </span>
<span class="-5511350038403165520" onmouseenter="enter('-5511350038403165520');" onmouseout="out('-5511350038403165520');" style=""> 674         extensionManager.getProxy().modifyListGrid(listGrid.getClassName(), listGrid);                   </span>
<span  style=""> 675                                                                                                          </span>
<span class="-1010311312628539836" onmouseenter="enter('-1010311312628539836');" onmouseout="out('-1010311312628539836');" style=""><abbr title=" 676         //If someone has replaced RowLevelSecurityService, check here to make sure the replacement implements the expected interface"> 676         //If someone has replaced RowLevelSecurityService, check here to make sure the replacement implemðŸ”µ</abbr></span>
<span class="8968842492276656547" onmouseenter="enter('8968842492276656547');" onmouseout="out('8968842492276656547');" style=""> 677         if (rowLevelSecurityService instanceof ExceptionAwareRowLevelSecurityProvider) {                 </span>
<span class="2057574043580690918" onmouseenter="enter('2057574043580690918');" onmouseout="out('2057574043580690918');" style=""><abbr title=" 678             EntityFormModifierConfiguration entityFormModifierConfiguration = ((ExceptionAwareRowLevelSecurityProvider) rowLevelSecurityService).getUpdateDenialExceptions();"> 678             EntityFormModifierConfiguration entityFormModifierConfiguration = ((ExceptionAwareRowLevelSecðŸ”µ</abbr></span>
<span class="-3023990582845647391" onmouseenter="enter('-3023990582845647391');" onmouseout="out('-3023990582845647391');" style=""><abbr title=" 679             for (EntityFormModifierData&lt;EntityFormModifierDataPoint&gt; data : entityFormModifierConfiguration.getData()) {"> 679             for (EntityFormModifierData&lt;EntityFormModifierDataPoint&gt; data : entityFormModifierConfiguratiðŸ”µ</abbr></span>
<span class="9148632731325481398" onmouseenter="enter('9148632731325481398');" onmouseout="out('9148632731325481398');" style=""> 680                 for (EntityFormModifier modifier : entityFormModifierConfiguration.getModifier()) {      </span>
<span class="7131836139928065231" onmouseenter="enter('7131836139928065231');" onmouseout="out('7131836139928065231');" style=""> 681                     if (modifier.isQualified(data.getModifierType())) {                                  </span>
<span class="-3065342187112967306" onmouseenter="enter('-3065342187112967306');" onmouseout="out('-3065342187112967306');" style=""> 682                         modifier.modifyListGrid(new EntityFormModifierRequest()                          </span>
<span class="118085653176366406" onmouseenter="enter('118085653176366406');" onmouseout="out('118085653176366406');" style=""> 683                                 .withListGrid(listGrid)                                                  </span>
<span class="-1014541830042934633" onmouseenter="enter('-1014541830042934633');" onmouseout="out('-1014541830042934633');" style=""> 684                                 .withConfiguration(data)                                                 </span>
<span class="-7538620272607121359" onmouseenter="enter('-7538620272607121359');" onmouseout="out('-7538620272607121359');" style=""> 685                                 .withCurrentUser(adminRemoteSecurityService.getPersistentAdminUser())    </span>
<span class="680994463596247300" onmouseenter="enter('680994463596247300');" onmouseout="out('680994463596247300');" style=""> 686                                 .withRowLevelSecurityService(rowLevelSecurityService));                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 687                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 688                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 689             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 690         }                                                                                                </span>
<span class="8338561479600990216" onmouseenter="enter('8338561479600990216');" onmouseout="out('8338561479600990216');" style=""> 691         return listGrid;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 692     }                                                                                                    </span>
<span  style=""> 693                                                                                                          </span>
<span class="1351139520445861423" onmouseenter="enter('1351139520445861423');" onmouseout="out('1351139520445861423');" style=""> 694     protected String getMapKeyFriendlyName(Property property) {                                          </span>
<span class="5871990330597606657" onmouseenter="enter('5871990330597606657');" onmouseout="out('5871990330597606657');" style=""> 695         String friendlyNameFromMetadata = property.getMetadata().getFriendlyName();                      </span>
<span  style=""> 696                                                                                                          </span>
<span class="3779076262581559101" onmouseenter="enter('3779076262581559101');" onmouseout="out('3779076262581559101');" style=""> 697         return (friendlyNameFromMetadata == null) ? &quot;Key&quot; : friendlyNameFromMetadata;                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 698     }                                                                                                    </span>
<span  style=""> 699                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 700     @Override                                                                                            </span>
<span class="-1413517427251419025" onmouseenter="enter('-1413517427251419025');" onmouseout="out('-1413517427251419025');" style=""><abbr title=" 701     public Map&lt;String, Object&gt; buildSelectizeCollectionInfo(String containingEntityId, DynamicResultSet drs, Property field,"> 701     public Map&lt;String, Object&gt; buildSelectizeCollectionInfo(String containingEntityId, DynamicResultSet dðŸ”µ</abbr></span>
<span class="8976903068062443392" onmouseenter="enter('8976903068062443392');" onmouseout="out('8976903068062443392');" style=""> 702         String sectionKey, List&lt;SectionCrumb&gt; sectionCrumbs)                                             </span>
<span class="1998458335829271558" onmouseenter="enter('1998458335829271558');" onmouseout="out('1998458335829271558');" style=""> 703             throws ServiceException {                                                                    </span>
<span class="3501499603601527305" onmouseenter="enter('3501499603601527305');" onmouseout="out('3501499603601527305');" style=""> 704         FieldMetadata fmd = field.getMetadata();                                                         </span>
<span class="6565595844041240946" onmouseenter="enter('6565595844041240946');" onmouseout="out('6565595844041240946');" style=""> 705         // Get the class metadata for this particular field                                              </span>
<span class="-8834884127458938753" onmouseenter="enter('-8834884127458938753');" onmouseout="out('-8834884127458938753');" style=""> 706         PersistencePackageRequest ppr = PersistencePackageRequest.fromMetadata(fmd, sectionCrumbs);      </span>
<span class="-470699824173107204" onmouseenter="enter('-470699824173107204');" onmouseout="out('-470699824173107204');" style=""> 707         if (field != null) {                                                                             </span>
<span class="8971896145704334353" onmouseenter="enter('8971896145704334353');" onmouseout="out('8971896145704334353');" style=""> 708             ppr.setSectionEntityField(field.getName());                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 709         }                                                                                                </span>
<span class="1142804962458743647" onmouseenter="enter('1142804962458743647');" onmouseout="out('1142804962458743647');" style=""><abbr title=" 710         ClassMetadata cmd = adminEntityService.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();"> 710         ClassMetadata cmd = adminEntityService.getClassMetadata(ppr).getDynamicResultSet().getClassMetaDaðŸ”µ</abbr></span>
<span  style=""> 711                                                                                                          </span>
<span class="-5595331836292860562" onmouseenter="enter('-5595331836292860562');" onmouseout="out('-5595331836292860562');" style=""> 712         Map&lt;String, Object&gt; result = constructSelectizeOptionMap(drs, cmd);                              </span>
<span  style=""> 713                                                                                                          </span>
<span class="-1689031862376375101" onmouseenter="enter('-1689031862376375101');" onmouseout="out('-1689031862376375101');" style=""> 714         AdornedTargetList adornedList = ppr.getAdornedList();                                            </span>
<span class="4210226056962324596" onmouseenter="enter('4210226056962324596');" onmouseout="out('4210226056962324596');" style=""> 715         if (adornedList != null &amp;&amp; adornedList.getLinkedObjectPath() != null                             </span>
<span class="-5584956232917922083" onmouseenter="enter('-5584956232917922083');" onmouseout="out('-5584956232917922083');" style=""> 716             &amp;&amp; adornedList.getTargetObjectPath() != null &amp;&amp; adornedList.getLinkedIdProperty() != null    </span>
<span class="8487613505903596752" onmouseenter="enter('8487613505903596752');" onmouseout="out('8487613505903596752');" style=""> 717             &amp;&amp; adornedList.getTargetIdProperty() != null) {                                              </span>
<span class="7309159037806205694" onmouseenter="enter('7309159037806205694');" onmouseout="out('7309159037806205694');" style=""><abbr title=" 718             result.put(&quot;linkedObjectPath&quot;, adornedList.getLinkedObjectPath() + &quot;.&quot; + adornedList.getLinkedIdProperty());"> 718             result.put(&quot;linkedObjectPath&quot;, adornedList.getLinkedObjectPath() + &quot;.&quot; + adornedList.getLinkeðŸ”µ</abbr></span>
<span class="-6077713782492983195" onmouseenter="enter('-6077713782492983195');" onmouseout="out('-6077713782492983195');" style=""> 719             result.put(&quot;linkedObjectId&quot;, containingEntityId);                                            </span>
<span class="3248709869136196767" onmouseenter="enter('3248709869136196767');" onmouseout="out('3248709869136196767');" style=""><abbr title=" 720             result.put(&quot;targetObjectPath&quot;, adornedList.getTargetObjectPath() + &quot;.&quot; + adornedList.getTargetIdProperty());"> 720             result.put(&quot;targetObjectPath&quot;, adornedList.getTargetObjectPath() + &quot;.&quot; + adornedList.getTargeðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 721         }                                                                                                </span>
<span  style=""> 722                                                                                                          </span>
<span class="-6419540350677864751" onmouseenter="enter('-6419540350677864751');" onmouseout="out('-6419540350677864751');" style=""> 723         return result;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 724     }                                                                                                    </span>
<span  style=""> 725                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 726     @Override                                                                                            </span>
<span class="6193659363548015244" onmouseenter="enter('6193659363548015244');" onmouseout="out('6193659363548015244');" style=""> 727     public Map&lt;String, Object&gt; constructSelectizeOptionMap(DynamicResultSet drs, ClassMetadata cmd) {    </span>
<span class="-2547625323269156657" onmouseenter="enter('-2547625323269156657');" onmouseout="out('-2547625323269156657');" style=""> 728         Map&lt;String, Object&gt; result = new HashMap&lt;&gt;();                                                    </span>
<span class="-1525294692883767948" onmouseenter="enter('-1525294692883767948');" onmouseout="out('-1525294692883767948');" style=""> 729         List&lt;Map&lt;String, String&gt;&gt; options = new ArrayList&lt;&gt;();                                           </span>
<span  style=""> 730                                                                                                          </span>
<span class="-7098425003691580554" onmouseenter="enter('-7098425003691580554');" onmouseout="out('-7098425003691580554');" style=""> 731         List&lt;Field&gt; headerFields = new ArrayList&lt;&gt;();                                                    </span>
<span class="3681854507729164346" onmouseenter="enter('3681854507729164346');" onmouseout="out('3681854507729164346');" style=""> 732         for (Property p : cmd.getProperties()) {                                                         </span>
<span class="-1029066852878262358" onmouseenter="enter('-1029066852878262358');" onmouseout="out('-1029066852878262358');" style=""> 733             if (p.getMetadata() instanceof BasicFieldMetadata) {                                         </span>
<span class="-941768582779766785" onmouseenter="enter('-941768582779766785');" onmouseout="out('-941768582779766785');" style=""> 734                 BasicFieldMetadata md = (BasicFieldMetadata) p.getMetadata();                            </span>
<span class="-3346338779761665081" onmouseenter="enter('-3346338779761665081');" onmouseout="out('-3346338779761665081');" style=""> 735                 if (md.isProminent() != null &amp;&amp; md.isProminent()                                         </span>
<span class="-8627428290755725902" onmouseenter="enter('-8627428290755725902');" onmouseout="out('-8627428290755725902');" style=""> 736                         &amp;&amp; !ArrayUtils.contains(getGridHiddenVisibilities(), md.getVisibility())) {      </span>
<span class="-1913804071468350989" onmouseenter="enter('-1913804071468350989');" onmouseout="out('-1913804071468350989');" style=""> 737                     Field hf = createHeaderField(p, md);                                                 </span>
<span class="465504053416102059" onmouseenter="enter('465504053416102059');" onmouseout="out('465504053416102059');" style=""> 738                     headerFields.add(hf);                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 739                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 740             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 741         }                                                                                                </span>
<span  style=""> 742                                                                                                          </span>
<span class="-5517026699518874938" onmouseenter="enter('-5517026699518874938');" onmouseout="out('-5517026699518874938');" style=""> 743         for (Entity e : drs.getRecords()) {                                                              </span>
<span class="-6136638466040784110" onmouseenter="enter('-6136638466040784110');" onmouseout="out('-6136638466040784110');" style=""> 744             Map&lt;String, String&gt; selectizeOption = new HashMap&lt;&gt;();                                       </span>
<span class="4163901938958293625" onmouseenter="enter('4163901938958293625');" onmouseout="out('4163901938958293625');" style=""> 745             for (Field headerField : headerFields) {                                                     </span>
<span class="5027179794052216178" onmouseenter="enter('5027179794052216178');" onmouseout="out('5027179794052216178');" style=""> 746                 Property p = e.findProperty(headerField.getName());                                      </span>
<span class="-4724213940983805674" onmouseenter="enter('-4724213940983805674');" onmouseout="out('-4724213940983805674');" style=""> 747                 if (p != null) {                                                                         </span>
<span class="4028188550890348466" onmouseenter="enter('4028188550890348466');" onmouseout="out('4028188550890348466');" style=""> 748                     selectizeOption.put(&quot;name&quot;, p.getValue());                                           </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 749                     break;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 750                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 751             }                                                                                            </span>
<span class="842570185536784204" onmouseenter="enter('842570185536784204');" onmouseout="out('842570185536784204');" style=""> 752             if (e.findProperty(&quot;id&quot;) != null) {                                                          </span>
<span class="1619295801241413088" onmouseenter="enter('1619295801241413088');" onmouseout="out('1619295801241413088');" style=""> 753                 selectizeOption.put(&quot;id&quot;, e.findProperty(&quot;id&quot;).getValue());                              </span>
<span class="-5830252244987930005" onmouseenter="enter('-5830252244987930005');" onmouseout="out('-5830252244987930005');" style=""> 754             //  &quot;Locale&quot; entity is a special occasion. Because it have not &quot;ID&quot; column with &quot;Long&quot; type  </span>
<span class="4697280149551476993" onmouseenter="enter('4697280149551476993');" onmouseout="out('4697280149551476993');" style=""> 755             } else if (e.findProperty(&quot;localeCode&quot;) != null) {                                           </span>
<span class="7405190492767879460" onmouseenter="enter('7405190492767879460');" onmouseout="out('7405190492767879460');" style=""> 756                 selectizeOption.put(&quot;id&quot;, e.findProperty(&quot;localeCode&quot;).getValue());                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 757             }                                                                                            </span>
<span class="-7996413909894304887" onmouseenter="enter('-7996413909894304887');" onmouseout="out('-7996413909894304887');" style=""> 758             if (e.findProperty(ALTERNATE_ID_PROPERTY) != null) {                                         </span>
<span class="-2834809076191022214" onmouseenter="enter('-2834809076191022214');" onmouseout="out('-2834809076191022214');" style=""> 759                 selectizeOption.put(&quot;alternateId&quot;, e.findProperty(ALTERNATE_ID_PROPERTY).getValue());    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 760             }                                                                                            </span>
<span class="2407499722406116097" onmouseenter="enter('2407499722406116097');" onmouseout="out('2407499722406116097');" style=""> 761             options.add(selectizeOption);                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 762         }                                                                                                </span>
<span class="-7448816453305947647" onmouseenter="enter('-7448816453305947647');" onmouseout="out('-7448816453305947647');" style=""> 763         result.put(&quot;options&quot;, options);                                                                  </span>
<span  style=""> 764                                                                                                          </span>
<span class="-6419540350677864751" onmouseenter="enter('-6419540350677864751');" onmouseout="out('-6419540350677864751');" style=""> 765         return result;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 766     }                                                                                                    </span>
<span  style=""> 767                                                                                                          </span>
<span class="3610563618424293176" onmouseenter="enter('3610563618424293176');" onmouseout="out('3610563618424293176');" style=""> 768     protected String buildSelectizeUrl(ListGrid listGrid) {                                              </span>
<span class="4360254575720880810" onmouseenter="enter('4360254575720880810');" onmouseout="out('4360254575720880810');" style=""> 769         HttpServletRequest request = BroadleafRequestContext.getBroadleafRequestContext().getRequest();  </span>
<span class="-1223345315803337981" onmouseenter="enter('-1223345315803337981');" onmouseout="out('-1223345315803337981');" style=""> 770         String url = request.getContextPath();                                                           </span>
<span class="-5859217039633283919" onmouseenter="enter('-5859217039633283919');" onmouseout="out('-5859217039633283919');" style=""><abbr title=" 771         url += url.endsWith(&quot;/&quot;) || listGrid.getSectionKey().startsWith(&quot;/&quot;) ? listGrid.getSectionKey() : &quot;/&quot; + listGrid.getSectionKey();"> 771         url += url.endsWith(&quot;/&quot;) || listGrid.getSectionKey().startsWith(&quot;/&quot;) ? listGrid.getSectionKey() :ðŸ”µ</abbr></span>
<span class="5990790066724047703" onmouseenter="enter('5990790066724047703');" onmouseout="out('5990790066724047703');" style=""> 772         url += &quot;/&quot; + listGrid.getContainingEntityId();                                                   </span>
<span class="-5189302616019367476" onmouseenter="enter('-5189302616019367476');" onmouseout="out('-5189302616019367476');" style=""> 773         url += &quot;/&quot; + listGrid.getSubCollectionFieldName();                                               </span>
<span class="6645977004086329618" onmouseenter="enter('6645977004086329618');" onmouseout="out('6645977004086329618');" style=""> 774         return url;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 775     }                                                                                                    </span>
<span  style=""> 776                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 777     /**                                                                                                  </span>
<span class="-3142901546145506196" onmouseenter="enter('-3142901546145506196');" onmouseout="out('-3142901546145506196');" style=""><abbr title=" 778      * @deprecated use {@link #createListGrid(String, List, ListGrid.Type, DynamicResultSet, String, Integer, String, List, String)}"> 778      * @deprecated use {@link #createListGrid(String, List, ListGrid.Type, DynamicResultSet, String, InteðŸ”µ</abbr></span>
<span class="3292690528203019011" onmouseenter="enter('3292690528203019011');" onmouseout="out('3292690528203019011');" style=""> 779      * @param className                                                                                  </span>
<span class="5783752320936502160" onmouseenter="enter('5783752320936502160');" onmouseout="out('5783752320936502160');" style=""> 780      * @param headerFields                                                                               </span>
<span class="4180172247960880324" onmouseenter="enter('4180172247960880324');" onmouseout="out('4180172247960880324');" style=""> 781      * @param type                                                                                       </span>
<span class="-7324022876786324498" onmouseenter="enter('-7324022876786324498');" onmouseout="out('-7324022876786324498');" style=""> 782      * @param drs                                                                                        </span>
<span class="7403666429378321004" onmouseenter="enter('7403666429378321004');" onmouseout="out('7403666429378321004');" style=""> 783      * @param sectionKey                                                                                 </span>
<span class="6414796960983960786" onmouseenter="enter('6414796960983960786');" onmouseout="out('6414796960983960786');" style=""> 784      * @param order                                                                                      </span>
<span class="-2237647657818576638" onmouseenter="enter('-2237647657818576638');" onmouseout="out('-2237647657818576638');" style=""> 785      * @param idProperty                                                                                 </span>
<span class="6383674454506135847" onmouseenter="enter('6383674454506135847');" onmouseout="out('6383674454506135847');" style=""> 786      * @param sectionCrumbs                                                                              </span>
<span class="-9165797340485297481" onmouseenter="enter('-9165797340485297481');" onmouseout="out('-9165797340485297481');" style=""> 787      * @return                                                                                           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 788      */                                                                                                  </span>
<span class="-9122364098618956613" onmouseenter="enter('-9122364098618956613');" onmouseout="out('-9122364098618956613');" style=""> 789     @Deprecated                                                                                          </span>
<span class="4478013600751804718" onmouseenter="enter('4478013600751804718');" onmouseout="out('4478013600751804718');" style=""><abbr title=" 790     protected ListGrid createListGrid(String className, List&lt;Field&gt; headerFields, ListGrid.Type type, DynamicResultSet drs,"> 790     protected ListGrid createListGrid(String className, List&lt;Field&gt; headerFields, ListGrid.Type type, DynðŸ”µ</abbr></span>
<span class="-2475961144071468437" onmouseenter="enter('-2475961144071468437');" onmouseout="out('-2475961144071468437');" style=""> 791             String sectionKey, int order, String idProperty, List&lt;SectionCrumb&gt; sectionCrumbs) {         </span>
<span class="-7836467015459082374" onmouseenter="enter('-7836467015459082374');" onmouseout="out('-7836467015459082374');" style=""><abbr title=" 792        return createListGrid(className,headerFields,type,drs,sectionKey,order,idProperty,sectionCrumbs,null);"> 792        return createListGrid(className,headerFields,type,drs,sectionKey,order,idProperty,sectionCrumbs,nuðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 793     }                                                                                                    </span>
<span  style=""> 794                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 795     /**                                                                                                  </span>
<span class="-6553954062731574601" onmouseenter="enter('-6553954062731574601');" onmouseout="out('-6553954062731574601');" style=""> 796      * Populate a ListGrid with ListGridRecords.                                                         </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 797      *                                                                                                   </span>
<span class="3292690528203019011" onmouseenter="enter('3292690528203019011');" onmouseout="out('3292690528203019011');" style=""> 798      * @param className                                                                                  </span>
<span class="5783752320936502160" onmouseenter="enter('5783752320936502160');" onmouseout="out('5783752320936502160');" style=""> 799      * @param headerFields                                                                               </span>
<span class="4180172247960880324" onmouseenter="enter('4180172247960880324');" onmouseout="out('4180172247960880324');" style=""> 800      * @param type                                                                                       </span>
<span class="-7324022876786324498" onmouseenter="enter('-7324022876786324498');" onmouseout="out('-7324022876786324498');" style=""> 801      * @param drs                                                                                        </span>
<span class="7403666429378321004" onmouseenter="enter('7403666429378321004');" onmouseout="out('7403666429378321004');" style=""> 802      * @param sectionKey                                                                                 </span>
<span class="6414796960983960786" onmouseenter="enter('6414796960983960786');" onmouseout="out('6414796960983960786');" style=""> 803      * @param order                                                                                      </span>
<span class="-2237647657818576638" onmouseenter="enter('-2237647657818576638');" onmouseout="out('-2237647657818576638');" style=""> 804      * @param idProperty                                                                                 </span>
<span class="6383674454506135847" onmouseenter="enter('6383674454506135847');" onmouseout="out('6383674454506135847');" style=""> 805      * @param sectionCrumbs                                                                              </span>
<span class="958697608627838498" onmouseenter="enter('958697608627838498');" onmouseout="out('958697608627838498');" style=""> 806      * @param sortPropery                                                                                </span>
<span class="-9165797340485297481" onmouseenter="enter('-9165797340485297481');" onmouseout="out('-9165797340485297481');" style=""> 807      * @return                                                                                           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 808      */                                                                                                  </span>
<span class="4478013600751804718" onmouseenter="enter('4478013600751804718');" onmouseout="out('4478013600751804718');" style=""><abbr title=" 809     protected ListGrid createListGrid(String className, List&lt;Field&gt; headerFields, ListGrid.Type type, DynamicResultSet drs,"> 809     protected ListGrid createListGrid(String className, List&lt;Field&gt; headerFields, ListGrid.Type type, DynðŸ”µ</abbr></span>
<span class="-6113374608895219377" onmouseenter="enter('-6113374608895219377');" onmouseout="out('-6113374608895219377');" style=""><abbr title=" 810             String sectionKey, Integer order, String idProperty, List&lt;SectionCrumb&gt; sectionCrumbs, String sortPropery) {"> 810             String sectionKey, Integer order, String idProperty, List&lt;SectionCrumb&gt; sectionCrumbs, StringðŸ”µ</abbr></span>
<span class="-449286439783514832" onmouseenter="enter('-449286439783514832');" onmouseout="out('-449286439783514832');" style=""> 811         // Create the list grid and set some basic attributes                                            </span>
<span class="9183228219526841185" onmouseenter="enter('9183228219526841185');" onmouseout="out('9183228219526841185');" style=""> 812         ListGrid listGrid = new ListGrid();                                                              </span>
<span class="-6947819430094733929" onmouseenter="enter('-6947819430094733929');" onmouseout="out('-6947819430094733929');" style=""> 813         listGrid.setClassName(className);                                                                </span>
<span class="4219128016198228062" onmouseenter="enter('4219128016198228062');" onmouseout="out('4219128016198228062');" style=""> 814         listGrid.getHeaderFields().addAll(headerFields);                                                 </span>
<span class="-7949709696885802288" onmouseenter="enter('-7949709696885802288');" onmouseout="out('-7949709696885802288');" style=""> 815         listGrid.setListGridType(type);                                                                  </span>
<span class="8360738814350031256" onmouseenter="enter('8360738814350031256');" onmouseout="out('8360738814350031256');" style=""> 816         listGrid.setSectionCrumbs(sectionCrumbs);                                                        </span>
<span class="-7038501348455923153" onmouseenter="enter('-7038501348455923153');" onmouseout="out('-7038501348455923153');" style=""> 817         listGrid.setSectionKey(sectionKey);                                                              </span>
<span class="5588432900267028426" onmouseenter="enter('5588432900267028426');" onmouseout="out('5588432900267028426');" style=""> 818         listGrid.setOrder(order);                                                                        </span>
<span class="-2959509556644296161" onmouseenter="enter('-2959509556644296161');" onmouseout="out('-2959509556644296161');" style=""> 819         listGrid.setIdProperty(idProperty);                                                              </span>
<span class="-1574850005689313985" onmouseenter="enter('-1574850005689313985');" onmouseout="out('-1574850005689313985');" style=""> 820         listGrid.setStartIndex(drs.getStartIndex());                                                     </span>
<span class="-1229635168663567378" onmouseenter="enter('-1229635168663567378');" onmouseout="out('-1229635168663567378');" style=""> 821         listGrid.setTotalRecords(drs.getTotalRecords());                                                 </span>
<span class="-8685641121402901146" onmouseenter="enter('-8685641121402901146');" onmouseout="out('-8685641121402901146');" style=""> 822         listGrid.setPageSize(drs.getPageSize());                                                         </span>
<span  style=""> 823                                                                                                          </span>
<span class="6809887928661746160" onmouseenter="enter('6809887928661746160');" onmouseout="out('6809887928661746160');" style=""> 824         String sectionIdentifier = extractSectionIdentifierFromCrumb(sectionCrumbs);                     </span>
<span class="-666381629022378153" onmouseenter="enter('-666381629022378153');" onmouseout="out('-666381629022378153');" style=""><abbr title=" 825         AdminSection section = navigationService.findAdminSectionByClassAndSectionId(className, sectionIdentifier);"> 825         AdminSection section = navigationService.findAdminSectionByClassAndSectionId(className, sectionIdðŸ”µ</abbr></span>
<span class="2297837107111400660" onmouseenter="enter('2297837107111400660');" onmouseout="out('2297837107111400660');" style=""> 826         if (section != null) {                                                                           </span>
<span class="-6658763311085780957" onmouseenter="enter('-6658763311085780957');" onmouseout="out('-6658763311085780957');" style=""> 827             listGrid.setExternalEntitySectionKey(section.getUrl());                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 828         }                                                                                                </span>
<span  style=""> 829                                                                                                          </span>
<span class="2209008320918265390" onmouseenter="enter('2209008320918265390');" onmouseout="out('2209008320918265390');" style=""> 830         // format date list grid cells                                                                   </span>
<span class="8206468207203445529" onmouseenter="enter('8206468207203445529');" onmouseout="out('8206468207203445529');" style=""> 831         SimpleDateFormat formatter = new SimpleDateFormat(&quot;MMM d, y @ hh:mma&quot;);                          </span>
<span class="-3380881449399951408" onmouseenter="enter('-3380881449399951408');" onmouseout="out('-3380881449399951408');" style=""> 832         DateFormatSymbols symbols = new DateFormatSymbols(Locale.getDefault());                          </span>
<span class="4107867186349432276" onmouseenter="enter('4107867186349432276');" onmouseout="out('4107867186349432276');" style=""> 833         symbols.setAmPmStrings(new String[] { &quot;am&quot;, &quot;pm&quot; });                                             </span>
<span class="8033599572947753762" onmouseenter="enter('8033599572947753762');" onmouseout="out('8033599572947753762');" style=""> 834         formatter.setDateFormatSymbols(symbols);                                                         </span>
<span  style=""> 835                                                                                                          </span>
<span class="-8955150404377737735" onmouseenter="enter('-8955150404377737735');" onmouseout="out('-8955150404377737735');" style=""> 836         // For each of the entities (rows) in the list grid, we need to build the associated             </span>
<span class="7780135600729227159" onmouseenter="enter('7780135600729227159');" onmouseout="out('7780135600729227159');" style=""> 837         // ListGridRecord and set the required fields on the record. These fields are the same ones      </span>
<span class="-4274337481121146447" onmouseenter="enter('-4274337481121146447');" onmouseout="out('-4274337481121146447');" style=""> 838         // that are used for the header fields.                                                          </span>
<span class="-5517026699518874938" onmouseenter="enter('-5517026699518874938');" onmouseout="out('-5517026699518874938');" style=""> 839         for (Entity e : drs.getRecords()) {                                                              </span>
<span class="1299256644552050382" onmouseenter="enter('1299256644552050382');" onmouseout="out('1299256644552050382');" style=""> 840             ListGridRecord record = new ListGridRecord();                                                </span>
<span class="-8742186718038750131" onmouseenter="enter('-8742186718038750131');" onmouseout="out('-8742186718038750131');" style=""> 841             record.setListGrid(listGrid);                                                                </span>
<span class="6901251098959405515" onmouseenter="enter('6901251098959405515');" onmouseout="out('6901251098959405515');" style=""> 842             record.setDirty(e.isDirty());                                                                </span>
<span class="-5328520837276209835" onmouseenter="enter('-5328520837276209835');" onmouseout="out('-5328520837276209835');" style=""> 843             record.setEntity(e);                                                                         </span>
<span class="4295036974122714095" onmouseenter="enter('4295036974122714095');" onmouseout="out('4295036974122714095');" style=""> 844             if (StringUtils.isNotBlank(sortPropery) &amp;&amp; e.findProperty(sortPropery) != null) {            </span>
<span class="6298096210056644819" onmouseenter="enter('6298096210056644819');" onmouseout="out('6298096210056644819');" style=""> 845                 Property sort = e.findProperty(sortPropery);                                             </span>
<span class="-3019357169870438428" onmouseenter="enter('-3019357169870438428');" onmouseout="out('-3019357169870438428');" style=""> 846                 record.setDisplayOrder(sort.getValue());                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 847             }                                                                                            </span>
<span class="-6805099362032074066" onmouseenter="enter('-6805099362032074066');" onmouseout="out('-6805099362032074066');" style=""> 848             if (e.findProperty(&quot;hasError&quot;) != null) {                                                    </span>
<span class="893890618648542494" onmouseenter="enter('893890618648542494');" onmouseout="out('893890618648542494');" style=""> 849                 Boolean hasError = Boolean.parseBoolean(e.findProperty(&quot;hasError&quot;).getValue());          </span>
<span class="5018109180834939283" onmouseenter="enter('5018109180834939283');" onmouseout="out('5018109180834939283');" style=""> 850                 record.setIsError(hasError);                                                             </span>
<span class="6284086923287170648" onmouseenter="enter('6284086923287170648');" onmouseout="out('6284086923287170648');" style=""> 851                 if (hasError) {                                                                          </span>
<span class="-2405869569788439449" onmouseenter="enter('-2405869569788439449');" onmouseout="out('-2405869569788439449');" style=""> 852                     ExtensionResultStatusType messageResultStatus = listGridErrorExtensionManager        </span>
<span class="60178842478893139" onmouseenter="enter('60178842478893139');" onmouseout="out('60178842478893139');" style=""> 853                             .getProxy().determineErrorMessageForEntity(e, record);                       </span>
<span  style=""> 854                                                                                                          </span>
<span class="4336715785327594030" onmouseenter="enter('4336715785327594030');" onmouseout="out('4336715785327594030');" style=""> 855                     if (ExtensionResultStatusType.NOT_HANDLED.equals(messageResultStatus)) {             </span>
<span class="-5328227180306975968" onmouseenter="enter('-5328227180306975968');" onmouseout="out('-5328227180306975968');" style=""> 856                         record.setErrorKey(&quot;listgrid.record.error&quot;);                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 857                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 858                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 859             }                                                                                            </span>
<span  style=""> 860                                                                                                          </span>
<span class="-6673642350284825111" onmouseenter="enter('-6673642350284825111');" onmouseout="out('-6673642350284825111');" style=""> 861             if (e.findProperty(&quot;progressStatus&quot;) != null) {                                              </span>
<span class="-2405869569788439449" onmouseenter="enter('-2405869569788439449');" onmouseout="out('-2405869569788439449');" style=""> 862                 ExtensionResultStatusType messageResultStatus = listGridErrorExtensionManager            </span>
<span class="-4105959264543865488" onmouseenter="enter('-4105959264543865488');" onmouseout="out('-4105959264543865488');" style=""> 863                         .getProxy().determineStatusMessageForEntity(e, record);                          </span>
<span class="4336715785327594030" onmouseenter="enter('4336715785327594030');" onmouseout="out('4336715785327594030');" style=""> 864                 if (ExtensionResultStatusType.NOT_HANDLED.equals(messageResultStatus)) {                 </span>
<span class="-1619149624396289128" onmouseenter="enter('-1619149624396289128');" onmouseout="out('-1619149624396289128');" style=""> 865                     record.setStatus(e.findProperty(&quot;progressStatus&quot;).getValue());                       </span>
<span class="-5097013158362698405" onmouseenter="enter('-5097013158362698405');" onmouseout="out('-5097013158362698405');" style=""> 866                     record.setStatusCssClass(&quot;listgrid.record.status&quot;);                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 867                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 868             }                                                                                            </span>
<span  style=""> 869                                                                                                          </span>
<span class="6661978459482218631" onmouseenter="enter('6661978459482218631');" onmouseout="out('6661978459482218631');" style=""> 870             if (e.findProperty(idProperty) != null) {                                                    </span>
<span class="-8868360599888536047" onmouseenter="enter('-8868360599888536047');" onmouseout="out('-8868360599888536047');" style=""> 871                 record.setId(e.findProperty(idProperty).getValue());                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 872             }                                                                                            </span>
<span  style=""> 873                                                                                                          </span>
<span class="4163901938958293625" onmouseenter="enter('4163901938958293625');" onmouseout="out('4163901938958293625');" style=""> 874             for (Field headerField : headerFields) {                                                     </span>
<span class="5027179794052216178" onmouseenter="enter('5027179794052216178');" onmouseout="out('5027179794052216178');" style=""> 875                 Property p = e.findProperty(headerField.getName());                                      </span>
<span class="-4724213940983805674" onmouseenter="enter('-4724213940983805674');" onmouseout="out('-4724213940983805674');" style=""> 876                 if (p != null) {                                                                         </span>
<span class="-3806855064372020025" onmouseenter="enter('-3806855064372020025');" onmouseout="out('-3806855064372020025');" style=""> 877                     Field recordField = new Field().withName(headerField.getName())                      </span>
<span class="5094071872860659780" onmouseenter="enter('5094071872860659780');" onmouseout="out('5094071872860659780');" style=""> 878                             .withFriendlyName(headerField.getFriendlyName())                             </span>
<span class="-5738388783204669504" onmouseenter="enter('-5738388783204669504');" onmouseout="out('-5738388783204669504');" style=""> 879                             .withOrder(p.getMetadata().getOrder());                                      </span>
<span  style=""> 880                                                                                                          </span>
<span class="6797523520890025382" onmouseenter="enter('6797523520890025382');" onmouseout="out('6797523520890025382');" style=""> 881                     if (headerField instanceof ComboField) {                                             </span>
<span class="-1809643957227997284" onmouseenter="enter('-1809643957227997284');" onmouseout="out('-1809643957227997284');" style=""> 882                         recordField.setValue(((ComboField) headerField).getOption(p.getValue()));        </span>
<span class="-5676530272089615334" onmouseenter="enter('-5676530272089615334');" onmouseout="out('-5676530272089615334');" style=""> 883                         recordField.setDisplayValue(p.getDisplayValue());                                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 884                     } else {                                                                             </span>
<span class="3939566750475024909" onmouseenter="enter('3939566750475024909');" onmouseout="out('3939566750475024909');" style=""> 885                         if (headerField.getFieldType().equals(&quot;DATE&quot;)) {                                 </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 886                             try {                                                                        </span>
<span class="6474778173321313180" onmouseenter="enter('6474778173321313180');" onmouseout="out('6474778173321313180');" style=""><abbr title=" 887                                 Date date = new SimpleDateFormat(&quot;yyyy.MM.dd HH:mm:ss&quot;).parse(p.getValue());"> 887                                 Date date = new SimpleDateFormat(&quot;yyyy.MM.dd HH:mm:ss&quot;).parse(p.getValue(ðŸ”µ</abbr></span>
<span class="3880682438474898081" onmouseenter="enter('3880682438474898081');" onmouseout="out('3880682438474898081');" style=""> 888                                 String newValue = formatter.format(date);                                </span>
<span class="6595195419554741000" onmouseenter="enter('6595195419554741000');" onmouseout="out('6595195419554741000');" style=""> 889                                 recordField.setValue(newValue);                                          </span>
<span class="2273034781883266774" onmouseenter="enter('2273034781883266774');" onmouseout="out('2273034781883266774');" style=""> 890                             } catch (Exception ex) {                                                     </span>
<span class="-1278861869857480835" onmouseenter="enter('-1278861869857480835');" onmouseout="out('-1278861869857480835');" style=""> 891                                 recordField.setValue(p.getValue());                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 892                             }                                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 893                         } else {                                                                         </span>
<span class="-1278861869857480835" onmouseenter="enter('-1278861869857480835');" onmouseout="out('-1278861869857480835');" style=""> 894                             recordField.setValue(p.getValue());                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 895                         }                                                                                </span>
<span class="-5676530272089615334" onmouseenter="enter('-5676530272089615334');" onmouseout="out('-5676530272089615334');" style=""> 896                         recordField.setDisplayValue(p.getDisplayValue());                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 897                     }                                                                                    </span>
<span  style=""> 898                                                                                                          </span>
<span class="1395793512456166896" onmouseenter="enter('1395793512456166896');" onmouseout="out('1395793512456166896');" style=""> 899                     recordField.setDerived(isDerivedField(headerField, recordField, p));                 </span>
<span  style=""> 900                                                                                                          </span>
<span class="1474914769688142515" onmouseenter="enter('1474914769688142515');" onmouseout="out('1474914769688142515');" style=""> 901                     record.getFields().add(recordField);                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 902                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 903             }                                                                                            </span>
<span  style=""> 904                                                                                                          </span>
<span class="7681410006718809906" onmouseenter="enter('7681410006718809906');" onmouseout="out('7681410006718809906');" style=""> 905             if (e.findProperty(AdminMainEntity.MAIN_ENTITY_NAME_PROPERTY) != null) {                     </span>
<span class="-2560058380276440283" onmouseenter="enter('-2560058380276440283');" onmouseout="out('-2560058380276440283');" style=""> 906                 Field hiddenField = new Field().withName(AdminMainEntity.MAIN_ENTITY_NAME_PROPERTY);     </span>
<span class="-3700863118643080175" onmouseenter="enter('-3700863118643080175');" onmouseout="out('-3700863118643080175');" style=""><abbr title=" 907                 hiddenField.setValue(e.findProperty(AdminMainEntity.MAIN_ENTITY_NAME_PROPERTY).getValue());"> 907                 hiddenField.setValue(e.findProperty(AdminMainEntity.MAIN_ENTITY_NAME_PROPERTY).getValue()ðŸ”µ</abbr></span>
<span class="-8926099734580015874" onmouseenter="enter('-8926099734580015874');" onmouseout="out('-8926099734580015874');" style=""> 908                 record.getHiddenFields().add(hiddenField);                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 909             }                                                                                            </span>
<span  style=""> 910                                                                                                          </span>
<span class="-767503360667085643" onmouseenter="enter('-767503360667085643');" onmouseout="out('-767503360667085643');" style=""> 911             if (e.findProperty(BasicPersistenceModule.ALTERNATE_ID_PROPERTY) != null) {                  </span>
<span class="6815728707096626977" onmouseenter="enter('6815728707096626977');" onmouseout="out('6815728707096626977');" style=""> 912                 record.setAltId(e.findProperty(BasicPersistenceModule.ALTERNATE_ID_PROPERTY).getValue());</span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 913             }                                                                                            </span>
<span  style=""> 914                                                                                                          </span>
<span class="4454208436841958265" onmouseenter="enter('4454208436841958265');" onmouseout="out('4454208436841958265');" style=""> 915             extensionManager.getProxy().modifyListGridRecord(className, record, e);                      </span>
<span  style=""> 916                                                                                                          </span>
<span class="-2046562633600316152" onmouseenter="enter('-2046562633600316152');" onmouseout="out('-2046562633600316152');" style=""> 917             listGrid.getRecords().add(record);                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 918         }                                                                                                </span>
<span  style=""> 919                                                                                                          </span>
<span class="3400018439585714383" onmouseenter="enter('3400018439585714383');" onmouseout="out('3400018439585714383');" style=""> 920         if (drs.getFirstId() != null) {                                                                  </span>
<span class="657069941572346003" onmouseenter="enter('657069941572346003');" onmouseout="out('657069941572346003');" style=""> 921             listGrid.setFirstId(drs.getFirstId());                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 922         }                                                                                                </span>
<span class="-8589701589672818150" onmouseenter="enter('-8589701589672818150');" onmouseout="out('-8589701589672818150');" style=""> 923         if (drs.getLastId() != null) {                                                                   </span>
<span class="8426729182884352986" onmouseenter="enter('8426729182884352986');" onmouseout="out('8426729182884352986');" style=""> 924             listGrid.setLastId(drs.getLastId());                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 925         }                                                                                                </span>
<span class="6275187001061462238" onmouseenter="enter('6275187001061462238');" onmouseout="out('6275187001061462238');" style=""> 926         if (drs.getUpperCount() != null) {                                                               </span>
<span class="-576914595282790069" onmouseenter="enter('-576914595282790069');" onmouseout="out('-576914595282790069');" style=""> 927             listGrid.setUpperCount(drs.getUpperCount());                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 928         }                                                                                                </span>
<span class="4823072466704399057" onmouseenter="enter('4823072466704399057');" onmouseout="out('4823072466704399057');" style=""> 929         if (drs.getLowerCount() != null) {                                                               </span>
<span class="-1903228332443717343" onmouseenter="enter('-1903228332443717343');" onmouseout="out('-1903228332443717343');" style=""> 930             listGrid.setLowerCount(drs.getLowerCount());                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 931         }                                                                                                </span>
<span class="4841764865893204927" onmouseenter="enter('4841764865893204927');" onmouseout="out('4841764865893204927');" style=""> 932         if (drs.getFetchType() != null) {                                                                </span>
<span class="-77798786805735884" onmouseenter="enter('-77798786805735884');" onmouseout="out('-77798786805735884');" style=""> 933             listGrid.setFetchType(drs.getFetchType().toString());                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 934         }                                                                                                </span>
<span class="-9150092368605969111" onmouseenter="enter('-9150092368605969111');" onmouseout="out('-9150092368605969111');" style=""> 935         if (drs.getTotalCountLessThanPageSize() != null) {                                               </span>
<span class="192650896043853585" onmouseenter="enter('192650896043853585');" onmouseout="out('192650896043853585');" style=""> 936             listGrid.setTotalCountLessThanPageSize(drs.getTotalCountLessThanPageSize());                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 937         }                                                                                                </span>
<span class="3404741154469919162" onmouseenter="enter('3404741154469919162');" onmouseout="out('3404741154469919162');" style=""> 938         if (drs.getPromptSearch() != null) {                                                             </span>
<span class="-6611592537868887580" onmouseenter="enter('-6611592537868887580');" onmouseout="out('-6611592537868887580');" style=""> 939             listGrid.setPromptSearch(drs.getPromptSearch());                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 940         }                                                                                                </span>
<span  style=""> 941                                                                                                          </span>
<span class="8338561479600990216" onmouseenter="enter('8338561479600990216');" onmouseout="out('8338561479600990216');" style=""> 942         return listGrid;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 943     }                                                                                                    </span>
<span  style=""> 944                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 945     /**                                                                                                  </span>
<span class="7203476035615582402" onmouseenter="enter('7203476035615582402');" onmouseout="out('7203476035615582402');" style=""><abbr title=" 946      * Determines whether or not a particular field in a record is derived. By default this checks the {@link BasicFieldMetadata}"> 946      * Determines whether or not a particular field in a record is derived. By default this checks the {@ðŸ”µ</abbr></span>
<span class="-4069675647285817004" onmouseenter="enter('-4069675647285817004');" onmouseout="out('-4069675647285817004');" style=""> 947      * for the given Property to see if something on the backend has marked it as derived                </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 948      *                                                                                                   </span>
<span class="2786059063596769946" onmouseenter="enter('2786059063596769946');" onmouseout="out('2786059063596769946');" style=""> 949      * @param headerField the header for this recordField                                                </span>
<span class="7447440891213078037" onmouseenter="enter('7447440891213078037');" onmouseout="out('7447440891213078037');" style=""> 950      * @param recordField the recordField being populated                                                </span>
<span class="8242400819290521133" onmouseenter="enter('8242400819290521133');" onmouseout="out('8242400819290521133');" style=""> 951      * @param p the property that relates to this recordField                                            </span>
<span class="2097819629215924500" onmouseenter="enter('2097819629215924500');" onmouseout="out('2097819629215924500');" style=""> 952      * @return whether or not this field is derived                                                      </span>
<span class="5916081075383634288" onmouseenter="enter('5916081075383634288');" onmouseout="out('5916081075383634288');" style=""><abbr title=" 953      * @see {@link #createListGrid(String, List, ListGrid.Type, DynamicResultSet, String, Integer, String, List, String)}"> 953      * @see {@link #createListGrid(String, List, ListGrid.Type, DynamicResultSet, String, Integer, StringðŸ”µ</abbr></span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 954      */                                                                                                  </span>
<span class="-8637325260962674117" onmouseenter="enter('-8637325260962674117');" onmouseout="out('-8637325260962674117');" style=""> 955     protected Boolean isDerivedField(Field headerField, Field recordField, Property p) {                 </span>
<span class="1661867973140043253" onmouseenter="enter('1661867973140043253');" onmouseout="out('1661867973140043253');" style=""> 956         return BooleanUtils.isTrue(((BasicFieldMetadata) p.getMetadata()).getIsDerived());               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 957     }                                                                                                    </span>
<span  style=""> 958                                                                                                          </span>
<span class="7122600949652716635" onmouseenter="enter('7122600949652716635');" onmouseout="out('7122600949652716635');" style=""> 959     protected void setEntityFormFields(ClassMetadata cmd, EntityForm ef, List&lt;Property&gt; properties) {    </span>
<span class="6325387712166170506" onmouseenter="enter('6325387712166170506');" onmouseout="out('6325387712166170506');" style=""> 960         List&lt;Field&gt; homelessFields = new ArrayList&lt;&gt;();                                                  </span>
<span class="4866400253676981137" onmouseenter="enter('4866400253676981137');" onmouseout="out('4866400253676981137');" style=""> 961         List&lt;Field&gt; fieldsWithAssociations = new ArrayList&lt;&gt;();                                          </span>
<span  style=""> 962                                                                                                          </span>
<span class="2404180692851035070" onmouseenter="enter('2404180692851035070');" onmouseout="out('2404180692851035070');" style=""> 963         for (Property property : properties) {                                                           </span>
<span class="-446642995335437650" onmouseenter="enter('-446642995335437650');" onmouseout="out('-446642995335437650');" style=""> 964             if (property.getMetadata() instanceof BasicFieldMetadata) {                                  </span>
<span class="6647472598704819567" onmouseenter="enter('6647472598704819567');" onmouseout="out('6647472598704819567');" style=""> 965                 BasicFieldMetadata fmd = (BasicFieldMetadata) property.getMetadata();                    </span>
<span  style=""> 966                                                                                                          </span>
<span  style=""> 967                                                                                                          </span>
<span class="-4475069031736235173" onmouseenter="enter('-4475069031736235173');" onmouseout="out('-4475069031736235173');" style=""> 968                 if (!ArrayUtils.contains(getFormHiddenVisibilities(), fmd.getVisibility())) {            </span>
<span class="-6270154255315256607" onmouseenter="enter('-6270154255315256607');" onmouseout="out('-6270154255315256607');" style=""><abbr title=" 969                     // Depending on visibility, field for the particular property is not created on the form"> 969                     // Depending on visibility, field for the particular property is not created on the fðŸ”µ</abbr></span>
<span class="5921747215124261866" onmouseenter="enter('5921747215124261866');" onmouseout="out('5921747215124261866');" style=""> 970                     String fieldType = fmd.getFieldType() == null ? null : fmd.getFieldType().toString();</span>
<span  style=""> 971                                                                                                          </span>
<span class="6708987068205782652" onmouseenter="enter('6708987068205782652');" onmouseout="out('6708987068205782652');" style=""> 972                     // Create the field and set some basic attributes                                    </span>
<span class="8116345463116621173" onmouseenter="enter('8116345463116621173');" onmouseout="out('8116345463116621173');" style=""> 973                     Field f;                                                                             </span>
<span  style=""> 974                                                                                                          </span>
<span class="8199797825370303284" onmouseenter="enter('8199797825370303284');" onmouseout="out('8199797825370303284');" style=""> 975                     if (fieldType.equals(SupportedFieldType.BROADLEAF_ENUMERATION.toString())            </span>
<span class="7716913215106788406" onmouseenter="enter('7716913215106788406');" onmouseout="out('7716913215106788406');" style=""> 976                             || fieldType.equals(SupportedFieldType.EXPLICIT_ENUMERATION.toString())      </span>
<span class="2980977699228922095" onmouseenter="enter('2980977699228922095');" onmouseout="out('2980977699228922095');" style=""> 977                             || fieldType.equals(SupportedFieldType.DATA_DRIVEN_ENUMERATION.toString())   </span>
<span class="7388471135187367898" onmouseenter="enter('7388471135187367898');" onmouseout="out('7388471135187367898');" style=""> 978                             || fieldType.equals(SupportedFieldType.EMPTY_ENUMERATION.toString())) {      </span>
<span class="3276444675754694915" onmouseenter="enter('3276444675754694915');" onmouseout="out('3276444675754694915');" style=""><abbr title=" 979                         // We&#x27;re dealing with fields that should render as drop-downs, so set their possible values"> 979                         // We&#x27;re dealing with fields that should render as drop-downs, so set their possiðŸ”µ</abbr></span>
<span class="3203856539989077186" onmouseenter="enter('3203856539989077186');" onmouseout="out('3203856539989077186');" style=""> 980                         f = new ComboField();                                                            </span>
<span class="6120731816730172045" onmouseenter="enter('6120731816730172045');" onmouseout="out('6120731816730172045');" style=""> 981                         ((ComboField) f).setOptions(fmd.getEnumerationValues());                         </span>
<span class="-4628034205462573751" onmouseenter="enter('-4628034205462573751');" onmouseout="out('-4628034205462573751');" style=""><abbr title=" 982                         if (fmd.getHideEnumerationIfEmpty() != null &amp;&amp; fmd.getHideEnumerationIfEmpty().booleanValue()"> 982                         if (fmd.getHideEnumerationIfEmpty() != null &amp;&amp; fmd.getHideEnumerationIfEmpty().boðŸ”µ</abbr></span>
<span class="-6675389158909418663" onmouseenter="enter('-6675389158909418663');" onmouseout="out('-6675389158909418663');" style=""> 983                                 &amp;&amp; ((ComboField) f).getOptions().size() == 0) {                          </span>
<span class="-8620847541322007209" onmouseenter="enter('-8620847541322007209');" onmouseout="out('-8620847541322007209');" style=""> 984                             f.setIsVisible(false);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 985                         }                                                                                </span>
<span class="86452670050279225" onmouseenter="enter('86452670050279225');" onmouseout="out('86452670050279225');" style=""> 986                     } else if (fieldType.equals(SupportedFieldType.CODE.toString())) {                   </span>
<span class="-7620786431462842147" onmouseenter="enter('-7620786431462842147');" onmouseout="out('-7620786431462842147');" style=""> 987                         f = new CodeField();                                                             </span>
<span class="-3831443983095651615" onmouseenter="enter('-3831443983095651615');" onmouseout="out('-3831443983095651615');" style=""> 988                     } else if (fieldType.equals(SupportedFieldType.RULE_SIMPLE.toString())               </span>
<span class="-6155398851072788654" onmouseenter="enter('-6155398851072788654');" onmouseout="out('-6155398851072788654');" style=""> 989                             || fieldType.equals(SupportedFieldType.RULE_SIMPLE_TIME.toString())          </span>
<span class="-7731003048108517996" onmouseenter="enter('-7731003048108517996');" onmouseout="out('-7731003048108517996');" style=""> 990                             || fieldType.equals(SupportedFieldType.RULE_WITH_QUANTITY.toString())) {     </span>
<span class="1510588759783913078" onmouseenter="enter('1510588759783913078');" onmouseout="out('1510588759783913078');" style=""> 991                         // We&#x27;re dealing with rule builders, so we&#x27;ll create those specialized fields    </span>
<span class="439535866421335144" onmouseenter="enter('439535866421335144');" onmouseout="out('439535866421335144');" style=""> 992                         f = new RuleBuilderField();                                                      </span>
<span class="-1112724631648616512" onmouseenter="enter('-1112724631648616512');" onmouseout="out('-1112724631648616512');" style=""> 993                         ((RuleBuilderField) f).setJsonFieldName(property.getName() + &quot;Json&quot;);            </span>
<span class="1732596643653885393" onmouseenter="enter('1732596643653885393');" onmouseout="out('1732596643653885393');" style=""> 994                         ((RuleBuilderField) f).setDataWrapper(new DataWrapper());                        </span>
<span class="7228657391391942788" onmouseenter="enter('7228657391391942788');" onmouseout="out('7228657391391942788');" style=""> 995                         ((RuleBuilderField) f).setFieldBuilder(fmd.getRuleIdentifier());                 </span>
<span class="6741378243253493035" onmouseenter="enter('6741378243253493035');" onmouseout="out('6741378243253493035');" style=""> 996                         ((RuleBuilderField) f).setDisplayType(fmd.getDisplayType().toString());          </span>
<span  style=""> 997                                                                                                          </span>
<span class="4466331963824990789" onmouseenter="enter('4466331963824990789');" onmouseout="out('4466331963824990789');" style=""> 998                         String blankJsonString =  &quot;{\&quot;data\&quot;:[]}&quot;;                                       </span>
<span class="-7753853041517398518" onmouseenter="enter('-7753853041517398518');" onmouseout="out('-7753853041517398518');" style=""> 999                         ((RuleBuilderField) f).setJson(blankJsonString);                                 </span>
<span class="-6647315222721447684" onmouseenter="enter('-6647315222721447684');" onmouseout="out('-6647315222721447684');" style="">1000                         DataWrapper dw = convertJsonToDataWrapper(blankJsonString);                      </span>
<span class="-3408161092817379645" onmouseenter="enter('-3408161092817379645');" onmouseout="out('-3408161092817379645');" style="">1001                         if (dw != null) {                                                                </span>
<span class="-5096298828793309103" onmouseenter="enter('-5096298828793309103');" onmouseout="out('-5096298828793309103');" style="">1002                             ((RuleBuilderField) f).setDataWrapper(dw);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1003                         }                                                                                </span>
<span  style="">1004                                                                                                          </span>
<span class="3046581447506121497" onmouseenter="enter('3046581447506121497');" onmouseout="out('3046581447506121497');" style="">1005                         if (fieldType.equals(SupportedFieldType.RULE_SIMPLE.toString())) {               </span>
<span class="-1186924665685770541" onmouseenter="enter('-1186924665685770541');" onmouseout="out('-1186924665685770541');" style="">1006                             ((RuleBuilderField) f).setRuleType(&quot;rule-builder-simple&quot;);                   </span>
<span class="-4608843455051291020" onmouseenter="enter('-4608843455051291020');" onmouseout="out('-4608843455051291020');" style="">1007                         } else if (fieldType.equals(SupportedFieldType.RULE_WITH_QUANTITY.toString())) { </span>
<span class="-4088622747979962571" onmouseenter="enter('-4088622747979962571');" onmouseout="out('-4088622747979962571');" style="">1008                             ((RuleBuilderField) f).setRuleType(&quot;rule-builder-with-quantity&quot;);            </span>
<span class="6638316396690215710" onmouseenter="enter('6638316396690215710');" onmouseout="out('6638316396690215710');" style="">1009                         } else if (fieldType.equals(SupportedFieldType.RULE_SIMPLE_TIME.toString())) {   </span>
<span class="-5927097931654974492" onmouseenter="enter('-5927097931654974492');" onmouseout="out('-5927097931654974492');" style="">1010                             ((RuleBuilderField) f).setRuleType(&quot;rule-builder-simple-time&quot;);              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1011                         }                                                                                </span>
<span class="-76815898427635828" onmouseenter="enter('-76815898427635828');" onmouseout="out('-76815898427635828');" style="">1012                     } else if (LookupType.DROPDOWN.equals(fmd.getLookupType())) {                        </span>
<span class="2821913588763042756" onmouseenter="enter('2821913588763042756');" onmouseout="out('2821913588763042756');" style=""><abbr title="1013                         // We&#x27;re dealing with a to-one field that wants to be rendered as a dropdown instead of in a">1013                         // We&#x27;re dealing with a to-one field that wants to be rendered as a dropdown instðŸ”µ</abbr></span>
<span class="566288030321676498" onmouseenter="enter('566288030321676498');" onmouseout="out('566288030321676498');" style=""><abbr title="1014                         // modal, so we&#x27;ll provision the combo field here. Available options will be set as part of a">1014                         // modal, so we&#x27;ll provision the combo field here. Available options will be set ðŸ”µ</abbr></span>
<span class="7172718814241780846" onmouseenter="enter('7172718814241780846');" onmouseout="out('7172718814241780846');" style="">1015                         // subsequent operation                                                          </span>
<span class="3203856539989077186" onmouseenter="enter('3203856539989077186');" onmouseout="out('3203856539989077186');" style="">1016                         f = new ComboField();                                                            </span>
<span class="-1555139312653833561" onmouseenter="enter('-1555139312653833561');" onmouseout="out('-1555139312653833561');" style="">1017                     } else if (fieldType.equals(SupportedFieldType.MEDIA.toString())) {                  </span>
<span class="7851932113124846293" onmouseenter="enter('7851932113124846293');" onmouseout="out('7851932113124846293');" style="">1018                         f = new MediaField();                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1019                     } else {                                                                             </span>
<span class="-4540598357129068716" onmouseenter="enter('-4540598357129068716');" onmouseout="out('-4540598357129068716');" style="">1020                         // Create a default field since there was no specialized handler                 </span>
<span class="8445500457207430044" onmouseenter="enter('8445500457207430044');" onmouseout="out('8445500457207430044');" style="">1021                         f = new Field();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1022                     }                                                                                    </span>
<span  style="">1023                                                                                                          </span>
<span class="-1589475346053267562" onmouseenter="enter('-1589475346053267562');" onmouseout="out('-1589475346053267562');" style="">1024                     Boolean required = fmd.getRequiredOverride();                                        </span>
<span class="-1593138839980229401" onmouseenter="enter('-1593138839980229401');" onmouseout="out('-1593138839980229401');" style="">1025                     if (required == null) {                                                              </span>
<span class="-6716674851132060026" onmouseenter="enter('-6716674851132060026');" onmouseout="out('-6716674851132060026');" style="">1026                         required = fmd.getRequired();                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1027                     }                                                                                    </span>
<span  style="">1028                                                                                                          </span>
<span class="981510687991453845" onmouseenter="enter('981510687991453845');" onmouseout="out('981510687991453845');" style="">1029                     Boolean allowNoValueEnum = fmd.getAllowNoValueEnumOption();                          </span>
<span class="2453461306820272647" onmouseenter="enter('2453461306820272647');" onmouseout="out('2453461306820272647');" style="">1030                     if (allowNoValueEnum != null) {                                                      </span>
<span class="511249052530710714" onmouseenter="enter('511249052530710714');" onmouseout="out('511249052530710714');" style="">1031                         f.setAllowNoValueEnumOption(allowNoValueEnum);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1032                     }                                                                                    </span>
<span  style="">1033                                                                                                          </span>
<span class="-1986899161047350602" onmouseenter="enter('-1986899161047350602');" onmouseout="out('-1986899161047350602');" style="">1034                     f.withName(property.getName())                                                       </span>
<span class="-6128468031482469561" onmouseenter="enter('-6128468031482469561');" onmouseout="out('-6128468031482469561');" style="">1035                      .withFieldType(fieldType)                                                           </span>
<span class="-7927263150118151701" onmouseenter="enter('-7927263150118151701');" onmouseout="out('-7927263150118151701');" style="">1036                      .withFieldComponentRenderer(getFieldComponentRenderer(fmd))                         </span>
<span class="-4099331664389877516" onmouseenter="enter('-4099331664389877516');" onmouseout="out('-4099331664389877516');" style="">1037                      .withGridFieldComponentRenderer(getGridFieldComponentRenderer(fmd))                 </span>
<span class="654425426992808056" onmouseenter="enter('654425426992808056');" onmouseout="out('654425426992808056');" style="">1038                      .withOrder(fmd.getOrder())                                                          </span>
<span class="8839654145383232945" onmouseenter="enter('8839654145383232945');" onmouseout="out('8839654145383232945');" style="">1039                      .withFriendlyName(fmd.getFriendlyName())                                            </span>
<span class="3058247827263925638" onmouseenter="enter('3058247827263925638');" onmouseout="out('3058247827263925638');" style="">1040                      .withForeignKeyDisplayValueProperty(fmd.getForeignKeyDisplayValueProperty())        </span>
<span class="3198496511046166958" onmouseenter="enter('3198496511046166958');" onmouseout="out('3198496511046166958');" style="">1041                      .withForeignKeyClass(fmd.getForeignKeyClass())                                      </span>
<span class="-2338070414188990290" onmouseenter="enter('-2338070414188990290');" onmouseout="out('-2338070414188990290');" style="">1042                      .withForeignKeySectionPath(getAdminSectionPath(fmd.getForeignKeyClass()))           </span>
<span class="-6320050738227309064" onmouseenter="enter('-6320050738227309064');" onmouseout="out('-6320050738227309064');" style=""><abbr title="1043                      .withOwningEntityClass(fmd.getOwningClass()!=null?fmd.getOwningClass():fmd.getInheritedFromType())">1043                      .withOwningEntityClass(fmd.getOwningClass()!=null?fmd.getOwningClass():fmd.getInheriðŸ”µ</abbr></span>
<span class="3975803686122841065" onmouseenter="enter('3975803686122841065');" onmouseout="out('3975803686122841065');" style="">1044                      .withRequired(required)                                                             </span>
<span class="359983231603260957" onmouseenter="enter('359983231603260957');" onmouseout="out('359983231603260957');" style="">1045                      .withReadOnly(fmd.getReadOnly())                                                    </span>
<span class="5042583388418599955" onmouseenter="enter('5042583388418599955');" onmouseout="out('5042583388418599955');" style="">1046                      .withTranslatable(fmd.getTranslatable())                                            </span>
<span class="850947769734677156" onmouseenter="enter('850947769734677156');" onmouseout="out('850947769734677156');" style=""><abbr title="1047                      .withAlternateOrdering((Boolean) fmd.getAdditionalMetadata().get(Field.ALTERNATE_ORDERING))">1047                      .withAlternateOrdering((Boolean) fmd.getAdditionalMetadata().get(Field.ALTERNATE_ORDðŸ”µ</abbr></span>
<span class="3384004197069247045" onmouseenter="enter('3384004197069247045');" onmouseout="out('3384004197069247045');" style="">1048                      .withLargeEntry(fmd.isLargeEntry())                                                 </span>
<span class="8358279492731939259" onmouseenter="enter('8358279492731939259');" onmouseout="out('8358279492731939259');" style="">1049                      .withHint(fmd.getHint())                                                            </span>
<span class="2950855740871622056" onmouseenter="enter('2950855740871622056');" onmouseout="out('2950855740871622056');" style="">1050                      .withTooltip(fmd.getTooltip())                                                      </span>
<span class="-4063412654801023815" onmouseenter="enter('-4063412654801023815');" onmouseout="out('-4063412654801023815');" style="">1051                      .withHelp(fmd.getHelpText())                                                        </span>
<span class="-2322162613997207656" onmouseenter="enter('-2322162613997207656');" onmouseout="out('-2322162613997207656');" style="">1052                      .withTypeaheadEnabled(fmd.getEnableTypeaheadLookup())                               </span>
<span class="3999494576911658619" onmouseenter="enter('3999494576911658619');" onmouseout="out('3999494576911658619');" style="">1053                      .withCanLinkToExternalEntity(fmd.getCanLinkToExternalEntity())                      </span>
<span class="6462182061714529877" onmouseenter="enter('6462182061714529877');" onmouseout="out('6462182061714529877');" style="">1054                      .withAssociatedFieldName(fmd.getAssociatedFieldName());                             </span>
<span  style="">1055                                                                                                          </span>
<span class="-269468944390639664" onmouseenter="enter('-269468944390639664');" onmouseout="out('-269468944390639664');" style="">1056                     String defaultValue = fmd.getDefaultValue();                                         </span>
<span class="517621878739872731" onmouseenter="enter('517621878739872731');" onmouseout="out('517621878739872731');" style="">1057                     if (defaultValue != null) {                                                          </span>
<span class="4532975392407713565" onmouseenter="enter('4532975392407713565');" onmouseout="out('4532975392407713565');" style="">1058                         defaultValue = extractDefaultValueFromFieldData(fieldType, fmd);                 </span>
<span class="-4862494673796786760" onmouseenter="enter('-4862494673796786760');" onmouseout="out('-4862494673796786760');" style="">1059                         f.withValue(defaultValue);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1060                     }                                                                                    </span>
<span  style="">1061                                                                                                          </span>
<span class="-2242732727084199547" onmouseenter="enter('-2242732727084199547');" onmouseout="out('-2242732727084199547');" style="">1062                     if (StringUtils.isBlank(f.getFriendlyName())) {                                      </span>
<span class="4951409134206579242" onmouseenter="enter('4951409134206579242');" onmouseout="out('4951409134206579242');" style="">1063                         f.setFriendlyName(f.getName());                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1064                     }                                                                                    </span>
<span  style="">1065                                                                                                          </span>
<span class="4434831944931004928" onmouseenter="enter('4434831944931004928');" onmouseout="out('4434831944931004928');" style="">1066                     // If is form hidden, set visible to false                                           </span>
<span class="-7962146999992485704" onmouseenter="enter('-7962146999992485704');" onmouseout="out('-7962146999992485704');" style="">1067                     if (VisibilityEnum.FORM_EXPLICITLY_HIDDEN.equals(fmd.getVisibility())) {             </span>
<span class="-8620847541322007209" onmouseenter="enter('-8620847541322007209');" onmouseout="out('-8620847541322007209');" style="">1068                         f.setIsVisible(false);                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1069                     }                                                                                    </span>
<span  style="">1070                                                                                                          </span>
<span class="5627296841760402753" onmouseenter="enter('5627296841760402753');" onmouseout="out('5627296841760402753');" style="">1071                     if (VisibilityEnum.VISIBLE_ALL.equals(fmd.getVisibility())) {                        </span>
<span class="2458976513889241970" onmouseenter="enter('2458976513889241970');" onmouseout="out('2458976513889241970');" style="">1072                         f.setIsVisible(true);                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1073                     }                                                                                    </span>
<span  style="">1074                                                                                                          </span>
<span class="5834486891091757584" onmouseenter="enter('5834486891091757584');" onmouseout="out('5834486891091757584');" style="">1075                     // Add the field to the appropriate FieldGroup                                       </span>
<span class="-1630394947978608902" onmouseenter="enter('-1630394947978608902');" onmouseout="out('-1630394947978608902');" style="">1076                     if (fmd.getGroup() == null) {                                                        </span>
<span class="3071880473996022899" onmouseenter="enter('3071880473996022899');" onmouseout="out('3071880473996022899');" style="">1077                         homelessFields.add(f);                                                           </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1078                     } else {                                                                             </span>
<span class="-627881575057280692" onmouseenter="enter('-627881575057280692');" onmouseout="out('-627881575057280692');" style=""><abbr title="1079                         ef.addField(cmd, f, fmd.getGroup(), fmd.getGroupOrder(), fmd.getTab(), fmd.getTabOrder());">1079                         ef.addField(cmd, f, fmd.getGroup(), fmd.getGroupOrder(), fmd.getTab(), fmd.getTabðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1080                     }                                                                                    </span>
<span  style="">1081                                                                                                          </span>
<span class="-260794109391612652" onmouseenter="enter('-260794109391612652');" onmouseout="out('-260794109391612652');" style="">1082                     if (StringUtils.isNotEmpty(fmd.getAssociatedFieldName())) {                          </span>
<span class="1585765122221468977" onmouseenter="enter('1585765122221468977');" onmouseout="out('1585765122221468977');" style="">1083                         fieldsWithAssociations.add(f);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1084                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1085                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1086             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1087         }                                                                                                </span>
<span  style="">1088                                                                                                          </span>
<span class="6148030130019845419" onmouseenter="enter('6148030130019845419');" onmouseout="out('6148030130019845419');" style="">1089         for (Field f : homelessFields) {                                                                 </span>
<span class="-6046258263556396205" onmouseenter="enter('-6046258263556396205');" onmouseout="out('-6046258263556396205');" style="">1090             ef.addField(cmd, f, null, null, null, null);                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1091         }                                                                                                </span>
<span  style="">1092                                                                                                          </span>
<span class="-3286982672520556792" onmouseenter="enter('-3286982672520556792');" onmouseout="out('-3286982672520556792');" style="">1093         for (Field f : fieldsWithAssociations) {                                                         </span>
<span class="785772779687320855" onmouseenter="enter('785772779687320855');" onmouseout="out('785772779687320855');" style="">1094             Field associatedField = findAssociatedField(ef, f);                                          </span>
<span class="6919514124287833745" onmouseenter="enter('6919514124287833745');" onmouseout="out('6919514124287833745');" style="">1095             if (associatedField != null) {                                                               </span>
<span class="-9095335942205451536" onmouseenter="enter('-9095335942205451536');" onmouseout="out('-9095335942205451536');" style="">1096                 associatedField.setShouldRender(false);                                                  </span>
<span class="-2878946802658158988" onmouseenter="enter('-2878946802658158988');" onmouseout="out('-2878946802658158988');" style="">1097                 f.setAssociatedFieldName(associatedField.getName());                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1098             } else {                                                                                     </span>
<span class="7502764524857913063" onmouseenter="enter('7502764524857913063');" onmouseout="out('7502764524857913063');" style="">1099                 f.setAssociatedFieldName(null);                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1100             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1101         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1102     }                                                                                                    </span>
<span  style="">1103                                                                                                          </span>
<span class="5762152267566694667" onmouseenter="enter('5762152267566694667');" onmouseout="out('5762152267566694667');" style="">1104     protected String getFieldComponentRenderer(BasicFieldMetadata fmd) {                                 </span>
<span class="-6767392947458941920" onmouseenter="enter('-6767392947458941920');" onmouseout="out('-6767392947458941920');" style="">1105         if (StringUtils.isNotBlank(fmd.getFieldComponentRendererTemplate())) {                           </span>
<span class="-4402549852767313598" onmouseenter="enter('-4402549852767313598');" onmouseout="out('-4402549852767313598');" style="">1106             return fmd.getFieldComponentRendererTemplate();                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1107         }                                                                                                </span>
<span class="-2438701386053680498" onmouseenter="enter('-2438701386053680498');" onmouseout="out('-2438701386053680498');" style="">1108         return fmd.getFieldComponentRenderer()==null?null:fmd.getFieldComponentRenderer().toString();    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1109     }                                                                                                    </span>
<span  style="">1110                                                                                                          </span>
<span class="590879222954667418" onmouseenter="enter('590879222954667418');" onmouseout="out('590879222954667418');" style="">1111     protected String getGridFieldComponentRenderer(BasicFieldMetadata fmd) {                             </span>
<span class="7087363204431348668" onmouseenter="enter('7087363204431348668');" onmouseout="out('7087363204431348668');" style="">1112         if (StringUtils.isNotBlank(fmd.getGridFieldComponentRendererTemplate())) {                       </span>
<span class="5883340390214386055" onmouseenter="enter('5883340390214386055');" onmouseout="out('5883340390214386055');" style="">1113             return fmd.getGridFieldComponentRendererTemplate();                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1114         }                                                                                                </span>
<span class="-7287009246855470147" onmouseenter="enter('-7287009246855470147');" onmouseout="out('-7287009246855470147');" style=""><abbr title="1115         return fmd.getGridFieldComponentRenderer()==null?null:fmd.getGridFieldComponentRenderer().toString();">1115         return fmd.getGridFieldComponentRenderer()==null?null:fmd.getGridFieldComponentRenderer().toStrinðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1116     }                                                                                                    </span>
<span  style="">1117                                                                                                          </span>
<span class="-6562218165361923864" onmouseenter="enter('-6562218165361923864');" onmouseout="out('-6562218165361923864');" style="">1118     private Field findAssociatedField(EntityForm ef, Field f) {                                          </span>
<span class="4174722207334262365" onmouseenter="enter('4174722207334262365');" onmouseout="out('4174722207334262365');" style="">1119         // Try on the parent object                                                                      </span>
<span class="-1388610369938356597" onmouseenter="enter('-1388610369938356597');" onmouseout="out('-1388610369938356597');" style="">1120         Field associatedField = ef.findField(f.getAssociatedFieldName());                                </span>
<span  style="">1121                                                                                                          </span>
<span class="-8057832969882318537" onmouseenter="enter('-8057832969882318537');" onmouseout="out('-8057832969882318537');" style="">1122         if (associatedField == null) {                                                                   </span>
<span class="-4315839339096222496" onmouseenter="enter('-4315839339096222496');" onmouseout="out('-4315839339096222496');" style="">1123             // Check the field&#x27;s path                                                                    </span>
<span class="-3489350751131411992" onmouseenter="enter('-3489350751131411992');" onmouseout="out('-3489350751131411992');" style="">1124             String[] fieldPathParts = f.getName().split(&quot;\\.&quot;);                                          </span>
<span class="1068980887755244265" onmouseenter="enter('1068980887755244265');" onmouseout="out('1068980887755244265');" style="">1125             String testPath = &quot;&quot;;                                                                        </span>
<span  style="">1126                                                                                                          </span>
<span class="8677207579218271674" onmouseenter="enter('8677207579218271674');" onmouseout="out('8677207579218271674');" style="">1127             for (String path : fieldPathParts) {                                                         </span>
<span class="-680931118424370884" onmouseenter="enter('-680931118424370884');" onmouseout="out('-680931118424370884');" style="">1128                 testPath += path + &quot;.&quot;;                                                                  </span>
<span  style="">1129                                                                                                          </span>
<span class="-7538860418203958404" onmouseenter="enter('-7538860418203958404');" onmouseout="out('-7538860418203958404');" style="">1130                 associatedField = ef.findField(testPath + f.getAssociatedFieldName());                   </span>
<span class="6919514124287833745" onmouseenter="enter('6919514124287833745');" onmouseout="out('6919514124287833745');" style="">1131                 if (associatedField != null) {                                                           </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1132                     break;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1133                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1134             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1135         }                                                                                                </span>
<span class="6563544998135133572" onmouseenter="enter('6563544998135133572');" onmouseout="out('6563544998135133572');" style="">1136         return associatedField;                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1137     }                                                                                                    </span>
<span  style="">1138                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1139     /**                                                                                                  </span>
<span class="4647529469504582079" onmouseenter="enter('4647529469504582079');" onmouseout="out('4647529469504582079');" style="">1140      * This method gets the {@link AdminSection} for the given foreignKeyClass parameter. If none exists,</span>
<span class="2236731749674454246" onmouseenter="enter('2236731749674454246');" onmouseout="out('2236731749674454246');" style="">1141      * it returns the foreignKeyClass.                                                                   </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1142      *                                                                                                   </span>
<span class="-7514279057842438906" onmouseenter="enter('-7514279057842438906');" onmouseout="out('-7514279057842438906');" style="">1143      * @param foreignKeyClass the {@link String} class name                                              </span>
<span class="7993230679639641523" onmouseenter="enter('7993230679639641523');" onmouseout="out('7993230679639641523');" style="">1144      * @return the admin section pathname                                                                </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1145      */                                                                                                  </span>
<span class="-6189454574455820362" onmouseenter="enter('-6189454574455820362');" onmouseout="out('-6189454574455820362');" style="">1146     protected String getAdminSectionPath(String foreignKeyClass) {                                       </span>
<span class="8135436521484469970" onmouseenter="enter('8135436521484469970');" onmouseout="out('8135436521484469970');" style="">1147         if (foreignKeyClass != null) {                                                                   </span>
<span class="-4650736007503046520" onmouseenter="enter('-4650736007503046520');" onmouseout="out('-4650736007503046520');" style=""><abbr title="1148             AdminSection foreignKeySection = adminNavigationService.findAdminSectionByClassAndSectionId(foreignKeyClass, null);">1148             AdminSection foreignKeySection = adminNavigationService.findAdminSectionByClassAndSectionId(fðŸ”µ</abbr></span>
<span class="-7201502785940326159" onmouseenter="enter('-7201502785940326159');" onmouseout="out('-7201502785940326159');" style="">1149             return foreignKeySection != null ? foreignKeySection.getUrl() : foreignKeyClass;             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1150         }                                                                                                </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1151         return null;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1152     }                                                                                                    </span>
<span  style="">1153                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1154     /**                                                                                                  </span>
<span class="-9148493238200404936" onmouseenter="enter('-9148493238200404936');" onmouseout="out('-9148493238200404936');" style=""><abbr title="1155      * NOTE: This method will attempt to merge tabs if the unprocessed {@link TabMetadata#getTabName()} is equal to">1155      * NOTE: This method will attempt to merge tabs if the unprocessed {@link TabMetadata#getTabName()} iðŸ”µ</abbr></span>
<span class="-1274816497587979877" onmouseenter="enter('-1274816497587979877');" onmouseout="out('-1274816497587979877');" style="">1156      *  the processed value of another tab.                                                              </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1157      *                                                                                                   </span>
<span class="-2406703893472258014" onmouseenter="enter('-2406703893472258014');" onmouseout="out('-2406703893472258014');" style="">1158      * For example, if {@link TabMetadata#getTabName()} is &quot;Example&quot;, there is a another tab where       </span>
<span class="9184140520214431771" onmouseenter="enter('9184140520214431771');" onmouseout="out('9184140520214431771');" style=""><abbr title="1159      *  {@link TabMetadata#getTabName()} is &quot;Example_Tab&quot;, and a message property where &#x27;Example_Tab=Example&#x27;,">1159      *  {@link TabMetadata#getTabName()} is &quot;Example_Tab&quot;, and a message property where &#x27;Example_Tab=ExamðŸ”µ</abbr></span>
<span class="8352702158102966043" onmouseenter="enter('8352702158102966043');" onmouseout="out('8352702158102966043');" style=""><abbr title="1160      *  then the tabs should be merged together, so that we do not end up rendering multiple &quot;Example&quot; tabs.">1160      *  then the tabs should be merged together, so that we do not end up rendering multiple &quot;Example&quot; taðŸ”µ</abbr></span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1161      */                                                                                                  </span>
<span class="-3548818374011565463" onmouseenter="enter('-3548818374011565463');" onmouseout="out('-3548818374011565463');" style="">1162     protected void setEntityFormTabsAndGroups(EntityForm ef, Map&lt;String, TabMetadata&gt; tabMetadataMap) {  </span>
<span class="-1610887690100779398" onmouseenter="enter('-1610887690100779398');" onmouseout="out('-1610887690100779398');" style="">1163         if (tabMetadataMap != null) {                                                                    </span>
<span class="8239819812127968949" onmouseenter="enter('8239819812127968949');" onmouseout="out('8239819812127968949');" style="">1164             Set&lt;String&gt; tabMetadataKeySet = tabMetadataMap.keySet();                                     </span>
<span class="-8816277474934611824" onmouseenter="enter('-8816277474934611824');" onmouseout="out('-8816277474934611824');" style="">1165             for (String tabKey : tabMetadataKeySet) {                                                    </span>
<span class="7310777629515294934" onmouseenter="enter('7310777629515294934');" onmouseout="out('7310777629515294934');" style="">1166                 TabMetadata tabMetadata = tabMetadataMap.get(tabKey);                                    </span>
<span class="-3382451411952830270" onmouseenter="enter('-3382451411952830270');" onmouseout="out('-3382451411952830270');" style=""><abbr title="1167                 String unprocessedTabName = getUnprocessedNameOfMatchingTab(tabMetadata, tabMetadataKeySet);">1167                 String unprocessedTabName = getUnprocessedNameOfMatchingTab(tabMetadata, tabMetadataKeySeðŸ”µ</abbr></span>
<span  style="">1168                                                                                                          </span>
<span class="-4558225351015241817" onmouseenter="enter('-4558225351015241817');" onmouseout="out('-4558225351015241817');" style="">1169                 if (foundMatchingTab(unprocessedTabName)) {                                              </span>
<span class="7976020367549586090" onmouseenter="enter('7976020367549586090');" onmouseout="out('7976020367549586090');" style="">1170                     if (!tabExists(ef, unprocessedTabName)) {                                            </span>
<span class="-6968658869865565527" onmouseenter="enter('-6968658869865565527');" onmouseout="out('-6968658869865565527');" style="">1171                         TabMetadata originalTabMetadata = tabMetadataMap.get(unprocessedTabName);        </span>
<span class="6840551509140741312" onmouseenter="enter('6840551509140741312');" onmouseout="out('6840551509140741312');" style="">1172                         unprocessedTabName = ef.addTabFromTabMetadata(originalTabMetadata);              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1173                     }                                                                                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1174                 } else {                                                                                 </span>
<span class="2531268367420417827" onmouseenter="enter('2531268367420417827');" onmouseout="out('2531268367420417827');" style="">1175                     if (tabExists(ef, tabKey)) {                                                         </span>
<span class="3894487325805599765" onmouseenter="enter('3894487325805599765');" onmouseout="out('3894487325805599765');" style="">1176                         unprocessedTabName = tabKey;                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1177                     } else {                                                                             </span>
<span class="-854176188216766174" onmouseenter="enter('-854176188216766174');" onmouseout="out('-854176188216766174');" style="">1178                         unprocessedTabName = ef.addTabFromTabMetadata(tabMetadata);                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1179                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1180                 }                                                                                        </span>
<span  style="">1181                                                                                                          </span>
<span class="4976299653458575754" onmouseenter="enter('4976299653458575754');" onmouseout="out('4976299653458575754');" style="">1182                 Set&lt;String&gt; groupMetadataKeySet = tabMetadata.getGroupMetadata().keySet();               </span>
<span class="-7961344655248674499" onmouseenter="enter('-7961344655248674499');" onmouseout="out('-7961344655248674499');" style="">1183                 for (String groupKey : groupMetadataKeySet) {                                            </span>
<span class="6345765707562916689" onmouseenter="enter('6345765707562916689');" onmouseout="out('6345765707562916689');" style=""><abbr title="1184                     ef.addGroupFromGroupMetadata(tabMetadata.getGroupMetadata().get(groupKey), unprocessedTabName);">1184                     ef.addGroupFromGroupMetadata(tabMetadata.getGroupMetadata().get(groupKey), unprocesseðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1185                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1186             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1187         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1188     }                                                                                                    </span>
<span  style="">1189                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1190     /**                                                                                                  </span>
<span class="7306113150058239600" onmouseenter="enter('7306113150058239600');" onmouseout="out('7306113150058239600');" style="">1191      * Search for any other tab on the target entity that has the same display value                     </span>
<span class="240467368059923303" onmouseenter="enter('240467368059923303');" onmouseout="out('240467368059923303');" style="">1192      *  as the value provided tab name.                                                                  </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1193      *                                                                                                   </span>
<span class="-4650758346108360443" onmouseenter="enter('-4650758346108360443');" onmouseout="out('-4650758346108360443');" style=""><abbr title="1194      * This assumes that the {@link TabMetadata#getTabName()} is in the form of a processed message property.">1194      * This assumes that the {@link TabMetadata#getTabName()} is in the form of a processed message propeðŸ”µ</abbr></span>
<span class="-478812681452175174" onmouseenter="enter('-478812681452175174');" onmouseout="out('-478812681452175174');" style=""><abbr title="1195      *  For example, if {@link TabMetadata#getTabName()} is &quot;Example&quot;, there is a tabKey from the tabMetadataKeySet">1195      *  For example, if {@link TabMetadata#getTabName()} is &quot;Example&quot;, there is a tabKey from the tabMetaðŸ”µ</abbr></span>
<span class="818185943405205448" onmouseenter="enter('818185943405205448');" onmouseout="out('818185943405205448');" style=""><abbr title="1196      *  that is &quot;Example_Tab&quot;, and a message property where &#x27;Example_Tab=Example&#x27;, then this method should return">1196      *  that is &quot;Example_Tab&quot;, and a message property where &#x27;Example_Tab=Example&#x27;, then this method shoulðŸ”µ</abbr></span>
<span class="-3733456167855611550" onmouseenter="enter('-3733456167855611550');" onmouseout="out('-3733456167855611550');" style="">1197      *  &quot;Example_Tab&quot; which will end up causing the tabs to merge together.                              </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1198      *                                                                                                   </span>
<span class="6715625924911503951" onmouseenter="enter('6715625924911503951');" onmouseout="out('6715625924911503951');" style=""><abbr title="1199      * If a tab with the same display value cannot be found, then we should return null to indicate that there">1199      * If a tab with the same display value cannot be found, then we should return null to indicate that ðŸ”µ</abbr></span>
<span class="-816382718997149765" onmouseenter="enter('-816382718997149765');" onmouseout="out('-816382718997149765');" style="">1200      *  is no matching tab with the same processed tabName value.                                        </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1201      */                                                                                                  </span>
<span class="2531890089338051353" onmouseenter="enter('2531890089338051353');" onmouseout="out('2531890089338051353');" style=""><abbr title="1202     protected String getUnprocessedNameOfMatchingTab(TabMetadata tabMetadata, Set&lt;String&gt; tabMetadataKeySet) {">1202     protected String getUnprocessedNameOfMatchingTab(TabMetadata tabMetadata, Set&lt;String&gt; tabMetadataKeySðŸ”µ</abbr></span>
<span class="-8816277474934611824" onmouseenter="enter('-8816277474934611824');" onmouseout="out('-8816277474934611824');" style="">1203         for (String tabKey : tabMetadataKeySet) {                                                        </span>
<span class="-5779793862119901002" onmouseenter="enter('-5779793862119901002');" onmouseout="out('-5779793862119901002');" style="">1204             String tabName = tabMetadata.getTabName();                                                   </span>
<span  style="">1205                                                                                                          </span>
<span class="-8422051325525888747" onmouseenter="enter('-8422051325525888747');" onmouseout="out('-8422051325525888747');" style="">1206             if (processedTabKeyMatchesTabName(tabName, tabKey)) {                                        </span>
<span class="3937451821444963358" onmouseenter="enter('3937451821444963358');" onmouseout="out('3937451821444963358');" style="">1207                 return tabKey;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1208             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1209         }                                                                                                </span>
<span  style="">1210                                                                                                          </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1211         return null;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1212     }                                                                                                    </span>
<span  style="">1213                                                                                                          </span>
<span class="-1619438245958020737" onmouseenter="enter('-1619438245958020737');" onmouseout="out('-1619438245958020737');" style="">1214     protected boolean processedTabKeyMatchesTabName(String tabName, String candidateTabKey) {            </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1215         try {                                                                                            </span>
<span class="-7659299375574203210" onmouseenter="enter('-7659299375574203210');" onmouseout="out('-7659299375574203210');" style="">1216             String processedCandidateTabKey = BLCMessageUtils.getMessage(candidateTabKey);               </span>
<span class="-2617676223106948028" onmouseenter="enter('-2617676223106948028');" onmouseout="out('-2617676223106948028');" style=""><abbr title="1217             boolean candidateTabKeyWasProcessed = !StringUtils.equals(candidateTabKey, processedCandidateTabKey);">1217             boolean candidateTabKeyWasProcessed = !StringUtils.equals(candidateTabKey, processedCandidateðŸ”µ</abbr></span>
<span  style="">1218                                                                                                          </span>
<span class="2100898845031278709" onmouseenter="enter('2100898845031278709');" onmouseout="out('2100898845031278709');" style=""><abbr title="1219             return candidateTabKeyWasProcessed &amp;&amp; StringUtils.equalsIgnoreCase(tabName, processedCandidateTabKey);">1219             return candidateTabKeyWasProcessed &amp;&amp; StringUtils.equalsIgnoreCase(tabName, processedCandidatðŸ”µ</abbr></span>
<span class="-2410148316212931681" onmouseenter="enter('-2410148316212931681');" onmouseout="out('-2410148316212931681');" style="">1220         } catch (NoSuchMessageException e) {                                                             </span>
<span class="1284296105156752555" onmouseenter="enter('1284296105156752555');" onmouseout="out('1284296105156752555');" style="">1221             LOG.debug(&quot;No such message exists for &quot; + candidateTabKey, e);                               </span>
<span  style="">1222                                                                                                          </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1223             return false;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1224         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1225     }                                                                                                    </span>
<span  style="">1226                                                                                                          </span>
<span class="-7105644214565709555" onmouseenter="enter('-7105644214565709555');" onmouseout="out('-7105644214565709555');" style="">1227     protected boolean foundMatchingTab(String unprocessedTabName) {                                      </span>
<span class="6373538944534305470" onmouseenter="enter('6373538944534305470');" onmouseout="out('6373538944534305470');" style="">1228         return (unprocessedTabName != null);                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1229     }                                                                                                    </span>
<span  style="">1230                                                                                                          </span>
<span class="-4736520597342818391" onmouseenter="enter('-4736520597342818391');" onmouseout="out('-4736520597342818391');" style="">1231     protected boolean tabExists(EntityForm ef, String tabKey) {                                          </span>
<span class="-9204309431556138424" onmouseenter="enter('-9204309431556138424');" onmouseout="out('-9204309431556138424');" style="">1232         return (ef.findTab(tabKey) != null);                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1233     }                                                                                                    </span>
<span  style="">1234                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1235     @Override                                                                                            </span>
<span class="1718091831588260637" onmouseenter="enter('1718091831588260637');" onmouseout="out('1718091831588260637');" style="">1236     public String extractDefaultValueFromFieldData(String fieldType, BasicFieldMetadata fmd) {           </span>
<span class="-269468944390639664" onmouseenter="enter('-269468944390639664');" onmouseout="out('-269468944390639664');" style="">1237         String defaultValue = fmd.getDefaultValue();                                                     </span>
<span class="8489757536552213717" onmouseenter="enter('8489757536552213717');" onmouseout="out('8489757536552213717');" style="">1238         if (fieldType.equals(SupportedFieldType.RULE_SIMPLE.toString())                                  </span>
<span class="-6155398851072788654" onmouseenter="enter('-6155398851072788654');" onmouseout="out('-6155398851072788654');" style="">1239                 || fieldType.equals(SupportedFieldType.RULE_SIMPLE_TIME.toString())                      </span>
<span class="-7731003048108517996" onmouseenter="enter('-7731003048108517996');" onmouseout="out('-7731003048108517996');" style="">1240                 || fieldType.equals(SupportedFieldType.RULE_WITH_QUANTITY.toString())) {                 </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1241             return null;                                                                                 </span>
<span class="1147822807152761026" onmouseenter="enter('1147822807152761026');" onmouseout="out('1147822807152761026');" style="">1242         } else if (fieldType.equals(SupportedFieldType.INTEGER.toString())) {                            </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1243             try {                                                                                        </span>
<span class="2272843703065247861" onmouseenter="enter('2272843703065247861');" onmouseout="out('2272843703065247861');" style="">1244                 Integer.parseInt(defaultValue);                                                          </span>
<span class="-1817228964429458922" onmouseenter="enter('-1817228964429458922');" onmouseout="out('-1817228964429458922');" style="">1245             } catch (NumberFormatException  e) {                                                         </span>
<span class="8614817519589782911" onmouseenter="enter('8614817519589782911');" onmouseout="out('8614817519589782911');" style=""><abbr title="1246                 String msg = buildMsgForDefValException(SupportedFieldType.INTEGER.toString(), fmd, defaultValue);">1246                 String msg = buildMsgForDefValException(SupportedFieldType.INTEGER.toString(), fmd, defauðŸ”µ</abbr></span>
<span class="8745206262250964374" onmouseenter="enter('8745206262250964374');" onmouseout="out('8745206262250964374');" style="">1247                 LOG.debug(msg);                                                                          </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1248                 return null;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1249             }                                                                                            </span>
<span class="5641784789080954731" onmouseenter="enter('5641784789080954731');" onmouseout="out('5641784789080954731');" style="">1250         } else if (fieldType.equals(SupportedFieldType.DECIMAL.toString())                               </span>
<span class="-1839121721540903009" onmouseenter="enter('-1839121721540903009');" onmouseout="out('-1839121721540903009');" style="">1251                 || fieldType.equals(SupportedFieldType.MONEY.toString())) {                              </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1252             try {                                                                                        </span>
<span class="6039577623543160332" onmouseenter="enter('6039577623543160332');" onmouseout="out('6039577623543160332');" style="">1253                 BigDecimal val = new BigDecimal(defaultValue);                                           </span>
<span class="-1817228964429458922" onmouseenter="enter('-1817228964429458922');" onmouseout="out('-1817228964429458922');" style="">1254             } catch (NumberFormatException  e) {                                                         </span>
<span class="-1552449043883066886" onmouseenter="enter('-1552449043883066886');" onmouseout="out('-1552449043883066886');" style="">1255                 String msg = buildMsgForDefValException(fieldType.toString(), fmd, defaultValue);        </span>
<span class="8745206262250964374" onmouseenter="enter('8745206262250964374');" onmouseout="out('8745206262250964374');" style="">1256                 LOG.debug(msg);                                                                          </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1257                 return null;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1258             }                                                                                            </span>
<span class="-6181979390419592035" onmouseenter="enter('-6181979390419592035');" onmouseout="out('-6181979390419592035');" style="">1259         } else if (fieldType.equals(SupportedFieldType.BOOLEAN.toString())) {                            </span>
<span class="-8619074302025013401" onmouseenter="enter('-8619074302025013401');" onmouseout="out('-8619074302025013401');" style="">1260             if (!defaultValue.toLowerCase().equals(&quot;true&quot;) &amp;&amp; !defaultValue.toLowerCase().equals(&quot;false&quot;)</span>
<span class="-3108075317025400269" onmouseenter="enter('-3108075317025400269');" onmouseout="out('-3108075317025400269');" style=""><abbr title="1261                     &amp;&amp; !defaultValue.toUpperCase().equals(&quot;Y&quot;) &amp;&amp; !defaultValue.toUpperCase().equals(&quot;N&quot;)) {">1261                     &amp;&amp; !defaultValue.toUpperCase().equals(&quot;Y&quot;) &amp;&amp; !defaultValue.toUpperCase().equals(&quot;N&quot;)ðŸ”µ</abbr></span>
<span class="6946244061563138313" onmouseenter="enter('6946244061563138313');" onmouseout="out('6946244061563138313');" style=""><abbr title="1262                 String msg = buildMsgForDefValException(SupportedFieldType.BOOLEAN.toString(), fmd, defaultValue);">1262                 String msg = buildMsgForDefValException(SupportedFieldType.BOOLEAN.toString(), fmd, defauðŸ”µ</abbr></span>
<span class="8745206262250964374" onmouseenter="enter('8745206262250964374');" onmouseout="out('8745206262250964374');" style="">1263                 LOG.debug(msg);                                                                          </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1264                 return null;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1265             }                                                                                            </span>
<span class="-3789417077200952901" onmouseenter="enter('-3789417077200952901');" onmouseout="out('-3789417077200952901');" style="">1266         } else if (fieldType.equals(SupportedFieldType.DATE.toString())) {                               </span>
<span class="4798322797585331848" onmouseenter="enter('4798322797585331848');" onmouseout="out('4798322797585331848');" style="">1267             DateFormat format = FormatUtil.getDateFormat();                                              </span>
<span class="-4817829731735260045" onmouseenter="enter('-4817829731735260045');" onmouseout="out('-4817829731735260045');" style="">1268             if (defaultValue.toLowerCase().contains(&quot;today&quot;)) {                                          </span>
<span class="-5510717227080119052" onmouseenter="enter('-5510717227080119052');" onmouseout="out('-5510717227080119052');" style="">1269                 defaultValue = format.format(new Date());                                                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1270             } else {                                                                                     </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1271                 try {                                                                                    </span>
<span class="8253580772209920524" onmouseenter="enter('8253580772209920524');" onmouseout="out('8253580772209920524');" style="">1272                     Date date = format.parse(defaultValue);                                              </span>
<span class="-692739804773039587" onmouseenter="enter('-692739804773039587');" onmouseout="out('-692739804773039587');" style="">1273                     defaultValue = format.format(date);                                                  </span>
<span class="-8792048397909294459" onmouseenter="enter('-8792048397909294459');" onmouseout="out('-8792048397909294459');" style="">1274                 } catch (ParseException e) {                                                             </span>
<span class="6717521370520655041" onmouseenter="enter('6717521370520655041');" onmouseout="out('6717521370520655041');" style=""><abbr title="1275                     String msg = buildMsgForDefValException(SupportedFieldType.DATE.toString(), fmd, defaultValue);">1275                     String msg = buildMsgForDefValException(SupportedFieldType.DATE.toString(), fmd, defaðŸ”µ</abbr></span>
<span class="8745206262250964374" onmouseenter="enter('8745206262250964374');" onmouseout="out('8745206262250964374');" style="">1276                     LOG.debug(msg);                                                                      </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1277                     return null;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1278                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1279             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1280         }                                                                                                </span>
<span class="8908764284674475175" onmouseenter="enter('8908764284674475175');" onmouseout="out('8908764284674475175');" style="">1281         return defaultValue;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1282     }                                                                                                    </span>
<span  style="">1283                                                                                                          </span>
<span class="-1197861841111609975" onmouseenter="enter('-1197861841111609975');" onmouseout="out('-1197861841111609975');" style=""><abbr title="1284     protected String buildMsgForDefValException(String type, BasicFieldMetadata fmd, String defaultValue) {">1284     protected String buildMsgForDefValException(String type, BasicFieldMetadata fmd, String defaultValue)ðŸ”µ</abbr></span>
<span class="5037735576431495054" onmouseenter="enter('5037735576431495054');" onmouseout="out('5037735576431495054');" style=""><abbr title="1285         return StringUtil.sanitize(fmd.getTargetClass()) + &quot; : &quot; + StringUtil.sanitize(fmd.getName()) + &quot; - Failed to parse &quot;">1285         return StringUtil.sanitize(fmd.getTargetClass()) + &quot; : &quot; + StringUtil.sanitize(fmd.getName()) + &quot;ðŸ”µ</abbr></span>
<span class="-1280239945418423816" onmouseenter="enter('-1280239945418423816');" onmouseout="out('-1280239945418423816');" style=""><abbr title="1286                 + StringUtil.sanitize(type) + &quot; from DefaultValue [ &quot; + StringUtil.sanitize(defaultValue) + &quot; ]&quot;;">1286                 + StringUtil.sanitize(type) + &quot; from DefaultValue [ &quot; + StringUtil.sanitize(defaultValue)ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1287     }                                                                                                    </span>
<span  style="">1288                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1289     @Override                                                                                            </span>
<span class="-3338021322965865498" onmouseenter="enter('-3338021322965865498');" onmouseout="out('-3338021322965865498');" style="">1290     public void removeNonApplicableFields(ClassMetadata cmd, EntityForm entityForm, String entityType) { </span>
<span class="3681854507729164346" onmouseenter="enter('3681854507729164346');" onmouseout="out('3681854507729164346');" style="">1291         for (Property p : cmd.getProperties()) {                                                         </span>
<span class="2404027636674988266" onmouseenter="enter('2404027636674988266');" onmouseout="out('2404027636674988266');" style="">1292             if (!ArrayUtils.contains(p.getMetadata().getAvailableToTypes(), entityType)) {               </span>
<span class="3958420768854658911" onmouseenter="enter('3958420768854658911');" onmouseout="out('3958420768854658911');" style="">1293                 entityForm.removeField(p.getName());                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1294             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1295         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1296     }                                                                                                    </span>
<span  style="">1297                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1298     @Override                                                                                            </span>
<span class="-2894789102162308959" onmouseenter="enter('-2894789102162308959');" onmouseout="out('-2894789102162308959');" style="">1299     public EntityForm createEntityForm(ClassMetadata cmd, List&lt;SectionCrumb&gt; sectionCrumbs)              </span>
<span class="1998458335829271558" onmouseenter="enter('1998458335829271558');" onmouseout="out('1998458335829271558');" style="">1300             throws ServiceException {                                                                    </span>
<span class="-438894394526699599" onmouseenter="enter('-438894394526699599');" onmouseout="out('-438894394526699599');" style="">1301         EntityForm ef = createStandardEntityForm();                                                      </span>
<span class="1972535118391022312" onmouseenter="enter('1972535118391022312');" onmouseout="out('1972535118391022312');" style="">1302         populateEntityForm(cmd, ef, sectionCrumbs);                                                      </span>
<span class="3260120157565581788" onmouseenter="enter('3260120157565581788');" onmouseout="out('3260120157565581788');" style="">1303         return ef;                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1304     }                                                                                                    </span>
<span  style="">1305                                                                                                          </span>
<span class="1553424846104610474" onmouseenter="enter('1553424846104610474');" onmouseout="out('1553424846104610474');" style="">1306     protected String extractSectionIdentifierFromCrumb(List&lt;SectionCrumb&gt; sectionCrumbs) {               </span>
<span class="4444452196378800952" onmouseenter="enter('4444452196378800952');" onmouseout="out('4444452196378800952');" style="">1307         if (sectionCrumbs != null &amp;&amp; sectionCrumbs.size() &gt; 0) {                                         </span>
<span class="-4491351221393184649" onmouseenter="enter('-4491351221393184649');" onmouseout="out('-4491351221393184649');" style="">1308             return sectionCrumbs.get(0).getSectionIdentifier();                                          </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1309         } else {                                                                                         </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1310             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1311         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1312     }                                                                                                    </span>
<span  style="">1313                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1314     @Override                                                                                            </span>
<span class="-4968680944420537869" onmouseenter="enter('-4968680944420537869');" onmouseout="out('-4968680944420537869');" style="">1315     public void populateEntityForm(ClassMetadata cmd, EntityForm ef, List&lt;SectionCrumb&gt; sectionCrumbs)   </span>
<span class="1998458335829271558" onmouseenter="enter('1998458335829271558');" onmouseout="out('1998458335829271558');" style="">1316             throws ServiceException {                                                                    </span>
<span class="-4942912710752555081" onmouseenter="enter('-4942912710752555081');" onmouseout="out('-4942912710752555081');" style="">1317         ef.setCeilingEntityClassname(cmd.getCeilingType());                                              </span>
<span  style="">1318                                                                                                          </span>
<span class="6809887928661746160" onmouseenter="enter('6809887928661746160');" onmouseout="out('6809887928661746160');" style="">1319         String sectionIdentifier = extractSectionIdentifierFromCrumb(sectionCrumbs);                     </span>
<span  style="">1320                                                                                                          </span>
<span class="-3855604053801420635" onmouseenter="enter('-3855604053801420635');" onmouseout="out('-3855604053801420635');" style=""><abbr title="1321         AdminSection section = navigationService.findAdminSectionByClassAndSectionId(cmd.getCeilingType(),">1321         AdminSection section = navigationService.findAdminSectionByClassAndSectionId(cmd.getCeilingType()ðŸ”µ</abbr></span>
<span class="6889816604380354873" onmouseenter="enter('6889816604380354873');" onmouseout="out('6889816604380354873');" style="">1322                 sectionIdentifier);                                                                      </span>
<span class="2297837107111400660" onmouseenter="enter('2297837107111400660');" onmouseout="out('2297837107111400660');" style="">1323         if (section != null) {                                                                           </span>
<span class="4296466575148476303" onmouseenter="enter('4296466575148476303');" onmouseout="out('4296466575148476303');" style="">1324             ef.setSectionKey(section.getUrl());                                                          </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1325         } else {                                                                                         </span>
<span class="-1586535842116388806" onmouseenter="enter('-1586535842116388806');" onmouseout="out('-1586535842116388806');" style="">1326             ef.setSectionKey(cmd.getCeilingType());                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1327         }                                                                                                </span>
<span class="-5184985761895407688" onmouseenter="enter('-5184985761895407688');" onmouseout="out('-5184985761895407688');" style="">1328         ef.setSectionCrumbsImpl(sectionCrumbs);                                                          </span>
<span  style="">1329                                                                                                          </span>
<span class="-8713614433600438253" onmouseenter="enter('-8713614433600438253');" onmouseout="out('-8713614433600438253');" style="">1330         setEntityFormTabsAndGroups(ef, cmd.getTabAndGroupMetadata());                                    </span>
<span  style="">1331                                                                                                          </span>
<span class="3369160299270687085" onmouseenter="enter('3369160299270687085');" onmouseout="out('3369160299270687085');" style="">1332         setEntityFormFields(cmd, ef, Arrays.asList(cmd.getProperties()));                                </span>
<span  style="">1333                                                                                                          </span>
<span class="8675843354365413624" onmouseenter="enter('8675843354365413624');" onmouseout="out('8675843354365413624');" style="">1334         populateDropdownToOneFields(ef, cmd);                                                            </span>
<span  style="">1335                                                                                                          </span>
<span class="1014702433169640296" onmouseenter="enter('1014702433169640296');" onmouseout="out('1014702433169640296');" style="">1336         extensionManager.getProxy().modifyUnpopulatedEntityForm(ef);                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1337     }                                                                                                    </span>
<span  style="">1338                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1339     /**                                                                                                  </span>
<span class="7551045119262463393" onmouseenter="enter('7551045119262463393');" onmouseout="out('7551045119262463393');" style="">1340      * This method is invoked when EntityForms are created and is meant to provide a hook to add         </span>
<span class="-342244960216512570" onmouseenter="enter('-342244960216512570');" onmouseout="out('-342244960216512570');" style="">1341      * additional entity form actions for implementors of Broadleaf. Broadleaf modules will typically    </span>
<span class="-7928784631676494068" onmouseenter="enter('-7928784631676494068');" onmouseout="out('-7928784631676494068');" style="">1342      * leverage {@link FormBuilderExtensionHandler#addAdditionalFormActions(EntityForm)} method.         </span>
<span class="8361682950840699982" onmouseenter="enter('8361682950840699982');" onmouseout="out('8361682950840699982');" style="">1343      * @param ef                                                                                         </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1344      */                                                                                                  </span>
<span class="-8094119228358129217" onmouseenter="enter('-8094119228358129217');" onmouseout="out('-8094119228358129217');" style="">1345     protected void addAdditionalFormActions(EntityForm ef) {                                             </span>
<span  style="">1346                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1347     }                                                                                                    </span>
<span  style="">1348                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1349     @Override                                                                                            </span>
<span class="1394778707631761813" onmouseenter="enter('1394778707631761813');" onmouseout="out('1394778707631761813');" style=""><abbr title="1350     public EntityForm createEntityForm(ClassMetadata cmd, Entity entity, List&lt;SectionCrumb&gt; sectionCrumbs)">1350     public EntityForm createEntityForm(ClassMetadata cmd, Entity entity, List&lt;SectionCrumb&gt; sectionCrumbsðŸ”µ</abbr></span>
<span class="1998458335829271558" onmouseenter="enter('1998458335829271558');" onmouseout="out('1998458335829271558');" style="">1351             throws ServiceException {                                                                    </span>
<span class="-438894394526699599" onmouseenter="enter('-438894394526699599');" onmouseout="out('-438894394526699599');" style="">1352         EntityForm ef = createStandardEntityForm();                                                      </span>
<span class="-4073847895348507412" onmouseenter="enter('-4073847895348507412');" onmouseout="out('-4073847895348507412');" style="">1353         populateEntityForm(cmd, entity, ef, sectionCrumbs);                                              </span>
<span class="3191217127862437415" onmouseenter="enter('3191217127862437415');" onmouseout="out('3191217127862437415');" style="">1354         addAdditionalFormActions(ef);                                                                    </span>
<span class="8511655867693649187" onmouseenter="enter('8511655867693649187');" onmouseout="out('8511655867693649187');" style="">1355         extensionManager.getProxy().addAdditionalFormActions(ef);                                        </span>
<span class="3260120157565581788" onmouseenter="enter('3260120157565581788');" onmouseout="out('3260120157565581788');" style="">1356         return ef;                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1357     }                                                                                                    </span>
<span  style="">1358                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1359     @Override                                                                                            </span>
<span class="-6571706150833686716" onmouseenter="enter('-6571706150833686716');" onmouseout="out('-6571706150833686716');" style=""><abbr title="1360     public void populateEntityForm(ClassMetadata cmd, Entity entity, EntityForm ef, List&lt;SectionCrumb&gt; sectionCrumbs)">1360     public void populateEntityForm(ClassMetadata cmd, Entity entity, EntityForm ef, List&lt;SectionCrumb&gt; seðŸ”µ</abbr></span>
<span class="1998458335829271558" onmouseenter="enter('1998458335829271558');" onmouseout="out('1998458335829271558');" style="">1361             throws ServiceException {                                                                    </span>
<span class="-7069998291250786390" onmouseenter="enter('-7069998291250786390');" onmouseout="out('-7069998291250786390');" style="">1362         // Get the empty form with appropriate fields                                                    </span>
<span class="1972535118391022312" onmouseenter="enter('1972535118391022312');" onmouseout="out('1972535118391022312');" style="">1363         populateEntityForm(cmd, ef, sectionCrumbs);                                                      </span>
<span  style="">1364                                                                                                          </span>
<span class="-5459387306565336413" onmouseenter="enter('-5459387306565336413');" onmouseout="out('-5459387306565336413');" style="">1365         String idProperty = adminEntityService.getIdProperty(cmd);                                       </span>
<span class="1051557575021412686" onmouseenter="enter('1051557575021412686');" onmouseout="out('1051557575021412686');" style="">1366         ef.setId(entity.findProperty(idProperty).getValue());                                            </span>
<span class="2566657873931456162" onmouseenter="enter('2566657873931456162');" onmouseout="out('2566657873931456162');" style="">1367         ef.setEntityType(entity.getType()[0]);                                                           </span>
<span  style="">1368                                                                                                          </span>
<span class="-5752959739321640962" onmouseenter="enter('-5752959739321640962');" onmouseout="out('-5752959739321640962');" style="">1369         populateEntityFormFieldValues(cmd, entity, ef);                                                  </span>
<span  style="">1370                                                                                                          </span>
<span class="5257407325597611191" onmouseenter="enter('5257407325597611191');" onmouseout="out('5257407325597611191');" style="">1371         Property p = entity.findProperty(BasicPersistenceModule.MAIN_ENTITY_NAME_PROPERTY);              </span>
<span class="-4724213940983805674" onmouseenter="enter('-4724213940983805674');" onmouseout="out('-4724213940983805674');" style="">1372         if (p != null) {                                                                                 </span>
<span class="8443013364869289595" onmouseenter="enter('8443013364869289595');" onmouseout="out('8443013364869289595');" style="">1373             ef.setMainEntityName(p.getValue());                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1374         }                                                                                                </span>
<span  style="">1375                                                                                                          </span>
<span class="8285751274454564858" onmouseenter="enter('8285751274454564858');" onmouseout="out('8285751274454564858');" style="">1376         extensionManager.getProxy().modifyPopulatedEntityForm(ef, entity);                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1377     }                                                                                                    </span>
<span  style="">1378                                                                                                          </span>
<span class="2253933316337433516" onmouseenter="enter('2253933316337433516');" onmouseout="out('2253933316337433516');" style=""><abbr title="1379     protected void setVisibilityBasedOnShowIfFieldEquals(ClassMetadata cmd, Entity entity, EntityForm ef) {">1379     protected void setVisibilityBasedOnShowIfFieldEquals(ClassMetadata cmd, Entity entity, EntityForm ef)ðŸ”µ</abbr></span>
<span class="3681854507729164346" onmouseenter="enter('3681854507729164346');" onmouseout="out('3681854507729164346');" style="">1380         for (Property p : cmd.getProperties()) {                                                         </span>
<span class="5177519309013644806" onmouseenter="enter('5177519309013644806');" onmouseout="out('5177519309013644806');" style="">1381             FieldMetadata fmd = p.getMetadata();                                                         </span>
<span  style="">1382                                                                                                          </span>
<span class="-8245965221352030812" onmouseenter="enter('-8245965221352030812');" onmouseout="out('-8245965221352030812');" style="">1383             if (shouldHideField(fmd, entity)) {                                                          </span>
<span class="722393245301383233" onmouseenter="enter('722393245301383233');" onmouseout="out('722393245301383233');" style="">1384                 if (fmd instanceof CollectionMetadata) {                                                 </span>
<span class="7188659998484598345" onmouseenter="enter('7188659998484598345');" onmouseout="out('7188659998484598345');" style="">1385                     ef.removeListGrid(p.getName());                                                      </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1386                 } else {                                                                                 </span>
<span class="6870393746446615822" onmouseenter="enter('6870393746446615822');" onmouseout="out('6870393746446615822');" style="">1387                     ef.removeField(p.getName());                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1388                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1389             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1390         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1391     }                                                                                                    </span>
<span  style="">1392                                                                                                          </span>
<span class="-3330248760149008409" onmouseenter="enter('-3330248760149008409');" onmouseout="out('-3330248760149008409');" style="">1393     protected boolean shouldHideField(FieldMetadata fmd, Entity entity) {                                </span>
<span class="-345780899678155518" onmouseenter="enter('-345780899678155518');" onmouseout="out('-345780899678155518');" style="">1394         if (fmd == null || fmd.getShowIfFieldEquals() == null) {                                         </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1395             return false;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1396         }                                                                                                </span>
<span  style="">1397                                                                                                          </span>
<span class="-8659631323845256695" onmouseenter="enter('-8659631323845256695');" onmouseout="out('-8659631323845256695');" style="">1398         for (String property : fmd.getShowIfFieldEquals().keySet()) {                                    </span>
<span class="3930945657137454760" onmouseenter="enter('3930945657137454760');" onmouseout="out('3930945657137454760');" style="">1399             List&lt;String&gt; values = fmd.getShowIfFieldEquals().get(property);                              </span>
<span class="-2693573208742209473" onmouseenter="enter('-2693573208742209473');" onmouseout="out('-2693573208742209473');" style="">1400             Property entityProp = entity.findProperty(property);                                         </span>
<span  style="">1401                                                                                                          </span>
<span class="-167840816186910781" onmouseenter="enter('-167840816186910781');" onmouseout="out('-167840816186910781');" style="">1402             if (entityProp == null || values.contains(entityProp.getValue())) {                          </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1403                 return false;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1404             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1405         }                                                                                                </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">1406         return true;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1407     }                                                                                                    </span>
<span  style="">1408                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1409     @Override                                                                                            </span>
<span class="7910083739222815843" onmouseenter="enter('7910083739222815843');" onmouseout="out('7910083739222815843');" style="">1410     public void populateEntityFormFieldValues(ClassMetadata cmd, Entity entity, EntityForm ef) {         </span>
<span class="4641578827349754543" onmouseenter="enter('4641578827349754543');" onmouseout="out('4641578827349754543');" style="">1411         // Set the appropriate property values                                                           </span>
<span class="3681854507729164346" onmouseenter="enter('3681854507729164346');" onmouseout="out('3681854507729164346');" style="">1412         for (Property p : cmd.getProperties()) {                                                         </span>
<span class="-1029066852878262358" onmouseenter="enter('-1029066852878262358');" onmouseout="out('-1029066852878262358');" style="">1413             if (p.getMetadata() instanceof BasicFieldMetadata) {                                         </span>
<span class="-6469477226116674237" onmouseenter="enter('-6469477226116674237');" onmouseout="out('-6469477226116674237');" style="">1414                 BasicFieldMetadata basicFM = (BasicFieldMetadata) p.getMetadata();                       </span>
<span  style="">1415                                                                                                          </span>
<span class="7733316759648943983" onmouseenter="enter('7733316759648943983');" onmouseout="out('7733316759648943983');" style="">1416                 Property entityProp = entity.findProperty(p.getName());                                  </span>
<span  style="">1417                                                                                                          </span>
<span class="4021222749559453503" onmouseenter="enter('4021222749559453503');" onmouseout="out('4021222749559453503');" style=""><abbr title="1418                 boolean explicitlyShown = VisibilityEnum.FORM_EXPLICITLY_SHOWN.equals(basicFM.getVisibility());">1418                 boolean explicitlyShown = VisibilityEnum.FORM_EXPLICITLY_SHOWN.equals(basicFM.getVisibiliðŸ”µ</abbr></span>
<span class="7366025904056557465" onmouseenter="enter('7366025904056557465');" onmouseout="out('7366025904056557465');" style="">1419                 //always show special map fields                                                         </span>
<span class="-2401445545222685489" onmouseenter="enter('-2401445545222685489');" onmouseout="out('-2401445545222685489');" style="">1420                 if (p.getName().equals(&quot;key&quot;) || p.getName().equals(&quot;priorKey&quot;)) {                       </span>
<span class="7778793828648750297" onmouseenter="enter('7778793828648750297');" onmouseout="out('7778793828648750297');" style="">1421                     explicitlyShown = true;                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1422                 }                                                                                        </span>
<span  style="">1423                                                                                                          </span>
<span class="-6309572172727120265" onmouseenter="enter('-6309572172727120265');" onmouseout="out('-6309572172727120265');" style="">1424                 if (entityProp == null &amp;&amp; explicitlyShown) {                                             </span>
<span class="8909260264488361187" onmouseenter="enter('8909260264488361187');" onmouseout="out('8909260264488361187');" style="">1425                     Field field = ef.findField(p.getName());                                             </span>
<span class="-470699824173107204" onmouseenter="enter('-470699824173107204');" onmouseout="out('-470699824173107204');" style="">1426                     if (field != null) {                                                                 </span>
<span class="-412233450447024620" onmouseenter="enter('-412233450447024620');" onmouseout="out('-412233450447024620');" style="">1427                         field.setValue(null);                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1428                     }                                                                                    </span>
<span class="-3654453610792959969" onmouseenter="enter('-3654453610792959969');" onmouseout="out('-3654453610792959969');" style=""><abbr title="1429                 } else if (entityProp == null &amp;&amp; !SupportedFieldType.PASSWORD_CONFIRM.equals(basicFM.getExplicitFieldType())) {">1429                 } else if (entityProp == null &amp;&amp; !SupportedFieldType.PASSWORD_CONFIRM.equals(basicFM.getEðŸ”µ</abbr></span>
<span class="6870393746446615822" onmouseenter="enter('6870393746446615822');" onmouseout="out('6870393746446615822');" style="">1430                     ef.removeField(p.getName());                                                         </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1431                 } else {                                                                                 </span>
<span class="8909260264488361187" onmouseenter="enter('8909260264488361187');" onmouseout="out('8909260264488361187');" style="">1432                     Field field = ef.findField(p.getName());                                             </span>
<span class="-470699824173107204" onmouseenter="enter('-470699824173107204');" onmouseout="out('-470699824173107204');" style="">1433                     if (field != null) {                                                                 </span>
<span class="-2366650903096921345" onmouseenter="enter('-2366650903096921345');" onmouseout="out('-2366650903096921345');" style="">1434                         if (entityProp != null) {                                                        </span>
<span class="4638600769415474673" onmouseenter="enter('4638600769415474673');" onmouseout="out('4638600769415474673');" style=""><abbr title="1435                             //protect against null - can happen with password confirmation fields (i.e. admin user)">1435                             //protect against null - can happen with password confirmation fields (i.e. aðŸ”µ</abbr></span>
<span class="8379702483069295441" onmouseenter="enter('8379702483069295441');" onmouseout="out('8379702483069295441');" style="">1436                             field.setDirty(entityProp.getIsDirty());                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1437                         }                                                                                </span>
<span class="-7071797664598394524" onmouseenter="enter('-7071797664598394524');" onmouseout="out('-7071797664598394524');" style="">1438                         if (basicFM.getFieldType()==SupportedFieldType.RULE_SIMPLE                       </span>
<span class="-6985772052695519723" onmouseenter="enter('-6985772052695519723');" onmouseout="out('-6985772052695519723');" style="">1439                                 || basicFM.getFieldType()==SupportedFieldType.RULE_SIMPLE_TIME           </span>
<span class="8398044977893461025" onmouseenter="enter('8398044977893461025');" onmouseout="out('8398044977893461025');" style="">1440                                 || basicFM.getFieldType()==SupportedFieldType.RULE_WITH_QUANTITY) {      </span>
<span class="4021621821134603536" onmouseenter="enter('4021621821134603536');" onmouseout="out('4021621821134603536');" style="">1441                             RuleBuilderField rbf = (RuleBuilderField) field;                             </span>
<span class="-7695608741173734167" onmouseenter="enter('-7695608741173734167');" onmouseout="out('-7695608741173734167');" style="">1442                             if (entity.getPMap().containsKey(rbf.getJsonFieldName())) {                  </span>
<span class="-6319430319708671435" onmouseenter="enter('-6319430319708671435');" onmouseout="out('-6319430319708671435');" style="">1443                                 String json = entity.getPMap().get(rbf.getJsonFieldName()).getValue();   </span>
<span class="-6775685118155466056" onmouseenter="enter('-6775685118155466056');" onmouseout="out('-6775685118155466056');" style="">1444                                 rbf.setJson(json);                                                       </span>
<span class="-5885429731931553725" onmouseenter="enter('-5885429731931553725');" onmouseout="out('-5885429731931553725');" style="">1445                                 DataWrapper dw = convertJsonToDataWrapper(json);                         </span>
<span class="-3408161092817379645" onmouseenter="enter('-3408161092817379645');" onmouseout="out('-3408161092817379645');" style="">1446                                 if (dw != null) {                                                        </span>
<span class="7188823867343032185" onmouseenter="enter('7188823867343032185');" onmouseout="out('7188823867343032185');" style="">1447                                     rbf.setDataWrapper(dw);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1448                                 }                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1449                             }                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1450                         }                                                                                </span>
<span class="-4769937124220254644" onmouseenter="enter('-4769937124220254644');" onmouseout="out('-4769937124220254644');" style="">1451                         if (basicFM.getFieldType() == SupportedFieldType.MEDIA) {                        </span>
<span class="627899284580660581" onmouseenter="enter('627899284580660581');" onmouseout="out('627899284580660581');" style="">1452                             field.setValue(entityProp.getValue());                                       </span>
<span class="-3405146348302376065" onmouseenter="enter('-3405146348302376065');" onmouseout="out('-3405146348302376065');" style="">1453                             field.setDisplayValue(entityProp.getDisplayValue());                         </span>
<span class="7597965270557979966" onmouseenter="enter('7597965270557979966');" onmouseout="out('7597965270557979966');" style="">1454                             MediaField mf = (MediaField) field;                                          </span>
<span class="-7494069843850344001" onmouseenter="enter('-7494069843850344001');" onmouseout="out('-7494069843850344001');" style=""><abbr title="1455                             Class&lt;MediaDto&gt; type = entityConfiguration.lookupEntityClass(MediaDto.class.getName(), MediaDto.class);">1455                             Class&lt;MediaDto&gt; type = entityConfiguration.lookupEntityClass(MediaDto.class.gðŸ”µ</abbr></span>
<span class="8674870911105205925" onmouseenter="enter('8674870911105205925');" onmouseout="out('8674870911105205925');" style=""><abbr title="1456                             mf.setMedia(mediaBuilderService.convertJsonToMedia(entityProp.getUnHtmlEncodedValue(), type));">1456                             mf.setMedia(mediaBuilderService.convertJsonToMedia(entityProp.getUnHtmlEncodeðŸ”µ</abbr></span>
<span class="8860382562253463844" onmouseenter="enter('8860382562253463844');" onmouseout="out('8860382562253463844');" style=""><abbr title="1457                         } else if (!SupportedFieldType.PASSWORD_CONFIRM.equals(basicFM.getExplicitFieldType())) {">1457                         } else if (!SupportedFieldType.PASSWORD_CONFIRM.equals(basicFM.getExplicitFieldTyðŸ”µ</abbr></span>
<span class="627899284580660581" onmouseenter="enter('627899284580660581');" onmouseout="out('627899284580660581');" style="">1458                             field.setValue(entityProp.getValue());                                       </span>
<span class="-3405146348302376065" onmouseenter="enter('-3405146348302376065');" onmouseout="out('-3405146348302376065');" style="">1459                             field.setDisplayValue(entityProp.getDisplayValue());                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1460                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1461                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1462                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1463             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1464         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1465     }                                                                                                    </span>
<span  style="">1466                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1467     /**                                                                                                  </span>
<span class="-628877191560702928" onmouseenter="enter('-628877191560702928');" onmouseout="out('-628877191560702928');" style="">1468      * When using Thymeleaf, we need to convert the JSON string back to                                  </span>
<span class="1787417412343624491" onmouseenter="enter('1787417412343624491');" onmouseout="out('1787417412343624491');" style="">1469      * a DataWrapper object because Thymeleaf escapes JSON strings.                                      </span>
<span class="5903545593073761450" onmouseenter="enter('5903545593073761450');" onmouseout="out('5903545593073761450');" style="">1470      * Thymeleaf uses it&#x27;s own object de-serializer                                                      </span>
<span class="5324834623619770328" onmouseenter="enter('5324834623619770328');" onmouseout="out('5324834623619770328');" style="">1471      * see: https://github.com/thymeleaf/thymeleaf/issues/84                                             </span>
<span class="363134610140381216" onmouseenter="enter('363134610140381216');" onmouseout="out('363134610140381216');" style="">1472      * see: http://forum.thymeleaf.org/Spring-Javascript-and-escaped-JSON-td4024739.html                 </span>
<span class="-1207310572973527556" onmouseenter="enter('-1207310572973527556');" onmouseout="out('-1207310572973527556');" style="">1473      * @param json                                                                                       </span>
<span class="-6577536486120138335" onmouseenter="enter('-6577536486120138335');" onmouseout="out('-6577536486120138335');" style="">1474      * @return DataWrapper                                                                               </span>
<span class="-2042953791166134795" onmouseenter="enter('-2042953791166134795');" onmouseout="out('-2042953791166134795');" style="">1475      * @throws IOException                                                                               </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1476      */                                                                                                  </span>
<span class="2430913214947894128" onmouseenter="enter('2430913214947894128');" onmouseout="out('2430913214947894128');" style="">1477     protected DataWrapper convertJsonToDataWrapper(String json) {                                        </span>
<span class="-1540063925365497538" onmouseenter="enter('-1540063925365497538');" onmouseout="out('-1540063925365497538');" style="">1478         ObjectMapper mapper = new ObjectMapper();                                                        </span>
<span class="2504782713133203850" onmouseenter="enter('2504782713133203850');" onmouseout="out('2504782713133203850');" style="">1479         DataDTODeserializer dtoDeserializer = new DataDTODeserializer();                                 </span>
<span class="-7069332746071020099" onmouseenter="enter('-7069332746071020099');" onmouseout="out('-7069332746071020099');" style=""><abbr title="1480         SimpleModule module = new SimpleModule(&quot;DataDTODeserializerModule&quot;, new Version(1, 0, 0, null, null, null));">1480         SimpleModule module = new SimpleModule(&quot;DataDTODeserializerModule&quot;, new Version(1, 0, 0, null, nuðŸ”µ</abbr></span>
<span class="-4567775918027288963" onmouseenter="enter('-4567775918027288963');" onmouseout="out('-4567775918027288963');" style="">1481         module.addDeserializer(DataDTO.class, dtoDeserializer);                                          </span>
<span class="1730387754846602273" onmouseenter="enter('1730387754846602273');" onmouseout="out('1730387754846602273');" style="">1482         mapper.registerModule(module);                                                                   </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1483         try {                                                                                            </span>
<span class="-1255991149529842499" onmouseenter="enter('-1255991149529842499');" onmouseout="out('-1255991149529842499');" style="">1484             return mapper.readValue(json, DataWrapper.class);                                            </span>
<span class="7080241092423381085" onmouseenter="enter('7080241092423381085');" onmouseout="out('7080241092423381085');" style="">1485         } catch (IOException e) {                                                                        </span>
<span class="5897285764286536997" onmouseenter="enter('5897285764286536997');" onmouseout="out('5897285764286536997');" style="">1486             throw new RuntimeException(e);                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1487         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1488     }                                                                                                    </span>
<span  style="">1489                                                                                                          </span>
<span class="-186207403366028020" onmouseenter="enter('-186207403366028020');" onmouseout="out('-186207403366028020');" style="">1490     protected void populateDropdownToOneFields(EntityForm ef, ClassMetadata cmd)                         </span>
<span class="1998458335829271558" onmouseenter="enter('1998458335829271558');" onmouseout="out('1998458335829271558');" style="">1491             throws ServiceException {                                                                    </span>
<span class="3681854507729164346" onmouseenter="enter('3681854507729164346');" onmouseout="out('3681854507729164346');" style="">1492         for (Property p : cmd.getProperties()) {                                                         </span>
<span class="-1029066852878262358" onmouseenter="enter('-1029066852878262358');" onmouseout="out('-1029066852878262358');" style="">1493             if (p.getMetadata() instanceof BasicFieldMetadata) {                                         </span>
<span class="-5664285287189453326" onmouseenter="enter('-5664285287189453326');" onmouseout="out('-5664285287189453326');" style="">1494                 BasicFieldMetadata fmd = (BasicFieldMetadata) p.getMetadata();                           </span>
<span class="-5975886890404137502" onmouseenter="enter('-5975886890404137502');" onmouseout="out('-5975886890404137502');" style="">1495                 if (LookupType.DROPDOWN.equals(fmd.getLookupType())                                      </span>
<span class="3923559904233294352" onmouseenter="enter('3923559904233294352');" onmouseout="out('3923559904233294352');" style="">1496                         &amp;&amp; !ArrayUtils.contains(getFormHiddenVisibilities(), fmd.getVisibility())) {     </span>
<span class="7405748751598380621" onmouseenter="enter('7405748751598380621');" onmouseout="out('7405748751598380621');" style="">1497                     // Get the records                                                                   </span>
<span class="-8258870037901756296" onmouseenter="enter('-8258870037901756296');" onmouseout="out('-8258870037901756296');" style="">1498                     PersistencePackageRequest toOnePpr = PersistencePackageRequest.standard()            </span>
<span class="-1097107171578019007" onmouseenter="enter('-1097107171578019007');" onmouseout="out('-1097107171578019007');" style="">1499                             .withCeilingEntityClassname(fmd.getForeignKeyClass());                       </span>
<span class="6917610271852750158" onmouseenter="enter('6917610271852750158');" onmouseout="out('6917610271852750158');" style=""><abbr title="1500                     Entity[] rows = adminEntityService.getRecords(toOnePpr).getDynamicResultSet().getRecords();">1500                     Entity[] rows = adminEntityService.getRecords(toOnePpr).getDynamicResultSet().getRecoðŸ”µ</abbr></span>
<span  style="">1501                                                                                                          </span>
<span class="-7705887927793372443" onmouseenter="enter('-7705887927793372443');" onmouseout="out('-7705887927793372443');" style="">1502                     // Determine the id field                                                            </span>
<span class="6991332735797511760" onmouseenter="enter('6991332735797511760');" onmouseout="out('6991332735797511760');" style="">1503                     String idProp = null;                                                                </span>
<span class="-6188886223790300160" onmouseenter="enter('-6188886223790300160');" onmouseout="out('-6188886223790300160');" style=""><abbr title="1504                     ClassMetadata foreignClassMd = adminEntityService.getClassMetadata(toOnePpr).getDynamicResultSet().getClassMetaData();">1504                     ClassMetadata foreignClassMd = adminEntityService.getClassMetadata(toOnePpr).getDynamðŸ”µ</abbr></span>
<span class="-7740302606560587079" onmouseenter="enter('-7740302606560587079');" onmouseout="out('-7740302606560587079');" style="">1505                     for (Property foreignP : foreignClassMd.getProperties()) {                           </span>
<span class="-8528985220609178259" onmouseenter="enter('-8528985220609178259');" onmouseout="out('-8528985220609178259');" style="">1506                         if (foreignP.getMetadata() instanceof BasicFieldMetadata) {                      </span>
<span class="-8124244658776994002" onmouseenter="enter('-8124244658776994002');" onmouseout="out('-8124244658776994002');" style="">1507                             BasicFieldMetadata foreignFmd = (BasicFieldMetadata) foreignP.getMetadata(); </span>
<span class="-6615171596083676427" onmouseenter="enter('-6615171596083676427');" onmouseout="out('-6615171596083676427');" style="">1508                             if (SupportedFieldType.ID.equals(foreignFmd.getFieldType())) {               </span>
<span class="8626137451888256629" onmouseenter="enter('8626137451888256629');" onmouseout="out('8626137451888256629');" style="">1509                                 idProp = foreignP.getName();                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1510                             }                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1511                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1512                     }                                                                                    </span>
<span  style="">1513                                                                                                          </span>
<span class="-5011974389032314776" onmouseenter="enter('-5011974389032314776');" onmouseout="out('-5011974389032314776');" style="">1514                     if (idProp == null) {                                                                </span>
<span class="9029833375734478123" onmouseenter="enter('9029833375734478123');" onmouseout="out('9029833375734478123');" style=""><abbr title="1515                         throw new RuntimeException(&quot;Could not determine ID property for &quot; + fmd.getForeignKeyClass());">1515                         throw new RuntimeException(&quot;Could not determine ID property for &quot; + fmd.getForeigðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1516                     }                                                                                    </span>
<span  style="">1517                                                                                                          </span>
<span class="-606725638262986950" onmouseenter="enter('-606725638262986950');" onmouseout="out('-606725638262986950');" style="">1518                     // Determine the display field                                                       </span>
<span class="-6330673322776160197" onmouseenter="enter('-6330673322776160197');" onmouseout="out('-6330673322776160197');" style="">1519                     String displayProp = fmd.getLookupDisplayProperty();                                 </span>
<span  style="">1520                                                                                                          </span>
<span class="-282229918032301960" onmouseenter="enter('-282229918032301960');" onmouseout="out('-282229918032301960');" style="">1521                     // Build the options map                                                             </span>
<span class="-4401347179302263251" onmouseenter="enter('-4401347179302263251');" onmouseout="out('-4401347179302263251');" style="">1522                     Map&lt;String, String&gt; options = new HashMap&lt;&gt;();                                       </span>
<span class="-2921615155367105394" onmouseenter="enter('-2921615155367105394');" onmouseout="out('-2921615155367105394');" style="">1523                     for (Entity row : rows) {                                                            </span>
<span class="-9011123629733297811" onmouseenter="enter('-9011123629733297811');" onmouseout="out('-9011123629733297811');" style="">1524                         Property prop = row.findProperty(displayProp);                                   </span>
<span class="-3136494705922445009" onmouseenter="enter('-3136494705922445009');" onmouseout="out('-3136494705922445009');" style="">1525                         if (prop == null) {                                                              </span>
<span class="-2859923640341758966" onmouseenter="enter('-2859923640341758966');" onmouseout="out('-2859923640341758966');" style=""><abbr title="1526                             LOG.warn(&quot;Could not find displayProp [&quot; + StringUtil.sanitize(displayProp) + &quot;] on entity [&quot; +">1526                             LOG.warn(&quot;Could not find displayProp [&quot; + StringUtil.sanitize(displayProp) + ðŸ”µ</abbr></span>
<span class="-2254314617729442046" onmouseenter="enter('-2254314617729442046');" onmouseout="out('-2254314617729442046');" style="">1527                                     ef.getCeilingEntityClassname() + &quot;]&quot;);                               </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1528                         } else {                                                                         </span>
<span class="-8909758360620292667" onmouseenter="enter('-8909758360620292667');" onmouseout="out('-8909758360620292667');" style="">1529                             String displayValue = prop.getDisplayValue();                                </span>
<span class="987960060831169722" onmouseenter="enter('987960060831169722');" onmouseout="out('987960060831169722');" style="">1530                             if (StringUtils.isBlank(displayValue)) {                                     </span>
<span class="23109960353036152" onmouseenter="enter('23109960353036152');" onmouseout="out('23109960353036152');" style="">1531                                 displayValue = prop.getValue();                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1532                             }                                                                            </span>
<span class="-4077682651397635801" onmouseenter="enter('-4077682651397635801');" onmouseout="out('-4077682651397635801');" style="">1533                             options.put(row.findProperty(idProp).getValue(), displayValue);              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1534                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1535                     }                                                                                    </span>
<span  style="">1536                                                                                                          </span>
<span class="4340190494430873223" onmouseenter="enter('4340190494430873223');" onmouseout="out('4340190494430873223');" style="">1537                     // Set the options on the entity field                                               </span>
<span class="2851644107781283227" onmouseenter="enter('2851644107781283227');" onmouseout="out('2851644107781283227');" style="">1538                     ComboField cf = (ComboField) ef.findField(p.getName());                              </span>
<span class="-5242484842909969229" onmouseenter="enter('-5242484842909969229');" onmouseout="out('-5242484842909969229');" style="">1539                     cf.setOptions(options);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1540                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1541             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1542         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1543     }                                                                                                    </span>
<span  style="">1544                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1545     @Override                                                                                            </span>
<span class="763969629629221745" onmouseenter="enter('763969629629221745');" onmouseout="out('763969629629221745');" style=""><abbr title="1546     public EntityForm createEntityForm(ClassMetadata cmd, Entity entity, Map&lt;String, DynamicResultSet&gt; collectionRecords, List&lt;SectionCrumb&gt; sectionCrumbs)">1546     public EntityForm createEntityForm(ClassMetadata cmd, Entity entity, Map&lt;String, DynamicResultSet&gt; coðŸ”µ</abbr></span>
<span class="1998458335829271558" onmouseenter="enter('1998458335829271558');" onmouseout="out('1998458335829271558');" style="">1547             throws ServiceException {                                                                    </span>
<span class="-438894394526699599" onmouseenter="enter('-438894394526699599');" onmouseout="out('-438894394526699599');" style="">1548         EntityForm ef = createStandardEntityForm();                                                      </span>
<span class="-6955297876613536298" onmouseenter="enter('-6955297876613536298');" onmouseout="out('-6955297876613536298');" style="">1549         populateEntityForm(cmd, entity, collectionRecords, ef, sectionCrumbs);                           </span>
<span class="3191217127862437415" onmouseenter="enter('3191217127862437415');" onmouseout="out('3191217127862437415');" style="">1550         addAdditionalFormActions(ef);                                                                    </span>
<span class="8511655867693649187" onmouseenter="enter('8511655867693649187');" onmouseout="out('8511655867693649187');" style="">1551         extensionManager.getProxy().addAdditionalFormActions(ef);                                        </span>
<span class="3260120157565581788" onmouseenter="enter('3260120157565581788');" onmouseout="out('3260120157565581788');" style="">1552         return ef;                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1553     }                                                                                                    </span>
<span  style="">1554                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1555     @Override                                                                                            </span>
<span class="-2291192084967046521" onmouseenter="enter('-2291192084967046521');" onmouseout="out('-2291192084967046521');" style=""><abbr title="1556     public void populateEntityForm(ClassMetadata cmd, Entity entity, Map&lt;String, DynamicResultSet&gt; collectionRecords, EntityForm ef, List&lt;SectionCrumb&gt; sectionCrumbs) throws ServiceException {">1556     public void populateEntityForm(ClassMetadata cmd, Entity entity, Map&lt;String, DynamicResultSet&gt; collecðŸ”µ</abbr></span>
<span class="-7842928199694637195" onmouseenter="enter('-7842928199694637195');" onmouseout="out('-7842928199694637195');" style="">1557         // Get the form with values for this entity                                                      </span>
<span class="-4073847895348507412" onmouseenter="enter('-4073847895348507412');" onmouseout="out('-4073847895348507412');" style="">1558         populateEntityForm(cmd, entity, ef, sectionCrumbs);                                              </span>
<span class="-5693049027716773876" onmouseenter="enter('-5693049027716773876');" onmouseout="out('-5693049027716773876');" style="">1559         // Attach the sub-collection list grids and specialty UI support                                 </span>
<span class="3681854507729164346" onmouseenter="enter('3681854507729164346');" onmouseout="out('3681854507729164346');" style="">1560         for (Property p : cmd.getProperties()) {                                                         </span>
<span class="-1029066852878262358" onmouseenter="enter('-1029066852878262358');" onmouseout="out('-1029066852878262358');" style="">1561             if (p.getMetadata() instanceof BasicFieldMetadata) {                                         </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">1562                 continue;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1563             }                                                                                            </span>
<span class="7939644157431336741" onmouseenter="enter('7939644157431336741');" onmouseout="out('7939644157431336741');" style="">1564             if (!ArrayUtils.contains(p.getMetadata().getAvailableToTypes(), entity.getType()[0])) {      </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">1565                 continue;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1566             }                                                                                            </span>
<span class="-4369878938823349306" onmouseenter="enter('-4369878938823349306');" onmouseout="out('-4369878938823349306');" style="">1567             if ((collectionRecords != null) &amp;&amp; (!collectionRecords.isEmpty())) {                         </span>
<span class="-2000540039355299527" onmouseenter="enter('-2000540039355299527');" onmouseout="out('-2000540039355299527');" style="">1568                 DynamicResultSet subCollectionEntities = collectionRecords.get(p.getName());             </span>
<span class="732471662007756244" onmouseenter="enter('732471662007756244');" onmouseout="out('732471662007756244');" style="">1569                 String containingEntityId = entity.getPMap().get(ef.getIdProperty()).getValue();         </span>
<span class="-2703128427729187311" onmouseenter="enter('-2703128427729187311');" onmouseout="out('-2703128427729187311');" style=""><abbr title="1570                 ListGrid listGrid = buildCollectionListGrid(containingEntityId, subCollectionEntities, p, ef.getSectionKey(), sectionCrumbs);">1570                 ListGrid listGrid = buildCollectionListGrid(containingEntityId, subCollectionEntities, p,ðŸ”µ</abbr></span>
<span class="1590765947089782318" onmouseenter="enter('1590765947089782318');" onmouseout="out('1590765947089782318');" style="">1571                 CollectionMetadata md = ((CollectionMetadata) (p.getMetadata()));                        </span>
<span class="-1532720970191757712" onmouseenter="enter('-1532720970191757712');" onmouseout="out('-1532720970191757712');" style="">1572                 if (md instanceof BasicCollectionMetadata) {                                             </span>
<span class="-1665410210923963053" onmouseenter="enter('-1665410210923963053');" onmouseout="out('-1665410210923963053');" style=""><abbr title="1573                     PersistencePackageRequest ppr = PersistencePackageRequest.fromMetadata(md, sectionCrumbs);">1573                     PersistencePackageRequest ppr = PersistencePackageRequest.fromMetadata(md, sectionCruðŸ”µ</abbr></span>
<span class="-9036890390079986870" onmouseenter="enter('-9036890390079986870');" onmouseout="out('-9036890390079986870');" style=""><abbr title="1574                     ClassMetadata collectionCmd = adminEntityService.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();">1574                     ClassMetadata collectionCmd = adminEntityService.getClassMetadata(ppr).getDynamicResuðŸ”µ</abbr></span>
<span class="7118158235764717040" onmouseenter="enter('7118158235764717040');" onmouseout="out('7118158235764717040');" style="">1575                     if (collectionCmd.getPolymorphicEntities().getChildren().length != 0) {              </span>
<span class="-2529377774460288369" onmouseenter="enter('-2529377774460288369');" onmouseout="out('-2529377774460288369');" style=""><abbr title="1576                         List&lt;ClassTree&gt; entityTypes = collectionCmd.getPolymorphicEntities().getCollapsedClassTrees();">1576                         List&lt;ClassTree&gt; entityTypes = collectionCmd.getPolymorphicEntities().getCollapsedðŸ”µ</abbr></span>
<span class="5700663076602659421" onmouseenter="enter('5700663076602659421');" onmouseout="out('5700663076602659421');" style="">1577                         ListGridActionGroup actionGroup = new ListGridActionGroup().withName(&quot;Add&quot;);     </span>
<span class="-8628780103469525246" onmouseenter="enter('-8628780103469525246');" onmouseout="out('-8628780103469525246');" style="">1578                         for (ClassTree entityType : entityTypes) {                                       </span>
<span class="2001589726232325224" onmouseenter="enter('2001589726232325224');" onmouseout="out('2001589726232325224');" style=""><abbr title="1579                             ListGridAction ADD = new ListGridAction(ListGridAction.ADD).withButtonClass(AddMethodType.PERSIST_EMPTY == ((BasicCollectionMetadata) (md)).getAddMethodType() ? &quot;sub-list-grid-add-empty&quot; : &quot;sub-list-grid-add&quot;).withActionTargetEntity(entityType.getFullyQualifiedClassname()).withUrlPostfix(&quot;/add&quot;).withIconClass(&quot;fa fa-plus&quot;).withDisplayText(BLCMessageUtils.getMessage(entityType.getFriendlyName()));">1579                             ListGridAction ADD = new ListGridAction(ListGridAction.ADD).withButtonClass(AðŸ”µ</abbr></span>
<span class="-362768101277236570" onmouseenter="enter('-362768101277236570');" onmouseout="out('-362768101277236570');" style="">1580                             actionGroup.getListGridActions().add(0, ADD);                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1581                         }                                                                                </span>
<span class="4272855771145592976" onmouseenter="enter('4272855771145592976');" onmouseout="out('4272855771145592976');" style="">1582                         listGrid.addToolbarActionGroup(actionGroup);                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1583                     } else {                                                                             </span>
<span class="-8721883599444789816" onmouseenter="enter('-8721883599444789816');" onmouseout="out('-8721883599444789816');" style=""><abbr title="1584                         listGrid.getToolbarActions().add(0, AddMethodType.PERSIST_EMPTY == ((BasicCollectionMetadata) (md)).getAddMethodType() ? DefaultListGridActions.ADD_EMPTY : DefaultListGridActions.ADD);">1584                         listGrid.getToolbarActions().add(0, AddMethodType.PERSIST_EMPTY == ((BasicCollectðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1585                     }                                                                                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1586                 } else {                                                                                 </span>
<span class="-8192307858907059023" onmouseenter="enter('-8192307858907059023');" onmouseout="out('-8192307858907059023');" style="">1587                     listGrid.getToolbarActions().add(0, DefaultListGridActions.ADD);                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1588                 }                                                                                        </span>
<span class="-5636004434191694594" onmouseenter="enter('-5636004434191694594');" onmouseout="out('-5636004434191694594');" style="">1589                 if (subCollectionEntities.getUnselectedTabMetadata().get(md.getTab()) != null) {         </span>
<span class="-6246999191581452259" onmouseenter="enter('-6246999191581452259');" onmouseout="out('-6246999191581452259');" style="">1590                     ef.addListGrid(cmd, listGrid, md.getTab(), md.getTabOrder(), md.getGroup(), true);   </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1591                 } else {                                                                                 </span>
<span class="-3682322762406032422" onmouseenter="enter('-3682322762406032422');" onmouseout="out('-3682322762406032422');" style="">1592                     ef.addListGrid(cmd, listGrid, md.getTab(), md.getTabOrder(), md.getGroup(), false);  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1593                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1594             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1595         }                                                                                                </span>
<span class="-8574421891214577202" onmouseenter="enter('-8574421891214577202');" onmouseout="out('-8574421891214577202');" style="">1596         if (CollectionUtils.isEmpty(ef.getActions())) {                                                  </span>
<span class="-2237425030372835917" onmouseenter="enter('-2237425030372835917');" onmouseout="out('-2237425030372835917');" style="">1597             ef.addAction(DefaultEntityFormActions.SAVE);                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1598         }                                                                                                </span>
<span class="-3017596271040445246" onmouseenter="enter('-3017596271040445246');" onmouseout="out('-3017596271040445246');" style="">1599         addDeleteActionIfAllowed(ef, cmd, entity);                                                       </span>
<span class="-1573379781634260780" onmouseenter="enter('-1573379781634260780');" onmouseout="out('-1573379781634260780');" style="">1600         addDuplicateActionIfAllowed(ef, cmd);                                                            </span>
<span class="-4992665792206214706" onmouseenter="enter('-4992665792206214706');" onmouseout="out('-4992665792206214706');" style="">1601         setReadOnlyState(ef, cmd, entity);                                                               </span>
<span class="-2369176302071135940" onmouseenter="enter('-2369176302071135940');" onmouseout="out('-2369176302071135940');" style="">1602         // check for fields that should be hidden based on annotations                                   </span>
<span class="-7540431012384828138" onmouseenter="enter('-7540431012384828138');" onmouseout="out('-7540431012384828138');" style="">1603         setVisibilityBasedOnShowIfFieldEquals(cmd, entity, ef);                                          </span>
<span class="-6573999189247732385" onmouseenter="enter('-6573999189247732385');" onmouseout="out('-6573999189247732385');" style="">1604         extensionManager.getProxy().modifyDetailEntityForm(ef);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1605     }                                                                                                    </span>
<span  style="">1606                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1607     /**                                                                                                  </span>
<span class="352645507222005893" onmouseenter="enter('352645507222005893');" onmouseout="out('352645507222005893');" style=""><abbr title="1608      * Adds the {@link DefaultEntityFormActions#DELETE} if the user is allowed to delete the &lt;b&gt;entity&lt;/b&gt;. The user can">1608      * Adds the {@link DefaultEntityFormActions#DELETE} if the user is allowed to delete the &lt;b&gt;entity&lt;/bðŸ”µ</abbr></span>
<span class="-3708177379444774538" onmouseenter="enter('-3708177379444774538');" onmouseout="out('-3708177379444774538');" style="">1609      * delete an entity for the following cases:                                                         </span>
<span class="3244483720103844454" onmouseenter="enter('3244483720103844454');" onmouseout="out('3244483720103844454');" style="">1610      * &lt;ol&gt;                                                                                              </span>
<span class="5070277409715594588" onmouseenter="enter('5070277409715594588');" onmouseout="out('5070277409715594588');" style=""><abbr title="1611      *  &lt;li&gt;The user has the security to {@link EntityOperationType#REMOVE} the given class name represented by">1611      *  &lt;li&gt;The user has the security to {@link EntityOperationType#REMOVE} the given class name represenðŸ”µ</abbr></span>
<span class="8957232178890049809" onmouseenter="enter('8957232178890049809');" onmouseout="out('8957232178890049809');" style=""><abbr title="1612      *  the &lt;b&gt;entityForm&lt;/b&gt; (determined by {@link #getSecurityClassname(EntityForm, ClassMetadata)})&lt;/li&gt;">1612      *  the &lt;b&gt;entityForm&lt;/b&gt; (determined by {@link #getSecurityClassname(EntityForm, ClassMetadata)})&lt;/lðŸ”µ</abbr></span>
<span class="980044994252332631" onmouseenter="enter('980044994252332631');" onmouseout="out('980044994252332631');" style="">1613      *  &lt;li&gt;The user has the security necessary to delete the given &lt;b&gt;entity&lt;/b&gt; according to the       </span>
<span class="8011888861168395573" onmouseenter="enter('8011888861168395573');" onmouseout="out('8011888861168395573');" style="">1614      *  {@link RowLevelSecurityService#canRemove(AdminUser, Entity)}&lt;/li&gt;                                </span>
<span class="6987349732947823565" onmouseenter="enter('6987349732947823565');" onmouseout="out('6987349732947823565');" style="">1615      * &lt;/ol&gt;                                                                                             </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1616      *                                                                                                   </span>
<span class="-8102393608813481146" onmouseenter="enter('-8102393608813481146');" onmouseout="out('-8102393608813481146');" style="">1617      * @param entityForm the form being generated                                                        </span>
<span class="-5184866399254269391" onmouseenter="enter('-5184866399254269391');" onmouseout="out('-5184866399254269391');" style="">1618      * @param cmd the metatadata used to build the &lt;b&gt;entityForm&lt;/b&gt; for the &lt;b&gt;entity&lt;/b&gt;               </span>
<span class="-6994238295290465877" onmouseenter="enter('-6994238295290465877');" onmouseout="out('-6994238295290465877');" style="">1619      * @param entity the entity being edited                                                             </span>
<span class="-8891442921277557778" onmouseenter="enter('-8891442921277557778');" onmouseout="out('-8891442921277557778');" style="">1620      * @see {@link SecurityVerifier#securityCheck(String, EntityOperationType)}                          </span>
<span class="-3828641031793918168" onmouseenter="enter('-3828641031793918168');" onmouseout="out('-3828641031793918168');" style="">1621      * @see {@link #getSecurityClassname(EntityForm, ClassMetadata)}                                     </span>
<span class="8925161549930098588" onmouseenter="enter('8925161549930098588');" onmouseout="out('8925161549930098588');" style="">1622      * @see {@link RowLevelSecurityService#canRemove(AdminUser, Entity)}                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1623      */                                                                                                  </span>
<span class="1590261750272169439" onmouseenter="enter('1590261750272169439');" onmouseout="out('1590261750272169439');" style="">1624     protected void addDeleteActionIfAllowed(EntityForm entityForm, ClassMetadata cmd, Entity entity) {   </span>
<span class="9176849152277833812" onmouseenter="enter('9176849152277833812');" onmouseout="out('9176849152277833812');" style="">1625         if (isDeletionAllowed(entityForm, cmd, entity)) {                                                </span>
<span class="-8844177275906434182" onmouseenter="enter('-8844177275906434182');" onmouseout="out('-8844177275906434182');" style="">1626             entityForm.addAction(DefaultEntityFormActions.DELETE);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1627         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1628     }                                                                                                    </span>
<span  style="">1629                                                                                                          </span>
<span class="-2375440634479242577" onmouseenter="enter('-2375440634479242577');" onmouseout="out('-2375440634479242577');" style=""><abbr title="1630     protected boolean isDeletionAllowed(final EntityForm entityForm, final ClassMetadata cmd, final Entity entity) {">1630     protected boolean isDeletionAllowed(final EntityForm entityForm, final ClassMetadata cmd, final EntitðŸ”µ</abbr></span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1631         try {                                                                                            </span>
<span class="5476366109962905346" onmouseenter="enter('5476366109962905346');" onmouseout="out('5476366109962905346');" style="">1632             String securityEntityClassname = getSecurityClassname(entityForm, cmd);                      </span>
<span class="-4824979268204802710" onmouseenter="enter('-4824979268204802710');" onmouseout="out('-4824979268204802710');" style=""><abbr title="1633             adminRemoteSecurityService.securityCheck(securityEntityClassname, EntityOperationType.REMOVE);">1633             adminRemoteSecurityService.securityCheck(securityEntityClassname, EntityOperationType.REMOVE)ðŸ”µ</abbr></span>
<span class="9220844322816084446" onmouseenter="enter('9220844322816084446');" onmouseout="out('9220844322816084446');" style="">1634         } catch (ServiceException e) {                                                                   </span>
<span class="-8912377967087217182" onmouseenter="enter('-8912377967087217182');" onmouseout="out('-8912377967087217182');" style="">1635             if (e instanceof SecurityServiceException) {                                                 </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1636                 return false;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1637             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1638         }                                                                                                </span>
<span class="-6544480517582328932" onmouseenter="enter('-6544480517582328932');" onmouseout="out('-6544480517582328932');" style="">1639         final AdminUser persistentAdminUser = adminRemoteSecurityService.getPersistentAdminUser();       </span>
<span class="589184337694528002" onmouseenter="enter('589184337694528002');" onmouseout="out('589184337694528002');" style=""><abbr title="1640         return rowLevelSecurityService.canUpdate(persistentAdminUser, entity) &amp;&amp; rowLevelSecurityService.canRemove(persistentAdminUser, entity);">1640         return rowLevelSecurityService.canUpdate(persistentAdminUser, entity) &amp;&amp; rowLevelSecurityService.ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1641     }                                                                                                    </span>
<span  style="">1642                                                                                                          </span>
<span class="-2618384530695401271" onmouseenter="enter('-2618384530695401271');" onmouseout="out('-2618384530695401271');" style="">1643     protected void addDuplicateActionIfAllowed(final EntityForm entityForm, final ClassMetadata cmd) {   </span>
<span class="-4074855000497140283" onmouseenter="enter('-4074855000497140283');" onmouseout="out('-4074855000497140283');" style="">1644         if (isDuplicationAllowed(entityForm, cmd)) {                                                     </span>
<span class="6780575287202109079" onmouseenter="enter('6780575287202109079');" onmouseout="out('6780575287202109079');" style="">1645             entityForm.addAction(DefaultEntityFormActions.DUPLICATE);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1646         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1647     }                                                                                                    </span>
<span  style="">1648                                                                                                          </span>
<span class="2750172847360880677" onmouseenter="enter('2750172847360880677');" onmouseout="out('2750172847360880677');" style="">1649     protected boolean isDuplicationAllowed(final EntityForm entityForm, final ClassMetadata cmd) {       </span>
<span class="5761145246382260648" onmouseenter="enter('5761145246382260648');" onmouseout="out('5761145246382260648');" style="">1650         final String securityClassname = getSecurityClassname(entityForm, cmd);                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1651         try {                                                                                            </span>
<span class="7910151490387293712" onmouseenter="enter('7910151490387293712');" onmouseout="out('7910151490387293712');" style="">1652             adminRemoteSecurityService.securityCheck(securityClassname, EntityOperationType.ADD);        </span>
<span class="9220844322816084446" onmouseenter="enter('9220844322816084446');" onmouseout="out('9220844322816084446');" style="">1653         } catch (ServiceException e) {                                                                   </span>
<span class="-8912377967087217182" onmouseenter="enter('-8912377967087217182');" onmouseout="out('-8912377967087217182');" style="">1654             if (e instanceof SecurityServiceException) {                                                 </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1655                 return false;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1656             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1657         }                                                                                                </span>
<span class="3631252767096747840" onmouseenter="enter('3631252767096747840');" onmouseout="out('3631252767096747840');" style="">1658         final Class&lt;?&gt; entityClass = dynamicEntityDao.getImplClass(securityClassname);                   </span>
<span class="-5333941689174751140" onmouseenter="enter('-5333941689174751140');" onmouseout="out('-5333941689174751140');" style=""><abbr title="1659         return duplicator.validate(entityClass, Long.valueOf(entityForm.getId())) &amp;&amp; rowLevelSecurityService.canAdd(adminRemoteSecurityService.getPersistentAdminUser(), securityClassname, cmd);">1659         return duplicator.validate(entityClass, Long.valueOf(entityForm.getId())) &amp;&amp; rowLevelSecurityServðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1660     }                                                                                                    </span>
<span  style="">1661                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1662     /**                                                                                                  </span>
<span class="-8604925744257744736" onmouseenter="enter('-8604925744257744736');" onmouseout="out('-8604925744257744736');" style="">1663      * The given &lt;b&gt;entityForm&lt;/b&gt; is marked as readonly for the following cases:                        </span>
<span class="3244483720103844454" onmouseenter="enter('3244483720103844454');" onmouseout="out('3244483720103844454');" style="">1664      * &lt;ol&gt;                                                                                              </span>
<span class="8384568302593626864" onmouseenter="enter('8384568302593626864');" onmouseout="out('8384568302593626864');" style="">1665      *  &lt;li&gt;All of the properties from &lt;b&gt;cmd&lt;/b&gt; are readonly&lt;/b&gt;&lt;/li&gt;                                  </span>
<span class="3259494465539702713" onmouseenter="enter('3259494465539702713');" onmouseout="out('3259494465539702713');" style=""><abbr title="1666      *  &lt;li&gt;The user does not have the security to {@link EntityOperationType#UPDATE} the given class name represented by">1666      *  &lt;li&gt;The user does not have the security to {@link EntityOperationType#UPDATE} the given class namðŸ”µ</abbr></span>
<span class="8957232178890049809" onmouseenter="enter('8957232178890049809');" onmouseout="out('8957232178890049809');" style=""><abbr title="1667      *  the &lt;b&gt;entityForm&lt;/b&gt; (determined by {@link #getSecurityClassname(EntityForm, ClassMetadata)})&lt;/li&gt;">1667      *  the &lt;b&gt;entityForm&lt;/b&gt; (determined by {@link #getSecurityClassname(EntityForm, ClassMetadata)})&lt;/lðŸ”µ</abbr></span>
<span class="-661097031284754018" onmouseenter="enter('-661097031284754018');" onmouseout="out('-661097031284754018');" style=""><abbr title="1668      *  &lt;li&gt;The user does not have the security necessary to modify the given &lt;b&gt;entity&lt;/b&gt; according to the">1668      *  &lt;li&gt;The user does not have the security necessary to modify the given &lt;b&gt;entity&lt;/b&gt; according to ðŸ”µ</abbr></span>
<span class="1476257847894540357" onmouseenter="enter('1476257847894540357');" onmouseout="out('1476257847894540357');" style="">1669      *  {@link RowLevelSecurityService#canUpdate(AdminUser, Entity)}&lt;/li&gt;                                </span>
<span class="6987349732947823565" onmouseenter="enter('6987349732947823565');" onmouseout="out('6987349732947823565');" style="">1670      * &lt;/ol&gt;                                                                                             </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1671      *                                                                                                   </span>
<span class="-8102393608813481146" onmouseenter="enter('-8102393608813481146');" onmouseout="out('-8102393608813481146');" style="">1672      * @param entityForm the form being generated                                                        </span>
<span class="-5184866399254269391" onmouseenter="enter('-5184866399254269391');" onmouseout="out('-5184866399254269391');" style="">1673      * @param cmd the metatadata used to build the &lt;b&gt;entityForm&lt;/b&gt; for the &lt;b&gt;entity&lt;/b&gt;               </span>
<span class="-6994238295290465877" onmouseenter="enter('-6994238295290465877');" onmouseout="out('-6994238295290465877');" style="">1674      * @param entity the entity being edited                                                             </span>
<span class="-8891442921277557778" onmouseenter="enter('-8891442921277557778');" onmouseout="out('-8891442921277557778');" style="">1675      * @see {@link SecurityVerifier#securityCheck(String, EntityOperationType)}                          </span>
<span class="-3828641031793918168" onmouseenter="enter('-3828641031793918168');" onmouseout="out('-3828641031793918168');" style="">1676      * @see {@link #getSecurityClassname(EntityForm, ClassMetadata)}                                     </span>
<span class="3340343931427513832" onmouseenter="enter('3340343931427513832');" onmouseout="out('3340343931427513832');" style="">1677      * @see {@link RowLevelSecurityService#canUpdate(AdminUser, Entity)}                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1678      */                                                                                                  </span>
<span class="7475800010460682445" onmouseenter="enter('7475800010460682445');" onmouseout="out('7475800010460682445');" style="">1679     protected void setReadOnlyState(EntityForm entityForm, ClassMetadata cmd, Entity entity) {           </span>
<span class="-3754358688511165958" onmouseenter="enter('-3754358688511165958');" onmouseout="out('-3754358688511165958');" style="">1680         boolean readOnly = true;                                                                         </span>
<span  style="">1681                                                                                                          </span>
<span class="-2305007204320036324" onmouseenter="enter('-2305007204320036324');" onmouseout="out('-2305007204320036324');" style="">1682         // If all of the fields are read only, we&#x27;ll mark the form as such                               </span>
<span class="-3497335608114491506" onmouseenter="enter('-3497335608114491506');" onmouseout="out('-3497335608114491506');" style="">1683         for (Property property : cmd.getProperties()) {                                                  </span>
<span class="-5795738539482972481" onmouseenter="enter('-5795738539482972481');" onmouseout="out('-5795738539482972481');" style="">1684             FieldMetadata fieldMetadata = property.getMetadata();                                        </span>
<span class="-638676474141600706" onmouseenter="enter('-638676474141600706');" onmouseout="out('-638676474141600706');" style="">1685             if (fieldMetadata instanceof BasicFieldMetadata) {                                           </span>
<span class="-3122303192863427007" onmouseenter="enter('-3122303192863427007');" onmouseout="out('-3122303192863427007');" style=""><abbr title="1686                 readOnly = ((BasicFieldMetadata) fieldMetadata).getReadOnly() != null &amp;&amp; ((BasicFieldMetadata) fieldMetadata).getReadOnly();">1686                 readOnly = ((BasicFieldMetadata) fieldMetadata).getReadOnly() != null &amp;&amp; ((BasicFieldMetaðŸ”µ</abbr></span>
<span class="2916396140375617365" onmouseenter="enter('2916396140375617365');" onmouseout="out('2916396140375617365');" style="">1687                 if (!readOnly) {                                                                         </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1688                     break;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1689                 }                                                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1690             } else {                                                                                     </span>
<span class="2490832096811631077" onmouseenter="enter('2490832096811631077');" onmouseout="out('2490832096811631077');" style="">1691                 readOnly = ((CollectionMetadata) fieldMetadata).isMutable();                             </span>
<span class="2916396140375617365" onmouseenter="enter('2916396140375617365');" onmouseout="out('2916396140375617365');" style="">1692                 if (!readOnly) {                                                                         </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1693                     break;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1694                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1695             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1696         }                                                                                                </span>
<span  style="">1697                                                                                                          </span>
<span class="2916396140375617365" onmouseenter="enter('2916396140375617365');" onmouseout="out('2916396140375617365');" style="">1698         if (!readOnly) {                                                                                 </span>
<span class="8591967978504453740" onmouseenter="enter('8591967978504453740');" onmouseout="out('8591967978504453740');" style=""><abbr title="1699             // If the user does not have edit permissions, we will go ahead and make the form read only to prevent confusion">1699             // If the user does not have edit permissions, we will go ahead and make the form read only tðŸ”µ</abbr></span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1700             try {                                                                                        </span>
<span class="5476366109962905346" onmouseenter="enter('5476366109962905346');" onmouseout="out('5476366109962905346');" style="">1701                 String securityEntityClassname = getSecurityClassname(entityForm, cmd);                  </span>
<span class="7305757249405162956" onmouseenter="enter('7305757249405162956');" onmouseout="out('7305757249405162956');" style=""><abbr title="1702                 adminRemoteSecurityService.securityCheck(securityEntityClassname, EntityOperationType.UPDATE);">1702                 adminRemoteSecurityService.securityCheck(securityEntityClassname, EntityOperationType.UPDðŸ”µ</abbr></span>
<span class="9220844322816084446" onmouseenter="enter('9220844322816084446');" onmouseout="out('9220844322816084446');" style="">1703             } catch (ServiceException e) {                                                               </span>
<span class="-8912377967087217182" onmouseenter="enter('-8912377967087217182');" onmouseout="out('-8912377967087217182');" style="">1704                 if (e instanceof SecurityServiceException) {                                             </span>
<span class="6120466793575593078" onmouseenter="enter('6120466793575593078');" onmouseout="out('6120466793575593078');" style="">1705                     readOnly = true;                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1706                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1707             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1708         }                                                                                                </span>
<span  style="">1709                                                                                                          </span>
<span class="-2506720598607900340" onmouseenter="enter('-2506720598607900340');" onmouseout="out('-2506720598607900340');" style=""><abbr title="1710         // if the normal admin security service has not deemed this readonly and the all of the properties on the entity">1710         // if the normal admin security service has not deemed this readonly and the all of the propertieðŸ”µ</abbr></span>
<span class="-360101994104390021" onmouseenter="enter('-360101994104390021');" onmouseout="out('-360101994104390021');" style="">1711         // are not readonly, then check the row-level security                                           </span>
<span class="2916396140375617365" onmouseenter="enter('2916396140375617365');" onmouseout="out('2916396140375617365');" style="">1712         if (!readOnly) {                                                                                 </span>
<span class="7094483165734488508" onmouseenter="enter('7094483165734488508');" onmouseout="out('7094483165734488508');" style=""><abbr title="1713             readOnly = !rowLevelSecurityService.canUpdate(adminRemoteSecurityService.getPersistentAdminUser(), entity);">1713             readOnly = !rowLevelSecurityService.canUpdate(adminRemoteSecurityService.getPersistentAdminUsðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1714         }                                                                                                </span>
<span  style="">1715                                                                                                          </span>
<span class="7378462715957185244" onmouseenter="enter('7378462715957185244');" onmouseout="out('7378462715957185244');" style="">1716         if (readOnly) {                                                                                  </span>
<span class="7356620202531041753" onmouseenter="enter('7356620202531041753');" onmouseout="out('7356620202531041753');" style="">1717             entityForm.setReadOnly();                                                                    </span>
<span class="-1010311312628539836" onmouseenter="enter('-1010311312628539836');" onmouseout="out('-1010311312628539836');" style=""><abbr title="1718             //If someone has replaced RowLevelSecurityService, check here to make sure the replacement implements the expected interface">1718             //If someone has replaced RowLevelSecurityService, check here to make sure the replacement imðŸ”µ</abbr></span>
<span class="8968842492276656547" onmouseenter="enter('8968842492276656547');" onmouseout="out('8968842492276656547');" style="">1719             if (rowLevelSecurityService instanceof ExceptionAwareRowLevelSecurityProvider) {             </span>
<span class="2057574043580690918" onmouseenter="enter('2057574043580690918');" onmouseout="out('2057574043580690918');" style=""><abbr title="1720                 EntityFormModifierConfiguration entityFormModifierConfiguration = ((ExceptionAwareRowLevelSecurityProvider) rowLevelSecurityService).getUpdateDenialExceptions();">1720                 EntityFormModifierConfiguration entityFormModifierConfiguration = ((ExceptionAwareRowLeveðŸ”µ</abbr></span>
<span class="-3023990582845647391" onmouseenter="enter('-3023990582845647391');" onmouseout="out('-3023990582845647391');" style=""><abbr title="1721                 for (EntityFormModifierData&lt;EntityFormModifierDataPoint&gt; data : entityFormModifierConfiguration.getData()) {">1721                 for (EntityFormModifierData&lt;EntityFormModifierDataPoint&gt; data : entityFormModifierConfiguðŸ”µ</abbr></span>
<span class="9148632731325481398" onmouseenter="enter('9148632731325481398');" onmouseout="out('9148632731325481398');" style="">1722                     for (EntityFormModifier modifier : entityFormModifierConfiguration.getModifier()) {  </span>
<span class="7131836139928065231" onmouseenter="enter('7131836139928065231');" onmouseout="out('7131836139928065231');" style="">1723                         if (modifier.isQualified(data.getModifierType())) {                              </span>
<span class="-3482148637742284796" onmouseenter="enter('-3482148637742284796');" onmouseout="out('-3482148637742284796');" style="">1724                             modifier.modifyEntityForm(new EntityFormModifierRequest()                    </span>
<span class="8232027775022174594" onmouseenter="enter('8232027775022174594');" onmouseout="out('8232027775022174594');" style="">1725                                     .withEntityForm(entityForm)                                          </span>
<span class="-1014541830042934633" onmouseenter="enter('-1014541830042934633');" onmouseout="out('-1014541830042934633');" style="">1726                                     .withConfiguration(data)                                             </span>
<span class="-7538620272607121359" onmouseenter="enter('-7538620272607121359');" onmouseout="out('-7538620272607121359');" style="">1727                                     .withCurrentUser(adminRemoteSecurityService.getPersistentAdminUser())</span>
<span class="-2471313258794916634" onmouseenter="enter('-2471313258794916634');" onmouseout="out('-2471313258794916634');" style="">1728                                     .withEntity(entity)                                                  </span>
<span class="680994463596247300" onmouseenter="enter('680994463596247300');" onmouseout="out('680994463596247300');" style="">1729                                     .withRowLevelSecurityService(rowLevelSecurityService));              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1730                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1731                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1732                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1733             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1734         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1735     }                                                                                                    </span>
<span  style="">1736                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1737     /**                                                                                                  </span>
<span class="4825906517632270050" onmouseenter="enter('4825906517632270050');" onmouseout="out('4825906517632270050');" style="">1738      * Obtains the class name suitable for passing along to the {@link SecurityVerifier}                 </span>
<span class="-4758509257574949373" onmouseenter="enter('-4758509257574949373');" onmouseout="out('-4758509257574949373');" style="">1739      * @param entityForm                                                                                 </span>
<span class="3340688165449077744" onmouseenter="enter('3340688165449077744');" onmouseout="out('3340688165449077744');" style="">1740      * @param cmd                                                                                        </span>
<span class="-9165797340485297481" onmouseenter="enter('-9165797340485297481');" onmouseout="out('-9165797340485297481');" style="">1741      * @return                                                                                           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1742      */                                                                                                  </span>
<span class="-4629711814814156723" onmouseenter="enter('-4629711814814156723');" onmouseout="out('-4629711814814156723');" style="">1743     protected String getSecurityClassname(EntityForm entityForm, ClassMetadata cmd) {                    </span>
<span class="-6496925357216982154" onmouseenter="enter('-6496925357216982154');" onmouseout="out('-6496925357216982154');" style="">1744         String securityEntityClassname = entityForm.getCeilingEntityClassname();                         </span>
<span  style="">1745                                                                                                          </span>
<span class="-7034725187183815217" onmouseenter="enter('-7034725187183815217');" onmouseout="out('-7034725187183815217');" style="">1746         if (!StringUtils.isEmpty(cmd.getSecurityCeilingType())) {                                        </span>
<span class="5083723888191082683" onmouseenter="enter('5083723888191082683');" onmouseout="out('5083723888191082683');" style="">1747             securityEntityClassname = cmd.getSecurityCeilingType();                                      </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1748         } else {                                                                                         </span>
<span class="7913947527267397417" onmouseenter="enter('7913947527267397417');" onmouseout="out('7913947527267397417');" style="">1749             if (entityForm.getDynamicFormInfos() != null) {                                              </span>
<span class="7790362624567421850" onmouseenter="enter('7790362624567421850');" onmouseout="out('7790362624567421850');" style="">1750                 for (DynamicEntityFormInfo info : entityForm.getDynamicFormInfos().values()) {           </span>
<span class="-1917944725928650662" onmouseenter="enter('-1917944725928650662');" onmouseout="out('-1917944725928650662');" style="">1751                     if (!StringUtils.isEmpty(info.getSecurityCeilingClassName())) {                      </span>
<span class="4842268456536900985" onmouseenter="enter('4842268456536900985');" onmouseout="out('4842268456536900985');" style="">1752                         securityEntityClassname = info.getSecurityCeilingClassName();                    </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1753                         break;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1754                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1755                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1756             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1757         }                                                                                                </span>
<span  style="">1758                                                                                                          </span>
<span class="-4632494495444562964" onmouseenter="enter('-4632494495444562964');" onmouseout="out('-4632494495444562964');" style="">1759         return securityEntityClassname;                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1760     }                                                                                                    </span>
<span  style="">1761                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1762     @Override                                                                                            </span>
<span class="-2624998369196687024" onmouseenter="enter('-2624998369196687024');" onmouseout="out('-2624998369196687024');" style="">1763     public void populateEntityFormFields(EntityForm ef, Entity entity) {                                 </span>
<span class="-5366055867936531883" onmouseenter="enter('-5366055867936531883');" onmouseout="out('-5366055867936531883');" style="">1764         populateEntityFormFields(ef, entity, true, true);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1765     }                                                                                                    </span>
<span  style="">1766                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1767     @Override                                                                                            </span>
<span class="-6740512050797749179" onmouseenter="enter('-6740512050797749179');" onmouseout="out('-6740512050797749179');" style=""><abbr title="1768     public void populateEntityFormFields(EntityForm ef, Entity entity, boolean populateType, boolean populateId) {">1768     public void populateEntityFormFields(EntityForm ef, Entity entity, boolean populateType, boolean popuðŸ”µ</abbr></span>
<span class="-8844360907694676103" onmouseenter="enter('-8844360907694676103');" onmouseout="out('-8844360907694676103');" style="">1769         if (populateId) {                                                                                </span>
<span class="-5951790405273252562" onmouseenter="enter('-5951790405273252562');" onmouseout="out('-5951790405273252562');" style="">1770             ef.setId(entity.findProperty(ef.getIdProperty()).getValue());                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1771         }                                                                                                </span>
<span class="6008447871872074898" onmouseenter="enter('6008447871872074898');" onmouseout="out('6008447871872074898');" style="">1772         if (populateType) {                                                                              </span>
<span class="2566657873931456162" onmouseenter="enter('2566657873931456162');" onmouseout="out('2566657873931456162');" style="">1773             ef.setEntityType(entity.getType()[0]);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1774         }                                                                                                </span>
<span  style="">1775                                                                                                          </span>
<span class="-4264420628414385505" onmouseenter="enter('-4264420628414385505');" onmouseout="out('-4264420628414385505');" style="">1776         for (Entry&lt;String, Field&gt; entry : ef.getFields().entrySet()) {                                   </span>
<span class="2420686282896377848" onmouseenter="enter('2420686282896377848');" onmouseout="out('2420686282896377848');" style="">1777             Property entityProp = entity.findProperty(entry.getKey());                                   </span>
<span class="-2366650903096921345" onmouseenter="enter('-2366650903096921345');" onmouseout="out('-2366650903096921345');" style="">1778             if (entityProp != null) {                                                                    </span>
<span class="-7617915495394948835" onmouseenter="enter('-7617915495394948835');" onmouseout="out('-7617915495394948835');" style="">1779                 entry.getValue().setValue(entityProp.getValue());                                        </span>
<span class="-4933731915633510416" onmouseenter="enter('-4933731915633510416');" onmouseout="out('-4933731915633510416');" style="">1780                 entry.getValue().setDisplayValue(entityProp.getDisplayValue());                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1781             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1782         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1783     }                                                                                                    </span>
<span  style="">1784                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1785     @Override                                                                                            </span>
<span class="8490818103305754450" onmouseenter="enter('8490818103305754450');" onmouseout="out('8490818103305754450');" style=""><abbr title="1786     public void populateAdornedEntityFormFields(EntityForm ef, Entity entity, AdornedTargetList adornedList) {">1786     public void populateAdornedEntityFormFields(EntityForm ef, Entity entity, AdornedTargetList adornedLiðŸ”µ</abbr></span>
<span class="-7724922710012225100" onmouseenter="enter('-7724922710012225100');" onmouseout="out('-7724922710012225100');" style=""><abbr title="1787         Field field = ef.findField(adornedList.getTargetObjectPath() + &quot;.&quot; + adornedList.getTargetIdProperty());">1787         Field field = ef.findField(adornedList.getTargetObjectPath() + &quot;.&quot; + adornedList.getTargetIdPropeðŸ”µ</abbr></span>
<span class="6683657094444632615" onmouseenter="enter('6683657094444632615');" onmouseout="out('6683657094444632615');" style="">1788         Property entityProp = entity.findProperty(ef.getIdProperty());                                   </span>
<span class="627899284580660581" onmouseenter="enter('627899284580660581');" onmouseout="out('627899284580660581');" style="">1789         field.setValue(entityProp.getValue());                                                           </span>
<span  style="">1790                                                                                                          </span>
<span class="2111689089149990625" onmouseenter="enter('2111689089149990625');" onmouseout="out('2111689089149990625');" style="">1791         if (StringUtils.isNotBlank(adornedList.getSortField())) {                                        </span>
<span class="6344948819160968120" onmouseenter="enter('6344948819160968120');" onmouseout="out('6344948819160968120');" style="">1792             field = ef.findField(adornedList.getSortField());                                            </span>
<span class="8964070033667700490" onmouseenter="enter('8964070033667700490');" onmouseout="out('8964070033667700490');" style="">1793             entityProp = entity.findProperty(adornedList.getSortField());                                </span>
<span class="-2263433618148702675" onmouseenter="enter('-2263433618148702675');" onmouseout="out('-2263433618148702675');" style="">1794             if (field != null &amp;&amp; entityProp != null) {                                                   </span>
<span class="627899284580660581" onmouseenter="enter('627899284580660581');" onmouseout="out('627899284580660581');" style="">1795                 field.setValue(entityProp.getValue());                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1796             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1797         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1798     }                                                                                                    </span>
<span  style="">1799                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1800     @Override                                                                                            </span>
<span class="8114269508855532827" onmouseenter="enter('8114269508855532827');" onmouseout="out('8114269508855532827');" style="">1801     public void populateMapEntityFormFields(EntityForm ef, Entity entity) {                              </span>
<span class="4628483460047019115" onmouseenter="enter('4628483460047019115');" onmouseout="out('4628483460047019115');" style="">1802         Field field = ef.findField(&quot;priorKey&quot;);                                                          </span>
<span class="263056657127968906" onmouseenter="enter('263056657127968906');" onmouseout="out('263056657127968906');" style="">1803         Property entityProp = entity.findProperty(&quot;key&quot;);                                                </span>
<span class="-2263433618148702675" onmouseenter="enter('-2263433618148702675');" onmouseout="out('-2263433618148702675');" style="">1804         if (field != null &amp;&amp; entityProp != null) {                                                       </span>
<span class="627899284580660581" onmouseenter="enter('627899284580660581');" onmouseout="out('627899284580660581');" style="">1805             field.setValue(entityProp.getValue());                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1806         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1807     }                                                                                                    </span>
<span  style="">1808                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1809     @Override                                                                                            </span>
<span class="150942895693350371" onmouseenter="enter('150942895693350371');" onmouseout="out('150942895693350371');" style=""><abbr title="1810     public EntityForm buildAdornedListForm(AdornedTargetCollectionMetadata adornedMd, AdornedTargetList adornedList,">1810     public EntityForm buildAdornedListForm(AdornedTargetCollectionMetadata adornedMd, AdornedTargetList aðŸ”µ</abbr></span>
<span class="12000407411688948" onmouseenter="enter('12000407411688948');" onmouseout="out('12000407411688948');" style=""><abbr title="1811             String parentId, boolean isViewCollectionItem, List&lt;SectionCrumb&gt; sectionCrumbs, boolean isAdd)">1811             String parentId, boolean isViewCollectionItem, List&lt;SectionCrumb&gt; sectionCrumbs, boolean isAdðŸ”µ</abbr></span>
<span class="1998458335829271558" onmouseenter="enter('1998458335829271558');" onmouseout="out('1998458335829271558');" style="">1812             throws ServiceException {                                                                    </span>
<span class="7440011096899970462" onmouseenter="enter('7440011096899970462');" onmouseout="out('7440011096899970462');" style="">1813         EntityForm ef = createStandardAdornedEntityForm();                                               </span>
<span class="3191357523588163011" onmouseenter="enter('3191357523588163011');" onmouseout="out('3191357523588163011');" style=""><abbr title="1814         return buildAdornedListForm(adornedMd, adornedList, parentId, isViewCollectionItem, ef, sectionCrumbs, isAdd);">1814         return buildAdornedListForm(adornedMd, adornedList, parentId, isViewCollectionItem, ef, sectionCrðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1815     }                                                                                                    </span>
<span  style="">1816                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1817     @Override                                                                                            </span>
<span class="150942895693350371" onmouseenter="enter('150942895693350371');" onmouseout="out('150942895693350371');" style=""><abbr title="1818     public EntityForm buildAdornedListForm(AdornedTargetCollectionMetadata adornedMd, AdornedTargetList adornedList,">1818     public EntityForm buildAdornedListForm(AdornedTargetCollectionMetadata adornedMd, AdornedTargetList aðŸ”µ</abbr></span>
<span class="3984058849831877067" onmouseenter="enter('3984058849831877067');" onmouseout="out('3984058849831877067');" style=""><abbr title="1819             String parentId, boolean isViewCollectionItem, EntityForm ef, List&lt;SectionCrumb&gt; sectionCrumbs, boolean isAdd)">1819             String parentId, boolean isViewCollectionItem, EntityForm ef, List&lt;SectionCrumb&gt; sectionCrumbðŸ”µ</abbr></span>
<span class="1998458335829271558" onmouseenter="enter('1998458335829271558');" onmouseout="out('1998458335829271558');" style="">1820             throws ServiceException {                                                                    </span>
<span class="2447703614414495939" onmouseenter="enter('2447703614414495939');" onmouseout="out('2447703614414495939');" style="">1821         ef.setEntityType(adornedList.getAdornedTargetEntityClassname());                                 </span>
<span  style="">1822                                                                                                          </span>
<span class="-5881575004956694509" onmouseenter="enter('-5881575004956694509');" onmouseout="out('-5881575004956694509');" style="">1823         // Get the metadata for this adorned field                                                       </span>
<span class="-3021134083097680634" onmouseenter="enter('-3021134083097680634');" onmouseout="out('-3021134083097680634');" style="">1824         PersistencePackageRequest request = PersistencePackageRequest.adorned()                          </span>
<span class="-7461338641125591711" onmouseenter="enter('-7461338641125591711');" onmouseout="out('-7461338641125591711');" style="">1825                 .withCeilingEntityClassname(adornedMd.getCollectionCeilingEntity())                      </span>
<span class="5166488781691104787" onmouseenter="enter('5166488781691104787');" onmouseout="out('5166488781691104787');" style="">1826                 .withAdornedList(adornedList)                                                            </span>
<span class="6300132115435073341" onmouseenter="enter('6300132115435073341');" onmouseout="out('6300132115435073341');" style="">1827                 .withSectionCrumbs(sectionCrumbs);                                                       </span>
<span class="-6327467589468547459" onmouseenter="enter('-6327467589468547459');" onmouseout="out('-6327467589468547459');" style="">1828         request.setAddOperationInspect(isAdd);                                                           </span>
<span class="8129278729958971412" onmouseenter="enter('8129278729958971412');" onmouseout="out('8129278729958971412');" style=""><abbr title="1829         ClassMetadata collectionMetadata = adminEntityService.getClassMetadata(request).getDynamicResultSet().getClassMetaData();">1829         ClassMetadata collectionMetadata = adminEntityService.getClassMetadata(request).getDynamicResultSðŸ”µ</abbr></span>
<span  style="">1830                                                                                                          </span>
<span class="-4937065852383367448" onmouseenter="enter('-4937065852383367448');" onmouseout="out('-4937065852383367448');" style="">1831         List&lt;Property&gt; entityFormProperties = new ArrayList&lt;&gt;();                                         </span>
<span class="9162843466163784659" onmouseenter="enter('9162843466163784659');" onmouseout="out('9162843466163784659');" style="">1832         if (isViewCollectionItem) {                                                                      </span>
<span class="-6444196324035087919" onmouseenter="enter('-6444196324035087919');" onmouseout="out('-6444196324035087919');" style="">1833             Collections.addAll(entityFormProperties, collectionMetadata.getProperties());                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1834         } else {                                                                                         </span>
<span class="8165943161441555593" onmouseenter="enter('8165943161441555593');" onmouseout="out('8165943161441555593');" style="">1835             // We want our entity form to only render the maintained adorned target fields               </span>
<span class="-6459504561228602972" onmouseenter="enter('-6459504561228602972');" onmouseout="out('-6459504561228602972');" style="">1836             for (String targetFieldName : adornedMd.getMaintainedAdornedTargetFields()) {                </span>
<span class="-5374323299509239162" onmouseenter="enter('-5374323299509239162');" onmouseout="out('-5374323299509239162');" style="">1837                 Property p = collectionMetadata.getPMap().get(targetFieldName);                          </span>
<span class="3623466133802910873" onmouseenter="enter('3623466133802910873');" onmouseout="out('3623466133802910873');" style=""><abbr title="1838                 if (p.getMetadata() instanceof BasicFieldMetadata &amp;&amp; BooleanUtils.isNotTrue( p.getMetadata().getExcluded())) {">1838                 if (p.getMetadata() instanceof BasicFieldMetadata &amp;&amp; BooleanUtils.isNotTrue( p.getMetadatðŸ”µ</abbr></span>
<span class="-8585934909139340387" onmouseenter="enter('-8585934909139340387');" onmouseout="out('-8585934909139340387');" style="">1839                     ((BasicFieldMetadata) p.getMetadata()).setVisibility(VisibilityEnum.VISIBLE_ALL);    </span>
<span class="-6393972713668288785" onmouseenter="enter('-6393972713668288785');" onmouseout="out('-6393972713668288785');" style="">1840                     entityFormProperties.add(p);                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1841                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1842             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1843         }                                                                                                </span>
<span  style="">1844                                                                                                          </span>
<span class="-1687272513553387314" onmouseenter="enter('-1687272513553387314');" onmouseout="out('-1687272513553387314');" style="">1845         // Set the maintained fields on the form                                                         </span>
<span class="6598971975233417362" onmouseenter="enter('6598971975233417362');" onmouseout="out('6598971975233417362');" style="">1846         setEntityFormFields(collectionMetadata, ef, entityFormProperties);                               </span>
<span  style="">1847                                                                                                          </span>
<span class="7903383611177038089" onmouseenter="enter('7903383611177038089');" onmouseout="out('7903383611177038089');" style="">1848         // Add these two additional hidden fields that are required for persistence                      </span>
<span class="-6303462610985739492" onmouseenter="enter('-6303462610985739492');" onmouseout="out('-6303462610985739492');" style="">1849         Field f = new Field()                                                                            </span>
<span class="-7418437452692570792" onmouseenter="enter('-7418437452692570792');" onmouseout="out('-7418437452692570792');" style="">1850                 .withName(adornedList.getLinkedObjectPath() + &quot;.&quot; + adornedList.getLinkedIdProperty())   </span>
<span class="8578132396126170845" onmouseenter="enter('8578132396126170845');" onmouseout="out('8578132396126170845');" style="">1851                 .withFieldType(SupportedFieldType.HIDDEN.toString())                                     </span>
<span class="3333593611580125868" onmouseenter="enter('3333593611580125868');" onmouseout="out('3333593611580125868');" style="">1852                 .withValue(parentId);                                                                    </span>
<span class="-6955921800298195002" onmouseenter="enter('-6955921800298195002');" onmouseout="out('-6955921800298195002');" style="">1853         ef.addHiddenField(collectionMetadata, f);                                                        </span>
<span  style="">1854                                                                                                          </span>
<span class="3649036859858659928" onmouseenter="enter('3649036859858659928');" onmouseout="out('3649036859858659928');" style="">1855         f = new Field()                                                                                  </span>
<span class="-8965183336188726297" onmouseenter="enter('-8965183336188726297');" onmouseout="out('-8965183336188726297');" style="">1856                 .withName(adornedList.getTargetObjectPath() + &quot;.&quot; + adornedList.getTargetIdProperty())   </span>
<span class="8578132396126170845" onmouseenter="enter('8578132396126170845');" onmouseout="out('8578132396126170845');" style="">1857                 .withFieldType(SupportedFieldType.HIDDEN.toString())                                     </span>
<span class="9105828036023594182" onmouseenter="enter('9105828036023594182');" onmouseout="out('9105828036023594182');" style="">1858                 .withIdOverride(&quot;adornedTargetIdProperty&quot;);                                              </span>
<span class="-6955921800298195002" onmouseenter="enter('-6955921800298195002');" onmouseout="out('-6955921800298195002');" style="">1859         ef.addHiddenField(collectionMetadata, f);                                                        </span>
<span  style="">1860                                                                                                          </span>
<span class="2111689089149990625" onmouseenter="enter('2111689089149990625');" onmouseout="out('2111689089149990625');" style="">1861         if (StringUtils.isNotBlank(adornedList.getSortField())) {                                        </span>
<span class="3649036859858659928" onmouseenter="enter('3649036859858659928');" onmouseout="out('3649036859858659928');" style="">1862             f = new Field()                                                                              </span>
<span class="-8039081797246474990" onmouseenter="enter('-8039081797246474990');" onmouseout="out('-8039081797246474990');" style="">1863                     .withName(adornedList.getSortField())                                                </span>
<span class="-2458072313875538806" onmouseenter="enter('-2458072313875538806');" onmouseout="out('-2458072313875538806');" style="">1864                     .withFieldType(SupportedFieldType.HIDDEN.toString());                                </span>
<span class="-6955921800298195002" onmouseenter="enter('-6955921800298195002');" onmouseout="out('-6955921800298195002');" style="">1865             ef.addHiddenField(collectionMetadata, f);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1866         }                                                                                                </span>
<span  style="">1867                                                                                                          </span>
<span class="-8148842246743906492" onmouseenter="enter('-8148842246743906492');" onmouseout="out('-8148842246743906492');" style="">1868         ef.setParentId(parentId);                                                                        </span>
<span  style="">1869                                                                                                          </span>
<span class="-9084846840215869888" onmouseenter="enter('-9084846840215869888');" onmouseout="out('-9084846840215869888');" style="">1870         extensionManager.getProxy().addAdditionalAdornedFormActions(ef);                                 </span>
<span  style="">1871                                                                                                          </span>
<span class="3260120157565581788" onmouseenter="enter('3260120157565581788');" onmouseout="out('3260120157565581788');" style="">1872         return ef;                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1873     }                                                                                                    </span>
<span  style="">1874                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1875     @Override                                                                                            </span>
<span class="5776955838632823841" onmouseenter="enter('5776955838632823841');" onmouseout="out('5776955838632823841');" style=""><abbr title="1876     public EntityForm buildMapForm(MapMetadata mapMd, final MapStructure mapStructure, ClassMetadata cmd, String parentId)">1876     public EntityForm buildMapForm(MapMetadata mapMd, final MapStructure mapStructure, ClassMetadata cmd,ðŸ”µ</abbr></span>
<span class="1998458335829271558" onmouseenter="enter('1998458335829271558');" onmouseout="out('1998458335829271558');" style="">1877             throws ServiceException {                                                                    </span>
<span class="-438894394526699599" onmouseenter="enter('-438894394526699599');" onmouseout="out('-438894394526699599');" style="">1878         EntityForm ef = createStandardEntityForm();                                                      </span>
<span class="-4383087068394560961" onmouseenter="enter('-4383087068394560961');" onmouseout="out('-4383087068394560961');" style="">1879         return buildMapForm(mapMd, mapStructure, cmd, parentId, ef);                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1880     }                                                                                                    </span>
<span  style="">1881                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1882     @Override                                                                                            </span>
<span class="5263214445094463474" onmouseenter="enter('5263214445094463474');" onmouseout="out('5263214445094463474');" style=""><abbr title="1883     public EntityForm buildMapForm(MapMetadata mapMd, final MapStructure mapStructure, ClassMetadata cmd, String parentId, EntityForm ef)">1883     public EntityForm buildMapForm(MapMetadata mapMd, final MapStructure mapStructure, ClassMetadata cmd,ðŸ”µ</abbr></span>
<span class="1998458335829271558" onmouseenter="enter('1998458335829271558');" onmouseout="out('1998458335829271558');" style="">1884             throws ServiceException {                                                                    </span>
<span class="-8196381047300571419" onmouseenter="enter('-8196381047300571419');" onmouseout="out('-8196381047300571419');" style="">1885         ForeignKey foreignKey = (ForeignKey) mapMd.getPersistencePerspective()                           </span>
<span class="2694724777125959806" onmouseenter="enter('2694724777125959806');" onmouseout="out('2694724777125959806');" style="">1886                 .getPersistencePerspectiveItems().get(PersistencePerspectiveItemType.FOREIGNKEY);        </span>
<span class="-8152084553040114228" onmouseenter="enter('-8152084553040114228');" onmouseout="out('-8152084553040114228');" style="">1887         ef.setEntityType(foreignKey.getForeignKeyClass());                                               </span>
<span  style="">1888                                                                                                          </span>
<span class="2487263286005872069" onmouseenter="enter('2487263286005872069');" onmouseout="out('2487263286005872069');" style="">1889         Field keyField;                                                                                  </span>
<span class="8316613165925765769" onmouseenter="enter('8316613165925765769');" onmouseout="out('8316613165925765769');" style="">1890         if (!mapMd.getForceFreeFormKeys()) {                                                             </span>
<span class="4124947245467994317" onmouseenter="enter('4124947245467994317');" onmouseout="out('4124947245467994317');" style="">1891             // We will use a combo field to render the key choices                                       </span>
<span class="-1866848638996018677" onmouseenter="enter('-1866848638996018677');" onmouseout="out('-1866848638996018677');" style="">1892             ComboField temp = new ComboField();                                                          </span>
<span class="-6555255150639106657" onmouseenter="enter('-6555255150639106657');" onmouseout="out('-6555255150639106657');" style="">1893             temp.withName(&quot;key&quot;)                                                                         </span>
<span class="1841760667801252277" onmouseenter="enter('1841760667801252277');" onmouseout="out('1841760667801252277');" style="">1894                     .withFieldType(&quot;combo_field&quot;)                                                        </span>
<span class="-5198779959493179668" onmouseenter="enter('-5198779959493179668');" onmouseout="out('-5198779959493179668');" style="">1895                     .withFriendlyName(mapStructure.getKeyPropertyFriendlyName());                        </span>
<span class="3287055582339576619" onmouseenter="enter('3287055582339576619');" onmouseout="out('3287055582339576619');" style="">1896             if (mapMd.getKeys() != null) {                                                               </span>
<span class="-6322095491178263556" onmouseenter="enter('-6322095491178263556');" onmouseout="out('-6322095491178263556');" style="">1897                 // The keys can be explicitly set in the annotation...                                   </span>
<span class="-7850108399679610719" onmouseenter="enter('-7850108399679610719');" onmouseout="out('-7850108399679610719');" style="">1898                 temp.setOptions(mapMd.getKeys());                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1899             } else {                                                                                     </span>
<span class="7036564945591495423" onmouseenter="enter('7036564945591495423');" onmouseout="out('7036564945591495423');" style="">1900                 // Or they could be based on a different entity                                          </span>
<span class="2943675610735544566" onmouseenter="enter('2943675610735544566');" onmouseout="out('2943675610735544566');" style="">1901                 PersistencePackageRequest ppr = PersistencePackageRequest.standard()                     </span>
<span class="-7233152391809010418" onmouseenter="enter('-7233152391809010418');" onmouseout="out('-7233152391809010418');" style="">1902                         .withCeilingEntityClassname(mapMd.getMapKeyOptionEntityClass());                 </span>
<span  style="">1903                                                                                                          </span>
<span class="-4077831550260994387" onmouseenter="enter('-4077831550260994387');" onmouseout="out('-4077831550260994387');" style="">1904                 DynamicResultSet drs = adminEntityService.getRecords(ppr).getDynamicResultSet();         </span>
<span  style="">1905                                                                                                          </span>
<span class="5306875073536616661" onmouseenter="enter('5306875073536616661');" onmouseout="out('5306875073536616661');" style="">1906                 for (Entity entity : drs.getRecords()) {                                                 </span>
<span class="-6641717520052480574" onmouseenter="enter('-6641717520052480574');" onmouseout="out('-6641717520052480574');" style=""><abbr title="1907                     String keyValue = entity.getPMap().get(mapMd.getMapKeyOptionEntityValueField()).getValue();">1907                     String keyValue = entity.getPMap().get(mapMd.getMapKeyOptionEntityValueField()).getVaðŸ”µ</abbr></span>
<span class="1998582968522880029" onmouseenter="enter('1998582968522880029');" onmouseout="out('1998582968522880029');" style=""><abbr title="1908                     String keyDisplayValue = entity.getPMap().get(mapMd.getMapKeyOptionEntityDisplayField()).getValue();">1908                     String keyDisplayValue = entity.getPMap().get(mapMd.getMapKeyOptionEntityDisplayFieldðŸ”µ</abbr></span>
<span class="-6645431312205396504" onmouseenter="enter('-6645431312205396504');" onmouseout="out('-6645431312205396504');" style="">1909                     temp.putOption(keyValue, keyDisplayValue);                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1910                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1911             }                                                                                            </span>
<span class="3546270200362241310" onmouseenter="enter('3546270200362241310');" onmouseout="out('3546270200362241310');" style="">1912             keyField = temp;                                                                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1913         } else {                                                                                         </span>
<span class="-8573842998963738304" onmouseenter="enter('-8573842998963738304');" onmouseout="out('-8573842998963738304');" style="">1914             keyField = new Field().withName(&quot;key&quot;)                                                       </span>
<span class="7310006641400837736" onmouseenter="enter('7310006641400837736');" onmouseout="out('7310006641400837736');" style="">1915                                 .withFieldType(SupportedFieldType.STRING.toString())                     </span>
<span class="-5198779959493179668" onmouseenter="enter('-5198779959493179668');" onmouseout="out('-5198779959493179668');" style="">1916                                 .withFriendlyName(mapStructure.getKeyPropertyFriendlyName());            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1917         }                                                                                                </span>
<span class="7153206597057282580" onmouseenter="enter('7153206597057282580');" onmouseout="out('7153206597057282580');" style="">1918         keyField.setRequired(true);                                                                      </span>
<span class="6962995846651568894" onmouseenter="enter('6962995846651568894');" onmouseout="out('6962995846651568894');" style="">1919         ef.addMapKeyField(cmd, keyField);                                                                </span>
<span  style="">1920                                                                                                          </span>
<span class="-1847798595136835783" onmouseenter="enter('-1847798595136835783');" onmouseout="out('-1847798595136835783');" style="">1921         // Set the fields for this form                                                                  </span>
<span class="4702227326769048309" onmouseenter="enter('4702227326769048309');" onmouseout="out('4702227326769048309');" style="">1922         List&lt;Property&gt; mapFormProperties;                                                                </span>
<span class="-3881724092572027053" onmouseenter="enter('-3881724092572027053');" onmouseout="out('-3881724092572027053');" style="">1923         if (mapMd.isSimpleValue()) {                                                                     </span>
<span class="7835835150562546154" onmouseenter="enter('7835835150562546154');" onmouseout="out('7835835150562546154');" style="">1924             ef.setIdProperty(&quot;key&quot;);                                                                     </span>
<span class="7501966408885015423" onmouseenter="enter('7501966408885015423');" onmouseout="out('7501966408885015423');" style="">1925             mapFormProperties = new ArrayList&lt;&gt;();                                                       </span>
<span class="1155137054745373714" onmouseenter="enter('1155137054745373714');" onmouseout="out('1155137054745373714');" style="">1926             Property valueProp = cmd.getPMap().get(&quot;value&quot;);                                             </span>
<span class="4126012312120971947" onmouseenter="enter('4126012312120971947');" onmouseout="out('4126012312120971947');" style="">1927             mapFormProperties.add(valueProp);                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1928         } else {                                                                                         </span>
<span class="-200233704674088452" onmouseenter="enter('-200233704674088452');" onmouseout="out('-200233704674088452');" style="">1929             String valueClassName = mapStructure.getValueClassName();                                    </span>
<span class="4792123228934068864" onmouseenter="enter('4792123228934068864');" onmouseout="out('4792123228934068864');" style="">1930             List&lt;String&gt; classNames = getValueClassNames(valueClassName);                                </span>
<span  style="">1931                                                                                                          </span>
<span class="6736035458303245430" onmouseenter="enter('6736035458303245430');" onmouseout="out('6736035458303245430');" style="">1932             mapFormProperties = new ArrayList&lt;&gt;(Arrays.asList(cmd.getProperties()));                     </span>
<span class="-5375146325606190554" onmouseenter="enter('-5375146325606190554');" onmouseout="out('-5375146325606190554');" style="">1933             filterMapFormProperties(mapFormProperties, classNames);                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1934         }                                                                                                </span>
<span  style="">1935                                                                                                          </span>
<span class="-2821207520526953468" onmouseenter="enter('-2821207520526953468');" onmouseout="out('-2821207520526953468');" style="">1936         setEntityFormFields(cmd, ef, mapFormProperties);                                                 </span>
<span  style="">1937                                                                                                          </span>
<span class="-6303462610985739492" onmouseenter="enter('-6303462610985739492');" onmouseout="out('-6303462610985739492');" style="">1938         Field f = new Field()                                                                            </span>
<span class="4084107705668748282" onmouseenter="enter('4084107705668748282');" onmouseout="out('4084107705668748282');" style="">1939                 .withName(&quot;priorKey&quot;)                                                                    </span>
<span class="-2458072313875538806" onmouseenter="enter('-2458072313875538806');" onmouseout="out('-2458072313875538806');" style="">1940                 .withFieldType(SupportedFieldType.HIDDEN.toString());                                    </span>
<span class="-2135186019977572427" onmouseenter="enter('-2135186019977572427');" onmouseout="out('-2135186019977572427');" style="">1941         ef.addHiddenField(cmd, f);                                                                       </span>
<span  style="">1942                                                                                                          </span>
<span class="-8148842246743906492" onmouseenter="enter('-8148842246743906492');" onmouseout="out('-8148842246743906492');" style="">1943         ef.setParentId(parentId);                                                                        </span>
<span  style="">1944                                                                                                          </span>
<span class="3260120157565581788" onmouseenter="enter('3260120157565581788');" onmouseout="out('3260120157565581788');" style="">1945         return ef;                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1946     }                                                                                                    </span>
<span  style="">1947                                                                                                          </span>
<span class="-4829102623695042124" onmouseenter="enter('-4829102623695042124');" onmouseout="out('-4829102623695042124');" style="">1948     protected List&lt;String&gt; getValueClassNames(String valueClassName) {                                   </span>
<span class="636492465030384706" onmouseenter="enter('636492465030384706');" onmouseout="out('636492465030384706');" style="">1949         PersistenceManager pm = PersistenceManagerFactory.getPersistenceManager(valueClassName);         </span>
<span class="2246167872340129747" onmouseenter="enter('2246167872340129747');" onmouseout="out('2246167872340129747');" style="">1950         List&lt;String&gt; classNames = new ArrayList&lt;&gt;();                                                     </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1951         try {                                                                                            </span>
<span class="3938321968230834834" onmouseenter="enter('3938321968230834834');" onmouseout="out('3938321968230834834');" style="">1952             Class&lt;?&gt;[] mapEntities = pm.getPolymorphicEntities(valueClassName);                          </span>
<span class="-4772743881626943892" onmouseenter="enter('-4772743881626943892');" onmouseout="out('-4772743881626943892');" style="">1953             for (Class clazz : mapEntities) {                                                            </span>
<span class="6466727849961562132" onmouseenter="enter('6466727849961562132');" onmouseout="out('6466727849961562132');" style="">1954                 classNames.add(clazz.getName());                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1955             }                                                                                            </span>
<span class="1054888787890391626" onmouseenter="enter('1054888787890391626');" onmouseout="out('1054888787890391626');" style="">1956         } catch (ClassNotFoundException e) {                                                             </span>
<span class="-942678047271525020" onmouseenter="enter('-942678047271525020');" onmouseout="out('-942678047271525020');" style="">1957             classNames.add(valueClassName);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1958         }                                                                                                </span>
<span class="-3648191997111592889" onmouseenter="enter('-3648191997111592889');" onmouseout="out('-3648191997111592889');" style="">1959         return classNames;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1960     }                                                                                                    </span>
<span  style="">1961                                                                                                          </span>
<span class="9085638029133270349" onmouseenter="enter('9085638029133270349');" onmouseout="out('9085638029133270349');" style=""><abbr title="1962     protected void filterMapFormProperties(List&lt;Property&gt; mapFormProperties, final List&lt;String&gt; classNames) {">1962     protected void filterMapFormProperties(List&lt;Property&gt; mapFormProperties, final List&lt;String&gt; classNameðŸ”µ</abbr></span>
<span class="-1689600506312159966" onmouseenter="enter('-1689600506312159966');" onmouseout="out('-1689600506312159966');" style="">1963         CollectionUtils.filter(mapFormProperties, new Predicate() {                                      </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1964             @Override                                                                                    </span>
<span class="7760113550206984696" onmouseenter="enter('7760113550206984696');" onmouseout="out('7760113550206984696');" style="">1965             public boolean evaluate(Object object) {                                                     </span>
<span class="2621584028127774901" onmouseenter="enter('2621584028127774901');" onmouseout="out('2621584028127774901');" style="">1966                 Property p = (Property) object;                                                          </span>
<span class="5284872755288504872" onmouseenter="enter('5284872755288504872');" onmouseout="out('5284872755288504872');" style="">1967                 for (String availType : p.getMetadata().getAvailableToTypes()) {                         </span>
<span class="-1266753160152563645" onmouseenter="enter('-1266753160152563645');" onmouseout="out('-1266753160152563645');" style="">1968                     if (classNames.contains(availType)) {                                                </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">1969                         return true;                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1970                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1971                 }                                                                                        </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1972                 return false;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1973             }                                                                                            </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">1974         });                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1975     }                                                                                                    </span>
<span  style="">1976                                                                                                          </span>
<span class="8263860057269155273" onmouseenter="enter('8263860057269155273');" onmouseout="out('8263860057269155273');" style="">1977     protected EntityForm createStandardEntityForm() {                                                    </span>
<span class="4163598687278852410" onmouseenter="enter('4163598687278852410');" onmouseout="out('4163598687278852410');" style="">1978         EntityForm ef = new EntityForm();                                                                </span>
<span class="-2237425030372835917" onmouseenter="enter('-2237425030372835917');" onmouseout="out('-2237425030372835917');" style="">1979         ef.addAction(DefaultEntityFormActions.SAVE);                                                     </span>
<span class="3260120157565581788" onmouseenter="enter('3260120157565581788');" onmouseout="out('3260120157565581788');" style="">1980         return ef;                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1981     }                                                                                                    </span>
<span  style="">1982                                                                                                          </span>
<span class="-7002137249022503423" onmouseenter="enter('-7002137249022503423');" onmouseout="out('-7002137249022503423');" style="">1983     protected EntityForm createStandardAdornedEntityForm() {                                             </span>
<span class="4163598687278852410" onmouseenter="enter('4163598687278852410');" onmouseout="out('4163598687278852410');" style="">1984         EntityForm ef = new EntityForm();                                                                </span>
<span class="3915105942460614290" onmouseenter="enter('3915105942460614290');" onmouseout="out('3915105942460614290');" style="">1985         ef.addAction(DefaultAdornedEntityFormActions.Add);                                               </span>
<span class="3260120157565581788" onmouseenter="enter('3260120157565581788');" onmouseout="out('3260120157565581788');" style="">1986         return ef;                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1987     }                                                                                                    </span>
<span  style="">1988                                                                                                          </span>
<span class="-8997817584059672482" onmouseenter="enter('-8997817584059672482');" onmouseout="out('-8997817584059672482');" style="">1989     protected VisibilityEnum[] getGridHiddenVisibilities() {                                             </span>
<span class="-4220328425458971190" onmouseenter="enter('-4220328425458971190');" onmouseout="out('-4220328425458971190');" style="">1990         return FormBuilderServiceImpl.GRID_HIDDEN_VISIBILITIES;                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1991     }                                                                                                    </span>
<span  style="">1992                                                                                                          </span>
<span class="5519346243833044852" onmouseenter="enter('5519346243833044852');" onmouseout="out('5519346243833044852');" style="">1993     protected VisibilityEnum[] getFormHiddenVisibilities() {                                             </span>
<span class="-3897912334343924171" onmouseenter="enter('-3897912334343924171');" onmouseout="out('-3897912334343924171');" style="">1994         return FormBuilderServiceImpl.FORM_HIDDEN_VISIBILITIES;                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1995     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1996 }                                                                                                        </span>






























































</pre></td>
                        </tr>
                    </table>
                </div>
                <div id="bottom">
                    <table style="margin:auto">
                        <tr>
                            <th>ours vs. base</th>
                            <th>theirs vs. base</th>
                        </tr>
                        <tr>
                            <td><pre><span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style="">   1  /*                                                                                                                </span>
<span class="7283730021202772321" onmouseenter="enter('7283730021202772321');" onmouseout="out('7283730021202772321');" style="">   2   * #%L                                                                                                            </span>
<span class="-3339060969767811416" onmouseenter="enter('-3339060969767811416');" onmouseout="out('-3339060969767811416');" style="">   3   * BroadleafCommerce Open Admin Platform                                                                          </span>
<span class="305149960078729975" onmouseenter="enter('305149960078729975');" onmouseout="out('305149960078729975');" style="">   4   * %%                                                                                                             </span>
<span class="1978304592184257722" onmouseenter="enter('1978304592184257722');" onmouseout="out('1978304592184257722');" style="">   5   * Copyright (C) 2009 - 2016 Broadleaf Commerce                                                                   </span>
<span class="305149960078729975" onmouseenter="enter('305149960078729975');" onmouseout="out('305149960078729975');" style="">   6   * %%                                                                                                             </span>
<span class="4430451662992926684" onmouseenter="enter('4430451662992926684');" onmouseout="out('4430451662992926684');" style="">   7   * Licensed under the Broadleaf Fair Use License Agreement, Version 1.0                                           </span>
<span class="8206099442596739681" onmouseenter="enter('8206099442596739681');" onmouseout="out('8206099442596739681');" style="">   8   * (the &quot;Fair Use License&quot; located  at http://license.broadleafcommerce.org/fair_use_license-1.0.txt)             </span>
<span class="-4338570431005413339" onmouseenter="enter('-4338570431005413339');" onmouseout="out('-4338570431005413339');" style="">   9   * unless the restrictions on use therein are violated and require payment to Broadleaf in which case             </span>
<span class="-5739615313038505012" onmouseenter="enter('-5739615313038505012');" onmouseout="out('-5739615313038505012');" style="">  10   * the Broadleaf End User License Agreement (EULA), Version 1.1                                                   </span>
<span class="-196756316119086558" onmouseenter="enter('-196756316119086558');" onmouseout="out('-196756316119086558');" style="">  11   * (the &quot;Commercial License&quot; located at http://license.broadleafcommerce.org/commercial_license-1.1.txt)          </span>
<span class="-3691518077331372763" onmouseenter="enter('-3691518077331372763');" onmouseout="out('-3691518077331372763');" style="">  12   * shall apply.                                                                                                   </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">  13   *                                                                                                                </span>
<span class="-3333434530440420199" onmouseenter="enter('-3333434530440420199');" onmouseout="out('-3333434530440420199');" style=""><abbr title="  14   * Alternatively, the Commercial License may be replaced with a mutually agreed upon license (the &quot;Custom License&quot;)">  14   * Alternatively, the Commercial License may be replaced with a mutually agreed upon license (the &quot;Custom License&quot;ðŸ”µ</abbr></span>
<span class="-2556272520656899284" onmouseenter="enter('-2556272520656899284');" onmouseout="out('-2556272520656899284');" style="">  15   * between you and Broadleaf Commerce. You may not use this file except in compliance with the applicable license.</span>
<span class="3739716589509259313" onmouseenter="enter('3739716589509259313');" onmouseout="out('3739716589509259313');" style="">  16   * #L%                                                                                                            </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  17   */                                                                                                               </span>
<span class="-6621374416165604736" onmouseenter="enter('-6621374416165604736');" onmouseout="out('-6621374416165604736');" style="">  18  package org.broadleafcommerce.openadmin.web.service;                                                              </span>
<span  style="">  19                                                                                                                    </span>
<span class="8596464405353709537" onmouseenter="enter('8596464405353709537');" onmouseout="out('8596464405353709537');" style="">  20  import org.apache.commons.collections.CollectionUtils;                                                            </span>
<span class="-6731128730698523533" onmouseenter="enter('-6731128730698523533');" onmouseout="out('-6731128730698523533');" style="">  21  import org.apache.commons.collections.Predicate;                                                                  </span>
<span class="-7366736394295216840" onmouseenter="enter('-7366736394295216840');" onmouseout="out('-7366736394295216840');" style="">  22  import org.apache.commons.lang.ArrayUtils;                                                                        </span>
<span class="-4661043417888464228" onmouseenter="enter('-4661043417888464228');" onmouseout="out('-4661043417888464228');" style="">  23  import org.apache.commons.lang.BooleanUtils;                                                                      </span>
<span class="-8105670274694144339" onmouseenter="enter('-8105670274694144339');" onmouseout="out('-8105670274694144339');" style="">  24  import org.apache.commons.lang3.StringUtils;                                                                      </span>
<span class="494203924075255110" onmouseenter="enter('494203924075255110');" onmouseout="out('494203924075255110');" style="">  25  import org.apache.commons.logging.Log;                                                                            </span>
<span class="-8227491862907452788" onmouseenter="enter('-8227491862907452788');" onmouseout="out('-8227491862907452788');" style="">  26  import org.apache.commons.logging.LogFactory;                                                                     </span>
<span class="-6287859968194756382" onmouseenter="enter('-6287859968194756382');" onmouseout="out('-6287859968194756382');" style="">  27  import org.broadleafcommerce.common.admin.domain.AdminMainEntity;                                                 </span>
<span class="-9066890226896155571" onmouseenter="enter('-9066890226896155571');" onmouseout="out('-9066890226896155571');" style="">  28  import org.broadleafcommerce.common.exception.ExceptionHelper;                                                    </span>
<span class="3542918789910249764" onmouseenter="enter('3542918789910249764');" onmouseout="out('3542918789910249764');" style="">  29  import org.broadleafcommerce.common.exception.SecurityServiceException;                                           </span>
<span class="5945096539699516699" onmouseenter="enter('5945096539699516699');" onmouseout="out('5945096539699516699');" style="">  30  import org.broadleafcommerce.common.exception.ServiceException;                                                   </span>
<span class="-8339254235515724670" onmouseenter="enter('-8339254235515724670');" onmouseout="out('-8339254235515724670');" style="">  31  import org.broadleafcommerce.common.extension.ExtensionResultStatusType;                                          </span>



<span class="-2454560082833257555" onmouseenter="enter('-2454560082833257555');" onmouseout="out('-2454560082833257555');" style="">  32  import org.broadleafcommerce.common.media.domain.MediaDto;                                                        </span>
<span class="4111478795314305516" onmouseenter="enter('4111478795314305516');" onmouseout="out('4111478795314305516');" style="">  33  import org.broadleafcommerce.common.persistence.EntityConfiguration;                                              </span>
<span class="-3349026188166660873" onmouseenter="enter('-3349026188166660873');" onmouseout="out('-3349026188166660873');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  34 +import org.broadleafcommerce.common.persistence.EntityDuplicator;                                                 </span>
<span class="-6648433550510659033" onmouseenter="enter('-6648433550510659033');" onmouseout="out('-6648433550510659033');" style="">  35  import org.broadleafcommerce.common.presentation.client.AddMethodType;                                            </span>
<span class="-7832706263011125937" onmouseenter="enter('-7832706263011125937');" onmouseout="out('-7832706263011125937');" style="">  36  import org.broadleafcommerce.common.presentation.client.AdornedTargetAddMethodType;                               </span>
<span class="-2413957740330241600" onmouseenter="enter('-2413957740330241600');" onmouseout="out('-2413957740330241600');" style="">  37  import org.broadleafcommerce.common.presentation.client.LookupType;                                               </span>
<span class="7296089998360266547" onmouseenter="enter('7296089998360266547');" onmouseout="out('7296089998360266547');" style="">  38  import org.broadleafcommerce.common.presentation.client.PersistencePerspectiveItemType;                           </span>
<span class="1362364260528215152" onmouseenter="enter('1362364260528215152');" onmouseout="out('1362364260528215152');" style="">  39  import org.broadleafcommerce.common.presentation.client.SupportedFieldType;                                       </span>
<span class="-7583443881845767348" onmouseenter="enter('-7583443881845767348');" onmouseout="out('-7583443881845767348');" style="">  40  import org.broadleafcommerce.common.presentation.client.VisibilityEnum;                                           </span>
<span class="2428099238642943960" onmouseenter="enter('2428099238642943960');" onmouseout="out('2428099238642943960');" style="">  41  import org.broadleafcommerce.common.util.BLCMessageUtils;                                                         </span>
<span class="578947422765016559" onmouseenter="enter('578947422765016559');" onmouseout="out('578947422765016559');" style="">  42  import org.broadleafcommerce.common.util.FormatUtil;                                                              </span>
<span class="-3347161074136237116" onmouseenter="enter('-3347161074136237116');" onmouseout="out('-3347161074136237116');" style="">  43  import org.broadleafcommerce.common.util.StringUtil;                                                              </span>
<span class="8689743329875302887" onmouseenter="enter('8689743329875302887');" onmouseout="out('8689743329875302887');" style="">  44  import org.broadleafcommerce.common.web.BroadleafRequestContext;                                                  </span>
<span class="-3361215363157046739" onmouseenter="enter('-3361215363157046739');" onmouseout="out('-3361215363157046739');" style="">  45  import org.broadleafcommerce.openadmin.dto.AdornedTargetCollectionMetadata;                                       </span>
<span class="-1781055592725563383" onmouseenter="enter('-1781055592725563383');" onmouseout="out('-1781055592725563383');" style="">  46  import org.broadleafcommerce.openadmin.dto.AdornedTargetList;                                                     </span>
<span class="-6140296335181984013" onmouseenter="enter('-6140296335181984013');" onmouseout="out('-6140296335181984013');" style="">  47  import org.broadleafcommerce.openadmin.dto.BasicCollectionMetadata;                                               </span>
<span class="4427537537958608766" onmouseenter="enter('4427537537958608766');" onmouseout="out('4427537537958608766');" style="">  48  import org.broadleafcommerce.openadmin.dto.BasicFieldMetadata;                                                    </span>
<span class="-1607559599739253077" onmouseenter="enter('-1607559599739253077');" onmouseout="out('-1607559599739253077');" style="">  49  import org.broadleafcommerce.openadmin.dto.ClassMetadata;                                                         </span>
<span class="5550564421881377532" onmouseenter="enter('5550564421881377532');" onmouseout="out('5550564421881377532');" style="">  50  import org.broadleafcommerce.openadmin.dto.ClassTree;                                                             </span>
<span class="-3165611006566133086" onmouseenter="enter('-3165611006566133086');" onmouseout="out('-3165611006566133086');" style="">  51  import org.broadleafcommerce.openadmin.dto.CollectionMetadata;                                                    </span>
<span class="-4742435063138209714" onmouseenter="enter('-4742435063138209714');" onmouseout="out('-4742435063138209714');" style="">  52  import org.broadleafcommerce.openadmin.dto.DynamicResultSet;                                                      </span>
<span class="-5093421835888664541" onmouseenter="enter('-5093421835888664541');" onmouseout="out('-5093421835888664541');" style="">  53  import org.broadleafcommerce.openadmin.dto.Entity;                                                                </span>
<span class="-8829499667991596741" onmouseenter="enter('-8829499667991596741');" onmouseout="out('-8829499667991596741');" style="">  54  import org.broadleafcommerce.openadmin.dto.FieldMetadata;                                                         </span>
<span class="-2271266034558779994" onmouseenter="enter('-2271266034558779994');" onmouseout="out('-2271266034558779994');" style="">  55  import org.broadleafcommerce.openadmin.dto.ForeignKey;                                                            </span>
<span class="826821438795056004" onmouseenter="enter('826821438795056004');" onmouseout="out('826821438795056004');" style="">  56  import org.broadleafcommerce.openadmin.dto.MapMetadata;                                                           </span>
<span class="-7888875133556467044" onmouseenter="enter('-7888875133556467044');" onmouseout="out('-7888875133556467044');" style="">  57  import org.broadleafcommerce.openadmin.dto.MapStructure;                                                          </span>
<span class="1983554291461039357" onmouseenter="enter('1983554291461039357');" onmouseout="out('1983554291461039357');" style="">  58  import org.broadleafcommerce.openadmin.dto.Property;                                                              </span>
<span class="1696571253156436279" onmouseenter="enter('1696571253156436279');" onmouseout="out('1696571253156436279');" style="">  59  import org.broadleafcommerce.openadmin.dto.SectionCrumb;                                                          </span>
<span class="5662236005419086618" onmouseenter="enter('5662236005419086618');" onmouseout="out('5662236005419086618');" style="">  60  import org.broadleafcommerce.openadmin.dto.TabMetadata;                                                           </span>
<span class="-8828889589519173652" onmouseenter="enter('-8828889589519173652');" onmouseout="out('-8828889589519173652');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  61 +import org.broadleafcommerce.openadmin.server.dao.DynamicEntityDao;                                               </span>
<span class="4410643013278245372" onmouseenter="enter('4410643013278245372');" onmouseout="out('4410643013278245372');" style="">  62  import org.broadleafcommerce.openadmin.server.domain.PersistencePackageRequest;                                   </span>
<span class="-7620175268967942501" onmouseenter="enter('-7620175268967942501');" onmouseout="out('-7620175268967942501');" style="">  63  import org.broadleafcommerce.openadmin.server.security.domain.AdminSection;                                       </span>
<span class="-6571883875867969954" onmouseenter="enter('-6571883875867969954');" onmouseout="out('-6571883875867969954');" style="">  64  import org.broadleafcommerce.openadmin.server.security.domain.AdminUser;                                          </span>
<span class="-4641149340176766185" onmouseenter="enter('-4641149340176766185');" onmouseout="out('-4641149340176766185');" style="">  65  import org.broadleafcommerce.openadmin.server.security.remote.EntityOperationType;                                </span>
<span class="8942483953505157490" onmouseenter="enter('8942483953505157490');" onmouseout="out('8942483953505157490');" style="">  66  import org.broadleafcommerce.openadmin.server.security.remote.SecurityVerifier;                                   </span>
<span class="-5109104434282935941" onmouseenter="enter('-5109104434282935941');" onmouseout="out('-5109104434282935941');" style="">  67  import org.broadleafcommerce.openadmin.server.security.service.EntityFormModifier;                                </span>
<span class="-8160764320713173157" onmouseenter="enter('-8160764320713173157');" onmouseout="out('-8160764320713173157');" style="">  68  import org.broadleafcommerce.openadmin.server.security.service.EntityFormModifierConfiguration;                   </span>
<span class="-7359249757017525541" onmouseenter="enter('-7359249757017525541');" onmouseout="out('-7359249757017525541');" style="">  69  import org.broadleafcommerce.openadmin.server.security.service.EntityFormModifierData;                            </span>
<span class="3347653686268274670" onmouseenter="enter('3347653686268274670');" onmouseout="out('3347653686268274670');" style="">  70  import org.broadleafcommerce.openadmin.server.security.service.EntityFormModifierDataPoint;                       </span>
<span class="-5654897577089013652" onmouseenter="enter('-5654897577089013652');" onmouseout="out('-5654897577089013652');" style="">  71  import org.broadleafcommerce.openadmin.server.security.service.EntityFormModifierRequest;                         </span>
<span class="8609771947297205873" onmouseenter="enter('8609771947297205873');" onmouseout="out('8609771947297205873');" style="">  72  import org.broadleafcommerce.openadmin.server.security.service.ExceptionAwareRowLevelSecurityProvider;            </span>
<span class="78786346091609662" onmouseenter="enter('78786346091609662');" onmouseout="out('78786346091609662');" style="">  73  import org.broadleafcommerce.openadmin.server.security.service.RowLevelSecurityService;                           </span>
<span class="-3170172369947649824" onmouseenter="enter('-3170172369947649824');" onmouseout="out('-3170172369947649824');" style="">  74  import org.broadleafcommerce.openadmin.server.security.service.navigation.AdminNavigationService;                 </span>
<span class="-3881535627450957263" onmouseenter="enter('-3881535627450957263');" onmouseout="out('-3881535627450957263');" style="">  75  import org.broadleafcommerce.openadmin.server.service.AdminEntityService;                                         </span>
<span class="-1454726158681359973" onmouseenter="enter('-1454726158681359973');" onmouseout="out('-1454726158681359973');" style="">  76  import org.broadleafcommerce.openadmin.server.service.persistence.PersistenceManager;                             </span>
<span class="97669409268306845" onmouseenter="enter('97669409268306845');" onmouseout="out('97669409268306845');" style="">  77  import org.broadleafcommerce.openadmin.server.service.persistence.PersistenceManagerFactory;                      </span>
<span class="-3086540061138981164" onmouseenter="enter('-3086540061138981164');" onmouseout="out('-3086540061138981164');" style="">  78  import org.broadleafcommerce.openadmin.server.service.persistence.module.BasicPersistenceModule;                  </span>
<span class="6020321283788374630" onmouseenter="enter('6020321283788374630');" onmouseout="out('6020321283788374630');" style="">  79  import org.broadleafcommerce.openadmin.server.service.persistence.module.FieldManager;                            </span>
<span class="-2042519459673859584" onmouseenter="enter('-2042519459673859584');" onmouseout="out('-2042519459673859584');" style="">  80  import org.broadleafcommerce.openadmin.web.form.component.DefaultListGridActions;                                 </span>
<span class="3056790491614608405" onmouseenter="enter('3056790491614608405');" onmouseout="out('3056790491614608405');" style="">  81  import org.broadleafcommerce.openadmin.web.form.component.ListGrid;                                               </span>
<span class="5295362033766750426" onmouseenter="enter('5295362033766750426');" onmouseout="out('5295362033766750426');" style="">  82  import org.broadleafcommerce.openadmin.web.form.component.ListGridAction;                                         </span>
<span class="-3450485825037219414" onmouseenter="enter('-3450485825037219414');" onmouseout="out('-3450485825037219414');" style="">  83  import org.broadleafcommerce.openadmin.web.form.component.ListGridActionGroup;                                    </span>
<span class="-3405551311883594169" onmouseenter="enter('-3405551311883594169');" onmouseout="out('-3405551311883594169');" style="">  84  import org.broadleafcommerce.openadmin.web.form.component.ListGridRecord;                                         </span>
<span class="-5608490858121609411" onmouseenter="enter('-5608490858121609411');" onmouseout="out('-5608490858121609411');" style="">  85  import org.broadleafcommerce.openadmin.web.form.component.MediaField;                                             </span>
<span class="-8639148455058795423" onmouseenter="enter('-8639148455058795423');" onmouseout="out('-8639148455058795423');" style="">  86  import org.broadleafcommerce.openadmin.web.form.component.RuleBuilderField;                                       </span>
<span class="7920804437009762662" onmouseenter="enter('7920804437009762662');" onmouseout="out('7920804437009762662');" style="">  87  import org.broadleafcommerce.openadmin.web.form.entity.CodeField;                                                 </span>
<span class="3594570724696916406" onmouseenter="enter('3594570724696916406');" onmouseout="out('3594570724696916406');" style="">  88  import org.broadleafcommerce.openadmin.web.form.entity.ComboField;                                                </span>
<span class="1405974373227613661" onmouseenter="enter('1405974373227613661');" onmouseout="out('1405974373227613661');" style="">  89  import org.broadleafcommerce.openadmin.web.form.entity.DefaultAdornedEntityFormActions;                           </span>
<span class="2718350422838759693" onmouseenter="enter('2718350422838759693');" onmouseout="out('2718350422838759693');" style="">  90  import org.broadleafcommerce.openadmin.web.form.entity.DefaultEntityFormActions;                                  </span>
<span class="-7452009352681558215" onmouseenter="enter('-7452009352681558215');" onmouseout="out('-7452009352681558215');" style="">  91  import org.broadleafcommerce.openadmin.web.form.entity.DynamicEntityFormInfo;                                     </span>
<span class="8035715143965725316" onmouseenter="enter('8035715143965725316');" onmouseout="out('8035715143965725316');" style="">  92  import org.broadleafcommerce.openadmin.web.form.entity.EntityForm;                                                </span>
<span class="6015559832933397076" onmouseenter="enter('6015559832933397076');" onmouseout="out('6015559832933397076');" style="">  93  import org.broadleafcommerce.openadmin.web.form.entity.Field;                                                     </span>
<span class="-902704191270810798" onmouseenter="enter('-902704191270810798');" onmouseout="out('-902704191270810798');" style="">  94  import org.broadleafcommerce.openadmin.web.rulebuilder.DataDTODeserializer;                                       </span>
<span class="-5891661051837252429" onmouseenter="enter('-5891661051837252429');" onmouseout="out('-5891661051837252429');" style="">  95  import org.broadleafcommerce.openadmin.web.rulebuilder.dto.DataDTO;                                               </span>
<span class="-5682953954690678360" onmouseenter="enter('-5682953954690678360');" onmouseout="out('-5682953954690678360');" style="">  96  import org.broadleafcommerce.openadmin.web.rulebuilder.dto.DataWrapper;                                           </span>
<span class="-5901812469549191870" onmouseenter="enter('-5901812469549191870');" onmouseout="out('-5901812469549191870');" style="">  97  import org.broadleafcommerce.openadmin.web.rulebuilder.dto.FieldDTO;                                              </span>
<span class="5057654301829863353" onmouseenter="enter('5057654301829863353');" onmouseout="out('5057654301829863353');" style="">  98  import org.broadleafcommerce.openadmin.web.rulebuilder.dto.FieldWrapper;                                          </span>
<span class="1299345749740405613" onmouseenter="enter('1299345749740405613');" onmouseout="out('1299345749740405613');" style="">  99  import org.codehaus.jettison.json.JSONObject;                                                                     </span>

<span class="5894662938986881653" onmouseenter="enter('5894662938986881653');" onmouseout="out('5894662938986881653');" style=""> 100  import org.springframework.context.MessageSource;                                                                 </span>
<span class="4998592591649731876" onmouseenter="enter('4998592591649731876');" onmouseout="out('4998592591649731876');" style=""> 101  import org.springframework.context.NoSuchMessageException;                                                        </span>
<span class="-5275076188864034753" onmouseenter="enter('-5275076188864034753');" onmouseout="out('-5275076188864034753');" style=""> 102  import org.springframework.stereotype.Service;                                                                    </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 103 +                                                                                                                  </span>
<span class="1687723025421661461" onmouseenter="enter('1687723025421661461');" onmouseout="out('1687723025421661461');" style=""> 104  import com.fasterxml.jackson.core.Version;                                                                        </span>
<span class="3949390651369204057" onmouseenter="enter('3949390651369204057');" onmouseout="out('3949390651369204057');" style=""> 105  import com.fasterxml.jackson.databind.ObjectMapper;                                                               </span>
<span class="-4978580670739809564" onmouseenter="enter('-4978580670739809564');" onmouseout="out('-4978580670739809564');" style=""> 106  import com.fasterxml.jackson.databind.module.SimpleModule;                                                        </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 107 +                                                                                                                  </span>
<span class="103340661636203254" onmouseenter="enter('103340661636203254');" onmouseout="out('103340661636203254');" style=""> 108  import java.io.IOException;                                                                                       </span>
<span class="2075466404860203191" onmouseenter="enter('2075466404860203191');" onmouseout="out('2075466404860203191');" style=""> 109  import java.math.BigDecimal;                                                                                      </span>
<span class="1238662365364477381" onmouseenter="enter('1238662365364477381');" onmouseout="out('1238662365364477381');" style=""> 110  import java.text.DateFormat;                                                                                      </span>
<span class="5374616781072617946" onmouseenter="enter('5374616781072617946');" onmouseout="out('5374616781072617946');" style=""> 111  import java.text.DateFormatSymbols;                                                                               </span>
<span class="39790854174282861" onmouseenter="enter('39790854174282861');" onmouseout="out('39790854174282861');" style=""> 112  import java.text.ParseException;                                                                                  </span>
<span class="54331962280914690" onmouseenter="enter('54331962280914690');" onmouseout="out('54331962280914690');" style=""> 113  import java.text.SimpleDateFormat;                                                                                </span>
<span class="9191247685397773893" onmouseenter="enter('9191247685397773893');" onmouseout="out('9191247685397773893');" style=""> 114  import java.util.ArrayList;                                                                                       </span>
<span class="-28465676010609596" onmouseenter="enter('-28465676010609596');" onmouseout="out('-28465676010609596');" style=""> 115  import java.util.Arrays;                                                                                          </span>
<span class="2187055016371707860" onmouseenter="enter('2187055016371707860');" onmouseout="out('2187055016371707860');" style=""> 116  import java.util.Collections;                                                                                     </span>
<span class="1748005127055838442" onmouseenter="enter('1748005127055838442');" onmouseout="out('1748005127055838442');" style=""> 117  import java.util.Date;                                                                                            </span>
<span class="4169599896190320038" onmouseenter="enter('4169599896190320038');" onmouseout="out('4169599896190320038');" style=""> 118  import java.util.HashMap;                                                                                         </span>
<span class="-1786020958497218848" onmouseenter="enter('-1786020958497218848');" onmouseout="out('-1786020958497218848');" style=""> 119  import java.util.List;                                                                                            </span>
<span class="-4563680703184802189" onmouseenter="enter('-4563680703184802189');" onmouseout="out('-4563680703184802189');" style=""> 120  import java.util.Locale;                                                                                          </span>
<span class="6618655971923850695" onmouseenter="enter('6618655971923850695');" onmouseout="out('6618655971923850695');" style=""> 121  import java.util.Map;                                                                                             </span>
<span class="2393042000349901971" onmouseenter="enter('2393042000349901971');" onmouseout="out('2393042000349901971');" style=""> 122  import java.util.Map.Entry;                                                                                       </span>
<span class="3384353015976675773" onmouseenter="enter('3384353015976675773');" onmouseout="out('3384353015976675773');" style=""> 123  import java.util.Set;                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 124 +                                                                                                                  </span>
<span class="-5292076237369528758" onmouseenter="enter('-5292076237369528758');" onmouseout="out('-5292076237369528758');" style=""> 125  import javax.annotation.Resource;                                                                                 </span>
<span class="-2638882474121018940" onmouseenter="enter('-2638882474121018940');" onmouseout="out('-2638882474121018940');" style=""> 126  import javax.persistence.ManyToOne;                                                                               </span>
<span class="-1278149683069486932" onmouseenter="enter('-1278149683069486932');" onmouseout="out('-1278149683069486932');" style=""> 127  import javax.persistence.OneToOne;                                                                                </span>
<span class="-2972028083581866805" onmouseenter="enter('-2972028083581866805');" onmouseout="out('-2972028083581866805');" style=""> 128  import javax.servlet.http.HttpServletRequest;                                                                     </span>
<span  style=""> 129                                                                                                                    </span>
<span  style=""> 130                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 131  /**                                                                                                               </span>
<span class="-346667533686466806" onmouseenter="enter('-346667533686466806');" onmouseout="out('-346667533686466806');" style=""> 132   * @author Andre Azzolini (apazzolini)                                                                            </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 133   */                                                                                                               </span>
<span class="4305824758257676503" onmouseenter="enter('4305824758257676503');" onmouseout="out('4305824758257676503');" style=""> 134  @Service(&quot;blFormBuilderService&quot;)                                                                                  </span>
<span class="1873196277582368359" onmouseenter="enter('1873196277582368359');" onmouseout="out('1873196277582368359');" style=""> 135  public class FormBuilderServiceImpl implements FormBuilderService {                                               </span>
<span  style=""> 136                                                                                                                    </span>
<span class="4173594623362970870" onmouseenter="enter('4173594623362970870');" onmouseout="out('4173594623362970870');" style=""> 137      private static final Log LOG = LogFactory.getLog(FormBuilderServiceImpl.class);                               </span>
<span  style=""> 138                                                                                                                    </span>
<span class="-3043900363751028803" onmouseenter="enter('-3043900363751028803');" onmouseout="out('-3043900363751028803');" style=""> 139      public static final String ALTERNATE_ID_PROPERTY = &quot;ALTERNATE_ID&quot;;                                            </span>
<span  style=""> 140                                                                                                                    </span>
<span class="-7828706270204224343" onmouseenter="enter('-7828706270204224343');" onmouseout="out('-7828706270204224343');" style=""> 141      @Resource(name = &quot;blAdminEntityService&quot;)                                                                      </span>
<span class="-8450140140941932116" onmouseenter="enter('-8450140140941932116');" onmouseout="out('-8450140140941932116');" style=""> 142      protected AdminEntityService adminEntityService;                                                              </span>
<span  style=""> 143                                                                                                                    </span>
<span class="-1805811588903622951" onmouseenter="enter('-1805811588903622951');" onmouseout="out('-1805811588903622951');" style=""> 144      @Resource (name = &quot;blAdminNavigationService&quot;)                                                                 </span>
<span class="-7781148449676317002" onmouseenter="enter('-7781148449676317002');" onmouseout="out('-7781148449676317002');" style=""> 145      protected AdminNavigationService navigationService;                                                           </span>
<span  style=""> 146                                                                                                                    </span>
<span class="7211766058790837589" onmouseenter="enter('7211766058790837589');" onmouseout="out('7211766058790837589');" style=""> 147      @Resource(name = &quot;blFormBuilderExtensionManager&quot;)                                                             </span>
<span class="1458252146616806516" onmouseenter="enter('1458252146616806516');" onmouseout="out('1458252146616806516');" style=""> 148      protected FormBuilderExtensionManager extensionManager;                                                       </span>
<span  style=""> 149                                                                                                                    </span>
<span class="1637373992155499263" onmouseenter="enter('1637373992155499263');" onmouseout="out('1637373992155499263');" style=""> 150      @Resource(name=&quot;blEntityConfiguration&quot;)                                                                       </span>
<span class="-8812870795397979367" onmouseenter="enter('-8812870795397979367');" onmouseout="out('-8812870795397979367');" style=""> 151      protected EntityConfiguration entityConfiguration;                                                            </span>
<span  style=""> 152                                                                                                                    </span>
<span class="318567755561422223" onmouseenter="enter('318567755561422223');" onmouseout="out('318567755561422223');" style=""> 153      @Resource(name=&quot;blAdminSecurityRemoteService&quot;)                                                                </span>
<span class="-293302832217381009" onmouseenter="enter('-293302832217381009');" onmouseout="out('-293302832217381009');" style=""> 154      protected SecurityVerifier adminRemoteSecurityService;                                                        </span>
<span  style=""> 155                                                                                                                    </span>
<span class="-1073312679381587606" onmouseenter="enter('-1073312679381587606');" onmouseout="out('-1073312679381587606');" style=""> 156      @Resource(name = &quot;blRowLevelSecurityService&quot;)                                                                 </span>
<span class="7292046362506695965" onmouseenter="enter('7292046362506695965');" onmouseout="out('7292046362506695965');" style=""> 157      protected RowLevelSecurityService rowLevelSecurityService;                                                    </span>
<span  style=""> 158                                                                                                                    </span>
<span class="582138269496436951" onmouseenter="enter('582138269496436951');" onmouseout="out('582138269496436951');" style=""> 159      @Resource(name = &quot;blMediaBuilderService&quot;)                                                                     </span>
<span class="8749601783428818980" onmouseenter="enter('8749601783428818980');" onmouseout="out('8749601783428818980');" style=""> 160      protected MediaBuilderService mediaBuilderService;                                                            </span>
<span  style=""> 161                                                                                                                    </span>
<span class="1982131321477089315" onmouseenter="enter('1982131321477089315');" onmouseout="out('1982131321477089315');" style=""> 162      @Resource(name = &quot;blListGridErrorMessageExtensionManager&quot;)                                                    </span>
<span class="4649294380733883401" onmouseenter="enter('4649294380733883401');" onmouseout="out('4649294380733883401');" style=""> 163      protected ListGridErrorMessageExtensionManager listGridErrorExtensionManager;                                 </span>
<span  style=""> 164                                                                                                                    </span>
<span class="-6302300657638714180" onmouseenter="enter('-6302300657638714180');" onmouseout="out('-6302300657638714180');" style=""> 165      @Resource(name = &quot;blAdminNavigationService&quot;)                                                                  </span>
<span class="-6025330588276587017" onmouseenter="enter('-6025330588276587017');" onmouseout="out('-6025330588276587017');" style=""> 166      protected AdminNavigationService adminNavigationService;                                                      </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 167 +                                                                                                                  </span>
<span class="4471392044492296285" onmouseenter="enter('4471392044492296285');" onmouseout="out('4471392044492296285');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 168 +    @Resource(name = &quot;blEntityDuplicator&quot;)                                                                        </span>
<span class="-9194612273021432316" onmouseenter="enter('-9194612273021432316');" onmouseout="out('-9194612273021432316');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 169 +    protected EntityDuplicator duplicator;                                                                        </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 170 +                                                                                                                  </span>
<span class="-8242037663383389708" onmouseenter="enter('-8242037663383389708');" onmouseout="out('-8242037663383389708');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 171 +    @Resource(name = &quot;blDynamicEntityDao&quot;)                                                                        </span>
<span class="-6629482740079052882" onmouseenter="enter('-6629482740079052882');" onmouseout="out('-6629482740079052882');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 172 +    protected DynamicEntityDao dynamicEntityDao;                                                                  </span>
<span  style=""> 173                                                                                                                    </span>









<span class="8033614225945187624" onmouseenter="enter('8033614225945187624');" onmouseout="out('8033614225945187624');" style=""> 174      protected static final VisibilityEnum[] FORM_HIDDEN_VISIBILITIES = new VisibilityEnum[] {                     </span>
<span class="-8766489859370232859" onmouseenter="enter('-8766489859370232859');" onmouseout="out('-8766489859370232859');" style=""> 175              VisibilityEnum.HIDDEN_ALL, VisibilityEnum.FORM_HIDDEN                                                 </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 176      };                                                                                                            </span>
<span  style=""> 177                                                                                                                    </span>
<span class="4001768864648272267" onmouseenter="enter('4001768864648272267');" onmouseout="out('4001768864648272267');" style=""> 178      protected static final VisibilityEnum[] GRID_HIDDEN_VISIBILITIES = new VisibilityEnum[] {                     </span>
<span class="5602397837491933700" onmouseenter="enter('5602397837491933700');" onmouseout="out('5602397837491933700');" style=""> 179              VisibilityEnum.HIDDEN_ALL, VisibilityEnum.GRID_HIDDEN                                                 </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 180      };                                                                                                            </span>
<span  style=""> 181                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 182      @Override                                                                                                     </span>
<span class="3931952365643845454" onmouseenter="enter('3931952365643845454');" onmouseout="out('3931952365643845454');" style=""><abbr title=" 183      public ListGrid buildMainListGrid(DynamicResultSet drs, ClassMetadata cmd, String sectionKey, List&lt;SectionCrumb&gt; sectionCrumbs)"> 183      public ListGrid buildMainListGrid(DynamicResultSet drs, ClassMetadata cmd, String sectionKey, List&lt;SectionCrumðŸ”µ</abbr></span>
<span class="1998458335829271558" onmouseenter="enter('1998458335829271558');" onmouseout="out('1998458335829271558');" style=""> 184              throws ServiceException {                                                                             </span>
<span  style=""> 185                                                                                                                    </span>
<span class="-7098425003691580554" onmouseenter="enter('-7098425003691580554');" onmouseout="out('-7098425003691580554');" style=""> 186          List&lt;Field&gt; headerFields = new ArrayList&lt;&gt;();                                                             </span>
<span class="1627698519761414576" onmouseenter="enter('1627698519761414576');" onmouseout="out('1627698519761414576');" style=""> 187          ListGrid.Type type = ListGrid.Type.MAIN;                                                                  </span>
<span class="-2507165338472177227" onmouseenter="enter('-2507165338472177227');" onmouseout="out('-2507165338472177227');" style=""> 188          String idProperty = &quot;id&quot;;                                                                                 </span>
<span  style=""> 189                                                                                                                    </span>
<span class="1914895525805456392" onmouseenter="enter('1914895525805456392');" onmouseout="out('1914895525805456392');" style=""> 190          FieldWrapper wrapper = new FieldWrapper();                                                                </span>
<span class="519132227955412437" onmouseenter="enter('519132227955412437');" onmouseout="out('519132227955412437');" style=""> 191          ArrayList&lt;FieldDTO&gt; defaultWrapperFields = new ArrayList&lt;&gt;();                                             </span>
<span class="3681854507729164346" onmouseenter="enter('3681854507729164346');" onmouseout="out('3681854507729164346');" style=""> 192          for (Property p : cmd.getProperties()) {                                                                  </span>
<span class="-1029066852878262358" onmouseenter="enter('-1029066852878262358');" onmouseout="out('-1029066852878262358');" style=""> 193              if (p.getMetadata() instanceof BasicFieldMetadata) {                                                  </span>
<span class="-5664285287189453326" onmouseenter="enter('-5664285287189453326');" onmouseout="out('-5664285287189453326');" style=""> 194                  BasicFieldMetadata fmd = (BasicFieldMetadata) p.getMetadata();                                    </span>
<span  style=""> 195                                                                                                                    </span>
<span class="18031332680368663" onmouseenter="enter('18031332680368663');" onmouseout="out('18031332680368663');" style=""> 196                  if (SupportedFieldType.ID.equals(fmd.getFieldType())) {                                           </span>
<span class="-3962609225474086388" onmouseenter="enter('-3962609225474086388');" onmouseout="out('-3962609225474086388');" style=""> 197                      idProperty = fmd.getName();                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 198                  }                                                                                                 </span>
<span  style=""> 199                                                                                                                    </span>
<span class="-4421297623821608279" onmouseenter="enter('-4421297623821608279');" onmouseout="out('-4421297623821608279');" style=""> 200                  if (fmd.isProminent() != null &amp;&amp; fmd.isProminent()                                                </span>
<span class="-1250799748677743340" onmouseenter="enter('-1250799748677743340');" onmouseout="out('-1250799748677743340');" style=""> 201                          &amp;&amp; !ArrayUtils.contains(getGridHiddenVisibilities(), fmd.getVisibility())) {              </span>
<span class="-8490871683061304534" onmouseenter="enter('-8490871683061304534');" onmouseout="out('-8490871683061304534');" style=""> 202                      Field hf = createHeaderField(p, fmd);                                                         </span>
<span class="465504053416102059" onmouseenter="enter('465504053416102059');" onmouseout="out('465504053416102059');" style=""> 203                      headerFields.add(hf);                                                                         </span>
<span class="6861300594848012112" onmouseenter="enter('6861300594848012112');" onmouseout="out('6861300594848012112');" style=""> 204                      defaultWrapperFields.add(constructFieldDTOFromFieldData(hf, fmd));                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 205                  }                                                                                                 </span>
<span  style=""> 206                                                                                                                    </span>
<span class="7456310891309661190" onmouseenter="enter('7456310891309661190');" onmouseout="out('7456310891309661190');" style=""> 207                  if (fmd.getIsFilter() != null &amp;&amp; fmd.getIsFilter()) {                                             </span>
<span class="2276813412477598729" onmouseenter="enter('2276813412477598729');" onmouseout="out('2276813412477598729');" style=""> 208                      wrapper.getFields().add(constructFieldDTOFromFieldData(createHeaderField(p, fmd), fmd));      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 209                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 210              }                                                                                                     </span>




<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 211          }                                                                                                         </span>
<span  style=""> 212                                                                                                                    </span>
<span class="-2480148942784560805" onmouseenter="enter('-2480148942784560805');" onmouseout="out('-2480148942784560805');" style=""><abbr title=" 213          ListGrid listGrid = createListGrid(cmd.getCeilingType(), headerFields, type, drs, sectionKey, 0, idProperty, sectionCrumbs);"> 213          ListGrid listGrid = createListGrid(cmd.getCeilingType(), headerFields, type, drs, sectionKey, 0, idPropertðŸ”µ</abbr></span>
<span  style=""> 214                                                                                                                    </span>
<span class="5965161931380536237" onmouseenter="enter('5965161931380536237');" onmouseout="out('5965161931380536237');" style=""> 215          if (CollectionUtils.isNotEmpty(listGrid.getHeaderFields())) {                                             </span>
<span class="3953700823140818229" onmouseenter="enter('3953700823140818229');" onmouseout="out('3953700823140818229');" style=""> 216              // Set the first column to be able to link to the main entity                                         </span>
<span class="2105374103692198201" onmouseenter="enter('2105374103692198201');" onmouseout="out('2105374103692198201');" style=""> 217              listGrid.getHeaderFields().iterator().next().setMainEntityLink(true);                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 218          } else {                                                                                                  </span>
<span class="-7706502187775684276" onmouseenter="enter('-7706502187775684276');" onmouseout="out('-7706502187775684276');" style=""><abbr title=" 219              String message = &quot;There are no listgrid header fields configured for the class &quot; + cmd.getCeilingType();"> 219              String message = &quot;There are no listgrid header fields configured for the class &quot; + cmd.getCeilingType(ðŸ”µ</abbr></span>
<span class="4913519471581000034" onmouseenter="enter('4913519471581000034');" onmouseout="out('4913519471581000034');" style=""> 220              message += &quot;Please mark some @AdminPresentation fields with &#x27;prominent = true&#x27;&quot;;                      </span>
<span class="683988342023046623" onmouseenter="enter('683988342023046623');" onmouseout="out('683988342023046623');" style=""> 221              LOG.error(message);                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 222          }                                                                                                         </span>
<span  style=""> 223                                                                                                                    </span>
<span class="1067693587814186246" onmouseenter="enter('1067693587814186246');" onmouseout="out('1067693587814186246');" style=""> 224          Date c = new Date();                                                                                      </span>
<span class="488922592354253720" onmouseenter="enter('488922592354253720');" onmouseout="out('488922592354253720');" style=""> 225          String friendlyName = &quot;listGrid&quot; + c.getTime();                                                           </span>
<span class="2615168876841014995" onmouseenter="enter('2615168876841014995');" onmouseout="out('2615168876841014995');" style=""> 226          // Set up the filter builder params                                                                       </span>
<span class="3627072983536168024" onmouseenter="enter('3627072983536168024');" onmouseout="out('3627072983536168024');" style=""> 227          listGrid.setJsonFieldName(friendlyName + &quot;Json&quot;);                                                         </span>
<span class="6488323689834765207" onmouseenter="enter('6488323689834765207');" onmouseout="out('6488323689834765207');" style=""> 228          listGrid.setFriendlyName(friendlyName);                                                                   </span>
<span class="-4532597237542010033" onmouseenter="enter('-4532597237542010033');" onmouseout="out('-4532597237542010033');" style=""> 229          listGrid.setFieldBuilder(&quot;RULE_SIMPLE&quot;);                                                                  </span>
<span class="2366326534416496613" onmouseenter="enter('2366326534416496613');" onmouseout="out('2366326534416496613');" style=""> 230          if (CollectionUtils.isEmpty(wrapper.getFields())) {                                                       </span>
<span class="532531496111421469" onmouseenter="enter('532531496111421469');" onmouseout="out('532531496111421469');" style=""> 231              wrapper.setFields(defaultWrapperFields);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 232          }                                                                                                         </span>
<span class="8083895692807517727" onmouseenter="enter('8083895692807517727');" onmouseout="out('8083895692807517727');" style=""> 233          listGrid.setFieldWrapper(wrapper);                                                                        </span>
<span class="-5116449029302148886" onmouseenter="enter('-5116449029302148886');" onmouseout="out('-5116449029302148886');" style=""> 234          listGrid.setHideFriendlyName(true);                                                                       </span>
<span  style=""> 235                                                                                                                    </span>
<span class="4466331963824990789" onmouseenter="enter('4466331963824990789');" onmouseout="out('4466331963824990789');" style=""> 236          String blankJsonString =  &quot;{\&quot;data\&quot;:[]}&quot;;                                                                </span>
<span class="7445610059504327235" onmouseenter="enter('7445610059504327235');" onmouseout="out('7445610059504327235');" style=""> 237          listGrid.setJson(blankJsonString);                                                                        </span>
<span class="-6647315222721447684" onmouseenter="enter('-6647315222721447684');" onmouseout="out('-6647315222721447684');" style=""> 238          DataWrapper dw = convertJsonToDataWrapper(blankJsonString);                                               </span>
<span class="-3408161092817379645" onmouseenter="enter('-3408161092817379645');" onmouseout="out('-3408161092817379645');" style=""> 239          if (dw != null) {                                                                                         </span>
<span class="-933372440492481068" onmouseenter="enter('-933372440492481068');" onmouseout="out('-933372440492481068');" style=""> 240              listGrid.setDataWrapper(dw);                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 241          }                                                                                                         </span>
<span  style=""> 242                                                                                                                    </span>
<span class="2808273481648426142" onmouseenter="enter('2808273481648426142');" onmouseout="out('2808273481648426142');" style=""> 243          listGrid.addModalRowAction(DefaultListGridActions.SINGLE_SELECT);                                         </span>
<span class="-7419173722157864798" onmouseenter="enter('-7419173722157864798');" onmouseout="out('-7419173722157864798');" style=""> 244          listGrid.setSelectType(ListGrid.SelectType.SINGLE_SELECT);                                                </span>
<span  style=""> 245                                                                                                                    </span>
<span class="-5511350038403165520" onmouseenter="enter('-5511350038403165520');" onmouseout="out('-5511350038403165520');" style=""> 246          extensionManager.getProxy().modifyListGrid(listGrid.getClassName(), listGrid);                            </span>
<span  style=""> 247                                                                                                                    </span>
<span class="8338561479600990216" onmouseenter="enter('8338561479600990216');" onmouseout="out('8338561479600990216');" style=""> 248          return listGrid;                                                                                          </span>




























<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 249      }                                                                                                             </span>
<span  style=""> 250                                                                                                                    </span>
<span class="699891459148766711" onmouseenter="enter('699891459148766711');" onmouseout="out('699891459148766711');" style=""> 251      protected FieldDTO constructFieldDTOFromFieldData(Field field, BasicFieldMetadata fmd) {                      </span>
<span class="-2352177721144438592" onmouseenter="enter('-2352177721144438592');" onmouseout="out('-2352177721144438592');" style=""> 252          FieldDTO fieldDTO = new FieldDTO();                                                                       </span>
<span class="-1955942127076587982" onmouseenter="enter('-1955942127076587982');" onmouseout="out('-1955942127076587982');" style=""> 253          //translate the label to display                                                                          </span>
<span class="-4249384918250439089" onmouseenter="enter('-4249384918250439089');" onmouseout="out('-4249384918250439089');" style=""> 254          String label = field.getFriendlyName();                                                                   </span>
<span class="-7826420477706002406" onmouseenter="enter('-7826420477706002406');" onmouseout="out('-7826420477706002406');" style=""> 255          BroadleafRequestContext context = BroadleafRequestContext.getBroadleafRequestContext();                   </span>
<span class="6441987552844354413" onmouseenter="enter('6441987552844354413');" onmouseout="out('6441987552844354413');" style=""> 256          MessageSource messages = context.getMessageSource();                                                      </span>
<span class="5121225958291793486" onmouseenter="enter('5121225958291793486');" onmouseout="out('5121225958291793486');" style=""> 257          if (messages != null) {                                                                                   </span>
<span class="8253723406718302376" onmouseenter="enter('8253723406718302376');" onmouseout="out('8253723406718302376');" style=""> 258              label = messages.getMessage(label, null, label, context.getJavaLocale());                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 259          }                                                                                                         </span>
<span class="7762483336458153581" onmouseenter="enter('7762483336458153581');" onmouseout="out('7762483336458153581');" style=""> 260          fieldDTO.setLabel(label);                                                                                 </span>
<span  style=""> 261                                                                                                                    </span>
<span class="-8673723023935338374" onmouseenter="enter('-8673723023935338374');" onmouseout="out('-8673723023935338374');" style=""> 262          fieldDTO.setId(field.getName());                                                                          </span>
<span class="199309371382711712" onmouseenter="enter('199309371382711712');" onmouseout="out('199309371382711712');" style=""> 263          if (field.getFieldType().equals(&quot;STRING&quot;)) {                                                              </span>
<span class="8880270445034694758" onmouseenter="enter('8880270445034694758');" onmouseout="out('8880270445034694758');" style=""> 264              fieldDTO.setOperators(&quot;blcFilterOperators_Text&quot;);                                                     </span>
<span class="362132093975857936" onmouseenter="enter('362132093975857936');" onmouseout="out('362132093975857936');" style=""> 265          } else if (field.getFieldType().equals(&quot;DATE&quot;)) {                                                         </span>
<span class="-933802372622143860" onmouseenter="enter('-933802372622143860');" onmouseout="out('-933802372622143860');" style=""> 266              fieldDTO.setOperators(&quot;blcFilterOperators_Date&quot;);                                                     </span>
<span class="6478164380950858712" onmouseenter="enter('6478164380950858712');" onmouseout="out('6478164380950858712');" style=""><abbr title=" 267          } else if (field.getFieldType().equals(&quot;NUMBER&quot;) || field.getFieldType().equals(&quot;MONEY&quot;) || field.getFieldType().equals(&quot;DECIMAL&quot;)) {"> 267          } else if (field.getFieldType().equals(&quot;NUMBER&quot;) || field.getFieldType().equals(&quot;MONEY&quot;) || field.getFieldðŸ”µ</abbr></span>
<span class="8490956018155589877" onmouseenter="enter('8490956018155589877');" onmouseout="out('8490956018155589877');" style=""> 268              fieldDTO.setOperators(&quot;blcFilterOperators_Numeric&quot;);                                                  </span>
<span class="-3955546677505185448" onmouseenter="enter('-3955546677505185448');" onmouseout="out('-3955546677505185448');" style=""> 269          } else if (field.getFieldType().equals(&quot;BOOLEAN&quot;)) {                                                      </span>
<span class="-8455532459880737207" onmouseenter="enter('-8455532459880737207');" onmouseout="out('-8455532459880737207');" style=""> 270              fieldDTO.setOperators(&quot;blcFilterOperators_Boolean&quot;);                                                  </span>
<span class="-8945465979032715781" onmouseenter="enter('-8945465979032715781');" onmouseout="out('-8945465979032715781');" style=""> 271          } else if (field.getFieldType().equals(&quot;BROADLEAF_ENUMERATION&quot;)) {                                        </span>
<span class="7946158486041049881" onmouseenter="enter('7946158486041049881');" onmouseout="out('7946158486041049881');" style=""> 272              fieldDTO.setOperators(&quot;blcFilterOperators_Enumeration&quot;);                                              </span>
<span class="-1687118105305598570" onmouseenter="enter('-1687118105305598570');" onmouseout="out('-1687118105305598570');" style=""> 273              fieldDTO.setInput(&quot;select&quot;);                                                                          </span>
<span class="5956593754221125403" onmouseenter="enter('5956593754221125403');" onmouseout="out('5956593754221125403');" style=""> 274              fieldDTO.setType(&quot;string&quot;);                                                                           </span>
<span class="-8055867514585232964" onmouseenter="enter('-8055867514585232964');" onmouseout="out('-8055867514585232964');" style=""> 275              String[][] enumerationValues = fmd.getEnumerationValues ();                                           </span>
<span class="-2928874460015298174" onmouseenter="enter('-2928874460015298174');" onmouseout="out('-2928874460015298174');" style=""> 276              Map&lt;String, String&gt; enumMap = new HashMap&lt;&gt;();                                                        </span>
<span class="-8241397125169255693" onmouseenter="enter('-8241397125169255693');" onmouseout="out('-8241397125169255693');" style=""> 277              for (int i = 0; i &lt; enumerationValues.length; i++) {                                                  </span>
<span class="3518234982487844996" onmouseenter="enter('3518234982487844996');" onmouseout="out('3518234982487844996');" style=""> 278                  enumMap.put(enumerationValues[i][0], enumerationValues[i][1]);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 279              }                                                                                                     </span>
<span  style=""> 280                                                                                                                    </span>
<span class="6553005935364150402" onmouseenter="enter('6553005935364150402');" onmouseout="out('6553005935364150402');" style=""> 281              fieldDTO.setValues(new JSONObject(enumMap).toString());                                               </span>
<span class="-5703564682837731123" onmouseenter="enter('-5703564682837731123');" onmouseout="out('-5703564682837731123');" style=""> 282          } else if (field.getFieldType().equals(&quot;ADDITIONAL_FOREIGN_KEY&quot;)) {                                       </span>
<span class="4888432392511853941" onmouseenter="enter('4888432392511853941');" onmouseout="out('4888432392511853941');" style=""> 283              fieldDTO.setOperators(&quot;blcFilterOperators_Selectize&quot;);                                                </span>
<span class="5956593754221125403" onmouseenter="enter('5956593754221125403');" onmouseout="out('5956593754221125403');" style=""> 284              fieldDTO.setType(&quot;string&quot;);                                                                           </span>
<span  style=""> 285                                                                                                                    </span>
<span class="-7218290231764700666" onmouseenter="enter('-7218290231764700666');" onmouseout="out('-7218290231764700666');" style=""><abbr title=" 286              AdminSection section = adminNavigationService.findAdminSectionByClassAndSectionId(fmd.getForeignKeyClass(), null);"> 286              AdminSection section = adminNavigationService.findAdminSectionByClassAndSectionId(fmd.getForeignKeyClaðŸ”µ</abbr></span>
<span class="2297837107111400660" onmouseenter="enter('2297837107111400660');" onmouseout="out('2297837107111400660');" style=""> 287              if (section != null) {                                                                                </span>
<span class="7209555309149439987" onmouseenter="enter('7209555309149439987');" onmouseout="out('7209555309149439987');" style=""> 288                  String sectionKey = section.getUrl().substring(1);                                                </span>
<span class="-1035532662553188661" onmouseenter="enter('-1035532662553188661');" onmouseout="out('-1035532662553188661');" style=""> 289                  fieldDTO.setSelectizeSectionKey(sectionKey);                                                      </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 290              } else {                                                                                              </span>
<span class="-1256248398739173538" onmouseenter="enter('-1256248398739173538');" onmouseout="out('-1256248398739173538');" style=""> 291                  fieldDTO.setSelectizeSectionKey(fmd.getForeignKeyClass());                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 292              }                                                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 293          } else {                                                                                                  </span>
<span class="8880270445034694758" onmouseenter="enter('8880270445034694758');" onmouseout="out('8880270445034694758');" style=""> 294              fieldDTO.setOperators(&quot;blcFilterOperators_Text&quot;);                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 295          }                                                                                                         </span>
<span  style=""> 296                                                                                                                    </span>
<span class="1806966708924182038" onmouseenter="enter('1806966708924182038');" onmouseout="out('1806966708924182038');" style=""> 297          return fieldDTO;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 298      }                                                                                                             </span>
<span  style=""> 299                                                                                                                    </span>
<span class="2032004802479742635" onmouseenter="enter('2032004802479742635');" onmouseout="out('2032004802479742635');" style=""> 300      protected Field createHeaderField(Property p, BasicFieldMetadata fmd) {                                       </span>
<span class="427159967034734869" onmouseenter="enter('427159967034734869');" onmouseout="out('427159967034734869');" style=""> 301          Field hf;                                                                                                 </span>
<span class="-6909671090697516708" onmouseenter="enter('-6909671090697516708');" onmouseout="out('-6909671090697516708');" style=""> 302          if (fmd.getFieldType().equals(SupportedFieldType.EXPLICIT_ENUMERATION) ||                                 </span>
<span class="7742695259499854892" onmouseenter="enter('7742695259499854892');" onmouseout="out('7742695259499854892');" style=""> 303                  fmd.getFieldType().equals(SupportedFieldType.BROADLEAF_ENUMERATION) ||                            </span>
<span class="-7610412024039368203" onmouseenter="enter('-7610412024039368203');" onmouseout="out('-7610412024039368203');" style=""> 304                  fmd.getFieldType().equals(SupportedFieldType.DATA_DRIVEN_ENUMERATION) ||                          </span>
<span class="4727590924096529195" onmouseenter="enter('4727590924096529195');" onmouseout="out('4727590924096529195');" style=""> 305                  fmd.getFieldType().equals(SupportedFieldType.EMPTY_ENUMERATION)) {                                </span>
<span class="-4376407603411664672" onmouseenter="enter('-4376407603411664672');" onmouseout="out('-4376407603411664672');" style=""> 306              hf = new ComboField();                                                                                </span>
<span class="5290847828500288961" onmouseenter="enter('5290847828500288961');" onmouseout="out('5290847828500288961');" style=""> 307              ((ComboField) hf).setOptions(fmd.getEnumerationValues());                                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 308          } else {                                                                                                  </span>
<span class="5244670954290190768" onmouseenter="enter('5244670954290190768');" onmouseout="out('5244670954290190768');" style=""> 309              hf = new Field();                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 310          }                                                                                                         </span>
<span  style=""> 311                                                                                                                    </span>
<span class="-8016020800600825313" onmouseenter="enter('-8016020800600825313');" onmouseout="out('-8016020800600825313');" style=""> 312          hf.withName(p.getName())                                                                                  </span>
<span class="-6196212150372307342" onmouseenter="enter('-6196212150372307342');" onmouseout="out('-6196212150372307342');" style=""> 313            .withFriendlyName(StringUtils.isNotEmpty(fmd.getFriendlyName()) ? fmd.getFriendlyName() : p.getName())  </span>
<span class="-8419553007953225668" onmouseenter="enter('-8419553007953225668');" onmouseout="out('-8419553007953225668');" style=""> 314            .withOrder(fmd.getGridOrder())                                                                          </span>
<span class="1117956679003990491" onmouseenter="enter('1117956679003990491');" onmouseout="out('1117956679003990491');" style=""> 315            .withColumnWidth(fmd.getColumnWidth())                                                                  </span>
<span class="3058247827263925638" onmouseenter="enter('3058247827263925638');" onmouseout="out('3058247827263925638');" style=""> 316            .withForeignKeyDisplayValueProperty(fmd.getForeignKeyDisplayValueProperty())                            </span>
<span class="3198496511046166958" onmouseenter="enter('3198496511046166958');" onmouseout="out('3198496511046166958');" style=""> 317            .withForeignKeyClass(fmd.getForeignKeyClass())                                                          </span>
<span class="-2338070414188990290" onmouseenter="enter('-2338070414188990290');" onmouseout="out('-2338070414188990290');" style=""> 318            .withForeignKeySectionPath(getAdminSectionPath(fmd.getForeignKeyClass()))                               </span>
<span class="6217223457568112539" onmouseenter="enter('6217223457568112539');" onmouseout="out('6217223457568112539');" style=""> 319            .withOwningEntityClass(fmd.getOwningClass() != null ? fmd.getOwningClass() : fmd.getTargetClass())      </span>
<span class="-5416800581554261750" onmouseenter="enter('-5416800581554261750');" onmouseout="out('-5416800581554261750');" style=""> 320            .withCanLinkToExternalEntity(fmd.getCanLinkToExternalEntity());                                         </span>
<span class="5921747215124261866" onmouseenter="enter('5921747215124261866');" onmouseout="out('5921747215124261866');" style=""> 321          String fieldType = fmd.getFieldType() == null ? null : fmd.getFieldType().toString();                     </span>
<span class="6628044949969244118" onmouseenter="enter('6628044949969244118');" onmouseout="out('6628044949969244118');" style=""> 322          hf.setFieldType(fieldType);                                                                               </span>
<span  style=""> 323                                                                                                                    </span>
<span class="-6552084929958187472" onmouseenter="enter('-6552084929958187472');" onmouseout="out('-6552084929958187472');" style=""> 324          return hf;                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 325      }                                                                                                             </span>
<span  style=""> 326                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 327      @Override                                                                                                     </span>
<span class="-5402852713479232147" onmouseenter="enter('-5402852713479232147');" onmouseout="out('-5402852713479232147');" style=""> 328      public ListGrid buildCollectionListGrid(String containingEntityId, DynamicResultSet drs, Property field,      </span>
<span class="8976903068062443392" onmouseenter="enter('8976903068062443392');" onmouseout="out('8976903068062443392');" style=""> 329              String sectionKey, List&lt;SectionCrumb&gt; sectionCrumbs)                                                  </span>
<span class="1998458335829271558" onmouseenter="enter('1998458335829271558');" onmouseout="out('1998458335829271558');" style=""> 330              throws ServiceException {                                                                             </span>
<span class="3501499603601527305" onmouseenter="enter('3501499603601527305');" onmouseout="out('3501499603601527305');" style=""> 331          FieldMetadata fmd = field.getMetadata();                                                                  </span>
<span class="6565595844041240946" onmouseenter="enter('6565595844041240946');" onmouseout="out('6565595844041240946');" style=""> 332          // Get the class metadata for this particular field                                                       </span>
<span class="-8834884127458938753" onmouseenter="enter('-8834884127458938753');" onmouseout="out('-8834884127458938753');" style=""> 333          PersistencePackageRequest ppr = PersistencePackageRequest.fromMetadata(fmd, sectionCrumbs);               </span>
<span class="-470699824173107204" onmouseenter="enter('-470699824173107204');" onmouseout="out('-470699824173107204');" style=""> 334          if (field != null) {                                                                                      </span>
<span class="8971896145704334353" onmouseenter="enter('8971896145704334353');" onmouseout="out('8971896145704334353');" style=""> 335              ppr.setSectionEntityField(field.getName());                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 336          }                                                                                                         </span>
<span class="1142804962458743647" onmouseenter="enter('1142804962458743647');" onmouseout="out('1142804962458743647');" style=""> 337          ClassMetadata cmd = adminEntityService.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();    </span>
<span  style=""> 338                                                                                                                    </span>
<span class="-7098425003691580554" onmouseenter="enter('-7098425003691580554');" onmouseout="out('-7098425003691580554');" style=""> 339          List&lt;Field&gt; headerFields = new ArrayList&lt;&gt;();                                                             </span>
<span class="-9156899327835473831" onmouseenter="enter('-9156899327835473831');" onmouseout="out('-9156899327835473831');" style=""> 340          ListGrid.Type type = null;                                                                                </span>
<span class="2210107579970549810" onmouseenter="enter('2210107579970549810');" onmouseout="out('2210107579970549810');" style=""> 341          boolean editable = false;                                                                                 </span>
<span class="-5174966648729145523" onmouseenter="enter('-5174966648729145523');" onmouseout="out('-5174966648729145523');" style=""> 342          boolean sortable = false;                                                                                 </span>
<span class="6635173913482908092" onmouseenter="enter('6635173913482908092');" onmouseout="out('6635173913482908092');" style=""> 343          boolean readOnly = false;                                                                                 </span>
<span class="-239666301548818102" onmouseenter="enter('-239666301548818102');" onmouseout="out('-239666301548818102');" style=""> 344          boolean hideIdColumn = false;                                                                             </span>
<span class="-8650993504988805305" onmouseenter="enter('-8650993504988805305');" onmouseout="out('-8650993504988805305');" style=""> 345          boolean canFilterAndSort = true;                                                                          </span>
<span class="-2910642919012813708" onmouseenter="enter('-2910642919012813708');" onmouseout="out('-2910642919012813708');" style=""> 346          boolean modalSingleSelectable = false;                                                                    </span>
<span class="-5712500441207558612" onmouseenter="enter('-5712500441207558612');" onmouseout="out('-5712500441207558612');" style=""> 347          boolean modalMultiSelectable = false;                                                                     </span>
<span class="4919598248352463197" onmouseenter="enter('4919598248352463197');" onmouseout="out('4919598248352463197');" style=""> 348          boolean selectize = false;                                                                                </span>
<span class="3512909155182388697" onmouseenter="enter('3512909155182388697');" onmouseout="out('3512909155182388697');" style=""> 349          boolean isMedia = false;                                                                                  </span>
<span class="-2503475837959180700" onmouseenter="enter('-2503475837959180700');" onmouseout="out('-2503475837959180700');" style=""> 350          boolean isLookup = false;                                                                                 </span>
<span class="4230800067451301552" onmouseenter="enter('4230800067451301552');" onmouseout="out('4230800067451301552');" style=""> 351          String sortProperty = null;                                                                               </span>
<span class="1914895525805456392" onmouseenter="enter('1914895525805456392');" onmouseout="out('1914895525805456392');" style=""> 352          FieldWrapper wrapper = new FieldWrapper();                                                                </span>
<span class="519132227955412437" onmouseenter="enter('519132227955412437');" onmouseout="out('519132227955412437');" style=""> 353          ArrayList&lt;FieldDTO&gt; defaultWrapperFields = new ArrayList&lt;&gt;();                                             </span>
<span  style=""> 354                                                                                                                    </span>
<span  style=""> 355                                                                                                                    </span>
<span class="-2507165338472177227" onmouseenter="enter('-2507165338472177227');" onmouseout="out('-2507165338472177227');" style=""> 356          String idProperty = &quot;id&quot;;                                                                                 </span>
<span class="-3497335608114491506" onmouseenter="enter('-3497335608114491506');" onmouseout="out('-3497335608114491506');" style=""> 357          for (Property property : cmd.getProperties()) {                                                           </span>
<span class="8031432354977321026" onmouseenter="enter('8031432354977321026');" onmouseout="out('8031432354977321026');" style=""> 358              if (property.getMetadata() instanceof BasicFieldMetadata &amp;&amp;                                           </span>
<span class="-5839489581778150379" onmouseenter="enter('-5839489581778150379');" onmouseout="out('-5839489581778150379');" style=""> 359                      SupportedFieldType.ID==((BasicFieldMetadata) property.getMetadata()).getFieldType() &amp;&amp;        </span>
<span class="493640064601793810" onmouseenter="enter('493640064601793810');" onmouseout="out('493640064601793810');" style=""> 360                      //make sure it&#x27;s a property for this entity - not an association                              </span>
<span class="1409226213228097655" onmouseenter="enter('1409226213228097655');" onmouseout="out('1409226213228097655');" style=""> 361                      !property.getName().contains(&quot;.&quot;)) {                                                          </span>
<span class="2195830063219251158" onmouseenter="enter('2195830063219251158');" onmouseout="out('2195830063219251158');" style=""> 362                  idProperty = property.getName();                                                                  </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 363                  break;                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 364              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 365          }                                                                                                         </span>
<span class="6884921877918156743" onmouseenter="enter('6884921877918156743');" onmouseout="out('6884921877918156743');" style=""> 366          // Get the header fields for this list grid. Note that the header fields are different depending on the   </span>
<span class="-3735179050749022362" onmouseenter="enter('-3735179050749022362');" onmouseout="out('-3735179050749022362');" style=""> 367          // kind of field this is.                                                                                 </span>
<span class="9198797156358178451" onmouseenter="enter('9198797156358178451');" onmouseout="out('9198797156358178451');" style=""> 368          if (fmd instanceof BasicFieldMetadata) {                                                                  </span>
<span class="6405821464206093762" onmouseenter="enter('6405821464206093762');" onmouseout="out('6405821464206093762');" style=""> 369              readOnly = ((BasicFieldMetadata) fmd).getReadOnly();                                                  </span>
<span class="-1800504749677095068" onmouseenter="enter('-1800504749677095068');" onmouseout="out('-1800504749677095068');" style=""> 370              modalSingleSelectable = true;                                                                         </span>
<span class="3681854507729164346" onmouseenter="enter('3681854507729164346');" onmouseout="out('3681854507729164346');" style=""> 371              for (Property p : cmd.getProperties()) {                                                              </span>
<span class="-1029066852878262358" onmouseenter="enter('-1029066852878262358');" onmouseout="out('-1029066852878262358');" style=""> 372                  if (p.getMetadata() instanceof BasicFieldMetadata) {                                              </span>
<span class="-941768582779766785" onmouseenter="enter('-941768582779766785');" onmouseout="out('-941768582779766785');" style=""> 373                      BasicFieldMetadata md = (BasicFieldMetadata) p.getMetadata();                                 </span>
<span  style=""> 374                                                                                                                    </span>
<span class="-5406944276814759650" onmouseenter="enter('-5406944276814759650');" onmouseout="out('-5406944276814759650');" style=""> 375                      if (SupportedFieldType.ID.equals(md.getFieldType())) {                                        </span>
<span class="4761882765386854544" onmouseenter="enter('4761882765386854544');" onmouseout="out('4761882765386854544');" style=""> 376                          idProperty = md.getName();                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 377                      }                                                                                             </span>
<span  style=""> 378                                                                                                                    </span>
<span class="-3346338779761665081" onmouseenter="enter('-3346338779761665081');" onmouseout="out('-3346338779761665081');" style=""> 379                      if (md.isProminent() != null &amp;&amp; md.isProminent()                                              </span>
<span class="-8627428290755725902" onmouseenter="enter('-8627428290755725902');" onmouseout="out('-8627428290755725902');" style=""> 380                              &amp;&amp; !ArrayUtils.contains(getGridHiddenVisibilities(), md.getVisibility())) {           </span>
<span class="-1913804071468350989" onmouseenter="enter('-1913804071468350989');" onmouseout="out('-1913804071468350989');" style=""> 381                          Field hf = createHeaderField(p, md);                                                      </span>
<span class="465504053416102059" onmouseenter="enter('465504053416102059');" onmouseout="out('465504053416102059');" style=""> 382                          headerFields.add(hf);                                                                     </span>
<span class="1435471691691453270" onmouseenter="enter('1435471691691453270');" onmouseout="out('1435471691691453270');" style=""> 383                          defaultWrapperFields.add(constructFieldDTOFromFieldData(hf, md));                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 384                      }                                                                                             </span>
<span  style=""> 385                                                                                                                    </span>
<span class="2885325040802931258" onmouseenter="enter('2885325040802931258');" onmouseout="out('2885325040802931258');" style=""> 386                      if (md.getIsFilter() != null &amp;&amp; md.getIsFilter()) {                                           </span>
<span class="6602106188311855247" onmouseenter="enter('6602106188311855247');" onmouseout="out('6602106188311855247');" style=""> 387                          Field f = createHeaderField(p, md);                                                       </span>
<span class="-6869394336056843666" onmouseenter="enter('-6869394336056843666');" onmouseout="out('-6869394336056843666');" style=""> 388                          wrapper.getFields().add(constructFieldDTOFromFieldData(f, md));                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 389                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 390                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 391              }                                                                                                     </span>
<span  style=""> 392                                                                                                                    </span>
<span class="6210556782412808449" onmouseenter="enter('6210556782412808449');" onmouseout="out('6210556782412808449');" style=""> 393              type = ListGrid.Type.TO_ONE;                                                                          </span>
<span class="-1553716655191536539" onmouseenter="enter('-1553716655191536539');" onmouseout="out('-1553716655191536539');" style=""> 394          } else if (fmd instanceof BasicCollectionMetadata) {                                                      </span>
<span class="-8775784672799201545" onmouseenter="enter('-8775784672799201545');" onmouseout="out('-8775784672799201545');" style=""> 395              BasicCollectionMetadata bcm = (BasicCollectionMetadata) fmd;                                          </span>
<span class="3088375959257191151" onmouseenter="enter('3088375959257191151');" onmouseout="out('3088375959257191151');" style=""> 396              readOnly = !bcm.isMutable();                                                                          </span>
<span  style=""> 397                                                                                                                    </span>
<span class="-7423610773734855911" onmouseenter="enter('-7423610773734855911');" onmouseout="out('-7423610773734855911');" style=""> 398              if(AddMethodType.LOOKUP.equals(bcm.getAddMethodType())) {                                             </span>
<span class="394788880007387168" onmouseenter="enter('394788880007387168');" onmouseout="out('394788880007387168');" style=""> 399                  isLookup = true;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 400              }                                                                                                     </span>
<span  style=""> 401                                                                                                                    </span>
<span class="-8334523343019219245" onmouseenter="enter('-8334523343019219245');" onmouseout="out('-8334523343019219245');" style=""> 402              if (AddMethodType.SELECTIZE_LOOKUP.equals(bcm.getAddMethodType())) {                                  </span>
<span class="-7023171196031834591" onmouseenter="enter('-7023171196031834591');" onmouseout="out('-7023171196031834591');" style=""> 403                  Property p = cmd.getPMap().get(bcm.getSelectizeVisibleField());                                   </span>
<span class="-4724213940983805674" onmouseenter="enter('-4724213940983805674');" onmouseout="out('-4724213940983805674');" style=""> 404                  if (p != null) {                                                                                  </span>
<span class="-941768582779766785" onmouseenter="enter('-941768582779766785');" onmouseout="out('-941768582779766785');" style=""> 405                      BasicFieldMetadata md = (BasicFieldMetadata) p.getMetadata();                                 </span>
<span  style=""> 406                                                                                                                    </span>
<span class="-1913804071468350989" onmouseenter="enter('-1913804071468350989');" onmouseout="out('-1913804071468350989');" style=""> 407                      Field hf = createHeaderField(p, md);                                                          </span>
<span class="465504053416102059" onmouseenter="enter('465504053416102059');" onmouseout="out('465504053416102059');" style=""> 408                      headerFields.add(hf);                                                                         </span>
<span class="4412272633078565706" onmouseenter="enter('4412272633078565706');" onmouseout="out('4412272633078565706');" style=""> 409                      wrapper.getFields().add(constructFieldDTOFromFieldData(hf, md));                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 410                  }                                                                                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 411              } else {                                                                                              </span>
<span class="3681854507729164346" onmouseenter="enter('3681854507729164346');" onmouseout="out('3681854507729164346');" style=""> 412                  for (Property p : cmd.getProperties()) {                                                          </span>
<span class="-1029066852878262358" onmouseenter="enter('-1029066852878262358');" onmouseout="out('-1029066852878262358');" style=""> 413                      if (p.getMetadata() instanceof BasicFieldMetadata) {                                          </span>
<span class="-941768582779766785" onmouseenter="enter('-941768582779766785');" onmouseout="out('-941768582779766785');" style=""> 414                          BasicFieldMetadata md = (BasicFieldMetadata) p.getMetadata();                             </span>
<span class="-3346338779761665081" onmouseenter="enter('-3346338779761665081');" onmouseout="out('-3346338779761665081');" style=""> 415                          if (md.isProminent() != null &amp;&amp; md.isProminent()                                          </span>
<span class="-8627428290755725902" onmouseenter="enter('-8627428290755725902');" onmouseout="out('-8627428290755725902');" style=""> 416                                  &amp;&amp; !ArrayUtils.contains(getGridHiddenVisibilities(), md.getVisibility())) {       </span>
<span class="-1913804071468350989" onmouseenter="enter('-1913804071468350989');" onmouseout="out('-1913804071468350989');" style=""> 417                              Field hf = createHeaderField(p, md);                                                  </span>
<span class="465504053416102059" onmouseenter="enter('465504053416102059');" onmouseout="out('465504053416102059');" style=""> 418                              headerFields.add(hf);                                                                 </span>
<span class="1435471691691453270" onmouseenter="enter('1435471691691453270');" onmouseout="out('1435471691691453270');" style=""> 419                              defaultWrapperFields.add(constructFieldDTOFromFieldData(hf, md));                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 420                          }                                                                                         </span>
<span  style=""> 421                                                                                                                    </span>
<span class="2885325040802931258" onmouseenter="enter('2885325040802931258');" onmouseout="out('2885325040802931258');" style=""> 422                          if (md.getIsFilter() != null &amp;&amp; md.getIsFilter()) {                                       </span>
<span class="6602106188311855247" onmouseenter="enter('6602106188311855247');" onmouseout="out('6602106188311855247');" style=""> 423                              Field f = createHeaderField(p, md);                                                   </span>
<span class="-6869394336056843666" onmouseenter="enter('-6869394336056843666');" onmouseout="out('-6869394336056843666');" style=""> 424                              wrapper.getFields().add(constructFieldDTOFromFieldData(f, md));                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 425                          }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 426                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 427                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 428              }                                                                                                     </span>
<span  style=""> 429                                                                                                                    </span>
<span class="5616863682741119985" onmouseenter="enter('5616863682741119985');" onmouseout="out('5616863682741119985');" style=""> 430              type = ListGrid.Type.BASIC;                                                                           </span>
<span  style=""> 431                                                                                                                    </span>
<span class="4789284002623142077" onmouseenter="enter('4789284002623142077');" onmouseout="out('4789284002623142077');" style=""><abbr title=" 432              if (AddMethodType.PERSIST.equals(bcm.getAddMethodType()) || AddMethodType.PERSIST_EMPTY.equals(bcm.getAddMethodType())) {"> 432              if (AddMethodType.PERSIST.equals(bcm.getAddMethodType()) || AddMethodType.PERSIST_EMPTY.equals(bcm.getðŸ”µ</abbr></span>
<span class="-5907191702643786371" onmouseenter="enter('-5907191702643786371');" onmouseout="out('-5907191702643786371');" style=""> 433                  editable = true;                                                                                  </span>
<span class="-3279362726035609266" onmouseenter="enter('-3279362726035609266');" onmouseout="out('-3279362726035609266');" style=""> 434              } else if (AddMethodType.SELECTIZE_LOOKUP.equals(bcm.getAddMethodType())) {                           </span>
<span class="7652343580882391271" onmouseenter="enter('7652343580882391271');" onmouseout="out('7652343580882391271');" style=""> 435                  selectize = true;                                                                                 </span>
<span class="-1800504749677095068" onmouseenter="enter('-1800504749677095068');" onmouseout="out('-1800504749677095068');" style=""> 436                  modalSingleSelectable = true;                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 437              } else {                                                                                              </span>
<span class="-1800504749677095068" onmouseenter="enter('-1800504749677095068');" onmouseout="out('-1800504749677095068');" style=""> 438                  modalSingleSelectable = true;                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 439              }                                                                                                     </span>
<span class="-5601810365028455374" onmouseenter="enter('-5601810365028455374');" onmouseout="out('-5601810365028455374');" style=""> 440              sortable = StringUtils.isNotBlank(bcm.getSortProperty());                                             </span>
<span class="5410259152944409683" onmouseenter="enter('5410259152944409683');" onmouseout="out('5410259152944409683');" style=""> 441              if (sortable) {                                                                                       </span>
<span class="5401130852877516905" onmouseenter="enter('5401130852877516905');" onmouseout="out('5401130852877516905');" style=""> 442                  sortProperty = bcm.getSortProperty();                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 443              }                                                                                                     </span>
<span class="-242736616410190546" onmouseenter="enter('-242736616410190546');" onmouseout="out('-242736616410190546');" style=""> 444          } else if (fmd instanceof AdornedTargetCollectionMetadata) {                                              </span>
<span class="-1800504749677095068" onmouseenter="enter('-1800504749677095068');" onmouseout="out('-1800504749677095068');" style=""> 445              modalSingleSelectable = true;                                                                         </span>
<span class="8372678663626684591" onmouseenter="enter('8372678663626684591');" onmouseout="out('8372678663626684591');" style=""> 446              readOnly = !((AdornedTargetCollectionMetadata) fmd).isMutable();                                      </span>
<span class="5808828893872341029" onmouseenter="enter('5808828893872341029');" onmouseout="out('5808828893872341029');" style=""> 447              AdornedTargetCollectionMetadata atcmd = (AdornedTargetCollectionMetadata) fmd;                        </span>
<span  style=""> 448                                                                                                                    </span>
<span class="-8744153650676911691" onmouseenter="enter('-8744153650676911691');" onmouseout="out('-8744153650676911691');" style=""> 449              if(AdornedTargetAddMethodType.LOOKUP.equals(atcmd.getAdornedTargetAddMethodType())) {                 </span>
<span class="394788880007387168" onmouseenter="enter('394788880007387168');" onmouseout="out('394788880007387168');" style=""> 450                  isLookup = true;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 451              }                                                                                                     </span>
<span  style=""> 452                                                                                                                    </span>
<span class="5256125016531832923" onmouseenter="enter('5256125016531832923');" onmouseout="out('5256125016531832923');" style=""> 453              if (AdornedTargetAddMethodType.SELECTIZE_LOOKUP.equals(atcmd.getAdornedTargetAddMethodType())) {      </span>
<span class="7652343580882391271" onmouseenter="enter('7652343580882391271');" onmouseout="out('7652343580882391271');" style=""> 454                  selectize = true;                                                                                 </span>
<span  style=""> 455                                                                                                                    </span>
<span class="6698696772959199393" onmouseenter="enter('6698696772959199393');" onmouseout="out('6698696772959199393');" style=""> 456                  Property p = cmd.getPMap().get(atcmd.getSelectizeVisibleField());                                 </span>
<span class="-4724213940983805674" onmouseenter="enter('-4724213940983805674');" onmouseout="out('-4724213940983805674');" style=""> 457                  if (p != null) {                                                                                  </span>
<span class="-941768582779766785" onmouseenter="enter('-941768582779766785');" onmouseout="out('-941768582779766785');" style=""> 458                      BasicFieldMetadata md = (BasicFieldMetadata) p.getMetadata();                                 </span>
<span  style=""> 459                                                                                                                    </span>
<span class="-1913804071468350989" onmouseenter="enter('-1913804071468350989');" onmouseout="out('-1913804071468350989');" style=""> 460                      Field hf = createHeaderField(p, md);                                                          </span>
<span class="465504053416102059" onmouseenter="enter('465504053416102059');" onmouseout="out('465504053416102059');" style=""> 461                      headerFields.add(hf);                                                                         </span>
<span class="4412272633078565706" onmouseenter="enter('4412272633078565706');" onmouseout="out('4412272633078565706');" style=""> 462                      wrapper.getFields().add(constructFieldDTOFromFieldData(hf, md));                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 463                  }                                                                                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 464              } else {                                                                                              </span>
<span class="7815744478908232711" onmouseenter="enter('7815744478908232711');" onmouseout="out('7815744478908232711');" style=""> 465                  for (String fieldName : atcmd.getGridVisibleFields()) {                                           </span>
<span class="6577951603357424858" onmouseenter="enter('6577951603357424858');" onmouseout="out('6577951603357424858');" style=""> 466                      Property p = cmd.getPMap().get(fieldName);                                                    </span>
<span class="-4724213940983805674" onmouseenter="enter('-4724213940983805674');" onmouseout="out('-4724213940983805674');" style=""> 467                      if (p != null) {                                                                              </span>
<span class="-941768582779766785" onmouseenter="enter('-941768582779766785');" onmouseout="out('-941768582779766785');" style=""> 468                          BasicFieldMetadata md = (BasicFieldMetadata) p.getMetadata();                             </span>
<span  style=""> 469                                                                                                                    </span>
<span class="-1913804071468350989" onmouseenter="enter('-1913804071468350989');" onmouseout="out('-1913804071468350989');" style=""> 470                          Field hf = createHeaderField(p, md);                                                      </span>
<span class="465504053416102059" onmouseenter="enter('465504053416102059');" onmouseout="out('465504053416102059');" style=""> 471                          headerFields.add(hf);                                                                     </span>
<span class="4412272633078565706" onmouseenter="enter('4412272633078565706');" onmouseout="out('4412272633078565706');" style=""> 472                          wrapper.getFields().add(constructFieldDTOFromFieldData(hf, md));                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 473                      }                                                                                             </span>
<span  style=""> 474                                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 475                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 476              }                                                                                                     </span>
<span  style=""> 477                                                                                                                    </span>
<span class="9155103560587761905" onmouseenter="enter('9155103560587761905');" onmouseout="out('9155103560587761905');" style=""> 478              type = ListGrid.Type.ADORNED;                                                                         </span>
<span  style=""> 479                                                                                                                    </span>
<span class="6020748960132993219" onmouseenter="enter('6020748960132993219');" onmouseout="out('6020748960132993219');" style=""> 480              if (atcmd.getMaintainedAdornedTargetFields().length &gt; 0) {                                            </span>
<span class="-5907191702643786371" onmouseenter="enter('-5907191702643786371');" onmouseout="out('-5907191702643786371');" style=""> 481                  editable = true;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 482              }                                                                                                     </span>
<span  style=""> 483                                                                                                                    </span>
<span class="5921221796736617807" onmouseenter="enter('5921221796736617807');" onmouseout="out('5921221796736617807');" style=""> 484              AdornedTargetList adornedList = (AdornedTargetList) atcmd.getPersistencePerspective()                 </span>
<span class="551023238709431279" onmouseenter="enter('551023238709431279');" onmouseout="out('551023238709431279');" style=""> 485                      .getPersistencePerspectiveItems().get(PersistencePerspectiveItemType.ADORNEDTARGETLIST);      </span>
<span class="-3485770976150587717" onmouseenter="enter('-3485770976150587717');" onmouseout="out('-3485770976150587717');" style=""> 486              sortable = StringUtils.isNotBlank(adornedList.getSortField());                                        </span>
<span class="5410259152944409683" onmouseenter="enter('5410259152944409683');" onmouseout="out('5410259152944409683');" style=""> 487              if (sortable) {                                                                                       </span>
<span class="-4257122370377854741" onmouseenter="enter('-4257122370377854741');" onmouseout="out('-4257122370377854741');" style=""> 488                  sortProperty = adornedList.getSortField();                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 489              }                                                                                                     </span>
<span class="-2779851479168607918" onmouseenter="enter('-2779851479168607918');" onmouseout="out('-2779851479168607918');" style=""> 490          } else if (fmd instanceof MapMetadata) {                                                                  </span>
<span class="-579137610819846940" onmouseenter="enter('-579137610819846940');" onmouseout="out('-579137610819846940');" style=""> 491              readOnly = !((MapMetadata) fmd).isMutable();                                                          </span>
<span class="4906504520834467748" onmouseenter="enter('4906504520834467748');" onmouseout="out('4906504520834467748');" style=""> 492              MapMetadata mmd = (MapMetadata) fmd;                                                                  </span>
<span  style=""> 493                                                                                                                    </span>
<span class="8195378525472973548" onmouseenter="enter('8195378525472973548');" onmouseout="out('8195378525472973548');" style=""> 494              Property p2 = cmd.getPMap().get(&quot;key&quot;);                                                               </span>
<span class="8564668864688579354" onmouseenter="enter('8564668864688579354');" onmouseout="out('8564668864688579354');" style=""> 495              BasicFieldMetadata keyMd = (BasicFieldMetadata) p2.getMetadata();                                     </span>
<span class="1816634897954632003" onmouseenter="enter('1816634897954632003');" onmouseout="out('1816634897954632003');" style=""> 496              keyMd.setFriendlyName(getMapKeyFriendlyName(p2));                                                     </span>
<span class="2754310034023241051" onmouseenter="enter('2754310034023241051');" onmouseout="out('2754310034023241051');" style=""> 497              Field hf = createHeaderField(p2, keyMd);                                                              </span>
<span class="465504053416102059" onmouseenter="enter('465504053416102059');" onmouseout="out('465504053416102059');" style=""> 498              headerFields.add(hf);                                                                                 </span>
<span class="-7053544519634906156" onmouseenter="enter('-7053544519634906156');" onmouseout="out('-7053544519634906156');" style=""> 499              wrapper.getFields().add(constructFieldDTOFromFieldData(hf, keyMd));                                   </span>
<span  style=""> 500                                                                                                                    </span>
<span class="5591331798883124479" onmouseenter="enter('5591331798883124479');" onmouseout="out('5591331798883124479');" style=""> 501              if (mmd.isSimpleValue()) {                                                                            </span>
<span class="4182323386511173091" onmouseenter="enter('4182323386511173091');" onmouseout="out('4182323386511173091');" style=""> 502                  Property valueProperty = cmd.getPMap().get(&quot;value&quot;);                                              </span>
<span class="-6095977990841346888" onmouseenter="enter('-6095977990841346888');" onmouseout="out('-6095977990841346888');" style=""> 503                  BasicFieldMetadata valueMd = (BasicFieldMetadata) valueProperty.getMetadata();                    </span>
<span class="-3484742708607220925" onmouseenter="enter('-3484742708607220925');" onmouseout="out('-3484742708607220925');" style=""> 504                  valueMd.setFriendlyName(&quot;Value&quot;);                                                                 </span>
<span class="4972432646543922921" onmouseenter="enter('4972432646543922921');" onmouseout="out('4972432646543922921');" style=""> 505                  hf = createHeaderField(valueProperty, valueMd);                                                   </span>
<span class="465504053416102059" onmouseenter="enter('465504053416102059');" onmouseout="out('465504053416102059');" style=""> 506                  headerFields.add(hf);                                                                             </span>
<span class="-8637026344597097366" onmouseenter="enter('-8637026344597097366');" onmouseout="out('-8637026344597097366');" style=""> 507                  wrapper.getFields().add(constructFieldDTOFromFieldData(hf, valueMd));                             </span>
<span  style=""> 508                                                                                                                    </span>
<span class="-4161155795101164165" onmouseenter="enter('-4161155795101164165');" onmouseout="out('-4161155795101164165');" style=""> 509                  idProperty = &quot;key&quot;;                                                                               </span>
<span class="6613126032600711146" onmouseenter="enter('6613126032600711146');" onmouseout="out('6613126032600711146');" style=""> 510                  hideIdColumn = true;                                                                              </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 511              } else {                                                                                              </span>
<span class="3681854507729164346" onmouseenter="enter('3681854507729164346');" onmouseout="out('3681854507729164346');" style=""> 512                  for (Property p : cmd.getProperties()) {                                                          </span>
<span class="-1029066852878262358" onmouseenter="enter('-1029066852878262358');" onmouseout="out('-1029066852878262358');" style=""> 513                      if (p.getMetadata() instanceof BasicFieldMetadata) {                                          </span>
<span class="-941768582779766785" onmouseenter="enter('-941768582779766785');" onmouseout="out('-941768582779766785');" style=""> 514                          BasicFieldMetadata md = (BasicFieldMetadata) p.getMetadata();                             </span>
<span class="-8642867949481309577" onmouseenter="enter('-8642867949481309577');" onmouseout="out('-8642867949481309577');" style=""> 515                          String valueClassName = mmd.getValueClassName();                                          </span>
<span class="5979911607115189688" onmouseenter="enter('5979911607115189688');" onmouseout="out('5979911607115189688');" style=""> 516                          if (!StringUtils.isEmpty(mmd.getToOneTargetProperty())) {                                 </span>
<span class="-1482207026423407472" onmouseenter="enter('-1482207026423407472');" onmouseout="out('-1482207026423407472');" style=""> 517                              Class&lt;?&gt; clazz;                                                                       </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 518                              try {                                                                                 </span>
<span class="4641764173848337901" onmouseenter="enter('4641764173848337901');" onmouseout="out('4641764173848337901');" style=""> 519                                  clazz = Class.forName(mmd.getValueClassName());                                   </span>
<span class="1054888787890391626" onmouseenter="enter('1054888787890391626');" onmouseout="out('1054888787890391626');" style=""> 520                              } catch (ClassNotFoundException e) {                                                  </span>
<span class="-1035238313469204420" onmouseenter="enter('-1035238313469204420');" onmouseout="out('-1035238313469204420');" style=""> 521                                  throw ExceptionHelper.refineException(e);                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 522                              }                                                                                     </span>
<span class="-1735437066010488223" onmouseenter="enter('-1735437066010488223');" onmouseout="out('-1735437066010488223');" style=""><abbr title=" 523                              java.lang.reflect.Field nestedField = FieldManager.getSingleField(clazz, mmd.getToOneTargetProperty());"> 523                              java.lang.reflect.Field nestedField = FieldManager.getSingleField(clazz, mmd.getToOneTðŸ”µ</abbr></span>
<span class="-7513153605302333321" onmouseenter="enter('-7513153605302333321');" onmouseout="out('-7513153605302333321');" style=""> 524                              ManyToOne manyToOne = nestedField.getAnnotation(ManyToOne.class);                     </span>
<span class="3426777525282342717" onmouseenter="enter('3426777525282342717');" onmouseout="out('3426777525282342717');" style=""><abbr title=" 525                              if (manyToOne != null &amp;&amp; !manyToOne.targetEntity().getName().equals(void.class.getName())) {"> 525                              if (manyToOne != null &amp;&amp; !manyToOne.targetEntity().getName().equals(void.class.getNameðŸ”µ</abbr></span>
<span class="2472701616060797628" onmouseenter="enter('2472701616060797628');" onmouseout="out('2472701616060797628');" style=""> 526                                  valueClassName = manyToOne.targetEntity().getName();                              </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 527                              } else {                                                                              </span>
<span class="7605310444155773026" onmouseenter="enter('7605310444155773026');" onmouseout="out('7605310444155773026');" style=""> 528                                  OneToOne oneToOne = nestedField.getAnnotation(OneToOne.class);                    </span>
<span class="6473385945565798584" onmouseenter="enter('6473385945565798584');" onmouseout="out('6473385945565798584');" style=""><abbr title=" 529                                  if (oneToOne != null &amp;&amp; !oneToOne.targetEntity().getName().equals(void.class.getName())) {"> 529                                  if (oneToOne != null &amp;&amp; !oneToOne.targetEntity().getName().equals(void.class.getNaðŸ”µ</abbr></span>
<span class="-7479915108694096025" onmouseenter="enter('-7479915108694096025');" onmouseout="out('-7479915108694096025');" style=""> 530                                      valueClassName = oneToOne.targetEntity().getName();                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 531                                  }                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 532                              }                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 533                          }                                                                                         </span>
<span class="-5540922815730228658" onmouseenter="enter('-5540922815730228658');" onmouseout="out('-5540922815730228658');" style=""> 534                          if (md.getTargetClass().equals(valueClassName)) {                                         </span>
<span class="-3346338779761665081" onmouseenter="enter('-3346338779761665081');" onmouseout="out('-3346338779761665081');" style=""> 535                              if (md.isProminent() != null &amp;&amp; md.isProminent()                                      </span>
<span class="-8627428290755725902" onmouseenter="enter('-8627428290755725902');" onmouseout="out('-8627428290755725902');" style=""> 536                                      &amp;&amp; !ArrayUtils.contains(getGridHiddenVisibilities(), md.getVisibility())) {   </span>
<span class="8960496946946728749" onmouseenter="enter('8960496946946728749');" onmouseout="out('8960496946946728749');" style=""> 537                                  hf = createHeaderField(p, md);                                                    </span>
<span class="465504053416102059" onmouseenter="enter('465504053416102059');" onmouseout="out('465504053416102059');" style=""> 538                                  headerFields.add(hf);                                                             </span>
<span class="1435471691691453270" onmouseenter="enter('1435471691691453270');" onmouseout="out('1435471691691453270');" style=""> 539                                  defaultWrapperFields.add(constructFieldDTOFromFieldData(hf, md));                 </span>
<span  style=""> 540                                                                                                                    </span>
<span class="-5289673653677501347" onmouseenter="enter('-5289673653677501347');" onmouseout="out('-5289673653677501347');" style=""> 541                                  // Is this a media listgrid                                                       </span>
<span class="4853086335987625590" onmouseenter="enter('4853086335987625590');" onmouseout="out('4853086335987625590');" style=""> 542                                  if (hf.getFieldType().equals(&quot;ASSET_LOOKUP&quot;)) {                                   </span>
<span class="-8476912243297643828" onmouseenter="enter('-8476912243297643828');" onmouseout="out('-8476912243297643828');" style=""> 543                                      isMedia = true;                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 544                                  }                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 545                              }                                                                                     </span>
<span  style=""> 546                                                                                                                    </span>
<span class="2885325040802931258" onmouseenter="enter('2885325040802931258');" onmouseout="out('2885325040802931258');" style=""> 547                              if (md.getIsFilter() != null &amp;&amp; md.getIsFilter()) {                                   </span>
<span class="1044073206381351305" onmouseenter="enter('1044073206381351305');" onmouseout="out('1044073206381351305');" style=""> 548                                  wrapper.getFields().add(constructFieldDTOFromFieldData(hf,md));                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 549                              }                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 550                          }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 551                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 552                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 553              }                                                                                                     </span>
<span  style=""> 554                                                                                                                    </span>
<span class="1402378997093770695" onmouseenter="enter('1402378997093770695');" onmouseout="out('1402378997093770695');" style=""> 555              type = ListGrid.Type.MAP;                                                                             </span>
<span class="-5907191702643786371" onmouseenter="enter('-5907191702643786371');" onmouseout="out('-5907191702643786371');" style=""> 556              editable = true;                                                                                      </span>
<span class="8307590133204211823" onmouseenter="enter('8307590133204211823');" onmouseout="out('8307590133204211823');" style=""> 557              canFilterAndSort = false;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 558          }                                                                                                         </span>
<span  style=""> 559                                                                                                                    </span>
<span class="4544421216027686155" onmouseenter="enter('4544421216027686155');" onmouseout="out('4544421216027686155');" style=""> 560          String ceilingType = &quot;&quot;;                                                                                  </span>
<span class="9198797156358178451" onmouseenter="enter('9198797156358178451');" onmouseout="out('9198797156358178451');" style=""> 561          if (fmd instanceof BasicFieldMetadata) {                                                                  </span>
<span class="7794440236473789134" onmouseenter="enter('7794440236473789134');" onmouseout="out('7794440236473789134');" style=""> 562              ceilingType = cmd.getCeilingType();                                                                   </span>
<span class="3746105937327671455" onmouseenter="enter('3746105937327671455');" onmouseout="out('3746105937327671455');" style=""> 563          } else if (fmd instanceof CollectionMetadata) {                                                           </span>
<span class="958831769715126463" onmouseenter="enter('958831769715126463');" onmouseout="out('958831769715126463');" style=""> 564              ceilingType = ((CollectionMetadata) fmd).getCollectionCeilingEntity();                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 565          }                                                                                                         </span>
<span  style=""> 566                                                                                                                    </span>
<span class="5585496722375029284" onmouseenter="enter('5585496722375029284');" onmouseout="out('5585496722375029284');" style=""> 567          if (CollectionUtils.isEmpty(headerFields)) {                                                              </span>
<span class="-3348290953650583379" onmouseenter="enter('-3348290953650583379');" onmouseout="out('-3348290953650583379');" style=""><abbr title=" 568              String message = &quot;There are no listgrid header fields configured for the class &quot; + ceilingType + &quot; and property &#x27;&quot; +"> 568              String message = &quot;There are no listgrid header fields configured for the class &quot; + ceilingType + &quot; andðŸ”µ</abbr></span>
<span class="7723961843711254229" onmouseenter="enter('7723961843711254229');" onmouseout="out('7723961843711254229');" style=""> 569                      StringUtil.sanitize(field.getName()) + &quot;&#x27;.&quot;;                                                  </span>
<span class="-8247546196580792399" onmouseenter="enter('-8247546196580792399');" onmouseout="out('-8247546196580792399');" style=""> 570              if (selectize &amp;&amp; (type == ListGrid.Type.ADORNED || type == ListGrid.Type.ADORNED_WITH_FORM)) {        </span>
<span class="3128472952734575237" onmouseenter="enter('3128472952734575237');" onmouseout="out('3128472952734575237');" style=""><abbr title=" 571                  message += &quot; Please configure &#x27;selectizeVisibleField&#x27; in your @AdminPresentationAdornedTargetCollection configuration&quot;;"> 571                  message += &quot; Please configure &#x27;selectizeVisibleField&#x27; in your @AdminPresentationAdornedTargetColleðŸ”µ</abbr></span>
<span class="8636226295625239860" onmouseenter="enter('8636226295625239860');" onmouseout="out('8636226295625239860');" style=""> 572              } else if (type == ListGrid.Type.ADORNED || type == ListGrid.Type.ADORNED_WITH_FORM) {                </span>
<span class="2402628808600951472" onmouseenter="enter('2402628808600951472');" onmouseout="out('2402628808600951472');" style=""><abbr title=" 573                  message += &quot; Please configure &#x27;gridVisibleFields&#x27; in your @AdminPresentationAdornedTargetCollection configuration&quot;;"> 573                  message += &quot; Please configure &#x27;gridVisibleFields&#x27; in your @AdminPresentationAdornedTargetCollectioðŸ”µ</abbr></span>
<span class="-9137226596697213695" onmouseenter="enter('-9137226596697213695');" onmouseout="out('-9137226596697213695');" style=""> 574              } else if (selectize &amp;&amp; type == ListGrid.Type.BASIC) {                                                </span>
<span class="-3735757397027600216" onmouseenter="enter('-3735757397027600216');" onmouseout="out('-3735757397027600216');" style=""><abbr title=" 575                  message += &quot; Please configure &#x27;selectizeVisibleField&#x27; in your @AdminPresentationCollection configuration&quot;;"> 575                  message += &quot; Please configure &#x27;selectizeVisibleField&#x27; in your @AdminPresentationCollection configuðŸ”µ</abbr></span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 576              } else {                                                                                              </span>
<span class="-6242089898795718984" onmouseenter="enter('-6242089898795718984');" onmouseout="out('-6242089898795718984');" style=""> 577                  message += &quot; Please mark some @AdminPresentation fields with &#x27;prominent = true&#x27;&quot;;                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 578              }                                                                                                     </span>
<span class="683988342023046623" onmouseenter="enter('683988342023046623');" onmouseout="out('683988342023046623');" style=""> 579              LOG.error(message);                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 580          }                                                                                                         </span>
<span  style=""> 581                                                                                                                    </span>
<span class="8018024767617726350" onmouseenter="enter('8018024767617726350');" onmouseout="out('8018024767617726350');" style=""><abbr title=" 582          ListGrid listGrid = createListGrid(ceilingType, headerFields, type, drs, sectionKey, fmd.getOrder(), idProperty, sectionCrumbs, sortProperty);"> 582          ListGrid listGrid = createListGrid(ceilingType, headerFields, type, drs, sectionKey, fmd.getOrder(), idProðŸ”µ</abbr></span>
<span class="-8260607636786156523" onmouseenter="enter('-8260607636786156523');" onmouseout="out('-8260607636786156523');" style=""> 583          listGrid.setSubCollectionFieldName(field.getName());                                                      </span>
<span class="6077403992574006974" onmouseenter="enter('6077403992574006974');" onmouseout="out('6077403992574006974');" style=""> 584          listGrid.setFriendlyName(field.getMetadata().getFriendlyName());                                          </span>
<span class="7905107023107584311" onmouseenter="enter('7905107023107584311');" onmouseout="out('7905107023107584311');" style=""> 585          if (StringUtils.isEmpty(listGrid.getFriendlyName())) {                                                    </span>
<span class="7450505976451149249" onmouseenter="enter('7450505976451149249');" onmouseout="out('7450505976451149249');" style=""> 586              listGrid.setFriendlyName(field.getName());                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 587          }                                                                                                         </span>
<span class="4004853909217037199" onmouseenter="enter('4004853909217037199');" onmouseout="out('4004853909217037199');" style=""> 588          listGrid.setContainingEntityId(containingEntityId);                                                       </span>
<span class="5941008318995473126" onmouseenter="enter('5941008318995473126');" onmouseout="out('5941008318995473126');" style=""> 589          listGrid.setIsReadOnly(readOnly);                                                                         </span>
<span class="5221697846686143736" onmouseenter="enter('5221697846686143736');" onmouseout="out('5221697846686143736');" style=""> 590          listGrid.setHideIdColumn(hideIdColumn);                                                                   </span>
<span class="103202019101048665" onmouseenter="enter('103202019101048665');" onmouseout="out('103202019101048665');" style=""> 591          listGrid.setCanFilterAndSort(canFilterAndSort);                                                           </span>
<span  style=""> 592                                                                                                                    </span>
<span class="2615168876841014995" onmouseenter="enter('2615168876841014995');" onmouseout="out('2615168876841014995');" style=""> 593          // Set up the filter builder params                                                                       </span>
<span class="1067693587814186246" onmouseenter="enter('1067693587814186246');" onmouseout="out('1067693587814186246');" style=""> 594          Date c = new Date();                                                                                      </span>
<span class="7632548446248454393" onmouseenter="enter('7632548446248454393');" onmouseout="out('7632548446248454393');" style=""> 595          String friendlyName = field.getMetadata().getFriendlyName();                                              </span>
<span class="-1543374359693074653" onmouseenter="enter('-1543374359693074653');" onmouseout="out('-1543374359693074653');" style=""> 596          String jsonFriendlyName = friendlyName.replaceAll(&quot; &quot;, &quot;_&quot;);                                              </span>
<span class="-5194767828410940587" onmouseenter="enter('-5194767828410940587');" onmouseout="out('-5194767828410940587');" style=""> 597          listGrid.setJsonFieldName(jsonFriendlyName + c.getTime() + &quot;Json&quot;);                                       </span>
<span class="6488323689834765207" onmouseenter="enter('6488323689834765207');" onmouseout="out('6488323689834765207');" style=""> 598          listGrid.setFriendlyName(friendlyName);                                                                   </span>
<span class="-4532597237542010033" onmouseenter="enter('-4532597237542010033');" onmouseout="out('-4532597237542010033');" style=""> 599          listGrid.setFieldBuilder(&quot;RULE_SIMPLE&quot;);                                                                  </span>
<span class="2366326534416496613" onmouseenter="enter('2366326534416496613');" onmouseout="out('2366326534416496613');" style=""> 600          if (CollectionUtils.isEmpty(wrapper.getFields())) {                                                       </span>
<span class="532531496111421469" onmouseenter="enter('532531496111421469');" onmouseout="out('532531496111421469');" style=""> 601              wrapper.setFields(defaultWrapperFields);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 602          }                                                                                                         </span>
<span class="8083895692807517727" onmouseenter="enter('8083895692807517727');" onmouseout="out('8083895692807517727');" style=""> 603          listGrid.setFieldWrapper(wrapper);                                                                        </span>
<span  style=""> 604                                                                                                                    </span>
<span class="4466331963824990789" onmouseenter="enter('4466331963824990789');" onmouseout="out('4466331963824990789');" style=""> 605          String blankJsonString =  &quot;{\&quot;data\&quot;:[]}&quot;;                                                                </span>
<span class="7445610059504327235" onmouseenter="enter('7445610059504327235');" onmouseout="out('7445610059504327235');" style=""> 606          listGrid.setJson(blankJsonString);                                                                        </span>
<span class="-6647315222721447684" onmouseenter="enter('-6647315222721447684');" onmouseout="out('-6647315222721447684');" style=""> 607          DataWrapper dw = convertJsonToDataWrapper(blankJsonString);                                               </span>
<span class="-3408161092817379645" onmouseenter="enter('-3408161092817379645');" onmouseout="out('-3408161092817379645');" style=""> 608          if (dw != null) {                                                                                         </span>
<span class="-933372440492481068" onmouseenter="enter('-933372440492481068');" onmouseout="out('-933372440492481068');" style=""> 609              listGrid.setDataWrapper(dw);                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 610          }                                                                                                         </span>
<span  style=""> 611                                                                                                                    </span>
<span class="-1934188124142515927" onmouseenter="enter('-1934188124142515927');" onmouseout="out('-1934188124142515927');" style=""> 612          if (editable) {                                                                                           </span>
<span class="-8324356505432784037" onmouseenter="enter('-8324356505432784037');" onmouseout="out('-8324356505432784037');" style=""> 613              listGrid.getRowActions().add(DefaultListGridActions.UPDATE);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 614          }                                                                                                         </span>
<span class="7378462715957185244" onmouseenter="enter('7378462715957185244');" onmouseout="out('7378462715957185244');" style=""> 615          if (readOnly) {                                                                                           </span>
<span class="-5818500246922120128" onmouseenter="enter('-5818500246922120128');" onmouseout="out('-5818500246922120128');" style=""> 616              listGrid.getRowActions().add(DefaultListGridActions.VIEW);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 617          }                                                                                                         </span>
<span class="5410259152944409683" onmouseenter="enter('5410259152944409683');" onmouseout="out('5410259152944409683');" style=""> 618          if (sortable) {                                                                                           </span>
<span class="-607660971412807673" onmouseenter="enter('-607660971412807673');" onmouseout="out('-607660971412807673');" style=""> 619              listGrid.setCanFilterAndSort(false);                                                                  </span>
<span class="4388200762412113532" onmouseenter="enter('4388200762412113532');" onmouseout="out('4388200762412113532');" style=""> 620              listGrid.setIsSortable(true);                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 621          }                                                                                                         </span>
<span  style=""> 622                                                                                                                    </span>
<span class="-4128949180761209250" onmouseenter="enter('-4128949180761209250');" onmouseout="out('-4128949180761209250');" style=""> 623          if (modalSingleSelectable) {                                                                              </span>
<span class="7378462715957185244" onmouseenter="enter('7378462715957185244');" onmouseout="out('7378462715957185244');" style=""> 624              if (readOnly) {                                                                                       </span>
<span class="876416575304580897" onmouseenter="enter('876416575304580897');" onmouseout="out('876416575304580897');" style=""><abbr title=" 625                  listGrid.addModalRowAction(DefaultListGridActions.SINGLE_SELECT.clone().withForListGridReadOnly(true));"> 625                  listGrid.addModalRowAction(DefaultListGridActions.SINGLE_SELECT.clone().withForListGridReadOnly(trðŸ”µ</abbr></span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 626              } else {                                                                                              </span>
<span class="2808273481648426142" onmouseenter="enter('2808273481648426142');" onmouseout="out('2808273481648426142');" style=""> 627                  listGrid.addModalRowAction(DefaultListGridActions.SINGLE_SELECT);                                 </span>
<span  style=""> 628                                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 629              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 630          }                                                                                                         </span>
<span class="-7419173722157864798" onmouseenter="enter('-7419173722157864798');" onmouseout="out('-7419173722157864798');" style=""> 631          listGrid.setSelectType(ListGrid.SelectType.SINGLE_SELECT);                                                </span>
<span  style=""> 632                                                                                                                    </span>
<span class="4421519193138811338" onmouseenter="enter('4421519193138811338');" onmouseout="out('4421519193138811338');" style=""> 633          if (selectize) {                                                                                          </span>
<span class="4330210937183071205" onmouseenter="enter('4330210937183071205');" onmouseout="out('4330210937183071205');" style=""> 634              listGrid.setSelectizeUrl(buildSelectizeUrl(listGrid));                                                </span>
<span class="-6778616649865275600" onmouseenter="enter('-6778616649865275600');" onmouseout="out('-6778616649865275600');" style=""> 635              listGrid.setSelectType(ListGrid.SelectType.SELECTIZE);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 636          }                                                                                                         </span>
<span  style=""> 637                                                                                                                    </span>
<span class="-318424289412267832" onmouseenter="enter('-318424289412267832');" onmouseout="out('-318424289412267832');" style=""> 638          if (modalMultiSelectable) {                                                                               </span>
<span class="-2076946817204501330" onmouseenter="enter('-2076946817204501330');" onmouseout="out('-2076946817204501330');" style=""> 639              listGrid.addModalRowAction(DefaultListGridActions.MULTI_SELECT);                                      </span>
<span class="7572617953044326144" onmouseenter="enter('7572617953044326144');" onmouseout="out('7572617953044326144');" style=""> 640              listGrid.setSelectType(ListGrid.SelectType.MULTI_SELECT);                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 641          }                                                                                                         </span>
<span class="-8712474510741391938" onmouseenter="enter('-8712474510741391938');" onmouseout="out('-8712474510741391938');" style=""> 642          listGrid.getRowActions().add(DefaultListGridActions.REMOVE);                                              </span>
<span  style=""> 643                                                                                                                    </span>
<span class="5224232002379484564" onmouseenter="enter('5224232002379484564');" onmouseout="out('5224232002379484564');" style=""> 644          if (fmd.getManualFetch()) {                                                                               </span>
<span class="-9107723200038018431" onmouseenter="enter('-9107723200038018431');" onmouseout="out('-9107723200038018431');" style=""> 645              listGrid.setManualFetch(true);                                                                        </span>
<span class="-1990881339892073084" onmouseenter="enter('-1990881339892073084');" onmouseout="out('-1990881339892073084');" style=""> 646              listGrid.getToolbarActions().add(DefaultListGridActions.MANUAL_FETCH);                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 647          }                                                                                                         </span>
<span class="963954107021870727" onmouseenter="enter('963954107021870727');" onmouseout="out('963954107021870727');" style=""> 648          if (isMedia) {                                                                                            </span>
<span class="8560894537765048923" onmouseenter="enter('8560894537765048923');" onmouseout="out('8560894537765048923');" style=""> 649              listGrid.setListGridType(ListGrid.Type.ASSET_GRID);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 650          }                                                                                                         </span>
<span  style=""> 651                                                                                                                    </span>
<span class="-5511350038403165520" onmouseenter="enter('-5511350038403165520');" onmouseout="out('-5511350038403165520');" style=""> 652          extensionManager.getProxy().modifyListGrid(listGrid.getClassName(), listGrid);                            </span>
<span  style=""> 653                                                                                                                    </span>
<span class="-1010311312628539836" onmouseenter="enter('-1010311312628539836');" onmouseout="out('-1010311312628539836');" style=""><abbr title=" 654          //If someone has replaced RowLevelSecurityService, check here to make sure the replacement implements the expected interface"> 654          //If someone has replaced RowLevelSecurityService, check here to make sure the replacement implements the ðŸ”µ</abbr></span>
<span class="8968842492276656547" onmouseenter="enter('8968842492276656547');" onmouseout="out('8968842492276656547');" style=""> 655          if (rowLevelSecurityService instanceof ExceptionAwareRowLevelSecurityProvider) {                          </span>
<span class="2057574043580690918" onmouseenter="enter('2057574043580690918');" onmouseout="out('2057574043580690918');" style=""><abbr title=" 656              EntityFormModifierConfiguration entityFormModifierConfiguration = ((ExceptionAwareRowLevelSecurityProvider) rowLevelSecurityService).getUpdateDenialExceptions();"> 656              EntityFormModifierConfiguration entityFormModifierConfiguration = ((ExceptionAwareRowLevelSecurityProvðŸ”µ</abbr></span>
<span class="-3023990582845647391" onmouseenter="enter('-3023990582845647391');" onmouseout="out('-3023990582845647391');" style=""><abbr title=" 657              for (EntityFormModifierData&lt;EntityFormModifierDataPoint&gt; data : entityFormModifierConfiguration.getData()) {"> 657              for (EntityFormModifierData&lt;EntityFormModifierDataPoint&gt; data : entityFormModifierConfiguration.getDatðŸ”µ</abbr></span>
<span class="9148632731325481398" onmouseenter="enter('9148632731325481398');" onmouseout="out('9148632731325481398');" style=""> 658                  for (EntityFormModifier modifier : entityFormModifierConfiguration.getModifier()) {               </span>
<span class="7131836139928065231" onmouseenter="enter('7131836139928065231');" onmouseout="out('7131836139928065231');" style=""> 659                      if (modifier.isQualified(data.getModifierType())) {                                           </span>
<span class="-3065342187112967306" onmouseenter="enter('-3065342187112967306');" onmouseout="out('-3065342187112967306');" style=""> 660                          modifier.modifyListGrid(new EntityFormModifierRequest()                                   </span>
<span class="118085653176366406" onmouseenter="enter('118085653176366406');" onmouseout="out('118085653176366406');" style=""> 661                                  .withListGrid(listGrid)                                                           </span>
<span class="-1014541830042934633" onmouseenter="enter('-1014541830042934633');" onmouseout="out('-1014541830042934633');" style=""> 662                                  .withConfiguration(data)                                                          </span>
<span class="-7538620272607121359" onmouseenter="enter('-7538620272607121359');" onmouseout="out('-7538620272607121359');" style=""> 663                                  .withCurrentUser(adminRemoteSecurityService.getPersistentAdminUser())             </span>
<span class="680994463596247300" onmouseenter="enter('680994463596247300');" onmouseout="out('680994463596247300');" style=""> 664                                  .withRowLevelSecurityService(rowLevelSecurityService));                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 665                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 666                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 667              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 668          }                                                                                                         </span>
<span class="8338561479600990216" onmouseenter="enter('8338561479600990216');" onmouseout="out('8338561479600990216');" style=""> 669          return listGrid;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 670      }                                                                                                             </span>
<span  style=""> 671                                                                                                                    </span>
<span class="1351139520445861423" onmouseenter="enter('1351139520445861423');" onmouseout="out('1351139520445861423');" style=""> 672      protected String getMapKeyFriendlyName(Property property) {                                                   </span>
<span class="5871990330597606657" onmouseenter="enter('5871990330597606657');" onmouseout="out('5871990330597606657');" style=""> 673          String friendlyNameFromMetadata = property.getMetadata().getFriendlyName();                               </span>
<span  style=""> 674                                                                                                                    </span>
<span class="3779076262581559101" onmouseenter="enter('3779076262581559101');" onmouseout="out('3779076262581559101');" style=""> 675          return (friendlyNameFromMetadata == null) ? &quot;Key&quot; : friendlyNameFromMetadata;                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 676      }                                                                                                             </span>
<span  style=""> 677                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 678      @Override                                                                                                     </span>
<span class="-1413517427251419025" onmouseenter="enter('-1413517427251419025');" onmouseout="out('-1413517427251419025');" style=""><abbr title=" 679      public Map&lt;String, Object&gt; buildSelectizeCollectionInfo(String containingEntityId, DynamicResultSet drs, Property field,"> 679      public Map&lt;String, Object&gt; buildSelectizeCollectionInfo(String containingEntityId, DynamicResultSet drs, PropeðŸ”µ</abbr></span>
<span class="8976903068062443392" onmouseenter="enter('8976903068062443392');" onmouseout="out('8976903068062443392');" style=""> 680          String sectionKey, List&lt;SectionCrumb&gt; sectionCrumbs)                                                      </span>
<span class="1998458335829271558" onmouseenter="enter('1998458335829271558');" onmouseout="out('1998458335829271558');" style=""> 681              throws ServiceException {                                                                             </span>
<span class="3501499603601527305" onmouseenter="enter('3501499603601527305');" onmouseout="out('3501499603601527305');" style=""> 682          FieldMetadata fmd = field.getMetadata();                                                                  </span>
<span class="6565595844041240946" onmouseenter="enter('6565595844041240946');" onmouseout="out('6565595844041240946');" style=""> 683          // Get the class metadata for this particular field                                                       </span>
<span class="-8834884127458938753" onmouseenter="enter('-8834884127458938753');" onmouseout="out('-8834884127458938753');" style=""> 684          PersistencePackageRequest ppr = PersistencePackageRequest.fromMetadata(fmd, sectionCrumbs);               </span>
<span class="-470699824173107204" onmouseenter="enter('-470699824173107204');" onmouseout="out('-470699824173107204');" style=""> 685          if (field != null) {                                                                                      </span>
<span class="8971896145704334353" onmouseenter="enter('8971896145704334353');" onmouseout="out('8971896145704334353');" style=""> 686              ppr.setSectionEntityField(field.getName());                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 687          }                                                                                                         </span>
<span class="1142804962458743647" onmouseenter="enter('1142804962458743647');" onmouseout="out('1142804962458743647');" style=""> 688          ClassMetadata cmd = adminEntityService.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();    </span>
<span  style=""> 689                                                                                                                    </span>
<span class="-5595331836292860562" onmouseenter="enter('-5595331836292860562');" onmouseout="out('-5595331836292860562');" style=""> 690          Map&lt;String, Object&gt; result = constructSelectizeOptionMap(drs, cmd);                                       </span>
<span  style=""> 691                                                                                                                    </span>
<span class="-1689031862376375101" onmouseenter="enter('-1689031862376375101');" onmouseout="out('-1689031862376375101');" style=""> 692          AdornedTargetList adornedList = ppr.getAdornedList();                                                     </span>
<span class="4210226056962324596" onmouseenter="enter('4210226056962324596');" onmouseout="out('4210226056962324596');" style=""> 693          if (adornedList != null &amp;&amp; adornedList.getLinkedObjectPath() != null                                      </span>
<span class="-5584956232917922083" onmouseenter="enter('-5584956232917922083');" onmouseout="out('-5584956232917922083');" style=""> 694              &amp;&amp; adornedList.getTargetObjectPath() != null &amp;&amp; adornedList.getLinkedIdProperty() != null             </span>
<span class="8487613505903596752" onmouseenter="enter('8487613505903596752');" onmouseout="out('8487613505903596752');" style=""> 695              &amp;&amp; adornedList.getTargetIdProperty() != null) {                                                       </span>
<span class="7309159037806205694" onmouseenter="enter('7309159037806205694');" onmouseout="out('7309159037806205694');" style=""><abbr title=" 696              result.put(&quot;linkedObjectPath&quot;, adornedList.getLinkedObjectPath() + &quot;.&quot; + adornedList.getLinkedIdProperty());"> 696              result.put(&quot;linkedObjectPath&quot;, adornedList.getLinkedObjectPath() + &quot;.&quot; + adornedList.getLinkedIdProperðŸ”µ</abbr></span>
<span class="-6077713782492983195" onmouseenter="enter('-6077713782492983195');" onmouseout="out('-6077713782492983195');" style=""> 697              result.put(&quot;linkedObjectId&quot;, containingEntityId);                                                     </span>
<span class="3248709869136196767" onmouseenter="enter('3248709869136196767');" onmouseout="out('3248709869136196767');" style=""><abbr title=" 698              result.put(&quot;targetObjectPath&quot;, adornedList.getTargetObjectPath() + &quot;.&quot; + adornedList.getTargetIdProperty());"> 698              result.put(&quot;targetObjectPath&quot;, adornedList.getTargetObjectPath() + &quot;.&quot; + adornedList.getTargetIdProperðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 699          }                                                                                                         </span>
<span  style=""> 700                                                                                                                    </span>
<span class="-6419540350677864751" onmouseenter="enter('-6419540350677864751');" onmouseout="out('-6419540350677864751');" style=""> 701          return result;                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 702      }                                                                                                             </span>
<span  style=""> 703                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 704      @Override                                                                                                     </span>
<span class="6193659363548015244" onmouseenter="enter('6193659363548015244');" onmouseout="out('6193659363548015244');" style=""> 705      public Map&lt;String, Object&gt; constructSelectizeOptionMap(DynamicResultSet drs, ClassMetadata cmd) {             </span>
<span class="-2547625323269156657" onmouseenter="enter('-2547625323269156657');" onmouseout="out('-2547625323269156657');" style=""> 706          Map&lt;String, Object&gt; result = new HashMap&lt;&gt;();                                                             </span>
<span class="-1525294692883767948" onmouseenter="enter('-1525294692883767948');" onmouseout="out('-1525294692883767948');" style=""> 707          List&lt;Map&lt;String, String&gt;&gt; options = new ArrayList&lt;&gt;();                                                    </span>
<span  style=""> 708                                                                                                                    </span>
<span class="-7098425003691580554" onmouseenter="enter('-7098425003691580554');" onmouseout="out('-7098425003691580554');" style=""> 709          List&lt;Field&gt; headerFields = new ArrayList&lt;&gt;();                                                             </span>
<span class="3681854507729164346" onmouseenter="enter('3681854507729164346');" onmouseout="out('3681854507729164346');" style=""> 710          for (Property p : cmd.getProperties()) {                                                                  </span>
<span class="-1029066852878262358" onmouseenter="enter('-1029066852878262358');" onmouseout="out('-1029066852878262358');" style=""> 711              if (p.getMetadata() instanceof BasicFieldMetadata) {                                                  </span>
<span class="-941768582779766785" onmouseenter="enter('-941768582779766785');" onmouseout="out('-941768582779766785');" style=""> 712                  BasicFieldMetadata md = (BasicFieldMetadata) p.getMetadata();                                     </span>
<span class="-3346338779761665081" onmouseenter="enter('-3346338779761665081');" onmouseout="out('-3346338779761665081');" style=""> 713                  if (md.isProminent() != null &amp;&amp; md.isProminent()                                                  </span>
<span class="-8627428290755725902" onmouseenter="enter('-8627428290755725902');" onmouseout="out('-8627428290755725902');" style=""> 714                          &amp;&amp; !ArrayUtils.contains(getGridHiddenVisibilities(), md.getVisibility())) {               </span>
<span class="-1913804071468350989" onmouseenter="enter('-1913804071468350989');" onmouseout="out('-1913804071468350989');" style=""> 715                      Field hf = createHeaderField(p, md);                                                          </span>
<span class="465504053416102059" onmouseenter="enter('465504053416102059');" onmouseout="out('465504053416102059');" style=""> 716                      headerFields.add(hf);                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 717                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 718              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 719          }                                                                                                         </span>
<span  style=""> 720                                                                                                                    </span>
<span class="-5517026699518874938" onmouseenter="enter('-5517026699518874938');" onmouseout="out('-5517026699518874938');" style=""> 721          for (Entity e : drs.getRecords()) {                                                                       </span>
<span class="-6136638466040784110" onmouseenter="enter('-6136638466040784110');" onmouseout="out('-6136638466040784110');" style=""> 722              Map&lt;String, String&gt; selectizeOption = new HashMap&lt;&gt;();                                                </span>
<span class="4163901938958293625" onmouseenter="enter('4163901938958293625');" onmouseout="out('4163901938958293625');" style=""> 723              for (Field headerField : headerFields) {                                                              </span>
<span class="5027179794052216178" onmouseenter="enter('5027179794052216178');" onmouseout="out('5027179794052216178');" style=""> 724                  Property p = e.findProperty(headerField.getName());                                               </span>
<span class="-4724213940983805674" onmouseenter="enter('-4724213940983805674');" onmouseout="out('-4724213940983805674');" style=""> 725                  if (p != null) {                                                                                  </span>
<span class="4028188550890348466" onmouseenter="enter('4028188550890348466');" onmouseout="out('4028188550890348466');" style=""> 726                      selectizeOption.put(&quot;name&quot;, p.getValue());                                                    </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 727                      break;                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 728                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 729              }                                                                                                     </span>
<span class="842570185536784204" onmouseenter="enter('842570185536784204');" onmouseout="out('842570185536784204');" style=""> 730              if (e.findProperty(&quot;id&quot;) != null) {                                                                   </span>
<span class="1619295801241413088" onmouseenter="enter('1619295801241413088');" onmouseout="out('1619295801241413088');" style=""> 731                  selectizeOption.put(&quot;id&quot;, e.findProperty(&quot;id&quot;).getValue());                                       </span>
<span class="-5830252244987930005" onmouseenter="enter('-5830252244987930005');" onmouseout="out('-5830252244987930005');" style=""> 732              //  &quot;Locale&quot; entity is a special occasion. Because it have not &quot;ID&quot; column with &quot;Long&quot; type           </span>
<span class="4697280149551476993" onmouseenter="enter('4697280149551476993');" onmouseout="out('4697280149551476993');" style=""> 733              } else if (e.findProperty(&quot;localeCode&quot;) != null) {                                                    </span>
<span class="7405190492767879460" onmouseenter="enter('7405190492767879460');" onmouseout="out('7405190492767879460');" style=""> 734                  selectizeOption.put(&quot;id&quot;, e.findProperty(&quot;localeCode&quot;).getValue());                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 735              }                                                                                                     </span>
<span class="-7996413909894304887" onmouseenter="enter('-7996413909894304887');" onmouseout="out('-7996413909894304887');" style=""> 736              if (e.findProperty(ALTERNATE_ID_PROPERTY) != null) {                                                  </span>
<span class="-2834809076191022214" onmouseenter="enter('-2834809076191022214');" onmouseout="out('-2834809076191022214');" style=""> 737                  selectizeOption.put(&quot;alternateId&quot;, e.findProperty(ALTERNATE_ID_PROPERTY).getValue());             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 738              }                                                                                                     </span>
<span class="2407499722406116097" onmouseenter="enter('2407499722406116097');" onmouseout="out('2407499722406116097');" style=""> 739              options.add(selectizeOption);                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 740          }                                                                                                         </span>
<span class="-7448816453305947647" onmouseenter="enter('-7448816453305947647');" onmouseout="out('-7448816453305947647');" style=""> 741          result.put(&quot;options&quot;, options);                                                                           </span>
<span  style=""> 742                                                                                                                    </span>
<span class="-6419540350677864751" onmouseenter="enter('-6419540350677864751');" onmouseout="out('-6419540350677864751');" style=""> 743          return result;                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 744      }                                                                                                             </span>
<span  style=""> 745                                                                                                                    </span>
<span class="3610563618424293176" onmouseenter="enter('3610563618424293176');" onmouseout="out('3610563618424293176');" style=""> 746      protected String buildSelectizeUrl(ListGrid listGrid) {                                                       </span>
<span class="4360254575720880810" onmouseenter="enter('4360254575720880810');" onmouseout="out('4360254575720880810');" style=""> 747          HttpServletRequest request = BroadleafRequestContext.getBroadleafRequestContext().getRequest();           </span>
<span class="-1223345315803337981" onmouseenter="enter('-1223345315803337981');" onmouseout="out('-1223345315803337981');" style=""> 748          String url = request.getContextPath();                                                                    </span>
<span class="-5859217039633283919" onmouseenter="enter('-5859217039633283919');" onmouseout="out('-5859217039633283919');" style=""><abbr title=" 749          url += url.endsWith(&quot;/&quot;) || listGrid.getSectionKey().startsWith(&quot;/&quot;) ? listGrid.getSectionKey() : &quot;/&quot; + listGrid.getSectionKey();"> 749          url += url.endsWith(&quot;/&quot;) || listGrid.getSectionKey().startsWith(&quot;/&quot;) ? listGrid.getSectionKey() : &quot;/&quot; + liðŸ”µ</abbr></span>
<span class="5990790066724047703" onmouseenter="enter('5990790066724047703');" onmouseout="out('5990790066724047703');" style=""> 750          url += &quot;/&quot; + listGrid.getContainingEntityId();                                                            </span>
<span class="-5189302616019367476" onmouseenter="enter('-5189302616019367476');" onmouseout="out('-5189302616019367476');" style=""> 751          url += &quot;/&quot; + listGrid.getSubCollectionFieldName();                                                        </span>
<span class="6645977004086329618" onmouseenter="enter('6645977004086329618');" onmouseout="out('6645977004086329618');" style=""> 752          return url;                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 753      }                                                                                                             </span>
<span  style=""> 754                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 755      /**                                                                                                           </span>
<span class="-3142901546145506196" onmouseenter="enter('-3142901546145506196');" onmouseout="out('-3142901546145506196');" style=""><abbr title=" 756       * @deprecated use {@link #createListGrid(String, List, ListGrid.Type, DynamicResultSet, String, Integer, String, List, String)}"> 756       * @deprecated use {@link #createListGrid(String, List, ListGrid.Type, DynamicResultSet, String, Integer, StriðŸ”µ</abbr></span>
<span class="3292690528203019011" onmouseenter="enter('3292690528203019011');" onmouseout="out('3292690528203019011');" style=""> 757       * @param className                                                                                           </span>
<span class="5783752320936502160" onmouseenter="enter('5783752320936502160');" onmouseout="out('5783752320936502160');" style=""> 758       * @param headerFields                                                                                        </span>
<span class="4180172247960880324" onmouseenter="enter('4180172247960880324');" onmouseout="out('4180172247960880324');" style=""> 759       * @param type                                                                                                </span>
<span class="-7324022876786324498" onmouseenter="enter('-7324022876786324498');" onmouseout="out('-7324022876786324498');" style=""> 760       * @param drs                                                                                                 </span>
<span class="7403666429378321004" onmouseenter="enter('7403666429378321004');" onmouseout="out('7403666429378321004');" style=""> 761       * @param sectionKey                                                                                          </span>
<span class="6414796960983960786" onmouseenter="enter('6414796960983960786');" onmouseout="out('6414796960983960786');" style=""> 762       * @param order                                                                                               </span>
<span class="-2237647657818576638" onmouseenter="enter('-2237647657818576638');" onmouseout="out('-2237647657818576638');" style=""> 763       * @param idProperty                                                                                          </span>
<span class="6383674454506135847" onmouseenter="enter('6383674454506135847');" onmouseout="out('6383674454506135847');" style=""> 764       * @param sectionCrumbs                                                                                       </span>
<span class="-9165797340485297481" onmouseenter="enter('-9165797340485297481');" onmouseout="out('-9165797340485297481');" style=""> 765       * @return                                                                                                    </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 766       */                                                                                                           </span>
<span class="-9122364098618956613" onmouseenter="enter('-9122364098618956613');" onmouseout="out('-9122364098618956613');" style=""> 767      @Deprecated                                                                                                   </span>
<span class="4478013600751804718" onmouseenter="enter('4478013600751804718');" onmouseout="out('4478013600751804718');" style=""><abbr title=" 768      protected ListGrid createListGrid(String className, List&lt;Field&gt; headerFields, ListGrid.Type type, DynamicResultSet drs,"> 768      protected ListGrid createListGrid(String className, List&lt;Field&gt; headerFields, ListGrid.Type type, DynamicResulðŸ”µ</abbr></span>
<span class="-2475961144071468437" onmouseenter="enter('-2475961144071468437');" onmouseout="out('-2475961144071468437');" style=""> 769              String sectionKey, int order, String idProperty, List&lt;SectionCrumb&gt; sectionCrumbs) {                  </span>
<span class="-7836467015459082374" onmouseenter="enter('-7836467015459082374');" onmouseout="out('-7836467015459082374');" style=""> 770         return createListGrid(className,headerFields,type,drs,sectionKey,order,idProperty,sectionCrumbs,null);     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 771      }                                                                                                             </span>
<span  style=""> 772                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 773      /**                                                                                                           </span>
<span class="-6553954062731574601" onmouseenter="enter('-6553954062731574601');" onmouseout="out('-6553954062731574601');" style=""> 774       * Populate a ListGrid with ListGridRecords.                                                                  </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 775       *                                                                                                            </span>
<span class="3292690528203019011" onmouseenter="enter('3292690528203019011');" onmouseout="out('3292690528203019011');" style=""> 776       * @param className                                                                                           </span>
<span class="5783752320936502160" onmouseenter="enter('5783752320936502160');" onmouseout="out('5783752320936502160');" style=""> 777       * @param headerFields                                                                                        </span>
<span class="4180172247960880324" onmouseenter="enter('4180172247960880324');" onmouseout="out('4180172247960880324');" style=""> 778       * @param type                                                                                                </span>
<span class="-7324022876786324498" onmouseenter="enter('-7324022876786324498');" onmouseout="out('-7324022876786324498');" style=""> 779       * @param drs                                                                                                 </span>
<span class="7403666429378321004" onmouseenter="enter('7403666429378321004');" onmouseout="out('7403666429378321004');" style=""> 780       * @param sectionKey                                                                                          </span>
<span class="6414796960983960786" onmouseenter="enter('6414796960983960786');" onmouseout="out('6414796960983960786');" style=""> 781       * @param order                                                                                               </span>
<span class="-2237647657818576638" onmouseenter="enter('-2237647657818576638');" onmouseout="out('-2237647657818576638');" style=""> 782       * @param idProperty                                                                                          </span>
<span class="6383674454506135847" onmouseenter="enter('6383674454506135847');" onmouseout="out('6383674454506135847');" style=""> 783       * @param sectionCrumbs                                                                                       </span>
<span class="958697608627838498" onmouseenter="enter('958697608627838498');" onmouseout="out('958697608627838498');" style=""> 784       * @param sortPropery                                                                                         </span>
<span class="-9165797340485297481" onmouseenter="enter('-9165797340485297481');" onmouseout="out('-9165797340485297481');" style=""> 785       * @return                                                                                                    </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 786       */                                                                                                           </span>
<span class="4478013600751804718" onmouseenter="enter('4478013600751804718');" onmouseout="out('4478013600751804718');" style=""><abbr title=" 787      protected ListGrid createListGrid(String className, List&lt;Field&gt; headerFields, ListGrid.Type type, DynamicResultSet drs,"> 787      protected ListGrid createListGrid(String className, List&lt;Field&gt; headerFields, ListGrid.Type type, DynamicResulðŸ”µ</abbr></span>
<span class="-6113374608895219377" onmouseenter="enter('-6113374608895219377');" onmouseout="out('-6113374608895219377');" style=""><abbr title=" 788              String sectionKey, Integer order, String idProperty, List&lt;SectionCrumb&gt; sectionCrumbs, String sortPropery) {"> 788              String sectionKey, Integer order, String idProperty, List&lt;SectionCrumb&gt; sectionCrumbs, String sortPropðŸ”µ</abbr></span>
<span class="-449286439783514832" onmouseenter="enter('-449286439783514832');" onmouseout="out('-449286439783514832');" style=""> 789          // Create the list grid and set some basic attributes                                                     </span>
<span class="9183228219526841185" onmouseenter="enter('9183228219526841185');" onmouseout="out('9183228219526841185');" style=""> 790          ListGrid listGrid = new ListGrid();                                                                       </span>
<span class="-6947819430094733929" onmouseenter="enter('-6947819430094733929');" onmouseout="out('-6947819430094733929');" style=""> 791          listGrid.setClassName(className);                                                                         </span>
<span class="4219128016198228062" onmouseenter="enter('4219128016198228062');" onmouseout="out('4219128016198228062');" style=""> 792          listGrid.getHeaderFields().addAll(headerFields);                                                          </span>
<span class="-7949709696885802288" onmouseenter="enter('-7949709696885802288');" onmouseout="out('-7949709696885802288');" style=""> 793          listGrid.setListGridType(type);                                                                           </span>
<span class="8360738814350031256" onmouseenter="enter('8360738814350031256');" onmouseout="out('8360738814350031256');" style=""> 794          listGrid.setSectionCrumbs(sectionCrumbs);                                                                 </span>
<span class="-7038501348455923153" onmouseenter="enter('-7038501348455923153');" onmouseout="out('-7038501348455923153');" style=""> 795          listGrid.setSectionKey(sectionKey);                                                                       </span>
<span class="5588432900267028426" onmouseenter="enter('5588432900267028426');" onmouseout="out('5588432900267028426');" style=""> 796          listGrid.setOrder(order);                                                                                 </span>
<span class="-2959509556644296161" onmouseenter="enter('-2959509556644296161');" onmouseout="out('-2959509556644296161');" style=""> 797          listGrid.setIdProperty(idProperty);                                                                       </span>
<span class="-1574850005689313985" onmouseenter="enter('-1574850005689313985');" onmouseout="out('-1574850005689313985');" style=""> 798          listGrid.setStartIndex(drs.getStartIndex());                                                              </span>
<span class="-1229635168663567378" onmouseenter="enter('-1229635168663567378');" onmouseout="out('-1229635168663567378');" style=""> 799          listGrid.setTotalRecords(drs.getTotalRecords());                                                          </span>
<span class="-8685641121402901146" onmouseenter="enter('-8685641121402901146');" onmouseout="out('-8685641121402901146');" style=""> 800          listGrid.setPageSize(drs.getPageSize());                                                                  </span>
<span  style=""> 801                                                                                                                    </span>
<span class="6809887928661746160" onmouseenter="enter('6809887928661746160');" onmouseout="out('6809887928661746160');" style=""> 802          String sectionIdentifier = extractSectionIdentifierFromCrumb(sectionCrumbs);                              </span>
<span class="-666381629022378153" onmouseenter="enter('-666381629022378153');" onmouseout="out('-666381629022378153');" style=""><abbr title=" 803          AdminSection section = navigationService.findAdminSectionByClassAndSectionId(className, sectionIdentifier);"> 803          AdminSection section = navigationService.findAdminSectionByClassAndSectionId(className, sectionIdentifier)ðŸ”µ</abbr></span>
<span class="2297837107111400660" onmouseenter="enter('2297837107111400660');" onmouseout="out('2297837107111400660');" style=""> 804          if (section != null) {                                                                                    </span>
<span class="-6658763311085780957" onmouseenter="enter('-6658763311085780957');" onmouseout="out('-6658763311085780957');" style=""> 805              listGrid.setExternalEntitySectionKey(section.getUrl());                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 806          }                                                                                                         </span>
<span  style=""> 807                                                                                                                    </span>
<span class="2209008320918265390" onmouseenter="enter('2209008320918265390');" onmouseout="out('2209008320918265390');" style=""> 808          // format date list grid cells                                                                            </span>
<span class="8206468207203445529" onmouseenter="enter('8206468207203445529');" onmouseout="out('8206468207203445529');" style=""> 809          SimpleDateFormat formatter = new SimpleDateFormat(&quot;MMM d, y @ hh:mma&quot;);                                   </span>
<span class="-3380881449399951408" onmouseenter="enter('-3380881449399951408');" onmouseout="out('-3380881449399951408');" style=""> 810          DateFormatSymbols symbols = new DateFormatSymbols(Locale.getDefault());                                   </span>
<span class="4107867186349432276" onmouseenter="enter('4107867186349432276');" onmouseout="out('4107867186349432276');" style=""> 811          symbols.setAmPmStrings(new String[] { &quot;am&quot;, &quot;pm&quot; });                                                      </span>
<span class="8033599572947753762" onmouseenter="enter('8033599572947753762');" onmouseout="out('8033599572947753762');" style=""> 812          formatter.setDateFormatSymbols(symbols);                                                                  </span>
<span  style=""> 813                                                                                                                    </span>
<span class="-8955150404377737735" onmouseenter="enter('-8955150404377737735');" onmouseout="out('-8955150404377737735');" style=""> 814          // For each of the entities (rows) in the list grid, we need to build the associated                      </span>
<span class="7780135600729227159" onmouseenter="enter('7780135600729227159');" onmouseout="out('7780135600729227159');" style=""> 815          // ListGridRecord and set the required fields on the record. These fields are the same ones               </span>
<span class="-4274337481121146447" onmouseenter="enter('-4274337481121146447');" onmouseout="out('-4274337481121146447');" style=""> 816          // that are used for the header fields.                                                                   </span>
<span class="-5517026699518874938" onmouseenter="enter('-5517026699518874938');" onmouseout="out('-5517026699518874938');" style=""> 817          for (Entity e : drs.getRecords()) {                                                                       </span>
<span class="1299256644552050382" onmouseenter="enter('1299256644552050382');" onmouseout="out('1299256644552050382');" style=""> 818              ListGridRecord record = new ListGridRecord();                                                         </span>
<span class="-8742186718038750131" onmouseenter="enter('-8742186718038750131');" onmouseout="out('-8742186718038750131');" style=""> 819              record.setListGrid(listGrid);                                                                         </span>
<span class="6901251098959405515" onmouseenter="enter('6901251098959405515');" onmouseout="out('6901251098959405515');" style=""> 820              record.setDirty(e.isDirty());                                                                         </span>
<span class="-5328520837276209835" onmouseenter="enter('-5328520837276209835');" onmouseout="out('-5328520837276209835');" style=""> 821              record.setEntity(e);                                                                                  </span>
<span class="4295036974122714095" onmouseenter="enter('4295036974122714095');" onmouseout="out('4295036974122714095');" style=""> 822              if (StringUtils.isNotBlank(sortPropery) &amp;&amp; e.findProperty(sortPropery) != null) {                     </span>
<span class="6298096210056644819" onmouseenter="enter('6298096210056644819');" onmouseout="out('6298096210056644819');" style=""> 823                  Property sort = e.findProperty(sortPropery);                                                      </span>
<span class="-3019357169870438428" onmouseenter="enter('-3019357169870438428');" onmouseout="out('-3019357169870438428');" style=""> 824                  record.setDisplayOrder(sort.getValue());                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 825              }                                                                                                     </span>
<span class="-6805099362032074066" onmouseenter="enter('-6805099362032074066');" onmouseout="out('-6805099362032074066');" style=""> 826              if (e.findProperty(&quot;hasError&quot;) != null) {                                                             </span>
<span class="893890618648542494" onmouseenter="enter('893890618648542494');" onmouseout="out('893890618648542494');" style=""> 827                  Boolean hasError = Boolean.parseBoolean(e.findProperty(&quot;hasError&quot;).getValue());                   </span>
<span class="5018109180834939283" onmouseenter="enter('5018109180834939283');" onmouseout="out('5018109180834939283');" style=""> 828                  record.setIsError(hasError);                                                                      </span>
<span class="6284086923287170648" onmouseenter="enter('6284086923287170648');" onmouseout="out('6284086923287170648');" style=""> 829                  if (hasError) {                                                                                   </span>
<span class="-2405869569788439449" onmouseenter="enter('-2405869569788439449');" onmouseout="out('-2405869569788439449');" style=""> 830                      ExtensionResultStatusType messageResultStatus = listGridErrorExtensionManager                 </span>
<span class="60178842478893139" onmouseenter="enter('60178842478893139');" onmouseout="out('60178842478893139');" style=""> 831                              .getProxy().determineErrorMessageForEntity(e, record);                                </span>
<span  style=""> 832                                                                                                                    </span>
<span class="4336715785327594030" onmouseenter="enter('4336715785327594030');" onmouseout="out('4336715785327594030');" style=""> 833                      if (ExtensionResultStatusType.NOT_HANDLED.equals(messageResultStatus)) {                      </span>
<span class="-5328227180306975968" onmouseenter="enter('-5328227180306975968');" onmouseout="out('-5328227180306975968');" style=""> 834                          record.setErrorKey(&quot;listgrid.record.error&quot;);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 835                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 836                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 837              }                                                                                                     </span>
<span  style=""> 838                                                                                                                    </span>
<span class="-6673642350284825111" onmouseenter="enter('-6673642350284825111');" onmouseout="out('-6673642350284825111');" style=""> 839              if (e.findProperty(&quot;progressStatus&quot;) != null) {                                                       </span>
<span class="-2405869569788439449" onmouseenter="enter('-2405869569788439449');" onmouseout="out('-2405869569788439449');" style=""> 840                  ExtensionResultStatusType messageResultStatus = listGridErrorExtensionManager                     </span>
<span class="-4105959264543865488" onmouseenter="enter('-4105959264543865488');" onmouseout="out('-4105959264543865488');" style=""> 841                          .getProxy().determineStatusMessageForEntity(e, record);                                   </span>
<span class="4336715785327594030" onmouseenter="enter('4336715785327594030');" onmouseout="out('4336715785327594030');" style=""> 842                  if (ExtensionResultStatusType.NOT_HANDLED.equals(messageResultStatus)) {                          </span>
<span class="-1619149624396289128" onmouseenter="enter('-1619149624396289128');" onmouseout="out('-1619149624396289128');" style=""> 843                      record.setStatus(e.findProperty(&quot;progressStatus&quot;).getValue());                                </span>
<span class="-5097013158362698405" onmouseenter="enter('-5097013158362698405');" onmouseout="out('-5097013158362698405');" style=""> 844                      record.setStatusCssClass(&quot;listgrid.record.status&quot;);                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 845                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 846              }                                                                                                     </span>
<span  style=""> 847                                                                                                                    </span>
<span class="6661978459482218631" onmouseenter="enter('6661978459482218631');" onmouseout="out('6661978459482218631');" style=""> 848              if (e.findProperty(idProperty) != null) {                                                             </span>
<span class="-8868360599888536047" onmouseenter="enter('-8868360599888536047');" onmouseout="out('-8868360599888536047');" style=""> 849                  record.setId(e.findProperty(idProperty).getValue());                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 850              }                                                                                                     </span>
<span  style=""> 851                                                                                                                    </span>
<span class="4163901938958293625" onmouseenter="enter('4163901938958293625');" onmouseout="out('4163901938958293625');" style=""> 852              for (Field headerField : headerFields) {                                                              </span>
<span class="5027179794052216178" onmouseenter="enter('5027179794052216178');" onmouseout="out('5027179794052216178');" style=""> 853                  Property p = e.findProperty(headerField.getName());                                               </span>
<span class="-4724213940983805674" onmouseenter="enter('-4724213940983805674');" onmouseout="out('-4724213940983805674');" style=""> 854                  if (p != null) {                                                                                  </span>
<span class="-3806855064372020025" onmouseenter="enter('-3806855064372020025');" onmouseout="out('-3806855064372020025');" style=""> 855                      Field recordField = new Field().withName(headerField.getName())                               </span>
<span class="5094071872860659780" onmouseenter="enter('5094071872860659780');" onmouseout="out('5094071872860659780');" style=""> 856                              .withFriendlyName(headerField.getFriendlyName())                                      </span>
<span class="-5738388783204669504" onmouseenter="enter('-5738388783204669504');" onmouseout="out('-5738388783204669504');" style=""> 857                              .withOrder(p.getMetadata().getOrder());                                               </span>
<span  style=""> 858                                                                                                                    </span>
<span class="6797523520890025382" onmouseenter="enter('6797523520890025382');" onmouseout="out('6797523520890025382');" style=""> 859                      if (headerField instanceof ComboField) {                                                      </span>
<span class="-1809643957227997284" onmouseenter="enter('-1809643957227997284');" onmouseout="out('-1809643957227997284');" style=""> 860                          recordField.setValue(((ComboField) headerField).getOption(p.getValue()));                 </span>
<span class="-5676530272089615334" onmouseenter="enter('-5676530272089615334');" onmouseout="out('-5676530272089615334');" style=""> 861                          recordField.setDisplayValue(p.getDisplayValue());                                         </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 862                      } else {                                                                                      </span>
<span class="3939566750475024909" onmouseenter="enter('3939566750475024909');" onmouseout="out('3939566750475024909');" style=""> 863                          if (headerField.getFieldType().equals(&quot;DATE&quot;)) {                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 864                              try {                                                                                 </span>
<span class="6474778173321313180" onmouseenter="enter('6474778173321313180');" onmouseout="out('6474778173321313180');" style=""> 865                                  Date date = new SimpleDateFormat(&quot;yyyy.MM.dd HH:mm:ss&quot;).parse(p.getValue());      </span>
<span class="3880682438474898081" onmouseenter="enter('3880682438474898081');" onmouseout="out('3880682438474898081');" style=""> 866                                  String newValue = formatter.format(date);                                         </span>
<span class="6595195419554741000" onmouseenter="enter('6595195419554741000');" onmouseout="out('6595195419554741000');" style=""> 867                                  recordField.setValue(newValue);                                                   </span>
<span class="2273034781883266774" onmouseenter="enter('2273034781883266774');" onmouseout="out('2273034781883266774');" style=""> 868                              } catch (Exception ex) {                                                              </span>
<span class="-1278861869857480835" onmouseenter="enter('-1278861869857480835');" onmouseout="out('-1278861869857480835');" style=""> 869                                  recordField.setValue(p.getValue());                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 870                              }                                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 871                          } else {                                                                                  </span>
<span class="-1278861869857480835" onmouseenter="enter('-1278861869857480835');" onmouseout="out('-1278861869857480835');" style=""> 872                              recordField.setValue(p.getValue());                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 873                          }                                                                                         </span>
<span class="-5676530272089615334" onmouseenter="enter('-5676530272089615334');" onmouseout="out('-5676530272089615334');" style=""> 874                          recordField.setDisplayValue(p.getDisplayValue());                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 875                      }                                                                                             </span>
<span  style=""> 876                                                                                                                    </span>
<span class="1395793512456166896" onmouseenter="enter('1395793512456166896');" onmouseout="out('1395793512456166896');" style=""> 877                      recordField.setDerived(isDerivedField(headerField, recordField, p));                          </span>
<span  style=""> 878                                                                                                                    </span>
<span class="1474914769688142515" onmouseenter="enter('1474914769688142515');" onmouseout="out('1474914769688142515');" style=""> 879                      record.getFields().add(recordField);                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 880                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 881              }                                                                                                     </span>
<span  style=""> 882                                                                                                                    </span>
<span class="7681410006718809906" onmouseenter="enter('7681410006718809906');" onmouseout="out('7681410006718809906');" style=""> 883              if (e.findProperty(AdminMainEntity.MAIN_ENTITY_NAME_PROPERTY) != null) {                              </span>
<span class="-2560058380276440283" onmouseenter="enter('-2560058380276440283');" onmouseout="out('-2560058380276440283');" style=""> 884                  Field hiddenField = new Field().withName(AdminMainEntity.MAIN_ENTITY_NAME_PROPERTY);              </span>
<span class="-3700863118643080175" onmouseenter="enter('-3700863118643080175');" onmouseout="out('-3700863118643080175');" style=""> 885                  hiddenField.setValue(e.findProperty(AdminMainEntity.MAIN_ENTITY_NAME_PROPERTY).getValue());       </span>
<span class="-8926099734580015874" onmouseenter="enter('-8926099734580015874');" onmouseout="out('-8926099734580015874');" style=""> 886                  record.getHiddenFields().add(hiddenField);                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 887              }                                                                                                     </span>
<span  style=""> 888                                                                                                                    </span>
<span class="-767503360667085643" onmouseenter="enter('-767503360667085643');" onmouseout="out('-767503360667085643');" style=""> 889              if (e.findProperty(BasicPersistenceModule.ALTERNATE_ID_PROPERTY) != null) {                           </span>
<span class="6815728707096626977" onmouseenter="enter('6815728707096626977');" onmouseout="out('6815728707096626977');" style=""> 890                  record.setAltId(e.findProperty(BasicPersistenceModule.ALTERNATE_ID_PROPERTY).getValue());         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 891              }                                                                                                     </span>
<span  style=""> 892                                                                                                                    </span>
<span class="4454208436841958265" onmouseenter="enter('4454208436841958265');" onmouseout="out('4454208436841958265');" style=""> 893              extensionManager.getProxy().modifyListGridRecord(className, record, e);                               </span>
<span  style=""> 894                                                                                                                    </span>
<span class="-2046562633600316152" onmouseenter="enter('-2046562633600316152');" onmouseout="out('-2046562633600316152');" style=""> 895              listGrid.getRecords().add(record);                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 896          }                                                                                                         </span>
<span  style=""> 897                                                                                                                    </span>
<span class="3400018439585714383" onmouseenter="enter('3400018439585714383');" onmouseout="out('3400018439585714383');" style=""> 898          if (drs.getFirstId() != null) {                                                                           </span>
<span class="657069941572346003" onmouseenter="enter('657069941572346003');" onmouseout="out('657069941572346003');" style=""> 899              listGrid.setFirstId(drs.getFirstId());                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 900          }                                                                                                         </span>
<span class="-8589701589672818150" onmouseenter="enter('-8589701589672818150');" onmouseout="out('-8589701589672818150');" style=""> 901          if (drs.getLastId() != null) {                                                                            </span>
<span class="8426729182884352986" onmouseenter="enter('8426729182884352986');" onmouseout="out('8426729182884352986');" style=""> 902              listGrid.setLastId(drs.getLastId());                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 903          }                                                                                                         </span>
<span class="6275187001061462238" onmouseenter="enter('6275187001061462238');" onmouseout="out('6275187001061462238');" style=""> 904          if (drs.getUpperCount() != null) {                                                                        </span>
<span class="-576914595282790069" onmouseenter="enter('-576914595282790069');" onmouseout="out('-576914595282790069');" style=""> 905              listGrid.setUpperCount(drs.getUpperCount());                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 906          }                                                                                                         </span>
<span class="4823072466704399057" onmouseenter="enter('4823072466704399057');" onmouseout="out('4823072466704399057');" style=""> 907          if (drs.getLowerCount() != null) {                                                                        </span>
<span class="-1903228332443717343" onmouseenter="enter('-1903228332443717343');" onmouseout="out('-1903228332443717343');" style=""> 908              listGrid.setLowerCount(drs.getLowerCount());                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 909          }                                                                                                         </span>
<span class="4841764865893204927" onmouseenter="enter('4841764865893204927');" onmouseout="out('4841764865893204927');" style=""> 910          if (drs.getFetchType() != null) {                                                                         </span>
<span class="-77798786805735884" onmouseenter="enter('-77798786805735884');" onmouseout="out('-77798786805735884');" style=""> 911              listGrid.setFetchType(drs.getFetchType().toString());                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 912          }                                                                                                         </span>
<span class="-9150092368605969111" onmouseenter="enter('-9150092368605969111');" onmouseout="out('-9150092368605969111');" style=""> 913          if (drs.getTotalCountLessThanPageSize() != null) {                                                        </span>
<span class="192650896043853585" onmouseenter="enter('192650896043853585');" onmouseout="out('192650896043853585');" style=""> 914              listGrid.setTotalCountLessThanPageSize(drs.getTotalCountLessThanPageSize());                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 915          }                                                                                                         </span>
<span class="3404741154469919162" onmouseenter="enter('3404741154469919162');" onmouseout="out('3404741154469919162');" style=""> 916          if (drs.getPromptSearch() != null) {                                                                      </span>
<span class="-6611592537868887580" onmouseenter="enter('-6611592537868887580');" onmouseout="out('-6611592537868887580');" style=""> 917              listGrid.setPromptSearch(drs.getPromptSearch());                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 918          }                                                                                                         </span>
<span  style=""> 919                                                                                                                    </span>
<span class="8338561479600990216" onmouseenter="enter('8338561479600990216');" onmouseout="out('8338561479600990216');" style=""> 920          return listGrid;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 921      }                                                                                                             </span>
<span  style=""> 922                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 923      /**                                                                                                           </span>
<span class="7203476035615582402" onmouseenter="enter('7203476035615582402');" onmouseout="out('7203476035615582402');" style=""><abbr title=" 924       * Determines whether or not a particular field in a record is derived. By default this checks the {@link BasicFieldMetadata}"> 924       * Determines whether or not a particular field in a record is derived. By default this checks the {@link BasiðŸ”µ</abbr></span>
<span class="-4069675647285817004" onmouseenter="enter('-4069675647285817004');" onmouseout="out('-4069675647285817004');" style=""> 925       * for the given Property to see if something on the backend has marked it as derived                         </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 926       *                                                                                                            </span>
<span class="2786059063596769946" onmouseenter="enter('2786059063596769946');" onmouseout="out('2786059063596769946');" style=""> 927       * @param headerField the header for this recordField                                                         </span>
<span class="7447440891213078037" onmouseenter="enter('7447440891213078037');" onmouseout="out('7447440891213078037');" style=""> 928       * @param recordField the recordField being populated                                                         </span>
<span class="8242400819290521133" onmouseenter="enter('8242400819290521133');" onmouseout="out('8242400819290521133');" style=""> 929       * @param p the property that relates to this recordField                                                     </span>
<span class="2097819629215924500" onmouseenter="enter('2097819629215924500');" onmouseout="out('2097819629215924500');" style=""> 930       * @return whether or not this field is derived                                                               </span>
<span class="5916081075383634288" onmouseenter="enter('5916081075383634288');" onmouseout="out('5916081075383634288');" style=""><abbr title=" 931       * @see {@link #createListGrid(String, List, ListGrid.Type, DynamicResultSet, String, Integer, String, List, String)}"> 931       * @see {@link #createListGrid(String, List, ListGrid.Type, DynamicResultSet, String, Integer, String, List, SðŸ”µ</abbr></span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 932       */                                                                                                           </span>
<span class="-8637325260962674117" onmouseenter="enter('-8637325260962674117');" onmouseout="out('-8637325260962674117');" style=""> 933      protected Boolean isDerivedField(Field headerField, Field recordField, Property p) {                          </span>
<span class="1661867973140043253" onmouseenter="enter('1661867973140043253');" onmouseout="out('1661867973140043253');" style=""> 934          return BooleanUtils.isTrue(((BasicFieldMetadata) p.getMetadata()).getIsDerived());                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 935      }                                                                                                             </span>
<span  style=""> 936                                                                                                                    </span>
<span class="7122600949652716635" onmouseenter="enter('7122600949652716635');" onmouseout="out('7122600949652716635');" style=""> 937      protected void setEntityFormFields(ClassMetadata cmd, EntityForm ef, List&lt;Property&gt; properties) {             </span>
<span class="6325387712166170506" onmouseenter="enter('6325387712166170506');" onmouseout="out('6325387712166170506');" style=""> 938          List&lt;Field&gt; homelessFields = new ArrayList&lt;&gt;();                                                           </span>
<span class="4866400253676981137" onmouseenter="enter('4866400253676981137');" onmouseout="out('4866400253676981137');" style=""> 939          List&lt;Field&gt; fieldsWithAssociations = new ArrayList&lt;&gt;();                                                   </span>
<span  style=""> 940                                                                                                                    </span>
<span class="2404180692851035070" onmouseenter="enter('2404180692851035070');" onmouseout="out('2404180692851035070');" style=""> 941          for (Property property : properties) {                                                                    </span>
<span class="-446642995335437650" onmouseenter="enter('-446642995335437650');" onmouseout="out('-446642995335437650');" style=""> 942              if (property.getMetadata() instanceof BasicFieldMetadata) {                                           </span>
<span class="6647472598704819567" onmouseenter="enter('6647472598704819567');" onmouseout="out('6647472598704819567');" style=""> 943                  BasicFieldMetadata fmd = (BasicFieldMetadata) property.getMetadata();                             </span>
<span  style=""> 944                                                                                                                    </span>
<span  style=""> 945                                                                                                                    </span>
<span class="-4475069031736235173" onmouseenter="enter('-4475069031736235173');" onmouseout="out('-4475069031736235173');" style=""> 946                  if (!ArrayUtils.contains(getFormHiddenVisibilities(), fmd.getVisibility())) {                     </span>
<span class="-6270154255315256607" onmouseenter="enter('-6270154255315256607');" onmouseout="out('-6270154255315256607');" style=""> 947                      // Depending on visibility, field for the particular property is not created on the form      </span>
<span class="5921747215124261866" onmouseenter="enter('5921747215124261866');" onmouseout="out('5921747215124261866');" style=""> 948                      String fieldType = fmd.getFieldType() == null ? null : fmd.getFieldType().toString();         </span>
<span  style=""> 949                                                                                                                    </span>
<span class="6708987068205782652" onmouseenter="enter('6708987068205782652');" onmouseout="out('6708987068205782652');" style=""> 950                      // Create the field and set some basic attributes                                             </span>
<span class="8116345463116621173" onmouseenter="enter('8116345463116621173');" onmouseout="out('8116345463116621173');" style=""> 951                      Field f;                                                                                      </span>
<span  style=""> 952                                                                                                                    </span>
<span class="8199797825370303284" onmouseenter="enter('8199797825370303284');" onmouseout="out('8199797825370303284');" style=""> 953                      if (fieldType.equals(SupportedFieldType.BROADLEAF_ENUMERATION.toString())                     </span>
<span class="7716913215106788406" onmouseenter="enter('7716913215106788406');" onmouseout="out('7716913215106788406');" style=""> 954                              || fieldType.equals(SupportedFieldType.EXPLICIT_ENUMERATION.toString())               </span>
<span class="2980977699228922095" onmouseenter="enter('2980977699228922095');" onmouseout="out('2980977699228922095');" style=""> 955                              || fieldType.equals(SupportedFieldType.DATA_DRIVEN_ENUMERATION.toString())            </span>
<span class="7388471135187367898" onmouseenter="enter('7388471135187367898');" onmouseout="out('7388471135187367898');" style=""> 956                              || fieldType.equals(SupportedFieldType.EMPTY_ENUMERATION.toString())) {               </span>
<span class="3276444675754694915" onmouseenter="enter('3276444675754694915');" onmouseout="out('3276444675754694915');" style=""><abbr title=" 957                          // We&#x27;re dealing with fields that should render as drop-downs, so set their possible values"> 957                          // We&#x27;re dealing with fields that should render as drop-downs, so set their possible valueðŸ”µ</abbr></span>
<span class="3203856539989077186" onmouseenter="enter('3203856539989077186');" onmouseout="out('3203856539989077186');" style=""> 958                          f = new ComboField();                                                                     </span>
<span class="6120731816730172045" onmouseenter="enter('6120731816730172045');" onmouseout="out('6120731816730172045');" style=""> 959                          ((ComboField) f).setOptions(fmd.getEnumerationValues());                                  </span>
<span class="-4628034205462573751" onmouseenter="enter('-4628034205462573751');" onmouseout="out('-4628034205462573751');" style=""><abbr title=" 960                          if (fmd.getHideEnumerationIfEmpty() != null &amp;&amp; fmd.getHideEnumerationIfEmpty().booleanValue()"> 960                          if (fmd.getHideEnumerationIfEmpty() != null &amp;&amp; fmd.getHideEnumerationIfEmpty().booleanValuðŸ”µ</abbr></span>
<span class="-6675389158909418663" onmouseenter="enter('-6675389158909418663');" onmouseout="out('-6675389158909418663');" style=""> 961                                  &amp;&amp; ((ComboField) f).getOptions().size() == 0) {                                   </span>
<span class="-8620847541322007209" onmouseenter="enter('-8620847541322007209');" onmouseout="out('-8620847541322007209');" style=""> 962                              f.setIsVisible(false);                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 963                          }                                                                                         </span>
<span class="86452670050279225" onmouseenter="enter('86452670050279225');" onmouseout="out('86452670050279225');" style=""> 964                      } else if (fieldType.equals(SupportedFieldType.CODE.toString())) {                            </span>
<span class="-7620786431462842147" onmouseenter="enter('-7620786431462842147');" onmouseout="out('-7620786431462842147');" style=""> 965                          f = new CodeField();                                                                      </span>
<span class="-3831443983095651615" onmouseenter="enter('-3831443983095651615');" onmouseout="out('-3831443983095651615');" style=""> 966                      } else if (fieldType.equals(SupportedFieldType.RULE_SIMPLE.toString())                        </span>
<span class="-6155398851072788654" onmouseenter="enter('-6155398851072788654');" onmouseout="out('-6155398851072788654');" style=""> 967                              || fieldType.equals(SupportedFieldType.RULE_SIMPLE_TIME.toString())                   </span>
<span class="-7731003048108517996" onmouseenter="enter('-7731003048108517996');" onmouseout="out('-7731003048108517996');" style=""> 968                              || fieldType.equals(SupportedFieldType.RULE_WITH_QUANTITY.toString())) {              </span>
<span class="1510588759783913078" onmouseenter="enter('1510588759783913078');" onmouseout="out('1510588759783913078');" style=""> 969                          // We&#x27;re dealing with rule builders, so we&#x27;ll create those specialized fields             </span>
<span class="439535866421335144" onmouseenter="enter('439535866421335144');" onmouseout="out('439535866421335144');" style=""> 970                          f = new RuleBuilderField();                                                               </span>
<span class="-1112724631648616512" onmouseenter="enter('-1112724631648616512');" onmouseout="out('-1112724631648616512');" style=""> 971                          ((RuleBuilderField) f).setJsonFieldName(property.getName() + &quot;Json&quot;);                     </span>
<span class="1732596643653885393" onmouseenter="enter('1732596643653885393');" onmouseout="out('1732596643653885393');" style=""> 972                          ((RuleBuilderField) f).setDataWrapper(new DataWrapper());                                 </span>
<span class="7228657391391942788" onmouseenter="enter('7228657391391942788');" onmouseout="out('7228657391391942788');" style=""> 973                          ((RuleBuilderField) f).setFieldBuilder(fmd.getRuleIdentifier());                          </span>
<span class="6741378243253493035" onmouseenter="enter('6741378243253493035');" onmouseout="out('6741378243253493035');" style=""> 974                          ((RuleBuilderField) f).setDisplayType(fmd.getDisplayType().toString());                   </span>
<span  style=""> 975                                                                                                                    </span>
<span class="4466331963824990789" onmouseenter="enter('4466331963824990789');" onmouseout="out('4466331963824990789');" style=""> 976                          String blankJsonString =  &quot;{\&quot;data\&quot;:[]}&quot;;                                                </span>
<span class="-7753853041517398518" onmouseenter="enter('-7753853041517398518');" onmouseout="out('-7753853041517398518');" style=""> 977                          ((RuleBuilderField) f).setJson(blankJsonString);                                          </span>
<span class="-6647315222721447684" onmouseenter="enter('-6647315222721447684');" onmouseout="out('-6647315222721447684');" style=""> 978                          DataWrapper dw = convertJsonToDataWrapper(blankJsonString);                               </span>
<span class="-3408161092817379645" onmouseenter="enter('-3408161092817379645');" onmouseout="out('-3408161092817379645');" style=""> 979                          if (dw != null) {                                                                         </span>
<span class="-5096298828793309103" onmouseenter="enter('-5096298828793309103');" onmouseout="out('-5096298828793309103');" style=""> 980                              ((RuleBuilderField) f).setDataWrapper(dw);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 981                          }                                                                                         </span>
<span  style=""> 982                                                                                                                    </span>
<span class="3046581447506121497" onmouseenter="enter('3046581447506121497');" onmouseout="out('3046581447506121497');" style=""> 983                          if (fieldType.equals(SupportedFieldType.RULE_SIMPLE.toString())) {                        </span>
<span class="-1186924665685770541" onmouseenter="enter('-1186924665685770541');" onmouseout="out('-1186924665685770541');" style=""> 984                              ((RuleBuilderField) f).setRuleType(&quot;rule-builder-simple&quot;);                            </span>
<span class="-4608843455051291020" onmouseenter="enter('-4608843455051291020');" onmouseout="out('-4608843455051291020');" style=""> 985                          } else if (fieldType.equals(SupportedFieldType.RULE_WITH_QUANTITY.toString())) {          </span>
<span class="-4088622747979962571" onmouseenter="enter('-4088622747979962571');" onmouseout="out('-4088622747979962571');" style=""> 986                              ((RuleBuilderField) f).setRuleType(&quot;rule-builder-with-quantity&quot;);                     </span>
<span class="6638316396690215710" onmouseenter="enter('6638316396690215710');" onmouseout="out('6638316396690215710');" style=""> 987                          } else if (fieldType.equals(SupportedFieldType.RULE_SIMPLE_TIME.toString())) {            </span>
<span class="-5927097931654974492" onmouseenter="enter('-5927097931654974492');" onmouseout="out('-5927097931654974492');" style=""> 988                              ((RuleBuilderField) f).setRuleType(&quot;rule-builder-simple-time&quot;);                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 989                          }                                                                                         </span>
<span class="-76815898427635828" onmouseenter="enter('-76815898427635828');" onmouseout="out('-76815898427635828');" style=""> 990                      } else if (LookupType.DROPDOWN.equals(fmd.getLookupType())) {                                 </span>
<span class="2821913588763042756" onmouseenter="enter('2821913588763042756');" onmouseout="out('2821913588763042756');" style=""><abbr title=" 991                          // We&#x27;re dealing with a to-one field that wants to be rendered as a dropdown instead of in a"> 991                          // We&#x27;re dealing with a to-one field that wants to be rendered as a dropdown instead of inðŸ”µ</abbr></span>
<span class="566288030321676498" onmouseenter="enter('566288030321676498');" onmouseout="out('566288030321676498');" style=""><abbr title=" 992                          // modal, so we&#x27;ll provision the combo field here. Available options will be set as part of a"> 992                          // modal, so we&#x27;ll provision the combo field here. Available options will be set as part oðŸ”µ</abbr></span>
<span class="7172718814241780846" onmouseenter="enter('7172718814241780846');" onmouseout="out('7172718814241780846');" style=""> 993                          // subsequent operation                                                                   </span>
<span class="3203856539989077186" onmouseenter="enter('3203856539989077186');" onmouseout="out('3203856539989077186');" style=""> 994                          f = new ComboField();                                                                     </span>
<span class="-1555139312653833561" onmouseenter="enter('-1555139312653833561');" onmouseout="out('-1555139312653833561');" style=""> 995                      } else if (fieldType.equals(SupportedFieldType.MEDIA.toString())) {                           </span>
<span class="7851932113124846293" onmouseenter="enter('7851932113124846293');" onmouseout="out('7851932113124846293');" style=""> 996                          f = new MediaField();                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 997                      } else {                                                                                      </span>
<span class="-4540598357129068716" onmouseenter="enter('-4540598357129068716');" onmouseout="out('-4540598357129068716');" style=""> 998                          // Create a default field since there was no specialized handler                          </span>
<span class="8445500457207430044" onmouseenter="enter('8445500457207430044');" onmouseout="out('8445500457207430044');" style=""> 999                          f = new Field();                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1000                      }                                                                                             </span>
<span  style="">1001                                                                                                                    </span>
<span class="-1589475346053267562" onmouseenter="enter('-1589475346053267562');" onmouseout="out('-1589475346053267562');" style="">1002                      Boolean required = fmd.getRequiredOverride();                                                 </span>
<span class="-1593138839980229401" onmouseenter="enter('-1593138839980229401');" onmouseout="out('-1593138839980229401');" style="">1003                      if (required == null) {                                                                       </span>
<span class="-6716674851132060026" onmouseenter="enter('-6716674851132060026');" onmouseout="out('-6716674851132060026');" style="">1004                          required = fmd.getRequired();                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1005                      }                                                                                             </span>
<span  style="">1006                                                                                                                    </span>
<span class="981510687991453845" onmouseenter="enter('981510687991453845');" onmouseout="out('981510687991453845');" style="">1007                      Boolean allowNoValueEnum = fmd.getAllowNoValueEnumOption();                                   </span>
<span class="2453461306820272647" onmouseenter="enter('2453461306820272647');" onmouseout="out('2453461306820272647');" style="">1008                      if (allowNoValueEnum != null) {                                                               </span>
<span class="511249052530710714" onmouseenter="enter('511249052530710714');" onmouseout="out('511249052530710714');" style="">1009                          f.setAllowNoValueEnumOption(allowNoValueEnum);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1010                      }                                                                                             </span>
<span  style="">1011                                                                                                                    </span>
<span class="-1986899161047350602" onmouseenter="enter('-1986899161047350602');" onmouseout="out('-1986899161047350602');" style="">1012                      f.withName(property.getName())                                                                </span>
<span class="-6128468031482469561" onmouseenter="enter('-6128468031482469561');" onmouseout="out('-6128468031482469561');" style="">1013                       .withFieldType(fieldType)                                                                    </span>
<span class="-7927263150118151701" onmouseenter="enter('-7927263150118151701');" onmouseout="out('-7927263150118151701');" style="">1014                       .withFieldComponentRenderer(getFieldComponentRenderer(fmd))                                  </span>
<span class="-4099331664389877516" onmouseenter="enter('-4099331664389877516');" onmouseout="out('-4099331664389877516');" style="">1015                       .withGridFieldComponentRenderer(getGridFieldComponentRenderer(fmd))                          </span>
<span class="654425426992808056" onmouseenter="enter('654425426992808056');" onmouseout="out('654425426992808056');" style="">1016                       .withOrder(fmd.getOrder())                                                                   </span>
<span class="8839654145383232945" onmouseenter="enter('8839654145383232945');" onmouseout="out('8839654145383232945');" style="">1017                       .withFriendlyName(fmd.getFriendlyName())                                                     </span>
<span class="3058247827263925638" onmouseenter="enter('3058247827263925638');" onmouseout="out('3058247827263925638');" style="">1018                       .withForeignKeyDisplayValueProperty(fmd.getForeignKeyDisplayValueProperty())                 </span>
<span class="3198496511046166958" onmouseenter="enter('3198496511046166958');" onmouseout="out('3198496511046166958');" style="">1019                       .withForeignKeyClass(fmd.getForeignKeyClass())                                               </span>
<span class="-2338070414188990290" onmouseenter="enter('-2338070414188990290');" onmouseout="out('-2338070414188990290');" style="">1020                       .withForeignKeySectionPath(getAdminSectionPath(fmd.getForeignKeyClass()))                    </span>
<span class="-6320050738227309064" onmouseenter="enter('-6320050738227309064');" onmouseout="out('-6320050738227309064');" style=""><abbr title="1021                       .withOwningEntityClass(fmd.getOwningClass()!=null?fmd.getOwningClass():fmd.getInheritedFromType())">1021                       .withOwningEntityClass(fmd.getOwningClass()!=null?fmd.getOwningClass():fmd.getInheritedFromTyðŸ”µ</abbr></span>
<span class="3975803686122841065" onmouseenter="enter('3975803686122841065');" onmouseout="out('3975803686122841065');" style="">1022                       .withRequired(required)                                                                      </span>
<span class="359983231603260957" onmouseenter="enter('359983231603260957');" onmouseout="out('359983231603260957');" style="">1023                       .withReadOnly(fmd.getReadOnly())                                                             </span>
<span class="5042583388418599955" onmouseenter="enter('5042583388418599955');" onmouseout="out('5042583388418599955');" style="">1024                       .withTranslatable(fmd.getTranslatable())                                                     </span>
<span class="850947769734677156" onmouseenter="enter('850947769734677156');" onmouseout="out('850947769734677156');" style="">1025                       .withAlternateOrdering((Boolean) fmd.getAdditionalMetadata().get(Field.ALTERNATE_ORDERING))  </span>
<span class="3384004197069247045" onmouseenter="enter('3384004197069247045');" onmouseout="out('3384004197069247045');" style="">1026                       .withLargeEntry(fmd.isLargeEntry())                                                          </span>
<span class="8358279492731939259" onmouseenter="enter('8358279492731939259');" onmouseout="out('8358279492731939259');" style="">1027                       .withHint(fmd.getHint())                                                                     </span>
<span class="2950855740871622056" onmouseenter="enter('2950855740871622056');" onmouseout="out('2950855740871622056');" style="">1028                       .withTooltip(fmd.getTooltip())                                                               </span>
<span class="-4063412654801023815" onmouseenter="enter('-4063412654801023815');" onmouseout="out('-4063412654801023815');" style="">1029                       .withHelp(fmd.getHelpText())                                                                 </span>
<span class="-2322162613997207656" onmouseenter="enter('-2322162613997207656');" onmouseout="out('-2322162613997207656');" style="">1030                       .withTypeaheadEnabled(fmd.getEnableTypeaheadLookup())                                        </span>
<span class="3999494576911658619" onmouseenter="enter('3999494576911658619');" onmouseout="out('3999494576911658619');" style="">1031                       .withCanLinkToExternalEntity(fmd.getCanLinkToExternalEntity())                               </span>
<span class="6462182061714529877" onmouseenter="enter('6462182061714529877');" onmouseout="out('6462182061714529877');" style="">1032                       .withAssociatedFieldName(fmd.getAssociatedFieldName());                                      </span>
<span  style="">1033                                                                                                                    </span>
<span class="-269468944390639664" onmouseenter="enter('-269468944390639664');" onmouseout="out('-269468944390639664');" style="">1034                      String defaultValue = fmd.getDefaultValue();                                                  </span>
<span class="517621878739872731" onmouseenter="enter('517621878739872731');" onmouseout="out('517621878739872731');" style="">1035                      if (defaultValue != null) {                                                                   </span>
<span class="4532975392407713565" onmouseenter="enter('4532975392407713565');" onmouseout="out('4532975392407713565');" style="">1036                          defaultValue = extractDefaultValueFromFieldData(fieldType, fmd);                          </span>
<span class="-4862494673796786760" onmouseenter="enter('-4862494673796786760');" onmouseout="out('-4862494673796786760');" style="">1037                          f.withValue(defaultValue);                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1038                      }                                                                                             </span>
<span  style="">1039                                                                                                                    </span>
<span class="-2242732727084199547" onmouseenter="enter('-2242732727084199547');" onmouseout="out('-2242732727084199547');" style="">1040                      if (StringUtils.isBlank(f.getFriendlyName())) {                                               </span>
<span class="4951409134206579242" onmouseenter="enter('4951409134206579242');" onmouseout="out('4951409134206579242');" style="">1041                          f.setFriendlyName(f.getName());                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1042                      }                                                                                             </span>
<span  style="">1043                                                                                                                    </span>
<span class="4434831944931004928" onmouseenter="enter('4434831944931004928');" onmouseout="out('4434831944931004928');" style="">1044                      // If is form hidden, set visible to false                                                    </span>
<span class="-7962146999992485704" onmouseenter="enter('-7962146999992485704');" onmouseout="out('-7962146999992485704');" style="">1045                      if (VisibilityEnum.FORM_EXPLICITLY_HIDDEN.equals(fmd.getVisibility())) {                      </span>
<span class="-8620847541322007209" onmouseenter="enter('-8620847541322007209');" onmouseout="out('-8620847541322007209');" style="">1046                          f.setIsVisible(false);                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1047                      }                                                                                             </span>
<span  style="">1048                                                                                                                    </span>
<span class="5627296841760402753" onmouseenter="enter('5627296841760402753');" onmouseout="out('5627296841760402753');" style="">1049                      if (VisibilityEnum.VISIBLE_ALL.equals(fmd.getVisibility())) {                                 </span>
<span class="2458976513889241970" onmouseenter="enter('2458976513889241970');" onmouseout="out('2458976513889241970');" style="">1050                          f.setIsVisible(true);                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1051                      }                                                                                             </span>
<span  style="">1052                                                                                                                    </span>
<span class="5834486891091757584" onmouseenter="enter('5834486891091757584');" onmouseout="out('5834486891091757584');" style="">1053                      // Add the field to the appropriate FieldGroup                                                </span>
<span class="-1630394947978608902" onmouseenter="enter('-1630394947978608902');" onmouseout="out('-1630394947978608902');" style="">1054                      if (fmd.getGroup() == null) {                                                                 </span>
<span class="3071880473996022899" onmouseenter="enter('3071880473996022899');" onmouseout="out('3071880473996022899');" style="">1055                          homelessFields.add(f);                                                                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1056                      } else {                                                                                      </span>
<span class="-627881575057280692" onmouseenter="enter('-627881575057280692');" onmouseout="out('-627881575057280692');" style="">1057                          ef.addField(cmd, f, fmd.getGroup(), fmd.getGroupOrder(), fmd.getTab(), fmd.getTabOrder());</span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1058                      }                                                                                             </span>
<span  style="">1059                                                                                                                    </span>
<span class="-260794109391612652" onmouseenter="enter('-260794109391612652');" onmouseout="out('-260794109391612652');" style="">1060                      if (StringUtils.isNotEmpty(fmd.getAssociatedFieldName())) {                                   </span>
<span class="1585765122221468977" onmouseenter="enter('1585765122221468977');" onmouseout="out('1585765122221468977');" style="">1061                          fieldsWithAssociations.add(f);                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1062                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1063                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1064              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1065          }                                                                                                         </span>
<span  style="">1066                                                                                                                    </span>
<span class="6148030130019845419" onmouseenter="enter('6148030130019845419');" onmouseout="out('6148030130019845419');" style="">1067          for (Field f : homelessFields) {                                                                          </span>
<span class="-6046258263556396205" onmouseenter="enter('-6046258263556396205');" onmouseout="out('-6046258263556396205');" style="">1068              ef.addField(cmd, f, null, null, null, null);                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1069          }                                                                                                         </span>
<span  style="">1070                                                                                                                    </span>
<span class="-3286982672520556792" onmouseenter="enter('-3286982672520556792');" onmouseout="out('-3286982672520556792');" style="">1071          for (Field f : fieldsWithAssociations) {                                                                  </span>
<span class="785772779687320855" onmouseenter="enter('785772779687320855');" onmouseout="out('785772779687320855');" style="">1072              Field associatedField = findAssociatedField(ef, f);                                                   </span>
<span class="6919514124287833745" onmouseenter="enter('6919514124287833745');" onmouseout="out('6919514124287833745');" style="">1073              if (associatedField != null) {                                                                        </span>
<span class="-9095335942205451536" onmouseenter="enter('-9095335942205451536');" onmouseout="out('-9095335942205451536');" style="">1074                  associatedField.setShouldRender(false);                                                           </span>
<span class="-2878946802658158988" onmouseenter="enter('-2878946802658158988');" onmouseout="out('-2878946802658158988');" style="">1075                  f.setAssociatedFieldName(associatedField.getName());                                              </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1076              } else {                                                                                              </span>
<span class="7502764524857913063" onmouseenter="enter('7502764524857913063');" onmouseout="out('7502764524857913063');" style="">1077                  f.setAssociatedFieldName(null);                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1078              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1079          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1080      }                                                                                                             </span>
<span  style="">1081                                                                                                                    </span>
<span class="5762152267566694667" onmouseenter="enter('5762152267566694667');" onmouseout="out('5762152267566694667');" style="">1082      protected String getFieldComponentRenderer(BasicFieldMetadata fmd) {                                          </span>
<span class="-6767392947458941920" onmouseenter="enter('-6767392947458941920');" onmouseout="out('-6767392947458941920');" style="">1083          if (StringUtils.isNotBlank(fmd.getFieldComponentRendererTemplate())) {                                    </span>
<span class="-4402549852767313598" onmouseenter="enter('-4402549852767313598');" onmouseout="out('-4402549852767313598');" style="">1084              return fmd.getFieldComponentRendererTemplate();                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1085          }                                                                                                         </span>
<span class="-2438701386053680498" onmouseenter="enter('-2438701386053680498');" onmouseout="out('-2438701386053680498');" style="">1086          return fmd.getFieldComponentRenderer()==null?null:fmd.getFieldComponentRenderer().toString();             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1087      }                                                                                                             </span>
<span  style="">1088                                                                                                                    </span>
<span class="590879222954667418" onmouseenter="enter('590879222954667418');" onmouseout="out('590879222954667418');" style="">1089      protected String getGridFieldComponentRenderer(BasicFieldMetadata fmd) {                                      </span>
<span class="7087363204431348668" onmouseenter="enter('7087363204431348668');" onmouseout="out('7087363204431348668');" style="">1090          if (StringUtils.isNotBlank(fmd.getGridFieldComponentRendererTemplate())) {                                </span>
<span class="5883340390214386055" onmouseenter="enter('5883340390214386055');" onmouseout="out('5883340390214386055');" style="">1091              return fmd.getGridFieldComponentRendererTemplate();                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1092          }                                                                                                         </span>
<span class="-7287009246855470147" onmouseenter="enter('-7287009246855470147');" onmouseout="out('-7287009246855470147');" style="">1093          return fmd.getGridFieldComponentRenderer()==null?null:fmd.getGridFieldComponentRenderer().toString();     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1094      }                                                                                                             </span>
<span  style="">1095                                                                                                                    </span>
<span class="-6562218165361923864" onmouseenter="enter('-6562218165361923864');" onmouseout="out('-6562218165361923864');" style="">1096      private Field findAssociatedField(EntityForm ef, Field f) {                                                   </span>
<span class="4174722207334262365" onmouseenter="enter('4174722207334262365');" onmouseout="out('4174722207334262365');" style="">1097          // Try on the parent object                                                                               </span>
<span class="-1388610369938356597" onmouseenter="enter('-1388610369938356597');" onmouseout="out('-1388610369938356597');" style="">1098          Field associatedField = ef.findField(f.getAssociatedFieldName());                                         </span>
<span  style="">1099                                                                                                                    </span>
<span class="-8057832969882318537" onmouseenter="enter('-8057832969882318537');" onmouseout="out('-8057832969882318537');" style="">1100          if (associatedField == null) {                                                                            </span>
<span class="-4315839339096222496" onmouseenter="enter('-4315839339096222496');" onmouseout="out('-4315839339096222496');" style="">1101              // Check the field&#x27;s path                                                                             </span>
<span class="-3489350751131411992" onmouseenter="enter('-3489350751131411992');" onmouseout="out('-3489350751131411992');" style="">1102              String[] fieldPathParts = f.getName().split(&quot;\\.&quot;);                                                   </span>
<span class="1068980887755244265" onmouseenter="enter('1068980887755244265');" onmouseout="out('1068980887755244265');" style="">1103              String testPath = &quot;&quot;;                                                                                 </span>
<span  style="">1104                                                                                                                    </span>
<span class="8677207579218271674" onmouseenter="enter('8677207579218271674');" onmouseout="out('8677207579218271674');" style="">1105              for (String path : fieldPathParts) {                                                                  </span>
<span class="-680931118424370884" onmouseenter="enter('-680931118424370884');" onmouseout="out('-680931118424370884');" style="">1106                  testPath += path + &quot;.&quot;;                                                                           </span>
<span  style="">1107                                                                                                                    </span>
<span class="-7538860418203958404" onmouseenter="enter('-7538860418203958404');" onmouseout="out('-7538860418203958404');" style="">1108                  associatedField = ef.findField(testPath + f.getAssociatedFieldName());                            </span>
<span class="6919514124287833745" onmouseenter="enter('6919514124287833745');" onmouseout="out('6919514124287833745');" style="">1109                  if (associatedField != null) {                                                                    </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1110                      break;                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1111                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1112              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1113          }                                                                                                         </span>
<span class="6563544998135133572" onmouseenter="enter('6563544998135133572');" onmouseout="out('6563544998135133572');" style="">1114          return associatedField;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1115      }                                                                                                             </span>
<span  style="">1116                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1117      /**                                                                                                           </span>
<span class="4647529469504582079" onmouseenter="enter('4647529469504582079');" onmouseout="out('4647529469504582079');" style="">1118       * This method gets the {@link AdminSection} for the given foreignKeyClass parameter. If none exists,         </span>
<span class="2236731749674454246" onmouseenter="enter('2236731749674454246');" onmouseout="out('2236731749674454246');" style="">1119       * it returns the foreignKeyClass.                                                                            </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1120       *                                                                                                            </span>
<span class="-7514279057842438906" onmouseenter="enter('-7514279057842438906');" onmouseout="out('-7514279057842438906');" style="">1121       * @param foreignKeyClass the {@link String} class name                                                       </span>
<span class="7993230679639641523" onmouseenter="enter('7993230679639641523');" onmouseout="out('7993230679639641523');" style="">1122       * @return the admin section pathname                                                                         </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1123       */                                                                                                           </span>
<span class="-6189454574455820362" onmouseenter="enter('-6189454574455820362');" onmouseout="out('-6189454574455820362');" style="">1124      protected String getAdminSectionPath(String foreignKeyClass) {                                                </span>
<span class="8135436521484469970" onmouseenter="enter('8135436521484469970');" onmouseout="out('8135436521484469970');" style="">1125          if (foreignKeyClass != null) {                                                                            </span>
<span class="-4650736007503046520" onmouseenter="enter('-4650736007503046520');" onmouseout="out('-4650736007503046520');" style=""><abbr title="1126              AdminSection foreignKeySection = adminNavigationService.findAdminSectionByClassAndSectionId(foreignKeyClass, null);">1126              AdminSection foreignKeySection = adminNavigationService.findAdminSectionByClassAndSectionId(foreignKeyðŸ”µ</abbr></span>
<span class="-7201502785940326159" onmouseenter="enter('-7201502785940326159');" onmouseout="out('-7201502785940326159');" style="">1127              return foreignKeySection != null ? foreignKeySection.getUrl() : foreignKeyClass;                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1128          }                                                                                                         </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1129          return null;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1130      }                                                                                                             </span>
<span  style="">1131                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1132      /**                                                                                                           </span>
<span class="-9148493238200404936" onmouseenter="enter('-9148493238200404936');" onmouseout="out('-9148493238200404936');" style=""><abbr title="1133       * NOTE: This method will attempt to merge tabs if the unprocessed {@link TabMetadata#getTabName()} is equal to">1133       * NOTE: This method will attempt to merge tabs if the unprocessed {@link TabMetadata#getTabName()} is equal tðŸ”µ</abbr></span>
<span class="-1274816497587979877" onmouseenter="enter('-1274816497587979877');" onmouseout="out('-1274816497587979877');" style="">1134       *  the processed value of another tab.                                                                       </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1135       *                                                                                                            </span>
<span class="-2406703893472258014" onmouseenter="enter('-2406703893472258014');" onmouseout="out('-2406703893472258014');" style="">1136       * For example, if {@link TabMetadata#getTabName()} is &quot;Example&quot;, there is a another tab where                </span>
<span class="9184140520214431771" onmouseenter="enter('9184140520214431771');" onmouseout="out('9184140520214431771');" style="">1137       *  {@link TabMetadata#getTabName()} is &quot;Example_Tab&quot;, and a message property where &#x27;Example_Tab=Example&#x27;,    </span>
<span class="8352702158102966043" onmouseenter="enter('8352702158102966043');" onmouseout="out('8352702158102966043');" style="">1138       *  then the tabs should be merged together, so that we do not end up rendering multiple &quot;Example&quot; tabs.      </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1139       */                                                                                                           </span>
<span class="-3548818374011565463" onmouseenter="enter('-3548818374011565463');" onmouseout="out('-3548818374011565463');" style="">1140      protected void setEntityFormTabsAndGroups(EntityForm ef, Map&lt;String, TabMetadata&gt; tabMetadataMap) {           </span>
<span class="-1610887690100779398" onmouseenter="enter('-1610887690100779398');" onmouseout="out('-1610887690100779398');" style="">1141          if (tabMetadataMap != null) {                                                                             </span>
<span class="8239819812127968949" onmouseenter="enter('8239819812127968949');" onmouseout="out('8239819812127968949');" style="">1142              Set&lt;String&gt; tabMetadataKeySet = tabMetadataMap.keySet();                                              </span>
<span class="-8816277474934611824" onmouseenter="enter('-8816277474934611824');" onmouseout="out('-8816277474934611824');" style="">1143              for (String tabKey : tabMetadataKeySet) {                                                             </span>
<span class="7310777629515294934" onmouseenter="enter('7310777629515294934');" onmouseout="out('7310777629515294934');" style="">1144                  TabMetadata tabMetadata = tabMetadataMap.get(tabKey);                                             </span>
<span class="-3382451411952830270" onmouseenter="enter('-3382451411952830270');" onmouseout="out('-3382451411952830270');" style="">1145                  String unprocessedTabName = getUnprocessedNameOfMatchingTab(tabMetadata, tabMetadataKeySet);      </span>
<span  style="">1146                                                                                                                    </span>
<span class="-4558225351015241817" onmouseenter="enter('-4558225351015241817');" onmouseout="out('-4558225351015241817');" style="">1147                  if (foundMatchingTab(unprocessedTabName)) {                                                       </span>
<span class="7976020367549586090" onmouseenter="enter('7976020367549586090');" onmouseout="out('7976020367549586090');" style="">1148                      if (!tabExists(ef, unprocessedTabName)) {                                                     </span>
<span class="-6968658869865565527" onmouseenter="enter('-6968658869865565527');" onmouseout="out('-6968658869865565527');" style="">1149                          TabMetadata originalTabMetadata = tabMetadataMap.get(unprocessedTabName);                 </span>
<span class="6840551509140741312" onmouseenter="enter('6840551509140741312');" onmouseout="out('6840551509140741312');" style="">1150                          unprocessedTabName = ef.addTabFromTabMetadata(originalTabMetadata);                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1151                      }                                                                                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1152                  } else {                                                                                          </span>
<span class="2531268367420417827" onmouseenter="enter('2531268367420417827');" onmouseout="out('2531268367420417827');" style="">1153                      if (tabExists(ef, tabKey)) {                                                                  </span>
<span class="3894487325805599765" onmouseenter="enter('3894487325805599765');" onmouseout="out('3894487325805599765');" style="">1154                          unprocessedTabName = tabKey;                                                              </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1155                      } else {                                                                                      </span>
<span class="-854176188216766174" onmouseenter="enter('-854176188216766174');" onmouseout="out('-854176188216766174');" style="">1156                          unprocessedTabName = ef.addTabFromTabMetadata(tabMetadata);                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1157                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1158                  }                                                                                                 </span>
<span  style="">1159                                                                                                                    </span>
<span class="4976299653458575754" onmouseenter="enter('4976299653458575754');" onmouseout="out('4976299653458575754');" style="">1160                  Set&lt;String&gt; groupMetadataKeySet = tabMetadata.getGroupMetadata().keySet();                        </span>
<span class="-7961344655248674499" onmouseenter="enter('-7961344655248674499');" onmouseout="out('-7961344655248674499');" style="">1161                  for (String groupKey : groupMetadataKeySet) {                                                     </span>
<span class="6345765707562916689" onmouseenter="enter('6345765707562916689');" onmouseout="out('6345765707562916689');" style=""><abbr title="1162                      ef.addGroupFromGroupMetadata(tabMetadata.getGroupMetadata().get(groupKey), unprocessedTabName);">1162                      ef.addGroupFromGroupMetadata(tabMetadata.getGroupMetadata().get(groupKey), unprocessedTabName)ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1163                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1164              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1165          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1166      }                                                                                                             </span>
<span  style="">1167                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1168      /**                                                                                                           </span>
<span class="7306113150058239600" onmouseenter="enter('7306113150058239600');" onmouseout="out('7306113150058239600');" style="">1169       * Search for any other tab on the target entity that has the same display value                              </span>
<span class="240467368059923303" onmouseenter="enter('240467368059923303');" onmouseout="out('240467368059923303');" style="">1170       *  as the value provided tab name.                                                                           </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1171       *                                                                                                            </span>
<span class="-4650758346108360443" onmouseenter="enter('-4650758346108360443');" onmouseout="out('-4650758346108360443');" style="">1172       * This assumes that the {@link TabMetadata#getTabName()} is in the form of a processed message property.     </span>
<span class="-478812681452175174" onmouseenter="enter('-478812681452175174');" onmouseout="out('-478812681452175174');" style=""><abbr title="1173       *  For example, if {@link TabMetadata#getTabName()} is &quot;Example&quot;, there is a tabKey from the tabMetadataKeySet">1173       *  For example, if {@link TabMetadata#getTabName()} is &quot;Example&quot;, there is a tabKey from the tabMetadataKeySeðŸ”µ</abbr></span>
<span class="818185943405205448" onmouseenter="enter('818185943405205448');" onmouseout="out('818185943405205448');" style="">1174       *  that is &quot;Example_Tab&quot;, and a message property where &#x27;Example_Tab=Example&#x27;, then this method should return </span>
<span class="-3733456167855611550" onmouseenter="enter('-3733456167855611550');" onmouseout="out('-3733456167855611550');" style="">1175       *  &quot;Example_Tab&quot; which will end up causing the tabs to merge together.                                       </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1176       *                                                                                                            </span>
<span class="6715625924911503951" onmouseenter="enter('6715625924911503951');" onmouseout="out('6715625924911503951');" style="">1177       * If a tab with the same display value cannot be found, then we should return null to indicate that there    </span>
<span class="-816382718997149765" onmouseenter="enter('-816382718997149765');" onmouseout="out('-816382718997149765');" style="">1178       *  is no matching tab with the same processed tabName value.                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1179       */                                                                                                           </span>
<span class="2531890089338051353" onmouseenter="enter('2531890089338051353');" onmouseout="out('2531890089338051353');" style="">1180      protected String getUnprocessedNameOfMatchingTab(TabMetadata tabMetadata, Set&lt;String&gt; tabMetadataKeySet) {    </span>
<span class="-8816277474934611824" onmouseenter="enter('-8816277474934611824');" onmouseout="out('-8816277474934611824');" style="">1181          for (String tabKey : tabMetadataKeySet) {                                                                 </span>
<span class="-5779793862119901002" onmouseenter="enter('-5779793862119901002');" onmouseout="out('-5779793862119901002');" style="">1182              String tabName = tabMetadata.getTabName();                                                            </span>
<span  style="">1183                                                                                                                    </span>
<span class="-8422051325525888747" onmouseenter="enter('-8422051325525888747');" onmouseout="out('-8422051325525888747');" style="">1184              if (processedTabKeyMatchesTabName(tabName, tabKey)) {                                                 </span>
<span class="3937451821444963358" onmouseenter="enter('3937451821444963358');" onmouseout="out('3937451821444963358');" style="">1185                  return tabKey;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1186              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1187          }                                                                                                         </span>
<span  style="">1188                                                                                                                    </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1189          return null;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1190      }                                                                                                             </span>
<span  style="">1191                                                                                                                    </span>
<span class="-1619438245958020737" onmouseenter="enter('-1619438245958020737');" onmouseout="out('-1619438245958020737');" style="">1192      protected boolean processedTabKeyMatchesTabName(String tabName, String candidateTabKey) {                     </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1193          try {                                                                                                     </span>
<span class="-7659299375574203210" onmouseenter="enter('-7659299375574203210');" onmouseout="out('-7659299375574203210');" style="">1194              String processedCandidateTabKey = BLCMessageUtils.getMessage(candidateTabKey);                        </span>
<span class="-2617676223106948028" onmouseenter="enter('-2617676223106948028');" onmouseout="out('-2617676223106948028');" style="">1195              boolean candidateTabKeyWasProcessed = !StringUtils.equals(candidateTabKey, processedCandidateTabKey); </span>
<span  style="">1196                                                                                                                    </span>
<span class="2100898845031278709" onmouseenter="enter('2100898845031278709');" onmouseout="out('2100898845031278709');" style="">1197              return candidateTabKeyWasProcessed &amp;&amp; StringUtils.equalsIgnoreCase(tabName, processedCandidateTabKey);</span>
<span class="-2410148316212931681" onmouseenter="enter('-2410148316212931681');" onmouseout="out('-2410148316212931681');" style="">1198          } catch (NoSuchMessageException e) {                                                                      </span>
<span class="1284296105156752555" onmouseenter="enter('1284296105156752555');" onmouseout="out('1284296105156752555');" style="">1199              LOG.debug(&quot;No such message exists for &quot; + candidateTabKey, e);                                        </span>
<span  style="">1200                                                                                                                    </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1201              return false;                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1202          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1203      }                                                                                                             </span>
<span  style="">1204                                                                                                                    </span>
<span class="-7105644214565709555" onmouseenter="enter('-7105644214565709555');" onmouseout="out('-7105644214565709555');" style="">1205      protected boolean foundMatchingTab(String unprocessedTabName) {                                               </span>
<span class="6373538944534305470" onmouseenter="enter('6373538944534305470');" onmouseout="out('6373538944534305470');" style="">1206          return (unprocessedTabName != null);                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1207      }                                                                                                             </span>
<span  style="">1208                                                                                                                    </span>
<span class="-4736520597342818391" onmouseenter="enter('-4736520597342818391');" onmouseout="out('-4736520597342818391');" style="">1209      protected boolean tabExists(EntityForm ef, String tabKey) {                                                   </span>
<span class="-9204309431556138424" onmouseenter="enter('-9204309431556138424');" onmouseout="out('-9204309431556138424');" style="">1210          return (ef.findTab(tabKey) != null);                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1211      }                                                                                                             </span>
<span  style="">1212                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1213      @Override                                                                                                     </span>
<span class="1718091831588260637" onmouseenter="enter('1718091831588260637');" onmouseout="out('1718091831588260637');" style="">1214      public String extractDefaultValueFromFieldData(String fieldType, BasicFieldMetadata fmd) {                    </span>
<span class="-269468944390639664" onmouseenter="enter('-269468944390639664');" onmouseout="out('-269468944390639664');" style="">1215          String defaultValue = fmd.getDefaultValue();                                                              </span>
<span class="8489757536552213717" onmouseenter="enter('8489757536552213717');" onmouseout="out('8489757536552213717');" style="">1216          if (fieldType.equals(SupportedFieldType.RULE_SIMPLE.toString())                                           </span>
<span class="-6155398851072788654" onmouseenter="enter('-6155398851072788654');" onmouseout="out('-6155398851072788654');" style="">1217                  || fieldType.equals(SupportedFieldType.RULE_SIMPLE_TIME.toString())                               </span>
<span class="-7731003048108517996" onmouseenter="enter('-7731003048108517996');" onmouseout="out('-7731003048108517996');" style="">1218                  || fieldType.equals(SupportedFieldType.RULE_WITH_QUANTITY.toString())) {                          </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1219              return null;                                                                                          </span>
<span class="1147822807152761026" onmouseenter="enter('1147822807152761026');" onmouseout="out('1147822807152761026');" style="">1220          } else if (fieldType.equals(SupportedFieldType.INTEGER.toString())) {                                     </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1221              try {                                                                                                 </span>
<span class="2272843703065247861" onmouseenter="enter('2272843703065247861');" onmouseout="out('2272843703065247861');" style="">1222                  Integer.parseInt(defaultValue);                                                                   </span>
<span class="-1817228964429458922" onmouseenter="enter('-1817228964429458922');" onmouseout="out('-1817228964429458922');" style="">1223              } catch (NumberFormatException  e) {                                                                  </span>
<span class="8614817519589782911" onmouseenter="enter('8614817519589782911');" onmouseout="out('8614817519589782911');" style="">1224                  String msg = buildMsgForDefValException(SupportedFieldType.INTEGER.toString(), fmd, defaultValue);</span>
<span class="8745206262250964374" onmouseenter="enter('8745206262250964374');" onmouseout="out('8745206262250964374');" style="">1225                  LOG.debug(msg);                                                                                   </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1226                  return null;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1227              }                                                                                                     </span>
<span class="5641784789080954731" onmouseenter="enter('5641784789080954731');" onmouseout="out('5641784789080954731');" style="">1228          } else if (fieldType.equals(SupportedFieldType.DECIMAL.toString())                                        </span>
<span class="-1839121721540903009" onmouseenter="enter('-1839121721540903009');" onmouseout="out('-1839121721540903009');" style="">1229                  || fieldType.equals(SupportedFieldType.MONEY.toString())) {                                       </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1230              try {                                                                                                 </span>
<span class="6039577623543160332" onmouseenter="enter('6039577623543160332');" onmouseout="out('6039577623543160332');" style="">1231                  BigDecimal val = new BigDecimal(defaultValue);                                                    </span>
<span class="-1817228964429458922" onmouseenter="enter('-1817228964429458922');" onmouseout="out('-1817228964429458922');" style="">1232              } catch (NumberFormatException  e) {                                                                  </span>
<span class="-1552449043883066886" onmouseenter="enter('-1552449043883066886');" onmouseout="out('-1552449043883066886');" style="">1233                  String msg = buildMsgForDefValException(fieldType.toString(), fmd, defaultValue);                 </span>
<span class="8745206262250964374" onmouseenter="enter('8745206262250964374');" onmouseout="out('8745206262250964374');" style="">1234                  LOG.debug(msg);                                                                                   </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1235                  return null;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1236              }                                                                                                     </span>
<span class="-6181979390419592035" onmouseenter="enter('-6181979390419592035');" onmouseout="out('-6181979390419592035');" style="">1237          } else if (fieldType.equals(SupportedFieldType.BOOLEAN.toString())) {                                     </span>
<span class="-8619074302025013401" onmouseenter="enter('-8619074302025013401');" onmouseout="out('-8619074302025013401');" style="">1238              if (!defaultValue.toLowerCase().equals(&quot;true&quot;) &amp;&amp; !defaultValue.toLowerCase().equals(&quot;false&quot;)         </span>
<span class="-3108075317025400269" onmouseenter="enter('-3108075317025400269');" onmouseout="out('-3108075317025400269');" style="">1239                      &amp;&amp; !defaultValue.toUpperCase().equals(&quot;Y&quot;) &amp;&amp; !defaultValue.toUpperCase().equals(&quot;N&quot;)) {      </span>
<span class="6946244061563138313" onmouseenter="enter('6946244061563138313');" onmouseout="out('6946244061563138313');" style="">1240                  String msg = buildMsgForDefValException(SupportedFieldType.BOOLEAN.toString(), fmd, defaultValue);</span>
<span class="8745206262250964374" onmouseenter="enter('8745206262250964374');" onmouseout="out('8745206262250964374');" style="">1241                  LOG.debug(msg);                                                                                   </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1242                  return null;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1243              }                                                                                                     </span>
<span class="-3789417077200952901" onmouseenter="enter('-3789417077200952901');" onmouseout="out('-3789417077200952901');" style="">1244          } else if (fieldType.equals(SupportedFieldType.DATE.toString())) {                                        </span>
<span class="4798322797585331848" onmouseenter="enter('4798322797585331848');" onmouseout="out('4798322797585331848');" style="">1245              DateFormat format = FormatUtil.getDateFormat();                                                       </span>
<span class="-4817829731735260045" onmouseenter="enter('-4817829731735260045');" onmouseout="out('-4817829731735260045');" style="">1246              if (defaultValue.toLowerCase().contains(&quot;today&quot;)) {                                                   </span>
<span class="-5510717227080119052" onmouseenter="enter('-5510717227080119052');" onmouseout="out('-5510717227080119052');" style="">1247                  defaultValue = format.format(new Date());                                                         </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1248              } else {                                                                                              </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1249                  try {                                                                                             </span>
<span class="8253580772209920524" onmouseenter="enter('8253580772209920524');" onmouseout="out('8253580772209920524');" style="">1250                      Date date = format.parse(defaultValue);                                                       </span>
<span class="-692739804773039587" onmouseenter="enter('-692739804773039587');" onmouseout="out('-692739804773039587');" style="">1251                      defaultValue = format.format(date);                                                           </span>
<span class="-8792048397909294459" onmouseenter="enter('-8792048397909294459');" onmouseout="out('-8792048397909294459');" style="">1252                  } catch (ParseException e) {                                                                      </span>
<span class="6717521370520655041" onmouseenter="enter('6717521370520655041');" onmouseout="out('6717521370520655041');" style=""><abbr title="1253                      String msg = buildMsgForDefValException(SupportedFieldType.DATE.toString(), fmd, defaultValue);">1253                      String msg = buildMsgForDefValException(SupportedFieldType.DATE.toString(), fmd, defaultValue)ðŸ”µ</abbr></span>
<span class="8745206262250964374" onmouseenter="enter('8745206262250964374');" onmouseout="out('8745206262250964374');" style="">1254                      LOG.debug(msg);                                                                               </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1255                      return null;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1256                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1257              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1258          }                                                                                                         </span>
<span class="8908764284674475175" onmouseenter="enter('8908764284674475175');" onmouseout="out('8908764284674475175');" style="">1259          return defaultValue;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1260      }                                                                                                             </span>
<span  style="">1261                                                                                                                    </span>
<span class="-1197861841111609975" onmouseenter="enter('-1197861841111609975');" onmouseout="out('-1197861841111609975');" style="">1262      protected String buildMsgForDefValException(String type, BasicFieldMetadata fmd, String defaultValue) {       </span>
<span class="5037735576431495054" onmouseenter="enter('5037735576431495054');" onmouseout="out('5037735576431495054');" style=""><abbr title="1263          return StringUtil.sanitize(fmd.getTargetClass()) + &quot; : &quot; + StringUtil.sanitize(fmd.getName()) + &quot; - Failed to parse &quot;">1263          return StringUtil.sanitize(fmd.getTargetClass()) + &quot; : &quot; + StringUtil.sanitize(fmd.getName()) + &quot; - FailedðŸ”µ</abbr></span>
<span class="-1280239945418423816" onmouseenter="enter('-1280239945418423816');" onmouseout="out('-1280239945418423816');" style="">1264                  + StringUtil.sanitize(type) + &quot; from DefaultValue [ &quot; + StringUtil.sanitize(defaultValue) + &quot; ]&quot;; </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1265      }                                                                                                             </span>
<span  style="">1266                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1267      @Override                                                                                                     </span>
<span class="-3338021322965865498" onmouseenter="enter('-3338021322965865498');" onmouseout="out('-3338021322965865498');" style="">1268      public void removeNonApplicableFields(ClassMetadata cmd, EntityForm entityForm, String entityType) {          </span>
<span class="3681854507729164346" onmouseenter="enter('3681854507729164346');" onmouseout="out('3681854507729164346');" style="">1269          for (Property p : cmd.getProperties()) {                                                                  </span>
<span class="2404027636674988266" onmouseenter="enter('2404027636674988266');" onmouseout="out('2404027636674988266');" style="">1270              if (!ArrayUtils.contains(p.getMetadata().getAvailableToTypes(), entityType)) {                        </span>
<span class="3958420768854658911" onmouseenter="enter('3958420768854658911');" onmouseout="out('3958420768854658911');" style="">1271                  entityForm.removeField(p.getName());                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1272              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1273          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1274      }                                                                                                             </span>
<span  style="">1275                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1276      @Override                                                                                                     </span>
<span class="-2894789102162308959" onmouseenter="enter('-2894789102162308959');" onmouseout="out('-2894789102162308959');" style="">1277      public EntityForm createEntityForm(ClassMetadata cmd, List&lt;SectionCrumb&gt; sectionCrumbs)                       </span>
<span class="1998458335829271558" onmouseenter="enter('1998458335829271558');" onmouseout="out('1998458335829271558');" style="">1278              throws ServiceException {                                                                             </span>
<span class="-438894394526699599" onmouseenter="enter('-438894394526699599');" onmouseout="out('-438894394526699599');" style="">1279          EntityForm ef = createStandardEntityForm();                                                               </span>
<span class="1972535118391022312" onmouseenter="enter('1972535118391022312');" onmouseout="out('1972535118391022312');" style="">1280          populateEntityForm(cmd, ef, sectionCrumbs);                                                               </span>
<span class="3260120157565581788" onmouseenter="enter('3260120157565581788');" onmouseout="out('3260120157565581788');" style="">1281          return ef;                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1282      }                                                                                                             </span>
<span  style="">1283                                                                                                                    </span>
<span class="1553424846104610474" onmouseenter="enter('1553424846104610474');" onmouseout="out('1553424846104610474');" style="">1284      protected String extractSectionIdentifierFromCrumb(List&lt;SectionCrumb&gt; sectionCrumbs) {                        </span>
<span class="4444452196378800952" onmouseenter="enter('4444452196378800952');" onmouseout="out('4444452196378800952');" style="">1285          if (sectionCrumbs != null &amp;&amp; sectionCrumbs.size() &gt; 0) {                                                  </span>
<span class="-4491351221393184649" onmouseenter="enter('-4491351221393184649');" onmouseout="out('-4491351221393184649');" style="">1286              return sectionCrumbs.get(0).getSectionIdentifier();                                                   </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1287          } else {                                                                                                  </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1288              return null;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1289          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1290      }                                                                                                             </span>
<span  style="">1291                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1292      @Override                                                                                                     </span>
<span class="-4968680944420537869" onmouseenter="enter('-4968680944420537869');" onmouseout="out('-4968680944420537869');" style="">1293      public void populateEntityForm(ClassMetadata cmd, EntityForm ef, List&lt;SectionCrumb&gt; sectionCrumbs)            </span>
<span class="1998458335829271558" onmouseenter="enter('1998458335829271558');" onmouseout="out('1998458335829271558');" style="">1294              throws ServiceException {                                                                             </span>
<span class="-4942912710752555081" onmouseenter="enter('-4942912710752555081');" onmouseout="out('-4942912710752555081');" style="">1295          ef.setCeilingEntityClassname(cmd.getCeilingType());                                                       </span>
<span  style="">1296                                                                                                                    </span>
<span class="6809887928661746160" onmouseenter="enter('6809887928661746160');" onmouseout="out('6809887928661746160');" style="">1297          String sectionIdentifier = extractSectionIdentifierFromCrumb(sectionCrumbs);                              </span>
<span  style="">1298                                                                                                                    </span>
<span class="-3855604053801420635" onmouseenter="enter('-3855604053801420635');" onmouseout="out('-3855604053801420635');" style="">1299          AdminSection section = navigationService.findAdminSectionByClassAndSectionId(cmd.getCeilingType(),        </span>
<span class="6889816604380354873" onmouseenter="enter('6889816604380354873');" onmouseout="out('6889816604380354873');" style="">1300                  sectionIdentifier);                                                                               </span>
<span class="2297837107111400660" onmouseenter="enter('2297837107111400660');" onmouseout="out('2297837107111400660');" style="">1301          if (section != null) {                                                                                    </span>
<span class="4296466575148476303" onmouseenter="enter('4296466575148476303');" onmouseout="out('4296466575148476303');" style="">1302              ef.setSectionKey(section.getUrl());                                                                   </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1303          } else {                                                                                                  </span>
<span class="-1586535842116388806" onmouseenter="enter('-1586535842116388806');" onmouseout="out('-1586535842116388806');" style="">1304              ef.setSectionKey(cmd.getCeilingType());                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1305          }                                                                                                         </span>
<span class="-5184985761895407688" onmouseenter="enter('-5184985761895407688');" onmouseout="out('-5184985761895407688');" style="">1306          ef.setSectionCrumbsImpl(sectionCrumbs);                                                                   </span>
<span  style="">1307                                                                                                                    </span>
<span class="-8713614433600438253" onmouseenter="enter('-8713614433600438253');" onmouseout="out('-8713614433600438253');" style="">1308          setEntityFormTabsAndGroups(ef, cmd.getTabAndGroupMetadata());                                             </span>
<span  style="">1309                                                                                                                    </span>
<span class="3369160299270687085" onmouseenter="enter('3369160299270687085');" onmouseout="out('3369160299270687085');" style="">1310          setEntityFormFields(cmd, ef, Arrays.asList(cmd.getProperties()));                                         </span>
<span  style="">1311                                                                                                                    </span>
<span class="8675843354365413624" onmouseenter="enter('8675843354365413624');" onmouseout="out('8675843354365413624');" style="">1312          populateDropdownToOneFields(ef, cmd);                                                                     </span>
<span  style="">1313                                                                                                                    </span>
<span class="1014702433169640296" onmouseenter="enter('1014702433169640296');" onmouseout="out('1014702433169640296');" style="">1314          extensionManager.getProxy().modifyUnpopulatedEntityForm(ef);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1315      }                                                                                                             </span>
<span  style="">1316                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1317      /**                                                                                                           </span>
<span class="7551045119262463393" onmouseenter="enter('7551045119262463393');" onmouseout="out('7551045119262463393');" style="">1318       * This method is invoked when EntityForms are created and is meant to provide a hook to add                  </span>
<span class="-342244960216512570" onmouseenter="enter('-342244960216512570');" onmouseout="out('-342244960216512570');" style="">1319       * additional entity form actions for implementors of Broadleaf. Broadleaf modules will typically             </span>
<span class="-7928784631676494068" onmouseenter="enter('-7928784631676494068');" onmouseout="out('-7928784631676494068');" style="">1320       * leverage {@link FormBuilderExtensionHandler#addAdditionalFormActions(EntityForm)} method.                  </span>
<span class="8361682950840699982" onmouseenter="enter('8361682950840699982');" onmouseout="out('8361682950840699982');" style="">1321       * @param ef                                                                                                  </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1322       */                                                                                                           </span>
<span class="-8094119228358129217" onmouseenter="enter('-8094119228358129217');" onmouseout="out('-8094119228358129217');" style="">1323      protected void addAdditionalFormActions(EntityForm ef) {                                                      </span>
<span  style="">1324                                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1325      }                                                                                                             </span>
<span  style="">1326                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1327      @Override                                                                                                     </span>
<span class="1394778707631761813" onmouseenter="enter('1394778707631761813');" onmouseout="out('1394778707631761813');" style="">1328      public EntityForm createEntityForm(ClassMetadata cmd, Entity entity, List&lt;SectionCrumb&gt; sectionCrumbs)        </span>
<span class="1998458335829271558" onmouseenter="enter('1998458335829271558');" onmouseout="out('1998458335829271558');" style="">1329              throws ServiceException {                                                                             </span>
<span class="-438894394526699599" onmouseenter="enter('-438894394526699599');" onmouseout="out('-438894394526699599');" style="">1330          EntityForm ef = createStandardEntityForm();                                                               </span>
<span class="-4073847895348507412" onmouseenter="enter('-4073847895348507412');" onmouseout="out('-4073847895348507412');" style="">1331          populateEntityForm(cmd, entity, ef, sectionCrumbs);                                                       </span>
<span class="3191217127862437415" onmouseenter="enter('3191217127862437415');" onmouseout="out('3191217127862437415');" style="">1332          addAdditionalFormActions(ef);                                                                             </span>
<span class="8511655867693649187" onmouseenter="enter('8511655867693649187');" onmouseout="out('8511655867693649187');" style="">1333          extensionManager.getProxy().addAdditionalFormActions(ef);                                                 </span>
<span class="3260120157565581788" onmouseenter="enter('3260120157565581788');" onmouseout="out('3260120157565581788');" style="">1334          return ef;                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1335      }                                                                                                             </span>
<span  style="">1336                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1337      @Override                                                                                                     </span>
<span class="-6571706150833686716" onmouseenter="enter('-6571706150833686716');" onmouseout="out('-6571706150833686716');" style=""><abbr title="1338      public void populateEntityForm(ClassMetadata cmd, Entity entity, EntityForm ef, List&lt;SectionCrumb&gt; sectionCrumbs)">1338      public void populateEntityForm(ClassMetadata cmd, Entity entity, EntityForm ef, List&lt;SectionCrumb&gt; sectionCrumðŸ”µ</abbr></span>
<span class="1998458335829271558" onmouseenter="enter('1998458335829271558');" onmouseout="out('1998458335829271558');" style="">1339              throws ServiceException {                                                                             </span>
<span class="-7069998291250786390" onmouseenter="enter('-7069998291250786390');" onmouseout="out('-7069998291250786390');" style="">1340          // Get the empty form with appropriate fields                                                             </span>
<span class="1972535118391022312" onmouseenter="enter('1972535118391022312');" onmouseout="out('1972535118391022312');" style="">1341          populateEntityForm(cmd, ef, sectionCrumbs);                                                               </span>
<span  style="">1342                                                                                                                    </span>
<span class="-5459387306565336413" onmouseenter="enter('-5459387306565336413');" onmouseout="out('-5459387306565336413');" style="">1343          String idProperty = adminEntityService.getIdProperty(cmd);                                                </span>
<span class="1051557575021412686" onmouseenter="enter('1051557575021412686');" onmouseout="out('1051557575021412686');" style="">1344          ef.setId(entity.findProperty(idProperty).getValue());                                                     </span>
<span class="2566657873931456162" onmouseenter="enter('2566657873931456162');" onmouseout="out('2566657873931456162');" style="">1345          ef.setEntityType(entity.getType()[0]);                                                                    </span>
<span  style="">1346                                                                                                                    </span>
<span class="-5752959739321640962" onmouseenter="enter('-5752959739321640962');" onmouseout="out('-5752959739321640962');" style="">1347          populateEntityFormFieldValues(cmd, entity, ef);                                                           </span>
<span  style="">1348                                                                                                                    </span>
<span class="5257407325597611191" onmouseenter="enter('5257407325597611191');" onmouseout="out('5257407325597611191');" style="">1349          Property p = entity.findProperty(BasicPersistenceModule.MAIN_ENTITY_NAME_PROPERTY);                       </span>
<span class="-4724213940983805674" onmouseenter="enter('-4724213940983805674');" onmouseout="out('-4724213940983805674');" style="">1350          if (p != null) {                                                                                          </span>
<span class="8443013364869289595" onmouseenter="enter('8443013364869289595');" onmouseout="out('8443013364869289595');" style="">1351              ef.setMainEntityName(p.getValue());                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1352          }                                                                                                         </span>
<span  style="">1353                                                                                                                    </span>
<span class="8285751274454564858" onmouseenter="enter('8285751274454564858');" onmouseout="out('8285751274454564858');" style="">1354          extensionManager.getProxy().modifyPopulatedEntityForm(ef, entity);                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1355      }                                                                                                             </span>
<span  style="">1356                                                                                                                    </span>
<span class="2253933316337433516" onmouseenter="enter('2253933316337433516');" onmouseout="out('2253933316337433516');" style="">1357      protected void setVisibilityBasedOnShowIfFieldEquals(ClassMetadata cmd, Entity entity, EntityForm ef) {       </span>
<span class="3681854507729164346" onmouseenter="enter('3681854507729164346');" onmouseout="out('3681854507729164346');" style="">1358          for (Property p : cmd.getProperties()) {                                                                  </span>
<span class="5177519309013644806" onmouseenter="enter('5177519309013644806');" onmouseout="out('5177519309013644806');" style="">1359              FieldMetadata fmd = p.getMetadata();                                                                  </span>
<span  style="">1360                                                                                                                    </span>
<span class="-8245965221352030812" onmouseenter="enter('-8245965221352030812');" onmouseout="out('-8245965221352030812');" style="">1361              if (shouldHideField(fmd, entity)) {                                                                   </span>
<span class="722393245301383233" onmouseenter="enter('722393245301383233');" onmouseout="out('722393245301383233');" style="">1362                  if (fmd instanceof CollectionMetadata) {                                                          </span>
<span class="7188659998484598345" onmouseenter="enter('7188659998484598345');" onmouseout="out('7188659998484598345');" style="">1363                      ef.removeListGrid(p.getName());                                                               </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1364                  } else {                                                                                          </span>
<span class="6870393746446615822" onmouseenter="enter('6870393746446615822');" onmouseout="out('6870393746446615822');" style="">1365                      ef.removeField(p.getName());                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1366                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1367              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1368          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1369      }                                                                                                             </span>
<span  style="">1370                                                                                                                    </span>
<span class="-3330248760149008409" onmouseenter="enter('-3330248760149008409');" onmouseout="out('-3330248760149008409');" style="">1371      protected boolean shouldHideField(FieldMetadata fmd, Entity entity) {                                         </span>
<span class="-345780899678155518" onmouseenter="enter('-345780899678155518');" onmouseout="out('-345780899678155518');" style="">1372          if (fmd == null || fmd.getShowIfFieldEquals() == null) {                                                  </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1373              return false;                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1374          }                                                                                                         </span>
<span  style="">1375                                                                                                                    </span>
<span class="-8659631323845256695" onmouseenter="enter('-8659631323845256695');" onmouseout="out('-8659631323845256695');" style="">1376          for (String property : fmd.getShowIfFieldEquals().keySet()) {                                             </span>
<span class="3930945657137454760" onmouseenter="enter('3930945657137454760');" onmouseout="out('3930945657137454760');" style="">1377              List&lt;String&gt; values = fmd.getShowIfFieldEquals().get(property);                                       </span>
<span class="-2693573208742209473" onmouseenter="enter('-2693573208742209473');" onmouseout="out('-2693573208742209473');" style="">1378              Property entityProp = entity.findProperty(property);                                                  </span>
<span  style="">1379                                                                                                                    </span>
<span class="-167840816186910781" onmouseenter="enter('-167840816186910781');" onmouseout="out('-167840816186910781');" style="">1380              if (entityProp == null || values.contains(entityProp.getValue())) {                                   </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1381                  return false;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1382              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1383          }                                                                                                         </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">1384          return true;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1385      }                                                                                                             </span>
<span  style="">1386                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1387      @Override                                                                                                     </span>
<span class="7910083739222815843" onmouseenter="enter('7910083739222815843');" onmouseout="out('7910083739222815843');" style="">1388      public void populateEntityFormFieldValues(ClassMetadata cmd, Entity entity, EntityForm ef) {                  </span>
<span class="4641578827349754543" onmouseenter="enter('4641578827349754543');" onmouseout="out('4641578827349754543');" style="">1389          // Set the appropriate property values                                                                    </span>
<span class="3681854507729164346" onmouseenter="enter('3681854507729164346');" onmouseout="out('3681854507729164346');" style="">1390          for (Property p : cmd.getProperties()) {                                                                  </span>
<span class="-1029066852878262358" onmouseenter="enter('-1029066852878262358');" onmouseout="out('-1029066852878262358');" style="">1391              if (p.getMetadata() instanceof BasicFieldMetadata) {                                                  </span>
<span class="-6469477226116674237" onmouseenter="enter('-6469477226116674237');" onmouseout="out('-6469477226116674237');" style="">1392                  BasicFieldMetadata basicFM = (BasicFieldMetadata) p.getMetadata();                                </span>
<span  style="">1393                                                                                                                    </span>
<span class="7733316759648943983" onmouseenter="enter('7733316759648943983');" onmouseout="out('7733316759648943983');" style="">1394                  Property entityProp = entity.findProperty(p.getName());                                           </span>
<span  style="">1395                                                                                                                    </span>
<span class="4021222749559453503" onmouseenter="enter('4021222749559453503');" onmouseout="out('4021222749559453503');" style="">1396                  boolean explicitlyShown = VisibilityEnum.FORM_EXPLICITLY_SHOWN.equals(basicFM.getVisibility());   </span>
<span class="7366025904056557465" onmouseenter="enter('7366025904056557465');" onmouseout="out('7366025904056557465');" style="">1397                  //always show special map fields                                                                  </span>
<span class="-2401445545222685489" onmouseenter="enter('-2401445545222685489');" onmouseout="out('-2401445545222685489');" style="">1398                  if (p.getName().equals(&quot;key&quot;) || p.getName().equals(&quot;priorKey&quot;)) {                                </span>
<span class="7778793828648750297" onmouseenter="enter('7778793828648750297');" onmouseout="out('7778793828648750297');" style="">1399                      explicitlyShown = true;                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1400                  }                                                                                                 </span>
<span  style="">1401                                                                                                                    </span>
<span class="-6309572172727120265" onmouseenter="enter('-6309572172727120265');" onmouseout="out('-6309572172727120265');" style="">1402                  if (entityProp == null &amp;&amp; explicitlyShown) {                                                      </span>
<span class="8909260264488361187" onmouseenter="enter('8909260264488361187');" onmouseout="out('8909260264488361187');" style="">1403                      Field field = ef.findField(p.getName());                                                      </span>
<span class="-470699824173107204" onmouseenter="enter('-470699824173107204');" onmouseout="out('-470699824173107204');" style="">1404                      if (field != null) {                                                                          </span>
<span class="-412233450447024620" onmouseenter="enter('-412233450447024620');" onmouseout="out('-412233450447024620');" style="">1405                          field.setValue(null);                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1406                      }                                                                                             </span>
<span class="-3654453610792959969" onmouseenter="enter('-3654453610792959969');" onmouseout="out('-3654453610792959969');" style=""><abbr title="1407                  } else if (entityProp == null &amp;&amp; !SupportedFieldType.PASSWORD_CONFIRM.equals(basicFM.getExplicitFieldType())) {">1407                  } else if (entityProp == null &amp;&amp; !SupportedFieldType.PASSWORD_CONFIRM.equals(basicFM.getExplicitFiðŸ”µ</abbr></span>
<span class="6870393746446615822" onmouseenter="enter('6870393746446615822');" onmouseout="out('6870393746446615822');" style="">1408                      ef.removeField(p.getName());                                                                  </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1409                  } else {                                                                                          </span>
<span class="8909260264488361187" onmouseenter="enter('8909260264488361187');" onmouseout="out('8909260264488361187');" style="">1410                      Field field = ef.findField(p.getName());                                                      </span>
<span class="-470699824173107204" onmouseenter="enter('-470699824173107204');" onmouseout="out('-470699824173107204');" style="">1411                      if (field != null) {                                                                          </span>
<span class="-2366650903096921345" onmouseenter="enter('-2366650903096921345');" onmouseout="out('-2366650903096921345');" style="">1412                          if (entityProp != null) {                                                                 </span>
<span class="4638600769415474673" onmouseenter="enter('4638600769415474673');" onmouseout="out('4638600769415474673');" style=""><abbr title="1413                              //protect against null - can happen with password confirmation fields (i.e. admin user)">1413                              //protect against null - can happen with password confirmation fields (i.e. admin userðŸ”µ</abbr></span>
<span class="8379702483069295441" onmouseenter="enter('8379702483069295441');" onmouseout="out('8379702483069295441');" style="">1414                              field.setDirty(entityProp.getIsDirty());                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1415                          }                                                                                         </span>
<span class="-7071797664598394524" onmouseenter="enter('-7071797664598394524');" onmouseout="out('-7071797664598394524');" style="">1416                          if (basicFM.getFieldType()==SupportedFieldType.RULE_SIMPLE                                </span>
<span class="-6985772052695519723" onmouseenter="enter('-6985772052695519723');" onmouseout="out('-6985772052695519723');" style="">1417                                  || basicFM.getFieldType()==SupportedFieldType.RULE_SIMPLE_TIME                    </span>
<span class="8398044977893461025" onmouseenter="enter('8398044977893461025');" onmouseout="out('8398044977893461025');" style="">1418                                  || basicFM.getFieldType()==SupportedFieldType.RULE_WITH_QUANTITY) {               </span>
<span class="4021621821134603536" onmouseenter="enter('4021621821134603536');" onmouseout="out('4021621821134603536');" style="">1419                              RuleBuilderField rbf = (RuleBuilderField) field;                                      </span>
<span class="-7695608741173734167" onmouseenter="enter('-7695608741173734167');" onmouseout="out('-7695608741173734167');" style="">1420                              if (entity.getPMap().containsKey(rbf.getJsonFieldName())) {                           </span>
<span class="-6319430319708671435" onmouseenter="enter('-6319430319708671435');" onmouseout="out('-6319430319708671435');" style="">1421                                  String json = entity.getPMap().get(rbf.getJsonFieldName()).getValue();            </span>
<span class="-6775685118155466056" onmouseenter="enter('-6775685118155466056');" onmouseout="out('-6775685118155466056');" style="">1422                                  rbf.setJson(json);                                                                </span>
<span class="-5885429731931553725" onmouseenter="enter('-5885429731931553725');" onmouseout="out('-5885429731931553725');" style="">1423                                  DataWrapper dw = convertJsonToDataWrapper(json);                                  </span>
<span class="-3408161092817379645" onmouseenter="enter('-3408161092817379645');" onmouseout="out('-3408161092817379645');" style="">1424                                  if (dw != null) {                                                                 </span>
<span class="7188823867343032185" onmouseenter="enter('7188823867343032185');" onmouseout="out('7188823867343032185');" style="">1425                                      rbf.setDataWrapper(dw);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1426                                  }                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1427                              }                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1428                          }                                                                                         </span>
<span class="-4769937124220254644" onmouseenter="enter('-4769937124220254644');" onmouseout="out('-4769937124220254644');" style="">1429                          if (basicFM.getFieldType() == SupportedFieldType.MEDIA) {                                 </span>
<span class="627899284580660581" onmouseenter="enter('627899284580660581');" onmouseout="out('627899284580660581');" style="">1430                              field.setValue(entityProp.getValue());                                                </span>
<span class="-3405146348302376065" onmouseenter="enter('-3405146348302376065');" onmouseout="out('-3405146348302376065');" style="">1431                              field.setDisplayValue(entityProp.getDisplayValue());                                  </span>
<span class="7597965270557979966" onmouseenter="enter('7597965270557979966');" onmouseout="out('7597965270557979966');" style="">1432                              MediaField mf = (MediaField) field;                                                   </span>
<span class="-7494069843850344001" onmouseenter="enter('-7494069843850344001');" onmouseout="out('-7494069843850344001');" style=""><abbr title="1433                              Class&lt;MediaDto&gt; type = entityConfiguration.lookupEntityClass(MediaDto.class.getName(), MediaDto.class);">1433                              Class&lt;MediaDto&gt; type = entityConfiguration.lookupEntityClass(MediaDto.class.getName(),ðŸ”µ</abbr></span>
<span class="8674870911105205925" onmouseenter="enter('8674870911105205925');" onmouseout="out('8674870911105205925');" style=""><abbr title="1434                              mf.setMedia(mediaBuilderService.convertJsonToMedia(entityProp.getUnHtmlEncodedValue(), type));">1434                              mf.setMedia(mediaBuilderService.convertJsonToMedia(entityProp.getUnHtmlEncodedValue(),ðŸ”µ</abbr></span>
<span class="8860382562253463844" onmouseenter="enter('8860382562253463844');" onmouseout="out('8860382562253463844');" style="">1435                          } else if (!SupportedFieldType.PASSWORD_CONFIRM.equals(basicFM.getExplicitFieldType())) { </span>
<span class="627899284580660581" onmouseenter="enter('627899284580660581');" onmouseout="out('627899284580660581');" style="">1436                              field.setValue(entityProp.getValue());                                                </span>
<span class="-3405146348302376065" onmouseenter="enter('-3405146348302376065');" onmouseout="out('-3405146348302376065');" style="">1437                              field.setDisplayValue(entityProp.getDisplayValue());                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1438                          }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1439                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1440                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1441              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1442          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1443      }                                                                                                             </span>
<span  style="">1444                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1445      /**                                                                                                           </span>
<span class="-628877191560702928" onmouseenter="enter('-628877191560702928');" onmouseout="out('-628877191560702928');" style="">1446       * When using Thymeleaf, we need to convert the JSON string back to                                           </span>
<span class="1787417412343624491" onmouseenter="enter('1787417412343624491');" onmouseout="out('1787417412343624491');" style="">1447       * a DataWrapper object because Thymeleaf escapes JSON strings.                                               </span>
<span class="5903545593073761450" onmouseenter="enter('5903545593073761450');" onmouseout="out('5903545593073761450');" style="">1448       * Thymeleaf uses it&#x27;s own object de-serializer                                                               </span>
<span class="5324834623619770328" onmouseenter="enter('5324834623619770328');" onmouseout="out('5324834623619770328');" style="">1449       * see: https://github.com/thymeleaf/thymeleaf/issues/84                                                      </span>
<span class="363134610140381216" onmouseenter="enter('363134610140381216');" onmouseout="out('363134610140381216');" style="">1450       * see: http://forum.thymeleaf.org/Spring-Javascript-and-escaped-JSON-td4024739.html                          </span>
<span class="-1207310572973527556" onmouseenter="enter('-1207310572973527556');" onmouseout="out('-1207310572973527556');" style="">1451       * @param json                                                                                                </span>
<span class="-6577536486120138335" onmouseenter="enter('-6577536486120138335');" onmouseout="out('-6577536486120138335');" style="">1452       * @return DataWrapper                                                                                        </span>
<span class="-2042953791166134795" onmouseenter="enter('-2042953791166134795');" onmouseout="out('-2042953791166134795');" style="">1453       * @throws IOException                                                                                        </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1454       */                                                                                                           </span>
<span class="2430913214947894128" onmouseenter="enter('2430913214947894128');" onmouseout="out('2430913214947894128');" style="">1455      protected DataWrapper convertJsonToDataWrapper(String json) {                                                 </span>
<span class="-1540063925365497538" onmouseenter="enter('-1540063925365497538');" onmouseout="out('-1540063925365497538');" style="">1456          ObjectMapper mapper = new ObjectMapper();                                                                 </span>
<span class="2504782713133203850" onmouseenter="enter('2504782713133203850');" onmouseout="out('2504782713133203850');" style="">1457          DataDTODeserializer dtoDeserializer = new DataDTODeserializer();                                          </span>
<span class="-7069332746071020099" onmouseenter="enter('-7069332746071020099');" onmouseout="out('-7069332746071020099');" style=""><abbr title="1458          SimpleModule module = new SimpleModule(&quot;DataDTODeserializerModule&quot;, new Version(1, 0, 0, null, null, null));">1458          SimpleModule module = new SimpleModule(&quot;DataDTODeserializerModule&quot;, new Version(1, 0, 0, null, null, null)ðŸ”µ</abbr></span>
<span class="-4567775918027288963" onmouseenter="enter('-4567775918027288963');" onmouseout="out('-4567775918027288963');" style="">1459          module.addDeserializer(DataDTO.class, dtoDeserializer);                                                   </span>
<span class="1730387754846602273" onmouseenter="enter('1730387754846602273');" onmouseout="out('1730387754846602273');" style="">1460          mapper.registerModule(module);                                                                            </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1461          try {                                                                                                     </span>
<span class="-1255991149529842499" onmouseenter="enter('-1255991149529842499');" onmouseout="out('-1255991149529842499');" style="">1462              return mapper.readValue(json, DataWrapper.class);                                                     </span>
<span class="7080241092423381085" onmouseenter="enter('7080241092423381085');" onmouseout="out('7080241092423381085');" style="">1463          } catch (IOException e) {                                                                                 </span>
<span class="5897285764286536997" onmouseenter="enter('5897285764286536997');" onmouseout="out('5897285764286536997');" style="">1464              throw new RuntimeException(e);                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1465          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1466      }                                                                                                             </span>
<span  style="">1467                                                                                                                    </span>
<span class="-186207403366028020" onmouseenter="enter('-186207403366028020');" onmouseout="out('-186207403366028020');" style="">1468      protected void populateDropdownToOneFields(EntityForm ef, ClassMetadata cmd)                                  </span>
<span class="1998458335829271558" onmouseenter="enter('1998458335829271558');" onmouseout="out('1998458335829271558');" style="">1469              throws ServiceException {                                                                             </span>
<span class="3681854507729164346" onmouseenter="enter('3681854507729164346');" onmouseout="out('3681854507729164346');" style="">1470          for (Property p : cmd.getProperties()) {                                                                  </span>
<span class="-1029066852878262358" onmouseenter="enter('-1029066852878262358');" onmouseout="out('-1029066852878262358');" style="">1471              if (p.getMetadata() instanceof BasicFieldMetadata) {                                                  </span>
<span class="-5664285287189453326" onmouseenter="enter('-5664285287189453326');" onmouseout="out('-5664285287189453326');" style="">1472                  BasicFieldMetadata fmd = (BasicFieldMetadata) p.getMetadata();                                    </span>
<span class="-5975886890404137502" onmouseenter="enter('-5975886890404137502');" onmouseout="out('-5975886890404137502');" style="">1473                  if (LookupType.DROPDOWN.equals(fmd.getLookupType())                                               </span>
<span class="3923559904233294352" onmouseenter="enter('3923559904233294352');" onmouseout="out('3923559904233294352');" style="">1474                          &amp;&amp; !ArrayUtils.contains(getFormHiddenVisibilities(), fmd.getVisibility())) {              </span>
<span class="7405748751598380621" onmouseenter="enter('7405748751598380621');" onmouseout="out('7405748751598380621');" style="">1475                      // Get the records                                                                            </span>
<span class="-8258870037901756296" onmouseenter="enter('-8258870037901756296');" onmouseout="out('-8258870037901756296');" style="">1476                      PersistencePackageRequest toOnePpr = PersistencePackageRequest.standard()                     </span>
<span class="-1097107171578019007" onmouseenter="enter('-1097107171578019007');" onmouseout="out('-1097107171578019007');" style="">1477                              .withCeilingEntityClassname(fmd.getForeignKeyClass());                                </span>
<span class="6917610271852750158" onmouseenter="enter('6917610271852750158');" onmouseout="out('6917610271852750158');" style="">1478                      Entity[] rows = adminEntityService.getRecords(toOnePpr).getDynamicResultSet().getRecords();   </span>
<span  style="">1479                                                                                                                    </span>
<span class="-7705887927793372443" onmouseenter="enter('-7705887927793372443');" onmouseout="out('-7705887927793372443');" style="">1480                      // Determine the id field                                                                     </span>
<span class="6991332735797511760" onmouseenter="enter('6991332735797511760');" onmouseout="out('6991332735797511760');" style="">1481                      String idProp = null;                                                                         </span>
<span class="-6188886223790300160" onmouseenter="enter('-6188886223790300160');" onmouseout="out('-6188886223790300160');" style=""><abbr title="1482                      ClassMetadata foreignClassMd = adminEntityService.getClassMetadata(toOnePpr).getDynamicResultSet().getClassMetaData();">1482                      ClassMetadata foreignClassMd = adminEntityService.getClassMetadata(toOnePpr).getDynamicResultSðŸ”µ</abbr></span>
<span class="-7740302606560587079" onmouseenter="enter('-7740302606560587079');" onmouseout="out('-7740302606560587079');" style="">1483                      for (Property foreignP : foreignClassMd.getProperties()) {                                    </span>
<span class="-8528985220609178259" onmouseenter="enter('-8528985220609178259');" onmouseout="out('-8528985220609178259');" style="">1484                          if (foreignP.getMetadata() instanceof BasicFieldMetadata) {                               </span>
<span class="-8124244658776994002" onmouseenter="enter('-8124244658776994002');" onmouseout="out('-8124244658776994002');" style="">1485                              BasicFieldMetadata foreignFmd = (BasicFieldMetadata) foreignP.getMetadata();          </span>
<span class="-6615171596083676427" onmouseenter="enter('-6615171596083676427');" onmouseout="out('-6615171596083676427');" style="">1486                              if (SupportedFieldType.ID.equals(foreignFmd.getFieldType())) {                        </span>
<span class="8626137451888256629" onmouseenter="enter('8626137451888256629');" onmouseout="out('8626137451888256629');" style="">1487                                  idProp = foreignP.getName();                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1488                              }                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1489                          }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1490                      }                                                                                             </span>
<span  style="">1491                                                                                                                    </span>
<span class="-5011974389032314776" onmouseenter="enter('-5011974389032314776');" onmouseout="out('-5011974389032314776');" style="">1492                      if (idProp == null) {                                                                         </span>
<span class="9029833375734478123" onmouseenter="enter('9029833375734478123');" onmouseout="out('9029833375734478123');" style=""><abbr title="1493                          throw new RuntimeException(&quot;Could not determine ID property for &quot; + fmd.getForeignKeyClass());">1493                          throw new RuntimeException(&quot;Could not determine ID property for &quot; + fmd.getForeignKeyClassðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1494                      }                                                                                             </span>
<span  style="">1495                                                                                                                    </span>
<span class="-606725638262986950" onmouseenter="enter('-606725638262986950');" onmouseout="out('-606725638262986950');" style="">1496                      // Determine the display field                                                                </span>
<span class="-6330673322776160197" onmouseenter="enter('-6330673322776160197');" onmouseout="out('-6330673322776160197');" style="">1497                      String displayProp = fmd.getLookupDisplayProperty();                                          </span>
<span  style="">1498                                                                                                                    </span>
<span class="-282229918032301960" onmouseenter="enter('-282229918032301960');" onmouseout="out('-282229918032301960');" style="">1499                      // Build the options map                                                                      </span>
<span class="-4401347179302263251" onmouseenter="enter('-4401347179302263251');" onmouseout="out('-4401347179302263251');" style="">1500                      Map&lt;String, String&gt; options = new HashMap&lt;&gt;();                                                </span>
<span class="-2921615155367105394" onmouseenter="enter('-2921615155367105394');" onmouseout="out('-2921615155367105394');" style="">1501                      for (Entity row : rows) {                                                                     </span>
<span class="-9011123629733297811" onmouseenter="enter('-9011123629733297811');" onmouseout="out('-9011123629733297811');" style="">1502                          Property prop = row.findProperty(displayProp);                                            </span>
<span class="-3136494705922445009" onmouseenter="enter('-3136494705922445009');" onmouseout="out('-3136494705922445009');" style="">1503                          if (prop == null) {                                                                       </span>
<span class="-2859923640341758966" onmouseenter="enter('-2859923640341758966');" onmouseout="out('-2859923640341758966');" style=""><abbr title="1504                              LOG.warn(&quot;Could not find displayProp [&quot; + StringUtil.sanitize(displayProp) + &quot;] on entity [&quot; +">1504                              LOG.warn(&quot;Could not find displayProp [&quot; + StringUtil.sanitize(displayProp) + &quot;] on entðŸ”µ</abbr></span>
<span class="-2254314617729442046" onmouseenter="enter('-2254314617729442046');" onmouseout="out('-2254314617729442046');" style="">1505                                      ef.getCeilingEntityClassname() + &quot;]&quot;);                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1506                          } else {                                                                                  </span>
<span class="-8909758360620292667" onmouseenter="enter('-8909758360620292667');" onmouseout="out('-8909758360620292667');" style="">1507                              String displayValue = prop.getDisplayValue();                                         </span>
<span class="987960060831169722" onmouseenter="enter('987960060831169722');" onmouseout="out('987960060831169722');" style="">1508                              if (StringUtils.isBlank(displayValue)) {                                              </span>
<span class="23109960353036152" onmouseenter="enter('23109960353036152');" onmouseout="out('23109960353036152');" style="">1509                                  displayValue = prop.getValue();                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1510                              }                                                                                     </span>
<span class="-4077682651397635801" onmouseenter="enter('-4077682651397635801');" onmouseout="out('-4077682651397635801');" style="">1511                              options.put(row.findProperty(idProp).getValue(), displayValue);                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1512                          }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1513                      }                                                                                             </span>
<span  style="">1514                                                                                                                    </span>
<span class="4340190494430873223" onmouseenter="enter('4340190494430873223');" onmouseout="out('4340190494430873223');" style="">1515                      // Set the options on the entity field                                                        </span>
<span class="2851644107781283227" onmouseenter="enter('2851644107781283227');" onmouseout="out('2851644107781283227');" style="">1516                      ComboField cf = (ComboField) ef.findField(p.getName());                                       </span>
<span class="-5242484842909969229" onmouseenter="enter('-5242484842909969229');" onmouseout="out('-5242484842909969229');" style="">1517                      cf.setOptions(options);                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1518                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1519              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1520          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1521      }                                                                                                             </span>
<span  style="">1522                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1523      @Override                                                                                                     </span>
<span class="763969629629221745" onmouseenter="enter('763969629629221745');" onmouseout="out('763969629629221745');" style=""><abbr title="1524      public EntityForm createEntityForm(ClassMetadata cmd, Entity entity, Map&lt;String, DynamicResultSet&gt; collectionRecords, List&lt;SectionCrumb&gt; sectionCrumbs)">1524      public EntityForm createEntityForm(ClassMetadata cmd, Entity entity, Map&lt;String, DynamicResultSet&gt; collectionRðŸ”µ</abbr></span>
<span class="1998458335829271558" onmouseenter="enter('1998458335829271558');" onmouseout="out('1998458335829271558');" style="">1525              throws ServiceException {                                                                             </span>
<span class="-438894394526699599" onmouseenter="enter('-438894394526699599');" onmouseout="out('-438894394526699599');" style="">1526          EntityForm ef = createStandardEntityForm();                                                               </span>
<span class="-6955297876613536298" onmouseenter="enter('-6955297876613536298');" onmouseout="out('-6955297876613536298');" style="">1527          populateEntityForm(cmd, entity, collectionRecords, ef, sectionCrumbs);                                    </span>
<span class="3191217127862437415" onmouseenter="enter('3191217127862437415');" onmouseout="out('3191217127862437415');" style="">1528          addAdditionalFormActions(ef);                                                                             </span>
<span class="8511655867693649187" onmouseenter="enter('8511655867693649187');" onmouseout="out('8511655867693649187');" style="">1529          extensionManager.getProxy().addAdditionalFormActions(ef);                                                 </span>
<span class="3260120157565581788" onmouseenter="enter('3260120157565581788');" onmouseout="out('3260120157565581788');" style="">1530          return ef;                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1531      }                                                                                                             </span>
<span  style="">1532                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1533      @Override                                                                                                     </span>
<span class="8407616833525381833" onmouseenter="enter('8407616833525381833');" onmouseout="out('8407616833525381833');" style=""><abbr title="1534      public void populateEntityForm(ClassMetadata cmd, Entity entity, Map&lt;String, DynamicResultSet&gt; collectionRecords, EntityForm ef, List&lt;SectionCrumb&gt; sectionCrumbs)">1534      public void populateEntityForm(ClassMetadata cmd, Entity entity, Map&lt;String, DynamicResultSet&gt; collectionRecorðŸ”µ</abbr></span>
<span class="1998458335829271558" onmouseenter="enter('1998458335829271558');" onmouseout="out('1998458335829271558');" style="">1535              throws ServiceException {                                                                             </span>
<span class="-7842928199694637195" onmouseenter="enter('-7842928199694637195');" onmouseout="out('-7842928199694637195');" style="">1536          // Get the form with values for this entity                                                               </span>
<span class="-4073847895348507412" onmouseenter="enter('-4073847895348507412');" onmouseout="out('-4073847895348507412');" style="">1537          populateEntityForm(cmd, entity, ef, sectionCrumbs);                                                       </span>
<span  style="">1538                                                                                                                    </span>
<span class="-5693049027716773876" onmouseenter="enter('-5693049027716773876');" onmouseout="out('-5693049027716773876');" style="">1539          // Attach the sub-collection list grids and specialty UI support                                          </span>
<span class="3681854507729164346" onmouseenter="enter('3681854507729164346');" onmouseout="out('3681854507729164346');" style="">1540          for (Property p : cmd.getProperties()) {                                                                  </span>
<span class="-1029066852878262358" onmouseenter="enter('-1029066852878262358');" onmouseout="out('-1029066852878262358');" style="">1541              if (p.getMetadata() instanceof BasicFieldMetadata) {                                                  </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">1542                  continue;                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1543              }                                                                                                     </span>
<span  style="">1544                                                                                                                    </span>
<span class="7939644157431336741" onmouseenter="enter('7939644157431336741');" onmouseout="out('7939644157431336741');" style="">1545              if (!ArrayUtils.contains(p.getMetadata().getAvailableToTypes(), entity.getType()[0])) {               </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">1546                  continue;                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1547              }                                                                                                     </span>
<span  style="">1548                                                                                                                    </span>
<span class="5057378952086585538" onmouseenter="enter('5057378952086585538');" onmouseout="out('5057378952086585538');" style="">1549              if (collectionRecords != null &amp;&amp; !collectionRecords.isEmpty()) {                                      </span>
<span class="-2000540039355299527" onmouseenter="enter('-2000540039355299527');" onmouseout="out('-2000540039355299527');" style="">1550                  DynamicResultSet subCollectionEntities = collectionRecords.get(p.getName());                      </span>
<span class="732471662007756244" onmouseenter="enter('732471662007756244');" onmouseout="out('732471662007756244');" style="">1551                  String containingEntityId = entity.getPMap().get(ef.getIdProperty()).getValue();                  </span>
<span class="-2703128427729187311" onmouseenter="enter('-2703128427729187311');" onmouseout="out('-2703128427729187311');" style=""><abbr title="1552                  ListGrid listGrid = buildCollectionListGrid(containingEntityId, subCollectionEntities, p, ef.getSectionKey(), sectionCrumbs);">1552                  ListGrid listGrid = buildCollectionListGrid(containingEntityId, subCollectionEntities, p, ef.getSeðŸ”µ</abbr></span>
<span  style="">1553                                                                                                                    </span>
<span class="-4703142262249660615" onmouseenter="enter('-4703142262249660615');" onmouseout="out('-4703142262249660615');" style="">1554                  CollectionMetadata md = ((CollectionMetadata) p.getMetadata());                                   </span>
<span class="-1532720970191757712" onmouseenter="enter('-1532720970191757712');" onmouseout="out('-1532720970191757712');" style="">1555                  if (md instanceof BasicCollectionMetadata) {                                                      </span>
<span class="-1665410210923963053" onmouseenter="enter('-1665410210923963053');" onmouseout="out('-1665410210923963053');" style="">1556                      PersistencePackageRequest ppr = PersistencePackageRequest.fromMetadata(md, sectionCrumbs);    </span>
<span class="-9036890390079986870" onmouseenter="enter('-9036890390079986870');" onmouseout="out('-9036890390079986870');" style=""><abbr title="1557                      ClassMetadata collectionCmd = adminEntityService.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();">1557                      ClassMetadata collectionCmd = adminEntityService.getClassMetadata(ppr).getDynamicResultSet().gðŸ”µ</abbr></span>
<span class="7118158235764717040" onmouseenter="enter('7118158235764717040');" onmouseout="out('7118158235764717040');" style="">1558                      if (collectionCmd.getPolymorphicEntities().getChildren().length != 0) {                       </span>
<span class="-2529377774460288369" onmouseenter="enter('-2529377774460288369');" onmouseout="out('-2529377774460288369');" style=""><abbr title="1559                          List&lt;ClassTree&gt; entityTypes = collectionCmd.getPolymorphicEntities().getCollapsedClassTrees();">1559                          List&lt;ClassTree&gt; entityTypes = collectionCmd.getPolymorphicEntities().getCollapsedClassTreeðŸ”µ</abbr></span>
<span class="5700663076602659421" onmouseenter="enter('5700663076602659421');" onmouseout="out('5700663076602659421');" style="">1560                          ListGridActionGroup actionGroup = new ListGridActionGroup().withName(&quot;Add&quot;);              </span>
<span class="-8628780103469525246" onmouseenter="enter('-8628780103469525246');" onmouseout="out('-8628780103469525246');" style="">1561                          for (ClassTree entityType : entityTypes) {                                                </span>
<span class="-6085370745551409442" onmouseenter="enter('-6085370745551409442');" onmouseout="out('-6085370745551409442');" style="">1562                              ListGridAction ADD = new ListGridAction(ListGridAction.ADD)                           </span>
<span class="-8123842595880337680" onmouseenter="enter('-8123842595880337680');" onmouseout="out('-8123842595880337680');" style="">1563                                      .withButtonClass(AddMethodType.PERSIST_EMPTY==                                </span>
<span class="2458863346051852504" onmouseenter="enter('2458863346051852504');" onmouseout="out('2458863346051852504');" style=""><abbr title="1564                                              ((BasicCollectionMetadata) md).getAddMethodType()?&quot;sub-list-grid-add-empty&quot;:&quot;sub-list-grid-add&quot;)">1564                                              ((BasicCollectionMetadata) md).getAddMethodType()?&quot;sub-list-grid-add-eðŸ”µ</abbr></span>
<span class="625982968125452177" onmouseenter="enter('625982968125452177');" onmouseout="out('625982968125452177');" style="">1565                                      .withActionTargetEntity(entityType.getFullyQualifiedClassname())              </span>
<span class="1979584669038484989" onmouseenter="enter('1979584669038484989');" onmouseout="out('1979584669038484989');" style="">1566                                      .withUrlPostfix(&quot;/add&quot;)                                                       </span>
<span class="-2605498948604397141" onmouseenter="enter('-2605498948604397141');" onmouseout="out('-2605498948604397141');" style="">1567                                      .withIconClass(&quot;fa fa-plus&quot;)                                                  </span>
<span class="1382163113890128554" onmouseenter="enter('1382163113890128554');" onmouseout="out('1382163113890128554');" style="">1568                                      .withDisplayText(BLCMessageUtils.getMessage(entityType.getFriendlyName()));   </span>
<span class="-362768101277236570" onmouseenter="enter('-362768101277236570');" onmouseout="out('-362768101277236570');" style="">1569                              actionGroup.getListGridActions().add(0, ADD);                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1570                          }                                                                                         </span>
<span class="4272855771145592976" onmouseenter="enter('4272855771145592976');" onmouseout="out('4272855771145592976');" style="">1571                          listGrid.addToolbarActionGroup(actionGroup);                                              </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1572                      } else {                                                                                      </span>
<span class="-686829543212379321" onmouseenter="enter('-686829543212379321');" onmouseout="out('-686829543212379321');" style="">1573                          listGrid.getToolbarActions().add(0, AddMethodType.PERSIST_EMPTY==                         </span>
<span class="452604423250167593" onmouseenter="enter('452604423250167593');" onmouseout="out('452604423250167593');" style=""><abbr title="1574                                  ((BasicCollectionMetadata) md).getAddMethodType()?DefaultListGridActions.ADD_EMPTY:DefaultListGridActions.ADD);">1574                                  ((BasicCollectionMetadata) md).getAddMethodType()?DefaultListGridActions.ADD_EMPTYðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1575                      }                                                                                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1576                  } else {                                                                                          </span>
<span class="-8192307858907059023" onmouseenter="enter('-8192307858907059023');" onmouseout="out('-8192307858907059023');" style="">1577                      listGrid.getToolbarActions().add(0, DefaultListGridActions.ADD);                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1578                  }                                                                                                 </span>
<span  style="">1579                                                                                                                    </span>
<span class="1698654555130612252" onmouseenter="enter('1698654555130612252');" onmouseout="out('1698654555130612252');" style="">1580                  if (subCollectionEntities.getUnselectedTabMetadata().get(md.getTab())!=null) {                    </span>
<span class="-6246999191581452259" onmouseenter="enter('-6246999191581452259');" onmouseout="out('-6246999191581452259');" style="">1581                      ef.addListGrid(cmd, listGrid, md.getTab(), md.getTabOrder(), md.getGroup(), true);            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1582                  } else {                                                                                          </span>
<span class="-3682322762406032422" onmouseenter="enter('-3682322762406032422');" onmouseout="out('-3682322762406032422');" style="">1583                      ef.addListGrid(cmd, listGrid, md.getTab(), md.getTabOrder(), md.getGroup(), false);           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1584                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1585              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1586          }                                                                                                         </span>
<span  style="">1587                                                                                                                    </span>
<span class="-8574421891214577202" onmouseenter="enter('-8574421891214577202');" onmouseout="out('-8574421891214577202');" style="">1588          if (CollectionUtils.isEmpty(ef.getActions())) {                                                           </span>
<span class="-2237425030372835917" onmouseenter="enter('-2237425030372835917');" onmouseout="out('-2237425030372835917');" style="">1589              ef.addAction(DefaultEntityFormActions.SAVE);                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1590          }                                                                                                         </span>
<span  style="">1591                                                                                                                    </span>
<span class="-3017596271040445246" onmouseenter="enter('-3017596271040445246');" onmouseout="out('-3017596271040445246');" style="">1592          addDeleteActionIfAllowed(ef, cmd, entity);                                                                </span>
<span class="-1573379781634260780" onmouseenter="enter('-1573379781634260780');" onmouseout="out('-1573379781634260780');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1593 +        addDuplicateActionIfAllowed(ef, cmd);                                                                     </span>
<span class="-4992665792206214706" onmouseenter="enter('-4992665792206214706');" onmouseout="out('-4992665792206214706');" style="">1594          setReadOnlyState(ef, cmd, entity);                                                                        </span>
<span  style="">1595                                                                                                                    </span>
<span class="-2369176302071135940" onmouseenter="enter('-2369176302071135940');" onmouseout="out('-2369176302071135940');" style="">1596          // check for fields that should be hidden based on annotations                                            </span>
<span class="-7540431012384828138" onmouseenter="enter('-7540431012384828138');" onmouseout="out('-7540431012384828138');" style="">1597          setVisibilityBasedOnShowIfFieldEquals(cmd, entity, ef);                                                   </span>
<span  style="">1598                                                                                                                    </span>
<span class="-6573999189247732385" onmouseenter="enter('-6573999189247732385');" onmouseout="out('-6573999189247732385');" style="">1599          extensionManager.getProxy().modifyDetailEntityForm(ef);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1600      }                                                                                                             </span>
<span  style="">1601                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1602      /**                                                                                                           </span>
<span class="352645507222005893" onmouseenter="enter('352645507222005893');" onmouseout="out('352645507222005893');" style=""><abbr title="1603       * Adds the {@link DefaultEntityFormActions#DELETE} if the user is allowed to delete the &lt;b&gt;entity&lt;/b&gt;. The user can">1603       * Adds the {@link DefaultEntityFormActions#DELETE} if the user is allowed to delete the &lt;b&gt;entity&lt;/b&gt;. The usðŸ”µ</abbr></span>
<span class="-3708177379444774538" onmouseenter="enter('-3708177379444774538');" onmouseout="out('-3708177379444774538');" style="">1604       * delete an entity for the following cases:                                                                  </span>
<span class="3244483720103844454" onmouseenter="enter('3244483720103844454');" onmouseout="out('3244483720103844454');" style="">1605       * &lt;ol&gt;                                                                                                       </span>
<span class="5070277409715594588" onmouseenter="enter('5070277409715594588');" onmouseout="out('5070277409715594588');" style="">1606       *  &lt;li&gt;The user has the security to {@link EntityOperationType#REMOVE} the given class name represented by   </span>
<span class="8957232178890049809" onmouseenter="enter('8957232178890049809');" onmouseout="out('8957232178890049809');" style="">1607       *  the &lt;b&gt;entityForm&lt;/b&gt; (determined by {@link #getSecurityClassname(EntityForm, ClassMetadata)})&lt;/li&gt;       </span>
<span class="980044994252332631" onmouseenter="enter('980044994252332631');" onmouseout="out('980044994252332631');" style="">1608       *  &lt;li&gt;The user has the security necessary to delete the given &lt;b&gt;entity&lt;/b&gt; according to the                </span>
<span class="8011888861168395573" onmouseenter="enter('8011888861168395573');" onmouseout="out('8011888861168395573');" style="">1609       *  {@link RowLevelSecurityService#canRemove(AdminUser, Entity)}&lt;/li&gt;                                         </span>
<span class="6987349732947823565" onmouseenter="enter('6987349732947823565');" onmouseout="out('6987349732947823565');" style="">1610       * &lt;/ol&gt;                                                                                                      </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1611       *                                                                                                            </span>
<span class="-8102393608813481146" onmouseenter="enter('-8102393608813481146');" onmouseout="out('-8102393608813481146');" style="">1612       * @param entityForm the form being generated                                                                 </span>
<span class="-5184866399254269391" onmouseenter="enter('-5184866399254269391');" onmouseout="out('-5184866399254269391');" style="">1613       * @param cmd the metatadata used to build the &lt;b&gt;entityForm&lt;/b&gt; for the &lt;b&gt;entity&lt;/b&gt;                        </span>
<span class="-6994238295290465877" onmouseenter="enter('-6994238295290465877');" onmouseout="out('-6994238295290465877');" style="">1614       * @param entity the entity being edited                                                                      </span>
<span class="-8891442921277557778" onmouseenter="enter('-8891442921277557778');" onmouseout="out('-8891442921277557778');" style="">1615       * @see {@link SecurityVerifier#securityCheck(String, EntityOperationType)}                                   </span>
<span class="-3828641031793918168" onmouseenter="enter('-3828641031793918168');" onmouseout="out('-3828641031793918168');" style="">1616       * @see {@link #getSecurityClassname(EntityForm, ClassMetadata)}                                              </span>
<span class="8925161549930098588" onmouseenter="enter('8925161549930098588');" onmouseout="out('8925161549930098588');" style="">1617       * @see {@link RowLevelSecurityService#canRemove(AdminUser, Entity)}                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1618       */                                                                                                           </span>
<span class="1590261750272169439" onmouseenter="enter('1590261750272169439');" onmouseout="out('1590261750272169439');" style="">1619      protected void addDeleteActionIfAllowed(EntityForm entityForm, ClassMetadata cmd, Entity entity) {            </span>
<span class="-19082107155128737" onmouseenter="enter('-19082107155128737');" onmouseout="out('-19082107155128737');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1620 -        boolean canDelete = true;                                                                                 </span>
<span class="9176849152277833812" onmouseenter="enter('9176849152277833812');" onmouseout="out('9176849152277833812');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1621 +        if (isDeletionAllowed(entityForm, cmd, entity)) {                                                         </span>
<span class="-8844177275906434182" onmouseenter="enter('-8844177275906434182');" onmouseout="out('-8844177275906434182');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1622 +            entityForm.addAction(DefaultEntityFormActions.DELETE);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1623 +        }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1624 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1625 +                                                                                                                  </span>
<span class="1233024099247846166" onmouseenter="enter('1233024099247846166');" onmouseout="out('1233024099247846166');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1626 +    protected boolean isDeletionAllowed(final EntityForm entityForm, final ClassMetadata cmd,                     </span>
<span class="-5681436677530159700" onmouseenter="enter('-5681436677530159700');" onmouseout="out('-5681436677530159700');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1627 +            final Entity entity) {                                                                                </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1628          try {                                                                                                     </span>
<span class="5476366109962905346" onmouseenter="enter('5476366109962905346');" onmouseout="out('5476366109962905346');" style="">1629              String securityEntityClassname = getSecurityClassname(entityForm, cmd);                               </span>
<span class="-4824979268204802710" onmouseenter="enter('-4824979268204802710');" onmouseout="out('-4824979268204802710');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1630 -            adminRemoteSecurityService.securityCheck(securityEntityClassname, EntityOperationType.REMOVE);        </span>
<span class="-1437365640597623792" onmouseenter="enter('-1437365640597623792');" onmouseout="out('-1437365640597623792');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1631 +            adminRemoteSecurityService                                                                            </span>
<span class="9049592859337879981" onmouseenter="enter('9049592859337879981');" onmouseout="out('9049592859337879981');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1632 +                    .securityCheck(securityEntityClassname, EntityOperationType.REMOVE);                          </span>
<span class="9220844322816084446" onmouseenter="enter('9220844322816084446');" onmouseout="out('9220844322816084446');" style="">1633          } catch (ServiceException e) {                                                                            </span>
<span class="-8912377967087217182" onmouseenter="enter('-8912377967087217182');" onmouseout="out('-8912377967087217182');" style="">1634              if (e instanceof SecurityServiceException) {                                                          </span>
<span class="-8314772345016591645" onmouseenter="enter('-8314772345016591645');" onmouseout="out('-8314772345016591645');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1635 -                canDelete = false;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1636 -            }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1637 -        }                                                                                                         </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1638 -                                                                                                                  </span>
<span class="-179728255711330045" onmouseenter="enter('-179728255711330045');" onmouseout="out('-179728255711330045');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1639 -        // If I cannot update a record then I certainly cannot delete it either                                   </span>
<span class="7443786234015585252" onmouseenter="enter('7443786234015585252');" onmouseout="out('7443786234015585252');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1640 -        if (canDelete) {                                                                                          </span>
<span class="9060467924077423602" onmouseenter="enter('9060467924077423602');" onmouseout="out('9060467924077423602');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"><abbr title="1641 -            canDelete = rowLevelSecurityService.canUpdate(adminRemoteSecurityService.getPersistentAdminUser(), entity);">1641 -            canDelete = rowLevelSecurityService.canUpdate(adminRemoteSecurityService.getPersistentAdminUser(), entðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1642 -        }                                                                                                         </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1643 -                                                                                                                  </span>
<span class="7443786234015585252" onmouseenter="enter('7443786234015585252');" onmouseout="out('7443786234015585252');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1644 -        if (canDelete) {                                                                                          </span>
<span class="-6969811342559492698" onmouseenter="enter('-6969811342559492698');" onmouseout="out('-6969811342559492698');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"><abbr title="1645 -            canDelete = rowLevelSecurityService.canRemove(adminRemoteSecurityService.getPersistentAdminUser(), entity);">1645 -            canDelete = rowLevelSecurityService.canRemove(adminRemoteSecurityService.getPersistentAdminUser(), entðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1646 -        }                                                                                                         </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1647 -                                                                                                                  </span>
<span class="7443786234015585252" onmouseenter="enter('7443786234015585252');" onmouseout="out('7443786234015585252');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1648 -        if (canDelete) {                                                                                          </span>
<span class="-8844177275906434182" onmouseenter="enter('-8844177275906434182');" onmouseout="out('-8844177275906434182');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1649 -            entityForm.addAction(DefaultEntityFormActions.DELETE);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1650 -        }                                                                                                         </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1651 +                return false;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1652 +            }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1653 +        }                                                                                                         </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1654 +                                                                                                                  </span>
<span class="-6544480517582328932" onmouseenter="enter('-6544480517582328932');" onmouseout="out('-6544480517582328932');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1655 +        final AdminUser persistentAdminUser = adminRemoteSecurityService.getPersistentAdminUser();                </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1656 +                                                                                                                  </span>
<span class="-4253696723384610596" onmouseenter="enter('-4253696723384610596');" onmouseout="out('-4253696723384610596');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1657 +        return rowLevelSecurityService.canUpdate(persistentAdminUser, entity)                                     </span>
<span class="6878671858526625956" onmouseenter="enter('6878671858526625956');" onmouseout="out('6878671858526625956');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1658 +                &amp;&amp; rowLevelSecurityService.canRemove(persistentAdminUser, entity);                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1659 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1660 +                                                                                                                  </span>
<span class="8744244153887540139" onmouseenter="enter('8744244153887540139');" onmouseout="out('8744244153887540139');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1661 +    protected void addDuplicateActionIfAllowed(final EntityForm entityForm,                                       </span>
<span class="7968956867409491481" onmouseenter="enter('7968956867409491481');" onmouseout="out('7968956867409491481');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1662 +            final ClassMetadata cmd) {                                                                            </span>
<span class="-4074855000497140283" onmouseenter="enter('-4074855000497140283');" onmouseout="out('-4074855000497140283');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1663 +        if (isDuplicationAllowed(entityForm, cmd)) {                                                              </span>
<span class="6780575287202109079" onmouseenter="enter('6780575287202109079');" onmouseout="out('6780575287202109079');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1664 +            entityForm.addAction(DefaultEntityFormActions.DUPLICATE);                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1665 +        }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1666 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1667 +                                                                                                                  </span>
<span class="2750172847360880677" onmouseenter="enter('2750172847360880677');" onmouseout="out('2750172847360880677');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1668 +    protected boolean isDuplicationAllowed(final EntityForm entityForm, final ClassMetadata cmd) {                </span>
<span class="5761145246382260648" onmouseenter="enter('5761145246382260648');" onmouseout="out('5761145246382260648');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1669 +        final String securityClassname = getSecurityClassname(entityForm, cmd);                                   </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1670 +                                                                                                                  </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1671 +        try {                                                                                                     </span>
<span class="7910151490387293712" onmouseenter="enter('7910151490387293712');" onmouseout="out('7910151490387293712');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1672 +            adminRemoteSecurityService.securityCheck(securityClassname, EntityOperationType.ADD);                 </span>
<span class="9220844322816084446" onmouseenter="enter('9220844322816084446');" onmouseout="out('9220844322816084446');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1673 +        } catch (ServiceException e) {                                                                            </span>
<span class="-8912377967087217182" onmouseenter="enter('-8912377967087217182');" onmouseout="out('-8912377967087217182');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1674 +            if (e instanceof SecurityServiceException) {                                                          </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1675 +                return false;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1676 +            }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1677 +        }                                                                                                         </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1678 +                                                                                                                  </span>
<span class="3631252767096747840" onmouseenter="enter('3631252767096747840');" onmouseout="out('3631252767096747840');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1679 +        final Class&lt;?&gt; entityClass = dynamicEntityDao.getImplClass(securityClassname);                            </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1680 +                                                                                                                  </span>
<span class="-7591397042021229268" onmouseenter="enter('-7591397042021229268');" onmouseout="out('-7591397042021229268');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1681 +        return duplicator.validate(entityClass, Long.valueOf(entityForm.getId())) &amp;&amp;                              </span>
<span class="5950039316725693002" onmouseenter="enter('5950039316725693002');" onmouseout="out('5950039316725693002');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1682 +                rowLevelSecurityService.canAdd(adminRemoteSecurityService.getPersistentAdminUser(),               </span>
<span class="-9091740986951777867" onmouseenter="enter('-9091740986951777867');" onmouseout="out('-9091740986951777867');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1683 +                        securityClassname, cmd);                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1684      }                                                                                                             </span>
<span  style="">1685                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1686      /**                                                                                                           </span>
<span class="-8604925744257744736" onmouseenter="enter('-8604925744257744736');" onmouseout="out('-8604925744257744736');" style="">1687       * The given &lt;b&gt;entityForm&lt;/b&gt; is marked as readonly for the following cases:                                 </span>
<span class="3244483720103844454" onmouseenter="enter('3244483720103844454');" onmouseout="out('3244483720103844454');" style="">1688       * &lt;ol&gt;                                                                                                       </span>
<span class="8384568302593626864" onmouseenter="enter('8384568302593626864');" onmouseout="out('8384568302593626864');" style="">1689       *  &lt;li&gt;All of the properties from &lt;b&gt;cmd&lt;/b&gt; are readonly&lt;/b&gt;&lt;/li&gt;                                           </span>
<span class="3259494465539702713" onmouseenter="enter('3259494465539702713');" onmouseout="out('3259494465539702713');" style=""><abbr title="1690       *  &lt;li&gt;The user does not have the security to {@link EntityOperationType#UPDATE} the given class name represented by">1690       *  &lt;li&gt;The user does not have the security to {@link EntityOperationType#UPDATE} the given class name represeðŸ”µ</abbr></span>
<span class="8957232178890049809" onmouseenter="enter('8957232178890049809');" onmouseout="out('8957232178890049809');" style="">1691       *  the &lt;b&gt;entityForm&lt;/b&gt; (determined by {@link #getSecurityClassname(EntityForm, ClassMetadata)})&lt;/li&gt;       </span>
<span class="-661097031284754018" onmouseenter="enter('-661097031284754018');" onmouseout="out('-661097031284754018');" style="">1692       *  &lt;li&gt;The user does not have the security necessary to modify the given &lt;b&gt;entity&lt;/b&gt; according to the      </span>
<span class="1476257847894540357" onmouseenter="enter('1476257847894540357');" onmouseout="out('1476257847894540357');" style="">1693       *  {@link RowLevelSecurityService#canUpdate(AdminUser, Entity)}&lt;/li&gt;                                         </span>
<span class="6987349732947823565" onmouseenter="enter('6987349732947823565');" onmouseout="out('6987349732947823565');" style="">1694       * &lt;/ol&gt;                                                                                                      </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1695       *                                                                                                            </span>
<span class="-8102393608813481146" onmouseenter="enter('-8102393608813481146');" onmouseout="out('-8102393608813481146');" style="">1696       * @param entityForm the form being generated                                                                 </span>
<span class="-5184866399254269391" onmouseenter="enter('-5184866399254269391');" onmouseout="out('-5184866399254269391');" style="">1697       * @param cmd the metatadata used to build the &lt;b&gt;entityForm&lt;/b&gt; for the &lt;b&gt;entity&lt;/b&gt;                        </span>
<span class="-6994238295290465877" onmouseenter="enter('-6994238295290465877');" onmouseout="out('-6994238295290465877');" style="">1698       * @param entity the entity being edited                                                                      </span>
<span class="-8891442921277557778" onmouseenter="enter('-8891442921277557778');" onmouseout="out('-8891442921277557778');" style="">1699       * @see {@link SecurityVerifier#securityCheck(String, EntityOperationType)}                                   </span>
<span class="-3828641031793918168" onmouseenter="enter('-3828641031793918168');" onmouseout="out('-3828641031793918168');" style="">1700       * @see {@link #getSecurityClassname(EntityForm, ClassMetadata)}                                              </span>
<span class="3340343931427513832" onmouseenter="enter('3340343931427513832');" onmouseout="out('3340343931427513832');" style="">1701       * @see {@link RowLevelSecurityService#canUpdate(AdminUser, Entity)}                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1702       */                                                                                                           </span>
<span class="7475800010460682445" onmouseenter="enter('7475800010460682445');" onmouseout="out('7475800010460682445');" style="">1703      protected void setReadOnlyState(EntityForm entityForm, ClassMetadata cmd, Entity entity) {                    </span>
<span class="-3754358688511165958" onmouseenter="enter('-3754358688511165958');" onmouseout="out('-3754358688511165958');" style="">1704          boolean readOnly = true;                                                                                  </span>
<span  style="">1705                                                                                                                    </span>
<span class="-2305007204320036324" onmouseenter="enter('-2305007204320036324');" onmouseout="out('-2305007204320036324');" style="">1706          // If all of the fields are read only, we&#x27;ll mark the form as such                                        </span>
<span class="-3497335608114491506" onmouseenter="enter('-3497335608114491506');" onmouseout="out('-3497335608114491506');" style="">1707          for (Property property : cmd.getProperties()) {                                                           </span>
<span class="-5795738539482972481" onmouseenter="enter('-5795738539482972481');" onmouseout="out('-5795738539482972481');" style="">1708              FieldMetadata fieldMetadata = property.getMetadata();                                                 </span>
<span class="-638676474141600706" onmouseenter="enter('-638676474141600706');" onmouseout="out('-638676474141600706');" style="">1709              if (fieldMetadata instanceof BasicFieldMetadata) {                                                    </span>
<span class="-3122303192863427007" onmouseenter="enter('-3122303192863427007');" onmouseout="out('-3122303192863427007');" style=""><abbr title="1710                  readOnly = ((BasicFieldMetadata) fieldMetadata).getReadOnly() != null &amp;&amp; ((BasicFieldMetadata) fieldMetadata).getReadOnly();">1710                  readOnly = ((BasicFieldMetadata) fieldMetadata).getReadOnly() != null &amp;&amp; ((BasicFieldMetadata) fieðŸ”µ</abbr></span>
<span class="2916396140375617365" onmouseenter="enter('2916396140375617365');" onmouseout="out('2916396140375617365');" style="">1711                  if (!readOnly) {                                                                                  </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1712                      break;                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1713                  }                                                                                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1714              } else {                                                                                              </span>
<span class="2490832096811631077" onmouseenter="enter('2490832096811631077');" onmouseout="out('2490832096811631077');" style="">1715                  readOnly = ((CollectionMetadata) fieldMetadata).isMutable();                                      </span>
<span class="2916396140375617365" onmouseenter="enter('2916396140375617365');" onmouseout="out('2916396140375617365');" style="">1716                  if (!readOnly) {                                                                                  </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1717                      break;                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1718                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1719              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1720          }                                                                                                         </span>
<span  style="">1721                                                                                                                    </span>
<span class="2916396140375617365" onmouseenter="enter('2916396140375617365');" onmouseout="out('2916396140375617365');" style="">1722          if (!readOnly) {                                                                                          </span>
<span class="8591967978504453740" onmouseenter="enter('8591967978504453740');" onmouseout="out('8591967978504453740');" style=""><abbr title="1723              // If the user does not have edit permissions, we will go ahead and make the form read only to prevent confusion">1723              // If the user does not have edit permissions, we will go ahead and make the form read only to preventðŸ”µ</abbr></span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1724              try {                                                                                                 </span>
<span class="5476366109962905346" onmouseenter="enter('5476366109962905346');" onmouseout="out('5476366109962905346');" style="">1725                  String securityEntityClassname = getSecurityClassname(entityForm, cmd);                           </span>
<span class="7305757249405162956" onmouseenter="enter('7305757249405162956');" onmouseout="out('7305757249405162956');" style="">1726                  adminRemoteSecurityService.securityCheck(securityEntityClassname, EntityOperationType.UPDATE);    </span>
<span class="9220844322816084446" onmouseenter="enter('9220844322816084446');" onmouseout="out('9220844322816084446');" style="">1727              } catch (ServiceException e) {                                                                        </span>
<span class="-8912377967087217182" onmouseenter="enter('-8912377967087217182');" onmouseout="out('-8912377967087217182');" style="">1728                  if (e instanceof SecurityServiceException) {                                                      </span>
<span class="6120466793575593078" onmouseenter="enter('6120466793575593078');" onmouseout="out('6120466793575593078');" style="">1729                      readOnly = true;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1730                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1731              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1732          }                                                                                                         </span>
<span  style="">1733                                                                                                                    </span>
<span class="-2506720598607900340" onmouseenter="enter('-2506720598607900340');" onmouseout="out('-2506720598607900340');" style=""><abbr title="1734          // if the normal admin security service has not deemed this readonly and the all of the properties on the entity">1734          // if the normal admin security service has not deemed this readonly and the all of the properties on the ðŸ”µ</abbr></span>
<span class="-360101994104390021" onmouseenter="enter('-360101994104390021');" onmouseout="out('-360101994104390021');" style="">1735          // are not readonly, then check the row-level security                                                    </span>
<span class="2916396140375617365" onmouseenter="enter('2916396140375617365');" onmouseout="out('2916396140375617365');" style="">1736          if (!readOnly) {                                                                                          </span>
<span class="7094483165734488508" onmouseenter="enter('7094483165734488508');" onmouseout="out('7094483165734488508');" style=""><abbr title="1737              readOnly = !rowLevelSecurityService.canUpdate(adminRemoteSecurityService.getPersistentAdminUser(), entity);">1737              readOnly = !rowLevelSecurityService.canUpdate(adminRemoteSecurityService.getPersistentAdminUser(), entðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1738          }                                                                                                         </span>
<span  style="">1739                                                                                                                    </span>
<span class="7378462715957185244" onmouseenter="enter('7378462715957185244');" onmouseout="out('7378462715957185244');" style="">1740          if (readOnly) {                                                                                           </span>
<span class="7356620202531041753" onmouseenter="enter('7356620202531041753');" onmouseout="out('7356620202531041753');" style="">1741              entityForm.setReadOnly();                                                                             </span>
<span class="-1010311312628539836" onmouseenter="enter('-1010311312628539836');" onmouseout="out('-1010311312628539836');" style=""><abbr title="1742              //If someone has replaced RowLevelSecurityService, check here to make sure the replacement implements the expected interface">1742              //If someone has replaced RowLevelSecurityService, check here to make sure the replacement implements ðŸ”µ</abbr></span>
<span class="8968842492276656547" onmouseenter="enter('8968842492276656547');" onmouseout="out('8968842492276656547');" style="">1743              if (rowLevelSecurityService instanceof ExceptionAwareRowLevelSecurityProvider) {                      </span>
<span class="2057574043580690918" onmouseenter="enter('2057574043580690918');" onmouseout="out('2057574043580690918');" style=""><abbr title="1744                  EntityFormModifierConfiguration entityFormModifierConfiguration = ((ExceptionAwareRowLevelSecurityProvider) rowLevelSecurityService).getUpdateDenialExceptions();">1744                  EntityFormModifierConfiguration entityFormModifierConfiguration = ((ExceptionAwareRowLevelSecurityðŸ”µ</abbr></span>
<span class="-3023990582845647391" onmouseenter="enter('-3023990582845647391');" onmouseout="out('-3023990582845647391');" style=""><abbr title="1745                  for (EntityFormModifierData&lt;EntityFormModifierDataPoint&gt; data : entityFormModifierConfiguration.getData()) {">1745                  for (EntityFormModifierData&lt;EntityFormModifierDataPoint&gt; data : entityFormModifierConfiguration.geðŸ”µ</abbr></span>
<span class="9148632731325481398" onmouseenter="enter('9148632731325481398');" onmouseout="out('9148632731325481398');" style="">1746                      for (EntityFormModifier modifier : entityFormModifierConfiguration.getModifier()) {           </span>
<span class="7131836139928065231" onmouseenter="enter('7131836139928065231');" onmouseout="out('7131836139928065231');" style="">1747                          if (modifier.isQualified(data.getModifierType())) {                                       </span>
<span class="-3482148637742284796" onmouseenter="enter('-3482148637742284796');" onmouseout="out('-3482148637742284796');" style="">1748                              modifier.modifyEntityForm(new EntityFormModifierRequest()                             </span>
<span class="8232027775022174594" onmouseenter="enter('8232027775022174594');" onmouseout="out('8232027775022174594');" style="">1749                                      .withEntityForm(entityForm)                                                   </span>
<span class="-1014541830042934633" onmouseenter="enter('-1014541830042934633');" onmouseout="out('-1014541830042934633');" style="">1750                                      .withConfiguration(data)                                                      </span>
<span class="-7538620272607121359" onmouseenter="enter('-7538620272607121359');" onmouseout="out('-7538620272607121359');" style="">1751                                      .withCurrentUser(adminRemoteSecurityService.getPersistentAdminUser())         </span>
<span class="-2471313258794916634" onmouseenter="enter('-2471313258794916634');" onmouseout="out('-2471313258794916634');" style="">1752                                      .withEntity(entity)                                                           </span>
<span class="680994463596247300" onmouseenter="enter('680994463596247300');" onmouseout="out('680994463596247300');" style="">1753                                      .withRowLevelSecurityService(rowLevelSecurityService));                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1754                          }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1755                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1756                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1757              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1758          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1759      }                                                                                                             </span>
<span  style="">1760                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1761      /**                                                                                                           </span>
<span class="4825906517632270050" onmouseenter="enter('4825906517632270050');" onmouseout="out('4825906517632270050');" style="">1762       * Obtains the class name suitable for passing along to the {@link SecurityVerifier}                          </span>
<span class="-4758509257574949373" onmouseenter="enter('-4758509257574949373');" onmouseout="out('-4758509257574949373');" style="">1763       * @param entityForm                                                                                          </span>
<span class="3340688165449077744" onmouseenter="enter('3340688165449077744');" onmouseout="out('3340688165449077744');" style="">1764       * @param cmd                                                                                                 </span>
<span class="-9165797340485297481" onmouseenter="enter('-9165797340485297481');" onmouseout="out('-9165797340485297481');" style="">1765       * @return                                                                                                    </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1766       */                                                                                                           </span>
<span class="-4629711814814156723" onmouseenter="enter('-4629711814814156723');" onmouseout="out('-4629711814814156723');" style="">1767      protected String getSecurityClassname(EntityForm entityForm, ClassMetadata cmd) {                             </span>
<span class="-6496925357216982154" onmouseenter="enter('-6496925357216982154');" onmouseout="out('-6496925357216982154');" style="">1768          String securityEntityClassname = entityForm.getCeilingEntityClassname();                                  </span>
<span  style="">1769                                                                                                                    </span>
<span class="-7034725187183815217" onmouseenter="enter('-7034725187183815217');" onmouseout="out('-7034725187183815217');" style="">1770          if (!StringUtils.isEmpty(cmd.getSecurityCeilingType())) {                                                 </span>
<span class="5083723888191082683" onmouseenter="enter('5083723888191082683');" onmouseout="out('5083723888191082683');" style="">1771              securityEntityClassname = cmd.getSecurityCeilingType();                                               </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1772          } else {                                                                                                  </span>
<span class="7913947527267397417" onmouseenter="enter('7913947527267397417');" onmouseout="out('7913947527267397417');" style="">1773              if (entityForm.getDynamicFormInfos() != null) {                                                       </span>
<span class="7790362624567421850" onmouseenter="enter('7790362624567421850');" onmouseout="out('7790362624567421850');" style="">1774                  for (DynamicEntityFormInfo info : entityForm.getDynamicFormInfos().values()) {                    </span>
<span class="-1917944725928650662" onmouseenter="enter('-1917944725928650662');" onmouseout="out('-1917944725928650662');" style="">1775                      if (!StringUtils.isEmpty(info.getSecurityCeilingClassName())) {                               </span>
<span class="4842268456536900985" onmouseenter="enter('4842268456536900985');" onmouseout="out('4842268456536900985');" style="">1776                          securityEntityClassname = info.getSecurityCeilingClassName();                             </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1777                          break;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1778                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1779                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1780              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1781          }                                                                                                         </span>
<span  style="">1782                                                                                                                    </span>
<span class="-4632494495444562964" onmouseenter="enter('-4632494495444562964');" onmouseout="out('-4632494495444562964');" style="">1783          return securityEntityClassname;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1784      }                                                                                                             </span>
<span  style="">1785                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1786      @Override                                                                                                     </span>
<span class="-2624998369196687024" onmouseenter="enter('-2624998369196687024');" onmouseout="out('-2624998369196687024');" style="">1787      public void populateEntityFormFields(EntityForm ef, Entity entity) {                                          </span>
<span class="-5366055867936531883" onmouseenter="enter('-5366055867936531883');" onmouseout="out('-5366055867936531883');" style="">1788          populateEntityFormFields(ef, entity, true, true);                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1789      }                                                                                                             </span>
<span  style="">1790                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1791      @Override                                                                                                     </span>
<span class="-6740512050797749179" onmouseenter="enter('-6740512050797749179');" onmouseout="out('-6740512050797749179');" style="">1792      public void populateEntityFormFields(EntityForm ef, Entity entity, boolean populateType, boolean populateId) {</span>
<span class="-8844360907694676103" onmouseenter="enter('-8844360907694676103');" onmouseout="out('-8844360907694676103');" style="">1793          if (populateId) {                                                                                         </span>
<span class="-5951790405273252562" onmouseenter="enter('-5951790405273252562');" onmouseout="out('-5951790405273252562');" style="">1794              ef.setId(entity.findProperty(ef.getIdProperty()).getValue());                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1795          }                                                                                                         </span>
<span class="6008447871872074898" onmouseenter="enter('6008447871872074898');" onmouseout="out('6008447871872074898');" style="">1796          if (populateType) {                                                                                       </span>
<span class="2566657873931456162" onmouseenter="enter('2566657873931456162');" onmouseout="out('2566657873931456162');" style="">1797              ef.setEntityType(entity.getType()[0]);                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1798          }                                                                                                         </span>
<span  style="">1799                                                                                                                    </span>
<span class="-4264420628414385505" onmouseenter="enter('-4264420628414385505');" onmouseout="out('-4264420628414385505');" style="">1800          for (Entry&lt;String, Field&gt; entry : ef.getFields().entrySet()) {                                            </span>
<span class="2420686282896377848" onmouseenter="enter('2420686282896377848');" onmouseout="out('2420686282896377848');" style="">1801              Property entityProp = entity.findProperty(entry.getKey());                                            </span>
<span class="-2366650903096921345" onmouseenter="enter('-2366650903096921345');" onmouseout="out('-2366650903096921345');" style="">1802              if (entityProp != null) {                                                                             </span>
<span class="-7617915495394948835" onmouseenter="enter('-7617915495394948835');" onmouseout="out('-7617915495394948835');" style="">1803                  entry.getValue().setValue(entityProp.getValue());                                                 </span>
<span class="-4933731915633510416" onmouseenter="enter('-4933731915633510416');" onmouseout="out('-4933731915633510416');" style="">1804                  entry.getValue().setDisplayValue(entityProp.getDisplayValue());                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1805              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1806          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1807      }                                                                                                             </span>
<span  style="">1808                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1809      @Override                                                                                                     </span>
<span class="8490818103305754450" onmouseenter="enter('8490818103305754450');" onmouseout="out('8490818103305754450');" style="">1810      public void populateAdornedEntityFormFields(EntityForm ef, Entity entity, AdornedTargetList adornedList) {    </span>
<span class="-7724922710012225100" onmouseenter="enter('-7724922710012225100');" onmouseout="out('-7724922710012225100');" style="">1811          Field field = ef.findField(adornedList.getTargetObjectPath() + &quot;.&quot; + adornedList.getTargetIdProperty());  </span>
<span class="6683657094444632615" onmouseenter="enter('6683657094444632615');" onmouseout="out('6683657094444632615');" style="">1812          Property entityProp = entity.findProperty(ef.getIdProperty());                                            </span>
<span class="627899284580660581" onmouseenter="enter('627899284580660581');" onmouseout="out('627899284580660581');" style="">1813          field.setValue(entityProp.getValue());                                                                    </span>
<span  style="">1814                                                                                                                    </span>
<span class="2111689089149990625" onmouseenter="enter('2111689089149990625');" onmouseout="out('2111689089149990625');" style="">1815          if (StringUtils.isNotBlank(adornedList.getSortField())) {                                                 </span>
<span class="6344948819160968120" onmouseenter="enter('6344948819160968120');" onmouseout="out('6344948819160968120');" style="">1816              field = ef.findField(adornedList.getSortField());                                                     </span>
<span class="8964070033667700490" onmouseenter="enter('8964070033667700490');" onmouseout="out('8964070033667700490');" style="">1817              entityProp = entity.findProperty(adornedList.getSortField());                                         </span>
<span class="-2263433618148702675" onmouseenter="enter('-2263433618148702675');" onmouseout="out('-2263433618148702675');" style="">1818              if (field != null &amp;&amp; entityProp != null) {                                                            </span>
<span class="627899284580660581" onmouseenter="enter('627899284580660581');" onmouseout="out('627899284580660581');" style="">1819                  field.setValue(entityProp.getValue());                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1820              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1821          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1822      }                                                                                                             </span>
<span  style="">1823                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1824      @Override                                                                                                     </span>
<span class="8114269508855532827" onmouseenter="enter('8114269508855532827');" onmouseout="out('8114269508855532827');" style="">1825      public void populateMapEntityFormFields(EntityForm ef, Entity entity) {                                       </span>
<span class="4628483460047019115" onmouseenter="enter('4628483460047019115');" onmouseout="out('4628483460047019115');" style="">1826          Field field = ef.findField(&quot;priorKey&quot;);                                                                   </span>
<span class="263056657127968906" onmouseenter="enter('263056657127968906');" onmouseout="out('263056657127968906');" style="">1827          Property entityProp = entity.findProperty(&quot;key&quot;);                                                         </span>
<span class="-2263433618148702675" onmouseenter="enter('-2263433618148702675');" onmouseout="out('-2263433618148702675');" style="">1828          if (field != null &amp;&amp; entityProp != null) {                                                                </span>
<span class="627899284580660581" onmouseenter="enter('627899284580660581');" onmouseout="out('627899284580660581');" style="">1829              field.setValue(entityProp.getValue());                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1830          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1831      }                                                                                                             </span>
<span  style="">1832                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1833      @Override                                                                                                     </span>
<span class="150942895693350371" onmouseenter="enter('150942895693350371');" onmouseout="out('150942895693350371');" style=""><abbr title="1834      public EntityForm buildAdornedListForm(AdornedTargetCollectionMetadata adornedMd, AdornedTargetList adornedList,">1834      public EntityForm buildAdornedListForm(AdornedTargetCollectionMetadata adornedMd, AdornedTargetList adornedLisðŸ”µ</abbr></span>
<span class="12000407411688948" onmouseenter="enter('12000407411688948');" onmouseout="out('12000407411688948');" style="">1835              String parentId, boolean isViewCollectionItem, List&lt;SectionCrumb&gt; sectionCrumbs, boolean isAdd)       </span>
<span class="1998458335829271558" onmouseenter="enter('1998458335829271558');" onmouseout="out('1998458335829271558');" style="">1836              throws ServiceException {                                                                             </span>
<span class="7440011096899970462" onmouseenter="enter('7440011096899970462');" onmouseout="out('7440011096899970462');" style="">1837          EntityForm ef = createStandardAdornedEntityForm();                                                        </span>
<span class="3191357523588163011" onmouseenter="enter('3191357523588163011');" onmouseout="out('3191357523588163011');" style=""><abbr title="1838          return buildAdornedListForm(adornedMd, adornedList, parentId, isViewCollectionItem, ef, sectionCrumbs, isAdd);">1838          return buildAdornedListForm(adornedMd, adornedList, parentId, isViewCollectionItem, ef, sectionCrumbs, isAðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1839      }                                                                                                             </span>
<span  style="">1840                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1841      @Override                                                                                                     </span>
<span class="150942895693350371" onmouseenter="enter('150942895693350371');" onmouseout="out('150942895693350371');" style=""><abbr title="1842      public EntityForm buildAdornedListForm(AdornedTargetCollectionMetadata adornedMd, AdornedTargetList adornedList,">1842      public EntityForm buildAdornedListForm(AdornedTargetCollectionMetadata adornedMd, AdornedTargetList adornedLisðŸ”µ</abbr></span>
<span class="3984058849831877067" onmouseenter="enter('3984058849831877067');" onmouseout="out('3984058849831877067');" style=""><abbr title="1843              String parentId, boolean isViewCollectionItem, EntityForm ef, List&lt;SectionCrumb&gt; sectionCrumbs, boolean isAdd)">1843              String parentId, boolean isViewCollectionItem, EntityForm ef, List&lt;SectionCrumb&gt; sectionCrumbs, booleaðŸ”µ</abbr></span>
<span class="1998458335829271558" onmouseenter="enter('1998458335829271558');" onmouseout="out('1998458335829271558');" style="">1844              throws ServiceException {                                                                             </span>
<span class="2447703614414495939" onmouseenter="enter('2447703614414495939');" onmouseout="out('2447703614414495939');" style="">1845          ef.setEntityType(adornedList.getAdornedTargetEntityClassname());                                          </span>
<span  style="">1846                                                                                                                    </span>
<span class="-5881575004956694509" onmouseenter="enter('-5881575004956694509');" onmouseout="out('-5881575004956694509');" style="">1847          // Get the metadata for this adorned field                                                                </span>
<span class="-3021134083097680634" onmouseenter="enter('-3021134083097680634');" onmouseout="out('-3021134083097680634');" style="">1848          PersistencePackageRequest request = PersistencePackageRequest.adorned()                                   </span>
<span class="-7461338641125591711" onmouseenter="enter('-7461338641125591711');" onmouseout="out('-7461338641125591711');" style="">1849                  .withCeilingEntityClassname(adornedMd.getCollectionCeilingEntity())                               </span>
<span class="5166488781691104787" onmouseenter="enter('5166488781691104787');" onmouseout="out('5166488781691104787');" style="">1850                  .withAdornedList(adornedList)                                                                     </span>
<span class="6300132115435073341" onmouseenter="enter('6300132115435073341');" onmouseout="out('6300132115435073341');" style="">1851                  .withSectionCrumbs(sectionCrumbs);                                                                </span>
<span class="-6327467589468547459" onmouseenter="enter('-6327467589468547459');" onmouseout="out('-6327467589468547459');" style="">1852          request.setAddOperationInspect(isAdd);                                                                    </span>
<span class="8129278729958971412" onmouseenter="enter('8129278729958971412');" onmouseout="out('8129278729958971412');" style=""><abbr title="1853          ClassMetadata collectionMetadata = adminEntityService.getClassMetadata(request).getDynamicResultSet().getClassMetaData();">1853          ClassMetadata collectionMetadata = adminEntityService.getClassMetadata(request).getDynamicResultSet().getCðŸ”µ</abbr></span>
<span  style="">1854                                                                                                                    </span>
<span class="-4937065852383367448" onmouseenter="enter('-4937065852383367448');" onmouseout="out('-4937065852383367448');" style="">1855          List&lt;Property&gt; entityFormProperties = new ArrayList&lt;&gt;();                                                  </span>
<span class="9162843466163784659" onmouseenter="enter('9162843466163784659');" onmouseout="out('9162843466163784659');" style="">1856          if (isViewCollectionItem) {                                                                               </span>
<span class="-6444196324035087919" onmouseenter="enter('-6444196324035087919');" onmouseout="out('-6444196324035087919');" style="">1857              Collections.addAll(entityFormProperties, collectionMetadata.getProperties());                         </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1858          } else {                                                                                                  </span>
<span class="8165943161441555593" onmouseenter="enter('8165943161441555593');" onmouseout="out('8165943161441555593');" style="">1859              // We want our entity form to only render the maintained adorned target fields                        </span>
<span class="-6459504561228602972" onmouseenter="enter('-6459504561228602972');" onmouseout="out('-6459504561228602972');" style="">1860              for (String targetFieldName : adornedMd.getMaintainedAdornedTargetFields()) {                         </span>
<span class="-5374323299509239162" onmouseenter="enter('-5374323299509239162');" onmouseout="out('-5374323299509239162');" style="">1861                  Property p = collectionMetadata.getPMap().get(targetFieldName);                                   </span>
<span class="3623466133802910873" onmouseenter="enter('3623466133802910873');" onmouseout="out('3623466133802910873');" style=""><abbr title="1862                  if (p.getMetadata() instanceof BasicFieldMetadata &amp;&amp; BooleanUtils.isNotTrue( p.getMetadata().getExcluded())) {">1862                  if (p.getMetadata() instanceof BasicFieldMetadata &amp;&amp; BooleanUtils.isNotTrue( p.getMetadata().getExðŸ”µ</abbr></span>
<span class="-8585934909139340387" onmouseenter="enter('-8585934909139340387');" onmouseout="out('-8585934909139340387');" style="">1863                      ((BasicFieldMetadata) p.getMetadata()).setVisibility(VisibilityEnum.VISIBLE_ALL);             </span>
<span class="-6393972713668288785" onmouseenter="enter('-6393972713668288785');" onmouseout="out('-6393972713668288785');" style="">1864                      entityFormProperties.add(p);                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1865                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1866              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1867          }                                                                                                         </span>
<span  style="">1868                                                                                                                    </span>
<span class="-1687272513553387314" onmouseenter="enter('-1687272513553387314');" onmouseout="out('-1687272513553387314');" style="">1869          // Set the maintained fields on the form                                                                  </span>
<span class="6598971975233417362" onmouseenter="enter('6598971975233417362');" onmouseout="out('6598971975233417362');" style="">1870          setEntityFormFields(collectionMetadata, ef, entityFormProperties);                                        </span>
<span  style="">1871                                                                                                                    </span>
<span class="7903383611177038089" onmouseenter="enter('7903383611177038089');" onmouseout="out('7903383611177038089');" style="">1872          // Add these two additional hidden fields that are required for persistence                               </span>
<span class="-6303462610985739492" onmouseenter="enter('-6303462610985739492');" onmouseout="out('-6303462610985739492');" style="">1873          Field f = new Field()                                                                                     </span>
<span class="-7418437452692570792" onmouseenter="enter('-7418437452692570792');" onmouseout="out('-7418437452692570792');" style="">1874                  .withName(adornedList.getLinkedObjectPath() + &quot;.&quot; + adornedList.getLinkedIdProperty())            </span>
<span class="8578132396126170845" onmouseenter="enter('8578132396126170845');" onmouseout="out('8578132396126170845');" style="">1875                  .withFieldType(SupportedFieldType.HIDDEN.toString())                                              </span>
<span class="3333593611580125868" onmouseenter="enter('3333593611580125868');" onmouseout="out('3333593611580125868');" style="">1876                  .withValue(parentId);                                                                             </span>
<span class="-6955921800298195002" onmouseenter="enter('-6955921800298195002');" onmouseout="out('-6955921800298195002');" style="">1877          ef.addHiddenField(collectionMetadata, f);                                                                 </span>
<span  style="">1878                                                                                                                    </span>
<span class="3649036859858659928" onmouseenter="enter('3649036859858659928');" onmouseout="out('3649036859858659928');" style="">1879          f = new Field()                                                                                           </span>
<span class="-8965183336188726297" onmouseenter="enter('-8965183336188726297');" onmouseout="out('-8965183336188726297');" style="">1880                  .withName(adornedList.getTargetObjectPath() + &quot;.&quot; + adornedList.getTargetIdProperty())            </span>
<span class="8578132396126170845" onmouseenter="enter('8578132396126170845');" onmouseout="out('8578132396126170845');" style="">1881                  .withFieldType(SupportedFieldType.HIDDEN.toString())                                              </span>
<span class="9105828036023594182" onmouseenter="enter('9105828036023594182');" onmouseout="out('9105828036023594182');" style="">1882                  .withIdOverride(&quot;adornedTargetIdProperty&quot;);                                                       </span>
<span class="-6955921800298195002" onmouseenter="enter('-6955921800298195002');" onmouseout="out('-6955921800298195002');" style="">1883          ef.addHiddenField(collectionMetadata, f);                                                                 </span>
<span  style="">1884                                                                                                                    </span>
<span class="2111689089149990625" onmouseenter="enter('2111689089149990625');" onmouseout="out('2111689089149990625');" style="">1885          if (StringUtils.isNotBlank(adornedList.getSortField())) {                                                 </span>
<span class="3649036859858659928" onmouseenter="enter('3649036859858659928');" onmouseout="out('3649036859858659928');" style="">1886              f = new Field()                                                                                       </span>
<span class="-8039081797246474990" onmouseenter="enter('-8039081797246474990');" onmouseout="out('-8039081797246474990');" style="">1887                      .withName(adornedList.getSortField())                                                         </span>
<span class="-2458072313875538806" onmouseenter="enter('-2458072313875538806');" onmouseout="out('-2458072313875538806');" style="">1888                      .withFieldType(SupportedFieldType.HIDDEN.toString());                                         </span>
<span class="-6955921800298195002" onmouseenter="enter('-6955921800298195002');" onmouseout="out('-6955921800298195002');" style="">1889              ef.addHiddenField(collectionMetadata, f);                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1890          }                                                                                                         </span>
<span  style="">1891                                                                                                                    </span>
<span class="-8148842246743906492" onmouseenter="enter('-8148842246743906492');" onmouseout="out('-8148842246743906492');" style="">1892          ef.setParentId(parentId);                                                                                 </span>
<span  style="">1893                                                                                                                    </span>
<span class="-9084846840215869888" onmouseenter="enter('-9084846840215869888');" onmouseout="out('-9084846840215869888');" style="">1894          extensionManager.getProxy().addAdditionalAdornedFormActions(ef);                                          </span>
<span  style="">1895                                                                                                                    </span>
<span class="3260120157565581788" onmouseenter="enter('3260120157565581788');" onmouseout="out('3260120157565581788');" style="">1896          return ef;                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1897      }                                                                                                             </span>
<span  style="">1898                                                                                                                    </span>
<span  style="">1899                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1900      @Override                                                                                                     </span>
<span class="5776955838632823841" onmouseenter="enter('5776955838632823841');" onmouseout="out('5776955838632823841');" style=""><abbr title="1901      public EntityForm buildMapForm(MapMetadata mapMd, final MapStructure mapStructure, ClassMetadata cmd, String parentId)">1901      public EntityForm buildMapForm(MapMetadata mapMd, final MapStructure mapStructure, ClassMetadata cmd, String pðŸ”µ</abbr></span>
<span class="1998458335829271558" onmouseenter="enter('1998458335829271558');" onmouseout="out('1998458335829271558');" style="">1902              throws ServiceException {                                                                             </span>
<span class="-438894394526699599" onmouseenter="enter('-438894394526699599');" onmouseout="out('-438894394526699599');" style="">1903          EntityForm ef = createStandardEntityForm();                                                               </span>
<span class="-4383087068394560961" onmouseenter="enter('-4383087068394560961');" onmouseout="out('-4383087068394560961');" style="">1904          return buildMapForm(mapMd, mapStructure, cmd, parentId, ef);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1905      }                                                                                                             </span>
<span  style="">1906                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1907      @Override                                                                                                     </span>
<span class="5263214445094463474" onmouseenter="enter('5263214445094463474');" onmouseout="out('5263214445094463474');" style=""><abbr title="1908      public EntityForm buildMapForm(MapMetadata mapMd, final MapStructure mapStructure, ClassMetadata cmd, String parentId, EntityForm ef)">1908      public EntityForm buildMapForm(MapMetadata mapMd, final MapStructure mapStructure, ClassMetadata cmd, String pðŸ”µ</abbr></span>
<span class="1998458335829271558" onmouseenter="enter('1998458335829271558');" onmouseout="out('1998458335829271558');" style="">1909              throws ServiceException {                                                                             </span>
<span class="-8196381047300571419" onmouseenter="enter('-8196381047300571419');" onmouseout="out('-8196381047300571419');" style="">1910          ForeignKey foreignKey = (ForeignKey) mapMd.getPersistencePerspective()                                    </span>
<span class="2694724777125959806" onmouseenter="enter('2694724777125959806');" onmouseout="out('2694724777125959806');" style="">1911                  .getPersistencePerspectiveItems().get(PersistencePerspectiveItemType.FOREIGNKEY);                 </span>
<span class="-8152084553040114228" onmouseenter="enter('-8152084553040114228');" onmouseout="out('-8152084553040114228');" style="">1912          ef.setEntityType(foreignKey.getForeignKeyClass());                                                        </span>
<span  style="">1913                                                                                                                    </span>
<span class="2487263286005872069" onmouseenter="enter('2487263286005872069');" onmouseout="out('2487263286005872069');" style="">1914          Field keyField;                                                                                           </span>
<span class="8316613165925765769" onmouseenter="enter('8316613165925765769');" onmouseout="out('8316613165925765769');" style="">1915          if (!mapMd.getForceFreeFormKeys()) {                                                                      </span>
<span class="4124947245467994317" onmouseenter="enter('4124947245467994317');" onmouseout="out('4124947245467994317');" style="">1916              // We will use a combo field to render the key choices                                                </span>
<span class="-1866848638996018677" onmouseenter="enter('-1866848638996018677');" onmouseout="out('-1866848638996018677');" style="">1917              ComboField temp = new ComboField();                                                                   </span>
<span class="-6555255150639106657" onmouseenter="enter('-6555255150639106657');" onmouseout="out('-6555255150639106657');" style="">1918              temp.withName(&quot;key&quot;)                                                                                  </span>
<span class="1841760667801252277" onmouseenter="enter('1841760667801252277');" onmouseout="out('1841760667801252277');" style="">1919                      .withFieldType(&quot;combo_field&quot;)                                                                 </span>
<span class="-5198779959493179668" onmouseenter="enter('-5198779959493179668');" onmouseout="out('-5198779959493179668');" style="">1920                      .withFriendlyName(mapStructure.getKeyPropertyFriendlyName());                                 </span>
<span class="3287055582339576619" onmouseenter="enter('3287055582339576619');" onmouseout="out('3287055582339576619');" style="">1921              if (mapMd.getKeys() != null) {                                                                        </span>
<span class="-6322095491178263556" onmouseenter="enter('-6322095491178263556');" onmouseout="out('-6322095491178263556');" style="">1922                  // The keys can be explicitly set in the annotation...                                            </span>
<span class="-7850108399679610719" onmouseenter="enter('-7850108399679610719');" onmouseout="out('-7850108399679610719');" style="">1923                  temp.setOptions(mapMd.getKeys());                                                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1924              } else {                                                                                              </span>
<span class="7036564945591495423" onmouseenter="enter('7036564945591495423');" onmouseout="out('7036564945591495423');" style="">1925                  // Or they could be based on a different entity                                                   </span>
<span class="2943675610735544566" onmouseenter="enter('2943675610735544566');" onmouseout="out('2943675610735544566');" style="">1926                  PersistencePackageRequest ppr = PersistencePackageRequest.standard()                              </span>
<span class="-7233152391809010418" onmouseenter="enter('-7233152391809010418');" onmouseout="out('-7233152391809010418');" style="">1927                          .withCeilingEntityClassname(mapMd.getMapKeyOptionEntityClass());                          </span>
<span  style="">1928                                                                                                                    </span>
<span class="-4077831550260994387" onmouseenter="enter('-4077831550260994387');" onmouseout="out('-4077831550260994387');" style="">1929                  DynamicResultSet drs = adminEntityService.getRecords(ppr).getDynamicResultSet();                  </span>
<span  style="">1930                                                                                                                    </span>
<span class="5306875073536616661" onmouseenter="enter('5306875073536616661');" onmouseout="out('5306875073536616661');" style="">1931                  for (Entity entity : drs.getRecords()) {                                                          </span>
<span class="-6641717520052480574" onmouseenter="enter('-6641717520052480574');" onmouseout="out('-6641717520052480574');" style="">1932                      String keyValue = entity.getPMap().get(mapMd.getMapKeyOptionEntityValueField()).getValue();   </span>
<span class="1998582968522880029" onmouseenter="enter('1998582968522880029');" onmouseout="out('1998582968522880029');" style=""><abbr title="1933                      String keyDisplayValue = entity.getPMap().get(mapMd.getMapKeyOptionEntityDisplayField()).getValue();">1933                      String keyDisplayValue = entity.getPMap().get(mapMd.getMapKeyOptionEntityDisplayField()).getVaðŸ”µ</abbr></span>
<span class="-6645431312205396504" onmouseenter="enter('-6645431312205396504');" onmouseout="out('-6645431312205396504');" style="">1934                      temp.putOption(keyValue, keyDisplayValue);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1935                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1936              }                                                                                                     </span>
<span class="3546270200362241310" onmouseenter="enter('3546270200362241310');" onmouseout="out('3546270200362241310');" style="">1937              keyField = temp;                                                                                      </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1938          } else {                                                                                                  </span>
<span class="-8573842998963738304" onmouseenter="enter('-8573842998963738304');" onmouseout="out('-8573842998963738304');" style="">1939              keyField = new Field().withName(&quot;key&quot;)                                                                </span>
<span class="7310006641400837736" onmouseenter="enter('7310006641400837736');" onmouseout="out('7310006641400837736');" style="">1940                                  .withFieldType(SupportedFieldType.STRING.toString())                              </span>
<span class="-5198779959493179668" onmouseenter="enter('-5198779959493179668');" onmouseout="out('-5198779959493179668');" style="">1941                                  .withFriendlyName(mapStructure.getKeyPropertyFriendlyName());                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1942          }                                                                                                         </span>
<span class="7153206597057282580" onmouseenter="enter('7153206597057282580');" onmouseout="out('7153206597057282580');" style="">1943          keyField.setRequired(true);                                                                               </span>
<span class="6962995846651568894" onmouseenter="enter('6962995846651568894');" onmouseout="out('6962995846651568894');" style="">1944          ef.addMapKeyField(cmd, keyField);                                                                         </span>
<span  style="">1945                                                                                                                    </span>
<span class="-1847798595136835783" onmouseenter="enter('-1847798595136835783');" onmouseout="out('-1847798595136835783');" style="">1946          // Set the fields for this form                                                                           </span>
<span class="4702227326769048309" onmouseenter="enter('4702227326769048309');" onmouseout="out('4702227326769048309');" style="">1947          List&lt;Property&gt; mapFormProperties;                                                                         </span>
<span class="-3881724092572027053" onmouseenter="enter('-3881724092572027053');" onmouseout="out('-3881724092572027053');" style="">1948          if (mapMd.isSimpleValue()) {                                                                              </span>
<span class="7835835150562546154" onmouseenter="enter('7835835150562546154');" onmouseout="out('7835835150562546154');" style="">1949              ef.setIdProperty(&quot;key&quot;);                                                                              </span>
<span class="7501966408885015423" onmouseenter="enter('7501966408885015423');" onmouseout="out('7501966408885015423');" style="">1950              mapFormProperties = new ArrayList&lt;&gt;();                                                                </span>
<span class="1155137054745373714" onmouseenter="enter('1155137054745373714');" onmouseout="out('1155137054745373714');" style="">1951              Property valueProp = cmd.getPMap().get(&quot;value&quot;);                                                      </span>
<span class="4126012312120971947" onmouseenter="enter('4126012312120971947');" onmouseout="out('4126012312120971947');" style="">1952              mapFormProperties.add(valueProp);                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1953          } else {                                                                                                  </span>
<span class="-200233704674088452" onmouseenter="enter('-200233704674088452');" onmouseout="out('-200233704674088452');" style="">1954              String valueClassName = mapStructure.getValueClassName();                                             </span>
<span class="4792123228934068864" onmouseenter="enter('4792123228934068864');" onmouseout="out('4792123228934068864');" style="">1955              List&lt;String&gt; classNames = getValueClassNames(valueClassName);                                         </span>
<span  style="">1956                                                                                                                    </span>
<span class="6736035458303245430" onmouseenter="enter('6736035458303245430');" onmouseout="out('6736035458303245430');" style="">1957              mapFormProperties = new ArrayList&lt;&gt;(Arrays.asList(cmd.getProperties()));                              </span>
<span class="-5375146325606190554" onmouseenter="enter('-5375146325606190554');" onmouseout="out('-5375146325606190554');" style="">1958              filterMapFormProperties(mapFormProperties, classNames);                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1959          }                                                                                                         </span>
<span  style="">1960                                                                                                                    </span>
<span class="-2821207520526953468" onmouseenter="enter('-2821207520526953468');" onmouseout="out('-2821207520526953468');" style="">1961          setEntityFormFields(cmd, ef, mapFormProperties);                                                          </span>
<span  style="">1962                                                                                                                    </span>
<span class="-6303462610985739492" onmouseenter="enter('-6303462610985739492');" onmouseout="out('-6303462610985739492');" style="">1963          Field f = new Field()                                                                                     </span>
<span class="4084107705668748282" onmouseenter="enter('4084107705668748282');" onmouseout="out('4084107705668748282');" style="">1964                  .withName(&quot;priorKey&quot;)                                                                             </span>
<span class="-2458072313875538806" onmouseenter="enter('-2458072313875538806');" onmouseout="out('-2458072313875538806');" style="">1965                  .withFieldType(SupportedFieldType.HIDDEN.toString());                                             </span>
<span class="-2135186019977572427" onmouseenter="enter('-2135186019977572427');" onmouseout="out('-2135186019977572427');" style="">1966          ef.addHiddenField(cmd, f);                                                                                </span>
<span  style="">1967                                                                                                                    </span>
<span class="-8148842246743906492" onmouseenter="enter('-8148842246743906492');" onmouseout="out('-8148842246743906492');" style="">1968          ef.setParentId(parentId);                                                                                 </span>
<span  style="">1969                                                                                                                    </span>
<span class="3260120157565581788" onmouseenter="enter('3260120157565581788');" onmouseout="out('3260120157565581788');" style="">1970          return ef;                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1971      }                                                                                                             </span>
<span  style="">1972                                                                                                                    </span>
<span class="-4829102623695042124" onmouseenter="enter('-4829102623695042124');" onmouseout="out('-4829102623695042124');" style="">1973      protected List&lt;String&gt; getValueClassNames(String valueClassName) {                                            </span>
<span class="636492465030384706" onmouseenter="enter('636492465030384706');" onmouseout="out('636492465030384706');" style="">1974          PersistenceManager pm = PersistenceManagerFactory.getPersistenceManager(valueClassName);                  </span>
<span class="2246167872340129747" onmouseenter="enter('2246167872340129747');" onmouseout="out('2246167872340129747');" style="">1975          List&lt;String&gt; classNames = new ArrayList&lt;&gt;();                                                              </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1976          try {                                                                                                     </span>
<span class="3938321968230834834" onmouseenter="enter('3938321968230834834');" onmouseout="out('3938321968230834834');" style="">1977              Class&lt;?&gt;[] mapEntities = pm.getPolymorphicEntities(valueClassName);                                   </span>
<span class="-4772743881626943892" onmouseenter="enter('-4772743881626943892');" onmouseout="out('-4772743881626943892');" style="">1978              for (Class clazz : mapEntities) {                                                                     </span>
<span class="6466727849961562132" onmouseenter="enter('6466727849961562132');" onmouseout="out('6466727849961562132');" style="">1979                  classNames.add(clazz.getName());                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1980              }                                                                                                     </span>
<span class="1054888787890391626" onmouseenter="enter('1054888787890391626');" onmouseout="out('1054888787890391626');" style="">1981          } catch (ClassNotFoundException e) {                                                                      </span>
<span class="-942678047271525020" onmouseenter="enter('-942678047271525020');" onmouseout="out('-942678047271525020');" style="">1982              classNames.add(valueClassName);                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1983          }                                                                                                         </span>
<span class="-3648191997111592889" onmouseenter="enter('-3648191997111592889');" onmouseout="out('-3648191997111592889');" style="">1984          return classNames;                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1985      }                                                                                                             </span>
<span  style="">1986                                                                                                                    </span>
<span class="9085638029133270349" onmouseenter="enter('9085638029133270349');" onmouseout="out('9085638029133270349');" style="">1987      protected void filterMapFormProperties(List&lt;Property&gt; mapFormProperties, final List&lt;String&gt; classNames) {     </span>
<span class="-1689600506312159966" onmouseenter="enter('-1689600506312159966');" onmouseout="out('-1689600506312159966');" style="">1988          CollectionUtils.filter(mapFormProperties, new Predicate() {                                               </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1989              @Override                                                                                             </span>
<span class="7760113550206984696" onmouseenter="enter('7760113550206984696');" onmouseout="out('7760113550206984696');" style="">1990              public boolean evaluate(Object object) {                                                              </span>
<span class="2621584028127774901" onmouseenter="enter('2621584028127774901');" onmouseout="out('2621584028127774901');" style="">1991                  Property p = (Property) object;                                                                   </span>
<span class="5284872755288504872" onmouseenter="enter('5284872755288504872');" onmouseout="out('5284872755288504872');" style="">1992                  for (String availType : p.getMetadata().getAvailableToTypes()) {                                  </span>
<span class="-1266753160152563645" onmouseenter="enter('-1266753160152563645');" onmouseout="out('-1266753160152563645');" style="">1993                      if (classNames.contains(availType)) {                                                         </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">1994                          return true;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1995                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1996                  }                                                                                                 </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1997                  return false;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1998              }                                                                                                     </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">1999          });                                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2000      }                                                                                                             </span>
<span  style="">2001                                                                                                                    </span>
<span class="8263860057269155273" onmouseenter="enter('8263860057269155273');" onmouseout="out('8263860057269155273');" style="">2002      protected EntityForm createStandardEntityForm() {                                                             </span>
<span class="4163598687278852410" onmouseenter="enter('4163598687278852410');" onmouseout="out('4163598687278852410');" style="">2003          EntityForm ef = new EntityForm();                                                                         </span>
<span class="-2237425030372835917" onmouseenter="enter('-2237425030372835917');" onmouseout="out('-2237425030372835917');" style="">2004          ef.addAction(DefaultEntityFormActions.SAVE);                                                              </span>
<span class="3260120157565581788" onmouseenter="enter('3260120157565581788');" onmouseout="out('3260120157565581788');" style="">2005          return ef;                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2006      }                                                                                                             </span>
<span  style="">2007                                                                                                                    </span>
<span class="-7002137249022503423" onmouseenter="enter('-7002137249022503423');" onmouseout="out('-7002137249022503423');" style="">2008      protected EntityForm createStandardAdornedEntityForm() {                                                      </span>
<span class="4163598687278852410" onmouseenter="enter('4163598687278852410');" onmouseout="out('4163598687278852410');" style="">2009          EntityForm ef = new EntityForm();                                                                         </span>
<span class="3915105942460614290" onmouseenter="enter('3915105942460614290');" onmouseout="out('3915105942460614290');" style="">2010          ef.addAction(DefaultAdornedEntityFormActions.Add);                                                        </span>
<span class="3260120157565581788" onmouseenter="enter('3260120157565581788');" onmouseout="out('3260120157565581788');" style="">2011          return ef;                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2012      }                                                                                                             </span>
<span  style="">2013                                                                                                                    </span>
<span class="-8997817584059672482" onmouseenter="enter('-8997817584059672482');" onmouseout="out('-8997817584059672482');" style="">2014      protected VisibilityEnum[] getGridHiddenVisibilities() {                                                      </span>
<span class="-4220328425458971190" onmouseenter="enter('-4220328425458971190');" onmouseout="out('-4220328425458971190');" style="">2015          return FormBuilderServiceImpl.GRID_HIDDEN_VISIBILITIES;                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2016      }                                                                                                             </span>
<span  style="">2017                                                                                                                    </span>
<span class="5519346243833044852" onmouseenter="enter('5519346243833044852');" onmouseout="out('5519346243833044852');" style="">2018      protected VisibilityEnum[] getFormHiddenVisibilities() {                                                      </span>
<span class="-3897912334343924171" onmouseenter="enter('-3897912334343924171');" onmouseout="out('-3897912334343924171');" style="">2019          return FormBuilderServiceImpl.FORM_HIDDEN_VISIBILITIES;                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2020      }                                                                                                             </span>
<span  style="">2021                                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2022  }                                                                                                                 </span></pre></td>
                            <td><pre><span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style="">   1  /*                                                                                                                </span>
<span class="7283730021202772321" onmouseenter="enter('7283730021202772321');" onmouseout="out('7283730021202772321');" style="">   2   * #%L                                                                                                            </span>
<span class="-3339060969767811416" onmouseenter="enter('-3339060969767811416');" onmouseout="out('-3339060969767811416');" style="">   3   * BroadleafCommerce Open Admin Platform                                                                          </span>
<span class="305149960078729975" onmouseenter="enter('305149960078729975');" onmouseout="out('305149960078729975');" style="">   4   * %%                                                                                                             </span>
<span class="1978304592184257722" onmouseenter="enter('1978304592184257722');" onmouseout="out('1978304592184257722');" style="">   5   * Copyright (C) 2009 - 2016 Broadleaf Commerce                                                                   </span>
<span class="305149960078729975" onmouseenter="enter('305149960078729975');" onmouseout="out('305149960078729975');" style="">   6   * %%                                                                                                             </span>
<span class="4430451662992926684" onmouseenter="enter('4430451662992926684');" onmouseout="out('4430451662992926684');" style="">   7   * Licensed under the Broadleaf Fair Use License Agreement, Version 1.0                                           </span>
<span class="8206099442596739681" onmouseenter="enter('8206099442596739681');" onmouseout="out('8206099442596739681');" style="">   8   * (the &quot;Fair Use License&quot; located  at http://license.broadleafcommerce.org/fair_use_license-1.0.txt)             </span>
<span class="-4338570431005413339" onmouseenter="enter('-4338570431005413339');" onmouseout="out('-4338570431005413339');" style="">   9   * unless the restrictions on use therein are violated and require payment to Broadleaf in which case             </span>
<span class="-5739615313038505012" onmouseenter="enter('-5739615313038505012');" onmouseout="out('-5739615313038505012');" style="">  10   * the Broadleaf End User License Agreement (EULA), Version 1.1                                                   </span>
<span class="-196756316119086558" onmouseenter="enter('-196756316119086558');" onmouseout="out('-196756316119086558');" style="">  11   * (the &quot;Commercial License&quot; located at http://license.broadleafcommerce.org/commercial_license-1.1.txt)          </span>
<span class="-3691518077331372763" onmouseenter="enter('-3691518077331372763');" onmouseout="out('-3691518077331372763');" style="">  12   * shall apply.                                                                                                   </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">  13   *                                                                                                                </span>
<span class="-3333434530440420199" onmouseenter="enter('-3333434530440420199');" onmouseout="out('-3333434530440420199');" style=""><abbr title="  14   * Alternatively, the Commercial License may be replaced with a mutually agreed upon license (the &quot;Custom License&quot;)">  14   * Alternatively, the Commercial License may be replaced with a mutually agreed upon license (the &quot;Custom License&quot;ðŸ”µ</abbr></span>
<span class="-2556272520656899284" onmouseenter="enter('-2556272520656899284');" onmouseout="out('-2556272520656899284');" style="">  15   * between you and Broadleaf Commerce. You may not use this file except in compliance with the applicable license.</span>
<span class="3739716589509259313" onmouseenter="enter('3739716589509259313');" onmouseout="out('3739716589509259313');" style="">  16   * #L%                                                                                                            </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  17   */                                                                                                               </span>
<span class="-6621374416165604736" onmouseenter="enter('-6621374416165604736');" onmouseout="out('-6621374416165604736');" style="">  18  package org.broadleafcommerce.openadmin.web.service;                                                              </span>
<span  style="">  19                                                                                                                    </span>
<span class="8596464405353709537" onmouseenter="enter('8596464405353709537');" onmouseout="out('8596464405353709537');" style="">  20  import org.apache.commons.collections.CollectionUtils;                                                            </span>
<span class="-6731128730698523533" onmouseenter="enter('-6731128730698523533');" onmouseout="out('-6731128730698523533');" style="">  21  import org.apache.commons.collections.Predicate;                                                                  </span>
<span class="-7366736394295216840" onmouseenter="enter('-7366736394295216840');" onmouseout="out('-7366736394295216840');" style="">  22  import org.apache.commons.lang.ArrayUtils;                                                                        </span>
<span class="-4661043417888464228" onmouseenter="enter('-4661043417888464228');" onmouseout="out('-4661043417888464228');" style="">  23  import org.apache.commons.lang.BooleanUtils;                                                                      </span>
<span class="-8105670274694144339" onmouseenter="enter('-8105670274694144339');" onmouseout="out('-8105670274694144339');" style="">  24  import org.apache.commons.lang3.StringUtils;                                                                      </span>
<span class="494203924075255110" onmouseenter="enter('494203924075255110');" onmouseout="out('494203924075255110');" style="">  25  import org.apache.commons.logging.Log;                                                                            </span>
<span class="-8227491862907452788" onmouseenter="enter('-8227491862907452788');" onmouseout="out('-8227491862907452788');" style="">  26  import org.apache.commons.logging.LogFactory;                                                                     </span>
<span class="-6287859968194756382" onmouseenter="enter('-6287859968194756382');" onmouseout="out('-6287859968194756382');" style="">  27  import org.broadleafcommerce.common.admin.domain.AdminMainEntity;                                                 </span>
<span class="-9066890226896155571" onmouseenter="enter('-9066890226896155571');" onmouseout="out('-9066890226896155571');" style="">  28  import org.broadleafcommerce.common.exception.ExceptionHelper;                                                    </span>
<span class="3542918789910249764" onmouseenter="enter('3542918789910249764');" onmouseout="out('3542918789910249764');" style="">  29  import org.broadleafcommerce.common.exception.SecurityServiceException;                                           </span>
<span class="5945096539699516699" onmouseenter="enter('5945096539699516699');" onmouseout="out('5945096539699516699');" style="">  30  import org.broadleafcommerce.common.exception.ServiceException;                                                   </span>
<span class="-8339254235515724670" onmouseenter="enter('-8339254235515724670');" onmouseout="out('-8339254235515724670');" style="">  31  import org.broadleafcommerce.common.extension.ExtensionResultStatusType;                                          </span>
<span class="-4810625992201169553" onmouseenter="enter('-4810625992201169553');" onmouseout="out('-4810625992201169553');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  32 +import org.broadleafcommerce.common.i18n.domain.TranslatedEntity;                                                 </span>
<span class="1881391036720633454" onmouseenter="enter('1881391036720633454');" onmouseout="out('1881391036720633454');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  33 +import org.broadleafcommerce.common.i18n.service.TranslationService;                                              </span>
<span class="3092944370275379663" onmouseenter="enter('3092944370275379663');" onmouseout="out('3092944370275379663');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  34 +import org.broadleafcommerce.common.locale.service.LocaleService;                                                 </span>
<span class="-2454560082833257555" onmouseenter="enter('-2454560082833257555');" onmouseout="out('-2454560082833257555');" style="">  35  import org.broadleafcommerce.common.media.domain.MediaDto;                                                        </span>
<span class="4111478795314305516" onmouseenter="enter('4111478795314305516');" onmouseout="out('4111478795314305516');" style="">  36  import org.broadleafcommerce.common.persistence.EntityConfiguration;                                              </span>

<span class="-6648433550510659033" onmouseenter="enter('-6648433550510659033');" onmouseout="out('-6648433550510659033');" style="">  37  import org.broadleafcommerce.common.presentation.client.AddMethodType;                                            </span>
<span class="-7832706263011125937" onmouseenter="enter('-7832706263011125937');" onmouseout="out('-7832706263011125937');" style="">  38  import org.broadleafcommerce.common.presentation.client.AdornedTargetAddMethodType;                               </span>
<span class="-2413957740330241600" onmouseenter="enter('-2413957740330241600');" onmouseout="out('-2413957740330241600');" style="">  39  import org.broadleafcommerce.common.presentation.client.LookupType;                                               </span>
<span class="7296089998360266547" onmouseenter="enter('7296089998360266547');" onmouseout="out('7296089998360266547');" style="">  40  import org.broadleafcommerce.common.presentation.client.PersistencePerspectiveItemType;                           </span>
<span class="1362364260528215152" onmouseenter="enter('1362364260528215152');" onmouseout="out('1362364260528215152');" style="">  41  import org.broadleafcommerce.common.presentation.client.SupportedFieldType;                                       </span>
<span class="-7583443881845767348" onmouseenter="enter('-7583443881845767348');" onmouseout="out('-7583443881845767348');" style="">  42  import org.broadleafcommerce.common.presentation.client.VisibilityEnum;                                           </span>
<span class="2428099238642943960" onmouseenter="enter('2428099238642943960');" onmouseout="out('2428099238642943960');" style="">  43  import org.broadleafcommerce.common.util.BLCMessageUtils;                                                         </span>
<span class="578947422765016559" onmouseenter="enter('578947422765016559');" onmouseout="out('578947422765016559');" style="">  44  import org.broadleafcommerce.common.util.FormatUtil;                                                              </span>
<span class="-3347161074136237116" onmouseenter="enter('-3347161074136237116');" onmouseout="out('-3347161074136237116');" style="">  45  import org.broadleafcommerce.common.util.StringUtil;                                                              </span>
<span class="8689743329875302887" onmouseenter="enter('8689743329875302887');" onmouseout="out('8689743329875302887');" style="">  46  import org.broadleafcommerce.common.web.BroadleafRequestContext;                                                  </span>
<span class="-3361215363157046739" onmouseenter="enter('-3361215363157046739');" onmouseout="out('-3361215363157046739');" style="">  47  import org.broadleafcommerce.openadmin.dto.AdornedTargetCollectionMetadata;                                       </span>
<span class="-1781055592725563383" onmouseenter="enter('-1781055592725563383');" onmouseout="out('-1781055592725563383');" style="">  48  import org.broadleafcommerce.openadmin.dto.AdornedTargetList;                                                     </span>
<span class="-6140296335181984013" onmouseenter="enter('-6140296335181984013');" onmouseout="out('-6140296335181984013');" style="">  49  import org.broadleafcommerce.openadmin.dto.BasicCollectionMetadata;                                               </span>
<span class="4427537537958608766" onmouseenter="enter('4427537537958608766');" onmouseout="out('4427537537958608766');" style="">  50  import org.broadleafcommerce.openadmin.dto.BasicFieldMetadata;                                                    </span>
<span class="-1607559599739253077" onmouseenter="enter('-1607559599739253077');" onmouseout="out('-1607559599739253077');" style="">  51  import org.broadleafcommerce.openadmin.dto.ClassMetadata;                                                         </span>
<span class="5550564421881377532" onmouseenter="enter('5550564421881377532');" onmouseout="out('5550564421881377532');" style="">  52  import org.broadleafcommerce.openadmin.dto.ClassTree;                                                             </span>
<span class="-3165611006566133086" onmouseenter="enter('-3165611006566133086');" onmouseout="out('-3165611006566133086');" style="">  53  import org.broadleafcommerce.openadmin.dto.CollectionMetadata;                                                    </span>
<span class="-4742435063138209714" onmouseenter="enter('-4742435063138209714');" onmouseout="out('-4742435063138209714');" style="">  54  import org.broadleafcommerce.openadmin.dto.DynamicResultSet;                                                      </span>
<span class="-5093421835888664541" onmouseenter="enter('-5093421835888664541');" onmouseout="out('-5093421835888664541');" style="">  55  import org.broadleafcommerce.openadmin.dto.Entity;                                                                </span>
<span class="-8829499667991596741" onmouseenter="enter('-8829499667991596741');" onmouseout="out('-8829499667991596741');" style="">  56  import org.broadleafcommerce.openadmin.dto.FieldMetadata;                                                         </span>
<span class="-2271266034558779994" onmouseenter="enter('-2271266034558779994');" onmouseout="out('-2271266034558779994');" style="">  57  import org.broadleafcommerce.openadmin.dto.ForeignKey;                                                            </span>
<span class="826821438795056004" onmouseenter="enter('826821438795056004');" onmouseout="out('826821438795056004');" style="">  58  import org.broadleafcommerce.openadmin.dto.MapMetadata;                                                           </span>
<span class="-7888875133556467044" onmouseenter="enter('-7888875133556467044');" onmouseout="out('-7888875133556467044');" style="">  59  import org.broadleafcommerce.openadmin.dto.MapStructure;                                                          </span>
<span class="1983554291461039357" onmouseenter="enter('1983554291461039357');" onmouseout="out('1983554291461039357');" style="">  60  import org.broadleafcommerce.openadmin.dto.Property;                                                              </span>
<span class="1696571253156436279" onmouseenter="enter('1696571253156436279');" onmouseout="out('1696571253156436279');" style="">  61  import org.broadleafcommerce.openadmin.dto.SectionCrumb;                                                          </span>
<span class="5662236005419086618" onmouseenter="enter('5662236005419086618');" onmouseout="out('5662236005419086618');" style="">  62  import org.broadleafcommerce.openadmin.dto.TabMetadata;                                                           </span>

<span class="4410643013278245372" onmouseenter="enter('4410643013278245372');" onmouseout="out('4410643013278245372');" style="">  63  import org.broadleafcommerce.openadmin.server.domain.PersistencePackageRequest;                                   </span>
<span class="-7620175268967942501" onmouseenter="enter('-7620175268967942501');" onmouseout="out('-7620175268967942501');" style="">  64  import org.broadleafcommerce.openadmin.server.security.domain.AdminSection;                                       </span>
<span class="-6571883875867969954" onmouseenter="enter('-6571883875867969954');" onmouseout="out('-6571883875867969954');" style="">  65  import org.broadleafcommerce.openadmin.server.security.domain.AdminUser;                                          </span>
<span class="-4641149340176766185" onmouseenter="enter('-4641149340176766185');" onmouseout="out('-4641149340176766185');" style="">  66  import org.broadleafcommerce.openadmin.server.security.remote.EntityOperationType;                                </span>
<span class="8942483953505157490" onmouseenter="enter('8942483953505157490');" onmouseout="out('8942483953505157490');" style="">  67  import org.broadleafcommerce.openadmin.server.security.remote.SecurityVerifier;                                   </span>
<span class="-5109104434282935941" onmouseenter="enter('-5109104434282935941');" onmouseout="out('-5109104434282935941');" style="">  68  import org.broadleafcommerce.openadmin.server.security.service.EntityFormModifier;                                </span>
<span class="-8160764320713173157" onmouseenter="enter('-8160764320713173157');" onmouseout="out('-8160764320713173157');" style="">  69  import org.broadleafcommerce.openadmin.server.security.service.EntityFormModifierConfiguration;                   </span>
<span class="-7359249757017525541" onmouseenter="enter('-7359249757017525541');" onmouseout="out('-7359249757017525541');" style="">  70  import org.broadleafcommerce.openadmin.server.security.service.EntityFormModifierData;                            </span>
<span class="3347653686268274670" onmouseenter="enter('3347653686268274670');" onmouseout="out('3347653686268274670');" style="">  71  import org.broadleafcommerce.openadmin.server.security.service.EntityFormModifierDataPoint;                       </span>
<span class="-5654897577089013652" onmouseenter="enter('-5654897577089013652');" onmouseout="out('-5654897577089013652');" style="">  72  import org.broadleafcommerce.openadmin.server.security.service.EntityFormModifierRequest;                         </span>
<span class="8609771947297205873" onmouseenter="enter('8609771947297205873');" onmouseout="out('8609771947297205873');" style="">  73  import org.broadleafcommerce.openadmin.server.security.service.ExceptionAwareRowLevelSecurityProvider;            </span>
<span class="78786346091609662" onmouseenter="enter('78786346091609662');" onmouseout="out('78786346091609662');" style="">  74  import org.broadleafcommerce.openadmin.server.security.service.RowLevelSecurityService;                           </span>
<span class="-3170172369947649824" onmouseenter="enter('-3170172369947649824');" onmouseout="out('-3170172369947649824');" style="">  75  import org.broadleafcommerce.openadmin.server.security.service.navigation.AdminNavigationService;                 </span>
<span class="-3881535627450957263" onmouseenter="enter('-3881535627450957263');" onmouseout="out('-3881535627450957263');" style="">  76  import org.broadleafcommerce.openadmin.server.service.AdminEntityService;                                         </span>
<span class="-1454726158681359973" onmouseenter="enter('-1454726158681359973');" onmouseout="out('-1454726158681359973');" style="">  77  import org.broadleafcommerce.openadmin.server.service.persistence.PersistenceManager;                             </span>
<span class="97669409268306845" onmouseenter="enter('97669409268306845');" onmouseout="out('97669409268306845');" style="">  78  import org.broadleafcommerce.openadmin.server.service.persistence.PersistenceManagerFactory;                      </span>
<span class="-3086540061138981164" onmouseenter="enter('-3086540061138981164');" onmouseout="out('-3086540061138981164');" style="">  79  import org.broadleafcommerce.openadmin.server.service.persistence.module.BasicPersistenceModule;                  </span>
<span class="6020321283788374630" onmouseenter="enter('6020321283788374630');" onmouseout="out('6020321283788374630');" style="">  80  import org.broadleafcommerce.openadmin.server.service.persistence.module.FieldManager;                            </span>
<span class="-2042519459673859584" onmouseenter="enter('-2042519459673859584');" onmouseout="out('-2042519459673859584');" style="">  81  import org.broadleafcommerce.openadmin.web.form.component.DefaultListGridActions;                                 </span>
<span class="3056790491614608405" onmouseenter="enter('3056790491614608405');" onmouseout="out('3056790491614608405');" style="">  82  import org.broadleafcommerce.openadmin.web.form.component.ListGrid;                                               </span>
<span class="5295362033766750426" onmouseenter="enter('5295362033766750426');" onmouseout="out('5295362033766750426');" style="">  83  import org.broadleafcommerce.openadmin.web.form.component.ListGridAction;                                         </span>
<span class="-3450485825037219414" onmouseenter="enter('-3450485825037219414');" onmouseout="out('-3450485825037219414');" style="">  84  import org.broadleafcommerce.openadmin.web.form.component.ListGridActionGroup;                                    </span>
<span class="-3405551311883594169" onmouseenter="enter('-3405551311883594169');" onmouseout="out('-3405551311883594169');" style="">  85  import org.broadleafcommerce.openadmin.web.form.component.ListGridRecord;                                         </span>
<span class="-5608490858121609411" onmouseenter="enter('-5608490858121609411');" onmouseout="out('-5608490858121609411');" style="">  86  import org.broadleafcommerce.openadmin.web.form.component.MediaField;                                             </span>
<span class="-8639148455058795423" onmouseenter="enter('-8639148455058795423');" onmouseout="out('-8639148455058795423');" style="">  87  import org.broadleafcommerce.openadmin.web.form.component.RuleBuilderField;                                       </span>
<span class="7920804437009762662" onmouseenter="enter('7920804437009762662');" onmouseout="out('7920804437009762662');" style="">  88  import org.broadleafcommerce.openadmin.web.form.entity.CodeField;                                                 </span>
<span class="3594570724696916406" onmouseenter="enter('3594570724696916406');" onmouseout="out('3594570724696916406');" style="">  89  import org.broadleafcommerce.openadmin.web.form.entity.ComboField;                                                </span>
<span class="1405974373227613661" onmouseenter="enter('1405974373227613661');" onmouseout="out('1405974373227613661');" style="">  90  import org.broadleafcommerce.openadmin.web.form.entity.DefaultAdornedEntityFormActions;                           </span>
<span class="2718350422838759693" onmouseenter="enter('2718350422838759693');" onmouseout="out('2718350422838759693');" style="">  91  import org.broadleafcommerce.openadmin.web.form.entity.DefaultEntityFormActions;                                  </span>
<span class="-7452009352681558215" onmouseenter="enter('-7452009352681558215');" onmouseout="out('-7452009352681558215');" style="">  92  import org.broadleafcommerce.openadmin.web.form.entity.DynamicEntityFormInfo;                                     </span>
<span class="8035715143965725316" onmouseenter="enter('8035715143965725316');" onmouseout="out('8035715143965725316');" style="">  93  import org.broadleafcommerce.openadmin.web.form.entity.EntityForm;                                                </span>
<span class="6015559832933397076" onmouseenter="enter('6015559832933397076');" onmouseout="out('6015559832933397076');" style="">  94  import org.broadleafcommerce.openadmin.web.form.entity.Field;                                                     </span>
<span class="-902704191270810798" onmouseenter="enter('-902704191270810798');" onmouseout="out('-902704191270810798');" style="">  95  import org.broadleafcommerce.openadmin.web.rulebuilder.DataDTODeserializer;                                       </span>
<span class="-5891661051837252429" onmouseenter="enter('-5891661051837252429');" onmouseout="out('-5891661051837252429');" style="">  96  import org.broadleafcommerce.openadmin.web.rulebuilder.dto.DataDTO;                                               </span>
<span class="-5682953954690678360" onmouseenter="enter('-5682953954690678360');" onmouseout="out('-5682953954690678360');" style="">  97  import org.broadleafcommerce.openadmin.web.rulebuilder.dto.DataWrapper;                                           </span>
<span class="-5901812469549191870" onmouseenter="enter('-5901812469549191870');" onmouseout="out('-5901812469549191870');" style="">  98  import org.broadleafcommerce.openadmin.web.rulebuilder.dto.FieldDTO;                                              </span>
<span class="5057654301829863353" onmouseenter="enter('5057654301829863353');" onmouseout="out('5057654301829863353');" style="">  99  import org.broadleafcommerce.openadmin.web.rulebuilder.dto.FieldWrapper;                                          </span>
<span class="1299345749740405613" onmouseenter="enter('1299345749740405613');" onmouseout="out('1299345749740405613');" style=""> 100  import org.codehaus.jettison.json.JSONObject;                                                                     </span>
<span class="-7404358339654927739" onmouseenter="enter('-7404358339654927739');" onmouseout="out('-7404358339654927739');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 101 +import org.springframework.beans.factory.annotation.Value;                                                        </span>
<span class="5894662938986881653" onmouseenter="enter('5894662938986881653');" onmouseout="out('5894662938986881653');" style=""> 102  import org.springframework.context.MessageSource;                                                                 </span>
<span class="4998592591649731876" onmouseenter="enter('4998592591649731876');" onmouseout="out('4998592591649731876');" style=""> 103  import org.springframework.context.NoSuchMessageException;                                                        </span>
<span class="-5275076188864034753" onmouseenter="enter('-5275076188864034753');" onmouseout="out('-5275076188864034753');" style=""> 104  import org.springframework.stereotype.Service;                                                                    </span>

<span class="1687723025421661461" onmouseenter="enter('1687723025421661461');" onmouseout="out('1687723025421661461');" style=""> 105  import com.fasterxml.jackson.core.Version;                                                                        </span>
<span class="3949390651369204057" onmouseenter="enter('3949390651369204057');" onmouseout="out('3949390651369204057');" style=""> 106  import com.fasterxml.jackson.databind.ObjectMapper;                                                               </span>
<span class="-4978580670739809564" onmouseenter="enter('-4978580670739809564');" onmouseout="out('-4978580670739809564');" style=""> 107  import com.fasterxml.jackson.databind.module.SimpleModule;                                                        </span>

<span class="103340661636203254" onmouseenter="enter('103340661636203254');" onmouseout="out('103340661636203254');" style=""> 108  import java.io.IOException;                                                                                       </span>
<span class="2075466404860203191" onmouseenter="enter('2075466404860203191');" onmouseout="out('2075466404860203191');" style=""> 109  import java.math.BigDecimal;                                                                                      </span>
<span class="1238662365364477381" onmouseenter="enter('1238662365364477381');" onmouseout="out('1238662365364477381');" style=""> 110  import java.text.DateFormat;                                                                                      </span>
<span class="5374616781072617946" onmouseenter="enter('5374616781072617946');" onmouseout="out('5374616781072617946');" style=""> 111  import java.text.DateFormatSymbols;                                                                               </span>
<span class="39790854174282861" onmouseenter="enter('39790854174282861');" onmouseout="out('39790854174282861');" style=""> 112  import java.text.ParseException;                                                                                  </span>
<span class="54331962280914690" onmouseenter="enter('54331962280914690');" onmouseout="out('54331962280914690');" style=""> 113  import java.text.SimpleDateFormat;                                                                                </span>
<span class="9191247685397773893" onmouseenter="enter('9191247685397773893');" onmouseout="out('9191247685397773893');" style=""> 114  import java.util.ArrayList;                                                                                       </span>
<span class="-28465676010609596" onmouseenter="enter('-28465676010609596');" onmouseout="out('-28465676010609596');" style=""> 115  import java.util.Arrays;                                                                                          </span>
<span class="2187055016371707860" onmouseenter="enter('2187055016371707860');" onmouseout="out('2187055016371707860');" style=""> 116  import java.util.Collections;                                                                                     </span>
<span class="1748005127055838442" onmouseenter="enter('1748005127055838442');" onmouseout="out('1748005127055838442');" style=""> 117  import java.util.Date;                                                                                            </span>
<span class="4169599896190320038" onmouseenter="enter('4169599896190320038');" onmouseout="out('4169599896190320038');" style=""> 118  import java.util.HashMap;                                                                                         </span>
<span class="-1786020958497218848" onmouseenter="enter('-1786020958497218848');" onmouseout="out('-1786020958497218848');" style=""> 119  import java.util.List;                                                                                            </span>
<span class="-4563680703184802189" onmouseenter="enter('-4563680703184802189');" onmouseout="out('-4563680703184802189');" style=""> 120  import java.util.Locale;                                                                                          </span>
<span class="6618655971923850695" onmouseenter="enter('6618655971923850695');" onmouseout="out('6618655971923850695');" style=""> 121  import java.util.Map;                                                                                             </span>
<span class="2393042000349901971" onmouseenter="enter('2393042000349901971');" onmouseout="out('2393042000349901971');" style=""> 122  import java.util.Map.Entry;                                                                                       </span>
<span class="3384353015976675773" onmouseenter="enter('3384353015976675773');" onmouseout="out('3384353015976675773');" style=""> 123  import java.util.Set;                                                                                             </span>

<span class="-5292076237369528758" onmouseenter="enter('-5292076237369528758');" onmouseout="out('-5292076237369528758');" style=""> 124  import javax.annotation.Resource;                                                                                 </span>
<span class="-2638882474121018940" onmouseenter="enter('-2638882474121018940');" onmouseout="out('-2638882474121018940');" style=""> 125  import javax.persistence.ManyToOne;                                                                               </span>
<span class="-1278149683069486932" onmouseenter="enter('-1278149683069486932');" onmouseout="out('-1278149683069486932');" style=""> 126  import javax.persistence.OneToOne;                                                                                </span>
<span class="-2972028083581866805" onmouseenter="enter('-2972028083581866805');" onmouseout="out('-2972028083581866805');" style=""> 127  import javax.servlet.http.HttpServletRequest;                                                                     </span>
<span  style=""> 128                                                                                                                    </span>
<span  style=""> 129                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 130  /**                                                                                                               </span>
<span class="-346667533686466806" onmouseenter="enter('-346667533686466806');" onmouseout="out('-346667533686466806');" style=""> 131   * @author Andre Azzolini (apazzolini)                                                                            </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 132   */                                                                                                               </span>
<span class="4305824758257676503" onmouseenter="enter('4305824758257676503');" onmouseout="out('4305824758257676503');" style=""> 133  @Service(&quot;blFormBuilderService&quot;)                                                                                  </span>
<span class="1873196277582368359" onmouseenter="enter('1873196277582368359');" onmouseout="out('1873196277582368359');" style=""> 134  public class FormBuilderServiceImpl implements FormBuilderService {                                               </span>
<span  style=""> 135                                                                                                                    </span>
<span class="4173594623362970870" onmouseenter="enter('4173594623362970870');" onmouseout="out('4173594623362970870');" style=""> 136      private static final Log LOG = LogFactory.getLog(FormBuilderServiceImpl.class);                               </span>
<span  style=""> 137                                                                                                                    </span>
<span class="-3043900363751028803" onmouseenter="enter('-3043900363751028803');" onmouseout="out('-3043900363751028803');" style=""> 138      public static final String ALTERNATE_ID_PROPERTY = &quot;ALTERNATE_ID&quot;;                                            </span>
<span  style=""> 139                                                                                                                    </span>
<span class="-7828706270204224343" onmouseenter="enter('-7828706270204224343');" onmouseout="out('-7828706270204224343');" style=""> 140      @Resource(name = &quot;blAdminEntityService&quot;)                                                                      </span>
<span class="-8450140140941932116" onmouseenter="enter('-8450140140941932116');" onmouseout="out('-8450140140941932116');" style=""> 141      protected AdminEntityService adminEntityService;                                                              </span>
<span  style=""> 142                                                                                                                    </span>
<span class="-1805811588903622951" onmouseenter="enter('-1805811588903622951');" onmouseout="out('-1805811588903622951');" style=""> 143      @Resource (name = &quot;blAdminNavigationService&quot;)                                                                 </span>
<span class="-7781148449676317002" onmouseenter="enter('-7781148449676317002');" onmouseout="out('-7781148449676317002');" style=""> 144      protected AdminNavigationService navigationService;                                                           </span>
<span  style=""> 145                                                                                                                    </span>
<span class="7211766058790837589" onmouseenter="enter('7211766058790837589');" onmouseout="out('7211766058790837589');" style=""> 146      @Resource(name = &quot;blFormBuilderExtensionManager&quot;)                                                             </span>
<span class="1458252146616806516" onmouseenter="enter('1458252146616806516');" onmouseout="out('1458252146616806516');" style=""> 147      protected FormBuilderExtensionManager extensionManager;                                                       </span>
<span  style=""> 148                                                                                                                    </span>
<span class="1637373992155499263" onmouseenter="enter('1637373992155499263');" onmouseout="out('1637373992155499263');" style=""> 149      @Resource(name=&quot;blEntityConfiguration&quot;)                                                                       </span>
<span class="-8812870795397979367" onmouseenter="enter('-8812870795397979367');" onmouseout="out('-8812870795397979367');" style=""> 150      protected EntityConfiguration entityConfiguration;                                                            </span>
<span  style=""> 151                                                                                                                    </span>
<span class="318567755561422223" onmouseenter="enter('318567755561422223');" onmouseout="out('318567755561422223');" style=""> 152      @Resource(name=&quot;blAdminSecurityRemoteService&quot;)                                                                </span>
<span class="-293302832217381009" onmouseenter="enter('-293302832217381009');" onmouseout="out('-293302832217381009');" style=""> 153      protected SecurityVerifier adminRemoteSecurityService;                                                        </span>
<span  style=""> 154                                                                                                                    </span>
<span class="-1073312679381587606" onmouseenter="enter('-1073312679381587606');" onmouseout="out('-1073312679381587606');" style=""> 155      @Resource(name = &quot;blRowLevelSecurityService&quot;)                                                                 </span>
<span class="7292046362506695965" onmouseenter="enter('7292046362506695965');" onmouseout="out('7292046362506695965');" style=""> 156      protected RowLevelSecurityService rowLevelSecurityService;                                                    </span>
<span  style=""> 157                                                                                                                    </span>
<span class="582138269496436951" onmouseenter="enter('582138269496436951');" onmouseout="out('582138269496436951');" style=""> 158      @Resource(name = &quot;blMediaBuilderService&quot;)                                                                     </span>
<span class="8749601783428818980" onmouseenter="enter('8749601783428818980');" onmouseout="out('8749601783428818980');" style=""> 159      protected MediaBuilderService mediaBuilderService;                                                            </span>
<span  style=""> 160                                                                                                                    </span>
<span class="1982131321477089315" onmouseenter="enter('1982131321477089315');" onmouseout="out('1982131321477089315');" style=""> 161      @Resource(name = &quot;blListGridErrorMessageExtensionManager&quot;)                                                    </span>
<span class="4649294380733883401" onmouseenter="enter('4649294380733883401');" onmouseout="out('4649294380733883401');" style=""> 162      protected ListGridErrorMessageExtensionManager listGridErrorExtensionManager;                                 </span>
<span  style=""> 163                                                                                                                    </span>
<span class="-6302300657638714180" onmouseenter="enter('-6302300657638714180');" onmouseout="out('-6302300657638714180');" style=""> 164      @Resource(name = &quot;blAdminNavigationService&quot;)                                                                  </span>
<span class="-6025330588276587017" onmouseenter="enter('-6025330588276587017');" onmouseout="out('-6025330588276587017');" style=""> 165      protected AdminNavigationService adminNavigationService;                                                      </span>






<span  style=""> 166                                                                                                                    </span>
<span class="6008764380027861894" onmouseenter="enter('6008764380027861894');" onmouseout="out('6008764380027861894');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 167 +    @Resource(name = &quot;blLocaleService&quot;)                                                                           </span>
<span class="-5080270678165807269" onmouseenter="enter('-5080270678165807269');" onmouseout="out('-5080270678165807269');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 168 +    protected LocaleService localeService;                                                                        </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 169 +                                                                                                                  </span>
<span class="2111635565141224242" onmouseenter="enter('2111635565141224242');" onmouseout="out('2111635565141224242');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 170 +    @Resource(name = &quot;blTranslationService&quot;)                                                                      </span>
<span class="3630047639981215429" onmouseenter="enter('3630047639981215429');" onmouseout="out('3630047639981215429');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 171 +    protected TranslationService translationService;                                                              </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 172 +                                                                                                                  </span>
<span class="-7553809325968652706" onmouseenter="enter('-7553809325968652706');" onmouseout="out('-7553809325968652706');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 173 +    @Value(&quot;${use.translation.search:false}&quot;)                                                                     </span>
<span class="-2269006701771046036" onmouseenter="enter('-2269006701771046036');" onmouseout="out('-2269006701771046036');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 174 +    protected boolean useTranslationSearch;                                                                       </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 175 +                                                                                                                  </span>
<span class="8033614225945187624" onmouseenter="enter('8033614225945187624');" onmouseout="out('8033614225945187624');" style=""> 176      protected static final VisibilityEnum[] FORM_HIDDEN_VISIBILITIES = new VisibilityEnum[] {                     </span>
<span class="-8766489859370232859" onmouseenter="enter('-8766489859370232859');" onmouseout="out('-8766489859370232859');" style=""> 177              VisibilityEnum.HIDDEN_ALL, VisibilityEnum.FORM_HIDDEN                                                 </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 178      };                                                                                                            </span>
<span  style=""> 179                                                                                                                    </span>
<span class="4001768864648272267" onmouseenter="enter('4001768864648272267');" onmouseout="out('4001768864648272267');" style=""> 180      protected static final VisibilityEnum[] GRID_HIDDEN_VISIBILITIES = new VisibilityEnum[] {                     </span>
<span class="5602397837491933700" onmouseenter="enter('5602397837491933700');" onmouseout="out('5602397837491933700');" style=""> 181              VisibilityEnum.HIDDEN_ALL, VisibilityEnum.GRID_HIDDEN                                                 </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 182      };                                                                                                            </span>
<span  style=""> 183                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 184      @Override                                                                                                     </span>
<span class="3931952365643845454" onmouseenter="enter('3931952365643845454');" onmouseout="out('3931952365643845454');" style=""><abbr title=" 185      public ListGrid buildMainListGrid(DynamicResultSet drs, ClassMetadata cmd, String sectionKey, List&lt;SectionCrumb&gt; sectionCrumbs)"> 185      public ListGrid buildMainListGrid(DynamicResultSet drs, ClassMetadata cmd, String sectionKey, List&lt;SectionCrumðŸ”µ</abbr></span>
<span class="1998458335829271558" onmouseenter="enter('1998458335829271558');" onmouseout="out('1998458335829271558');" style=""> 186              throws ServiceException {                                                                             </span>
<span  style=""> 187                                                                                                                    </span>
<span class="-7098425003691580554" onmouseenter="enter('-7098425003691580554');" onmouseout="out('-7098425003691580554');" style=""> 188          List&lt;Field&gt; headerFields = new ArrayList&lt;&gt;();                                                             </span>
<span class="1627698519761414576" onmouseenter="enter('1627698519761414576');" onmouseout="out('1627698519761414576');" style=""> 189          ListGrid.Type type = ListGrid.Type.MAIN;                                                                  </span>
<span class="-2507165338472177227" onmouseenter="enter('-2507165338472177227');" onmouseout="out('-2507165338472177227');" style=""> 190          String idProperty = &quot;id&quot;;                                                                                 </span>
<span  style=""> 191                                                                                                                    </span>
<span class="1914895525805456392" onmouseenter="enter('1914895525805456392');" onmouseout="out('1914895525805456392');" style=""> 192          FieldWrapper wrapper = new FieldWrapper();                                                                </span>
<span class="519132227955412437" onmouseenter="enter('519132227955412437');" onmouseout="out('519132227955412437');" style=""> 193          ArrayList&lt;FieldDTO&gt; defaultWrapperFields = new ArrayList&lt;&gt;();                                             </span>
<span class="3681854507729164346" onmouseenter="enter('3681854507729164346');" onmouseout="out('3681854507729164346');" style=""> 194          for (Property p : cmd.getProperties()) {                                                                  </span>
<span class="-1029066852878262358" onmouseenter="enter('-1029066852878262358');" onmouseout="out('-1029066852878262358');" style=""> 195              if (p.getMetadata() instanceof BasicFieldMetadata) {                                                  </span>
<span class="-5664285287189453326" onmouseenter="enter('-5664285287189453326');" onmouseout="out('-5664285287189453326');" style=""> 196                  BasicFieldMetadata fmd = (BasicFieldMetadata) p.getMetadata();                                    </span>
<span  style=""> 197                                                                                                                    </span>
<span class="18031332680368663" onmouseenter="enter('18031332680368663');" onmouseout="out('18031332680368663');" style=""> 198                  if (SupportedFieldType.ID.equals(fmd.getFieldType())) {                                           </span>
<span class="-3962609225474086388" onmouseenter="enter('-3962609225474086388');" onmouseout="out('-3962609225474086388');" style=""> 199                      idProperty = fmd.getName();                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 200                  }                                                                                                 </span>
<span  style=""> 201                                                                                                                    </span>
<span class="-4421297623821608279" onmouseenter="enter('-4421297623821608279');" onmouseout="out('-4421297623821608279');" style=""> 202                  if (fmd.isProminent() != null &amp;&amp; fmd.isProminent()                                                </span>
<span class="-1250799748677743340" onmouseenter="enter('-1250799748677743340');" onmouseout="out('-1250799748677743340');" style=""> 203                          &amp;&amp; !ArrayUtils.contains(getGridHiddenVisibilities(), fmd.getVisibility())) {              </span>
<span class="-8490871683061304534" onmouseenter="enter('-8490871683061304534');" onmouseout="out('-8490871683061304534');" style=""> 204                      Field hf = createHeaderField(p, fmd);                                                         </span>
<span class="465504053416102059" onmouseenter="enter('465504053416102059');" onmouseout="out('465504053416102059');" style=""> 205                      headerFields.add(hf);                                                                         </span>
<span class="6861300594848012112" onmouseenter="enter('6861300594848012112');" onmouseout="out('6861300594848012112');" style=""> 206                      defaultWrapperFields.add(constructFieldDTOFromFieldData(hf, fmd));                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 207                  }                                                                                                 </span>
<span  style=""> 208                                                                                                                    </span>
<span class="7456310891309661190" onmouseenter="enter('7456310891309661190');" onmouseout="out('7456310891309661190');" style=""> 209                  if (fmd.getIsFilter() != null &amp;&amp; fmd.getIsFilter()) {                                             </span>
<span class="2276813412477598729" onmouseenter="enter('2276813412477598729');" onmouseout="out('2276813412477598729');" style=""> 210                      wrapper.getFields().add(constructFieldDTOFromFieldData(createHeaderField(p, fmd), fmd));      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 211                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 212              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 213 +        }                                                                                                         </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 214 +                                                                                                                  </span>
<span class="7035902688492109722" onmouseenter="enter('7035902688492109722');" onmouseout="out('7035902688492109722');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 215 +        if (useTranslationSearch) {                                                                               </span>
<span class="5781419264587889352" onmouseenter="enter('5781419264587889352');" onmouseout="out('5781419264587889352');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 216 +            getTranslationSearchField(cmd.getCeilingType(), defaultWrapperFields);                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 217          }                                                                                                         </span>
<span  style=""> 218                                                                                                                    </span>
<span class="-2480148942784560805" onmouseenter="enter('-2480148942784560805');" onmouseout="out('-2480148942784560805');" style=""><abbr title=" 219          ListGrid listGrid = createListGrid(cmd.getCeilingType(), headerFields, type, drs, sectionKey, 0, idProperty, sectionCrumbs);"> 219          ListGrid listGrid = createListGrid(cmd.getCeilingType(), headerFields, type, drs, sectionKey, 0, idPropertðŸ”µ</abbr></span>
<span  style=""> 220                                                                                                                    </span>
<span class="5965161931380536237" onmouseenter="enter('5965161931380536237');" onmouseout="out('5965161931380536237');" style=""> 221          if (CollectionUtils.isNotEmpty(listGrid.getHeaderFields())) {                                             </span>
<span class="3953700823140818229" onmouseenter="enter('3953700823140818229');" onmouseout="out('3953700823140818229');" style=""> 222              // Set the first column to be able to link to the main entity                                         </span>
<span class="2105374103692198201" onmouseenter="enter('2105374103692198201');" onmouseout="out('2105374103692198201');" style=""> 223              listGrid.getHeaderFields().iterator().next().setMainEntityLink(true);                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 224          } else {                                                                                                  </span>
<span class="-7706502187775684276" onmouseenter="enter('-7706502187775684276');" onmouseout="out('-7706502187775684276');" style=""><abbr title=" 225              String message = &quot;There are no listgrid header fields configured for the class &quot; + cmd.getCeilingType();"> 225              String message = &quot;There are no listgrid header fields configured for the class &quot; + cmd.getCeilingType(ðŸ”µ</abbr></span>
<span class="4913519471581000034" onmouseenter="enter('4913519471581000034');" onmouseout="out('4913519471581000034');" style=""> 226              message += &quot;Please mark some @AdminPresentation fields with &#x27;prominent = true&#x27;&quot;;                      </span>
<span class="683988342023046623" onmouseenter="enter('683988342023046623');" onmouseout="out('683988342023046623');" style=""> 227              LOG.error(message);                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 228          }                                                                                                         </span>
<span  style=""> 229                                                                                                                    </span>
<span class="1067693587814186246" onmouseenter="enter('1067693587814186246');" onmouseout="out('1067693587814186246');" style=""> 230          Date c = new Date();                                                                                      </span>
<span class="488922592354253720" onmouseenter="enter('488922592354253720');" onmouseout="out('488922592354253720');" style=""> 231          String friendlyName = &quot;listGrid&quot; + c.getTime();                                                           </span>
<span class="2615168876841014995" onmouseenter="enter('2615168876841014995');" onmouseout="out('2615168876841014995');" style=""> 232          // Set up the filter builder params                                                                       </span>
<span class="3627072983536168024" onmouseenter="enter('3627072983536168024');" onmouseout="out('3627072983536168024');" style=""> 233          listGrid.setJsonFieldName(friendlyName + &quot;Json&quot;);                                                         </span>
<span class="6488323689834765207" onmouseenter="enter('6488323689834765207');" onmouseout="out('6488323689834765207');" style=""> 234          listGrid.setFriendlyName(friendlyName);                                                                   </span>
<span class="-4532597237542010033" onmouseenter="enter('-4532597237542010033');" onmouseout="out('-4532597237542010033');" style=""> 235          listGrid.setFieldBuilder(&quot;RULE_SIMPLE&quot;);                                                                  </span>
<span class="2366326534416496613" onmouseenter="enter('2366326534416496613');" onmouseout="out('2366326534416496613');" style=""> 236          if (CollectionUtils.isEmpty(wrapper.getFields())) {                                                       </span>
<span class="532531496111421469" onmouseenter="enter('532531496111421469');" onmouseout="out('532531496111421469');" style=""> 237              wrapper.setFields(defaultWrapperFields);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 238          }                                                                                                         </span>
<span class="8083895692807517727" onmouseenter="enter('8083895692807517727');" onmouseout="out('8083895692807517727');" style=""> 239          listGrid.setFieldWrapper(wrapper);                                                                        </span>
<span class="-5116449029302148886" onmouseenter="enter('-5116449029302148886');" onmouseout="out('-5116449029302148886');" style=""> 240          listGrid.setHideFriendlyName(true);                                                                       </span>
<span  style=""> 241                                                                                                                    </span>
<span class="4466331963824990789" onmouseenter="enter('4466331963824990789');" onmouseout="out('4466331963824990789');" style=""> 242          String blankJsonString =  &quot;{\&quot;data\&quot;:[]}&quot;;                                                                </span>
<span class="7445610059504327235" onmouseenter="enter('7445610059504327235');" onmouseout="out('7445610059504327235');" style=""> 243          listGrid.setJson(blankJsonString);                                                                        </span>
<span class="-6647315222721447684" onmouseenter="enter('-6647315222721447684');" onmouseout="out('-6647315222721447684');" style=""> 244          DataWrapper dw = convertJsonToDataWrapper(blankJsonString);                                               </span>
<span class="-3408161092817379645" onmouseenter="enter('-3408161092817379645');" onmouseout="out('-3408161092817379645');" style=""> 245          if (dw != null) {                                                                                         </span>
<span class="-933372440492481068" onmouseenter="enter('-933372440492481068');" onmouseout="out('-933372440492481068');" style=""> 246              listGrid.setDataWrapper(dw);                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 247          }                                                                                                         </span>
<span  style=""> 248                                                                                                                    </span>
<span class="2808273481648426142" onmouseenter="enter('2808273481648426142');" onmouseout="out('2808273481648426142');" style=""> 249          listGrid.addModalRowAction(DefaultListGridActions.SINGLE_SELECT);                                         </span>
<span class="-7419173722157864798" onmouseenter="enter('-7419173722157864798');" onmouseout="out('-7419173722157864798');" style=""> 250          listGrid.setSelectType(ListGrid.SelectType.SINGLE_SELECT);                                                </span>
<span  style=""> 251                                                                                                                    </span>
<span class="-5511350038403165520" onmouseenter="enter('-5511350038403165520');" onmouseout="out('-5511350038403165520');" style=""> 252          extensionManager.getProxy().modifyListGrid(listGrid.getClassName(), listGrid);                            </span>
<span  style=""> 253                                                                                                                    </span>
<span class="8338561479600990216" onmouseenter="enter('8338561479600990216');" onmouseout="out('8338561479600990216');" style=""> 254          return listGrid;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 255 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 256 +                                                                                                                  </span>
<span class="-2473495746700041727" onmouseenter="enter('-2473495746700041727');" onmouseout="out('-2473495746700041727');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 257 +    private void getTranslationSearchField(String ceilingEntity, ArrayList&lt;FieldDTO&gt; defaultWrapperFields) {      </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 258 +                                                                                                                  </span>
<span class="-3232888912368159607" onmouseenter="enter('-3232888912368159607');" onmouseout="out('-3232888912368159607');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 259 +        TranslatedEntity translatedEntity;                                                                        </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 260 +                                                                                                                  </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 261 +        try {                                                                                                     </span>
<span class="-5244579722591725998" onmouseenter="enter('-5244579722591725998');" onmouseout="out('-5244579722591725998');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 262 +            translatedEntity = translationService.getAssignableEntityType(ceilingEntity);                         </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 263 +                                                                                                                  </span>
<span class="-7754722203743621702" onmouseenter="enter('-7754722203743621702');" onmouseout="out('-7754722203743621702');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 264 +            FieldDTO localeField = new FieldDTO();                                                                </span>
<span class="-650403806001508418" onmouseenter="enter('-650403806001508418');" onmouseout="out('-650403806001508418');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 265 +            localeField.setId(&quot;translationLocale&quot;);                                                               </span>
<span class="8883986331867249527" onmouseenter="enter('8883986331867249527');" onmouseout="out('8883986331867249527');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 266 +            localeField.setLabel(&quot;Translation locale&quot;);                                                           </span>
<span class="7199208923750727297" onmouseenter="enter('7199208923750727297');" onmouseout="out('7199208923750727297');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 267 +            localeField.setOperators(&quot;blcFilterOperators_Enumeration&quot;);                                           </span>
<span class="448314703673594143" onmouseenter="enter('448314703673594143');" onmouseout="out('448314703673594143');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 268 +            localeField.setInput(&quot;select&quot;);                                                                       </span>
<span class="-8761693359075365287" onmouseenter="enter('-8761693359075365287');" onmouseout="out('-8761693359075365287');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 269 +            localeField.setType(&quot;string&quot;);                                                                        </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 270 +                                                                                                                  </span>
<span class="-5174724837975624583" onmouseenter="enter('-5174724837975624583');" onmouseout="out('-5174724837975624583');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 271 +            List&lt;org.broadleafcommerce.common.locale.domain.Locale&gt; locales = localeService.findAllLocales();     </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 272 +                                                                                                                  </span>
<span class="-3424573618742224536" onmouseenter="enter('-3424573618742224536');" onmouseout="out('-3424573618742224536');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 273 +            Map&lt;String, String&gt; localeMap = new HashMap&lt;String, String&gt;();                                        </span>
<span class="1309094753405556630" onmouseenter="enter('1309094753405556630');" onmouseout="out('1309094753405556630');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 274 +            for (org.broadleafcommerce.common.locale.domain.Locale l : locales) {                                 </span>
<span class="-2731689503985129359" onmouseenter="enter('-2731689503985129359');" onmouseout="out('-2731689503985129359');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 275 +                localeMap.put(l.getLocaleCode(), l.getFriendlyName());                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 276 +            }                                                                                                     </span>
<span class="-1902025200407977862" onmouseenter="enter('-1902025200407977862');" onmouseout="out('-1902025200407977862');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 277 +            localeField.setValues((new JSONObject(localeMap)).toString());                                        </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 278 +                                                                                                                  </span>
<span class="-5238173597469744650" onmouseenter="enter('-5238173597469744650');" onmouseout="out('-5238173597469744650');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 279 +            defaultWrapperFields.add(localeField);                                                                </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 280 +        } catch (Exception e) {                                                                                   </span>
<span class="-6052835720919181276" onmouseenter="enter('-6052835720919181276');" onmouseout="out('-6052835720919181276');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 281 +            translatedEntity = null;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 282 +        }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 283      }                                                                                                             </span>
<span  style=""> 284                                                                                                                    </span>
<span class="699891459148766711" onmouseenter="enter('699891459148766711');" onmouseout="out('699891459148766711');" style=""> 285      protected FieldDTO constructFieldDTOFromFieldData(Field field, BasicFieldMetadata fmd) {                      </span>
<span class="-2352177721144438592" onmouseenter="enter('-2352177721144438592');" onmouseout="out('-2352177721144438592');" style=""> 286          FieldDTO fieldDTO = new FieldDTO();                                                                       </span>
<span class="-1955942127076587982" onmouseenter="enter('-1955942127076587982');" onmouseout="out('-1955942127076587982');" style=""> 287          //translate the label to display                                                                          </span>
<span class="-4249384918250439089" onmouseenter="enter('-4249384918250439089');" onmouseout="out('-4249384918250439089');" style=""> 288          String label = field.getFriendlyName();                                                                   </span>
<span class="-7826420477706002406" onmouseenter="enter('-7826420477706002406');" onmouseout="out('-7826420477706002406');" style=""> 289          BroadleafRequestContext context = BroadleafRequestContext.getBroadleafRequestContext();                   </span>
<span class="6441987552844354413" onmouseenter="enter('6441987552844354413');" onmouseout="out('6441987552844354413');" style=""> 290          MessageSource messages = context.getMessageSource();                                                      </span>
<span class="5121225958291793486" onmouseenter="enter('5121225958291793486');" onmouseout="out('5121225958291793486');" style=""> 291          if (messages != null) {                                                                                   </span>
<span class="8253723406718302376" onmouseenter="enter('8253723406718302376');" onmouseout="out('8253723406718302376');" style=""> 292              label = messages.getMessage(label, null, label, context.getJavaLocale());                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 293          }                                                                                                         </span>
<span class="7762483336458153581" onmouseenter="enter('7762483336458153581');" onmouseout="out('7762483336458153581');" style=""> 294          fieldDTO.setLabel(label);                                                                                 </span>
<span  style=""> 295                                                                                                                    </span>
<span class="-8673723023935338374" onmouseenter="enter('-8673723023935338374');" onmouseout="out('-8673723023935338374');" style=""> 296          fieldDTO.setId(field.getName());                                                                          </span>
<span class="199309371382711712" onmouseenter="enter('199309371382711712');" onmouseout="out('199309371382711712');" style=""> 297          if (field.getFieldType().equals(&quot;STRING&quot;)) {                                                              </span>
<span class="8880270445034694758" onmouseenter="enter('8880270445034694758');" onmouseout="out('8880270445034694758');" style=""> 298              fieldDTO.setOperators(&quot;blcFilterOperators_Text&quot;);                                                     </span>
<span class="362132093975857936" onmouseenter="enter('362132093975857936');" onmouseout="out('362132093975857936');" style=""> 299          } else if (field.getFieldType().equals(&quot;DATE&quot;)) {                                                         </span>
<span class="-933802372622143860" onmouseenter="enter('-933802372622143860');" onmouseout="out('-933802372622143860');" style=""> 300              fieldDTO.setOperators(&quot;blcFilterOperators_Date&quot;);                                                     </span>
<span class="6478164380950858712" onmouseenter="enter('6478164380950858712');" onmouseout="out('6478164380950858712');" style=""><abbr title=" 301          } else if (field.getFieldType().equals(&quot;NUMBER&quot;) || field.getFieldType().equals(&quot;MONEY&quot;) || field.getFieldType().equals(&quot;DECIMAL&quot;)) {"> 301          } else if (field.getFieldType().equals(&quot;NUMBER&quot;) || field.getFieldType().equals(&quot;MONEY&quot;) || field.getFieldðŸ”µ</abbr></span>
<span class="8490956018155589877" onmouseenter="enter('8490956018155589877');" onmouseout="out('8490956018155589877');" style=""> 302              fieldDTO.setOperators(&quot;blcFilterOperators_Numeric&quot;);                                                  </span>
<span class="-3955546677505185448" onmouseenter="enter('-3955546677505185448');" onmouseout="out('-3955546677505185448');" style=""> 303          } else if (field.getFieldType().equals(&quot;BOOLEAN&quot;)) {                                                      </span>
<span class="-8455532459880737207" onmouseenter="enter('-8455532459880737207');" onmouseout="out('-8455532459880737207');" style=""> 304              fieldDTO.setOperators(&quot;blcFilterOperators_Boolean&quot;);                                                  </span>
<span class="-8945465979032715781" onmouseenter="enter('-8945465979032715781');" onmouseout="out('-8945465979032715781');" style=""> 305          } else if (field.getFieldType().equals(&quot;BROADLEAF_ENUMERATION&quot;)) {                                        </span>
<span class="7946158486041049881" onmouseenter="enter('7946158486041049881');" onmouseout="out('7946158486041049881');" style=""> 306              fieldDTO.setOperators(&quot;blcFilterOperators_Enumeration&quot;);                                              </span>
<span class="-1687118105305598570" onmouseenter="enter('-1687118105305598570');" onmouseout="out('-1687118105305598570');" style=""> 307              fieldDTO.setInput(&quot;select&quot;);                                                                          </span>
<span class="5956593754221125403" onmouseenter="enter('5956593754221125403');" onmouseout="out('5956593754221125403');" style=""> 308              fieldDTO.setType(&quot;string&quot;);                                                                           </span>
<span class="-8055867514585232964" onmouseenter="enter('-8055867514585232964');" onmouseout="out('-8055867514585232964');" style=""> 309              String[][] enumerationValues = fmd.getEnumerationValues ();                                           </span>
<span class="-2928874460015298174" onmouseenter="enter('-2928874460015298174');" onmouseout="out('-2928874460015298174');" style=""> 310              Map&lt;String, String&gt; enumMap = new HashMap&lt;&gt;();                                                        </span>
<span class="-8241397125169255693" onmouseenter="enter('-8241397125169255693');" onmouseout="out('-8241397125169255693');" style=""> 311              for (int i = 0; i &lt; enumerationValues.length; i++) {                                                  </span>
<span class="3518234982487844996" onmouseenter="enter('3518234982487844996');" onmouseout="out('3518234982487844996');" style=""> 312                  enumMap.put(enumerationValues[i][0], enumerationValues[i][1]);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 313              }                                                                                                     </span>
<span  style=""> 314                                                                                                                    </span>
<span class="6553005935364150402" onmouseenter="enter('6553005935364150402');" onmouseout="out('6553005935364150402');" style=""> 315              fieldDTO.setValues(new JSONObject(enumMap).toString());                                               </span>
<span class="-5703564682837731123" onmouseenter="enter('-5703564682837731123');" onmouseout="out('-5703564682837731123');" style=""> 316          } else if (field.getFieldType().equals(&quot;ADDITIONAL_FOREIGN_KEY&quot;)) {                                       </span>
<span class="4888432392511853941" onmouseenter="enter('4888432392511853941');" onmouseout="out('4888432392511853941');" style=""> 317              fieldDTO.setOperators(&quot;blcFilterOperators_Selectize&quot;);                                                </span>
<span class="5956593754221125403" onmouseenter="enter('5956593754221125403');" onmouseout="out('5956593754221125403');" style=""> 318              fieldDTO.setType(&quot;string&quot;);                                                                           </span>
<span  style=""> 319                                                                                                                    </span>
<span class="-7218290231764700666" onmouseenter="enter('-7218290231764700666');" onmouseout="out('-7218290231764700666');" style=""><abbr title=" 320              AdminSection section = adminNavigationService.findAdminSectionByClassAndSectionId(fmd.getForeignKeyClass(), null);"> 320              AdminSection section = adminNavigationService.findAdminSectionByClassAndSectionId(fmd.getForeignKeyClaðŸ”µ</abbr></span>
<span class="2297837107111400660" onmouseenter="enter('2297837107111400660');" onmouseout="out('2297837107111400660');" style=""> 321              if (section != null) {                                                                                </span>
<span class="7209555309149439987" onmouseenter="enter('7209555309149439987');" onmouseout="out('7209555309149439987');" style=""> 322                  String sectionKey = section.getUrl().substring(1);                                                </span>
<span class="-1035532662553188661" onmouseenter="enter('-1035532662553188661');" onmouseout="out('-1035532662553188661');" style=""> 323                  fieldDTO.setSelectizeSectionKey(sectionKey);                                                      </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 324              } else {                                                                                              </span>
<span class="-1256248398739173538" onmouseenter="enter('-1256248398739173538');" onmouseout="out('-1256248398739173538');" style=""> 325                  fieldDTO.setSelectizeSectionKey(fmd.getForeignKeyClass());                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 326              }                                                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 327          } else {                                                                                                  </span>
<span class="8880270445034694758" onmouseenter="enter('8880270445034694758');" onmouseout="out('8880270445034694758');" style=""> 328              fieldDTO.setOperators(&quot;blcFilterOperators_Text&quot;);                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 329          }                                                                                                         </span>
<span  style=""> 330                                                                                                                    </span>
<span class="1806966708924182038" onmouseenter="enter('1806966708924182038');" onmouseout="out('1806966708924182038');" style=""> 331          return fieldDTO;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 332      }                                                                                                             </span>
<span  style=""> 333                                                                                                                    </span>
<span class="2032004802479742635" onmouseenter="enter('2032004802479742635');" onmouseout="out('2032004802479742635');" style=""> 334      protected Field createHeaderField(Property p, BasicFieldMetadata fmd) {                                       </span>
<span class="427159967034734869" onmouseenter="enter('427159967034734869');" onmouseout="out('427159967034734869');" style=""> 335          Field hf;                                                                                                 </span>
<span class="-6909671090697516708" onmouseenter="enter('-6909671090697516708');" onmouseout="out('-6909671090697516708');" style=""> 336          if (fmd.getFieldType().equals(SupportedFieldType.EXPLICIT_ENUMERATION) ||                                 </span>
<span class="7742695259499854892" onmouseenter="enter('7742695259499854892');" onmouseout="out('7742695259499854892');" style=""> 337                  fmd.getFieldType().equals(SupportedFieldType.BROADLEAF_ENUMERATION) ||                            </span>
<span class="-7610412024039368203" onmouseenter="enter('-7610412024039368203');" onmouseout="out('-7610412024039368203');" style=""> 338                  fmd.getFieldType().equals(SupportedFieldType.DATA_DRIVEN_ENUMERATION) ||                          </span>
<span class="4727590924096529195" onmouseenter="enter('4727590924096529195');" onmouseout="out('4727590924096529195');" style=""> 339                  fmd.getFieldType().equals(SupportedFieldType.EMPTY_ENUMERATION)) {                                </span>
<span class="-4376407603411664672" onmouseenter="enter('-4376407603411664672');" onmouseout="out('-4376407603411664672');" style=""> 340              hf = new ComboField();                                                                                </span>
<span class="5290847828500288961" onmouseenter="enter('5290847828500288961');" onmouseout="out('5290847828500288961');" style=""> 341              ((ComboField) hf).setOptions(fmd.getEnumerationValues());                                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 342          } else {                                                                                                  </span>
<span class="5244670954290190768" onmouseenter="enter('5244670954290190768');" onmouseout="out('5244670954290190768');" style=""> 343              hf = new Field();                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 344          }                                                                                                         </span>
<span  style=""> 345                                                                                                                    </span>
<span class="-8016020800600825313" onmouseenter="enter('-8016020800600825313');" onmouseout="out('-8016020800600825313');" style=""> 346          hf.withName(p.getName())                                                                                  </span>
<span class="-6196212150372307342" onmouseenter="enter('-6196212150372307342');" onmouseout="out('-6196212150372307342');" style=""> 347            .withFriendlyName(StringUtils.isNotEmpty(fmd.getFriendlyName()) ? fmd.getFriendlyName() : p.getName())  </span>
<span class="-8419553007953225668" onmouseenter="enter('-8419553007953225668');" onmouseout="out('-8419553007953225668');" style=""> 348            .withOrder(fmd.getGridOrder())                                                                          </span>
<span class="1117956679003990491" onmouseenter="enter('1117956679003990491');" onmouseout="out('1117956679003990491');" style=""> 349            .withColumnWidth(fmd.getColumnWidth())                                                                  </span>
<span class="3058247827263925638" onmouseenter="enter('3058247827263925638');" onmouseout="out('3058247827263925638');" style=""> 350            .withForeignKeyDisplayValueProperty(fmd.getForeignKeyDisplayValueProperty())                            </span>
<span class="3198496511046166958" onmouseenter="enter('3198496511046166958');" onmouseout="out('3198496511046166958');" style=""> 351            .withForeignKeyClass(fmd.getForeignKeyClass())                                                          </span>
<span class="-2338070414188990290" onmouseenter="enter('-2338070414188990290');" onmouseout="out('-2338070414188990290');" style=""> 352            .withForeignKeySectionPath(getAdminSectionPath(fmd.getForeignKeyClass()))                               </span>
<span class="6217223457568112539" onmouseenter="enter('6217223457568112539');" onmouseout="out('6217223457568112539');" style=""> 353            .withOwningEntityClass(fmd.getOwningClass() != null ? fmd.getOwningClass() : fmd.getTargetClass())      </span>
<span class="-5416800581554261750" onmouseenter="enter('-5416800581554261750');" onmouseout="out('-5416800581554261750');" style=""> 354            .withCanLinkToExternalEntity(fmd.getCanLinkToExternalEntity());                                         </span>
<span class="5921747215124261866" onmouseenter="enter('5921747215124261866');" onmouseout="out('5921747215124261866');" style=""> 355          String fieldType = fmd.getFieldType() == null ? null : fmd.getFieldType().toString();                     </span>
<span class="6628044949969244118" onmouseenter="enter('6628044949969244118');" onmouseout="out('6628044949969244118');" style=""> 356          hf.setFieldType(fieldType);                                                                               </span>
<span  style=""> 357                                                                                                                    </span>
<span class="-6552084929958187472" onmouseenter="enter('-6552084929958187472');" onmouseout="out('-6552084929958187472');" style=""> 358          return hf;                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 359      }                                                                                                             </span>
<span  style=""> 360                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 361      @Override                                                                                                     </span>
<span class="-5402852713479232147" onmouseenter="enter('-5402852713479232147');" onmouseout="out('-5402852713479232147');" style=""> 362      public ListGrid buildCollectionListGrid(String containingEntityId, DynamicResultSet drs, Property field,      </span>
<span class="8976903068062443392" onmouseenter="enter('8976903068062443392');" onmouseout="out('8976903068062443392');" style=""> 363              String sectionKey, List&lt;SectionCrumb&gt; sectionCrumbs)                                                  </span>
<span class="1998458335829271558" onmouseenter="enter('1998458335829271558');" onmouseout="out('1998458335829271558');" style=""> 364              throws ServiceException {                                                                             </span>
<span class="3501499603601527305" onmouseenter="enter('3501499603601527305');" onmouseout="out('3501499603601527305');" style=""> 365          FieldMetadata fmd = field.getMetadata();                                                                  </span>
<span class="6565595844041240946" onmouseenter="enter('6565595844041240946');" onmouseout="out('6565595844041240946');" style=""> 366          // Get the class metadata for this particular field                                                       </span>
<span class="-8834884127458938753" onmouseenter="enter('-8834884127458938753');" onmouseout="out('-8834884127458938753');" style=""> 367          PersistencePackageRequest ppr = PersistencePackageRequest.fromMetadata(fmd, sectionCrumbs);               </span>
<span class="-470699824173107204" onmouseenter="enter('-470699824173107204');" onmouseout="out('-470699824173107204');" style=""> 368          if (field != null) {                                                                                      </span>
<span class="8971896145704334353" onmouseenter="enter('8971896145704334353');" onmouseout="out('8971896145704334353');" style=""> 369              ppr.setSectionEntityField(field.getName());                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 370          }                                                                                                         </span>
<span class="1142804962458743647" onmouseenter="enter('1142804962458743647');" onmouseout="out('1142804962458743647');" style=""> 371          ClassMetadata cmd = adminEntityService.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();    </span>
<span  style=""> 372                                                                                                                    </span>
<span class="-7098425003691580554" onmouseenter="enter('-7098425003691580554');" onmouseout="out('-7098425003691580554');" style=""> 373          List&lt;Field&gt; headerFields = new ArrayList&lt;&gt;();                                                             </span>
<span class="-9156899327835473831" onmouseenter="enter('-9156899327835473831');" onmouseout="out('-9156899327835473831');" style=""> 374          ListGrid.Type type = null;                                                                                </span>
<span class="2210107579970549810" onmouseenter="enter('2210107579970549810');" onmouseout="out('2210107579970549810');" style=""> 375          boolean editable = false;                                                                                 </span>
<span class="-5174966648729145523" onmouseenter="enter('-5174966648729145523');" onmouseout="out('-5174966648729145523');" style=""> 376          boolean sortable = false;                                                                                 </span>
<span class="6635173913482908092" onmouseenter="enter('6635173913482908092');" onmouseout="out('6635173913482908092');" style=""> 377          boolean readOnly = false;                                                                                 </span>
<span class="-239666301548818102" onmouseenter="enter('-239666301548818102');" onmouseout="out('-239666301548818102');" style=""> 378          boolean hideIdColumn = false;                                                                             </span>
<span class="-8650993504988805305" onmouseenter="enter('-8650993504988805305');" onmouseout="out('-8650993504988805305');" style=""> 379          boolean canFilterAndSort = true;                                                                          </span>
<span class="-2910642919012813708" onmouseenter="enter('-2910642919012813708');" onmouseout="out('-2910642919012813708');" style=""> 380          boolean modalSingleSelectable = false;                                                                    </span>
<span class="-5712500441207558612" onmouseenter="enter('-5712500441207558612');" onmouseout="out('-5712500441207558612');" style=""> 381          boolean modalMultiSelectable = false;                                                                     </span>
<span class="4919598248352463197" onmouseenter="enter('4919598248352463197');" onmouseout="out('4919598248352463197');" style=""> 382          boolean selectize = false;                                                                                </span>
<span class="3512909155182388697" onmouseenter="enter('3512909155182388697');" onmouseout="out('3512909155182388697');" style=""> 383          boolean isMedia = false;                                                                                  </span>
<span class="-2503475837959180700" onmouseenter="enter('-2503475837959180700');" onmouseout="out('-2503475837959180700');" style=""> 384          boolean isLookup = false;                                                                                 </span>
<span class="4230800067451301552" onmouseenter="enter('4230800067451301552');" onmouseout="out('4230800067451301552');" style=""> 385          String sortProperty = null;                                                                               </span>
<span class="1914895525805456392" onmouseenter="enter('1914895525805456392');" onmouseout="out('1914895525805456392');" style=""> 386          FieldWrapper wrapper = new FieldWrapper();                                                                </span>
<span class="519132227955412437" onmouseenter="enter('519132227955412437');" onmouseout="out('519132227955412437');" style=""> 387          ArrayList&lt;FieldDTO&gt; defaultWrapperFields = new ArrayList&lt;&gt;();                                             </span>
<span  style=""> 388                                                                                                                    </span>
<span  style=""> 389                                                                                                                    </span>
<span class="-2507165338472177227" onmouseenter="enter('-2507165338472177227');" onmouseout="out('-2507165338472177227');" style=""> 390          String idProperty = &quot;id&quot;;                                                                                 </span>
<span class="-3497335608114491506" onmouseenter="enter('-3497335608114491506');" onmouseout="out('-3497335608114491506');" style=""> 391          for (Property property : cmd.getProperties()) {                                                           </span>
<span class="8031432354977321026" onmouseenter="enter('8031432354977321026');" onmouseout="out('8031432354977321026');" style=""> 392              if (property.getMetadata() instanceof BasicFieldMetadata &amp;&amp;                                           </span>
<span class="-5839489581778150379" onmouseenter="enter('-5839489581778150379');" onmouseout="out('-5839489581778150379');" style=""> 393                      SupportedFieldType.ID==((BasicFieldMetadata) property.getMetadata()).getFieldType() &amp;&amp;        </span>
<span class="493640064601793810" onmouseenter="enter('493640064601793810');" onmouseout="out('493640064601793810');" style=""> 394                      //make sure it&#x27;s a property for this entity - not an association                              </span>
<span class="1409226213228097655" onmouseenter="enter('1409226213228097655');" onmouseout="out('1409226213228097655');" style=""> 395                      !property.getName().contains(&quot;.&quot;)) {                                                          </span>
<span class="2195830063219251158" onmouseenter="enter('2195830063219251158');" onmouseout="out('2195830063219251158');" style=""> 396                  idProperty = property.getName();                                                                  </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 397                  break;                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 398              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 399          }                                                                                                         </span>
<span class="6884921877918156743" onmouseenter="enter('6884921877918156743');" onmouseout="out('6884921877918156743');" style=""> 400          // Get the header fields for this list grid. Note that the header fields are different depending on the   </span>
<span class="-3735179050749022362" onmouseenter="enter('-3735179050749022362');" onmouseout="out('-3735179050749022362');" style=""> 401          // kind of field this is.                                                                                 </span>
<span class="9198797156358178451" onmouseenter="enter('9198797156358178451');" onmouseout="out('9198797156358178451');" style=""> 402          if (fmd instanceof BasicFieldMetadata) {                                                                  </span>
<span class="6405821464206093762" onmouseenter="enter('6405821464206093762');" onmouseout="out('6405821464206093762');" style=""> 403              readOnly = ((BasicFieldMetadata) fmd).getReadOnly();                                                  </span>
<span class="-1800504749677095068" onmouseenter="enter('-1800504749677095068');" onmouseout="out('-1800504749677095068');" style=""> 404              modalSingleSelectable = true;                                                                         </span>
<span class="3681854507729164346" onmouseenter="enter('3681854507729164346');" onmouseout="out('3681854507729164346');" style=""> 405              for (Property p : cmd.getProperties()) {                                                              </span>
<span class="-1029066852878262358" onmouseenter="enter('-1029066852878262358');" onmouseout="out('-1029066852878262358');" style=""> 406                  if (p.getMetadata() instanceof BasicFieldMetadata) {                                              </span>
<span class="-941768582779766785" onmouseenter="enter('-941768582779766785');" onmouseout="out('-941768582779766785');" style=""> 407                      BasicFieldMetadata md = (BasicFieldMetadata) p.getMetadata();                                 </span>
<span  style=""> 408                                                                                                                    </span>
<span class="-5406944276814759650" onmouseenter="enter('-5406944276814759650');" onmouseout="out('-5406944276814759650');" style=""> 409                      if (SupportedFieldType.ID.equals(md.getFieldType())) {                                        </span>
<span class="4761882765386854544" onmouseenter="enter('4761882765386854544');" onmouseout="out('4761882765386854544');" style=""> 410                          idProperty = md.getName();                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 411                      }                                                                                             </span>
<span  style=""> 412                                                                                                                    </span>
<span class="-3346338779761665081" onmouseenter="enter('-3346338779761665081');" onmouseout="out('-3346338779761665081');" style=""> 413                      if (md.isProminent() != null &amp;&amp; md.isProminent()                                              </span>
<span class="-8627428290755725902" onmouseenter="enter('-8627428290755725902');" onmouseout="out('-8627428290755725902');" style=""> 414                              &amp;&amp; !ArrayUtils.contains(getGridHiddenVisibilities(), md.getVisibility())) {           </span>
<span class="-1913804071468350989" onmouseenter="enter('-1913804071468350989');" onmouseout="out('-1913804071468350989');" style=""> 415                          Field hf = createHeaderField(p, md);                                                      </span>
<span class="465504053416102059" onmouseenter="enter('465504053416102059');" onmouseout="out('465504053416102059');" style=""> 416                          headerFields.add(hf);                                                                     </span>
<span class="1435471691691453270" onmouseenter="enter('1435471691691453270');" onmouseout="out('1435471691691453270');" style=""> 417                          defaultWrapperFields.add(constructFieldDTOFromFieldData(hf, md));                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 418                      }                                                                                             </span>
<span  style=""> 419                                                                                                                    </span>
<span class="2885325040802931258" onmouseenter="enter('2885325040802931258');" onmouseout="out('2885325040802931258');" style=""> 420                      if (md.getIsFilter() != null &amp;&amp; md.getIsFilter()) {                                           </span>
<span class="6602106188311855247" onmouseenter="enter('6602106188311855247');" onmouseout="out('6602106188311855247');" style=""> 421                          Field f = createHeaderField(p, md);                                                       </span>
<span class="-6869394336056843666" onmouseenter="enter('-6869394336056843666');" onmouseout="out('-6869394336056843666');" style=""> 422                          wrapper.getFields().add(constructFieldDTOFromFieldData(f, md));                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 423                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 424                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 425              }                                                                                                     </span>
<span  style=""> 426                                                                                                                    </span>
<span class="6210556782412808449" onmouseenter="enter('6210556782412808449');" onmouseout="out('6210556782412808449');" style=""> 427              type = ListGrid.Type.TO_ONE;                                                                          </span>
<span class="-1553716655191536539" onmouseenter="enter('-1553716655191536539');" onmouseout="out('-1553716655191536539');" style=""> 428          } else if (fmd instanceof BasicCollectionMetadata) {                                                      </span>
<span class="-8775784672799201545" onmouseenter="enter('-8775784672799201545');" onmouseout="out('-8775784672799201545');" style=""> 429              BasicCollectionMetadata bcm = (BasicCollectionMetadata) fmd;                                          </span>
<span class="3088375959257191151" onmouseenter="enter('3088375959257191151');" onmouseout="out('3088375959257191151');" style=""> 430              readOnly = !bcm.isMutable();                                                                          </span>
<span  style=""> 431                                                                                                                    </span>
<span class="-7423610773734855911" onmouseenter="enter('-7423610773734855911');" onmouseout="out('-7423610773734855911');" style=""> 432              if(AddMethodType.LOOKUP.equals(bcm.getAddMethodType())) {                                             </span>
<span class="394788880007387168" onmouseenter="enter('394788880007387168');" onmouseout="out('394788880007387168');" style=""> 433                  isLookup = true;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 434              }                                                                                                     </span>
<span  style=""> 435                                                                                                                    </span>
<span class="-8334523343019219245" onmouseenter="enter('-8334523343019219245');" onmouseout="out('-8334523343019219245');" style=""> 436              if (AddMethodType.SELECTIZE_LOOKUP.equals(bcm.getAddMethodType())) {                                  </span>
<span class="-7023171196031834591" onmouseenter="enter('-7023171196031834591');" onmouseout="out('-7023171196031834591');" style=""> 437                  Property p = cmd.getPMap().get(bcm.getSelectizeVisibleField());                                   </span>
<span class="-4724213940983805674" onmouseenter="enter('-4724213940983805674');" onmouseout="out('-4724213940983805674');" style=""> 438                  if (p != null) {                                                                                  </span>
<span class="-941768582779766785" onmouseenter="enter('-941768582779766785');" onmouseout="out('-941768582779766785');" style=""> 439                      BasicFieldMetadata md = (BasicFieldMetadata) p.getMetadata();                                 </span>
<span  style=""> 440                                                                                                                    </span>
<span class="-1913804071468350989" onmouseenter="enter('-1913804071468350989');" onmouseout="out('-1913804071468350989');" style=""> 441                      Field hf = createHeaderField(p, md);                                                          </span>
<span class="465504053416102059" onmouseenter="enter('465504053416102059');" onmouseout="out('465504053416102059');" style=""> 442                      headerFields.add(hf);                                                                         </span>
<span class="4412272633078565706" onmouseenter="enter('4412272633078565706');" onmouseout="out('4412272633078565706');" style=""> 443                      wrapper.getFields().add(constructFieldDTOFromFieldData(hf, md));                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 444                  }                                                                                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 445              } else {                                                                                              </span>
<span class="3681854507729164346" onmouseenter="enter('3681854507729164346');" onmouseout="out('3681854507729164346');" style=""> 446                  for (Property p : cmd.getProperties()) {                                                          </span>
<span class="-1029066852878262358" onmouseenter="enter('-1029066852878262358');" onmouseout="out('-1029066852878262358');" style=""> 447                      if (p.getMetadata() instanceof BasicFieldMetadata) {                                          </span>
<span class="-941768582779766785" onmouseenter="enter('-941768582779766785');" onmouseout="out('-941768582779766785');" style=""> 448                          BasicFieldMetadata md = (BasicFieldMetadata) p.getMetadata();                             </span>
<span class="-3346338779761665081" onmouseenter="enter('-3346338779761665081');" onmouseout="out('-3346338779761665081');" style=""> 449                          if (md.isProminent() != null &amp;&amp; md.isProminent()                                          </span>
<span class="-8627428290755725902" onmouseenter="enter('-8627428290755725902');" onmouseout="out('-8627428290755725902');" style=""> 450                                  &amp;&amp; !ArrayUtils.contains(getGridHiddenVisibilities(), md.getVisibility())) {       </span>
<span class="-1913804071468350989" onmouseenter="enter('-1913804071468350989');" onmouseout="out('-1913804071468350989');" style=""> 451                              Field hf = createHeaderField(p, md);                                                  </span>
<span class="465504053416102059" onmouseenter="enter('465504053416102059');" onmouseout="out('465504053416102059');" style=""> 452                              headerFields.add(hf);                                                                 </span>
<span class="1435471691691453270" onmouseenter="enter('1435471691691453270');" onmouseout="out('1435471691691453270');" style=""> 453                              defaultWrapperFields.add(constructFieldDTOFromFieldData(hf, md));                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 454                          }                                                                                         </span>
<span  style=""> 455                                                                                                                    </span>
<span class="2885325040802931258" onmouseenter="enter('2885325040802931258');" onmouseout="out('2885325040802931258');" style=""> 456                          if (md.getIsFilter() != null &amp;&amp; md.getIsFilter()) {                                       </span>
<span class="6602106188311855247" onmouseenter="enter('6602106188311855247');" onmouseout="out('6602106188311855247');" style=""> 457                              Field f = createHeaderField(p, md);                                                   </span>
<span class="-6869394336056843666" onmouseenter="enter('-6869394336056843666');" onmouseout="out('-6869394336056843666');" style=""> 458                              wrapper.getFields().add(constructFieldDTOFromFieldData(f, md));                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 459                          }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 460                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 461                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 462              }                                                                                                     </span>
<span  style=""> 463                                                                                                                    </span>
<span class="5616863682741119985" onmouseenter="enter('5616863682741119985');" onmouseout="out('5616863682741119985');" style=""> 464              type = ListGrid.Type.BASIC;                                                                           </span>
<span  style=""> 465                                                                                                                    </span>
<span class="4789284002623142077" onmouseenter="enter('4789284002623142077');" onmouseout="out('4789284002623142077');" style=""><abbr title=" 466              if (AddMethodType.PERSIST.equals(bcm.getAddMethodType()) || AddMethodType.PERSIST_EMPTY.equals(bcm.getAddMethodType())) {"> 466              if (AddMethodType.PERSIST.equals(bcm.getAddMethodType()) || AddMethodType.PERSIST_EMPTY.equals(bcm.getðŸ”µ</abbr></span>
<span class="-5907191702643786371" onmouseenter="enter('-5907191702643786371');" onmouseout="out('-5907191702643786371');" style=""> 467                  editable = true;                                                                                  </span>
<span class="-3279362726035609266" onmouseenter="enter('-3279362726035609266');" onmouseout="out('-3279362726035609266');" style=""> 468              } else if (AddMethodType.SELECTIZE_LOOKUP.equals(bcm.getAddMethodType())) {                           </span>
<span class="7652343580882391271" onmouseenter="enter('7652343580882391271');" onmouseout="out('7652343580882391271');" style=""> 469                  selectize = true;                                                                                 </span>
<span class="-1800504749677095068" onmouseenter="enter('-1800504749677095068');" onmouseout="out('-1800504749677095068');" style=""> 470                  modalSingleSelectable = true;                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 471              } else {                                                                                              </span>
<span class="-1800504749677095068" onmouseenter="enter('-1800504749677095068');" onmouseout="out('-1800504749677095068');" style=""> 472                  modalSingleSelectable = true;                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 473              }                                                                                                     </span>
<span class="-5601810365028455374" onmouseenter="enter('-5601810365028455374');" onmouseout="out('-5601810365028455374');" style=""> 474              sortable = StringUtils.isNotBlank(bcm.getSortProperty());                                             </span>
<span class="5410259152944409683" onmouseenter="enter('5410259152944409683');" onmouseout="out('5410259152944409683');" style=""> 475              if (sortable) {                                                                                       </span>
<span class="5401130852877516905" onmouseenter="enter('5401130852877516905');" onmouseout="out('5401130852877516905');" style=""> 476                  sortProperty = bcm.getSortProperty();                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 477              }                                                                                                     </span>
<span class="-242736616410190546" onmouseenter="enter('-242736616410190546');" onmouseout="out('-242736616410190546');" style=""> 478          } else if (fmd instanceof AdornedTargetCollectionMetadata) {                                              </span>
<span class="-1800504749677095068" onmouseenter="enter('-1800504749677095068');" onmouseout="out('-1800504749677095068');" style=""> 479              modalSingleSelectable = true;                                                                         </span>
<span class="8372678663626684591" onmouseenter="enter('8372678663626684591');" onmouseout="out('8372678663626684591');" style=""> 480              readOnly = !((AdornedTargetCollectionMetadata) fmd).isMutable();                                      </span>
<span class="5808828893872341029" onmouseenter="enter('5808828893872341029');" onmouseout="out('5808828893872341029');" style=""> 481              AdornedTargetCollectionMetadata atcmd = (AdornedTargetCollectionMetadata) fmd;                        </span>
<span  style=""> 482                                                                                                                    </span>
<span class="-8744153650676911691" onmouseenter="enter('-8744153650676911691');" onmouseout="out('-8744153650676911691');" style=""> 483              if(AdornedTargetAddMethodType.LOOKUP.equals(atcmd.getAdornedTargetAddMethodType())) {                 </span>
<span class="394788880007387168" onmouseenter="enter('394788880007387168');" onmouseout="out('394788880007387168');" style=""> 484                  isLookup = true;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 485              }                                                                                                     </span>
<span  style=""> 486                                                                                                                    </span>
<span class="5256125016531832923" onmouseenter="enter('5256125016531832923');" onmouseout="out('5256125016531832923');" style=""> 487              if (AdornedTargetAddMethodType.SELECTIZE_LOOKUP.equals(atcmd.getAdornedTargetAddMethodType())) {      </span>
<span class="7652343580882391271" onmouseenter="enter('7652343580882391271');" onmouseout="out('7652343580882391271');" style=""> 488                  selectize = true;                                                                                 </span>
<span  style=""> 489                                                                                                                    </span>
<span class="6698696772959199393" onmouseenter="enter('6698696772959199393');" onmouseout="out('6698696772959199393');" style=""> 490                  Property p = cmd.getPMap().get(atcmd.getSelectizeVisibleField());                                 </span>
<span class="-4724213940983805674" onmouseenter="enter('-4724213940983805674');" onmouseout="out('-4724213940983805674');" style=""> 491                  if (p != null) {                                                                                  </span>
<span class="-941768582779766785" onmouseenter="enter('-941768582779766785');" onmouseout="out('-941768582779766785');" style=""> 492                      BasicFieldMetadata md = (BasicFieldMetadata) p.getMetadata();                                 </span>
<span  style=""> 493                                                                                                                    </span>
<span class="-1913804071468350989" onmouseenter="enter('-1913804071468350989');" onmouseout="out('-1913804071468350989');" style=""> 494                      Field hf = createHeaderField(p, md);                                                          </span>
<span class="465504053416102059" onmouseenter="enter('465504053416102059');" onmouseout="out('465504053416102059');" style=""> 495                      headerFields.add(hf);                                                                         </span>
<span class="4412272633078565706" onmouseenter="enter('4412272633078565706');" onmouseout="out('4412272633078565706');" style=""> 496                      wrapper.getFields().add(constructFieldDTOFromFieldData(hf, md));                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 497                  }                                                                                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 498              } else {                                                                                              </span>
<span class="7815744478908232711" onmouseenter="enter('7815744478908232711');" onmouseout="out('7815744478908232711');" style=""> 499                  for (String fieldName : atcmd.getGridVisibleFields()) {                                           </span>
<span class="6577951603357424858" onmouseenter="enter('6577951603357424858');" onmouseout="out('6577951603357424858');" style=""> 500                      Property p = cmd.getPMap().get(fieldName);                                                    </span>
<span class="-4724213940983805674" onmouseenter="enter('-4724213940983805674');" onmouseout="out('-4724213940983805674');" style=""> 501                      if (p != null) {                                                                              </span>
<span class="-941768582779766785" onmouseenter="enter('-941768582779766785');" onmouseout="out('-941768582779766785');" style=""> 502                          BasicFieldMetadata md = (BasicFieldMetadata) p.getMetadata();                             </span>
<span  style=""> 503                                                                                                                    </span>
<span class="-1913804071468350989" onmouseenter="enter('-1913804071468350989');" onmouseout="out('-1913804071468350989');" style=""> 504                          Field hf = createHeaderField(p, md);                                                      </span>
<span class="465504053416102059" onmouseenter="enter('465504053416102059');" onmouseout="out('465504053416102059');" style=""> 505                          headerFields.add(hf);                                                                     </span>
<span class="4412272633078565706" onmouseenter="enter('4412272633078565706');" onmouseout="out('4412272633078565706');" style=""> 506                          wrapper.getFields().add(constructFieldDTOFromFieldData(hf, md));                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 507                      }                                                                                             </span>
<span  style=""> 508                                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 509                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 510              }                                                                                                     </span>
<span  style=""> 511                                                                                                                    </span>
<span class="9155103560587761905" onmouseenter="enter('9155103560587761905');" onmouseout="out('9155103560587761905');" style=""> 512              type = ListGrid.Type.ADORNED;                                                                         </span>
<span  style=""> 513                                                                                                                    </span>
<span class="6020748960132993219" onmouseenter="enter('6020748960132993219');" onmouseout="out('6020748960132993219');" style=""> 514              if (atcmd.getMaintainedAdornedTargetFields().length &gt; 0) {                                            </span>
<span class="-5907191702643786371" onmouseenter="enter('-5907191702643786371');" onmouseout="out('-5907191702643786371');" style=""> 515                  editable = true;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 516              }                                                                                                     </span>
<span  style=""> 517                                                                                                                    </span>
<span class="5921221796736617807" onmouseenter="enter('5921221796736617807');" onmouseout="out('5921221796736617807');" style=""> 518              AdornedTargetList adornedList = (AdornedTargetList) atcmd.getPersistencePerspective()                 </span>
<span class="551023238709431279" onmouseenter="enter('551023238709431279');" onmouseout="out('551023238709431279');" style=""> 519                      .getPersistencePerspectiveItems().get(PersistencePerspectiveItemType.ADORNEDTARGETLIST);      </span>
<span class="-3485770976150587717" onmouseenter="enter('-3485770976150587717');" onmouseout="out('-3485770976150587717');" style=""> 520              sortable = StringUtils.isNotBlank(adornedList.getSortField());                                        </span>
<span class="5410259152944409683" onmouseenter="enter('5410259152944409683');" onmouseout="out('5410259152944409683');" style=""> 521              if (sortable) {                                                                                       </span>
<span class="-4257122370377854741" onmouseenter="enter('-4257122370377854741');" onmouseout="out('-4257122370377854741');" style=""> 522                  sortProperty = adornedList.getSortField();                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 523              }                                                                                                     </span>
<span class="-2779851479168607918" onmouseenter="enter('-2779851479168607918');" onmouseout="out('-2779851479168607918');" style=""> 524          } else if (fmd instanceof MapMetadata) {                                                                  </span>
<span class="-579137610819846940" onmouseenter="enter('-579137610819846940');" onmouseout="out('-579137610819846940');" style=""> 525              readOnly = !((MapMetadata) fmd).isMutable();                                                          </span>
<span class="4906504520834467748" onmouseenter="enter('4906504520834467748');" onmouseout="out('4906504520834467748');" style=""> 526              MapMetadata mmd = (MapMetadata) fmd;                                                                  </span>
<span  style=""> 527                                                                                                                    </span>
<span class="8195378525472973548" onmouseenter="enter('8195378525472973548');" onmouseout="out('8195378525472973548');" style=""> 528              Property p2 = cmd.getPMap().get(&quot;key&quot;);                                                               </span>
<span class="8564668864688579354" onmouseenter="enter('8564668864688579354');" onmouseout="out('8564668864688579354');" style=""> 529              BasicFieldMetadata keyMd = (BasicFieldMetadata) p2.getMetadata();                                     </span>
<span class="1816634897954632003" onmouseenter="enter('1816634897954632003');" onmouseout="out('1816634897954632003');" style=""> 530              keyMd.setFriendlyName(getMapKeyFriendlyName(p2));                                                     </span>
<span class="2754310034023241051" onmouseenter="enter('2754310034023241051');" onmouseout="out('2754310034023241051');" style=""> 531              Field hf = createHeaderField(p2, keyMd);                                                              </span>
<span class="465504053416102059" onmouseenter="enter('465504053416102059');" onmouseout="out('465504053416102059');" style=""> 532              headerFields.add(hf);                                                                                 </span>
<span class="-7053544519634906156" onmouseenter="enter('-7053544519634906156');" onmouseout="out('-7053544519634906156');" style=""> 533              wrapper.getFields().add(constructFieldDTOFromFieldData(hf, keyMd));                                   </span>
<span  style=""> 534                                                                                                                    </span>
<span class="5591331798883124479" onmouseenter="enter('5591331798883124479');" onmouseout="out('5591331798883124479');" style=""> 535              if (mmd.isSimpleValue()) {                                                                            </span>
<span class="4182323386511173091" onmouseenter="enter('4182323386511173091');" onmouseout="out('4182323386511173091');" style=""> 536                  Property valueProperty = cmd.getPMap().get(&quot;value&quot;);                                              </span>
<span class="-6095977990841346888" onmouseenter="enter('-6095977990841346888');" onmouseout="out('-6095977990841346888');" style=""> 537                  BasicFieldMetadata valueMd = (BasicFieldMetadata) valueProperty.getMetadata();                    </span>
<span class="-3484742708607220925" onmouseenter="enter('-3484742708607220925');" onmouseout="out('-3484742708607220925');" style=""> 538                  valueMd.setFriendlyName(&quot;Value&quot;);                                                                 </span>
<span class="4972432646543922921" onmouseenter="enter('4972432646543922921');" onmouseout="out('4972432646543922921');" style=""> 539                  hf = createHeaderField(valueProperty, valueMd);                                                   </span>
<span class="465504053416102059" onmouseenter="enter('465504053416102059');" onmouseout="out('465504053416102059');" style=""> 540                  headerFields.add(hf);                                                                             </span>
<span class="-8637026344597097366" onmouseenter="enter('-8637026344597097366');" onmouseout="out('-8637026344597097366');" style=""> 541                  wrapper.getFields().add(constructFieldDTOFromFieldData(hf, valueMd));                             </span>
<span  style=""> 542                                                                                                                    </span>
<span class="-4161155795101164165" onmouseenter="enter('-4161155795101164165');" onmouseout="out('-4161155795101164165');" style=""> 543                  idProperty = &quot;key&quot;;                                                                               </span>
<span class="6613126032600711146" onmouseenter="enter('6613126032600711146');" onmouseout="out('6613126032600711146');" style=""> 544                  hideIdColumn = true;                                                                              </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 545              } else {                                                                                              </span>
<span class="3681854507729164346" onmouseenter="enter('3681854507729164346');" onmouseout="out('3681854507729164346');" style=""> 546                  for (Property p : cmd.getProperties()) {                                                          </span>
<span class="-1029066852878262358" onmouseenter="enter('-1029066852878262358');" onmouseout="out('-1029066852878262358');" style=""> 547                      if (p.getMetadata() instanceof BasicFieldMetadata) {                                          </span>
<span class="-941768582779766785" onmouseenter="enter('-941768582779766785');" onmouseout="out('-941768582779766785');" style=""> 548                          BasicFieldMetadata md = (BasicFieldMetadata) p.getMetadata();                             </span>
<span class="-8642867949481309577" onmouseenter="enter('-8642867949481309577');" onmouseout="out('-8642867949481309577');" style=""> 549                          String valueClassName = mmd.getValueClassName();                                          </span>
<span class="5979911607115189688" onmouseenter="enter('5979911607115189688');" onmouseout="out('5979911607115189688');" style=""> 550                          if (!StringUtils.isEmpty(mmd.getToOneTargetProperty())) {                                 </span>
<span class="-1482207026423407472" onmouseenter="enter('-1482207026423407472');" onmouseout="out('-1482207026423407472');" style=""> 551                              Class&lt;?&gt; clazz;                                                                       </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 552                              try {                                                                                 </span>
<span class="4641764173848337901" onmouseenter="enter('4641764173848337901');" onmouseout="out('4641764173848337901');" style=""> 553                                  clazz = Class.forName(mmd.getValueClassName());                                   </span>
<span class="1054888787890391626" onmouseenter="enter('1054888787890391626');" onmouseout="out('1054888787890391626');" style=""> 554                              } catch (ClassNotFoundException e) {                                                  </span>
<span class="-1035238313469204420" onmouseenter="enter('-1035238313469204420');" onmouseout="out('-1035238313469204420');" style=""> 555                                  throw ExceptionHelper.refineException(e);                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 556                              }                                                                                     </span>
<span class="-1735437066010488223" onmouseenter="enter('-1735437066010488223');" onmouseout="out('-1735437066010488223');" style=""><abbr title=" 557                              java.lang.reflect.Field nestedField = FieldManager.getSingleField(clazz, mmd.getToOneTargetProperty());"> 557                              java.lang.reflect.Field nestedField = FieldManager.getSingleField(clazz, mmd.getToOneTðŸ”µ</abbr></span>
<span class="-7513153605302333321" onmouseenter="enter('-7513153605302333321');" onmouseout="out('-7513153605302333321');" style=""> 558                              ManyToOne manyToOne = nestedField.getAnnotation(ManyToOne.class);                     </span>
<span class="3426777525282342717" onmouseenter="enter('3426777525282342717');" onmouseout="out('3426777525282342717');" style=""><abbr title=" 559                              if (manyToOne != null &amp;&amp; !manyToOne.targetEntity().getName().equals(void.class.getName())) {"> 559                              if (manyToOne != null &amp;&amp; !manyToOne.targetEntity().getName().equals(void.class.getNameðŸ”µ</abbr></span>
<span class="2472701616060797628" onmouseenter="enter('2472701616060797628');" onmouseout="out('2472701616060797628');" style=""> 560                                  valueClassName = manyToOne.targetEntity().getName();                              </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 561                              } else {                                                                              </span>
<span class="7605310444155773026" onmouseenter="enter('7605310444155773026');" onmouseout="out('7605310444155773026');" style=""> 562                                  OneToOne oneToOne = nestedField.getAnnotation(OneToOne.class);                    </span>
<span class="6473385945565798584" onmouseenter="enter('6473385945565798584');" onmouseout="out('6473385945565798584');" style=""><abbr title=" 563                                  if (oneToOne != null &amp;&amp; !oneToOne.targetEntity().getName().equals(void.class.getName())) {"> 563                                  if (oneToOne != null &amp;&amp; !oneToOne.targetEntity().getName().equals(void.class.getNaðŸ”µ</abbr></span>
<span class="-7479915108694096025" onmouseenter="enter('-7479915108694096025');" onmouseout="out('-7479915108694096025');" style=""> 564                                      valueClassName = oneToOne.targetEntity().getName();                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 565                                  }                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 566                              }                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 567                          }                                                                                         </span>
<span class="-5540922815730228658" onmouseenter="enter('-5540922815730228658');" onmouseout="out('-5540922815730228658');" style=""> 568                          if (md.getTargetClass().equals(valueClassName)) {                                         </span>
<span class="-3346338779761665081" onmouseenter="enter('-3346338779761665081');" onmouseout="out('-3346338779761665081');" style=""> 569                              if (md.isProminent() != null &amp;&amp; md.isProminent()                                      </span>
<span class="-8627428290755725902" onmouseenter="enter('-8627428290755725902');" onmouseout="out('-8627428290755725902');" style=""> 570                                      &amp;&amp; !ArrayUtils.contains(getGridHiddenVisibilities(), md.getVisibility())) {   </span>
<span class="8960496946946728749" onmouseenter="enter('8960496946946728749');" onmouseout="out('8960496946946728749');" style=""> 571                                  hf = createHeaderField(p, md);                                                    </span>
<span class="465504053416102059" onmouseenter="enter('465504053416102059');" onmouseout="out('465504053416102059');" style=""> 572                                  headerFields.add(hf);                                                             </span>
<span class="1435471691691453270" onmouseenter="enter('1435471691691453270');" onmouseout="out('1435471691691453270');" style=""> 573                                  defaultWrapperFields.add(constructFieldDTOFromFieldData(hf, md));                 </span>
<span  style=""> 574                                                                                                                    </span>
<span class="-5289673653677501347" onmouseenter="enter('-5289673653677501347');" onmouseout="out('-5289673653677501347');" style=""> 575                                  // Is this a media listgrid                                                       </span>
<span class="4853086335987625590" onmouseenter="enter('4853086335987625590');" onmouseout="out('4853086335987625590');" style=""> 576                                  if (hf.getFieldType().equals(&quot;ASSET_LOOKUP&quot;)) {                                   </span>
<span class="-8476912243297643828" onmouseenter="enter('-8476912243297643828');" onmouseout="out('-8476912243297643828');" style=""> 577                                      isMedia = true;                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 578                                  }                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 579                              }                                                                                     </span>
<span  style=""> 580                                                                                                                    </span>
<span class="2885325040802931258" onmouseenter="enter('2885325040802931258');" onmouseout="out('2885325040802931258');" style=""> 581                              if (md.getIsFilter() != null &amp;&amp; md.getIsFilter()) {                                   </span>
<span class="1044073206381351305" onmouseenter="enter('1044073206381351305');" onmouseout="out('1044073206381351305');" style=""> 582                                  wrapper.getFields().add(constructFieldDTOFromFieldData(hf,md));                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 583                              }                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 584                          }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 585                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 586                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 587              }                                                                                                     </span>
<span  style=""> 588                                                                                                                    </span>
<span class="1402378997093770695" onmouseenter="enter('1402378997093770695');" onmouseout="out('1402378997093770695');" style=""> 589              type = ListGrid.Type.MAP;                                                                             </span>
<span class="-5907191702643786371" onmouseenter="enter('-5907191702643786371');" onmouseout="out('-5907191702643786371');" style=""> 590              editable = true;                                                                                      </span>
<span class="8307590133204211823" onmouseenter="enter('8307590133204211823');" onmouseout="out('8307590133204211823');" style=""> 591              canFilterAndSort = false;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 592          }                                                                                                         </span>
<span  style=""> 593                                                                                                                    </span>
<span class="4544421216027686155" onmouseenter="enter('4544421216027686155');" onmouseout="out('4544421216027686155');" style=""> 594          String ceilingType = &quot;&quot;;                                                                                  </span>
<span class="9198797156358178451" onmouseenter="enter('9198797156358178451');" onmouseout="out('9198797156358178451');" style=""> 595          if (fmd instanceof BasicFieldMetadata) {                                                                  </span>
<span class="7794440236473789134" onmouseenter="enter('7794440236473789134');" onmouseout="out('7794440236473789134');" style=""> 596              ceilingType = cmd.getCeilingType();                                                                   </span>
<span class="3746105937327671455" onmouseenter="enter('3746105937327671455');" onmouseout="out('3746105937327671455');" style=""> 597          } else if (fmd instanceof CollectionMetadata) {                                                           </span>
<span class="958831769715126463" onmouseenter="enter('958831769715126463');" onmouseout="out('958831769715126463');" style=""> 598              ceilingType = ((CollectionMetadata) fmd).getCollectionCeilingEntity();                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 599          }                                                                                                         </span>
<span  style=""> 600                                                                                                                    </span>
<span class="5585496722375029284" onmouseenter="enter('5585496722375029284');" onmouseout="out('5585496722375029284');" style=""> 601          if (CollectionUtils.isEmpty(headerFields)) {                                                              </span>
<span class="-3348290953650583379" onmouseenter="enter('-3348290953650583379');" onmouseout="out('-3348290953650583379');" style=""><abbr title=" 602              String message = &quot;There are no listgrid header fields configured for the class &quot; + ceilingType + &quot; and property &#x27;&quot; +"> 602              String message = &quot;There are no listgrid header fields configured for the class &quot; + ceilingType + &quot; andðŸ”µ</abbr></span>
<span class="7723961843711254229" onmouseenter="enter('7723961843711254229');" onmouseout="out('7723961843711254229');" style=""> 603                      StringUtil.sanitize(field.getName()) + &quot;&#x27;.&quot;;                                                  </span>
<span class="-8247546196580792399" onmouseenter="enter('-8247546196580792399');" onmouseout="out('-8247546196580792399');" style=""> 604              if (selectize &amp;&amp; (type == ListGrid.Type.ADORNED || type == ListGrid.Type.ADORNED_WITH_FORM)) {        </span>
<span class="3128472952734575237" onmouseenter="enter('3128472952734575237');" onmouseout="out('3128472952734575237');" style=""><abbr title=" 605                  message += &quot; Please configure &#x27;selectizeVisibleField&#x27; in your @AdminPresentationAdornedTargetCollection configuration&quot;;"> 605                  message += &quot; Please configure &#x27;selectizeVisibleField&#x27; in your @AdminPresentationAdornedTargetColleðŸ”µ</abbr></span>
<span class="8636226295625239860" onmouseenter="enter('8636226295625239860');" onmouseout="out('8636226295625239860');" style=""> 606              } else if (type == ListGrid.Type.ADORNED || type == ListGrid.Type.ADORNED_WITH_FORM) {                </span>
<span class="2402628808600951472" onmouseenter="enter('2402628808600951472');" onmouseout="out('2402628808600951472');" style=""><abbr title=" 607                  message += &quot; Please configure &#x27;gridVisibleFields&#x27; in your @AdminPresentationAdornedTargetCollection configuration&quot;;"> 607                  message += &quot; Please configure &#x27;gridVisibleFields&#x27; in your @AdminPresentationAdornedTargetCollectioðŸ”µ</abbr></span>
<span class="-9137226596697213695" onmouseenter="enter('-9137226596697213695');" onmouseout="out('-9137226596697213695');" style=""> 608              } else if (selectize &amp;&amp; type == ListGrid.Type.BASIC) {                                                </span>
<span class="-3735757397027600216" onmouseenter="enter('-3735757397027600216');" onmouseout="out('-3735757397027600216');" style=""><abbr title=" 609                  message += &quot; Please configure &#x27;selectizeVisibleField&#x27; in your @AdminPresentationCollection configuration&quot;;"> 609                  message += &quot; Please configure &#x27;selectizeVisibleField&#x27; in your @AdminPresentationCollection configuðŸ”µ</abbr></span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 610              } else {                                                                                              </span>
<span class="-6242089898795718984" onmouseenter="enter('-6242089898795718984');" onmouseout="out('-6242089898795718984');" style=""> 611                  message += &quot; Please mark some @AdminPresentation fields with &#x27;prominent = true&#x27;&quot;;                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 612              }                                                                                                     </span>
<span class="683988342023046623" onmouseenter="enter('683988342023046623');" onmouseout="out('683988342023046623');" style=""> 613              LOG.error(message);                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 614          }                                                                                                         </span>
<span  style=""> 615                                                                                                                    </span>
<span class="8018024767617726350" onmouseenter="enter('8018024767617726350');" onmouseout="out('8018024767617726350');" style=""><abbr title=" 616          ListGrid listGrid = createListGrid(ceilingType, headerFields, type, drs, sectionKey, fmd.getOrder(), idProperty, sectionCrumbs, sortProperty);"> 616          ListGrid listGrid = createListGrid(ceilingType, headerFields, type, drs, sectionKey, fmd.getOrder(), idProðŸ”µ</abbr></span>
<span class="-8260607636786156523" onmouseenter="enter('-8260607636786156523');" onmouseout="out('-8260607636786156523');" style=""> 617          listGrid.setSubCollectionFieldName(field.getName());                                                      </span>
<span class="6077403992574006974" onmouseenter="enter('6077403992574006974');" onmouseout="out('6077403992574006974');" style=""> 618          listGrid.setFriendlyName(field.getMetadata().getFriendlyName());                                          </span>
<span class="7905107023107584311" onmouseenter="enter('7905107023107584311');" onmouseout="out('7905107023107584311');" style=""> 619          if (StringUtils.isEmpty(listGrid.getFriendlyName())) {                                                    </span>
<span class="7450505976451149249" onmouseenter="enter('7450505976451149249');" onmouseout="out('7450505976451149249');" style=""> 620              listGrid.setFriendlyName(field.getName());                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 621          }                                                                                                         </span>
<span class="4004853909217037199" onmouseenter="enter('4004853909217037199');" onmouseout="out('4004853909217037199');" style=""> 622          listGrid.setContainingEntityId(containingEntityId);                                                       </span>
<span class="5941008318995473126" onmouseenter="enter('5941008318995473126');" onmouseout="out('5941008318995473126');" style=""> 623          listGrid.setIsReadOnly(readOnly);                                                                         </span>
<span class="5221697846686143736" onmouseenter="enter('5221697846686143736');" onmouseout="out('5221697846686143736');" style=""> 624          listGrid.setHideIdColumn(hideIdColumn);                                                                   </span>
<span class="103202019101048665" onmouseenter="enter('103202019101048665');" onmouseout="out('103202019101048665');" style=""> 625          listGrid.setCanFilterAndSort(canFilterAndSort);                                                           </span>
<span  style=""> 626                                                                                                                    </span>
<span class="2615168876841014995" onmouseenter="enter('2615168876841014995');" onmouseout="out('2615168876841014995');" style=""> 627          // Set up the filter builder params                                                                       </span>
<span class="1067693587814186246" onmouseenter="enter('1067693587814186246');" onmouseout="out('1067693587814186246');" style=""> 628          Date c = new Date();                                                                                      </span>
<span class="7632548446248454393" onmouseenter="enter('7632548446248454393');" onmouseout="out('7632548446248454393');" style=""> 629          String friendlyName = field.getMetadata().getFriendlyName();                                              </span>
<span class="-1543374359693074653" onmouseenter="enter('-1543374359693074653');" onmouseout="out('-1543374359693074653');" style=""> 630          String jsonFriendlyName = friendlyName.replaceAll(&quot; &quot;, &quot;_&quot;);                                              </span>
<span class="-5194767828410940587" onmouseenter="enter('-5194767828410940587');" onmouseout="out('-5194767828410940587');" style=""> 631          listGrid.setJsonFieldName(jsonFriendlyName + c.getTime() + &quot;Json&quot;);                                       </span>
<span class="6488323689834765207" onmouseenter="enter('6488323689834765207');" onmouseout="out('6488323689834765207');" style=""> 632          listGrid.setFriendlyName(friendlyName);                                                                   </span>
<span class="-4532597237542010033" onmouseenter="enter('-4532597237542010033');" onmouseout="out('-4532597237542010033');" style=""> 633          listGrid.setFieldBuilder(&quot;RULE_SIMPLE&quot;);                                                                  </span>
<span class="2366326534416496613" onmouseenter="enter('2366326534416496613');" onmouseout="out('2366326534416496613');" style=""> 634          if (CollectionUtils.isEmpty(wrapper.getFields())) {                                                       </span>
<span class="532531496111421469" onmouseenter="enter('532531496111421469');" onmouseout="out('532531496111421469');" style=""> 635              wrapper.setFields(defaultWrapperFields);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 636          }                                                                                                         </span>
<span class="8083895692807517727" onmouseenter="enter('8083895692807517727');" onmouseout="out('8083895692807517727');" style=""> 637          listGrid.setFieldWrapper(wrapper);                                                                        </span>
<span  style=""> 638                                                                                                                    </span>
<span class="4466331963824990789" onmouseenter="enter('4466331963824990789');" onmouseout="out('4466331963824990789');" style=""> 639          String blankJsonString =  &quot;{\&quot;data\&quot;:[]}&quot;;                                                                </span>
<span class="7445610059504327235" onmouseenter="enter('7445610059504327235');" onmouseout="out('7445610059504327235');" style=""> 640          listGrid.setJson(blankJsonString);                                                                        </span>
<span class="-6647315222721447684" onmouseenter="enter('-6647315222721447684');" onmouseout="out('-6647315222721447684');" style=""> 641          DataWrapper dw = convertJsonToDataWrapper(blankJsonString);                                               </span>
<span class="-3408161092817379645" onmouseenter="enter('-3408161092817379645');" onmouseout="out('-3408161092817379645');" style=""> 642          if (dw != null) {                                                                                         </span>
<span class="-933372440492481068" onmouseenter="enter('-933372440492481068');" onmouseout="out('-933372440492481068');" style=""> 643              listGrid.setDataWrapper(dw);                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 644          }                                                                                                         </span>
<span  style=""> 645                                                                                                                    </span>
<span class="-1934188124142515927" onmouseenter="enter('-1934188124142515927');" onmouseout="out('-1934188124142515927');" style=""> 646          if (editable) {                                                                                           </span>
<span class="-8324356505432784037" onmouseenter="enter('-8324356505432784037');" onmouseout="out('-8324356505432784037');" style=""> 647              listGrid.getRowActions().add(DefaultListGridActions.UPDATE);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 648          }                                                                                                         </span>
<span class="7378462715957185244" onmouseenter="enter('7378462715957185244');" onmouseout="out('7378462715957185244');" style=""> 649          if (readOnly) {                                                                                           </span>
<span class="-5818500246922120128" onmouseenter="enter('-5818500246922120128');" onmouseout="out('-5818500246922120128');" style=""> 650              listGrid.getRowActions().add(DefaultListGridActions.VIEW);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 651          }                                                                                                         </span>
<span class="5410259152944409683" onmouseenter="enter('5410259152944409683');" onmouseout="out('5410259152944409683');" style=""> 652          if (sortable) {                                                                                           </span>
<span class="-607660971412807673" onmouseenter="enter('-607660971412807673');" onmouseout="out('-607660971412807673');" style=""> 653              listGrid.setCanFilterAndSort(false);                                                                  </span>
<span class="4388200762412113532" onmouseenter="enter('4388200762412113532');" onmouseout="out('4388200762412113532');" style=""> 654              listGrid.setIsSortable(true);                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 655          }                                                                                                         </span>
<span  style=""> 656                                                                                                                    </span>
<span class="-4128949180761209250" onmouseenter="enter('-4128949180761209250');" onmouseout="out('-4128949180761209250');" style=""> 657          if (modalSingleSelectable) {                                                                              </span>
<span class="7378462715957185244" onmouseenter="enter('7378462715957185244');" onmouseout="out('7378462715957185244');" style=""> 658              if (readOnly) {                                                                                       </span>
<span class="876416575304580897" onmouseenter="enter('876416575304580897');" onmouseout="out('876416575304580897');" style=""><abbr title=" 659                  listGrid.addModalRowAction(DefaultListGridActions.SINGLE_SELECT.clone().withForListGridReadOnly(true));"> 659                  listGrid.addModalRowAction(DefaultListGridActions.SINGLE_SELECT.clone().withForListGridReadOnly(trðŸ”µ</abbr></span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 660              } else {                                                                                              </span>
<span class="2808273481648426142" onmouseenter="enter('2808273481648426142');" onmouseout="out('2808273481648426142');" style=""> 661                  listGrid.addModalRowAction(DefaultListGridActions.SINGLE_SELECT);                                 </span>
<span  style=""> 662                                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 663              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 664          }                                                                                                         </span>
<span class="-7419173722157864798" onmouseenter="enter('-7419173722157864798');" onmouseout="out('-7419173722157864798');" style=""> 665          listGrid.setSelectType(ListGrid.SelectType.SINGLE_SELECT);                                                </span>
<span  style=""> 666                                                                                                                    </span>
<span class="4421519193138811338" onmouseenter="enter('4421519193138811338');" onmouseout="out('4421519193138811338');" style=""> 667          if (selectize) {                                                                                          </span>
<span class="4330210937183071205" onmouseenter="enter('4330210937183071205');" onmouseout="out('4330210937183071205');" style=""> 668              listGrid.setSelectizeUrl(buildSelectizeUrl(listGrid));                                                </span>
<span class="-6778616649865275600" onmouseenter="enter('-6778616649865275600');" onmouseout="out('-6778616649865275600');" style=""> 669              listGrid.setSelectType(ListGrid.SelectType.SELECTIZE);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 670          }                                                                                                         </span>
<span  style=""> 671                                                                                                                    </span>
<span class="-318424289412267832" onmouseenter="enter('-318424289412267832');" onmouseout="out('-318424289412267832');" style=""> 672          if (modalMultiSelectable) {                                                                               </span>
<span class="-2076946817204501330" onmouseenter="enter('-2076946817204501330');" onmouseout="out('-2076946817204501330');" style=""> 673              listGrid.addModalRowAction(DefaultListGridActions.MULTI_SELECT);                                      </span>
<span class="7572617953044326144" onmouseenter="enter('7572617953044326144');" onmouseout="out('7572617953044326144');" style=""> 674              listGrid.setSelectType(ListGrid.SelectType.MULTI_SELECT);                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 675          }                                                                                                         </span>
<span class="-8712474510741391938" onmouseenter="enter('-8712474510741391938');" onmouseout="out('-8712474510741391938');" style=""> 676          listGrid.getRowActions().add(DefaultListGridActions.REMOVE);                                              </span>
<span  style=""> 677                                                                                                                    </span>
<span class="5224232002379484564" onmouseenter="enter('5224232002379484564');" onmouseout="out('5224232002379484564');" style=""> 678          if (fmd.getManualFetch()) {                                                                               </span>
<span class="-9107723200038018431" onmouseenter="enter('-9107723200038018431');" onmouseout="out('-9107723200038018431');" style=""> 679              listGrid.setManualFetch(true);                                                                        </span>
<span class="-1990881339892073084" onmouseenter="enter('-1990881339892073084');" onmouseout="out('-1990881339892073084');" style=""> 680              listGrid.getToolbarActions().add(DefaultListGridActions.MANUAL_FETCH);                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 681          }                                                                                                         </span>
<span class="963954107021870727" onmouseenter="enter('963954107021870727');" onmouseout="out('963954107021870727');" style=""> 682          if (isMedia) {                                                                                            </span>
<span class="8560894537765048923" onmouseenter="enter('8560894537765048923');" onmouseout="out('8560894537765048923');" style=""> 683              listGrid.setListGridType(ListGrid.Type.ASSET_GRID);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 684          }                                                                                                         </span>
<span  style=""> 685                                                                                                                    </span>
<span class="-5511350038403165520" onmouseenter="enter('-5511350038403165520');" onmouseout="out('-5511350038403165520');" style=""> 686          extensionManager.getProxy().modifyListGrid(listGrid.getClassName(), listGrid);                            </span>
<span  style=""> 687                                                                                                                    </span>
<span class="-1010311312628539836" onmouseenter="enter('-1010311312628539836');" onmouseout="out('-1010311312628539836');" style=""><abbr title=" 688          //If someone has replaced RowLevelSecurityService, check here to make sure the replacement implements the expected interface"> 688          //If someone has replaced RowLevelSecurityService, check here to make sure the replacement implements the ðŸ”µ</abbr></span>
<span class="8968842492276656547" onmouseenter="enter('8968842492276656547');" onmouseout="out('8968842492276656547');" style=""> 689          if (rowLevelSecurityService instanceof ExceptionAwareRowLevelSecurityProvider) {                          </span>
<span class="2057574043580690918" onmouseenter="enter('2057574043580690918');" onmouseout="out('2057574043580690918');" style=""><abbr title=" 690              EntityFormModifierConfiguration entityFormModifierConfiguration = ((ExceptionAwareRowLevelSecurityProvider) rowLevelSecurityService).getUpdateDenialExceptions();"> 690              EntityFormModifierConfiguration entityFormModifierConfiguration = ((ExceptionAwareRowLevelSecurityProvðŸ”µ</abbr></span>
<span class="-3023990582845647391" onmouseenter="enter('-3023990582845647391');" onmouseout="out('-3023990582845647391');" style=""><abbr title=" 691              for (EntityFormModifierData&lt;EntityFormModifierDataPoint&gt; data : entityFormModifierConfiguration.getData()) {"> 691              for (EntityFormModifierData&lt;EntityFormModifierDataPoint&gt; data : entityFormModifierConfiguration.getDatðŸ”µ</abbr></span>
<span class="9148632731325481398" onmouseenter="enter('9148632731325481398');" onmouseout="out('9148632731325481398');" style=""> 692                  for (EntityFormModifier modifier : entityFormModifierConfiguration.getModifier()) {               </span>
<span class="7131836139928065231" onmouseenter="enter('7131836139928065231');" onmouseout="out('7131836139928065231');" style=""> 693                      if (modifier.isQualified(data.getModifierType())) {                                           </span>
<span class="-3065342187112967306" onmouseenter="enter('-3065342187112967306');" onmouseout="out('-3065342187112967306');" style=""> 694                          modifier.modifyListGrid(new EntityFormModifierRequest()                                   </span>
<span class="118085653176366406" onmouseenter="enter('118085653176366406');" onmouseout="out('118085653176366406');" style=""> 695                                  .withListGrid(listGrid)                                                           </span>
<span class="-1014541830042934633" onmouseenter="enter('-1014541830042934633');" onmouseout="out('-1014541830042934633');" style=""> 696                                  .withConfiguration(data)                                                          </span>
<span class="-7538620272607121359" onmouseenter="enter('-7538620272607121359');" onmouseout="out('-7538620272607121359');" style=""> 697                                  .withCurrentUser(adminRemoteSecurityService.getPersistentAdminUser())             </span>
<span class="680994463596247300" onmouseenter="enter('680994463596247300');" onmouseout="out('680994463596247300');" style=""> 698                                  .withRowLevelSecurityService(rowLevelSecurityService));                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 699                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 700                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 701              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 702          }                                                                                                         </span>
<span class="8338561479600990216" onmouseenter="enter('8338561479600990216');" onmouseout="out('8338561479600990216');" style=""> 703          return listGrid;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 704      }                                                                                                             </span>
<span  style=""> 705                                                                                                                    </span>
<span class="1351139520445861423" onmouseenter="enter('1351139520445861423');" onmouseout="out('1351139520445861423');" style=""> 706      protected String getMapKeyFriendlyName(Property property) {                                                   </span>
<span class="5871990330597606657" onmouseenter="enter('5871990330597606657');" onmouseout="out('5871990330597606657');" style=""> 707          String friendlyNameFromMetadata = property.getMetadata().getFriendlyName();                               </span>
<span  style=""> 708                                                                                                                    </span>
<span class="3779076262581559101" onmouseenter="enter('3779076262581559101');" onmouseout="out('3779076262581559101');" style=""> 709          return (friendlyNameFromMetadata == null) ? &quot;Key&quot; : friendlyNameFromMetadata;                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 710      }                                                                                                             </span>
<span  style=""> 711                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 712      @Override                                                                                                     </span>
<span class="-1413517427251419025" onmouseenter="enter('-1413517427251419025');" onmouseout="out('-1413517427251419025');" style=""><abbr title=" 713      public Map&lt;String, Object&gt; buildSelectizeCollectionInfo(String containingEntityId, DynamicResultSet drs, Property field,"> 713      public Map&lt;String, Object&gt; buildSelectizeCollectionInfo(String containingEntityId, DynamicResultSet drs, PropeðŸ”µ</abbr></span>
<span class="8976903068062443392" onmouseenter="enter('8976903068062443392');" onmouseout="out('8976903068062443392');" style=""> 714          String sectionKey, List&lt;SectionCrumb&gt; sectionCrumbs)                                                      </span>
<span class="1998458335829271558" onmouseenter="enter('1998458335829271558');" onmouseout="out('1998458335829271558');" style=""> 715              throws ServiceException {                                                                             </span>
<span class="3501499603601527305" onmouseenter="enter('3501499603601527305');" onmouseout="out('3501499603601527305');" style=""> 716          FieldMetadata fmd = field.getMetadata();                                                                  </span>
<span class="6565595844041240946" onmouseenter="enter('6565595844041240946');" onmouseout="out('6565595844041240946');" style=""> 717          // Get the class metadata for this particular field                                                       </span>
<span class="-8834884127458938753" onmouseenter="enter('-8834884127458938753');" onmouseout="out('-8834884127458938753');" style=""> 718          PersistencePackageRequest ppr = PersistencePackageRequest.fromMetadata(fmd, sectionCrumbs);               </span>
<span class="-470699824173107204" onmouseenter="enter('-470699824173107204');" onmouseout="out('-470699824173107204');" style=""> 719          if (field != null) {                                                                                      </span>
<span class="8971896145704334353" onmouseenter="enter('8971896145704334353');" onmouseout="out('8971896145704334353');" style=""> 720              ppr.setSectionEntityField(field.getName());                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 721          }                                                                                                         </span>
<span class="1142804962458743647" onmouseenter="enter('1142804962458743647');" onmouseout="out('1142804962458743647');" style=""> 722          ClassMetadata cmd = adminEntityService.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();    </span>
<span  style=""> 723                                                                                                                    </span>
<span class="-5595331836292860562" onmouseenter="enter('-5595331836292860562');" onmouseout="out('-5595331836292860562');" style=""> 724          Map&lt;String, Object&gt; result = constructSelectizeOptionMap(drs, cmd);                                       </span>
<span  style=""> 725                                                                                                                    </span>
<span class="-1689031862376375101" onmouseenter="enter('-1689031862376375101');" onmouseout="out('-1689031862376375101');" style=""> 726          AdornedTargetList adornedList = ppr.getAdornedList();                                                     </span>
<span class="4210226056962324596" onmouseenter="enter('4210226056962324596');" onmouseout="out('4210226056962324596');" style=""> 727          if (adornedList != null &amp;&amp; adornedList.getLinkedObjectPath() != null                                      </span>
<span class="-5584956232917922083" onmouseenter="enter('-5584956232917922083');" onmouseout="out('-5584956232917922083');" style=""> 728              &amp;&amp; adornedList.getTargetObjectPath() != null &amp;&amp; adornedList.getLinkedIdProperty() != null             </span>
<span class="8487613505903596752" onmouseenter="enter('8487613505903596752');" onmouseout="out('8487613505903596752');" style=""> 729              &amp;&amp; adornedList.getTargetIdProperty() != null) {                                                       </span>
<span class="7309159037806205694" onmouseenter="enter('7309159037806205694');" onmouseout="out('7309159037806205694');" style=""><abbr title=" 730              result.put(&quot;linkedObjectPath&quot;, adornedList.getLinkedObjectPath() + &quot;.&quot; + adornedList.getLinkedIdProperty());"> 730              result.put(&quot;linkedObjectPath&quot;, adornedList.getLinkedObjectPath() + &quot;.&quot; + adornedList.getLinkedIdProperðŸ”µ</abbr></span>
<span class="-6077713782492983195" onmouseenter="enter('-6077713782492983195');" onmouseout="out('-6077713782492983195');" style=""> 731              result.put(&quot;linkedObjectId&quot;, containingEntityId);                                                     </span>
<span class="3248709869136196767" onmouseenter="enter('3248709869136196767');" onmouseout="out('3248709869136196767');" style=""><abbr title=" 732              result.put(&quot;targetObjectPath&quot;, adornedList.getTargetObjectPath() + &quot;.&quot; + adornedList.getTargetIdProperty());"> 732              result.put(&quot;targetObjectPath&quot;, adornedList.getTargetObjectPath() + &quot;.&quot; + adornedList.getTargetIdProperðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 733          }                                                                                                         </span>
<span  style=""> 734                                                                                                                    </span>
<span class="-6419540350677864751" onmouseenter="enter('-6419540350677864751');" onmouseout="out('-6419540350677864751');" style=""> 735          return result;                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 736      }                                                                                                             </span>
<span  style=""> 737                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 738      @Override                                                                                                     </span>
<span class="6193659363548015244" onmouseenter="enter('6193659363548015244');" onmouseout="out('6193659363548015244');" style=""> 739      public Map&lt;String, Object&gt; constructSelectizeOptionMap(DynamicResultSet drs, ClassMetadata cmd) {             </span>
<span class="-2547625323269156657" onmouseenter="enter('-2547625323269156657');" onmouseout="out('-2547625323269156657');" style=""> 740          Map&lt;String, Object&gt; result = new HashMap&lt;&gt;();                                                             </span>
<span class="-1525294692883767948" onmouseenter="enter('-1525294692883767948');" onmouseout="out('-1525294692883767948');" style=""> 741          List&lt;Map&lt;String, String&gt;&gt; options = new ArrayList&lt;&gt;();                                                    </span>
<span  style=""> 742                                                                                                                    </span>
<span class="-7098425003691580554" onmouseenter="enter('-7098425003691580554');" onmouseout="out('-7098425003691580554');" style=""> 743          List&lt;Field&gt; headerFields = new ArrayList&lt;&gt;();                                                             </span>
<span class="3681854507729164346" onmouseenter="enter('3681854507729164346');" onmouseout="out('3681854507729164346');" style=""> 744          for (Property p : cmd.getProperties()) {                                                                  </span>
<span class="-1029066852878262358" onmouseenter="enter('-1029066852878262358');" onmouseout="out('-1029066852878262358');" style=""> 745              if (p.getMetadata() instanceof BasicFieldMetadata) {                                                  </span>
<span class="-941768582779766785" onmouseenter="enter('-941768582779766785');" onmouseout="out('-941768582779766785');" style=""> 746                  BasicFieldMetadata md = (BasicFieldMetadata) p.getMetadata();                                     </span>
<span class="-3346338779761665081" onmouseenter="enter('-3346338779761665081');" onmouseout="out('-3346338779761665081');" style=""> 747                  if (md.isProminent() != null &amp;&amp; md.isProminent()                                                  </span>
<span class="-8627428290755725902" onmouseenter="enter('-8627428290755725902');" onmouseout="out('-8627428290755725902');" style=""> 748                          &amp;&amp; !ArrayUtils.contains(getGridHiddenVisibilities(), md.getVisibility())) {               </span>
<span class="-1913804071468350989" onmouseenter="enter('-1913804071468350989');" onmouseout="out('-1913804071468350989');" style=""> 749                      Field hf = createHeaderField(p, md);                                                          </span>
<span class="465504053416102059" onmouseenter="enter('465504053416102059');" onmouseout="out('465504053416102059');" style=""> 750                      headerFields.add(hf);                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 751                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 752              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 753          }                                                                                                         </span>
<span  style=""> 754                                                                                                                    </span>
<span class="-5517026699518874938" onmouseenter="enter('-5517026699518874938');" onmouseout="out('-5517026699518874938');" style=""> 755          for (Entity e : drs.getRecords()) {                                                                       </span>
<span class="-6136638466040784110" onmouseenter="enter('-6136638466040784110');" onmouseout="out('-6136638466040784110');" style=""> 756              Map&lt;String, String&gt; selectizeOption = new HashMap&lt;&gt;();                                                </span>
<span class="4163901938958293625" onmouseenter="enter('4163901938958293625');" onmouseout="out('4163901938958293625');" style=""> 757              for (Field headerField : headerFields) {                                                              </span>
<span class="5027179794052216178" onmouseenter="enter('5027179794052216178');" onmouseout="out('5027179794052216178');" style=""> 758                  Property p = e.findProperty(headerField.getName());                                               </span>
<span class="-4724213940983805674" onmouseenter="enter('-4724213940983805674');" onmouseout="out('-4724213940983805674');" style=""> 759                  if (p != null) {                                                                                  </span>
<span class="4028188550890348466" onmouseenter="enter('4028188550890348466');" onmouseout="out('4028188550890348466');" style=""> 760                      selectizeOption.put(&quot;name&quot;, p.getValue());                                                    </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 761                      break;                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 762                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 763              }                                                                                                     </span>
<span class="842570185536784204" onmouseenter="enter('842570185536784204');" onmouseout="out('842570185536784204');" style=""> 764              if (e.findProperty(&quot;id&quot;) != null) {                                                                   </span>
<span class="1619295801241413088" onmouseenter="enter('1619295801241413088');" onmouseout="out('1619295801241413088');" style=""> 765                  selectizeOption.put(&quot;id&quot;, e.findProperty(&quot;id&quot;).getValue());                                       </span>
<span class="-5830252244987930005" onmouseenter="enter('-5830252244987930005');" onmouseout="out('-5830252244987930005');" style=""> 766              //  &quot;Locale&quot; entity is a special occasion. Because it have not &quot;ID&quot; column with &quot;Long&quot; type           </span>
<span class="4697280149551476993" onmouseenter="enter('4697280149551476993');" onmouseout="out('4697280149551476993');" style=""> 767              } else if (e.findProperty(&quot;localeCode&quot;) != null) {                                                    </span>
<span class="7405190492767879460" onmouseenter="enter('7405190492767879460');" onmouseout="out('7405190492767879460');" style=""> 768                  selectizeOption.put(&quot;id&quot;, e.findProperty(&quot;localeCode&quot;).getValue());                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 769              }                                                                                                     </span>
<span class="-7996413909894304887" onmouseenter="enter('-7996413909894304887');" onmouseout="out('-7996413909894304887');" style=""> 770              if (e.findProperty(ALTERNATE_ID_PROPERTY) != null) {                                                  </span>
<span class="-2834809076191022214" onmouseenter="enter('-2834809076191022214');" onmouseout="out('-2834809076191022214');" style=""> 771                  selectizeOption.put(&quot;alternateId&quot;, e.findProperty(ALTERNATE_ID_PROPERTY).getValue());             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 772              }                                                                                                     </span>
<span class="2407499722406116097" onmouseenter="enter('2407499722406116097');" onmouseout="out('2407499722406116097');" style=""> 773              options.add(selectizeOption);                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 774          }                                                                                                         </span>
<span class="-7448816453305947647" onmouseenter="enter('-7448816453305947647');" onmouseout="out('-7448816453305947647');" style=""> 775          result.put(&quot;options&quot;, options);                                                                           </span>
<span  style=""> 776                                                                                                                    </span>
<span class="-6419540350677864751" onmouseenter="enter('-6419540350677864751');" onmouseout="out('-6419540350677864751');" style=""> 777          return result;                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 778      }                                                                                                             </span>
<span  style=""> 779                                                                                                                    </span>
<span class="3610563618424293176" onmouseenter="enter('3610563618424293176');" onmouseout="out('3610563618424293176');" style=""> 780      protected String buildSelectizeUrl(ListGrid listGrid) {                                                       </span>
<span class="4360254575720880810" onmouseenter="enter('4360254575720880810');" onmouseout="out('4360254575720880810');" style=""> 781          HttpServletRequest request = BroadleafRequestContext.getBroadleafRequestContext().getRequest();           </span>
<span class="-1223345315803337981" onmouseenter="enter('-1223345315803337981');" onmouseout="out('-1223345315803337981');" style=""> 782          String url = request.getContextPath();                                                                    </span>
<span class="-5859217039633283919" onmouseenter="enter('-5859217039633283919');" onmouseout="out('-5859217039633283919');" style=""><abbr title=" 783          url += url.endsWith(&quot;/&quot;) || listGrid.getSectionKey().startsWith(&quot;/&quot;) ? listGrid.getSectionKey() : &quot;/&quot; + listGrid.getSectionKey();"> 783          url += url.endsWith(&quot;/&quot;) || listGrid.getSectionKey().startsWith(&quot;/&quot;) ? listGrid.getSectionKey() : &quot;/&quot; + liðŸ”µ</abbr></span>
<span class="5990790066724047703" onmouseenter="enter('5990790066724047703');" onmouseout="out('5990790066724047703');" style=""> 784          url += &quot;/&quot; + listGrid.getContainingEntityId();                                                            </span>
<span class="-5189302616019367476" onmouseenter="enter('-5189302616019367476');" onmouseout="out('-5189302616019367476');" style=""> 785          url += &quot;/&quot; + listGrid.getSubCollectionFieldName();                                                        </span>
<span class="6645977004086329618" onmouseenter="enter('6645977004086329618');" onmouseout="out('6645977004086329618');" style=""> 786          return url;                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 787      }                                                                                                             </span>
<span  style=""> 788                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 789      /**                                                                                                           </span>
<span class="-3142901546145506196" onmouseenter="enter('-3142901546145506196');" onmouseout="out('-3142901546145506196');" style=""><abbr title=" 790       * @deprecated use {@link #createListGrid(String, List, ListGrid.Type, DynamicResultSet, String, Integer, String, List, String)}"> 790       * @deprecated use {@link #createListGrid(String, List, ListGrid.Type, DynamicResultSet, String, Integer, StriðŸ”µ</abbr></span>
<span class="3292690528203019011" onmouseenter="enter('3292690528203019011');" onmouseout="out('3292690528203019011');" style=""> 791       * @param className                                                                                           </span>
<span class="5783752320936502160" onmouseenter="enter('5783752320936502160');" onmouseout="out('5783752320936502160');" style=""> 792       * @param headerFields                                                                                        </span>
<span class="4180172247960880324" onmouseenter="enter('4180172247960880324');" onmouseout="out('4180172247960880324');" style=""> 793       * @param type                                                                                                </span>
<span class="-7324022876786324498" onmouseenter="enter('-7324022876786324498');" onmouseout="out('-7324022876786324498');" style=""> 794       * @param drs                                                                                                 </span>
<span class="7403666429378321004" onmouseenter="enter('7403666429378321004');" onmouseout="out('7403666429378321004');" style=""> 795       * @param sectionKey                                                                                          </span>
<span class="6414796960983960786" onmouseenter="enter('6414796960983960786');" onmouseout="out('6414796960983960786');" style=""> 796       * @param order                                                                                               </span>
<span class="-2237647657818576638" onmouseenter="enter('-2237647657818576638');" onmouseout="out('-2237647657818576638');" style=""> 797       * @param idProperty                                                                                          </span>
<span class="6383674454506135847" onmouseenter="enter('6383674454506135847');" onmouseout="out('6383674454506135847');" style=""> 798       * @param sectionCrumbs                                                                                       </span>
<span class="-9165797340485297481" onmouseenter="enter('-9165797340485297481');" onmouseout="out('-9165797340485297481');" style=""> 799       * @return                                                                                                    </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 800       */                                                                                                           </span>
<span class="-9122364098618956613" onmouseenter="enter('-9122364098618956613');" onmouseout="out('-9122364098618956613');" style=""> 801      @Deprecated                                                                                                   </span>
<span class="4478013600751804718" onmouseenter="enter('4478013600751804718');" onmouseout="out('4478013600751804718');" style=""><abbr title=" 802      protected ListGrid createListGrid(String className, List&lt;Field&gt; headerFields, ListGrid.Type type, DynamicResultSet drs,"> 802      protected ListGrid createListGrid(String className, List&lt;Field&gt; headerFields, ListGrid.Type type, DynamicResulðŸ”µ</abbr></span>
<span class="-2475961144071468437" onmouseenter="enter('-2475961144071468437');" onmouseout="out('-2475961144071468437');" style=""> 803              String sectionKey, int order, String idProperty, List&lt;SectionCrumb&gt; sectionCrumbs) {                  </span>
<span class="-7836467015459082374" onmouseenter="enter('-7836467015459082374');" onmouseout="out('-7836467015459082374');" style=""> 804         return createListGrid(className,headerFields,type,drs,sectionKey,order,idProperty,sectionCrumbs,null);     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 805      }                                                                                                             </span>
<span  style=""> 806                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 807      /**                                                                                                           </span>
<span class="-6553954062731574601" onmouseenter="enter('-6553954062731574601');" onmouseout="out('-6553954062731574601');" style=""> 808       * Populate a ListGrid with ListGridRecords.                                                                  </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 809       *                                                                                                            </span>
<span class="3292690528203019011" onmouseenter="enter('3292690528203019011');" onmouseout="out('3292690528203019011');" style=""> 810       * @param className                                                                                           </span>
<span class="5783752320936502160" onmouseenter="enter('5783752320936502160');" onmouseout="out('5783752320936502160');" style=""> 811       * @param headerFields                                                                                        </span>
<span class="4180172247960880324" onmouseenter="enter('4180172247960880324');" onmouseout="out('4180172247960880324');" style=""> 812       * @param type                                                                                                </span>
<span class="-7324022876786324498" onmouseenter="enter('-7324022876786324498');" onmouseout="out('-7324022876786324498');" style=""> 813       * @param drs                                                                                                 </span>
<span class="7403666429378321004" onmouseenter="enter('7403666429378321004');" onmouseout="out('7403666429378321004');" style=""> 814       * @param sectionKey                                                                                          </span>
<span class="6414796960983960786" onmouseenter="enter('6414796960983960786');" onmouseout="out('6414796960983960786');" style=""> 815       * @param order                                                                                               </span>
<span class="-2237647657818576638" onmouseenter="enter('-2237647657818576638');" onmouseout="out('-2237647657818576638');" style=""> 816       * @param idProperty                                                                                          </span>
<span class="6383674454506135847" onmouseenter="enter('6383674454506135847');" onmouseout="out('6383674454506135847');" style=""> 817       * @param sectionCrumbs                                                                                       </span>
<span class="958697608627838498" onmouseenter="enter('958697608627838498');" onmouseout="out('958697608627838498');" style=""> 818       * @param sortPropery                                                                                         </span>
<span class="-9165797340485297481" onmouseenter="enter('-9165797340485297481');" onmouseout="out('-9165797340485297481');" style=""> 819       * @return                                                                                                    </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 820       */                                                                                                           </span>
<span class="4478013600751804718" onmouseenter="enter('4478013600751804718');" onmouseout="out('4478013600751804718');" style=""><abbr title=" 821      protected ListGrid createListGrid(String className, List&lt;Field&gt; headerFields, ListGrid.Type type, DynamicResultSet drs,"> 821      protected ListGrid createListGrid(String className, List&lt;Field&gt; headerFields, ListGrid.Type type, DynamicResulðŸ”µ</abbr></span>
<span class="-6113374608895219377" onmouseenter="enter('-6113374608895219377');" onmouseout="out('-6113374608895219377');" style=""><abbr title=" 822              String sectionKey, Integer order, String idProperty, List&lt;SectionCrumb&gt; sectionCrumbs, String sortPropery) {"> 822              String sectionKey, Integer order, String idProperty, List&lt;SectionCrumb&gt; sectionCrumbs, String sortPropðŸ”µ</abbr></span>
<span class="-449286439783514832" onmouseenter="enter('-449286439783514832');" onmouseout="out('-449286439783514832');" style=""> 823          // Create the list grid and set some basic attributes                                                     </span>
<span class="9183228219526841185" onmouseenter="enter('9183228219526841185');" onmouseout="out('9183228219526841185');" style=""> 824          ListGrid listGrid = new ListGrid();                                                                       </span>
<span class="-6947819430094733929" onmouseenter="enter('-6947819430094733929');" onmouseout="out('-6947819430094733929');" style=""> 825          listGrid.setClassName(className);                                                                         </span>
<span class="4219128016198228062" onmouseenter="enter('4219128016198228062');" onmouseout="out('4219128016198228062');" style=""> 826          listGrid.getHeaderFields().addAll(headerFields);                                                          </span>
<span class="-7949709696885802288" onmouseenter="enter('-7949709696885802288');" onmouseout="out('-7949709696885802288');" style=""> 827          listGrid.setListGridType(type);                                                                           </span>
<span class="8360738814350031256" onmouseenter="enter('8360738814350031256');" onmouseout="out('8360738814350031256');" style=""> 828          listGrid.setSectionCrumbs(sectionCrumbs);                                                                 </span>
<span class="-7038501348455923153" onmouseenter="enter('-7038501348455923153');" onmouseout="out('-7038501348455923153');" style=""> 829          listGrid.setSectionKey(sectionKey);                                                                       </span>
<span class="5588432900267028426" onmouseenter="enter('5588432900267028426');" onmouseout="out('5588432900267028426');" style=""> 830          listGrid.setOrder(order);                                                                                 </span>
<span class="-2959509556644296161" onmouseenter="enter('-2959509556644296161');" onmouseout="out('-2959509556644296161');" style=""> 831          listGrid.setIdProperty(idProperty);                                                                       </span>
<span class="-1574850005689313985" onmouseenter="enter('-1574850005689313985');" onmouseout="out('-1574850005689313985');" style=""> 832          listGrid.setStartIndex(drs.getStartIndex());                                                              </span>
<span class="-1229635168663567378" onmouseenter="enter('-1229635168663567378');" onmouseout="out('-1229635168663567378');" style=""> 833          listGrid.setTotalRecords(drs.getTotalRecords());                                                          </span>
<span class="-8685641121402901146" onmouseenter="enter('-8685641121402901146');" onmouseout="out('-8685641121402901146');" style=""> 834          listGrid.setPageSize(drs.getPageSize());                                                                  </span>
<span  style=""> 835                                                                                                                    </span>
<span class="6809887928661746160" onmouseenter="enter('6809887928661746160');" onmouseout="out('6809887928661746160');" style=""> 836          String sectionIdentifier = extractSectionIdentifierFromCrumb(sectionCrumbs);                              </span>
<span class="-666381629022378153" onmouseenter="enter('-666381629022378153');" onmouseout="out('-666381629022378153');" style=""><abbr title=" 837          AdminSection section = navigationService.findAdminSectionByClassAndSectionId(className, sectionIdentifier);"> 837          AdminSection section = navigationService.findAdminSectionByClassAndSectionId(className, sectionIdentifier)ðŸ”µ</abbr></span>
<span class="2297837107111400660" onmouseenter="enter('2297837107111400660');" onmouseout="out('2297837107111400660');" style=""> 838          if (section != null) {                                                                                    </span>
<span class="-6658763311085780957" onmouseenter="enter('-6658763311085780957');" onmouseout="out('-6658763311085780957');" style=""> 839              listGrid.setExternalEntitySectionKey(section.getUrl());                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 840          }                                                                                                         </span>
<span  style=""> 841                                                                                                                    </span>
<span class="2209008320918265390" onmouseenter="enter('2209008320918265390');" onmouseout="out('2209008320918265390');" style=""> 842          // format date list grid cells                                                                            </span>
<span class="8206468207203445529" onmouseenter="enter('8206468207203445529');" onmouseout="out('8206468207203445529');" style=""> 843          SimpleDateFormat formatter = new SimpleDateFormat(&quot;MMM d, y @ hh:mma&quot;);                                   </span>
<span class="-3380881449399951408" onmouseenter="enter('-3380881449399951408');" onmouseout="out('-3380881449399951408');" style=""> 844          DateFormatSymbols symbols = new DateFormatSymbols(Locale.getDefault());                                   </span>
<span class="4107867186349432276" onmouseenter="enter('4107867186349432276');" onmouseout="out('4107867186349432276');" style=""> 845          symbols.setAmPmStrings(new String[] { &quot;am&quot;, &quot;pm&quot; });                                                      </span>
<span class="8033599572947753762" onmouseenter="enter('8033599572947753762');" onmouseout="out('8033599572947753762');" style=""> 846          formatter.setDateFormatSymbols(symbols);                                                                  </span>
<span  style=""> 847                                                                                                                    </span>
<span class="-8955150404377737735" onmouseenter="enter('-8955150404377737735');" onmouseout="out('-8955150404377737735');" style=""> 848          // For each of the entities (rows) in the list grid, we need to build the associated                      </span>
<span class="7780135600729227159" onmouseenter="enter('7780135600729227159');" onmouseout="out('7780135600729227159');" style=""> 849          // ListGridRecord and set the required fields on the record. These fields are the same ones               </span>
<span class="-4274337481121146447" onmouseenter="enter('-4274337481121146447');" onmouseout="out('-4274337481121146447');" style=""> 850          // that are used for the header fields.                                                                   </span>
<span class="-5517026699518874938" onmouseenter="enter('-5517026699518874938');" onmouseout="out('-5517026699518874938');" style=""> 851          for (Entity e : drs.getRecords()) {                                                                       </span>
<span class="1299256644552050382" onmouseenter="enter('1299256644552050382');" onmouseout="out('1299256644552050382');" style=""> 852              ListGridRecord record = new ListGridRecord();                                                         </span>
<span class="-8742186718038750131" onmouseenter="enter('-8742186718038750131');" onmouseout="out('-8742186718038750131');" style=""> 853              record.setListGrid(listGrid);                                                                         </span>
<span class="6901251098959405515" onmouseenter="enter('6901251098959405515');" onmouseout="out('6901251098959405515');" style=""> 854              record.setDirty(e.isDirty());                                                                         </span>
<span class="-5328520837276209835" onmouseenter="enter('-5328520837276209835');" onmouseout="out('-5328520837276209835');" style=""> 855              record.setEntity(e);                                                                                  </span>
<span class="4295036974122714095" onmouseenter="enter('4295036974122714095');" onmouseout="out('4295036974122714095');" style=""> 856              if (StringUtils.isNotBlank(sortPropery) &amp;&amp; e.findProperty(sortPropery) != null) {                     </span>
<span class="6298096210056644819" onmouseenter="enter('6298096210056644819');" onmouseout="out('6298096210056644819');" style=""> 857                  Property sort = e.findProperty(sortPropery);                                                      </span>
<span class="-3019357169870438428" onmouseenter="enter('-3019357169870438428');" onmouseout="out('-3019357169870438428');" style=""> 858                  record.setDisplayOrder(sort.getValue());                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 859              }                                                                                                     </span>
<span class="-6805099362032074066" onmouseenter="enter('-6805099362032074066');" onmouseout="out('-6805099362032074066');" style=""> 860              if (e.findProperty(&quot;hasError&quot;) != null) {                                                             </span>
<span class="893890618648542494" onmouseenter="enter('893890618648542494');" onmouseout="out('893890618648542494');" style=""> 861                  Boolean hasError = Boolean.parseBoolean(e.findProperty(&quot;hasError&quot;).getValue());                   </span>
<span class="5018109180834939283" onmouseenter="enter('5018109180834939283');" onmouseout="out('5018109180834939283');" style=""> 862                  record.setIsError(hasError);                                                                      </span>
<span class="6284086923287170648" onmouseenter="enter('6284086923287170648');" onmouseout="out('6284086923287170648');" style=""> 863                  if (hasError) {                                                                                   </span>
<span class="-2405869569788439449" onmouseenter="enter('-2405869569788439449');" onmouseout="out('-2405869569788439449');" style=""> 864                      ExtensionResultStatusType messageResultStatus = listGridErrorExtensionManager                 </span>
<span class="60178842478893139" onmouseenter="enter('60178842478893139');" onmouseout="out('60178842478893139');" style=""> 865                              .getProxy().determineErrorMessageForEntity(e, record);                                </span>
<span  style=""> 866                                                                                                                    </span>
<span class="4336715785327594030" onmouseenter="enter('4336715785327594030');" onmouseout="out('4336715785327594030');" style=""> 867                      if (ExtensionResultStatusType.NOT_HANDLED.equals(messageResultStatus)) {                      </span>
<span class="-5328227180306975968" onmouseenter="enter('-5328227180306975968');" onmouseout="out('-5328227180306975968');" style=""> 868                          record.setErrorKey(&quot;listgrid.record.error&quot;);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 869                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 870                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 871              }                                                                                                     </span>
<span  style=""> 872                                                                                                                    </span>
<span class="-6673642350284825111" onmouseenter="enter('-6673642350284825111');" onmouseout="out('-6673642350284825111');" style=""> 873              if (e.findProperty(&quot;progressStatus&quot;) != null) {                                                       </span>
<span class="-2405869569788439449" onmouseenter="enter('-2405869569788439449');" onmouseout="out('-2405869569788439449');" style=""> 874                  ExtensionResultStatusType messageResultStatus = listGridErrorExtensionManager                     </span>
<span class="-4105959264543865488" onmouseenter="enter('-4105959264543865488');" onmouseout="out('-4105959264543865488');" style=""> 875                          .getProxy().determineStatusMessageForEntity(e, record);                                   </span>
<span class="4336715785327594030" onmouseenter="enter('4336715785327594030');" onmouseout="out('4336715785327594030');" style=""> 876                  if (ExtensionResultStatusType.NOT_HANDLED.equals(messageResultStatus)) {                          </span>
<span class="-1619149624396289128" onmouseenter="enter('-1619149624396289128');" onmouseout="out('-1619149624396289128');" style=""> 877                      record.setStatus(e.findProperty(&quot;progressStatus&quot;).getValue());                                </span>
<span class="-5097013158362698405" onmouseenter="enter('-5097013158362698405');" onmouseout="out('-5097013158362698405');" style=""> 878                      record.setStatusCssClass(&quot;listgrid.record.status&quot;);                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 879                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 880              }                                                                                                     </span>
<span  style=""> 881                                                                                                                    </span>
<span class="6661978459482218631" onmouseenter="enter('6661978459482218631');" onmouseout="out('6661978459482218631');" style=""> 882              if (e.findProperty(idProperty) != null) {                                                             </span>
<span class="-8868360599888536047" onmouseenter="enter('-8868360599888536047');" onmouseout="out('-8868360599888536047');" style=""> 883                  record.setId(e.findProperty(idProperty).getValue());                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 884              }                                                                                                     </span>
<span  style=""> 885                                                                                                                    </span>
<span class="4163901938958293625" onmouseenter="enter('4163901938958293625');" onmouseout="out('4163901938958293625');" style=""> 886              for (Field headerField : headerFields) {                                                              </span>
<span class="5027179794052216178" onmouseenter="enter('5027179794052216178');" onmouseout="out('5027179794052216178');" style=""> 887                  Property p = e.findProperty(headerField.getName());                                               </span>
<span class="-4724213940983805674" onmouseenter="enter('-4724213940983805674');" onmouseout="out('-4724213940983805674');" style=""> 888                  if (p != null) {                                                                                  </span>
<span class="-3806855064372020025" onmouseenter="enter('-3806855064372020025');" onmouseout="out('-3806855064372020025');" style=""> 889                      Field recordField = new Field().withName(headerField.getName())                               </span>
<span class="5094071872860659780" onmouseenter="enter('5094071872860659780');" onmouseout="out('5094071872860659780');" style=""> 890                              .withFriendlyName(headerField.getFriendlyName())                                      </span>
<span class="-5738388783204669504" onmouseenter="enter('-5738388783204669504');" onmouseout="out('-5738388783204669504');" style=""> 891                              .withOrder(p.getMetadata().getOrder());                                               </span>
<span  style=""> 892                                                                                                                    </span>
<span class="6797523520890025382" onmouseenter="enter('6797523520890025382');" onmouseout="out('6797523520890025382');" style=""> 893                      if (headerField instanceof ComboField) {                                                      </span>
<span class="-1809643957227997284" onmouseenter="enter('-1809643957227997284');" onmouseout="out('-1809643957227997284');" style=""> 894                          recordField.setValue(((ComboField) headerField).getOption(p.getValue()));                 </span>
<span class="-5676530272089615334" onmouseenter="enter('-5676530272089615334');" onmouseout="out('-5676530272089615334');" style=""> 895                          recordField.setDisplayValue(p.getDisplayValue());                                         </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 896                      } else {                                                                                      </span>
<span class="3939566750475024909" onmouseenter="enter('3939566750475024909');" onmouseout="out('3939566750475024909');" style=""> 897                          if (headerField.getFieldType().equals(&quot;DATE&quot;)) {                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 898                              try {                                                                                 </span>
<span class="6474778173321313180" onmouseenter="enter('6474778173321313180');" onmouseout="out('6474778173321313180');" style=""> 899                                  Date date = new SimpleDateFormat(&quot;yyyy.MM.dd HH:mm:ss&quot;).parse(p.getValue());      </span>
<span class="3880682438474898081" onmouseenter="enter('3880682438474898081');" onmouseout="out('3880682438474898081');" style=""> 900                                  String newValue = formatter.format(date);                                         </span>
<span class="6595195419554741000" onmouseenter="enter('6595195419554741000');" onmouseout="out('6595195419554741000');" style=""> 901                                  recordField.setValue(newValue);                                                   </span>
<span class="2273034781883266774" onmouseenter="enter('2273034781883266774');" onmouseout="out('2273034781883266774');" style=""> 902                              } catch (Exception ex) {                                                              </span>
<span class="-1278861869857480835" onmouseenter="enter('-1278861869857480835');" onmouseout="out('-1278861869857480835');" style=""> 903                                  recordField.setValue(p.getValue());                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 904                              }                                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 905                          } else {                                                                                  </span>
<span class="-1278861869857480835" onmouseenter="enter('-1278861869857480835');" onmouseout="out('-1278861869857480835');" style=""> 906                              recordField.setValue(p.getValue());                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 907                          }                                                                                         </span>
<span class="-5676530272089615334" onmouseenter="enter('-5676530272089615334');" onmouseout="out('-5676530272089615334');" style=""> 908                          recordField.setDisplayValue(p.getDisplayValue());                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 909                      }                                                                                             </span>
<span  style=""> 910                                                                                                                    </span>
<span class="1395793512456166896" onmouseenter="enter('1395793512456166896');" onmouseout="out('1395793512456166896');" style=""> 911                      recordField.setDerived(isDerivedField(headerField, recordField, p));                          </span>
<span  style=""> 912                                                                                                                    </span>
<span class="1474914769688142515" onmouseenter="enter('1474914769688142515');" onmouseout="out('1474914769688142515');" style=""> 913                      record.getFields().add(recordField);                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 914                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 915              }                                                                                                     </span>
<span  style=""> 916                                                                                                                    </span>
<span class="7681410006718809906" onmouseenter="enter('7681410006718809906');" onmouseout="out('7681410006718809906');" style=""> 917              if (e.findProperty(AdminMainEntity.MAIN_ENTITY_NAME_PROPERTY) != null) {                              </span>
<span class="-2560058380276440283" onmouseenter="enter('-2560058380276440283');" onmouseout="out('-2560058380276440283');" style=""> 918                  Field hiddenField = new Field().withName(AdminMainEntity.MAIN_ENTITY_NAME_PROPERTY);              </span>
<span class="-3700863118643080175" onmouseenter="enter('-3700863118643080175');" onmouseout="out('-3700863118643080175');" style=""> 919                  hiddenField.setValue(e.findProperty(AdminMainEntity.MAIN_ENTITY_NAME_PROPERTY).getValue());       </span>
<span class="-8926099734580015874" onmouseenter="enter('-8926099734580015874');" onmouseout="out('-8926099734580015874');" style=""> 920                  record.getHiddenFields().add(hiddenField);                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 921              }                                                                                                     </span>
<span  style=""> 922                                                                                                                    </span>
<span class="-767503360667085643" onmouseenter="enter('-767503360667085643');" onmouseout="out('-767503360667085643');" style=""> 923              if (e.findProperty(BasicPersistenceModule.ALTERNATE_ID_PROPERTY) != null) {                           </span>
<span class="6815728707096626977" onmouseenter="enter('6815728707096626977');" onmouseout="out('6815728707096626977');" style=""> 924                  record.setAltId(e.findProperty(BasicPersistenceModule.ALTERNATE_ID_PROPERTY).getValue());         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 925              }                                                                                                     </span>
<span  style=""> 926                                                                                                                    </span>
<span class="4454208436841958265" onmouseenter="enter('4454208436841958265');" onmouseout="out('4454208436841958265');" style=""> 927              extensionManager.getProxy().modifyListGridRecord(className, record, e);                               </span>
<span  style=""> 928                                                                                                                    </span>
<span class="-2046562633600316152" onmouseenter="enter('-2046562633600316152');" onmouseout="out('-2046562633600316152');" style=""> 929              listGrid.getRecords().add(record);                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 930          }                                                                                                         </span>
<span  style=""> 931                                                                                                                    </span>
<span class="3400018439585714383" onmouseenter="enter('3400018439585714383');" onmouseout="out('3400018439585714383');" style=""> 932          if (drs.getFirstId() != null) {                                                                           </span>
<span class="657069941572346003" onmouseenter="enter('657069941572346003');" onmouseout="out('657069941572346003');" style=""> 933              listGrid.setFirstId(drs.getFirstId());                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 934          }                                                                                                         </span>
<span class="-8589701589672818150" onmouseenter="enter('-8589701589672818150');" onmouseout="out('-8589701589672818150');" style=""> 935          if (drs.getLastId() != null) {                                                                            </span>
<span class="8426729182884352986" onmouseenter="enter('8426729182884352986');" onmouseout="out('8426729182884352986');" style=""> 936              listGrid.setLastId(drs.getLastId());                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 937          }                                                                                                         </span>
<span class="6275187001061462238" onmouseenter="enter('6275187001061462238');" onmouseout="out('6275187001061462238');" style=""> 938          if (drs.getUpperCount() != null) {                                                                        </span>
<span class="-576914595282790069" onmouseenter="enter('-576914595282790069');" onmouseout="out('-576914595282790069');" style=""> 939              listGrid.setUpperCount(drs.getUpperCount());                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 940          }                                                                                                         </span>
<span class="4823072466704399057" onmouseenter="enter('4823072466704399057');" onmouseout="out('4823072466704399057');" style=""> 941          if (drs.getLowerCount() != null) {                                                                        </span>
<span class="-1903228332443717343" onmouseenter="enter('-1903228332443717343');" onmouseout="out('-1903228332443717343');" style=""> 942              listGrid.setLowerCount(drs.getLowerCount());                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 943          }                                                                                                         </span>
<span class="4841764865893204927" onmouseenter="enter('4841764865893204927');" onmouseout="out('4841764865893204927');" style=""> 944          if (drs.getFetchType() != null) {                                                                         </span>
<span class="-77798786805735884" onmouseenter="enter('-77798786805735884');" onmouseout="out('-77798786805735884');" style=""> 945              listGrid.setFetchType(drs.getFetchType().toString());                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 946          }                                                                                                         </span>
<span class="-9150092368605969111" onmouseenter="enter('-9150092368605969111');" onmouseout="out('-9150092368605969111');" style=""> 947          if (drs.getTotalCountLessThanPageSize() != null) {                                                        </span>
<span class="192650896043853585" onmouseenter="enter('192650896043853585');" onmouseout="out('192650896043853585');" style=""> 948              listGrid.setTotalCountLessThanPageSize(drs.getTotalCountLessThanPageSize());                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 949          }                                                                                                         </span>
<span class="3404741154469919162" onmouseenter="enter('3404741154469919162');" onmouseout="out('3404741154469919162');" style=""> 950          if (drs.getPromptSearch() != null) {                                                                      </span>
<span class="-6611592537868887580" onmouseenter="enter('-6611592537868887580');" onmouseout="out('-6611592537868887580');" style=""> 951              listGrid.setPromptSearch(drs.getPromptSearch());                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 952          }                                                                                                         </span>
<span  style=""> 953                                                                                                                    </span>
<span class="8338561479600990216" onmouseenter="enter('8338561479600990216');" onmouseout="out('8338561479600990216');" style=""> 954          return listGrid;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 955      }                                                                                                             </span>
<span  style=""> 956                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 957      /**                                                                                                           </span>
<span class="7203476035615582402" onmouseenter="enter('7203476035615582402');" onmouseout="out('7203476035615582402');" style=""><abbr title=" 958       * Determines whether or not a particular field in a record is derived. By default this checks the {@link BasicFieldMetadata}"> 958       * Determines whether or not a particular field in a record is derived. By default this checks the {@link BasiðŸ”µ</abbr></span>
<span class="-4069675647285817004" onmouseenter="enter('-4069675647285817004');" onmouseout="out('-4069675647285817004');" style=""> 959       * for the given Property to see if something on the backend has marked it as derived                         </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 960       *                                                                                                            </span>
<span class="2786059063596769946" onmouseenter="enter('2786059063596769946');" onmouseout="out('2786059063596769946');" style=""> 961       * @param headerField the header for this recordField                                                         </span>
<span class="7447440891213078037" onmouseenter="enter('7447440891213078037');" onmouseout="out('7447440891213078037');" style=""> 962       * @param recordField the recordField being populated                                                         </span>
<span class="8242400819290521133" onmouseenter="enter('8242400819290521133');" onmouseout="out('8242400819290521133');" style=""> 963       * @param p the property that relates to this recordField                                                     </span>
<span class="2097819629215924500" onmouseenter="enter('2097819629215924500');" onmouseout="out('2097819629215924500');" style=""> 964       * @return whether or not this field is derived                                                               </span>
<span class="5916081075383634288" onmouseenter="enter('5916081075383634288');" onmouseout="out('5916081075383634288');" style=""><abbr title=" 965       * @see {@link #createListGrid(String, List, ListGrid.Type, DynamicResultSet, String, Integer, String, List, String)}"> 965       * @see {@link #createListGrid(String, List, ListGrid.Type, DynamicResultSet, String, Integer, String, List, SðŸ”µ</abbr></span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 966       */                                                                                                           </span>
<span class="-8637325260962674117" onmouseenter="enter('-8637325260962674117');" onmouseout="out('-8637325260962674117');" style=""> 967      protected Boolean isDerivedField(Field headerField, Field recordField, Property p) {                          </span>
<span class="1661867973140043253" onmouseenter="enter('1661867973140043253');" onmouseout="out('1661867973140043253');" style=""> 968          return BooleanUtils.isTrue(((BasicFieldMetadata) p.getMetadata()).getIsDerived());                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 969      }                                                                                                             </span>
<span  style=""> 970                                                                                                                    </span>
<span class="7122600949652716635" onmouseenter="enter('7122600949652716635');" onmouseout="out('7122600949652716635');" style=""> 971      protected void setEntityFormFields(ClassMetadata cmd, EntityForm ef, List&lt;Property&gt; properties) {             </span>
<span class="6325387712166170506" onmouseenter="enter('6325387712166170506');" onmouseout="out('6325387712166170506');" style=""> 972          List&lt;Field&gt; homelessFields = new ArrayList&lt;&gt;();                                                           </span>
<span class="4866400253676981137" onmouseenter="enter('4866400253676981137');" onmouseout="out('4866400253676981137');" style=""> 973          List&lt;Field&gt; fieldsWithAssociations = new ArrayList&lt;&gt;();                                                   </span>
<span  style=""> 974                                                                                                                    </span>
<span class="2404180692851035070" onmouseenter="enter('2404180692851035070');" onmouseout="out('2404180692851035070');" style=""> 975          for (Property property : properties) {                                                                    </span>
<span class="-446642995335437650" onmouseenter="enter('-446642995335437650');" onmouseout="out('-446642995335437650');" style=""> 976              if (property.getMetadata() instanceof BasicFieldMetadata) {                                           </span>
<span class="6647472598704819567" onmouseenter="enter('6647472598704819567');" onmouseout="out('6647472598704819567');" style=""> 977                  BasicFieldMetadata fmd = (BasicFieldMetadata) property.getMetadata();                             </span>
<span  style=""> 978                                                                                                                    </span>
<span  style=""> 979                                                                                                                    </span>
<span class="-4475069031736235173" onmouseenter="enter('-4475069031736235173');" onmouseout="out('-4475069031736235173');" style=""> 980                  if (!ArrayUtils.contains(getFormHiddenVisibilities(), fmd.getVisibility())) {                     </span>
<span class="-6270154255315256607" onmouseenter="enter('-6270154255315256607');" onmouseout="out('-6270154255315256607');" style=""> 981                      // Depending on visibility, field for the particular property is not created on the form      </span>
<span class="5921747215124261866" onmouseenter="enter('5921747215124261866');" onmouseout="out('5921747215124261866');" style=""> 982                      String fieldType = fmd.getFieldType() == null ? null : fmd.getFieldType().toString();         </span>
<span  style=""> 983                                                                                                                    </span>
<span class="6708987068205782652" onmouseenter="enter('6708987068205782652');" onmouseout="out('6708987068205782652');" style=""> 984                      // Create the field and set some basic attributes                                             </span>
<span class="8116345463116621173" onmouseenter="enter('8116345463116621173');" onmouseout="out('8116345463116621173');" style=""> 985                      Field f;                                                                                      </span>
<span  style=""> 986                                                                                                                    </span>
<span class="8199797825370303284" onmouseenter="enter('8199797825370303284');" onmouseout="out('8199797825370303284');" style=""> 987                      if (fieldType.equals(SupportedFieldType.BROADLEAF_ENUMERATION.toString())                     </span>
<span class="7716913215106788406" onmouseenter="enter('7716913215106788406');" onmouseout="out('7716913215106788406');" style=""> 988                              || fieldType.equals(SupportedFieldType.EXPLICIT_ENUMERATION.toString())               </span>
<span class="2980977699228922095" onmouseenter="enter('2980977699228922095');" onmouseout="out('2980977699228922095');" style=""> 989                              || fieldType.equals(SupportedFieldType.DATA_DRIVEN_ENUMERATION.toString())            </span>
<span class="7388471135187367898" onmouseenter="enter('7388471135187367898');" onmouseout="out('7388471135187367898');" style=""> 990                              || fieldType.equals(SupportedFieldType.EMPTY_ENUMERATION.toString())) {               </span>
<span class="3276444675754694915" onmouseenter="enter('3276444675754694915');" onmouseout="out('3276444675754694915');" style=""><abbr title=" 991                          // We&#x27;re dealing with fields that should render as drop-downs, so set their possible values"> 991                          // We&#x27;re dealing with fields that should render as drop-downs, so set their possible valueðŸ”µ</abbr></span>
<span class="3203856539989077186" onmouseenter="enter('3203856539989077186');" onmouseout="out('3203856539989077186');" style=""> 992                          f = new ComboField();                                                                     </span>
<span class="6120731816730172045" onmouseenter="enter('6120731816730172045');" onmouseout="out('6120731816730172045');" style=""> 993                          ((ComboField) f).setOptions(fmd.getEnumerationValues());                                  </span>
<span class="-4628034205462573751" onmouseenter="enter('-4628034205462573751');" onmouseout="out('-4628034205462573751');" style=""><abbr title=" 994                          if (fmd.getHideEnumerationIfEmpty() != null &amp;&amp; fmd.getHideEnumerationIfEmpty().booleanValue()"> 994                          if (fmd.getHideEnumerationIfEmpty() != null &amp;&amp; fmd.getHideEnumerationIfEmpty().booleanValuðŸ”µ</abbr></span>
<span class="-6675389158909418663" onmouseenter="enter('-6675389158909418663');" onmouseout="out('-6675389158909418663');" style=""> 995                                  &amp;&amp; ((ComboField) f).getOptions().size() == 0) {                                   </span>
<span class="-8620847541322007209" onmouseenter="enter('-8620847541322007209');" onmouseout="out('-8620847541322007209');" style=""> 996                              f.setIsVisible(false);                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 997                          }                                                                                         </span>
<span class="86452670050279225" onmouseenter="enter('86452670050279225');" onmouseout="out('86452670050279225');" style=""> 998                      } else if (fieldType.equals(SupportedFieldType.CODE.toString())) {                            </span>
<span class="-7620786431462842147" onmouseenter="enter('-7620786431462842147');" onmouseout="out('-7620786431462842147');" style=""> 999                          f = new CodeField();                                                                      </span>
<span class="-3831443983095651615" onmouseenter="enter('-3831443983095651615');" onmouseout="out('-3831443983095651615');" style="">1000                      } else if (fieldType.equals(SupportedFieldType.RULE_SIMPLE.toString())                        </span>
<span class="-6155398851072788654" onmouseenter="enter('-6155398851072788654');" onmouseout="out('-6155398851072788654');" style="">1001                              || fieldType.equals(SupportedFieldType.RULE_SIMPLE_TIME.toString())                   </span>
<span class="-7731003048108517996" onmouseenter="enter('-7731003048108517996');" onmouseout="out('-7731003048108517996');" style="">1002                              || fieldType.equals(SupportedFieldType.RULE_WITH_QUANTITY.toString())) {              </span>
<span class="1510588759783913078" onmouseenter="enter('1510588759783913078');" onmouseout="out('1510588759783913078');" style="">1003                          // We&#x27;re dealing with rule builders, so we&#x27;ll create those specialized fields             </span>
<span class="439535866421335144" onmouseenter="enter('439535866421335144');" onmouseout="out('439535866421335144');" style="">1004                          f = new RuleBuilderField();                                                               </span>
<span class="-1112724631648616512" onmouseenter="enter('-1112724631648616512');" onmouseout="out('-1112724631648616512');" style="">1005                          ((RuleBuilderField) f).setJsonFieldName(property.getName() + &quot;Json&quot;);                     </span>
<span class="1732596643653885393" onmouseenter="enter('1732596643653885393');" onmouseout="out('1732596643653885393');" style="">1006                          ((RuleBuilderField) f).setDataWrapper(new DataWrapper());                                 </span>
<span class="7228657391391942788" onmouseenter="enter('7228657391391942788');" onmouseout="out('7228657391391942788');" style="">1007                          ((RuleBuilderField) f).setFieldBuilder(fmd.getRuleIdentifier());                          </span>
<span class="6741378243253493035" onmouseenter="enter('6741378243253493035');" onmouseout="out('6741378243253493035');" style="">1008                          ((RuleBuilderField) f).setDisplayType(fmd.getDisplayType().toString());                   </span>
<span  style="">1009                                                                                                                    </span>
<span class="4466331963824990789" onmouseenter="enter('4466331963824990789');" onmouseout="out('4466331963824990789');" style="">1010                          String blankJsonString =  &quot;{\&quot;data\&quot;:[]}&quot;;                                                </span>
<span class="-7753853041517398518" onmouseenter="enter('-7753853041517398518');" onmouseout="out('-7753853041517398518');" style="">1011                          ((RuleBuilderField) f).setJson(blankJsonString);                                          </span>
<span class="-6647315222721447684" onmouseenter="enter('-6647315222721447684');" onmouseout="out('-6647315222721447684');" style="">1012                          DataWrapper dw = convertJsonToDataWrapper(blankJsonString);                               </span>
<span class="-3408161092817379645" onmouseenter="enter('-3408161092817379645');" onmouseout="out('-3408161092817379645');" style="">1013                          if (dw != null) {                                                                         </span>
<span class="-5096298828793309103" onmouseenter="enter('-5096298828793309103');" onmouseout="out('-5096298828793309103');" style="">1014                              ((RuleBuilderField) f).setDataWrapper(dw);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1015                          }                                                                                         </span>
<span  style="">1016                                                                                                                    </span>
<span class="3046581447506121497" onmouseenter="enter('3046581447506121497');" onmouseout="out('3046581447506121497');" style="">1017                          if (fieldType.equals(SupportedFieldType.RULE_SIMPLE.toString())) {                        </span>
<span class="-1186924665685770541" onmouseenter="enter('-1186924665685770541');" onmouseout="out('-1186924665685770541');" style="">1018                              ((RuleBuilderField) f).setRuleType(&quot;rule-builder-simple&quot;);                            </span>
<span class="-4608843455051291020" onmouseenter="enter('-4608843455051291020');" onmouseout="out('-4608843455051291020');" style="">1019                          } else if (fieldType.equals(SupportedFieldType.RULE_WITH_QUANTITY.toString())) {          </span>
<span class="-4088622747979962571" onmouseenter="enter('-4088622747979962571');" onmouseout="out('-4088622747979962571');" style="">1020                              ((RuleBuilderField) f).setRuleType(&quot;rule-builder-with-quantity&quot;);                     </span>
<span class="6638316396690215710" onmouseenter="enter('6638316396690215710');" onmouseout="out('6638316396690215710');" style="">1021                          } else if (fieldType.equals(SupportedFieldType.RULE_SIMPLE_TIME.toString())) {            </span>
<span class="-5927097931654974492" onmouseenter="enter('-5927097931654974492');" onmouseout="out('-5927097931654974492');" style="">1022                              ((RuleBuilderField) f).setRuleType(&quot;rule-builder-simple-time&quot;);                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1023                          }                                                                                         </span>
<span class="-76815898427635828" onmouseenter="enter('-76815898427635828');" onmouseout="out('-76815898427635828');" style="">1024                      } else if (LookupType.DROPDOWN.equals(fmd.getLookupType())) {                                 </span>
<span class="2821913588763042756" onmouseenter="enter('2821913588763042756');" onmouseout="out('2821913588763042756');" style=""><abbr title="1025                          // We&#x27;re dealing with a to-one field that wants to be rendered as a dropdown instead of in a">1025                          // We&#x27;re dealing with a to-one field that wants to be rendered as a dropdown instead of inðŸ”µ</abbr></span>
<span class="566288030321676498" onmouseenter="enter('566288030321676498');" onmouseout="out('566288030321676498');" style=""><abbr title="1026                          // modal, so we&#x27;ll provision the combo field here. Available options will be set as part of a">1026                          // modal, so we&#x27;ll provision the combo field here. Available options will be set as part oðŸ”µ</abbr></span>
<span class="7172718814241780846" onmouseenter="enter('7172718814241780846');" onmouseout="out('7172718814241780846');" style="">1027                          // subsequent operation                                                                   </span>
<span class="3203856539989077186" onmouseenter="enter('3203856539989077186');" onmouseout="out('3203856539989077186');" style="">1028                          f = new ComboField();                                                                     </span>
<span class="-1555139312653833561" onmouseenter="enter('-1555139312653833561');" onmouseout="out('-1555139312653833561');" style="">1029                      } else if (fieldType.equals(SupportedFieldType.MEDIA.toString())) {                           </span>
<span class="7851932113124846293" onmouseenter="enter('7851932113124846293');" onmouseout="out('7851932113124846293');" style="">1030                          f = new MediaField();                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1031                      } else {                                                                                      </span>
<span class="-4540598357129068716" onmouseenter="enter('-4540598357129068716');" onmouseout="out('-4540598357129068716');" style="">1032                          // Create a default field since there was no specialized handler                          </span>
<span class="8445500457207430044" onmouseenter="enter('8445500457207430044');" onmouseout="out('8445500457207430044');" style="">1033                          f = new Field();                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1034                      }                                                                                             </span>
<span  style="">1035                                                                                                                    </span>
<span class="-1589475346053267562" onmouseenter="enter('-1589475346053267562');" onmouseout="out('-1589475346053267562');" style="">1036                      Boolean required = fmd.getRequiredOverride();                                                 </span>
<span class="-1593138839980229401" onmouseenter="enter('-1593138839980229401');" onmouseout="out('-1593138839980229401');" style="">1037                      if (required == null) {                                                                       </span>
<span class="-6716674851132060026" onmouseenter="enter('-6716674851132060026');" onmouseout="out('-6716674851132060026');" style="">1038                          required = fmd.getRequired();                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1039                      }                                                                                             </span>
<span  style="">1040                                                                                                                    </span>
<span class="981510687991453845" onmouseenter="enter('981510687991453845');" onmouseout="out('981510687991453845');" style="">1041                      Boolean allowNoValueEnum = fmd.getAllowNoValueEnumOption();                                   </span>
<span class="2453461306820272647" onmouseenter="enter('2453461306820272647');" onmouseout="out('2453461306820272647');" style="">1042                      if (allowNoValueEnum != null) {                                                               </span>
<span class="511249052530710714" onmouseenter="enter('511249052530710714');" onmouseout="out('511249052530710714');" style="">1043                          f.setAllowNoValueEnumOption(allowNoValueEnum);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1044                      }                                                                                             </span>
<span  style="">1045                                                                                                                    </span>
<span class="-1986899161047350602" onmouseenter="enter('-1986899161047350602');" onmouseout="out('-1986899161047350602');" style="">1046                      f.withName(property.getName())                                                                </span>
<span class="-6128468031482469561" onmouseenter="enter('-6128468031482469561');" onmouseout="out('-6128468031482469561');" style="">1047                       .withFieldType(fieldType)                                                                    </span>
<span class="-7927263150118151701" onmouseenter="enter('-7927263150118151701');" onmouseout="out('-7927263150118151701');" style="">1048                       .withFieldComponentRenderer(getFieldComponentRenderer(fmd))                                  </span>
<span class="-4099331664389877516" onmouseenter="enter('-4099331664389877516');" onmouseout="out('-4099331664389877516');" style="">1049                       .withGridFieldComponentRenderer(getGridFieldComponentRenderer(fmd))                          </span>
<span class="654425426992808056" onmouseenter="enter('654425426992808056');" onmouseout="out('654425426992808056');" style="">1050                       .withOrder(fmd.getOrder())                                                                   </span>
<span class="8839654145383232945" onmouseenter="enter('8839654145383232945');" onmouseout="out('8839654145383232945');" style="">1051                       .withFriendlyName(fmd.getFriendlyName())                                                     </span>
<span class="3058247827263925638" onmouseenter="enter('3058247827263925638');" onmouseout="out('3058247827263925638');" style="">1052                       .withForeignKeyDisplayValueProperty(fmd.getForeignKeyDisplayValueProperty())                 </span>
<span class="3198496511046166958" onmouseenter="enter('3198496511046166958');" onmouseout="out('3198496511046166958');" style="">1053                       .withForeignKeyClass(fmd.getForeignKeyClass())                                               </span>
<span class="-2338070414188990290" onmouseenter="enter('-2338070414188990290');" onmouseout="out('-2338070414188990290');" style="">1054                       .withForeignKeySectionPath(getAdminSectionPath(fmd.getForeignKeyClass()))                    </span>
<span class="-6320050738227309064" onmouseenter="enter('-6320050738227309064');" onmouseout="out('-6320050738227309064');" style=""><abbr title="1055                       .withOwningEntityClass(fmd.getOwningClass()!=null?fmd.getOwningClass():fmd.getInheritedFromType())">1055                       .withOwningEntityClass(fmd.getOwningClass()!=null?fmd.getOwningClass():fmd.getInheritedFromTyðŸ”µ</abbr></span>
<span class="3975803686122841065" onmouseenter="enter('3975803686122841065');" onmouseout="out('3975803686122841065');" style="">1056                       .withRequired(required)                                                                      </span>
<span class="359983231603260957" onmouseenter="enter('359983231603260957');" onmouseout="out('359983231603260957');" style="">1057                       .withReadOnly(fmd.getReadOnly())                                                             </span>
<span class="5042583388418599955" onmouseenter="enter('5042583388418599955');" onmouseout="out('5042583388418599955');" style="">1058                       .withTranslatable(fmd.getTranslatable())                                                     </span>
<span class="850947769734677156" onmouseenter="enter('850947769734677156');" onmouseout="out('850947769734677156');" style="">1059                       .withAlternateOrdering((Boolean) fmd.getAdditionalMetadata().get(Field.ALTERNATE_ORDERING))  </span>
<span class="3384004197069247045" onmouseenter="enter('3384004197069247045');" onmouseout="out('3384004197069247045');" style="">1060                       .withLargeEntry(fmd.isLargeEntry())                                                          </span>
<span class="8358279492731939259" onmouseenter="enter('8358279492731939259');" onmouseout="out('8358279492731939259');" style="">1061                       .withHint(fmd.getHint())                                                                     </span>
<span class="2950855740871622056" onmouseenter="enter('2950855740871622056');" onmouseout="out('2950855740871622056');" style="">1062                       .withTooltip(fmd.getTooltip())                                                               </span>
<span class="-4063412654801023815" onmouseenter="enter('-4063412654801023815');" onmouseout="out('-4063412654801023815');" style="">1063                       .withHelp(fmd.getHelpText())                                                                 </span>
<span class="-2322162613997207656" onmouseenter="enter('-2322162613997207656');" onmouseout="out('-2322162613997207656');" style="">1064                       .withTypeaheadEnabled(fmd.getEnableTypeaheadLookup())                                        </span>
<span class="3999494576911658619" onmouseenter="enter('3999494576911658619');" onmouseout="out('3999494576911658619');" style="">1065                       .withCanLinkToExternalEntity(fmd.getCanLinkToExternalEntity())                               </span>
<span class="6462182061714529877" onmouseenter="enter('6462182061714529877');" onmouseout="out('6462182061714529877');" style="">1066                       .withAssociatedFieldName(fmd.getAssociatedFieldName());                                      </span>
<span  style="">1067                                                                                                                    </span>
<span class="-269468944390639664" onmouseenter="enter('-269468944390639664');" onmouseout="out('-269468944390639664');" style="">1068                      String defaultValue = fmd.getDefaultValue();                                                  </span>
<span class="517621878739872731" onmouseenter="enter('517621878739872731');" onmouseout="out('517621878739872731');" style="">1069                      if (defaultValue != null) {                                                                   </span>
<span class="4532975392407713565" onmouseenter="enter('4532975392407713565');" onmouseout="out('4532975392407713565');" style="">1070                          defaultValue = extractDefaultValueFromFieldData(fieldType, fmd);                          </span>
<span class="-4862494673796786760" onmouseenter="enter('-4862494673796786760');" onmouseout="out('-4862494673796786760');" style="">1071                          f.withValue(defaultValue);                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1072                      }                                                                                             </span>
<span  style="">1073                                                                                                                    </span>
<span class="-2242732727084199547" onmouseenter="enter('-2242732727084199547');" onmouseout="out('-2242732727084199547');" style="">1074                      if (StringUtils.isBlank(f.getFriendlyName())) {                                               </span>
<span class="4951409134206579242" onmouseenter="enter('4951409134206579242');" onmouseout="out('4951409134206579242');" style="">1075                          f.setFriendlyName(f.getName());                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1076                      }                                                                                             </span>
<span  style="">1077                                                                                                                    </span>
<span class="4434831944931004928" onmouseenter="enter('4434831944931004928');" onmouseout="out('4434831944931004928');" style="">1078                      // If is form hidden, set visible to false                                                    </span>
<span class="-7962146999992485704" onmouseenter="enter('-7962146999992485704');" onmouseout="out('-7962146999992485704');" style="">1079                      if (VisibilityEnum.FORM_EXPLICITLY_HIDDEN.equals(fmd.getVisibility())) {                      </span>
<span class="-8620847541322007209" onmouseenter="enter('-8620847541322007209');" onmouseout="out('-8620847541322007209');" style="">1080                          f.setIsVisible(false);                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1081                      }                                                                                             </span>
<span  style="">1082                                                                                                                    </span>
<span class="5627296841760402753" onmouseenter="enter('5627296841760402753');" onmouseout="out('5627296841760402753');" style="">1083                      if (VisibilityEnum.VISIBLE_ALL.equals(fmd.getVisibility())) {                                 </span>
<span class="2458976513889241970" onmouseenter="enter('2458976513889241970');" onmouseout="out('2458976513889241970');" style="">1084                          f.setIsVisible(true);                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1085                      }                                                                                             </span>
<span  style="">1086                                                                                                                    </span>
<span class="5834486891091757584" onmouseenter="enter('5834486891091757584');" onmouseout="out('5834486891091757584');" style="">1087                      // Add the field to the appropriate FieldGroup                                                </span>
<span class="-1630394947978608902" onmouseenter="enter('-1630394947978608902');" onmouseout="out('-1630394947978608902');" style="">1088                      if (fmd.getGroup() == null) {                                                                 </span>
<span class="3071880473996022899" onmouseenter="enter('3071880473996022899');" onmouseout="out('3071880473996022899');" style="">1089                          homelessFields.add(f);                                                                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1090                      } else {                                                                                      </span>
<span class="-627881575057280692" onmouseenter="enter('-627881575057280692');" onmouseout="out('-627881575057280692');" style="">1091                          ef.addField(cmd, f, fmd.getGroup(), fmd.getGroupOrder(), fmd.getTab(), fmd.getTabOrder());</span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1092                      }                                                                                             </span>
<span  style="">1093                                                                                                                    </span>
<span class="-260794109391612652" onmouseenter="enter('-260794109391612652');" onmouseout="out('-260794109391612652');" style="">1094                      if (StringUtils.isNotEmpty(fmd.getAssociatedFieldName())) {                                   </span>
<span class="1585765122221468977" onmouseenter="enter('1585765122221468977');" onmouseout="out('1585765122221468977');" style="">1095                          fieldsWithAssociations.add(f);                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1096                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1097                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1098              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1099          }                                                                                                         </span>
<span  style="">1100                                                                                                                    </span>
<span class="6148030130019845419" onmouseenter="enter('6148030130019845419');" onmouseout="out('6148030130019845419');" style="">1101          for (Field f : homelessFields) {                                                                          </span>
<span class="-6046258263556396205" onmouseenter="enter('-6046258263556396205');" onmouseout="out('-6046258263556396205');" style="">1102              ef.addField(cmd, f, null, null, null, null);                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1103          }                                                                                                         </span>
<span  style="">1104                                                                                                                    </span>
<span class="-3286982672520556792" onmouseenter="enter('-3286982672520556792');" onmouseout="out('-3286982672520556792');" style="">1105          for (Field f : fieldsWithAssociations) {                                                                  </span>
<span class="785772779687320855" onmouseenter="enter('785772779687320855');" onmouseout="out('785772779687320855');" style="">1106              Field associatedField = findAssociatedField(ef, f);                                                   </span>
<span class="6919514124287833745" onmouseenter="enter('6919514124287833745');" onmouseout="out('6919514124287833745');" style="">1107              if (associatedField != null) {                                                                        </span>
<span class="-9095335942205451536" onmouseenter="enter('-9095335942205451536');" onmouseout="out('-9095335942205451536');" style="">1108                  associatedField.setShouldRender(false);                                                           </span>
<span class="-2878946802658158988" onmouseenter="enter('-2878946802658158988');" onmouseout="out('-2878946802658158988');" style="">1109                  f.setAssociatedFieldName(associatedField.getName());                                              </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1110              } else {                                                                                              </span>
<span class="7502764524857913063" onmouseenter="enter('7502764524857913063');" onmouseout="out('7502764524857913063');" style="">1111                  f.setAssociatedFieldName(null);                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1112              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1113          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1114      }                                                                                                             </span>
<span  style="">1115                                                                                                                    </span>
<span class="5762152267566694667" onmouseenter="enter('5762152267566694667');" onmouseout="out('5762152267566694667');" style="">1116      protected String getFieldComponentRenderer(BasicFieldMetadata fmd) {                                          </span>
<span class="-6767392947458941920" onmouseenter="enter('-6767392947458941920');" onmouseout="out('-6767392947458941920');" style="">1117          if (StringUtils.isNotBlank(fmd.getFieldComponentRendererTemplate())) {                                    </span>
<span class="-4402549852767313598" onmouseenter="enter('-4402549852767313598');" onmouseout="out('-4402549852767313598');" style="">1118              return fmd.getFieldComponentRendererTemplate();                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1119          }                                                                                                         </span>
<span class="-2438701386053680498" onmouseenter="enter('-2438701386053680498');" onmouseout="out('-2438701386053680498');" style="">1120          return fmd.getFieldComponentRenderer()==null?null:fmd.getFieldComponentRenderer().toString();             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1121      }                                                                                                             </span>
<span  style="">1122                                                                                                                    </span>
<span class="590879222954667418" onmouseenter="enter('590879222954667418');" onmouseout="out('590879222954667418');" style="">1123      protected String getGridFieldComponentRenderer(BasicFieldMetadata fmd) {                                      </span>
<span class="7087363204431348668" onmouseenter="enter('7087363204431348668');" onmouseout="out('7087363204431348668');" style="">1124          if (StringUtils.isNotBlank(fmd.getGridFieldComponentRendererTemplate())) {                                </span>
<span class="5883340390214386055" onmouseenter="enter('5883340390214386055');" onmouseout="out('5883340390214386055');" style="">1125              return fmd.getGridFieldComponentRendererTemplate();                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1126          }                                                                                                         </span>
<span class="-7287009246855470147" onmouseenter="enter('-7287009246855470147');" onmouseout="out('-7287009246855470147');" style="">1127          return fmd.getGridFieldComponentRenderer()==null?null:fmd.getGridFieldComponentRenderer().toString();     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1128      }                                                                                                             </span>
<span  style="">1129                                                                                                                    </span>
<span class="-6562218165361923864" onmouseenter="enter('-6562218165361923864');" onmouseout="out('-6562218165361923864');" style="">1130      private Field findAssociatedField(EntityForm ef, Field f) {                                                   </span>
<span class="4174722207334262365" onmouseenter="enter('4174722207334262365');" onmouseout="out('4174722207334262365');" style="">1131          // Try on the parent object                                                                               </span>
<span class="-1388610369938356597" onmouseenter="enter('-1388610369938356597');" onmouseout="out('-1388610369938356597');" style="">1132          Field associatedField = ef.findField(f.getAssociatedFieldName());                                         </span>
<span  style="">1133                                                                                                                    </span>
<span class="-8057832969882318537" onmouseenter="enter('-8057832969882318537');" onmouseout="out('-8057832969882318537');" style="">1134          if (associatedField == null) {                                                                            </span>
<span class="-4315839339096222496" onmouseenter="enter('-4315839339096222496');" onmouseout="out('-4315839339096222496');" style="">1135              // Check the field&#x27;s path                                                                             </span>
<span class="-3489350751131411992" onmouseenter="enter('-3489350751131411992');" onmouseout="out('-3489350751131411992');" style="">1136              String[] fieldPathParts = f.getName().split(&quot;\\.&quot;);                                                   </span>
<span class="1068980887755244265" onmouseenter="enter('1068980887755244265');" onmouseout="out('1068980887755244265');" style="">1137              String testPath = &quot;&quot;;                                                                                 </span>
<span  style="">1138                                                                                                                    </span>
<span class="8677207579218271674" onmouseenter="enter('8677207579218271674');" onmouseout="out('8677207579218271674');" style="">1139              for (String path : fieldPathParts) {                                                                  </span>
<span class="-680931118424370884" onmouseenter="enter('-680931118424370884');" onmouseout="out('-680931118424370884');" style="">1140                  testPath += path + &quot;.&quot;;                                                                           </span>
<span  style="">1141                                                                                                                    </span>
<span class="-7538860418203958404" onmouseenter="enter('-7538860418203958404');" onmouseout="out('-7538860418203958404');" style="">1142                  associatedField = ef.findField(testPath + f.getAssociatedFieldName());                            </span>
<span class="6919514124287833745" onmouseenter="enter('6919514124287833745');" onmouseout="out('6919514124287833745');" style="">1143                  if (associatedField != null) {                                                                    </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1144                      break;                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1145                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1146              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1147          }                                                                                                         </span>
<span class="6563544998135133572" onmouseenter="enter('6563544998135133572');" onmouseout="out('6563544998135133572');" style="">1148          return associatedField;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1149      }                                                                                                             </span>
<span  style="">1150                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1151      /**                                                                                                           </span>
<span class="4647529469504582079" onmouseenter="enter('4647529469504582079');" onmouseout="out('4647529469504582079');" style="">1152       * This method gets the {@link AdminSection} for the given foreignKeyClass parameter. If none exists,         </span>
<span class="2236731749674454246" onmouseenter="enter('2236731749674454246');" onmouseout="out('2236731749674454246');" style="">1153       * it returns the foreignKeyClass.                                                                            </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1154       *                                                                                                            </span>
<span class="-7514279057842438906" onmouseenter="enter('-7514279057842438906');" onmouseout="out('-7514279057842438906');" style="">1155       * @param foreignKeyClass the {@link String} class name                                                       </span>
<span class="7993230679639641523" onmouseenter="enter('7993230679639641523');" onmouseout="out('7993230679639641523');" style="">1156       * @return the admin section pathname                                                                         </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1157       */                                                                                                           </span>
<span class="-6189454574455820362" onmouseenter="enter('-6189454574455820362');" onmouseout="out('-6189454574455820362');" style="">1158      protected String getAdminSectionPath(String foreignKeyClass) {                                                </span>
<span class="8135436521484469970" onmouseenter="enter('8135436521484469970');" onmouseout="out('8135436521484469970');" style="">1159          if (foreignKeyClass != null) {                                                                            </span>
<span class="-4650736007503046520" onmouseenter="enter('-4650736007503046520');" onmouseout="out('-4650736007503046520');" style=""><abbr title="1160              AdminSection foreignKeySection = adminNavigationService.findAdminSectionByClassAndSectionId(foreignKeyClass, null);">1160              AdminSection foreignKeySection = adminNavigationService.findAdminSectionByClassAndSectionId(foreignKeyðŸ”µ</abbr></span>
<span class="-7201502785940326159" onmouseenter="enter('-7201502785940326159');" onmouseout="out('-7201502785940326159');" style="">1161              return foreignKeySection != null ? foreignKeySection.getUrl() : foreignKeyClass;                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1162          }                                                                                                         </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1163          return null;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1164      }                                                                                                             </span>
<span  style="">1165                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1166      /**                                                                                                           </span>
<span class="-9148493238200404936" onmouseenter="enter('-9148493238200404936');" onmouseout="out('-9148493238200404936');" style=""><abbr title="1167       * NOTE: This method will attempt to merge tabs if the unprocessed {@link TabMetadata#getTabName()} is equal to">1167       * NOTE: This method will attempt to merge tabs if the unprocessed {@link TabMetadata#getTabName()} is equal tðŸ”µ</abbr></span>
<span class="-1274816497587979877" onmouseenter="enter('-1274816497587979877');" onmouseout="out('-1274816497587979877');" style="">1168       *  the processed value of another tab.                                                                       </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1169       *                                                                                                            </span>
<span class="-2406703893472258014" onmouseenter="enter('-2406703893472258014');" onmouseout="out('-2406703893472258014');" style="">1170       * For example, if {@link TabMetadata#getTabName()} is &quot;Example&quot;, there is a another tab where                </span>
<span class="9184140520214431771" onmouseenter="enter('9184140520214431771');" onmouseout="out('9184140520214431771');" style="">1171       *  {@link TabMetadata#getTabName()} is &quot;Example_Tab&quot;, and a message property where &#x27;Example_Tab=Example&#x27;,    </span>
<span class="8352702158102966043" onmouseenter="enter('8352702158102966043');" onmouseout="out('8352702158102966043');" style="">1172       *  then the tabs should be merged together, so that we do not end up rendering multiple &quot;Example&quot; tabs.      </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1173       */                                                                                                           </span>
<span class="-3548818374011565463" onmouseenter="enter('-3548818374011565463');" onmouseout="out('-3548818374011565463');" style="">1174      protected void setEntityFormTabsAndGroups(EntityForm ef, Map&lt;String, TabMetadata&gt; tabMetadataMap) {           </span>
<span class="-1610887690100779398" onmouseenter="enter('-1610887690100779398');" onmouseout="out('-1610887690100779398');" style="">1175          if (tabMetadataMap != null) {                                                                             </span>
<span class="8239819812127968949" onmouseenter="enter('8239819812127968949');" onmouseout="out('8239819812127968949');" style="">1176              Set&lt;String&gt; tabMetadataKeySet = tabMetadataMap.keySet();                                              </span>
<span class="-8816277474934611824" onmouseenter="enter('-8816277474934611824');" onmouseout="out('-8816277474934611824');" style="">1177              for (String tabKey : tabMetadataKeySet) {                                                             </span>
<span class="7310777629515294934" onmouseenter="enter('7310777629515294934');" onmouseout="out('7310777629515294934');" style="">1178                  TabMetadata tabMetadata = tabMetadataMap.get(tabKey);                                             </span>
<span class="-3382451411952830270" onmouseenter="enter('-3382451411952830270');" onmouseout="out('-3382451411952830270');" style="">1179                  String unprocessedTabName = getUnprocessedNameOfMatchingTab(tabMetadata, tabMetadataKeySet);      </span>
<span  style="">1180                                                                                                                    </span>
<span class="-4558225351015241817" onmouseenter="enter('-4558225351015241817');" onmouseout="out('-4558225351015241817');" style="">1181                  if (foundMatchingTab(unprocessedTabName)) {                                                       </span>
<span class="7976020367549586090" onmouseenter="enter('7976020367549586090');" onmouseout="out('7976020367549586090');" style="">1182                      if (!tabExists(ef, unprocessedTabName)) {                                                     </span>
<span class="-6968658869865565527" onmouseenter="enter('-6968658869865565527');" onmouseout="out('-6968658869865565527');" style="">1183                          TabMetadata originalTabMetadata = tabMetadataMap.get(unprocessedTabName);                 </span>
<span class="6840551509140741312" onmouseenter="enter('6840551509140741312');" onmouseout="out('6840551509140741312');" style="">1184                          unprocessedTabName = ef.addTabFromTabMetadata(originalTabMetadata);                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1185                      }                                                                                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1186                  } else {                                                                                          </span>
<span class="2531268367420417827" onmouseenter="enter('2531268367420417827');" onmouseout="out('2531268367420417827');" style="">1187                      if (tabExists(ef, tabKey)) {                                                                  </span>
<span class="3894487325805599765" onmouseenter="enter('3894487325805599765');" onmouseout="out('3894487325805599765');" style="">1188                          unprocessedTabName = tabKey;                                                              </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1189                      } else {                                                                                      </span>
<span class="-854176188216766174" onmouseenter="enter('-854176188216766174');" onmouseout="out('-854176188216766174');" style="">1190                          unprocessedTabName = ef.addTabFromTabMetadata(tabMetadata);                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1191                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1192                  }                                                                                                 </span>
<span  style="">1193                                                                                                                    </span>
<span class="4976299653458575754" onmouseenter="enter('4976299653458575754');" onmouseout="out('4976299653458575754');" style="">1194                  Set&lt;String&gt; groupMetadataKeySet = tabMetadata.getGroupMetadata().keySet();                        </span>
<span class="-7961344655248674499" onmouseenter="enter('-7961344655248674499');" onmouseout="out('-7961344655248674499');" style="">1195                  for (String groupKey : groupMetadataKeySet) {                                                     </span>
<span class="6345765707562916689" onmouseenter="enter('6345765707562916689');" onmouseout="out('6345765707562916689');" style=""><abbr title="1196                      ef.addGroupFromGroupMetadata(tabMetadata.getGroupMetadata().get(groupKey), unprocessedTabName);">1196                      ef.addGroupFromGroupMetadata(tabMetadata.getGroupMetadata().get(groupKey), unprocessedTabName)ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1197                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1198              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1199          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1200      }                                                                                                             </span>
<span  style="">1201                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1202      /**                                                                                                           </span>
<span class="7306113150058239600" onmouseenter="enter('7306113150058239600');" onmouseout="out('7306113150058239600');" style="">1203       * Search for any other tab on the target entity that has the same display value                              </span>
<span class="240467368059923303" onmouseenter="enter('240467368059923303');" onmouseout="out('240467368059923303');" style="">1204       *  as the value provided tab name.                                                                           </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1205       *                                                                                                            </span>
<span class="-4650758346108360443" onmouseenter="enter('-4650758346108360443');" onmouseout="out('-4650758346108360443');" style="">1206       * This assumes that the {@link TabMetadata#getTabName()} is in the form of a processed message property.     </span>
<span class="-478812681452175174" onmouseenter="enter('-478812681452175174');" onmouseout="out('-478812681452175174');" style=""><abbr title="1207       *  For example, if {@link TabMetadata#getTabName()} is &quot;Example&quot;, there is a tabKey from the tabMetadataKeySet">1207       *  For example, if {@link TabMetadata#getTabName()} is &quot;Example&quot;, there is a tabKey from the tabMetadataKeySeðŸ”µ</abbr></span>
<span class="818185943405205448" onmouseenter="enter('818185943405205448');" onmouseout="out('818185943405205448');" style="">1208       *  that is &quot;Example_Tab&quot;, and a message property where &#x27;Example_Tab=Example&#x27;, then this method should return </span>
<span class="-3733456167855611550" onmouseenter="enter('-3733456167855611550');" onmouseout="out('-3733456167855611550');" style="">1209       *  &quot;Example_Tab&quot; which will end up causing the tabs to merge together.                                       </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1210       *                                                                                                            </span>
<span class="6715625924911503951" onmouseenter="enter('6715625924911503951');" onmouseout="out('6715625924911503951');" style="">1211       * If a tab with the same display value cannot be found, then we should return null to indicate that there    </span>
<span class="-816382718997149765" onmouseenter="enter('-816382718997149765');" onmouseout="out('-816382718997149765');" style="">1212       *  is no matching tab with the same processed tabName value.                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1213       */                                                                                                           </span>
<span class="2531890089338051353" onmouseenter="enter('2531890089338051353');" onmouseout="out('2531890089338051353');" style="">1214      protected String getUnprocessedNameOfMatchingTab(TabMetadata tabMetadata, Set&lt;String&gt; tabMetadataKeySet) {    </span>
<span class="-8816277474934611824" onmouseenter="enter('-8816277474934611824');" onmouseout="out('-8816277474934611824');" style="">1215          for (String tabKey : tabMetadataKeySet) {                                                                 </span>
<span class="-5779793862119901002" onmouseenter="enter('-5779793862119901002');" onmouseout="out('-5779793862119901002');" style="">1216              String tabName = tabMetadata.getTabName();                                                            </span>
<span  style="">1217                                                                                                                    </span>
<span class="-8422051325525888747" onmouseenter="enter('-8422051325525888747');" onmouseout="out('-8422051325525888747');" style="">1218              if (processedTabKeyMatchesTabName(tabName, tabKey)) {                                                 </span>
<span class="3937451821444963358" onmouseenter="enter('3937451821444963358');" onmouseout="out('3937451821444963358');" style="">1219                  return tabKey;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1220              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1221          }                                                                                                         </span>
<span  style="">1222                                                                                                                    </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1223          return null;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1224      }                                                                                                             </span>
<span  style="">1225                                                                                                                    </span>
<span class="-1619438245958020737" onmouseenter="enter('-1619438245958020737');" onmouseout="out('-1619438245958020737');" style="">1226      protected boolean processedTabKeyMatchesTabName(String tabName, String candidateTabKey) {                     </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1227          try {                                                                                                     </span>
<span class="-7659299375574203210" onmouseenter="enter('-7659299375574203210');" onmouseout="out('-7659299375574203210');" style="">1228              String processedCandidateTabKey = BLCMessageUtils.getMessage(candidateTabKey);                        </span>
<span class="-2617676223106948028" onmouseenter="enter('-2617676223106948028');" onmouseout="out('-2617676223106948028');" style="">1229              boolean candidateTabKeyWasProcessed = !StringUtils.equals(candidateTabKey, processedCandidateTabKey); </span>
<span  style="">1230                                                                                                                    </span>
<span class="2100898845031278709" onmouseenter="enter('2100898845031278709');" onmouseout="out('2100898845031278709');" style="">1231              return candidateTabKeyWasProcessed &amp;&amp; StringUtils.equalsIgnoreCase(tabName, processedCandidateTabKey);</span>
<span class="-2410148316212931681" onmouseenter="enter('-2410148316212931681');" onmouseout="out('-2410148316212931681');" style="">1232          } catch (NoSuchMessageException e) {                                                                      </span>
<span class="1284296105156752555" onmouseenter="enter('1284296105156752555');" onmouseout="out('1284296105156752555');" style="">1233              LOG.debug(&quot;No such message exists for &quot; + candidateTabKey, e);                                        </span>
<span  style="">1234                                                                                                                    </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1235              return false;                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1236          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1237      }                                                                                                             </span>
<span  style="">1238                                                                                                                    </span>
<span class="-7105644214565709555" onmouseenter="enter('-7105644214565709555');" onmouseout="out('-7105644214565709555');" style="">1239      protected boolean foundMatchingTab(String unprocessedTabName) {                                               </span>
<span class="6373538944534305470" onmouseenter="enter('6373538944534305470');" onmouseout="out('6373538944534305470');" style="">1240          return (unprocessedTabName != null);                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1241      }                                                                                                             </span>
<span  style="">1242                                                                                                                    </span>
<span class="-4736520597342818391" onmouseenter="enter('-4736520597342818391');" onmouseout="out('-4736520597342818391');" style="">1243      protected boolean tabExists(EntityForm ef, String tabKey) {                                                   </span>
<span class="-9204309431556138424" onmouseenter="enter('-9204309431556138424');" onmouseout="out('-9204309431556138424');" style="">1244          return (ef.findTab(tabKey) != null);                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1245      }                                                                                                             </span>
<span  style="">1246                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1247      @Override                                                                                                     </span>
<span class="1718091831588260637" onmouseenter="enter('1718091831588260637');" onmouseout="out('1718091831588260637');" style="">1248      public String extractDefaultValueFromFieldData(String fieldType, BasicFieldMetadata fmd) {                    </span>
<span class="-269468944390639664" onmouseenter="enter('-269468944390639664');" onmouseout="out('-269468944390639664');" style="">1249          String defaultValue = fmd.getDefaultValue();                                                              </span>
<span class="8489757536552213717" onmouseenter="enter('8489757536552213717');" onmouseout="out('8489757536552213717');" style="">1250          if (fieldType.equals(SupportedFieldType.RULE_SIMPLE.toString())                                           </span>
<span class="-6155398851072788654" onmouseenter="enter('-6155398851072788654');" onmouseout="out('-6155398851072788654');" style="">1251                  || fieldType.equals(SupportedFieldType.RULE_SIMPLE_TIME.toString())                               </span>
<span class="-7731003048108517996" onmouseenter="enter('-7731003048108517996');" onmouseout="out('-7731003048108517996');" style="">1252                  || fieldType.equals(SupportedFieldType.RULE_WITH_QUANTITY.toString())) {                          </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1253              return null;                                                                                          </span>
<span class="1147822807152761026" onmouseenter="enter('1147822807152761026');" onmouseout="out('1147822807152761026');" style="">1254          } else if (fieldType.equals(SupportedFieldType.INTEGER.toString())) {                                     </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1255              try {                                                                                                 </span>
<span class="2272843703065247861" onmouseenter="enter('2272843703065247861');" onmouseout="out('2272843703065247861');" style="">1256                  Integer.parseInt(defaultValue);                                                                   </span>
<span class="-1817228964429458922" onmouseenter="enter('-1817228964429458922');" onmouseout="out('-1817228964429458922');" style="">1257              } catch (NumberFormatException  e) {                                                                  </span>
<span class="8614817519589782911" onmouseenter="enter('8614817519589782911');" onmouseout="out('8614817519589782911');" style="">1258                  String msg = buildMsgForDefValException(SupportedFieldType.INTEGER.toString(), fmd, defaultValue);</span>
<span class="8745206262250964374" onmouseenter="enter('8745206262250964374');" onmouseout="out('8745206262250964374');" style="">1259                  LOG.debug(msg);                                                                                   </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1260                  return null;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1261              }                                                                                                     </span>
<span class="5641784789080954731" onmouseenter="enter('5641784789080954731');" onmouseout="out('5641784789080954731');" style="">1262          } else if (fieldType.equals(SupportedFieldType.DECIMAL.toString())                                        </span>
<span class="-1839121721540903009" onmouseenter="enter('-1839121721540903009');" onmouseout="out('-1839121721540903009');" style="">1263                  || fieldType.equals(SupportedFieldType.MONEY.toString())) {                                       </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1264              try {                                                                                                 </span>
<span class="6039577623543160332" onmouseenter="enter('6039577623543160332');" onmouseout="out('6039577623543160332');" style="">1265                  BigDecimal val = new BigDecimal(defaultValue);                                                    </span>
<span class="-1817228964429458922" onmouseenter="enter('-1817228964429458922');" onmouseout="out('-1817228964429458922');" style="">1266              } catch (NumberFormatException  e) {                                                                  </span>
<span class="-1552449043883066886" onmouseenter="enter('-1552449043883066886');" onmouseout="out('-1552449043883066886');" style="">1267                  String msg = buildMsgForDefValException(fieldType.toString(), fmd, defaultValue);                 </span>
<span class="8745206262250964374" onmouseenter="enter('8745206262250964374');" onmouseout="out('8745206262250964374');" style="">1268                  LOG.debug(msg);                                                                                   </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1269                  return null;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1270              }                                                                                                     </span>
<span class="-6181979390419592035" onmouseenter="enter('-6181979390419592035');" onmouseout="out('-6181979390419592035');" style="">1271          } else if (fieldType.equals(SupportedFieldType.BOOLEAN.toString())) {                                     </span>
<span class="-8619074302025013401" onmouseenter="enter('-8619074302025013401');" onmouseout="out('-8619074302025013401');" style="">1272              if (!defaultValue.toLowerCase().equals(&quot;true&quot;) &amp;&amp; !defaultValue.toLowerCase().equals(&quot;false&quot;)         </span>
<span class="-3108075317025400269" onmouseenter="enter('-3108075317025400269');" onmouseout="out('-3108075317025400269');" style="">1273                      &amp;&amp; !defaultValue.toUpperCase().equals(&quot;Y&quot;) &amp;&amp; !defaultValue.toUpperCase().equals(&quot;N&quot;)) {      </span>
<span class="6946244061563138313" onmouseenter="enter('6946244061563138313');" onmouseout="out('6946244061563138313');" style="">1274                  String msg = buildMsgForDefValException(SupportedFieldType.BOOLEAN.toString(), fmd, defaultValue);</span>
<span class="8745206262250964374" onmouseenter="enter('8745206262250964374');" onmouseout="out('8745206262250964374');" style="">1275                  LOG.debug(msg);                                                                                   </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1276                  return null;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1277              }                                                                                                     </span>
<span class="-3789417077200952901" onmouseenter="enter('-3789417077200952901');" onmouseout="out('-3789417077200952901');" style="">1278          } else if (fieldType.equals(SupportedFieldType.DATE.toString())) {                                        </span>
<span class="4798322797585331848" onmouseenter="enter('4798322797585331848');" onmouseout="out('4798322797585331848');" style="">1279              DateFormat format = FormatUtil.getDateFormat();                                                       </span>
<span class="-4817829731735260045" onmouseenter="enter('-4817829731735260045');" onmouseout="out('-4817829731735260045');" style="">1280              if (defaultValue.toLowerCase().contains(&quot;today&quot;)) {                                                   </span>
<span class="-5510717227080119052" onmouseenter="enter('-5510717227080119052');" onmouseout="out('-5510717227080119052');" style="">1281                  defaultValue = format.format(new Date());                                                         </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1282              } else {                                                                                              </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1283                  try {                                                                                             </span>
<span class="8253580772209920524" onmouseenter="enter('8253580772209920524');" onmouseout="out('8253580772209920524');" style="">1284                      Date date = format.parse(defaultValue);                                                       </span>
<span class="-692739804773039587" onmouseenter="enter('-692739804773039587');" onmouseout="out('-692739804773039587');" style="">1285                      defaultValue = format.format(date);                                                           </span>
<span class="-8792048397909294459" onmouseenter="enter('-8792048397909294459');" onmouseout="out('-8792048397909294459');" style="">1286                  } catch (ParseException e) {                                                                      </span>
<span class="6717521370520655041" onmouseenter="enter('6717521370520655041');" onmouseout="out('6717521370520655041');" style=""><abbr title="1287                      String msg = buildMsgForDefValException(SupportedFieldType.DATE.toString(), fmd, defaultValue);">1287                      String msg = buildMsgForDefValException(SupportedFieldType.DATE.toString(), fmd, defaultValue)ðŸ”µ</abbr></span>
<span class="8745206262250964374" onmouseenter="enter('8745206262250964374');" onmouseout="out('8745206262250964374');" style="">1288                      LOG.debug(msg);                                                                               </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1289                      return null;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1290                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1291              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1292          }                                                                                                         </span>
<span class="8908764284674475175" onmouseenter="enter('8908764284674475175');" onmouseout="out('8908764284674475175');" style="">1293          return defaultValue;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1294      }                                                                                                             </span>
<span  style="">1295                                                                                                                    </span>
<span class="-1197861841111609975" onmouseenter="enter('-1197861841111609975');" onmouseout="out('-1197861841111609975');" style="">1296      protected String buildMsgForDefValException(String type, BasicFieldMetadata fmd, String defaultValue) {       </span>
<span class="5037735576431495054" onmouseenter="enter('5037735576431495054');" onmouseout="out('5037735576431495054');" style=""><abbr title="1297          return StringUtil.sanitize(fmd.getTargetClass()) + &quot; : &quot; + StringUtil.sanitize(fmd.getName()) + &quot; - Failed to parse &quot;">1297          return StringUtil.sanitize(fmd.getTargetClass()) + &quot; : &quot; + StringUtil.sanitize(fmd.getName()) + &quot; - FailedðŸ”µ</abbr></span>
<span class="-1280239945418423816" onmouseenter="enter('-1280239945418423816');" onmouseout="out('-1280239945418423816');" style="">1298                  + StringUtil.sanitize(type) + &quot; from DefaultValue [ &quot; + StringUtil.sanitize(defaultValue) + &quot; ]&quot;; </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1299      }                                                                                                             </span>
<span  style="">1300                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1301      @Override                                                                                                     </span>
<span class="-3338021322965865498" onmouseenter="enter('-3338021322965865498');" onmouseout="out('-3338021322965865498');" style="">1302      public void removeNonApplicableFields(ClassMetadata cmd, EntityForm entityForm, String entityType) {          </span>
<span class="3681854507729164346" onmouseenter="enter('3681854507729164346');" onmouseout="out('3681854507729164346');" style="">1303          for (Property p : cmd.getProperties()) {                                                                  </span>
<span class="2404027636674988266" onmouseenter="enter('2404027636674988266');" onmouseout="out('2404027636674988266');" style="">1304              if (!ArrayUtils.contains(p.getMetadata().getAvailableToTypes(), entityType)) {                        </span>
<span class="3958420768854658911" onmouseenter="enter('3958420768854658911');" onmouseout="out('3958420768854658911');" style="">1305                  entityForm.removeField(p.getName());                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1306              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1307          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1308      }                                                                                                             </span>
<span  style="">1309                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1310      @Override                                                                                                     </span>
<span class="-2894789102162308959" onmouseenter="enter('-2894789102162308959');" onmouseout="out('-2894789102162308959');" style="">1311      public EntityForm createEntityForm(ClassMetadata cmd, List&lt;SectionCrumb&gt; sectionCrumbs)                       </span>
<span class="1998458335829271558" onmouseenter="enter('1998458335829271558');" onmouseout="out('1998458335829271558');" style="">1312              throws ServiceException {                                                                             </span>
<span class="-438894394526699599" onmouseenter="enter('-438894394526699599');" onmouseout="out('-438894394526699599');" style="">1313          EntityForm ef = createStandardEntityForm();                                                               </span>
<span class="1972535118391022312" onmouseenter="enter('1972535118391022312');" onmouseout="out('1972535118391022312');" style="">1314          populateEntityForm(cmd, ef, sectionCrumbs);                                                               </span>
<span class="3260120157565581788" onmouseenter="enter('3260120157565581788');" onmouseout="out('3260120157565581788');" style="">1315          return ef;                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1316      }                                                                                                             </span>
<span  style="">1317                                                                                                                    </span>
<span class="1553424846104610474" onmouseenter="enter('1553424846104610474');" onmouseout="out('1553424846104610474');" style="">1318      protected String extractSectionIdentifierFromCrumb(List&lt;SectionCrumb&gt; sectionCrumbs) {                        </span>
<span class="4444452196378800952" onmouseenter="enter('4444452196378800952');" onmouseout="out('4444452196378800952');" style="">1319          if (sectionCrumbs != null &amp;&amp; sectionCrumbs.size() &gt; 0) {                                                  </span>
<span class="-4491351221393184649" onmouseenter="enter('-4491351221393184649');" onmouseout="out('-4491351221393184649');" style="">1320              return sectionCrumbs.get(0).getSectionIdentifier();                                                   </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1321          } else {                                                                                                  </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1322              return null;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1323          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1324      }                                                                                                             </span>
<span  style="">1325                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1326      @Override                                                                                                     </span>
<span class="-4968680944420537869" onmouseenter="enter('-4968680944420537869');" onmouseout="out('-4968680944420537869');" style="">1327      public void populateEntityForm(ClassMetadata cmd, EntityForm ef, List&lt;SectionCrumb&gt; sectionCrumbs)            </span>
<span class="1998458335829271558" onmouseenter="enter('1998458335829271558');" onmouseout="out('1998458335829271558');" style="">1328              throws ServiceException {                                                                             </span>
<span class="-4942912710752555081" onmouseenter="enter('-4942912710752555081');" onmouseout="out('-4942912710752555081');" style="">1329          ef.setCeilingEntityClassname(cmd.getCeilingType());                                                       </span>
<span  style="">1330                                                                                                                    </span>
<span class="6809887928661746160" onmouseenter="enter('6809887928661746160');" onmouseout="out('6809887928661746160');" style="">1331          String sectionIdentifier = extractSectionIdentifierFromCrumb(sectionCrumbs);                              </span>
<span  style="">1332                                                                                                                    </span>
<span class="-3855604053801420635" onmouseenter="enter('-3855604053801420635');" onmouseout="out('-3855604053801420635');" style="">1333          AdminSection section = navigationService.findAdminSectionByClassAndSectionId(cmd.getCeilingType(),        </span>
<span class="6889816604380354873" onmouseenter="enter('6889816604380354873');" onmouseout="out('6889816604380354873');" style="">1334                  sectionIdentifier);                                                                               </span>
<span class="2297837107111400660" onmouseenter="enter('2297837107111400660');" onmouseout="out('2297837107111400660');" style="">1335          if (section != null) {                                                                                    </span>
<span class="4296466575148476303" onmouseenter="enter('4296466575148476303');" onmouseout="out('4296466575148476303');" style="">1336              ef.setSectionKey(section.getUrl());                                                                   </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1337          } else {                                                                                                  </span>
<span class="-1586535842116388806" onmouseenter="enter('-1586535842116388806');" onmouseout="out('-1586535842116388806');" style="">1338              ef.setSectionKey(cmd.getCeilingType());                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1339          }                                                                                                         </span>
<span class="-5184985761895407688" onmouseenter="enter('-5184985761895407688');" onmouseout="out('-5184985761895407688');" style="">1340          ef.setSectionCrumbsImpl(sectionCrumbs);                                                                   </span>
<span  style="">1341                                                                                                                    </span>
<span class="-8713614433600438253" onmouseenter="enter('-8713614433600438253');" onmouseout="out('-8713614433600438253');" style="">1342          setEntityFormTabsAndGroups(ef, cmd.getTabAndGroupMetadata());                                             </span>
<span  style="">1343                                                                                                                    </span>
<span class="3369160299270687085" onmouseenter="enter('3369160299270687085');" onmouseout="out('3369160299270687085');" style="">1344          setEntityFormFields(cmd, ef, Arrays.asList(cmd.getProperties()));                                         </span>
<span  style="">1345                                                                                                                    </span>
<span class="8675843354365413624" onmouseenter="enter('8675843354365413624');" onmouseout="out('8675843354365413624');" style="">1346          populateDropdownToOneFields(ef, cmd);                                                                     </span>
<span  style="">1347                                                                                                                    </span>
<span class="1014702433169640296" onmouseenter="enter('1014702433169640296');" onmouseout="out('1014702433169640296');" style="">1348          extensionManager.getProxy().modifyUnpopulatedEntityForm(ef);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1349      }                                                                                                             </span>
<span  style="">1350                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1351      /**                                                                                                           </span>
<span class="7551045119262463393" onmouseenter="enter('7551045119262463393');" onmouseout="out('7551045119262463393');" style="">1352       * This method is invoked when EntityForms are created and is meant to provide a hook to add                  </span>
<span class="-342244960216512570" onmouseenter="enter('-342244960216512570');" onmouseout="out('-342244960216512570');" style="">1353       * additional entity form actions for implementors of Broadleaf. Broadleaf modules will typically             </span>
<span class="-7928784631676494068" onmouseenter="enter('-7928784631676494068');" onmouseout="out('-7928784631676494068');" style="">1354       * leverage {@link FormBuilderExtensionHandler#addAdditionalFormActions(EntityForm)} method.                  </span>
<span class="8361682950840699982" onmouseenter="enter('8361682950840699982');" onmouseout="out('8361682950840699982');" style="">1355       * @param ef                                                                                                  </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1356       */                                                                                                           </span>
<span class="-8094119228358129217" onmouseenter="enter('-8094119228358129217');" onmouseout="out('-8094119228358129217');" style="">1357      protected void addAdditionalFormActions(EntityForm ef) {                                                      </span>
<span  style="">1358                                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1359      }                                                                                                             </span>
<span  style="">1360                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1361      @Override                                                                                                     </span>
<span class="1394778707631761813" onmouseenter="enter('1394778707631761813');" onmouseout="out('1394778707631761813');" style="">1362      public EntityForm createEntityForm(ClassMetadata cmd, Entity entity, List&lt;SectionCrumb&gt; sectionCrumbs)        </span>
<span class="1998458335829271558" onmouseenter="enter('1998458335829271558');" onmouseout="out('1998458335829271558');" style="">1363              throws ServiceException {                                                                             </span>
<span class="-438894394526699599" onmouseenter="enter('-438894394526699599');" onmouseout="out('-438894394526699599');" style="">1364          EntityForm ef = createStandardEntityForm();                                                               </span>
<span class="-4073847895348507412" onmouseenter="enter('-4073847895348507412');" onmouseout="out('-4073847895348507412');" style="">1365          populateEntityForm(cmd, entity, ef, sectionCrumbs);                                                       </span>
<span class="3191217127862437415" onmouseenter="enter('3191217127862437415');" onmouseout="out('3191217127862437415');" style="">1366          addAdditionalFormActions(ef);                                                                             </span>
<span class="8511655867693649187" onmouseenter="enter('8511655867693649187');" onmouseout="out('8511655867693649187');" style="">1367          extensionManager.getProxy().addAdditionalFormActions(ef);                                                 </span>
<span class="3260120157565581788" onmouseenter="enter('3260120157565581788');" onmouseout="out('3260120157565581788');" style="">1368          return ef;                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1369      }                                                                                                             </span>
<span  style="">1370                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1371      @Override                                                                                                     </span>
<span class="-6571706150833686716" onmouseenter="enter('-6571706150833686716');" onmouseout="out('-6571706150833686716');" style=""><abbr title="1372      public void populateEntityForm(ClassMetadata cmd, Entity entity, EntityForm ef, List&lt;SectionCrumb&gt; sectionCrumbs)">1372      public void populateEntityForm(ClassMetadata cmd, Entity entity, EntityForm ef, List&lt;SectionCrumb&gt; sectionCrumðŸ”µ</abbr></span>
<span class="1998458335829271558" onmouseenter="enter('1998458335829271558');" onmouseout="out('1998458335829271558');" style="">1373              throws ServiceException {                                                                             </span>
<span class="-7069998291250786390" onmouseenter="enter('-7069998291250786390');" onmouseout="out('-7069998291250786390');" style="">1374          // Get the empty form with appropriate fields                                                             </span>
<span class="1972535118391022312" onmouseenter="enter('1972535118391022312');" onmouseout="out('1972535118391022312');" style="">1375          populateEntityForm(cmd, ef, sectionCrumbs);                                                               </span>
<span  style="">1376                                                                                                                    </span>
<span class="-5459387306565336413" onmouseenter="enter('-5459387306565336413');" onmouseout="out('-5459387306565336413');" style="">1377          String idProperty = adminEntityService.getIdProperty(cmd);                                                </span>
<span class="1051557575021412686" onmouseenter="enter('1051557575021412686');" onmouseout="out('1051557575021412686');" style="">1378          ef.setId(entity.findProperty(idProperty).getValue());                                                     </span>
<span class="2566657873931456162" onmouseenter="enter('2566657873931456162');" onmouseout="out('2566657873931456162');" style="">1379          ef.setEntityType(entity.getType()[0]);                                                                    </span>
<span  style="">1380                                                                                                                    </span>
<span class="-5752959739321640962" onmouseenter="enter('-5752959739321640962');" onmouseout="out('-5752959739321640962');" style="">1381          populateEntityFormFieldValues(cmd, entity, ef);                                                           </span>
<span  style="">1382                                                                                                                    </span>
<span class="5257407325597611191" onmouseenter="enter('5257407325597611191');" onmouseout="out('5257407325597611191');" style="">1383          Property p = entity.findProperty(BasicPersistenceModule.MAIN_ENTITY_NAME_PROPERTY);                       </span>
<span class="-4724213940983805674" onmouseenter="enter('-4724213940983805674');" onmouseout="out('-4724213940983805674');" style="">1384          if (p != null) {                                                                                          </span>
<span class="8443013364869289595" onmouseenter="enter('8443013364869289595');" onmouseout="out('8443013364869289595');" style="">1385              ef.setMainEntityName(p.getValue());                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1386          }                                                                                                         </span>
<span  style="">1387                                                                                                                    </span>
<span class="8285751274454564858" onmouseenter="enter('8285751274454564858');" onmouseout="out('8285751274454564858');" style="">1388          extensionManager.getProxy().modifyPopulatedEntityForm(ef, entity);                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1389      }                                                                                                             </span>
<span  style="">1390                                                                                                                    </span>
<span class="2253933316337433516" onmouseenter="enter('2253933316337433516');" onmouseout="out('2253933316337433516');" style="">1391      protected void setVisibilityBasedOnShowIfFieldEquals(ClassMetadata cmd, Entity entity, EntityForm ef) {       </span>
<span class="3681854507729164346" onmouseenter="enter('3681854507729164346');" onmouseout="out('3681854507729164346');" style="">1392          for (Property p : cmd.getProperties()) {                                                                  </span>
<span class="5177519309013644806" onmouseenter="enter('5177519309013644806');" onmouseout="out('5177519309013644806');" style="">1393              FieldMetadata fmd = p.getMetadata();                                                                  </span>
<span  style="">1394                                                                                                                    </span>
<span class="-8245965221352030812" onmouseenter="enter('-8245965221352030812');" onmouseout="out('-8245965221352030812');" style="">1395              if (shouldHideField(fmd, entity)) {                                                                   </span>
<span class="722393245301383233" onmouseenter="enter('722393245301383233');" onmouseout="out('722393245301383233');" style="">1396                  if (fmd instanceof CollectionMetadata) {                                                          </span>
<span class="7188659998484598345" onmouseenter="enter('7188659998484598345');" onmouseout="out('7188659998484598345');" style="">1397                      ef.removeListGrid(p.getName());                                                               </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1398                  } else {                                                                                          </span>
<span class="6870393746446615822" onmouseenter="enter('6870393746446615822');" onmouseout="out('6870393746446615822');" style="">1399                      ef.removeField(p.getName());                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1400                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1401              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1402          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1403      }                                                                                                             </span>
<span  style="">1404                                                                                                                    </span>
<span class="-3330248760149008409" onmouseenter="enter('-3330248760149008409');" onmouseout="out('-3330248760149008409');" style="">1405      protected boolean shouldHideField(FieldMetadata fmd, Entity entity) {                                         </span>
<span class="-345780899678155518" onmouseenter="enter('-345780899678155518');" onmouseout="out('-345780899678155518');" style="">1406          if (fmd == null || fmd.getShowIfFieldEquals() == null) {                                                  </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1407              return false;                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1408          }                                                                                                         </span>
<span  style="">1409                                                                                                                    </span>
<span class="-8659631323845256695" onmouseenter="enter('-8659631323845256695');" onmouseout="out('-8659631323845256695');" style="">1410          for (String property : fmd.getShowIfFieldEquals().keySet()) {                                             </span>
<span class="3930945657137454760" onmouseenter="enter('3930945657137454760');" onmouseout="out('3930945657137454760');" style="">1411              List&lt;String&gt; values = fmd.getShowIfFieldEquals().get(property);                                       </span>
<span class="-2693573208742209473" onmouseenter="enter('-2693573208742209473');" onmouseout="out('-2693573208742209473');" style="">1412              Property entityProp = entity.findProperty(property);                                                  </span>
<span  style="">1413                                                                                                                    </span>
<span class="-167840816186910781" onmouseenter="enter('-167840816186910781');" onmouseout="out('-167840816186910781');" style="">1414              if (entityProp == null || values.contains(entityProp.getValue())) {                                   </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1415                  return false;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1416              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1417          }                                                                                                         </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">1418          return true;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1419      }                                                                                                             </span>
<span  style="">1420                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1421      @Override                                                                                                     </span>
<span class="7910083739222815843" onmouseenter="enter('7910083739222815843');" onmouseout="out('7910083739222815843');" style="">1422      public void populateEntityFormFieldValues(ClassMetadata cmd, Entity entity, EntityForm ef) {                  </span>
<span class="4641578827349754543" onmouseenter="enter('4641578827349754543');" onmouseout="out('4641578827349754543');" style="">1423          // Set the appropriate property values                                                                    </span>
<span class="3681854507729164346" onmouseenter="enter('3681854507729164346');" onmouseout="out('3681854507729164346');" style="">1424          for (Property p : cmd.getProperties()) {                                                                  </span>
<span class="-1029066852878262358" onmouseenter="enter('-1029066852878262358');" onmouseout="out('-1029066852878262358');" style="">1425              if (p.getMetadata() instanceof BasicFieldMetadata) {                                                  </span>
<span class="-6469477226116674237" onmouseenter="enter('-6469477226116674237');" onmouseout="out('-6469477226116674237');" style="">1426                  BasicFieldMetadata basicFM = (BasicFieldMetadata) p.getMetadata();                                </span>
<span  style="">1427                                                                                                                    </span>
<span class="7733316759648943983" onmouseenter="enter('7733316759648943983');" onmouseout="out('7733316759648943983');" style="">1428                  Property entityProp = entity.findProperty(p.getName());                                           </span>
<span  style="">1429                                                                                                                    </span>
<span class="4021222749559453503" onmouseenter="enter('4021222749559453503');" onmouseout="out('4021222749559453503');" style="">1430                  boolean explicitlyShown = VisibilityEnum.FORM_EXPLICITLY_SHOWN.equals(basicFM.getVisibility());   </span>
<span class="7366025904056557465" onmouseenter="enter('7366025904056557465');" onmouseout="out('7366025904056557465');" style="">1431                  //always show special map fields                                                                  </span>
<span class="-2401445545222685489" onmouseenter="enter('-2401445545222685489');" onmouseout="out('-2401445545222685489');" style="">1432                  if (p.getName().equals(&quot;key&quot;) || p.getName().equals(&quot;priorKey&quot;)) {                                </span>
<span class="7778793828648750297" onmouseenter="enter('7778793828648750297');" onmouseout="out('7778793828648750297');" style="">1433                      explicitlyShown = true;                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1434                  }                                                                                                 </span>
<span  style="">1435                                                                                                                    </span>
<span class="-6309572172727120265" onmouseenter="enter('-6309572172727120265');" onmouseout="out('-6309572172727120265');" style="">1436                  if (entityProp == null &amp;&amp; explicitlyShown) {                                                      </span>
<span class="8909260264488361187" onmouseenter="enter('8909260264488361187');" onmouseout="out('8909260264488361187');" style="">1437                      Field field = ef.findField(p.getName());                                                      </span>
<span class="-470699824173107204" onmouseenter="enter('-470699824173107204');" onmouseout="out('-470699824173107204');" style="">1438                      if (field != null) {                                                                          </span>
<span class="-412233450447024620" onmouseenter="enter('-412233450447024620');" onmouseout="out('-412233450447024620');" style="">1439                          field.setValue(null);                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1440                      }                                                                                             </span>
<span class="-3654453610792959969" onmouseenter="enter('-3654453610792959969');" onmouseout="out('-3654453610792959969');" style=""><abbr title="1441                  } else if (entityProp == null &amp;&amp; !SupportedFieldType.PASSWORD_CONFIRM.equals(basicFM.getExplicitFieldType())) {">1441                  } else if (entityProp == null &amp;&amp; !SupportedFieldType.PASSWORD_CONFIRM.equals(basicFM.getExplicitFiðŸ”µ</abbr></span>
<span class="6870393746446615822" onmouseenter="enter('6870393746446615822');" onmouseout="out('6870393746446615822');" style="">1442                      ef.removeField(p.getName());                                                                  </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1443                  } else {                                                                                          </span>
<span class="8909260264488361187" onmouseenter="enter('8909260264488361187');" onmouseout="out('8909260264488361187');" style="">1444                      Field field = ef.findField(p.getName());                                                      </span>
<span class="-470699824173107204" onmouseenter="enter('-470699824173107204');" onmouseout="out('-470699824173107204');" style="">1445                      if (field != null) {                                                                          </span>
<span class="-2366650903096921345" onmouseenter="enter('-2366650903096921345');" onmouseout="out('-2366650903096921345');" style="">1446                          if (entityProp != null) {                                                                 </span>
<span class="4638600769415474673" onmouseenter="enter('4638600769415474673');" onmouseout="out('4638600769415474673');" style=""><abbr title="1447                              //protect against null - can happen with password confirmation fields (i.e. admin user)">1447                              //protect against null - can happen with password confirmation fields (i.e. admin userðŸ”µ</abbr></span>
<span class="8379702483069295441" onmouseenter="enter('8379702483069295441');" onmouseout="out('8379702483069295441');" style="">1448                              field.setDirty(entityProp.getIsDirty());                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1449                          }                                                                                         </span>
<span class="-7071797664598394524" onmouseenter="enter('-7071797664598394524');" onmouseout="out('-7071797664598394524');" style="">1450                          if (basicFM.getFieldType()==SupportedFieldType.RULE_SIMPLE                                </span>
<span class="-6985772052695519723" onmouseenter="enter('-6985772052695519723');" onmouseout="out('-6985772052695519723');" style="">1451                                  || basicFM.getFieldType()==SupportedFieldType.RULE_SIMPLE_TIME                    </span>
<span class="8398044977893461025" onmouseenter="enter('8398044977893461025');" onmouseout="out('8398044977893461025');" style="">1452                                  || basicFM.getFieldType()==SupportedFieldType.RULE_WITH_QUANTITY) {               </span>
<span class="4021621821134603536" onmouseenter="enter('4021621821134603536');" onmouseout="out('4021621821134603536');" style="">1453                              RuleBuilderField rbf = (RuleBuilderField) field;                                      </span>
<span class="-7695608741173734167" onmouseenter="enter('-7695608741173734167');" onmouseout="out('-7695608741173734167');" style="">1454                              if (entity.getPMap().containsKey(rbf.getJsonFieldName())) {                           </span>
<span class="-6319430319708671435" onmouseenter="enter('-6319430319708671435');" onmouseout="out('-6319430319708671435');" style="">1455                                  String json = entity.getPMap().get(rbf.getJsonFieldName()).getValue();            </span>
<span class="-6775685118155466056" onmouseenter="enter('-6775685118155466056');" onmouseout="out('-6775685118155466056');" style="">1456                                  rbf.setJson(json);                                                                </span>
<span class="-5885429731931553725" onmouseenter="enter('-5885429731931553725');" onmouseout="out('-5885429731931553725');" style="">1457                                  DataWrapper dw = convertJsonToDataWrapper(json);                                  </span>
<span class="-3408161092817379645" onmouseenter="enter('-3408161092817379645');" onmouseout="out('-3408161092817379645');" style="">1458                                  if (dw != null) {                                                                 </span>
<span class="7188823867343032185" onmouseenter="enter('7188823867343032185');" onmouseout="out('7188823867343032185');" style="">1459                                      rbf.setDataWrapper(dw);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1460                                  }                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1461                              }                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1462                          }                                                                                         </span>
<span class="-4769937124220254644" onmouseenter="enter('-4769937124220254644');" onmouseout="out('-4769937124220254644');" style="">1463                          if (basicFM.getFieldType() == SupportedFieldType.MEDIA) {                                 </span>
<span class="627899284580660581" onmouseenter="enter('627899284580660581');" onmouseout="out('627899284580660581');" style="">1464                              field.setValue(entityProp.getValue());                                                </span>
<span class="-3405146348302376065" onmouseenter="enter('-3405146348302376065');" onmouseout="out('-3405146348302376065');" style="">1465                              field.setDisplayValue(entityProp.getDisplayValue());                                  </span>
<span class="7597965270557979966" onmouseenter="enter('7597965270557979966');" onmouseout="out('7597965270557979966');" style="">1466                              MediaField mf = (MediaField) field;                                                   </span>
<span class="-7494069843850344001" onmouseenter="enter('-7494069843850344001');" onmouseout="out('-7494069843850344001');" style=""><abbr title="1467                              Class&lt;MediaDto&gt; type = entityConfiguration.lookupEntityClass(MediaDto.class.getName(), MediaDto.class);">1467                              Class&lt;MediaDto&gt; type = entityConfiguration.lookupEntityClass(MediaDto.class.getName(),ðŸ”µ</abbr></span>
<span class="8674870911105205925" onmouseenter="enter('8674870911105205925');" onmouseout="out('8674870911105205925');" style=""><abbr title="1468                              mf.setMedia(mediaBuilderService.convertJsonToMedia(entityProp.getUnHtmlEncodedValue(), type));">1468                              mf.setMedia(mediaBuilderService.convertJsonToMedia(entityProp.getUnHtmlEncodedValue(),ðŸ”µ</abbr></span>
<span class="8860382562253463844" onmouseenter="enter('8860382562253463844');" onmouseout="out('8860382562253463844');" style="">1469                          } else if (!SupportedFieldType.PASSWORD_CONFIRM.equals(basicFM.getExplicitFieldType())) { </span>
<span class="627899284580660581" onmouseenter="enter('627899284580660581');" onmouseout="out('627899284580660581');" style="">1470                              field.setValue(entityProp.getValue());                                                </span>
<span class="-3405146348302376065" onmouseenter="enter('-3405146348302376065');" onmouseout="out('-3405146348302376065');" style="">1471                              field.setDisplayValue(entityProp.getDisplayValue());                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1472                          }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1473                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1474                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1475              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1476          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1477      }                                                                                                             </span>
<span  style="">1478                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1479      /**                                                                                                           </span>
<span class="-628877191560702928" onmouseenter="enter('-628877191560702928');" onmouseout="out('-628877191560702928');" style="">1480       * When using Thymeleaf, we need to convert the JSON string back to                                           </span>
<span class="1787417412343624491" onmouseenter="enter('1787417412343624491');" onmouseout="out('1787417412343624491');" style="">1481       * a DataWrapper object because Thymeleaf escapes JSON strings.                                               </span>
<span class="5903545593073761450" onmouseenter="enter('5903545593073761450');" onmouseout="out('5903545593073761450');" style="">1482       * Thymeleaf uses it&#x27;s own object de-serializer                                                               </span>
<span class="5324834623619770328" onmouseenter="enter('5324834623619770328');" onmouseout="out('5324834623619770328');" style="">1483       * see: https://github.com/thymeleaf/thymeleaf/issues/84                                                      </span>
<span class="363134610140381216" onmouseenter="enter('363134610140381216');" onmouseout="out('363134610140381216');" style="">1484       * see: http://forum.thymeleaf.org/Spring-Javascript-and-escaped-JSON-td4024739.html                          </span>
<span class="-1207310572973527556" onmouseenter="enter('-1207310572973527556');" onmouseout="out('-1207310572973527556');" style="">1485       * @param json                                                                                                </span>
<span class="-6577536486120138335" onmouseenter="enter('-6577536486120138335');" onmouseout="out('-6577536486120138335');" style="">1486       * @return DataWrapper                                                                                        </span>
<span class="-2042953791166134795" onmouseenter="enter('-2042953791166134795');" onmouseout="out('-2042953791166134795');" style="">1487       * @throws IOException                                                                                        </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1488       */                                                                                                           </span>
<span class="2430913214947894128" onmouseenter="enter('2430913214947894128');" onmouseout="out('2430913214947894128');" style="">1489      protected DataWrapper convertJsonToDataWrapper(String json) {                                                 </span>
<span class="-1540063925365497538" onmouseenter="enter('-1540063925365497538');" onmouseout="out('-1540063925365497538');" style="">1490          ObjectMapper mapper = new ObjectMapper();                                                                 </span>
<span class="2504782713133203850" onmouseenter="enter('2504782713133203850');" onmouseout="out('2504782713133203850');" style="">1491          DataDTODeserializer dtoDeserializer = new DataDTODeserializer();                                          </span>
<span class="-7069332746071020099" onmouseenter="enter('-7069332746071020099');" onmouseout="out('-7069332746071020099');" style=""><abbr title="1492          SimpleModule module = new SimpleModule(&quot;DataDTODeserializerModule&quot;, new Version(1, 0, 0, null, null, null));">1492          SimpleModule module = new SimpleModule(&quot;DataDTODeserializerModule&quot;, new Version(1, 0, 0, null, null, null)ðŸ”µ</abbr></span>
<span class="-4567775918027288963" onmouseenter="enter('-4567775918027288963');" onmouseout="out('-4567775918027288963');" style="">1493          module.addDeserializer(DataDTO.class, dtoDeserializer);                                                   </span>
<span class="1730387754846602273" onmouseenter="enter('1730387754846602273');" onmouseout="out('1730387754846602273');" style="">1494          mapper.registerModule(module);                                                                            </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1495          try {                                                                                                     </span>
<span class="-1255991149529842499" onmouseenter="enter('-1255991149529842499');" onmouseout="out('-1255991149529842499');" style="">1496              return mapper.readValue(json, DataWrapper.class);                                                     </span>
<span class="7080241092423381085" onmouseenter="enter('7080241092423381085');" onmouseout="out('7080241092423381085');" style="">1497          } catch (IOException e) {                                                                                 </span>
<span class="5897285764286536997" onmouseenter="enter('5897285764286536997');" onmouseout="out('5897285764286536997');" style="">1498              throw new RuntimeException(e);                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1499          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1500      }                                                                                                             </span>
<span  style="">1501                                                                                                                    </span>
<span class="-186207403366028020" onmouseenter="enter('-186207403366028020');" onmouseout="out('-186207403366028020');" style="">1502      protected void populateDropdownToOneFields(EntityForm ef, ClassMetadata cmd)                                  </span>
<span class="1998458335829271558" onmouseenter="enter('1998458335829271558');" onmouseout="out('1998458335829271558');" style="">1503              throws ServiceException {                                                                             </span>
<span class="3681854507729164346" onmouseenter="enter('3681854507729164346');" onmouseout="out('3681854507729164346');" style="">1504          for (Property p : cmd.getProperties()) {                                                                  </span>
<span class="-1029066852878262358" onmouseenter="enter('-1029066852878262358');" onmouseout="out('-1029066852878262358');" style="">1505              if (p.getMetadata() instanceof BasicFieldMetadata) {                                                  </span>
<span class="-5664285287189453326" onmouseenter="enter('-5664285287189453326');" onmouseout="out('-5664285287189453326');" style="">1506                  BasicFieldMetadata fmd = (BasicFieldMetadata) p.getMetadata();                                    </span>
<span class="-5975886890404137502" onmouseenter="enter('-5975886890404137502');" onmouseout="out('-5975886890404137502');" style="">1507                  if (LookupType.DROPDOWN.equals(fmd.getLookupType())                                               </span>
<span class="3923559904233294352" onmouseenter="enter('3923559904233294352');" onmouseout="out('3923559904233294352');" style="">1508                          &amp;&amp; !ArrayUtils.contains(getFormHiddenVisibilities(), fmd.getVisibility())) {              </span>
<span class="7405748751598380621" onmouseenter="enter('7405748751598380621');" onmouseout="out('7405748751598380621');" style="">1509                      // Get the records                                                                            </span>
<span class="-8258870037901756296" onmouseenter="enter('-8258870037901756296');" onmouseout="out('-8258870037901756296');" style="">1510                      PersistencePackageRequest toOnePpr = PersistencePackageRequest.standard()                     </span>
<span class="-1097107171578019007" onmouseenter="enter('-1097107171578019007');" onmouseout="out('-1097107171578019007');" style="">1511                              .withCeilingEntityClassname(fmd.getForeignKeyClass());                                </span>
<span class="6917610271852750158" onmouseenter="enter('6917610271852750158');" onmouseout="out('6917610271852750158');" style="">1512                      Entity[] rows = adminEntityService.getRecords(toOnePpr).getDynamicResultSet().getRecords();   </span>
<span  style="">1513                                                                                                                    </span>
<span class="-7705887927793372443" onmouseenter="enter('-7705887927793372443');" onmouseout="out('-7705887927793372443');" style="">1514                      // Determine the id field                                                                     </span>
<span class="6991332735797511760" onmouseenter="enter('6991332735797511760');" onmouseout="out('6991332735797511760');" style="">1515                      String idProp = null;                                                                         </span>
<span class="-6188886223790300160" onmouseenter="enter('-6188886223790300160');" onmouseout="out('-6188886223790300160');" style=""><abbr title="1516                      ClassMetadata foreignClassMd = adminEntityService.getClassMetadata(toOnePpr).getDynamicResultSet().getClassMetaData();">1516                      ClassMetadata foreignClassMd = adminEntityService.getClassMetadata(toOnePpr).getDynamicResultSðŸ”µ</abbr></span>
<span class="-7740302606560587079" onmouseenter="enter('-7740302606560587079');" onmouseout="out('-7740302606560587079');" style="">1517                      for (Property foreignP : foreignClassMd.getProperties()) {                                    </span>
<span class="-8528985220609178259" onmouseenter="enter('-8528985220609178259');" onmouseout="out('-8528985220609178259');" style="">1518                          if (foreignP.getMetadata() instanceof BasicFieldMetadata) {                               </span>
<span class="-8124244658776994002" onmouseenter="enter('-8124244658776994002');" onmouseout="out('-8124244658776994002');" style="">1519                              BasicFieldMetadata foreignFmd = (BasicFieldMetadata) foreignP.getMetadata();          </span>
<span class="-6615171596083676427" onmouseenter="enter('-6615171596083676427');" onmouseout="out('-6615171596083676427');" style="">1520                              if (SupportedFieldType.ID.equals(foreignFmd.getFieldType())) {                        </span>
<span class="8626137451888256629" onmouseenter="enter('8626137451888256629');" onmouseout="out('8626137451888256629');" style="">1521                                  idProp = foreignP.getName();                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1522                              }                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1523                          }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1524                      }                                                                                             </span>
<span  style="">1525                                                                                                                    </span>
<span class="-5011974389032314776" onmouseenter="enter('-5011974389032314776');" onmouseout="out('-5011974389032314776');" style="">1526                      if (idProp == null) {                                                                         </span>
<span class="9029833375734478123" onmouseenter="enter('9029833375734478123');" onmouseout="out('9029833375734478123');" style=""><abbr title="1527                          throw new RuntimeException(&quot;Could not determine ID property for &quot; + fmd.getForeignKeyClass());">1527                          throw new RuntimeException(&quot;Could not determine ID property for &quot; + fmd.getForeignKeyClassðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1528                      }                                                                                             </span>
<span  style="">1529                                                                                                                    </span>
<span class="-606725638262986950" onmouseenter="enter('-606725638262986950');" onmouseout="out('-606725638262986950');" style="">1530                      // Determine the display field                                                                </span>
<span class="-6330673322776160197" onmouseenter="enter('-6330673322776160197');" onmouseout="out('-6330673322776160197');" style="">1531                      String displayProp = fmd.getLookupDisplayProperty();                                          </span>
<span  style="">1532                                                                                                                    </span>
<span class="-282229918032301960" onmouseenter="enter('-282229918032301960');" onmouseout="out('-282229918032301960');" style="">1533                      // Build the options map                                                                      </span>
<span class="-4401347179302263251" onmouseenter="enter('-4401347179302263251');" onmouseout="out('-4401347179302263251');" style="">1534                      Map&lt;String, String&gt; options = new HashMap&lt;&gt;();                                                </span>
<span class="-2921615155367105394" onmouseenter="enter('-2921615155367105394');" onmouseout="out('-2921615155367105394');" style="">1535                      for (Entity row : rows) {                                                                     </span>
<span class="-9011123629733297811" onmouseenter="enter('-9011123629733297811');" onmouseout="out('-9011123629733297811');" style="">1536                          Property prop = row.findProperty(displayProp);                                            </span>
<span class="-3136494705922445009" onmouseenter="enter('-3136494705922445009');" onmouseout="out('-3136494705922445009');" style="">1537                          if (prop == null) {                                                                       </span>
<span class="-2859923640341758966" onmouseenter="enter('-2859923640341758966');" onmouseout="out('-2859923640341758966');" style=""><abbr title="1538                              LOG.warn(&quot;Could not find displayProp [&quot; + StringUtil.sanitize(displayProp) + &quot;] on entity [&quot; +">1538                              LOG.warn(&quot;Could not find displayProp [&quot; + StringUtil.sanitize(displayProp) + &quot;] on entðŸ”µ</abbr></span>
<span class="-2254314617729442046" onmouseenter="enter('-2254314617729442046');" onmouseout="out('-2254314617729442046');" style="">1539                                      ef.getCeilingEntityClassname() + &quot;]&quot;);                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1540                          } else {                                                                                  </span>
<span class="-8909758360620292667" onmouseenter="enter('-8909758360620292667');" onmouseout="out('-8909758360620292667');" style="">1541                              String displayValue = prop.getDisplayValue();                                         </span>
<span class="987960060831169722" onmouseenter="enter('987960060831169722');" onmouseout="out('987960060831169722');" style="">1542                              if (StringUtils.isBlank(displayValue)) {                                              </span>
<span class="23109960353036152" onmouseenter="enter('23109960353036152');" onmouseout="out('23109960353036152');" style="">1543                                  displayValue = prop.getValue();                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1544                              }                                                                                     </span>
<span class="-4077682651397635801" onmouseenter="enter('-4077682651397635801');" onmouseout="out('-4077682651397635801');" style="">1545                              options.put(row.findProperty(idProp).getValue(), displayValue);                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1546                          }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1547                      }                                                                                             </span>
<span  style="">1548                                                                                                                    </span>
<span class="4340190494430873223" onmouseenter="enter('4340190494430873223');" onmouseout="out('4340190494430873223');" style="">1549                      // Set the options on the entity field                                                        </span>
<span class="2851644107781283227" onmouseenter="enter('2851644107781283227');" onmouseout="out('2851644107781283227');" style="">1550                      ComboField cf = (ComboField) ef.findField(p.getName());                                       </span>
<span class="-5242484842909969229" onmouseenter="enter('-5242484842909969229');" onmouseout="out('-5242484842909969229');" style="">1551                      cf.setOptions(options);                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1552                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1553              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1554          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1555      }                                                                                                             </span>
<span  style="">1556                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1557      @Override                                                                                                     </span>
<span class="763969629629221745" onmouseenter="enter('763969629629221745');" onmouseout="out('763969629629221745');" style=""><abbr title="1558      public EntityForm createEntityForm(ClassMetadata cmd, Entity entity, Map&lt;String, DynamicResultSet&gt; collectionRecords, List&lt;SectionCrumb&gt; sectionCrumbs)">1558      public EntityForm createEntityForm(ClassMetadata cmd, Entity entity, Map&lt;String, DynamicResultSet&gt; collectionRðŸ”µ</abbr></span>
<span class="1998458335829271558" onmouseenter="enter('1998458335829271558');" onmouseout="out('1998458335829271558');" style="">1559              throws ServiceException {                                                                             </span>
<span class="-438894394526699599" onmouseenter="enter('-438894394526699599');" onmouseout="out('-438894394526699599');" style="">1560          EntityForm ef = createStandardEntityForm();                                                               </span>
<span class="-6955297876613536298" onmouseenter="enter('-6955297876613536298');" onmouseout="out('-6955297876613536298');" style="">1561          populateEntityForm(cmd, entity, collectionRecords, ef, sectionCrumbs);                                    </span>
<span class="3191217127862437415" onmouseenter="enter('3191217127862437415');" onmouseout="out('3191217127862437415');" style="">1562          addAdditionalFormActions(ef);                                                                             </span>
<span class="8511655867693649187" onmouseenter="enter('8511655867693649187');" onmouseout="out('8511655867693649187');" style="">1563          extensionManager.getProxy().addAdditionalFormActions(ef);                                                 </span>
<span class="3260120157565581788" onmouseenter="enter('3260120157565581788');" onmouseout="out('3260120157565581788');" style="">1564          return ef;                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1565      }                                                                                                             </span>
<span  style="">1566                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1567      @Override                                                                                                     </span>
<span class="8407616833525381833" onmouseenter="enter('8407616833525381833');" onmouseout="out('8407616833525381833');" style=""><abbr title="1568      public void populateEntityForm(ClassMetadata cmd, Entity entity, Map&lt;String, DynamicResultSet&gt; collectionRecords, EntityForm ef, List&lt;SectionCrumb&gt; sectionCrumbs)">1568      public void populateEntityForm(ClassMetadata cmd, Entity entity, Map&lt;String, DynamicResultSet&gt; collectionRecorðŸ”µ</abbr></span>
<span class="1998458335829271558" onmouseenter="enter('1998458335829271558');" onmouseout="out('1998458335829271558');" style="">1569              throws ServiceException {                                                                             </span>
<span class="-7842928199694637195" onmouseenter="enter('-7842928199694637195');" onmouseout="out('-7842928199694637195');" style="">1570          // Get the form with values for this entity                                                               </span>
<span class="-4073847895348507412" onmouseenter="enter('-4073847895348507412');" onmouseout="out('-4073847895348507412');" style="">1571          populateEntityForm(cmd, entity, ef, sectionCrumbs);                                                       </span>
<span  style="">1572                                                                                                                    </span>
<span class="-5693049027716773876" onmouseenter="enter('-5693049027716773876');" onmouseout="out('-5693049027716773876');" style="">1573          // Attach the sub-collection list grids and specialty UI support                                          </span>
<span class="3681854507729164346" onmouseenter="enter('3681854507729164346');" onmouseout="out('3681854507729164346');" style="">1574          for (Property p : cmd.getProperties()) {                                                                  </span>
<span class="-1029066852878262358" onmouseenter="enter('-1029066852878262358');" onmouseout="out('-1029066852878262358');" style="">1575              if (p.getMetadata() instanceof BasicFieldMetadata) {                                                  </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">1576                  continue;                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1577              }                                                                                                     </span>
<span  style="">1578                                                                                                                    </span>
<span class="7939644157431336741" onmouseenter="enter('7939644157431336741');" onmouseout="out('7939644157431336741');" style="">1579              if (!ArrayUtils.contains(p.getMetadata().getAvailableToTypes(), entity.getType()[0])) {               </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">1580                  continue;                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1581              }                                                                                                     </span>
<span  style="">1582                                                                                                                    </span>
<span class="5057378952086585538" onmouseenter="enter('5057378952086585538');" onmouseout="out('5057378952086585538');" style="">1583              if (collectionRecords != null &amp;&amp; !collectionRecords.isEmpty()) {                                      </span>
<span class="-2000540039355299527" onmouseenter="enter('-2000540039355299527');" onmouseout="out('-2000540039355299527');" style="">1584                  DynamicResultSet subCollectionEntities = collectionRecords.get(p.getName());                      </span>
<span class="732471662007756244" onmouseenter="enter('732471662007756244');" onmouseout="out('732471662007756244');" style="">1585                  String containingEntityId = entity.getPMap().get(ef.getIdProperty()).getValue();                  </span>
<span class="-2703128427729187311" onmouseenter="enter('-2703128427729187311');" onmouseout="out('-2703128427729187311');" style=""><abbr title="1586                  ListGrid listGrid = buildCollectionListGrid(containingEntityId, subCollectionEntities, p, ef.getSectionKey(), sectionCrumbs);">1586                  ListGrid listGrid = buildCollectionListGrid(containingEntityId, subCollectionEntities, p, ef.getSeðŸ”µ</abbr></span>
<span  style="">1587                                                                                                                    </span>
<span class="-4703142262249660615" onmouseenter="enter('-4703142262249660615');" onmouseout="out('-4703142262249660615');" style="">1588                  CollectionMetadata md = ((CollectionMetadata) p.getMetadata());                                   </span>
<span class="-1532720970191757712" onmouseenter="enter('-1532720970191757712');" onmouseout="out('-1532720970191757712');" style="">1589                  if (md instanceof BasicCollectionMetadata) {                                                      </span>
<span class="-1665410210923963053" onmouseenter="enter('-1665410210923963053');" onmouseout="out('-1665410210923963053');" style="">1590                      PersistencePackageRequest ppr = PersistencePackageRequest.fromMetadata(md, sectionCrumbs);    </span>
<span class="-9036890390079986870" onmouseenter="enter('-9036890390079986870');" onmouseout="out('-9036890390079986870');" style=""><abbr title="1591                      ClassMetadata collectionCmd = adminEntityService.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();">1591                      ClassMetadata collectionCmd = adminEntityService.getClassMetadata(ppr).getDynamicResultSet().gðŸ”µ</abbr></span>
<span class="7118158235764717040" onmouseenter="enter('7118158235764717040');" onmouseout="out('7118158235764717040');" style="">1592                      if (collectionCmd.getPolymorphicEntities().getChildren().length != 0) {                       </span>
<span class="-2529377774460288369" onmouseenter="enter('-2529377774460288369');" onmouseout="out('-2529377774460288369');" style=""><abbr title="1593                          List&lt;ClassTree&gt; entityTypes = collectionCmd.getPolymorphicEntities().getCollapsedClassTrees();">1593                          List&lt;ClassTree&gt; entityTypes = collectionCmd.getPolymorphicEntities().getCollapsedClassTreeðŸ”µ</abbr></span>
<span class="5700663076602659421" onmouseenter="enter('5700663076602659421');" onmouseout="out('5700663076602659421');" style="">1594                          ListGridActionGroup actionGroup = new ListGridActionGroup().withName(&quot;Add&quot;);              </span>
<span class="-8628780103469525246" onmouseenter="enter('-8628780103469525246');" onmouseout="out('-8628780103469525246');" style="">1595                          for (ClassTree entityType : entityTypes) {                                                </span>
<span class="-6085370745551409442" onmouseenter="enter('-6085370745551409442');" onmouseout="out('-6085370745551409442');" style="">1596                              ListGridAction ADD = new ListGridAction(ListGridAction.ADD)                           </span>
<span class="-8123842595880337680" onmouseenter="enter('-8123842595880337680');" onmouseout="out('-8123842595880337680');" style="">1597                                      .withButtonClass(AddMethodType.PERSIST_EMPTY==                                </span>
<span class="2458863346051852504" onmouseenter="enter('2458863346051852504');" onmouseout="out('2458863346051852504');" style=""><abbr title="1598                                              ((BasicCollectionMetadata) md).getAddMethodType()?&quot;sub-list-grid-add-empty&quot;:&quot;sub-list-grid-add&quot;)">1598                                              ((BasicCollectionMetadata) md).getAddMethodType()?&quot;sub-list-grid-add-eðŸ”µ</abbr></span>
<span class="625982968125452177" onmouseenter="enter('625982968125452177');" onmouseout="out('625982968125452177');" style="">1599                                      .withActionTargetEntity(entityType.getFullyQualifiedClassname())              </span>
<span class="1979584669038484989" onmouseenter="enter('1979584669038484989');" onmouseout="out('1979584669038484989');" style="">1600                                      .withUrlPostfix(&quot;/add&quot;)                                                       </span>
<span class="-2605498948604397141" onmouseenter="enter('-2605498948604397141');" onmouseout="out('-2605498948604397141');" style="">1601                                      .withIconClass(&quot;fa fa-plus&quot;)                                                  </span>
<span class="1382163113890128554" onmouseenter="enter('1382163113890128554');" onmouseout="out('1382163113890128554');" style="">1602                                      .withDisplayText(BLCMessageUtils.getMessage(entityType.getFriendlyName()));   </span>
<span class="-362768101277236570" onmouseenter="enter('-362768101277236570');" onmouseout="out('-362768101277236570');" style="">1603                              actionGroup.getListGridActions().add(0, ADD);                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1604                          }                                                                                         </span>
<span class="4272855771145592976" onmouseenter="enter('4272855771145592976');" onmouseout="out('4272855771145592976');" style="">1605                          listGrid.addToolbarActionGroup(actionGroup);                                              </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1606                      } else {                                                                                      </span>
<span class="-686829543212379321" onmouseenter="enter('-686829543212379321');" onmouseout="out('-686829543212379321');" style="">1607                          listGrid.getToolbarActions().add(0, AddMethodType.PERSIST_EMPTY==                         </span>
<span class="452604423250167593" onmouseenter="enter('452604423250167593');" onmouseout="out('452604423250167593');" style=""><abbr title="1608                                  ((BasicCollectionMetadata) md).getAddMethodType()?DefaultListGridActions.ADD_EMPTY:DefaultListGridActions.ADD);">1608                                  ((BasicCollectionMetadata) md).getAddMethodType()?DefaultListGridActions.ADD_EMPTYðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1609                      }                                                                                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1610                  } else {                                                                                          </span>
<span class="-8192307858907059023" onmouseenter="enter('-8192307858907059023');" onmouseout="out('-8192307858907059023');" style="">1611                      listGrid.getToolbarActions().add(0, DefaultListGridActions.ADD);                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1612                  }                                                                                                 </span>
<span  style="">1613                                                                                                                    </span>
<span class="1698654555130612252" onmouseenter="enter('1698654555130612252');" onmouseout="out('1698654555130612252');" style="">1614                  if (subCollectionEntities.getUnselectedTabMetadata().get(md.getTab())!=null) {                    </span>
<span class="-6246999191581452259" onmouseenter="enter('-6246999191581452259');" onmouseout="out('-6246999191581452259');" style="">1615                      ef.addListGrid(cmd, listGrid, md.getTab(), md.getTabOrder(), md.getGroup(), true);            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1616                  } else {                                                                                          </span>
<span class="-3682322762406032422" onmouseenter="enter('-3682322762406032422');" onmouseout="out('-3682322762406032422');" style="">1617                      ef.addListGrid(cmd, listGrid, md.getTab(), md.getTabOrder(), md.getGroup(), false);           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1618                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1619              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1620          }                                                                                                         </span>
<span  style="">1621                                                                                                                    </span>
<span class="-8574421891214577202" onmouseenter="enter('-8574421891214577202');" onmouseout="out('-8574421891214577202');" style="">1622          if (CollectionUtils.isEmpty(ef.getActions())) {                                                           </span>
<span class="-2237425030372835917" onmouseenter="enter('-2237425030372835917');" onmouseout="out('-2237425030372835917');" style="">1623              ef.addAction(DefaultEntityFormActions.SAVE);                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1624          }                                                                                                         </span>
<span  style="">1625                                                                                                                    </span>
<span class="-3017596271040445246" onmouseenter="enter('-3017596271040445246');" onmouseout="out('-3017596271040445246');" style="">1626          addDeleteActionIfAllowed(ef, cmd, entity);                                                                </span>

<span class="-4992665792206214706" onmouseenter="enter('-4992665792206214706');" onmouseout="out('-4992665792206214706');" style="">1627          setReadOnlyState(ef, cmd, entity);                                                                        </span>
<span  style="">1628                                                                                                                    </span>
<span class="-2369176302071135940" onmouseenter="enter('-2369176302071135940');" onmouseout="out('-2369176302071135940');" style="">1629          // check for fields that should be hidden based on annotations                                            </span>
<span class="-7540431012384828138" onmouseenter="enter('-7540431012384828138');" onmouseout="out('-7540431012384828138');" style="">1630          setVisibilityBasedOnShowIfFieldEquals(cmd, entity, ef);                                                   </span>
<span  style="">1631                                                                                                                    </span>
<span class="-6573999189247732385" onmouseenter="enter('-6573999189247732385');" onmouseout="out('-6573999189247732385');" style="">1632          extensionManager.getProxy().modifyDetailEntityForm(ef);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1633      }                                                                                                             </span>
<span  style="">1634                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1635      /**                                                                                                           </span>
<span class="352645507222005893" onmouseenter="enter('352645507222005893');" onmouseout="out('352645507222005893');" style=""><abbr title="1636       * Adds the {@link DefaultEntityFormActions#DELETE} if the user is allowed to delete the &lt;b&gt;entity&lt;/b&gt;. The user can">1636       * Adds the {@link DefaultEntityFormActions#DELETE} if the user is allowed to delete the &lt;b&gt;entity&lt;/b&gt;. The usðŸ”µ</abbr></span>
<span class="-3708177379444774538" onmouseenter="enter('-3708177379444774538');" onmouseout="out('-3708177379444774538');" style="">1637       * delete an entity for the following cases:                                                                  </span>
<span class="3244483720103844454" onmouseenter="enter('3244483720103844454');" onmouseout="out('3244483720103844454');" style="">1638       * &lt;ol&gt;                                                                                                       </span>
<span class="5070277409715594588" onmouseenter="enter('5070277409715594588');" onmouseout="out('5070277409715594588');" style="">1639       *  &lt;li&gt;The user has the security to {@link EntityOperationType#REMOVE} the given class name represented by   </span>
<span class="8957232178890049809" onmouseenter="enter('8957232178890049809');" onmouseout="out('8957232178890049809');" style="">1640       *  the &lt;b&gt;entityForm&lt;/b&gt; (determined by {@link #getSecurityClassname(EntityForm, ClassMetadata)})&lt;/li&gt;       </span>
<span class="980044994252332631" onmouseenter="enter('980044994252332631');" onmouseout="out('980044994252332631');" style="">1641       *  &lt;li&gt;The user has the security necessary to delete the given &lt;b&gt;entity&lt;/b&gt; according to the                </span>
<span class="8011888861168395573" onmouseenter="enter('8011888861168395573');" onmouseout="out('8011888861168395573');" style="">1642       *  {@link RowLevelSecurityService#canRemove(AdminUser, Entity)}&lt;/li&gt;                                         </span>
<span class="6987349732947823565" onmouseenter="enter('6987349732947823565');" onmouseout="out('6987349732947823565');" style="">1643       * &lt;/ol&gt;                                                                                                      </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1644       *                                                                                                            </span>
<span class="-8102393608813481146" onmouseenter="enter('-8102393608813481146');" onmouseout="out('-8102393608813481146');" style="">1645       * @param entityForm the form being generated                                                                 </span>
<span class="-5184866399254269391" onmouseenter="enter('-5184866399254269391');" onmouseout="out('-5184866399254269391');" style="">1646       * @param cmd the metatadata used to build the &lt;b&gt;entityForm&lt;/b&gt; for the &lt;b&gt;entity&lt;/b&gt;                        </span>
<span class="-6994238295290465877" onmouseenter="enter('-6994238295290465877');" onmouseout="out('-6994238295290465877');" style="">1647       * @param entity the entity being edited                                                                      </span>
<span class="-8891442921277557778" onmouseenter="enter('-8891442921277557778');" onmouseout="out('-8891442921277557778');" style="">1648       * @see {@link SecurityVerifier#securityCheck(String, EntityOperationType)}                                   </span>
<span class="-3828641031793918168" onmouseenter="enter('-3828641031793918168');" onmouseout="out('-3828641031793918168');" style="">1649       * @see {@link #getSecurityClassname(EntityForm, ClassMetadata)}                                              </span>
<span class="8925161549930098588" onmouseenter="enter('8925161549930098588');" onmouseout="out('8925161549930098588');" style="">1650       * @see {@link RowLevelSecurityService#canRemove(AdminUser, Entity)}                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1651       */                                                                                                           </span>
<span class="1590261750272169439" onmouseenter="enter('1590261750272169439');" onmouseout="out('1590261750272169439');" style="">1652      protected void addDeleteActionIfAllowed(EntityForm entityForm, ClassMetadata cmd, Entity entity) {            </span>
<span class="-19082107155128737" onmouseenter="enter('-19082107155128737');" onmouseout="out('-19082107155128737');" style="">1653          boolean canDelete = true;                                                                                 </span>







<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1654          try {                                                                                                     </span>
<span class="5476366109962905346" onmouseenter="enter('5476366109962905346');" onmouseout="out('5476366109962905346');" style="">1655              String securityEntityClassname = getSecurityClassname(entityForm, cmd);                               </span>
<span class="-4824979268204802710" onmouseenter="enter('-4824979268204802710');" onmouseout="out('-4824979268204802710');" style="">1656              adminRemoteSecurityService.securityCheck(securityEntityClassname, EntityOperationType.REMOVE);        </span>


<span class="9220844322816084446" onmouseenter="enter('9220844322816084446');" onmouseout="out('9220844322816084446');" style="">1657          } catch (ServiceException e) {                                                                            </span>
<span class="-8912377967087217182" onmouseenter="enter('-8912377967087217182');" onmouseout="out('-8912377967087217182');" style="">1658              if (e instanceof SecurityServiceException) {                                                          </span>
<span class="-8314772345016591645" onmouseenter="enter('-8314772345016591645');" onmouseout="out('-8314772345016591645');" style="">1659                  canDelete = false;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1660              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1661          }                                                                                                         </span>
<span  style="">1662                                                                                                                    </span>
<span class="-179728255711330045" onmouseenter="enter('-179728255711330045');" onmouseout="out('-179728255711330045');" style="">1663          // If I cannot update a record then I certainly cannot delete it either                                   </span>
<span class="7443786234015585252" onmouseenter="enter('7443786234015585252');" onmouseout="out('7443786234015585252');" style="">1664          if (canDelete) {                                                                                          </span>
<span class="9060467924077423602" onmouseenter="enter('9060467924077423602');" onmouseout="out('9060467924077423602');" style=""><abbr title="1665              canDelete = rowLevelSecurityService.canUpdate(adminRemoteSecurityService.getPersistentAdminUser(), entity);">1665              canDelete = rowLevelSecurityService.canUpdate(adminRemoteSecurityService.getPersistentAdminUser(), entðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1666          }                                                                                                         </span>
<span  style="">1667                                                                                                                    </span>
<span class="7443786234015585252" onmouseenter="enter('7443786234015585252');" onmouseout="out('7443786234015585252');" style="">1668          if (canDelete) {                                                                                          </span>
<span class="-6969811342559492698" onmouseenter="enter('-6969811342559492698');" onmouseout="out('-6969811342559492698');" style=""><abbr title="1669              canDelete = rowLevelSecurityService.canRemove(adminRemoteSecurityService.getPersistentAdminUser(), entity);">1669              canDelete = rowLevelSecurityService.canRemove(adminRemoteSecurityService.getPersistentAdminUser(), entðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1670          }                                                                                                         </span>
<span  style="">1671                                                                                                                    </span>
<span class="7443786234015585252" onmouseenter="enter('7443786234015585252');" onmouseout="out('7443786234015585252');" style="">1672          if (canDelete) {                                                                                          </span>
<span class="-8844177275906434182" onmouseenter="enter('-8844177275906434182');" onmouseout="out('-8844177275906434182');" style="">1673              entityForm.addAction(DefaultEntityFormActions.DELETE);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1674          }                                                                                                         </span>

































<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1675      }                                                                                                             </span>
<span  style="">1676                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1677      /**                                                                                                           </span>
<span class="-8604925744257744736" onmouseenter="enter('-8604925744257744736');" onmouseout="out('-8604925744257744736');" style="">1678       * The given &lt;b&gt;entityForm&lt;/b&gt; is marked as readonly for the following cases:                                 </span>
<span class="3244483720103844454" onmouseenter="enter('3244483720103844454');" onmouseout="out('3244483720103844454');" style="">1679       * &lt;ol&gt;                                                                                                       </span>
<span class="8384568302593626864" onmouseenter="enter('8384568302593626864');" onmouseout="out('8384568302593626864');" style="">1680       *  &lt;li&gt;All of the properties from &lt;b&gt;cmd&lt;/b&gt; are readonly&lt;/b&gt;&lt;/li&gt;                                           </span>
<span class="3259494465539702713" onmouseenter="enter('3259494465539702713');" onmouseout="out('3259494465539702713');" style=""><abbr title="1681       *  &lt;li&gt;The user does not have the security to {@link EntityOperationType#UPDATE} the given class name represented by">1681       *  &lt;li&gt;The user does not have the security to {@link EntityOperationType#UPDATE} the given class name represeðŸ”µ</abbr></span>
<span class="8957232178890049809" onmouseenter="enter('8957232178890049809');" onmouseout="out('8957232178890049809');" style="">1682       *  the &lt;b&gt;entityForm&lt;/b&gt; (determined by {@link #getSecurityClassname(EntityForm, ClassMetadata)})&lt;/li&gt;       </span>
<span class="-661097031284754018" onmouseenter="enter('-661097031284754018');" onmouseout="out('-661097031284754018');" style="">1683       *  &lt;li&gt;The user does not have the security necessary to modify the given &lt;b&gt;entity&lt;/b&gt; according to the      </span>
<span class="1476257847894540357" onmouseenter="enter('1476257847894540357');" onmouseout="out('1476257847894540357');" style="">1684       *  {@link RowLevelSecurityService#canUpdate(AdminUser, Entity)}&lt;/li&gt;                                         </span>
<span class="6987349732947823565" onmouseenter="enter('6987349732947823565');" onmouseout="out('6987349732947823565');" style="">1685       * &lt;/ol&gt;                                                                                                      </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1686       *                                                                                                            </span>
<span class="-8102393608813481146" onmouseenter="enter('-8102393608813481146');" onmouseout="out('-8102393608813481146');" style="">1687       * @param entityForm the form being generated                                                                 </span>
<span class="-5184866399254269391" onmouseenter="enter('-5184866399254269391');" onmouseout="out('-5184866399254269391');" style="">1688       * @param cmd the metatadata used to build the &lt;b&gt;entityForm&lt;/b&gt; for the &lt;b&gt;entity&lt;/b&gt;                        </span>
<span class="-6994238295290465877" onmouseenter="enter('-6994238295290465877');" onmouseout="out('-6994238295290465877');" style="">1689       * @param entity the entity being edited                                                                      </span>
<span class="-8891442921277557778" onmouseenter="enter('-8891442921277557778');" onmouseout="out('-8891442921277557778');" style="">1690       * @see {@link SecurityVerifier#securityCheck(String, EntityOperationType)}                                   </span>
<span class="-3828641031793918168" onmouseenter="enter('-3828641031793918168');" onmouseout="out('-3828641031793918168');" style="">1691       * @see {@link #getSecurityClassname(EntityForm, ClassMetadata)}                                              </span>
<span class="3340343931427513832" onmouseenter="enter('3340343931427513832');" onmouseout="out('3340343931427513832');" style="">1692       * @see {@link RowLevelSecurityService#canUpdate(AdminUser, Entity)}                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1693       */                                                                                                           </span>
<span class="7475800010460682445" onmouseenter="enter('7475800010460682445');" onmouseout="out('7475800010460682445');" style="">1694      protected void setReadOnlyState(EntityForm entityForm, ClassMetadata cmd, Entity entity) {                    </span>
<span class="-3754358688511165958" onmouseenter="enter('-3754358688511165958');" onmouseout="out('-3754358688511165958');" style="">1695          boolean readOnly = true;                                                                                  </span>
<span  style="">1696                                                                                                                    </span>
<span class="-2305007204320036324" onmouseenter="enter('-2305007204320036324');" onmouseout="out('-2305007204320036324');" style="">1697          // If all of the fields are read only, we&#x27;ll mark the form as such                                        </span>
<span class="-3497335608114491506" onmouseenter="enter('-3497335608114491506');" onmouseout="out('-3497335608114491506');" style="">1698          for (Property property : cmd.getProperties()) {                                                           </span>
<span class="-5795738539482972481" onmouseenter="enter('-5795738539482972481');" onmouseout="out('-5795738539482972481');" style="">1699              FieldMetadata fieldMetadata = property.getMetadata();                                                 </span>
<span class="-638676474141600706" onmouseenter="enter('-638676474141600706');" onmouseout="out('-638676474141600706');" style="">1700              if (fieldMetadata instanceof BasicFieldMetadata) {                                                    </span>
<span class="-3122303192863427007" onmouseenter="enter('-3122303192863427007');" onmouseout="out('-3122303192863427007');" style=""><abbr title="1701                  readOnly = ((BasicFieldMetadata) fieldMetadata).getReadOnly() != null &amp;&amp; ((BasicFieldMetadata) fieldMetadata).getReadOnly();">1701                  readOnly = ((BasicFieldMetadata) fieldMetadata).getReadOnly() != null &amp;&amp; ((BasicFieldMetadata) fieðŸ”µ</abbr></span>
<span class="2916396140375617365" onmouseenter="enter('2916396140375617365');" onmouseout="out('2916396140375617365');" style="">1702                  if (!readOnly) {                                                                                  </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1703                      break;                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1704                  }                                                                                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1705              } else {                                                                                              </span>
<span class="2490832096811631077" onmouseenter="enter('2490832096811631077');" onmouseout="out('2490832096811631077');" style="">1706                  readOnly = ((CollectionMetadata) fieldMetadata).isMutable();                                      </span>
<span class="2916396140375617365" onmouseenter="enter('2916396140375617365');" onmouseout="out('2916396140375617365');" style="">1707                  if (!readOnly) {                                                                                  </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1708                      break;                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1709                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1710              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1711          }                                                                                                         </span>
<span  style="">1712                                                                                                                    </span>
<span class="2916396140375617365" onmouseenter="enter('2916396140375617365');" onmouseout="out('2916396140375617365');" style="">1713          if (!readOnly) {                                                                                          </span>
<span class="8591967978504453740" onmouseenter="enter('8591967978504453740');" onmouseout="out('8591967978504453740');" style=""><abbr title="1714              // If the user does not have edit permissions, we will go ahead and make the form read only to prevent confusion">1714              // If the user does not have edit permissions, we will go ahead and make the form read only to preventðŸ”µ</abbr></span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1715              try {                                                                                                 </span>
<span class="5476366109962905346" onmouseenter="enter('5476366109962905346');" onmouseout="out('5476366109962905346');" style="">1716                  String securityEntityClassname = getSecurityClassname(entityForm, cmd);                           </span>
<span class="7305757249405162956" onmouseenter="enter('7305757249405162956');" onmouseout="out('7305757249405162956');" style="">1717                  adminRemoteSecurityService.securityCheck(securityEntityClassname, EntityOperationType.UPDATE);    </span>
<span class="9220844322816084446" onmouseenter="enter('9220844322816084446');" onmouseout="out('9220844322816084446');" style="">1718              } catch (ServiceException e) {                                                                        </span>
<span class="-8912377967087217182" onmouseenter="enter('-8912377967087217182');" onmouseout="out('-8912377967087217182');" style="">1719                  if (e instanceof SecurityServiceException) {                                                      </span>
<span class="6120466793575593078" onmouseenter="enter('6120466793575593078');" onmouseout="out('6120466793575593078');" style="">1720                      readOnly = true;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1721                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1722              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1723          }                                                                                                         </span>
<span  style="">1724                                                                                                                    </span>
<span class="-2506720598607900340" onmouseenter="enter('-2506720598607900340');" onmouseout="out('-2506720598607900340');" style=""><abbr title="1725          // if the normal admin security service has not deemed this readonly and the all of the properties on the entity">1725          // if the normal admin security service has not deemed this readonly and the all of the properties on the ðŸ”µ</abbr></span>
<span class="-360101994104390021" onmouseenter="enter('-360101994104390021');" onmouseout="out('-360101994104390021');" style="">1726          // are not readonly, then check the row-level security                                                    </span>
<span class="2916396140375617365" onmouseenter="enter('2916396140375617365');" onmouseout="out('2916396140375617365');" style="">1727          if (!readOnly) {                                                                                          </span>
<span class="7094483165734488508" onmouseenter="enter('7094483165734488508');" onmouseout="out('7094483165734488508');" style=""><abbr title="1728              readOnly = !rowLevelSecurityService.canUpdate(adminRemoteSecurityService.getPersistentAdminUser(), entity);">1728              readOnly = !rowLevelSecurityService.canUpdate(adminRemoteSecurityService.getPersistentAdminUser(), entðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1729          }                                                                                                         </span>
<span  style="">1730                                                                                                                    </span>
<span class="7378462715957185244" onmouseenter="enter('7378462715957185244');" onmouseout="out('7378462715957185244');" style="">1731          if (readOnly) {                                                                                           </span>
<span class="7356620202531041753" onmouseenter="enter('7356620202531041753');" onmouseout="out('7356620202531041753');" style="">1732              entityForm.setReadOnly();                                                                             </span>
<span class="-1010311312628539836" onmouseenter="enter('-1010311312628539836');" onmouseout="out('-1010311312628539836');" style=""><abbr title="1733              //If someone has replaced RowLevelSecurityService, check here to make sure the replacement implements the expected interface">1733              //If someone has replaced RowLevelSecurityService, check here to make sure the replacement implements ðŸ”µ</abbr></span>
<span class="8968842492276656547" onmouseenter="enter('8968842492276656547');" onmouseout="out('8968842492276656547');" style="">1734              if (rowLevelSecurityService instanceof ExceptionAwareRowLevelSecurityProvider) {                      </span>
<span class="2057574043580690918" onmouseenter="enter('2057574043580690918');" onmouseout="out('2057574043580690918');" style=""><abbr title="1735                  EntityFormModifierConfiguration entityFormModifierConfiguration = ((ExceptionAwareRowLevelSecurityProvider) rowLevelSecurityService).getUpdateDenialExceptions();">1735                  EntityFormModifierConfiguration entityFormModifierConfiguration = ((ExceptionAwareRowLevelSecurityðŸ”µ</abbr></span>
<span class="-3023990582845647391" onmouseenter="enter('-3023990582845647391');" onmouseout="out('-3023990582845647391');" style=""><abbr title="1736                  for (EntityFormModifierData&lt;EntityFormModifierDataPoint&gt; data : entityFormModifierConfiguration.getData()) {">1736                  for (EntityFormModifierData&lt;EntityFormModifierDataPoint&gt; data : entityFormModifierConfiguration.geðŸ”µ</abbr></span>
<span class="9148632731325481398" onmouseenter="enter('9148632731325481398');" onmouseout="out('9148632731325481398');" style="">1737                      for (EntityFormModifier modifier : entityFormModifierConfiguration.getModifier()) {           </span>
<span class="7131836139928065231" onmouseenter="enter('7131836139928065231');" onmouseout="out('7131836139928065231');" style="">1738                          if (modifier.isQualified(data.getModifierType())) {                                       </span>
<span class="-3482148637742284796" onmouseenter="enter('-3482148637742284796');" onmouseout="out('-3482148637742284796');" style="">1739                              modifier.modifyEntityForm(new EntityFormModifierRequest()                             </span>
<span class="8232027775022174594" onmouseenter="enter('8232027775022174594');" onmouseout="out('8232027775022174594');" style="">1740                                      .withEntityForm(entityForm)                                                   </span>
<span class="-1014541830042934633" onmouseenter="enter('-1014541830042934633');" onmouseout="out('-1014541830042934633');" style="">1741                                      .withConfiguration(data)                                                      </span>
<span class="-7538620272607121359" onmouseenter="enter('-7538620272607121359');" onmouseout="out('-7538620272607121359');" style="">1742                                      .withCurrentUser(adminRemoteSecurityService.getPersistentAdminUser())         </span>
<span class="-2471313258794916634" onmouseenter="enter('-2471313258794916634');" onmouseout="out('-2471313258794916634');" style="">1743                                      .withEntity(entity)                                                           </span>
<span class="680994463596247300" onmouseenter="enter('680994463596247300');" onmouseout="out('680994463596247300');" style="">1744                                      .withRowLevelSecurityService(rowLevelSecurityService));                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1745                          }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1746                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1747                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1748              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1749          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1750      }                                                                                                             </span>
<span  style="">1751                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1752      /**                                                                                                           </span>
<span class="4825906517632270050" onmouseenter="enter('4825906517632270050');" onmouseout="out('4825906517632270050');" style="">1753       * Obtains the class name suitable for passing along to the {@link SecurityVerifier}                          </span>
<span class="-4758509257574949373" onmouseenter="enter('-4758509257574949373');" onmouseout="out('-4758509257574949373');" style="">1754       * @param entityForm                                                                                          </span>
<span class="3340688165449077744" onmouseenter="enter('3340688165449077744');" onmouseout="out('3340688165449077744');" style="">1755       * @param cmd                                                                                                 </span>
<span class="-9165797340485297481" onmouseenter="enter('-9165797340485297481');" onmouseout="out('-9165797340485297481');" style="">1756       * @return                                                                                                    </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1757       */                                                                                                           </span>
<span class="-4629711814814156723" onmouseenter="enter('-4629711814814156723');" onmouseout="out('-4629711814814156723');" style="">1758      protected String getSecurityClassname(EntityForm entityForm, ClassMetadata cmd) {                             </span>
<span class="-6496925357216982154" onmouseenter="enter('-6496925357216982154');" onmouseout="out('-6496925357216982154');" style="">1759          String securityEntityClassname = entityForm.getCeilingEntityClassname();                                  </span>
<span  style="">1760                                                                                                                    </span>
<span class="-7034725187183815217" onmouseenter="enter('-7034725187183815217');" onmouseout="out('-7034725187183815217');" style="">1761          if (!StringUtils.isEmpty(cmd.getSecurityCeilingType())) {                                                 </span>
<span class="5083723888191082683" onmouseenter="enter('5083723888191082683');" onmouseout="out('5083723888191082683');" style="">1762              securityEntityClassname = cmd.getSecurityCeilingType();                                               </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1763          } else {                                                                                                  </span>
<span class="7913947527267397417" onmouseenter="enter('7913947527267397417');" onmouseout="out('7913947527267397417');" style="">1764              if (entityForm.getDynamicFormInfos() != null) {                                                       </span>
<span class="7790362624567421850" onmouseenter="enter('7790362624567421850');" onmouseout="out('7790362624567421850');" style="">1765                  for (DynamicEntityFormInfo info : entityForm.getDynamicFormInfos().values()) {                    </span>
<span class="-1917944725928650662" onmouseenter="enter('-1917944725928650662');" onmouseout="out('-1917944725928650662');" style="">1766                      if (!StringUtils.isEmpty(info.getSecurityCeilingClassName())) {                               </span>
<span class="4842268456536900985" onmouseenter="enter('4842268456536900985');" onmouseout="out('4842268456536900985');" style="">1767                          securityEntityClassname = info.getSecurityCeilingClassName();                             </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1768                          break;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1769                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1770                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1771              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1772          }                                                                                                         </span>
<span  style="">1773                                                                                                                    </span>
<span class="-4632494495444562964" onmouseenter="enter('-4632494495444562964');" onmouseout="out('-4632494495444562964');" style="">1774          return securityEntityClassname;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1775      }                                                                                                             </span>
<span  style="">1776                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1777      @Override                                                                                                     </span>
<span class="-2624998369196687024" onmouseenter="enter('-2624998369196687024');" onmouseout="out('-2624998369196687024');" style="">1778      public void populateEntityFormFields(EntityForm ef, Entity entity) {                                          </span>
<span class="-5366055867936531883" onmouseenter="enter('-5366055867936531883');" onmouseout="out('-5366055867936531883');" style="">1779          populateEntityFormFields(ef, entity, true, true);                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1780      }                                                                                                             </span>
<span  style="">1781                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1782      @Override                                                                                                     </span>
<span class="-6740512050797749179" onmouseenter="enter('-6740512050797749179');" onmouseout="out('-6740512050797749179');" style="">1783      public void populateEntityFormFields(EntityForm ef, Entity entity, boolean populateType, boolean populateId) {</span>
<span class="-8844360907694676103" onmouseenter="enter('-8844360907694676103');" onmouseout="out('-8844360907694676103');" style="">1784          if (populateId) {                                                                                         </span>
<span class="-5951790405273252562" onmouseenter="enter('-5951790405273252562');" onmouseout="out('-5951790405273252562');" style="">1785              ef.setId(entity.findProperty(ef.getIdProperty()).getValue());                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1786          }                                                                                                         </span>
<span class="6008447871872074898" onmouseenter="enter('6008447871872074898');" onmouseout="out('6008447871872074898');" style="">1787          if (populateType) {                                                                                       </span>
<span class="2566657873931456162" onmouseenter="enter('2566657873931456162');" onmouseout="out('2566657873931456162');" style="">1788              ef.setEntityType(entity.getType()[0]);                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1789          }                                                                                                         </span>
<span  style="">1790                                                                                                                    </span>
<span class="-4264420628414385505" onmouseenter="enter('-4264420628414385505');" onmouseout="out('-4264420628414385505');" style="">1791          for (Entry&lt;String, Field&gt; entry : ef.getFields().entrySet()) {                                            </span>
<span class="2420686282896377848" onmouseenter="enter('2420686282896377848');" onmouseout="out('2420686282896377848');" style="">1792              Property entityProp = entity.findProperty(entry.getKey());                                            </span>
<span class="-2366650903096921345" onmouseenter="enter('-2366650903096921345');" onmouseout="out('-2366650903096921345');" style="">1793              if (entityProp != null) {                                                                             </span>
<span class="-7617915495394948835" onmouseenter="enter('-7617915495394948835');" onmouseout="out('-7617915495394948835');" style="">1794                  entry.getValue().setValue(entityProp.getValue());                                                 </span>
<span class="-4933731915633510416" onmouseenter="enter('-4933731915633510416');" onmouseout="out('-4933731915633510416');" style="">1795                  entry.getValue().setDisplayValue(entityProp.getDisplayValue());                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1796              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1797          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1798      }                                                                                                             </span>
<span  style="">1799                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1800      @Override                                                                                                     </span>
<span class="8490818103305754450" onmouseenter="enter('8490818103305754450');" onmouseout="out('8490818103305754450');" style="">1801      public void populateAdornedEntityFormFields(EntityForm ef, Entity entity, AdornedTargetList adornedList) {    </span>
<span class="-7724922710012225100" onmouseenter="enter('-7724922710012225100');" onmouseout="out('-7724922710012225100');" style="">1802          Field field = ef.findField(adornedList.getTargetObjectPath() + &quot;.&quot; + adornedList.getTargetIdProperty());  </span>
<span class="6683657094444632615" onmouseenter="enter('6683657094444632615');" onmouseout="out('6683657094444632615');" style="">1803          Property entityProp = entity.findProperty(ef.getIdProperty());                                            </span>
<span class="627899284580660581" onmouseenter="enter('627899284580660581');" onmouseout="out('627899284580660581');" style="">1804          field.setValue(entityProp.getValue());                                                                    </span>
<span  style="">1805                                                                                                                    </span>
<span class="2111689089149990625" onmouseenter="enter('2111689089149990625');" onmouseout="out('2111689089149990625');" style="">1806          if (StringUtils.isNotBlank(adornedList.getSortField())) {                                                 </span>
<span class="6344948819160968120" onmouseenter="enter('6344948819160968120');" onmouseout="out('6344948819160968120');" style="">1807              field = ef.findField(adornedList.getSortField());                                                     </span>
<span class="8964070033667700490" onmouseenter="enter('8964070033667700490');" onmouseout="out('8964070033667700490');" style="">1808              entityProp = entity.findProperty(adornedList.getSortField());                                         </span>
<span class="-2263433618148702675" onmouseenter="enter('-2263433618148702675');" onmouseout="out('-2263433618148702675');" style="">1809              if (field != null &amp;&amp; entityProp != null) {                                                            </span>
<span class="627899284580660581" onmouseenter="enter('627899284580660581');" onmouseout="out('627899284580660581');" style="">1810                  field.setValue(entityProp.getValue());                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1811              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1812          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1813      }                                                                                                             </span>
<span  style="">1814                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1815      @Override                                                                                                     </span>
<span class="8114269508855532827" onmouseenter="enter('8114269508855532827');" onmouseout="out('8114269508855532827');" style="">1816      public void populateMapEntityFormFields(EntityForm ef, Entity entity) {                                       </span>
<span class="4628483460047019115" onmouseenter="enter('4628483460047019115');" onmouseout="out('4628483460047019115');" style="">1817          Field field = ef.findField(&quot;priorKey&quot;);                                                                   </span>
<span class="263056657127968906" onmouseenter="enter('263056657127968906');" onmouseout="out('263056657127968906');" style="">1818          Property entityProp = entity.findProperty(&quot;key&quot;);                                                         </span>
<span class="-2263433618148702675" onmouseenter="enter('-2263433618148702675');" onmouseout="out('-2263433618148702675');" style="">1819          if (field != null &amp;&amp; entityProp != null) {                                                                </span>
<span class="627899284580660581" onmouseenter="enter('627899284580660581');" onmouseout="out('627899284580660581');" style="">1820              field.setValue(entityProp.getValue());                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1821          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1822      }                                                                                                             </span>
<span  style="">1823                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1824      @Override                                                                                                     </span>
<span class="150942895693350371" onmouseenter="enter('150942895693350371');" onmouseout="out('150942895693350371');" style=""><abbr title="1825      public EntityForm buildAdornedListForm(AdornedTargetCollectionMetadata adornedMd, AdornedTargetList adornedList,">1825      public EntityForm buildAdornedListForm(AdornedTargetCollectionMetadata adornedMd, AdornedTargetList adornedLisðŸ”µ</abbr></span>
<span class="12000407411688948" onmouseenter="enter('12000407411688948');" onmouseout="out('12000407411688948');" style="">1826              String parentId, boolean isViewCollectionItem, List&lt;SectionCrumb&gt; sectionCrumbs, boolean isAdd)       </span>
<span class="1998458335829271558" onmouseenter="enter('1998458335829271558');" onmouseout="out('1998458335829271558');" style="">1827              throws ServiceException {                                                                             </span>
<span class="7440011096899970462" onmouseenter="enter('7440011096899970462');" onmouseout="out('7440011096899970462');" style="">1828          EntityForm ef = createStandardAdornedEntityForm();                                                        </span>
<span class="3191357523588163011" onmouseenter="enter('3191357523588163011');" onmouseout="out('3191357523588163011');" style=""><abbr title="1829          return buildAdornedListForm(adornedMd, adornedList, parentId, isViewCollectionItem, ef, sectionCrumbs, isAdd);">1829          return buildAdornedListForm(adornedMd, adornedList, parentId, isViewCollectionItem, ef, sectionCrumbs, isAðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1830      }                                                                                                             </span>
<span  style="">1831                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1832      @Override                                                                                                     </span>
<span class="150942895693350371" onmouseenter="enter('150942895693350371');" onmouseout="out('150942895693350371');" style=""><abbr title="1833      public EntityForm buildAdornedListForm(AdornedTargetCollectionMetadata adornedMd, AdornedTargetList adornedList,">1833      public EntityForm buildAdornedListForm(AdornedTargetCollectionMetadata adornedMd, AdornedTargetList adornedLisðŸ”µ</abbr></span>
<span class="3984058849831877067" onmouseenter="enter('3984058849831877067');" onmouseout="out('3984058849831877067');" style=""><abbr title="1834              String parentId, boolean isViewCollectionItem, EntityForm ef, List&lt;SectionCrumb&gt; sectionCrumbs, boolean isAdd)">1834              String parentId, boolean isViewCollectionItem, EntityForm ef, List&lt;SectionCrumb&gt; sectionCrumbs, booleaðŸ”µ</abbr></span>
<span class="1998458335829271558" onmouseenter="enter('1998458335829271558');" onmouseout="out('1998458335829271558');" style="">1835              throws ServiceException {                                                                             </span>
<span class="2447703614414495939" onmouseenter="enter('2447703614414495939');" onmouseout="out('2447703614414495939');" style="">1836          ef.setEntityType(adornedList.getAdornedTargetEntityClassname());                                          </span>
<span  style="">1837                                                                                                                    </span>
<span class="-5881575004956694509" onmouseenter="enter('-5881575004956694509');" onmouseout="out('-5881575004956694509');" style="">1838          // Get the metadata for this adorned field                                                                </span>
<span class="-3021134083097680634" onmouseenter="enter('-3021134083097680634');" onmouseout="out('-3021134083097680634');" style="">1839          PersistencePackageRequest request = PersistencePackageRequest.adorned()                                   </span>
<span class="-7461338641125591711" onmouseenter="enter('-7461338641125591711');" onmouseout="out('-7461338641125591711');" style="">1840                  .withCeilingEntityClassname(adornedMd.getCollectionCeilingEntity())                               </span>
<span class="5166488781691104787" onmouseenter="enter('5166488781691104787');" onmouseout="out('5166488781691104787');" style="">1841                  .withAdornedList(adornedList)                                                                     </span>
<span class="6300132115435073341" onmouseenter="enter('6300132115435073341');" onmouseout="out('6300132115435073341');" style="">1842                  .withSectionCrumbs(sectionCrumbs);                                                                </span>
<span class="-6327467589468547459" onmouseenter="enter('-6327467589468547459');" onmouseout="out('-6327467589468547459');" style="">1843          request.setAddOperationInspect(isAdd);                                                                    </span>
<span class="8129278729958971412" onmouseenter="enter('8129278729958971412');" onmouseout="out('8129278729958971412');" style=""><abbr title="1844          ClassMetadata collectionMetadata = adminEntityService.getClassMetadata(request).getDynamicResultSet().getClassMetaData();">1844          ClassMetadata collectionMetadata = adminEntityService.getClassMetadata(request).getDynamicResultSet().getCðŸ”µ</abbr></span>
<span  style="">1845                                                                                                                    </span>
<span class="-4937065852383367448" onmouseenter="enter('-4937065852383367448');" onmouseout="out('-4937065852383367448');" style="">1846          List&lt;Property&gt; entityFormProperties = new ArrayList&lt;&gt;();                                                  </span>
<span class="9162843466163784659" onmouseenter="enter('9162843466163784659');" onmouseout="out('9162843466163784659');" style="">1847          if (isViewCollectionItem) {                                                                               </span>
<span class="-6444196324035087919" onmouseenter="enter('-6444196324035087919');" onmouseout="out('-6444196324035087919');" style="">1848              Collections.addAll(entityFormProperties, collectionMetadata.getProperties());                         </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1849          } else {                                                                                                  </span>
<span class="8165943161441555593" onmouseenter="enter('8165943161441555593');" onmouseout="out('8165943161441555593');" style="">1850              // We want our entity form to only render the maintained adorned target fields                        </span>
<span class="-6459504561228602972" onmouseenter="enter('-6459504561228602972');" onmouseout="out('-6459504561228602972');" style="">1851              for (String targetFieldName : adornedMd.getMaintainedAdornedTargetFields()) {                         </span>
<span class="-5374323299509239162" onmouseenter="enter('-5374323299509239162');" onmouseout="out('-5374323299509239162');" style="">1852                  Property p = collectionMetadata.getPMap().get(targetFieldName);                                   </span>
<span class="3623466133802910873" onmouseenter="enter('3623466133802910873');" onmouseout="out('3623466133802910873');" style=""><abbr title="1853                  if (p.getMetadata() instanceof BasicFieldMetadata &amp;&amp; BooleanUtils.isNotTrue( p.getMetadata().getExcluded())) {">1853                  if (p.getMetadata() instanceof BasicFieldMetadata &amp;&amp; BooleanUtils.isNotTrue( p.getMetadata().getExðŸ”µ</abbr></span>
<span class="-8585934909139340387" onmouseenter="enter('-8585934909139340387');" onmouseout="out('-8585934909139340387');" style="">1854                      ((BasicFieldMetadata) p.getMetadata()).setVisibility(VisibilityEnum.VISIBLE_ALL);             </span>
<span class="-6393972713668288785" onmouseenter="enter('-6393972713668288785');" onmouseout="out('-6393972713668288785');" style="">1855                      entityFormProperties.add(p);                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1856                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1857              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1858          }                                                                                                         </span>
<span  style="">1859                                                                                                                    </span>
<span class="-1687272513553387314" onmouseenter="enter('-1687272513553387314');" onmouseout="out('-1687272513553387314');" style="">1860          // Set the maintained fields on the form                                                                  </span>
<span class="6598971975233417362" onmouseenter="enter('6598971975233417362');" onmouseout="out('6598971975233417362');" style="">1861          setEntityFormFields(collectionMetadata, ef, entityFormProperties);                                        </span>
<span  style="">1862                                                                                                                    </span>
<span class="7903383611177038089" onmouseenter="enter('7903383611177038089');" onmouseout="out('7903383611177038089');" style="">1863          // Add these two additional hidden fields that are required for persistence                               </span>
<span class="-6303462610985739492" onmouseenter="enter('-6303462610985739492');" onmouseout="out('-6303462610985739492');" style="">1864          Field f = new Field()                                                                                     </span>
<span class="-7418437452692570792" onmouseenter="enter('-7418437452692570792');" onmouseout="out('-7418437452692570792');" style="">1865                  .withName(adornedList.getLinkedObjectPath() + &quot;.&quot; + adornedList.getLinkedIdProperty())            </span>
<span class="8578132396126170845" onmouseenter="enter('8578132396126170845');" onmouseout="out('8578132396126170845');" style="">1866                  .withFieldType(SupportedFieldType.HIDDEN.toString())                                              </span>
<span class="3333593611580125868" onmouseenter="enter('3333593611580125868');" onmouseout="out('3333593611580125868');" style="">1867                  .withValue(parentId);                                                                             </span>
<span class="-6955921800298195002" onmouseenter="enter('-6955921800298195002');" onmouseout="out('-6955921800298195002');" style="">1868          ef.addHiddenField(collectionMetadata, f);                                                                 </span>
<span  style="">1869                                                                                                                    </span>
<span class="3649036859858659928" onmouseenter="enter('3649036859858659928');" onmouseout="out('3649036859858659928');" style="">1870          f = new Field()                                                                                           </span>
<span class="-8965183336188726297" onmouseenter="enter('-8965183336188726297');" onmouseout="out('-8965183336188726297');" style="">1871                  .withName(adornedList.getTargetObjectPath() + &quot;.&quot; + adornedList.getTargetIdProperty())            </span>
<span class="8578132396126170845" onmouseenter="enter('8578132396126170845');" onmouseout="out('8578132396126170845');" style="">1872                  .withFieldType(SupportedFieldType.HIDDEN.toString())                                              </span>
<span class="9105828036023594182" onmouseenter="enter('9105828036023594182');" onmouseout="out('9105828036023594182');" style="">1873                  .withIdOverride(&quot;adornedTargetIdProperty&quot;);                                                       </span>
<span class="-6955921800298195002" onmouseenter="enter('-6955921800298195002');" onmouseout="out('-6955921800298195002');" style="">1874          ef.addHiddenField(collectionMetadata, f);                                                                 </span>
<span  style="">1875                                                                                                                    </span>
<span class="2111689089149990625" onmouseenter="enter('2111689089149990625');" onmouseout="out('2111689089149990625');" style="">1876          if (StringUtils.isNotBlank(adornedList.getSortField())) {                                                 </span>
<span class="3649036859858659928" onmouseenter="enter('3649036859858659928');" onmouseout="out('3649036859858659928');" style="">1877              f = new Field()                                                                                       </span>
<span class="-8039081797246474990" onmouseenter="enter('-8039081797246474990');" onmouseout="out('-8039081797246474990');" style="">1878                      .withName(adornedList.getSortField())                                                         </span>
<span class="-2458072313875538806" onmouseenter="enter('-2458072313875538806');" onmouseout="out('-2458072313875538806');" style="">1879                      .withFieldType(SupportedFieldType.HIDDEN.toString());                                         </span>
<span class="-6955921800298195002" onmouseenter="enter('-6955921800298195002');" onmouseout="out('-6955921800298195002');" style="">1880              ef.addHiddenField(collectionMetadata, f);                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1881          }                                                                                                         </span>
<span  style="">1882                                                                                                                    </span>
<span class="-8148842246743906492" onmouseenter="enter('-8148842246743906492');" onmouseout="out('-8148842246743906492');" style="">1883          ef.setParentId(parentId);                                                                                 </span>
<span  style="">1884                                                                                                                    </span>
<span class="-9084846840215869888" onmouseenter="enter('-9084846840215869888');" onmouseout="out('-9084846840215869888');" style="">1885          extensionManager.getProxy().addAdditionalAdornedFormActions(ef);                                          </span>
<span  style="">1886                                                                                                                    </span>
<span class="3260120157565581788" onmouseenter="enter('3260120157565581788');" onmouseout="out('3260120157565581788');" style="">1887          return ef;                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1888      }                                                                                                             </span>
<span  style="">1889                                                                                                                    </span>
<span  style="">1890                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1891      @Override                                                                                                     </span>
<span class="5776955838632823841" onmouseenter="enter('5776955838632823841');" onmouseout="out('5776955838632823841');" style=""><abbr title="1892      public EntityForm buildMapForm(MapMetadata mapMd, final MapStructure mapStructure, ClassMetadata cmd, String parentId)">1892      public EntityForm buildMapForm(MapMetadata mapMd, final MapStructure mapStructure, ClassMetadata cmd, String pðŸ”µ</abbr></span>
<span class="1998458335829271558" onmouseenter="enter('1998458335829271558');" onmouseout="out('1998458335829271558');" style="">1893              throws ServiceException {                                                                             </span>
<span class="-438894394526699599" onmouseenter="enter('-438894394526699599');" onmouseout="out('-438894394526699599');" style="">1894          EntityForm ef = createStandardEntityForm();                                                               </span>
<span class="-4383087068394560961" onmouseenter="enter('-4383087068394560961');" onmouseout="out('-4383087068394560961');" style="">1895          return buildMapForm(mapMd, mapStructure, cmd, parentId, ef);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1896      }                                                                                                             </span>
<span  style="">1897                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1898      @Override                                                                                                     </span>
<span class="5263214445094463474" onmouseenter="enter('5263214445094463474');" onmouseout="out('5263214445094463474');" style=""><abbr title="1899      public EntityForm buildMapForm(MapMetadata mapMd, final MapStructure mapStructure, ClassMetadata cmd, String parentId, EntityForm ef)">1899      public EntityForm buildMapForm(MapMetadata mapMd, final MapStructure mapStructure, ClassMetadata cmd, String pðŸ”µ</abbr></span>
<span class="1998458335829271558" onmouseenter="enter('1998458335829271558');" onmouseout="out('1998458335829271558');" style="">1900              throws ServiceException {                                                                             </span>
<span class="-8196381047300571419" onmouseenter="enter('-8196381047300571419');" onmouseout="out('-8196381047300571419');" style="">1901          ForeignKey foreignKey = (ForeignKey) mapMd.getPersistencePerspective()                                    </span>
<span class="2694724777125959806" onmouseenter="enter('2694724777125959806');" onmouseout="out('2694724777125959806');" style="">1902                  .getPersistencePerspectiveItems().get(PersistencePerspectiveItemType.FOREIGNKEY);                 </span>
<span class="-8152084553040114228" onmouseenter="enter('-8152084553040114228');" onmouseout="out('-8152084553040114228');" style="">1903          ef.setEntityType(foreignKey.getForeignKeyClass());                                                        </span>
<span  style="">1904                                                                                                                    </span>
<span class="2487263286005872069" onmouseenter="enter('2487263286005872069');" onmouseout="out('2487263286005872069');" style="">1905          Field keyField;                                                                                           </span>
<span class="8316613165925765769" onmouseenter="enter('8316613165925765769');" onmouseout="out('8316613165925765769');" style="">1906          if (!mapMd.getForceFreeFormKeys()) {                                                                      </span>
<span class="4124947245467994317" onmouseenter="enter('4124947245467994317');" onmouseout="out('4124947245467994317');" style="">1907              // We will use a combo field to render the key choices                                                </span>
<span class="-1866848638996018677" onmouseenter="enter('-1866848638996018677');" onmouseout="out('-1866848638996018677');" style="">1908              ComboField temp = new ComboField();                                                                   </span>
<span class="-6555255150639106657" onmouseenter="enter('-6555255150639106657');" onmouseout="out('-6555255150639106657');" style="">1909              temp.withName(&quot;key&quot;)                                                                                  </span>
<span class="1841760667801252277" onmouseenter="enter('1841760667801252277');" onmouseout="out('1841760667801252277');" style="">1910                      .withFieldType(&quot;combo_field&quot;)                                                                 </span>
<span class="-5198779959493179668" onmouseenter="enter('-5198779959493179668');" onmouseout="out('-5198779959493179668');" style="">1911                      .withFriendlyName(mapStructure.getKeyPropertyFriendlyName());                                 </span>
<span class="3287055582339576619" onmouseenter="enter('3287055582339576619');" onmouseout="out('3287055582339576619');" style="">1912              if (mapMd.getKeys() != null) {                                                                        </span>
<span class="-6322095491178263556" onmouseenter="enter('-6322095491178263556');" onmouseout="out('-6322095491178263556');" style="">1913                  // The keys can be explicitly set in the annotation...                                            </span>
<span class="-7850108399679610719" onmouseenter="enter('-7850108399679610719');" onmouseout="out('-7850108399679610719');" style="">1914                  temp.setOptions(mapMd.getKeys());                                                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1915              } else {                                                                                              </span>
<span class="7036564945591495423" onmouseenter="enter('7036564945591495423');" onmouseout="out('7036564945591495423');" style="">1916                  // Or they could be based on a different entity                                                   </span>
<span class="2943675610735544566" onmouseenter="enter('2943675610735544566');" onmouseout="out('2943675610735544566');" style="">1917                  PersistencePackageRequest ppr = PersistencePackageRequest.standard()                              </span>
<span class="-7233152391809010418" onmouseenter="enter('-7233152391809010418');" onmouseout="out('-7233152391809010418');" style="">1918                          .withCeilingEntityClassname(mapMd.getMapKeyOptionEntityClass());                          </span>
<span  style="">1919                                                                                                                    </span>
<span class="-4077831550260994387" onmouseenter="enter('-4077831550260994387');" onmouseout="out('-4077831550260994387');" style="">1920                  DynamicResultSet drs = adminEntityService.getRecords(ppr).getDynamicResultSet();                  </span>
<span  style="">1921                                                                                                                    </span>
<span class="5306875073536616661" onmouseenter="enter('5306875073536616661');" onmouseout="out('5306875073536616661');" style="">1922                  for (Entity entity : drs.getRecords()) {                                                          </span>
<span class="-6641717520052480574" onmouseenter="enter('-6641717520052480574');" onmouseout="out('-6641717520052480574');" style="">1923                      String keyValue = entity.getPMap().get(mapMd.getMapKeyOptionEntityValueField()).getValue();   </span>
<span class="1998582968522880029" onmouseenter="enter('1998582968522880029');" onmouseout="out('1998582968522880029');" style=""><abbr title="1924                      String keyDisplayValue = entity.getPMap().get(mapMd.getMapKeyOptionEntityDisplayField()).getValue();">1924                      String keyDisplayValue = entity.getPMap().get(mapMd.getMapKeyOptionEntityDisplayField()).getVaðŸ”µ</abbr></span>
<span class="-6645431312205396504" onmouseenter="enter('-6645431312205396504');" onmouseout="out('-6645431312205396504');" style="">1925                      temp.putOption(keyValue, keyDisplayValue);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1926                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1927              }                                                                                                     </span>
<span class="3546270200362241310" onmouseenter="enter('3546270200362241310');" onmouseout="out('3546270200362241310');" style="">1928              keyField = temp;                                                                                      </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1929          } else {                                                                                                  </span>
<span class="-8573842998963738304" onmouseenter="enter('-8573842998963738304');" onmouseout="out('-8573842998963738304');" style="">1930              keyField = new Field().withName(&quot;key&quot;)                                                                </span>
<span class="7310006641400837736" onmouseenter="enter('7310006641400837736');" onmouseout="out('7310006641400837736');" style="">1931                                  .withFieldType(SupportedFieldType.STRING.toString())                              </span>
<span class="-5198779959493179668" onmouseenter="enter('-5198779959493179668');" onmouseout="out('-5198779959493179668');" style="">1932                                  .withFriendlyName(mapStructure.getKeyPropertyFriendlyName());                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1933          }                                                                                                         </span>
<span class="7153206597057282580" onmouseenter="enter('7153206597057282580');" onmouseout="out('7153206597057282580');" style="">1934          keyField.setRequired(true);                                                                               </span>
<span class="6962995846651568894" onmouseenter="enter('6962995846651568894');" onmouseout="out('6962995846651568894');" style="">1935          ef.addMapKeyField(cmd, keyField);                                                                         </span>
<span  style="">1936                                                                                                                    </span>
<span class="-1847798595136835783" onmouseenter="enter('-1847798595136835783');" onmouseout="out('-1847798595136835783');" style="">1937          // Set the fields for this form                                                                           </span>
<span class="4702227326769048309" onmouseenter="enter('4702227326769048309');" onmouseout="out('4702227326769048309');" style="">1938          List&lt;Property&gt; mapFormProperties;                                                                         </span>
<span class="-3881724092572027053" onmouseenter="enter('-3881724092572027053');" onmouseout="out('-3881724092572027053');" style="">1939          if (mapMd.isSimpleValue()) {                                                                              </span>
<span class="7835835150562546154" onmouseenter="enter('7835835150562546154');" onmouseout="out('7835835150562546154');" style="">1940              ef.setIdProperty(&quot;key&quot;);                                                                              </span>
<span class="7501966408885015423" onmouseenter="enter('7501966408885015423');" onmouseout="out('7501966408885015423');" style="">1941              mapFormProperties = new ArrayList&lt;&gt;();                                                                </span>
<span class="1155137054745373714" onmouseenter="enter('1155137054745373714');" onmouseout="out('1155137054745373714');" style="">1942              Property valueProp = cmd.getPMap().get(&quot;value&quot;);                                                      </span>
<span class="4126012312120971947" onmouseenter="enter('4126012312120971947');" onmouseout="out('4126012312120971947');" style="">1943              mapFormProperties.add(valueProp);                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1944          } else {                                                                                                  </span>
<span class="-200233704674088452" onmouseenter="enter('-200233704674088452');" onmouseout="out('-200233704674088452');" style="">1945              String valueClassName = mapStructure.getValueClassName();                                             </span>
<span class="4792123228934068864" onmouseenter="enter('4792123228934068864');" onmouseout="out('4792123228934068864');" style="">1946              List&lt;String&gt; classNames = getValueClassNames(valueClassName);                                         </span>
<span  style="">1947                                                                                                                    </span>
<span class="6736035458303245430" onmouseenter="enter('6736035458303245430');" onmouseout="out('6736035458303245430');" style="">1948              mapFormProperties = new ArrayList&lt;&gt;(Arrays.asList(cmd.getProperties()));                              </span>
<span class="-5375146325606190554" onmouseenter="enter('-5375146325606190554');" onmouseout="out('-5375146325606190554');" style="">1949              filterMapFormProperties(mapFormProperties, classNames);                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1950          }                                                                                                         </span>
<span  style="">1951                                                                                                                    </span>
<span class="-2821207520526953468" onmouseenter="enter('-2821207520526953468');" onmouseout="out('-2821207520526953468');" style="">1952          setEntityFormFields(cmd, ef, mapFormProperties);                                                          </span>
<span  style="">1953                                                                                                                    </span>
<span class="-6303462610985739492" onmouseenter="enter('-6303462610985739492');" onmouseout="out('-6303462610985739492');" style="">1954          Field f = new Field()                                                                                     </span>
<span class="4084107705668748282" onmouseenter="enter('4084107705668748282');" onmouseout="out('4084107705668748282');" style="">1955                  .withName(&quot;priorKey&quot;)                                                                             </span>
<span class="-2458072313875538806" onmouseenter="enter('-2458072313875538806');" onmouseout="out('-2458072313875538806');" style="">1956                  .withFieldType(SupportedFieldType.HIDDEN.toString());                                             </span>
<span class="-2135186019977572427" onmouseenter="enter('-2135186019977572427');" onmouseout="out('-2135186019977572427');" style="">1957          ef.addHiddenField(cmd, f);                                                                                </span>
<span  style="">1958                                                                                                                    </span>
<span class="-8148842246743906492" onmouseenter="enter('-8148842246743906492');" onmouseout="out('-8148842246743906492');" style="">1959          ef.setParentId(parentId);                                                                                 </span>
<span  style="">1960                                                                                                                    </span>
<span class="3260120157565581788" onmouseenter="enter('3260120157565581788');" onmouseout="out('3260120157565581788');" style="">1961          return ef;                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1962      }                                                                                                             </span>
<span  style="">1963                                                                                                                    </span>
<span class="-4829102623695042124" onmouseenter="enter('-4829102623695042124');" onmouseout="out('-4829102623695042124');" style="">1964      protected List&lt;String&gt; getValueClassNames(String valueClassName) {                                            </span>
<span class="636492465030384706" onmouseenter="enter('636492465030384706');" onmouseout="out('636492465030384706');" style="">1965          PersistenceManager pm = PersistenceManagerFactory.getPersistenceManager(valueClassName);                  </span>
<span class="2246167872340129747" onmouseenter="enter('2246167872340129747');" onmouseout="out('2246167872340129747');" style="">1966          List&lt;String&gt; classNames = new ArrayList&lt;&gt;();                                                              </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1967          try {                                                                                                     </span>
<span class="3938321968230834834" onmouseenter="enter('3938321968230834834');" onmouseout="out('3938321968230834834');" style="">1968              Class&lt;?&gt;[] mapEntities = pm.getPolymorphicEntities(valueClassName);                                   </span>
<span class="-4772743881626943892" onmouseenter="enter('-4772743881626943892');" onmouseout="out('-4772743881626943892');" style="">1969              for (Class clazz : mapEntities) {                                                                     </span>
<span class="6466727849961562132" onmouseenter="enter('6466727849961562132');" onmouseout="out('6466727849961562132');" style="">1970                  classNames.add(clazz.getName());                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1971              }                                                                                                     </span>
<span class="1054888787890391626" onmouseenter="enter('1054888787890391626');" onmouseout="out('1054888787890391626');" style="">1972          } catch (ClassNotFoundException e) {                                                                      </span>
<span class="-942678047271525020" onmouseenter="enter('-942678047271525020');" onmouseout="out('-942678047271525020');" style="">1973              classNames.add(valueClassName);                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1974          }                                                                                                         </span>
<span class="-3648191997111592889" onmouseenter="enter('-3648191997111592889');" onmouseout="out('-3648191997111592889');" style="">1975          return classNames;                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1976      }                                                                                                             </span>
<span  style="">1977                                                                                                                    </span>
<span class="9085638029133270349" onmouseenter="enter('9085638029133270349');" onmouseout="out('9085638029133270349');" style="">1978      protected void filterMapFormProperties(List&lt;Property&gt; mapFormProperties, final List&lt;String&gt; classNames) {     </span>
<span class="-1689600506312159966" onmouseenter="enter('-1689600506312159966');" onmouseout="out('-1689600506312159966');" style="">1979          CollectionUtils.filter(mapFormProperties, new Predicate() {                                               </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1980              @Override                                                                                             </span>
<span class="7760113550206984696" onmouseenter="enter('7760113550206984696');" onmouseout="out('7760113550206984696');" style="">1981              public boolean evaluate(Object object) {                                                              </span>
<span class="2621584028127774901" onmouseenter="enter('2621584028127774901');" onmouseout="out('2621584028127774901');" style="">1982                  Property p = (Property) object;                                                                   </span>
<span class="5284872755288504872" onmouseenter="enter('5284872755288504872');" onmouseout="out('5284872755288504872');" style="">1983                  for (String availType : p.getMetadata().getAvailableToTypes()) {                                  </span>
<span class="-1266753160152563645" onmouseenter="enter('-1266753160152563645');" onmouseout="out('-1266753160152563645');" style="">1984                      if (classNames.contains(availType)) {                                                         </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">1985                          return true;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1986                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1987                  }                                                                                                 </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1988                  return false;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1989              }                                                                                                     </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">1990          });                                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1991      }                                                                                                             </span>
<span  style="">1992                                                                                                                    </span>
<span class="8263860057269155273" onmouseenter="enter('8263860057269155273');" onmouseout="out('8263860057269155273');" style="">1993      protected EntityForm createStandardEntityForm() {                                                             </span>
<span class="4163598687278852410" onmouseenter="enter('4163598687278852410');" onmouseout="out('4163598687278852410');" style="">1994          EntityForm ef = new EntityForm();                                                                         </span>
<span class="-2237425030372835917" onmouseenter="enter('-2237425030372835917');" onmouseout="out('-2237425030372835917');" style="">1995          ef.addAction(DefaultEntityFormActions.SAVE);                                                              </span>
<span class="3260120157565581788" onmouseenter="enter('3260120157565581788');" onmouseout="out('3260120157565581788');" style="">1996          return ef;                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1997      }                                                                                                             </span>
<span  style="">1998                                                                                                                    </span>
<span class="-7002137249022503423" onmouseenter="enter('-7002137249022503423');" onmouseout="out('-7002137249022503423');" style="">1999      protected EntityForm createStandardAdornedEntityForm() {                                                      </span>
<span class="4163598687278852410" onmouseenter="enter('4163598687278852410');" onmouseout="out('4163598687278852410');" style="">2000          EntityForm ef = new EntityForm();                                                                         </span>
<span class="3915105942460614290" onmouseenter="enter('3915105942460614290');" onmouseout="out('3915105942460614290');" style="">2001          ef.addAction(DefaultAdornedEntityFormActions.Add);                                                        </span>
<span class="3260120157565581788" onmouseenter="enter('3260120157565581788');" onmouseout="out('3260120157565581788');" style="">2002          return ef;                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2003      }                                                                                                             </span>
<span  style="">2004                                                                                                                    </span>
<span class="-8997817584059672482" onmouseenter="enter('-8997817584059672482');" onmouseout="out('-8997817584059672482');" style="">2005      protected VisibilityEnum[] getGridHiddenVisibilities() {                                                      </span>
<span class="-4220328425458971190" onmouseenter="enter('-4220328425458971190');" onmouseout="out('-4220328425458971190');" style="">2006          return FormBuilderServiceImpl.GRID_HIDDEN_VISIBILITIES;                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2007      }                                                                                                             </span>
<span  style="">2008                                                                                                                    </span>
<span class="5519346243833044852" onmouseenter="enter('5519346243833044852');" onmouseout="out('5519346243833044852');" style="">2009      protected VisibilityEnum[] getFormHiddenVisibilities() {                                                      </span>
<span class="-3897912334343924171" onmouseenter="enter('-3897912334343924171');" onmouseout="out('-3897912334343924171');" style="">2010          return FormBuilderServiceImpl.FORM_HIDDEN_VISIBILITIES;                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2011      }                                                                                                             </span>
<span  style="">2012                                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2013  }                                                                                                                 </span></pre></td>
                        </tr>
                    </table>
                </div>
              </body>
            </html>
            