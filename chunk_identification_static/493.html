<!DOCTYPE html>
    <html lang="en">
              <head>
                <meta charset="utf-8">
                <title>493</title>
                    <style>
                        #top {
                            height: 48vh;
                            overflow-y: auto;
                        }
                        #bottom {
                            height: 48vh;
                            overflow-y: auto;
                        }
                        .highlighted {
                            background-color: rgba(177, 82, 227, 0.85) !important;
                        }
                    </style>
                    <script>
                        function enter(c) {
                            const lines = document.getElementsByClassName(c);
                            for (let i = 0; i < lines.length; i++) {
                               lines.item(i).classList.add('highlighted');
                            }
                        }
                        function out(c) {
                            const lines = document.getElementsByClassName(c);
                            for (let i = 0; i < lines.length; i++) {
                               lines.item(i).classList.remove('highlighted');
                            }
                        }
                    </script>
              </head>
              <body>
                <span style="height: 4vh">
                    493
                    <a href="492.html">prev</a>
                    <a href="494.html">next</a>
                    <a href="493_chunks.html">chunks</a>
                    <a href="index.html">index</a>
                    CyanogenMod/android_packages_apps_Trebuchet_7118d9dd17f51d998440f257935d6670c927383f_src/com/android/launcher3/AllAppsList.java
                    <textarea rows=1 onclick='navigator.clipboard.writeText(this.value)'>cd C:\studies\se\mega\git-analyzer-plus\notebooks\debug
del /Q *
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\CyanogenMod\android_packages_apps_Trebuchet show &quot;7118d9dd17f51d998440f257935d6670c927383f:src/com/android/launcher3/AllAppsList.java&quot; &gt; committed.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\CyanogenMod\android_packages_apps_Trebuchet show &quot;7118d9dd17f51d998440f257935d6670c927383f^1:src/com/android/launcher3/AllAppsList.java&quot; &gt; ours.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\CyanogenMod\android_packages_apps_Trebuchet show &quot;7118d9dd17f51d998440f257935d6670c927383f^2:src/com/android/launcher3/AllAppsList.java&quot; &gt; theirs.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\CyanogenMod\android_packages_apps_Trebuchet show &quot;58dcef7b28ec0bbc8e097b2cd45a6c6542a4cdef:src/com/android/launcher3/AllAppsList.java&quot; &gt; base.java
copy ours.java 1ours.java
copy ours.java 2ours.java
copy theirs.java 1theirs.java
copy theirs.java 2theirs.java
copy base.java 1base.java
copy base.java 2base.java
&quot;C:\Program Files\Java\jdk1.8.0_241\bin\java.exe&quot; -Dfile.encoding=UTF-8 -jar &quot;C:\studies\se\jFSTMerge\build\libs\jFSTMerge-all.jar&quot; C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1ours.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1base.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1theirs.java -o C:\studies\se\mega\git-analyzer-plus\notebooks\debug\jfstmerge.java --show-base
&quot;C:\Program Files\Eclipse Adoptium\jdk-17.0.11.9-hotspot\bin\java.exe&quot; -Dfile.encoding=UTF-8 -jar &quot;C:\studies\se\spork\target\spork-0.5.0-SNAPSHOT.jar&quot; C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2ours.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2base.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2theirs.java -o C:\studies\se\mega\git-analyzer-plus\notebooks\debug\spork.java
del /Q 1*.java
del /Q 2*.java
del /Q jfstmerge.java.merge
</textarea>
                    {strict: [[b]], subset: [[b]]}
                </span>
                <div id="top">

                    <table>
                        <tr>
                            <th>line based (standard git)</th>
                            <th>jfstmerge</th>
                            <th>spork</th>
                        </tr>
                        <tr>
                            <td><pre><span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style="">   1 /*                                                                                                       </span>
<span class="1710841298952644868" onmouseenter="enter('1710841298952644868');" onmouseout="out('1710841298952644868');" style="">   2  * Copyright (C) 2008 The Android Open Source Project                                                    </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   3  *                                                                                                       </span>
<span class="-7144700690364548245" onmouseenter="enter('-7144700690364548245');" onmouseout="out('-7144700690364548245');" style="">   4  * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);                                       </span>
<span class="-6614298523444173250" onmouseenter="enter('-6614298523444173250');" onmouseout="out('-6614298523444173250');" style="">   5  * you may not use this file except in compliance with the License.                                      </span>
<span class="-4753901504248728101" onmouseenter="enter('-4753901504248728101');" onmouseout="out('-4753901504248728101');" style="">   6  * You may obtain a copy of the License at                                                               </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   7  *                                                                                                       </span>
<span class="-763207030729826407" onmouseenter="enter('-763207030729826407');" onmouseout="out('-763207030729826407');" style="">   8  *      http://www.apache.org/licenses/LICENSE-2.0                                                       </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   9  *                                                                                                       </span>
<span class="2557607632756179983" onmouseenter="enter('2557607632756179983');" onmouseout="out('2557607632756179983');" style="">  10  * Unless required by applicable law or agreed to in writing, software                                   </span>
<span class="-9189129105512731955" onmouseenter="enter('-9189129105512731955');" onmouseout="out('-9189129105512731955');" style="">  11  * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,                                     </span>
<span class="5781161717946418340" onmouseenter="enter('5781161717946418340');" onmouseout="out('5781161717946418340');" style="">  12  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.                              </span>
<span class="1761562277992059393" onmouseenter="enter('1761562277992059393');" onmouseout="out('1761562277992059393');" style="">  13  * See the License for the specific language governing permissions and                                   </span>
<span class="7217408601297779962" onmouseenter="enter('7217408601297779962');" onmouseout="out('7217408601297779962');" style="">  14  * limitations under the License.                                                                        </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  15  */                                                                                                      </span>
<span  style="">  16                                                                                                          </span>
<span class="5824586583419512860" onmouseenter="enter('5824586583419512860');" onmouseout="out('5824586583419512860');" style="">  17 package com.android.launcher3;                                                                           </span>
<span  style="">  18                                                                                                          </span>
<span class="6810188203727856944" onmouseenter="enter('6810188203727856944');" onmouseout="out('6810188203727856944');" style="">  19 import android.content.ComponentName;                                                                    </span>
<span class="5922045460006936195" onmouseenter="enter('5922045460006936195');" onmouseout="out('5922045460006936195');" style="">  20 import android.content.Context;                                                                          </span>
<span class="6568903789857736568" onmouseenter="enter('6568903789857736568');" onmouseout="out('6568903789857736568');" style="">  21 import android.content.Intent;                                                                           </span>
<span class="-9183914406029598577" onmouseenter="enter('-9183914406029598577');" onmouseout="out('-9183914406029598577');" style="">  22 import android.content.pm.ActivityInfo;                                                                  </span>
<span class="-1290624633738557221" onmouseenter="enter('-1290624633738557221');" onmouseout="out('-1290624633738557221');" style="">  23 import android.content.pm.PackageManager;                                                                </span>
<span class="8582326229770324815" onmouseenter="enter('8582326229770324815');" onmouseout="out('8582326229770324815');" style="">  24 import android.content.pm.ResolveInfo;                                                                   </span>
<span  style="">  25                                                                                                          </span>
<span class="-394760018964595537" onmouseenter="enter('-394760018964595537');" onmouseout="out('-394760018964595537');" style="">  26 import com.android.launcher3.compat.LauncherActivityInfoCompat;                                          </span>
<span class="7348855441893227306" onmouseenter="enter('7348855441893227306');" onmouseout="out('7348855441893227306');" style="">  27 import com.android.launcher3.compat.LauncherAppsCompat;                                                  </span>
<span class="6372524458266053383" onmouseenter="enter('6372524458266053383');" onmouseout="out('6372524458266053383');" style="">  28 import com.android.launcher3.compat.UserHandleCompat;                                                    </span>
<span  style="">  29                                                                                                          </span>
<span class="9191247685397773893" onmouseenter="enter('9191247685397773893');" onmouseout="out('9191247685397773893');" style="">  30 import java.util.ArrayList;                                                                              </span>
<span class="-1786020958497218848" onmouseenter="enter('-1786020958497218848');" onmouseout="out('-1786020958497218848');" style="">  31 import java.util.List;                                                                                   </span>
<span  style="">  32                                                                                                          </span>
<span  style="">  33                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  34 /**                                                                                                      </span>
<span class="2610009611091842856" onmouseenter="enter('2610009611091842856');" onmouseout="out('2610009611091842856');" style="">  35  * Stores the list of all applications for the all apps view.                                            </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  36  */                                                                                                      </span>
<span class="-7274444873086336525" onmouseenter="enter('-7274444873086336525');" onmouseout="out('-7274444873086336525');" style="">  37 class AllAppsList {                                                                                      </span>
<span class="6815784767769879144" onmouseenter="enter('6815784767769879144');" onmouseout="out('6815784767769879144');" style="">  38     public static final int DEFAULT_APPLICATIONS_NUMBER = 42;                                            </span>
<span  style="">  39                                                                                                          </span>
<span class="-2860744678198899912" onmouseenter="enter('-2860744678198899912');" onmouseout="out('-2860744678198899912');" style="">  40     /** The list off all apps. */                                                                        </span>
<span class="745790943183470157" onmouseenter="enter('745790943183470157');" onmouseout="out('745790943183470157');" style="">  41     public ArrayList&lt;AppInfo&gt; data =                                                                     </span>
<span class="1543666060105331231" onmouseenter="enter('1543666060105331231');" onmouseout="out('1543666060105331231');" style="">  42             new ArrayList&lt;AppInfo&gt;(DEFAULT_APPLICATIONS_NUMBER);                                         </span>
<span class="-2318138568943717218" onmouseenter="enter('-2318138568943717218');" onmouseout="out('-2318138568943717218');" style="">  43     /** The list of apps that have been added since the last notify() call. */                           </span>
<span class="2455668399231812776" onmouseenter="enter('2455668399231812776');" onmouseout="out('2455668399231812776');" style="">  44     public ArrayList&lt;AppInfo&gt; added =                                                                    </span>
<span class="1543666060105331231" onmouseenter="enter('1543666060105331231');" onmouseout="out('1543666060105331231');" style="">  45             new ArrayList&lt;AppInfo&gt;(DEFAULT_APPLICATIONS_NUMBER);                                         </span>
<span class="5689859138989553098" onmouseenter="enter('5689859138989553098');" onmouseout="out('5689859138989553098');" style="">  46     /** The list of apps that have been removed since the last notify() call. */                         </span>
<span class="5962158200043260112" onmouseenter="enter('5962158200043260112');" onmouseout="out('5962158200043260112');" style="">  47     public ArrayList&lt;AppInfo&gt; removed = new ArrayList&lt;AppInfo&gt;();                                        </span>
<span class="2205421830873834692" onmouseenter="enter('2205421830873834692');" onmouseout="out('2205421830873834692');" style="">  48     /** The list of apps that have been modified since the last notify() call. */                        </span>
<span class="734344745062201427" onmouseenter="enter('734344745062201427');" onmouseout="out('734344745062201427');" style="">  49     public ArrayList&lt;AppInfo&gt; modified = new ArrayList&lt;AppInfo&gt;();                                       </span>
<span  style="">  50                                                                                                          </span>
<span class="-3446390922171092190" onmouseenter="enter('-3446390922171092190');" onmouseout="out('-3446390922171092190');" style="">  51     private IconCache mIconCache;                                                                        </span>
<span  style="">  52                                                                                                          </span>
<span class="6725701503700558455" onmouseenter="enter('6725701503700558455');" onmouseout="out('6725701503700558455');" style="">  53     private AppFilter mAppFilter;                                                                        </span>
<span  style="">  54                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  55     /**                                                                                                  </span>
<span class="2496285524079702545" onmouseenter="enter('2496285524079702545');" onmouseout="out('2496285524079702545');" style="">  56      * Boring constructor.                                                                               </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  57      */                                                                                                  </span>
<span class="-7973856851091008922" onmouseenter="enter('-7973856851091008922');" onmouseout="out('-7973856851091008922');" style="">  58     public AllAppsList(IconCache iconCache, AppFilter appFilter) {                                       </span>
<span class="1920389422449187498" onmouseenter="enter('1920389422449187498');" onmouseout="out('1920389422449187498');" style="">  59         mIconCache = iconCache;                                                                          </span>
<span class="-731369552390552931" onmouseenter="enter('-731369552390552931');" onmouseout="out('-731369552390552931');" style="">  60         mAppFilter = appFilter;                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  61     }                                                                                                    </span>
<span  style="">  62                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  63     /**                                                                                                  </span>
<span class="-8981990233191318303" onmouseenter="enter('-8981990233191318303');" onmouseout="out('-8981990233191318303');" style="">  64      * Add the supplied ApplicationInfo objects to the list, and enqueue it into the                     </span>
<span class="-7118316917537758192" onmouseenter="enter('-7118316917537758192');" onmouseout="out('-7118316917537758192');" style="">  65      * list to broadcast when notify() is called.                                                        </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">  66      *                                                                                                   </span>
<span class="1862405582651527032" onmouseenter="enter('1862405582651527032');" onmouseout="out('1862405582651527032');" style="">  67      * If the app is already in the list, doesn&#x27;t add it.                                                </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  68      */                                                                                                  </span>
<span class="8680343285174562180" onmouseenter="enter('8680343285174562180');" onmouseout="out('8680343285174562180');" style="">  69     public void add(AppInfo info) {                                                                      </span>
<span class="-7383631586676499787" onmouseenter="enter('-7383631586676499787');" onmouseout="out('-7383631586676499787');" style="">  70         if (mAppFilter != null &amp;&amp; !mAppFilter.shouldShowApp(info.componentName)) {                       </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">  71             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  72         }                                                                                                </span>
<span class="4426514774478750888" onmouseenter="enter('4426514774478750888');" onmouseout="out('4426514774478750888');" style="">  73         if (findActivity(data, info.componentName, info.user)) {                                         </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">  74             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  75         }                                                                                                </span>
<span class="-7186167164144977405" onmouseenter="enter('-7186167164144977405');" onmouseout="out('-7186167164144977405');" style="">  76         data.add(info);                                                                                  </span>
<span class="6297895021131252846" onmouseenter="enter('6297895021131252846');" onmouseout="out('6297895021131252846');" style="">  77         added.add(info);                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  78     }                                                                                                    </span>
<span  style="">  79                                                                                                          </span>
<span class="8383369073942967129" onmouseenter="enter('8383369073942967129');" onmouseout="out('8383369073942967129');" style="">  80     public void clear() {                                                                                </span>
<span class="3625030345540762376" onmouseenter="enter('3625030345540762376');" onmouseout="out('3625030345540762376');" style="">  81         data.clear();                                                                                    </span>
<span class="-3532776475985990888" onmouseenter="enter('-3532776475985990888');" onmouseout="out('-3532776475985990888');" style="">  82         // TODO: do we clear these too?                                                                  </span>
<span class="-5699441102723791460" onmouseenter="enter('-5699441102723791460');" onmouseout="out('-5699441102723791460');" style="">  83         added.clear();                                                                                   </span>
<span class="-8171639104297689352" onmouseenter="enter('-8171639104297689352');" onmouseout="out('-8171639104297689352');" style="">  84         removed.clear();                                                                                 </span>
<span class="8808169441892969779" onmouseenter="enter('8808169441892969779');" onmouseout="out('8808169441892969779');" style="">  85         modified.clear();                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  86     }                                                                                                    </span>
<span  style="">  87                                                                                                          </span>
<span class="5501185527198334216" onmouseenter="enter('5501185527198334216');" onmouseout="out('5501185527198334216');" style="">  88     public int size() {                                                                                  </span>
<span class="-1497725231916451819" onmouseenter="enter('-1497725231916451819');" onmouseout="out('-1497725231916451819');" style="">  89         return data.size();                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  90     }                                                                                                    </span>
<span  style="">  91                                                                                                          </span>
<span class="-6501432589969299828" onmouseenter="enter('-6501432589969299828');" onmouseout="out('-6501432589969299828');" style="">  92     public AppInfo get(int index) {                                                                      </span>
<span class="7032246991200994526" onmouseenter="enter('7032246991200994526');" onmouseout="out('7032246991200994526');" style="">  93         return data.get(index);                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  94     }                                                                                                    </span>
<span  style="">  95                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  96     /**                                                                                                  </span>
<span class="8159855286441519655" onmouseenter="enter('8159855286441519655');" onmouseout="out('8159855286441519655');" style="">  97      * Add the icons for the supplied apk called packageName.                                            </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  98      */                                                                                                  </span>
<span class="-3190168712320507375" onmouseenter="enter('-3190168712320507375');" onmouseout="out('-3190168712320507375');" style="">  99     public void addPackage(Context context, String packageName, UserHandleCompat user) {                 </span>
<span class="1503035760407804955" onmouseenter="enter('1503035760407804955');" onmouseout="out('1503035760407804955');" style=""> 100         final LauncherAppsCompat launcherApps = LauncherAppsCompat.getInstance(context);                 </span>
<span class="8847745329654956593" onmouseenter="enter('8847745329654956593');" onmouseout="out('8847745329654956593');" style=""> 101         final List&lt;LauncherActivityInfoCompat&gt; matches = launcherApps.getActivityList(packageName,       </span>
<span class="1134753456474152449" onmouseenter="enter('1134753456474152449');" onmouseout="out('1134753456474152449');" style=""> 102                 user);                                                                                   </span>
<span  style=""> 103                                                                                                          </span>
<span class="-4392145982843511212" onmouseenter="enter('-4392145982843511212');" onmouseout="out('-4392145982843511212');" style=""> 104         if (matches.size() &gt; 0) {                                                                        </span>
<span class="6783020136140698262" onmouseenter="enter('6783020136140698262');" onmouseout="out('6783020136140698262');" style=""> 105             for (LauncherActivityInfoCompat info : matches) {                                            </span>
<span class="-4311572429590028382" onmouseenter="enter('-4311572429590028382');" onmouseout="out('-4311572429590028382');" style=""> 106                 add(new AppInfo(context, info, user, mIconCache, null));                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 107             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 108         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 109     }                                                                                                    </span>
<span  style=""> 110                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 111     /**                                                                                                  </span>
<span class="8924965312796975897" onmouseenter="enter('8924965312796975897');" onmouseout="out('8924965312796975897');" style=""> 112      * Remove the apps for the given apk identified by packageName.                                      </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 113      */                                                                                                  </span>
<span class="-6776151234703058548" onmouseenter="enter('-6776151234703058548');" onmouseout="out('-6776151234703058548');" style=""> 114     public void removePackage(String packageName, UserHandleCompat user) {                               </span>
<span class="8835944207165319620" onmouseenter="enter('8835944207165319620');" onmouseout="out('8835944207165319620');" style=""> 115         final List&lt;AppInfo&gt; data = this.data;                                                            </span>
<span class="5261423022105669060" onmouseenter="enter('5261423022105669060');" onmouseout="out('5261423022105669060');" style=""> 116         for (int i = data.size() - 1; i &gt;= 0; i--) {                                                     </span>
<span class="-7225725324024154592" onmouseenter="enter('-7225725324024154592');" onmouseout="out('-7225725324024154592');" style=""> 117             AppInfo info = data.get(i);                                                                  </span>
<span class="3939017754561154888" onmouseenter="enter('3939017754561154888');" onmouseout="out('3939017754561154888');" style=""> 118             final ComponentName component = info.intent.getComponent();                                  </span>
<span class="-7692104339662087356" onmouseenter="enter('-7692104339662087356');" onmouseout="out('-7692104339662087356');" style=""> 119             if (info.user.equals(user) &amp;&amp; packageName.equals(component.getPackageName())) {              </span>
<span class="-6757903531839214419" onmouseenter="enter('-6757903531839214419');" onmouseout="out('-6757903531839214419');" style=""> 120                 removed.add(info);                                                                       </span>
<span class="1518519619716086564" onmouseenter="enter('1518519619716086564');" onmouseout="out('1518519619716086564');" style=""> 121                 data.remove(i);                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 122             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 123         }                                                                                                </span>
<span class="-4667942192763773056" onmouseenter="enter('-4667942192763773056');" onmouseout="out('-4667942192763773056');" style=""> 124 &lt;&lt;&lt;&lt;&lt;&lt;&lt; GitAnalyzerPlus_ours                                                                             </span>
<span class="27975313893554723" onmouseenter="enter('27975313893554723');" onmouseout="out('27975313893554723');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 125         mIconCache.remove(packageName, user);                                                            </span>
<span class="6741223626729319096" onmouseenter="enter('6741223626729319096');" onmouseout="out('6741223626729319096');" style=""> 126 ||||||| GitAnalyzerPlus_base                                                                             </span>
<span class="6399390198095361574" onmouseenter="enter('6399390198095361574');" onmouseout="out('6399390198095361574');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 127         mIconCache.remove(packageName);                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 128     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 129                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 130     /**                                                                                                  </span>
<span class="-4838399043083901482" onmouseenter="enter('-4838399043083901482');" onmouseout="out('-4838399043083901482');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 131      * Add and remove icons for this package which has been updated.                                     </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 132      */                                                                                                  </span>
<span class="8318530341761506686" onmouseenter="enter('8318530341761506686');" onmouseout="out('8318530341761506686');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 133     public void updatePackage(Context context, String packageName) {                                     </span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style=""> 134 =======                                                                                                  </span>
<span class="-8373531441510729347" onmouseenter="enter('-8373531441510729347');" onmouseout="out('-8373531441510729347');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 135         // This is more aggressive than it needs to be.                                                  </span>
<span class="-7277164238927450446" onmouseenter="enter('-7277164238927450446');" onmouseout="out('-7277164238927450446');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 136         mIconCache.flush();                                                                              </span>
<span class="-1382546150375666264" onmouseenter="enter('-1382546150375666264');" onmouseout="out('-1382546150375666264');" style=""> 137 &gt;&gt;&gt;&gt;&gt;&gt;&gt; GitAnalyzerPlus_theirs                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 138     }                                                                                                    </span>
<span  style=""> 139                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 140     /**                                                                                                  </span>
<span class="-4838399043083901482" onmouseenter="enter('-4838399043083901482');" onmouseout="out('-4838399043083901482');" style=""> 141      * Add and remove icons for this package which has been updated.                                     </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 142      */                                                                                                  </span>
<span class="-1777314305379940625" onmouseenter="enter('-1777314305379940625');" onmouseout="out('-1777314305379940625');" style=""> 143     public void updatePackage(Context context, String packageName, UserHandleCompat user) {              </span>
<span class="1503035760407804955" onmouseenter="enter('1503035760407804955');" onmouseout="out('1503035760407804955');" style=""> 144         final LauncherAppsCompat launcherApps = LauncherAppsCompat.getInstance(context);                 </span>
<span class="8847745329654956593" onmouseenter="enter('8847745329654956593');" onmouseout="out('8847745329654956593');" style=""> 145         final List&lt;LauncherActivityInfoCompat&gt; matches = launcherApps.getActivityList(packageName,       </span>
<span class="1134753456474152449" onmouseenter="enter('1134753456474152449');" onmouseout="out('1134753456474152449');" style=""> 146                 user);                                                                                   </span>
<span class="-4392145982843511212" onmouseenter="enter('-4392145982843511212');" onmouseout="out('-4392145982843511212');" style=""> 147         if (matches.size() &gt; 0) {                                                                        </span>
<span class="8518378968323826463" onmouseenter="enter('8518378968323826463');" onmouseout="out('8518378968323826463');" style=""> 148             // Find disabled/removed activities and remove them from data and add them                   </span>
<span class="-8567721530358817855" onmouseenter="enter('-8567721530358817855');" onmouseout="out('-8567721530358817855');" style=""> 149             // to the removed list.                                                                      </span>
<span class="5261423022105669060" onmouseenter="enter('5261423022105669060');" onmouseout="out('5261423022105669060');" style=""> 150             for (int i = data.size() - 1; i &gt;= 0; i--) {                                                 </span>
<span class="-2601216551113717144" onmouseenter="enter('-2601216551113717144');" onmouseout="out('-2601216551113717144');" style=""> 151                 final AppInfo applicationInfo = data.get(i);                                             </span>
<span class="3941728651888076052" onmouseenter="enter('3941728651888076052');" onmouseout="out('3941728651888076052');" style=""> 152                 final ComponentName component = applicationInfo.intent.getComponent();                   </span>
<span class="-7933265751245397173" onmouseenter="enter('-7933265751245397173');" onmouseout="out('-7933265751245397173');" style=""> 153                 if (user.equals(applicationInfo.user)                                                    </span>
<span class="-4731264622599188863" onmouseenter="enter('-4731264622599188863');" onmouseout="out('-4731264622599188863');" style=""> 154                         &amp;&amp; packageName.equals(component.getPackageName())) {                             </span>
<span class="-55241334586483794" onmouseenter="enter('-55241334586483794');" onmouseout="out('-55241334586483794');" style=""> 155                     if (!findActivity(matches, component)) {                                             </span>
<span class="3352366077941007848" onmouseenter="enter('3352366077941007848');" onmouseout="out('3352366077941007848');" style=""> 156                         removed.add(applicationInfo);                                                    </span>
<span class="5383064569333074457" onmouseenter="enter('5383064569333074457');" onmouseout="out('5383064569333074457');" style=""> 157                         mIconCache.remove(component, user);                                              </span>
<span class="1518519619716086564" onmouseenter="enter('1518519619716086564');" onmouseout="out('1518519619716086564');" style=""> 158                         data.remove(i);                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 159                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 160                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 161             }                                                                                            </span>
<span  style=""> 162                                                                                                          </span>
<span class="-4767682497305231646" onmouseenter="enter('-4767682497305231646');" onmouseout="out('-4767682497305231646');" style=""> 163             // Find enabled activities and add them to the adapter                                       </span>
<span class="-4153876202891715545" onmouseenter="enter('-4153876202891715545');" onmouseout="out('-4153876202891715545');" style=""> 164             // Also updates existing activities with new labels/icons                                    </span>
<span class="-8082051884301984312" onmouseenter="enter('-8082051884301984312');" onmouseout="out('-8082051884301984312');" style=""> 165             int count = matches.size();                                                                  </span>
<span class="678980937581768133" onmouseenter="enter('678980937581768133');" onmouseout="out('678980937581768133');" style=""> 166             for (int i = 0; i &lt; count; i++) {                                                            </span>
<span class="6505367795053961568" onmouseenter="enter('6505367795053961568');" onmouseout="out('6505367795053961568');" style=""> 167                 final LauncherActivityInfoCompat info = matches.get(i);                                  </span>
<span class="-1209711392859633947" onmouseenter="enter('-1209711392859633947');" onmouseout="out('-1209711392859633947');" style=""> 168                 AppInfo applicationInfo = findApplicationInfoLocked(                                     </span>
<span class="6404447875113979134" onmouseenter="enter('6404447875113979134');" onmouseout="out('6404447875113979134');" style=""> 169                         info.getComponentName().getPackageName(), user,                                  </span>
<span class="8556901928637861886" onmouseenter="enter('8556901928637861886');" onmouseout="out('8556901928637861886');" style=""> 170                         info.getComponentName().getClassName());                                         </span>
<span class="3106189926107904698" onmouseenter="enter('3106189926107904698');" onmouseout="out('3106189926107904698');" style=""> 171                 if (applicationInfo == null) {                                                           </span>
<span class="-4311572429590028382" onmouseenter="enter('-4311572429590028382');" onmouseout="out('-4311572429590028382');" style=""> 172                     add(new AppInfo(context, info, user, mIconCache, null));                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 173                 } else {                                                                                 </span>
<span class="1852466449544150979" onmouseenter="enter('1852466449544150979');" onmouseout="out('1852466449544150979');" style=""> 174                     mIconCache.remove(applicationInfo.componentName, user);                              </span>
<span class="-2337076813599484203" onmouseenter="enter('-2337076813599484203');" onmouseout="out('-2337076813599484203');" style=""> 175                     mIconCache.getTitleAndIcon(applicationInfo, info, null);                             </span>
<span class="-4704128035543949862" onmouseenter="enter('-4704128035543949862');" onmouseout="out('-4704128035543949862');" style=""> 176                     modified.add(applicationInfo);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 177                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 178             }                                                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 179         } else {                                                                                         </span>
<span class="-8892510416285113016" onmouseenter="enter('-8892510416285113016');" onmouseout="out('-8892510416285113016');" style=""> 180             // Remove all data for this package.                                                         </span>
<span class="5261423022105669060" onmouseenter="enter('5261423022105669060');" onmouseout="out('5261423022105669060');" style=""> 181             for (int i = data.size() - 1; i &gt;= 0; i--) {                                                 </span>
<span class="-2601216551113717144" onmouseenter="enter('-2601216551113717144');" onmouseout="out('-2601216551113717144');" style=""> 182                 final AppInfo applicationInfo = data.get(i);                                             </span>
<span class="3941728651888076052" onmouseenter="enter('3941728651888076052');" onmouseout="out('3941728651888076052');" style=""> 183                 final ComponentName component = applicationInfo.intent.getComponent();                   </span>
<span class="-7933265751245397173" onmouseenter="enter('-7933265751245397173');" onmouseout="out('-7933265751245397173');" style=""> 184                 if (user.equals(applicationInfo.user)                                                    </span>
<span class="-4731264622599188863" onmouseenter="enter('-4731264622599188863');" onmouseout="out('-4731264622599188863');" style=""> 185                         &amp;&amp; packageName.equals(component.getPackageName())) {                             </span>
<span class="3352366077941007848" onmouseenter="enter('3352366077941007848');" onmouseout="out('3352366077941007848');" style=""> 186                     removed.add(applicationInfo);                                                        </span>
<span class="5383064569333074457" onmouseenter="enter('5383064569333074457');" onmouseout="out('5383064569333074457');" style=""> 187                     mIconCache.remove(component, user);                                                  </span>
<span class="1518519619716086564" onmouseenter="enter('1518519619716086564');" onmouseout="out('1518519619716086564');" style=""> 188                     data.remove(i);                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 189                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 190             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 191         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 192     }                                                                                                    </span>
<span  style=""> 193                                                                                                          </span>
<span  style=""> 194                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 195     /**                                                                                                  </span>
<span class="-6580154880616124283" onmouseenter="enter('-6580154880616124283');" onmouseout="out('-6580154880616124283');" style=""> 196      * Returns whether &lt;em&gt;apps&lt;/em&gt; contains &lt;em&gt;component&lt;/em&gt;.                                        </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 197      */                                                                                                  </span>
<span class="748309623817018074" onmouseenter="enter('748309623817018074');" onmouseout="out('748309623817018074');" style=""> 198     private static boolean findActivity(List&lt;LauncherActivityInfoCompat&gt; apps,                           </span>
<span class="2095123178876202639" onmouseenter="enter('2095123178876202639');" onmouseout="out('2095123178876202639');" style=""> 199             ComponentName component) {                                                                   </span>
<span class="-65930790523571275" onmouseenter="enter('-65930790523571275');" onmouseout="out('-65930790523571275');" style=""> 200         for (LauncherActivityInfoCompat info : apps) {                                                   </span>
<span class="-8375684156888401838" onmouseenter="enter('-8375684156888401838');" onmouseout="out('-8375684156888401838');" style=""> 201             if (info.getComponentName().equals(component)) {                                             </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 202                 return true;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 203             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 204         }                                                                                                </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 205         return false;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 206     }                                                                                                    </span>
<span  style=""> 207                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 208     /**                                                                                                  </span>
<span class="1584349804020982826" onmouseenter="enter('1584349804020982826');" onmouseout="out('1584349804020982826');" style=""> 209      * Query the launcher apps service for whether the supplied package has                              </span>
<span class="858612715869706648" onmouseenter="enter('858612715869706648');" onmouseout="out('858612715869706648');" style=""> 210      * MAIN/LAUNCHER activities in the supplied package.                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 211      */                                                                                                  </span>
<span class="-5067613906081422314" onmouseenter="enter('-5067613906081422314');" onmouseout="out('-5067613906081422314');" style=""> 212     static boolean packageHasActivities(Context context, String packageName,                             </span>
<span class="2471111398309558462" onmouseenter="enter('2471111398309558462');" onmouseout="out('2471111398309558462');" style=""> 213             UserHandleCompat user) {                                                                     </span>
<span class="1503035760407804955" onmouseenter="enter('1503035760407804955');" onmouseout="out('1503035760407804955');" style=""> 214         final LauncherAppsCompat launcherApps = LauncherAppsCompat.getInstance(context);                 </span>
<span class="8816768447590931735" onmouseenter="enter('8816768447590931735');" onmouseout="out('8816768447590931735');" style=""> 215         return launcherApps.getActivityList(packageName, user).size() &gt; 0;                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 216     }                                                                                                    </span>
<span  style=""> 217                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 218     /**                                                                                                  </span>
<span class="-6580154880616124283" onmouseenter="enter('-6580154880616124283');" onmouseout="out('-6580154880616124283');" style=""> 219      * Returns whether &lt;em&gt;apps&lt;/em&gt; contains &lt;em&gt;component&lt;/em&gt;.                                        </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 220      */                                                                                                  </span>
<span class="8423715411263860694" onmouseenter="enter('8423715411263860694');" onmouseout="out('8423715411263860694');" style=""> 221     private static boolean findActivity(ArrayList&lt;AppInfo&gt; apps, ComponentName component,                </span>
<span class="2471111398309558462" onmouseenter="enter('2471111398309558462');" onmouseout="out('2471111398309558462');" style=""> 222             UserHandleCompat user) {                                                                     </span>
<span class="-5251491591102275665" onmouseenter="enter('-5251491591102275665');" onmouseout="out('-5251491591102275665');" style=""> 223         final int N = apps.size();                                                                       </span>
<span class="-6986277310164926403" onmouseenter="enter('-6986277310164926403');" onmouseout="out('-6986277310164926403');" style=""> 224         for (int i = 0; i &lt; N; i++) {                                                                    </span>
<span class="87495975616151077" onmouseenter="enter('87495975616151077');" onmouseout="out('87495975616151077');" style=""> 225             final AppInfo info = apps.get(i);                                                            </span>
<span class="7422371779834560812" onmouseenter="enter('7422371779834560812');" onmouseout="out('7422371779834560812');" style=""> 226             if (info.user.equals(user) &amp;&amp; info.componentName.equals(component)) {                        </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 227                 return true;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 228             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 229         }                                                                                                </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 230         return false;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 231     }                                                                                                    </span>
<span  style=""> 232                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 233     /**                                                                                                  </span>
<span class="-6273342870262201590" onmouseenter="enter('-6273342870262201590');" onmouseout="out('-6273342870262201590');" style=""> 234      * Find an ApplicationInfo object for the given packageName and className.                           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 235      */                                                                                                  </span>
<span class="3271722603053353453" onmouseenter="enter('3271722603053353453');" onmouseout="out('3271722603053353453');" style=""> 236     private AppInfo findApplicationInfoLocked(String packageName, UserHandleCompat user,                 </span>
<span class="3188940561183362045" onmouseenter="enter('3188940561183362045');" onmouseout="out('3188940561183362045');" style=""> 237             String className) {                                                                          </span>
<span class="-4349186100161525916" onmouseenter="enter('-4349186100161525916');" onmouseout="out('-4349186100161525916');" style=""> 238         for (AppInfo info: data) {                                                                       </span>
<span class="3939017754561154888" onmouseenter="enter('3939017754561154888');" onmouseout="out('3939017754561154888');" style=""> 239             final ComponentName component = info.intent.getComponent();                                  </span>
<span class="8400916707245015300" onmouseenter="enter('8400916707245015300');" onmouseout="out('8400916707245015300');" style=""> 240             if (user.equals(info.user) &amp;&amp; packageName.equals(component.getPackageName())                 </span>
<span class="-2904347336649673306" onmouseenter="enter('-2904347336649673306');" onmouseout="out('-2904347336649673306');" style=""> 241                     &amp;&amp; className.equals(component.getClassName())) {                                     </span>
<span class="-3556780733195614200" onmouseenter="enter('-3556780733195614200');" onmouseout="out('-3556780733195614200');" style=""> 242                 return info;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 243             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 244         }                                                                                                </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 245         return null;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 246     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 247 }                                                                                                        </span></pre></td>
                            <td><pre><span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style="">   1 /*                                                                                                       </span>
<span class="1710841298952644868" onmouseenter="enter('1710841298952644868');" onmouseout="out('1710841298952644868');" style="">   2  * Copyright (C) 2008 The Android Open Source Project                                                    </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   3  *                                                                                                       </span>
<span class="-7144700690364548245" onmouseenter="enter('-7144700690364548245');" onmouseout="out('-7144700690364548245');" style="">   4  * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);                                       </span>
<span class="-6614298523444173250" onmouseenter="enter('-6614298523444173250');" onmouseout="out('-6614298523444173250');" style="">   5  * you may not use this file except in compliance with the License.                                      </span>
<span class="-4753901504248728101" onmouseenter="enter('-4753901504248728101');" onmouseout="out('-4753901504248728101');" style="">   6  * You may obtain a copy of the License at                                                               </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   7  *                                                                                                       </span>
<span class="-763207030729826407" onmouseenter="enter('-763207030729826407');" onmouseout="out('-763207030729826407');" style="">   8  *      http://www.apache.org/licenses/LICENSE-2.0                                                       </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   9  *                                                                                                       </span>
<span class="2557607632756179983" onmouseenter="enter('2557607632756179983');" onmouseout="out('2557607632756179983');" style="">  10  * Unless required by applicable law or agreed to in writing, software                                   </span>
<span class="-9189129105512731955" onmouseenter="enter('-9189129105512731955');" onmouseout="out('-9189129105512731955');" style="">  11  * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,                                     </span>
<span class="5781161717946418340" onmouseenter="enter('5781161717946418340');" onmouseout="out('5781161717946418340');" style="">  12  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.                              </span>
<span class="1761562277992059393" onmouseenter="enter('1761562277992059393');" onmouseout="out('1761562277992059393');" style="">  13  * See the License for the specific language governing permissions and                                   </span>
<span class="7217408601297779962" onmouseenter="enter('7217408601297779962');" onmouseout="out('7217408601297779962');" style="">  14  * limitations under the License.                                                                        </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  15  */                                                                                                      </span>
<span  style="">  16                                                                                                          </span>
<span class="5824586583419512860" onmouseenter="enter('5824586583419512860');" onmouseout="out('5824586583419512860');" style="">  17 package com.android.launcher3;                                                                           </span>
<span  style="">  18                                                                                                          </span>
<span class="6810188203727856944" onmouseenter="enter('6810188203727856944');" onmouseout="out('6810188203727856944');" style="">  19 import android.content.ComponentName;                                                                    </span>
<span class="5922045460006936195" onmouseenter="enter('5922045460006936195');" onmouseout="out('5922045460006936195');" style="">  20 import android.content.Context;                                                                          </span>
<span class="6568903789857736568" onmouseenter="enter('6568903789857736568');" onmouseout="out('6568903789857736568');" style="">  21 import android.content.Intent;                                                                           </span>
<span class="-9183914406029598577" onmouseenter="enter('-9183914406029598577');" onmouseout="out('-9183914406029598577');" style="">  22 import android.content.pm.ActivityInfo;                                                                  </span>
<span class="-1290624633738557221" onmouseenter="enter('-1290624633738557221');" onmouseout="out('-1290624633738557221');" style="">  23 import android.content.pm.PackageManager;                                                                </span>
<span class="8582326229770324815" onmouseenter="enter('8582326229770324815');" onmouseout="out('8582326229770324815');" style="">  24 import android.content.pm.ResolveInfo;                                                                   </span>
<span  style="">  25                                                                                                          </span>
<span class="-394760018964595537" onmouseenter="enter('-394760018964595537');" onmouseout="out('-394760018964595537');" style="">  26 import com.android.launcher3.compat.LauncherActivityInfoCompat;                                          </span>
<span class="7348855441893227306" onmouseenter="enter('7348855441893227306');" onmouseout="out('7348855441893227306');" style="">  27 import com.android.launcher3.compat.LauncherAppsCompat;                                                  </span>
<span class="6372524458266053383" onmouseenter="enter('6372524458266053383');" onmouseout="out('6372524458266053383');" style="">  28 import com.android.launcher3.compat.UserHandleCompat;                                                    </span>
<span  style="">  29                                                                                                          </span>
<span class="9191247685397773893" onmouseenter="enter('9191247685397773893');" onmouseout="out('9191247685397773893');" style="">  30 import java.util.ArrayList;                                                                              </span>
<span class="-1786020958497218848" onmouseenter="enter('-1786020958497218848');" onmouseout="out('-1786020958497218848');" style="">  31 import java.util.List;                                                                                   </span>
<span  style="">  32                                                                                                          </span>
<span  style="">  33                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  34 /**                                                                                                      </span>
<span class="2610009611091842856" onmouseenter="enter('2610009611091842856');" onmouseout="out('2610009611091842856');" style="">  35  * Stores the list of all applications for the all apps view.                                            </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  36  */                                                                                                      </span>
<span class="-7274444873086336525" onmouseenter="enter('-7274444873086336525');" onmouseout="out('-7274444873086336525');" style="">  37 class AllAppsList {                                                                                      </span>
<span class="6815784767769879144" onmouseenter="enter('6815784767769879144');" onmouseout="out('6815784767769879144');" style="">  38     public static final int DEFAULT_APPLICATIONS_NUMBER = 42;                                            </span>
<span  style="">  39                                                                                                          </span>
<span class="-2860744678198899912" onmouseenter="enter('-2860744678198899912');" onmouseout="out('-2860744678198899912');" style="">  40     /** The list off all apps. */                                                                        </span>
<span class="745790943183470157" onmouseenter="enter('745790943183470157');" onmouseout="out('745790943183470157');" style="">  41     public ArrayList&lt;AppInfo&gt; data =                                                                     </span>
<span class="1543666060105331231" onmouseenter="enter('1543666060105331231');" onmouseout="out('1543666060105331231');" style="">  42             new ArrayList&lt;AppInfo&gt;(DEFAULT_APPLICATIONS_NUMBER);                                         </span>
<span class="-2318138568943717218" onmouseenter="enter('-2318138568943717218');" onmouseout="out('-2318138568943717218');" style="">  43     /** The list of apps that have been added since the last notify() call. */                           </span>
<span class="2455668399231812776" onmouseenter="enter('2455668399231812776');" onmouseout="out('2455668399231812776');" style="">  44     public ArrayList&lt;AppInfo&gt; added =                                                                    </span>
<span class="1543666060105331231" onmouseenter="enter('1543666060105331231');" onmouseout="out('1543666060105331231');" style="">  45             new ArrayList&lt;AppInfo&gt;(DEFAULT_APPLICATIONS_NUMBER);                                         </span>
<span class="5689859138989553098" onmouseenter="enter('5689859138989553098');" onmouseout="out('5689859138989553098');" style="">  46     /** The list of apps that have been removed since the last notify() call. */                         </span>
<span class="5962158200043260112" onmouseenter="enter('5962158200043260112');" onmouseout="out('5962158200043260112');" style="">  47     public ArrayList&lt;AppInfo&gt; removed = new ArrayList&lt;AppInfo&gt;();                                        </span>
<span class="2205421830873834692" onmouseenter="enter('2205421830873834692');" onmouseout="out('2205421830873834692');" style="">  48     /** The list of apps that have been modified since the last notify() call. */                        </span>
<span class="734344745062201427" onmouseenter="enter('734344745062201427');" onmouseout="out('734344745062201427');" style="">  49     public ArrayList&lt;AppInfo&gt; modified = new ArrayList&lt;AppInfo&gt;();                                       </span>
<span  style="">  50                                                                                                          </span>
<span class="-3446390922171092190" onmouseenter="enter('-3446390922171092190');" onmouseout="out('-3446390922171092190');" style="">  51     private IconCache mIconCache;                                                                        </span>
<span  style="">  52                                                                                                          </span>
<span class="6725701503700558455" onmouseenter="enter('6725701503700558455');" onmouseout="out('6725701503700558455');" style="">  53     private AppFilter mAppFilter;                                                                        </span>
<span  style="">  54                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  55     /**                                                                                                  </span>
<span class="2496285524079702545" onmouseenter="enter('2496285524079702545');" onmouseout="out('2496285524079702545');" style="">  56      * Boring constructor.                                                                               </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  57      */                                                                                                  </span>
<span class="-7973856851091008922" onmouseenter="enter('-7973856851091008922');" onmouseout="out('-7973856851091008922');" style="">  58     public AllAppsList(IconCache iconCache, AppFilter appFilter) {                                       </span>
<span class="1920389422449187498" onmouseenter="enter('1920389422449187498');" onmouseout="out('1920389422449187498');" style="">  59         mIconCache = iconCache;                                                                          </span>
<span class="-731369552390552931" onmouseenter="enter('-731369552390552931');" onmouseout="out('-731369552390552931');" style="">  60         mAppFilter = appFilter;                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  61     }                                                                                                    </span>
<span  style="">  62                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  63     /**                                                                                                  </span>
<span class="-8981990233191318303" onmouseenter="enter('-8981990233191318303');" onmouseout="out('-8981990233191318303');" style="">  64      * Add the supplied ApplicationInfo objects to the list, and enqueue it into the                     </span>
<span class="-7118316917537758192" onmouseenter="enter('-7118316917537758192');" onmouseout="out('-7118316917537758192');" style="">  65      * list to broadcast when notify() is called.                                                        </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">  66      *                                                                                                   </span>
<span class="1862405582651527032" onmouseenter="enter('1862405582651527032');" onmouseout="out('1862405582651527032');" style="">  67      * If the app is already in the list, doesn&#x27;t add it.                                                </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  68      */                                                                                                  </span>
<span class="8680343285174562180" onmouseenter="enter('8680343285174562180');" onmouseout="out('8680343285174562180');" style="">  69     public void add(AppInfo info) {                                                                      </span>
<span class="-7383631586676499787" onmouseenter="enter('-7383631586676499787');" onmouseout="out('-7383631586676499787');" style="">  70         if (mAppFilter != null &amp;&amp; !mAppFilter.shouldShowApp(info.componentName)) {                       </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">  71             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  72         }                                                                                                </span>
<span class="4426514774478750888" onmouseenter="enter('4426514774478750888');" onmouseout="out('4426514774478750888');" style="">  73         if (findActivity(data, info.componentName, info.user)) {                                         </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">  74             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  75         }                                                                                                </span>
<span class="-7186167164144977405" onmouseenter="enter('-7186167164144977405');" onmouseout="out('-7186167164144977405');" style="">  76         data.add(info);                                                                                  </span>
<span class="6297895021131252846" onmouseenter="enter('6297895021131252846');" onmouseout="out('6297895021131252846');" style="">  77         added.add(info);                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  78     }                                                                                                    </span>
<span  style="">  79                                                                                                          </span>
<span class="8383369073942967129" onmouseenter="enter('8383369073942967129');" onmouseout="out('8383369073942967129');" style="">  80     public void clear() {                                                                                </span>
<span class="3625030345540762376" onmouseenter="enter('3625030345540762376');" onmouseout="out('3625030345540762376');" style="">  81         data.clear();                                                                                    </span>
<span class="-3532776475985990888" onmouseenter="enter('-3532776475985990888');" onmouseout="out('-3532776475985990888');" style="">  82         // TODO: do we clear these too?                                                                  </span>
<span class="-5699441102723791460" onmouseenter="enter('-5699441102723791460');" onmouseout="out('-5699441102723791460');" style="">  83         added.clear();                                                                                   </span>
<span class="-8171639104297689352" onmouseenter="enter('-8171639104297689352');" onmouseout="out('-8171639104297689352');" style="">  84         removed.clear();                                                                                 </span>
<span class="8808169441892969779" onmouseenter="enter('8808169441892969779');" onmouseout="out('8808169441892969779');" style="">  85         modified.clear();                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  86     }                                                                                                    </span>
<span  style="">  87                                                                                                          </span>
<span class="5501185527198334216" onmouseenter="enter('5501185527198334216');" onmouseout="out('5501185527198334216');" style="">  88     public int size() {                                                                                  </span>
<span class="-1497725231916451819" onmouseenter="enter('-1497725231916451819');" onmouseout="out('-1497725231916451819');" style="">  89         return data.size();                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  90     }                                                                                                    </span>
<span  style="">  91                                                                                                          </span>
<span class="-6501432589969299828" onmouseenter="enter('-6501432589969299828');" onmouseout="out('-6501432589969299828');" style="">  92     public AppInfo get(int index) {                                                                      </span>
<span class="7032246991200994526" onmouseenter="enter('7032246991200994526');" onmouseout="out('7032246991200994526');" style="">  93         return data.get(index);                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  94     }                                                                                                    </span>
<span  style="">  95                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  96     /**                                                                                                  </span>
<span class="8159855286441519655" onmouseenter="enter('8159855286441519655');" onmouseout="out('8159855286441519655');" style="">  97      * Add the icons for the supplied apk called packageName.                                            </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  98      */                                                                                                  </span>
<span class="-3190168712320507375" onmouseenter="enter('-3190168712320507375');" onmouseout="out('-3190168712320507375');" style="">  99     public void addPackage(Context context, String packageName, UserHandleCompat user) {                 </span>
<span class="1503035760407804955" onmouseenter="enter('1503035760407804955');" onmouseout="out('1503035760407804955');" style=""> 100         final LauncherAppsCompat launcherApps = LauncherAppsCompat.getInstance(context);                 </span>
<span class="8847745329654956593" onmouseenter="enter('8847745329654956593');" onmouseout="out('8847745329654956593');" style=""> 101         final List&lt;LauncherActivityInfoCompat&gt; matches = launcherApps.getActivityList(packageName,       </span>
<span class="1134753456474152449" onmouseenter="enter('1134753456474152449');" onmouseout="out('1134753456474152449');" style=""> 102                 user);                                                                                   </span>
<span  style=""> 103                                                                                                          </span>
<span class="-4392145982843511212" onmouseenter="enter('-4392145982843511212');" onmouseout="out('-4392145982843511212');" style=""> 104         if (matches.size() &gt; 0) {                                                                        </span>
<span class="6783020136140698262" onmouseenter="enter('6783020136140698262');" onmouseout="out('6783020136140698262');" style=""> 105             for (LauncherActivityInfoCompat info : matches) {                                            </span>
<span class="-4311572429590028382" onmouseenter="enter('-4311572429590028382');" onmouseout="out('-4311572429590028382');" style=""> 106                 add(new AppInfo(context, info, user, mIconCache, null));                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 107             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 108         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 109     }                                                                                                    </span>
<span  style=""> 110                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 111     /**                                                                                                  </span>
<span class="8924965312796975897" onmouseenter="enter('8924965312796975897');" onmouseout="out('8924965312796975897');" style=""> 112      * Remove the apps for the given apk identified by packageName.                                      </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 113      */                                                                                                  </span>
<span class="-6776151234703058548" onmouseenter="enter('-6776151234703058548');" onmouseout="out('-6776151234703058548');" style=""> 114     public void removePackage(String packageName, UserHandleCompat user) {                               </span>
<span class="8835944207165319620" onmouseenter="enter('8835944207165319620');" onmouseout="out('8835944207165319620');" style=""> 115         final List&lt;AppInfo&gt; data = this.data;                                                            </span>
<span class="5261423022105669060" onmouseenter="enter('5261423022105669060');" onmouseout="out('5261423022105669060');" style=""> 116         for (int i = data.size() - 1; i &gt;= 0; i--) {                                                     </span>
<span class="-7225725324024154592" onmouseenter="enter('-7225725324024154592');" onmouseout="out('-7225725324024154592');" style=""> 117             AppInfo info = data.get(i);                                                                  </span>
<span class="3939017754561154888" onmouseenter="enter('3939017754561154888');" onmouseout="out('3939017754561154888');" style=""> 118             final ComponentName component = info.intent.getComponent();                                  </span>
<span class="-7692104339662087356" onmouseenter="enter('-7692104339662087356');" onmouseout="out('-7692104339662087356');" style=""> 119             if (info.user.equals(user) &amp;&amp; packageName.equals(component.getPackageName())) {              </span>
<span class="-6757903531839214419" onmouseenter="enter('-6757903531839214419');" onmouseout="out('-6757903531839214419');" style=""> 120                 removed.add(info);                                                                       </span>
<span class="1518519619716086564" onmouseenter="enter('1518519619716086564');" onmouseout="out('1518519619716086564');" style=""> 121                 data.remove(i);                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 122             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 123         }                                                                                                </span>
<span class="27975313893554723" onmouseenter="enter('27975313893554723');" onmouseout="out('27975313893554723');" style=""> 124         mIconCache.remove(packageName, user);                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 125     }                                                                                                    </span>
<span  style=""> 126                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 127     /**                                                                                                  </span>
<span class="-4838399043083901482" onmouseenter="enter('-4838399043083901482');" onmouseout="out('-4838399043083901482');" style=""> 128      * Add and remove icons for this package which has been updated.                                     </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 129      */                                                                                                  </span>
<span class="-1777314305379940625" onmouseenter="enter('-1777314305379940625');" onmouseout="out('-1777314305379940625');" style=""> 130     public void updatePackage(Context context, String packageName, UserHandleCompat user) {              </span>
<span class="1503035760407804955" onmouseenter="enter('1503035760407804955');" onmouseout="out('1503035760407804955');" style=""> 131         final LauncherAppsCompat launcherApps = LauncherAppsCompat.getInstance(context);                 </span>
<span class="8847745329654956593" onmouseenter="enter('8847745329654956593');" onmouseout="out('8847745329654956593');" style=""> 132         final List&lt;LauncherActivityInfoCompat&gt; matches = launcherApps.getActivityList(packageName,       </span>
<span class="1134753456474152449" onmouseenter="enter('1134753456474152449');" onmouseout="out('1134753456474152449');" style=""> 133                 user);                                                                                   </span>
<span class="-4392145982843511212" onmouseenter="enter('-4392145982843511212');" onmouseout="out('-4392145982843511212');" style=""> 134         if (matches.size() &gt; 0) {                                                                        </span>
<span class="8518378968323826463" onmouseenter="enter('8518378968323826463');" onmouseout="out('8518378968323826463');" style=""> 135             // Find disabled/removed activities and remove them from data and add them                   </span>
<span class="-8567721530358817855" onmouseenter="enter('-8567721530358817855');" onmouseout="out('-8567721530358817855');" style=""> 136             // to the removed list.                                                                      </span>
<span class="5261423022105669060" onmouseenter="enter('5261423022105669060');" onmouseout="out('5261423022105669060');" style=""> 137             for (int i = data.size() - 1; i &gt;= 0; i--) {                                                 </span>
<span class="-2601216551113717144" onmouseenter="enter('-2601216551113717144');" onmouseout="out('-2601216551113717144');" style=""> 138                 final AppInfo applicationInfo = data.get(i);                                             </span>
<span class="3941728651888076052" onmouseenter="enter('3941728651888076052');" onmouseout="out('3941728651888076052');" style=""> 139                 final ComponentName component = applicationInfo.intent.getComponent();                   </span>
<span class="-7933265751245397173" onmouseenter="enter('-7933265751245397173');" onmouseout="out('-7933265751245397173');" style=""> 140                 if (user.equals(applicationInfo.user)                                                    </span>
<span class="-4731264622599188863" onmouseenter="enter('-4731264622599188863');" onmouseout="out('-4731264622599188863');" style=""> 141                         &amp;&amp; packageName.equals(component.getPackageName())) {                             </span>
<span class="-55241334586483794" onmouseenter="enter('-55241334586483794');" onmouseout="out('-55241334586483794');" style=""> 142                     if (!findActivity(matches, component)) {                                             </span>
<span class="3352366077941007848" onmouseenter="enter('3352366077941007848');" onmouseout="out('3352366077941007848');" style=""> 143                         removed.add(applicationInfo);                                                    </span>
<span class="5383064569333074457" onmouseenter="enter('5383064569333074457');" onmouseout="out('5383064569333074457');" style=""> 144                         mIconCache.remove(component, user);                                              </span>
<span class="1518519619716086564" onmouseenter="enter('1518519619716086564');" onmouseout="out('1518519619716086564');" style=""> 145                         data.remove(i);                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 146                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 147                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 148             }                                                                                            </span>
<span  style=""> 149                                                                                                          </span>
<span class="-4767682497305231646" onmouseenter="enter('-4767682497305231646');" onmouseout="out('-4767682497305231646');" style=""> 150             // Find enabled activities and add them to the adapter                                       </span>
<span class="-4153876202891715545" onmouseenter="enter('-4153876202891715545');" onmouseout="out('-4153876202891715545');" style=""> 151             // Also updates existing activities with new labels/icons                                    </span>
<span class="-8082051884301984312" onmouseenter="enter('-8082051884301984312');" onmouseout="out('-8082051884301984312');" style=""> 152             int count = matches.size();                                                                  </span>
<span class="678980937581768133" onmouseenter="enter('678980937581768133');" onmouseout="out('678980937581768133');" style=""> 153             for (int i = 0; i &lt; count; i++) {                                                            </span>
<span class="6505367795053961568" onmouseenter="enter('6505367795053961568');" onmouseout="out('6505367795053961568');" style=""> 154                 final LauncherActivityInfoCompat info = matches.get(i);                                  </span>
<span class="-1209711392859633947" onmouseenter="enter('-1209711392859633947');" onmouseout="out('-1209711392859633947');" style=""> 155                 AppInfo applicationInfo = findApplicationInfoLocked(                                     </span>
<span class="6404447875113979134" onmouseenter="enter('6404447875113979134');" onmouseout="out('6404447875113979134');" style=""> 156                         info.getComponentName().getPackageName(), user,                                  </span>
<span class="8556901928637861886" onmouseenter="enter('8556901928637861886');" onmouseout="out('8556901928637861886');" style=""> 157                         info.getComponentName().getClassName());                                         </span>
<span class="3106189926107904698" onmouseenter="enter('3106189926107904698');" onmouseout="out('3106189926107904698');" style=""> 158                 if (applicationInfo == null) {                                                           </span>
<span class="-4311572429590028382" onmouseenter="enter('-4311572429590028382');" onmouseout="out('-4311572429590028382');" style=""> 159                     add(new AppInfo(context, info, user, mIconCache, null));                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 160                 } else {                                                                                 </span>
<span class="1852466449544150979" onmouseenter="enter('1852466449544150979');" onmouseout="out('1852466449544150979');" style=""> 161                     mIconCache.remove(applicationInfo.componentName, user);                              </span>
<span class="-2337076813599484203" onmouseenter="enter('-2337076813599484203');" onmouseout="out('-2337076813599484203');" style=""> 162                     mIconCache.getTitleAndIcon(applicationInfo, info, null);                             </span>
<span class="-4704128035543949862" onmouseenter="enter('-4704128035543949862');" onmouseout="out('-4704128035543949862');" style=""> 163                     modified.add(applicationInfo);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 164                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 165             }                                                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 166         } else {                                                                                         </span>
<span class="-8892510416285113016" onmouseenter="enter('-8892510416285113016');" onmouseout="out('-8892510416285113016');" style=""> 167             // Remove all data for this package.                                                         </span>
<span class="5261423022105669060" onmouseenter="enter('5261423022105669060');" onmouseout="out('5261423022105669060');" style=""> 168             for (int i = data.size() - 1; i &gt;= 0; i--) {                                                 </span>
<span class="-2601216551113717144" onmouseenter="enter('-2601216551113717144');" onmouseout="out('-2601216551113717144');" style=""> 169                 final AppInfo applicationInfo = data.get(i);                                             </span>
<span class="3941728651888076052" onmouseenter="enter('3941728651888076052');" onmouseout="out('3941728651888076052');" style=""> 170                 final ComponentName component = applicationInfo.intent.getComponent();                   </span>
<span class="-7933265751245397173" onmouseenter="enter('-7933265751245397173');" onmouseout="out('-7933265751245397173');" style=""> 171                 if (user.equals(applicationInfo.user)                                                    </span>
<span class="-4731264622599188863" onmouseenter="enter('-4731264622599188863');" onmouseout="out('-4731264622599188863');" style=""> 172                         &amp;&amp; packageName.equals(component.getPackageName())) {                             </span>
<span class="3352366077941007848" onmouseenter="enter('3352366077941007848');" onmouseout="out('3352366077941007848');" style=""> 173                     removed.add(applicationInfo);                                                        </span>
<span class="5383064569333074457" onmouseenter="enter('5383064569333074457');" onmouseout="out('5383064569333074457');" style=""> 174                     mIconCache.remove(component, user);                                                  </span>
<span class="1518519619716086564" onmouseenter="enter('1518519619716086564');" onmouseout="out('1518519619716086564');" style=""> 175                     data.remove(i);                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 176                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 177             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 178         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 179     }                                                                                                    </span>
<span  style=""> 180                                                                                                          </span>
<span  style=""> 181                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 182     /**                                                                                                  </span>
<span class="-6580154880616124283" onmouseenter="enter('-6580154880616124283');" onmouseout="out('-6580154880616124283');" style=""> 183      * Returns whether &lt;em&gt;apps&lt;/em&gt; contains &lt;em&gt;component&lt;/em&gt;.                                        </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 184      */                                                                                                  </span>
<span class="748309623817018074" onmouseenter="enter('748309623817018074');" onmouseout="out('748309623817018074');" style=""> 185     private static boolean findActivity(List&lt;LauncherActivityInfoCompat&gt; apps,                           </span>
<span class="2095123178876202639" onmouseenter="enter('2095123178876202639');" onmouseout="out('2095123178876202639');" style=""> 186             ComponentName component) {                                                                   </span>
<span class="-65930790523571275" onmouseenter="enter('-65930790523571275');" onmouseout="out('-65930790523571275');" style=""> 187         for (LauncherActivityInfoCompat info : apps) {                                                   </span>
<span class="-8375684156888401838" onmouseenter="enter('-8375684156888401838');" onmouseout="out('-8375684156888401838');" style=""> 188             if (info.getComponentName().equals(component)) {                                             </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 189                 return true;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 190             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 191         }                                                                                                </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 192         return false;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 193     }                                                                                                    </span>
<span  style=""> 194                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 195     /**                                                                                                  </span>
<span class="1584349804020982826" onmouseenter="enter('1584349804020982826');" onmouseout="out('1584349804020982826');" style=""> 196      * Query the launcher apps service for whether the supplied package has                              </span>
<span class="858612715869706648" onmouseenter="enter('858612715869706648');" onmouseout="out('858612715869706648');" style=""> 197      * MAIN/LAUNCHER activities in the supplied package.                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 198      */                                                                                                  </span>
<span class="-5067613906081422314" onmouseenter="enter('-5067613906081422314');" onmouseout="out('-5067613906081422314');" style=""> 199     static boolean packageHasActivities(Context context, String packageName,                             </span>
<span class="2471111398309558462" onmouseenter="enter('2471111398309558462');" onmouseout="out('2471111398309558462');" style=""> 200             UserHandleCompat user) {                                                                     </span>
<span class="1503035760407804955" onmouseenter="enter('1503035760407804955');" onmouseout="out('1503035760407804955');" style=""> 201         final LauncherAppsCompat launcherApps = LauncherAppsCompat.getInstance(context);                 </span>
<span class="8816768447590931735" onmouseenter="enter('8816768447590931735');" onmouseout="out('8816768447590931735');" style=""> 202         return launcherApps.getActivityList(packageName, user).size() &gt; 0;                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 203     }                                                                                                    </span>
<span  style=""> 204                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 205     /**                                                                                                  </span>
<span class="-6580154880616124283" onmouseenter="enter('-6580154880616124283');" onmouseout="out('-6580154880616124283');" style=""> 206      * Returns whether &lt;em&gt;apps&lt;/em&gt; contains &lt;em&gt;component&lt;/em&gt;.                                        </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 207      */                                                                                                  </span>
<span class="8423715411263860694" onmouseenter="enter('8423715411263860694');" onmouseout="out('8423715411263860694');" style=""> 208     private static boolean findActivity(ArrayList&lt;AppInfo&gt; apps, ComponentName component,                </span>
<span class="2471111398309558462" onmouseenter="enter('2471111398309558462');" onmouseout="out('2471111398309558462');" style=""> 209             UserHandleCompat user) {                                                                     </span>
<span class="-5251491591102275665" onmouseenter="enter('-5251491591102275665');" onmouseout="out('-5251491591102275665');" style=""> 210         final int N = apps.size();                                                                       </span>
<span class="-6986277310164926403" onmouseenter="enter('-6986277310164926403');" onmouseout="out('-6986277310164926403');" style=""> 211         for (int i = 0; i &lt; N; i++) {                                                                    </span>
<span class="87495975616151077" onmouseenter="enter('87495975616151077');" onmouseout="out('87495975616151077');" style=""> 212             final AppInfo info = apps.get(i);                                                            </span>
<span class="7422371779834560812" onmouseenter="enter('7422371779834560812');" onmouseout="out('7422371779834560812');" style=""> 213             if (info.user.equals(user) &amp;&amp; info.componentName.equals(component)) {                        </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 214                 return true;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 215             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 216         }                                                                                                </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 217         return false;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 218     }                                                                                                    </span>
<span  style=""> 219                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 220     /**                                                                                                  </span>
<span class="-6273342870262201590" onmouseenter="enter('-6273342870262201590');" onmouseout="out('-6273342870262201590');" style=""> 221      * Find an ApplicationInfo object for the given packageName and className.                           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 222      */                                                                                                  </span>
<span class="3271722603053353453" onmouseenter="enter('3271722603053353453');" onmouseout="out('3271722603053353453');" style=""> 223     private AppInfo findApplicationInfoLocked(String packageName, UserHandleCompat user,                 </span>
<span class="3188940561183362045" onmouseenter="enter('3188940561183362045');" onmouseout="out('3188940561183362045');" style=""> 224             String className) {                                                                          </span>
<span class="-4349186100161525916" onmouseenter="enter('-4349186100161525916');" onmouseout="out('-4349186100161525916');" style=""> 225         for (AppInfo info: data) {                                                                       </span>
<span class="3939017754561154888" onmouseenter="enter('3939017754561154888');" onmouseout="out('3939017754561154888');" style=""> 226             final ComponentName component = info.intent.getComponent();                                  </span>
<span class="8400916707245015300" onmouseenter="enter('8400916707245015300');" onmouseout="out('8400916707245015300');" style=""> 227             if (user.equals(info.user) &amp;&amp; packageName.equals(component.getPackageName())                 </span>
<span class="-2904347336649673306" onmouseenter="enter('-2904347336649673306');" onmouseout="out('-2904347336649673306');" style=""> 228                     &amp;&amp; className.equals(component.getClassName())) {                                     </span>
<span class="-3556780733195614200" onmouseenter="enter('-3556780733195614200');" onmouseout="out('-3556780733195614200');" style=""> 229                 return info;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 230             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 231         }                                                                                                </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 232         return null;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 233     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 234 }                                                                                                        </span>











</pre></td>
                            <td><pre><span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style="">   1 /*                                                                                                       </span>
<span class="1710841298952644868" onmouseenter="enter('1710841298952644868');" onmouseout="out('1710841298952644868');" style="">   2  * Copyright (C) 2008 The Android Open Source Project                                                    </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   3  *                                                                                                       </span>
<span class="-7144700690364548245" onmouseenter="enter('-7144700690364548245');" onmouseout="out('-7144700690364548245');" style="">   4  * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);                                       </span>
<span class="-6614298523444173250" onmouseenter="enter('-6614298523444173250');" onmouseout="out('-6614298523444173250');" style="">   5  * you may not use this file except in compliance with the License.                                      </span>
<span class="-4753901504248728101" onmouseenter="enter('-4753901504248728101');" onmouseout="out('-4753901504248728101');" style="">   6  * You may obtain a copy of the License at                                                               </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   7  *                                                                                                       </span>
<span class="-763207030729826407" onmouseenter="enter('-763207030729826407');" onmouseout="out('-763207030729826407');" style="">   8  *      http://www.apache.org/licenses/LICENSE-2.0                                                       </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   9  *                                                                                                       </span>
<span class="2557607632756179983" onmouseenter="enter('2557607632756179983');" onmouseout="out('2557607632756179983');" style="">  10  * Unless required by applicable law or agreed to in writing, software                                   </span>
<span class="-9189129105512731955" onmouseenter="enter('-9189129105512731955');" onmouseout="out('-9189129105512731955');" style="">  11  * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,                                     </span>
<span class="5781161717946418340" onmouseenter="enter('5781161717946418340');" onmouseout="out('5781161717946418340');" style="">  12  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.                              </span>
<span class="1761562277992059393" onmouseenter="enter('1761562277992059393');" onmouseout="out('1761562277992059393');" style="">  13  * See the License for the specific language governing permissions and                                   </span>
<span class="7217408601297779962" onmouseenter="enter('7217408601297779962');" onmouseout="out('7217408601297779962');" style="">  14  * limitations under the License.                                                                        </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  15  */                                                                                                      </span>
<span class="5824586583419512860" onmouseenter="enter('5824586583419512860');" onmouseout="out('5824586583419512860');" style="">  16 package com.android.launcher3;                                                                           </span>
<span  style="">  17                                                                                                          </span>
<span class="6810188203727856944" onmouseenter="enter('6810188203727856944');" onmouseout="out('6810188203727856944');" style="">  18 import android.content.ComponentName;                                                                    </span>
<span class="5922045460006936195" onmouseenter="enter('5922045460006936195');" onmouseout="out('5922045460006936195');" style="">  19 import android.content.Context;                                                                          </span>
<span class="6568903789857736568" onmouseenter="enter('6568903789857736568');" onmouseout="out('6568903789857736568');" style="">  20 import android.content.Intent;                                                                           </span>
<span class="-9183914406029598577" onmouseenter="enter('-9183914406029598577');" onmouseout="out('-9183914406029598577');" style="">  21 import android.content.pm.ActivityInfo;                                                                  </span>
<span class="-1290624633738557221" onmouseenter="enter('-1290624633738557221');" onmouseout="out('-1290624633738557221');" style="">  22 import android.content.pm.PackageManager;                                                                </span>
<span class="8582326229770324815" onmouseenter="enter('8582326229770324815');" onmouseout="out('8582326229770324815');" style="">  23 import android.content.pm.ResolveInfo;                                                                   </span>
<span class="-394760018964595537" onmouseenter="enter('-394760018964595537');" onmouseout="out('-394760018964595537');" style="">  24 import com.android.launcher3.compat.LauncherActivityInfoCompat;                                          </span>
<span class="7348855441893227306" onmouseenter="enter('7348855441893227306');" onmouseout="out('7348855441893227306');" style="">  25 import com.android.launcher3.compat.LauncherAppsCompat;                                                  </span>
<span class="6372524458266053383" onmouseenter="enter('6372524458266053383');" onmouseout="out('6372524458266053383');" style="">  26 import com.android.launcher3.compat.UserHandleCompat;                                                    </span>
<span class="9191247685397773893" onmouseenter="enter('9191247685397773893');" onmouseout="out('9191247685397773893');" style="">  27 import java.util.ArrayList;                                                                              </span>
<span class="-1786020958497218848" onmouseenter="enter('-1786020958497218848');" onmouseout="out('-1786020958497218848');" style="">  28 import java.util.List;                                                                                   </span>
<span  style="">  29                                                                                                          </span>
<span  style="">  30                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  31 /**                                                                                                      </span>
<span class="2610009611091842856" onmouseenter="enter('2610009611091842856');" onmouseout="out('2610009611091842856');" style="">  32  * Stores the list of all applications for the all apps view.                                            </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  33  */                                                                                                      </span>
<span class="-7274444873086336525" onmouseenter="enter('-7274444873086336525');" onmouseout="out('-7274444873086336525');" style="">  34 class AllAppsList {                                                                                      </span>
<span class="6815784767769879144" onmouseenter="enter('6815784767769879144');" onmouseout="out('6815784767769879144');" style="">  35     public static final int DEFAULT_APPLICATIONS_NUMBER = 42;                                            </span>
<span  style="">  36                                                                                                          </span>
<span class="-2860744678198899912" onmouseenter="enter('-2860744678198899912');" onmouseout="out('-2860744678198899912');" style="">  37     /** The list off all apps. */                                                                        </span>
<span class="745790943183470157" onmouseenter="enter('745790943183470157');" onmouseout="out('745790943183470157');" style="">  38     public ArrayList&lt;AppInfo&gt; data =                                                                     </span>
<span class="1543666060105331231" onmouseenter="enter('1543666060105331231');" onmouseout="out('1543666060105331231');" style="">  39             new ArrayList&lt;AppInfo&gt;(DEFAULT_APPLICATIONS_NUMBER);                                         </span>
<span  style="">  40                                                                                                          </span>
<span class="-2318138568943717218" onmouseenter="enter('-2318138568943717218');" onmouseout="out('-2318138568943717218');" style="">  41     /** The list of apps that have been added since the last notify() call. */                           </span>
<span class="2455668399231812776" onmouseenter="enter('2455668399231812776');" onmouseout="out('2455668399231812776');" style="">  42     public ArrayList&lt;AppInfo&gt; added =                                                                    </span>
<span class="1543666060105331231" onmouseenter="enter('1543666060105331231');" onmouseout="out('1543666060105331231');" style="">  43             new ArrayList&lt;AppInfo&gt;(DEFAULT_APPLICATIONS_NUMBER);                                         </span>
<span  style="">  44                                                                                                          </span>
<span class="5689859138989553098" onmouseenter="enter('5689859138989553098');" onmouseout="out('5689859138989553098');" style="">  45     /** The list of apps that have been removed since the last notify() call. */                         </span>
<span class="5962158200043260112" onmouseenter="enter('5962158200043260112');" onmouseout="out('5962158200043260112');" style="">  46     public ArrayList&lt;AppInfo&gt; removed = new ArrayList&lt;AppInfo&gt;();                                        </span>
<span  style="">  47                                                                                                          </span>
<span class="2205421830873834692" onmouseenter="enter('2205421830873834692');" onmouseout="out('2205421830873834692');" style="">  48     /** The list of apps that have been modified since the last notify() call. */                        </span>
<span class="734344745062201427" onmouseenter="enter('734344745062201427');" onmouseout="out('734344745062201427');" style="">  49     public ArrayList&lt;AppInfo&gt; modified = new ArrayList&lt;AppInfo&gt;();                                       </span>
<span  style="">  50                                                                                                          </span>
<span class="-3446390922171092190" onmouseenter="enter('-3446390922171092190');" onmouseout="out('-3446390922171092190');" style="">  51     private IconCache mIconCache;                                                                        </span>
<span  style="">  52                                                                                                          </span>
<span class="6725701503700558455" onmouseenter="enter('6725701503700558455');" onmouseout="out('6725701503700558455');" style="">  53     private AppFilter mAppFilter;                                                                        </span>
<span  style="">  54                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  55     /**                                                                                                  </span>
<span class="2496285524079702545" onmouseenter="enter('2496285524079702545');" onmouseout="out('2496285524079702545');" style="">  56      * Boring constructor.                                                                               </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  57      */                                                                                                  </span>
<span class="-7973856851091008922" onmouseenter="enter('-7973856851091008922');" onmouseout="out('-7973856851091008922');" style="">  58     public AllAppsList(IconCache iconCache, AppFilter appFilter) {                                       </span>
<span class="1920389422449187498" onmouseenter="enter('1920389422449187498');" onmouseout="out('1920389422449187498');" style="">  59         mIconCache = iconCache;                                                                          </span>
<span class="-731369552390552931" onmouseenter="enter('-731369552390552931');" onmouseout="out('-731369552390552931');" style="">  60         mAppFilter = appFilter;                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  61     }                                                                                                    </span>
<span  style="">  62                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  63     /**                                                                                                  </span>
<span class="-8981990233191318303" onmouseenter="enter('-8981990233191318303');" onmouseout="out('-8981990233191318303');" style="">  64      * Add the supplied ApplicationInfo objects to the list, and enqueue it into the                     </span>
<span class="-7118316917537758192" onmouseenter="enter('-7118316917537758192');" onmouseout="out('-7118316917537758192');" style="">  65      * list to broadcast when notify() is called.                                                        </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">  66      *                                                                                                   </span>
<span class="1862405582651527032" onmouseenter="enter('1862405582651527032');" onmouseout="out('1862405582651527032');" style="">  67      * If the app is already in the list, doesn&#x27;t add it.                                                </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  68      */                                                                                                  </span>
<span class="8680343285174562180" onmouseenter="enter('8680343285174562180');" onmouseout="out('8680343285174562180');" style="">  69     public void add(AppInfo info) {                                                                      </span>
<span class="7370996946193506761" onmouseenter="enter('7370996946193506761');" onmouseout="out('7370996946193506761');" style="">  70         if ((mAppFilter != null) &amp;&amp; (!mAppFilter.shouldShowApp(info.componentName))) {                   </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">  71             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  72         }                                                                                                </span>
<span class="4426514774478750888" onmouseenter="enter('4426514774478750888');" onmouseout="out('4426514774478750888');" style="">  73         if (findActivity(data, info.componentName, info.user)) {                                         </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">  74             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  75         }                                                                                                </span>
<span class="-7186167164144977405" onmouseenter="enter('-7186167164144977405');" onmouseout="out('-7186167164144977405');" style="">  76         data.add(info);                                                                                  </span>
<span class="6297895021131252846" onmouseenter="enter('6297895021131252846');" onmouseout="out('6297895021131252846');" style="">  77         added.add(info);                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  78     }                                                                                                    </span>
<span  style="">  79                                                                                                          </span>
<span class="8383369073942967129" onmouseenter="enter('8383369073942967129');" onmouseout="out('8383369073942967129');" style="">  80     public void clear() {                                                                                </span>
<span class="3625030345540762376" onmouseenter="enter('3625030345540762376');" onmouseout="out('3625030345540762376');" style="">  81         data.clear();                                                                                    </span>
<span class="-3532776475985990888" onmouseenter="enter('-3532776475985990888');" onmouseout="out('-3532776475985990888');" style="">  82         // TODO: do we clear these too?                                                                  </span>
<span class="-5699441102723791460" onmouseenter="enter('-5699441102723791460');" onmouseout="out('-5699441102723791460');" style="">  83         added.clear();                                                                                   </span>
<span class="-8171639104297689352" onmouseenter="enter('-8171639104297689352');" onmouseout="out('-8171639104297689352');" style="">  84         removed.clear();                                                                                 </span>
<span class="8808169441892969779" onmouseenter="enter('8808169441892969779');" onmouseout="out('8808169441892969779');" style="">  85         modified.clear();                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  86     }                                                                                                    </span>
<span  style="">  87                                                                                                          </span>
<span class="5501185527198334216" onmouseenter="enter('5501185527198334216');" onmouseout="out('5501185527198334216');" style="">  88     public int size() {                                                                                  </span>
<span class="-1497725231916451819" onmouseenter="enter('-1497725231916451819');" onmouseout="out('-1497725231916451819');" style="">  89         return data.size();                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  90     }                                                                                                    </span>
<span  style="">  91                                                                                                          </span>
<span class="-6501432589969299828" onmouseenter="enter('-6501432589969299828');" onmouseout="out('-6501432589969299828');" style="">  92     public AppInfo get(int index) {                                                                      </span>
<span class="7032246991200994526" onmouseenter="enter('7032246991200994526');" onmouseout="out('7032246991200994526');" style="">  93         return data.get(index);                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  94     }                                                                                                    </span>
<span  style="">  95                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  96     /**                                                                                                  </span>
<span class="8159855286441519655" onmouseenter="enter('8159855286441519655');" onmouseout="out('8159855286441519655');" style="">  97      * Add the icons for the supplied apk called packageName.                                            </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  98      */                                                                                                  </span>
<span class="-3190168712320507375" onmouseenter="enter('-3190168712320507375');" onmouseout="out('-3190168712320507375');" style="">  99     public void addPackage(Context context, String packageName, UserHandleCompat user) {                 </span>
<span class="1503035760407804955" onmouseenter="enter('1503035760407804955');" onmouseout="out('1503035760407804955');" style=""> 100         final LauncherAppsCompat launcherApps = LauncherAppsCompat.getInstance(context);                 </span>
<span class="3489398938559391088" onmouseenter="enter('3489398938559391088');" onmouseout="out('3489398938559391088');" style=""> 101         final List&lt;LauncherActivityInfoCompat&gt; matches = launcherApps.getActivityList(packageName, user);</span>
<span class="-4392145982843511212" onmouseenter="enter('-4392145982843511212');" onmouseout="out('-4392145982843511212');" style=""> 102         if (matches.size() &gt; 0) {                                                                        </span>
<span class="6783020136140698262" onmouseenter="enter('6783020136140698262');" onmouseout="out('6783020136140698262');" style=""> 103             for (LauncherActivityInfoCompat info : matches) {                                            </span>
<span class="-4311572429590028382" onmouseenter="enter('-4311572429590028382');" onmouseout="out('-4311572429590028382');" style=""> 104                 add(new AppInfo(context, info, user, mIconCache, null));                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 105             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 106         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 107     }                                                                                                    </span>
<span  style=""> 108                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 109     /**                                                                                                  </span>
<span class="8924965312796975897" onmouseenter="enter('8924965312796975897');" onmouseout="out('8924965312796975897');" style=""> 110      * Remove the apps for the given apk identified by packageName.                                      </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 111      */                                                                                                  </span>
<span class="-6776151234703058548" onmouseenter="enter('-6776151234703058548');" onmouseout="out('-6776151234703058548');" style=""> 112     public void removePackage(String packageName, UserHandleCompat user) {                               </span>
<span class="8835944207165319620" onmouseenter="enter('8835944207165319620');" onmouseout="out('8835944207165319620');" style=""> 113         final List&lt;AppInfo&gt; data = this.data;                                                            </span>
<span class="5261423022105669060" onmouseenter="enter('5261423022105669060');" onmouseout="out('5261423022105669060');" style=""> 114         for (int i = data.size() - 1; i &gt;= 0; i--) {                                                     </span>
<span class="-7225725324024154592" onmouseenter="enter('-7225725324024154592');" onmouseout="out('-7225725324024154592');" style=""> 115             AppInfo info = data.get(i);                                                                  </span>
<span class="3939017754561154888" onmouseenter="enter('3939017754561154888');" onmouseout="out('3939017754561154888');" style=""> 116             final ComponentName component = info.intent.getComponent();                                  </span>
<span class="-7692104339662087356" onmouseenter="enter('-7692104339662087356');" onmouseout="out('-7692104339662087356');" style=""> 117             if (info.user.equals(user) &amp;&amp; packageName.equals(component.getPackageName())) {              </span>
<span class="-6757903531839214419" onmouseenter="enter('-6757903531839214419');" onmouseout="out('-6757903531839214419');" style=""> 118                 removed.add(info);                                                                       </span>
<span class="1518519619716086564" onmouseenter="enter('1518519619716086564');" onmouseout="out('1518519619716086564');" style=""> 119                 data.remove(i);                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 120             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 121         }                                                                                                </span>
<span class="27975313893554723" onmouseenter="enter('27975313893554723');" onmouseout="out('27975313893554723');" style=""> 122         mIconCache.remove(packageName, user);                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 123     }                                                                                                    </span>
<span  style=""> 124                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 125     /**                                                                                                  </span>
<span class="-4838399043083901482" onmouseenter="enter('-4838399043083901482');" onmouseout="out('-4838399043083901482');" style=""> 126      * Add and remove icons for this package which has been updated.                                     </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 127      */                                                                                                  </span>
<span class="-1777314305379940625" onmouseenter="enter('-1777314305379940625');" onmouseout="out('-1777314305379940625');" style=""> 128     public void updatePackage(Context context, String packageName, UserHandleCompat user) {              </span>
<span class="1503035760407804955" onmouseenter="enter('1503035760407804955');" onmouseout="out('1503035760407804955');" style=""> 129         final LauncherAppsCompat launcherApps = LauncherAppsCompat.getInstance(context);                 </span>
<span class="3489398938559391088" onmouseenter="enter('3489398938559391088');" onmouseout="out('3489398938559391088');" style=""> 130         final List&lt;LauncherActivityInfoCompat&gt; matches = launcherApps.getActivityList(packageName, user);</span>
<span class="-4392145982843511212" onmouseenter="enter('-4392145982843511212');" onmouseout="out('-4392145982843511212');" style=""> 131         if (matches.size() &gt; 0) {                                                                        </span>
<span class="8518378968323826463" onmouseenter="enter('8518378968323826463');" onmouseout="out('8518378968323826463');" style=""> 132             // Find disabled/removed activities and remove them from data and add them                   </span>
<span class="-8567721530358817855" onmouseenter="enter('-8567721530358817855');" onmouseout="out('-8567721530358817855');" style=""> 133             // to the removed list.                                                                      </span>
<span class="5261423022105669060" onmouseenter="enter('5261423022105669060');" onmouseout="out('5261423022105669060');" style=""> 134             for (int i = data.size() - 1; i &gt;= 0; i--) {                                                 </span>
<span class="-2601216551113717144" onmouseenter="enter('-2601216551113717144');" onmouseout="out('-2601216551113717144');" style=""> 135                 final AppInfo applicationInfo = data.get(i);                                             </span>
<span class="3941728651888076052" onmouseenter="enter('3941728651888076052');" onmouseout="out('3941728651888076052');" style=""> 136                 final ComponentName component = applicationInfo.intent.getComponent();                   </span>
<span class="-9049269088606912840" onmouseenter="enter('-9049269088606912840');" onmouseout="out('-9049269088606912840');" style=""><abbr title=" 137                 if (user.equals(applicationInfo.user) &amp;&amp; packageName.equals(component.getPackageName())) {"> 137                 if (user.equals(applicationInfo.user) &amp;&amp; packageName.equals(component.getPackageName())) </abbr></span>
<span class="-55241334586483794" onmouseenter="enter('-55241334586483794');" onmouseout="out('-55241334586483794');" style=""> 138                     if (!findActivity(matches, component)) {                                             </span>
<span class="3352366077941007848" onmouseenter="enter('3352366077941007848');" onmouseout="out('3352366077941007848');" style=""> 139                         removed.add(applicationInfo);                                                    </span>
<span class="5383064569333074457" onmouseenter="enter('5383064569333074457');" onmouseout="out('5383064569333074457');" style=""> 140                         mIconCache.remove(component, user);                                              </span>
<span class="1518519619716086564" onmouseenter="enter('1518519619716086564');" onmouseout="out('1518519619716086564');" style=""> 141                         data.remove(i);                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 142                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 143                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 144             }                                                                                            </span>
<span class="-4767682497305231646" onmouseenter="enter('-4767682497305231646');" onmouseout="out('-4767682497305231646');" style=""> 145             // Find enabled activities and add them to the adapter                                       </span>
<span class="-4153876202891715545" onmouseenter="enter('-4153876202891715545');" onmouseout="out('-4153876202891715545');" style=""> 146             // Also updates existing activities with new labels/icons                                    </span>
<span class="-8082051884301984312" onmouseenter="enter('-8082051884301984312');" onmouseout="out('-8082051884301984312');" style=""> 147             int count = matches.size();                                                                  </span>
<span class="678980937581768133" onmouseenter="enter('678980937581768133');" onmouseout="out('678980937581768133');" style=""> 148             for (int i = 0; i &lt; count; i++) {                                                            </span>
<span class="6505367795053961568" onmouseenter="enter('6505367795053961568');" onmouseout="out('6505367795053961568');" style=""> 149                 final LauncherActivityInfoCompat info = matches.get(i);                                  </span>
<span class="228710269743449712" onmouseenter="enter('228710269743449712');" onmouseout="out('228710269743449712');" style=""><abbr title=" 150                 AppInfo applicationInfo = findApplicationInfoLocked(info.getComponentName().getPackageName(), user, info.getComponentName().getClassName());"> 150                 AppInfo applicationInfo = findApplicationInfoLocked(info.getComponentName().getPackageNam</abbr></span>
<span class="3106189926107904698" onmouseenter="enter('3106189926107904698');" onmouseout="out('3106189926107904698');" style=""> 151                 if (applicationInfo == null) {                                                           </span>
<span class="-4311572429590028382" onmouseenter="enter('-4311572429590028382');" onmouseout="out('-4311572429590028382');" style=""> 152                     add(new AppInfo(context, info, user, mIconCache, null));                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 153                 } else {                                                                                 </span>
<span class="1852466449544150979" onmouseenter="enter('1852466449544150979');" onmouseout="out('1852466449544150979');" style=""> 154                     mIconCache.remove(applicationInfo.componentName, user);                              </span>
<span class="-2337076813599484203" onmouseenter="enter('-2337076813599484203');" onmouseout="out('-2337076813599484203');" style=""> 155                     mIconCache.getTitleAndIcon(applicationInfo, info, null);                             </span>
<span class="-4704128035543949862" onmouseenter="enter('-4704128035543949862');" onmouseout="out('-4704128035543949862');" style=""> 156                     modified.add(applicationInfo);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 157                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 158             }                                                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 159         } else {                                                                                         </span>
<span class="-8892510416285113016" onmouseenter="enter('-8892510416285113016');" onmouseout="out('-8892510416285113016');" style=""> 160             // Remove all data for this package.                                                         </span>
<span class="5261423022105669060" onmouseenter="enter('5261423022105669060');" onmouseout="out('5261423022105669060');" style=""> 161             for (int i = data.size() - 1; i &gt;= 0; i--) {                                                 </span>
<span class="-2601216551113717144" onmouseenter="enter('-2601216551113717144');" onmouseout="out('-2601216551113717144');" style=""> 162                 final AppInfo applicationInfo = data.get(i);                                             </span>
<span class="3941728651888076052" onmouseenter="enter('3941728651888076052');" onmouseout="out('3941728651888076052');" style=""> 163                 final ComponentName component = applicationInfo.intent.getComponent();                   </span>
<span class="-9049269088606912840" onmouseenter="enter('-9049269088606912840');" onmouseout="out('-9049269088606912840');" style=""><abbr title=" 164                 if (user.equals(applicationInfo.user) &amp;&amp; packageName.equals(component.getPackageName())) {"> 164                 if (user.equals(applicationInfo.user) &amp;&amp; packageName.equals(component.getPackageName())) </abbr></span>
<span class="3352366077941007848" onmouseenter="enter('3352366077941007848');" onmouseout="out('3352366077941007848');" style=""> 165                     removed.add(applicationInfo);                                                        </span>
<span class="5383064569333074457" onmouseenter="enter('5383064569333074457');" onmouseout="out('5383064569333074457');" style=""> 166                     mIconCache.remove(component, user);                                                  </span>
<span class="1518519619716086564" onmouseenter="enter('1518519619716086564');" onmouseout="out('1518519619716086564');" style=""> 167                     data.remove(i);                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 168                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 169             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 170         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 171     }                                                                                                    </span>
<span  style=""> 172                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 173     /**                                                                                                  </span>
<span class="-6580154880616124283" onmouseenter="enter('-6580154880616124283');" onmouseout="out('-6580154880616124283');" style=""> 174      * Returns whether &lt;em&gt;apps&lt;/em&gt; contains &lt;em&gt;component&lt;/em&gt;.                                        </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 175      */                                                                                                  </span>
<span class="3636344231672010099" onmouseenter="enter('3636344231672010099');" onmouseout="out('3636344231672010099');" style=""> 176     private static boolean findActivity(List&lt;LauncherActivityInfoCompat&gt; apps, ComponentName component) {</span>
<span class="-65930790523571275" onmouseenter="enter('-65930790523571275');" onmouseout="out('-65930790523571275');" style=""> 177         for (LauncherActivityInfoCompat info : apps) {                                                   </span>
<span class="-8375684156888401838" onmouseenter="enter('-8375684156888401838');" onmouseout="out('-8375684156888401838');" style=""> 178             if (info.getComponentName().equals(component)) {                                             </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 179                 return true;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 180             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 181         }                                                                                                </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 182         return false;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 183     }                                                                                                    </span>
<span  style=""> 184                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 185     /**                                                                                                  </span>
<span class="1584349804020982826" onmouseenter="enter('1584349804020982826');" onmouseout="out('1584349804020982826');" style=""> 186      * Query the launcher apps service for whether the supplied package has                              </span>
<span class="858612715869706648" onmouseenter="enter('858612715869706648');" onmouseout="out('858612715869706648');" style=""> 187      * MAIN/LAUNCHER activities in the supplied package.                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 188      */                                                                                                  </span>
<span class="6085519650571897334" onmouseenter="enter('6085519650571897334');" onmouseout="out('6085519650571897334');" style=""> 189     static boolean packageHasActivities(Context context, String packageName, UserHandleCompat user) {    </span>
<span class="1503035760407804955" onmouseenter="enter('1503035760407804955');" onmouseout="out('1503035760407804955');" style=""> 190         final LauncherAppsCompat launcherApps = LauncherAppsCompat.getInstance(context);                 </span>
<span class="8816768447590931735" onmouseenter="enter('8816768447590931735');" onmouseout="out('8816768447590931735');" style=""> 191         return launcherApps.getActivityList(packageName, user).size() &gt; 0;                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 192     }                                                                                                    </span>
<span  style=""> 193                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 194     /**                                                                                                  </span>
<span class="-6580154880616124283" onmouseenter="enter('-6580154880616124283');" onmouseout="out('-6580154880616124283');" style=""> 195      * Returns whether &lt;em&gt;apps&lt;/em&gt; contains &lt;em&gt;component&lt;/em&gt;.                                        </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 196      */                                                                                                  </span>
<span class="794639500567587301" onmouseenter="enter('794639500567587301');" onmouseout="out('794639500567587301');" style=""><abbr title=" 197     private static boolean findActivity(ArrayList&lt;AppInfo&gt; apps, ComponentName component, UserHandleCompat user) {"> 197     private static boolean findActivity(ArrayList&lt;AppInfo&gt; apps, ComponentName component, UserHandleCompa</abbr></span>
<span class="-5251491591102275665" onmouseenter="enter('-5251491591102275665');" onmouseout="out('-5251491591102275665');" style=""> 198         final int N = apps.size();                                                                       </span>
<span class="-6986277310164926403" onmouseenter="enter('-6986277310164926403');" onmouseout="out('-6986277310164926403');" style=""> 199         for (int i = 0; i &lt; N; i++) {                                                                    </span>
<span class="87495975616151077" onmouseenter="enter('87495975616151077');" onmouseout="out('87495975616151077');" style=""> 200             final AppInfo info = apps.get(i);                                                            </span>
<span class="7422371779834560812" onmouseenter="enter('7422371779834560812');" onmouseout="out('7422371779834560812');" style=""> 201             if (info.user.equals(user) &amp;&amp; info.componentName.equals(component)) {                        </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 202                 return true;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 203             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 204         }                                                                                                </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 205         return false;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 206     }                                                                                                    </span>
<span  style=""> 207                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 208     /**                                                                                                  </span>
<span class="-6273342870262201590" onmouseenter="enter('-6273342870262201590');" onmouseout="out('-6273342870262201590');" style=""> 209      * Find an ApplicationInfo object for the given packageName and className.                           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 210      */                                                                                                  </span>
<span class="8446946679889461466" onmouseenter="enter('8446946679889461466');" onmouseout="out('8446946679889461466');" style=""><abbr title=" 211     private AppInfo findApplicationInfoLocked(String packageName, UserHandleCompat user, String className) {"> 211     private AppInfo findApplicationInfoLocked(String packageName, UserHandleCompat user, String className</abbr></span>
<span class="-2634247027593126088" onmouseenter="enter('-2634247027593126088');" onmouseout="out('-2634247027593126088');" style=""> 212         for (AppInfo info : data) {                                                                      </span>
<span class="3939017754561154888" onmouseenter="enter('3939017754561154888');" onmouseout="out('3939017754561154888');" style=""> 213             final ComponentName component = info.intent.getComponent();                                  </span>
<span class="-7281032084711707210" onmouseenter="enter('-7281032084711707210');" onmouseout="out('-7281032084711707210');" style=""><abbr title=" 214             if ((user.equals(info.user) &amp;&amp; packageName.equals(component.getPackageName())) &amp;&amp; className.equals(component.getClassName())) {"> 214             if ((user.equals(info.user) &amp;&amp; packageName.equals(component.getPackageName())) &amp;&amp; className.e</abbr></span>
<span class="-3556780733195614200" onmouseenter="enter('-3556780733195614200');" onmouseout="out('-3556780733195614200');" style=""> 215                 return info;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 216             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 217         }                                                                                                </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 218         return null;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 219     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 220 }                                                                                                        </span>

























</pre></td>
                        </tr>
                    </table>
                </div>
                <div id="bottom">
                    <table style="margin:auto">
                        <tr>
                            <th>ours vs. base</th>
                            <th>theirs vs. base</th>
                        </tr>
                        <tr>
                            <td><pre><span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style="">   1  /*                                                                                                                </span>
<span class="1710841298952644868" onmouseenter="enter('1710841298952644868');" onmouseout="out('1710841298952644868');" style="">   2   * Copyright (C) 2008 The Android Open Source Project                                                             </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   3   *                                                                                                                </span>
<span class="-7144700690364548245" onmouseenter="enter('-7144700690364548245');" onmouseout="out('-7144700690364548245');" style="">   4   * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);                                                </span>
<span class="-6614298523444173250" onmouseenter="enter('-6614298523444173250');" onmouseout="out('-6614298523444173250');" style="">   5   * you may not use this file except in compliance with the License.                                               </span>
<span class="-4753901504248728101" onmouseenter="enter('-4753901504248728101');" onmouseout="out('-4753901504248728101');" style="">   6   * You may obtain a copy of the License at                                                                        </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   7   *                                                                                                                </span>
<span class="-763207030729826407" onmouseenter="enter('-763207030729826407');" onmouseout="out('-763207030729826407');" style="">   8   *      http://www.apache.org/licenses/LICENSE-2.0                                                                </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   9   *                                                                                                                </span>
<span class="2557607632756179983" onmouseenter="enter('2557607632756179983');" onmouseout="out('2557607632756179983');" style="">  10   * Unless required by applicable law or agreed to in writing, software                                            </span>
<span class="-9189129105512731955" onmouseenter="enter('-9189129105512731955');" onmouseout="out('-9189129105512731955');" style="">  11   * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,                                              </span>
<span class="5781161717946418340" onmouseenter="enter('5781161717946418340');" onmouseout="out('5781161717946418340');" style="">  12   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.                                       </span>
<span class="1761562277992059393" onmouseenter="enter('1761562277992059393');" onmouseout="out('1761562277992059393');" style="">  13   * See the License for the specific language governing permissions and                                            </span>
<span class="7217408601297779962" onmouseenter="enter('7217408601297779962');" onmouseout="out('7217408601297779962');" style="">  14   * limitations under the License.                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  15   */                                                                                                               </span>
<span  style="">  16                                                                                                                    </span>
<span class="5824586583419512860" onmouseenter="enter('5824586583419512860');" onmouseout="out('5824586583419512860');" style="">  17  package com.android.launcher3;                                                                                    </span>
<span  style="">  18                                                                                                                    </span>
<span class="6810188203727856944" onmouseenter="enter('6810188203727856944');" onmouseout="out('6810188203727856944');" style="">  19  import android.content.ComponentName;                                                                             </span>
<span class="5922045460006936195" onmouseenter="enter('5922045460006936195');" onmouseout="out('5922045460006936195');" style="">  20  import android.content.Context;                                                                                   </span>
<span class="6568903789857736568" onmouseenter="enter('6568903789857736568');" onmouseout="out('6568903789857736568');" style="">  21  import android.content.Intent;                                                                                    </span>
<span class="-9183914406029598577" onmouseenter="enter('-9183914406029598577');" onmouseout="out('-9183914406029598577');" style="">  22  import android.content.pm.ActivityInfo;                                                                           </span>
<span class="-1290624633738557221" onmouseenter="enter('-1290624633738557221');" onmouseout="out('-1290624633738557221');" style="">  23  import android.content.pm.PackageManager;                                                                         </span>
<span class="8582326229770324815" onmouseenter="enter('8582326229770324815');" onmouseout="out('8582326229770324815');" style="">  24  import android.content.pm.ResolveInfo;                                                                            </span>
<span  style="">  25                                                                                                                    </span>
<span class="-394760018964595537" onmouseenter="enter('-394760018964595537');" onmouseout="out('-394760018964595537');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  26 +import com.android.launcher3.compat.LauncherActivityInfoCompat;                                                   </span>
<span class="7348855441893227306" onmouseenter="enter('7348855441893227306');" onmouseout="out('7348855441893227306');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  27 +import com.android.launcher3.compat.LauncherAppsCompat;                                                           </span>
<span class="6372524458266053383" onmouseenter="enter('6372524458266053383');" onmouseout="out('6372524458266053383');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  28 +import com.android.launcher3.compat.UserHandleCompat;                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  29 +                                                                                                                  </span>
<span class="9191247685397773893" onmouseenter="enter('9191247685397773893');" onmouseout="out('9191247685397773893');" style="">  30  import java.util.ArrayList;                                                                                       </span>
<span class="-1786020958497218848" onmouseenter="enter('-1786020958497218848');" onmouseout="out('-1786020958497218848');" style="">  31  import java.util.List;                                                                                            </span>
<span  style="">  32                                                                                                                    </span>
<span  style="">  33                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  34  /**                                                                                                               </span>
<span class="2610009611091842856" onmouseenter="enter('2610009611091842856');" onmouseout="out('2610009611091842856');" style="">  35   * Stores the list of all applications for the all apps view.                                                     </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  36   */                                                                                                               </span>
<span class="-7274444873086336525" onmouseenter="enter('-7274444873086336525');" onmouseout="out('-7274444873086336525');" style="">  37  class AllAppsList {                                                                                               </span>
<span class="6815784767769879144" onmouseenter="enter('6815784767769879144');" onmouseout="out('6815784767769879144');" style="">  38      public static final int DEFAULT_APPLICATIONS_NUMBER = 42;                                                     </span>
<span  style="">  39                                                                                                                    </span>
<span class="-2860744678198899912" onmouseenter="enter('-2860744678198899912');" onmouseout="out('-2860744678198899912');" style="">  40      /** The list off all apps. */                                                                                 </span>
<span class="745790943183470157" onmouseenter="enter('745790943183470157');" onmouseout="out('745790943183470157');" style="">  41      public ArrayList&lt;AppInfo&gt; data =                                                                              </span>
<span class="1543666060105331231" onmouseenter="enter('1543666060105331231');" onmouseout="out('1543666060105331231');" style="">  42              new ArrayList&lt;AppInfo&gt;(DEFAULT_APPLICATIONS_NUMBER);                                                  </span>
<span class="-2318138568943717218" onmouseenter="enter('-2318138568943717218');" onmouseout="out('-2318138568943717218');" style="">  43      /** The list of apps that have been added since the last notify() call. */                                    </span>
<span class="2455668399231812776" onmouseenter="enter('2455668399231812776');" onmouseout="out('2455668399231812776');" style="">  44      public ArrayList&lt;AppInfo&gt; added =                                                                             </span>
<span class="1543666060105331231" onmouseenter="enter('1543666060105331231');" onmouseout="out('1543666060105331231');" style="">  45              new ArrayList&lt;AppInfo&gt;(DEFAULT_APPLICATIONS_NUMBER);                                                  </span>
<span class="5689859138989553098" onmouseenter="enter('5689859138989553098');" onmouseout="out('5689859138989553098');" style="">  46      /** The list of apps that have been removed since the last notify() call. */                                  </span>
<span class="5962158200043260112" onmouseenter="enter('5962158200043260112');" onmouseout="out('5962158200043260112');" style="">  47      public ArrayList&lt;AppInfo&gt; removed = new ArrayList&lt;AppInfo&gt;();                                                 </span>
<span class="2205421830873834692" onmouseenter="enter('2205421830873834692');" onmouseout="out('2205421830873834692');" style="">  48      /** The list of apps that have been modified since the last notify() call. */                                 </span>
<span class="734344745062201427" onmouseenter="enter('734344745062201427');" onmouseout="out('734344745062201427');" style="">  49      public ArrayList&lt;AppInfo&gt; modified = new ArrayList&lt;AppInfo&gt;();                                                </span>
<span  style="">  50                                                                                                                    </span>
<span class="-3446390922171092190" onmouseenter="enter('-3446390922171092190');" onmouseout="out('-3446390922171092190');" style="">  51      private IconCache mIconCache;                                                                                 </span>
<span  style="">  52                                                                                                                    </span>
<span class="6725701503700558455" onmouseenter="enter('6725701503700558455');" onmouseout="out('6725701503700558455');" style="">  53      private AppFilter mAppFilter;                                                                                 </span>
<span  style="">  54                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  55      /**                                                                                                           </span>
<span class="2496285524079702545" onmouseenter="enter('2496285524079702545');" onmouseout="out('2496285524079702545');" style="">  56       * Boring constructor.                                                                                        </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  57       */                                                                                                           </span>
<span class="-7973856851091008922" onmouseenter="enter('-7973856851091008922');" onmouseout="out('-7973856851091008922');" style="">  58      public AllAppsList(IconCache iconCache, AppFilter appFilter) {                                                </span>
<span class="1920389422449187498" onmouseenter="enter('1920389422449187498');" onmouseout="out('1920389422449187498');" style="">  59          mIconCache = iconCache;                                                                                   </span>
<span class="-731369552390552931" onmouseenter="enter('-731369552390552931');" onmouseout="out('-731369552390552931');" style="">  60          mAppFilter = appFilter;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  61      }                                                                                                             </span>
<span  style="">  62                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  63      /**                                                                                                           </span>
<span class="-8981990233191318303" onmouseenter="enter('-8981990233191318303');" onmouseout="out('-8981990233191318303');" style="">  64       * Add the supplied ApplicationInfo objects to the list, and enqueue it into the                              </span>
<span class="-7118316917537758192" onmouseenter="enter('-7118316917537758192');" onmouseout="out('-7118316917537758192');" style="">  65       * list to broadcast when notify() is called.                                                                 </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">  66       *                                                                                                            </span>
<span class="1862405582651527032" onmouseenter="enter('1862405582651527032');" onmouseout="out('1862405582651527032');" style="">  67       * If the app is already in the list, doesn&#x27;t add it.                                                         </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  68       */                                                                                                           </span>
<span class="8680343285174562180" onmouseenter="enter('8680343285174562180');" onmouseout="out('8680343285174562180');" style="">  69      public void add(AppInfo info) {                                                                               </span>
<span class="-7383631586676499787" onmouseenter="enter('-7383631586676499787');" onmouseout="out('-7383631586676499787');" style="">  70          if (mAppFilter != null &amp;&amp; !mAppFilter.shouldShowApp(info.componentName)) {                                </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">  71              return;                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  72          }                                                                                                         </span>
<span class="6175199378716514725" onmouseenter="enter('6175199378716514725');" onmouseout="out('6175199378716514725');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  73 -        if (findActivity(data, info.componentName)) {                                                             </span>
<span class="4426514774478750888" onmouseenter="enter('4426514774478750888');" onmouseout="out('4426514774478750888');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  74 +        if (findActivity(data, info.componentName, info.user)) {                                                  </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">  75              return;                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  76          }                                                                                                         </span>
<span class="-7186167164144977405" onmouseenter="enter('-7186167164144977405');" onmouseout="out('-7186167164144977405');" style="">  77          data.add(info);                                                                                           </span>
<span class="6297895021131252846" onmouseenter="enter('6297895021131252846');" onmouseout="out('6297895021131252846');" style="">  78          added.add(info);                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  79      }                                                                                                             </span>
<span  style="">  80                                                                                                                    </span>
<span class="8383369073942967129" onmouseenter="enter('8383369073942967129');" onmouseout="out('8383369073942967129');" style="">  81      public void clear() {                                                                                         </span>
<span class="3625030345540762376" onmouseenter="enter('3625030345540762376');" onmouseout="out('3625030345540762376');" style="">  82          data.clear();                                                                                             </span>
<span class="-3532776475985990888" onmouseenter="enter('-3532776475985990888');" onmouseout="out('-3532776475985990888');" style="">  83          // TODO: do we clear these too?                                                                           </span>
<span class="-5699441102723791460" onmouseenter="enter('-5699441102723791460');" onmouseout="out('-5699441102723791460');" style="">  84          added.clear();                                                                                            </span>
<span class="-8171639104297689352" onmouseenter="enter('-8171639104297689352');" onmouseout="out('-8171639104297689352');" style="">  85          removed.clear();                                                                                          </span>
<span class="8808169441892969779" onmouseenter="enter('8808169441892969779');" onmouseout="out('8808169441892969779');" style="">  86          modified.clear();                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  87      }                                                                                                             </span>
<span  style="">  88                                                                                                                    </span>
<span class="5501185527198334216" onmouseenter="enter('5501185527198334216');" onmouseout="out('5501185527198334216');" style="">  89      public int size() {                                                                                           </span>
<span class="-1497725231916451819" onmouseenter="enter('-1497725231916451819');" onmouseout="out('-1497725231916451819');" style="">  90          return data.size();                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  91      }                                                                                                             </span>
<span  style="">  92                                                                                                                    </span>
<span class="-6501432589969299828" onmouseenter="enter('-6501432589969299828');" onmouseout="out('-6501432589969299828');" style="">  93      public AppInfo get(int index) {                                                                               </span>
<span class="7032246991200994526" onmouseenter="enter('7032246991200994526');" onmouseout="out('7032246991200994526');" style="">  94          return data.get(index);                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  95      }                                                                                                             </span>
<span  style="">  96                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  97      /**                                                                                                           </span>
<span class="8159855286441519655" onmouseenter="enter('8159855286441519655');" onmouseout="out('8159855286441519655');" style="">  98       * Add the icons for the supplied apk called packageName.                                                     </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  99       */                                                                                                           </span>
<span class="-1283636467205988399" onmouseenter="enter('-1283636467205988399');" onmouseout="out('-1283636467205988399');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 100 -    public void addPackage(Context context, String packageName) {                                                 </span>
<span class="9029623368162764319" onmouseenter="enter('9029623368162764319');" onmouseout="out('9029623368162764319');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 101 -        final List&lt;ResolveInfo&gt; matches = findActivitiesForPackage(context, packageName);                         </span>
<span class="-3190168712320507375" onmouseenter="enter('-3190168712320507375');" onmouseout="out('-3190168712320507375');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 102 +    public void addPackage(Context context, String packageName, UserHandleCompat user) {                          </span>
<span class="1503035760407804955" onmouseenter="enter('1503035760407804955');" onmouseout="out('1503035760407804955');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 103 +        final LauncherAppsCompat launcherApps = LauncherAppsCompat.getInstance(context);                          </span>
<span class="8847745329654956593" onmouseenter="enter('8847745329654956593');" onmouseout="out('8847745329654956593');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 104 +        final List&lt;LauncherActivityInfoCompat&gt; matches = launcherApps.getActivityList(packageName,                </span>
<span class="1134753456474152449" onmouseenter="enter('1134753456474152449');" onmouseout="out('1134753456474152449');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 105 +                user);                                                                                            </span>
<span  style=""> 106                                                                                                                    </span>
<span class="-4392145982843511212" onmouseenter="enter('-4392145982843511212');" onmouseout="out('-4392145982843511212');" style=""> 107          if (matches.size() &gt; 0) {                                                                                 </span>
<span class="2093267061453621533" onmouseenter="enter('2093267061453621533');" onmouseout="out('2093267061453621533');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 108 -            for (ResolveInfo info : matches) {                                                                    </span>
<span class="-7817009653945262906" onmouseenter="enter('-7817009653945262906');" onmouseout="out('-7817009653945262906');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 109 -                add(new AppInfo(context.getPackageManager(), info, mIconCache, null));                            </span>
<span class="6783020136140698262" onmouseenter="enter('6783020136140698262');" onmouseout="out('6783020136140698262');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 110 +            for (LauncherActivityInfoCompat info : matches) {                                                     </span>
<span class="-4311572429590028382" onmouseenter="enter('-4311572429590028382');" onmouseout="out('-4311572429590028382');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 111 +                add(new AppInfo(context, info, user, mIconCache, null));                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 112              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 113          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 114      }                                                                                                             </span>
<span  style=""> 115                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 116      /**                                                                                                           </span>
<span class="8924965312796975897" onmouseenter="enter('8924965312796975897');" onmouseout="out('8924965312796975897');" style=""> 117       * Remove the apps for the given apk identified by packageName.                                               </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 118       */                                                                                                           </span>
<span class="9043295693398211122" onmouseenter="enter('9043295693398211122');" onmouseout="out('9043295693398211122');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 119 -    public void removePackage(String packageName) {                                                               </span>
<span class="-6776151234703058548" onmouseenter="enter('-6776151234703058548');" onmouseout="out('-6776151234703058548');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 120 +    public void removePackage(String packageName, UserHandleCompat user) {                                        </span>
<span class="8835944207165319620" onmouseenter="enter('8835944207165319620');" onmouseout="out('8835944207165319620');" style=""> 121          final List&lt;AppInfo&gt; data = this.data;                                                                     </span>
<span class="5261423022105669060" onmouseenter="enter('5261423022105669060');" onmouseout="out('5261423022105669060');" style=""> 122          for (int i = data.size() - 1; i &gt;= 0; i--) {                                                              </span>
<span class="-7225725324024154592" onmouseenter="enter('-7225725324024154592');" onmouseout="out('-7225725324024154592');" style=""> 123              AppInfo info = data.get(i);                                                                           </span>
<span class="3939017754561154888" onmouseenter="enter('3939017754561154888');" onmouseout="out('3939017754561154888');" style=""> 124              final ComponentName component = info.intent.getComponent();                                           </span>
<span class="-6720277205415088602" onmouseenter="enter('-6720277205415088602');" onmouseout="out('-6720277205415088602');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 125 -            if (packageName.equals(component.getPackageName())) {                                                 </span>
<span class="-7692104339662087356" onmouseenter="enter('-7692104339662087356');" onmouseout="out('-7692104339662087356');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 126 +            if (info.user.equals(user) &amp;&amp; packageName.equals(component.getPackageName())) {                       </span>
<span class="-6757903531839214419" onmouseenter="enter('-6757903531839214419');" onmouseout="out('-6757903531839214419');" style=""> 127                  removed.add(info);                                                                                </span>
<span class="1518519619716086564" onmouseenter="enter('1518519619716086564');" onmouseout="out('1518519619716086564');" style=""> 128                  data.remove(i);                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 129              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 130          }                                                                                                         </span>
<span class="-8373531441510729347" onmouseenter="enter('-8373531441510729347');" onmouseout="out('-8373531441510729347');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 131 -        // This is more aggressive than it needs to be.                                                           </span>
<span class="-7277164238927450446" onmouseenter="enter('-7277164238927450446');" onmouseout="out('-7277164238927450446');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 132 -        mIconCache.flush();                                                                                       </span>
<span class="27975313893554723" onmouseenter="enter('27975313893554723');" onmouseout="out('27975313893554723');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 133 +        mIconCache.remove(packageName, user);                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 134      }                                                                                                             </span>
<span  style=""> 135                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 136      /**                                                                                                           </span>
<span class="-4838399043083901482" onmouseenter="enter('-4838399043083901482');" onmouseout="out('-4838399043083901482');" style=""> 137       * Add and remove icons for this package which has been updated.                                              </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 138       */                                                                                                           </span>
<span class="8318530341761506686" onmouseenter="enter('8318530341761506686');" onmouseout="out('8318530341761506686');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 139 -    public void updatePackage(Context context, String packageName) {                                              </span>
<span class="9029623368162764319" onmouseenter="enter('9029623368162764319');" onmouseout="out('9029623368162764319');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 140 -        final List&lt;ResolveInfo&gt; matches = findActivitiesForPackage(context, packageName);                         </span>
<span class="-1777314305379940625" onmouseenter="enter('-1777314305379940625');" onmouseout="out('-1777314305379940625');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 141 +    public void updatePackage(Context context, String packageName, UserHandleCompat user) {                       </span>
<span class="1503035760407804955" onmouseenter="enter('1503035760407804955');" onmouseout="out('1503035760407804955');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 142 +        final LauncherAppsCompat launcherApps = LauncherAppsCompat.getInstance(context);                          </span>
<span class="8847745329654956593" onmouseenter="enter('8847745329654956593');" onmouseout="out('8847745329654956593');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 143 +        final List&lt;LauncherActivityInfoCompat&gt; matches = launcherApps.getActivityList(packageName,                </span>
<span class="1134753456474152449" onmouseenter="enter('1134753456474152449');" onmouseout="out('1134753456474152449');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 144 +                user);                                                                                            </span>
<span class="-4392145982843511212" onmouseenter="enter('-4392145982843511212');" onmouseout="out('-4392145982843511212');" style=""> 145          if (matches.size() &gt; 0) {                                                                                 </span>
<span class="8518378968323826463" onmouseenter="enter('8518378968323826463');" onmouseout="out('8518378968323826463');" style=""> 146              // Find disabled/removed activities and remove them from data and add them                            </span>
<span class="-8567721530358817855" onmouseenter="enter('-8567721530358817855');" onmouseout="out('-8567721530358817855');" style=""> 147              // to the removed list.                                                                               </span>
<span class="5261423022105669060" onmouseenter="enter('5261423022105669060');" onmouseout="out('5261423022105669060');" style=""> 148              for (int i = data.size() - 1; i &gt;= 0; i--) {                                                          </span>
<span class="-2601216551113717144" onmouseenter="enter('-2601216551113717144');" onmouseout="out('-2601216551113717144');" style=""> 149                  final AppInfo applicationInfo = data.get(i);                                                      </span>
<span class="3941728651888076052" onmouseenter="enter('3941728651888076052');" onmouseout="out('3941728651888076052');" style=""> 150                  final ComponentName component = applicationInfo.intent.getComponent();                            </span>
<span class="-6720277205415088602" onmouseenter="enter('-6720277205415088602');" onmouseout="out('-6720277205415088602');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 151 -                if (packageName.equals(component.getPackageName())) {                                             </span>
<span class="-7933265751245397173" onmouseenter="enter('-7933265751245397173');" onmouseout="out('-7933265751245397173');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 152 +                if (user.equals(applicationInfo.user)                                                             </span>
<span class="-4731264622599188863" onmouseenter="enter('-4731264622599188863');" onmouseout="out('-4731264622599188863');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 153 +                        &amp;&amp; packageName.equals(component.getPackageName())) {                                      </span>
<span class="-55241334586483794" onmouseenter="enter('-55241334586483794');" onmouseout="out('-55241334586483794');" style=""> 154                      if (!findActivity(matches, component)) {                                                      </span>
<span class="3352366077941007848" onmouseenter="enter('3352366077941007848');" onmouseout="out('3352366077941007848');" style=""> 155                          removed.add(applicationInfo);                                                             </span>
<span class="6450911850261042727" onmouseenter="enter('6450911850261042727');" onmouseout="out('6450911850261042727');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 156 -                        mIconCache.remove(component);                                                             </span>
<span class="5383064569333074457" onmouseenter="enter('5383064569333074457');" onmouseout="out('5383064569333074457');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 157 +                        mIconCache.remove(component, user);                                                       </span>
<span class="1518519619716086564" onmouseenter="enter('1518519619716086564');" onmouseout="out('1518519619716086564');" style=""> 158                          data.remove(i);                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 159                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 160                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 161              }                                                                                                     </span>
<span  style=""> 162                                                                                                                    </span>
<span class="-4767682497305231646" onmouseenter="enter('-4767682497305231646');" onmouseout="out('-4767682497305231646');" style=""> 163              // Find enabled activities and add them to the adapter                                                </span>
<span class="-4153876202891715545" onmouseenter="enter('-4153876202891715545');" onmouseout="out('-4153876202891715545');" style=""> 164              // Also updates existing activities with new labels/icons                                             </span>
<span class="-8082051884301984312" onmouseenter="enter('-8082051884301984312');" onmouseout="out('-8082051884301984312');" style=""> 165              int count = matches.size();                                                                           </span>
<span class="678980937581768133" onmouseenter="enter('678980937581768133');" onmouseout="out('678980937581768133');" style=""> 166              for (int i = 0; i &lt; count; i++) {                                                                     </span>
<span class="-1774853987950400121" onmouseenter="enter('-1774853987950400121');" onmouseout="out('-1774853987950400121');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 167 -                final ResolveInfo info = matches.get(i);                                                          </span>
<span class="6505367795053961568" onmouseenter="enter('6505367795053961568');" onmouseout="out('6505367795053961568');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 168 +                final LauncherActivityInfoCompat info = matches.get(i);                                           </span>
<span class="-1209711392859633947" onmouseenter="enter('-1209711392859633947');" onmouseout="out('-1209711392859633947');" style=""> 169                  AppInfo applicationInfo = findApplicationInfoLocked(                                              </span>
<span class="2351692059119709987" onmouseenter="enter('2351692059119709987');" onmouseout="out('2351692059119709987');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 170 -                        info.activityInfo.applicationInfo.packageName,                                            </span>
<span class="7135259685446282864" onmouseenter="enter('7135259685446282864');" onmouseout="out('7135259685446282864');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 171 -                        info.activityInfo.name);                                                                  </span>
<span class="6404447875113979134" onmouseenter="enter('6404447875113979134');" onmouseout="out('6404447875113979134');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 172 +                        info.getComponentName().getPackageName(), user,                                           </span>
<span class="8556901928637861886" onmouseenter="enter('8556901928637861886');" onmouseout="out('8556901928637861886');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 173 +                        info.getComponentName().getClassName());                                                  </span>
<span class="3106189926107904698" onmouseenter="enter('3106189926107904698');" onmouseout="out('3106189926107904698');" style=""> 174                  if (applicationInfo == null) {                                                                    </span>
<span class="-7817009653945262906" onmouseenter="enter('-7817009653945262906');" onmouseout="out('-7817009653945262906');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 175 -                    add(new AppInfo(context.getPackageManager(), info, mIconCache, null));                        </span>
<span class="-4311572429590028382" onmouseenter="enter('-4311572429590028382');" onmouseout="out('-4311572429590028382');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 176 +                    add(new AppInfo(context, info, user, mIconCache, null));                                      </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 177                  } else {                                                                                          </span>
<span class="1688796113294402725" onmouseenter="enter('1688796113294402725');" onmouseout="out('1688796113294402725');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 178 -                    mIconCache.remove(applicationInfo.componentName);                                             </span>
<span class="1852466449544150979" onmouseenter="enter('1852466449544150979');" onmouseout="out('1852466449544150979');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 179 +                    mIconCache.remove(applicationInfo.componentName, user);                                       </span>
<span class="-2337076813599484203" onmouseenter="enter('-2337076813599484203');" onmouseout="out('-2337076813599484203');" style=""> 180                      mIconCache.getTitleAndIcon(applicationInfo, info, null);                                      </span>
<span class="-4704128035543949862" onmouseenter="enter('-4704128035543949862');" onmouseout="out('-4704128035543949862');" style=""> 181                      modified.add(applicationInfo);                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 182                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 183              }                                                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 184          } else {                                                                                                  </span>
<span class="-8892510416285113016" onmouseenter="enter('-8892510416285113016');" onmouseout="out('-8892510416285113016');" style=""> 185              // Remove all data for this package.                                                                  </span>
<span class="5261423022105669060" onmouseenter="enter('5261423022105669060');" onmouseout="out('5261423022105669060');" style=""> 186              for (int i = data.size() - 1; i &gt;= 0; i--) {                                                          </span>
<span class="-2601216551113717144" onmouseenter="enter('-2601216551113717144');" onmouseout="out('-2601216551113717144');" style=""> 187                  final AppInfo applicationInfo = data.get(i);                                                      </span>
<span class="3941728651888076052" onmouseenter="enter('3941728651888076052');" onmouseout="out('3941728651888076052');" style=""> 188                  final ComponentName component = applicationInfo.intent.getComponent();                            </span>
<span class="-6720277205415088602" onmouseenter="enter('-6720277205415088602');" onmouseout="out('-6720277205415088602');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 189 -                if (packageName.equals(component.getPackageName())) {                                             </span>
<span class="-7933265751245397173" onmouseenter="enter('-7933265751245397173');" onmouseout="out('-7933265751245397173');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 190 +                if (user.equals(applicationInfo.user)                                                             </span>
<span class="-4731264622599188863" onmouseenter="enter('-4731264622599188863');" onmouseout="out('-4731264622599188863');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 191 +                        &amp;&amp; packageName.equals(component.getPackageName())) {                                      </span>
<span class="3352366077941007848" onmouseenter="enter('3352366077941007848');" onmouseout="out('3352366077941007848');" style=""> 192                      removed.add(applicationInfo);                                                                 </span>
<span class="6450911850261042727" onmouseenter="enter('6450911850261042727');" onmouseout="out('6450911850261042727');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 193 -                    mIconCache.remove(component);                                                                 </span>
<span class="5383064569333074457" onmouseenter="enter('5383064569333074457');" onmouseout="out('5383064569333074457');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 194 +                    mIconCache.remove(component, user);                                                           </span>
<span class="1518519619716086564" onmouseenter="enter('1518519619716086564');" onmouseout="out('1518519619716086564');" style=""> 195                      data.remove(i);                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 196                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 197              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 198          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 199      }                                                                                                             </span>
<span  style=""> 200                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 201 -    /**                                                                                                           </span>
<span class="-2321746230883158607" onmouseenter="enter('-2321746230883158607');" onmouseout="out('-2321746230883158607');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 202 -     * Query the package manager for MAIN/LAUNCHER activities in the supplied package.                            </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 203 -     */                                                                                                           </span>
<span class="-5109231869457210457" onmouseenter="enter('-5109231869457210457');" onmouseout="out('-5109231869457210457');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 204 -    static List&lt;ResolveInfo&gt; findActivitiesForPackage(Context context, String packageName) {                      </span>
<span class="-2256182847101184527" onmouseenter="enter('-2256182847101184527');" onmouseout="out('-2256182847101184527');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 205 -        final PackageManager packageManager = context.getPackageManager();                                        </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 206 -                                                                                                                  </span>
<span class="3249044048564826962" onmouseenter="enter('3249044048564826962');" onmouseout="out('3249044048564826962');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 207 -        final Intent mainIntent = new Intent(Intent.ACTION_MAIN, null);                                           </span>
<span class="7749064114250496515" onmouseenter="enter('7749064114250496515');" onmouseout="out('7749064114250496515');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 208 -        mainIntent.addCategory(Intent.CATEGORY_LAUNCHER);                                                         </span>
<span class="8652855149061740073" onmouseenter="enter('8652855149061740073');" onmouseout="out('8652855149061740073');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 209 -        mainIntent.setPackage(packageName);                                                                       </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 210 -                                                                                                                  </span>
<span class="-20164430534385670" onmouseenter="enter('-20164430534385670');" onmouseout="out('-20164430534385670');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 211 -        final List&lt;ResolveInfo&gt; apps = packageManager.queryIntentActivities(mainIntent, 0);                       </span>
<span class="-6819933280058844455" onmouseenter="enter('-6819933280058844455');" onmouseout="out('-6819933280058844455');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 212 -        return apps != null ? apps : new ArrayList&lt;ResolveInfo&gt;();                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 213 -    }                                                                                                             </span>
<span  style=""> 214                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 215      /**                                                                                                           </span>
<span class="-6580154880616124283" onmouseenter="enter('-6580154880616124283');" onmouseout="out('-6580154880616124283');" style=""> 216       * Returns whether &lt;em&gt;apps&lt;/em&gt; contains &lt;em&gt;component&lt;/em&gt;.                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 217       */                                                                                                           </span>
<span class="-5058417537770512763" onmouseenter="enter('-5058417537770512763');" onmouseout="out('-5058417537770512763');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 218 -    private static boolean findActivity(List&lt;ResolveInfo&gt; apps, ComponentName component) {                        </span>
<span class="-453912904679161453" onmouseenter="enter('-453912904679161453');" onmouseout="out('-453912904679161453');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 219 -        final String className = component.getClassName();                                                        </span>
<span class="9103932161222175819" onmouseenter="enter('9103932161222175819');" onmouseout="out('9103932161222175819');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 220 -        for (ResolveInfo info : apps) {                                                                           </span>
<span class="4178492805266676194" onmouseenter="enter('4178492805266676194');" onmouseout="out('4178492805266676194');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 221 -            final ActivityInfo activityInfo = info.activityInfo;                                                  </span>
<span class="3938311060200017226" onmouseenter="enter('3938311060200017226');" onmouseout="out('3938311060200017226');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 222 -            if (activityInfo.name.equals(className)) {                                                            </span>
<span class="748309623817018074" onmouseenter="enter('748309623817018074');" onmouseout="out('748309623817018074');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 223 +    private static boolean findActivity(List&lt;LauncherActivityInfoCompat&gt; apps,                                    </span>
<span class="2095123178876202639" onmouseenter="enter('2095123178876202639');" onmouseout="out('2095123178876202639');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 224 +            ComponentName component) {                                                                            </span>
<span class="-65930790523571275" onmouseenter="enter('-65930790523571275');" onmouseout="out('-65930790523571275');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 225 +        for (LauncherActivityInfoCompat info : apps) {                                                            </span>
<span class="-8375684156888401838" onmouseenter="enter('-8375684156888401838');" onmouseout="out('-8375684156888401838');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 226 +            if (info.getComponentName().equals(component)) {                                                      </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 227                  return true;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 228              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 229          }                                                                                                         </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 230          return false;                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 231      }                                                                                                             </span>
<span  style=""> 232                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 233      /**                                                                                                           </span>
<span class="1584349804020982826" onmouseenter="enter('1584349804020982826');" onmouseout="out('1584349804020982826');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 234 +     * Query the launcher apps service for whether the supplied package has                                       </span>
<span class="858612715869706648" onmouseenter="enter('858612715869706648');" onmouseout="out('858612715869706648');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 235 +     * MAIN/LAUNCHER activities in the supplied package.                                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 236 +     */                                                                                                           </span>
<span class="-5067613906081422314" onmouseenter="enter('-5067613906081422314');" onmouseout="out('-5067613906081422314');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 237 +    static boolean packageHasActivities(Context context, String packageName,                                      </span>
<span class="2471111398309558462" onmouseenter="enter('2471111398309558462');" onmouseout="out('2471111398309558462');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 238 +            UserHandleCompat user) {                                                                              </span>
<span class="1503035760407804955" onmouseenter="enter('1503035760407804955');" onmouseout="out('1503035760407804955');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 239 +        final LauncherAppsCompat launcherApps = LauncherAppsCompat.getInstance(context);                          </span>
<span class="8816768447590931735" onmouseenter="enter('8816768447590931735');" onmouseout="out('8816768447590931735');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 240 +        return launcherApps.getActivityList(packageName, user).size() &gt; 0;                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 241 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 242 +                                                                                                                  </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 243 +    /**                                                                                                           </span>
<span class="-6580154880616124283" onmouseenter="enter('-6580154880616124283');" onmouseout="out('-6580154880616124283');" style=""> 244       * Returns whether &lt;em&gt;apps&lt;/em&gt; contains &lt;em&gt;component&lt;/em&gt;.                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 245       */                                                                                                           </span>
<span class="-4345598919186179725" onmouseenter="enter('-4345598919186179725');" onmouseout="out('-4345598919186179725');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 246 -    private static boolean findActivity(ArrayList&lt;AppInfo&gt; apps, ComponentName component) {                       </span>
<span class="8423715411263860694" onmouseenter="enter('8423715411263860694');" onmouseout="out('8423715411263860694');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 247 +    private static boolean findActivity(ArrayList&lt;AppInfo&gt; apps, ComponentName component,                         </span>
<span class="2471111398309558462" onmouseenter="enter('2471111398309558462');" onmouseout="out('2471111398309558462');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 248 +            UserHandleCompat user) {                                                                              </span>
<span class="-5251491591102275665" onmouseenter="enter('-5251491591102275665');" onmouseout="out('-5251491591102275665');" style=""> 249          final int N = apps.size();                                                                                </span>
<span class="3652559055205202024" onmouseenter="enter('3652559055205202024');" onmouseout="out('3652559055205202024');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 250 -        for (int i=0; i&lt;N; i++) {                                                                                 </span>
<span class="-6986277310164926403" onmouseenter="enter('-6986277310164926403');" onmouseout="out('-6986277310164926403');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 251 +        for (int i = 0; i &lt; N; i++) {                                                                             </span>
<span class="87495975616151077" onmouseenter="enter('87495975616151077');" onmouseout="out('87495975616151077');" style=""> 252              final AppInfo info = apps.get(i);                                                                     </span>
<span class="7739258475787653636" onmouseenter="enter('7739258475787653636');" onmouseout="out('7739258475787653636');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 253 -            if (info.componentName.equals(component)) {                                                           </span>
<span class="7422371779834560812" onmouseenter="enter('7422371779834560812');" onmouseout="out('7422371779834560812');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 254 +            if (info.user.equals(user) &amp;&amp; info.componentName.equals(component)) {                                 </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 255                  return true;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 256              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 257          }                                                                                                         </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 258          return false;                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 259      }                                                                                                             </span>
<span  style=""> 260                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 261      /**                                                                                                           </span>
<span class="-6273342870262201590" onmouseenter="enter('-6273342870262201590');" onmouseout="out('-6273342870262201590');" style=""> 262       * Find an ApplicationInfo object for the given packageName and className.                                    </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 263       */                                                                                                           </span>
<span class="-8603047398603507459" onmouseenter="enter('-8603047398603507459');" onmouseout="out('-8603047398603507459');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 264 -    private AppInfo findApplicationInfoLocked(String packageName, String className) {                             </span>
<span class="3271722603053353453" onmouseenter="enter('3271722603053353453');" onmouseout="out('3271722603053353453');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 265 +    private AppInfo findApplicationInfoLocked(String packageName, UserHandleCompat user,                          </span>
<span class="3188940561183362045" onmouseenter="enter('3188940561183362045');" onmouseout="out('3188940561183362045');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 266 +            String className) {                                                                                   </span>
<span class="-4349186100161525916" onmouseenter="enter('-4349186100161525916');" onmouseout="out('-4349186100161525916');" style=""> 267          for (AppInfo info: data) {                                                                                </span>
<span class="3939017754561154888" onmouseenter="enter('3939017754561154888');" onmouseout="out('3939017754561154888');" style=""> 268              final ComponentName component = info.intent.getComponent();                                           </span>
<span class="3824344461335341673" onmouseenter="enter('3824344461335341673');" onmouseout="out('3824344461335341673');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 269 -            if (packageName.equals(component.getPackageName())                                                    </span>
<span class="8400916707245015300" onmouseenter="enter('8400916707245015300');" onmouseout="out('8400916707245015300');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 270 +            if (user.equals(info.user) &amp;&amp; packageName.equals(component.getPackageName())                          </span>
<span class="-2904347336649673306" onmouseenter="enter('-2904347336649673306');" onmouseout="out('-2904347336649673306');" style=""> 271                      &amp;&amp; className.equals(component.getClassName())) {                                              </span>
<span class="-3556780733195614200" onmouseenter="enter('-3556780733195614200');" onmouseout="out('-3556780733195614200');" style=""> 272                  return info;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 273              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 274          }                                                                                                         </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 275          return null;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 276      }                                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 277  }                                                                                                                 </span></pre></td>
                            <td><pre></pre></td>
                        </tr>
                    </table>
                </div>
              </body>
            </html>
            