<!DOCTYPE html>
<html lang="en">
          <head>
            <meta charset="utf-8">
            <title>319 chunks</title>
                <style>
                    #top {
                        height: 48vh;
                        overflow-y: auto;
                    }
                    #bottom {
                        height: 48vh;
                        overflow-y: auto;
                    }
                </style>
          </head>
          <body>
            <pre>[[{&#x27;eq&#x27;: [{&#x27;CHUNK_OURS&#x27;: &#x27;&#x27;,
           &#x27;CHUNK_THEIRS&#x27;: &#x27;package com.automattic.simplenote.models;\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;import com.simperium.client.Bucket;\n&#x27;
                           &#x27;import com.simperium.client.Bucket.ObjectCursor;\n&#x27;
                           &#x27;import com.simperium.client.BucketObject;\n&#x27;
                           &#x27;import com.simperium.client.BucketSchema;\n&#x27;
                           &#x27;import com.simperium.client.Query;\n&#x27;
                           &#x27;import com.simperium.client.Query.ComparisonType;\n&#x27;
                           &#x27;import com.simperium.client.Query.SortType;\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;import java.util.Map;\n&#x27;
                           &#x27;import java.util.HashMap;\n&#x27;
                           &#x27;import java.util.List;\n&#x27;
                           &#x27;import java.util.ArrayList;\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;import android.util.Log;\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;public class Tag extends BucketObject {\n&#x27;
                           &#x27;\t\n&#x27;
                           &#x27;\tpublic static final String BUCKET_NAME=&quot;tag&quot;;\n&#x27;
                           &#x27;\tprotected int tagIndex;\n&#x27;
                           &#x27;\tprotected String name = &quot;&quot;;\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;\tpublic static class Schema extends &#x27;
                           &#x27;BucketSchema&lt;Tag&gt; {\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;        public Schema(){\n&#x27;
                           &#x27;            autoIndex();\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;        public String getRemoteName(){\n&#x27;
                           &#x27;            return Tag.BUCKET_NAME;\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;\t\tpublic Tag build(String key, &#x27;
                           &#x27;Map&lt;String,Object&gt;properties){\n&#x27;
                           &#x27;\t\t\treturn new Tag(key, properties);\n&#x27;
                           &#x27;\t\t}\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;        public void update(Tag tag, &#x27;
                           &#x27;Map&lt;String,Object&gt;properties){\n&#x27;
                           &#x27;            tag.setProperties(properties);\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;\t}\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    public static Query&lt;Tag&gt; all(Bucket&lt;Tag&gt; &#x27;
                           &#x27;bucket){\n&#x27;
                           &#x27;        return &#x27;
                           &#x27;bucket.query().order(&quot;index&quot;).orderByKey();\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    public Tag(String key){\n&#x27;
                           &#x27;        super(key, new HashMap&lt;String,Object&gt;());\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;\tpublic Tag(String key, &#x27;
                           &#x27;Map&lt;String,Object&gt;properties){\n&#x27;
                           &#x27;\t\tsuper(key, properties);\n&#x27;
                           &#x27;\t}\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;\tpublic String getName() {\n&#x27;
                           &#x27;\t\tString name = (String) &#x27;
                           &#x27;properties.get(&quot;name&quot;);\n&#x27;
                           &#x27;        if (name == null) {\n&#x27;
                           &#x27;            name = getSimperiumKey();\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;        return name;\n&#x27;
                           &#x27;\t}\n&#x27;
                           &#x27;\t\n&#x27;
                           &#x27;\tpublic void setName(String name) {\n&#x27;
                           &#x27;\t\tif (name == null) {\n&#x27;
                           &#x27;\t\t\tname = &quot;&quot;;\n&#x27;
                           &#x27;\t\t}\n&#x27;
                           &#x27;        properties.put(&quot;name&quot;, name);\n&#x27;
                           &#x27;\t}\n&#x27;
                           &#x27;\t\t\n&#x27;
                           &#x27;\tpublic Integer getIndex() {\n&#x27;
                           &#x27;        return (Integer) properties.get(&quot;index&quot;);\n&#x27;
                           &#x27;\t}\n&#x27;
                           &#x27;\t\n&#x27;
                           &#x27;\tpublic void setIndex(Integer tagIndex) {\n&#x27;
                           &#x27;        if (tagIndex == null) {\n&#x27;
                           &#x27;            properties.remove(&quot;index&quot;);\n&#x27;
                           &#x27;        } else {\n&#x27;
                           &#x27;            properties.put(&quot;index&quot;, tagIndex);\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;\t}\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    public void renameTo(String name, Bucket&lt;Note&gt; &#x27;
                           &#x27;notesBucket){\n&#x27;
                           &#x27;        String key = name.toLowerCase();\n&#x27;
                           &#x27;        if (!getSimperiumKey().equals(key)) {\n&#x27;
                           &#x27;            // create a new tag with the value as &#x27;
                           &#x27;the key/name\n&#x27;
                           &#x27;            // TODO: tag already exists?\n&#x27;
                           &#x27;            Tag newTag = ((Bucket&lt;Tag&gt;) &#x27;
                           &#x27;getBucket()).newObject(key);\n&#x27;
                           &#x27;            newTag.setName(name);\n&#x27;
                           &#x27;            newTag.save();\n&#x27;
                           &#x27;            // get all the notes from tag, remove &#x27;
                           &#x27;the item\n&#x27;
                           &#x27;            ObjectCursor&lt;Note&gt; notesCursor = &#x27;
                           &#x27;findNotes(notesBucket);\n&#x27;
                           &#x27;            while(notesCursor.moveToNext()){\n&#x27;
                           &#x27;                Note note = &#x27;
                           &#x27;notesCursor.getObject();\n&#x27;
                           &#x27;                List&lt;String&gt; tags = new &#x27;
                           &#x27;ArrayList&lt;String&gt;(note.getTags());\n&#x27;
                           &#x27;                List&lt;String&gt; newTags = new &#x27;
                           &#x27;ArrayList&lt;String&gt;(tags.size());\n&#x27;
                           &#x27;                // iterate and do a case &#x27;
                           &#x27;insensitive comparison on each tag\n&#x27;
                           &#x27;                for (String tag : tags) {\n&#x27;
                           &quot;                    // if it&#x27;s this tag, add the &quot;
                           &#x27;new tag\n&#x27;
                           &#x27;                    if &#x27;
                           &#x27;(tag.toLowerCase().equals(getSimperiumKey())) {\n&#x27;
                           &#x27;                        newTags.add(name);\n&#x27;
                           &#x27;                    } else {\n&#x27;
                           &#x27;                        newTags.add(tag);\n&#x27;
                           &#x27;                    }\n&#x27;
                           &#x27;                }\n&#x27;
                           &#x27;                note.setTags(newTags);\n&#x27;
                           &#x27;                note.save();\n&#x27;
                           &#x27;            }\n&#x27;
                           &#x27;            notesCursor.close();\n&#x27;
                           &#x27;            delete();\n&#x27;
                           &#x27;        } else if(!getName().equals(name)) {\n&#x27;
                           &#x27;            setName(name);\n&#x27;
                           &#x27;            save();\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    protected void &#x27;
                           &#x27;setProperties(Map&lt;String,Object&gt; properties){\n&#x27;
                           &#x27;        this.properties = properties;\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    public ObjectCursor&lt;Note&gt; &#x27;
                           &#x27;findNotes(Bucket&lt;Note&gt; notesBucket){\n&#x27;
                           &#x27;        return notesBucket.query().where(&quot;tags&quot;, &#x27;
                           &#x27;ComparisonType.LIKE, &#x27;
                           &#x27;getSimperiumKey()).execute();\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;}\n&#x27;},
          {&#x27;CHUNK_OURS&#x27;: &#x27;&#x27;,
           &#x27;CHUNK_THEIRS&#x27;: &#x27;package com.automattic.simplenote.models;\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;import com.simperium.client.Bucket;\n&#x27;
                           &#x27;import com.simperium.client.Bucket.ObjectCursor;\n&#x27;
                           &#x27;import com.simperium.client.BucketObject;\n&#x27;
                           &#x27;import com.simperium.client.BucketSchema;\n&#x27;
                           &#x27;import com.simperium.client.Query;\n&#x27;
                           &#x27;import com.simperium.client.Query.ComparisonType;\n&#x27;
                           &#x27;import com.simperium.client.Query.SortType;\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;import java.util.Map;\n&#x27;
                           &#x27;import java.util.HashMap;\n&#x27;
                           &#x27;import java.util.List;\n&#x27;
                           &#x27;import java.util.ArrayList;\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;import android.util.Log;\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;public class Tag extends BucketObject {\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;\tpublic static final String BUCKET_NAME=&quot;tag&quot;;\n&#x27;
                           &#x27;\tprotected int tagIndex;\n&#x27;
                           &#x27;\tprotected String name = &quot;&quot;;\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;\tpublic static class Schema extends &#x27;
                           &#x27;BucketSchema&lt;Tag&gt; {\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;        public Schema(){\n&#x27;
                           &#x27;            autoIndex();\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;        public String getRemoteName(){\n&#x27;
                           &#x27;            return Tag.BUCKET_NAME;\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;\t\tpublic Tag build(String key, &#x27;
                           &#x27;Map&lt;String,Object&gt;properties){\n&#x27;
                           &#x27;\t\t\treturn new Tag(key, properties);\n&#x27;
                           &#x27;\t\t}\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;        public void update(Tag tag, &#x27;
                           &#x27;Map&lt;String,Object&gt;properties){\n&#x27;
                           &#x27;            tag.setProperties(properties);\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;\t}\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    public static Query&lt;Tag&gt; all(Bucket&lt;Tag&gt; &#x27;
                           &#x27;bucket){\n&#x27;
                           &#x27;        return &#x27;
                           &#x27;bucket.query().order(&quot;index&quot;).orderByKey();\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    public Tag(String key){\n&#x27;
                           &#x27;        super(key, new HashMap&lt;String,Object&gt;());\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;\tpublic Tag(String key, &#x27;
                           &#x27;Map&lt;String,Object&gt;properties){\n&#x27;
                           &#x27;\t\tsuper(key, properties);\n&#x27;
                           &#x27;\t}\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;\tpublic String getName() {\n&#x27;
                           &#x27;\t\tString name = (String) &#x27;
                           &#x27;properties.get(&quot;name&quot;);\n&#x27;
                           &#x27;        if (name == null) {\n&#x27;
                           &#x27;            name = getSimperiumKey();\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;        return name;\n&#x27;
                           &#x27;\t}\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;\tpublic void setName(String name) {\n&#x27;
                           &#x27;\t\tif (name == null) {\n&#x27;
                           &#x27;\t\t\tname = &quot;&quot;;\n&#x27;
                           &#x27;\t\t}\n&#x27;
                           &#x27;        properties.put(&quot;name&quot;, name);\n&#x27;
                           &#x27;\t}\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;\tpublic Integer getIndex() {\n&#x27;
                           &#x27;        return (Integer) properties.get(&quot;index&quot;);\n&#x27;
                           &#x27;\t}\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;\tpublic void setIndex(Integer tagIndex) {\n&#x27;
                           &#x27;        if (tagIndex == null) {\n&#x27;
                           &#x27;            properties.remove(&quot;index&quot;);\n&#x27;
                           &#x27;        } else {\n&#x27;
                           &#x27;            properties.put(&quot;index&quot;, tagIndex);\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;\t}\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    public void renameTo(String name, Bucket&lt;Note&gt; &#x27;
                           &#x27;notesBucket){\n&#x27;
                           &#x27;        String key = name.toLowerCase();\n&#x27;
                           &#x27;        if (!getSimperiumKey().equals(key)) {\n&#x27;
                           &#x27;            // create a new tag with the value as &#x27;
                           &#x27;the key/name\n&#x27;
                           &#x27;            // TODO: tag already exists?\n&#x27;
                           &#x27;            Tag newTag = ((Bucket&lt;Tag&gt;) &#x27;
                           &#x27;getBucket()).newObject(key);\n&#x27;
                           &#x27;            newTag.setName(name);\n&#x27;
                           &#x27;            newTag.save();\n&#x27;
                           &#x27;            // get all the notes from tag, remove &#x27;
                           &#x27;the item\n&#x27;
                           &#x27;            ObjectCursor&lt;Note&gt; notesCursor = &#x27;
                           &#x27;findNotes(notesBucket);\n&#x27;
                           &#x27;            while(notesCursor.moveToNext()){\n&#x27;
                           &#x27;                Note note = &#x27;
                           &#x27;notesCursor.getObject();\n&#x27;
                           &#x27;                List&lt;String&gt; tags = new &#x27;
                           &#x27;ArrayList&lt;String&gt;(note.getTags());\n&#x27;
                           &#x27;                List&lt;String&gt; newTags = new &#x27;
                           &#x27;ArrayList&lt;String&gt;(tags.size());\n&#x27;
                           &#x27;                // iterate and do a case &#x27;
                           &#x27;insensitive comparison on each tag\n&#x27;
                           &#x27;                for (String tag : tags) {\n&#x27;
                           &quot;                    // if it&#x27;s this tag, add the &quot;
                           &#x27;new tag\n&#x27;
                           &#x27;                    if &#x27;
                           &#x27;(tag.toLowerCase().equals(getSimperiumKey())) {\n&#x27;
                           &#x27;                        newTags.add(name);\n&#x27;
                           &#x27;                    } else {\n&#x27;
                           &#x27;                        newTags.add(tag);\n&#x27;
                           &#x27;                    }\n&#x27;
                           &#x27;                }\n&#x27;
                           &#x27;                note.setTags(newTags);\n&#x27;
                           &#x27;                note.save();\n&#x27;
                           &#x27;            }\n&#x27;
                           &#x27;            notesCursor.close();\n&#x27;
                           &#x27;            delete();\n&#x27;
                           &#x27;        } else if(!getName().equals(name)) {\n&#x27;
                           &#x27;            setName(name);\n&#x27;
                           &#x27;            save();\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    protected void &#x27;
                           &#x27;setProperties(Map&lt;String,Object&gt; properties){\n&#x27;
                           &#x27;        this.properties = properties;\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    public ObjectCursor&lt;Note&gt; &#x27;
                           &#x27;findNotes(Bucket&lt;Note&gt; notesBucket){\n&#x27;
                           &#x27;        return notesBucket.query().where(&quot;tags&quot;, &#x27;
                           &#x27;ComparisonType.LIKE, &#x27;
                           &#x27;getSimperiumKey()).execute();\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;}\n&#x27;},
          {&#x27;CHUNK_OURS&#x27;: &#x27;&#x27;,
           &#x27;CHUNK_THEIRS&#x27;: &#x27;\n&#x27;
                           &#x27;package com.automattic.simplenote.models;\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;import com.simperium.client.Bucket;\n&#x27;
                           &#x27;import com.simperium.client.Bucket.ObjectCursor;\n&#x27;
                           &#x27;import com.simperium.client.BucketObject;\n&#x27;
                           &#x27;import com.simperium.client.BucketSchema;\n&#x27;
                           &#x27;import com.simperium.client.Query;\n&#x27;
                           &#x27;import com.simperium.client.Query.ComparisonType;\n&#x27;
                           &#x27;import com.simperium.client.Query.SortType;\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;import java.util.Map;\n&#x27;
                           &#x27;import java.util.HashMap;\n&#x27;
                           &#x27;import java.util.List;\n&#x27;
                           &#x27;import java.util.ArrayList;\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;import android.util.Log;\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;public class Tag extends BucketObject {\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;\tpublic static final String BUCKET_NAME=&quot;tag&quot;;\n&#x27;
                           &#x27;\tprotected int tagIndex;\n&#x27;
                           &#x27;\tprotected String name = &quot;&quot;;\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;\tpublic static class Schema extends &#x27;
                           &#x27;BucketSchema&lt;Tag&gt; {\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;        public Schema(){\n&#x27;
                           &#x27;            autoIndex();\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;        public String getRemoteName(){\n&#x27;
                           &#x27;            return Tag.BUCKET_NAME;\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;\t\tpublic Tag build(String key, &#x27;
                           &#x27;Map&lt;String,Object&gt;properties){\n&#x27;
                           &#x27;\t\t\treturn new Tag(key, properties);\n&#x27;
                           &#x27;\t\t}\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;        public void update(Tag tag, &#x27;
                           &#x27;Map&lt;String,Object&gt;properties){\n&#x27;
                           &#x27;            tag.setProperties(properties);\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;\t}\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    public static Query&lt;Tag&gt; all(Bucket&lt;Tag&gt; &#x27;
                           &#x27;bucket){\n&#x27;
                           &#x27;        return &#x27;
                           &#x27;bucket.query().order(&quot;index&quot;).orderByKey();\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    public Tag(String key){\n&#x27;
                           &#x27;        super(key, new HashMap&lt;String,Object&gt;());\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;\tpublic Tag(String key, &#x27;
                           &#x27;Map&lt;String,Object&gt;properties){\n&#x27;
                           &#x27;\t\tsuper(key, properties);\n&#x27;
                           &#x27;\t}\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;\tpublic String getName() {\n&#x27;
                           &#x27;\t\tString name = (String) &#x27;
                           &#x27;properties.get(&quot;name&quot;);\n&#x27;
                           &#x27;        if (name == null) {\n&#x27;
                           &#x27;            name = getSimperiumKey();\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;        return name;\n&#x27;
                           &#x27;\t}\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;\tpublic void setName(String name) {\n&#x27;
                           &#x27;\t\tif (name == null) {\n&#x27;
                           &#x27;\t\t\tname = &quot;&quot;;\n&#x27;
                           &#x27;\t\t}\n&#x27;
                           &#x27;        properties.put(&quot;name&quot;, name);\n&#x27;
                           &#x27;\t}\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;\tpublic Integer getIndex() {\n&#x27;
                           &#x27;        return (Integer) properties.get(&quot;index&quot;);\n&#x27;
                           &#x27;\t}\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;\tpublic void setIndex(Integer tagIndex) {\n&#x27;
                           &#x27;        if (tagIndex == null) {\n&#x27;
                           &#x27;            properties.remove(&quot;index&quot;);\n&#x27;
                           &#x27;        } else {\n&#x27;
                           &#x27;            properties.put(&quot;index&quot;, tagIndex);\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;\t}\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    public void renameTo(String name, Bucket&lt;Note&gt; &#x27;
                           &#x27;notesBucket){\n&#x27;
                           &#x27;        String key = name.toLowerCase();\n&#x27;
                           &#x27;        if (!getSimperiumKey().equals(key)) {\n&#x27;
                           &#x27;            // create a new tag with the value as &#x27;
                           &#x27;the key/name\n&#x27;
                           &#x27;            // TODO: tag already exists?\n&#x27;
                           &#x27;            Tag newTag = ((Bucket&lt;Tag&gt;) &#x27;
                           &#x27;getBucket()).newObject(key);\n&#x27;
                           &#x27;            newTag.setName(name);\n&#x27;
                           &#x27;            newTag.save();\n&#x27;
                           &#x27;            // get all the notes from tag, remove &#x27;
                           &#x27;the item\n&#x27;
                           &#x27;            ObjectCursor&lt;Note&gt; notesCursor = &#x27;
                           &#x27;findNotes(notesBucket);\n&#x27;
                           &#x27;            while(notesCursor.moveToNext()){\n&#x27;
                           &#x27;                Note note = &#x27;
                           &#x27;notesCursor.getObject();\n&#x27;
                           &#x27;                List&lt;String&gt; tags = new &#x27;
                           &#x27;ArrayList&lt;String&gt;(note.getTags());\n&#x27;
                           &#x27;                List&lt;String&gt; newTags = new &#x27;
                           &#x27;ArrayList&lt;String&gt;(tags.size());\n&#x27;
                           &#x27;                // iterate and do a case &#x27;
                           &#x27;insensitive comparison on each tag\n&#x27;
                           &#x27;                for (String tag : tags) {\n&#x27;
                           &quot;                    // if it&#x27;s this tag, add the &quot;
                           &#x27;new tag\n&#x27;
                           &#x27;                    if &#x27;
                           &#x27;(tag.toLowerCase().equals(getSimperiumKey())) {\n&#x27;
                           &#x27;                        newTags.add(name);\n&#x27;
                           &#x27;                    } else {\n&#x27;
                           &#x27;                        newTags.add(tag);\n&#x27;
                           &#x27;                    }\n&#x27;
                           &#x27;                }\n&#x27;
                           &#x27;                note.setTags(newTags);\n&#x27;
                           &#x27;                note.save();\n&#x27;
                           &#x27;            }\n&#x27;
                           &#x27;            notesCursor.close();\n&#x27;
                           &#x27;            delete();\n&#x27;
                           &#x27;        } else if(!getName().equals(name)) {\n&#x27;
                           &#x27;            setName(name);\n&#x27;
                           &#x27;            save();\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    protected void &#x27;
                           &#x27;setProperties(Map&lt;String,Object&gt; properties){\n&#x27;
                           &#x27;        this.properties = properties;\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    public ObjectCursor&lt;Note&gt; &#x27;
                           &#x27;findNotes(Bucket&lt;Note&gt; notesBucket){\n&#x27;
                           &#x27;        return notesBucket.query().where(&quot;tags&quot;, &#x27;
                           &#x27;ComparisonType.LIKE, &#x27;
                           &#x27;getSimperiumKey()).execute();\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;}\n&#x27;}],
   &#x27;mergers&#x27;: {&#x27;spork&#x27;, &#x27;baseline&#x27;, &#x27;jfstmerge&#x27;}}],
 [{&#x27;eq&#x27;: [{&#x27;CHUNK_OURS&#x27;: &#x27;&#x27;,
           &#x27;CHUNK_THEIRS&#x27;: &#x27;package com.automattic.simplenote.models;\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;import com.simperium.client.Bucket;\n&#x27;
                           &#x27;import com.simperium.client.Bucket.ObjectCursor;\n&#x27;
                           &#x27;import com.simperium.client.BucketObject;\n&#x27;
                           &#x27;import com.simperium.client.BucketSchema;\n&#x27;
                           &#x27;import com.simperium.client.Query;\n&#x27;
                           &#x27;import com.simperium.client.Query.ComparisonType;\n&#x27;
                           &#x27;import com.simperium.client.Query.SortType;\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;import java.util.Map;\n&#x27;
                           &#x27;import java.util.HashMap;\n&#x27;
                           &#x27;import java.util.List;\n&#x27;
                           &#x27;import java.util.ArrayList;\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;import android.util.Log;\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;public class Tag extends BucketObject {\n&#x27;
                           &#x27;\t\n&#x27;
                           &#x27;\tpublic static final String BUCKET_NAME=&quot;tag&quot;;\n&#x27;
                           &#x27;\tprotected int tagIndex;\n&#x27;
                           &#x27;\tprotected String name = &quot;&quot;;\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;\tpublic static class Schema extends &#x27;
                           &#x27;BucketSchema&lt;Tag&gt; {\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;        public Schema(){\n&#x27;
                           &#x27;            autoIndex();\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;        public String getRemoteName(){\n&#x27;
                           &#x27;            return Tag.BUCKET_NAME;\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;\t\tpublic Tag build(String key, &#x27;
                           &#x27;Map&lt;String,Object&gt;properties){\n&#x27;
                           &#x27;\t\t\treturn new Tag(key, properties);\n&#x27;
                           &#x27;\t\t}\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;        public void update(Tag tag, &#x27;
                           &#x27;Map&lt;String,Object&gt;properties){\n&#x27;
                           &#x27;            tag.setProperties(properties);\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;\t}\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    public static Query&lt;Tag&gt; all(Bucket&lt;Tag&gt; &#x27;
                           &#x27;bucket){\n&#x27;
                           &#x27;        return &#x27;
                           &#x27;bucket.query().order(&quot;index&quot;).orderByKey();\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    public Tag(String key){\n&#x27;
                           &#x27;        super(key, new HashMap&lt;String,Object&gt;());\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;\tpublic Tag(String key, &#x27;
                           &#x27;Map&lt;String,Object&gt;properties){\n&#x27;
                           &#x27;\t\tsuper(key, properties);\n&#x27;
                           &#x27;\t}\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;\tpublic String getName() {\n&#x27;
                           &#x27;\t\tString name = (String) &#x27;
                           &#x27;properties.get(&quot;name&quot;);\n&#x27;
                           &#x27;        if (name == null) {\n&#x27;
                           &#x27;            name = getSimperiumKey();\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;        return name;\n&#x27;
                           &#x27;\t}\n&#x27;
                           &#x27;\t\n&#x27;
                           &#x27;\tpublic void setName(String name) {\n&#x27;
                           &#x27;\t\tif (name == null) {\n&#x27;
                           &#x27;\t\t\tname = &quot;&quot;;\n&#x27;
                           &#x27;\t\t}\n&#x27;
                           &#x27;        properties.put(&quot;name&quot;, name);\n&#x27;
                           &#x27;\t}\n&#x27;
                           &#x27;\t\t\n&#x27;
                           &#x27;\tpublic Integer getIndex() {\n&#x27;
                           &#x27;        return (Integer) properties.get(&quot;index&quot;);\n&#x27;
                           &#x27;\t}\n&#x27;
                           &#x27;\t\n&#x27;
                           &#x27;\tpublic void setIndex(Integer tagIndex) {\n&#x27;
                           &#x27;        if (tagIndex == null) {\n&#x27;
                           &#x27;            properties.remove(&quot;index&quot;);\n&#x27;
                           &#x27;        } else {\n&#x27;
                           &#x27;            properties.put(&quot;index&quot;, tagIndex);\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;\t}\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    public void renameTo(String name, Bucket&lt;Note&gt; &#x27;
                           &#x27;notesBucket){\n&#x27;
                           &#x27;        String key = name.toLowerCase();\n&#x27;
                           &#x27;        if (!getSimperiumKey().equals(key)) {\n&#x27;
                           &#x27;            // create a new tag with the value as &#x27;
                           &#x27;the key/name\n&#x27;
                           &#x27;            // TODO: tag already exists?\n&#x27;
                           &#x27;            Tag newTag = ((Bucket&lt;Tag&gt;) &#x27;
                           &#x27;getBucket()).newObject(key);\n&#x27;
                           &#x27;            newTag.setName(name);\n&#x27;
                           &#x27;            newTag.save();\n&#x27;
                           &#x27;            // get all the notes from tag, remove &#x27;
                           &#x27;the item\n&#x27;
                           &#x27;            ObjectCursor&lt;Note&gt; notesCursor = &#x27;
                           &#x27;findNotes(notesBucket);\n&#x27;
                           &#x27;            while(notesCursor.moveToNext()){\n&#x27;
                           &#x27;                Note note = &#x27;
                           &#x27;notesCursor.getObject();\n&#x27;
                           &#x27;                List&lt;String&gt; tags = new &#x27;
                           &#x27;ArrayList&lt;String&gt;(note.getTags());\n&#x27;
                           &#x27;                List&lt;String&gt; newTags = new &#x27;
                           &#x27;ArrayList&lt;String&gt;(tags.size());\n&#x27;
                           &#x27;                // iterate and do a case &#x27;
                           &#x27;insensitive comparison on each tag\n&#x27;
                           &#x27;                for (String tag : tags) {\n&#x27;
                           &quot;                    // if it&#x27;s this tag, add the &quot;
                           &#x27;new tag\n&#x27;
                           &#x27;                    if &#x27;
                           &#x27;(tag.toLowerCase().equals(getSimperiumKey())) {\n&#x27;
                           &#x27;                        newTags.add(name);\n&#x27;
                           &#x27;                    } else {\n&#x27;
                           &#x27;                        newTags.add(tag);\n&#x27;
                           &#x27;                    }\n&#x27;
                           &#x27;                }\n&#x27;
                           &#x27;                note.setTags(newTags);\n&#x27;
                           &#x27;                note.save();\n&#x27;
                           &#x27;            }\n&#x27;
                           &#x27;            notesCursor.close();\n&#x27;
                           &#x27;            delete();\n&#x27;
                           &#x27;        } else if(!getName().equals(name)) {\n&#x27;
                           &#x27;            setName(name);\n&#x27;
                           &#x27;            save();\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    protected void &#x27;
                           &#x27;setProperties(Map&lt;String,Object&gt; properties){\n&#x27;
                           &#x27;        this.properties = properties;\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    public ObjectCursor&lt;Note&gt; &#x27;
                           &#x27;findNotes(Bucket&lt;Note&gt; notesBucket){\n&#x27;
                           &#x27;        return notesBucket.query().where(&quot;tags&quot;, &#x27;
                           &#x27;ComparisonType.LIKE, &#x27;
                           &#x27;getSimperiumKey()).execute();\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;}\n&#x27;},
          {&#x27;CHUNK_OURS&#x27;: &#x27;&#x27;,
           &#x27;CHUNK_THEIRS&#x27;: &#x27;package com.automattic.simplenote.models;\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;import com.simperium.client.Bucket;\n&#x27;
                           &#x27;import com.simperium.client.Bucket.ObjectCursor;\n&#x27;
                           &#x27;import com.simperium.client.BucketObject;\n&#x27;
                           &#x27;import com.simperium.client.BucketSchema;\n&#x27;
                           &#x27;import com.simperium.client.Query;\n&#x27;
                           &#x27;import com.simperium.client.Query.ComparisonType;\n&#x27;
                           &#x27;import com.simperium.client.Query.SortType;\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;import java.util.Map;\n&#x27;
                           &#x27;import java.util.HashMap;\n&#x27;
                           &#x27;import java.util.List;\n&#x27;
                           &#x27;import java.util.ArrayList;\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;import android.util.Log;\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;public class Tag extends BucketObject {\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;\tpublic static final String BUCKET_NAME=&quot;tag&quot;;\n&#x27;
                           &#x27;\tprotected int tagIndex;\n&#x27;
                           &#x27;\tprotected String name = &quot;&quot;;\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;\tpublic static class Schema extends &#x27;
                           &#x27;BucketSchema&lt;Tag&gt; {\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;        public Schema(){\n&#x27;
                           &#x27;            autoIndex();\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;        public String getRemoteName(){\n&#x27;
                           &#x27;            return Tag.BUCKET_NAME;\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;\t\tpublic Tag build(String key, &#x27;
                           &#x27;Map&lt;String,Object&gt;properties){\n&#x27;
                           &#x27;\t\t\treturn new Tag(key, properties);\n&#x27;
                           &#x27;\t\t}\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;        public void update(Tag tag, &#x27;
                           &#x27;Map&lt;String,Object&gt;properties){\n&#x27;
                           &#x27;            tag.setProperties(properties);\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;\t}\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    public static Query&lt;Tag&gt; all(Bucket&lt;Tag&gt; &#x27;
                           &#x27;bucket){\n&#x27;
                           &#x27;        return &#x27;
                           &#x27;bucket.query().order(&quot;index&quot;).orderByKey();\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    public Tag(String key){\n&#x27;
                           &#x27;        super(key, new HashMap&lt;String,Object&gt;());\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;\tpublic Tag(String key, &#x27;
                           &#x27;Map&lt;String,Object&gt;properties){\n&#x27;
                           &#x27;\t\tsuper(key, properties);\n&#x27;
                           &#x27;\t}\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;\tpublic String getName() {\n&#x27;
                           &#x27;\t\tString name = (String) &#x27;
                           &#x27;properties.get(&quot;name&quot;);\n&#x27;
                           &#x27;        if (name == null) {\n&#x27;
                           &#x27;            name = getSimperiumKey();\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;        return name;\n&#x27;
                           &#x27;\t}\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;\tpublic void setName(String name) {\n&#x27;
                           &#x27;\t\tif (name == null) {\n&#x27;
                           &#x27;\t\t\tname = &quot;&quot;;\n&#x27;
                           &#x27;\t\t}\n&#x27;
                           &#x27;        properties.put(&quot;name&quot;, name);\n&#x27;
                           &#x27;\t}\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;\tpublic Integer getIndex() {\n&#x27;
                           &#x27;        return (Integer) properties.get(&quot;index&quot;);\n&#x27;
                           &#x27;\t}\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;\tpublic void setIndex(Integer tagIndex) {\n&#x27;
                           &#x27;        if (tagIndex == null) {\n&#x27;
                           &#x27;            properties.remove(&quot;index&quot;);\n&#x27;
                           &#x27;        } else {\n&#x27;
                           &#x27;            properties.put(&quot;index&quot;, tagIndex);\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;\t}\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    public void renameTo(String name, Bucket&lt;Note&gt; &#x27;
                           &#x27;notesBucket){\n&#x27;
                           &#x27;        String key = name.toLowerCase();\n&#x27;
                           &#x27;        if (!getSimperiumKey().equals(key)) {\n&#x27;
                           &#x27;            // create a new tag with the value as &#x27;
                           &#x27;the key/name\n&#x27;
                           &#x27;            // TODO: tag already exists?\n&#x27;
                           &#x27;            Tag newTag = ((Bucket&lt;Tag&gt;) &#x27;
                           &#x27;getBucket()).newObject(key);\n&#x27;
                           &#x27;            newTag.setName(name);\n&#x27;
                           &#x27;            newTag.save();\n&#x27;
                           &#x27;            // get all the notes from tag, remove &#x27;
                           &#x27;the item\n&#x27;
                           &#x27;            ObjectCursor&lt;Note&gt; notesCursor = &#x27;
                           &#x27;findNotes(notesBucket);\n&#x27;
                           &#x27;            while(notesCursor.moveToNext()){\n&#x27;
                           &#x27;                Note note = &#x27;
                           &#x27;notesCursor.getObject();\n&#x27;
                           &#x27;                List&lt;String&gt; tags = new &#x27;
                           &#x27;ArrayList&lt;String&gt;(note.getTags());\n&#x27;
                           &#x27;                List&lt;String&gt; newTags = new &#x27;
                           &#x27;ArrayList&lt;String&gt;(tags.size());\n&#x27;
                           &#x27;                // iterate and do a case &#x27;
                           &#x27;insensitive comparison on each tag\n&#x27;
                           &#x27;                for (String tag : tags) {\n&#x27;
                           &quot;                    // if it&#x27;s this tag, add the &quot;
                           &#x27;new tag\n&#x27;
                           &#x27;                    if &#x27;
                           &#x27;(tag.toLowerCase().equals(getSimperiumKey())) {\n&#x27;
                           &#x27;                        newTags.add(name);\n&#x27;
                           &#x27;                    } else {\n&#x27;
                           &#x27;                        newTags.add(tag);\n&#x27;
                           &#x27;                    }\n&#x27;
                           &#x27;                }\n&#x27;
                           &#x27;                note.setTags(newTags);\n&#x27;
                           &#x27;                note.save();\n&#x27;
                           &#x27;            }\n&#x27;
                           &#x27;            notesCursor.close();\n&#x27;
                           &#x27;            delete();\n&#x27;
                           &#x27;        } else if(!getName().equals(name)) {\n&#x27;
                           &#x27;            setName(name);\n&#x27;
                           &#x27;            save();\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    protected void &#x27;
                           &#x27;setProperties(Map&lt;String,Object&gt; properties){\n&#x27;
                           &#x27;        this.properties = properties;\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    public ObjectCursor&lt;Note&gt; &#x27;
                           &#x27;findNotes(Bucket&lt;Note&gt; notesBucket){\n&#x27;
                           &#x27;        return notesBucket.query().where(&quot;tags&quot;, &#x27;
                           &#x27;ComparisonType.LIKE, &#x27;
                           &#x27;getSimperiumKey()).execute();\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;}\n&#x27;},
          {&#x27;CHUNK_OURS&#x27;: &#x27;&#x27;,
           &#x27;CHUNK_THEIRS&#x27;: &#x27;\n&#x27;
                           &#x27;package com.automattic.simplenote.models;\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;import com.simperium.client.Bucket;\n&#x27;
                           &#x27;import com.simperium.client.Bucket.ObjectCursor;\n&#x27;
                           &#x27;import com.simperium.client.BucketObject;\n&#x27;
                           &#x27;import com.simperium.client.BucketSchema;\n&#x27;
                           &#x27;import com.simperium.client.Query;\n&#x27;
                           &#x27;import com.simperium.client.Query.ComparisonType;\n&#x27;
                           &#x27;import com.simperium.client.Query.SortType;\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;import java.util.Map;\n&#x27;
                           &#x27;import java.util.HashMap;\n&#x27;
                           &#x27;import java.util.List;\n&#x27;
                           &#x27;import java.util.ArrayList;\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;import android.util.Log;\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;public class Tag extends BucketObject {\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;\tpublic static final String BUCKET_NAME=&quot;tag&quot;;\n&#x27;
                           &#x27;\tprotected int tagIndex;\n&#x27;
                           &#x27;\tprotected String name = &quot;&quot;;\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;\tpublic static class Schema extends &#x27;
                           &#x27;BucketSchema&lt;Tag&gt; {\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;        public Schema(){\n&#x27;
                           &#x27;            autoIndex();\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;        public String getRemoteName(){\n&#x27;
                           &#x27;            return Tag.BUCKET_NAME;\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;\t\tpublic Tag build(String key, &#x27;
                           &#x27;Map&lt;String,Object&gt;properties){\n&#x27;
                           &#x27;\t\t\treturn new Tag(key, properties);\n&#x27;
                           &#x27;\t\t}\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;        public void update(Tag tag, &#x27;
                           &#x27;Map&lt;String,Object&gt;properties){\n&#x27;
                           &#x27;            tag.setProperties(properties);\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;\t}\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    public static Query&lt;Tag&gt; all(Bucket&lt;Tag&gt; &#x27;
                           &#x27;bucket){\n&#x27;
                           &#x27;        return &#x27;
                           &#x27;bucket.query().order(&quot;index&quot;).orderByKey();\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    public Tag(String key){\n&#x27;
                           &#x27;        super(key, new HashMap&lt;String,Object&gt;());\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;\tpublic Tag(String key, &#x27;
                           &#x27;Map&lt;String,Object&gt;properties){\n&#x27;
                           &#x27;\t\tsuper(key, properties);\n&#x27;
                           &#x27;\t}\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;\tpublic String getName() {\n&#x27;
                           &#x27;\t\tString name = (String) &#x27;
                           &#x27;properties.get(&quot;name&quot;);\n&#x27;
                           &#x27;        if (name == null) {\n&#x27;
                           &#x27;            name = getSimperiumKey();\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;        return name;\n&#x27;
                           &#x27;\t}\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;\tpublic void setName(String name) {\n&#x27;
                           &#x27;\t\tif (name == null) {\n&#x27;
                           &#x27;\t\t\tname = &quot;&quot;;\n&#x27;
                           &#x27;\t\t}\n&#x27;
                           &#x27;        properties.put(&quot;name&quot;, name);\n&#x27;
                           &#x27;\t}\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;\tpublic Integer getIndex() {\n&#x27;
                           &#x27;        return (Integer) properties.get(&quot;index&quot;);\n&#x27;
                           &#x27;\t}\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;\tpublic void setIndex(Integer tagIndex) {\n&#x27;
                           &#x27;        if (tagIndex == null) {\n&#x27;
                           &#x27;            properties.remove(&quot;index&quot;);\n&#x27;
                           &#x27;        } else {\n&#x27;
                           &#x27;            properties.put(&quot;index&quot;, tagIndex);\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;\t}\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    public void renameTo(String name, Bucket&lt;Note&gt; &#x27;
                           &#x27;notesBucket){\n&#x27;
                           &#x27;        String key = name.toLowerCase();\n&#x27;
                           &#x27;        if (!getSimperiumKey().equals(key)) {\n&#x27;
                           &#x27;            // create a new tag with the value as &#x27;
                           &#x27;the key/name\n&#x27;
                           &#x27;            // TODO: tag already exists?\n&#x27;
                           &#x27;            Tag newTag = ((Bucket&lt;Tag&gt;) &#x27;
                           &#x27;getBucket()).newObject(key);\n&#x27;
                           &#x27;            newTag.setName(name);\n&#x27;
                           &#x27;            newTag.save();\n&#x27;
                           &#x27;            // get all the notes from tag, remove &#x27;
                           &#x27;the item\n&#x27;
                           &#x27;            ObjectCursor&lt;Note&gt; notesCursor = &#x27;
                           &#x27;findNotes(notesBucket);\n&#x27;
                           &#x27;            while(notesCursor.moveToNext()){\n&#x27;
                           &#x27;                Note note = &#x27;
                           &#x27;notesCursor.getObject();\n&#x27;
                           &#x27;                List&lt;String&gt; tags = new &#x27;
                           &#x27;ArrayList&lt;String&gt;(note.getTags());\n&#x27;
                           &#x27;                List&lt;String&gt; newTags = new &#x27;
                           &#x27;ArrayList&lt;String&gt;(tags.size());\n&#x27;
                           &#x27;                // iterate and do a case &#x27;
                           &#x27;insensitive comparison on each tag\n&#x27;
                           &#x27;                for (String tag : tags) {\n&#x27;
                           &quot;                    // if it&#x27;s this tag, add the &quot;
                           &#x27;new tag\n&#x27;
                           &#x27;                    if &#x27;
                           &#x27;(tag.toLowerCase().equals(getSimperiumKey())) {\n&#x27;
                           &#x27;                        newTags.add(name);\n&#x27;
                           &#x27;                    } else {\n&#x27;
                           &#x27;                        newTags.add(tag);\n&#x27;
                           &#x27;                    }\n&#x27;
                           &#x27;                }\n&#x27;
                           &#x27;                note.setTags(newTags);\n&#x27;
                           &#x27;                note.save();\n&#x27;
                           &#x27;            }\n&#x27;
                           &#x27;            notesCursor.close();\n&#x27;
                           &#x27;            delete();\n&#x27;
                           &#x27;        } else if(!getName().equals(name)) {\n&#x27;
                           &#x27;            setName(name);\n&#x27;
                           &#x27;            save();\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    protected void &#x27;
                           &#x27;setProperties(Map&lt;String,Object&gt; properties){\n&#x27;
                           &#x27;        this.properties = properties;\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    public ObjectCursor&lt;Note&gt; &#x27;
                           &#x27;findNotes(Bucket&lt;Note&gt; notesBucket){\n&#x27;
                           &#x27;        return notesBucket.query().where(&quot;tags&quot;, &#x27;
                           &#x27;ComparisonType.LIKE, &#x27;
                           &#x27;getSimperiumKey()).execute();\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;}\n&#x27;}],
   &#x27;mergers&#x27;: {&#x27;spork&#x27;, &#x27;baseline&#x27;, &#x27;jfstmerge&#x27;}}]]</pre>
          </body>
        </html>
        