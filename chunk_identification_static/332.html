<!DOCTYPE html>
    <html lang="en">
              <head>
                <meta charset="utf-8">
                <title>332</title>
                    <style>
                        #top {
                            height: 48vh;
                            overflow-y: auto;
                        }
                        #bottom {
                            height: 48vh;
                            overflow-y: auto;
                        }
                        abbr {
                          /* Here is the delay */
                          transition-delay:0s;
                        }
                    </style>
              </head>
              <body>
                <span style="height: 4vh">
                    332
                    <a href="331.html">prev</a>
                    <a href="333.html">next</a>
                    <a href="332_chunks.html">chunks</a>
                    <a href="index.html">index</a>
                    DSAppTeam/PanelSwitchHelper_f9666242c66a76c16a4b4b6632e04d36d63fb2ca_app/src/main/java/com/example/demo/VideoSampleActivity.java
                    <textarea rows=1 onclick='navigator.clipboard.writeText(this.value)'>cd C:\studies\se\mega\git-analyzer-plus\notebooks\debug
del /Q *
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\DSAppTeam\PanelSwitchHelper show &quot;f9666242c66a76c16a4b4b6632e04d36d63fb2ca:app/src/main/java/com/example/demo/VideoSampleActivity.java&quot; &gt; committed.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\DSAppTeam\PanelSwitchHelper show &quot;f9666242c66a76c16a4b4b6632e04d36d63fb2ca^1:app/src/main/java/com/example/demo/VideoSampleActivity.java&quot; &gt; ours.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\DSAppTeam\PanelSwitchHelper show &quot;f9666242c66a76c16a4b4b6632e04d36d63fb2ca^2:app/src/main/java/com/example/demo/VideoSampleActivity.java&quot; &gt; theirs.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\DSAppTeam\PanelSwitchHelper show &quot;9665e840953bd5a5c63623212884b6b79603a452:app/src/main/java/com/example/demo/VideoSampleActivity.java&quot; &gt; base.java
copy ours.java 1ours.java
copy ours.java 2ours.java
copy theirs.java 1theirs.java
copy theirs.java 2theirs.java
copy base.java 1base.java
copy base.java 2base.java
&quot;C:\Program Files\Java\jdk1.8.0_241\bin\java.exe&quot; -Dfile.encoding=UTF-8 -jar &quot;C:\studies\se\jFSTMerge\build\libs\jFSTMerge-all.jar&quot; C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1ours.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1base.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1theirs.java -o C:\studies\se\mega\git-analyzer-plus\notebooks\debug\jfstmerge.java --show-base
&quot;C:\Program Files\Eclipse Adoptium\jdk-17.0.11.9-hotspot\bin\java.exe&quot; -Dfile.encoding=UTF-8 -jar &quot;C:\studies\se\spork\target\spork-0.5.0-SNAPSHOT.jar&quot; C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2ours.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2base.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2theirs.java -o C:\studies\se\mega\git-analyzer-plus\notebooks\debug\spork.java
del /Q 1*.java
del /Q 2*.java
del /Q jfstmerge.java.merge
</textarea>
                    {strict: [[sbj]], subset: [[sbj]]}
                </span>
                <div id="top">

                    <table>
                        <tr>
                            <th>line based (standard git)</th>
                            <th>jfstmerge</th>
                            <th>spork</th>
                        </tr>
                        <tr>
                            <td><pre>   1 &lt;&lt;&lt;&lt;&lt;&lt;&lt; GitAnalyzerPlus_ours
   2 ||||||| GitAnalyzerPlus_base
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">   3 package com.example.demo;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">   4 </span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">   5 import android.content.pm.ActivityInfo;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">   6 import android.content.res.Configuration;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">   7 import android.databinding.DataBindingUtil;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">   8 import android.os.Bundle;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">   9 import android.support.annotation.Nullable;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  10 import android.support.v7.app.AppCompatActivity;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  11 import android.text.TextUtils;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  12 import android.view.Gravity;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  13 import android.view.View;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  14 import android.view.WindowManager;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  15 import android.widget.RelativeLayout;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  16 import android.widget.Toast;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  17 </span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  18 import com.effective.R;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  19 import com.effective.android.panel.PanelSwitchHelper;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  20 import com.effective.android.panel.interfaces.listener.OnPanelChangeListener;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  21 import com.effective.android.panel.view.PanelView;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  22 import com.effective.databinding.ActivityVideoSampleLayoutBinding;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  23 import com.example.demo.emotion.EmotionPagerView;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  24 import com.example.demo.emotion.Emotions;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  25 import com.example.demo.interfaces.PopContentSupport;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  26 import com.rd.PageIndicatorView;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  27 </span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  28 /**</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  29  * Created by yummyLau on 18-12-13</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  30  * Email: yummyl.lau@gmail.com</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  31  * blog: yummylau.com</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  32  */</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  33 public class VideoSampleActivity extends AppCompatActivity implements PopContentSupport {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  34 </span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  35     private ActivityVideoSampleLayoutBinding mBinding;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  36     private int portraitHeight;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  37     private PanelSwitchHelper mHelper;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  38     private boolean isPortrait = true;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  39     private VideoPopWindow videoPopWindow;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  40 </span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  41 </span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  42     @Override</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  43     protected void onCreate(@Nullable Bundle savedInstanceState) {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  44         super.onCreate(savedInstanceState);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  45         mBinding = DataBindingUtil.setContentView(this, R.layout.activity_video_sample_layout);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  46         initView();</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  47     }</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  48 </span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  49     @Override</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  50     public void sendContent(String content) {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  51         if (!TextUtils.isEmpty(content)) {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"><abbr title="  52             mBinding.videoView.setText(mBinding.videoView.getText().toString() + &quot;\n&quot; + &quot;yummylau： &quot; + content);">  52             mBinding.videoView.setText(mBinding.videoView.getText().toString() + &quot;\n&quot; + &quot;yummylau： &quot; + co🔵</abbr></span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  53         }</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  54     }</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  55 </span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  56     private void initView() {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  57         mBinding.checkout.setOnClickListener(new View.OnClickListener() {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  58             @Override</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  59             public void onClick(View v) {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  60                 boolean isPortrait = isPortrait();</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  61                 if (isPortrait) {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  62                     portraitHeight = mBinding.videoView.getMeasuredHeight();</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  63                 }</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  64                 checkoutOrientation(!isPortrait());</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  65             }</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  66         });</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  67         mBinding.send.setOnClickListener(new View.OnClickListener() {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  68             @Override</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  69             public void onClick(View v) {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  70                 String content = mBinding.editText.getText().toString();</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  71                 if (TextUtils.isEmpty(content)) {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  72                     Toast.makeText(VideoSampleActivity.this, &quot;当前没有输入&quot;, Toast.LENGTH_SHORT).show();</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  73                     return;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  74                 }</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"><abbr title="  75                 mBinding.videoView.setText(mBinding.videoView.getText().toString() + &quot;\n&quot; + &quot;yummylau： &quot; + content);">  75                 mBinding.videoView.setText(mBinding.videoView.getText().toString() + &quot;\n&quot; + &quot;yummylau： &quot; 🔵</abbr></span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  76                 mBinding.editText.setText(null);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  77             }</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  78         });</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  79         mBinding.input.setOnClickListener(new View.OnClickListener() {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  80             @Override</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  81             public void onClick(View v) {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  82                 if (isPortrait) {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  83                     mBinding.inputLayout.setVisibility(View.VISIBLE);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  84                     mBinding.emptyView.setVisibility(View.VISIBLE);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  85                     mHelper.showKeyboard();</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  86                 } else {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  87                     if (videoPopWindow == null) {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"><abbr title="  88                         videoPopWindow = new VideoPopWindow(VideoSampleActivity.this, VideoSampleActivity.this);">  88                         videoPopWindow = new VideoPopWindow(VideoSampleActivity.this, VideoSampleActivity🔵</abbr></span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  89                     }</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  90                     videoPopWindow.showAtLocation(mBinding.panelSwitchLayout, Gravity.NO_GRAVITY, 0, 0);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  91                     videoPopWindow.shoyKeyboard();</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  92                 }</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  93             }</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  94         });</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  95         mBinding.inputLayout.setVisibility(View.GONE);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  96         mBinding.emptyView.setVisibility(View.GONE);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  97     }</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  98 </span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  99     @Override</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 100     protected void onStart() {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 101         super.onStart();</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 102         if (mHelper == null) {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 103             mHelper = new PanelSwitchHelper.Builder(this)</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 104                     .bindPanelSwitchLayout(R.id.panel_switch_layout)</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 105                     .bindPanelContainerId(R.id.panel_container)</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 106                     .bindContentContainerId(R.id.content_view)</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 107                     .addPanelChangeListener(new OnPanelChangeListener() {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 108 </span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 109                         @Override</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 110                         public void onKeyboard() {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 111                             mBinding.inputLayout.setVisibility(View.VISIBLE);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 112                             mBinding.emptyView.setVisibility(View.VISIBLE);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 113                             mBinding.emotionBtn.setSelected(false);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 114                         }</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 115 </span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 116                         @Override</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 117                         public void onNone() {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 118                             mBinding.emotionBtn.setSelected(false);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 119                             mBinding.inputLayout.setVisibility(View.GONE);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 120                             mBinding.emptyView.setVisibility(View.GONE);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 121                         }</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 122 </span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 123                         @Override</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 124                         public void onPanel(PanelView view) {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"><abbr title=" 125                             mBinding.emotionBtn.setSelected(view.getId() == R.id.panel_emotion ? true : false);"> 125                             mBinding.emotionBtn.setSelected(view.getId() == R.id.panel_emotion ? true : f🔵</abbr></span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 126                         }</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 127 </span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 128                         @Override</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"><abbr title=" 129                         public void onPanelSizeChange(PanelView panelView, boolean portrait, int oldWidth, int oldHeight, int width, int height) {"> 129                         public void onPanelSizeChange(PanelView panelView, boolean portrait, int oldWidth🔵</abbr></span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 130                             switch (panelView.getId()) {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 131                                 case R.id.panel_emotion: {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"><abbr title=" 132                                     EmotionPagerView pagerView = mBinding.getRoot().findViewById(R.id.view_pager);"> 132                                     EmotionPagerView pagerView = mBinding.getRoot().findViewById(R.id.vie🔵</abbr></span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"><abbr title=" 133                                     int viewPagerSize = height - Utils.dip2px(VideoSampleActivity.this, 30f);"> 133                                     int viewPagerSize = height - Utils.dip2px(VideoSampleActivity.this, 3🔵</abbr></span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 134                                     pagerView.buildEmotionViews(</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"><abbr title=" 135                                             (PageIndicatorView) mBinding.getRoot().findViewById(R.id.pageIndicatorView),"> 135                                             (PageIndicatorView) mBinding.getRoot().findViewById(R.id.page🔵</abbr></span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 136                                             mBinding.editText,</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 137                                             Emotions.getEmotions(), width, viewPagerSize);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 138                                     break;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 139                                 }</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 140                                 case R.id.panel_addition: {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 141                                     //auto center,nothing to do</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 142                                     break;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 143                                 }</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 144                             }</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 145                         }</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 146                     })</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 147                     .logTrack(true)</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 148                     .build(false);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 149         }</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 150     }</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 151 </span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 152     @Override</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 153     public void onBackPressed() {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 154         if (!isPortrait) {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 155             if (videoPopWindow.isShowing()) {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 156                 videoPopWindow.dismiss();</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 157             } else {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 158                 checkoutOrientation(true);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 159             }</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 160             return;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 161         }</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 162         if (mHelper != null &amp;&amp; mHelper.hookSystemBackForHindPanel()) {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 163             return;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 164         }</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 165         super.onBackPressed();</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 166     }</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 167 </span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 168 </span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 169     @Override</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 170     public void onConfigurationChanged(Configuration newConfig) {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 171         super.onConfigurationChanged(newConfig);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"><abbr title=" 172         RelativeLayout.LayoutParams layoutParams = (RelativeLayout.LayoutParams) mBinding.videoView.getLayoutParams();"> 172         RelativeLayout.LayoutParams layoutParams = (RelativeLayout.LayoutParams) mBinding.videoView.getLa🔵</abbr></span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 173         if (newConfig.orientation == Configuration.ORIENTATION_PORTRAIT) {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 174             layoutParams.height = portraitHeight;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 175             getWindow().clearFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 176         } else {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 177             getWindow().addFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 178 //            WindowManager manager = this.getWindowManager();</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 179 //            DisplayMetrics outMetrics = new DisplayMetrics();</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 180 //            manager.getDefaultDisplay().getMetrics(outMetrics);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 181 //            layoutParams.height = outMetrics.heightPixels;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 182             layoutParams.height = layoutParams.MATCH_PARENT;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 183         }</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 184         mBinding.videoView.setLayoutParams(layoutParams);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 185     }</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 186 </span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 187     public boolean isPortrait() {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 188         isPortrait = getRequestedOrientation() != ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 189         return isPortrait;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 190     }</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 191 </span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 192     public void checkoutOrientation(boolean portrait) {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 193         isPortrait = portrait;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"><abbr title=" 194         setRequestedOrientation(portrait ? ActivityInfo.SCREEN_ORIENTATION_PORTRAIT : ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);"> 194         setRequestedOrientation(portrait ? ActivityInfo.SCREEN_ORIENTATION_PORTRAIT : ActivityInfo.SCREEN🔵</abbr></span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 195     }</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 196 </span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 197 }</span>
 198 =======
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 199 package com.example.demo;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 200 </span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 201 import android.content.pm.ActivityInfo;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 202 import android.content.res.Configuration;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 203 import android.databinding.DataBindingUtil;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 204 import android.os.Bundle;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 205 import android.support.annotation.Nullable;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 206 import android.support.v7.app.AppCompatActivity;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 207 import android.text.TextUtils;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 208 import android.view.Gravity;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 209 import android.view.View;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 210 import android.view.WindowManager;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 211 import android.widget.RelativeLayout;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 212 import android.widget.Toast;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 213 </span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 214 import com.effective.R;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 215 import com.effective.android.panel.PanelSwitchHelper;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 216 import com.effective.android.panel.interfaces.listener.OnPanelChangeListener;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 217 import com.effective.android.panel.view.PanelView;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 218 import com.effective.databinding.ActivityVideoSampleLayoutBinding;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 219 import com.example.demo.emotion.EmotionPagerView;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 220 import com.example.demo.emotion.Emotions;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 221 import com.example.demo.interfaces.PopContentSupport;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 222 import com.rd.PageIndicatorView;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 223 </span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 224 /**</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 225  * Created by yummyLau on 18-12-13</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 226  * Email: yummyl.lau@gmail.com</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 227  * blog: yummylau.com</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 228  */</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 229 public class VideoSampleActivity extends AppCompatActivity implements PopContentSupport {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 230 </span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 231     private ActivityVideoSampleLayoutBinding mBinding;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 232     private int portraitHeight;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 233     private PanelSwitchHelper mHelper;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 234     private boolean isPortrait = true;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 235     private VideoPopWindow videoPopWindow;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 236     private Runnable runnable = new Runnable() {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 237         @Override</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 238         public void run() {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 239             if (videoPopWindow != null) {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 240                 videoPopWindow.showKeyboard();</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 241             }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 242         }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 243     };</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 244 </span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 245 </span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 246     @Override</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 247     protected void onCreate(@Nullable Bundle savedInstanceState) {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 248         super.onCreate(savedInstanceState);</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 249         mBinding = DataBindingUtil.setContentView(this, R.layout.activity_video_sample_layout);</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 250         initView();</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 251     }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 252 </span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 253     @Override</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 254     public void sendContent(String content) {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 255         if (!TextUtils.isEmpty(content)) {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"><abbr title=" 256             mBinding.videoView.setText(mBinding.videoView.getText().toString() + &quot;\n&quot; + &quot;yummylau： &quot; + content);"> 256             mBinding.videoView.setText(mBinding.videoView.getText().toString() + &quot;\n&quot; + &quot;yummylau： &quot; + co🔵</abbr></span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 257         }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 258     }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 259 </span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 260     private void initView() {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 261         mBinding.checkout.setOnClickListener(new View.OnClickListener() {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 262             @Override</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 263             public void onClick(View v) {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 264                 boolean isPortrait = isPortrait();</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 265                 if (isPortrait) {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 266                     portraitHeight = mBinding.videoView.getMeasuredHeight();</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 267                 }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 268                 checkoutOrientation(!isPortrait());</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 269             }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 270         });</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 271         mBinding.send.setOnClickListener(new View.OnClickListener() {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 272             @Override</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 273             public void onClick(View v) {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 274                 String content = mBinding.editText.getText().toString();</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 275                 if (TextUtils.isEmpty(content)) {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 276                     Toast.makeText(VideoSampleActivity.this, &quot;当前没有输入&quot;, Toast.LENGTH_SHORT).show();</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 277                     return;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 278                 }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"><abbr title=" 279                 mBinding.videoView.setText(mBinding.videoView.getText().toString() + &quot;\n&quot; + &quot;yummylau： &quot; + content);"> 279                 mBinding.videoView.setText(mBinding.videoView.getText().toString() + &quot;\n&quot; + &quot;yummylau： &quot; 🔵</abbr></span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 280                 mBinding.editText.setText(null);</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 281             }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 282         });</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 283         mBinding.input.setOnClickListener(new View.OnClickListener() {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 284             @Override</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 285             public void onClick(View v) {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 286                 if (isPortrait) {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 287                     mBinding.inputLayout.setVisibility(View.VISIBLE);</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 288                     mBinding.emptyView.setVisibility(View.VISIBLE);</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 289                     mHelper.showKeyboard();</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 290                 } else {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 291                     if (videoPopWindow == null) {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"><abbr title=" 292                         videoPopWindow = new VideoPopWindow(VideoSampleActivity.this, VideoSampleActivity.this);"> 292                         videoPopWindow = new VideoPopWindow(VideoSampleActivity.this, VideoSampleActivity🔵</abbr></span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 293                     }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 294                     videoPopWindow.showAtLocation(mBinding.panelSwitchLayout, Gravity.NO_GRAVITY, 0, 0);</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 295                     mBinding.getRoot().postDelayed(runnable, 500);</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 296                 }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 297             }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 298         });</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 299         mBinding.inputLayout.setVisibility(View.GONE);</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 300         mBinding.emptyView.setVisibility(View.GONE);</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 301     }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 302 </span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 303     @Override</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 304     protected void onStart() {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 305         super.onStart();</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 306         if (mHelper == null) {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 307             mHelper = new PanelSwitchHelper.Builder(this)</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 308                     .bindPanelSwitchLayout(R.id.panel_switch_layout)</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 309                     .bindPanelContainerId(R.id.panel_container)</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 310                     .bindContentContainerId(R.id.content_view)</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 311                     .addPanelChangeListener(new OnPanelChangeListener() {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 312 </span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 313                         @Override</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 314                         public void onKeyboard() {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 315                             mBinding.inputLayout.setVisibility(View.VISIBLE);</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 316                             mBinding.emptyView.setVisibility(View.VISIBLE);</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 317                             mBinding.emotionBtn.setSelected(false);</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 318                         }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 319 </span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 320                         @Override</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 321                         public void onNone() {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 322                             mBinding.emotionBtn.setSelected(false);</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 323                             mBinding.inputLayout.setVisibility(View.GONE);</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 324                             mBinding.emptyView.setVisibility(View.GONE);</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 325                         }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 326 </span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 327                         @Override</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 328                         public void onPanel(PanelView view) {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"><abbr title=" 329                             mBinding.emotionBtn.setSelected(view.getId() == R.id.panel_emotion ? true : false);"> 329                             mBinding.emotionBtn.setSelected(view.getId() == R.id.panel_emotion ? true : f🔵</abbr></span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 330                         }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 331 </span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 332                         @Override</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"><abbr title=" 333                         public void onPanelSizeChange(PanelView panelView, boolean portrait, int oldWidth, int oldHeight, int width, int height) {"> 333                         public void onPanelSizeChange(PanelView panelView, boolean portrait, int oldWidth🔵</abbr></span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 334                             switch (panelView.getId()) {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 335                                 case R.id.panel_emotion: {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"><abbr title=" 336                                     EmotionPagerView pagerView = mBinding.getRoot().findViewById(R.id.view_pager);"> 336                                     EmotionPagerView pagerView = mBinding.getRoot().findViewById(R.id.vie🔵</abbr></span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"><abbr title=" 337                                     int viewPagerSize = height - Utils.dip2px(VideoSampleActivity.this, 30f);"> 337                                     int viewPagerSize = height - Utils.dip2px(VideoSampleActivity.this, 3🔵</abbr></span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 338                                     pagerView.buildEmotionViews(</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"><abbr title=" 339                                             (PageIndicatorView) mBinding.getRoot().findViewById(R.id.pageIndicatorView),"> 339                                             (PageIndicatorView) mBinding.getRoot().findViewById(R.id.page🔵</abbr></span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 340                                             mBinding.editText,</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 341                                             Emotions.getEmotions(), width, viewPagerSize);</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 342                                     break;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 343                                 }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 344                                 case R.id.panel_addition: {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 345                                     //auto center,nothing to do</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 346                                     break;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 347                                 }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 348                             }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 349                         }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 350                     })</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 351                     .logTrack(true)</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 352                     .build(false);</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 353         }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 354     }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 355 </span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 356     @Override</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 357     protected void onDestroy() {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 358         if (videoPopWindow != null) {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 359             videoPopWindow.onDestroy();</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 360         }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 361         mBinding.getRoot().removeCallbacks(runnable);</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 362         super.onDestroy();</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 363     }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 364 </span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 365     @Override</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 366     public void onBackPressed() {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 367         if (!isPortrait) {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 368             if (videoPopWindow.isShowing()) {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 369                 videoPopWindow.dismiss();</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 370             } else {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 371                 checkoutOrientation(true);</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 372             }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 373             return;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 374         }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 375         if (mHelper != null &amp;&amp; mHelper.hookSystemBackForHindPanel()) {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 376             return;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 377         }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 378         super.onBackPressed();</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 379     }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 380 </span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 381 </span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 382     @Override</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 383     public void onConfigurationChanged(Configuration newConfig) {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 384         super.onConfigurationChanged(newConfig);</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"><abbr title=" 385         RelativeLayout.LayoutParams layoutParams = (RelativeLayout.LayoutParams) mBinding.videoView.getLayoutParams();"> 385         RelativeLayout.LayoutParams layoutParams = (RelativeLayout.LayoutParams) mBinding.videoView.getLa🔵</abbr></span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 386         if (newConfig.orientation == Configuration.ORIENTATION_PORTRAIT) {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 387             layoutParams.height = portraitHeight;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 388             getWindow().clearFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN);</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 389         } else {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 390             getWindow().addFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN);</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 391             layoutParams.height = layoutParams.MATCH_PARENT;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 392         }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 393         mBinding.videoView.setLayoutParams(layoutParams);</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 394     }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 395 </span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 396     public boolean isPortrait() {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 397         isPortrait = getRequestedOrientation() != ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 398         return isPortrait;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 399     }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 400 </span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 401     public void checkoutOrientation(boolean portrait) {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 402         isPortrait = portrait;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"><abbr title=" 403         setRequestedOrientation(portrait ? ActivityInfo.SCREEN_ORIENTATION_PORTRAIT : ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);"> 403         setRequestedOrientation(portrait ? ActivityInfo.SCREEN_ORIENTATION_PORTRAIT : ActivityInfo.SCREEN🔵</abbr></span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 404     }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 405 </span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 406 }</span>
 407 &gt;&gt;&gt;&gt;&gt;&gt;&gt; GitAnalyzerPlus_theirs</pre></td>
                            <td><pre>   1 &lt;&lt;&lt;&lt;&lt;&lt;&lt; MINE
   2 ||||||| BASE
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">   3 package com.example.demo;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">   4 </span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">   5 import android.content.pm.ActivityInfo;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">   6 import android.content.res.Configuration;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">   7 import android.databinding.DataBindingUtil;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">   8 import android.os.Bundle;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">   9 import android.support.annotation.Nullable;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  10 import android.support.v7.app.AppCompatActivity;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  11 import android.text.TextUtils;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  12 import android.view.Gravity;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  13 import android.view.View;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  14 import android.view.WindowManager;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  15 import android.widget.RelativeLayout;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  16 import android.widget.Toast;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  17 </span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  18 import com.effective.R;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  19 import com.effective.android.panel.PanelSwitchHelper;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  20 import com.effective.android.panel.interfaces.listener.OnPanelChangeListener;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  21 import com.effective.android.panel.view.PanelView;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  22 import com.effective.databinding.ActivityVideoSampleLayoutBinding;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  23 import com.example.demo.emotion.EmotionPagerView;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  24 import com.example.demo.emotion.Emotions;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  25 import com.example.demo.interfaces.PopContentSupport;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  26 import com.rd.PageIndicatorView;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  27 </span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  28 /**</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  29  * Created by yummyLau on 18-12-13</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  30  * Email: yummyl.lau@gmail.com</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  31  * blog: yummylau.com</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  32  */</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  33 public class VideoSampleActivity extends AppCompatActivity implements PopContentSupport {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  34 </span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  35     private ActivityVideoSampleLayoutBinding mBinding;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  36     private int portraitHeight;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  37     private PanelSwitchHelper mHelper;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  38     private boolean isPortrait = true;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  39     private VideoPopWindow videoPopWindow;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  40 </span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  41 </span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  42     @Override</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  43     protected void onCreate(@Nullable Bundle savedInstanceState) {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  44         super.onCreate(savedInstanceState);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  45         mBinding = DataBindingUtil.setContentView(this, R.layout.activity_video_sample_layout);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  46         initView();</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  47     }</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  48 </span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  49     @Override</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  50     public void sendContent(String content) {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  51         if (!TextUtils.isEmpty(content)) {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"><abbr title="  52             mBinding.videoView.setText(mBinding.videoView.getText().toString() + &quot;\n&quot; + &quot;yummylau： &quot; + content);">  52             mBinding.videoView.setText(mBinding.videoView.getText().toString() + &quot;\n&quot; + &quot;yummylau： &quot; + co🔵</abbr></span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  53         }</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  54     }</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  55 </span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  56     private void initView() {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  57         mBinding.checkout.setOnClickListener(new View.OnClickListener() {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  58             @Override</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  59             public void onClick(View v) {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  60                 boolean isPortrait = isPortrait();</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  61                 if (isPortrait) {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  62                     portraitHeight = mBinding.videoView.getMeasuredHeight();</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  63                 }</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  64                 checkoutOrientation(!isPortrait());</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  65             }</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  66         });</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  67         mBinding.send.setOnClickListener(new View.OnClickListener() {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  68             @Override</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  69             public void onClick(View v) {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  70                 String content = mBinding.editText.getText().toString();</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  71                 if (TextUtils.isEmpty(content)) {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  72                     Toast.makeText(VideoSampleActivity.this, &quot;当前没有输入&quot;, Toast.LENGTH_SHORT).show();</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  73                     return;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  74                 }</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"><abbr title="  75                 mBinding.videoView.setText(mBinding.videoView.getText().toString() + &quot;\n&quot; + &quot;yummylau： &quot; + content);">  75                 mBinding.videoView.setText(mBinding.videoView.getText().toString() + &quot;\n&quot; + &quot;yummylau： &quot; 🔵</abbr></span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  76                 mBinding.editText.setText(null);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  77             }</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  78         });</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  79         mBinding.input.setOnClickListener(new View.OnClickListener() {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  80             @Override</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  81             public void onClick(View v) {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  82                 if (isPortrait) {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  83                     mBinding.inputLayout.setVisibility(View.VISIBLE);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  84                     mBinding.emptyView.setVisibility(View.VISIBLE);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  85                     mHelper.showKeyboard();</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  86                 } else {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  87                     if (videoPopWindow == null) {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"><abbr title="  88                         videoPopWindow = new VideoPopWindow(VideoSampleActivity.this, VideoSampleActivity.this);">  88                         videoPopWindow = new VideoPopWindow(VideoSampleActivity.this, VideoSampleActivity🔵</abbr></span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  89                     }</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  90                     videoPopWindow.showAtLocation(mBinding.panelSwitchLayout, Gravity.NO_GRAVITY, 0, 0);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  91                     videoPopWindow.shoyKeyboard();</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  92                 }</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  93             }</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  94         });</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  95         mBinding.inputLayout.setVisibility(View.GONE);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  96         mBinding.emptyView.setVisibility(View.GONE);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  97     }</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  98 </span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  99     @Override</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 100     protected void onStart() {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 101         super.onStart();</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 102         if (mHelper == null) {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 103             mHelper = new PanelSwitchHelper.Builder(this)</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 104                     .bindPanelSwitchLayout(R.id.panel_switch_layout)</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 105                     .bindPanelContainerId(R.id.panel_container)</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 106                     .bindContentContainerId(R.id.content_view)</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 107                     .addPanelChangeListener(new OnPanelChangeListener() {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 108 </span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 109                         @Override</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 110                         public void onKeyboard() {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 111                             mBinding.inputLayout.setVisibility(View.VISIBLE);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 112                             mBinding.emptyView.setVisibility(View.VISIBLE);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 113                             mBinding.emotionBtn.setSelected(false);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 114                         }</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 115 </span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 116                         @Override</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 117                         public void onNone() {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 118                             mBinding.emotionBtn.setSelected(false);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 119                             mBinding.inputLayout.setVisibility(View.GONE);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 120                             mBinding.emptyView.setVisibility(View.GONE);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 121                         }</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 122 </span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 123                         @Override</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 124                         public void onPanel(PanelView view) {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"><abbr title=" 125                             mBinding.emotionBtn.setSelected(view.getId() == R.id.panel_emotion ? true : false);"> 125                             mBinding.emotionBtn.setSelected(view.getId() == R.id.panel_emotion ? true : f🔵</abbr></span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 126                         }</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 127 </span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 128                         @Override</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"><abbr title=" 129                         public void onPanelSizeChange(PanelView panelView, boolean portrait, int oldWidth, int oldHeight, int width, int height) {"> 129                         public void onPanelSizeChange(PanelView panelView, boolean portrait, int oldWidth🔵</abbr></span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 130                             switch (panelView.getId()) {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 131                                 case R.id.panel_emotion: {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"><abbr title=" 132                                     EmotionPagerView pagerView = mBinding.getRoot().findViewById(R.id.view_pager);"> 132                                     EmotionPagerView pagerView = mBinding.getRoot().findViewById(R.id.vie🔵</abbr></span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"><abbr title=" 133                                     int viewPagerSize = height - Utils.dip2px(VideoSampleActivity.this, 30f);"> 133                                     int viewPagerSize = height - Utils.dip2px(VideoSampleActivity.this, 3🔵</abbr></span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 134                                     pagerView.buildEmotionViews(</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"><abbr title=" 135                                             (PageIndicatorView) mBinding.getRoot().findViewById(R.id.pageIndicatorView),"> 135                                             (PageIndicatorView) mBinding.getRoot().findViewById(R.id.page🔵</abbr></span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 136                                             mBinding.editText,</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 137                                             Emotions.getEmotions(), width, viewPagerSize);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 138                                     break;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 139                                 }</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 140                                 case R.id.panel_addition: {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 141                                     //auto center,nothing to do</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 142                                     break;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 143                                 }</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 144                             }</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 145                         }</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 146                     })</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 147                     .logTrack(true)</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 148                     .build(false);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 149         }</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 150     }</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 151 </span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 152     @Override</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 153     public void onBackPressed() {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 154         if (!isPortrait) {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 155             if (videoPopWindow.isShowing()) {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 156                 videoPopWindow.dismiss();</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 157             } else {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 158                 checkoutOrientation(true);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 159             }</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 160             return;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 161         }</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 162         if (mHelper != null &amp;&amp; mHelper.hookSystemBackForHindPanel()) {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 163             return;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 164         }</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 165         super.onBackPressed();</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 166     }</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 167 </span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 168 </span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 169     @Override</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 170     public void onConfigurationChanged(Configuration newConfig) {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 171         super.onConfigurationChanged(newConfig);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"><abbr title=" 172         RelativeLayout.LayoutParams layoutParams = (RelativeLayout.LayoutParams) mBinding.videoView.getLayoutParams();"> 172         RelativeLayout.LayoutParams layoutParams = (RelativeLayout.LayoutParams) mBinding.videoView.getLa🔵</abbr></span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 173         if (newConfig.orientation == Configuration.ORIENTATION_PORTRAIT) {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 174             layoutParams.height = portraitHeight;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 175             getWindow().clearFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 176         } else {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 177             getWindow().addFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 178 //            WindowManager manager = this.getWindowManager();</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 179 //            DisplayMetrics outMetrics = new DisplayMetrics();</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 180 //            manager.getDefaultDisplay().getMetrics(outMetrics);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 181 //            layoutParams.height = outMetrics.heightPixels;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 182             layoutParams.height = layoutParams.MATCH_PARENT;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 183         }</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 184         mBinding.videoView.setLayoutParams(layoutParams);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 185     }</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 186 </span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 187     public boolean isPortrait() {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 188         isPortrait = getRequestedOrientation() != ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 189         return isPortrait;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 190     }</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 191 </span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 192     public void checkoutOrientation(boolean portrait) {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 193         isPortrait = portrait;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"><abbr title=" 194         setRequestedOrientation(portrait ? ActivityInfo.SCREEN_ORIENTATION_PORTRAIT : ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);"> 194         setRequestedOrientation(portrait ? ActivityInfo.SCREEN_ORIENTATION_PORTRAIT : ActivityInfo.SCREEN🔵</abbr></span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 195     }</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 196 </span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 197 }</span>
 198 =======
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 199 package com.example.demo;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 200 </span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 201 import android.content.pm.ActivityInfo;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 202 import android.content.res.Configuration;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 203 import android.databinding.DataBindingUtil;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 204 import android.os.Bundle;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 205 import android.support.annotation.Nullable;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 206 import android.support.v7.app.AppCompatActivity;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 207 import android.text.TextUtils;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 208 import android.view.Gravity;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 209 import android.view.View;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 210 import android.view.WindowManager;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 211 import android.widget.RelativeLayout;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 212 import android.widget.Toast;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 213 </span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 214 import com.effective.R;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 215 import com.effective.android.panel.PanelSwitchHelper;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 216 import com.effective.android.panel.interfaces.listener.OnPanelChangeListener;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 217 import com.effective.android.panel.view.PanelView;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 218 import com.effective.databinding.ActivityVideoSampleLayoutBinding;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 219 import com.example.demo.emotion.EmotionPagerView;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 220 import com.example.demo.emotion.Emotions;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 221 import com.example.demo.interfaces.PopContentSupport;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 222 import com.rd.PageIndicatorView;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 223 </span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 224 /**</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 225  * Created by yummyLau on 18-12-13</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 226  * Email: yummyl.lau@gmail.com</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 227  * blog: yummylau.com</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 228  */</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 229 public class VideoSampleActivity extends AppCompatActivity implements PopContentSupport {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 230 </span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 231     private ActivityVideoSampleLayoutBinding mBinding;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 232     private int portraitHeight;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 233     private PanelSwitchHelper mHelper;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 234     private boolean isPortrait = true;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 235     private VideoPopWindow videoPopWindow;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 236     private Runnable runnable = new Runnable() {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 237         @Override</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 238         public void run() {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 239             if (videoPopWindow != null) {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 240                 videoPopWindow.showKeyboard();</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 241             }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 242         }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 243     };</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 244 </span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 245 </span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 246     @Override</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 247     protected void onCreate(@Nullable Bundle savedInstanceState) {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 248         super.onCreate(savedInstanceState);</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 249         mBinding = DataBindingUtil.setContentView(this, R.layout.activity_video_sample_layout);</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 250         initView();</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 251     }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 252 </span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 253     @Override</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 254     public void sendContent(String content) {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 255         if (!TextUtils.isEmpty(content)) {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"><abbr title=" 256             mBinding.videoView.setText(mBinding.videoView.getText().toString() + &quot;\n&quot; + &quot;yummylau： &quot; + content);"> 256             mBinding.videoView.setText(mBinding.videoView.getText().toString() + &quot;\n&quot; + &quot;yummylau： &quot; + co🔵</abbr></span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 257         }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 258     }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 259 </span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 260     private void initView() {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 261         mBinding.checkout.setOnClickListener(new View.OnClickListener() {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 262             @Override</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 263             public void onClick(View v) {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 264                 boolean isPortrait = isPortrait();</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 265                 if (isPortrait) {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 266                     portraitHeight = mBinding.videoView.getMeasuredHeight();</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 267                 }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 268                 checkoutOrientation(!isPortrait());</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 269             }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 270         });</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 271         mBinding.send.setOnClickListener(new View.OnClickListener() {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 272             @Override</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 273             public void onClick(View v) {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 274                 String content = mBinding.editText.getText().toString();</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 275                 if (TextUtils.isEmpty(content)) {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 276                     Toast.makeText(VideoSampleActivity.this, &quot;当前没有输入&quot;, Toast.LENGTH_SHORT).show();</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 277                     return;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 278                 }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"><abbr title=" 279                 mBinding.videoView.setText(mBinding.videoView.getText().toString() + &quot;\n&quot; + &quot;yummylau： &quot; + content);"> 279                 mBinding.videoView.setText(mBinding.videoView.getText().toString() + &quot;\n&quot; + &quot;yummylau： &quot; 🔵</abbr></span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 280                 mBinding.editText.setText(null);</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 281             }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 282         });</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 283         mBinding.input.setOnClickListener(new View.OnClickListener() {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 284             @Override</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 285             public void onClick(View v) {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 286                 if (isPortrait) {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 287                     mBinding.inputLayout.setVisibility(View.VISIBLE);</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 288                     mBinding.emptyView.setVisibility(View.VISIBLE);</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 289                     mHelper.showKeyboard();</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 290                 } else {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 291                     if (videoPopWindow == null) {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"><abbr title=" 292                         videoPopWindow = new VideoPopWindow(VideoSampleActivity.this, VideoSampleActivity.this);"> 292                         videoPopWindow = new VideoPopWindow(VideoSampleActivity.this, VideoSampleActivity🔵</abbr></span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 293                     }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 294                     videoPopWindow.showAtLocation(mBinding.panelSwitchLayout, Gravity.NO_GRAVITY, 0, 0);</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 295                     mBinding.getRoot().postDelayed(runnable, 500);</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 296                 }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 297             }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 298         });</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 299         mBinding.inputLayout.setVisibility(View.GONE);</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 300         mBinding.emptyView.setVisibility(View.GONE);</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 301     }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 302 </span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 303     @Override</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 304     protected void onStart() {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 305         super.onStart();</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 306         if (mHelper == null) {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 307             mHelper = new PanelSwitchHelper.Builder(this)</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 308                     .bindPanelSwitchLayout(R.id.panel_switch_layout)</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 309                     .bindPanelContainerId(R.id.panel_container)</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 310                     .bindContentContainerId(R.id.content_view)</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 311                     .addPanelChangeListener(new OnPanelChangeListener() {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 312 </span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 313                         @Override</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 314                         public void onKeyboard() {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 315                             mBinding.inputLayout.setVisibility(View.VISIBLE);</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 316                             mBinding.emptyView.setVisibility(View.VISIBLE);</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 317                             mBinding.emotionBtn.setSelected(false);</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 318                         }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 319 </span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 320                         @Override</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 321                         public void onNone() {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 322                             mBinding.emotionBtn.setSelected(false);</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 323                             mBinding.inputLayout.setVisibility(View.GONE);</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 324                             mBinding.emptyView.setVisibility(View.GONE);</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 325                         }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 326 </span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 327                         @Override</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 328                         public void onPanel(PanelView view) {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"><abbr title=" 329                             mBinding.emotionBtn.setSelected(view.getId() == R.id.panel_emotion ? true : false);"> 329                             mBinding.emotionBtn.setSelected(view.getId() == R.id.panel_emotion ? true : f🔵</abbr></span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 330                         }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 331 </span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 332                         @Override</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"><abbr title=" 333                         public void onPanelSizeChange(PanelView panelView, boolean portrait, int oldWidth, int oldHeight, int width, int height) {"> 333                         public void onPanelSizeChange(PanelView panelView, boolean portrait, int oldWidth🔵</abbr></span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 334                             switch (panelView.getId()) {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 335                                 case R.id.panel_emotion: {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"><abbr title=" 336                                     EmotionPagerView pagerView = mBinding.getRoot().findViewById(R.id.view_pager);"> 336                                     EmotionPagerView pagerView = mBinding.getRoot().findViewById(R.id.vie🔵</abbr></span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"><abbr title=" 337                                     int viewPagerSize = height - Utils.dip2px(VideoSampleActivity.this, 30f);"> 337                                     int viewPagerSize = height - Utils.dip2px(VideoSampleActivity.this, 3🔵</abbr></span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 338                                     pagerView.buildEmotionViews(</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"><abbr title=" 339                                             (PageIndicatorView) mBinding.getRoot().findViewById(R.id.pageIndicatorView),"> 339                                             (PageIndicatorView) mBinding.getRoot().findViewById(R.id.page🔵</abbr></span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 340                                             mBinding.editText,</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 341                                             Emotions.getEmotions(), width, viewPagerSize);</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 342                                     break;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 343                                 }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 344                                 case R.id.panel_addition: {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 345                                     //auto center,nothing to do</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 346                                     break;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 347                                 }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 348                             }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 349                         }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 350                     })</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 351                     .logTrack(true)</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 352                     .build(false);</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 353         }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 354     }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 355 </span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 356     @Override</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 357     protected void onDestroy() {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 358         if (videoPopWindow != null) {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 359             videoPopWindow.onDestroy();</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 360         }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 361         mBinding.getRoot().removeCallbacks(runnable);</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 362         super.onDestroy();</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 363     }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 364 </span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 365     @Override</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 366     public void onBackPressed() {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 367         if (!isPortrait) {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 368             if (videoPopWindow.isShowing()) {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 369                 videoPopWindow.dismiss();</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 370             } else {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 371                 checkoutOrientation(true);</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 372             }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 373             return;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 374         }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 375         if (mHelper != null &amp;&amp; mHelper.hookSystemBackForHindPanel()) {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 376             return;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 377         }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 378         super.onBackPressed();</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 379     }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 380 </span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 381 </span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 382     @Override</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 383     public void onConfigurationChanged(Configuration newConfig) {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 384         super.onConfigurationChanged(newConfig);</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"><abbr title=" 385         RelativeLayout.LayoutParams layoutParams = (RelativeLayout.LayoutParams) mBinding.videoView.getLayoutParams();"> 385         RelativeLayout.LayoutParams layoutParams = (RelativeLayout.LayoutParams) mBinding.videoView.getLa🔵</abbr></span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 386         if (newConfig.orientation == Configuration.ORIENTATION_PORTRAIT) {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 387             layoutParams.height = portraitHeight;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 388             getWindow().clearFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN);</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 389         } else {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 390             getWindow().addFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN);</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 391             layoutParams.height = layoutParams.MATCH_PARENT;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 392         }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 393         mBinding.videoView.setLayoutParams(layoutParams);</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 394     }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 395 </span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 396     public boolean isPortrait() {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 397         isPortrait = getRequestedOrientation() != ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 398         return isPortrait;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 399     }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 400 </span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 401     public void checkoutOrientation(boolean portrait) {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 402         isPortrait = portrait;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"><abbr title=" 403         setRequestedOrientation(portrait ? ActivityInfo.SCREEN_ORIENTATION_PORTRAIT : ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);"> 403         setRequestedOrientation(portrait ? ActivityInfo.SCREEN_ORIENTATION_PORTRAIT : ActivityInfo.SCREEN🔵</abbr></span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 404     }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 405 </span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 406 }</span>
 407 &gt;&gt;&gt;&gt;&gt;&gt;&gt; YOURS</pre></td>
                            <td><pre>   1 &lt;&lt;&lt;&lt;&lt;&lt;&lt; LEFT
   2 ||||||| BASE
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"><abbr title="   3 /*d94z9sk0k4hf9j3ijd - note the base isn&#x27;t actually empty, spork simply doesn&#x27;t generate a base - gd930kwohrp23k5b6vdk93d3r*/">   3 /*d94z9sk0k4hf9j3ijd - note the base isn&#x27;t actually empty, spork simply doesn&#x27;t generate a base - gd930kw🔵</abbr></span>
   4 =======
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">   5 </span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">   6 package com.example.demo;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">   7 </span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">   8 import android.content.pm.ActivityInfo;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">   9 import android.content.res.Configuration;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  10 import android.databinding.DataBindingUtil;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  11 import android.os.Bundle;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  12 import android.support.annotation.Nullable;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  13 import android.support.v7.app.AppCompatActivity;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  14 import android.text.TextUtils;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  15 import android.view.Gravity;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  16 import android.view.View;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  17 import android.view.WindowManager;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  18 import android.widget.RelativeLayout;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  19 import android.widget.Toast;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  20 </span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  21 import com.effective.R;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  22 import com.effective.android.panel.PanelSwitchHelper;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  23 import com.effective.android.panel.interfaces.listener.OnPanelChangeListener;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  24 import com.effective.android.panel.view.PanelView;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  25 import com.effective.databinding.ActivityVideoSampleLayoutBinding;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  26 import com.example.demo.emotion.EmotionPagerView;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  27 import com.example.demo.emotion.Emotions;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  28 import com.example.demo.interfaces.PopContentSupport;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  29 import com.rd.PageIndicatorView;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  30 </span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  31 /**</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  32  * Created by yummyLau on 18-12-13</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  33  * Email: yummyl.lau@gmail.com</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  34  * blog: yummylau.com</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  35  */</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  36 public class VideoSampleActivity extends AppCompatActivity implements PopContentSupport {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  37 </span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  38     private ActivityVideoSampleLayoutBinding mBinding;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  39     private int portraitHeight;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  40     private PanelSwitchHelper mHelper;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  41     private boolean isPortrait = true;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  42     private VideoPopWindow videoPopWindow;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  43     private Runnable runnable = new Runnable() {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  44         @Override</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  45         public void run() {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  46             if (videoPopWindow != null) {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  47                 videoPopWindow.showKeyboard();</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  48             }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  49         }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  50     };</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  51 </span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  52 </span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  53     @Override</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  54     protected void onCreate(@Nullable Bundle savedInstanceState) {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  55         super.onCreate(savedInstanceState);</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  56         mBinding = DataBindingUtil.setContentView(this, R.layout.activity_video_sample_layout);</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  57         initView();</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  58     }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  59 </span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  60     @Override</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  61     public void sendContent(String content) {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  62         if (!TextUtils.isEmpty(content)) {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"><abbr title="  63             mBinding.videoView.setText(mBinding.videoView.getText().toString() + &quot;\n&quot; + &quot;yummylau： &quot; + content);">  63             mBinding.videoView.setText(mBinding.videoView.getText().toString() + &quot;\n&quot; + &quot;yummylau： &quot; + co🔵</abbr></span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  64         }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  65     }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  66 </span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  67     private void initView() {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  68         mBinding.checkout.setOnClickListener(new View.OnClickListener() {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  69             @Override</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  70             public void onClick(View v) {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  71                 boolean isPortrait = isPortrait();</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  72                 if (isPortrait) {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  73                     portraitHeight = mBinding.videoView.getMeasuredHeight();</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  74                 }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  75                 checkoutOrientation(!isPortrait());</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  76             }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  77         });</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  78         mBinding.send.setOnClickListener(new View.OnClickListener() {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  79             @Override</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  80             public void onClick(View v) {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  81                 String content = mBinding.editText.getText().toString();</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  82                 if (TextUtils.isEmpty(content)) {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  83                     Toast.makeText(VideoSampleActivity.this, &quot;当前没有输入&quot;, Toast.LENGTH_SHORT).show();</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  84                     return;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  85                 }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"><abbr title="  86                 mBinding.videoView.setText(mBinding.videoView.getText().toString() + &quot;\n&quot; + &quot;yummylau： &quot; + content);">  86                 mBinding.videoView.setText(mBinding.videoView.getText().toString() + &quot;\n&quot; + &quot;yummylau： &quot; 🔵</abbr></span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  87                 mBinding.editText.setText(null);</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  88             }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  89         });</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  90         mBinding.input.setOnClickListener(new View.OnClickListener() {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  91             @Override</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  92             public void onClick(View v) {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  93                 if (isPortrait) {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  94                     mBinding.inputLayout.setVisibility(View.VISIBLE);</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  95                     mBinding.emptyView.setVisibility(View.VISIBLE);</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  96                     mHelper.showKeyboard();</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  97                 } else {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  98                     if (videoPopWindow == null) {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"><abbr title="  99                         videoPopWindow = new VideoPopWindow(VideoSampleActivity.this, VideoSampleActivity.this);">  99                         videoPopWindow = new VideoPopWindow(VideoSampleActivity.this, VideoSampleActivity🔵</abbr></span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 100                     }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 101                     videoPopWindow.showAtLocation(mBinding.panelSwitchLayout, Gravity.NO_GRAVITY, 0, 0);</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 102                     mBinding.getRoot().postDelayed(runnable, 500);</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 103                 }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 104             }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 105         });</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 106         mBinding.inputLayout.setVisibility(View.GONE);</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 107         mBinding.emptyView.setVisibility(View.GONE);</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 108     }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 109 </span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 110     @Override</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 111     protected void onStart() {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 112         super.onStart();</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 113         if (mHelper == null) {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 114             mHelper = new PanelSwitchHelper.Builder(this)</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 115                     .bindPanelSwitchLayout(R.id.panel_switch_layout)</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 116                     .bindPanelContainerId(R.id.panel_container)</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 117                     .bindContentContainerId(R.id.content_view)</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 118                     .addPanelChangeListener(new OnPanelChangeListener() {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 119 </span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 120                         @Override</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 121                         public void onKeyboard() {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 122                             mBinding.inputLayout.setVisibility(View.VISIBLE);</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 123                             mBinding.emptyView.setVisibility(View.VISIBLE);</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 124                             mBinding.emotionBtn.setSelected(false);</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 125                         }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 126 </span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 127                         @Override</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 128                         public void onNone() {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 129                             mBinding.emotionBtn.setSelected(false);</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 130                             mBinding.inputLayout.setVisibility(View.GONE);</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 131                             mBinding.emptyView.setVisibility(View.GONE);</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 132                         }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 133 </span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 134                         @Override</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 135                         public void onPanel(PanelView view) {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"><abbr title=" 136                             mBinding.emotionBtn.setSelected(view.getId() == R.id.panel_emotion ? true : false);"> 136                             mBinding.emotionBtn.setSelected(view.getId() == R.id.panel_emotion ? true : f🔵</abbr></span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 137                         }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 138 </span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 139                         @Override</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"><abbr title=" 140                         public void onPanelSizeChange(PanelView panelView, boolean portrait, int oldWidth, int oldHeight, int width, int height) {"> 140                         public void onPanelSizeChange(PanelView panelView, boolean portrait, int oldWidth🔵</abbr></span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 141                             switch (panelView.getId()) {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 142                                 case R.id.panel_emotion: {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"><abbr title=" 143                                     EmotionPagerView pagerView = mBinding.getRoot().findViewById(R.id.view_pager);"> 143                                     EmotionPagerView pagerView = mBinding.getRoot().findViewById(R.id.vie🔵</abbr></span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"><abbr title=" 144                                     int viewPagerSize = height - Utils.dip2px(VideoSampleActivity.this, 30f);"> 144                                     int viewPagerSize = height - Utils.dip2px(VideoSampleActivity.this, 3🔵</abbr></span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 145                                     pagerView.buildEmotionViews(</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"><abbr title=" 146                                             (PageIndicatorView) mBinding.getRoot().findViewById(R.id.pageIndicatorView),"> 146                                             (PageIndicatorView) mBinding.getRoot().findViewById(R.id.page🔵</abbr></span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 147                                             mBinding.editText,</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 148                                             Emotions.getEmotions(), width, viewPagerSize);</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 149                                     break;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 150                                 }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 151                                 case R.id.panel_addition: {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 152                                     //auto center,nothing to do</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 153                                     break;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 154                                 }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 155                             }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 156                         }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 157                     })</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 158                     .logTrack(true)</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 159                     .build(false);</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 160         }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 161     }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 162 </span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 163     @Override</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 164     protected void onDestroy() {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 165         if (videoPopWindow != null) {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 166             videoPopWindow.onDestroy();</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 167         }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 168         mBinding.getRoot().removeCallbacks(runnable);</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 169         super.onDestroy();</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 170     }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 171 </span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 172     @Override</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 173     public void onBackPressed() {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 174         if (!isPortrait) {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 175             if (videoPopWindow.isShowing()) {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 176                 videoPopWindow.dismiss();</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 177             } else {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 178                 checkoutOrientation(true);</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 179             }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 180             return;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 181         }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 182         if (mHelper != null &amp;&amp; mHelper.hookSystemBackForHindPanel()) {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 183             return;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 184         }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 185         super.onBackPressed();</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 186     }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 187 </span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 188 </span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 189     @Override</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 190     public void onConfigurationChanged(Configuration newConfig) {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 191         super.onConfigurationChanged(newConfig);</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"><abbr title=" 192         RelativeLayout.LayoutParams layoutParams = (RelativeLayout.LayoutParams) mBinding.videoView.getLayoutParams();"> 192         RelativeLayout.LayoutParams layoutParams = (RelativeLayout.LayoutParams) mBinding.videoView.getLa🔵</abbr></span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 193         if (newConfig.orientation == Configuration.ORIENTATION_PORTRAIT) {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 194             layoutParams.height = portraitHeight;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 195             getWindow().clearFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN);</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 196         } else {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 197             getWindow().addFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN);</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 198             layoutParams.height = layoutParams.MATCH_PARENT;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 199         }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 200         mBinding.videoView.setLayoutParams(layoutParams);</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 201     }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 202 </span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 203     public boolean isPortrait() {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 204         isPortrait = getRequestedOrientation() != ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 205         return isPortrait;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 206     }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 207 </span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 208     public void checkoutOrientation(boolean portrait) {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 209         isPortrait = portrait;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"><abbr title=" 210         setRequestedOrientation(portrait ? ActivityInfo.SCREEN_ORIENTATION_PORTRAIT : ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);"> 210         setRequestedOrientation(portrait ? ActivityInfo.SCREEN_ORIENTATION_PORTRAIT : ActivityInfo.SCREEN🔵</abbr></span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 211     }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 212 </span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 213 }</span>
 214 &gt;&gt;&gt;&gt;&gt;&gt;&gt; RIGHT
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 </pre></td>
                        </tr>
                    </table>
                </div>
                <div id="bottom">
                    <table style="margin:auto">
                        <tr>
                            <th>ours vs. base</th>
                            <th>theirs vs. base</th>
                        </tr>
                        <tr>
                            <td><pre><span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">   1 -package com.example.demo;</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">   2 -</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">   3 -import android.content.pm.ActivityInfo;</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">   4 -import android.content.res.Configuration;</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">   5 -import android.databinding.DataBindingUtil;</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">   6 -import android.os.Bundle;</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">   7 -import android.support.annotation.Nullable;</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">   8 -import android.support.v7.app.AppCompatActivity;</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">   9 -import android.text.TextUtils;</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  10 -import android.view.Gravity;</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  11 -import android.view.View;</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  12 -import android.view.WindowManager;</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  13 -import android.widget.RelativeLayout;</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  14 -import android.widget.Toast;</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  15 -</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  16 -import com.effective.R;</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  17 -import com.effective.android.panel.PanelSwitchHelper;</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  18 -import com.effective.android.panel.interfaces.listener.OnPanelChangeListener;</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  19 -import com.effective.android.panel.view.PanelView;</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  20 -import com.effective.databinding.ActivityVideoSampleLayoutBinding;</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  21 -import com.example.demo.emotion.EmotionPagerView;</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  22 -import com.example.demo.emotion.Emotions;</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  23 -import com.example.demo.interfaces.PopContentSupport;</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  24 -import com.rd.PageIndicatorView;</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  25 -</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  26 -/**</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  27 - * Created by yummyLau on 18-12-13</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  28 - * Email: yummyl.lau@gmail.com</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  29 - * blog: yummylau.com</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  30 - */</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  31 -public class VideoSampleActivity extends AppCompatActivity implements PopContentSupport {</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  32 -</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  33 -    private ActivityVideoSampleLayoutBinding mBinding;</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  34 -    private int portraitHeight;</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  35 -    private PanelSwitchHelper mHelper;</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  36 -    private boolean isPortrait = true;</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  37 -    private VideoPopWindow videoPopWindow;</span>








<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  38 -</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  39 -</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  40 -    @Override</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  41 -    protected void onCreate(@Nullable Bundle savedInstanceState) {</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  42 -        super.onCreate(savedInstanceState);</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  43 -        mBinding = DataBindingUtil.setContentView(this, R.layout.activity_video_sample_layout);</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  44 -        initView();</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  45 -    }</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  46 -</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  47 -    @Override</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  48 -    public void sendContent(String content) {</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  49 -        if (!TextUtils.isEmpty(content)) {</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  50 -            mBinding.videoView.setText(mBinding.videoView.getText().toString() + &quot;\n&quot; + &quot;yummylau： &quot; + content);</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  51 -        }</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  52 -    }</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  53 -</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  54 -    private void initView() {</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  55 -        mBinding.checkout.setOnClickListener(new View.OnClickListener() {</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  56 -            @Override</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  57 -            public void onClick(View v) {</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  58 -                boolean isPortrait = isPortrait();</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  59 -                if (isPortrait) {</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  60 -                    portraitHeight = mBinding.videoView.getMeasuredHeight();</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  61 -                }</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  62 -                checkoutOrientation(!isPortrait());</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  63 -            }</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  64 -        });</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  65 -        mBinding.send.setOnClickListener(new View.OnClickListener() {</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  66 -            @Override</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  67 -            public void onClick(View v) {</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  68 -                String content = mBinding.editText.getText().toString();</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  69 -                if (TextUtils.isEmpty(content)) {</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  70 -                    Toast.makeText(VideoSampleActivity.this, &quot;当前没有输入&quot;, Toast.LENGTH_SHORT).show();</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  71 -                    return;</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  72 -                }</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"><abbr title="  73 -                mBinding.videoView.setText(mBinding.videoView.getText().toString() + &quot;\n&quot; + &quot;yummylau： &quot; + content);">  73 -                mBinding.videoView.setText(mBinding.videoView.getText().toString() + &quot;\n&quot; + &quot;yummylau： &quot; + content🔵</abbr></span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  74 -                mBinding.editText.setText(null);</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  75 -            }</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  76 -        });</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  77 -        mBinding.input.setOnClickListener(new View.OnClickListener() {</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  78 -            @Override</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  79 -            public void onClick(View v) {</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  80 -                if (isPortrait) {</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  81 -                    mBinding.inputLayout.setVisibility(View.VISIBLE);</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  82 -                    mBinding.emptyView.setVisibility(View.VISIBLE);</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  83 -                    mHelper.showKeyboard();</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  84 -                } else {</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  85 -                    if (videoPopWindow == null) {</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  86 -                        videoPopWindow = new VideoPopWindow(VideoSampleActivity.this, VideoSampleActivity.this);</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  87 -                    }</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  88 -                    videoPopWindow.showAtLocation(mBinding.panelSwitchLayout, Gravity.NO_GRAVITY, 0, 0);</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  89 -                    videoPopWindow.shoyKeyboard();</span>

<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  90 -                }</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  91 -            }</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  92 -        });</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  93 -        mBinding.inputLayout.setVisibility(View.GONE);</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  94 -        mBinding.emptyView.setVisibility(View.GONE);</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  95 -    }</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  96 -</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  97 -    @Override</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  98 -    protected void onStart() {</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  99 -        super.onStart();</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 100 -        if (mHelper == null) {</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 101 -            mHelper = new PanelSwitchHelper.Builder(this)</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 102 -                    .bindPanelSwitchLayout(R.id.panel_switch_layout)</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 103 -                    .bindPanelContainerId(R.id.panel_container)</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 104 -                    .bindContentContainerId(R.id.content_view)</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 105 -                    .addPanelChangeListener(new OnPanelChangeListener() {</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 106 -</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 107 -                        @Override</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 108 -                        public void onKeyboard() {</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 109 -                            mBinding.inputLayout.setVisibility(View.VISIBLE);</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 110 -                            mBinding.emptyView.setVisibility(View.VISIBLE);</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 111 -                            mBinding.emotionBtn.setSelected(false);</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 112 -                        }</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 113 -</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 114 -                        @Override</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 115 -                        public void onNone() {</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 116 -                            mBinding.emotionBtn.setSelected(false);</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 117 -                            mBinding.inputLayout.setVisibility(View.GONE);</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 118 -                            mBinding.emptyView.setVisibility(View.GONE);</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 119 -                        }</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 120 -</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 121 -                        @Override</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 122 -                        public void onPanel(PanelView view) {</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 123 -                            mBinding.emotionBtn.setSelected(view.getId() == R.id.panel_emotion ? true : false);</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 124 -                        }</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 125 -</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 126 -                        @Override</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"><abbr title=" 127 -                        public void onPanelSizeChange(PanelView panelView, boolean portrait, int oldWidth, int oldHeight, int width, int height) {"> 127 -                        public void onPanelSizeChange(PanelView panelView, boolean portrait, int oldWidth, int old🔵</abbr></span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 128 -                            switch (panelView.getId()) {</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 129 -                                case R.id.panel_emotion: {</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 130 -                                    EmotionPagerView pagerView = mBinding.getRoot().findViewById(R.id.view_pager);</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 131 -                                    int viewPagerSize = height - Utils.dip2px(VideoSampleActivity.this, 30f);</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 132 -                                    pagerView.buildEmotionViews(</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"><abbr title=" 133 -                                            (PageIndicatorView) mBinding.getRoot().findViewById(R.id.pageIndicatorView),"> 133 -                                            (PageIndicatorView) mBinding.getRoot().findViewById(R.id.pageIndicator🔵</abbr></span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 134 -                                            mBinding.editText,</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 135 -                                            Emotions.getEmotions(), width, viewPagerSize);</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 136 -                                    break;</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 137 -                                }</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 138 -                                case R.id.panel_addition: {</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 139 -                                    //auto center,nothing to do</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 140 -                                    break;</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 141 -                                }</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 142 -                            }</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 143 -                        }</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 144 -                    })</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 145 -                    .logTrack(true)</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 146 -                    .build(false);</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 147 -        }</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 148 -    }</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 149 -</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 150 -    @Override</span>









<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 151 -    public void onBackPressed() {</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 152 -        if (!isPortrait) {</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 153 -            if (videoPopWindow.isShowing()) {</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 154 -                videoPopWindow.dismiss();</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 155 -            } else {</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 156 -                checkoutOrientation(true);</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 157 -            }</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 158 -            return;</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 159 -        }</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 160 -        if (mHelper != null &amp;&amp; mHelper.hookSystemBackForHindPanel()) {</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 161 -            return;</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 162 -        }</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 163 -        super.onBackPressed();</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 164 -    }</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 165 -</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 166 -</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 167 -    @Override</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 168 -    public void onConfigurationChanged(Configuration newConfig) {</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 169 -        super.onConfigurationChanged(newConfig);</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"><abbr title=" 170 -        RelativeLayout.LayoutParams layoutParams = (RelativeLayout.LayoutParams) mBinding.videoView.getLayoutParams();"> 170 -        RelativeLayout.LayoutParams layoutParams = (RelativeLayout.LayoutParams) mBinding.videoView.getLayoutParam🔵</abbr></span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 171 -        if (newConfig.orientation == Configuration.ORIENTATION_PORTRAIT) {</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 172 -            layoutParams.height = portraitHeight;</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 173 -            getWindow().clearFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN);</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 174 -        } else {</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 175 -            getWindow().addFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN);</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 176 -//            WindowManager manager = this.getWindowManager();</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 177 -//            DisplayMetrics outMetrics = new DisplayMetrics();</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 178 -//            manager.getDefaultDisplay().getMetrics(outMetrics);</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 179 -//            layoutParams.height = outMetrics.heightPixels;</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 180 -            layoutParams.height = layoutParams.MATCH_PARENT;</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 181 -        }</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 182 -        mBinding.videoView.setLayoutParams(layoutParams);</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 183 -    }</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 184 -</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 185 -    public boolean isPortrait() {</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 186 -        isPortrait = getRequestedOrientation() != ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE;</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 187 -        return isPortrait;</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 188 -    }</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 189 -</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 190 -    public void checkoutOrientation(boolean portrait) {</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 191 -        isPortrait = portrait;</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"><abbr title=" 192 -        setRequestedOrientation(portrait ? ActivityInfo.SCREEN_ORIENTATION_PORTRAIT : ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);"> 192 -        setRequestedOrientation(portrait ? ActivityInfo.SCREEN_ORIENTATION_PORTRAIT : ActivityInfo.SCREEN_ORIENTAT🔵</abbr></span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 193 -    }</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 194 -</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 195 -}</span></pre></td>
                            <td><pre>   1  package com.example.demo;
   2  
   3  import android.content.pm.ActivityInfo;
   4  import android.content.res.Configuration;
   5  import android.databinding.DataBindingUtil;
   6  import android.os.Bundle;
   7  import android.support.annotation.Nullable;
   8  import android.support.v7.app.AppCompatActivity;
   9  import android.text.TextUtils;
  10  import android.view.Gravity;
  11  import android.view.View;
  12  import android.view.WindowManager;
  13  import android.widget.RelativeLayout;
  14  import android.widget.Toast;
  15  
  16  import com.effective.R;
  17  import com.effective.android.panel.PanelSwitchHelper;
  18  import com.effective.android.panel.interfaces.listener.OnPanelChangeListener;
  19  import com.effective.android.panel.view.PanelView;
  20  import com.effective.databinding.ActivityVideoSampleLayoutBinding;
  21  import com.example.demo.emotion.EmotionPagerView;
  22  import com.example.demo.emotion.Emotions;
  23  import com.example.demo.interfaces.PopContentSupport;
  24  import com.rd.PageIndicatorView;
  25  
  26  /**
  27   * Created by yummyLau on 18-12-13
  28   * Email: yummyl.lau@gmail.com
  29   * blog: yummylau.com
  30   */
  31  public class VideoSampleActivity extends AppCompatActivity implements PopContentSupport {
  32  
  33      private ActivityVideoSampleLayoutBinding mBinding;
  34      private int portraitHeight;
  35      private PanelSwitchHelper mHelper;
  36      private boolean isPortrait = true;
  37      private VideoPopWindow videoPopWindow;
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  38 +    private Runnable runnable = new Runnable() {</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  39 +        @Override</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  40 +        public void run() {</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  41 +            if (videoPopWindow != null) {</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  42 +                videoPopWindow.showKeyboard();</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  43 +            }</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  44 +        }</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  45 +    };</span>
  46  
  47  
  48      @Override
  49      protected void onCreate(@Nullable Bundle savedInstanceState) {
  50          super.onCreate(savedInstanceState);
  51          mBinding = DataBindingUtil.setContentView(this, R.layout.activity_video_sample_layout);
  52          initView();
  53      }
  54  
  55      @Override
  56      public void sendContent(String content) {
  57          if (!TextUtils.isEmpty(content)) {
  58              mBinding.videoView.setText(mBinding.videoView.getText().toString() + &quot;\n&quot; + &quot;yummylau： &quot; + content);
  59          }
  60      }
  61  
  62      private void initView() {
  63          mBinding.checkout.setOnClickListener(new View.OnClickListener() {
  64              @Override
  65              public void onClick(View v) {
  66                  boolean isPortrait = isPortrait();
  67                  if (isPortrait) {
  68                      portraitHeight = mBinding.videoView.getMeasuredHeight();
  69                  }
  70                  checkoutOrientation(!isPortrait());
  71              }
  72          });
  73          mBinding.send.setOnClickListener(new View.OnClickListener() {
  74              @Override
  75              public void onClick(View v) {
  76                  String content = mBinding.editText.getText().toString();
  77                  if (TextUtils.isEmpty(content)) {
  78                      Toast.makeText(VideoSampleActivity.this, &quot;当前没有输入&quot;, Toast.LENGTH_SHORT).show();
  79                      return;
  80                  }
<abbr title="  81                  mBinding.videoView.setText(mBinding.videoView.getText().toString() + &quot;\n&quot; + &quot;yummylau： &quot; + content);">  81                  mBinding.videoView.setText(mBinding.videoView.getText().toString() + &quot;\n&quot; + &quot;yummylau： &quot; + content🔵</abbr>
  82                  mBinding.editText.setText(null);
  83              }
  84          });
  85          mBinding.input.setOnClickListener(new View.OnClickListener() {
  86              @Override
  87              public void onClick(View v) {
  88                  if (isPortrait) {
  89                      mBinding.inputLayout.setVisibility(View.VISIBLE);
  90                      mBinding.emptyView.setVisibility(View.VISIBLE);
  91                      mHelper.showKeyboard();
  92                  } else {
  93                      if (videoPopWindow == null) {
  94                          videoPopWindow = new VideoPopWindow(VideoSampleActivity.this, VideoSampleActivity.this);
  95                      }
  96                      videoPopWindow.showAtLocation(mBinding.panelSwitchLayout, Gravity.NO_GRAVITY, 0, 0);
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  97 -                    videoPopWindow.shoyKeyboard();</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  98 +                    mBinding.getRoot().postDelayed(runnable, 500);</span>
  99                  }
 100              }
 101          });
 102          mBinding.inputLayout.setVisibility(View.GONE);
 103          mBinding.emptyView.setVisibility(View.GONE);
 104      }
 105  
 106      @Override
 107      protected void onStart() {
 108          super.onStart();
 109          if (mHelper == null) {
 110              mHelper = new PanelSwitchHelper.Builder(this)
 111                      .bindPanelSwitchLayout(R.id.panel_switch_layout)
 112                      .bindPanelContainerId(R.id.panel_container)
 113                      .bindContentContainerId(R.id.content_view)
 114                      .addPanelChangeListener(new OnPanelChangeListener() {
 115  
 116                          @Override
 117                          public void onKeyboard() {
 118                              mBinding.inputLayout.setVisibility(View.VISIBLE);
 119                              mBinding.emptyView.setVisibility(View.VISIBLE);
 120                              mBinding.emotionBtn.setSelected(false);
 121                          }
 122  
 123                          @Override
 124                          public void onNone() {
 125                              mBinding.emotionBtn.setSelected(false);
 126                              mBinding.inputLayout.setVisibility(View.GONE);
 127                              mBinding.emptyView.setVisibility(View.GONE);
 128                          }
 129  
 130                          @Override
 131                          public void onPanel(PanelView view) {
 132                              mBinding.emotionBtn.setSelected(view.getId() == R.id.panel_emotion ? true : false);
 133                          }
 134  
 135                          @Override
<abbr title=" 136                          public void onPanelSizeChange(PanelView panelView, boolean portrait, int oldWidth, int oldHeight, int width, int height) {"> 136                          public void onPanelSizeChange(PanelView panelView, boolean portrait, int oldWidth, int old🔵</abbr>
 137                              switch (panelView.getId()) {
 138                                  case R.id.panel_emotion: {
 139                                      EmotionPagerView pagerView = mBinding.getRoot().findViewById(R.id.view_pager);
 140                                      int viewPagerSize = height - Utils.dip2px(VideoSampleActivity.this, 30f);
 141                                      pagerView.buildEmotionViews(
<abbr title=" 142                                              (PageIndicatorView) mBinding.getRoot().findViewById(R.id.pageIndicatorView),"> 142                                              (PageIndicatorView) mBinding.getRoot().findViewById(R.id.pageIndicator🔵</abbr>
 143                                              mBinding.editText,
 144                                              Emotions.getEmotions(), width, viewPagerSize);
 145                                      break;
 146                                  }
 147                                  case R.id.panel_addition: {
 148                                      //auto center,nothing to do
 149                                      break;
 150                                  }
 151                              }
 152                          }
 153                      })
 154                      .logTrack(true)
 155                      .build(false);
 156          }
 157      }
 158  
 159      @Override
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 160 +    protected void onDestroy() {</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 161 +        if (videoPopWindow != null) {</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 162 +            videoPopWindow.onDestroy();</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 163 +        }</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 164 +        mBinding.getRoot().removeCallbacks(runnable);</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 165 +        super.onDestroy();</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 166 +    }</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 167 +</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 168 +    @Override</span>
 169      public void onBackPressed() {
 170          if (!isPortrait) {
 171              if (videoPopWindow.isShowing()) {
 172                  videoPopWindow.dismiss();
 173              } else {
 174                  checkoutOrientation(true);
 175              }
 176              return;
 177          }
 178          if (mHelper != null &amp;&amp; mHelper.hookSystemBackForHindPanel()) {
 179              return;
 180          }
 181          super.onBackPressed();
 182      }
 183  
 184  
 185      @Override
 186      public void onConfigurationChanged(Configuration newConfig) {
 187          super.onConfigurationChanged(newConfig);
<abbr title=" 188          RelativeLayout.LayoutParams layoutParams = (RelativeLayout.LayoutParams) mBinding.videoView.getLayoutParams();"> 188          RelativeLayout.LayoutParams layoutParams = (RelativeLayout.LayoutParams) mBinding.videoView.getLayoutParam🔵</abbr>
 189          if (newConfig.orientation == Configuration.ORIENTATION_PORTRAIT) {
 190              layoutParams.height = portraitHeight;
 191              getWindow().clearFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN);
 192          } else {
 193              getWindow().addFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN);
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 194 -//            WindowManager manager = this.getWindowManager();</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 195 -//            DisplayMetrics outMetrics = new DisplayMetrics();</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 196 -//            manager.getDefaultDisplay().getMetrics(outMetrics);</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 197 -//            layoutParams.height = outMetrics.heightPixels;</span>
 198              layoutParams.height = layoutParams.MATCH_PARENT;
 199          }
 200          mBinding.videoView.setLayoutParams(layoutParams);
 201      }
 202  
 203      public boolean isPortrait() {
 204          isPortrait = getRequestedOrientation() != ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE;
 205          return isPortrait;
 206      }
 207  
 208      public void checkoutOrientation(boolean portrait) {
 209          isPortrait = portrait;
<abbr title=" 210          setRequestedOrientation(portrait ? ActivityInfo.SCREEN_ORIENTATION_PORTRAIT : ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);"> 210          setRequestedOrientation(portrait ? ActivityInfo.SCREEN_ORIENTATION_PORTRAIT : ActivityInfo.SCREEN_ORIENTAT🔵</abbr>
 211      }
 212  
 213  }</pre></td>
                        </tr>
                    </table>
                </div>
              </body>
            </html>
            