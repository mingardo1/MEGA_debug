<!DOCTYPE html>
    <html lang="en">
              <head>
                <meta charset="utf-8">
                <title>45</title>
                    <style>
                        #top {
                            height: 48vh;
                            overflow-y: auto;
                        }
                        #bottom {
                            height: 48vh;
                            overflow-y: auto;
                        }
                        abbr {
                          /* Here is the delay */
                          transition-delay:0s;
                        }
                    </style>
              </head>
              <body>
                <span style="height: 4vh">
                    45
                    <a href="44.html">prev</a>
                    <a href="46.html">next</a>
                    <a href="45_chunks.html">chunks</a>
                    <a href="index.html">index</a>
                    AriaLyy/Aria_ec1b504309d78f4ff275a5e6a6f08a5e0022f44b_Aria/src/main/java/com/arialyy/aria/core/download/FtpDirDownloadTarget.java
                    <textarea rows=1 onclick='navigator.clipboard.writeText(this.value)'>cd C:\studies\se\mega\git-analyzer-plus\notebooks\debug
del /Q *
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\AriaLyy\Aria show &quot;ec1b504309d78f4ff275a5e6a6f08a5e0022f44b:Aria/src/main/java/com/arialyy/aria/core/download/FtpDirDownloadTarget.java&quot; &gt; committed.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\AriaLyy\Aria show &quot;ec1b504309d78f4ff275a5e6a6f08a5e0022f44b^1:Aria/src/main/java/com/arialyy/aria/core/download/FtpDirDownloadTarget.java&quot; &gt; ours.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\AriaLyy\Aria show &quot;ec1b504309d78f4ff275a5e6a6f08a5e0022f44b^2:Aria/src/main/java/com/arialyy/aria/core/download/FtpDirDownloadTarget.java&quot; &gt; theirs.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\AriaLyy\Aria show &quot;cd587dd212fe20c8c7e9d44c6b009614eae38bef:Aria/src/main/java/com/arialyy/aria/core/download/FtpDirDownloadTarget.java&quot; &gt; base.java
copy ours.java 1ours.java
copy ours.java 2ours.java
copy theirs.java 1theirs.java
copy theirs.java 2theirs.java
copy base.java 1base.java
copy base.java 2base.java
&quot;C:\Program Files\Java\jdk1.8.0_241\bin\java.exe&quot; -Dfile.encoding=UTF-8 -jar &quot;C:\studies\se\jFSTMerge\build\libs\jFSTMerge-all.jar&quot; C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1ours.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1base.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1theirs.java -o C:\studies\se\mega\git-analyzer-plus\notebooks\debug\jfstmerge.java --show-base
&quot;C:\Program Files\Eclipse Adoptium\jdk-17.0.11.9-hotspot\bin\java.exe&quot; -Dfile.encoding=UTF-8 -jar &quot;C:\studies\se\spork\target\spork-0.5.0-SNAPSHOT.jar&quot; C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2ours.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2base.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2theirs.java -o C:\studies\se\mega\git-analyzer-plus\notebooks\debug\spork.java
del /Q 1*.java
del /Q 2*.java
del /Q jfstmerge.java.merge
</textarea>
                    {strict: [[bj]], subset: [[bj]]}
                </span>
                <div id="top">

                    <table>
                        <tr>
                            <th>line based (standard git)</th>
                            <th>jfstmerge</th>
                            <th>spork</th>
                        </tr>
                        <tr>
                            <td><pre>   1 /*
   2  * Copyright (C) 2016 AriaLyy(https://github.com/AriaLyy/Aria)
   3  *
   4  * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
   5  * you may not use this file except in compliance with the License.
   6  * You may obtain a copy of the License at
   7  *
   8  *      http://www.apache.org/licenses/LICENSE-2.0
   9  *
  10  * Unless required by applicable law or agreed to in writing, software
  11  * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
  12  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  13  * See the License for the specific language governing permissions and
  14  * limitations under the License.
  15  */
  16 package com.arialyy.aria.core.download;
  17 
  18 import android.text.TextUtils;
  19 import com.arialyy.aria.core.inf.AbsTaskEntity;
  20 import com.arialyy.aria.core.manager.TEManager;
  21 import com.arialyy.aria.util.ALog;
  22 
  23 /**
  24  * Created by Aria.Lao on 2017/7/26.
  25  * ftp文件夹下载
  26  */
  27 public class FtpDirDownloadTarget
  28     extends BaseGroupTarget&lt;FtpDirDownloadTarget, DownloadGroupTaskEntity&gt; {
  29   private final String TAG = &quot;FtpDirDownloadTarget&quot;;
  30 
  31   FtpDirDownloadTarget(String url, String targetName) {
  32     mTargetName = targetName;
  33 &lt;&lt;&lt;&lt;&lt;&lt;&lt; GitAnalyzerPlus_ours
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  34     init(url);</span>
  35 ||||||| GitAnalyzerPlus_base
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  36   FtpDirDownloadTarget(String url, String targetName) {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  37     init(url);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  38     String[] pp = url.split(&quot;/&quot;)[2].split(&quot;:&quot;);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  39     mTargetName = targetName;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  40     serverIp = pp[0];</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  41     port = Integer.parseInt(pp[1]);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  42     mTaskEntity.requestType = AbsTaskEntity.FTP_DIR;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  43     mTaskEntity.serverIp = serverIp;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  44     mTaskEntity.port = port;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  45     remotePath = url.substring(url.indexOf(pp[1]) + pp[1].length(), url.length());</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  46     if (TextUtils.isEmpty(remotePath)) {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  47       throw new NullPointerException(&quot;ftp服务器地址不能为null&quot;);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  48     }</span>
  49 =======
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  50     serverIp = pp[0];</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  51     port = Integer.parseInt(pp[1]);</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  52     mTaskEntity.requestType = AbsTaskEntity.D_FTP_DIR;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  53     mTaskEntity.serverIp = serverIp;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  54     mTaskEntity.port = port;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  55     remotePath = url.substring(url.indexOf(pp[1]) + pp[1].length(), url.length());</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  56     if (TextUtils.isEmpty(remotePath)) {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  57       throw new NullPointerException(&quot;ftp服务器地址不能为null&quot;);</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  58     }</span>
  59 &gt;&gt;&gt;&gt;&gt;&gt;&gt; GitAnalyzerPlus_theirs
  60   }
  61 
  62   private void init(String key) {
  63     mGroupName = key;
  64     mTaskEntity = TEManager.getInstance().getTEntity(DownloadGroupTaskEntity.class, key);
  65     if (mTaskEntity == null) {
  66       mTaskEntity = TEManager.getInstance().createTEntity(DownloadGroupTaskEntity.class, key);
  67     }
  68     mTaskEntity.requestType = AbsTaskEntity.FTP_DIR;
  69     mEntity = mTaskEntity.entity;
  70   }
  71 
  72   /**
  73    * 设置字符编码
  74    */
  75   public FtpDirDownloadTarget charSet(String charSet) {
  76     if (TextUtils.isEmpty(charSet)) return this;
  77     mTaskEntity.charSet = charSet;
  78     return this;
  79   }
  80 
  81   /**
  82    * ftp 用户登录信息
  83    *
  84    * @param userName ftp用户名
  85    * @param password ftp用户密码
  86    */
  87   public FtpDirDownloadTarget login(String userName, String password) {
  88     return login(userName, password, null);
  89   }
  90 
  91   /**
  92    * ftp 用户登录信息
  93    *
  94    * @param userName ftp用户名
  95    * @param password ftp用户密码
  96    * @param account ftp账号
  97    */
  98   public FtpDirDownloadTarget login(String userName, String password, String account) {
  99     if (TextUtils.isEmpty(userName)) {
 100       ALog.e(TAG, &quot;用户名不能为null&quot;);
 101       return this;
 102     } else if (TextUtils.isEmpty(password)) {
 103       ALog.e(TAG, &quot;密码不能为null&quot;);
 104       return this;
 105     }
 106     mTaskEntity.urlEntity.needLogin = true;
 107     mTaskEntity.urlEntity.user = userName;
 108     mTaskEntity.urlEntity.password = password;
 109     mTaskEntity.urlEntity.account = account;
 110     return this;
 111   }
 112 }</pre></td>
                            <td><pre>   1 /*
   2  * Copyright (C) 2016 AriaLyy(https://github.com/AriaLyy/Aria)
   3  *
   4  * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
   5  * you may not use this file except in compliance with the License.
   6  * You may obtain a copy of the License at
   7  *
   8  *      http://www.apache.org/licenses/LICENSE-2.0
   9  *
  10  * Unless required by applicable law or agreed to in writing, software
  11  * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
  12  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  13  * See the License for the specific language governing permissions and
  14  * limitations under the License.
  15  */
  16 package com.arialyy.aria.core.download;
  17 
  18 import android.text.TextUtils;
  19 import com.arialyy.aria.core.inf.AbsTaskEntity;
  20 import com.arialyy.aria.core.manager.TEManager;
  21 import com.arialyy.aria.util.ALog;
  22 
  23 /**
  24  * Created by Aria.Lao on 2017/7/26.
  25  * ftp文件夹下载
  26  */
  27 public class FtpDirDownloadTarget
  28     extends BaseGroupTarget&lt;FtpDirDownloadTarget, DownloadGroupTaskEntity&gt; {
  29   private final String TAG = &quot;FtpDirDownloadTarget&quot;;
  30 
  31   FtpDirDownloadTarget(String url, String targetName) {
  32     mTargetName = targetName;
  33 &lt;&lt;&lt;&lt;&lt;&lt;&lt; MINE
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  34     init(url);</span>
  35 ||||||| BASE
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  36     String[] pp = url.split(&quot;/&quot;)[2].split(&quot;:&quot;);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  37     mTargetName = targetName;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  38     serverIp = pp[0];</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  39     port = Integer.parseInt(pp[1]);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  40     mTaskEntity.requestType = AbsTaskEntity.FTP_DIR;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  41     mTaskEntity.serverIp = serverIp;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  42     mTaskEntity.port = port;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  43     remotePath = url.substring(url.indexOf(pp[1]) + pp[1].length(), url.length());</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  44     if (TextUtils.isEmpty(remotePath)) {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  45       throw new NullPointerException(&quot;ftp服务器地址不能为null&quot;);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  46     }</span>
  47 =======
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  48     serverIp = pp[0];</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  49     port = Integer.parseInt(pp[1]);</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  50     mTaskEntity.requestType = AbsTaskEntity.D_FTP_DIR;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  51     mTaskEntity.serverIp = serverIp;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  52     mTaskEntity.port = port;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  53     remotePath = url.substring(url.indexOf(pp[1]) + pp[1].length(), url.length());</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  54     if (TextUtils.isEmpty(remotePath)) {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  55       throw new NullPointerException(&quot;ftp服务器地址不能为null&quot;);</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  56     }</span>
  57 &gt;&gt;&gt;&gt;&gt;&gt;&gt; YOURS
  58   }
  59 
  60   private void init(String key) {
  61     mGroupName = key;
  62     mTaskEntity = TEManager.getInstance().getTEntity(DownloadGroupTaskEntity.class, key);
  63     if (mTaskEntity == null) {
  64       mTaskEntity = TEManager.getInstance().createTEntity(DownloadGroupTaskEntity.class, key);
  65     }
  66     mTaskEntity.requestType = AbsTaskEntity.FTP_DIR;
  67     mEntity = mTaskEntity.entity;
  68   }
  69 
  70   /**
  71    * 设置字符编码
  72    */
  73   public FtpDirDownloadTarget charSet(String charSet) {
  74     if (TextUtils.isEmpty(charSet)) return this;
  75     mTaskEntity.charSet = charSet;
  76     return this;
  77   }
  78 
  79   /**
  80    * ftp 用户登录信息
  81    *
  82    * @param userName ftp用户名
  83    * @param password ftp用户密码
  84    */
  85   public FtpDirDownloadTarget login(String userName, String password) {
  86     return login(userName, password, null);
  87   }
  88 
  89   /**
  90    * ftp 用户登录信息
  91    *
  92    * @param userName ftp用户名
  93    * @param password ftp用户密码
  94    * @param account ftp账号
  95    */
  96   public FtpDirDownloadTarget login(String userName, String password, String account) {
  97     if (TextUtils.isEmpty(userName)) {
  98       ALog.e(TAG, &quot;用户名不能为null&quot;);
  99       return this;
 100     } else if (TextUtils.isEmpty(password)) {
 101       ALog.e(TAG, &quot;密码不能为null&quot;);
 102       return this;
 103     }
 104     mTaskEntity.urlEntity.needLogin = true;
 105     mTaskEntity.urlEntity.user = userName;
 106     mTaskEntity.urlEntity.password = password;
 107     mTaskEntity.urlEntity.account = account;
 108     return this;
 109   }
 110 }
 </pre></td>
                            <td><pre>   1 /*
   2  * Copyright (C) 2016 AriaLyy(https://github.com/AriaLyy/Aria)
   3  *
   4  * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
   5  * you may not use this file except in compliance with the License.
   6  * You may obtain a copy of the License at
   7  *
   8  *      http://www.apache.org/licenses/LICENSE-2.0
   9  *
  10  * Unless required by applicable law or agreed to in writing, software
  11  * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
  12  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  13  * See the License for the specific language governing permissions and
  14  * limitations under the License.
  15  */
  16 package com.arialyy.aria.core.download;
  17 
  18 import android.text.TextUtils;
  19 import com.arialyy.aria.core.inf.AbsTaskEntity;
  20 import com.arialyy.aria.core.manager.TEManager;
  21 import com.arialyy.aria.util.ALog;
  22 
  23 
  24 /**
  25  * Created by Aria.Lao on 2017/7/26.
  26  * ftp文件夹下载
  27  */
<abbr title="  28 public class FtpDirDownloadTarget extends BaseGroupTarget&lt;FtpDirDownloadTarget, DownloadGroupTaskEntity&gt; {">  28 public class FtpDirDownloadTarget extends BaseGroupTarget&lt;FtpDirDownloadTarget, DownloadGroupTaskEntity&gt; 🔵</abbr>
  29   private final String TAG = &quot;FtpDirDownloadTarget&quot;;
  30 
  31   FtpDirDownloadTarget(String url, String targetName) {
  32     mTargetName = targetName;
  33     init(url);
  34   }
  35 
  36   private void init(String key) {
  37     mGroupName = key;
  38     mTaskEntity = TEManager.getInstance().getTEntity(DownloadGroupTaskEntity.class, key);
  39     if (mTaskEntity == null) {
  40       .mTaskEntity = TEManager.getInstance().createTEntity(DownloadGroupTaskEntity.class, key);
  41     }
  42     mTaskEntity.requestType = AbsTaskEntity.D_FTP_DIR;
  43     mEntity = mTaskEntity.entity;
  44   }
  45 
  46   /**
  47    * 设置字符编码
  48    */
  49   public FtpDirDownloadTarget charSet(String charSet) {
  50     if (TextUtils.isEmpty(charSet)) return this;
  51     mTaskEntity.charSet = charSet;
  52     return this;
  53   }
  54 
  55   /**
  56    * ftp 用户登录信息
  57    *
  58    * @param userName ftp用户名
  59    * @param password ftp用户密码
  60    */
  61   public FtpDirDownloadTarget login(String userName, String password) {
  62     return login(userName, password, null);
  63   }
  64 
  65   /**
  66    * ftp 用户登录信息
  67    *
  68    * @param userName ftp用户名
  69    * @param password ftp用户密码
  70    * @param account ftp账号
  71    */
  72   public FtpDirDownloadTarget login(String userName, String password, String account) {
  73     if (TextUtils.isEmpty(userName)) {
  74       ALog.e(TAG, &quot;用户名不能为null&quot;);
  75       return this;
  76     } else if (TextUtils.isEmpty(password)) {
  77       ALog.e(TAG, &quot;密码不能为null&quot;);
  78       return this;
  79     }
  80     mTaskEntity.urlEntity.needLogin = true;
  81     mTaskEntity.urlEntity.user = userName;
  82     mTaskEntity.urlEntity.password = password;
  83     mTaskEntity.urlEntity.account = account;
  84     return this;
  85   }
  86 }
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 </pre></td>
                        </tr>
                    </table>
                </div>
                <div id="bottom">
                    <table style="margin:auto">
                        <tr>
                            <th>ours vs. base</th>
                            <th>theirs vs. base</th>
                        </tr>
                        <tr>
                            <td><pre>   1  /*
   2   * Copyright (C) 2016 AriaLyy(https://github.com/AriaLyy/Aria)
   3   *
   4   * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
   5   * you may not use this file except in compliance with the License.
   6   * You may obtain a copy of the License at
   7   *
   8   *      http://www.apache.org/licenses/LICENSE-2.0
   9   *
  10   * Unless required by applicable law or agreed to in writing, software
  11   * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
  12   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  13   * See the License for the specific language governing permissions and
  14   * limitations under the License.
  15   */
  16  package com.arialyy.aria.core.download;
  17  
  18  import android.text.TextUtils;
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  19 -import android.util.Log;</span>
  20  import com.arialyy.aria.core.inf.AbsTaskEntity;
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  21 -import com.arialyy.aria.orm.DbEntity;</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  22 +import com.arialyy.aria.core.manager.TEManager;</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  23 +import com.arialyy.aria.util.ALog;</span>
  24  
  25  /**
  26   * Created by Aria.Lao on 2017/7/26.
  27   * ftp文件夹下载
  28   */
  29  public class FtpDirDownloadTarget
  30      extends BaseGroupTarget&lt;FtpDirDownloadTarget, DownloadGroupTaskEntity&gt; {
  31    private final String TAG = &quot;FtpDirDownloadTarget&quot;;
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  32 -  private String serverIp, remotePath;</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  33 -  private int port;</span>
  34  
  35    FtpDirDownloadTarget(String url, String targetName) {
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  36 +    mTargetName = targetName;</span>
  37      init(url);
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  38 -    String[] pp = url.split(&quot;/&quot;)[2].split(&quot;:&quot;);</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  39 -    mTargetName = targetName;</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  40 -    serverIp = pp[0];</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  41 -    port = Integer.parseInt(pp[1]);</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  42 -    mTaskEntity.requestType = AbsTaskEntity.FTP_DIR;</span>

<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  43 -    mTaskEntity.serverIp = serverIp;</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  44 -    mTaskEntity.port = port;</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  45 -    remotePath = url.substring(url.indexOf(pp[1]) + pp[1].length(), url.length());</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  46 -    if (TextUtils.isEmpty(remotePath)) {</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  47 -      throw new NullPointerException(&quot;ftp服务器地址不能为null&quot;);</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  48 -    }</span>
  49    }
  50  
  51    private void init(String key) {
  52      mGroupName = key;
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  53 -    mTaskEntity = DbEntity.findFirst(DownloadGroupTaskEntity.class, &quot;key=?&quot;, key);</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  54 +    mTaskEntity = TEManager.getInstance().getTEntity(DownloadGroupTaskEntity.class, key);</span>
  55      if (mTaskEntity == null) {
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  56 -      mTaskEntity = new DownloadGroupTaskEntity();</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  57 -      mTaskEntity.key = key;</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  58 -      mTaskEntity.entity = getDownloadGroupEntity();</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  59 -      mTaskEntity.insert();</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  60 +      mTaskEntity = TEManager.getInstance().createTEntity(DownloadGroupTaskEntity.class, key);</span>
  61      }
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  62 -    if (mTaskEntity.entity == null) {</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  63 -      mTaskEntity.entity = getDownloadGroupEntity();</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  64 -    }</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  65 +    mTaskEntity.requestType = AbsTaskEntity.FTP_DIR;</span>
  66      mEntity = mTaskEntity.entity;
  67    }
  68  
  69    /**
  70     * 设置字符编码
  71     */
  72    public FtpDirDownloadTarget charSet(String charSet) {
  73      if (TextUtils.isEmpty(charSet)) return this;
  74      mTaskEntity.charSet = charSet;
  75      return this;
  76    }
  77  
  78    /**
  79     * ftp 用户登录信息
  80     *
  81     * @param userName ftp用户名
  82     * @param password ftp用户密码
  83     */
  84    public FtpDirDownloadTarget login(String userName, String password) {
  85      return login(userName, password, null);
  86    }
  87  
  88    /**
  89     * ftp 用户登录信息
  90     *
  91     * @param userName ftp用户名
  92     * @param password ftp用户密码
  93     * @param account ftp账号
  94     */
  95    public FtpDirDownloadTarget login(String userName, String password, String account) {
  96      if (TextUtils.isEmpty(userName)) {
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  97 -      Log.e(TAG, &quot;用户名不能为null&quot;);</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  98 +      ALog.e(TAG, &quot;用户名不能为null&quot;);</span>
  99        return this;
 100      } else if (TextUtils.isEmpty(password)) {
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 101 -      Log.e(TAG, &quot;密码不能为null&quot;);</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 102 +      ALog.e(TAG, &quot;密码不能为null&quot;);</span>
 103        return this;
 104      }
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 105 -    mTaskEntity.userName = userName;</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 106 -    mTaskEntity.userPw = password;</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 107 -    mTaskEntity.account = account;</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 108 +    mTaskEntity.urlEntity.needLogin = true;</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 109 +    mTaskEntity.urlEntity.user = userName;</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 110 +    mTaskEntity.urlEntity.password = password;</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 111 +    mTaskEntity.urlEntity.account = account;</span>
 112      return this;
 113    }
 114  }</pre></td>
                            <td><pre>   1  /*
   2   * Copyright (C) 2016 AriaLyy(https://github.com/AriaLyy/Aria)
   3   *
   4   * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
   5   * you may not use this file except in compliance with the License.
   6   * You may obtain a copy of the License at
   7   *
   8   *      http://www.apache.org/licenses/LICENSE-2.0
   9   *
  10   * Unless required by applicable law or agreed to in writing, software
  11   * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
  12   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  13   * See the License for the specific language governing permissions and
  14   * limitations under the License.
  15   */
  16  package com.arialyy.aria.core.download;
  17  
  18  import android.text.TextUtils;
  19  import android.util.Log;
  20  import com.arialyy.aria.core.inf.AbsTaskEntity;
  21  import com.arialyy.aria.orm.DbEntity;


  22  
  23  /**
  24   * Created by Aria.Lao on 2017/7/26.
  25   * ftp文件夹下载
  26   */
  27  public class FtpDirDownloadTarget
  28      extends BaseGroupTarget&lt;FtpDirDownloadTarget, DownloadGroupTaskEntity&gt; {
  29    private final String TAG = &quot;FtpDirDownloadTarget&quot;;
  30    private String serverIp, remotePath;
  31    private int port;
  32  
  33    FtpDirDownloadTarget(String url, String targetName) {

  34      init(url);
  35      String[] pp = url.split(&quot;/&quot;)[2].split(&quot;:&quot;);
  36      mTargetName = targetName;
  37      serverIp = pp[0];
  38      port = Integer.parseInt(pp[1]);
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  39 -    mTaskEntity.requestType = AbsTaskEntity.FTP_DIR;</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  40 +    mTaskEntity.requestType = AbsTaskEntity.D_FTP_DIR;</span>
  41      mTaskEntity.serverIp = serverIp;
  42      mTaskEntity.port = port;
  43      remotePath = url.substring(url.indexOf(pp[1]) + pp[1].length(), url.length());
  44      if (TextUtils.isEmpty(remotePath)) {
  45        throw new NullPointerException(&quot;ftp服务器地址不能为null&quot;);
  46      }
  47    }
  48  
  49    private void init(String key) {
  50      mGroupName = key;
  51      mTaskEntity = DbEntity.findFirst(DownloadGroupTaskEntity.class, &quot;key=?&quot;, key);

  52      if (mTaskEntity == null) {
  53        mTaskEntity = new DownloadGroupTaskEntity();
  54        mTaskEntity.key = key;
  55        mTaskEntity.entity = getDownloadGroupEntity();
  56        mTaskEntity.insert();

  57      }
  58      if (mTaskEntity.entity == null) {
  59        mTaskEntity.entity = getDownloadGroupEntity();
  60      }

  61      mEntity = mTaskEntity.entity;
  62    }
  63  
  64    /**
  65     * 设置字符编码
  66     */
  67    public FtpDirDownloadTarget charSet(String charSet) {
  68      if (TextUtils.isEmpty(charSet)) return this;
  69      mTaskEntity.charSet = charSet;
  70      return this;
  71    }
  72  
  73    /**
  74     * ftp 用户登录信息
  75     *
  76     * @param userName ftp用户名
  77     * @param password ftp用户密码
  78     */
  79    public FtpDirDownloadTarget login(String userName, String password) {
  80      return login(userName, password, null);
  81    }
  82  
  83    /**
  84     * ftp 用户登录信息
  85     *
  86     * @param userName ftp用户名
  87     * @param password ftp用户密码
  88     * @param account ftp账号
  89     */
  90    public FtpDirDownloadTarget login(String userName, String password, String account) {
  91      if (TextUtils.isEmpty(userName)) {
  92        Log.e(TAG, &quot;用户名不能为null&quot;);

  93        return this;
  94      } else if (TextUtils.isEmpty(password)) {
  95        Log.e(TAG, &quot;密码不能为null&quot;);

  96        return this;
  97      }
  98      mTaskEntity.userName = userName;
  99      mTaskEntity.userPw = password;
 100      mTaskEntity.account = account;




 101      return this;
 102    }
 103  }</pre></td>
                        </tr>
                    </table>
                </div>
              </body>
            </html>
            