<!DOCTYPE html>
<html lang="en">
          <head>
            <meta charset="utf-8">
            <title>253 chunks</title>
                <style>
                    #top {
                        height: 48vh;
                        overflow-y: auto;
                    }
                    #bottom {
                        height: 48vh;
                        overflow-y: auto;
                    }
                </style>
          </head>
          <body>
            <pre>[[{&#x27;eq&#x27;: [{&#x27;CHUNK_OURS&#x27;: &#x27;package com.example.demo;\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;import android.databinding.DataBindingUtil;\n&#x27;
                         &#x27;import android.support.v7.app.AppCompatActivity;\n&#x27;
                         &#x27;import android.os.Bundle;\n&#x27;
                         &#x27;import &#x27;
                         &#x27;android.support.v7.widget.LinearLayoutManager;\n&#x27;
                         &#x27;import &#x27;
                         &#x27;android.support.v7.widget.SimpleItemAnimator;\n&#x27;
                         &#x27;import android.text.TextUtils;\n&#x27;
                         &#x27;import android.util.Log;\n&#x27;
                         &#x27;import android.view.View;\n&#x27;
                         &#x27;import android.widget.Button;\n&#x27;
                         &#x27;import android.widget.Toast;\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;import com.effective.R;\n&#x27;
                         &#x27;import &#x27;
                         &#x27;com.effective.android.panel.PanelSwitchHelper;\n&#x27;
                         &#x27;import &#x27;
                         &#x27;com.effective.android.panel.interfaces.listener.OnEditFocusChangeListener;\n&#x27;
                         &#x27;import &#x27;
                         &#x27;com.effective.android.panel.interfaces.listener.OnKeyboardStateListener;\n&#x27;
                         &#x27;import &#x27;
                         &#x27;com.effective.android.panel.interfaces.listener.OnPanelChangeListener;\n&#x27;
                         &#x27;import &#x27;
                         &#x27;com.effective.android.panel.interfaces.listener.OnViewClickListener;\n&#x27;
                         &#x27;import com.effective.android.panel.view.PanelView;\n&#x27;
                         &#x27;import &#x27;
                         &#x27;com.effective.databinding.ActivityChatLayoutBinding;\n&#x27;
                         &#x27;import com.example.demo.chat.ChatAdapter;\n&#x27;
                         &#x27;import com.example.demo.chat.ChatInfo;\n&#x27;
                         &#x27;import com.example.demo.emotion.EmotionPagerView;\n&#x27;
                         &#x27;import com.example.demo.emotion.Emotions;\n&#x27;
                         &#x27;import com.rd.PageIndicatorView;\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;import java.util.ArrayList;\n&#x27;
                         &#x27;import java.util.List;\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;/**\n&#x27;
                         &#x27; * Created by yummyLau on 18-7-11\n&#x27;
                         &#x27; * Email: yummyl.lau@gmail.com\n&#x27;
                         &#x27; * blog: yummylau.com\n&#x27;
                         &#x27; */\n&#x27;
                         &#x27;public class ChatSampleActivity extends &#x27;
                         &#x27;AppCompatActivity {\n&#x27;
                         &#x27;    private ActivityChatLayoutBinding mBinding;\n&#x27;
                         &#x27;    private PanelSwitchHelper mHelper;\n&#x27;
                         &#x27;    private ChatAdapter mAdapter;\n&#x27;
                         &#x27;    private LinearLayoutManager &#x27;
                         &#x27;mLinearLayoutManager;\n&#x27;
                         &#x27;    private Runnable mScrollToBottomRunnable;\n&#x27;
                         &#x27;    private static final String TAG = &#x27;
                         &#x27;&quot;ChatSampleActivity&quot;;\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;    @Override\n&#x27;
                         &#x27;    protected void onCreate(Bundle &#x27;
                         &#x27;savedInstanceState) {\n&#x27;
                         &#x27;        super.onCreate(savedInstanceState);\n&#x27;
                         &#x27;        mBinding = &#x27;
                         &#x27;DataBindingUtil.setContentView(this, &#x27;
                         &#x27;R.layout.activity_chat_layout);\n&#x27;
                         &#x27;        int type = &#x27;
                         &#x27;getIntent().getIntExtra(Constants.KEY_PAGE_TYPE, &#x27;
                         &#x27;PageType.DEFAULT);\n&#x27;
                         &#x27;        &#x27;
                         &#x27;//这里只是demo提前隐藏标题栏，如果应用自己实现了标题栏或者通过自定义view开发标题栏，根据业务隐藏或者设置透明色就可以了，随便扩展\n&#x27;
                         &#x27;        if(type == &#x27;
                         &#x27;PageType.TRANSPARENT_STATUS_BAR){\n&#x27;
                         &#x27;            &#x27;
                         &#x27;supportRequestWindowFeature(Window.FEATURE_NO_TITLE);\n&#x27;
                         &#x27;        }\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;        mBinding = &#x27;
                         &#x27;DataBindingUtil.setContentView(this, &#x27;
                         &#x27;R.layout.common_chat_layout);\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;        switch (type) {\n&#x27;
                         &#x27;            case PageType.COLOR_STATUS_BAR: {\n&#x27;
                         &#x27;                &#x27;
                         &#x27;StatusbarHelper.setStatusBarColor(this, &#x27;
                         &#x27;ContextCompat.getColor(this, &#x27;
                         &#x27;R.color.colorPrimary));\n&#x27;
                         &#x27;                //可以在代码设置，也可以在xml设置\n&#x27;
                         &#x27;                &#x27;
                         &#x27;mBinding.getRoot().setFitsSystemWindows(true);\n&#x27;
                         &#x27;                &#x27;
                         &#x27;mBinding.getRoot().setBackgroundColor(ContextCompat.getColor(this, &#x27;
                         &#x27;R.color.common_page_bg_color));\n&#x27;
                         &#x27;                break;\n&#x27;
                         &#x27;            }\n&#x27;
                         &#x27;            case PageType.TRANSPARENT_STATUS_BAR: {\n&#x27;
                         &#x27;                &#x27;
                         &#x27;StatusbarHelper.setStatusBarColor(this, &#x27;
                         &#x27;Color.TRANSPARENT);\n&#x27;
                         &#x27;                &#x27;
                         &#x27;mBinding.getRoot().setFitsSystemWindows(true);\n&#x27;
                         &#x27;                &#x27;
                         &#x27;mBinding.getRoot().setBackgroundResource(R.drawable.bg_gradient);\n&#x27;
                         &#x27;                &#x27;
                         &#x27;mBinding.panelContainer.setBackgroundColor(ContextCompat.getColor(this, &#x27;
                         &#x27;R.color.common_page_bg_color));\n&#x27;
                         &#x27;                break;\n&#x27;
                         &#x27;            }\n&#x27;
                         &#x27;            default: {\n&#x27;
                         &#x27;                &#x27;
                         &#x27;mBinding.getRoot().setBackgroundColor(ContextCompat.getColor(this, &#x27;
                         &#x27;R.color.common_page_bg_color));\n&#x27;
                         &#x27;            }\n&#x27;
                         &#x27;        }\n&#x27;
                         &#x27;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Stashed &#x27;
                         &#x27;changes:app/src/main/java/com/example/demo/ChatActivity.java\n&#x27;
                         &#x27;        initView();\n&#x27;
                         &#x27;    }\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;    private void initView() {\n&#x27;
                         &#x27;        mLinearLayoutManager = new &#x27;
                         &#x27;LinearLayoutManager(this);\n&#x27;
                         &#x27;        &#x27;
                         &#x27;mBinding.recyclerView.setLayoutManager(mLinearLayoutManager);\n&#x27;
                         &#x27;        ((SimpleItemAnimator) &#x27;
                         &#x27;mBinding.recyclerView.getItemAnimator()).setSupportsChangeAnimations(false);\n&#x27;
                         &#x27;        List&lt;ChatInfo&gt; chatInfos = new &#x27;
                         &#x27;ArrayList&lt;&gt;();\n&#x27;
                         &#x27;        for(int i = 0; i &lt; 50; i++){\n&#x27;
                         &#x27;            chatInfos.add(ChatInfo.CREATE(&quot;模拟数据第&quot; + &#x27;
                         &#x27;(i+1) + &quot;条&quot;));\n&#x27;
                         &#x27;        }\n&#x27;
                         &#x27;        mAdapter = new ChatAdapter(this,chatInfos);\n&#x27;
                         &#x27;        mBinding.recyclerView.setAdapter(mAdapter);\n&#x27;
                         &#x27;        mBinding.send.setOnClickListener(new &#x27;
                         &#x27;View.OnClickListener() {\n&#x27;
                         &#x27;            @Override\n&#x27;
                         &#x27;            public void onClick(View v) {\n&#x27;
                         &#x27;                String content = &#x27;
                         &#x27;mBinding.editText.getText().toString();\n&#x27;
                         &#x27;                if (TextUtils.isEmpty(content)) {\n&#x27;
                         &#x27;                    &#x27;
                         &#x27;Toast.makeText(ChatSampleActivity.this, &quot;当前没有输入&quot;, &#x27;
                         &#x27;Toast.LENGTH_SHORT).show();\n&#x27;
                         &#x27;                    return;\n&#x27;
                         &#x27;                }\n&#x27;
                         &#x27;                &#x27;
                         &#x27;mAdapter.insertInfo(ChatInfo.CREATE(content));\n&#x27;
                         &#x27;                mBinding.editText.setText(null);\n&#x27;
                         &#x27;                scrollToBottom();\n&#x27;
                         &#x27;            }\n&#x27;
                         &#x27;        });\n&#x27;
                         &#x27;        mScrollToBottomRunnable = new Runnable() {\n&#x27;
                         &#x27;            @Override\n&#x27;
                         &#x27;            public void run() {\n&#x27;
                         &#x27;                if (mAdapter.getItemCount() &gt; 0) {\n&#x27;
                         &#x27;                    &#x27;
                         &#x27;mLinearLayoutManager.scrollToPosition(mAdapter.getItemCount() &#x27;
                         &#x27;- 1);\n&#x27;
                         &#x27;                }\n&#x27;
                         &#x27;            }\n&#x27;
                         &#x27;        };\n&#x27;
                         &#x27;    }\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;    private void scrollToBottom() {\n&#x27;
                         &#x27;        &#x27;
                         &#x27;mBinding.recyclerView.postDelayed(mScrollToBottomRunnable, &#x27;
                         &#x27;0);\n&#x27;
                         &#x27;    }\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;    @Override\n&#x27;
                         &#x27;    protected void onStart() {\n&#x27;
                         &#x27;        super.onStart();\n&#x27;
                         &#x27;        if (mHelper == null) {\n&#x27;
                         &#x27;            mHelper = new &#x27;
                         &#x27;PanelSwitchHelper.Builder(this)\n&#x27;
                         &#x27;                    &#x27;
                         &#x27;.bindPanelSwitchLayout(R.id.panel_switch_layout)\n&#x27;
                         &#x27;                    &#x27;
                         &#x27;.bindPanelContainerId(R.id.panel_container)\n&#x27;
                         &#x27;                    &#x27;
                         &#x27;.bindContentContainerId(R.id.content_view)\n&#x27;
                         &#x27;                    //可选\n&#x27;
                         &#x27;                    .addKeyboardStateListener(new &#x27;
                         &#x27;OnKeyboardStateListener() {\n&#x27;
                         &#x27;                        @Override\n&#x27;
                         &#x27;                        public void &#x27;
                         &#x27;onKeyboardChange(boolean visible) {\n&#x27;
                         &#x27;                            if(visible){\n&#x27;
                         &#x27;                                scrollToBottom();\n&#x27;
                         &#x27;                            }\n&#x27;
                         &#x27;                            Log.d(TAG, &quot;系统键盘是否可见 : &quot; &#x27;
                         &#x27;+ visible);\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;                        }\n&#x27;
                         &#x27;                    })\n&#x27;
                         &#x27;                    //可选\n&#x27;
                         &#x27;                    &#x27;
                         &#x27;.addEdittextFocesChangeListener(new &#x27;
                         &#x27;OnEditFocusChangeListener() {\n&#x27;
                         &#x27;                        @Override\n&#x27;
                         &#x27;                        public void &#x27;
                         &#x27;onFocusChange(View view, boolean hasFocus) {\n&#x27;
                         &#x27;                            Log.d(TAG, &quot;输入框是否获得焦点 : &#x27;
                         &#x27;&quot; + hasFocus);\n&#x27;
                         &#x27;                        }\n&#x27;
                         &#x27;                    })\n&#x27;
                         &#x27;                    //可选\n&#x27;
                         &#x27;                    .addViewClickListener(new &#x27;
                         &#x27;OnViewClickListener() {\n&#x27;
                         &#x27;                        @Override\n&#x27;
                         &#x27;                        public void onViewClick(View &#x27;
                         &#x27;view) {\n&#x27;
                         &#x27;                            if(view.getId() != &#x27;
                         &#x27;R.id.empty_view){\n&#x27;
                         &#x27;                                scrollToBottom();\n&#x27;
                         &#x27;                            }\n&#x27;
                         &#x27;                            Log.d(TAG, &quot;点击了View : &quot; &#x27;
                         &#x27;+ view);\n&#x27;
                         &#x27;                        }\n&#x27;
                         &#x27;                    })\n&#x27;
                         &#x27;                    //可选\n&#x27;
                         &#x27;                    .addPanelChangeListener(new &#x27;
                         &#x27;OnPanelChangeListener() {\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;                        @Override\n&#x27;
                         &#x27;                        public void onKeyboard() {\n&#x27;
                         &#x27;                            Log.d(TAG, &quot;唤起系统输入法&quot;);\n&#x27;
                         &#x27;                            &#x27;
                         &#x27;mBinding.emotionBtn.setSelected(false);\n&#x27;
                         &#x27;                        }\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;                        @Override\n&#x27;
                         &#x27;                        public void onNone() {\n&#x27;
                         &#x27;                            Log.d(TAG, &quot;隐藏所有面板&quot;);\n&#x27;
                         &#x27;                            &#x27;
                         &#x27;mBinding.emotionBtn.setSelected(false);\n&#x27;
                         &#x27;                        }\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;                        @Override\n&#x27;
                         &#x27;                        public void &#x27;
                         &#x27;onPanel(PanelView view) {\n&#x27;
                         &#x27;                            Log.d(TAG, &quot;唤起面板 : &quot; + &#x27;
                         &#x27;view);\n&#x27;
                         &#x27;                            &#x27;
                         &#x27;mBinding.emotionBtn.setSelected(view.getId() == &#x27;
                         &#x27;R.id.panel_emotion ? true : false);\n&#x27;
                         &#x27;                        }\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;                        @Override\n&#x27;
                         &#x27;                        public void &#x27;
                         &#x27;onPanelSizeChange(PanelView panelView, boolean &#x27;
                         &#x27;portrait, int oldWidth, int oldHeight, int width, &#x27;
                         &#x27;int height) {\n&#x27;
                         &#x27;                            switch &#x27;
                         &#x27;(panelView.getId()) {\n&#x27;
                         &#x27;                                case &#x27;
                         &#x27;R.id.panel_emotion: {\n&#x27;
                         &#x27;                                    EmotionPagerView &#x27;
                         &#x27;pagerView = &#x27;
                         &#x27;mBinding.getRoot().findViewById(R.id.view_pager);\n&#x27;
                         &#x27;                                    int &#x27;
                         &#x27;viewPagerSize = height - &#x27;
                         &#x27;Utils.dip2px(ChatSampleActivity.this, 30f);\n&#x27;
                         &#x27;                                    &#x27;
                         &#x27;pagerView.buildEmotionViews(\n&#x27;
                         &#x27;                                            &#x27;
                         &#x27;(PageIndicatorView) &#x27;
                         &#x27;mBinding.getRoot().findViewById(R.id.pageIndicatorView),\n&#x27;
                         &#x27;                                            &#x27;
                         &#x27;mBinding.editText,\n&#x27;
                         &#x27;                                            &#x27;
                         &#x27;Emotions.getEmotions(), width, viewPagerSize);\n&#x27;
                         &#x27;                                    break;\n&#x27;
                         &#x27;                                }\n&#x27;
                         &#x27;                                case &#x27;
                         &#x27;R.id.panel_addition: {\n&#x27;
                         &#x27;                                    //auto &#x27;
                         &#x27;center,nothing to do\n&#x27;
                         &#x27;                                    break;\n&#x27;
                         &#x27;                                }\n&#x27;
                         &#x27;                            }\n&#x27;
                         &#x27;                        }\n&#x27;
                         &#x27;                    })\n&#x27;
                         &#x27;                    .logTrack(true)             &#x27;
                         &#x27;//output log\n&#x27;
                         &#x27;                    .build();\n&#x27;
                         &#x27;        }\n&#x27;
                         &#x27;    }\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;    @Override\n&#x27;
                         &#x27;    public void onBackPressed() {\n&#x27;
                         &#x27;        if (mHelper != null &amp;&amp; &#x27;
                         &#x27;mHelper.hookSystemBackForHindPanel()) {\n&#x27;
                         &#x27;            return;\n&#x27;
                         &#x27;        }\n&#x27;
                         &#x27;        super.onBackPressed();\n&#x27;
                         &#x27;    }\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;    @Override\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;    protected void onDestroy() {\n&#x27;
                         &#x27;        super.onDestroy();\n&#x27;
                         &#x27;        if (mHelper != null) {\n&#x27;
                         &#x27;            mHelper.onDestroy();\n&#x27;
                         &#x27;        }\n&#x27;
                         &#x27;//        &#x27;
                         &#x27;mBinding.recyclerView.removeCallbacks(mScrollToBottomRunnable);\n&#x27;
                         &#x27;    }\n&#x27;
                         &#x27;}\n&#x27;,
           &#x27;CHUNK_THEIRS&#x27;: &#x27;&#x27;},
          {&#x27;CHUNK_OURS&#x27;: &#x27;package com.example.demo;\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;import android.databinding.DataBindingUtil;\n&#x27;
                         &#x27;import android.support.v7.app.AppCompatActivity;\n&#x27;
                         &#x27;import android.os.Bundle;\n&#x27;
                         &#x27;import &#x27;
                         &#x27;android.support.v7.widget.LinearLayoutManager;\n&#x27;
                         &#x27;import &#x27;
                         &#x27;android.support.v7.widget.SimpleItemAnimator;\n&#x27;
                         &#x27;import android.text.TextUtils;\n&#x27;
                         &#x27;import android.util.Log;\n&#x27;
                         &#x27;import android.view.View;\n&#x27;
                         &#x27;import android.widget.Button;\n&#x27;
                         &#x27;import android.widget.Toast;\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;import com.effective.R;\n&#x27;
                         &#x27;import &#x27;
                         &#x27;com.effective.android.panel.PanelSwitchHelper;\n&#x27;
                         &#x27;import &#x27;
                         &#x27;com.effective.android.panel.interfaces.listener.OnEditFocusChangeListener;\n&#x27;
                         &#x27;import &#x27;
                         &#x27;com.effective.android.panel.interfaces.listener.OnKeyboardStateListener;\n&#x27;
                         &#x27;import &#x27;
                         &#x27;com.effective.android.panel.interfaces.listener.OnPanelChangeListener;\n&#x27;
                         &#x27;import &#x27;
                         &#x27;com.effective.android.panel.interfaces.listener.OnViewClickListener;\n&#x27;
                         &#x27;import com.effective.android.panel.view.PanelView;\n&#x27;
                         &#x27;import &#x27;
                         &#x27;com.effective.databinding.ActivityChatLayoutBinding;\n&#x27;
                         &#x27;import com.example.demo.chat.ChatAdapter;\n&#x27;
                         &#x27;import com.example.demo.chat.ChatInfo;\n&#x27;
                         &#x27;import com.example.demo.emotion.EmotionPagerView;\n&#x27;
                         &#x27;import com.example.demo.emotion.Emotions;\n&#x27;
                         &#x27;import com.rd.PageIndicatorView;\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;import java.util.ArrayList;\n&#x27;
                         &#x27;import java.util.List;\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;/**\n&#x27;
                         &#x27; * Created by yummyLau on 18-7-11\n&#x27;
                         &#x27; * Email: yummyl.lau@gmail.com\n&#x27;
                         &#x27; * blog: yummylau.com\n&#x27;
                         &#x27; */\n&#x27;
                         &#x27;public class ChatSampleActivity extends &#x27;
                         &#x27;AppCompatActivity {\n&#x27;
                         &#x27;    private ActivityChatLayoutBinding mBinding;\n&#x27;
                         &#x27;    private PanelSwitchHelper mHelper;\n&#x27;
                         &#x27;    private ChatAdapter mAdapter;\n&#x27;
                         &#x27;    private LinearLayoutManager &#x27;
                         &#x27;mLinearLayoutManager;\n&#x27;
                         &#x27;    private Runnable mScrollToBottomRunnable;\n&#x27;
                         &#x27;    private static final String TAG = &#x27;
                         &#x27;&quot;ChatSampleActivity&quot;;\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;    @Override\n&#x27;
                         &#x27;    protected void onCreate(Bundle &#x27;
                         &#x27;savedInstanceState) {\n&#x27;
                         &#x27;        super.onCreate(savedInstanceState);\n&#x27;
                         &#x27;        mBinding = &#x27;
                         &#x27;DataBindingUtil.setContentView(this, &#x27;
                         &#x27;R.layout.activity_chat_layout);\n&#x27;
                         &#x27;        int type = &#x27;
                         &#x27;getIntent().getIntExtra(Constants.KEY_PAGE_TYPE, &#x27;
                         &#x27;PageType.DEFAULT);\n&#x27;
                         &#x27;        &#x27;
                         &#x27;//这里只是demo提前隐藏标题栏，如果应用自己实现了标题栏或者通过自定义view开发标题栏，根据业务隐藏或者设置透明色就可以了，随便扩展\n&#x27;
                         &#x27;        if(type == &#x27;
                         &#x27;PageType.TRANSPARENT_STATUS_BAR){\n&#x27;
                         &#x27;            &#x27;
                         &#x27;supportRequestWindowFeature(Window.FEATURE_NO_TITLE);\n&#x27;
                         &#x27;        }\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;        mBinding = &#x27;
                         &#x27;DataBindingUtil.setContentView(this, &#x27;
                         &#x27;R.layout.common_chat_layout);\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;        switch (type) {\n&#x27;
                         &#x27;            case PageType.COLOR_STATUS_BAR: {\n&#x27;
                         &#x27;                &#x27;
                         &#x27;StatusbarHelper.setStatusBarColor(this, &#x27;
                         &#x27;ContextCompat.getColor(this, &#x27;
                         &#x27;R.color.colorPrimary));\n&#x27;
                         &#x27;                //可以在代码设置，也可以在xml设置\n&#x27;
                         &#x27;                &#x27;
                         &#x27;mBinding.getRoot().setFitsSystemWindows(true);\n&#x27;
                         &#x27;                &#x27;
                         &#x27;mBinding.getRoot().setBackgroundColor(ContextCompat.getColor(this, &#x27;
                         &#x27;R.color.common_page_bg_color));\n&#x27;
                         &#x27;                break;\n&#x27;
                         &#x27;            }\n&#x27;
                         &#x27;            case PageType.TRANSPARENT_STATUS_BAR: {\n&#x27;
                         &#x27;                &#x27;
                         &#x27;StatusbarHelper.setStatusBarColor(this, &#x27;
                         &#x27;Color.TRANSPARENT);\n&#x27;
                         &#x27;                &#x27;
                         &#x27;mBinding.getRoot().setFitsSystemWindows(true);\n&#x27;
                         &#x27;                &#x27;
                         &#x27;mBinding.getRoot().setBackgroundResource(R.drawable.bg_gradient);\n&#x27;
                         &#x27;                &#x27;
                         &#x27;mBinding.panelContainer.setBackgroundColor(ContextCompat.getColor(this, &#x27;
                         &#x27;R.color.common_page_bg_color));\n&#x27;
                         &#x27;                break;\n&#x27;
                         &#x27;            }\n&#x27;
                         &#x27;            default: {\n&#x27;
                         &#x27;                &#x27;
                         &#x27;mBinding.getRoot().setBackgroundColor(ContextCompat.getColor(this, &#x27;
                         &#x27;R.color.common_page_bg_color));\n&#x27;
                         &#x27;            }\n&#x27;
                         &#x27;        }\n&#x27;
                         &#x27;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Stashed &#x27;
                         &#x27;changes:app/src/main/java/com/example/demo/ChatActivity.java\n&#x27;
                         &#x27;        initView();\n&#x27;
                         &#x27;    }\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;    private void initView() {\n&#x27;
                         &#x27;        mLinearLayoutManager = new &#x27;
                         &#x27;LinearLayoutManager(this);\n&#x27;
                         &#x27;        &#x27;
                         &#x27;mBinding.recyclerView.setLayoutManager(mLinearLayoutManager);\n&#x27;
                         &#x27;        ((SimpleItemAnimator) &#x27;
                         &#x27;mBinding.recyclerView.getItemAnimator()).setSupportsChangeAnimations(false);\n&#x27;
                         &#x27;        List&lt;ChatInfo&gt; chatInfos = new &#x27;
                         &#x27;ArrayList&lt;&gt;();\n&#x27;
                         &#x27;        for(int i = 0; i &lt; 50; i++){\n&#x27;
                         &#x27;            chatInfos.add(ChatInfo.CREATE(&quot;模拟数据第&quot; + &#x27;
                         &#x27;(i+1) + &quot;条&quot;));\n&#x27;
                         &#x27;        }\n&#x27;
                         &#x27;        mAdapter = new ChatAdapter(this,chatInfos);\n&#x27;
                         &#x27;        mBinding.recyclerView.setAdapter(mAdapter);\n&#x27;
                         &#x27;        mBinding.send.setOnClickListener(new &#x27;
                         &#x27;View.OnClickListener() {\n&#x27;
                         &#x27;            @Override\n&#x27;
                         &#x27;            public void onClick(View v) {\n&#x27;
                         &#x27;                String content = &#x27;
                         &#x27;mBinding.editText.getText().toString();\n&#x27;
                         &#x27;                if (TextUtils.isEmpty(content)) {\n&#x27;
                         &#x27;                    &#x27;
                         &#x27;Toast.makeText(ChatSampleActivity.this, &quot;当前没有输入&quot;, &#x27;
                         &#x27;Toast.LENGTH_SHORT).show();\n&#x27;
                         &#x27;                    return;\n&#x27;
                         &#x27;                }\n&#x27;
                         &#x27;                &#x27;
                         &#x27;mAdapter.insertInfo(ChatInfo.CREATE(content));\n&#x27;
                         &#x27;                mBinding.editText.setText(null);\n&#x27;
                         &#x27;                scrollToBottom();\n&#x27;
                         &#x27;            }\n&#x27;
                         &#x27;        });\n&#x27;
                         &#x27;        mScrollToBottomRunnable = new Runnable() {\n&#x27;
                         &#x27;            @Override\n&#x27;
                         &#x27;            public void run() {\n&#x27;
                         &#x27;                if (mAdapter.getItemCount() &gt; 0) {\n&#x27;
                         &#x27;                    &#x27;
                         &#x27;mLinearLayoutManager.scrollToPosition(mAdapter.getItemCount() &#x27;
                         &#x27;- 1);\n&#x27;
                         &#x27;                }\n&#x27;
                         &#x27;            }\n&#x27;
                         &#x27;        };\n&#x27;
                         &#x27;    }\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;    private void scrollToBottom() {\n&#x27;
                         &#x27;        &#x27;
                         &#x27;mBinding.recyclerView.postDelayed(mScrollToBottomRunnable, &#x27;
                         &#x27;0);\n&#x27;
                         &#x27;    }\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;    @Override\n&#x27;
                         &#x27;    protected void onStart() {\n&#x27;
                         &#x27;        super.onStart();\n&#x27;
                         &#x27;        if (mHelper == null) {\n&#x27;
                         &#x27;            mHelper = new &#x27;
                         &#x27;PanelSwitchHelper.Builder(this)\n&#x27;
                         &#x27;                    &#x27;
                         &#x27;.bindPanelSwitchLayout(R.id.panel_switch_layout)\n&#x27;
                         &#x27;                    &#x27;
                         &#x27;.bindPanelContainerId(R.id.panel_container)\n&#x27;
                         &#x27;                    &#x27;
                         &#x27;.bindContentContainerId(R.id.content_view)\n&#x27;
                         &#x27;                    //可选\n&#x27;
                         &#x27;                    .addKeyboardStateListener(new &#x27;
                         &#x27;OnKeyboardStateListener() {\n&#x27;
                         &#x27;                        @Override\n&#x27;
                         &#x27;                        public void &#x27;
                         &#x27;onKeyboardChange(boolean visible) {\n&#x27;
                         &#x27;                            if(visible){\n&#x27;
                         &#x27;                                scrollToBottom();\n&#x27;
                         &#x27;                            }\n&#x27;
                         &#x27;                            Log.d(TAG, &quot;系统键盘是否可见 : &quot; &#x27;
                         &#x27;+ visible);\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;                        }\n&#x27;
                         &#x27;                    })\n&#x27;
                         &#x27;                    //可选\n&#x27;
                         &#x27;                    &#x27;
                         &#x27;.addEdittextFocesChangeListener(new &#x27;
                         &#x27;OnEditFocusChangeListener() {\n&#x27;
                         &#x27;                        @Override\n&#x27;
                         &#x27;                        public void &#x27;
                         &#x27;onFocusChange(View view, boolean hasFocus) {\n&#x27;
                         &#x27;                            Log.d(TAG, &quot;输入框是否获得焦点 : &#x27;
                         &#x27;&quot; + hasFocus);\n&#x27;
                         &#x27;                        }\n&#x27;
                         &#x27;                    })\n&#x27;
                         &#x27;                    //可选\n&#x27;
                         &#x27;                    .addViewClickListener(new &#x27;
                         &#x27;OnViewClickListener() {\n&#x27;
                         &#x27;                        @Override\n&#x27;
                         &#x27;                        public void onViewClick(View &#x27;
                         &#x27;view) {\n&#x27;
                         &#x27;                            if(view.getId() != &#x27;
                         &#x27;R.id.empty_view){\n&#x27;
                         &#x27;                                scrollToBottom();\n&#x27;
                         &#x27;                            }\n&#x27;
                         &#x27;                            Log.d(TAG, &quot;点击了View : &quot; &#x27;
                         &#x27;+ view);\n&#x27;
                         &#x27;                        }\n&#x27;
                         &#x27;                    })\n&#x27;
                         &#x27;                    //可选\n&#x27;
                         &#x27;                    .addPanelChangeListener(new &#x27;
                         &#x27;OnPanelChangeListener() {\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;                        @Override\n&#x27;
                         &#x27;                        public void onKeyboard() {\n&#x27;
                         &#x27;                            Log.d(TAG, &quot;唤起系统输入法&quot;);\n&#x27;
                         &#x27;                            &#x27;
                         &#x27;mBinding.emotionBtn.setSelected(false);\n&#x27;
                         &#x27;                        }\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;                        @Override\n&#x27;
                         &#x27;                        public void onNone() {\n&#x27;
                         &#x27;                            Log.d(TAG, &quot;隐藏所有面板&quot;);\n&#x27;
                         &#x27;                            &#x27;
                         &#x27;mBinding.emotionBtn.setSelected(false);\n&#x27;
                         &#x27;                        }\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;                        @Override\n&#x27;
                         &#x27;                        public void &#x27;
                         &#x27;onPanel(PanelView view) {\n&#x27;
                         &#x27;                            Log.d(TAG, &quot;唤起面板 : &quot; + &#x27;
                         &#x27;view);\n&#x27;
                         &#x27;                            &#x27;
                         &#x27;mBinding.emotionBtn.setSelected(view.getId() == &#x27;
                         &#x27;R.id.panel_emotion ? true : false);\n&#x27;
                         &#x27;                        }\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;                        @Override\n&#x27;
                         &#x27;                        public void &#x27;
                         &#x27;onPanelSizeChange(PanelView panelView, boolean &#x27;
                         &#x27;portrait, int oldWidth, int oldHeight, int width, &#x27;
                         &#x27;int height) {\n&#x27;
                         &#x27;                            switch &#x27;
                         &#x27;(panelView.getId()) {\n&#x27;
                         &#x27;                                case &#x27;
                         &#x27;R.id.panel_emotion: {\n&#x27;
                         &#x27;                                    EmotionPagerView &#x27;
                         &#x27;pagerView = &#x27;
                         &#x27;mBinding.getRoot().findViewById(R.id.view_pager);\n&#x27;
                         &#x27;                                    int &#x27;
                         &#x27;viewPagerSize = height - &#x27;
                         &#x27;Utils.dip2px(ChatSampleActivity.this, 30f);\n&#x27;
                         &#x27;                                    &#x27;
                         &#x27;pagerView.buildEmotionViews(\n&#x27;
                         &#x27;                                            &#x27;
                         &#x27;(PageIndicatorView) &#x27;
                         &#x27;mBinding.getRoot().findViewById(R.id.pageIndicatorView),\n&#x27;
                         &#x27;                                            &#x27;
                         &#x27;mBinding.editText,\n&#x27;
                         &#x27;                                            &#x27;
                         &#x27;Emotions.getEmotions(), width, viewPagerSize);\n&#x27;
                         &#x27;                                    break;\n&#x27;
                         &#x27;                                }\n&#x27;
                         &#x27;                                case &#x27;
                         &#x27;R.id.panel_addition: {\n&#x27;
                         &#x27;                                    //auto &#x27;
                         &#x27;center,nothing to do\n&#x27;
                         &#x27;                                    break;\n&#x27;
                         &#x27;                                }\n&#x27;
                         &#x27;                            }\n&#x27;
                         &#x27;                        }\n&#x27;
                         &#x27;                    })\n&#x27;
                         &#x27;                    .logTrack(true)             &#x27;
                         &#x27;//output log\n&#x27;
                         &#x27;                    .build();\n&#x27;
                         &#x27;        }\n&#x27;
                         &#x27;    }\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;    @Override\n&#x27;
                         &#x27;    public void onBackPressed() {\n&#x27;
                         &#x27;        if (mHelper != null &amp;&amp; &#x27;
                         &#x27;mHelper.hookSystemBackForHindPanel()) {\n&#x27;
                         &#x27;            return;\n&#x27;
                         &#x27;        }\n&#x27;
                         &#x27;        super.onBackPressed();\n&#x27;
                         &#x27;    }\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;    @Override\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;    protected void onDestroy() {\n&#x27;
                         &#x27;        super.onDestroy();\n&#x27;
                         &#x27;        if (mHelper != null) {\n&#x27;
                         &#x27;            mHelper.onDestroy();\n&#x27;
                         &#x27;        }\n&#x27;
                         &#x27;//        &#x27;
                         &#x27;mBinding.recyclerView.removeCallbacks(mScrollToBottomRunnable);\n&#x27;
                         &#x27;    }\n&#x27;
                         &#x27;}\n&#x27;,
           &#x27;CHUNK_THEIRS&#x27;: &#x27;&#x27;},
          {&#x27;CHUNK_OURS&#x27;: &#x27;package com.example.demo;\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;import android.databinding.DataBindingUtil;\n&#x27;
                         &#x27;import android.support.v7.app.AppCompatActivity;\n&#x27;
                         &#x27;import android.os.Bundle;\n&#x27;
                         &#x27;import &#x27;
                         &#x27;android.support.v7.widget.LinearLayoutManager;\n&#x27;
                         &#x27;import &#x27;
                         &#x27;android.support.v7.widget.SimpleItemAnimator;\n&#x27;
                         &#x27;import android.text.TextUtils;\n&#x27;
                         &#x27;import android.util.Log;\n&#x27;
                         &#x27;import android.view.View;\n&#x27;
                         &#x27;import android.widget.Button;\n&#x27;
                         &#x27;import android.widget.Toast;\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;import com.effective.R;\n&#x27;
                         &#x27;import &#x27;
                         &#x27;com.effective.android.panel.PanelSwitchHelper;\n&#x27;
                         &#x27;import &#x27;
                         &#x27;com.effective.android.panel.interfaces.listener.OnEditFocusChangeListener;\n&#x27;
                         &#x27;import &#x27;
                         &#x27;com.effective.android.panel.interfaces.listener.OnKeyboardStateListener;\n&#x27;
                         &#x27;import &#x27;
                         &#x27;com.effective.android.panel.interfaces.listener.OnPanelChangeListener;\n&#x27;
                         &#x27;import &#x27;
                         &#x27;com.effective.android.panel.interfaces.listener.OnViewClickListener;\n&#x27;
                         &#x27;import com.effective.android.panel.view.PanelView;\n&#x27;
                         &#x27;import &#x27;
                         &#x27;com.effective.databinding.ActivityChatLayoutBinding;\n&#x27;
                         &#x27;import com.example.demo.chat.ChatAdapter;\n&#x27;
                         &#x27;import com.example.demo.chat.ChatInfo;\n&#x27;
                         &#x27;import com.example.demo.emotion.EmotionPagerView;\n&#x27;
                         &#x27;import com.example.demo.emotion.Emotions;\n&#x27;
                         &#x27;import com.rd.PageIndicatorView;\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;import java.util.ArrayList;\n&#x27;
                         &#x27;import java.util.List;\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;/**\n&#x27;
                         &#x27; * Created by yummyLau on 18-7-11\n&#x27;
                         &#x27; * Email: yummyl.lau@gmail.com\n&#x27;
                         &#x27; * blog: yummylau.com\n&#x27;
                         &#x27; */\n&#x27;
                         &#x27;public class ChatSampleActivity extends &#x27;
                         &#x27;AppCompatActivity {\n&#x27;
                         &#x27;    private ActivityChatLayoutBinding mBinding;\n&#x27;
                         &#x27;    private PanelSwitchHelper mHelper;\n&#x27;
                         &#x27;    private ChatAdapter mAdapter;\n&#x27;
                         &#x27;    private LinearLayoutManager &#x27;
                         &#x27;mLinearLayoutManager;\n&#x27;
                         &#x27;    private Runnable mScrollToBottomRunnable;\n&#x27;
                         &#x27;    private static final String TAG = &#x27;
                         &#x27;&quot;ChatSampleActivity&quot;;\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;    @Override\n&#x27;
                         &#x27;    protected void onCreate(Bundle &#x27;
                         &#x27;savedInstanceState) {\n&#x27;
                         &#x27;        super.onCreate(savedInstanceState);\n&#x27;
                         &#x27;        mBinding = &#x27;
                         &#x27;DataBindingUtil.setContentView(this, &#x27;
                         &#x27;R.layout.activity_chat_layout);\n&#x27;
                         &#x27;        int type = &#x27;
                         &#x27;getIntent().getIntExtra(Constants.KEY_PAGE_TYPE, &#x27;
                         &#x27;PageType.DEFAULT);\n&#x27;
                         &#x27;        &#x27;
                         &#x27;//这里只是demo提前隐藏标题栏，如果应用自己实现了标题栏或者通过自定义view开发标题栏，根据业务隐藏或者设置透明色就可以了，随便扩展\n&#x27;
                         &#x27;        if(type == &#x27;
                         &#x27;PageType.TRANSPARENT_STATUS_BAR){\n&#x27;
                         &#x27;            &#x27;
                         &#x27;supportRequestWindowFeature(Window.FEATURE_NO_TITLE);\n&#x27;
                         &#x27;        }\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;        mBinding = &#x27;
                         &#x27;DataBindingUtil.setContentView(this, &#x27;
                         &#x27;R.layout.common_chat_layout);\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;        switch (type) {\n&#x27;
                         &#x27;            case PageType.COLOR_STATUS_BAR: {\n&#x27;
                         &#x27;                &#x27;
                         &#x27;StatusbarHelper.setStatusBarColor(this, &#x27;
                         &#x27;ContextCompat.getColor(this, &#x27;
                         &#x27;R.color.colorPrimary));\n&#x27;
                         &#x27;                //可以在代码设置，也可以在xml设置\n&#x27;
                         &#x27;                &#x27;
                         &#x27;mBinding.getRoot().setFitsSystemWindows(true);\n&#x27;
                         &#x27;                &#x27;
                         &#x27;mBinding.getRoot().setBackgroundColor(ContextCompat.getColor(this, &#x27;
                         &#x27;R.color.common_page_bg_color));\n&#x27;
                         &#x27;                break;\n&#x27;
                         &#x27;            }\n&#x27;
                         &#x27;            case PageType.TRANSPARENT_STATUS_BAR: {\n&#x27;
                         &#x27;                &#x27;
                         &#x27;StatusbarHelper.setStatusBarColor(this, &#x27;
                         &#x27;Color.TRANSPARENT);\n&#x27;
                         &#x27;                &#x27;
                         &#x27;mBinding.getRoot().setFitsSystemWindows(true);\n&#x27;
                         &#x27;                &#x27;
                         &#x27;mBinding.getRoot().setBackgroundResource(R.drawable.bg_gradient);\n&#x27;
                         &#x27;                &#x27;
                         &#x27;mBinding.panelContainer.setBackgroundColor(ContextCompat.getColor(this, &#x27;
                         &#x27;R.color.common_page_bg_color));\n&#x27;
                         &#x27;                break;\n&#x27;
                         &#x27;            }\n&#x27;
                         &#x27;            default: {\n&#x27;
                         &#x27;                &#x27;
                         &#x27;mBinding.getRoot().setBackgroundColor(ContextCompat.getColor(this, &#x27;
                         &#x27;R.color.common_page_bg_color));\n&#x27;
                         &#x27;            }\n&#x27;
                         &#x27;        }\n&#x27;
                         &#x27;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Stashed &#x27;
                         &#x27;changes:app/src/main/java/com/example/demo/ChatActivity.java\n&#x27;
                         &#x27;        initView();\n&#x27;
                         &#x27;    }\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;    private void initView() {\n&#x27;
                         &#x27;        mLinearLayoutManager = new &#x27;
                         &#x27;LinearLayoutManager(this);\n&#x27;
                         &#x27;        &#x27;
                         &#x27;mBinding.recyclerView.setLayoutManager(mLinearLayoutManager);\n&#x27;
                         &#x27;        ((SimpleItemAnimator) &#x27;
                         &#x27;mBinding.recyclerView.getItemAnimator()).setSupportsChangeAnimations(false);\n&#x27;
                         &#x27;        List&lt;ChatInfo&gt; chatInfos = new &#x27;
                         &#x27;ArrayList&lt;&gt;();\n&#x27;
                         &#x27;        for(int i = 0; i &lt; 50; i++){\n&#x27;
                         &#x27;            chatInfos.add(ChatInfo.CREATE(&quot;模拟数据第&quot; + &#x27;
                         &#x27;(i+1) + &quot;条&quot;));\n&#x27;
                         &#x27;        }\n&#x27;
                         &#x27;        mAdapter = new ChatAdapter(this,chatInfos);\n&#x27;
                         &#x27;        mBinding.recyclerView.setAdapter(mAdapter);\n&#x27;
                         &#x27;        mBinding.send.setOnClickListener(new &#x27;
                         &#x27;View.OnClickListener() {\n&#x27;
                         &#x27;            @Override\n&#x27;
                         &#x27;            public void onClick(View v) {\n&#x27;
                         &#x27;                String content = &#x27;
                         &#x27;mBinding.editText.getText().toString();\n&#x27;
                         &#x27;                if (TextUtils.isEmpty(content)) {\n&#x27;
                         &#x27;                    &#x27;
                         &#x27;Toast.makeText(ChatSampleActivity.this, &quot;当前没有输入&quot;, &#x27;
                         &#x27;Toast.LENGTH_SHORT).show();\n&#x27;
                         &#x27;                    return;\n&#x27;
                         &#x27;                }\n&#x27;
                         &#x27;                &#x27;
                         &#x27;mAdapter.insertInfo(ChatInfo.CREATE(content));\n&#x27;
                         &#x27;                mBinding.editText.setText(null);\n&#x27;
                         &#x27;                scrollToBottom();\n&#x27;
                         &#x27;            }\n&#x27;
                         &#x27;        });\n&#x27;
                         &#x27;        mScrollToBottomRunnable = new Runnable() {\n&#x27;
                         &#x27;            @Override\n&#x27;
                         &#x27;            public void run() {\n&#x27;
                         &#x27;                if (mAdapter.getItemCount() &gt; 0) {\n&#x27;
                         &#x27;                    &#x27;
                         &#x27;mLinearLayoutManager.scrollToPosition(mAdapter.getItemCount() &#x27;
                         &#x27;- 1);\n&#x27;
                         &#x27;                }\n&#x27;
                         &#x27;            }\n&#x27;
                         &#x27;        };\n&#x27;
                         &#x27;    }\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;    private void scrollToBottom() {\n&#x27;
                         &#x27;        &#x27;
                         &#x27;mBinding.recyclerView.postDelayed(mScrollToBottomRunnable, &#x27;
                         &#x27;0);\n&#x27;
                         &#x27;    }\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;    @Override\n&#x27;
                         &#x27;    protected void onStart() {\n&#x27;
                         &#x27;        super.onStart();\n&#x27;
                         &#x27;        if (mHelper == null) {\n&#x27;
                         &#x27;            mHelper = new &#x27;
                         &#x27;PanelSwitchHelper.Builder(this)\n&#x27;
                         &#x27;                    &#x27;
                         &#x27;.bindPanelSwitchLayout(R.id.panel_switch_layout)\n&#x27;
                         &#x27;                    &#x27;
                         &#x27;.bindPanelContainerId(R.id.panel_container)\n&#x27;
                         &#x27;                    &#x27;
                         &#x27;.bindContentContainerId(R.id.content_view)\n&#x27;
                         &#x27;                    //可选\n&#x27;
                         &#x27;                    .addKeyboardStateListener(new &#x27;
                         &#x27;OnKeyboardStateListener() {\n&#x27;
                         &#x27;                        @Override\n&#x27;
                         &#x27;                        public void &#x27;
                         &#x27;onKeyboardChange(boolean visible) {\n&#x27;
                         &#x27;                            if(visible){\n&#x27;
                         &#x27;                                scrollToBottom();\n&#x27;
                         &#x27;                            }\n&#x27;
                         &#x27;                            Log.d(TAG, &quot;系统键盘是否可见 : &quot; &#x27;
                         &#x27;+ visible);\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;                        }\n&#x27;
                         &#x27;                    })\n&#x27;
                         &#x27;                    //可选\n&#x27;
                         &#x27;                    &#x27;
                         &#x27;.addEdittextFocesChangeListener(new &#x27;
                         &#x27;OnEditFocusChangeListener() {\n&#x27;
                         &#x27;                        @Override\n&#x27;
                         &#x27;                        public void &#x27;
                         &#x27;onFocusChange(View view, boolean hasFocus) {\n&#x27;
                         &#x27;                            Log.d(TAG, &quot;输入框是否获得焦点 : &#x27;
                         &#x27;&quot; + hasFocus);\n&#x27;
                         &#x27;                        }\n&#x27;
                         &#x27;                    })\n&#x27;
                         &#x27;                    //可选\n&#x27;
                         &#x27;                    .addViewClickListener(new &#x27;
                         &#x27;OnViewClickListener() {\n&#x27;
                         &#x27;                        @Override\n&#x27;
                         &#x27;                        public void onViewClick(View &#x27;
                         &#x27;view) {\n&#x27;
                         &#x27;                            if(view.getId() != &#x27;
                         &#x27;R.id.empty_view){\n&#x27;
                         &#x27;                                scrollToBottom();\n&#x27;
                         &#x27;                            }\n&#x27;
                         &#x27;                            Log.d(TAG, &quot;点击了View : &quot; &#x27;
                         &#x27;+ view);\n&#x27;
                         &#x27;                        }\n&#x27;
                         &#x27;                    })\n&#x27;
                         &#x27;                    //可选\n&#x27;
                         &#x27;                    .addPanelChangeListener(new &#x27;
                         &#x27;OnPanelChangeListener() {\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;                        @Override\n&#x27;
                         &#x27;                        public void onKeyboard() {\n&#x27;
                         &#x27;                            Log.d(TAG, &quot;唤起系统输入法&quot;);\n&#x27;
                         &#x27;                            &#x27;
                         &#x27;mBinding.emotionBtn.setSelected(false);\n&#x27;
                         &#x27;                        }\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;                        @Override\n&#x27;
                         &#x27;                        public void onNone() {\n&#x27;
                         &#x27;                            Log.d(TAG, &quot;隐藏所有面板&quot;);\n&#x27;
                         &#x27;                            &#x27;
                         &#x27;mBinding.emotionBtn.setSelected(false);\n&#x27;
                         &#x27;                        }\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;                        @Override\n&#x27;
                         &#x27;                        public void &#x27;
                         &#x27;onPanel(PanelView view) {\n&#x27;
                         &#x27;                            Log.d(TAG, &quot;唤起面板 : &quot; + &#x27;
                         &#x27;view);\n&#x27;
                         &#x27;                            &#x27;
                         &#x27;mBinding.emotionBtn.setSelected(view.getId() == &#x27;
                         &#x27;R.id.panel_emotion ? true : false);\n&#x27;
                         &#x27;                        }\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;                        @Override\n&#x27;
                         &#x27;                        public void &#x27;
                         &#x27;onPanelSizeChange(PanelView panelView, boolean &#x27;
                         &#x27;portrait, int oldWidth, int oldHeight, int width, &#x27;
                         &#x27;int height) {\n&#x27;
                         &#x27;                            switch &#x27;
                         &#x27;(panelView.getId()) {\n&#x27;
                         &#x27;                                case &#x27;
                         &#x27;R.id.panel_emotion: {\n&#x27;
                         &#x27;                                    EmotionPagerView &#x27;
                         &#x27;pagerView = &#x27;
                         &#x27;mBinding.getRoot().findViewById(R.id.view_pager);\n&#x27;
                         &#x27;                                    int &#x27;
                         &#x27;viewPagerSize = height - &#x27;
                         &#x27;Utils.dip2px(ChatSampleActivity.this, 30f);\n&#x27;
                         &#x27;                                    &#x27;
                         &#x27;pagerView.buildEmotionViews(\n&#x27;
                         &#x27;                                            &#x27;
                         &#x27;(PageIndicatorView) &#x27;
                         &#x27;mBinding.getRoot().findViewById(R.id.pageIndicatorView),\n&#x27;
                         &#x27;                                            &#x27;
                         &#x27;mBinding.editText,\n&#x27;
                         &#x27;                                            &#x27;
                         &#x27;Emotions.getEmotions(), width, viewPagerSize);\n&#x27;
                         &#x27;                                    break;\n&#x27;
                         &#x27;                                }\n&#x27;
                         &#x27;                                case &#x27;
                         &#x27;R.id.panel_addition: {\n&#x27;
                         &#x27;                                    //auto &#x27;
                         &#x27;center,nothing to do\n&#x27;
                         &#x27;                                    break;\n&#x27;
                         &#x27;                                }\n&#x27;
                         &#x27;                            }\n&#x27;
                         &#x27;                        }\n&#x27;
                         &#x27;                    })\n&#x27;
                         &#x27;                    .logTrack(true)             &#x27;
                         &#x27;//output log\n&#x27;
                         &#x27;                    .build();\n&#x27;
                         &#x27;        }\n&#x27;
                         &#x27;    }\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;    @Override\n&#x27;
                         &#x27;    public void onBackPressed() {\n&#x27;
                         &#x27;        if (mHelper != null &amp;&amp; &#x27;
                         &#x27;mHelper.hookSystemBackForHindPanel()) {\n&#x27;
                         &#x27;            return;\n&#x27;
                         &#x27;        }\n&#x27;
                         &#x27;        super.onBackPressed();\n&#x27;
                         &#x27;    }\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;    @Override\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;    protected void onDestroy() {\n&#x27;
                         &#x27;        super.onDestroy();\n&#x27;
                         &#x27;        if (mHelper != null) {\n&#x27;
                         &#x27;            mHelper.onDestroy();\n&#x27;
                         &#x27;        }\n&#x27;
                         &#x27;//        &#x27;
                         &#x27;mBinding.recyclerView.removeCallbacks(mScrollToBottomRunnable);\n&#x27;
                         &#x27;    }\n&#x27;
                         &#x27;}\n&#x27;,
           &#x27;CHUNK_THEIRS&#x27;: &#x27;\n&#x27;}],
   &#x27;mergers&#x27;: {&#x27;baseline&#x27;, &#x27;spork&#x27;, &#x27;jfstmerge&#x27;}}],
 [{&#x27;eq&#x27;: [{&#x27;CHUNK_OURS&#x27;: &#x27;package com.example.demo;\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;import android.databinding.DataBindingUtil;\n&#x27;
                         &#x27;import android.support.v7.app.AppCompatActivity;\n&#x27;
                         &#x27;import android.os.Bundle;\n&#x27;
                         &#x27;import &#x27;
                         &#x27;android.support.v7.widget.LinearLayoutManager;\n&#x27;
                         &#x27;import &#x27;
                         &#x27;android.support.v7.widget.SimpleItemAnimator;\n&#x27;
                         &#x27;import android.text.TextUtils;\n&#x27;
                         &#x27;import android.util.Log;\n&#x27;
                         &#x27;import android.view.View;\n&#x27;
                         &#x27;import android.widget.Button;\n&#x27;
                         &#x27;import android.widget.Toast;\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;import com.effective.R;\n&#x27;
                         &#x27;import &#x27;
                         &#x27;com.effective.android.panel.PanelSwitchHelper;\n&#x27;
                         &#x27;import &#x27;
                         &#x27;com.effective.android.panel.interfaces.listener.OnEditFocusChangeListener;\n&#x27;
                         &#x27;import &#x27;
                         &#x27;com.effective.android.panel.interfaces.listener.OnKeyboardStateListener;\n&#x27;
                         &#x27;import &#x27;
                         &#x27;com.effective.android.panel.interfaces.listener.OnPanelChangeListener;\n&#x27;
                         &#x27;import &#x27;
                         &#x27;com.effective.android.panel.interfaces.listener.OnViewClickListener;\n&#x27;
                         &#x27;import com.effective.android.panel.view.PanelView;\n&#x27;
                         &#x27;import &#x27;
                         &#x27;com.effective.databinding.ActivityChatLayoutBinding;\n&#x27;
                         &#x27;import com.example.demo.chat.ChatAdapter;\n&#x27;
                         &#x27;import com.example.demo.chat.ChatInfo;\n&#x27;
                         &#x27;import com.example.demo.emotion.EmotionPagerView;\n&#x27;
                         &#x27;import com.example.demo.emotion.Emotions;\n&#x27;
                         &#x27;import com.rd.PageIndicatorView;\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;import java.util.ArrayList;\n&#x27;
                         &#x27;import java.util.List;\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;/**\n&#x27;
                         &#x27; * Created by yummyLau on 18-7-11\n&#x27;
                         &#x27; * Email: yummyl.lau@gmail.com\n&#x27;
                         &#x27; * blog: yummylau.com\n&#x27;
                         &#x27; */\n&#x27;
                         &#x27;public class ChatSampleActivity extends &#x27;
                         &#x27;AppCompatActivity {\n&#x27;
                         &#x27;    private ActivityChatLayoutBinding mBinding;\n&#x27;
                         &#x27;    private PanelSwitchHelper mHelper;\n&#x27;
                         &#x27;    private ChatAdapter mAdapter;\n&#x27;
                         &#x27;    private LinearLayoutManager &#x27;
                         &#x27;mLinearLayoutManager;\n&#x27;
                         &#x27;    private Runnable mScrollToBottomRunnable;\n&#x27;
                         &#x27;    private static final String TAG = &#x27;
                         &#x27;&quot;ChatSampleActivity&quot;;\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;    @Override\n&#x27;
                         &#x27;    protected void onCreate(Bundle &#x27;
                         &#x27;savedInstanceState) {\n&#x27;
                         &#x27;        super.onCreate(savedInstanceState);\n&#x27;
                         &#x27;        mBinding = &#x27;
                         &#x27;DataBindingUtil.setContentView(this, &#x27;
                         &#x27;R.layout.activity_chat_layout);\n&#x27;
                         &#x27;        int type = &#x27;
                         &#x27;getIntent().getIntExtra(Constants.KEY_PAGE_TYPE, &#x27;
                         &#x27;PageType.DEFAULT);\n&#x27;
                         &#x27;        &#x27;
                         &#x27;//这里只是demo提前隐藏标题栏，如果应用自己实现了标题栏或者通过自定义view开发标题栏，根据业务隐藏或者设置透明色就可以了，随便扩展\n&#x27;
                         &#x27;        if(type == &#x27;
                         &#x27;PageType.TRANSPARENT_STATUS_BAR){\n&#x27;
                         &#x27;            &#x27;
                         &#x27;supportRequestWindowFeature(Window.FEATURE_NO_TITLE);\n&#x27;
                         &#x27;        }\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;        mBinding = &#x27;
                         &#x27;DataBindingUtil.setContentView(this, &#x27;
                         &#x27;R.layout.common_chat_layout);\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;        switch (type) {\n&#x27;
                         &#x27;            case PageType.COLOR_STATUS_BAR: {\n&#x27;
                         &#x27;                &#x27;
                         &#x27;StatusbarHelper.setStatusBarColor(this, &#x27;
                         &#x27;ContextCompat.getColor(this, &#x27;
                         &#x27;R.color.colorPrimary));\n&#x27;
                         &#x27;                //可以在代码设置，也可以在xml设置\n&#x27;
                         &#x27;                &#x27;
                         &#x27;mBinding.getRoot().setFitsSystemWindows(true);\n&#x27;
                         &#x27;                &#x27;
                         &#x27;mBinding.getRoot().setBackgroundColor(ContextCompat.getColor(this, &#x27;
                         &#x27;R.color.common_page_bg_color));\n&#x27;
                         &#x27;                break;\n&#x27;
                         &#x27;            }\n&#x27;
                         &#x27;            case PageType.TRANSPARENT_STATUS_BAR: {\n&#x27;
                         &#x27;                &#x27;
                         &#x27;StatusbarHelper.setStatusBarColor(this, &#x27;
                         &#x27;Color.TRANSPARENT);\n&#x27;
                         &#x27;                &#x27;
                         &#x27;mBinding.getRoot().setFitsSystemWindows(true);\n&#x27;
                         &#x27;                &#x27;
                         &#x27;mBinding.getRoot().setBackgroundResource(R.drawable.bg_gradient);\n&#x27;
                         &#x27;                &#x27;
                         &#x27;mBinding.panelContainer.setBackgroundColor(ContextCompat.getColor(this, &#x27;
                         &#x27;R.color.common_page_bg_color));\n&#x27;
                         &#x27;                break;\n&#x27;
                         &#x27;            }\n&#x27;
                         &#x27;            default: {\n&#x27;
                         &#x27;                &#x27;
                         &#x27;mBinding.getRoot().setBackgroundColor(ContextCompat.getColor(this, &#x27;
                         &#x27;R.color.common_page_bg_color));\n&#x27;
                         &#x27;            }\n&#x27;
                         &#x27;        }\n&#x27;
                         &#x27;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Stashed &#x27;
                         &#x27;changes:app/src/main/java/com/example/demo/ChatActivity.java\n&#x27;
                         &#x27;        initView();\n&#x27;
                         &#x27;    }\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;    private void initView() {\n&#x27;
                         &#x27;        mLinearLayoutManager = new &#x27;
                         &#x27;LinearLayoutManager(this);\n&#x27;
                         &#x27;        &#x27;
                         &#x27;mBinding.recyclerView.setLayoutManager(mLinearLayoutManager);\n&#x27;
                         &#x27;        ((SimpleItemAnimator) &#x27;
                         &#x27;mBinding.recyclerView.getItemAnimator()).setSupportsChangeAnimations(false);\n&#x27;
                         &#x27;        List&lt;ChatInfo&gt; chatInfos = new &#x27;
                         &#x27;ArrayList&lt;&gt;();\n&#x27;
                         &#x27;        for(int i = 0; i &lt; 50; i++){\n&#x27;
                         &#x27;            chatInfos.add(ChatInfo.CREATE(&quot;模拟数据第&quot; + &#x27;
                         &#x27;(i+1) + &quot;条&quot;));\n&#x27;
                         &#x27;        }\n&#x27;
                         &#x27;        mAdapter = new ChatAdapter(this,chatInfos);\n&#x27;
                         &#x27;        mBinding.recyclerView.setAdapter(mAdapter);\n&#x27;
                         &#x27;        mBinding.send.setOnClickListener(new &#x27;
                         &#x27;View.OnClickListener() {\n&#x27;
                         &#x27;            @Override\n&#x27;
                         &#x27;            public void onClick(View v) {\n&#x27;
                         &#x27;                String content = &#x27;
                         &#x27;mBinding.editText.getText().toString();\n&#x27;
                         &#x27;                if (TextUtils.isEmpty(content)) {\n&#x27;
                         &#x27;                    &#x27;
                         &#x27;Toast.makeText(ChatSampleActivity.this, &quot;当前没有输入&quot;, &#x27;
                         &#x27;Toast.LENGTH_SHORT).show();\n&#x27;
                         &#x27;                    return;\n&#x27;
                         &#x27;                }\n&#x27;
                         &#x27;                &#x27;
                         &#x27;mAdapter.insertInfo(ChatInfo.CREATE(content));\n&#x27;
                         &#x27;                mBinding.editText.setText(null);\n&#x27;
                         &#x27;                scrollToBottom();\n&#x27;
                         &#x27;            }\n&#x27;
                         &#x27;        });\n&#x27;
                         &#x27;        mScrollToBottomRunnable = new Runnable() {\n&#x27;
                         &#x27;            @Override\n&#x27;
                         &#x27;            public void run() {\n&#x27;
                         &#x27;                if (mAdapter.getItemCount() &gt; 0) {\n&#x27;
                         &#x27;                    &#x27;
                         &#x27;mLinearLayoutManager.scrollToPosition(mAdapter.getItemCount() &#x27;
                         &#x27;- 1);\n&#x27;
                         &#x27;                }\n&#x27;
                         &#x27;            }\n&#x27;
                         &#x27;        };\n&#x27;
                         &#x27;    }\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;    private void scrollToBottom() {\n&#x27;
                         &#x27;        &#x27;
                         &#x27;mBinding.recyclerView.postDelayed(mScrollToBottomRunnable, &#x27;
                         &#x27;0);\n&#x27;
                         &#x27;    }\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;    @Override\n&#x27;
                         &#x27;    protected void onStart() {\n&#x27;
                         &#x27;        super.onStart();\n&#x27;
                         &#x27;        if (mHelper == null) {\n&#x27;
                         &#x27;            mHelper = new &#x27;
                         &#x27;PanelSwitchHelper.Builder(this)\n&#x27;
                         &#x27;                    &#x27;
                         &#x27;.bindPanelSwitchLayout(R.id.panel_switch_layout)\n&#x27;
                         &#x27;                    &#x27;
                         &#x27;.bindPanelContainerId(R.id.panel_container)\n&#x27;
                         &#x27;                    &#x27;
                         &#x27;.bindContentContainerId(R.id.content_view)\n&#x27;
                         &#x27;                    //可选\n&#x27;
                         &#x27;                    .addKeyboardStateListener(new &#x27;
                         &#x27;OnKeyboardStateListener() {\n&#x27;
                         &#x27;                        @Override\n&#x27;
                         &#x27;                        public void &#x27;
                         &#x27;onKeyboardChange(boolean visible) {\n&#x27;
                         &#x27;                            if(visible){\n&#x27;
                         &#x27;                                scrollToBottom();\n&#x27;
                         &#x27;                            }\n&#x27;
                         &#x27;                            Log.d(TAG, &quot;系统键盘是否可见 : &quot; &#x27;
                         &#x27;+ visible);\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;                        }\n&#x27;
                         &#x27;                    })\n&#x27;
                         &#x27;                    //可选\n&#x27;
                         &#x27;                    &#x27;
                         &#x27;.addEdittextFocesChangeListener(new &#x27;
                         &#x27;OnEditFocusChangeListener() {\n&#x27;
                         &#x27;                        @Override\n&#x27;
                         &#x27;                        public void &#x27;
                         &#x27;onFocusChange(View view, boolean hasFocus) {\n&#x27;
                         &#x27;                            Log.d(TAG, &quot;输入框是否获得焦点 : &#x27;
                         &#x27;&quot; + hasFocus);\n&#x27;
                         &#x27;                        }\n&#x27;
                         &#x27;                    })\n&#x27;
                         &#x27;                    //可选\n&#x27;
                         &#x27;                    .addViewClickListener(new &#x27;
                         &#x27;OnViewClickListener() {\n&#x27;
                         &#x27;                        @Override\n&#x27;
                         &#x27;                        public void onViewClick(View &#x27;
                         &#x27;view) {\n&#x27;
                         &#x27;                            if(view.getId() != &#x27;
                         &#x27;R.id.empty_view){\n&#x27;
                         &#x27;                                scrollToBottom();\n&#x27;
                         &#x27;                            }\n&#x27;
                         &#x27;                            Log.d(TAG, &quot;点击了View : &quot; &#x27;
                         &#x27;+ view);\n&#x27;
                         &#x27;                        }\n&#x27;
                         &#x27;                    })\n&#x27;
                         &#x27;                    //可选\n&#x27;
                         &#x27;                    .addPanelChangeListener(new &#x27;
                         &#x27;OnPanelChangeListener() {\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;                        @Override\n&#x27;
                         &#x27;                        public void onKeyboard() {\n&#x27;
                         &#x27;                            Log.d(TAG, &quot;唤起系统输入法&quot;);\n&#x27;
                         &#x27;                            &#x27;
                         &#x27;mBinding.emotionBtn.setSelected(false);\n&#x27;
                         &#x27;                        }\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;                        @Override\n&#x27;
                         &#x27;                        public void onNone() {\n&#x27;
                         &#x27;                            Log.d(TAG, &quot;隐藏所有面板&quot;);\n&#x27;
                         &#x27;                            &#x27;
                         &#x27;mBinding.emotionBtn.setSelected(false);\n&#x27;
                         &#x27;                        }\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;                        @Override\n&#x27;
                         &#x27;                        public void &#x27;
                         &#x27;onPanel(PanelView view) {\n&#x27;
                         &#x27;                            Log.d(TAG, &quot;唤起面板 : &quot; + &#x27;
                         &#x27;view);\n&#x27;
                         &#x27;                            &#x27;
                         &#x27;mBinding.emotionBtn.setSelected(view.getId() == &#x27;
                         &#x27;R.id.panel_emotion ? true : false);\n&#x27;
                         &#x27;                        }\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;                        @Override\n&#x27;
                         &#x27;                        public void &#x27;
                         &#x27;onPanelSizeChange(PanelView panelView, boolean &#x27;
                         &#x27;portrait, int oldWidth, int oldHeight, int width, &#x27;
                         &#x27;int height) {\n&#x27;
                         &#x27;                            switch &#x27;
                         &#x27;(panelView.getId()) {\n&#x27;
                         &#x27;                                case &#x27;
                         &#x27;R.id.panel_emotion: {\n&#x27;
                         &#x27;                                    EmotionPagerView &#x27;
                         &#x27;pagerView = &#x27;
                         &#x27;mBinding.getRoot().findViewById(R.id.view_pager);\n&#x27;
                         &#x27;                                    int &#x27;
                         &#x27;viewPagerSize = height - &#x27;
                         &#x27;Utils.dip2px(ChatSampleActivity.this, 30f);\n&#x27;
                         &#x27;                                    &#x27;
                         &#x27;pagerView.buildEmotionViews(\n&#x27;
                         &#x27;                                            &#x27;
                         &#x27;(PageIndicatorView) &#x27;
                         &#x27;mBinding.getRoot().findViewById(R.id.pageIndicatorView),\n&#x27;
                         &#x27;                                            &#x27;
                         &#x27;mBinding.editText,\n&#x27;
                         &#x27;                                            &#x27;
                         &#x27;Emotions.getEmotions(), width, viewPagerSize);\n&#x27;
                         &#x27;                                    break;\n&#x27;
                         &#x27;                                }\n&#x27;
                         &#x27;                                case &#x27;
                         &#x27;R.id.panel_addition: {\n&#x27;
                         &#x27;                                    //auto &#x27;
                         &#x27;center,nothing to do\n&#x27;
                         &#x27;                                    break;\n&#x27;
                         &#x27;                                }\n&#x27;
                         &#x27;                            }\n&#x27;
                         &#x27;                        }\n&#x27;
                         &#x27;                    })\n&#x27;
                         &#x27;                    .logTrack(true)             &#x27;
                         &#x27;//output log\n&#x27;
                         &#x27;                    .build();\n&#x27;
                         &#x27;        }\n&#x27;
                         &#x27;    }\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;    @Override\n&#x27;
                         &#x27;    public void onBackPressed() {\n&#x27;
                         &#x27;        if (mHelper != null &amp;&amp; &#x27;
                         &#x27;mHelper.hookSystemBackForHindPanel()) {\n&#x27;
                         &#x27;            return;\n&#x27;
                         &#x27;        }\n&#x27;
                         &#x27;        super.onBackPressed();\n&#x27;
                         &#x27;    }\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;    @Override\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;    protected void onDestroy() {\n&#x27;
                         &#x27;        super.onDestroy();\n&#x27;
                         &#x27;        if (mHelper != null) {\n&#x27;
                         &#x27;            mHelper.onDestroy();\n&#x27;
                         &#x27;        }\n&#x27;
                         &#x27;//        &#x27;
                         &#x27;mBinding.recyclerView.removeCallbacks(mScrollToBottomRunnable);\n&#x27;
                         &#x27;    }\n&#x27;
                         &#x27;}\n&#x27;,
           &#x27;CHUNK_THEIRS&#x27;: &#x27;&#x27;},
          {&#x27;CHUNK_OURS&#x27;: &#x27;package com.example.demo;\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;import android.databinding.DataBindingUtil;\n&#x27;
                         &#x27;import android.support.v7.app.AppCompatActivity;\n&#x27;
                         &#x27;import android.os.Bundle;\n&#x27;
                         &#x27;import &#x27;
                         &#x27;android.support.v7.widget.LinearLayoutManager;\n&#x27;
                         &#x27;import &#x27;
                         &#x27;android.support.v7.widget.SimpleItemAnimator;\n&#x27;
                         &#x27;import android.text.TextUtils;\n&#x27;
                         &#x27;import android.util.Log;\n&#x27;
                         &#x27;import android.view.View;\n&#x27;
                         &#x27;import android.widget.Button;\n&#x27;
                         &#x27;import android.widget.Toast;\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;import com.effective.R;\n&#x27;
                         &#x27;import &#x27;
                         &#x27;com.effective.android.panel.PanelSwitchHelper;\n&#x27;
                         &#x27;import &#x27;
                         &#x27;com.effective.android.panel.interfaces.listener.OnEditFocusChangeListener;\n&#x27;
                         &#x27;import &#x27;
                         &#x27;com.effective.android.panel.interfaces.listener.OnKeyboardStateListener;\n&#x27;
                         &#x27;import &#x27;
                         &#x27;com.effective.android.panel.interfaces.listener.OnPanelChangeListener;\n&#x27;
                         &#x27;import &#x27;
                         &#x27;com.effective.android.panel.interfaces.listener.OnViewClickListener;\n&#x27;
                         &#x27;import com.effective.android.panel.view.PanelView;\n&#x27;
                         &#x27;import &#x27;
                         &#x27;com.effective.databinding.ActivityChatLayoutBinding;\n&#x27;
                         &#x27;import com.example.demo.chat.ChatAdapter;\n&#x27;
                         &#x27;import com.example.demo.chat.ChatInfo;\n&#x27;
                         &#x27;import com.example.demo.emotion.EmotionPagerView;\n&#x27;
                         &#x27;import com.example.demo.emotion.Emotions;\n&#x27;
                         &#x27;import com.rd.PageIndicatorView;\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;import java.util.ArrayList;\n&#x27;
                         &#x27;import java.util.List;\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;/**\n&#x27;
                         &#x27; * Created by yummyLau on 18-7-11\n&#x27;
                         &#x27; * Email: yummyl.lau@gmail.com\n&#x27;
                         &#x27; * blog: yummylau.com\n&#x27;
                         &#x27; */\n&#x27;
                         &#x27;public class ChatSampleActivity extends &#x27;
                         &#x27;AppCompatActivity {\n&#x27;
                         &#x27;    private ActivityChatLayoutBinding mBinding;\n&#x27;
                         &#x27;    private PanelSwitchHelper mHelper;\n&#x27;
                         &#x27;    private ChatAdapter mAdapter;\n&#x27;
                         &#x27;    private LinearLayoutManager &#x27;
                         &#x27;mLinearLayoutManager;\n&#x27;
                         &#x27;    private Runnable mScrollToBottomRunnable;\n&#x27;
                         &#x27;    private static final String TAG = &#x27;
                         &#x27;&quot;ChatSampleActivity&quot;;\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;    @Override\n&#x27;
                         &#x27;    protected void onCreate(Bundle &#x27;
                         &#x27;savedInstanceState) {\n&#x27;
                         &#x27;        super.onCreate(savedInstanceState);\n&#x27;
                         &#x27;        mBinding = &#x27;
                         &#x27;DataBindingUtil.setContentView(this, &#x27;
                         &#x27;R.layout.activity_chat_layout);\n&#x27;
                         &#x27;        int type = &#x27;
                         &#x27;getIntent().getIntExtra(Constants.KEY_PAGE_TYPE, &#x27;
                         &#x27;PageType.DEFAULT);\n&#x27;
                         &#x27;        &#x27;
                         &#x27;//这里只是demo提前隐藏标题栏，如果应用自己实现了标题栏或者通过自定义view开发标题栏，根据业务隐藏或者设置透明色就可以了，随便扩展\n&#x27;
                         &#x27;        if(type == &#x27;
                         &#x27;PageType.TRANSPARENT_STATUS_BAR){\n&#x27;
                         &#x27;            &#x27;
                         &#x27;supportRequestWindowFeature(Window.FEATURE_NO_TITLE);\n&#x27;
                         &#x27;        }\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;        mBinding = &#x27;
                         &#x27;DataBindingUtil.setContentView(this, &#x27;
                         &#x27;R.layout.common_chat_layout);\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;        switch (type) {\n&#x27;
                         &#x27;            case PageType.COLOR_STATUS_BAR: {\n&#x27;
                         &#x27;                &#x27;
                         &#x27;StatusbarHelper.setStatusBarColor(this, &#x27;
                         &#x27;ContextCompat.getColor(this, &#x27;
                         &#x27;R.color.colorPrimary));\n&#x27;
                         &#x27;                //可以在代码设置，也可以在xml设置\n&#x27;
                         &#x27;                &#x27;
                         &#x27;mBinding.getRoot().setFitsSystemWindows(true);\n&#x27;
                         &#x27;                &#x27;
                         &#x27;mBinding.getRoot().setBackgroundColor(ContextCompat.getColor(this, &#x27;
                         &#x27;R.color.common_page_bg_color));\n&#x27;
                         &#x27;                break;\n&#x27;
                         &#x27;            }\n&#x27;
                         &#x27;            case PageType.TRANSPARENT_STATUS_BAR: {\n&#x27;
                         &#x27;                &#x27;
                         &#x27;StatusbarHelper.setStatusBarColor(this, &#x27;
                         &#x27;Color.TRANSPARENT);\n&#x27;
                         &#x27;                &#x27;
                         &#x27;mBinding.getRoot().setFitsSystemWindows(true);\n&#x27;
                         &#x27;                &#x27;
                         &#x27;mBinding.getRoot().setBackgroundResource(R.drawable.bg_gradient);\n&#x27;
                         &#x27;                &#x27;
                         &#x27;mBinding.panelContainer.setBackgroundColor(ContextCompat.getColor(this, &#x27;
                         &#x27;R.color.common_page_bg_color));\n&#x27;
                         &#x27;                break;\n&#x27;
                         &#x27;            }\n&#x27;
                         &#x27;            default: {\n&#x27;
                         &#x27;                &#x27;
                         &#x27;mBinding.getRoot().setBackgroundColor(ContextCompat.getColor(this, &#x27;
                         &#x27;R.color.common_page_bg_color));\n&#x27;
                         &#x27;            }\n&#x27;
                         &#x27;        }\n&#x27;
                         &#x27;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Stashed &#x27;
                         &#x27;changes:app/src/main/java/com/example/demo/ChatActivity.java\n&#x27;
                         &#x27;        initView();\n&#x27;
                         &#x27;    }\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;    private void initView() {\n&#x27;
                         &#x27;        mLinearLayoutManager = new &#x27;
                         &#x27;LinearLayoutManager(this);\n&#x27;
                         &#x27;        &#x27;
                         &#x27;mBinding.recyclerView.setLayoutManager(mLinearLayoutManager);\n&#x27;
                         &#x27;        ((SimpleItemAnimator) &#x27;
                         &#x27;mBinding.recyclerView.getItemAnimator()).setSupportsChangeAnimations(false);\n&#x27;
                         &#x27;        List&lt;ChatInfo&gt; chatInfos = new &#x27;
                         &#x27;ArrayList&lt;&gt;();\n&#x27;
                         &#x27;        for(int i = 0; i &lt; 50; i++){\n&#x27;
                         &#x27;            chatInfos.add(ChatInfo.CREATE(&quot;模拟数据第&quot; + &#x27;
                         &#x27;(i+1) + &quot;条&quot;));\n&#x27;
                         &#x27;        }\n&#x27;
                         &#x27;        mAdapter = new ChatAdapter(this,chatInfos);\n&#x27;
                         &#x27;        mBinding.recyclerView.setAdapter(mAdapter);\n&#x27;
                         &#x27;        mBinding.send.setOnClickListener(new &#x27;
                         &#x27;View.OnClickListener() {\n&#x27;
                         &#x27;            @Override\n&#x27;
                         &#x27;            public void onClick(View v) {\n&#x27;
                         &#x27;                String content = &#x27;
                         &#x27;mBinding.editText.getText().toString();\n&#x27;
                         &#x27;                if (TextUtils.isEmpty(content)) {\n&#x27;
                         &#x27;                    &#x27;
                         &#x27;Toast.makeText(ChatSampleActivity.this, &quot;当前没有输入&quot;, &#x27;
                         &#x27;Toast.LENGTH_SHORT).show();\n&#x27;
                         &#x27;                    return;\n&#x27;
                         &#x27;                }\n&#x27;
                         &#x27;                &#x27;
                         &#x27;mAdapter.insertInfo(ChatInfo.CREATE(content));\n&#x27;
                         &#x27;                mBinding.editText.setText(null);\n&#x27;
                         &#x27;                scrollToBottom();\n&#x27;
                         &#x27;            }\n&#x27;
                         &#x27;        });\n&#x27;
                         &#x27;        mScrollToBottomRunnable = new Runnable() {\n&#x27;
                         &#x27;            @Override\n&#x27;
                         &#x27;            public void run() {\n&#x27;
                         &#x27;                if (mAdapter.getItemCount() &gt; 0) {\n&#x27;
                         &#x27;                    &#x27;
                         &#x27;mLinearLayoutManager.scrollToPosition(mAdapter.getItemCount() &#x27;
                         &#x27;- 1);\n&#x27;
                         &#x27;                }\n&#x27;
                         &#x27;            }\n&#x27;
                         &#x27;        };\n&#x27;
                         &#x27;    }\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;    private void scrollToBottom() {\n&#x27;
                         &#x27;        &#x27;
                         &#x27;mBinding.recyclerView.postDelayed(mScrollToBottomRunnable, &#x27;
                         &#x27;0);\n&#x27;
                         &#x27;    }\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;    @Override\n&#x27;
                         &#x27;    protected void onStart() {\n&#x27;
                         &#x27;        super.onStart();\n&#x27;
                         &#x27;        if (mHelper == null) {\n&#x27;
                         &#x27;            mHelper = new &#x27;
                         &#x27;PanelSwitchHelper.Builder(this)\n&#x27;
                         &#x27;                    &#x27;
                         &#x27;.bindPanelSwitchLayout(R.id.panel_switch_layout)\n&#x27;
                         &#x27;                    &#x27;
                         &#x27;.bindPanelContainerId(R.id.panel_container)\n&#x27;
                         &#x27;                    &#x27;
                         &#x27;.bindContentContainerId(R.id.content_view)\n&#x27;
                         &#x27;                    //可选\n&#x27;
                         &#x27;                    .addKeyboardStateListener(new &#x27;
                         &#x27;OnKeyboardStateListener() {\n&#x27;
                         &#x27;                        @Override\n&#x27;
                         &#x27;                        public void &#x27;
                         &#x27;onKeyboardChange(boolean visible) {\n&#x27;
                         &#x27;                            if(visible){\n&#x27;
                         &#x27;                                scrollToBottom();\n&#x27;
                         &#x27;                            }\n&#x27;
                         &#x27;                            Log.d(TAG, &quot;系统键盘是否可见 : &quot; &#x27;
                         &#x27;+ visible);\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;                        }\n&#x27;
                         &#x27;                    })\n&#x27;
                         &#x27;                    //可选\n&#x27;
                         &#x27;                    &#x27;
                         &#x27;.addEdittextFocesChangeListener(new &#x27;
                         &#x27;OnEditFocusChangeListener() {\n&#x27;
                         &#x27;                        @Override\n&#x27;
                         &#x27;                        public void &#x27;
                         &#x27;onFocusChange(View view, boolean hasFocus) {\n&#x27;
                         &#x27;                            Log.d(TAG, &quot;输入框是否获得焦点 : &#x27;
                         &#x27;&quot; + hasFocus);\n&#x27;
                         &#x27;                        }\n&#x27;
                         &#x27;                    })\n&#x27;
                         &#x27;                    //可选\n&#x27;
                         &#x27;                    .addViewClickListener(new &#x27;
                         &#x27;OnViewClickListener() {\n&#x27;
                         &#x27;                        @Override\n&#x27;
                         &#x27;                        public void onViewClick(View &#x27;
                         &#x27;view) {\n&#x27;
                         &#x27;                            if(view.getId() != &#x27;
                         &#x27;R.id.empty_view){\n&#x27;
                         &#x27;                                scrollToBottom();\n&#x27;
                         &#x27;                            }\n&#x27;
                         &#x27;                            Log.d(TAG, &quot;点击了View : &quot; &#x27;
                         &#x27;+ view);\n&#x27;
                         &#x27;                        }\n&#x27;
                         &#x27;                    })\n&#x27;
                         &#x27;                    //可选\n&#x27;
                         &#x27;                    .addPanelChangeListener(new &#x27;
                         &#x27;OnPanelChangeListener() {\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;                        @Override\n&#x27;
                         &#x27;                        public void onKeyboard() {\n&#x27;
                         &#x27;                            Log.d(TAG, &quot;唤起系统输入法&quot;);\n&#x27;
                         &#x27;                            &#x27;
                         &#x27;mBinding.emotionBtn.setSelected(false);\n&#x27;
                         &#x27;                        }\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;                        @Override\n&#x27;
                         &#x27;                        public void onNone() {\n&#x27;
                         &#x27;                            Log.d(TAG, &quot;隐藏所有面板&quot;);\n&#x27;
                         &#x27;                            &#x27;
                         &#x27;mBinding.emotionBtn.setSelected(false);\n&#x27;
                         &#x27;                        }\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;                        @Override\n&#x27;
                         &#x27;                        public void &#x27;
                         &#x27;onPanel(PanelView view) {\n&#x27;
                         &#x27;                            Log.d(TAG, &quot;唤起面板 : &quot; + &#x27;
                         &#x27;view);\n&#x27;
                         &#x27;                            &#x27;
                         &#x27;mBinding.emotionBtn.setSelected(view.getId() == &#x27;
                         &#x27;R.id.panel_emotion ? true : false);\n&#x27;
                         &#x27;                        }\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;                        @Override\n&#x27;
                         &#x27;                        public void &#x27;
                         &#x27;onPanelSizeChange(PanelView panelView, boolean &#x27;
                         &#x27;portrait, int oldWidth, int oldHeight, int width, &#x27;
                         &#x27;int height) {\n&#x27;
                         &#x27;                            switch &#x27;
                         &#x27;(panelView.getId()) {\n&#x27;
                         &#x27;                                case &#x27;
                         &#x27;R.id.panel_emotion: {\n&#x27;
                         &#x27;                                    EmotionPagerView &#x27;
                         &#x27;pagerView = &#x27;
                         &#x27;mBinding.getRoot().findViewById(R.id.view_pager);\n&#x27;
                         &#x27;                                    int &#x27;
                         &#x27;viewPagerSize = height - &#x27;
                         &#x27;Utils.dip2px(ChatSampleActivity.this, 30f);\n&#x27;
                         &#x27;                                    &#x27;
                         &#x27;pagerView.buildEmotionViews(\n&#x27;
                         &#x27;                                            &#x27;
                         &#x27;(PageIndicatorView) &#x27;
                         &#x27;mBinding.getRoot().findViewById(R.id.pageIndicatorView),\n&#x27;
                         &#x27;                                            &#x27;
                         &#x27;mBinding.editText,\n&#x27;
                         &#x27;                                            &#x27;
                         &#x27;Emotions.getEmotions(), width, viewPagerSize);\n&#x27;
                         &#x27;                                    break;\n&#x27;
                         &#x27;                                }\n&#x27;
                         &#x27;                                case &#x27;
                         &#x27;R.id.panel_addition: {\n&#x27;
                         &#x27;                                    //auto &#x27;
                         &#x27;center,nothing to do\n&#x27;
                         &#x27;                                    break;\n&#x27;
                         &#x27;                                }\n&#x27;
                         &#x27;                            }\n&#x27;
                         &#x27;                        }\n&#x27;
                         &#x27;                    })\n&#x27;
                         &#x27;                    .logTrack(true)             &#x27;
                         &#x27;//output log\n&#x27;
                         &#x27;                    .build();\n&#x27;
                         &#x27;        }\n&#x27;
                         &#x27;    }\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;    @Override\n&#x27;
                         &#x27;    public void onBackPressed() {\n&#x27;
                         &#x27;        if (mHelper != null &amp;&amp; &#x27;
                         &#x27;mHelper.hookSystemBackForHindPanel()) {\n&#x27;
                         &#x27;            return;\n&#x27;
                         &#x27;        }\n&#x27;
                         &#x27;        super.onBackPressed();\n&#x27;
                         &#x27;    }\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;    @Override\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;    protected void onDestroy() {\n&#x27;
                         &#x27;        super.onDestroy();\n&#x27;
                         &#x27;        if (mHelper != null) {\n&#x27;
                         &#x27;            mHelper.onDestroy();\n&#x27;
                         &#x27;        }\n&#x27;
                         &#x27;//        &#x27;
                         &#x27;mBinding.recyclerView.removeCallbacks(mScrollToBottomRunnable);\n&#x27;
                         &#x27;    }\n&#x27;
                         &#x27;}\n&#x27;,
           &#x27;CHUNK_THEIRS&#x27;: &#x27;&#x27;},
          {&#x27;CHUNK_OURS&#x27;: &#x27;package com.example.demo;\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;import android.databinding.DataBindingUtil;\n&#x27;
                         &#x27;import android.support.v7.app.AppCompatActivity;\n&#x27;
                         &#x27;import android.os.Bundle;\n&#x27;
                         &#x27;import &#x27;
                         &#x27;android.support.v7.widget.LinearLayoutManager;\n&#x27;
                         &#x27;import &#x27;
                         &#x27;android.support.v7.widget.SimpleItemAnimator;\n&#x27;
                         &#x27;import android.text.TextUtils;\n&#x27;
                         &#x27;import android.util.Log;\n&#x27;
                         &#x27;import android.view.View;\n&#x27;
                         &#x27;import android.widget.Button;\n&#x27;
                         &#x27;import android.widget.Toast;\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;import com.effective.R;\n&#x27;
                         &#x27;import &#x27;
                         &#x27;com.effective.android.panel.PanelSwitchHelper;\n&#x27;
                         &#x27;import &#x27;
                         &#x27;com.effective.android.panel.interfaces.listener.OnEditFocusChangeListener;\n&#x27;
                         &#x27;import &#x27;
                         &#x27;com.effective.android.panel.interfaces.listener.OnKeyboardStateListener;\n&#x27;
                         &#x27;import &#x27;
                         &#x27;com.effective.android.panel.interfaces.listener.OnPanelChangeListener;\n&#x27;
                         &#x27;import &#x27;
                         &#x27;com.effective.android.panel.interfaces.listener.OnViewClickListener;\n&#x27;
                         &#x27;import com.effective.android.panel.view.PanelView;\n&#x27;
                         &#x27;import &#x27;
                         &#x27;com.effective.databinding.ActivityChatLayoutBinding;\n&#x27;
                         &#x27;import com.example.demo.chat.ChatAdapter;\n&#x27;
                         &#x27;import com.example.demo.chat.ChatInfo;\n&#x27;
                         &#x27;import com.example.demo.emotion.EmotionPagerView;\n&#x27;
                         &#x27;import com.example.demo.emotion.Emotions;\n&#x27;
                         &#x27;import com.rd.PageIndicatorView;\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;import java.util.ArrayList;\n&#x27;
                         &#x27;import java.util.List;\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;/**\n&#x27;
                         &#x27; * Created by yummyLau on 18-7-11\n&#x27;
                         &#x27; * Email: yummyl.lau@gmail.com\n&#x27;
                         &#x27; * blog: yummylau.com\n&#x27;
                         &#x27; */\n&#x27;
                         &#x27;public class ChatSampleActivity extends &#x27;
                         &#x27;AppCompatActivity {\n&#x27;
                         &#x27;    private ActivityChatLayoutBinding mBinding;\n&#x27;
                         &#x27;    private PanelSwitchHelper mHelper;\n&#x27;
                         &#x27;    private ChatAdapter mAdapter;\n&#x27;
                         &#x27;    private LinearLayoutManager &#x27;
                         &#x27;mLinearLayoutManager;\n&#x27;
                         &#x27;    private Runnable mScrollToBottomRunnable;\n&#x27;
                         &#x27;    private static final String TAG = &#x27;
                         &#x27;&quot;ChatSampleActivity&quot;;\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;    @Override\n&#x27;
                         &#x27;    protected void onCreate(Bundle &#x27;
                         &#x27;savedInstanceState) {\n&#x27;
                         &#x27;        super.onCreate(savedInstanceState);\n&#x27;
                         &#x27;        mBinding = &#x27;
                         &#x27;DataBindingUtil.setContentView(this, &#x27;
                         &#x27;R.layout.activity_chat_layout);\n&#x27;
                         &#x27;        int type = &#x27;
                         &#x27;getIntent().getIntExtra(Constants.KEY_PAGE_TYPE, &#x27;
                         &#x27;PageType.DEFAULT);\n&#x27;
                         &#x27;        &#x27;
                         &#x27;//这里只是demo提前隐藏标题栏，如果应用自己实现了标题栏或者通过自定义view开发标题栏，根据业务隐藏或者设置透明色就可以了，随便扩展\n&#x27;
                         &#x27;        if(type == &#x27;
                         &#x27;PageType.TRANSPARENT_STATUS_BAR){\n&#x27;
                         &#x27;            &#x27;
                         &#x27;supportRequestWindowFeature(Window.FEATURE_NO_TITLE);\n&#x27;
                         &#x27;        }\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;        mBinding = &#x27;
                         &#x27;DataBindingUtil.setContentView(this, &#x27;
                         &#x27;R.layout.common_chat_layout);\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;        switch (type) {\n&#x27;
                         &#x27;            case PageType.COLOR_STATUS_BAR: {\n&#x27;
                         &#x27;                &#x27;
                         &#x27;StatusbarHelper.setStatusBarColor(this, &#x27;
                         &#x27;ContextCompat.getColor(this, &#x27;
                         &#x27;R.color.colorPrimary));\n&#x27;
                         &#x27;                //可以在代码设置，也可以在xml设置\n&#x27;
                         &#x27;                &#x27;
                         &#x27;mBinding.getRoot().setFitsSystemWindows(true);\n&#x27;
                         &#x27;                &#x27;
                         &#x27;mBinding.getRoot().setBackgroundColor(ContextCompat.getColor(this, &#x27;
                         &#x27;R.color.common_page_bg_color));\n&#x27;
                         &#x27;                break;\n&#x27;
                         &#x27;            }\n&#x27;
                         &#x27;            case PageType.TRANSPARENT_STATUS_BAR: {\n&#x27;
                         &#x27;                &#x27;
                         &#x27;StatusbarHelper.setStatusBarColor(this, &#x27;
                         &#x27;Color.TRANSPARENT);\n&#x27;
                         &#x27;                &#x27;
                         &#x27;mBinding.getRoot().setFitsSystemWindows(true);\n&#x27;
                         &#x27;                &#x27;
                         &#x27;mBinding.getRoot().setBackgroundResource(R.drawable.bg_gradient);\n&#x27;
                         &#x27;                &#x27;
                         &#x27;mBinding.panelContainer.setBackgroundColor(ContextCompat.getColor(this, &#x27;
                         &#x27;R.color.common_page_bg_color));\n&#x27;
                         &#x27;                break;\n&#x27;
                         &#x27;            }\n&#x27;
                         &#x27;            default: {\n&#x27;
                         &#x27;                &#x27;
                         &#x27;mBinding.getRoot().setBackgroundColor(ContextCompat.getColor(this, &#x27;
                         &#x27;R.color.common_page_bg_color));\n&#x27;
                         &#x27;            }\n&#x27;
                         &#x27;        }\n&#x27;
                         &#x27;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Stashed &#x27;
                         &#x27;changes:app/src/main/java/com/example/demo/ChatActivity.java\n&#x27;
                         &#x27;        initView();\n&#x27;
                         &#x27;    }\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;    private void initView() {\n&#x27;
                         &#x27;        mLinearLayoutManager = new &#x27;
                         &#x27;LinearLayoutManager(this);\n&#x27;
                         &#x27;        &#x27;
                         &#x27;mBinding.recyclerView.setLayoutManager(mLinearLayoutManager);\n&#x27;
                         &#x27;        ((SimpleItemAnimator) &#x27;
                         &#x27;mBinding.recyclerView.getItemAnimator()).setSupportsChangeAnimations(false);\n&#x27;
                         &#x27;        List&lt;ChatInfo&gt; chatInfos = new &#x27;
                         &#x27;ArrayList&lt;&gt;();\n&#x27;
                         &#x27;        for(int i = 0; i &lt; 50; i++){\n&#x27;
                         &#x27;            chatInfos.add(ChatInfo.CREATE(&quot;模拟数据第&quot; + &#x27;
                         &#x27;(i+1) + &quot;条&quot;));\n&#x27;
                         &#x27;        }\n&#x27;
                         &#x27;        mAdapter = new ChatAdapter(this,chatInfos);\n&#x27;
                         &#x27;        mBinding.recyclerView.setAdapter(mAdapter);\n&#x27;
                         &#x27;        mBinding.send.setOnClickListener(new &#x27;
                         &#x27;View.OnClickListener() {\n&#x27;
                         &#x27;            @Override\n&#x27;
                         &#x27;            public void onClick(View v) {\n&#x27;
                         &#x27;                String content = &#x27;
                         &#x27;mBinding.editText.getText().toString();\n&#x27;
                         &#x27;                if (TextUtils.isEmpty(content)) {\n&#x27;
                         &#x27;                    &#x27;
                         &#x27;Toast.makeText(ChatSampleActivity.this, &quot;当前没有输入&quot;, &#x27;
                         &#x27;Toast.LENGTH_SHORT).show();\n&#x27;
                         &#x27;                    return;\n&#x27;
                         &#x27;                }\n&#x27;
                         &#x27;                &#x27;
                         &#x27;mAdapter.insertInfo(ChatInfo.CREATE(content));\n&#x27;
                         &#x27;                mBinding.editText.setText(null);\n&#x27;
                         &#x27;                scrollToBottom();\n&#x27;
                         &#x27;            }\n&#x27;
                         &#x27;        });\n&#x27;
                         &#x27;        mScrollToBottomRunnable = new Runnable() {\n&#x27;
                         &#x27;            @Override\n&#x27;
                         &#x27;            public void run() {\n&#x27;
                         &#x27;                if (mAdapter.getItemCount() &gt; 0) {\n&#x27;
                         &#x27;                    &#x27;
                         &#x27;mLinearLayoutManager.scrollToPosition(mAdapter.getItemCount() &#x27;
                         &#x27;- 1);\n&#x27;
                         &#x27;                }\n&#x27;
                         &#x27;            }\n&#x27;
                         &#x27;        };\n&#x27;
                         &#x27;    }\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;    private void scrollToBottom() {\n&#x27;
                         &#x27;        &#x27;
                         &#x27;mBinding.recyclerView.postDelayed(mScrollToBottomRunnable, &#x27;
                         &#x27;0);\n&#x27;
                         &#x27;    }\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;    @Override\n&#x27;
                         &#x27;    protected void onStart() {\n&#x27;
                         &#x27;        super.onStart();\n&#x27;
                         &#x27;        if (mHelper == null) {\n&#x27;
                         &#x27;            mHelper = new &#x27;
                         &#x27;PanelSwitchHelper.Builder(this)\n&#x27;
                         &#x27;                    &#x27;
                         &#x27;.bindPanelSwitchLayout(R.id.panel_switch_layout)\n&#x27;
                         &#x27;                    &#x27;
                         &#x27;.bindPanelContainerId(R.id.panel_container)\n&#x27;
                         &#x27;                    &#x27;
                         &#x27;.bindContentContainerId(R.id.content_view)\n&#x27;
                         &#x27;                    //可选\n&#x27;
                         &#x27;                    .addKeyboardStateListener(new &#x27;
                         &#x27;OnKeyboardStateListener() {\n&#x27;
                         &#x27;                        @Override\n&#x27;
                         &#x27;                        public void &#x27;
                         &#x27;onKeyboardChange(boolean visible) {\n&#x27;
                         &#x27;                            if(visible){\n&#x27;
                         &#x27;                                scrollToBottom();\n&#x27;
                         &#x27;                            }\n&#x27;
                         &#x27;                            Log.d(TAG, &quot;系统键盘是否可见 : &quot; &#x27;
                         &#x27;+ visible);\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;                        }\n&#x27;
                         &#x27;                    })\n&#x27;
                         &#x27;                    //可选\n&#x27;
                         &#x27;                    &#x27;
                         &#x27;.addEdittextFocesChangeListener(new &#x27;
                         &#x27;OnEditFocusChangeListener() {\n&#x27;
                         &#x27;                        @Override\n&#x27;
                         &#x27;                        public void &#x27;
                         &#x27;onFocusChange(View view, boolean hasFocus) {\n&#x27;
                         &#x27;                            Log.d(TAG, &quot;输入框是否获得焦点 : &#x27;
                         &#x27;&quot; + hasFocus);\n&#x27;
                         &#x27;                        }\n&#x27;
                         &#x27;                    })\n&#x27;
                         &#x27;                    //可选\n&#x27;
                         &#x27;                    .addViewClickListener(new &#x27;
                         &#x27;OnViewClickListener() {\n&#x27;
                         &#x27;                        @Override\n&#x27;
                         &#x27;                        public void onViewClick(View &#x27;
                         &#x27;view) {\n&#x27;
                         &#x27;                            if(view.getId() != &#x27;
                         &#x27;R.id.empty_view){\n&#x27;
                         &#x27;                                scrollToBottom();\n&#x27;
                         &#x27;                            }\n&#x27;
                         &#x27;                            Log.d(TAG, &quot;点击了View : &quot; &#x27;
                         &#x27;+ view);\n&#x27;
                         &#x27;                        }\n&#x27;
                         &#x27;                    })\n&#x27;
                         &#x27;                    //可选\n&#x27;
                         &#x27;                    .addPanelChangeListener(new &#x27;
                         &#x27;OnPanelChangeListener() {\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;                        @Override\n&#x27;
                         &#x27;                        public void onKeyboard() {\n&#x27;
                         &#x27;                            Log.d(TAG, &quot;唤起系统输入法&quot;);\n&#x27;
                         &#x27;                            &#x27;
                         &#x27;mBinding.emotionBtn.setSelected(false);\n&#x27;
                         &#x27;                        }\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;                        @Override\n&#x27;
                         &#x27;                        public void onNone() {\n&#x27;
                         &#x27;                            Log.d(TAG, &quot;隐藏所有面板&quot;);\n&#x27;
                         &#x27;                            &#x27;
                         &#x27;mBinding.emotionBtn.setSelected(false);\n&#x27;
                         &#x27;                        }\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;                        @Override\n&#x27;
                         &#x27;                        public void &#x27;
                         &#x27;onPanel(PanelView view) {\n&#x27;
                         &#x27;                            Log.d(TAG, &quot;唤起面板 : &quot; + &#x27;
                         &#x27;view);\n&#x27;
                         &#x27;                            &#x27;
                         &#x27;mBinding.emotionBtn.setSelected(view.getId() == &#x27;
                         &#x27;R.id.panel_emotion ? true : false);\n&#x27;
                         &#x27;                        }\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;                        @Override\n&#x27;
                         &#x27;                        public void &#x27;
                         &#x27;onPanelSizeChange(PanelView panelView, boolean &#x27;
                         &#x27;portrait, int oldWidth, int oldHeight, int width, &#x27;
                         &#x27;int height) {\n&#x27;
                         &#x27;                            switch &#x27;
                         &#x27;(panelView.getId()) {\n&#x27;
                         &#x27;                                case &#x27;
                         &#x27;R.id.panel_emotion: {\n&#x27;
                         &#x27;                                    EmotionPagerView &#x27;
                         &#x27;pagerView = &#x27;
                         &#x27;mBinding.getRoot().findViewById(R.id.view_pager);\n&#x27;
                         &#x27;                                    int &#x27;
                         &#x27;viewPagerSize = height - &#x27;
                         &#x27;Utils.dip2px(ChatSampleActivity.this, 30f);\n&#x27;
                         &#x27;                                    &#x27;
                         &#x27;pagerView.buildEmotionViews(\n&#x27;
                         &#x27;                                            &#x27;
                         &#x27;(PageIndicatorView) &#x27;
                         &#x27;mBinding.getRoot().findViewById(R.id.pageIndicatorView),\n&#x27;
                         &#x27;                                            &#x27;
                         &#x27;mBinding.editText,\n&#x27;
                         &#x27;                                            &#x27;
                         &#x27;Emotions.getEmotions(), width, viewPagerSize);\n&#x27;
                         &#x27;                                    break;\n&#x27;
                         &#x27;                                }\n&#x27;
                         &#x27;                                case &#x27;
                         &#x27;R.id.panel_addition: {\n&#x27;
                         &#x27;                                    //auto &#x27;
                         &#x27;center,nothing to do\n&#x27;
                         &#x27;                                    break;\n&#x27;
                         &#x27;                                }\n&#x27;
                         &#x27;                            }\n&#x27;
                         &#x27;                        }\n&#x27;
                         &#x27;                    })\n&#x27;
                         &#x27;                    .logTrack(true)             &#x27;
                         &#x27;//output log\n&#x27;
                         &#x27;                    .build();\n&#x27;
                         &#x27;        }\n&#x27;
                         &#x27;    }\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;    @Override\n&#x27;
                         &#x27;    public void onBackPressed() {\n&#x27;
                         &#x27;        if (mHelper != null &amp;&amp; &#x27;
                         &#x27;mHelper.hookSystemBackForHindPanel()) {\n&#x27;
                         &#x27;            return;\n&#x27;
                         &#x27;        }\n&#x27;
                         &#x27;        super.onBackPressed();\n&#x27;
                         &#x27;    }\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;    @Override\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;    protected void onDestroy() {\n&#x27;
                         &#x27;        super.onDestroy();\n&#x27;
                         &#x27;        if (mHelper != null) {\n&#x27;
                         &#x27;            mHelper.onDestroy();\n&#x27;
                         &#x27;        }\n&#x27;
                         &#x27;//        &#x27;
                         &#x27;mBinding.recyclerView.removeCallbacks(mScrollToBottomRunnable);\n&#x27;
                         &#x27;    }\n&#x27;
                         &#x27;}\n&#x27;,
           &#x27;CHUNK_THEIRS&#x27;: &#x27;\n&#x27;}],
   &#x27;mergers&#x27;: {&#x27;baseline&#x27;, &#x27;spork&#x27;, &#x27;jfstmerge&#x27;}}]]</pre>
          </body>
        </html>
        