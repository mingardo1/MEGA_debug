<!DOCTYPE html>
    <html lang="en">
              <head>
                <meta charset="utf-8">
                <title>84</title>
                    <style>
                        #top {
                            height: 48vh;
                            overflow-y: auto;
                        }
                        #bottom {
                            height: 48vh;
                            overflow-y: auto;
                        }
                        .highlighted {
                            background-color: rgba(177, 82, 227, 0.85) !important;
                        }
                    </style>
                    <script>
                        function enter(c) {
                            const lines = document.getElementsByClassName(c);
                            for (let i = 0; i < lines.length; i++) {
                               lines.item(i).classList.add('highlighted');
                            }
                        }
                        function out(c) {
                            const lines = document.getElementsByClassName(c);
                            for (let i = 0; i < lines.length; i++) {
                               lines.item(i).classList.remove('highlighted');
                            }
                        }
                    </script>
              </head>
              <body>
                <span style="height: 4vh">
                    84
                    <a href="83.html">prev</a>
                    <a href="85.html">next</a>
                    <a href="84_chunks.html">chunks</a>
                    <a href="index.html">index</a>
                    Automattic/simplenote-android_847cc65342fcbd44235ea5a83f1a08b103b6ddab_Simplenote/src/main/java/com/automattic/simplenote/NoteEditorFragment.java
                    <textarea rows=1 onclick='navigator.clipboard.writeText(this.value)'>cd C:\studies\se\mega\git-analyzer-plus\notebooks\debug
del /Q *
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\Automattic\simplenote-android show &quot;847cc65342fcbd44235ea5a83f1a08b103b6ddab:Simplenote/src/main/java/com/automattic/simplenote/NoteEditorFragment.java&quot; &gt; committed.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\Automattic\simplenote-android show &quot;847cc65342fcbd44235ea5a83f1a08b103b6ddab^1:Simplenote/src/main/java/com/automattic/simplenote/NoteEditorFragment.java&quot; &gt; ours.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\Automattic\simplenote-android show &quot;847cc65342fcbd44235ea5a83f1a08b103b6ddab^2:Simplenote/src/main/java/com/automattic/simplenote/NoteEditorFragment.java&quot; &gt; theirs.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\Automattic\simplenote-android show &quot;ce7aec49945699c066e58c1e519ba95d78c8bce4:Simplenote/src/main/java/com/automattic/simplenote/NoteEditorFragment.java&quot; &gt; base.java
copy ours.java 1ours.java
copy ours.java 2ours.java
copy theirs.java 1theirs.java
copy theirs.java 2theirs.java
copy base.java 1base.java
copy base.java 2base.java
&quot;C:\Program Files\Java\jdk1.8.0_241\bin\java.exe&quot; -Dfile.encoding=UTF-8 -jar &quot;C:\studies\se\jFSTMerge\build\libs\jFSTMerge-all.jar&quot; C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1ours.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1base.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1theirs.java -o C:\studies\se\mega\git-analyzer-plus\notebooks\debug\jfstmerge.java --show-base
&quot;C:\Program Files\Eclipse Adoptium\jdk-17.0.11.9-hotspot\bin\java.exe&quot; -Dfile.encoding=UTF-8 -jar &quot;C:\studies\se\spork\target\spork-0.5.0-SNAPSHOT.jar&quot; C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2ours.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2base.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2theirs.java -o C:\studies\se\mega\git-analyzer-plus\notebooks\debug\spork.java
del /Q 1*.java
del /Q 2*.java
del /Q jfstmerge.java.merge
</textarea>
                    {strict: [[bj]], subset: [[bj]]}
                </span>
                <div id="top">

                    <table>
                        <tr>
                            <th>line based (standard git)</th>
                            <th>jfstmerge</th>
                            <th>spork</th>
                        </tr>
                        <tr>
                            <td><pre><span class="8328120990598135231" onmouseenter="enter('8328120990598135231');" onmouseout="out('8328120990598135231');" style="">   1 package com.automattic.simplenote;                                                                       </span>
<span  style="">   2                                                                                                          </span>
<span class="-7090287939251728203" onmouseenter="enter('-7090287939251728203');" onmouseout="out('-7090287939251728203');" style="">   3 import android.app.Activity;                                                                             </span>
<span class="5922045460006936195" onmouseenter="enter('5922045460006936195');" onmouseout="out('5922045460006936195');" style="">   4 import android.content.Context;                                                                          </span>
<span class="4122587240602557356" onmouseenter="enter('4122587240602557356');" onmouseout="out('4122587240602557356');" style="">   5 import android.content.SharedPreferences;                                                                </span>
<span class="437349496656716435" onmouseenter="enter('437349496656716435');" onmouseout="out('437349496656716435');" style="">   6 import android.content.res.ColorStateList;                                                               </span>
<span class="6294169624328016071" onmouseenter="enter('6294169624328016071');" onmouseout="out('6294169624328016071');" style="">   7 import android.database.Cursor;                                                                          </span>
<span class="-5606798514618908790" onmouseenter="enter('-5606798514618908790');" onmouseout="out('-5606798514618908790');" style="">   8 import android.graphics.Typeface;                                                                        </span>
<span class="-1737226814075322931" onmouseenter="enter('-1737226814075322931');" onmouseout="out('-1737226814075322931');" style="">   9 import android.graphics.drawable.Drawable;                                                               </span>
<span class="955674827050616793" onmouseenter="enter('955674827050616793');" onmouseout="out('955674827050616793');" style="">  10 import android.os.AsyncTask;                                                                             </span>
<span class="8096531590004379472" onmouseenter="enter('8096531590004379472');" onmouseout="out('8096531590004379472');" style="">  11 import android.os.Bundle;                                                                                </span>
<span class="-1086316590722027623" onmouseenter="enter('-1086316590722027623');" onmouseout="out('-1086316590722027623');" style="">  12 import android.os.Handler;                                                                               </span>
<span class="4177373235046048356" onmouseenter="enter('4177373235046048356');" onmouseout="out('4177373235046048356');" style="">  13 import android.text.Editable;                                                                            </span>
<span class="-578015270574978569" onmouseenter="enter('-578015270574978569');" onmouseout="out('-578015270574978569');" style="">  14 import android.text.Layout;                                                                              </span>
<span class="7731806713123176572" onmouseenter="enter('7731806713123176572');" onmouseout="out('7731806713123176572');" style="">  15 import android.text.Spanned;                                                                             </span>
<span class="-3299261040401335998" onmouseenter="enter('-3299261040401335998');" onmouseout="out('-3299261040401335998');" style="">  16 import android.text.TextUtils.SimpleStringSplitter;                                                      </span>
<span class="4038639591141008331" onmouseenter="enter('4038639591141008331');" onmouseout="out('4038639591141008331');" style="">  17 import android.text.TextWatcher;                                                                         </span>
<span class="-654170262772204786" onmouseenter="enter('-654170262772204786');" onmouseout="out('-654170262772204786');" style="">  18 import android.text.style.MetricAffectingSpan;                                                           </span>
<span class="2374973474356501783" onmouseenter="enter('2374973474356501783');" onmouseout="out('2374973474356501783');" style="">  19 import android.text.style.RelativeSizeSpan;                                                              </span>
<span class="-6813443535687611228" onmouseenter="enter('-6813443535687611228');" onmouseout="out('-6813443535687611228');" style="">  20 import android.text.style.StyleSpan;                                                                     </span>
<span class="-1165963660754430642" onmouseenter="enter('-1165963660754430642');" onmouseout="out('-1165963660754430642');" style="">  21 import android.text.style.URLSpan;                                                                       </span>
<span class="-3804250137032727253" onmouseenter="enter('-3804250137032727253');" onmouseout="out('-3804250137032727253');" style="">  22 import android.text.util.Linkify;                                                                        </span>
<span class="-1289400933432271961" onmouseenter="enter('-1289400933432271961');" onmouseout="out('-1289400933432271961');" style="">  23 import android.util.TypedValue;                                                                          </span>
<span class="8553241717595905778" onmouseenter="enter('8553241717595905778');" onmouseout="out('8553241717595905778');" style="">  24 import android.view.LayoutInflater;                                                                      </span>
<span class="-603490076395619238" onmouseenter="enter('-603490076395619238');" onmouseout="out('-603490076395619238');" style="">  25 import android.view.Menu;                                                                                </span>
<span class="-434306062495579804" onmouseenter="enter('-434306062495579804');" onmouseout="out('-434306062495579804');" style="">  26 import android.view.MenuInflater;                                                                        </span>
<span class="6391706839654240930" onmouseenter="enter('6391706839654240930');" onmouseout="out('6391706839654240930');" style="">  27 import android.view.MenuItem;                                                                            </span>
<span class="-8980485571216513882" onmouseenter="enter('-8980485571216513882');" onmouseout="out('-8980485571216513882');" style="">  28 import android.view.View;                                                                                </span>
<span class="7569314084591619834" onmouseenter="enter('7569314084591619834');" onmouseout="out('7569314084591619834');" style="">  29 import android.view.ViewGroup;                                                                           </span>
<span class="-4985651548362660777" onmouseenter="enter('-4985651548362660777');" onmouseout="out('-4985651548362660777');" style="">  30 import android.view.ViewTreeObserver;                                                                    </span>
<span class="-3117363671899680167" onmouseenter="enter('-3117363671899680167');" onmouseout="out('-3117363671899680167');" style="">  31 import android.view.inputmethod.InputMethodManager;                                                      </span>
<span class="1348319594514771408" onmouseenter="enter('1348319594514771408');" onmouseout="out('1348319594514771408');" style="">  32 import android.webkit.WebResourceRequest;                                                                </span>
<span class="2723690893492346945" onmouseenter="enter('2723690893492346945');" onmouseout="out('2723690893492346945');" style="">  33 import android.webkit.WebView;                                                                           </span>
<span class="-3167847991483127041" onmouseenter="enter('-3167847991483127041');" onmouseout="out('-3167847991483127041');" style="">  34 import android.webkit.WebViewClient;                                                                     </span>
<span class="2736968318319789680" onmouseenter="enter('2736968318319789680');" onmouseout="out('2736968318319789680');" style="">  35 import android.widget.CompoundButton;                                                                    </span>
<span class="5634491474902588492" onmouseenter="enter('5634491474902588492');" onmouseout="out('5634491474902588492');" style="">  36 import android.widget.CursorAdapter;                                                                     </span>
<span class="5987800420235491716" onmouseenter="enter('5987800420235491716');" onmouseout="out('5987800420235491716');" style="">  37 import android.widget.LinearLayout;                                                                      </span>
<span class="-4961528671422147708" onmouseenter="enter('-4961528671422147708');" onmouseout="out('-4961528671422147708');" style="">  38 import android.widget.TextView;                                                                          </span>
<span class="-4373317539211938720" onmouseenter="enter('-4373317539211938720');" onmouseout="out('-4373317539211938720');" style="">  39 import android.widget.Toast;                                                                             </span>
<span  style="">  40                                                                                                          </span>
<span class="6963272077887521702" onmouseenter="enter('6963272077887521702');" onmouseout="out('6963272077887521702');" style="">  41 import androidx.annotation.NonNull;                                                                      </span>
<span class="-4688549274525092465" onmouseenter="enter('-4688549274525092465');" onmouseout="out('-4688549274525092465');" style="">  42 import androidx.annotation.StringRes;                                                                    </span>
<span class="8057892732248099365" onmouseenter="enter('8057892732248099365');" onmouseout="out('8057892732248099365');" style="">  43 import androidx.appcompat.app.AppCompatActivity;                                                         </span>
<span class="2035494855708115696" onmouseenter="enter('2035494855708115696');" onmouseout="out('2035494855708115696');" style="">  44 import androidx.appcompat.view.ActionMode;                                                               </span>
<span class="-6344652174315873597" onmouseenter="enter('-6344652174315873597');" onmouseout="out('-6344652174315873597');" style="">  45 import androidx.core.app.ShareCompat;                                                                    </span>
<span class="-362404946986079023" onmouseenter="enter('-362404946986079023');" onmouseout="out('-362404946986079023');" style="">  46 import androidx.core.view.MenuCompat;                                                                    </span>
<span class="-767584428700722881" onmouseenter="enter('-767584428700722881');" onmouseout="out('-767584428700722881');" style="">  47 import androidx.core.widget.NestedScrollView;                                                            </span>
<span class="2878002094531064439" onmouseenter="enter('2878002094531064439');" onmouseout="out('2878002094531064439');" style="">  48 import androidx.fragment.app.Fragment;                                                                   </span>
<span class="-6950145472733447700" onmouseenter="enter('-6950145472733447700');" onmouseout="out('-6950145472733447700');" style="">  49 import androidx.fragment.app.FragmentTransaction;                                                        </span>
<span class="-7272383226560052741" onmouseenter="enter('-7272383226560052741');" onmouseout="out('-7272383226560052741');" style="">  50 import androidx.preference.PreferenceManager;                                                            </span>
<span  style="">  51                                                                                                          </span>
<span class="-155835000323929258" onmouseenter="enter('-155835000323929258');" onmouseout="out('-155835000323929258');" style="">  52 import com.automattic.simplenote.analytics.AnalyticsTracker;                                             </span>
<span class="9061368408436996655" onmouseenter="enter('9061368408436996655');" onmouseout="out('9061368408436996655');" style="">  53 import com.automattic.simplenote.models.Note;                                                            </span>
<span class="107771998888903823" onmouseenter="enter('107771998888903823');" onmouseout="out('107771998888903823');" style="">  54 import com.automattic.simplenote.models.Tag;                                                             </span>
<span class="160698548927534529" onmouseenter="enter('160698548927534529');" onmouseout="out('160698548927534529');" style="">  55 import com.automattic.simplenote.utils.AppLog;                                                           </span>
<span class="7580776162261256599" onmouseenter="enter('7580776162261256599');" onmouseout="out('7580776162261256599');" style="">  56 import com.automattic.simplenote.utils.AppLog.Type;                                                      </span>
<span class="-4380838228434146133" onmouseenter="enter('-4380838228434146133');" onmouseout="out('-4380838228434146133');" style="">  57 import com.automattic.simplenote.utils.AutoBullet;                                                       </span>
<span class="1593315676680608324" onmouseenter="enter('1593315676680608324');" onmouseout="out('1593315676680608324');" style="">  58 import com.automattic.simplenote.utils.BrowserUtils;                                                     </span>
<span class="8229771960302052711" onmouseenter="enter('8229771960302052711');" onmouseout="out('8229771960302052711');" style="">  59 import com.automattic.simplenote.utils.ContextUtils;                                                     </span>
<span class="8577850632926167445" onmouseenter="enter('8577850632926167445');" onmouseout="out('8577850632926167445');" style="">  60 import com.automattic.simplenote.utils.DisplayUtils;                                                     </span>
<span class="930019215389101465" onmouseenter="enter('930019215389101465');" onmouseout="out('930019215389101465');" style="">  61 import com.automattic.simplenote.utils.DrawableUtils;                                                    </span>
<span class="1327521140651609704" onmouseenter="enter('1327521140651609704');" onmouseout="out('1327521140651609704');" style="">  62 import com.automattic.simplenote.utils.MatchOffsetHighlighter;                                           </span>
<span class="6713747859106964949" onmouseenter="enter('6713747859106964949');" onmouseout="out('6713747859106964949');" style="">  63 import com.automattic.simplenote.utils.NetworkUtils;                                                     </span>
<span class="2290458949892536112" onmouseenter="enter('2290458949892536112');" onmouseout="out('2290458949892536112');" style="">  64 import com.automattic.simplenote.utils.NoteUtils;                                                        </span>
<span class="-7136497821822559876" onmouseenter="enter('-7136497821822559876');" onmouseout="out('-7136497821822559876');" style="">  65 import com.automattic.simplenote.utils.PrefUtils;                                                        </span>
<span class="2537926396801226048" onmouseenter="enter('2537926396801226048');" onmouseout="out('2537926396801226048');" style="">  66 import com.automattic.simplenote.utils.SimplenoteLinkify;                                                </span>
<span class="-42292328951391685" onmouseenter="enter('-42292328951391685');" onmouseout="out('-42292328951391685');" style="">  67 import com.automattic.simplenote.utils.SimplenoteMovementMethod;                                         </span>
<span class="13513923158165555" onmouseenter="enter('13513923158165555');" onmouseout="out('13513923158165555');" style="">  68 import com.automattic.simplenote.utils.SpaceTokenizer;                                                   </span>
<span class="-643769428942460504" onmouseenter="enter('-643769428942460504');" onmouseout="out('-643769428942460504');" style="">  69 import com.automattic.simplenote.utils.TagUtils;                                                         </span>
<span class="-4652171765784917488" onmouseenter="enter('-4652171765784917488');" onmouseout="out('-4652171765784917488');" style="">  70 import com.automattic.simplenote.utils.TagsMultiAutoCompleteTextView;                                    </span>
<span class="451633977271230846" onmouseenter="enter('451633977271230846');" onmouseout="out('451633977271230846');" style="">  71 import com.automattic.simplenote.utils.TagsMultiAutoCompleteTextView.OnTagAddedListener;                 </span>
<span class="3055903766206676561" onmouseenter="enter('3055903766206676561');" onmouseout="out('3055903766206676561');" style="">  72 import com.automattic.simplenote.utils.TextHighlighter;                                                  </span>
<span class="7305000128845659611" onmouseenter="enter('7305000128845659611');" onmouseout="out('7305000128845659611');" style="">  73 import com.automattic.simplenote.utils.ThemeUtils;                                                       </span>
<span class="-3457858113236631039" onmouseenter="enter('-3457858113236631039');" onmouseout="out('-3457858113236631039');" style="">  74 import com.automattic.simplenote.utils.WidgetUtils;                                                      </span>
<span class="4834384566534786428" onmouseenter="enter('4834384566534786428');" onmouseout="out('4834384566534786428');" style="">  75 import com.automattic.simplenote.widgets.SimplenoteEditText;                                             </span>
<span class="4924672443805777373" onmouseenter="enter('4924672443805777373');" onmouseout="out('4924672443805777373');" style="">  76 import com.google.android.material.chip.Chip;                                                            </span>
<span class="6530176725815500896" onmouseenter="enter('6530176725815500896');" onmouseout="out('6530176725815500896');" style="">  77 import com.google.android.material.chip.ChipGroup;                                                       </span>
<span class="-6749865676367010343" onmouseenter="enter('-6749865676367010343');" onmouseout="out('-6749865676367010343');" style="">  78 import com.google.android.material.snackbar.Snackbar;                                                    </span>
<span class="-8170925370861558125" onmouseenter="enter('-8170925370861558125');" onmouseout="out('-8170925370861558125');" style="">  79 import com.simperium.client.Bucket;                                                                      </span>
<span class="-8454203534157102839" onmouseenter="enter('-8454203534157102839');" onmouseout="out('-8454203534157102839');" style="">  80 import com.simperium.client.BucketObjectMissingException;                                                </span>
<span class="-6020507013779766735" onmouseenter="enter('-6020507013779766735');" onmouseout="out('-6020507013779766735');" style="">  81 import com.simperium.client.Query;                                                                       </span>
<span  style="">  82                                                                                                          </span>
<span class="-8692343821508153377" onmouseenter="enter('-8692343821508153377');" onmouseout="out('-8692343821508153377');" style="">  83 import java.lang.ref.WeakReference;                                                                      </span>
<span class="1562735530241225598" onmouseenter="enter('1562735530241225598');" onmouseout="out('1562735530241225598');" style="">  84 import java.util.Calendar;                                                                               </span>
<span  style="">  85                                                                                                          </span>
<span class="-3102294303099779792" onmouseenter="enter('-3102294303099779792');" onmouseout="out('-3102294303099779792');" style="">  86 import static com.automattic.simplenote.analytics.AnalyticsTracker.CATEGORY_NOTE;                        </span>
<span class="5242531748460347937" onmouseenter="enter('5242531748460347937');" onmouseout="out('5242531748460347937');" style="">  87 import static com.automattic.simplenote.analytics.AnalyticsTracker.Stat.EDITOR_CHECKLIST_INSERTED;       </span>
<span class="-3490868053375355616" onmouseenter="enter('-3490868053375355616');" onmouseout="out('-3490868053375355616');" style="">  88 import static com.automattic.simplenote.analytics.AnalyticsTracker.Stat.EDITOR_NOTE_CONTENT_SHARED;      </span>
<span class="-2121854313245668982" onmouseenter="enter('-2121854313245668982');" onmouseout="out('-2121854313245668982');" style="">  89 import static com.automattic.simplenote.analytics.AnalyticsTracker.Stat.EDITOR_NOTE_EDITED;              </span>
<span class="-6581780444010205945" onmouseenter="enter('-6581780444010205945');" onmouseout="out('-6581780444010205945');" style="">  90 import static com.automattic.simplenote.analytics.AnalyticsTracker.Stat.EDITOR_NOTE_PUBLISHED;           </span>
<span class="-9109271177878770606" onmouseenter="enter('-9109271177878770606');" onmouseout="out('-9109271177878770606');" style="">  91 import static com.automattic.simplenote.analytics.AnalyticsTracker.Stat.EDITOR_NOTE_UNPUBLISHED;         </span>
<span class="1895845895606351499" onmouseenter="enter('1895845895606351499');" onmouseout="out('1895845895606351499');" style="">  92 import static com.automattic.simplenote.analytics.AnalyticsTracker.Stat.EDITOR_TAG_ADDED;                </span>
<span class="-7938671928844888956" onmouseenter="enter('-7938671928844888956');" onmouseout="out('-7938671928844888956');" style="">  93 import static com.automattic.simplenote.analytics.AnalyticsTracker.Stat.EDITOR_TAG_REMOVED;              </span>
<span class="8057784740076816561" onmouseenter="enter('8057784740076816561');" onmouseout="out('8057784740076816561');" style="">  94 import static com.automattic.simplenote.utils.SearchTokenizer.SPACE;                                     </span>
<span class="-4405840676582391526" onmouseenter="enter('-4405840676582391526');" onmouseout="out('-4405840676582391526');" style="">  95 import static com.automattic.simplenote.utils.SimplenoteLinkify.SIMPLENOTE_LINK_PREFIX;                  </span>
<span  style="">  96                                                                                                          </span>
<span class="-5596461229958448202" onmouseenter="enter('-5596461229958448202');" onmouseout="out('-5596461229958448202');" style="">  97 public class NoteEditorFragment extends Fragment implements Bucket.Listener&lt;Note&gt;,                       </span>
<span class="-9099249676109797171" onmouseenter="enter('-9099249676109797171');" onmouseout="out('-9099249676109797171');" style="">  98         TextWatcher, OnTagAddedListener, View.OnFocusChangeListener,                                     </span>
<span class="-4114387936964500842" onmouseenter="enter('-4114387936964500842');" onmouseout="out('-4114387936964500842');" style="">  99         SimplenoteEditText.OnSelectionChangedListener,                                                   </span>
<span class="-5510788947576290679" onmouseenter="enter('-5510788947576290679');" onmouseout="out('-5510788947576290679');" style=""> 100         ShareBottomSheetDialog.ShareSheetListener,                                                       </span>
<span class="2293972252045109195" onmouseenter="enter('2293972252045109195');" onmouseout="out('2293972252045109195');" style=""> 101         HistoryBottomSheetDialog.HistorySheetListener,                                                   </span>
<span class="-712538187674189072" onmouseenter="enter('-712538187674189072');" onmouseout="out('-712538187674189072');" style=""> 102         SimplenoteEditText.OnCheckboxToggledListener {                                                   </span>
<span  style=""> 103                                                                                                          </span>
<span class="7313308760576274084" onmouseenter="enter('7313308760576274084');" onmouseout="out('7313308760576274084');" style=""> 104     public static final String ARG_IS_FROM_WIDGET = &quot;is_from_widget&quot;;                                    </span>
<span class="-4619625032881090052" onmouseenter="enter('-4619625032881090052');" onmouseout="out('-4619625032881090052');" style=""> 105     public static final String ARG_ITEM_ID = &quot;item_id&quot;;                                                  </span>
<span class="-7299684920632401552" onmouseenter="enter('-7299684920632401552');" onmouseout="out('-7299684920632401552');" style=""> 106     public static final String ARG_NEW_NOTE = &quot;new_note&quot;;                                                </span>
<span class="5570942911396170891" onmouseenter="enter('5570942911396170891');" onmouseout="out('5570942911396170891');" style=""> 107     public static final String ARG_MATCH_OFFSETS = &quot;match_offsets&quot;;                                      </span>
<span class="8145563106929735928" onmouseenter="enter('8145563106929735928');" onmouseout="out('8145563106929735928');" style=""> 108     public static final String ARG_MARKDOWN_ENABLED = &quot;markdown_enabled&quot;;                                </span>
<span class="-9204037548779502592" onmouseenter="enter('-9204037548779502592');" onmouseout="out('-9204037548779502592');" style=""> 109     public static final String ARG_PREVIEW_ENABLED = &quot;preview_enabled&quot;;                                  </span>
<span class="-4900097812038151447" onmouseenter="enter('-4900097812038151447');" onmouseout="out('-4900097812038151447');" style=""> 110     private static final String STATE_NOTE_ID = &quot;state_note_id&quot;;                                         </span>
<span class="8491452362607628076" onmouseenter="enter('8491452362607628076');" onmouseout="out('8491452362607628076');" style=""> 111     private static final int AUTOSAVE_DELAY_MILLIS = 2000;                                               </span>
<span class="6474488624255872222" onmouseenter="enter('6474488624255872222');" onmouseout="out('6474488624255872222');" style=""> 112     private static final int MAX_REVISIONS = 30;                                                         </span>
<span class="2597021995687752472" onmouseenter="enter('2597021995687752472');" onmouseout="out('2597021995687752472');" style=""> 113     private static final int PUBLISH_TIMEOUT = 20000;                                                    </span>
<span class="3616229628179044566" onmouseenter="enter('3616229628179044566');" onmouseout="out('3616229628179044566');" style=""> 114     private static final int HISTORY_TIMEOUT = 10000;                                                    </span>
<span class="-6846870049312317979" onmouseenter="enter('-6846870049312317979');" onmouseout="out('-6846870049312317979');" style=""> 115     private Note mNote;                                                                                  </span>
<span class="-567099590261614492" onmouseenter="enter('-567099590261614492');" onmouseout="out('-567099590261614492');" style=""> 116     private final Runnable mAutoSaveRunnable = new Runnable() {                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 117         @Override                                                                                        </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 118         public void run() {                                                                              </span>
<span class="-2186856349666885424" onmouseenter="enter('-2186856349666885424');" onmouseout="out('-2186856349666885424');" style=""> 119             saveAndSyncNote();                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 120         }                                                                                                </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 121     };                                                                                                   </span>
<span class="-7913886194286774922" onmouseenter="enter('-7913886194286774922');" onmouseout="out('-7913886194286774922');" style=""> 122     private Bucket&lt;Note&gt; mNotesBucket;                                                                   </span>
<span class="335650161029573145" onmouseenter="enter('335650161029573145');" onmouseout="out('335650161029573145');" style=""> 123     private View mRootView;                                                                              </span>
<span class="8292114391111638673" onmouseenter="enter('8292114391111638673');" onmouseout="out('8292114391111638673');" style=""> 124     private View mTagPadding;                                                                            </span>
<span class="6580801006778009663" onmouseenter="enter('6580801006778009663');" onmouseout="out('6580801006778009663');" style=""> 125     private SimplenoteEditText mContentEditText;                                                         </span>
<span class="-1116191624704212145" onmouseenter="enter('-1116191624704212145');" onmouseout="out('-1116191624704212145');" style=""> 126     private ChipGroup mTagChips;                                                                         </span>
<span class="7794609246836871312" onmouseenter="enter('7794609246836871312');" onmouseout="out('7794609246836871312');" style=""> 127     private TagsMultiAutoCompleteTextView mTagInput;                                                     </span>
<span class="6494121288462075344" onmouseenter="enter('6494121288462075344');" onmouseout="out('6494121288462075344');" style=""> 128     private Handler mAutoSaveHandler;                                                                    </span>
<span class="8783277907965445564" onmouseenter="enter('8783277907965445564');" onmouseout="out('8783277907965445564');" style=""> 129     private Handler mPublishTimeoutHandler;                                                              </span>
<span class="4217449185156868905" onmouseenter="enter('4217449185156868905');" onmouseout="out('4217449185156868905');" style=""> 130     private Handler mHistoryTimeoutHandler;                                                              </span>
<span class="-1776320876088405367" onmouseenter="enter('-1776320876088405367');" onmouseout="out('-1776320876088405367');" style=""> 131     private LinearLayout mPlaceholderView;                                                               </span>
<span class="-5862875858497045082" onmouseenter="enter('-5862875858497045082');" onmouseout="out('-5862875858497045082');" style=""> 132     private CursorAdapter mAutocompleteAdapter;                                                          </span>
<span class="-7523089573477153489" onmouseenter="enter('-7523089573477153489');" onmouseout="out('-7523089573477153489');" style=""> 133     private boolean mIsLoadingNote;                                                                      </span>
<span class="-721861736726211964" onmouseenter="enter('-721861736726211964');" onmouseout="out('-721861736726211964');" style=""> 134     private boolean mIsMarkdownEnabled;                                                                  </span>
<span class="5667351599274937983" onmouseenter="enter('5667351599274937983');" onmouseout="out('5667351599274937983');" style=""> 135     private boolean mIsPreviewEnabled;                                                                   </span>
<span class="1780690803770096596" onmouseenter="enter('1780690803770096596');" onmouseout="out('1780690803770096596');" style=""> 136     private boolean mShouldScrollToSearchMatch;                                                          </span>
<span class="7307228847460234411" onmouseenter="enter('7307228847460234411');" onmouseout="out('7307228847460234411');" style=""> 137     private ActionMode mActionMode;                                                                      </span>
<span class="6272698018239268533" onmouseenter="enter('6272698018239268533');" onmouseout="out('6272698018239268533');" style=""> 138     private MenuItem mChecklistMenuItem;                                                                 </span>
<span class="-801211553419280849" onmouseenter="enter('-801211553419280849');" onmouseout="out('-801211553419280849');" style=""> 139     private MenuItem mCopyMenuItem;                                                                      </span>
<span class="-8722853698202618925" onmouseenter="enter('-8722853698202618925');" onmouseout="out('-8722853698202618925');" style=""> 140     private MenuItem mInformationMenuItem;                                                               </span>
<span class="6754990951372191595" onmouseenter="enter('6754990951372191595');" onmouseout="out('6754990951372191595');" style=""> 141     private MenuItem mShareMenuItem;                                                                     </span>
<span class="-1934738222867341331" onmouseenter="enter('-1934738222867341331');" onmouseout="out('-1934738222867341331');" style=""> 142     private MenuItem mViewLinkMenuItem;                                                                  </span>
<span class="-3624836155172024592" onmouseenter="enter('-3624836155172024592');" onmouseout="out('-3624836155172024592');" style=""> 143     private String mLinkUrl;                                                                             </span>
<span class="-680149036339568713" onmouseenter="enter('-680149036339568713');" onmouseout="out('-680149036339568713');" style=""> 144     private String mLinkText;                                                                            </span>
<span class="-8355060532383088001" onmouseenter="enter('-8355060532383088001');" onmouseout="out('-8355060532383088001');" style=""> 145     private MatchOffsetHighlighter mHighlighter;                                                         </span>
<span class="-3046310933001836521" onmouseenter="enter('-3046310933001836521');" onmouseout="out('-3046310933001836521');" style=""> 146     private Drawable mBrowserIcon;                                                                       </span>
<span class="-2893651165769435735" onmouseenter="enter('-2893651165769435735');" onmouseout="out('-2893651165769435735');" style=""> 147     private Drawable mCallIcon;                                                                          </span>
<span class="-4798548703316944753" onmouseenter="enter('-4798548703316944753');" onmouseout="out('-4798548703316944753');" style=""> 148     private Drawable mCopyIcon;                                                                          </span>
<span class="6775927648012186278" onmouseenter="enter('6775927648012186278');" onmouseout="out('6775927648012186278');" style=""> 149     private Drawable mEmailIcon;                                                                         </span>
<span class="-3265647716576371737" onmouseenter="enter('-3265647716576371737');" onmouseout="out('-3265647716576371737');" style=""> 150     private Drawable mLinkIcon;                                                                          </span>
<span class="-2947594512272302462" onmouseenter="enter('-2947594512272302462');" onmouseout="out('-2947594512272302462');" style=""> 151     private Drawable mMapIcon;                                                                           </span>
<span class="-8263922286266999556" onmouseenter="enter('-8263922286266999556');" onmouseout="out('-8263922286266999556');" style=""> 152     private Drawable mShareIcon;                                                                         </span>
<span class="-7542236593744276396" onmouseenter="enter('-7542236593744276396');" onmouseout="out('-7542236593744276396');" style=""> 153     private MatchOffsetHighlighter.SpanFactory mMatchHighlighter;                                        </span>
<span class="2689815831275839045" onmouseenter="enter('2689815831275839045');" onmouseout="out('2689815831275839045');" style=""> 154     private String mMatchOffsets;                                                                        </span>
<span class="-7790101837861097441" onmouseenter="enter('-7790101837861097441');" onmouseout="out('-7790101837861097441');" style=""> 155     private int mCurrentCursorPosition;                                                                  </span>
<span class="6178043190004357016" onmouseenter="enter('6178043190004357016');" onmouseout="out('6178043190004357016');" style=""> 156     private HistoryBottomSheetDialog mHistoryBottomSheet;                                                </span>
<span class="-2764923775971952187" onmouseenter="enter('-2764923775971952187');" onmouseout="out('-2764923775971952187');" style=""> 157     private boolean mIsPaused;                                                                           </span>
<span class="-4741322818714001783" onmouseenter="enter('-4741322818714001783');" onmouseout="out('-4741322818714001783');" style=""> 158     private boolean mIsFromWidget;                                                                       </span>
<span  style=""> 159                                                                                                          </span>
<span class="-595864044689580029" onmouseenter="enter('-595864044689580029');" onmouseout="out('-595864044689580029');" style=""> 160     // Hides the history bottom sheet if no revisions are loaded                                         </span>
<span class="9136224915231079842" onmouseenter="enter('9136224915231079842');" onmouseout="out('9136224915231079842');" style=""> 161     private final Runnable mHistoryTimeoutRunnable = new Runnable() {                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 162         @Override                                                                                        </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 163         public void run() {                                                                              </span>
<span class="5514287417242355685" onmouseenter="enter('5514287417242355685');" onmouseout="out('5514287417242355685');" style=""> 164             if (!isAdded()) {                                                                            </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 165                 return;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 166             }                                                                                            </span>
<span  style=""> 167                                                                                                          </span>
<span class="5713980397306524156" onmouseenter="enter('5713980397306524156');" onmouseout="out('5713980397306524156');" style=""> 168             requireActivity().runOnUiThread(new Runnable() {                                             </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 169                 @Override                                                                                </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 170                 public void run() {                                                                      </span>
<span class="-3311389934398547914" onmouseenter="enter('-3311389934398547914');" onmouseout="out('-3311389934398547914');" style=""><abbr title=" 171                     if (mHistoryBottomSheet.getDialog() != null &amp;&amp; mHistoryBottomSheet.getDialog().isShowing() &amp;&amp; !mHistoryBottomSheet.isHistoryLoaded()) {"> 171                     if (mHistoryBottomSheet.getDialog() != null &amp;&amp; mHistoryBottomSheet.getDialog().isShow🔵</abbr></span>
<span class="-2599981510781765889" onmouseenter="enter('-2599981510781765889');" onmouseout="out('-2599981510781765889');" style=""> 172                         mHistoryBottomSheet.dismiss();                                                   </span>
<span class="-1949769614201595359" onmouseenter="enter('-1949769614201595359');" onmouseout="out('-1949769614201595359');" style=""> 173                         Toast.makeText(getActivity(), R.string.error_history, Toast.LENGTH_LONG).show(); </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 174                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 175                 }                                                                                        </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 176             });                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 177         }                                                                                                </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 178     };                                                                                                   </span>
<span class="-7982825583780013979" onmouseenter="enter('-7982825583780013979');" onmouseout="out('-7982825583780013979');" style=""> 179     private InfoBottomSheetDialog mInfoBottomSheet;                                                      </span>
<span class="3825770423127948234" onmouseenter="enter('3825770423127948234');" onmouseout="out('3825770423127948234');" style=""> 180     private ShareBottomSheetDialog mShareBottomSheet;                                                    </span>
<span class="9084056993766846780" onmouseenter="enter('9084056993766846780');" onmouseout="out('9084056993766846780');" style=""> 181     // Contextual action bar for dealing with links                                                      </span>
<span class="7674077006773948876" onmouseenter="enter('7674077006773948876');" onmouseout="out('7674077006773948876');" style=""> 182     private final ActionMode.Callback mActionModeCallback = new ActionMode.Callback() {                  </span>
<span class="-5830922032047880245" onmouseenter="enter('-5830922032047880245');" onmouseout="out('-5830922032047880245');" style=""> 183         // Called when the action mode is created; startActionMode() was called                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 184         @Override                                                                                        </span>
<span class="6869646826473679297" onmouseenter="enter('6869646826473679297');" onmouseout="out('6869646826473679297');" style=""> 185         public boolean onCreateActionMode(ActionMode mode, Menu menu) {                                  </span>
<span class="-5328486553851934265" onmouseenter="enter('-5328486553851934265');" onmouseout="out('-5328486553851934265');" style=""> 186             // Inflate a menu resource providing context menu items                                      </span>
<span class="8164139660214751060" onmouseenter="enter('8164139660214751060');" onmouseout="out('8164139660214751060');" style=""> 187             MenuInflater inflater = mode.getMenuInflater();                                              </span>
<span  style=""> 188                                                                                                          </span>
<span class="-1400051225095864167" onmouseenter="enter('-1400051225095864167');" onmouseout="out('-1400051225095864167');" style=""> 189             if (inflater != null) {                                                                      </span>
<span class="6552624979414277895" onmouseenter="enter('6552624979414277895');" onmouseout="out('6552624979414277895');" style=""> 190                 inflater.inflate(R.menu.view_link, menu);                                                </span>
<span class="1687703529546627770" onmouseenter="enter('1687703529546627770');" onmouseout="out('1687703529546627770');" style=""> 191                 mCopyMenuItem = menu.findItem(R.id.menu_copy);                                           </span>
<span class="-7121630790551700692" onmouseenter="enter('-7121630790551700692');" onmouseout="out('-7121630790551700692');" style=""> 192                 mShareMenuItem = menu.findItem(R.id.menu_share);                                         </span>
<span class="2045169504868185532" onmouseenter="enter('2045169504868185532');" onmouseout="out('2045169504868185532');" style=""> 193                 mViewLinkMenuItem = menu.findItem(R.id.menu_view_link);                                  </span>
<span class="4190298810187820509" onmouseenter="enter('4190298810187820509');" onmouseout="out('4190298810187820509');" style=""> 194                 mode.setTitle(getString(R.string.link));                                                 </span>
<span class="-2927630225150463376" onmouseenter="enter('-2927630225150463376');" onmouseout="out('-2927630225150463376');" style=""> 195                 mode.setTitleOptionalHint(false);                                                        </span>
<span  style=""> 196                                                                                                          </span>
<span class="-5146912340244450550" onmouseenter="enter('-5146912340244450550');" onmouseout="out('-5146912340244450550');" style=""> 197                 DrawableUtils.tintMenuWithAttribute(getActivity(), menu, R.attr.toolbarIconColor);       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 198             }                                                                                            </span>
<span  style=""> 199                                                                                                          </span>
<span class="2269582470475983092" onmouseenter="enter('2269582470475983092');" onmouseout="out('2269582470475983092');" style=""><abbr title=" 200             requireActivity().getWindow().setStatusBarColor(ThemeUtils.getColorFromAttribute(requireContext(), R.attr.mainBackgroundColor));"> 200             requireActivity().getWindow().setStatusBarColor(ThemeUtils.getColorFromAttribute(requireConte🔵</abbr></span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 201             return true;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 202         }                                                                                                </span>
<span  style=""> 203                                                                                                          </span>
<span class="-7885162724385925248" onmouseenter="enter('-7885162724385925248');" onmouseout="out('-7885162724385925248');" style=""> 204         // Called each time the action mode is shown. Always called after onCreateActionMode, but        </span>
<span class="6140331646129020842" onmouseenter="enter('6140331646129020842');" onmouseout="out('6140331646129020842');" style=""> 205         // may be called multiple times if the mode is invalidated.                                      </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 206         @Override                                                                                        </span>
<span class="5392123371105216364" onmouseenter="enter('5392123371105216364');" onmouseout="out('5392123371105216364');" style=""> 207         public boolean onPrepareActionMode(ActionMode mode, Menu menu) {                                 </span>
<span class="9220029862843236189" onmouseenter="enter('9220029862843236189');" onmouseout="out('9220029862843236189');" style=""> 208             return false; // Return false if nothing is done                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 209         }                                                                                                </span>
<span  style=""> 210                                                                                                          </span>
<span class="-918812678605329556" onmouseenter="enter('-918812678605329556');" onmouseout="out('-918812678605329556');" style=""> 211         // Called when the user selects a contextual menu item                                           </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 212         @Override                                                                                        </span>
<span class="816131742774025467" onmouseenter="enter('816131742774025467');" onmouseout="out('816131742774025467');" style=""> 213         public boolean onActionItemClicked(ActionMode mode, MenuItem item) {                             </span>
<span class="2068182408853392247" onmouseenter="enter('2068182408853392247');" onmouseout="out('2068182408853392247');" style=""> 214             switch (item.getItemId()) {                                                                  </span>
<span class="1241487664924667668" onmouseenter="enter('1241487664924667668');" onmouseout="out('1241487664924667668');" style=""> 215                 case R.id.menu_view_link:                                                                </span>
<span class="-6928924091126055668" onmouseenter="enter('-6928924091126055668');" onmouseout="out('-6928924091126055668');" style=""> 216                     if (mLinkText != null) {                                                             </span>
<span class="-3849773635172233058" onmouseenter="enter('-3849773635172233058');" onmouseout="out('-3849773635172233058');" style=""> 217                         if (mLinkText.startsWith(SIMPLENOTE_LINK_PREFIX)) {                              </span>
<span class="3123112009632250348" onmouseenter="enter('3123112009632250348');" onmouseout="out('3123112009632250348');" style=""><abbr title=" 218                             SimplenoteLinkify.openNote(requireActivity(), mLinkText.replace(SIMPLENOTE_LINK_PREFIX, &quot;&quot;));"> 218                             SimplenoteLinkify.openNote(requireActivity(), mLinkText.replace(SIMPLENOTE_LI🔵</abbr></span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 219                         } else {                                                                         </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 220                             try {                                                                        </span>
<span class="5138461002499295767" onmouseenter="enter('5138461002499295767');" onmouseout="out('5138461002499295767');" style=""> 221                                 BrowserUtils.launchBrowserOrShowError(requireContext(), mLinkText);      </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 222                             } catch (Exception e) {                                                      </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 223                                 e.printStackTrace();                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 224                             }                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 225                         }                                                                                </span>
<span  style=""> 226                                                                                                          </span>
<span class="-5985541663234456921" onmouseenter="enter('-5985541663234456921');" onmouseout="out('-5985541663234456921');" style=""> 227                         mode.finish(); // Action picked, so close the CAB                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 228                     }                                                                                    </span>
<span  style=""> 229                                                                                                          </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 230                     return true;                                                                         </span>
<span class="1323072004784584241" onmouseenter="enter('1323072004784584241');" onmouseout="out('1323072004784584241');" style=""> 231                 case R.id.menu_copy:                                                                     </span>
<span class="5917848124130151943" onmouseenter="enter('5917848124130151943');" onmouseout="out('5917848124130151943');" style=""> 232                     if (mLinkText != null &amp;&amp; getActivity() != null) {                                    </span>
<span class="-3995442483487827848" onmouseenter="enter('-3995442483487827848');" onmouseout="out('-3995442483487827848');" style=""> 233                         if (BrowserUtils.copyToClipboard(requireContext(), mLinkText)) {                 </span>
<span class="3795490233575843146" onmouseenter="enter('3795490233575843146');" onmouseout="out('3795490233575843146');" style=""> 234                             Snackbar.make(mRootView, R.string.link_copied, Snackbar.LENGTH_SHORT).show();</span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 235                         } else {                                                                         </span>
<span class="8359220226685626421" onmouseenter="enter('8359220226685626421');" onmouseout="out('8359220226685626421');" style=""><abbr title=" 236                             Snackbar.make(mRootView, R.string.link_copied_failure, Snackbar.LENGTH_SHORT).show();"> 236                             Snackbar.make(mRootView, R.string.link_copied_failure, Snackbar.LENGTH_SHORT)🔵</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 237                         }                                                                                </span>
<span  style=""> 238                                                                                                          </span>
<span class="5768223614092288606" onmouseenter="enter('5768223614092288606');" onmouseout="out('5768223614092288606');" style=""> 239                         mode.finish();                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 240                     }                                                                                    </span>
<span  style=""> 241                                                                                                          </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 242                     return true;                                                                         </span>
<span class="4712317589059090097" onmouseenter="enter('4712317589059090097');" onmouseout="out('4712317589059090097');" style=""> 243                 case R.id.menu_share:                                                                    </span>
<span class="-6928924091126055668" onmouseenter="enter('-6928924091126055668');" onmouseout="out('-6928924091126055668');" style=""> 244                     if (mLinkText != null) {                                                             </span>
<span class="8185075650085964623" onmouseenter="enter('8185075650085964623');" onmouseout="out('8185075650085964623');" style=""> 245                         showShare(mLinkText);                                                            </span>
<span class="5768223614092288606" onmouseenter="enter('5768223614092288606');" onmouseout="out('5768223614092288606');" style=""> 246                         mode.finish();                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 247                     }                                                                                    </span>
<span  style=""> 248                                                                                                          </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 249                     return true;                                                                         </span>
<span class="-8178136317704390296" onmouseenter="enter('-8178136317704390296');" onmouseout="out('-8178136317704390296');" style=""> 250                 default:                                                                                 </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 251                     return false;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 252             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 253         }                                                                                                </span>
<span  style=""> 254                                                                                                          </span>
<span class="2525157012953828009" onmouseenter="enter('2525157012953828009');" onmouseout="out('2525157012953828009');" style=""> 255         // Called when the user exits the action mode                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 256         @Override                                                                                        </span>
<span class="-2232977199830239129" onmouseenter="enter('-2232977199830239129');" onmouseout="out('-2232977199830239129');" style=""> 257         public void onDestroyActionMode(ActionMode mode) {                                               </span>
<span class="-1291529600191394909" onmouseenter="enter('-1291529600191394909');" onmouseout="out('-1291529600191394909');" style=""> 258             if (mActionMode != null) {                                                                   </span>
<span class="-4156109494689565575" onmouseenter="enter('-4156109494689565575');" onmouseout="out('-4156109494689565575');" style=""> 259                 mActionMode.setSubtitle(&quot;&quot;);                                                             </span>
<span class="291405596407736607" onmouseenter="enter('291405596407736607');" onmouseout="out('291405596407736607');" style=""> 260                 mActionMode = null;                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 261             }                                                                                            </span>
<span  style=""> 262                                                                                                          </span>
<span class="-8355266079523609200" onmouseenter="enter('-8355266079523609200');" onmouseout="out('-8355266079523609200');" style=""> 263             new Handler().postDelayed(                                                                   </span>
<span class="4860439059348199630" onmouseenter="enter('4860439059348199630');" onmouseout="out('4860439059348199630');" style=""> 264                 new Runnable() {                                                                         </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 265                     @Override                                                                            </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 266                     public void run() {                                                                  </span>
<span class="-407723737955280968" onmouseenter="enter('-407723737955280968');" onmouseout="out('-407723737955280968');" style=""><abbr title=" 267                         requireActivity().getWindow().setStatusBarColor(getResources().getColor(android.R.color.transparent, requireActivity().getTheme()));"> 267                         requireActivity().getWindow().setStatusBarColor(getResources().getColor(android.R🔵</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 268                     }                                                                                    </span>
<span class="-4102417550988568311" onmouseenter="enter('-4102417550988568311');" onmouseout="out('-4102417550988568311');" style=""> 269                 },                                                                                       </span>
<span class="-4127758747219082725" onmouseenter="enter('-4127758747219082725');" onmouseout="out('-4127758747219082725');" style=""> 270                 requireContext().getResources().getInteger(android.R.integer.config_mediumAnimTime)      </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 271             );                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 272         }                                                                                                </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 273     };                                                                                                   </span>
<span class="-2321350652617580771" onmouseenter="enter('-2321350652617580771');" onmouseout="out('-2321350652617580771');" style=""> 274     private Snackbar mPublishingSnackbar;                                                                </span>
<span class="3063974407169104073" onmouseenter="enter('3063974407169104073');" onmouseout="out('3063974407169104073');" style=""> 275     private boolean mHideActionOnSuccess;                                                                </span>
<span class="1686976550776889109" onmouseenter="enter('1686976550776889109');" onmouseout="out('1686976550776889109');" style=""> 276     // Resets note publish status if Simperium never returned the new publish status                     </span>
<span class="4037453836709826519" onmouseenter="enter('4037453836709826519');" onmouseout="out('4037453836709826519');" style=""> 277     private final Runnable mPublishTimeoutRunnable = new Runnable() {                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 278         @Override                                                                                        </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 279         public void run() {                                                                              </span>
<span class="6112154992837754036" onmouseenter="enter('6112154992837754036');" onmouseout="out('6112154992837754036');" style=""> 280             if (!isAdded()) return;                                                                      </span>
<span  style=""> 281                                                                                                          </span>
<span class="5713980397306524156" onmouseenter="enter('5713980397306524156');" onmouseout="out('5713980397306524156');" style=""> 282             requireActivity().runOnUiThread(new Runnable() {                                             </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 283                 @Override                                                                                </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 284                 public void run() {                                                                      </span>
<span  style=""> 285                                                                                                          </span>
<span class="-6752199236124778161" onmouseenter="enter('-6752199236124778161');" onmouseout="out('-6752199236124778161');" style=""> 286                     mNote.setPublished(!mNote.isPublished());                                            </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style=""> 287                     mNote.save();                                                                        </span>
<span  style=""> 288                                                                                                          </span>
<span class="7513447915538188553" onmouseenter="enter('7513447915538188553');" onmouseout="out('7513447915538188553');" style=""> 289                     updatePublishedState(false);                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 290                 }                                                                                        </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 291             });                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 292         }                                                                                                </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 293     };                                                                                                   </span>
<span class="-3565365231364209094" onmouseenter="enter('-3565365231364209094');" onmouseout="out('-3565365231364209094');" style=""> 294     private NoteMarkdownFragment mNoteMarkdownFragment;                                                  </span>
<span class="8334835640808763040" onmouseenter="enter('8334835640808763040');" onmouseout="out('8334835640808763040');" style=""> 295     private String mCss;                                                                                 </span>
<span class="2417381421481423525" onmouseenter="enter('2417381421481423525');" onmouseout="out('2417381421481423525');" style=""> 296     private WebView mMarkdown;                                                                           </span>
<span  style=""> 297                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 298     /**                                                                                                  </span>
<span class="7780585517980788373" onmouseenter="enter('7780585517980788373');" onmouseout="out('7780585517980788373');" style=""> 299      * Mandatory empty constructor for the fragment manager to instantiate the                           </span>
<span class="7130060501227883159" onmouseenter="enter('7130060501227883159');" onmouseout="out('7130060501227883159');" style=""> 300      * fragment (e.g. upon screen orientation changes).                                                  </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 301      */                                                                                                  </span>
<span class="2055429757813344166" onmouseenter="enter('2055429757813344166');" onmouseout="out('2055429757813344166');" style=""> 302     public NoteEditorFragment() {                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 303     }                                                                                                    </span>
<span  style=""> 304                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 305     @Override                                                                                            </span>
<span class="2351026872416697132" onmouseenter="enter('2351026872416697132');" onmouseout="out('2351026872416697132');" style=""> 306     public void onCreate(Bundle savedInstanceState) {                                                    </span>
<span class="8760898167212384157" onmouseenter="enter('8760898167212384157');" onmouseout="out('8760898167212384157');" style=""> 307         super.onCreate(savedInstanceState);                                                              </span>
<span class="-8622194682109655372" onmouseenter="enter('-8622194682109655372');" onmouseout="out('-8622194682109655372');" style=""> 308         AppLog.add(Type.NETWORK, NetworkUtils.getNetworkInfo(requireContext()));                         </span>
<span class="4067704072097909993" onmouseenter="enter('4067704072097909993');" onmouseout="out('4067704072097909993');" style=""> 309         AppLog.add(Type.SCREEN, &quot;Created (NoteEditorFragment)&quot;);                                         </span>
<span class="-7986434609852753971" onmouseenter="enter('-7986434609852753971');" onmouseout="out('-7986434609852753971');" style=""> 310         mInfoBottomSheet = new InfoBottomSheetDialog(this);                                              </span>
<span class="-3585171833526124401" onmouseenter="enter('-3585171833526124401');" onmouseout="out('-3585171833526124401');" style=""> 311         mShareBottomSheet = new ShareBottomSheetDialog(this, this);                                      </span>
<span class="8727018902564285339" onmouseenter="enter('8727018902564285339');" onmouseout="out('8727018902564285339');" style=""> 312         mHistoryBottomSheet = new HistoryBottomSheetDialog(this, this);                                  </span>
<span  style=""> 313                                                                                                          </span>
<span class="7015772157047139063" onmouseenter="enter('7015772157047139063');" onmouseout="out('7015772157047139063');" style=""> 314         Simplenote currentApp = (Simplenote) requireActivity().getApplication();                         </span>
<span class="3464165486447434608" onmouseenter="enter('3464165486447434608');" onmouseout="out('3464165486447434608');" style=""> 315         mNotesBucket = currentApp.getNotesBucket();                                                      </span>
<span  style=""> 316                                                                                                          </span>
<span class="-5396295556438155472" onmouseenter="enter('-5396295556438155472');" onmouseout="out('-5396295556438155472');" style=""><abbr title=" 317         mCallIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_call_white_24dp, R.attr.actionModeTextColor);"> 317         mCallIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_call_white_24dp,🔵</abbr></span>
<span class="-6467507895043748101" onmouseenter="enter('-6467507895043748101');" onmouseout="out('-6467507895043748101');" style=""><abbr title=" 318         mEmailIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_email_24dp, R.attr.actionModeTextColor);"> 318         mEmailIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_email_24dp, R.a🔵</abbr></span>
<span class="467194819286006014" onmouseenter="enter('467194819286006014');" onmouseout="out('467194819286006014');" style=""><abbr title=" 319         mLinkIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_note_24dp, R.attr.actionModeTextColor);"> 319         mLinkIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_note_24dp, R.att🔵</abbr></span>
<span class="439472828334727129" onmouseenter="enter('439472828334727129');" onmouseout="out('439472828334727129');" style=""><abbr title=" 320         mMapIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_map_24dp, R.attr.actionModeTextColor);"> 320         mMapIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_map_24dp, R.attr.🔵</abbr></span>
<span class="6692132481762191849" onmouseenter="enter('6692132481762191849');" onmouseout="out('6692132481762191849');" style=""><abbr title=" 321         mBrowserIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_browser_24dp, R.attr.actionModeTextColor);"> 321         mBrowserIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_browser_24dp,🔵</abbr></span>
<span class="-1469196158673197606" onmouseenter="enter('-1469196158673197606');" onmouseout="out('-1469196158673197606');" style=""><abbr title=" 322         mCopyIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_copy_24dp, R.attr.actionModeTextColor);"> 322         mCopyIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_copy_24dp, R.att🔵</abbr></span>
<span class="2974983401105131042" onmouseenter="enter('2974983401105131042');" onmouseout="out('2974983401105131042');" style=""><abbr title=" 323         mShareIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_share_24dp, R.attr.actionModeTextColor);"> 323         mShareIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_share_24dp, R.a🔵</abbr></span>
<span  style=""> 324                                                                                                          </span>
<span class="-7557436274459739944" onmouseenter="enter('-7557436274459739944');" onmouseout="out('-7557436274459739944');" style=""> 325         mAutoSaveHandler = new Handler();                                                                </span>
<span class="5311700283685025064" onmouseenter="enter('5311700283685025064');" onmouseout="out('5311700283685025064');" style=""> 326         mPublishTimeoutHandler = new Handler();                                                          </span>
<span class="-5335062074040604305" onmouseenter="enter('-5335062074040604305');" onmouseout="out('-5335062074040604305');" style=""> 327         mHistoryTimeoutHandler = new Handler();                                                          </span>
<span  style=""> 328                                                                                                          </span>
<span class="-7210994120079343670" onmouseenter="enter('-7210994120079343670');" onmouseout="out('-7210994120079343670');" style=""> 329         mMatchHighlighter = new TextHighlighter(requireActivity(),                                       </span>
<span class="5690198221529347900" onmouseenter="enter('5690198221529347900');" onmouseout="out('5690198221529347900');" style=""><abbr title=" 330                 R.attr.editorSearchHighlightForegroundColor, R.attr.editorSearchHighlightBackgroundColor);"> 330                 R.attr.editorSearchHighlightForegroundColor, R.attr.editorSearchHighlightBackgroundColor)🔵</abbr></span>
<span class="-2796700407695620291" onmouseenter="enter('-2796700407695620291');" onmouseout="out('-2796700407695620291');" style=""> 331         mAutocompleteAdapter = new CursorAdapter(getActivity(), null, 0x0) {                             </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 332             @Override                                                                                    </span>
<span class="5082230411214880762" onmouseenter="enter('5082230411214880762');" onmouseout="out('5082230411214880762');" style=""> 333             public View newView(Context context, Cursor cursor, ViewGroup parent) {                      </span>
<span class="-7341849400851650995" onmouseenter="enter('-7341849400851650995');" onmouseout="out('-7341849400851650995');" style=""> 334                 Activity activity = (Activity) context;                                                  </span>
<span class="-4259990117100818562" onmouseenter="enter('-4259990117100818562');" onmouseout="out('-4259990117100818562');" style=""> 335                 if (activity == null) return null;                                                       </span>
<span class="-3314008061858345993" onmouseenter="enter('-3314008061858345993');" onmouseout="out('-3314008061858345993');" style=""> 336                 return activity.getLayoutInflater().inflate(R.layout.tag_autocomplete_list_item, null);  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 337             }                                                                                            </span>
<span  style=""> 338                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 339             @Override                                                                                    </span>
<span class="19024103499623332" onmouseenter="enter('19024103499623332');" onmouseout="out('19024103499623332');" style=""> 340             public void bindView(View view, Context context, Cursor cursor) {                            </span>
<span class="1800045997788095368" onmouseenter="enter('1800045997788095368');" onmouseout="out('1800045997788095368');" style=""> 341                 TextView textView = (TextView) view;                                                     </span>
<span class="6731261465219202848" onmouseenter="enter('6731261465219202848');" onmouseout="out('6731261465219202848');" style=""> 342                 textView.setText(convertToString(cursor));                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 343             }                                                                                            </span>
<span  style=""> 344                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 345             @Override                                                                                    </span>
<span class="-8397701079695881614" onmouseenter="enter('-8397701079695881614');" onmouseout="out('-8397701079695881614');" style=""> 346             public CharSequence convertToString(Cursor cursor) {                                         </span>
<span class="-7149458698442797769" onmouseenter="enter('-7149458698442797769');" onmouseout="out('-7149458698442797769');" style=""> 347                 return cursor.getString(cursor.getColumnIndex(Tag.NAME_PROPERTY));                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 348             }                                                                                            </span>
<span  style=""> 349                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 350             @Override                                                                                    </span>
<span class="-6792310640715402890" onmouseenter="enter('-6792310640715402890');" onmouseout="out('-6792310640715402890');" style=""> 351             public Cursor runQueryOnBackgroundThread(CharSequence filter) {                              </span>
<span class="-5071525869541290984" onmouseenter="enter('-5071525869541290984');" onmouseout="out('-5071525869541290984');" style=""> 352                 Activity activity = getActivity();                                                       </span>
<span class="-4259990117100818562" onmouseenter="enter('-4259990117100818562');" onmouseout="out('-4259990117100818562');" style=""> 353                 if (activity == null) return null;                                                       </span>
<span class="9016693485500608067" onmouseenter="enter('9016693485500608067');" onmouseout="out('9016693485500608067');" style=""> 354                 Simplenote application = (Simplenote) activity.getApplication();                         </span>
<span class="-288329532637656436" onmouseenter="enter('-288329532637656436');" onmouseout="out('-288329532637656436');" style=""> 355                 Query&lt;Tag&gt; query = application.getTagsBucket().query();                                  </span>
<span class="-1263658484466254954" onmouseenter="enter('-1263658484466254954');" onmouseout="out('-1263658484466254954');" style=""> 356                 // make the tag name available to the cursor                                             </span>
<span class="5748018636045801946" onmouseenter="enter('5748018636045801946');" onmouseout="out('5748018636045801946');" style=""> 357                 query.include(Tag.NAME_PROPERTY);                                                        </span>
<span class="-7615810455976629564" onmouseenter="enter('-7615810455976629564');" onmouseout="out('-7615810455976629564');" style=""> 358                 // sort the tags by their names                                                          </span>
<span class="5674220988188306819" onmouseenter="enter('5674220988188306819');" onmouseout="out('5674220988188306819');" style=""> 359                 query.order(Tag.NAME_PROPERTY);                                                          </span>
<span class="8185275162074884971" onmouseenter="enter('8185275162074884971');" onmouseout="out('8185275162074884971');" style=""> 360                 // if there&#x27;s a filter string find only matching tag names                               </span>
<span class="-2390759895253291766" onmouseenter="enter('-2390759895253291766');" onmouseout="out('-2390759895253291766');" style=""> 361                 if (filter != null)                                                                      </span>
<span class="-8675928632322864405" onmouseenter="enter('-8675928632322864405');" onmouseout="out('-8675928632322864405');" style=""><abbr title=" 362                     query.where(Tag.NAME_PROPERTY, Query.ComparisonType.LIKE, String.format(&quot;%s%%&quot;, filter));"> 362                     query.where(Tag.NAME_PROPERTY, Query.ComparisonType.LIKE, String.format(&quot;%s%%&quot;, filte🔵</abbr></span>
<span class="8392918727668200780" onmouseenter="enter('8392918727668200780');" onmouseout="out('8392918727668200780');" style=""> 363                 return query.execute();                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 364             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 365         };                                                                                               </span>
<span  style=""> 366                                                                                                          </span>
<span class="-2915955960672646870" onmouseenter="enter('-2915955960672646870');" onmouseout="out('-2915955960672646870');" style=""> 367         WidgetUtils.updateNoteWidgets(requireActivity().getApplicationContext());                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 368     }                                                                                                    </span>
<span  style=""> 369                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 370     @Override                                                                                            </span>
<span class="-3764996828666781026" onmouseenter="enter('-3764996828666781026');" onmouseout="out('-3764996828666781026');" style=""><abbr title=" 371     public View onCreateView(@NonNull LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {"> 371     public View onCreateView(@NonNull LayoutInflater inflater, ViewGroup container, Bundle savedInstanceS🔵</abbr></span>
<span class="3579130562560764282" onmouseenter="enter('3579130562560764282');" onmouseout="out('3579130562560764282');" style=""> 372         mRootView = inflater.inflate(R.layout.fragment_note_editor, container, false);                   </span>
<span class="-4779369533477417305" onmouseenter="enter('-4779369533477417305');" onmouseout="out('-4779369533477417305');" style=""> 373         mContentEditText = mRootView.findViewById(R.id.note_content);                                    </span>
<span class="-2924083774161461664" onmouseenter="enter('-2924083774161461664');" onmouseout="out('-2924083774161461664');" style=""> 374         mContentEditText.addOnSelectionChangedListener(this);                                            </span>
<span class="5354424100413888199" onmouseenter="enter('5354424100413888199');" onmouseout="out('5354424100413888199');" style=""> 375         mContentEditText.setOnCheckboxToggledListener(this);                                             </span>
<span class="4799293943910864448" onmouseenter="enter('4799293943910864448');" onmouseout="out('4799293943910864448');" style=""> 376         mContentEditText.setMovementMethod(SimplenoteMovementMethod.getInstance());                      </span>
<span class="-7684087958922635100" onmouseenter="enter('-7684087958922635100');" onmouseout="out('-7684087958922635100');" style=""> 377         mContentEditText.setOnFocusChangeListener(this);                                                 </span>
<span class="7906960005192148215" onmouseenter="enter('7906960005192148215');" onmouseout="out('7906960005192148215');" style=""><abbr title=" 378         mContentEditText.setTextSize(TypedValue.COMPLEX_UNIT_SP, PrefUtils.getFontSize(requireContext()));"> 378         mContentEditText.setTextSize(TypedValue.COMPLEX_UNIT_SP, PrefUtils.getFontSize(requireContext()))🔵</abbr></span>
<span class="-8410945612023549246" onmouseenter="enter('-8410945612023549246');" onmouseout="out('-8410945612023549246');" style=""> 379         mTagInput = mRootView.findViewById(R.id.tag_input);                                              </span>
<span class="-8520636764026895045" onmouseenter="enter('-8520636764026895045');" onmouseout="out('-8520636764026895045');" style=""> 380         mTagInput.setDropDownBackgroundResource(R.drawable.bg_list_popup);                               </span>
<span class="-8046888072996277100" onmouseenter="enter('-8046888072996277100');" onmouseout="out('-8046888072996277100');" style=""> 381         mTagInput.setTokenizer(new SpaceTokenizer());                                                    </span>
<span class="8277910060096767493" onmouseenter="enter('8277910060096767493');" onmouseout="out('8277910060096767493');" style=""> 382         mTagInput.setOnFocusChangeListener(this);                                                        </span>
<span class="9064951361673299699" onmouseenter="enter('9064951361673299699');" onmouseout="out('9064951361673299699');" style=""> 383         mTagChips = mRootView.findViewById(R.id.tag_chips);                                              </span>
<span class="-8852013276583646600" onmouseenter="enter('-8852013276583646600');" onmouseout="out('-8852013276583646600');" style=""> 384         mTagPadding = mRootView.findViewById(R.id.tag_padding);                                          </span>
<span class="6080374810605667863" onmouseenter="enter('6080374810605667863');" onmouseout="out('6080374810605667863');" style=""> 385         mHighlighter = new MatchOffsetHighlighter(mMatchHighlighter, mContentEditText);                  </span>
<span class="2946335853320733423" onmouseenter="enter('2946335853320733423');" onmouseout="out('2946335853320733423');" style=""> 386         mPlaceholderView = mRootView.findViewById(R.id.placeholder);                                     </span>
<span  style=""> 387                                                                                                          </span>
<span class="2767702191472733500" onmouseenter="enter('2767702191472733500');" onmouseout="out('2767702191472733500');" style=""> 388         if (DisplayUtils.isLargeScreenLandscape(getActivity()) &amp;&amp; mNote == null) {                       </span>
<span class="-5306578928333558235" onmouseenter="enter('-5306578928333558235');" onmouseout="out('-5306578928333558235');" style=""> 389             mPlaceholderView.setVisibility(View.VISIBLE);                                                </span>
<span class="-8532471920650411447" onmouseenter="enter('-8532471920650411447');" onmouseout="out('-8532471920650411447');" style=""> 390             requireActivity().invalidateOptionsMenu();                                                   </span>
<span class="-5966136890047999161" onmouseenter="enter('-5966136890047999161');" onmouseout="out('-5966136890047999161');" style=""> 391             mMarkdown = mRootView.findViewById(R.id.markdown);                                           </span>
<span class="-4667942192763773056" onmouseenter="enter('-4667942192763773056');" onmouseout="out('-4667942192763773056');" style=""> 392 &lt;&lt;&lt;&lt;&lt;&lt;&lt; GitAnalyzerPlus_ours                                                                             </span>
<span class="-5122207664605231942" onmouseenter="enter('-5122207664605231942');" onmouseout="out('-5122207664605231942');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"><abbr title=" 393             mCss = ContextUtils.readCssFile(requireContext(), ThemeUtils.getCssFromStyle(requireContext()));"> 393             mCss = ContextUtils.readCssFile(requireContext(), ThemeUtils.getCssFromStyle(requireContext()🔵</abbr></span>
<span class="6741223626729319096" onmouseenter="enter('6741223626729319096');" onmouseout="out('6741223626729319096');" style=""> 394 ||||||| GitAnalyzerPlus_base                                                                             </span>
<span class="-5966136890047999161" onmouseenter="enter('-5966136890047999161');" onmouseout="out('-5966136890047999161');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 395             mMarkdown = mRootView.findViewById(R.id.markdown);                                           </span>
<span class="4171573222855619135" onmouseenter="enter('4171573222855619135');" onmouseout="out('4171573222855619135');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 396             mCss = ThemeUtils.isLightTheme(requireContext())                                             </span>
<span class="2330250883811648743" onmouseenter="enter('2330250883811648743');" onmouseout="out('2330250883811648743');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 397                     ? ContextUtils.readCssFile(requireContext(), &quot;light.css&quot;)                            </span>
<span class="4652247646087549288" onmouseenter="enter('4652247646087549288');" onmouseout="out('4652247646087549288');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 398                     : ContextUtils.readCssFile(requireContext(), &quot;dark.css&quot;);                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 399         }                                                                                                </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 400                                                                                                          </span>
<span class="3045371367152506055" onmouseenter="enter('3045371367152506055');" onmouseout="out('3045371367152506055');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 401         mTagInput.setAdapter(mAutocompleteAdapter);                                                      </span>
<span class="-512438581163180757" onmouseenter="enter('-512438581163180757');" onmouseout="out('-512438581163180757');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 402         Bundle arguments = getArguments();                                                               </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 403                                                                                                          </span>
<span class="5652609996770636291" onmouseenter="enter('5652609996770636291');" onmouseout="out('5652609996770636291');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 404         if (arguments != null &amp;&amp; arguments.containsKey(ARG_ITEM_ID)) {                                   </span>
<span class="592168733134676120" onmouseenter="enter('592168733134676120');" onmouseout="out('592168733134676120');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 405             // Load note if we were passed a note Id                                                     </span>
<span class="-30854459346766710" onmouseenter="enter('-30854459346766710');" onmouseout="out('-30854459346766710');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 406             String key = arguments.getString(ARG_ITEM_ID);                                               </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 407                                                                                                          </span>
<span class="9138949033848867696" onmouseenter="enter('9138949033848867696');" onmouseout="out('9138949033848867696');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 408             if (arguments.containsKey(ARG_MATCH_OFFSETS)) {                                              </span>
<span class="-1831707694683903303" onmouseenter="enter('-1831707694683903303');" onmouseout="out('-1831707694683903303');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 409                 mMatchOffsets = arguments.getString(ARG_MATCH_OFFSETS);                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 410             }                                                                                            </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 411                                                                                                          </span>
<span class="-5471626349746072894" onmouseenter="enter('-5471626349746072894');" onmouseout="out('-5471626349746072894');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 412             mIsFromWidget = arguments.getBoolean(ARG_IS_FROM_WIDGET);                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 413                                                                                                          </span>
<span class="7955966257819193736" onmouseenter="enter('7955966257819193736');" onmouseout="out('7955966257819193736');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 414             if (mIsFromWidget) {                                                                         </span>
<span class="-5617995102329158939" onmouseenter="enter('-5617995102329158939');" onmouseout="out('-5617995102329158939');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 415                 AppLog.add(Type.ACTION, &quot;Opened from widget (NoteEditorFragment)&quot;);                      </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 416             } else {                                                                                     </span>
<span class="8953265153297736425" onmouseenter="enter('8953265153297736425');" onmouseout="out('8953265153297736425');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 417                 AppLog.add(Type.ACTION, &quot;Opened from list (NoteEditorFragment)&quot;);                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 418             }                                                                                            </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 419                                                                                                          </span>
<span class="2821548101564163251" onmouseenter="enter('2821548101564163251');" onmouseout="out('2821548101564163251');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 420             new LoadNoteTask(this).executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR, key);               </span>
<span class="-7018322201047939593" onmouseenter="enter('-7018322201047939593');" onmouseout="out('-7018322201047939593');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 421         } else if (DisplayUtils.isLargeScreenLandscape(getActivity()) &amp;&amp; savedInstanceState != null) {   </span>
<span class="-5586601087309648352" onmouseenter="enter('-5586601087309648352');" onmouseout="out('-5586601087309648352');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 422             // Restore selected note when in dual pane mode                                              </span>
<span class="-6627973434382116830" onmouseenter="enter('-6627973434382116830');" onmouseout="out('-6627973434382116830');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 423             String noteId = savedInstanceState.getString(STATE_NOTE_ID);                                 </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 424                                                                                                          </span>
<span class="3431348253079949637" onmouseenter="enter('3431348253079949637');" onmouseout="out('3431348253079949637');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 425             if (noteId != null) {                                                                        </span>
<span class="6131131744168781054" onmouseenter="enter('6131131744168781054');" onmouseout="out('6131131744168781054');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 426                 setNote(noteId);                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 427             }                                                                                            </span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style=""> 428 =======                                                                                                  </span>
<span class="2573488642866082316" onmouseenter="enter('2573488642866082316');" onmouseout="out('2573488642866082316');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 429             mMarkdown.setWebViewClient(                                                                  </span>
<span class="6636825780888069899" onmouseenter="enter('6636825780888069899');" onmouseout="out('6636825780888069899');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 430                 new WebViewClient() {                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 431                     @Override                                                                            </span>
<span class="-9087834862940521077" onmouseenter="enter('-9087834862940521077');" onmouseout="out('-9087834862940521077');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 432                     public boolean shouldOverrideUrlLoading(WebView view, WebResourceRequest request){   </span>
<span class="-5381905371386971985" onmouseenter="enter('-5381905371386971985');" onmouseout="out('-5381905371386971985');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 433                         String url = request.getUrl().toString();                                        </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 434                                                                                                          </span>
<span class="-4642998270142287952" onmouseenter="enter('-4642998270142287952');" onmouseout="out('-4642998270142287952');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 435                         if (url.startsWith(SimplenoteLinkify.SIMPLENOTE_LINK_PREFIX)){                   </span>
<span class="1249235461949968343" onmouseenter="enter('1249235461949968343');" onmouseout="out('1249235461949968343');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"><abbr title=" 436                             SimplenoteLinkify.openNote(requireActivity(), url.replace(SIMPLENOTE_LINK_PREFIX, &quot;&quot;));"> 436                             SimplenoteLinkify.openNote(requireActivity(), url.replace(SIMPLENOTE_LINK_PRE🔵</abbr></span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 437                         } else {                                                                         </span>
<span class="4407241748321738249" onmouseenter="enter('4407241748321738249');" onmouseout="out('4407241748321738249');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 438                             BrowserUtils.launchBrowserOrShowError(requireContext(), url);                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 439                         }                                                                                </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 440                                                                                                          </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 441                         return true;                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 442                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 443                 }                                                                                        </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 444             );                                                                                           </span>
<span class="4171573222855619135" onmouseenter="enter('4171573222855619135');" onmouseout="out('4171573222855619135');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 445             mCss = ThemeUtils.isLightTheme(requireContext())                                             </span>
<span class="2330250883811648743" onmouseenter="enter('2330250883811648743');" onmouseout="out('2330250883811648743');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 446                 ? ContextUtils.readCssFile(requireContext(), &quot;light.css&quot;)                                </span>
<span class="4652247646087549288" onmouseenter="enter('4652247646087549288');" onmouseout="out('4652247646087549288');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 447                 : ContextUtils.readCssFile(requireContext(), &quot;dark.css&quot;);                                </span>
<span class="-1382546150375666264" onmouseenter="enter('-1382546150375666264');" onmouseout="out('-1382546150375666264');" style=""> 448 &gt;&gt;&gt;&gt;&gt;&gt;&gt; GitAnalyzerPlus_theirs                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 449         }                                                                                                </span>
<span  style=""> 450                                                                                                          </span>
<span class="3045371367152506055" onmouseenter="enter('3045371367152506055');" onmouseout="out('3045371367152506055');" style=""> 451         mTagInput.setAdapter(mAutocompleteAdapter);                                                      </span>
<span class="-512438581163180757" onmouseenter="enter('-512438581163180757');" onmouseout="out('-512438581163180757');" style=""> 452         Bundle arguments = getArguments();                                                               </span>
<span  style=""> 453                                                                                                          </span>
<span class="5652609996770636291" onmouseenter="enter('5652609996770636291');" onmouseout="out('5652609996770636291');" style=""> 454         if (arguments != null &amp;&amp; arguments.containsKey(ARG_ITEM_ID)) {                                   </span>
<span class="592168733134676120" onmouseenter="enter('592168733134676120');" onmouseout="out('592168733134676120');" style=""> 455             // Load note if we were passed a note Id                                                     </span>
<span class="-30854459346766710" onmouseenter="enter('-30854459346766710');" onmouseout="out('-30854459346766710');" style=""> 456             String key = arguments.getString(ARG_ITEM_ID);                                               </span>
<span  style=""> 457                                                                                                          </span>
<span class="9138949033848867696" onmouseenter="enter('9138949033848867696');" onmouseout="out('9138949033848867696');" style=""> 458             if (arguments.containsKey(ARG_MATCH_OFFSETS)) {                                              </span>
<span class="-1831707694683903303" onmouseenter="enter('-1831707694683903303');" onmouseout="out('-1831707694683903303');" style=""> 459                 mMatchOffsets = arguments.getString(ARG_MATCH_OFFSETS);                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 460             }                                                                                            </span>
<span  style=""> 461                                                                                                          </span>
<span class="-5471626349746072894" onmouseenter="enter('-5471626349746072894');" onmouseout="out('-5471626349746072894');" style=""> 462             mIsFromWidget = arguments.getBoolean(ARG_IS_FROM_WIDGET);                                    </span>
<span  style=""> 463                                                                                                          </span>
<span class="7955966257819193736" onmouseenter="enter('7955966257819193736');" onmouseout="out('7955966257819193736');" style=""> 464             if (mIsFromWidget) {                                                                         </span>
<span class="-5617995102329158939" onmouseenter="enter('-5617995102329158939');" onmouseout="out('-5617995102329158939');" style=""> 465                 AppLog.add(Type.ACTION, &quot;Opened from widget (NoteEditorFragment)&quot;);                      </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 466             } else {                                                                                     </span>
<span class="8953265153297736425" onmouseenter="enter('8953265153297736425');" onmouseout="out('8953265153297736425');" style=""> 467                 AppLog.add(Type.ACTION, &quot;Opened from list (NoteEditorFragment)&quot;);                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 468             }                                                                                            </span>
<span  style=""> 469                                                                                                          </span>
<span class="2821548101564163251" onmouseenter="enter('2821548101564163251');" onmouseout="out('2821548101564163251');" style=""> 470             new LoadNoteTask(this).executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR, key);               </span>
<span class="-7018322201047939593" onmouseenter="enter('-7018322201047939593');" onmouseout="out('-7018322201047939593');" style=""> 471         } else if (DisplayUtils.isLargeScreenLandscape(getActivity()) &amp;&amp; savedInstanceState != null) {   </span>
<span class="-5586601087309648352" onmouseenter="enter('-5586601087309648352');" onmouseout="out('-5586601087309648352');" style=""> 472             // Restore selected note when in dual pane mode                                              </span>
<span class="-6627973434382116830" onmouseenter="enter('-6627973434382116830');" onmouseout="out('-6627973434382116830');" style=""> 473             String noteId = savedInstanceState.getString(STATE_NOTE_ID);                                 </span>
<span  style=""> 474                                                                                                          </span>
<span class="3431348253079949637" onmouseenter="enter('3431348253079949637');" onmouseout="out('3431348253079949637');" style=""> 475             if (noteId != null) {                                                                        </span>
<span class="6131131744168781054" onmouseenter="enter('6131131744168781054');" onmouseout="out('6131131744168781054');" style=""> 476                 setNote(noteId);                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 477             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 478         }                                                                                                </span>
<span  style=""> 479                                                                                                          </span>
<span class="-6084360450426647292" onmouseenter="enter('-6084360450426647292');" onmouseout="out('-6084360450426647292');" style=""> 480         ViewTreeObserver viewTreeObserver = mContentEditText.getViewTreeObserver();                      </span>
<span class="5566036156549578856" onmouseenter="enter('5566036156549578856');" onmouseout="out('5566036156549578856');" style=""> 481         viewTreeObserver.addOnGlobalLayoutListener(new ViewTreeObserver.OnGlobalLayoutListener() {       </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 482             @Override                                                                                    </span>
<span class="7412300164717447449" onmouseenter="enter('7412300164717447449');" onmouseout="out('7412300164717447449');" style=""> 483             public void onGlobalLayout() {                                                               </span>
<span class="-1303582393563450897" onmouseenter="enter('-1303582393563450897');" onmouseout="out('-1303582393563450897');" style=""> 484                 // If a note was loaded with search matches, scroll to the first match in the editor     </span>
<span class="-6404251855291734375" onmouseenter="enter('-6404251855291734375');" onmouseout="out('-6404251855291734375');" style=""> 485                 if (mShouldScrollToSearchMatch &amp;&amp; mMatchOffsets != null) {                               </span>
<span class="5514287417242355685" onmouseenter="enter('5514287417242355685');" onmouseout="out('5514287417242355685');" style=""> 486                     if (!isAdded()) {                                                                    </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 487                         return;                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 488                     }                                                                                    </span>
<span  style=""> 489                                                                                                          </span>
<span class="-5871446470780506147" onmouseenter="enter('-5871446470780506147');" onmouseout="out('-5871446470780506147');" style=""> 490                     // Get the character location of the first search match                              </span>
<span class="1328407546550738965" onmouseenter="enter('1328407546550738965');" onmouseout="out('1328407546550738965');" style=""> 491                     int matchLocation = MatchOffsetHighlighter.getFirstMatchLocation(                    </span>
<span class="2395792868164050050" onmouseenter="enter('2395792868164050050');" onmouseout="out('2395792868164050050');" style=""> 492                             mContentEditText.getText(),                                                  </span>
<span class="6736916049865032431" onmouseenter="enter('6736916049865032431');" onmouseout="out('6736916049865032431');" style=""> 493                             mMatchOffsets                                                                </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 494                     );                                                                                   </span>
<span class="3937327664514143598" onmouseenter="enter('3937327664514143598');" onmouseout="out('3937327664514143598');" style=""> 495                     if (matchLocation == 0) {                                                            </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 496                         return;                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 497                     }                                                                                    </span>
<span  style=""> 498                                                                                                          </span>
<span class="-8411350726545484842" onmouseenter="enter('-8411350726545484842');" onmouseout="out('-8411350726545484842');" style=""> 499                     // Calculate how far to scroll to bring the match into view                          </span>
<span class="-8088580226996087877" onmouseenter="enter('-8088580226996087877');" onmouseout="out('-8088580226996087877');" style=""> 500                     Layout layout = mContentEditText.getLayout();                                        </span>
<span class="4818857677317424270" onmouseenter="enter('4818857677317424270');" onmouseout="out('4818857677317424270');" style=""> 501                     int lineTop = layout.getLineTop(layout.getLineForOffset(matchLocation));             </span>
<span class="1129057737754431865" onmouseenter="enter('1129057737754431865');" onmouseout="out('1129057737754431865');" style=""> 502                     ((NestedScrollView) mRootView).smoothScrollTo(0, lineTop);                           </span>
<span class="1093252497226085042" onmouseenter="enter('1093252497226085042');" onmouseout="out('1093252497226085042');" style=""> 503                     mShouldScrollToSearchMatch = false;                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 504                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 505             }                                                                                            </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 506         });                                                                                              </span>
<span class="7823602444079418117" onmouseenter="enter('7823602444079418117');" onmouseout="out('7823602444079418117');" style=""> 507         setHasOptionsMenu(true);                                                                         </span>
<span class="-6258722083869792010" onmouseenter="enter('-6258722083869792010');" onmouseout="out('-6258722083869792010');" style=""> 508         return mRootView;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 509     }                                                                                                    </span>
<span  style=""> 510                                                                                                          </span>
<span class="4710528937935082296" onmouseenter="enter('4710528937935082296');" onmouseout="out('4710528937935082296');" style=""> 511     public void scrollToMatch(int location) {                                                            </span>
<span class="-7481427962806884462" onmouseenter="enter('-7481427962806884462');" onmouseout="out('-7481427962806884462');" style=""> 512         if (isAdded()) {                                                                                 </span>
<span class="-8411350726545484842" onmouseenter="enter('-8411350726545484842');" onmouseout="out('-8411350726545484842');" style=""> 513             // Calculate how far to scroll to bring the match into view                                  </span>
<span class="-8088580226996087877" onmouseenter="enter('-8088580226996087877');" onmouseout="out('-8088580226996087877');" style=""> 514             Layout layout = mContentEditText.getLayout();                                                </span>
<span class="7976110079331789160" onmouseenter="enter('7976110079331789160');" onmouseout="out('7976110079331789160');" style=""> 515             int lineTop = layout.getLineTop(layout.getLineForOffset(location));                          </span>
<span class="1129057737754431865" onmouseenter="enter('1129057737754431865');" onmouseout="out('1129057737754431865');" style=""> 516             ((NestedScrollView) mRootView).smoothScrollTo(0, lineTop);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 517         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 518     }                                                                                                    </span>
<span  style=""> 519                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 520     @Override                                                                                            </span>
<span class="3212580988936830895" onmouseenter="enter('3212580988936830895');" onmouseout="out('3212580988936830895');" style=""> 521     public void onResume() {                                                                             </span>
<span class="-6840488528374549322" onmouseenter="enter('-6840488528374549322');" onmouseout="out('-6840488528374549322');" style=""> 522         super.onResume();                                                                                </span>
<span class="-295722270474880574" onmouseenter="enter('-295722270474880574');" onmouseout="out('-295722270474880574');" style=""> 523         mNotesBucket.start();                                                                            </span>
<span class="-2614582349717816655" onmouseenter="enter('-2614582349717816655');" onmouseout="out('-2614582349717816655');" style=""> 524         AppLog.add(Type.SYNC, &quot;Started note bucket (NoteEditorFragment)&quot;);                               </span>
<span class="8320491026461558488" onmouseenter="enter('8320491026461558488');" onmouseout="out('8320491026461558488');" style=""> 525         mNotesBucket.addListener(this);                                                                  </span>
<span class="5183219019881866175" onmouseenter="enter('5183219019881866175');" onmouseout="out('5183219019881866175');" style=""> 526         mTagInput.setOnTagAddedListener(this);                                                           </span>
<span  style=""> 527                                                                                                          </span>
<span class="-8630351771722931094" onmouseenter="enter('-8630351771722931094');" onmouseout="out('-8630351771722931094');" style=""> 528         if (mContentEditText != null) {                                                                  </span>
<span class="7906960005192148215" onmouseenter="enter('7906960005192148215');" onmouseout="out('7906960005192148215');" style=""><abbr title=" 529             mContentEditText.setTextSize(TypedValue.COMPLEX_UNIT_SP, PrefUtils.getFontSize(requireContext()));"> 529             mContentEditText.setTextSize(TypedValue.COMPLEX_UNIT_SP, PrefUtils.getFontSize(requireContext🔵</abbr></span>
<span  style=""> 530                                                                                                          </span>
<span class="-9045903618847243853" onmouseenter="enter('-9045903618847243853');" onmouseout="out('-9045903618847243853');" style=""> 531             if (mContentEditText.hasFocus()) {                                                           </span>
<span class="2378139384018001812" onmouseenter="enter('2378139384018001812');" onmouseout="out('2378139384018001812');" style=""> 532                 showSoftKeyboard();                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 533             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 534         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 535     }                                                                                                    </span>
<span  style=""> 536                                                                                                          </span>
<span class="-7408745136026343325" onmouseenter="enter('-7408745136026343325');" onmouseout="out('-7408745136026343325');" style=""> 537     private void showSoftKeyboard() {                                                                    </span>
<span class="7162501222170899627" onmouseenter="enter('7162501222170899627');" onmouseout="out('7162501222170899627');" style=""> 538         new Handler().postDelayed(new Runnable() {                                                       </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 539             @Override                                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 540             public void run() {                                                                          </span>
<span class="-3170312762343778784" onmouseenter="enter('-3170312762343778784');" onmouseout="out('-3170312762343778784');" style=""> 541                 if (getActivity() == null) {                                                             </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 542                     return;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 543                 }                                                                                        </span>
<span  style=""> 544                                                                                                          </span>
<span class="6943331498658216188" onmouseenter="enter('6943331498658216188');" onmouseout="out('6943331498658216188');" style=""><abbr title=" 545                 InputMethodManager inputMethodManager = (InputMethodManager) getActivity().getSystemService(Context.INPUT_METHOD_SERVICE);"> 545                 InputMethodManager inputMethodManager = (InputMethodManager) getActivity().getSystemServi🔵</abbr></span>
<span class="-9213036537020298306" onmouseenter="enter('-9213036537020298306');" onmouseout="out('-9213036537020298306');" style=""> 546                 if (inputMethodManager != null) {                                                        </span>
<span class="7954226653587797662" onmouseenter="enter('7954226653587797662');" onmouseout="out('7954226653587797662');" style=""> 547                     inputMethodManager.showSoftInput(mContentEditText, 0);                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 548                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 549             }                                                                                            </span>
<span class="-4884776244894547305" onmouseenter="enter('-4884776244894547305');" onmouseout="out('-4884776244894547305');" style=""> 550         }, 100);                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 551     }                                                                                                    </span>
<span  style=""> 552                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 553     @Override                                                                                            </span>
<span class="3108783673391190151" onmouseenter="enter('3108783673391190151');" onmouseout="out('3108783673391190151');" style=""> 554     public void onPause() {                                                                              </span>
<span class="4626272369407912674" onmouseenter="enter('4626272369407912674');" onmouseout="out('4626272369407912674');" style=""> 555         super.onPause();  // Always call the superclass method first                                     </span>
<span class="-5493396254025166032" onmouseenter="enter('-5493396254025166032');" onmouseout="out('-5493396254025166032');" style=""> 556         mIsPaused = true;                                                                                </span>
<span  style=""> 557                                                                                                          </span>
<span class="-4286062678685908757" onmouseenter="enter('-4286062678685908757');" onmouseout="out('-4286062678685908757');" style=""> 558         // Hide soft keyboard if it is showing...                                                        </span>
<span class="5486984069351007864" onmouseenter="enter('5486984069351007864');" onmouseout="out('5486984069351007864');" style=""> 559         DisplayUtils.hideKeyboard(mContentEditText);                                                     </span>
<span  style=""> 560                                                                                                          </span>
<span class="6353289516119274314" onmouseenter="enter('6353289516119274314');" onmouseout="out('6353289516119274314');" style=""> 561         mTagInput.setOnTagAddedListener(null);                                                           </span>
<span  style=""> 562                                                                                                          </span>
<span class="-2149096896161266035" onmouseenter="enter('-2149096896161266035');" onmouseout="out('-2149096896161266035');" style=""> 563         if (mAutoSaveHandler != null) {                                                                  </span>
<span class="-5465787548318672754" onmouseenter="enter('-5465787548318672754');" onmouseout="out('-5465787548318672754');" style=""> 564             mAutoSaveHandler.removeCallbacks(mAutoSaveRunnable);                                         </span>
<span class="-837723219443324586" onmouseenter="enter('-837723219443324586');" onmouseout="out('-837723219443324586');" style=""> 565             mAutoSaveHandler.post(mAutoSaveRunnable);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 566         }                                                                                                </span>
<span  style=""> 567                                                                                                          </span>
<span class="-8758788084050668688" onmouseenter="enter('-8758788084050668688');" onmouseout="out('-8758788084050668688');" style=""> 568         if (mPublishTimeoutHandler != null) {                                                            </span>
<span class="-1646454762641300025" onmouseenter="enter('-1646454762641300025');" onmouseout="out('-1646454762641300025');" style=""> 569             mPublishTimeoutHandler.removeCallbacks(mPublishTimeoutRunnable);                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 570         }                                                                                                </span>
<span  style=""> 571                                                                                                          </span>
<span class="16247739636052398" onmouseenter="enter('16247739636052398');" onmouseout="out('16247739636052398');" style=""> 572         if (mHistoryTimeoutHandler != null) {                                                            </span>
<span class="7316258928910882956" onmouseenter="enter('7316258928910882956');" onmouseout="out('7316258928910882956');" style=""> 573             mHistoryTimeoutHandler.removeCallbacks(mHistoryTimeoutRunnable);                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 574         }                                                                                                </span>
<span  style=""> 575                                                                                                          </span>
<span class="212618759798230270" onmouseenter="enter('212618759798230270');" onmouseout="out('212618759798230270');" style=""> 576         mHighlighter.stop();                                                                             </span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style=""> 577         saveNote();                                                                                      </span>
<span class="-5110134461042230019" onmouseenter="enter('-5110134461042230019');" onmouseout="out('-5110134461042230019');" style=""> 578         AppLog.add(Type.SCREEN, &quot;Paused (NoteEditorFragment)&quot;);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 579     }                                                                                                    </span>
<span  style=""> 580                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 581     @Override                                                                                            </span>
<span class="658855826062432633" onmouseenter="enter('658855826062432633');" onmouseout="out('658855826062432633');" style=""> 582     public void onDestroy() {                                                                            </span>
<span class="7275190530034972367" onmouseenter="enter('7275190530034972367');" onmouseout="out('7275190530034972367');" style=""> 583         super.onDestroy();                                                                               </span>
<span class="-1649552973291504175" onmouseenter="enter('-1649552973291504175');" onmouseout="out('-1649552973291504175');" style=""> 584         mNotesBucket.removeListener(this);                                                               </span>
<span class="-9222421628383802707" onmouseenter="enter('-9222421628383802707');" onmouseout="out('-9222421628383802707');" style=""> 585         mNotesBucket.stop();                                                                             </span>
<span class="-5888247817738062720" onmouseenter="enter('-5888247817738062720');" onmouseout="out('-5888247817738062720');" style=""> 586         AppLog.add(Type.SYNC, &quot;Stopped note bucket (NoteEditorFragment)&quot;);                               </span>
<span class="284986690041099701" onmouseenter="enter('284986690041099701');" onmouseout="out('284986690041099701');" style=""> 587         AppLog.add(Type.SCREEN, &quot;Destroyed (NoteEditorFragment)&quot;);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 588     }                                                                                                    </span>
<span  style=""> 589                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 590     @Override                                                                                            </span>
<span class="5678576148993170097" onmouseenter="enter('5678576148993170097');" onmouseout="out('5678576148993170097');" style=""> 591     public void onSaveInstanceState(@NonNull Bundle outState) {                                          </span>
<span class="2796648189832219063" onmouseenter="enter('2796648189832219063');" onmouseout="out('2796648189832219063');" style=""> 592         super.onSaveInstanceState(outState);                                                             </span>
<span  style=""> 593                                                                                                          </span>
<span class="4471570229761422149" onmouseenter="enter('4471570229761422149');" onmouseout="out('4471570229761422149');" style=""> 594         if (DisplayUtils.isLargeScreenLandscape(getActivity()) &amp;&amp; mNote != null) {                       </span>
<span class="7419969731723984173" onmouseenter="enter('7419969731723984173');" onmouseout="out('7419969731723984173');" style=""> 595             outState.putString(STATE_NOTE_ID, mNote.getSimperiumKey());                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 596         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 597     }                                                                                                    </span>
<span  style=""> 598                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 599     @Override                                                                                            </span>
<span class="-3104619052446816858" onmouseenter="enter('-3104619052446816858');" onmouseout="out('-3104619052446816858');" style=""> 600     public void onCreateOptionsMenu(@NonNull Menu menu, @NonNull MenuInflater inflater) {                </span>
<span class="5772887857065615623" onmouseenter="enter('5772887857065615623');" onmouseout="out('5772887857065615623');" style=""> 601         super.onCreateOptionsMenu(menu, inflater);                                                       </span>
<span  style=""> 602                                                                                                          </span>
<span class="-4568224188607879240" onmouseenter="enter('-4568224188607879240');" onmouseout="out('-4568224188607879240');" style=""><abbr title=" 603         if (!isAdded() || (!mIsFromWidget &amp;&amp; DisplayUtils.isLargeScreenLandscape(getActivity()) &amp;&amp; mNoteMarkdownFragment == null)) {"> 603         if (!isAdded() || (!mIsFromWidget &amp;&amp; DisplayUtils.isLargeScreenLandscape(getActivity()) &amp;&amp; mNoteM🔵</abbr></span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 604             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 605         }                                                                                                </span>
<span  style=""> 606                                                                                                          </span>
<span class="-5591635883999644357" onmouseenter="enter('-5591635883999644357');" onmouseout="out('-5591635883999644357');" style=""> 607         inflater.inflate(R.menu.note_editor, menu);                                                      </span>
<span class="5385664906661306149" onmouseenter="enter('5385664906661306149');" onmouseout="out('5385664906661306149');" style=""> 608         MenuCompat.setGroupDividerEnabled(menu, true);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 609     }                                                                                                    </span>
<span  style=""> 610                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 611     @Override                                                                                            </span>
<span class="-882410792536471577" onmouseenter="enter('-882410792536471577');" onmouseout="out('-882410792536471577');" style=""> 612     public boolean onOptionsItemSelected(@NonNull MenuItem item) {                                       </span>
<span class="2068182408853392247" onmouseenter="enter('2068182408853392247');" onmouseout="out('2068182408853392247');" style=""> 613         switch (item.getItemId()) {                                                                      </span>
<span class="-9105547343157360739" onmouseenter="enter('-9105547343157360739');" onmouseout="out('-9105547343157360739');" style=""> 614             case R.id.menu_checklist:                                                                    </span>
<span class="2996686463249748346" onmouseenter="enter('2996686463249748346');" onmouseout="out('2996686463249748346');" style=""> 615                 insertChecklist();                                                                       </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 616                 return true;                                                                             </span>
<span class="1323072004784584241" onmouseenter="enter('1323072004784584241');" onmouseout="out('1323072004784584241');" style=""> 617             case R.id.menu_copy:                                                                         </span>
<span class="8518441705934796822" onmouseenter="enter('8518441705934796822');" onmouseout="out('8518441705934796822');" style=""> 618                 if (BrowserUtils.copyToClipboard(requireContext(), mNote.getPublishedUrl())) {           </span>
<span class="3795490233575843146" onmouseenter="enter('3795490233575843146');" onmouseout="out('3795490233575843146');" style=""> 619                     Snackbar.make(mRootView, R.string.link_copied, Snackbar.LENGTH_SHORT).show();        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 620                 } else {                                                                                 </span>
<span class="8359220226685626421" onmouseenter="enter('8359220226685626421');" onmouseout="out('8359220226685626421');" style=""> 621                     Snackbar.make(mRootView, R.string.link_copied_failure, Snackbar.LENGTH_SHORT).show();</span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 622                 }                                                                                        </span>
<span  style=""> 623                                                                                                          </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 624                 return true;                                                                             </span>
<span class="5654474204908123045" onmouseenter="enter('5654474204908123045');" onmouseout="out('5654474204908123045');" style=""> 625             case R.id.menu_copy_internal:                                                                </span>
<span class="-3103212045473028348" onmouseenter="enter('-3103212045473028348');" onmouseout="out('-3103212045473028348');" style=""><abbr title=" 626                 if (BrowserUtils.copyToClipboard(requireContext(), SimplenoteLinkify.getNoteLinkWithTitle(mNote.getTitle(), mNote.getSimperiumKey()))) {"> 626                 if (BrowserUtils.copyToClipboard(requireContext(), SimplenoteLinkify.getNoteLinkWithTitle🔵</abbr></span>
<span class="3795490233575843146" onmouseenter="enter('3795490233575843146');" onmouseout="out('3795490233575843146');" style=""> 627                     Snackbar.make(mRootView, R.string.link_copied, Snackbar.LENGTH_SHORT).show();        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 628                 } else {                                                                                 </span>
<span class="8359220226685626421" onmouseenter="enter('8359220226685626421');" onmouseout="out('8359220226685626421');" style=""> 629                     Snackbar.make(mRootView, R.string.link_copied_failure, Snackbar.LENGTH_SHORT).show();</span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 630                 }                                                                                        </span>
<span  style=""> 631                                                                                                          </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 632                 return true;                                                                             </span>
<span class="1329351071337199880" onmouseenter="enter('1329351071337199880');" onmouseout="out('1329351071337199880');" style=""> 633             case R.id.menu_history:                                                                      </span>
<span class="3115064412317025337" onmouseenter="enter('3115064412317025337');" onmouseout="out('3115064412317025337');" style=""> 634                 showHistory();                                                                           </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 635                 return true;                                                                             </span>
<span class="-7455228569432134304" onmouseenter="enter('-7455228569432134304');" onmouseout="out('-7455228569432134304');" style=""> 636             case R.id.menu_info:                                                                         </span>
<span class="1221863391504882204" onmouseenter="enter('1221863391504882204');" onmouseout="out('1221863391504882204');" style=""> 637                 showInfo();                                                                              </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 638                 return true;                                                                             </span>
<span class="1690518520070570963" onmouseenter="enter('1690518520070570963');" onmouseout="out('1690518520070570963');" style=""> 639             case R.id.menu_markdown:                                                                     </span>
<span class="-3926545672787324985" onmouseenter="enter('-3926545672787324985');" onmouseout="out('-3926545672787324985');" style=""> 640                 setMarkdown(!item.isChecked());                                                          </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 641                 return true;                                                                             </span>
<span class="2584816759865872098" onmouseenter="enter('2584816759865872098');" onmouseout="out('2584816759865872098');" style=""> 642             case R.id.menu_pin:                                                                          </span>
<span class="846429991982879471" onmouseenter="enter('846429991982879471');" onmouseout="out('846429991982879471');" style=""> 643                 NoteUtils.setNotePin(mNote, !item.isChecked());                                          </span>
<span class="-8532471920650411447" onmouseenter="enter('-8532471920650411447');" onmouseout="out('-8532471920650411447');" style=""> 644                 requireActivity().invalidateOptionsMenu();                                               </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 645                 return true;                                                                             </span>
<span class="-1377067082739801221" onmouseenter="enter('-1377067082739801221');" onmouseout="out('-1377067082739801221');" style=""> 646             case R.id.menu_publish:                                                                      </span>
<span class="-3060727947180574444" onmouseenter="enter('-3060727947180574444');" onmouseout="out('-3060727947180574444');" style=""> 647                 if (item.isChecked()) {                                                                  </span>
<span class="4812123925634099655" onmouseenter="enter('4812123925634099655');" onmouseout="out('4812123925634099655');" style=""> 648                     unpublishNote();                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 649                 } else {                                                                                 </span>
<span class="7985358866333072123" onmouseenter="enter('7985358866333072123');" onmouseout="out('7985358866333072123');" style=""> 650                     publishNote();                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 651                 }                                                                                        </span>
<span  style=""> 652                                                                                                          </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 653                 return true;                                                                             </span>
<span class="4712317589059090097" onmouseenter="enter('4712317589059090097');" onmouseout="out('4712317589059090097');" style=""> 654             case R.id.menu_share:                                                                        </span>
<span class="2819818847761455451" onmouseenter="enter('2819818847761455451');" onmouseout="out('2819818847761455451');" style=""> 655                 shareNote();                                                                             </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 656                 return true;                                                                             </span>
<span class="-7045228079815744059" onmouseenter="enter('-7045228079815744059');" onmouseout="out('-7045228079815744059');" style=""> 657             case R.id.menu_trash:                                                                        </span>
<span class="5514287417242355685" onmouseenter="enter('5514287417242355685');" onmouseout="out('5514287417242355685');" style=""> 658                 if (!isAdded()) {                                                                        </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 659                     return false;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 660                 }                                                                                        </span>
<span  style=""> 661                                                                                                          </span>
<span class="3639769569139585690" onmouseenter="enter('3639769569139585690');" onmouseout="out('3639769569139585690');" style=""> 662                 deleteNote();                                                                            </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 663                 return true;                                                                             </span>
<span class="4538874991877816092" onmouseenter="enter('4538874991877816092');" onmouseout="out('4538874991877816092');" style=""> 664             case android.R.id.home:                                                                      </span>
<span class="-5022390127132774156" onmouseenter="enter('-5022390127132774156');" onmouseout="out('-5022390127132774156');" style=""> 665                 AppLog.add(Type.ACTION, &quot;Tapped back arrow in app bar (NoteEditorFragment)&quot;);            </span>
<span class="5514287417242355685" onmouseenter="enter('5514287417242355685');" onmouseout="out('5514287417242355685');" style=""> 666                 if (!isAdded()) {                                                                        </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 667                     return false;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 668                 }                                                                                        </span>
<span  style=""> 669                                                                                                          </span>
<span class="-1923482990691915278" onmouseenter="enter('-1923482990691915278');" onmouseout="out('-1923482990691915278');" style=""> 670                 requireActivity().finish();                                                              </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 671                 return true;                                                                             </span>
<span class="-8178136317704390296" onmouseenter="enter('-8178136317704390296');" onmouseout="out('-8178136317704390296');" style=""> 672             default:                                                                                     </span>
<span class="-3863613010288750787" onmouseenter="enter('-3863613010288750787');" onmouseout="out('-3863613010288750787');" style=""> 673                 return super.onOptionsItemSelected(item);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 674         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 675     }                                                                                                    </span>
<span  style=""> 676                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 677     @Override                                                                                            </span>
<span class="976560802893770483" onmouseenter="enter('976560802893770483');" onmouseout="out('976560802893770483');" style=""> 678     public void onPrepareOptionsMenu(@NonNull Menu menu) {                                               </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 679         if (mNote != null) {                                                                             </span>
<span class="4103252492326247538" onmouseenter="enter('4103252492326247538');" onmouseout="out('4103252492326247538');" style=""> 680             MenuItem pinItem = menu.findItem(R.id.menu_pin);                                             </span>
<span class="-1901297934576221502" onmouseenter="enter('-1901297934576221502');" onmouseout="out('-1901297934576221502');" style=""> 681             MenuItem shareItem = menu.findItem(R.id.menu_share);                                         </span>
<span class="-1024200395334062210" onmouseenter="enter('-1024200395334062210');" onmouseout="out('-1024200395334062210');" style=""> 682             MenuItem historyItem = menu.findItem(R.id.menu_history);                                     </span>
<span class="8524821600195318381" onmouseenter="enter('8524821600195318381');" onmouseout="out('8524821600195318381');" style=""> 683             MenuItem publishItem = menu.findItem(R.id.menu_publish);                                     </span>
<span class="-2596587708374310136" onmouseenter="enter('-2596587708374310136');" onmouseout="out('-2596587708374310136');" style=""> 684             MenuItem copyLinkItem = menu.findItem(R.id.menu_copy);                                       </span>
<span class="3256712546982954826" onmouseenter="enter('3256712546982954826');" onmouseout="out('3256712546982954826');" style=""> 685             MenuItem markdownItem = menu.findItem(R.id.menu_markdown);                                   </span>
<span class="7126556138263523964" onmouseenter="enter('7126556138263523964');" onmouseout="out('7126556138263523964');" style=""> 686             MenuItem trashItem = menu.findItem(R.id.menu_trash);                                         </span>
<span class="-481966053977064278" onmouseenter="enter('-481966053977064278');" onmouseout="out('-481966053977064278');" style=""> 687             mChecklistMenuItem = menu.findItem(R.id.menu_checklist);                                     </span>
<span class="-41110414926085356" onmouseenter="enter('-41110414926085356');" onmouseout="out('-41110414926085356');" style=""> 688             mInformationMenuItem = menu.findItem(R.id.menu_info).setVisible(true);                       </span>
<span  style=""> 689                                                                                                          </span>
<span class="-7678419238898690461" onmouseenter="enter('-7678419238898690461');" onmouseout="out('-7678419238898690461');" style=""> 690             pinItem.setChecked(mNote.isPinned());                                                        </span>
<span class="5915502490134342688" onmouseenter="enter('5915502490134342688');" onmouseout="out('5915502490134342688');" style=""> 691             publishItem.setChecked(mNote.isPublished());                                                 </span>
<span class="-2454055549809219964" onmouseenter="enter('-2454055549809219964');" onmouseout="out('-2454055549809219964');" style=""> 692             markdownItem.setChecked(mNote.isMarkdownEnabled());                                          </span>
<span  style=""> 693                                                                                                          </span>
<span class="8027745968637922893" onmouseenter="enter('8027745968637922893');" onmouseout="out('8027745968637922893');" style=""> 694             // Disable actions when note is in Trash or markdown view is shown on large device.          </span>
<span class="-431402929828645917" onmouseenter="enter('-431402929828645917');" onmouseout="out('-431402929828645917');" style=""> 695             if (mNote.isDeleted() || (mMarkdown != null &amp;&amp; mMarkdown.getVisibility() == View.VISIBLE)) { </span>
<span class="-1690132925836641241" onmouseenter="enter('-1690132925836641241');" onmouseout="out('-1690132925836641241');" style=""> 696                 pinItem.setEnabled(false);                                                               </span>
<span class="-5469494517506321069" onmouseenter="enter('-5469494517506321069');" onmouseout="out('-5469494517506321069');" style=""> 697                 shareItem.setEnabled(false);                                                             </span>
<span class="9085171889633758452" onmouseenter="enter('9085171889633758452');" onmouseout="out('9085171889633758452');" style=""> 698                 historyItem.setEnabled(false);                                                           </span>
<span class="6693521395658962624" onmouseenter="enter('6693521395658962624');" onmouseout="out('6693521395658962624');" style=""> 699                 publishItem.setEnabled(false);                                                           </span>
<span class="9087995724461855803" onmouseenter="enter('9087995724461855803');" onmouseout="out('9087995724461855803');" style=""> 700                 copyLinkItem.setEnabled(false);                                                          </span>
<span class="-1845358690665350593" onmouseenter="enter('-1845358690665350593');" onmouseout="out('-1845358690665350593');" style=""> 701                 markdownItem.setEnabled(false);                                                          </span>
<span class="1533489871724235057" onmouseenter="enter('1533489871724235057');" onmouseout="out('1533489871724235057');" style=""> 702                 mChecklistMenuItem.setEnabled(false);                                                    </span>
<span class="5575712097606361646" onmouseenter="enter('5575712097606361646');" onmouseout="out('5575712097606361646');" style=""> 703                 DrawableUtils.setMenuItemAlpha(mChecklistMenuItem, 0.3);  // 0.3 is 30% opacity.         </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 704             } else {                                                                                     </span>
<span class="-4176946050939173198" onmouseenter="enter('-4176946050939173198');" onmouseout="out('-4176946050939173198');" style=""> 705                 pinItem.setEnabled(true);                                                                </span>
<span class="-8607869884042424878" onmouseenter="enter('-8607869884042424878');" onmouseout="out('-8607869884042424878');" style=""> 706                 shareItem.setEnabled(true);                                                              </span>
<span class="-4314747760650157745" onmouseenter="enter('-4314747760650157745');" onmouseout="out('-4314747760650157745');" style=""> 707                 historyItem.setEnabled(true);                                                            </span>
<span class="3398211100008798634" onmouseenter="enter('3398211100008798634');" onmouseout="out('3398211100008798634');" style=""> 708                 publishItem.setEnabled(true);                                                            </span>
<span class="-4773075625324516073" onmouseenter="enter('-4773075625324516073');" onmouseout="out('-4773075625324516073');" style=""> 709                 copyLinkItem.setEnabled(mNote.isPublished());                                            </span>
<span class="3540588263915729219" onmouseenter="enter('3540588263915729219');" onmouseout="out('3540588263915729219');" style=""> 710                 markdownItem.setEnabled(true);                                                           </span>
<span class="9157159425417983851" onmouseenter="enter('9157159425417983851');" onmouseout="out('9157159425417983851');" style=""> 711                 mChecklistMenuItem.setEnabled(true);                                                     </span>
<span class="-997998498639683163" onmouseenter="enter('-997998498639683163');" onmouseout="out('-997998498639683163');" style=""> 712                 DrawableUtils.setMenuItemAlpha(mChecklistMenuItem, 1.0);  // 1.0 is 100% opacity.        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 713             }                                                                                            </span>
<span  style=""> 714                                                                                                          </span>
<span class="5561093706160816776" onmouseenter="enter('5561093706160816776');" onmouseout="out('5561093706160816776');" style=""> 715             if (mNote.isDeleted()) {                                                                     </span>
<span class="-3033015909800303171" onmouseenter="enter('-3033015909800303171');" onmouseout="out('-3033015909800303171');" style=""> 716                 trashItem.setTitle(R.string.restore);                                                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 717             } else {                                                                                     </span>
<span class="-1683477354690990368" onmouseenter="enter('-1683477354690990368');" onmouseout="out('-1683477354690990368');" style=""> 718                 trashItem.setTitle(R.string.trash);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 719             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 720         }                                                                                                </span>
<span  style=""> 721                                                                                                          </span>
<span class="-5146912340244450550" onmouseenter="enter('-5146912340244450550');" onmouseout="out('-5146912340244450550');" style=""> 722         DrawableUtils.tintMenuWithAttribute(getActivity(), menu, R.attr.toolbarIconColor);               </span>
<span class="1467059367331108531" onmouseenter="enter('1467059367331108531');" onmouseout="out('1467059367331108531');" style=""> 723         super.onPrepareOptionsMenu(menu);                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 724     }                                                                                                    </span>
<span  style=""> 725                                                                                                          </span>
<span class="-2056093237925143337" onmouseenter="enter('-2056093237925143337');" onmouseout="out('-2056093237925143337');" style=""> 726     public void insertChecklist() {                                                                      </span>
<span class="-2132172590912834546" onmouseenter="enter('-2132172590912834546');" onmouseout="out('-2132172590912834546');" style=""> 727         DrawableUtils.startAnimatedVectorDrawable(mChecklistMenuItem.getIcon());                         </span>
<span  style=""> 728                                                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 729         try {                                                                                            </span>
<span class="5818347684529310934" onmouseenter="enter('5818347684529310934');" onmouseout="out('5818347684529310934');" style=""> 730             mContentEditText.insertChecklist();                                                          </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 731         } catch (Exception e) {                                                                          </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 732             e.printStackTrace();                                                                         </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 733             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 734         }                                                                                                </span>
<span  style=""> 735                                                                                                          </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 736         AnalyticsTracker.track(                                                                          </span>
<span class="2856363448162984839" onmouseenter="enter('2856363448162984839');" onmouseout="out('2856363448162984839');" style=""> 737             EDITOR_CHECKLIST_INSERTED,                                                                   </span>
<span class="-2430475172570880083" onmouseenter="enter('-2430475172570880083');" onmouseout="out('-2430475172570880083');" style=""> 738             CATEGORY_NOTE,                                                                               </span>
<span class="3613116414135407305" onmouseenter="enter('3613116414135407305');" onmouseout="out('3613116414135407305');" style=""> 739             &quot;toolbar_button&quot;                                                                             </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 740         );                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 741     }                                                                                                    </span>
<span  style=""> 742                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 743     @Override                                                                                            </span>
<span class="-8145186961220354967" onmouseenter="enter('-8145186961220354967');" onmouseout="out('-8145186961220354967');" style=""> 744     public void onCheckboxToggled() {                                                                    </span>
<span class="-2834824800808682286" onmouseenter="enter('-2834824800808682286');" onmouseout="out('-2834824800808682286');" style=""> 745         // Save note (using delay) after toggling a checkbox                                             </span>
<span class="-2149096896161266035" onmouseenter="enter('-2149096896161266035');" onmouseout="out('-2149096896161266035');" style=""> 746         if (mAutoSaveHandler != null) {                                                                  </span>
<span class="-5465787548318672754" onmouseenter="enter('-5465787548318672754');" onmouseout="out('-5465787548318672754');" style=""> 747             mAutoSaveHandler.removeCallbacks(mAutoSaveRunnable);                                         </span>
<span class="3237260668993885548" onmouseenter="enter('3237260668993885548');" onmouseout="out('3237260668993885548');" style=""> 748             mAutoSaveHandler.postDelayed(mAutoSaveRunnable, AUTOSAVE_DELAY_MILLIS);                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 749         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 750     }                                                                                                    </span>
<span  style=""> 751                                                                                                          </span>
<span class="-7228463698535350052" onmouseenter="enter('-7228463698535350052');" onmouseout="out('-7228463698535350052');" style=""> 752     private void deleteNote() {                                                                          </span>
<span class="4492119149633458811" onmouseenter="enter('4492119149633458811');" onmouseout="out('4492119149633458811');" style=""> 753         NoteUtils.deleteNote(mNote, getActivity());                                                      </span>
<span class="-1923482990691915278" onmouseenter="enter('-1923482990691915278');" onmouseout="out('-1923482990691915278');" style=""> 754         requireActivity().finish();                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 755     }                                                                                                    </span>
<span  style=""> 756                                                                                                          </span>
<span class="6575837707802621057" onmouseenter="enter('6575837707802621057');" onmouseout="out('6575837707802621057');" style=""> 757     protected void clearMarkdown() {                                                                     </span>
<span class="4379033444024403701" onmouseenter="enter('4379033444024403701');" onmouseout="out('4379033444024403701');" style=""> 758         mMarkdown.loadDataWithBaseURL(&quot;file:///android_asset/&quot;, mCss + &quot;&quot;, &quot;text/html&quot;, &quot;utf-8&quot;, null);  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 759     }                                                                                                    </span>
<span  style=""> 760                                                                                                          </span>
<span class="4876877473500420963" onmouseenter="enter('4876877473500420963');" onmouseout="out('4876877473500420963');" style=""> 761     protected void hideMarkdown() {                                                                      </span>
<span class="6362103358672335388" onmouseenter="enter('6362103358672335388');" onmouseout="out('6362103358672335388');" style=""> 762         mMarkdown.setVisibility(View.INVISIBLE);                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 763     }                                                                                                    </span>
<span  style=""> 764                                                                                                          </span>
<span class="-3219341107535080329" onmouseenter="enter('-3219341107535080329');" onmouseout="out('-3219341107535080329');" style=""> 765     protected void showMarkdown() {                                                                      </span>
<span class="3327794499329885328" onmouseenter="enter('3327794499329885328');" onmouseout="out('3327794499329885328');" style=""> 766         loadMarkdownData();                                                                              </span>
<span class="4346698976501095620" onmouseenter="enter('4346698976501095620');" onmouseout="out('4346698976501095620');" style=""> 767         mMarkdown.setVisibility(View.VISIBLE);                                                           </span>
<span  style=""> 768                                                                                                          </span>
<span class="-8355266079523609200" onmouseenter="enter('-8355266079523609200');" onmouseout="out('-8355266079523609200');" style=""> 769         new Handler().postDelayed(                                                                       </span>
<span class="4860439059348199630" onmouseenter="enter('4860439059348199630');" onmouseout="out('4860439059348199630');" style=""> 770             new Runnable() {                                                                             </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 771                 @Override                                                                                </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 772                 public void run() {                                                                      </span>
<span class="-8532471920650411447" onmouseenter="enter('-8532471920650411447');" onmouseout="out('-8532471920650411447');" style=""> 773                     requireActivity().invalidateOptionsMenu();                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 774                 }                                                                                        </span>
<span class="-4102417550988568311" onmouseenter="enter('-4102417550988568311');" onmouseout="out('-4102417550988568311');" style=""> 775             },                                                                                           </span>
<span class="5128296635725421077" onmouseenter="enter('5128296635725421077');" onmouseout="out('5128296635725421077');" style=""> 776             getResources().getInteger(R.integer.time_animation)                                          </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 777         );                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 778     }                                                                                                    </span>
<span  style=""> 779                                                                                                          </span>
<span class="796341583224604558" onmouseenter="enter('796341583224604558');" onmouseout="out('796341583224604558');" style=""> 780     public void shareNote() {                                                                            </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 781         if (mNote != null) {                                                                             </span>
<span class="-5662939853121386036" onmouseenter="enter('-5662939853121386036');" onmouseout="out('-5662939853121386036');" style=""> 782             mContentEditText.clearFocus();                                                               </span>
<span class="-641201949227129854" onmouseenter="enter('-641201949227129854');" onmouseout="out('-641201949227129854');" style=""> 783             showShareSheet();                                                                            </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 784             AnalyticsTracker.track(                                                                      </span>
<span class="-5025794315104060878" onmouseenter="enter('-5025794315104060878');" onmouseout="out('-5025794315104060878');" style=""> 785                 EDITOR_NOTE_CONTENT_SHARED,                                                              </span>
<span class="-2430475172570880083" onmouseenter="enter('-2430475172570880083');" onmouseout="out('-2430475172570880083');" style=""> 786                 CATEGORY_NOTE,                                                                           </span>
<span class="2749115305963564191" onmouseenter="enter('2749115305963564191');" onmouseout="out('2749115305963564191');" style=""> 787                 &quot;action_bar_share_button&quot;                                                                </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 788             );                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 789         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 790     }                                                                                                    </span>
<span  style=""> 791                                                                                                          </span>
<span class="-6549715277076486587" onmouseenter="enter('-6549715277076486587');" onmouseout="out('-6549715277076486587');" style=""> 792     public void showHistory() {                                                                          </span>
<span class="-4132317386083687564" onmouseenter="enter('-4132317386083687564');" onmouseout="out('-4132317386083687564');" style=""> 793         if (mNote != null &amp;&amp; mNote.getVersion() &gt; 1) {                                                   </span>
<span class="-5662939853121386036" onmouseenter="enter('-5662939853121386036');" onmouseout="out('-5662939853121386036');" style=""> 794             mContentEditText.clearFocus();                                                               </span>
<span class="2792270431942423109" onmouseenter="enter('2792270431942423109');" onmouseout="out('2792270431942423109');" style=""> 795             mHistoryTimeoutHandler.postDelayed(mHistoryTimeoutRunnable, HISTORY_TIMEOUT);                </span>
<span class="-6120831555230055153" onmouseenter="enter('-6120831555230055153');" onmouseout="out('-6120831555230055153');" style=""> 796             showHistorySheet();                                                                          </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 797         } else {                                                                                         </span>
<span class="-1949769614201595359" onmouseenter="enter('-1949769614201595359');" onmouseout="out('-1949769614201595359');" style=""> 798             Toast.makeText(getActivity(), R.string.error_history, Toast.LENGTH_LONG).show();             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 799         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 800     }                                                                                                    </span>
<span  style=""> 801                                                                                                          </span>
<span class="7631792944897512467" onmouseenter="enter('7631792944897512467');" onmouseout="out('7631792944897512467');" style=""> 802     public void showInfo() {                                                                             </span>
<span class="8350219460722128573" onmouseenter="enter('8350219460722128573');" onmouseout="out('8350219460722128573');" style=""> 803         DrawableUtils.startAnimatedVectorDrawable(mInformationMenuItem.getIcon());                       </span>
<span  style=""> 804                                                                                                          </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 805         if (mNote != null) {                                                                             </span>
<span class="-5662939853121386036" onmouseenter="enter('-5662939853121386036');" onmouseout="out('-5662939853121386036');" style=""> 806             mContentEditText.clearFocus();                                                               </span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style=""> 807             saveNote();                                                                                  </span>
<span class="-4032532453651560177" onmouseenter="enter('-4032532453651560177');" onmouseout="out('-4032532453651560177');" style=""> 808             showInfoSheet();                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 809         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 810     }                                                                                                    </span>
<span  style=""> 811                                                                                                          </span>
<span class="-352900364532795923" onmouseenter="enter('-352900364532795923');" onmouseout="out('-352900364532795923');" style=""> 812     private void setMarkdown(boolean isChecked) {                                                        </span>
<span class="-8726857289881922025" onmouseenter="enter('-8726857289881922025');" onmouseout="out('-8726857289881922025');" style=""> 813         mIsMarkdownEnabled = isChecked;                                                                  </span>
<span class="-2583362461360625309" onmouseenter="enter('-2583362461360625309');" onmouseout="out('-2583362461360625309');" style=""> 814         showMarkdownActionOrTabs();                                                                      </span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style=""> 815         saveNote();                                                                                      </span>
<span  style=""> 816                                                                                                          </span>
<span class="4232333416851338644" onmouseenter="enter('4232333416851338644');" onmouseout="out('4232333416851338644');" style=""> 817         // Set preference so that next new note will have markdown enabled.                              </span>
<span class="6036884777494374936" onmouseenter="enter('6036884777494374936');" onmouseout="out('6036884777494374936');" style=""> 818         SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(requireContext());       </span>
<span class="-5940133505573131741" onmouseenter="enter('-5940133505573131741');" onmouseout="out('-5940133505573131741');" style=""> 819         SharedPreferences.Editor editor = prefs.edit();                                                  </span>
<span class="5795063328820819160" onmouseenter="enter('5795063328820819160');" onmouseout="out('5795063328820819160');" style=""> 820         editor.putBoolean(PrefUtils.PREF_MARKDOWN_ENABLED, isChecked);                                   </span>
<span class="-5305612453340718340" onmouseenter="enter('-5305612453340718340');" onmouseout="out('-5305612453340718340');" style=""> 821         editor.apply();                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 822     }                                                                                                    </span>
<span  style=""> 823                                                                                                          </span>
<span class="-8233267360630545179" onmouseenter="enter('-8233267360630545179');" onmouseout="out('-8233267360630545179');" style=""> 824     private void setMarkdownEnabled(boolean enabled) {                                                   </span>
<span class="-9128949734751156553" onmouseenter="enter('-9128949734751156553');" onmouseout="out('-9128949734751156553');" style=""> 825         mIsMarkdownEnabled = enabled;                                                                    </span>
<span  style=""> 826                                                                                                          </span>
<span class="-5497853437151453135" onmouseenter="enter('-5497853437151453135');" onmouseout="out('-5497853437151453135');" style=""> 827         if (mIsMarkdownEnabled) {                                                                        </span>
<span class="3327794499329885328" onmouseenter="enter('3327794499329885328');" onmouseout="out('3327794499329885328');" style=""> 828             loadMarkdownData();                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 829         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 830     }                                                                                                    </span>
<span  style=""> 831                                                                                                          </span>
<span class="-150225536602277221" onmouseenter="enter('-150225536602277221');" onmouseout="out('-150225536602277221');" style=""> 832     private void showMarkdownActionOrTabs() {                                                            </span>
<span class="-5071525869541290984" onmouseenter="enter('-5071525869541290984');" onmouseout="out('-5071525869541290984');" style=""> 833         Activity activity = getActivity();                                                               </span>
<span  style=""> 834                                                                                                          </span>
<span class="2687579389951242136" onmouseenter="enter('2687579389951242136');" onmouseout="out('2687579389951242136');" style=""> 835         if (activity instanceof NoteEditorActivity) {                                                    </span>
<span class="-2402557313247060047" onmouseenter="enter('-2402557313247060047');" onmouseout="out('-2402557313247060047');" style=""> 836             NoteEditorActivity editorActivity = (NoteEditorActivity) activity;                           </span>
<span  style=""> 837                                                                                                          </span>
<span class="-5497853437151453135" onmouseenter="enter('-5497853437151453135');" onmouseout="out('-5497853437151453135');" style=""> 838             if (mIsMarkdownEnabled) {                                                                    </span>
<span class="2738920073364403707" onmouseenter="enter('2738920073364403707');" onmouseout="out('2738920073364403707');" style=""> 839                 editorActivity.showTabs();                                                               </span>
<span  style=""> 840                                                                                                          </span>
<span class="-3674842258349497418" onmouseenter="enter('-3674842258349497418');" onmouseout="out('-3674842258349497418');" style=""> 841                 if (mNoteMarkdownFragment == null) {                                                     </span>
<span class="-8091199532300597402" onmouseenter="enter('-8091199532300597402');" onmouseout="out('-8091199532300597402');" style=""> 842                     // Get markdown fragment and update content                                          </span>
<span class="6541177819216640453" onmouseenter="enter('6541177819216640453');" onmouseout="out('6541177819216640453');" style=""> 843                     mNoteMarkdownFragment = editorActivity.getNoteMarkdownFragment();                    </span>
<span class="8234543871026198045" onmouseenter="enter('8234543871026198045');" onmouseout="out('8234543871026198045');" style=""> 844                     mNoteMarkdownFragment.updateMarkdown(mContentEditText.getPreviewTextContent());      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 845                 }                                                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 846             } else {                                                                                     </span>
<span class="-1827112023263463857" onmouseenter="enter('-1827112023263463857');" onmouseout="out('-1827112023263463857');" style=""> 847                 editorActivity.hideTabs();                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 848             }                                                                                            </span>
<span class="-8182258209329027497" onmouseenter="enter('-8182258209329027497');" onmouseout="out('-8182258209329027497');" style=""> 849         } else if (activity instanceof NotesActivity) {                                                  </span>
<span class="714586879751884809" onmouseenter="enter('714586879751884809');" onmouseout="out('714586879751884809');" style=""> 850             setMarkdownEnabled(mIsMarkdownEnabled);                                                      </span>
<span class="9075936053703013718" onmouseenter="enter('9075936053703013718');" onmouseout="out('9075936053703013718');" style=""> 851             ((NotesActivity) getActivity()).setMarkdownShowing(false);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 852         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 853     }                                                                                                    </span>
<span  style=""> 854                                                                                                          </span>
<span class="-2467052403250215415" onmouseenter="enter('-2467052403250215415');" onmouseout="out('-2467052403250215415');" style=""> 855     private void loadMarkdownData() {                                                                    </span>
<span class="-8622237621259523057" onmouseenter="enter('-8622237621259523057');" onmouseout="out('-8622237621259523057');" style=""> 856         String formattedContent = NoteMarkdownFragment.getMarkdownFormattedContent(                      </span>
<span class="-107180190148709194" onmouseenter="enter('-107180190148709194');" onmouseout="out('-107180190148709194');" style=""> 857                 mCss,                                                                                    </span>
<span class="8402262730640179324" onmouseenter="enter('8402262730640179324');" onmouseout="out('8402262730640179324');" style=""> 858                 mContentEditText.getPreviewTextContent()                                                 </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 859         );                                                                                               </span>
<span  style=""> 860                                                                                                          </span>
<span class="-1179287945165338458" onmouseenter="enter('-1179287945165338458');" onmouseout="out('-1179287945165338458');" style=""> 861         mMarkdown.loadDataWithBaseURL(null, formattedContent, &quot;text/html&quot;, &quot;utf-8&quot;, null);               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 862     }                                                                                                    </span>
<span  style=""> 863                                                                                                          </span>
<span class="8195105300246755684" onmouseenter="enter('8195105300246755684');" onmouseout="out('8195105300246755684');" style=""> 864     public void setNote(String noteID, String matchOffsets) {                                            </span>
<span class="-3646372507164546123" onmouseenter="enter('-3646372507164546123');" onmouseout="out('-3646372507164546123');" style=""> 865         if (mAutoSaveHandler != null)                                                                    </span>
<span class="-5465787548318672754" onmouseenter="enter('-5465787548318672754');" onmouseout="out('-5465787548318672754');" style=""> 866             mAutoSaveHandler.removeCallbacks(mAutoSaveRunnable);                                         </span>
<span  style=""> 867                                                                                                          </span>
<span class="-2690182352330934584" onmouseenter="enter('-2690182352330934584');" onmouseout="out('-2690182352330934584');" style=""> 868         mPlaceholderView.setVisibility(View.GONE);                                                       </span>
<span  style=""> 869                                                                                                          </span>
<span class="-7566474685196195951" onmouseenter="enter('-7566474685196195951');" onmouseout="out('-7566474685196195951');" style=""> 870         if (matchOffsets != null) {                                                                      </span>
<span class="76822769413740338" onmouseenter="enter('76822769413740338');" onmouseout="out('76822769413740338');" style=""> 871             mMatchOffsets = matchOffsets;                                                                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 872         } else {                                                                                         </span>
<span class="-5254682256162211718" onmouseenter="enter('-5254682256162211718');" onmouseout="out('-5254682256162211718');" style=""> 873             mMatchOffsets = null;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 874         }                                                                                                </span>
<span  style=""> 875                                                                                                          </span>
<span  style=""> 876                                                                                                          </span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style=""> 877         saveNote();                                                                                      </span>
<span  style=""> 878                                                                                                          </span>
<span class="-2429694576102374369" onmouseenter="enter('-2429694576102374369');" onmouseout="out('-2429694576102374369');" style=""> 879         new LoadNoteTask(this).executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR, noteID);                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 880     }                                                                                                    </span>
<span  style=""> 881                                                                                                          </span>
<span class="2912110192045859171" onmouseenter="enter('2912110192045859171');" onmouseout="out('2912110192045859171');" style=""> 882     private void updateNote(Note updatedNote) {                                                          </span>
<span class="1053945494720623403" onmouseenter="enter('1053945494720623403');" onmouseout="out('1053945494720623403');" style=""> 883         // update note if network change arrived                                                         </span>
<span class="8715526790189509580" onmouseenter="enter('8715526790189509580');" onmouseout="out('8715526790189509580');" style=""> 884         mNote = updatedNote;                                                                             </span>
<span class="-1082183570760036139" onmouseenter="enter('-1082183570760036139');" onmouseout="out('-1082183570760036139');" style=""> 885         refreshContent(true);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 886     }                                                                                                    </span>
<span  style=""> 887                                                                                                          </span>
<span class="-7217331690392611444" onmouseenter="enter('-7217331690392611444');" onmouseout="out('-7217331690392611444');" style=""> 888     private void refreshContent(boolean isNoteUpdate) {                                                  </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 889         if (mNote != null) {                                                                             </span>
<span class="9083634457699551889" onmouseenter="enter('9083634457699551889');" onmouseout="out('9083634457699551889');" style=""> 890             // Restore the cursor position if possible.                                                  </span>
<span class="-3899995221280134201" onmouseenter="enter('-3899995221280134201');" onmouseout="out('-3899995221280134201');" style=""><abbr title=" 891             int cursorPosition = newCursorLocation(mNote.getContent(), getNoteContentString(), mContentEditText.getSelectionEnd());"> 891             int cursorPosition = newCursorLocation(mNote.getContent(), getNoteContentString(), mContentEd🔵</abbr></span>
<span class="4148799213240179760" onmouseenter="enter('4148799213240179760');" onmouseout="out('4148799213240179760');" style=""> 892             mContentEditText.setText(mNote.getContent());                                                </span>
<span  style=""> 893                                                                                                          </span>
<span class="2353268123342341866" onmouseenter="enter('2353268123342341866');" onmouseout="out('2353268123342341866');" style=""> 894             if (isNoteUpdate) {                                                                          </span>
<span class="-7373810293776319490" onmouseenter="enter('-7373810293776319490');" onmouseout="out('-7373810293776319490');" style=""> 895                 // Update markdown and preview flags from updated note.                                  </span>
<span class="-6548100248772474304" onmouseenter="enter('-6548100248772474304');" onmouseout="out('-6548100248772474304');" style=""> 896                 mIsMarkdownEnabled = mNote.isMarkdownEnabled();                                          </span>
<span class="8897386780031316770" onmouseenter="enter('8897386780031316770');" onmouseout="out('8897386780031316770');" style=""> 897                 mIsPreviewEnabled = mNote.isPreviewEnabled();                                            </span>
<span  style=""> 898                                                                                                          </span>
<span class="-3172285059116353636" onmouseenter="enter('-3172285059116353636');" onmouseout="out('-3172285059116353636');" style=""> 899                 // Show/Hide action/tabs based on markdown flag.                                         </span>
<span class="-2583362461360625309" onmouseenter="enter('-2583362461360625309');" onmouseout="out('-2583362461360625309');" style=""> 900                 showMarkdownActionOrTabs();                                                              </span>
<span  style=""> 901                                                                                                          </span>
<span class="8277551329937109619" onmouseenter="enter('8277551329937109619');" onmouseout="out('8277551329937109619');" style=""> 902                 // Save note so any local changes get synced.                                            </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style=""> 903                 mNote.save();                                                                            </span>
<span  style=""> 904                                                                                                          </span>
<span class="-4783156834321463304" onmouseenter="enter('-4783156834321463304');" onmouseout="out('-4783156834321463304');" style=""> 905                 // Update current note object on large screen devices in landscape orientation.          </span>
<span class="-7225941789318469668" onmouseenter="enter('-7225941789318469668');" onmouseout="out('-7225941789318469668');" style=""> 906                 if (DisplayUtils.isLargeScreenLandscape(requireContext())) {                             </span>
<span class="9072366327646001644" onmouseenter="enter('9072366327646001644');" onmouseout="out('9072366327646001644');" style=""> 907                     ((NotesActivity) requireActivity()).setCurrentNote(mNote);                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 908                 }                                                                                        </span>
<span  style=""> 909                                                                                                          </span>
<span class="-510315884444466739" onmouseenter="enter('-510315884444466739');" onmouseout="out('-510315884444466739');" style=""> 910                 // Update overflow popup menu.                                                           </span>
<span class="-8532471920650411447" onmouseenter="enter('-8532471920650411447');" onmouseout="out('-8532471920650411447');" style=""> 911                 requireActivity().invalidateOptionsMenu();                                               </span>
<span  style=""> 912                                                                                                          </span>
<span class="8073598210414419917" onmouseenter="enter('8073598210414419917');" onmouseout="out('8073598210414419917');" style=""> 913                 if (mContentEditText.hasFocus()                                                          </span>
<span class="1644140795570121810" onmouseenter="enter('1644140795570121810');" onmouseout="out('1644140795570121810');" style=""> 914                         &amp;&amp; cursorPosition != mContentEditText.getSelectionEnd()                          </span>
<span class="-7547165723183084197" onmouseenter="enter('-7547165723183084197');" onmouseout="out('-7547165723183084197');" style=""> 915                         &amp;&amp; cursorPosition &lt; mContentEditText.getText().length()) {                       </span>
<span class="2096054726124109686" onmouseenter="enter('2096054726124109686');" onmouseout="out('2096054726124109686');" style=""> 916                     mContentEditText.setSelection(cursorPosition);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 917                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 918             }                                                                                            </span>
<span  style=""> 919                                                                                                          </span>
<span class="-2853209662220592982" onmouseenter="enter('-2853209662220592982');" onmouseout="out('-2853209662220592982');" style=""> 920             afterTextChanged(mContentEditText.getText());                                                </span>
<span class="-5644737892245114659" onmouseenter="enter('-5644737892245114659');" onmouseout="out('-5644737892245114659');" style=""> 921             mContentEditText.processChecklists();                                                        </span>
<span class="3745953297761259324" onmouseenter="enter('3745953297761259324');" onmouseout="out('3745953297761259324');" style=""> 922             updateTagList();                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 923         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 924     }                                                                                                    </span>
<span  style=""> 925                                                                                                          </span>
<span class="8641648550056617419" onmouseenter="enter('8641648550056617419');" onmouseout="out('8641648550056617419');" style=""> 926     private void updateTagList() {                                                                       </span>
<span class="-2248190398996855538" onmouseenter="enter('-2248190398996855538');" onmouseout="out('-2248190398996855538');" style=""> 927         setChips(mNote.getTagString());                                                                  </span>
<span class="704222064602714746" onmouseenter="enter('704222064602714746');" onmouseout="out('704222064602714746');" style=""> 928         mTagInput.setText(&quot;&quot;);                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 929     }                                                                                                    </span>
<span  style=""> 930                                                                                                          </span>
<span class="4246690832623096875" onmouseenter="enter('4246690832623096875');" onmouseout="out('4246690832623096875');" style=""> 931     private int newCursorLocation(String newText, String oldText, int cursorLocation) {                  </span>
<span class="9215253731107462720" onmouseenter="enter('9215253731107462720');" onmouseout="out('9215253731107462720');" style=""> 932         // Ported from the iOS app :)                                                                    </span>
<span class="746416875920517525" onmouseenter="enter('746416875920517525');" onmouseout="out('746416875920517525');" style=""> 933         // Cases:                                                                                        </span>
<span class="5532692154938930485" onmouseenter="enter('5532692154938930485');" onmouseout="out('5532692154938930485');" style=""> 934         // 0. All text after cursor (and possibly more) was removed ==&gt; put cursor at end                </span>
<span class="7679522442911259243" onmouseenter="enter('7679522442911259243');" onmouseout="out('7679522442911259243');" style=""> 935         // 1. Text was added after the cursor ==&gt; no change                                              </span>
<span class="-7894032746042607578" onmouseenter="enter('-7894032746042607578');" onmouseout="out('-7894032746042607578');" style=""> 936         // 2. Text was added before the cursor ==&gt; location advances                                     </span>
<span class="-2716138352653500367" onmouseenter="enter('-2716138352653500367');" onmouseout="out('-2716138352653500367');" style=""> 937         // 3. Text was removed after the cursor ==&gt; no change                                            </span>
<span class="-5135222146548415418" onmouseenter="enter('-5135222146548415418');" onmouseout="out('-5135222146548415418');" style=""> 938         // 4. Text was removed before the cursor ==&gt; location retreats                                   </span>
<span class="-7558810491072030947" onmouseenter="enter('-7558810491072030947');" onmouseout="out('-7558810491072030947');" style=""> 939         // 5. Text was added/removed on both sides of the cursor ==&gt; not handled                         </span>
<span  style=""> 940                                                                                                          </span>
<span class="6113131008706185379" onmouseenter="enter('6113131008706185379');" onmouseout="out('6113131008706185379');" style=""> 941         cursorLocation = Math.max(cursorLocation, 0);                                                    </span>
<span  style=""> 942                                                                                                          </span>
<span class="2494517364842646163" onmouseenter="enter('2494517364842646163');" onmouseout="out('2494517364842646163');" style=""> 943         int newCursorLocation = cursorLocation;                                                          </span>
<span  style=""> 944                                                                                                          </span>
<span class="5908042661332565473" onmouseenter="enter('5908042661332565473');" onmouseout="out('5908042661332565473');" style=""> 945         int deltaLength = newText.length() - oldText.length();                                           </span>
<span  style=""> 946                                                                                                          </span>
<span class="-6285488792309831531" onmouseenter="enter('-6285488792309831531');" onmouseout="out('-6285488792309831531');" style=""> 947         // Case 0                                                                                        </span>
<span class="-3414403190560247865" onmouseenter="enter('-3414403190560247865');" onmouseout="out('-3414403190560247865');" style=""> 948         if (newText.length() &lt; cursorLocation)                                                           </span>
<span class="-8431314608568195365" onmouseenter="enter('-8431314608568195365');" onmouseout="out('-8431314608568195365');" style=""> 949             return newText.length();                                                                     </span>
<span  style=""> 950                                                                                                          </span>
<span class="-8591384106259708496" onmouseenter="enter('-8591384106259708496');" onmouseout="out('-8591384106259708496');" style=""> 951         boolean beforeCursorMatches = false;                                                             </span>
<span class="-2836779116340504068" onmouseenter="enter('-2836779116340504068');" onmouseout="out('-2836779116340504068');" style=""> 952         boolean afterCursorMatches = false;                                                              </span>
<span  style=""> 953                                                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 954         try {                                                                                            </span>
<span class="535177221055952012" onmouseenter="enter('535177221055952012');" onmouseout="out('535177221055952012');" style=""><abbr title=" 955             beforeCursorMatches = oldText.substring(0, cursorLocation).equals(newText.substring(0, cursorLocation));"> 955             beforeCursorMatches = oldText.substring(0, cursorLocation).equals(newText.substring(0, cursor🔵</abbr></span>
<span class="4519924127741002604" onmouseenter="enter('4519924127741002604');" onmouseout="out('4519924127741002604');" style=""><abbr title=" 956             afterCursorMatches = oldText.substring(cursorLocation).equals(newText.substring(cursorLocation + deltaLength));"> 956             afterCursorMatches = oldText.substring(cursorLocation).equals(newText.substring(cursorLocatio🔵</abbr></span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 957         } catch (Exception e) {                                                                          </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 958             e.printStackTrace();                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 959         }                                                                                                </span>
<span  style=""> 960                                                                                                          </span>
<span class="-8188204612528872149" onmouseenter="enter('-8188204612528872149');" onmouseout="out('-8188204612528872149');" style=""> 961         // Cases 2 and 4                                                                                 </span>
<span class="6616414540674367624" onmouseenter="enter('6616414540674367624');" onmouseout="out('6616414540674367624');" style=""> 962         if (!beforeCursorMatches &amp;&amp; afterCursorMatches)                                                  </span>
<span class="-4510977125628343614" onmouseenter="enter('-4510977125628343614');" onmouseout="out('-4510977125628343614');" style=""> 963             newCursorLocation += deltaLength;                                                            </span>
<span  style=""> 964                                                                                                          </span>
<span class="6867115481875645839" onmouseenter="enter('6867115481875645839');" onmouseout="out('6867115481875645839');" style=""> 965         // Cases 1, 3 and 5 have no change                                                               </span>
<span class="-7784410696724573059" onmouseenter="enter('-7784410696724573059');" onmouseout="out('-7784410696724573059');" style=""> 966         return newCursorLocation;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 967     }                                                                                                    </span>
<span  style=""> 968                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 969     @Override                                                                                            </span>
<span class="7167548776341584998" onmouseenter="enter('7167548776341584998');" onmouseout="out('7167548776341584998');" style=""> 970     public void onTagAdded(String tag) {                                                                 </span>
<span class="-7210480112102928295" onmouseenter="enter('-7210480112102928295');" onmouseout="out('-7210480112102928295');" style=""> 971         if (mNote == null || !isAdded()) {                                                               </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 972             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 973         }                                                                                                </span>
<span  style=""> 974                                                                                                          </span>
<span class="-5238169388612496279" onmouseenter="enter('-5238169388612496279');" onmouseout="out('-5238169388612496279');" style=""> 975         if (mNote.getTagString() != null &amp;&amp; tag.length() &gt; mNote.getTagString().length()) {              </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 976             AnalyticsTracker.track(                                                                      </span>
<span class="-1422381609780470266" onmouseenter="enter('-1422381609780470266');" onmouseout="out('-1422381609780470266');" style=""> 977                 EDITOR_TAG_ADDED,                                                                        </span>
<span class="-2430475172570880083" onmouseenter="enter('-2430475172570880083');" onmouseout="out('-2430475172570880083');" style=""> 978                 CATEGORY_NOTE,                                                                           </span>
<span class="7268236347956630095" onmouseenter="enter('7268236347956630095');" onmouseout="out('7268236347956630095');" style=""> 979                 &quot;tag_added_to_note&quot;                                                                      </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 980             );                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 981         }                                                                                                </span>
<span  style=""> 982                                                                                                          </span>
<span class="-1987136146652427775" onmouseenter="enter('-1987136146652427775');" onmouseout="out('-1987136146652427775');" style=""> 983         mNote.setTagString(mNote.getTagString() + String.valueOf(SPACE) + tag);                          </span>
<span class="-3343075472306200704" onmouseenter="enter('-3343075472306200704');" onmouseout="out('-3343075472306200704');" style=""> 984         mNote.setModificationDate(Calendar.getInstance());                                               </span>
<span class="3745953297761259324" onmouseenter="enter('3745953297761259324');" onmouseout="out('3745953297761259324');" style=""> 985         updateTagList();                                                                                 </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style=""> 986         mNote.save();                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 987     }                                                                                                    </span>
<span  style=""> 988                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 989     @Override                                                                                            </span>
<span class="-5110897291356760413" onmouseenter="enter('-5110897291356760413');" onmouseout="out('-5110897291356760413');" style=""> 990     public void beforeTextChanged(CharSequence charSequence, int i, int i2, int i3) {                    </span>
<span class="7490540504293754116" onmouseenter="enter('7490540504293754116');" onmouseout="out('7490540504293754116');" style=""> 991         // Unused                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 992     }                                                                                                    </span>
<span  style=""> 993                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 994     @Override                                                                                            </span>
<span class="-3169498224421089624" onmouseenter="enter('-3169498224421089624');" onmouseout="out('-3169498224421089624');" style=""> 995     public void afterTextChanged(Editable editable) {                                                    </span>
<span class="4641646211430236365" onmouseenter="enter('4641646211430236365');" onmouseout="out('4641646211430236365');" style=""> 996         attemptAutoList(editable);                                                                       </span>
<span class="7005237563799171506" onmouseenter="enter('7005237563799171506');" onmouseout="out('7005237563799171506');" style=""> 997         setTitleSpan(editable);                                                                          </span>
<span class="-7817145757567347170" onmouseenter="enter('-7817145757567347170');" onmouseout="out('-7817145757567347170');" style=""> 998         mContentEditText.fixLineSpacing();                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 999     }                                                                                                    </span>
<span  style="">1000                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1001     @Override                                                                                            </span>
<span class="-6004971105578563950" onmouseenter="enter('-6004971105578563950');" onmouseout="out('-6004971105578563950');" style="">1002     public void onTextChanged(CharSequence charSequence, int start, int before, int count) {             </span>
<span class="2036741165452809133" onmouseenter="enter('2036741165452809133');" onmouseout="out('2036741165452809133');" style="">1003         // When text changes, start timer that will fire after AUTOSAVE_DELAY_MILLIS passes              </span>
<span class="-2149096896161266035" onmouseenter="enter('-2149096896161266035');" onmouseout="out('-2149096896161266035');" style="">1004         if (mAutoSaveHandler != null) {                                                                  </span>
<span class="-5465787548318672754" onmouseenter="enter('-5465787548318672754');" onmouseout="out('-5465787548318672754');" style="">1005             mAutoSaveHandler.removeCallbacks(mAutoSaveRunnable);                                         </span>
<span class="3237260668993885548" onmouseenter="enter('3237260668993885548');" onmouseout="out('3237260668993885548');" style="">1006             mAutoSaveHandler.postDelayed(mAutoSaveRunnable, AUTOSAVE_DELAY_MILLIS);                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1007         }                                                                                                </span>
<span  style="">1008                                                                                                          </span>
<span class="5409551732025834677" onmouseenter="enter('5409551732025834677');" onmouseout="out('5409551732025834677');" style="">1009         // Remove search highlight spans when note content changes                                       </span>
<span class="5721815250190525804" onmouseenter="enter('5721815250190525804');" onmouseout="out('5721815250190525804');" style="">1010         if (mMatchOffsets != null) {                                                                     </span>
<span class="-5254682256162211718" onmouseenter="enter('-5254682256162211718');" onmouseout="out('-5254682256162211718');" style="">1011             mMatchOffsets = null;                                                                        </span>
<span class="2930846742809702691" onmouseenter="enter('2930846742809702691');" onmouseout="out('2930846742809702691');" style="">1012             mHighlighter.removeMatches();                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1013         }                                                                                                </span>
<span  style="">1014                                                                                                          </span>
<span class="-5025193748599864334" onmouseenter="enter('-5025193748599864334');" onmouseout="out('-5025193748599864334');" style="">1015         if (!DisplayUtils.isLargeScreenLandscape(requireContext())) {                                    </span>
<span class="7215698034791320296" onmouseenter="enter('7215698034791320296');" onmouseout="out('7215698034791320296');" style="">1016             ((NoteEditorActivity) requireActivity()).setSearchMatchBarVisible(false);                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1017         }                                                                                                </span>
<span  style="">1018                                                                                                          </span>
<span class="8786270533737299967" onmouseenter="enter('8786270533737299967');" onmouseout="out('8786270533737299967');" style="">1019         // Temporarily remove the text watcher as we process checklists to prevent callback looping      </span>
<span class="2095720317794995897" onmouseenter="enter('2095720317794995897');" onmouseout="out('2095720317794995897');" style="">1020         mContentEditText.removeTextChangedListener(this);                                                </span>
<span class="-5644737892245114659" onmouseenter="enter('-5644737892245114659');" onmouseout="out('-5644737892245114659');" style="">1021         mContentEditText.processChecklists();                                                            </span>
<span class="8154880790715077967" onmouseenter="enter('8154880790715077967');" onmouseout="out('8154880790715077967');" style="">1022         mContentEditText.addTextChangedListener(this);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1023     }                                                                                                    </span>
<span  style="">1024                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1025     /**                                                                                                  </span>
<span class="-6594088544842821458" onmouseenter="enter('-6594088544842821458');" onmouseout="out('-6594088544842821458');" style="">1026      * Set the note title to be a larger size and bold style.                                            </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1027      *                                                                                                   </span>
<span class="108828526699167208" onmouseenter="enter('108828526699167208');" onmouseout="out('108828526699167208');" style="">1028      * Remove all existing spans before applying spans or performance issues will occur.  Since both     </span>
<span class="-1228016533055730748" onmouseenter="enter('-1228016533055730748');" onmouseout="out('-1228016533055730748');" style="">1029      * {@link RelativeSizeSpan} and {@link StyleSpan} inherit from {@link MetricAffectingSpan}, all      </span>
<span class="7893653129030957545" onmouseenter="enter('7893653129030957545');" onmouseout="out('7893653129030957545');" style="">1030      * spans are removed when {@link MetricAffectingSpan} is removed.                                    </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1031      */                                                                                                  </span>
<span class="6849776144692122373" onmouseenter="enter('6849776144692122373');" onmouseout="out('6849776144692122373');" style="">1032     private void setTitleSpan(Editable editable) {                                                       </span>
<span class="-8681644249984288865" onmouseenter="enter('-8681644249984288865');" onmouseout="out('-8681644249984288865');" style=""><abbr title="1033         for (MetricAffectingSpan span : editable.getSpans(0, editable.length(), MetricAffectingSpan.class)) {">1033         for (MetricAffectingSpan span : editable.getSpans(0, editable.length(), MetricAffectingSpan.class🔵</abbr></span>
<span class="3876289346053092432" onmouseenter="enter('3876289346053092432');" onmouseout="out('3876289346053092432');" style="">1034             if (span instanceof RelativeSizeSpan || span instanceof StyleSpan) {                         </span>
<span class="-4538099325482792099" onmouseenter="enter('-4538099325482792099');" onmouseout="out('-4538099325482792099');" style="">1035                 editable.removeSpan(span);                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1036             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1037         }                                                                                                </span>
<span  style="">1038                                                                                                          </span>
<span class="-901734861574280266" onmouseenter="enter('-901734861574280266');" onmouseout="out('-901734861574280266');" style="">1039         int newLinePosition = getNoteContentString().indexOf(&quot;\n&quot;);                                      </span>
<span  style="">1040                                                                                                          </span>
<span class="-3049917029530340718" onmouseenter="enter('-3049917029530340718');" onmouseout="out('-3049917029530340718');" style="">1041         if (newLinePosition == 0) {                                                                      </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1042             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1043         }                                                                                                </span>
<span  style="">1044                                                                                                          </span>
<span class="2729500347175780141" onmouseenter="enter('2729500347175780141');" onmouseout="out('2729500347175780141');" style="">1045         int titleEndPosition = (newLinePosition &gt; 0) ? newLinePosition : editable.length();              </span>
<span class="2132700250735486844" onmouseenter="enter('2132700250735486844');" onmouseout="out('2132700250735486844');" style=""><abbr title="1046         editable.setSpan(new RelativeSizeSpan(1.3f), 0, titleEndPosition, Spanned.SPAN_INCLUSIVE_EXCLUSIVE);">1046         editable.setSpan(new RelativeSizeSpan(1.3f), 0, titleEndPosition, Spanned.SPAN_INCLUSIVE_EXCLUSIV🔵</abbr></span>
<span class="2779153330581394975" onmouseenter="enter('2779153330581394975');" onmouseout="out('2779153330581394975');" style=""><abbr title="1047         editable.setSpan(new StyleSpan(Typeface.BOLD), 0, titleEndPosition, Spanned.SPAN_INCLUSIVE_EXCLUSIVE);">1047         editable.setSpan(new StyleSpan(Typeface.BOLD), 0, titleEndPosition, Spanned.SPAN_INCLUSIVE_EXCLUS🔵</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1048     }                                                                                                    </span>
<span  style="">1049                                                                                                          </span>
<span class="8395667075038215241" onmouseenter="enter('8395667075038215241');" onmouseout="out('8395667075038215241');" style="">1050     private void attemptAutoList(Editable editable) {                                                    </span>
<span class="1630313539519665774" onmouseenter="enter('1630313539519665774');" onmouseout="out('1630313539519665774');" style="">1051         int oldCursorPosition = mCurrentCursorPosition;                                                  </span>
<span class="2154628209294087333" onmouseenter="enter('2154628209294087333');" onmouseout="out('2154628209294087333');" style="">1052         mCurrentCursorPosition = mContentEditText.getSelectionStart();                                   </span>
<span class="-1456162723219098064" onmouseenter="enter('-1456162723219098064');" onmouseout="out('-1456162723219098064');" style="">1053         AutoBullet.apply(editable, oldCursorPosition, mCurrentCursorPosition);                           </span>
<span class="2154628209294087333" onmouseenter="enter('2154628209294087333');" onmouseout="out('2154628209294087333');" style="">1054         mCurrentCursorPosition = mContentEditText.getSelectionStart();                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1055     }                                                                                                    </span>
<span  style="">1056                                                                                                          </span>
<span class="-6933317077070028336" onmouseenter="enter('-6933317077070028336');" onmouseout="out('-6933317077070028336');" style="">1057     private void saveAndSyncNote() {                                                                     </span>
<span class="-6566957513776356959" onmouseenter="enter('-6566957513776356959');" onmouseout="out('-6566957513776356959');" style="">1058         if (mNote == null) {                                                                             </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1059             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1060         }                                                                                                </span>
<span  style="">1061                                                                                                          </span>
<span class="1712554612672119113" onmouseenter="enter('1712554612672119113');" onmouseout="out('1712554612672119113');" style="">1062         AppLog.add(                                                                                      </span>
<span class="5578246801297368785" onmouseenter="enter('5578246801297368785');" onmouseout="out('5578246801297368785');" style="">1063             Type.ACTION,                                                                                 </span>
<span class="5428018773251277804" onmouseenter="enter('5428018773251277804');" onmouseout="out('5428018773251277804');" style="">1064             &quot;Edited note (ID: &quot; + mNote.getSimperiumKey() +                                              </span>
<span class="7932348859464220053" onmouseenter="enter('7932348859464220053');" onmouseout="out('7932348859464220053');" style="">1065                 &quot; / Title: &quot; + mNote.getTitle() +                                                        </span>
<span class="8952698626932118067" onmouseenter="enter('8952698626932118067');" onmouseout="out('8952698626932118067');" style="">1066                 &quot; / Characters: &quot; + NoteUtils.getCharactersCount(mNote.getContent()) +                   </span>
<span class="638163407399296951" onmouseenter="enter('638163407399296951');" onmouseout="out('638163407399296951');" style="">1067                 &quot; / Words: &quot; + NoteUtils.getWordCount(mNote.getContent()) + &quot;)&quot;                          </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">1068         );                                                                                               </span>
<span class="16839101082915315" onmouseenter="enter('16839101082915315');" onmouseout="out('16839101082915315');" style="">1069         new SaveNoteTask(this).executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR);                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1070     }                                                                                                    </span>
<span  style="">1071                                                                                                          </span>
<span class="-710883025591886987" onmouseenter="enter('-710883025591886987');" onmouseout="out('-710883025591886987');" style="">1072     public boolean isPlaceholderVisible() {                                                              </span>
<span class="-4989874178895443572" onmouseenter="enter('-4989874178895443572');" onmouseout="out('-4989874178895443572');" style="">1073         if (mPlaceholderView != null) {                                                                  </span>
<span class="9146837192541101428" onmouseenter="enter('9146837192541101428');" onmouseout="out('9146837192541101428');" style="">1074             return mPlaceholderView.getVisibility() == View.VISIBLE;                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1075         } else {                                                                                         </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1076             return false;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1077         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1078     }                                                                                                    </span>
<span  style="">1079                                                                                                          </span>
<span class="-4564004023547017377" onmouseenter="enter('-4564004023547017377');" onmouseout="out('-4564004023547017377');" style="">1080     public void setPlaceholderVisible(boolean isVisible) {                                               </span>
<span class="-6467031518050872536" onmouseenter="enter('-6467031518050872536');" onmouseout="out('-6467031518050872536');" style="">1081         if (isVisible) {                                                                                 </span>
<span class="1687907534970456445" onmouseenter="enter('1687907534970456445');" onmouseout="out('1687907534970456445');" style="">1082             mNote = null;                                                                                </span>
<span class="-3407359796970873837" onmouseenter="enter('-3407359796970873837');" onmouseout="out('-3407359796970873837');" style="">1083             mContentEditText.setText(&quot;&quot;);                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1084         }                                                                                                </span>
<span  style="">1085                                                                                                          </span>
<span class="-4989874178895443572" onmouseenter="enter('-4989874178895443572');" onmouseout="out('-4989874178895443572');" style="">1086         if (mPlaceholderView != null) {                                                                  </span>
<span class="-1939399638656140532" onmouseenter="enter('-1939399638656140532');" onmouseout="out('-1939399638656140532');" style="">1087             mPlaceholderView.setVisibility(isVisible ? View.VISIBLE : View.GONE);                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1088         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1089     }                                                                                                    </span>
<span  style="">1090                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1091     @Override                                                                                            </span>
<span class="-3315120631467309087" onmouseenter="enter('-3315120631467309087');" onmouseout="out('-3315120631467309087');" style="">1092     public void onFocusChange(View v, boolean hasFocus) {                                                </span>
<span class="-6285712256166584728" onmouseenter="enter('-6285712256166584728');" onmouseout="out('-6285712256166584728');" style="">1093         if (!hasFocus) {                                                                                 </span>
<span class="6004881889903239201" onmouseenter="enter('6004881889903239201');" onmouseout="out('6004881889903239201');" style="">1094             String tags = getNoteTagsString().trim();                                                    </span>
<span  style="">1095                                                                                                          </span>
<span class="-8405816820067798370" onmouseenter="enter('-8405816820067798370');" onmouseout="out('-8405816820067798370');" style="">1096             if (mTagInput.getText().toString().trim().length() &gt; 0                                       </span>
<span class="-3023921947470011218" onmouseenter="enter('-3023921947470011218');" onmouseout="out('-3023921947470011218');" style="">1097                 &amp;&amp; TagUtils.hashTagValid(mTagInput.getText().toString().trim())) {                       </span>
<span class="-8826289385438230332" onmouseenter="enter('-8826289385438230332');" onmouseout="out('-8826289385438230332');" style="">1098                 onTagAdded(mTagInput.getText().toString());                                              </span>
<span class="-2106738445799932691" onmouseenter="enter('-2106738445799932691');" onmouseout="out('-2106738445799932691');" style="">1099             } else if (tags.length() &gt; 0) {                                                              </span>
<span class="822236618440501069" onmouseenter="enter('822236618440501069');" onmouseout="out('822236618440501069');" style="">1100                 setChips(tags);                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1101             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1102         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1103     }                                                                                                    </span>
<span  style="">1104                                                                                                          </span>
<span class="4758115017921537055" onmouseenter="enter('4758115017921537055');" onmouseout="out('4758115017921537055');" style="">1105     private Note getNote() {                                                                             </span>
<span class="6687317620803594982" onmouseenter="enter('6687317620803594982');" onmouseout="out('6687317620803594982');" style="">1106         return mNote;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1107     }                                                                                                    </span>
<span  style="">1108                                                                                                          </span>
<span class="627621646474661739" onmouseenter="enter('627621646474661739');" onmouseout="out('627621646474661739');" style="">1109     public void setNote(String noteID) {                                                                 </span>
<span class="-6972394152055286124" onmouseenter="enter('-6972394152055286124');" onmouseout="out('-6972394152055286124');" style="">1110         setNote(noteID, null);                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1111     }                                                                                                    </span>
<span  style="">1112                                                                                                          </span>
<span class="-260751237439499239" onmouseenter="enter('-260751237439499239');" onmouseout="out('-260751237439499239');" style="">1113     private String getNoteContentString() {                                                              </span>
<span class="-8451380960236704581" onmouseenter="enter('-8451380960236704581');" onmouseout="out('-8451380960236704581');" style="">1114         if (mContentEditText == null || mContentEditText.getText() == null) {                            </span>
<span class="-8289946804601166879" onmouseenter="enter('-8289946804601166879');" onmouseout="out('-8289946804601166879');" style="">1115             return &quot;&quot;;                                                                                   </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1116         } else {                                                                                         </span>
<span class="9069870454824528783" onmouseenter="enter('9069870454824528783');" onmouseout="out('9069870454824528783');" style="">1117             return mContentEditText.getText().toString();                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1118         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1119     }                                                                                                    </span>
<span  style="">1120                                                                                                          </span>
<span class="1791713131652036535" onmouseenter="enter('1791713131652036535');" onmouseout="out('1791713131652036535');" style="">1121     private String getNoteTagsString() {                                                                 </span>
<span class="-6446890674263139592" onmouseenter="enter('-6446890674263139592');" onmouseout="out('-6446890674263139592');" style="">1122         StringBuilder tags = new StringBuilder();                                                        </span>
<span  style="">1123                                                                                                          </span>
<span class="-4475001311202686832" onmouseenter="enter('-4475001311202686832');" onmouseout="out('-4475001311202686832');" style="">1124         for (int i= 0; i &lt; mTagChips.getChildCount(); i++) {                                             </span>
<span class="5232521310381718252" onmouseenter="enter('5232521310381718252');" onmouseout="out('5232521310381718252');" style="">1125             tags.append(((Chip) mTagChips.getChildAt(i)).getText()).append(&quot; &quot;);                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1126         }                                                                                                </span>
<span  style="">1127                                                                                                          </span>
<span class="-8755942361109275249" onmouseenter="enter('-8755942361109275249');" onmouseout="out('-8755942361109275249');" style="">1128         return tags.toString();                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1129     }                                                                                                    </span>
<span  style="">1130                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1131     /**                                                                                                  </span>
<span class="-7590765322671442969" onmouseenter="enter('-7590765322671442969');" onmouseout="out('-7590765322671442969');" style="">1132      * Share bottom sheet callbacks                                                                      </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1133      */                                                                                                  </span>
<span  style="">1134                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1135     @Override                                                                                            </span>
<span class="2968602784493438427" onmouseenter="enter('2968602784493438427');" onmouseout="out('2968602784493438427');" style="">1136     public void onSharePublishClicked() {                                                                </span>
<span class="7985358866333072123" onmouseenter="enter('7985358866333072123');" onmouseout="out('7985358866333072123');" style="">1137         publishNote();                                                                                   </span>
<span class="4172821335322908069" onmouseenter="enter('4172821335322908069');" onmouseout="out('4172821335322908069');" style="">1138         if (mShareBottomSheet != null) {                                                                 </span>
<span class="-4836834074376612243" onmouseenter="enter('-4836834074376612243');" onmouseout="out('-4836834074376612243');" style="">1139             mShareBottomSheet.dismiss();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1140         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1141     }                                                                                                    </span>
<span  style="">1142                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1143     @Override                                                                                            </span>
<span class="2232780665187036053" onmouseenter="enter('2232780665187036053');" onmouseout="out('2232780665187036053');" style="">1144     public void onShareUnpublishClicked() {                                                              </span>
<span class="4812123925634099655" onmouseenter="enter('4812123925634099655');" onmouseout="out('4812123925634099655');" style="">1145         unpublishNote();                                                                                 </span>
<span class="4172821335322908069" onmouseenter="enter('4172821335322908069');" onmouseout="out('4172821335322908069');" style="">1146         if (mShareBottomSheet != null) {                                                                 </span>
<span class="-4836834074376612243" onmouseenter="enter('-4836834074376612243');" onmouseout="out('-4836834074376612243');" style="">1147             mShareBottomSheet.dismiss();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1148         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1149     }                                                                                                    </span>
<span  style="">1150                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1151     @Override                                                                                            </span>
<span class="1895662807531612039" onmouseenter="enter('1895662807531612039');" onmouseout="out('1895662807531612039');" style="">1152     public void onWordPressPostClicked() {                                                               </span>
<span class="4172821335322908069" onmouseenter="enter('4172821335322908069');" onmouseout="out('4172821335322908069');" style="">1153         if (mShareBottomSheet != null) {                                                                 </span>
<span class="-4836834074376612243" onmouseenter="enter('-4836834074376612243');" onmouseout="out('-4836834074376612243');" style="">1154             mShareBottomSheet.dismiss();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1155         }                                                                                                </span>
<span  style="">1156                                                                                                          </span>
<span class="3314881699989820063" onmouseenter="enter('3314881699989820063');" onmouseout="out('3314881699989820063');" style="">1157         if (getFragmentManager() == null) {                                                              </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1158             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1159         }                                                                                                </span>
<span  style="">1160                                                                                                          </span>
<span class="5636539351844670959" onmouseenter="enter('5636539351844670959');" onmouseout="out('5636539351844670959');" style="">1161         FragmentTransaction ft = getFragmentManager().beginTransaction();                                </span>
<span class="-500976049723048206" onmouseenter="enter('-500976049723048206');" onmouseout="out('-500976049723048206');" style="">1162         Fragment prev = getFragmentManager().findFragmentByTag(WordPressDialogFragment.DIALOG_TAG);      </span>
<span class="6915708381430486628" onmouseenter="enter('6915708381430486628');" onmouseout="out('6915708381430486628');" style="">1163         if (prev != null) {                                                                              </span>
<span class="6191551415319260668" onmouseenter="enter('6191551415319260668');" onmouseout="out('6191551415319260668');" style="">1164             ft.remove(prev);                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1165         }                                                                                                </span>
<span class="4313436897323820694" onmouseenter="enter('4313436897323820694');" onmouseout="out('4313436897323820694');" style="">1166         ft.addToBackStack(null);                                                                         </span>
<span  style="">1167                                                                                                          </span>
<span class="-5506082590725208104" onmouseenter="enter('-5506082590725208104');" onmouseout="out('-5506082590725208104');" style="">1168         // Create and show the dialog.                                                                   </span>
<span class="1756820858117205319" onmouseenter="enter('1756820858117205319');" onmouseout="out('1756820858117205319');" style="">1169         WordPressDialogFragment wpDialogFragment = new WordPressDialogFragment();                        </span>
<span class="8550268343842317092" onmouseenter="enter('8550268343842317092');" onmouseout="out('8550268343842317092');" style="">1170         wpDialogFragment.setNote(mNote);                                                                 </span>
<span class="-7041960731203586914" onmouseenter="enter('-7041960731203586914');" onmouseout="out('-7041960731203586914');" style="">1171         wpDialogFragment.show(ft, WordPressDialogFragment.DIALOG_TAG);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1172     }                                                                                                    </span>
<span  style="">1173                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1174     @Override                                                                                            </span>
<span class="8390280653962331927" onmouseenter="enter('8390280653962331927');" onmouseout="out('8390280653962331927');" style="">1175     public void onShareCollaborateClicked() {                                                            </span>
<span class="8508848920358466816" onmouseenter="enter('8508848920358466816');" onmouseout="out('8508848920358466816');" style="">1176         Toast.makeText(getActivity(), R.string.collaborate_message, Toast.LENGTH_LONG).show();           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1177     }                                                                                                    </span>
<span  style="">1178                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1179     @Override                                                                                            </span>
<span class="-3569494199320067069" onmouseenter="enter('-3569494199320067069');" onmouseout="out('-3569494199320067069');" style="">1180     public void onShareDismissed() {                                                                     </span>
<span  style="">1181                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1182     }                                                                                                    </span>
<span  style="">1183                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1184     /**                                                                                                  </span>
<span class="358915473298384679" onmouseenter="enter('358915473298384679');" onmouseout="out('358915473298384679');" style="">1185      * History bottom sheet listeners                                                                    </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1186      */                                                                                                  </span>
<span  style="">1187                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1188     @Override                                                                                            </span>
<span class="486589109199450506" onmouseenter="enter('486589109199450506');" onmouseout="out('486589109199450506');" style="">1189     public void onHistoryCancelClicked() {                                                               </span>
<span class="4148799213240179760" onmouseenter="enter('4148799213240179760');" onmouseout="out('4148799213240179760');" style="">1190         mContentEditText.setText(mNote.getContent());                                                    </span>
<span class="-7542139914053196629" onmouseenter="enter('-7542139914053196629');" onmouseout="out('-7542139914053196629');" style="">1191         if (mHistoryBottomSheet != null) {                                                               </span>
<span class="-2599981510781765889" onmouseenter="enter('-2599981510781765889');" onmouseout="out('-2599981510781765889');" style="">1192             mHistoryBottomSheet.dismiss();                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1193         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1194     }                                                                                                    </span>
<span  style="">1195                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1196     @Override                                                                                            </span>
<span class="1746452780349475726" onmouseenter="enter('1746452780349475726');" onmouseout="out('1746452780349475726');" style="">1197     public void onHistoryRestoreClicked() {                                                              </span>
<span class="-7542139914053196629" onmouseenter="enter('-7542139914053196629');" onmouseout="out('-7542139914053196629');" style="">1198         if (mHistoryBottomSheet != null) {                                                               </span>
<span class="-2599981510781765889" onmouseenter="enter('-2599981510781765889');" onmouseout="out('-2599981510781765889');" style="">1199             mHistoryBottomSheet.dismiss();                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1200         }                                                                                                </span>
<span class="-2186856349666885424" onmouseenter="enter('-2186856349666885424');" onmouseout="out('-2186856349666885424');" style="">1201         saveAndSyncNote();                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1202     }                                                                                                    </span>
<span  style="">1203                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1204     @Override                                                                                            </span>
<span class="-1766878417892030172" onmouseenter="enter('-1766878417892030172');" onmouseout="out('-1766878417892030172');" style="">1205     public void onHistoryDismissed() {                                                                   </span>
<span class="7350001942179054285" onmouseenter="enter('7350001942179054285');" onmouseout="out('7350001942179054285');" style="">1206         if (!mHistoryBottomSheet.didTapOnButton()) {                                                     </span>
<span class="4148799213240179760" onmouseenter="enter('4148799213240179760');" onmouseout="out('4148799213240179760');" style="">1207             mContentEditText.setText(mNote.getContent());                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1208         }                                                                                                </span>
<span  style="">1209                                                                                                          </span>
<span class="16247739636052398" onmouseenter="enter('16247739636052398');" onmouseout="out('16247739636052398');" style="">1210         if (mHistoryTimeoutHandler != null) {                                                            </span>
<span class="7316258928910882956" onmouseenter="enter('7316258928910882956');" onmouseout="out('7316258928910882956');" style="">1211             mHistoryTimeoutHandler.removeCallbacks(mHistoryTimeoutRunnable);                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1212         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1213     }                                                                                                    </span>
<span  style="">1214                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1215     @Override                                                                                            </span>
<span class="6142431680500084708" onmouseenter="enter('6142431680500084708');" onmouseout="out('6142431680500084708');" style="">1216     public void onHistoryUpdateNote(String content) {                                                    </span>
<span class="5474545381550473491" onmouseenter="enter('5474545381550473491');" onmouseout="out('5474545381550473491');" style="">1217         mContentEditText.setText(content);                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1218     }                                                                                                    </span>
<span  style="">1219                                                                                                          </span>
<span class="-2294831155573525866" onmouseenter="enter('-2294831155573525866');" onmouseout="out('-2294831155573525866');" style="">1220     private void saveNote() {                                                                            </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1221         try {                                                                                            </span>
<span class="1165974910453313736" onmouseenter="enter('1165974910453313736');" onmouseout="out('1165974910453313736');" style="">1222             if (mNote == null || mNotesBucket == null || mContentEditText == null || mIsLoadingNote ||   </span>
<span class="-8027031690448598107" onmouseenter="enter('-8027031690448598107');" onmouseout="out('-8027031690448598107');" style=""><abbr title="1223                 (mHistoryBottomSheet != null &amp;&amp; mHistoryBottomSheet.getDialog() != null &amp;&amp; mHistoryBottomSheet.getDialog().isShowing())) {">1223                 (mHistoryBottomSheet != null &amp;&amp; mHistoryBottomSheet.getDialog() != null &amp;&amp; mHistoryBottom🔵</abbr></span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1224                 return;                                                                                  </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1225             } else {                                                                                     </span>
<span class="-1125588719504868669" onmouseenter="enter('-1125588719504868669');" onmouseout="out('-1125588719504868669');" style="">1226                 mNote = mNotesBucket.get(mNote.getSimperiumKey());                                       </span>
<span class="8897386780031316770" onmouseenter="enter('8897386780031316770');" onmouseout="out('8897386780031316770');" style="">1227                 mIsPreviewEnabled = mNote.isPreviewEnabled();                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1228             }                                                                                            </span>
<span  style="">1229                                                                                                          </span>
<span class="6475969200315240778" onmouseenter="enter('6475969200315240778');" onmouseout="out('6475969200315240778');" style="">1230             String content = mContentEditText.getPlainTextContent();                                     </span>
<span class="-8502490389039341280" onmouseenter="enter('-8502490389039341280');" onmouseout="out('-8502490389039341280');" style="">1231             String tagString = getNoteTagsString();                                                      </span>
<span  style="">1232                                                                                                          </span>
<span class="3350877423550460602" onmouseenter="enter('3350877423550460602');" onmouseout="out('3350877423550460602');" style=""><abbr title="1233             if (mNote.hasChanges(content, tagString.trim(), mNote.isPinned(), mIsMarkdownEnabled, mIsPreviewEnabled)) {">1233             if (mNote.hasChanges(content, tagString.trim(), mNote.isPinned(), mIsMarkdownEnabled, mIsPrev🔵</abbr></span>
<span class="843504871988910810" onmouseenter="enter('843504871988910810');" onmouseout="out('843504871988910810');" style="">1234                 mNote.setContent(content);                                                               </span>
<span class="1553130968631643861" onmouseenter="enter('1553130968631643861');" onmouseout="out('1553130968631643861');" style="">1235                 mNote.setTagString(tagString);                                                           </span>
<span class="-3343075472306200704" onmouseenter="enter('-3343075472306200704');" onmouseout="out('-3343075472306200704');" style="">1236                 mNote.setModificationDate(Calendar.getInstance());                                       </span>
<span class="-2172998267651300967" onmouseenter="enter('-2172998267651300967');" onmouseout="out('-2172998267651300967');" style="">1237                 mNote.setMarkdownEnabled(mIsMarkdownEnabled);                                            </span>
<span class="822592535093481459" onmouseenter="enter('822592535093481459');" onmouseout="out('822592535093481459');" style="">1238                 mNote.setPreviewEnabled(mIsPreviewEnabled);                                              </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style="">1239                 mNote.save();                                                                            </span>
<span  style="">1240                                                                                                          </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style="">1241                 AnalyticsTracker.track(                                                                  </span>
<span class="5989088647015258106" onmouseenter="enter('5989088647015258106');" onmouseout="out('5989088647015258106');" style="">1242                     EDITOR_NOTE_EDITED,                                                                  </span>
<span class="-2430475172570880083" onmouseenter="enter('-2430475172570880083');" onmouseout="out('-2430475172570880083');" style="">1243                     CATEGORY_NOTE,                                                                       </span>
<span class="7262276752106887505" onmouseenter="enter('7262276752106887505');" onmouseout="out('7262276752106887505');" style="">1244                     &quot;editor_save&quot;                                                                        </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">1245                 );                                                                                       </span>
<span  style="">1246                                                                                                          </span>
<span class="1712554612672119113" onmouseenter="enter('1712554612672119113');" onmouseout="out('1712554612672119113');" style="">1247                 AppLog.add(                                                                              </span>
<span class="5387827170384214934" onmouseenter="enter('5387827170384214934');" onmouseout="out('5387827170384214934');" style="">1248                     Type.SYNC,                                                                           </span>
<span class="6067618927567422040" onmouseenter="enter('6067618927567422040');" onmouseout="out('6067618927567422040');" style="">1249                     &quot;Saved note locally in NoteEditorFragment (ID: &quot; + mNote.getSimperiumKey() +         </span>
<span class="7932348859464220053" onmouseenter="enter('7932348859464220053');" onmouseout="out('7932348859464220053');" style="">1250                         &quot; / Title: &quot; + mNote.getTitle() +                                                </span>
<span class="431319751787505650" onmouseenter="enter('431319751787505650');" onmouseout="out('431319751787505650');" style="">1251                         &quot; / Characters: &quot; + NoteUtils.getCharactersCount(content) +                      </span>
<span class="-6931859245270948040" onmouseenter="enter('-6931859245270948040');" onmouseout="out('-6931859245270948040');" style="">1252                         &quot; / Words: &quot; + NoteUtils.getWordCount(content) + &quot;)&quot;                             </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">1253                 );                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1254             }                                                                                            </span>
<span class="-3643940737031631548" onmouseenter="enter('-3643940737031631548');" onmouseout="out('-3643940737031631548');" style="">1255         } catch (BucketObjectMissingException exception) {                                               </span>
<span class="-5036816163125879973" onmouseenter="enter('-5036816163125879973');" onmouseout="out('-5036816163125879973');" style="">1256             exception.printStackTrace();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1257         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1258     }                                                                                                    </span>
<span  style="">1259                                                                                                          </span>
<span class="-6769383367293074987" onmouseenter="enter('-6769383367293074987');" onmouseout="out('-6769383367293074987');" style="">1260     // Checks if cursor is at a URL when the selection changes                                           </span>
<span class="499820509706145242" onmouseenter="enter('499820509706145242');" onmouseout="out('499820509706145242');" style="">1261     // If it is a URL, show the contextual action bar                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1262     @Override                                                                                            </span>
<span class="-6619706727651867065" onmouseenter="enter('-6619706727651867065');" onmouseout="out('-6619706727651867065');" style="">1263     public void onSelectionChanged(int selStart, int selEnd) {                                           </span>
<span class="7239443724625299771" onmouseenter="enter('7239443724625299771');" onmouseout="out('7239443724625299771');" style="">1264         mCurrentCursorPosition = selEnd;                                                                 </span>
<span  style="">1265                                                                                                          </span>
<span class="-5773931921061181239" onmouseenter="enter('-5773931921061181239');" onmouseout="out('-5773931921061181239');" style="">1266         if (selStart == selEnd) {                                                                        </span>
<span class="-1073801886026856185" onmouseenter="enter('-1073801886026856185');" onmouseout="out('-1073801886026856185');" style="">1267             Editable noteContent = mContentEditText.getText();                                           </span>
<span  style="">1268                                                                                                          </span>
<span class="-3728163105261704014" onmouseenter="enter('-3728163105261704014');" onmouseout="out('-3728163105261704014');" style="">1269             if (noteContent == null) {                                                                   </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1270                 return;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1271             }                                                                                            </span>
<span  style="">1272                                                                                                          </span>
<span class="1258634593958745929" onmouseenter="enter('1258634593958745929');" onmouseout="out('1258634593958745929');" style="">1273             URLSpan[] urlSpans = noteContent.getSpans(selStart, selStart, URLSpan.class);                </span>
<span  style="">1274                                                                                                          </span>
<span class="8265917182779455796" onmouseenter="enter('8265917182779455796');" onmouseout="out('8265917182779455796');" style="">1275             if (urlSpans.length &gt; 0) {                                                                   </span>
<span class="379938049561077801" onmouseenter="enter('379938049561077801');" onmouseout="out('379938049561077801');" style="">1276                 URLSpan urlSpan = urlSpans[0];                                                           </span>
<span class="7382553573082356877" onmouseenter="enter('7382553573082356877');" onmouseout="out('7382553573082356877');" style="">1277                 mLinkUrl = urlSpan.getURL();                                                             </span>
<span class="-2685141031372274993" onmouseenter="enter('-2685141031372274993');" onmouseout="out('-2685141031372274993');" style=""><abbr title="1278                 mLinkText = noteContent.subSequence(noteContent.getSpanStart(urlSpan), noteContent.getSpanEnd(urlSpan)).toString();">1278                 mLinkText = noteContent.subSequence(noteContent.getSpanStart(urlSpan), noteContent.getSpa🔵</abbr></span>
<span  style="">1279                                                                                                          </span>
<span class="-1291529600191394909" onmouseenter="enter('-1291529600191394909');" onmouseout="out('-1291529600191394909');" style="">1280                 if (mActionMode != null) {                                                               </span>
<span class="8256553390773794578" onmouseenter="enter('8256553390773794578');" onmouseout="out('8256553390773794578');" style="">1281                     mActionMode.setSubtitle(mLinkText);                                                  </span>
<span class="-5782179795728005521" onmouseenter="enter('-5782179795728005521');" onmouseout="out('-5782179795728005521');" style="">1282                     updateMenuItems();                                                                   </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1283                     return;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1284                 }                                                                                        </span>
<span  style="">1285                                                                                                          </span>
<span class="-4243988111679111503" onmouseenter="enter('-4243988111679111503');" onmouseout="out('-4243988111679111503');" style="">1286                 // Show the Contextual Action Bar                                                        </span>
<span class="4809573797151136036" onmouseenter="enter('4809573797151136036');" onmouseout="out('4809573797151136036');" style="">1287                 if (getActivity() != null) {                                                             </span>
<span class="-21436323499410640" onmouseenter="enter('-21436323499410640');" onmouseout="out('-21436323499410640');" style=""><abbr title="1288                     mActionMode = ((AppCompatActivity) getActivity()).startSupportActionMode(mActionModeCallback);">1288                     mActionMode = ((AppCompatActivity) getActivity()).startSupportActionMode(mActionModeC🔵</abbr></span>
<span  style="">1289                                                                                                          </span>
<span class="-1291529600191394909" onmouseenter="enter('-1291529600191394909');" onmouseout="out('-1291529600191394909');" style="">1290                     if (mActionMode != null) {                                                           </span>
<span class="8256553390773794578" onmouseenter="enter('8256553390773794578');" onmouseout="out('8256553390773794578');" style="">1291                         mActionMode.setSubtitle(mLinkText);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1292                     }                                                                                    </span>
<span  style="">1293                                                                                                          </span>
<span class="-5782179795728005521" onmouseenter="enter('-5782179795728005521');" onmouseout="out('-5782179795728005521');" style="">1294                     updateMenuItems();                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1295                 }                                                                                        </span>
<span class="7515827566305000834" onmouseenter="enter('7515827566305000834');" onmouseout="out('7515827566305000834');" style="">1296             } else if (mActionMode != null) {                                                            </span>
<span class="7165201847947665807" onmouseenter="enter('7165201847947665807');" onmouseout="out('7165201847947665807');" style="">1297                 mActionMode.finish();                                                                    </span>
<span class="291405596407736607" onmouseenter="enter('291405596407736607');" onmouseout="out('291405596407736607');" style="">1298                 mActionMode = null;                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1299             }                                                                                            </span>
<span class="7515827566305000834" onmouseenter="enter('7515827566305000834');" onmouseout="out('7515827566305000834');" style="">1300         } else if (mActionMode != null) {                                                                </span>
<span class="7165201847947665807" onmouseenter="enter('7165201847947665807');" onmouseout="out('7165201847947665807');" style="">1301             mActionMode.finish();                                                                        </span>
<span class="291405596407736607" onmouseenter="enter('291405596407736607');" onmouseout="out('291405596407736607');" style="">1302             mActionMode = null;                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1303         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1304     }                                                                                                    </span>
<span  style="">1305                                                                                                          </span>
<span class="2270277682351720198" onmouseenter="enter('2270277682351720198');" onmouseout="out('2270277682351720198');" style="">1306     private void updateMenuItems() {                                                                     </span>
<span class="-515446486584282912" onmouseenter="enter('-515446486584282912');" onmouseout="out('-515446486584282912');" style="">1307         mCopyMenuItem.setIcon(mCopyIcon);                                                                </span>
<span class="773177223161240604" onmouseenter="enter('773177223161240604');" onmouseout="out('773177223161240604');" style="">1308         mShareMenuItem.setIcon(mShareIcon);                                                              </span>
<span  style="">1309                                                                                                          </span>
<span class="-4542884014549729251" onmouseenter="enter('-4542884014549729251');" onmouseout="out('-4542884014549729251');" style="">1310         if (mViewLinkMenuItem != null &amp;&amp; mLinkUrl != null) {                                             </span>
<span class="7070835845876331574" onmouseenter="enter('7070835845876331574');" onmouseout="out('7070835845876331574');" style="">1311             if (mLinkUrl.startsWith(&quot;tel:&quot;)) {                                                           </span>
<span class="-3393709522714367611" onmouseenter="enter('-3393709522714367611');" onmouseout="out('-3393709522714367611');" style="">1312                 mViewLinkMenuItem.setIcon(mCallIcon);                                                    </span>
<span class="-1045706461125369539" onmouseenter="enter('-1045706461125369539');" onmouseout="out('-1045706461125369539');" style="">1313                 mViewLinkMenuItem.setTitle(getString(R.string.call));                                    </span>
<span class="-4087102511435152339" onmouseenter="enter('-4087102511435152339');" onmouseout="out('-4087102511435152339');" style="">1314             } else if (mLinkUrl.startsWith(&quot;mailto:&quot;)) {                                                 </span>
<span class="3689189789047011289" onmouseenter="enter('3689189789047011289');" onmouseout="out('3689189789047011289');" style="">1315                 mViewLinkMenuItem.setIcon(mEmailIcon);                                                   </span>
<span class="7417350135164215691" onmouseenter="enter('7417350135164215691');" onmouseout="out('7417350135164215691');" style="">1316                 mViewLinkMenuItem.setTitle(getString(R.string.email));                                   </span>
<span class="-1372170246346381865" onmouseenter="enter('-1372170246346381865');" onmouseout="out('-1372170246346381865');" style="">1317             } else if (mLinkUrl.startsWith(&quot;geo:&quot;)) {                                                    </span>
<span class="-4826865256995968603" onmouseenter="enter('-4826865256995968603');" onmouseout="out('-4826865256995968603');" style="">1318                 mViewLinkMenuItem.setIcon(mMapIcon);                                                     </span>
<span class="5018205442899714685" onmouseenter="enter('5018205442899714685');" onmouseout="out('5018205442899714685');" style="">1319                 mViewLinkMenuItem.setTitle(getString(R.string.view_map));                                </span>
<span class="217084746454652922" onmouseenter="enter('217084746454652922');" onmouseout="out('217084746454652922');" style="">1320             } else if (mLinkUrl.startsWith(SIMPLENOTE_LINK_PREFIX)) {                                    </span>
<span class="238390611676684376" onmouseenter="enter('238390611676684376');" onmouseout="out('238390611676684376');" style="">1321                 mViewLinkMenuItem.setIcon(mLinkIcon);                                                    </span>
<span class="-8064422576667643895" onmouseenter="enter('-8064422576667643895');" onmouseout="out('-8064422576667643895');" style="">1322                 mViewLinkMenuItem.setTitle(getString(R.string.open_note));                               </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1323             } else {                                                                                     </span>
<span class="7513617525800990773" onmouseenter="enter('7513617525800990773');" onmouseout="out('7513617525800990773');" style="">1324                 mViewLinkMenuItem.setIcon(mBrowserIcon);                                                 </span>
<span class="4171282647008223100" onmouseenter="enter('4171282647008223100');" onmouseout="out('4171282647008223100');" style="">1325                 mViewLinkMenuItem.setTitle(getString(R.string.view_in_browser));                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1326             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1327         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1328     }                                                                                                    </span>
<span  style="">1329                                                                                                          </span>
<span class="91579398727100136" onmouseenter="enter('91579398727100136');" onmouseout="out('91579398727100136');" style="">1330     private void setPublishedNote(boolean isPublished) {                                                 </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style="">1331         if (mNote != null) {                                                                             </span>
<span class="316653489117166649" onmouseenter="enter('316653489117166649');" onmouseout="out('316653489117166649');" style="">1332             mNote.setPublished(isPublished);                                                             </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style="">1333             mNote.save();                                                                                </span>
<span  style="">1334                                                                                                          </span>
<span class="3198515589608942377" onmouseenter="enter('3198515589608942377');" onmouseout="out('3198515589608942377');" style="">1335             // reset publish status in 20 seconds if we don&#x27;t hear back from Simperium                   </span>
<span class="-8751687465189974985" onmouseenter="enter('-8751687465189974985');" onmouseout="out('-8751687465189974985');" style="">1336             mPublishTimeoutHandler.postDelayed(mPublishTimeoutRunnable, PUBLISH_TIMEOUT);                </span>
<span  style="">1337                                                                                                          </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style="">1338             AnalyticsTracker.track(                                                                      </span>
<span class="1199660928845890452" onmouseenter="enter('1199660928845890452');" onmouseout="out('1199660928845890452');" style="">1339                 isPublished ? EDITOR_NOTE_PUBLISHED : EDITOR_NOTE_UNPUBLISHED,                           </span>
<span class="-2430475172570880083" onmouseenter="enter('-2430475172570880083');" onmouseout="out('-2430475172570880083');" style="">1340                 CATEGORY_NOTE,                                                                           </span>
<span class="-4469222051298874183" onmouseenter="enter('-4469222051298874183');" onmouseout="out('-4469222051298874183');" style="">1341                 &quot;publish_note_button&quot;                                                                    </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">1342             );                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1343         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1344     }                                                                                                    </span>
<span  style="">1345                                                                                                          </span>
<span class="-8415113329489780394" onmouseenter="enter('-8415113329489780394');" onmouseout="out('-8415113329489780394');" style="">1346     private void updatePublishedState(boolean isSuccess) {                                               </span>
<span class="7049673307523359848" onmouseenter="enter('7049673307523359848');" onmouseout="out('7049673307523359848');" style="">1347         if (mPublishingSnackbar == null) {                                                               </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1348             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1349         }                                                                                                </span>
<span  style="">1350                                                                                                          </span>
<span class="-7291151504336992329" onmouseenter="enter('-7291151504336992329');" onmouseout="out('-7291151504336992329');" style="">1351         mPublishingSnackbar.dismiss();                                                                   </span>
<span class="-2275300557144928477" onmouseenter="enter('-2275300557144928477');" onmouseout="out('-2275300557144928477');" style="">1352         mPublishingSnackbar = null;                                                                      </span>
<span  style="">1353                                                                                                          </span>
<span class="3311052756729554547" onmouseenter="enter('3311052756729554547');" onmouseout="out('3311052756729554547');" style="">1354         if (isSuccess &amp;&amp; isAdded()) {                                                                    </span>
<span class="-1365615346790030662" onmouseenter="enter('-1365615346790030662');" onmouseout="out('-1365615346790030662');" style="">1355             if (mNote.isPublished()) {                                                                   </span>
<span class="5497411134593542747" onmouseenter="enter('5497411134593542747');" onmouseout="out('5497411134593542747');" style="">1356                 @StringRes int text;                                                                     </span>
<span  style="">1357                                                                                                          </span>
<span class="8518441705934796822" onmouseenter="enter('8518441705934796822');" onmouseout="out('8518441705934796822');" style="">1358                 if (BrowserUtils.copyToClipboard(requireContext(), mNote.getPublishedUrl())) {           </span>
<span class="8974304534544855275" onmouseenter="enter('8974304534544855275');" onmouseout="out('8974304534544855275');" style="">1359                     text = R.string.publish_successful_link;                                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1360                 } else {                                                                                 </span>
<span class="-3232510055763324097" onmouseenter="enter('-3232510055763324097');" onmouseout="out('-3232510055763324097');" style="">1361                     text = R.string.publish_successful;                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1362                 }                                                                                        </span>
<span  style="">1363                                                                                                          </span>
<span class="7461063035263331376" onmouseenter="enter('7461063035263331376');" onmouseout="out('7461063035263331376');" style="">1364                 if (mHideActionOnSuccess) {                                                              </span>
<span class="6757689242728251287" onmouseenter="enter('6757689242728251287');" onmouseout="out('6757689242728251287');" style="">1365                     Snackbar.make(mRootView, text, Snackbar.LENGTH_LONG).show();                         </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1366                 } else {                                                                                 </span>
<span class="6243176840022533873" onmouseenter="enter('6243176840022533873');" onmouseout="out('6243176840022533873');" style="">1367                     Snackbar.make(mRootView, text, Snackbar.LENGTH_LONG)                                 </span>
<span class="1204503404672542585" onmouseenter="enter('1204503404672542585');" onmouseout="out('1204503404672542585');" style="">1368                         .setAction(                                                                      </span>
<span class="3956744015789713296" onmouseenter="enter('3956744015789713296');" onmouseout="out('3956744015789713296');" style="">1369                             R.string.undo,                                                               </span>
<span class="6694611070408135822" onmouseenter="enter('6694611070408135822');" onmouseout="out('6694611070408135822');" style="">1370                             new View.OnClickListener() {                                                 </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1371                                 @Override                                                                </span>
<span class="-6587489291029443051" onmouseenter="enter('-6587489291029443051');" onmouseout="out('-6587489291029443051');" style="">1372                                 public void onClick(View v) {                                            </span>
<span class="-4312757058216662092" onmouseenter="enter('-4312757058216662092');" onmouseout="out('-4312757058216662092');" style="">1373                                     mHideActionOnSuccess = true;                                         </span>
<span class="4812123925634099655" onmouseenter="enter('4812123925634099655');" onmouseout="out('4812123925634099655');" style="">1374                                     unpublishNote();                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1375                                 }                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1376                             }                                                                            </span>
<span class="-2015476096144723150" onmouseenter="enter('-2015476096144723150');" onmouseout="out('-2015476096144723150');" style="">1377                         )                                                                                </span>
<span class="-4298987925833899609" onmouseenter="enter('-4298987925833899609');" onmouseout="out('-4298987925833899609');" style="">1378                         .show();                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1379                 }                                                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1380             } else {                                                                                     </span>
<span class="7461063035263331376" onmouseenter="enter('7461063035263331376');" onmouseout="out('7461063035263331376');" style="">1381                 if (mHideActionOnSuccess) {                                                              </span>
<span class="525266416384737723" onmouseenter="enter('525266416384737723');" onmouseout="out('525266416384737723');" style="">1382                     Snackbar.make(mRootView, R.string.unpublish_successful, Snackbar.LENGTH_LONG)        </span>
<span class="-4298987925833899609" onmouseenter="enter('-4298987925833899609');" onmouseout="out('-4298987925833899609');" style="">1383                             .show();                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1384                 } else {                                                                                 </span>
<span class="525266416384737723" onmouseenter="enter('525266416384737723');" onmouseout="out('525266416384737723');" style="">1385                     Snackbar.make(mRootView, R.string.unpublish_successful, Snackbar.LENGTH_LONG)        </span>
<span class="1204503404672542585" onmouseenter="enter('1204503404672542585');" onmouseout="out('1204503404672542585');" style="">1386                             .setAction(                                                                  </span>
<span class="3956744015789713296" onmouseenter="enter('3956744015789713296');" onmouseout="out('3956744015789713296');" style="">1387                                 R.string.undo,                                                           </span>
<span class="6694611070408135822" onmouseenter="enter('6694611070408135822');" onmouseout="out('6694611070408135822');" style="">1388                                 new View.OnClickListener() {                                             </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1389                                     @Override                                                            </span>
<span class="-6587489291029443051" onmouseenter="enter('-6587489291029443051');" onmouseout="out('-6587489291029443051');" style="">1390                                     public void onClick(View v) {                                        </span>
<span class="-4312757058216662092" onmouseenter="enter('-4312757058216662092');" onmouseout="out('-4312757058216662092');" style="">1391                                         mHideActionOnSuccess = true;                                     </span>
<span class="7985358866333072123" onmouseenter="enter('7985358866333072123');" onmouseout="out('7985358866333072123');" style="">1392                                         publishNote();                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1393                                     }                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1394                                 }                                                                        </span>
<span class="-2015476096144723150" onmouseenter="enter('-2015476096144723150');" onmouseout="out('-2015476096144723150');" style="">1395                             )                                                                            </span>
<span class="-4298987925833899609" onmouseenter="enter('-4298987925833899609');" onmouseout="out('-4298987925833899609');" style="">1396                             .show();                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1397                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1398             }                                                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1399         } else {                                                                                         </span>
<span class="-1365615346790030662" onmouseenter="enter('-1365615346790030662');" onmouseout="out('-1365615346790030662');" style="">1400             if (mNote.isPublished()) {                                                                   </span>
<span class="-4464833730716871257" onmouseenter="enter('-4464833730716871257');" onmouseout="out('-4464833730716871257');" style="">1401                 Snackbar.make(mRootView, R.string.unpublish_error, Snackbar.LENGTH_LONG)                 </span>
<span class="1204503404672542585" onmouseenter="enter('1204503404672542585');" onmouseout="out('1204503404672542585');" style="">1402                         .setAction(                                                                      </span>
<span class="4947887522108728525" onmouseenter="enter('4947887522108728525');" onmouseout="out('4947887522108728525');" style="">1403                             R.string.retry,                                                              </span>
<span class="6694611070408135822" onmouseenter="enter('6694611070408135822');" onmouseout="out('6694611070408135822');" style="">1404                             new View.OnClickListener() {                                                 </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1405                                 @Override                                                                </span>
<span class="-6587489291029443051" onmouseenter="enter('-6587489291029443051');" onmouseout="out('-6587489291029443051');" style="">1406                                 public void onClick(View v) {                                            </span>
<span class="-4312757058216662092" onmouseenter="enter('-4312757058216662092');" onmouseout="out('-4312757058216662092');" style="">1407                                     mHideActionOnSuccess = true;                                         </span>
<span class="4812123925634099655" onmouseenter="enter('4812123925634099655');" onmouseout="out('4812123925634099655');" style="">1408                                     unpublishNote();                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1409                                 }                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1410                             }                                                                            </span>
<span class="1929519410657596695" onmouseenter="enter('1929519410657596695');" onmouseout="out('1929519410657596695');" style="">1411                         ).show();                                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1412             } else {                                                                                     </span>
<span class="-2467718639414539789" onmouseenter="enter('-2467718639414539789');" onmouseout="out('-2467718639414539789');" style="">1413                 Snackbar.make(mRootView, R.string.publish_error, Snackbar.LENGTH_LONG)                   </span>
<span class="1204503404672542585" onmouseenter="enter('1204503404672542585');" onmouseout="out('1204503404672542585');" style="">1414                         .setAction(                                                                      </span>
<span class="4947887522108728525" onmouseenter="enter('4947887522108728525');" onmouseout="out('4947887522108728525');" style="">1415                             R.string.retry,                                                              </span>
<span class="6694611070408135822" onmouseenter="enter('6694611070408135822');" onmouseout="out('6694611070408135822');" style="">1416                             new View.OnClickListener() {                                                 </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1417                                 @Override                                                                </span>
<span class="-6587489291029443051" onmouseenter="enter('-6587489291029443051');" onmouseout="out('-6587489291029443051');" style="">1418                                 public void onClick(View v) {                                            </span>
<span class="-4312757058216662092" onmouseenter="enter('-4312757058216662092');" onmouseout="out('-4312757058216662092');" style="">1419                                     mHideActionOnSuccess = true;                                         </span>
<span class="7985358866333072123" onmouseenter="enter('7985358866333072123');" onmouseout="out('7985358866333072123');" style="">1420                                     publishNote();                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1421                                 }                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1422                             }                                                                            </span>
<span class="1929519410657596695" onmouseenter="enter('1929519410657596695');" onmouseout="out('1929519410657596695');" style="">1423                         ).show();                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1424             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1425         }                                                                                                </span>
<span  style="">1426                                                                                                          </span>
<span class="-6543205336186683580" onmouseenter="enter('-6543205336186683580');" onmouseout="out('-6543205336186683580');" style="">1427         mHideActionOnSuccess = false;                                                                    </span>
<span class="-8532471920650411447" onmouseenter="enter('-8532471920650411447');" onmouseout="out('-8532471920650411447');" style="">1428         requireActivity().invalidateOptionsMenu();                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1429     }                                                                                                    </span>
<span  style="">1430                                                                                                          </span>
<span class="6900416574659568584" onmouseenter="enter('6900416574659568584');" onmouseout="out('6900416574659568584');" style="">1431     private void publishNote() {                                                                         </span>
<span class="939688580551732431" onmouseenter="enter('939688580551732431');" onmouseout="out('939688580551732431');" style="">1432         if (!NetworkUtils.isNetworkAvailable(requireContext())) {                                        </span>
<span class="8924960461604916754" onmouseenter="enter('8924960461604916754');" onmouseout="out('8924960461604916754');" style="">1433             Toast.makeText(requireContext(), R.string.error_network_required, Toast.LENGTH_LONG).show(); </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1434             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1435         }                                                                                                </span>
<span  style="">1436                                                                                                          </span>
<span class="-7481427962806884462" onmouseenter="enter('-7481427962806884462');" onmouseout="out('-7481427962806884462');" style="">1437         if (isAdded()) {                                                                                 </span>
<span class="402944241808212646" onmouseenter="enter('402944241808212646');" onmouseout="out('402944241808212646');" style=""><abbr title="1438             mPublishingSnackbar = Snackbar.make(mRootView, R.string.publishing, Snackbar.LENGTH_INDEFINITE);">1438             mPublishingSnackbar = Snackbar.make(mRootView, R.string.publishing, Snackbar.LENGTH_INDEFINIT🔵</abbr></span>
<span class="-8074649539774450656" onmouseenter="enter('-8074649539774450656');" onmouseout="out('-8074649539774450656');" style="">1439             mPublishingSnackbar.show();                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1440         }                                                                                                </span>
<span  style="">1441                                                                                                          </span>
<span class="5480526116728317891" onmouseenter="enter('5480526116728317891');" onmouseout="out('5480526116728317891');" style="">1442         setPublishedNote(true);                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1443     }                                                                                                    </span>
<span  style="">1444                                                                                                          </span>
<span class="-8215923685018306170" onmouseenter="enter('-8215923685018306170');" onmouseout="out('-8215923685018306170');" style="">1445     private void unpublishNote() {                                                                       </span>
<span class="939688580551732431" onmouseenter="enter('939688580551732431');" onmouseout="out('939688580551732431');" style="">1446         if (!NetworkUtils.isNetworkAvailable(requireContext())) {                                        </span>
<span class="8924960461604916754" onmouseenter="enter('8924960461604916754');" onmouseout="out('8924960461604916754');" style="">1447             Toast.makeText(requireContext(), R.string.error_network_required, Toast.LENGTH_LONG).show(); </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1448             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1449         }                                                                                                </span>
<span  style="">1450                                                                                                          </span>
<span class="-7481427962806884462" onmouseenter="enter('-7481427962806884462');" onmouseout="out('-7481427962806884462');" style="">1451         if (isAdded()) {                                                                                 </span>
<span class="-5849073483621593387" onmouseenter="enter('-5849073483621593387');" onmouseout="out('-5849073483621593387');" style=""><abbr title="1452             mPublishingSnackbar = Snackbar.make(mRootView, R.string.unpublishing, Snackbar.LENGTH_INDEFINITE);">1452             mPublishingSnackbar = Snackbar.make(mRootView, R.string.unpublishing, Snackbar.LENGTH_INDEFIN🔵</abbr></span>
<span class="-8074649539774450656" onmouseenter="enter('-8074649539774450656');" onmouseout="out('-8074649539774450656');" style="">1453             mPublishingSnackbar.show();                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1454         }                                                                                                </span>
<span  style="">1455                                                                                                          </span>
<span class="8445226168544755352" onmouseenter="enter('8445226168544755352');" onmouseout="out('8445226168544755352');" style="">1456         setPublishedNote(false);                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1457     }                                                                                                    </span>
<span  style="">1458                                                                                                          </span>
<span class="-2059530202125765167" onmouseenter="enter('-2059530202125765167');" onmouseout="out('-2059530202125765167');" style="">1459     private void showShare(String text) {                                                                </span>
<span class="-462181345749239892" onmouseenter="enter('-462181345749239892');" onmouseout="out('-462181345749239892');" style="">1460         startActivity(                                                                                   </span>
<span class="-2960409665728397105" onmouseenter="enter('-2960409665728397105');" onmouseout="out('-2960409665728397105');" style="">1461             ShareCompat.IntentBuilder.from(requireActivity())                                            </span>
<span class="-7167858845932453536" onmouseenter="enter('-7167858845932453536');" onmouseout="out('-7167858845932453536');" style="">1462                 .setText(text)                                                                           </span>
<span class="8809275298081922415" onmouseenter="enter('8809275298081922415');" onmouseout="out('8809275298081922415');" style="">1463                 .setType(&quot;text/plain&quot;)                                                                   </span>
<span class="-4946837607512363870" onmouseenter="enter('-4946837607512363870');" onmouseout="out('-4946837607512363870');" style="">1464                 .createChooserIntent()                                                                   </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">1465         );                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1466     }                                                                                                    </span>
<span class="552430204178555924" onmouseenter="enter('552430204178555924');" onmouseout="out('552430204178555924');" style="">1467     private void showShareSheet() {                                                                      </span>
<span class="4007819101803880383" onmouseenter="enter('4007819101803880383');" onmouseout="out('4007819101803880383');" style="">1468         if (isAdded() &amp;&amp; mShareBottomSheet != null &amp;&amp; !mShareBottomSheet.isAdded()) {                    </span>
<span class="-6363695226018504364" onmouseenter="enter('-6363695226018504364');" onmouseout="out('-6363695226018504364');" style="">1469             mShareBottomSheet.show(requireFragmentManager(), mNote);                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1470         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1471     }                                                                                                    </span>
<span  style="">1472                                                                                                          </span>
<span class="-4049506869902668727" onmouseenter="enter('-4049506869902668727');" onmouseout="out('-4049506869902668727');" style="">1473     private void showInfoSheet() {                                                                       </span>
<span class="2029397660939536329" onmouseenter="enter('2029397660939536329');" onmouseout="out('2029397660939536329');" style="">1474         if (isAdded() &amp;&amp; mInfoBottomSheet != null &amp;&amp; !mInfoBottomSheet.isAdded()) {                      </span>
<span class="-1248038515529606639" onmouseenter="enter('-1248038515529606639');" onmouseout="out('-1248038515529606639');" style="">1475             mInfoBottomSheet.show(requireFragmentManager(), mNote);                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1476         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1477     }                                                                                                    </span>
<span  style="">1478                                                                                                          </span>
<span class="5911143564482716303" onmouseenter="enter('5911143564482716303');" onmouseout="out('5911143564482716303');" style="">1479     private void showHistorySheet() {                                                                    </span>
<span class="1950176939429748509" onmouseenter="enter('1950176939429748509');" onmouseout="out('1950176939429748509');" style="">1480         if (isAdded() &amp;&amp; mHistoryBottomSheet != null &amp;&amp; !mHistoryBottomSheet.isAdded()) {                </span>
<span class="8706434621047143120" onmouseenter="enter('8706434621047143120');" onmouseout="out('8706434621047143120');" style="">1481             // Request revisions for the current note                                                    </span>
<span class="-1574938770535875074" onmouseenter="enter('-1574938770535875074');" onmouseout="out('-1574938770535875074');" style=""><abbr title="1482             mNotesBucket.getRevisions(mNote, MAX_REVISIONS, mHistoryBottomSheet.getRevisionsRequestCallbacks());">1482             mNotesBucket.getRevisions(mNote, MAX_REVISIONS, mHistoryBottomSheet.getRevisionsRequestCallba🔵</abbr></span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style="">1483             saveNote();                                                                                  </span>
<span  style="">1484                                                                                                          </span>
<span class="4961792341108798217" onmouseenter="enter('4961792341108798217');" onmouseout="out('4961792341108798217');" style="">1485             mHistoryBottomSheet.show(requireFragmentManager(), mNote);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1486         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1487     }                                                                                                    </span>
<span  style="">1488                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1489     @Override                                                                                            </span>
<span class="3459602708969445883" onmouseenter="enter('3459602708969445883');" onmouseout="out('3459602708969445883');" style="">1490     public void onDeleteObject(Bucket&lt;Note&gt; noteBucket, Note note) {                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1491     }                                                                                                    </span>
<span  style="">1492                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1493     @Override                                                                                            </span>
<span class="-2970240973750057256" onmouseenter="enter('-2970240973750057256');" onmouseout="out('-2970240973750057256');" style=""><abbr title="1494     public void onNetworkChange(Bucket&lt;Note&gt; noteBucket, Bucket.ChangeType changeType, final String key) {">1494     public void onNetworkChange(Bucket&lt;Note&gt; noteBucket, Bucket.ChangeType changeType, final String key) 🔵</abbr></span>
<span class="6607037711761945955" onmouseenter="enter('6607037711761945955');" onmouseout="out('6607037711761945955');" style="">1495         if (changeType == Bucket.ChangeType.MODIFY) {                                                    </span>
<span class="-6254872391725782597" onmouseenter="enter('-6254872391725782597');" onmouseout="out('-6254872391725782597');" style="">1496             if (getNote() != null &amp;&amp; getNote().getSimperiumKey().equals(key)) {                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1497                 try {                                                                                    </span>
<span class="-1578175229665237336" onmouseenter="enter('-1578175229665237336');" onmouseout="out('-1578175229665237336');" style="">1498                     mNotesBucket = noteBucket;                                                           </span>
<span class="3951885723067312215" onmouseenter="enter('3951885723067312215');" onmouseout="out('3951885723067312215');" style="">1499                     final Note updatedNote = mNotesBucket.get(key);                                      </span>
<span class="4809573797151136036" onmouseenter="enter('4809573797151136036');" onmouseout="out('4809573797151136036');" style="">1500                     if (getActivity() != null) {                                                         </span>
<span class="-3876200887541462175" onmouseenter="enter('-3876200887541462175');" onmouseout="out('-3876200887541462175');" style="">1501                         getActivity().runOnUiThread(new Runnable() {                                     </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1502                             @Override                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">1503                             public void run() {                                                          </span>
<span class="-8758788084050668688" onmouseenter="enter('-8758788084050668688');" onmouseout="out('-8758788084050668688');" style="">1504                                 if (mPublishTimeoutHandler != null) {                                    </span>
<span class="-1646454762641300025" onmouseenter="enter('-1646454762641300025');" onmouseout="out('-1646454762641300025');" style="">1505                                     mPublishTimeoutHandler.removeCallbacks(mPublishTimeoutRunnable);     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1506                                 }                                                                        </span>
<span  style="">1507                                                                                                          </span>
<span class="-8617980127286778731" onmouseenter="enter('-8617980127286778731');" onmouseout="out('-8617980127286778731');" style="">1508                                 updateNote(updatedNote);                                                 </span>
<span class="2318735056997767280" onmouseenter="enter('2318735056997767280');" onmouseout="out('2318735056997767280');" style="">1509                                 updatePublishedState(true);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1510                             }                                                                            </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">1511                         });                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1512                     }                                                                                    </span>
<span class="-1560847995217927266" onmouseenter="enter('-1560847995217927266');" onmouseout="out('-1560847995217927266');" style="">1513                 } catch (BucketObjectMissingException e) {                                               </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style="">1514                     e.printStackTrace();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1515                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1516             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1517         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1518     }                                                                                                    </span>
<span  style="">1519                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1520     @Override                                                                                            </span>
<span class="1835476648918604123" onmouseenter="enter('1835476648918604123');" onmouseout="out('1835476648918604123');" style="">1521     public void onSaveObject(Bucket&lt;Note&gt; noteBucket, Note note) {                                       </span>
<span class="-2565337116915540090" onmouseenter="enter('-2565337116915540090');" onmouseout="out('-2565337116915540090');" style="">1522         if (mIsPaused) {                                                                                 </span>
<span class="-1649552973291504175" onmouseenter="enter('-1649552973291504175');" onmouseout="out('-1649552973291504175');" style="">1523             mNotesBucket.removeListener(this);                                                           </span>
<span class="-9222421628383802707" onmouseenter="enter('-9222421628383802707');" onmouseout="out('-9222421628383802707');" style="">1524             mNotesBucket.stop();                                                                         </span>
<span class="-5888247817738062720" onmouseenter="enter('-5888247817738062720');" onmouseout="out('-5888247817738062720');" style="">1525             AppLog.add(Type.SYNC, &quot;Stopped note bucket (NoteEditorFragment)&quot;);                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1526         }                                                                                                </span>
<span  style="">1527                                                                                                          </span>
<span class="1712554612672119113" onmouseenter="enter('1712554612672119113');" onmouseout="out('1712554612672119113');" style="">1528         AppLog.add(                                                                                      </span>
<span class="5387827170384214934" onmouseenter="enter('5387827170384214934');" onmouseout="out('5387827170384214934');" style="">1529             Type.SYNC,                                                                                   </span>
<span class="-2467507706164826416" onmouseenter="enter('-2467507706164826416');" onmouseout="out('-2467507706164826416');" style="">1530             &quot;Saved note callback in NoteEditorFragment (ID: &quot; + note.getSimperiumKey() +                 </span>
<span class="8009766076008568533" onmouseenter="enter('8009766076008568533');" onmouseout="out('8009766076008568533');" style="">1531                 &quot; / Title: &quot; + note.getTitle() +                                                         </span>
<span class="3373129960779075140" onmouseenter="enter('3373129960779075140');" onmouseout="out('3373129960779075140');" style="">1532                 &quot; / Characters: &quot; + NoteUtils.getCharactersCount(note.getContent()) +                    </span>
<span class="-6586905692045925149" onmouseenter="enter('-6586905692045925149');" onmouseout="out('-6586905692045925149');" style="">1533                 &quot; / Words: &quot; + NoteUtils.getWordCount(note.getContent()) + &quot;)&quot;                           </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">1534         );                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1535     }                                                                                                    </span>
<span  style="">1536                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1537     @Override                                                                                            </span>
<span class="-5956849782971602831" onmouseenter="enter('-5956849782971602831');" onmouseout="out('-5956849782971602831');" style="">1538     public void onBeforeUpdateObject(Bucket&lt;Note&gt; bucket, Note note) {                                   </span>
<span class="9133977848896323437" onmouseenter="enter('9133977848896323437');" onmouseout="out('9133977848896323437');" style="">1539         // Don&#x27;t apply updates if we haven&#x27;t loaded the note yet                                         </span>
<span class="-1541782922582123662" onmouseenter="enter('-1541782922582123662');" onmouseout="out('-1541782922582123662');" style="">1540         if (mIsLoadingNote)                                                                              </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1541             return;                                                                                      </span>
<span  style="">1542                                                                                                          </span>
<span class="1341660593539808393" onmouseenter="enter('1341660593539808393');" onmouseout="out('1341660593539808393');" style="">1543         Note openNote = getNote();                                                                       </span>
<span class="-6997098079508589023" onmouseenter="enter('-6997098079508589023');" onmouseout="out('-6997098079508589023');" style="">1544         if (openNote == null || !openNote.getSimperiumKey().equals(note.getSimperiumKey()))              </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1545             return;                                                                                      </span>
<span  style="">1546                                                                                                          </span>
<span class="7121549238466162700" onmouseenter="enter('7121549238466162700');" onmouseout="out('7121549238466162700');" style="">1547         note.setContent(mContentEditText.getPlainTextContent());                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1548     }                                                                                                    </span>
<span  style="">1549                                                                                                          </span>
<span class="9045414880144452172" onmouseenter="enter('9045414880144452172');" onmouseout="out('9045414880144452172');" style="">1550     private static class LoadNoteTask extends AsyncTask&lt;String, Void, Void&gt; {                            </span>
<span class="2470819661574637360" onmouseenter="enter('2470819661574637360');" onmouseout="out('2470819661574637360');" style="">1551         WeakReference&lt;NoteEditorFragment&gt; mNoteEditorFragmentReference;                                  </span>
<span  style="">1552                                                                                                          </span>
<span class="-5095898803565568819" onmouseenter="enter('-5095898803565568819');" onmouseout="out('-5095898803565568819');" style="">1553         LoadNoteTask(NoteEditorFragment fragment) {                                                      </span>
<span class="-729324371914675142" onmouseenter="enter('-729324371914675142');" onmouseout="out('-729324371914675142');" style="">1554             mNoteEditorFragmentReference = new WeakReference&lt;&gt;(fragment);                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1555         }                                                                                                </span>
<span  style="">1556                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1557         @Override                                                                                        </span>
<span class="-2143377957271683587" onmouseenter="enter('-2143377957271683587');" onmouseout="out('-2143377957271683587');" style="">1558         protected void onPreExecute() {                                                                  </span>
<span class="-6239297955916786402" onmouseenter="enter('-6239297955916786402');" onmouseout="out('-6239297955916786402');" style="">1559             NoteEditorFragment fragment = mNoteEditorFragmentReference.get();                            </span>
<span  style="">1560                                                                                                          </span>
<span class="8682461618194216316" onmouseenter="enter('8682461618194216316');" onmouseout="out('8682461618194216316');" style="">1561             if (fragment != null) {                                                                      </span>
<span class="60782620590248864" onmouseenter="enter('60782620590248864');" onmouseout="out('60782620590248864');" style="">1562                 fragment.mContentEditText.removeTextChangedListener(fragment);                           </span>
<span class="-1534119248334961722" onmouseenter="enter('-1534119248334961722');" onmouseout="out('-1534119248334961722');" style="">1563                 fragment.mIsLoadingNote = true;                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1564             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1565         }                                                                                                </span>
<span  style="">1566                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1567         @Override                                                                                        </span>
<span class="2907103121668961470" onmouseenter="enter('2907103121668961470');" onmouseout="out('2907103121668961470');" style="">1568         protected Void doInBackground(String... args) {                                                  </span>
<span class="-6239297955916786402" onmouseenter="enter('-6239297955916786402');" onmouseout="out('-6239297955916786402');" style="">1569             NoteEditorFragment fragment = mNoteEditorFragmentReference.get();                            </span>
<span  style="">1570                                                                                                          </span>
<span class="-8032132530741633390" onmouseenter="enter('-8032132530741633390');" onmouseout="out('-8032132530741633390');" style="">1571             if (fragment == null || fragment.getActivity() == null) {                                    </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1572                 return null;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1573             }                                                                                            </span>
<span  style="">1574                                                                                                          </span>
<span class="-6905640337159350056" onmouseenter="enter('-6905640337159350056');" onmouseout="out('-6905640337159350056');" style="">1575             String noteID = args[0];                                                                     </span>
<span class="-2377301998895691620" onmouseenter="enter('-2377301998895691620');" onmouseout="out('-2377301998895691620');" style="">1576             Simplenote application = (Simplenote) fragment.getActivity().getApplication();               </span>
<span class="3820701427545927889" onmouseenter="enter('3820701427545927889');" onmouseout="out('3820701427545927889');" style="">1577             Bucket&lt;Note&gt; notesBucket = application.getNotesBucket();                                     </span>
<span  style="">1578                                                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1579             try {                                                                                        </span>
<span class="-4946232803333130386" onmouseenter="enter('-4946232803333130386');" onmouseout="out('-4946232803333130386');" style="">1580                 fragment.mNote = notesBucket.get(noteID);                                                </span>
<span  style="">1581                                                                                                          </span>
<span class="-8094446681246514952" onmouseenter="enter('-8094446681246514952');" onmouseout="out('-8094446681246514952');" style="">1582                 // Set the current note in NotesActivity when on a tablet                                </span>
<span class="-8543118244487944112" onmouseenter="enter('-8543118244487944112');" onmouseout="out('-8543118244487944112');" style="">1583                 if (fragment.getActivity() instanceof NotesActivity) {                                   </span>
<span class="7201017209637424614" onmouseenter="enter('7201017209637424614');" onmouseout="out('7201017209637424614');" style="">1584                     ((NotesActivity) fragment.getActivity()).setCurrentNote(fragment.mNote);             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1585                 }                                                                                        </span>
<span  style="">1586                                                                                                          </span>
<span class="-7559761486783625846" onmouseenter="enter('-7559761486783625846');" onmouseout="out('-7559761486783625846');" style="">1587                 // Set markdown and preview flags for current note                                       </span>
<span class="5610790463962208778" onmouseenter="enter('5610790463962208778');" onmouseout="out('5610790463962208778');" style="">1588                 if (fragment.mNote != null) {                                                            </span>
<span class="-8180075389206795559" onmouseenter="enter('-8180075389206795559');" onmouseout="out('-8180075389206795559');" style="">1589                     fragment.mIsMarkdownEnabled = fragment.mNote.isMarkdownEnabled();                    </span>
<span class="4693841747578299424" onmouseenter="enter('4693841747578299424');" onmouseout="out('4693841747578299424');" style="">1590                     fragment.mIsPreviewEnabled = fragment.mNote.isPreviewEnabled();                      </span>
<span class="1712554612672119113" onmouseenter="enter('1712554612672119113');" onmouseout="out('1712554612672119113');" style="">1591                     AppLog.add(                                                                          </span>
<span class="5387827170384214934" onmouseenter="enter('5387827170384214934');" onmouseout="out('5387827170384214934');" style="">1592                         Type.SYNC,                                                                       </span>
<span class="-7392016025425077182" onmouseenter="enter('-7392016025425077182');" onmouseout="out('-7392016025425077182');" style="">1593                         &quot;Loaded note (ID: &quot; + fragment.mNote.getSimperiumKey() +                         </span>
<span class="-7384197456729805506" onmouseenter="enter('-7384197456729805506');" onmouseout="out('-7384197456729805506');" style="">1594                             &quot; / Title: &quot; + fragment.mNote.getTitle() +                                   </span>
<span class="-9069213288035386789" onmouseenter="enter('-9069213288035386789');" onmouseout="out('-9069213288035386789');" style=""><abbr title="1595                             &quot; / Characters: &quot; + NoteUtils.getCharactersCount(fragment.mNote.getContent()) +">1595                             &quot; / Characters: &quot; + NoteUtils.getCharactersCount(fragment.mNote.getContent())🔵</abbr></span>
<span class="-2213550460625477177" onmouseenter="enter('-2213550460625477177');" onmouseout="out('-2213550460625477177');" style="">1596                             &quot; / Words: &quot; + NoteUtils.getWordCount(fragment.mNote.getContent()) + &quot;)&quot;     </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">1597                     );                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1598                 }                                                                                        </span>
<span class="-1560847995217927266" onmouseenter="enter('-1560847995217927266');" onmouseout="out('-1560847995217927266');" style="">1599             } catch (BucketObjectMissingException e) {                                                   </span>
<span class="2089208945464326929" onmouseenter="enter('2089208945464326929');" onmouseout="out('2089208945464326929');" style="">1600                 // See if the note is in the object store                                                </span>
<span class="369229994761936281" onmouseenter="enter('369229994761936281');" onmouseout="out('369229994761936281');" style="">1601                 Bucket.ObjectCursor&lt;Note&gt; notesCursor = notesBucket.allObjects();                        </span>
<span  style="">1602                                                                                                          </span>
<span class="-3178781815102550114" onmouseenter="enter('-3178781815102550114');" onmouseout="out('-3178781815102550114');" style="">1603                 while (notesCursor.moveToNext()) {                                                       </span>
<span class="-6636674936476994775" onmouseenter="enter('-6636674936476994775');" onmouseout="out('-6636674936476994775');" style="">1604                     Note currentNote = notesCursor.getObject();                                          </span>
<span  style="">1605                                                                                                          </span>
<span class="5230840531090379031" onmouseenter="enter('5230840531090379031');" onmouseout="out('5230840531090379031');" style="">1606                     if (currentNote != null &amp;&amp; currentNote.getSimperiumKey().equals(noteID)) {           </span>
<span class="8774517486286621197" onmouseenter="enter('8774517486286621197');" onmouseout="out('8774517486286621197');" style="">1607                         fragment.mNote = currentNote;                                                    </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1608                         return null;                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1609                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1610                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1611             }                                                                                            </span>
<span  style="">1612                                                                                                          </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1613             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1614         }                                                                                                </span>
<span  style="">1615                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1616         @Override                                                                                        </span>
<span class="2295103304779241059" onmouseenter="enter('2295103304779241059');" onmouseout="out('2295103304779241059');" style="">1617         protected void onPostExecute(Void nada) {                                                        </span>
<span class="-6221597993462190775" onmouseenter="enter('-6221597993462190775');" onmouseout="out('-6221597993462190775');" style="">1618             final NoteEditorFragment fragment = mNoteEditorFragmentReference.get();                      </span>
<span class="-5025636818911942947" onmouseenter="enter('-5025636818911942947');" onmouseout="out('-5025636818911942947');" style=""><abbr title="1619             if (fragment == null || fragment.getActivity() == null || fragment.getActivity().isFinishing()) {">1619             if (fragment == null || fragment.getActivity() == null || fragment.getActivity().isFinishing(🔵</abbr></span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1620                 return;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1621             }                                                                                            </span>
<span  style="">1622                                                                                                          </span>
<span class="-6603799210363857095" onmouseenter="enter('-6603799210363857095');" onmouseout="out('-6603799210363857095');" style="">1623             fragment.refreshContent(false);                                                              </span>
<span  style="">1624                                                                                                          </span>
<span class="5917882013700041584" onmouseenter="enter('5917882013700041584');" onmouseout="out('5917882013700041584');" style="">1625             if (fragment.mMatchOffsets != null) {                                                        </span>
<span class="3332467390516262576" onmouseenter="enter('3332467390516262576');" onmouseout="out('3332467390516262576');" style=""><abbr title="1626                 int columnIndex = fragment.mNote.getBucket().getSchema().getFullTextIndex().getColumnIndex(Note.CONTENT_PROPERTY);">1626                 int columnIndex = fragment.mNote.getBucket().getSchema().getFullTextIndex().getColumnInde🔵</abbr></span>
<span class="-941659818852434408" onmouseenter="enter('-941659818852434408');" onmouseout="out('-941659818852434408');" style="">1627                 fragment.mHighlighter.highlightMatches(fragment.mMatchOffsets, columnIndex);             </span>
<span class="-5586540550370892268" onmouseenter="enter('-5586540550370892268');" onmouseout="out('-5586540550370892268');" style="">1628                 fragment.mShouldScrollToSearchMatch = true;                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1629             }                                                                                            </span>
<span  style="">1630                                                                                                          </span>
<span class="973040091990718145" onmouseenter="enter('973040091990718145');" onmouseout="out('973040091990718145');" style="">1631             fragment.mContentEditText.addTextChangedListener(fragment);                                  </span>
<span  style="">1632                                                                                                          </span>
<span class="2402633428423922470" onmouseenter="enter('2402633428423922470');" onmouseout="out('2402633428423922470');" style="">1633             if (fragment.mNote != null &amp;&amp; fragment.mNote.getContent().isEmpty()) {                       </span>
<span class="-7639034409774462373" onmouseenter="enter('-7639034409774462373');" onmouseout="out('-7639034409774462373');" style="">1634                 // Show soft keyboard                                                                    </span>
<span class="-4206285070691362757" onmouseenter="enter('-4206285070691362757');" onmouseout="out('-4206285070691362757');" style="">1635                 fragment.mContentEditText.requestFocus();                                                </span>
<span  style="">1636                                                                                                          </span>
<span class="7162501222170899627" onmouseenter="enter('7162501222170899627');" onmouseout="out('7162501222170899627');" style="">1637                 new Handler().postDelayed(new Runnable() {                                               </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1638                     @Override                                                                            </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">1639                     public void run() {                                                                  </span>
<span class="-3270581272855840613" onmouseenter="enter('-3270581272855840613');" onmouseout="out('-3270581272855840613');" style="">1640                         if (fragment.getActivity() == null) {                                            </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1641                             return;                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1642                         }                                                                                </span>
<span  style="">1643                                                                                                          </span>
<span class="-9053809797008075040" onmouseenter="enter('-9053809797008075040');" onmouseout="out('-9053809797008075040');" style=""><abbr title="1644                         InputMethodManager inputMethodManager = (InputMethodManager) fragment.getActivity().getSystemService(Context.INPUT_METHOD_SERVICE);">1644                         InputMethodManager inputMethodManager = (InputMethodManager) fragment.getActivity🔵</abbr></span>
<span  style="">1645                                                                                                          </span>
<span class="-9213036537020298306" onmouseenter="enter('-9213036537020298306');" onmouseout="out('-9213036537020298306');" style="">1646                         if (inputMethodManager != null) {                                                </span>
<span class="195139432086188728" onmouseenter="enter('195139432086188728');" onmouseout="out('195139432086188728');" style="">1647                             inputMethodManager.showSoftInput(fragment.mContentEditText, 0);              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1648                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1649                     }                                                                                    </span>
<span class="-4884776244894547305" onmouseenter="enter('-4884776244894547305');" onmouseout="out('-4884776244894547305');" style="">1650                 }, 100);                                                                                 </span>
<span class="-6150494714931322561" onmouseenter="enter('-6150494714931322561');" onmouseout="out('-6150494714931322561');" style="">1651             } else if (fragment.mNote != null) {                                                         </span>
<span class="-1393000384089402121" onmouseenter="enter('-1393000384089402121');" onmouseout="out('-1393000384089402121');" style="">1652                 // If we have a valid note, hide the placeholder                                         </span>
<span class="8494685023237855547" onmouseenter="enter('8494685023237855547');" onmouseout="out('8494685023237855547');" style="">1653                 fragment.setPlaceholderVisible(false);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1654             }                                                                                            </span>
<span  style="">1655                                                                                                          </span>
<span class="-204842057880624038" onmouseenter="enter('-204842057880624038');" onmouseout="out('-204842057880624038');" style="">1656             fragment.updateMarkdownView();                                                               </span>
<span class="-7853767312046629249" onmouseenter="enter('-7853767312046629249');" onmouseout="out('-7853767312046629249');" style="">1657             fragment.requireActivity().invalidateOptionsMenu();                                          </span>
<span class="-6330986853491903464" onmouseenter="enter('-6330986853491903464');" onmouseout="out('-6330986853491903464');" style="">1658             fragment.linkifyEditorContent();                                                             </span>
<span class="-4002830427376252976" onmouseenter="enter('-4002830427376252976');" onmouseout="out('-4002830427376252976');" style="">1659             fragment.mIsLoadingNote = false;                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1660         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1661     }                                                                                                    </span>
<span  style="">1662                                                                                                          </span>
<span class="-2513677254117436534" onmouseenter="enter('-2513677254117436534');" onmouseout="out('-2513677254117436534');" style="">1663     private static class SaveNoteTask extends AsyncTask&lt;Void, Void, Void&gt; {                              </span>
<span class="2470819661574637360" onmouseenter="enter('2470819661574637360');" onmouseout="out('2470819661574637360');" style="">1664         WeakReference&lt;NoteEditorFragment&gt; mNoteEditorFragmentReference;                                  </span>
<span  style="">1665                                                                                                          </span>
<span class="-3144982887415890281" onmouseenter="enter('-3144982887415890281');" onmouseout="out('-3144982887415890281');" style="">1666         SaveNoteTask(NoteEditorFragment fragment) {                                                      </span>
<span class="-729324371914675142" onmouseenter="enter('-729324371914675142');" onmouseout="out('-729324371914675142');" style="">1667             mNoteEditorFragmentReference = new WeakReference&lt;&gt;(fragment);                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1668         }                                                                                                </span>
<span  style="">1669                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1670         @Override                                                                                        </span>
<span class="1259374977543247181" onmouseenter="enter('1259374977543247181');" onmouseout="out('1259374977543247181');" style="">1671         protected Void doInBackground(Void... args) {                                                    </span>
<span class="-6239297955916786402" onmouseenter="enter('-6239297955916786402');" onmouseout="out('-6239297955916786402');" style="">1672             NoteEditorFragment fragment = mNoteEditorFragmentReference.get();                            </span>
<span  style="">1673                                                                                                          </span>
<span class="8682461618194216316" onmouseenter="enter('8682461618194216316');" onmouseout="out('8682461618194216316');" style="">1674             if (fragment != null) {                                                                      </span>
<span class="8575404770768137029" onmouseenter="enter('8575404770768137029');" onmouseout="out('8575404770768137029');" style="">1675                 fragment.saveNote();                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1676             }                                                                                            </span>
<span  style="">1677                                                                                                          </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1678             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1679         }                                                                                                </span>
<span  style="">1680                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1681         @Override                                                                                        </span>
<span class="2295103304779241059" onmouseenter="enter('2295103304779241059');" onmouseout="out('2295103304779241059');" style="">1682         protected void onPostExecute(Void nada) {                                                        </span>
<span class="-6239297955916786402" onmouseenter="enter('-6239297955916786402');" onmouseout="out('-6239297955916786402');" style="">1683             NoteEditorFragment fragment = mNoteEditorFragmentReference.get();                            </span>
<span  style="">1684                                                                                                          </span>
<span class="-8106394483710371243" onmouseenter="enter('-8106394483710371243');" onmouseout="out('-8106394483710371243');" style=""><abbr title="1685             if (fragment != null &amp;&amp; fragment.getActivity() != null &amp;&amp; !fragment.getActivity().isFinishing()) {">1685             if (fragment != null &amp;&amp; fragment.getActivity() != null &amp;&amp; !fragment.getActivity().isFinishing🔵</abbr></span>
<span class="4157206213844518202" onmouseenter="enter('4157206213844518202');" onmouseout="out('4157206213844518202');" style="">1686                 // Update links                                                                          </span>
<span class="-6330986853491903464" onmouseenter="enter('-6330986853491903464');" onmouseout="out('-6330986853491903464');" style="">1687                 fragment.linkifyEditorContent();                                                         </span>
<span class="-204842057880624038" onmouseenter="enter('-204842057880624038');" onmouseout="out('-204842057880624038');" style="">1688                 fragment.updateMarkdownView();                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1689             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1690         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1691     }                                                                                                    </span>
<span  style="">1692                                                                                                          </span>
<span class="5750088007463981533" onmouseenter="enter('5750088007463981533');" onmouseout="out('5750088007463981533');" style="">1693     private void linkifyEditorContent() {                                                                </span>
<span class="-7408428876964241805" onmouseenter="enter('-7408428876964241805');" onmouseout="out('-7408428876964241805');" style="">1694         if (getActivity() == null || getActivity().isFinishing()) {                                      </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1695             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1696         }                                                                                                </span>
<span  style="">1697                                                                                                          </span>
<span class="-8676186023856313759" onmouseenter="enter('-8676186023856313759');" onmouseout="out('-8676186023856313759');" style="">1698         if (PrefUtils.getBoolPref(getActivity(), PrefUtils.PREF_DETECT_LINKS)) {                         </span>
<span class="-5493645025534883433" onmouseenter="enter('-5493645025534883433');" onmouseout="out('-5493645025534883433');" style="">1699             SimplenoteLinkify.addLinks(mContentEditText, Linkify.ALL);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1700         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1701     }                                                                                                    </span>
<span  style="">1702                                                                                                          </span>
<span class="-5950330616337931457" onmouseenter="enter('-5950330616337931457');" onmouseout="out('-5950330616337931457');" style="">1703     // Show tabs if markdown is enabled globally, for current note, and not tablet landscape             </span>
<span class="2649812560178195830" onmouseenter="enter('2649812560178195830');" onmouseout="out('2649812560178195830');" style="">1704     private void updateMarkdownView() {                                                                  </span>
<span class="-6478060281573302790" onmouseenter="enter('-6478060281573302790');" onmouseout="out('-6478060281573302790');" style="">1705         if (!mIsMarkdownEnabled) {                                                                       </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1706             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1707         }                                                                                                </span>
<span  style="">1708                                                                                                          </span>
<span class="-5071525869541290984" onmouseenter="enter('-5071525869541290984');" onmouseout="out('-5071525869541290984');" style="">1709         Activity activity = getActivity();                                                               </span>
<span class="6030899174327056570" onmouseenter="enter('6030899174327056570');" onmouseout="out('6030899174327056570');" style="">1710         if (activity instanceof NotesActivity) {                                                         </span>
<span class="2782126590805787389" onmouseenter="enter('2782126590805787389');" onmouseout="out('2782126590805787389');" style="">1711             // This fragment lives in NotesActivity, so load markdown in this fragment&#x27;s WebView.        </span>
<span class="3327794499329885328" onmouseenter="enter('3327794499329885328');" onmouseout="out('3327794499329885328');" style="">1712             loadMarkdownData();                                                                          </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1713         } else {                                                                                         </span>
<span class="8122704767225379324" onmouseenter="enter('8122704767225379324');" onmouseout="out('8122704767225379324');" style="">1714             // This fragment lives in the NoteEditorActivity&#x27;s ViewPager.                                </span>
<span class="-3674842258349497418" onmouseenter="enter('-3674842258349497418');" onmouseout="out('-3674842258349497418');" style="">1715             if (mNoteMarkdownFragment == null) {                                                         </span>
<span class="3603448342706497777" onmouseenter="enter('3603448342706497777');" onmouseout="out('3603448342706497777');" style="">1716                 mNoteMarkdownFragment = ((NoteEditorActivity) requireActivity())                         </span>
<span class="-2617317400764712760" onmouseenter="enter('-2617317400764712760');" onmouseout="out('-2617317400764712760');" style="">1717                         .getNoteMarkdownFragment();                                                      </span>
<span class="3313661309460802096" onmouseenter="enter('3313661309460802096');" onmouseout="out('3313661309460802096');" style="">1718                 ((NoteEditorActivity) requireActivity()).showTabs();                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1719             }                                                                                            </span>
<span class="-1009334497805408344" onmouseenter="enter('-1009334497805408344');" onmouseout="out('-1009334497805408344');" style="">1720             // Load markdown in the sibling NoteMarkdownFragment&#x27;s WebView.                              </span>
<span class="8234543871026198045" onmouseenter="enter('8234543871026198045');" onmouseout="out('8234543871026198045');" style="">1721             mNoteMarkdownFragment.updateMarkdown(mContentEditText.getPreviewTextContent());              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1722         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1723     }                                                                                                    </span>
<span  style="">1724                                                                                                          </span>
<span class="621072892992557040" onmouseenter="enter('621072892992557040');" onmouseout="out('621072892992557040');" style="">1725     private ColorStateList getChipBackgroundColor() {                                                    </span>
<span class="-2852806967863140186" onmouseenter="enter('-2852806967863140186');" onmouseout="out('-2852806967863140186');" style="">1726         int[][] states = new int[][] {                                                                   </span>
<span class="3138779758285079345" onmouseenter="enter('3138779758285079345');" onmouseout="out('3138779758285079345');" style="">1727             new int[] { android.R.attr.state_checked}, // checked                                        </span>
<span class="2921033856249437884" onmouseenter="enter('2921033856249437884');" onmouseout="out('2921033856249437884');" style="">1728             new int[] {-android.R.attr.state_checked}  // unchecked                                      </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">1729         };                                                                                               </span>
<span  style="">1730                                                                                                          </span>
<span class="-5399670070282478940" onmouseenter="enter('-5399670070282478940');" onmouseout="out('-5399670070282478940');" style="">1731         int[] colors = new int[] {                                                                       </span>
<span class="3188530588543322355" onmouseenter="enter('3188530588543322355');" onmouseout="out('3188530588543322355');" style="">1732             ThemeUtils.getColorFromAttribute(requireContext(), R.attr.chipCheckedOnBackgroundColor),     </span>
<span class="1811726545786864469" onmouseenter="enter('1811726545786864469');" onmouseout="out('1811726545786864469');" style="">1733             ThemeUtils.getColorFromAttribute(requireContext(), R.attr.chipCheckedOffBackgroundColor)     </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">1734         };                                                                                               </span>
<span  style="">1735                                                                                                          </span>
<span class="-5773454088160861424" onmouseenter="enter('-5773454088160861424');" onmouseout="out('-5773454088160861424');" style="">1736         return new ColorStateList(states, colors);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1737     }                                                                                                    </span>
<span  style="">1738                                                                                                          </span>
<span class="7978150615022703967" onmouseenter="enter('7978150615022703967');" onmouseout="out('7978150615022703967');" style="">1739     private void setChips(CharSequence text) {                                                           </span>
<span class="-6352640607268108974" onmouseenter="enter('-6352640607268108974');" onmouseout="out('-6352640607268108974');" style="">1740         mTagPadding.setVisibility(text.length() &gt; 0 ? View.VISIBLE : View.GONE);                         </span>
<span class="5420418357496709981" onmouseenter="enter('5420418357496709981');" onmouseout="out('5420418357496709981');" style="">1741         mTagChips.setVisibility(text.length() &gt; 0 ? View.VISIBLE : View.GONE);                           </span>
<span class="6036610741747636495" onmouseenter="enter('6036610741747636495');" onmouseout="out('6036610741747636495');" style="">1742         mTagChips.setSingleSelection(true);                                                              </span>
<span class="-281158766645647153" onmouseenter="enter('-281158766645647153');" onmouseout="out('-281158766645647153');" style="">1743         mTagChips.removeAllViews();                                                                      </span>
<span class="-2312425264507564639" onmouseenter="enter('-2312425264507564639');" onmouseout="out('-2312425264507564639');" style="">1744         SimpleStringSplitter tags = new SimpleStringSplitter(SPACE);                                     </span>
<span class="-2221549004994088170" onmouseenter="enter('-2221549004994088170');" onmouseout="out('-2221549004994088170');" style="">1745         tags.setString(text.toString());                                                                 </span>
<span  style="">1746                                                                                                          </span>
<span class="-7185531782033852210" onmouseenter="enter('-7185531782033852210');" onmouseout="out('-7185531782033852210');" style="">1747         for (String tag : tags) {                                                                        </span>
<span class="-4253336828679787495" onmouseenter="enter('-4253336828679787495');" onmouseout="out('-4253336828679787495');" style="">1748             final Chip chip = new Chip(requireContext());                                                </span>
<span class="1656135987988335587" onmouseenter="enter('1656135987988335587');" onmouseout="out('1656135987988335587');" style="">1749             chip.setText(tag);                                                                           </span>
<span class="-8675353638360963179" onmouseenter="enter('-8675353638360963179');" onmouseout="out('-8675353638360963179');" style="">1750             chip.setCheckable(true);                                                                     </span>
<span class="67942289785469509" onmouseenter="enter('67942289785469509');" onmouseout="out('67942289785469509');" style="">1751             chip.setCheckedIcon(null);                                                                   </span>
<span class="4360750963000358582" onmouseenter="enter('4360750963000358582');" onmouseout="out('4360750963000358582');" style="">1752             chip.setChipBackgroundColor(getChipBackgroundColor());                                       </span>
<span class="9213121115800400320" onmouseenter="enter('9213121115800400320');" onmouseout="out('9213121115800400320');" style="">1753             chip.setTextColor(ThemeUtils.getColorFromAttribute(requireContext(), R.attr.chipTextColor)); </span>
<span class="7518117741736260019" onmouseenter="enter('7518117741736260019');" onmouseout="out('7518117741736260019');" style="">1754             chip.setStateListAnimator(null);                                                             </span>
<span class="-4577029713597050278" onmouseenter="enter('-4577029713597050278');" onmouseout="out('-4577029713597050278');" style="">1755             chip.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {               </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1756                 @Override                                                                                </span>
<span class="3078550550582438549" onmouseenter="enter('3078550550582438549');" onmouseout="out('3078550550582438549');" style="">1757                 public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {             </span>
<span class="44703121288981283" onmouseenter="enter('44703121288981283');" onmouseout="out('44703121288981283');" style="">1758                     chip.setCloseIconVisible(isChecked);                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1759                 }                                                                                        </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">1760             });                                                                                          </span>
<span class="160847713587338016" onmouseenter="enter('160847713587338016');" onmouseout="out('160847713587338016');" style="">1761             chip.setOnCloseIconClickListener(new View.OnClickListener() {                                </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1762                 @Override                                                                                </span>
<span class="2630081792579352299" onmouseenter="enter('2630081792579352299');" onmouseout="out('2630081792579352299');" style="">1763                 public void onClick(View view) {                                                         </span>
<span class="-7509335457070409893" onmouseenter="enter('-7509335457070409893');" onmouseout="out('-7509335457070409893');" style="">1764                     mTagChips.removeView(view);                                                          </span>
<span class="6057505716411681059" onmouseenter="enter('6057505716411681059');" onmouseout="out('6057505716411681059');" style="">1765                     updateTags();                                                                        </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style="">1766                     AnalyticsTracker.track(                                                              </span>
<span class="6322942827450848506" onmouseenter="enter('6322942827450848506');" onmouseout="out('6322942827450848506');" style="">1767                         EDITOR_TAG_REMOVED,                                                              </span>
<span class="-2430475172570880083" onmouseenter="enter('-2430475172570880083');" onmouseout="out('-2430475172570880083');" style="">1768                         CATEGORY_NOTE,                                                                   </span>
<span class="7139119425176259618" onmouseenter="enter('7139119425176259618');" onmouseout="out('7139119425176259618');" style="">1769                         &quot;tag_removed_from_note&quot;                                                          </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">1770                     );                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1771                 }                                                                                        </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">1772             });                                                                                          </span>
<span class="-535069795448615627" onmouseenter="enter('-535069795448615627');" onmouseout="out('-535069795448615627');" style="">1773             mTagChips.addView(chip);                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1774         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1775     }                                                                                                    </span>
<span  style="">1776                                                                                                          </span>
<span class="2006864524440231174" onmouseenter="enter('2006864524440231174');" onmouseout="out('2006864524440231174');" style="">1777     private void updateTags() {                                                                          </span>
<span class="-6566957513776356959" onmouseenter="enter('-6566957513776356959');" onmouseout="out('-6566957513776356959');" style="">1778         if (mNote == null) {                                                                             </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1779             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1780         }                                                                                                </span>
<span  style="">1781                                                                                                          </span>
<span class="2510051710836521686" onmouseenter="enter('2510051710836521686');" onmouseout="out('2510051710836521686');" style="">1782         mNote.setTagString(getNoteTagsString());                                                         </span>
<span class="-3343075472306200704" onmouseenter="enter('-3343075472306200704');" onmouseout="out('-3343075472306200704');" style="">1783         mNote.setModificationDate(Calendar.getInstance());                                               </span>
<span class="3745953297761259324" onmouseenter="enter('3745953297761259324');" onmouseout="out('3745953297761259324');" style="">1784         updateTagList();                                                                                 </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style="">1785         mNote.save();                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1786     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1787 }                                                                                                        </span></pre></td>
                            <td><pre><span class="8328120990598135231" onmouseenter="enter('8328120990598135231');" onmouseout="out('8328120990598135231');" style="">   1 package com.automattic.simplenote;                                                                       </span>
<span  style="">   2                                                                                                          </span>
<span class="-7090287939251728203" onmouseenter="enter('-7090287939251728203');" onmouseout="out('-7090287939251728203');" style="">   3 import android.app.Activity;                                                                             </span>
<span class="5922045460006936195" onmouseenter="enter('5922045460006936195');" onmouseout="out('5922045460006936195');" style="">   4 import android.content.Context;                                                                          </span>
<span class="4122587240602557356" onmouseenter="enter('4122587240602557356');" onmouseout="out('4122587240602557356');" style="">   5 import android.content.SharedPreferences;                                                                </span>
<span class="437349496656716435" onmouseenter="enter('437349496656716435');" onmouseout="out('437349496656716435');" style="">   6 import android.content.res.ColorStateList;                                                               </span>
<span class="6294169624328016071" onmouseenter="enter('6294169624328016071');" onmouseout="out('6294169624328016071');" style="">   7 import android.database.Cursor;                                                                          </span>
<span class="-5606798514618908790" onmouseenter="enter('-5606798514618908790');" onmouseout="out('-5606798514618908790');" style="">   8 import android.graphics.Typeface;                                                                        </span>
<span class="-1737226814075322931" onmouseenter="enter('-1737226814075322931');" onmouseout="out('-1737226814075322931');" style="">   9 import android.graphics.drawable.Drawable;                                                               </span>
<span class="955674827050616793" onmouseenter="enter('955674827050616793');" onmouseout="out('955674827050616793');" style="">  10 import android.os.AsyncTask;                                                                             </span>
<span class="8096531590004379472" onmouseenter="enter('8096531590004379472');" onmouseout="out('8096531590004379472');" style="">  11 import android.os.Bundle;                                                                                </span>
<span class="-1086316590722027623" onmouseenter="enter('-1086316590722027623');" onmouseout="out('-1086316590722027623');" style="">  12 import android.os.Handler;                                                                               </span>
<span class="4177373235046048356" onmouseenter="enter('4177373235046048356');" onmouseout="out('4177373235046048356');" style="">  13 import android.text.Editable;                                                                            </span>
<span class="-578015270574978569" onmouseenter="enter('-578015270574978569');" onmouseout="out('-578015270574978569');" style="">  14 import android.text.Layout;                                                                              </span>
<span class="7731806713123176572" onmouseenter="enter('7731806713123176572');" onmouseout="out('7731806713123176572');" style="">  15 import android.text.Spanned;                                                                             </span>
<span class="-3299261040401335998" onmouseenter="enter('-3299261040401335998');" onmouseout="out('-3299261040401335998');" style="">  16 import android.text.TextUtils.SimpleStringSplitter;                                                      </span>
<span class="4038639591141008331" onmouseenter="enter('4038639591141008331');" onmouseout="out('4038639591141008331');" style="">  17 import android.text.TextWatcher;                                                                         </span>
<span class="-654170262772204786" onmouseenter="enter('-654170262772204786');" onmouseout="out('-654170262772204786');" style="">  18 import android.text.style.MetricAffectingSpan;                                                           </span>
<span class="2374973474356501783" onmouseenter="enter('2374973474356501783');" onmouseout="out('2374973474356501783');" style="">  19 import android.text.style.RelativeSizeSpan;                                                              </span>
<span class="-6813443535687611228" onmouseenter="enter('-6813443535687611228');" onmouseout="out('-6813443535687611228');" style="">  20 import android.text.style.StyleSpan;                                                                     </span>
<span class="-1165963660754430642" onmouseenter="enter('-1165963660754430642');" onmouseout="out('-1165963660754430642');" style="">  21 import android.text.style.URLSpan;                                                                       </span>
<span class="-3804250137032727253" onmouseenter="enter('-3804250137032727253');" onmouseout="out('-3804250137032727253');" style="">  22 import android.text.util.Linkify;                                                                        </span>
<span class="-1289400933432271961" onmouseenter="enter('-1289400933432271961');" onmouseout="out('-1289400933432271961');" style="">  23 import android.util.TypedValue;                                                                          </span>
<span class="8553241717595905778" onmouseenter="enter('8553241717595905778');" onmouseout="out('8553241717595905778');" style="">  24 import android.view.LayoutInflater;                                                                      </span>
<span class="-603490076395619238" onmouseenter="enter('-603490076395619238');" onmouseout="out('-603490076395619238');" style="">  25 import android.view.Menu;                                                                                </span>
<span class="-434306062495579804" onmouseenter="enter('-434306062495579804');" onmouseout="out('-434306062495579804');" style="">  26 import android.view.MenuInflater;                                                                        </span>
<span class="6391706839654240930" onmouseenter="enter('6391706839654240930');" onmouseout="out('6391706839654240930');" style="">  27 import android.view.MenuItem;                                                                            </span>
<span class="-8980485571216513882" onmouseenter="enter('-8980485571216513882');" onmouseout="out('-8980485571216513882');" style="">  28 import android.view.View;                                                                                </span>
<span class="7569314084591619834" onmouseenter="enter('7569314084591619834');" onmouseout="out('7569314084591619834');" style="">  29 import android.view.ViewGroup;                                                                           </span>
<span class="-4985651548362660777" onmouseenter="enter('-4985651548362660777');" onmouseout="out('-4985651548362660777');" style="">  30 import android.view.ViewTreeObserver;                                                                    </span>
<span class="-3117363671899680167" onmouseenter="enter('-3117363671899680167');" onmouseout="out('-3117363671899680167');" style="">  31 import android.view.inputmethod.InputMethodManager;                                                      </span>
<span class="1348319594514771408" onmouseenter="enter('1348319594514771408');" onmouseout="out('1348319594514771408');" style="">  32 import android.webkit.WebResourceRequest;                                                                </span>
<span class="2723690893492346945" onmouseenter="enter('2723690893492346945');" onmouseout="out('2723690893492346945');" style="">  33 import android.webkit.WebView;                                                                           </span>
<span class="-3167847991483127041" onmouseenter="enter('-3167847991483127041');" onmouseout="out('-3167847991483127041');" style="">  34 import android.webkit.WebViewClient;                                                                     </span>
<span class="2736968318319789680" onmouseenter="enter('2736968318319789680');" onmouseout="out('2736968318319789680');" style="">  35 import android.widget.CompoundButton;                                                                    </span>
<span class="5634491474902588492" onmouseenter="enter('5634491474902588492');" onmouseout="out('5634491474902588492');" style="">  36 import android.widget.CursorAdapter;                                                                     </span>
<span class="5987800420235491716" onmouseenter="enter('5987800420235491716');" onmouseout="out('5987800420235491716');" style="">  37 import android.widget.LinearLayout;                                                                      </span>
<span class="-4961528671422147708" onmouseenter="enter('-4961528671422147708');" onmouseout="out('-4961528671422147708');" style="">  38 import android.widget.TextView;                                                                          </span>
<span class="-4373317539211938720" onmouseenter="enter('-4373317539211938720');" onmouseout="out('-4373317539211938720');" style="">  39 import android.widget.Toast;                                                                             </span>
<span  style="">  40                                                                                                          </span>
<span class="6963272077887521702" onmouseenter="enter('6963272077887521702');" onmouseout="out('6963272077887521702');" style="">  41 import androidx.annotation.NonNull;                                                                      </span>
<span class="-4688549274525092465" onmouseenter="enter('-4688549274525092465');" onmouseout="out('-4688549274525092465');" style="">  42 import androidx.annotation.StringRes;                                                                    </span>
<span class="8057892732248099365" onmouseenter="enter('8057892732248099365');" onmouseout="out('8057892732248099365');" style="">  43 import androidx.appcompat.app.AppCompatActivity;                                                         </span>
<span class="2035494855708115696" onmouseenter="enter('2035494855708115696');" onmouseout="out('2035494855708115696');" style="">  44 import androidx.appcompat.view.ActionMode;                                                               </span>
<span class="-6344652174315873597" onmouseenter="enter('-6344652174315873597');" onmouseout="out('-6344652174315873597');" style="">  45 import androidx.core.app.ShareCompat;                                                                    </span>
<span class="-362404946986079023" onmouseenter="enter('-362404946986079023');" onmouseout="out('-362404946986079023');" style="">  46 import androidx.core.view.MenuCompat;                                                                    </span>
<span class="-767584428700722881" onmouseenter="enter('-767584428700722881');" onmouseout="out('-767584428700722881');" style="">  47 import androidx.core.widget.NestedScrollView;                                                            </span>
<span class="2878002094531064439" onmouseenter="enter('2878002094531064439');" onmouseout="out('2878002094531064439');" style="">  48 import androidx.fragment.app.Fragment;                                                                   </span>
<span class="-6950145472733447700" onmouseenter="enter('-6950145472733447700');" onmouseout="out('-6950145472733447700');" style="">  49 import androidx.fragment.app.FragmentTransaction;                                                        </span>
<span class="-7272383226560052741" onmouseenter="enter('-7272383226560052741');" onmouseout="out('-7272383226560052741');" style="">  50 import androidx.preference.PreferenceManager;                                                            </span>
<span  style="">  51                                                                                                          </span>
<span class="-155835000323929258" onmouseenter="enter('-155835000323929258');" onmouseout="out('-155835000323929258');" style="">  52 import com.automattic.simplenote.analytics.AnalyticsTracker;                                             </span>
<span class="9061368408436996655" onmouseenter="enter('9061368408436996655');" onmouseout="out('9061368408436996655');" style="">  53 import com.automattic.simplenote.models.Note;                                                            </span>
<span class="107771998888903823" onmouseenter="enter('107771998888903823');" onmouseout="out('107771998888903823');" style="">  54 import com.automattic.simplenote.models.Tag;                                                             </span>
<span class="160698548927534529" onmouseenter="enter('160698548927534529');" onmouseout="out('160698548927534529');" style="">  55 import com.automattic.simplenote.utils.AppLog;                                                           </span>
<span class="7580776162261256599" onmouseenter="enter('7580776162261256599');" onmouseout="out('7580776162261256599');" style="">  56 import com.automattic.simplenote.utils.AppLog.Type;                                                      </span>
<span class="-4380838228434146133" onmouseenter="enter('-4380838228434146133');" onmouseout="out('-4380838228434146133');" style="">  57 import com.automattic.simplenote.utils.AutoBullet;                                                       </span>
<span class="1593315676680608324" onmouseenter="enter('1593315676680608324');" onmouseout="out('1593315676680608324');" style="">  58 import com.automattic.simplenote.utils.BrowserUtils;                                                     </span>
<span class="8229771960302052711" onmouseenter="enter('8229771960302052711');" onmouseout="out('8229771960302052711');" style="">  59 import com.automattic.simplenote.utils.ContextUtils;                                                     </span>
<span class="8577850632926167445" onmouseenter="enter('8577850632926167445');" onmouseout="out('8577850632926167445');" style="">  60 import com.automattic.simplenote.utils.DisplayUtils;                                                     </span>
<span class="930019215389101465" onmouseenter="enter('930019215389101465');" onmouseout="out('930019215389101465');" style="">  61 import com.automattic.simplenote.utils.DrawableUtils;                                                    </span>
<span class="1327521140651609704" onmouseenter="enter('1327521140651609704');" onmouseout="out('1327521140651609704');" style="">  62 import com.automattic.simplenote.utils.MatchOffsetHighlighter;                                           </span>
<span class="6713747859106964949" onmouseenter="enter('6713747859106964949');" onmouseout="out('6713747859106964949');" style="">  63 import com.automattic.simplenote.utils.NetworkUtils;                                                     </span>
<span class="2290458949892536112" onmouseenter="enter('2290458949892536112');" onmouseout="out('2290458949892536112');" style="">  64 import com.automattic.simplenote.utils.NoteUtils;                                                        </span>
<span class="-7136497821822559876" onmouseenter="enter('-7136497821822559876');" onmouseout="out('-7136497821822559876');" style="">  65 import com.automattic.simplenote.utils.PrefUtils;                                                        </span>
<span class="2537926396801226048" onmouseenter="enter('2537926396801226048');" onmouseout="out('2537926396801226048');" style="">  66 import com.automattic.simplenote.utils.SimplenoteLinkify;                                                </span>
<span class="-42292328951391685" onmouseenter="enter('-42292328951391685');" onmouseout="out('-42292328951391685');" style="">  67 import com.automattic.simplenote.utils.SimplenoteMovementMethod;                                         </span>
<span class="13513923158165555" onmouseenter="enter('13513923158165555');" onmouseout="out('13513923158165555');" style="">  68 import com.automattic.simplenote.utils.SpaceTokenizer;                                                   </span>
<span class="-643769428942460504" onmouseenter="enter('-643769428942460504');" onmouseout="out('-643769428942460504');" style="">  69 import com.automattic.simplenote.utils.TagUtils;                                                         </span>
<span class="-4652171765784917488" onmouseenter="enter('-4652171765784917488');" onmouseout="out('-4652171765784917488');" style="">  70 import com.automattic.simplenote.utils.TagsMultiAutoCompleteTextView;                                    </span>
<span class="451633977271230846" onmouseenter="enter('451633977271230846');" onmouseout="out('451633977271230846');" style="">  71 import com.automattic.simplenote.utils.TagsMultiAutoCompleteTextView.OnTagAddedListener;                 </span>
<span class="3055903766206676561" onmouseenter="enter('3055903766206676561');" onmouseout="out('3055903766206676561');" style="">  72 import com.automattic.simplenote.utils.TextHighlighter;                                                  </span>
<span class="7305000128845659611" onmouseenter="enter('7305000128845659611');" onmouseout="out('7305000128845659611');" style="">  73 import com.automattic.simplenote.utils.ThemeUtils;                                                       </span>
<span class="-3457858113236631039" onmouseenter="enter('-3457858113236631039');" onmouseout="out('-3457858113236631039');" style="">  74 import com.automattic.simplenote.utils.WidgetUtils;                                                      </span>
<span class="4834384566534786428" onmouseenter="enter('4834384566534786428');" onmouseout="out('4834384566534786428');" style="">  75 import com.automattic.simplenote.widgets.SimplenoteEditText;                                             </span>
<span class="4924672443805777373" onmouseenter="enter('4924672443805777373');" onmouseout="out('4924672443805777373');" style="">  76 import com.google.android.material.chip.Chip;                                                            </span>
<span class="6530176725815500896" onmouseenter="enter('6530176725815500896');" onmouseout="out('6530176725815500896');" style="">  77 import com.google.android.material.chip.ChipGroup;                                                       </span>
<span class="-6749865676367010343" onmouseenter="enter('-6749865676367010343');" onmouseout="out('-6749865676367010343');" style="">  78 import com.google.android.material.snackbar.Snackbar;                                                    </span>
<span class="-8170925370861558125" onmouseenter="enter('-8170925370861558125');" onmouseout="out('-8170925370861558125');" style="">  79 import com.simperium.client.Bucket;                                                                      </span>
<span class="-8454203534157102839" onmouseenter="enter('-8454203534157102839');" onmouseout="out('-8454203534157102839');" style="">  80 import com.simperium.client.BucketObjectMissingException;                                                </span>
<span class="-6020507013779766735" onmouseenter="enter('-6020507013779766735');" onmouseout="out('-6020507013779766735');" style="">  81 import com.simperium.client.Query;                                                                       </span>
<span  style="">  82                                                                                                          </span>
<span class="-8692343821508153377" onmouseenter="enter('-8692343821508153377');" onmouseout="out('-8692343821508153377');" style="">  83 import java.lang.ref.WeakReference;                                                                      </span>
<span class="1562735530241225598" onmouseenter="enter('1562735530241225598');" onmouseout="out('1562735530241225598');" style="">  84 import java.util.Calendar;                                                                               </span>
<span  style="">  85                                                                                                          </span>
<span class="-3102294303099779792" onmouseenter="enter('-3102294303099779792');" onmouseout="out('-3102294303099779792');" style="">  86 import static com.automattic.simplenote.analytics.AnalyticsTracker.CATEGORY_NOTE;                        </span>
<span class="5242531748460347937" onmouseenter="enter('5242531748460347937');" onmouseout="out('5242531748460347937');" style="">  87 import static com.automattic.simplenote.analytics.AnalyticsTracker.Stat.EDITOR_CHECKLIST_INSERTED;       </span>
<span class="-3490868053375355616" onmouseenter="enter('-3490868053375355616');" onmouseout="out('-3490868053375355616');" style="">  88 import static com.automattic.simplenote.analytics.AnalyticsTracker.Stat.EDITOR_NOTE_CONTENT_SHARED;      </span>
<span class="-2121854313245668982" onmouseenter="enter('-2121854313245668982');" onmouseout="out('-2121854313245668982');" style="">  89 import static com.automattic.simplenote.analytics.AnalyticsTracker.Stat.EDITOR_NOTE_EDITED;              </span>
<span class="-6581780444010205945" onmouseenter="enter('-6581780444010205945');" onmouseout="out('-6581780444010205945');" style="">  90 import static com.automattic.simplenote.analytics.AnalyticsTracker.Stat.EDITOR_NOTE_PUBLISHED;           </span>
<span class="-9109271177878770606" onmouseenter="enter('-9109271177878770606');" onmouseout="out('-9109271177878770606');" style="">  91 import static com.automattic.simplenote.analytics.AnalyticsTracker.Stat.EDITOR_NOTE_UNPUBLISHED;         </span>
<span class="1895845895606351499" onmouseenter="enter('1895845895606351499');" onmouseout="out('1895845895606351499');" style="">  92 import static com.automattic.simplenote.analytics.AnalyticsTracker.Stat.EDITOR_TAG_ADDED;                </span>
<span class="-7938671928844888956" onmouseenter="enter('-7938671928844888956');" onmouseout="out('-7938671928844888956');" style="">  93 import static com.automattic.simplenote.analytics.AnalyticsTracker.Stat.EDITOR_TAG_REMOVED;              </span>
<span class="8057784740076816561" onmouseenter="enter('8057784740076816561');" onmouseout="out('8057784740076816561');" style="">  94 import static com.automattic.simplenote.utils.SearchTokenizer.SPACE;                                     </span>
<span class="-4405840676582391526" onmouseenter="enter('-4405840676582391526');" onmouseout="out('-4405840676582391526');" style="">  95 import static com.automattic.simplenote.utils.SimplenoteLinkify.SIMPLENOTE_LINK_PREFIX;                  </span>
<span  style="">  96                                                                                                          </span>
<span class="-5596461229958448202" onmouseenter="enter('-5596461229958448202');" onmouseout="out('-5596461229958448202');" style="">  97 public class NoteEditorFragment extends Fragment implements Bucket.Listener&lt;Note&gt;,                       </span>
<span class="-9099249676109797171" onmouseenter="enter('-9099249676109797171');" onmouseout="out('-9099249676109797171');" style="">  98         TextWatcher, OnTagAddedListener, View.OnFocusChangeListener,                                     </span>
<span class="-4114387936964500842" onmouseenter="enter('-4114387936964500842');" onmouseout="out('-4114387936964500842');" style="">  99         SimplenoteEditText.OnSelectionChangedListener,                                                   </span>
<span class="-5510788947576290679" onmouseenter="enter('-5510788947576290679');" onmouseout="out('-5510788947576290679');" style=""> 100         ShareBottomSheetDialog.ShareSheetListener,                                                       </span>
<span class="2293972252045109195" onmouseenter="enter('2293972252045109195');" onmouseout="out('2293972252045109195');" style=""> 101         HistoryBottomSheetDialog.HistorySheetListener,                                                   </span>
<span class="-712538187674189072" onmouseenter="enter('-712538187674189072');" onmouseout="out('-712538187674189072');" style=""> 102         SimplenoteEditText.OnCheckboxToggledListener {                                                   </span>
<span  style=""> 103                                                                                                          </span>
<span class="7313308760576274084" onmouseenter="enter('7313308760576274084');" onmouseout="out('7313308760576274084');" style=""> 104     public static final String ARG_IS_FROM_WIDGET = &quot;is_from_widget&quot;;                                    </span>
<span class="-4619625032881090052" onmouseenter="enter('-4619625032881090052');" onmouseout="out('-4619625032881090052');" style=""> 105     public static final String ARG_ITEM_ID = &quot;item_id&quot;;                                                  </span>
<span class="-7299684920632401552" onmouseenter="enter('-7299684920632401552');" onmouseout="out('-7299684920632401552');" style=""> 106     public static final String ARG_NEW_NOTE = &quot;new_note&quot;;                                                </span>
<span class="5570942911396170891" onmouseenter="enter('5570942911396170891');" onmouseout="out('5570942911396170891');" style=""> 107     public static final String ARG_MATCH_OFFSETS = &quot;match_offsets&quot;;                                      </span>
<span class="8145563106929735928" onmouseenter="enter('8145563106929735928');" onmouseout="out('8145563106929735928');" style=""> 108     public static final String ARG_MARKDOWN_ENABLED = &quot;markdown_enabled&quot;;                                </span>
<span class="-9204037548779502592" onmouseenter="enter('-9204037548779502592');" onmouseout="out('-9204037548779502592');" style=""> 109     public static final String ARG_PREVIEW_ENABLED = &quot;preview_enabled&quot;;                                  </span>
<span class="-4900097812038151447" onmouseenter="enter('-4900097812038151447');" onmouseout="out('-4900097812038151447');" style=""> 110     private static final String STATE_NOTE_ID = &quot;state_note_id&quot;;                                         </span>
<span class="8491452362607628076" onmouseenter="enter('8491452362607628076');" onmouseout="out('8491452362607628076');" style=""> 111     private static final int AUTOSAVE_DELAY_MILLIS = 2000;                                               </span>
<span class="6474488624255872222" onmouseenter="enter('6474488624255872222');" onmouseout="out('6474488624255872222');" style=""> 112     private static final int MAX_REVISIONS = 30;                                                         </span>
<span class="2597021995687752472" onmouseenter="enter('2597021995687752472');" onmouseout="out('2597021995687752472');" style=""> 113     private static final int PUBLISH_TIMEOUT = 20000;                                                    </span>
<span class="3616229628179044566" onmouseenter="enter('3616229628179044566');" onmouseout="out('3616229628179044566');" style=""> 114     private static final int HISTORY_TIMEOUT = 10000;                                                    </span>
<span class="-6846870049312317979" onmouseenter="enter('-6846870049312317979');" onmouseout="out('-6846870049312317979');" style=""> 115     private Note mNote;                                                                                  </span>
<span class="-567099590261614492" onmouseenter="enter('-567099590261614492');" onmouseout="out('-567099590261614492');" style=""> 116     private final Runnable mAutoSaveRunnable = new Runnable() {                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 117         @Override                                                                                        </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 118         public void run() {                                                                              </span>
<span class="-2186856349666885424" onmouseenter="enter('-2186856349666885424');" onmouseout="out('-2186856349666885424');" style=""> 119             saveAndSyncNote();                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 120         }                                                                                                </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 121     };                                                                                                   </span>
<span class="-7913886194286774922" onmouseenter="enter('-7913886194286774922');" onmouseout="out('-7913886194286774922');" style=""> 122     private Bucket&lt;Note&gt; mNotesBucket;                                                                   </span>
<span class="335650161029573145" onmouseenter="enter('335650161029573145');" onmouseout="out('335650161029573145');" style=""> 123     private View mRootView;                                                                              </span>
<span class="8292114391111638673" onmouseenter="enter('8292114391111638673');" onmouseout="out('8292114391111638673');" style=""> 124     private View mTagPadding;                                                                            </span>
<span class="6580801006778009663" onmouseenter="enter('6580801006778009663');" onmouseout="out('6580801006778009663');" style=""> 125     private SimplenoteEditText mContentEditText;                                                         </span>
<span class="-1116191624704212145" onmouseenter="enter('-1116191624704212145');" onmouseout="out('-1116191624704212145');" style=""> 126     private ChipGroup mTagChips;                                                                         </span>
<span class="7794609246836871312" onmouseenter="enter('7794609246836871312');" onmouseout="out('7794609246836871312');" style=""> 127     private TagsMultiAutoCompleteTextView mTagInput;                                                     </span>
<span class="6494121288462075344" onmouseenter="enter('6494121288462075344');" onmouseout="out('6494121288462075344');" style=""> 128     private Handler mAutoSaveHandler;                                                                    </span>
<span class="8783277907965445564" onmouseenter="enter('8783277907965445564');" onmouseout="out('8783277907965445564');" style=""> 129     private Handler mPublishTimeoutHandler;                                                              </span>
<span class="4217449185156868905" onmouseenter="enter('4217449185156868905');" onmouseout="out('4217449185156868905');" style=""> 130     private Handler mHistoryTimeoutHandler;                                                              </span>
<span class="-1776320876088405367" onmouseenter="enter('-1776320876088405367');" onmouseout="out('-1776320876088405367');" style=""> 131     private LinearLayout mPlaceholderView;                                                               </span>
<span class="-5862875858497045082" onmouseenter="enter('-5862875858497045082');" onmouseout="out('-5862875858497045082');" style=""> 132     private CursorAdapter mAutocompleteAdapter;                                                          </span>
<span class="-7523089573477153489" onmouseenter="enter('-7523089573477153489');" onmouseout="out('-7523089573477153489');" style=""> 133     private boolean mIsLoadingNote;                                                                      </span>
<span class="-721861736726211964" onmouseenter="enter('-721861736726211964');" onmouseout="out('-721861736726211964');" style=""> 134     private boolean mIsMarkdownEnabled;                                                                  </span>
<span class="5667351599274937983" onmouseenter="enter('5667351599274937983');" onmouseout="out('5667351599274937983');" style=""> 135     private boolean mIsPreviewEnabled;                                                                   </span>
<span class="1780690803770096596" onmouseenter="enter('1780690803770096596');" onmouseout="out('1780690803770096596');" style=""> 136     private boolean mShouldScrollToSearchMatch;                                                          </span>
<span class="7307228847460234411" onmouseenter="enter('7307228847460234411');" onmouseout="out('7307228847460234411');" style=""> 137     private ActionMode mActionMode;                                                                      </span>
<span class="6272698018239268533" onmouseenter="enter('6272698018239268533');" onmouseout="out('6272698018239268533');" style=""> 138     private MenuItem mChecklistMenuItem;                                                                 </span>
<span class="-801211553419280849" onmouseenter="enter('-801211553419280849');" onmouseout="out('-801211553419280849');" style=""> 139     private MenuItem mCopyMenuItem;                                                                      </span>
<span class="-8722853698202618925" onmouseenter="enter('-8722853698202618925');" onmouseout="out('-8722853698202618925');" style=""> 140     private MenuItem mInformationMenuItem;                                                               </span>
<span class="6754990951372191595" onmouseenter="enter('6754990951372191595');" onmouseout="out('6754990951372191595');" style=""> 141     private MenuItem mShareMenuItem;                                                                     </span>
<span class="-1934738222867341331" onmouseenter="enter('-1934738222867341331');" onmouseout="out('-1934738222867341331');" style=""> 142     private MenuItem mViewLinkMenuItem;                                                                  </span>
<span class="-3624836155172024592" onmouseenter="enter('-3624836155172024592');" onmouseout="out('-3624836155172024592');" style=""> 143     private String mLinkUrl;                                                                             </span>
<span class="-680149036339568713" onmouseenter="enter('-680149036339568713');" onmouseout="out('-680149036339568713');" style=""> 144     private String mLinkText;                                                                            </span>
<span class="-8355060532383088001" onmouseenter="enter('-8355060532383088001');" onmouseout="out('-8355060532383088001');" style=""> 145     private MatchOffsetHighlighter mHighlighter;                                                         </span>
<span class="-3046310933001836521" onmouseenter="enter('-3046310933001836521');" onmouseout="out('-3046310933001836521');" style=""> 146     private Drawable mBrowserIcon;                                                                       </span>
<span class="-2893651165769435735" onmouseenter="enter('-2893651165769435735');" onmouseout="out('-2893651165769435735');" style=""> 147     private Drawable mCallIcon;                                                                          </span>
<span class="-4798548703316944753" onmouseenter="enter('-4798548703316944753');" onmouseout="out('-4798548703316944753');" style=""> 148     private Drawable mCopyIcon;                                                                          </span>
<span class="6775927648012186278" onmouseenter="enter('6775927648012186278');" onmouseout="out('6775927648012186278');" style=""> 149     private Drawable mEmailIcon;                                                                         </span>
<span class="-3265647716576371737" onmouseenter="enter('-3265647716576371737');" onmouseout="out('-3265647716576371737');" style=""> 150     private Drawable mLinkIcon;                                                                          </span>
<span class="-2947594512272302462" onmouseenter="enter('-2947594512272302462');" onmouseout="out('-2947594512272302462');" style=""> 151     private Drawable mMapIcon;                                                                           </span>
<span class="-8263922286266999556" onmouseenter="enter('-8263922286266999556');" onmouseout="out('-8263922286266999556');" style=""> 152     private Drawable mShareIcon;                                                                         </span>
<span class="-7542236593744276396" onmouseenter="enter('-7542236593744276396');" onmouseout="out('-7542236593744276396');" style=""> 153     private MatchOffsetHighlighter.SpanFactory mMatchHighlighter;                                        </span>
<span class="2689815831275839045" onmouseenter="enter('2689815831275839045');" onmouseout="out('2689815831275839045');" style=""> 154     private String mMatchOffsets;                                                                        </span>
<span class="-7790101837861097441" onmouseenter="enter('-7790101837861097441');" onmouseout="out('-7790101837861097441');" style=""> 155     private int mCurrentCursorPosition;                                                                  </span>
<span class="6178043190004357016" onmouseenter="enter('6178043190004357016');" onmouseout="out('6178043190004357016');" style=""> 156     private HistoryBottomSheetDialog mHistoryBottomSheet;                                                </span>
<span class="-2764923775971952187" onmouseenter="enter('-2764923775971952187');" onmouseout="out('-2764923775971952187');" style=""> 157     private boolean mIsPaused;                                                                           </span>
<span class="-4741322818714001783" onmouseenter="enter('-4741322818714001783');" onmouseout="out('-4741322818714001783');" style=""> 158     private boolean mIsFromWidget;                                                                       </span>
<span  style=""> 159                                                                                                          </span>
<span class="-595864044689580029" onmouseenter="enter('-595864044689580029');" onmouseout="out('-595864044689580029');" style=""> 160     // Hides the history bottom sheet if no revisions are loaded                                         </span>
<span class="9136224915231079842" onmouseenter="enter('9136224915231079842');" onmouseout="out('9136224915231079842');" style=""> 161     private final Runnable mHistoryTimeoutRunnable = new Runnable() {                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 162         @Override                                                                                        </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 163         public void run() {                                                                              </span>
<span class="5514287417242355685" onmouseenter="enter('5514287417242355685');" onmouseout="out('5514287417242355685');" style=""> 164             if (!isAdded()) {                                                                            </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 165                 return;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 166             }                                                                                            </span>
<span  style=""> 167                                                                                                          </span>
<span class="5713980397306524156" onmouseenter="enter('5713980397306524156');" onmouseout="out('5713980397306524156');" style=""> 168             requireActivity().runOnUiThread(new Runnable() {                                             </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 169                 @Override                                                                                </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 170                 public void run() {                                                                      </span>
<span class="-3311389934398547914" onmouseenter="enter('-3311389934398547914');" onmouseout="out('-3311389934398547914');" style=""><abbr title=" 171                     if (mHistoryBottomSheet.getDialog() != null &amp;&amp; mHistoryBottomSheet.getDialog().isShowing() &amp;&amp; !mHistoryBottomSheet.isHistoryLoaded()) {"> 171                     if (mHistoryBottomSheet.getDialog() != null &amp;&amp; mHistoryBottomSheet.getDialog().isShow🔵</abbr></span>
<span class="-2599981510781765889" onmouseenter="enter('-2599981510781765889');" onmouseout="out('-2599981510781765889');" style=""> 172                         mHistoryBottomSheet.dismiss();                                                   </span>
<span class="-1949769614201595359" onmouseenter="enter('-1949769614201595359');" onmouseout="out('-1949769614201595359');" style=""> 173                         Toast.makeText(getActivity(), R.string.error_history, Toast.LENGTH_LONG).show(); </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 174                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 175                 }                                                                                        </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 176             });                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 177         }                                                                                                </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 178     };                                                                                                   </span>
<span class="-7982825583780013979" onmouseenter="enter('-7982825583780013979');" onmouseout="out('-7982825583780013979');" style=""> 179     private InfoBottomSheetDialog mInfoBottomSheet;                                                      </span>
<span class="3825770423127948234" onmouseenter="enter('3825770423127948234');" onmouseout="out('3825770423127948234');" style=""> 180     private ShareBottomSheetDialog mShareBottomSheet;                                                    </span>
<span class="9084056993766846780" onmouseenter="enter('9084056993766846780');" onmouseout="out('9084056993766846780');" style=""> 181     // Contextual action bar for dealing with links                                                      </span>
<span class="7674077006773948876" onmouseenter="enter('7674077006773948876');" onmouseout="out('7674077006773948876');" style=""> 182     private final ActionMode.Callback mActionModeCallback = new ActionMode.Callback() {                  </span>
<span class="-5830922032047880245" onmouseenter="enter('-5830922032047880245');" onmouseout="out('-5830922032047880245');" style=""> 183         // Called when the action mode is created; startActionMode() was called                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 184         @Override                                                                                        </span>
<span class="6869646826473679297" onmouseenter="enter('6869646826473679297');" onmouseout="out('6869646826473679297');" style=""> 185         public boolean onCreateActionMode(ActionMode mode, Menu menu) {                                  </span>
<span class="-5328486553851934265" onmouseenter="enter('-5328486553851934265');" onmouseout="out('-5328486553851934265');" style=""> 186             // Inflate a menu resource providing context menu items                                      </span>
<span class="8164139660214751060" onmouseenter="enter('8164139660214751060');" onmouseout="out('8164139660214751060');" style=""> 187             MenuInflater inflater = mode.getMenuInflater();                                              </span>
<span  style=""> 188                                                                                                          </span>
<span class="-1400051225095864167" onmouseenter="enter('-1400051225095864167');" onmouseout="out('-1400051225095864167');" style=""> 189             if (inflater != null) {                                                                      </span>
<span class="6552624979414277895" onmouseenter="enter('6552624979414277895');" onmouseout="out('6552624979414277895');" style=""> 190                 inflater.inflate(R.menu.view_link, menu);                                                </span>
<span class="1687703529546627770" onmouseenter="enter('1687703529546627770');" onmouseout="out('1687703529546627770');" style=""> 191                 mCopyMenuItem = menu.findItem(R.id.menu_copy);                                           </span>
<span class="-7121630790551700692" onmouseenter="enter('-7121630790551700692');" onmouseout="out('-7121630790551700692');" style=""> 192                 mShareMenuItem = menu.findItem(R.id.menu_share);                                         </span>
<span class="2045169504868185532" onmouseenter="enter('2045169504868185532');" onmouseout="out('2045169504868185532');" style=""> 193                 mViewLinkMenuItem = menu.findItem(R.id.menu_view_link);                                  </span>
<span class="4190298810187820509" onmouseenter="enter('4190298810187820509');" onmouseout="out('4190298810187820509');" style=""> 194                 mode.setTitle(getString(R.string.link));                                                 </span>
<span class="-2927630225150463376" onmouseenter="enter('-2927630225150463376');" onmouseout="out('-2927630225150463376');" style=""> 195                 mode.setTitleOptionalHint(false);                                                        </span>
<span  style=""> 196                                                                                                          </span>
<span class="-5146912340244450550" onmouseenter="enter('-5146912340244450550');" onmouseout="out('-5146912340244450550');" style=""> 197                 DrawableUtils.tintMenuWithAttribute(getActivity(), menu, R.attr.toolbarIconColor);       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 198             }                                                                                            </span>
<span  style=""> 199                                                                                                          </span>
<span class="2269582470475983092" onmouseenter="enter('2269582470475983092');" onmouseout="out('2269582470475983092');" style=""><abbr title=" 200             requireActivity().getWindow().setStatusBarColor(ThemeUtils.getColorFromAttribute(requireContext(), R.attr.mainBackgroundColor));"> 200             requireActivity().getWindow().setStatusBarColor(ThemeUtils.getColorFromAttribute(requireConte🔵</abbr></span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 201             return true;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 202         }                                                                                                </span>
<span  style=""> 203                                                                                                          </span>
<span class="-7885162724385925248" onmouseenter="enter('-7885162724385925248');" onmouseout="out('-7885162724385925248');" style=""> 204         // Called each time the action mode is shown. Always called after onCreateActionMode, but        </span>
<span class="6140331646129020842" onmouseenter="enter('6140331646129020842');" onmouseout="out('6140331646129020842');" style=""> 205         // may be called multiple times if the mode is invalidated.                                      </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 206         @Override                                                                                        </span>
<span class="5392123371105216364" onmouseenter="enter('5392123371105216364');" onmouseout="out('5392123371105216364');" style=""> 207         public boolean onPrepareActionMode(ActionMode mode, Menu menu) {                                 </span>
<span class="9220029862843236189" onmouseenter="enter('9220029862843236189');" onmouseout="out('9220029862843236189');" style=""> 208             return false; // Return false if nothing is done                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 209         }                                                                                                </span>
<span  style=""> 210                                                                                                          </span>
<span class="-918812678605329556" onmouseenter="enter('-918812678605329556');" onmouseout="out('-918812678605329556');" style=""> 211         // Called when the user selects a contextual menu item                                           </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 212         @Override                                                                                        </span>
<span class="816131742774025467" onmouseenter="enter('816131742774025467');" onmouseout="out('816131742774025467');" style=""> 213         public boolean onActionItemClicked(ActionMode mode, MenuItem item) {                             </span>
<span class="2068182408853392247" onmouseenter="enter('2068182408853392247');" onmouseout="out('2068182408853392247');" style=""> 214             switch (item.getItemId()) {                                                                  </span>
<span class="1241487664924667668" onmouseenter="enter('1241487664924667668');" onmouseout="out('1241487664924667668');" style=""> 215                 case R.id.menu_view_link:                                                                </span>
<span class="-6928924091126055668" onmouseenter="enter('-6928924091126055668');" onmouseout="out('-6928924091126055668');" style=""> 216                     if (mLinkText != null) {                                                             </span>
<span class="-3849773635172233058" onmouseenter="enter('-3849773635172233058');" onmouseout="out('-3849773635172233058');" style=""> 217                         if (mLinkText.startsWith(SIMPLENOTE_LINK_PREFIX)) {                              </span>
<span class="3123112009632250348" onmouseenter="enter('3123112009632250348');" onmouseout="out('3123112009632250348');" style=""><abbr title=" 218                             SimplenoteLinkify.openNote(requireActivity(), mLinkText.replace(SIMPLENOTE_LINK_PREFIX, &quot;&quot;));"> 218                             SimplenoteLinkify.openNote(requireActivity(), mLinkText.replace(SIMPLENOTE_LI🔵</abbr></span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 219                         } else {                                                                         </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 220                         try {                                                                            </span>
<span class="5138461002499295767" onmouseenter="enter('5138461002499295767');" onmouseout="out('5138461002499295767');" style=""> 221                                 BrowserUtils.launchBrowserOrShowError(requireContext(), mLinkText);      </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 222                         } catch (Exception e) {                                                          </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 223                             e.printStackTrace();                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 224                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 225                         }                                                                                </span>
<span  style=""> 226                                                                                                          </span>
<span class="-5985541663234456921" onmouseenter="enter('-5985541663234456921');" onmouseout="out('-5985541663234456921');" style=""> 227                         mode.finish(); // Action picked, so close the CAB                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 228                     }                                                                                    </span>
<span  style=""> 229                                                                                                          </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 230                     return true;                                                                         </span>
<span class="1323072004784584241" onmouseenter="enter('1323072004784584241');" onmouseout="out('1323072004784584241');" style=""> 231                 case R.id.menu_copy:                                                                     </span>
<span class="5917848124130151943" onmouseenter="enter('5917848124130151943');" onmouseout="out('5917848124130151943');" style=""> 232                     if (mLinkText != null &amp;&amp; getActivity() != null) {                                    </span>
<span class="-3995442483487827848" onmouseenter="enter('-3995442483487827848');" onmouseout="out('-3995442483487827848');" style=""> 233                         if (BrowserUtils.copyToClipboard(requireContext(), mLinkText)) {                 </span>
<span class="3795490233575843146" onmouseenter="enter('3795490233575843146');" onmouseout="out('3795490233575843146');" style=""> 234                             Snackbar.make(mRootView, R.string.link_copied, Snackbar.LENGTH_SHORT).show();</span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 235                         } else {                                                                         </span>
<span class="8359220226685626421" onmouseenter="enter('8359220226685626421');" onmouseout="out('8359220226685626421');" style=""><abbr title=" 236                             Snackbar.make(mRootView, R.string.link_copied_failure, Snackbar.LENGTH_SHORT).show();"> 236                             Snackbar.make(mRootView, R.string.link_copied_failure, Snackbar.LENGTH_SHORT)🔵</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 237                         }                                                                                </span>
<span  style=""> 238                                                                                                          </span>
<span class="5768223614092288606" onmouseenter="enter('5768223614092288606');" onmouseout="out('5768223614092288606');" style=""> 239                         mode.finish();                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 240                     }                                                                                    </span>
<span  style=""> 241                                                                                                          </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 242                     return true;                                                                         </span>
<span class="4712317589059090097" onmouseenter="enter('4712317589059090097');" onmouseout="out('4712317589059090097');" style=""> 243                 case R.id.menu_share:                                                                    </span>
<span class="-6928924091126055668" onmouseenter="enter('-6928924091126055668');" onmouseout="out('-6928924091126055668');" style=""> 244                     if (mLinkText != null) {                                                             </span>
<span class="8185075650085964623" onmouseenter="enter('8185075650085964623');" onmouseout="out('8185075650085964623');" style=""> 245                         showShare(mLinkText);                                                            </span>
<span class="5768223614092288606" onmouseenter="enter('5768223614092288606');" onmouseout="out('5768223614092288606');" style=""> 246                         mode.finish();                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 247                     }                                                                                    </span>
<span  style=""> 248                                                                                                          </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 249                     return true;                                                                         </span>
<span class="-8178136317704390296" onmouseenter="enter('-8178136317704390296');" onmouseout="out('-8178136317704390296');" style=""> 250                 default:                                                                                 </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 251                     return false;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 252             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 253         }                                                                                                </span>
<span  style=""> 254                                                                                                          </span>
<span class="2525157012953828009" onmouseenter="enter('2525157012953828009');" onmouseout="out('2525157012953828009');" style=""> 255         // Called when the user exits the action mode                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 256         @Override                                                                                        </span>
<span class="-2232977199830239129" onmouseenter="enter('-2232977199830239129');" onmouseout="out('-2232977199830239129');" style=""> 257         public void onDestroyActionMode(ActionMode mode) {                                               </span>
<span class="-1291529600191394909" onmouseenter="enter('-1291529600191394909');" onmouseout="out('-1291529600191394909');" style=""> 258             if (mActionMode != null) {                                                                   </span>
<span class="-4156109494689565575" onmouseenter="enter('-4156109494689565575');" onmouseout="out('-4156109494689565575');" style=""> 259                 mActionMode.setSubtitle(&quot;&quot;);                                                             </span>
<span class="291405596407736607" onmouseenter="enter('291405596407736607');" onmouseout="out('291405596407736607');" style=""> 260             mActionMode = null;                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 261             }                                                                                            </span>
<span  style=""> 262                                                                                                          </span>
<span class="-8355266079523609200" onmouseenter="enter('-8355266079523609200');" onmouseout="out('-8355266079523609200');" style=""> 263             new Handler().postDelayed(                                                                   </span>
<span class="4860439059348199630" onmouseenter="enter('4860439059348199630');" onmouseout="out('4860439059348199630');" style=""> 264                 new Runnable() {                                                                         </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 265                     @Override                                                                            </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 266                     public void run() {                                                                  </span>
<span class="-407723737955280968" onmouseenter="enter('-407723737955280968');" onmouseout="out('-407723737955280968');" style=""><abbr title=" 267                         requireActivity().getWindow().setStatusBarColor(getResources().getColor(android.R.color.transparent, requireActivity().getTheme()));"> 267                         requireActivity().getWindow().setStatusBarColor(getResources().getColor(android.R🔵</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 268                     }                                                                                    </span>
<span class="-4102417550988568311" onmouseenter="enter('-4102417550988568311');" onmouseout="out('-4102417550988568311');" style=""> 269                 },                                                                                       </span>
<span class="-4127758747219082725" onmouseenter="enter('-4127758747219082725');" onmouseout="out('-4127758747219082725');" style=""> 270                 requireContext().getResources().getInteger(android.R.integer.config_mediumAnimTime)      </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 271             );                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 272         }                                                                                                </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 273     };                                                                                                   </span>
<span class="-2321350652617580771" onmouseenter="enter('-2321350652617580771');" onmouseout="out('-2321350652617580771');" style=""> 274     private Snackbar mPublishingSnackbar;                                                                </span>
<span class="3063974407169104073" onmouseenter="enter('3063974407169104073');" onmouseout="out('3063974407169104073');" style=""> 275     private boolean mHideActionOnSuccess;                                                                </span>
<span class="1686976550776889109" onmouseenter="enter('1686976550776889109');" onmouseout="out('1686976550776889109');" style=""> 276     // Resets note publish status if Simperium never returned the new publish status                     </span>
<span class="4037453836709826519" onmouseenter="enter('4037453836709826519');" onmouseout="out('4037453836709826519');" style=""> 277     private final Runnable mPublishTimeoutRunnable = new Runnable() {                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 278         @Override                                                                                        </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 279         public void run() {                                                                              </span>
<span class="6112154992837754036" onmouseenter="enter('6112154992837754036');" onmouseout="out('6112154992837754036');" style=""> 280             if (!isAdded()) return;                                                                      </span>
<span  style=""> 281                                                                                                          </span>
<span class="5713980397306524156" onmouseenter="enter('5713980397306524156');" onmouseout="out('5713980397306524156');" style=""> 282             requireActivity().runOnUiThread(new Runnable() {                                             </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 283                 @Override                                                                                </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 284                 public void run() {                                                                      </span>
<span  style=""> 285                                                                                                          </span>
<span class="-6752199236124778161" onmouseenter="enter('-6752199236124778161');" onmouseout="out('-6752199236124778161');" style=""> 286                     mNote.setPublished(!mNote.isPublished());                                            </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style=""> 287                     mNote.save();                                                                        </span>
<span  style=""> 288                                                                                                          </span>
<span class="7513447915538188553" onmouseenter="enter('7513447915538188553');" onmouseout="out('7513447915538188553');" style=""> 289                     updatePublishedState(false);                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 290                 }                                                                                        </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 291             });                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 292         }                                                                                                </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 293     };                                                                                                   </span>
<span class="-3565365231364209094" onmouseenter="enter('-3565365231364209094');" onmouseout="out('-3565365231364209094');" style=""> 294     private NoteMarkdownFragment mNoteMarkdownFragment;                                                  </span>
<span class="8334835640808763040" onmouseenter="enter('8334835640808763040');" onmouseout="out('8334835640808763040');" style=""> 295     private String mCss;                                                                                 </span>
<span class="2417381421481423525" onmouseenter="enter('2417381421481423525');" onmouseout="out('2417381421481423525');" style=""> 296     private WebView mMarkdown;                                                                           </span>
<span  style=""> 297                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 298     /**                                                                                                  </span>
<span class="7780585517980788373" onmouseenter="enter('7780585517980788373');" onmouseout="out('7780585517980788373');" style=""> 299      * Mandatory empty constructor for the fragment manager to instantiate the                           </span>
<span class="7130060501227883159" onmouseenter="enter('7130060501227883159');" onmouseout="out('7130060501227883159');" style=""> 300      * fragment (e.g. upon screen orientation changes).                                                  </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 301      */                                                                                                  </span>
<span class="2055429757813344166" onmouseenter="enter('2055429757813344166');" onmouseout="out('2055429757813344166');" style=""> 302     public NoteEditorFragment() {                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 303     }                                                                                                    </span>
<span  style=""> 304                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 305     @Override                                                                                            </span>
<span class="2351026872416697132" onmouseenter="enter('2351026872416697132');" onmouseout="out('2351026872416697132');" style=""> 306     public void onCreate(Bundle savedInstanceState) {                                                    </span>
<span class="8760898167212384157" onmouseenter="enter('8760898167212384157');" onmouseout="out('8760898167212384157');" style=""> 307         super.onCreate(savedInstanceState);                                                              </span>
<span class="-8622194682109655372" onmouseenter="enter('-8622194682109655372');" onmouseout="out('-8622194682109655372');" style=""> 308         AppLog.add(Type.NETWORK, NetworkUtils.getNetworkInfo(requireContext()));                         </span>
<span class="4067704072097909993" onmouseenter="enter('4067704072097909993');" onmouseout="out('4067704072097909993');" style=""> 309         AppLog.add(Type.SCREEN, &quot;Created (NoteEditorFragment)&quot;);                                         </span>
<span class="-7986434609852753971" onmouseenter="enter('-7986434609852753971');" onmouseout="out('-7986434609852753971');" style=""> 310         mInfoBottomSheet = new InfoBottomSheetDialog(this);                                              </span>
<span class="-3585171833526124401" onmouseenter="enter('-3585171833526124401');" onmouseout="out('-3585171833526124401');" style=""> 311         mShareBottomSheet = new ShareBottomSheetDialog(this, this);                                      </span>
<span class="8727018902564285339" onmouseenter="enter('8727018902564285339');" onmouseout="out('8727018902564285339');" style=""> 312         mHistoryBottomSheet = new HistoryBottomSheetDialog(this, this);                                  </span>
<span  style=""> 313                                                                                                          </span>
<span class="7015772157047139063" onmouseenter="enter('7015772157047139063');" onmouseout="out('7015772157047139063');" style=""> 314         Simplenote currentApp = (Simplenote) requireActivity().getApplication();                         </span>
<span class="3464165486447434608" onmouseenter="enter('3464165486447434608');" onmouseout="out('3464165486447434608');" style=""> 315         mNotesBucket = currentApp.getNotesBucket();                                                      </span>
<span  style=""> 316                                                                                                          </span>
<span class="-5396295556438155472" onmouseenter="enter('-5396295556438155472');" onmouseout="out('-5396295556438155472');" style=""><abbr title=" 317         mCallIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_call_white_24dp, R.attr.actionModeTextColor);"> 317         mCallIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_call_white_24dp,🔵</abbr></span>
<span class="-6467507895043748101" onmouseenter="enter('-6467507895043748101');" onmouseout="out('-6467507895043748101');" style=""><abbr title=" 318         mEmailIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_email_24dp, R.attr.actionModeTextColor);"> 318         mEmailIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_email_24dp, R.a🔵</abbr></span>
<span class="467194819286006014" onmouseenter="enter('467194819286006014');" onmouseout="out('467194819286006014');" style=""><abbr title=" 319         mLinkIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_note_24dp, R.attr.actionModeTextColor);"> 319         mLinkIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_note_24dp, R.att🔵</abbr></span>
<span class="439472828334727129" onmouseenter="enter('439472828334727129');" onmouseout="out('439472828334727129');" style=""><abbr title=" 320         mMapIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_map_24dp, R.attr.actionModeTextColor);"> 320         mMapIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_map_24dp, R.attr.🔵</abbr></span>
<span class="6692132481762191849" onmouseenter="enter('6692132481762191849');" onmouseout="out('6692132481762191849');" style=""><abbr title=" 321         mBrowserIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_browser_24dp, R.attr.actionModeTextColor);"> 321         mBrowserIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_browser_24dp,🔵</abbr></span>
<span class="-1469196158673197606" onmouseenter="enter('-1469196158673197606');" onmouseout="out('-1469196158673197606');" style=""><abbr title=" 322         mCopyIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_copy_24dp, R.attr.actionModeTextColor);"> 322         mCopyIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_copy_24dp, R.att🔵</abbr></span>
<span class="2974983401105131042" onmouseenter="enter('2974983401105131042');" onmouseout="out('2974983401105131042');" style=""><abbr title=" 323         mShareIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_share_24dp, R.attr.actionModeTextColor);"> 323         mShareIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_share_24dp, R.a🔵</abbr></span>
<span  style=""> 324                                                                                                          </span>
<span class="-7557436274459739944" onmouseenter="enter('-7557436274459739944');" onmouseout="out('-7557436274459739944');" style=""> 325         mAutoSaveHandler = new Handler();                                                                </span>
<span class="5311700283685025064" onmouseenter="enter('5311700283685025064');" onmouseout="out('5311700283685025064');" style=""> 326         mPublishTimeoutHandler = new Handler();                                                          </span>
<span class="-5335062074040604305" onmouseenter="enter('-5335062074040604305');" onmouseout="out('-5335062074040604305');" style=""> 327         mHistoryTimeoutHandler = new Handler();                                                          </span>
<span  style=""> 328                                                                                                          </span>
<span class="-7210994120079343670" onmouseenter="enter('-7210994120079343670');" onmouseout="out('-7210994120079343670');" style=""> 329         mMatchHighlighter = new TextHighlighter(requireActivity(),                                       </span>
<span class="5690198221529347900" onmouseenter="enter('5690198221529347900');" onmouseout="out('5690198221529347900');" style=""><abbr title=" 330                 R.attr.editorSearchHighlightForegroundColor, R.attr.editorSearchHighlightBackgroundColor);"> 330                 R.attr.editorSearchHighlightForegroundColor, R.attr.editorSearchHighlightBackgroundColor)🔵</abbr></span>
<span class="-2796700407695620291" onmouseenter="enter('-2796700407695620291');" onmouseout="out('-2796700407695620291');" style=""> 331         mAutocompleteAdapter = new CursorAdapter(getActivity(), null, 0x0) {                             </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 332             @Override                                                                                    </span>
<span class="5082230411214880762" onmouseenter="enter('5082230411214880762');" onmouseout="out('5082230411214880762');" style=""> 333             public View newView(Context context, Cursor cursor, ViewGroup parent) {                      </span>
<span class="-7341849400851650995" onmouseenter="enter('-7341849400851650995');" onmouseout="out('-7341849400851650995');" style=""> 334                 Activity activity = (Activity) context;                                                  </span>
<span class="-4259990117100818562" onmouseenter="enter('-4259990117100818562');" onmouseout="out('-4259990117100818562');" style=""> 335                 if (activity == null) return null;                                                       </span>
<span class="-3314008061858345993" onmouseenter="enter('-3314008061858345993');" onmouseout="out('-3314008061858345993');" style=""> 336                 return activity.getLayoutInflater().inflate(R.layout.tag_autocomplete_list_item, null);  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 337             }                                                                                            </span>
<span  style=""> 338                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 339             @Override                                                                                    </span>
<span class="19024103499623332" onmouseenter="enter('19024103499623332');" onmouseout="out('19024103499623332');" style=""> 340             public void bindView(View view, Context context, Cursor cursor) {                            </span>
<span class="1800045997788095368" onmouseenter="enter('1800045997788095368');" onmouseout="out('1800045997788095368');" style=""> 341                 TextView textView = (TextView) view;                                                     </span>
<span class="6731261465219202848" onmouseenter="enter('6731261465219202848');" onmouseout="out('6731261465219202848');" style=""> 342                 textView.setText(convertToString(cursor));                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 343             }                                                                                            </span>
<span  style=""> 344                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 345             @Override                                                                                    </span>
<span class="-8397701079695881614" onmouseenter="enter('-8397701079695881614');" onmouseout="out('-8397701079695881614');" style=""> 346             public CharSequence convertToString(Cursor cursor) {                                         </span>
<span class="-7149458698442797769" onmouseenter="enter('-7149458698442797769');" onmouseout="out('-7149458698442797769');" style=""> 347                 return cursor.getString(cursor.getColumnIndex(Tag.NAME_PROPERTY));                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 348             }                                                                                            </span>
<span  style=""> 349                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 350             @Override                                                                                    </span>
<span class="-6792310640715402890" onmouseenter="enter('-6792310640715402890');" onmouseout="out('-6792310640715402890');" style=""> 351             public Cursor runQueryOnBackgroundThread(CharSequence filter) {                              </span>
<span class="-5071525869541290984" onmouseenter="enter('-5071525869541290984');" onmouseout="out('-5071525869541290984');" style=""> 352                 Activity activity = getActivity();                                                       </span>
<span class="-4259990117100818562" onmouseenter="enter('-4259990117100818562');" onmouseout="out('-4259990117100818562');" style=""> 353                 if (activity == null) return null;                                                       </span>
<span class="9016693485500608067" onmouseenter="enter('9016693485500608067');" onmouseout="out('9016693485500608067');" style=""> 354                 Simplenote application = (Simplenote) activity.getApplication();                         </span>
<span class="-288329532637656436" onmouseenter="enter('-288329532637656436');" onmouseout="out('-288329532637656436');" style=""> 355                 Query&lt;Tag&gt; query = application.getTagsBucket().query();                                  </span>
<span class="-1263658484466254954" onmouseenter="enter('-1263658484466254954');" onmouseout="out('-1263658484466254954');" style=""> 356                 // make the tag name available to the cursor                                             </span>
<span class="5748018636045801946" onmouseenter="enter('5748018636045801946');" onmouseout="out('5748018636045801946');" style=""> 357                 query.include(Tag.NAME_PROPERTY);                                                        </span>
<span class="-7615810455976629564" onmouseenter="enter('-7615810455976629564');" onmouseout="out('-7615810455976629564');" style=""> 358                 // sort the tags by their names                                                          </span>
<span class="5674220988188306819" onmouseenter="enter('5674220988188306819');" onmouseout="out('5674220988188306819');" style=""> 359                 query.order(Tag.NAME_PROPERTY);                                                          </span>
<span class="8185275162074884971" onmouseenter="enter('8185275162074884971');" onmouseout="out('8185275162074884971');" style=""> 360                 // if there&#x27;s a filter string find only matching tag names                               </span>
<span class="-2390759895253291766" onmouseenter="enter('-2390759895253291766');" onmouseout="out('-2390759895253291766');" style=""> 361                 if (filter != null)                                                                      </span>
<span class="-8675928632322864405" onmouseenter="enter('-8675928632322864405');" onmouseout="out('-8675928632322864405');" style=""><abbr title=" 362                     query.where(Tag.NAME_PROPERTY, Query.ComparisonType.LIKE, String.format(&quot;%s%%&quot;, filter));"> 362                     query.where(Tag.NAME_PROPERTY, Query.ComparisonType.LIKE, String.format(&quot;%s%%&quot;, filte🔵</abbr></span>
<span class="8392918727668200780" onmouseenter="enter('8392918727668200780');" onmouseout="out('8392918727668200780');" style=""> 363                 return query.execute();                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 364             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 365         };                                                                                               </span>
<span  style=""> 366                                                                                                          </span>
<span class="-2915955960672646870" onmouseenter="enter('-2915955960672646870');" onmouseout="out('-2915955960672646870');" style=""> 367         WidgetUtils.updateNoteWidgets(requireActivity().getApplicationContext());                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 368     }                                                                                                    </span>
<span  style=""> 369                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 370     @Override                                                                                            </span>
<span class="-3764996828666781026" onmouseenter="enter('-3764996828666781026');" onmouseout="out('-3764996828666781026');" style=""><abbr title=" 371     public View onCreateView(@NonNull LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {"> 371     public View onCreateView(@NonNull LayoutInflater inflater, ViewGroup container, Bundle savedInstanceS🔵</abbr></span>
<span class="3579130562560764282" onmouseenter="enter('3579130562560764282');" onmouseout="out('3579130562560764282');" style=""> 372         mRootView = inflater.inflate(R.layout.fragment_note_editor, container, false);                   </span>
<span class="-4779369533477417305" onmouseenter="enter('-4779369533477417305');" onmouseout="out('-4779369533477417305');" style=""> 373         mContentEditText = mRootView.findViewById(R.id.note_content);                                    </span>
<span class="-2924083774161461664" onmouseenter="enter('-2924083774161461664');" onmouseout="out('-2924083774161461664');" style=""> 374         mContentEditText.addOnSelectionChangedListener(this);                                            </span>
<span class="5354424100413888199" onmouseenter="enter('5354424100413888199');" onmouseout="out('5354424100413888199');" style=""> 375         mContentEditText.setOnCheckboxToggledListener(this);                                             </span>
<span class="4799293943910864448" onmouseenter="enter('4799293943910864448');" onmouseout="out('4799293943910864448');" style=""> 376         mContentEditText.setMovementMethod(SimplenoteMovementMethod.getInstance());                      </span>
<span class="-7684087958922635100" onmouseenter="enter('-7684087958922635100');" onmouseout="out('-7684087958922635100');" style=""> 377         mContentEditText.setOnFocusChangeListener(this);                                                 </span>
<span class="7906960005192148215" onmouseenter="enter('7906960005192148215');" onmouseout="out('7906960005192148215');" style=""><abbr title=" 378         mContentEditText.setTextSize(TypedValue.COMPLEX_UNIT_SP, PrefUtils.getFontSize(requireContext()));"> 378         mContentEditText.setTextSize(TypedValue.COMPLEX_UNIT_SP, PrefUtils.getFontSize(requireContext()))🔵</abbr></span>
<span class="-8410945612023549246" onmouseenter="enter('-8410945612023549246');" onmouseout="out('-8410945612023549246');" style=""> 379         mTagInput = mRootView.findViewById(R.id.tag_input);                                              </span>
<span class="-8520636764026895045" onmouseenter="enter('-8520636764026895045');" onmouseout="out('-8520636764026895045');" style=""> 380         mTagInput.setDropDownBackgroundResource(R.drawable.bg_list_popup);                               </span>
<span class="-8046888072996277100" onmouseenter="enter('-8046888072996277100');" onmouseout="out('-8046888072996277100');" style=""> 381         mTagInput.setTokenizer(new SpaceTokenizer());                                                    </span>
<span class="8277910060096767493" onmouseenter="enter('8277910060096767493');" onmouseout="out('8277910060096767493');" style=""> 382         mTagInput.setOnFocusChangeListener(this);                                                        </span>
<span class="9064951361673299699" onmouseenter="enter('9064951361673299699');" onmouseout="out('9064951361673299699');" style=""> 383         mTagChips = mRootView.findViewById(R.id.tag_chips);                                              </span>
<span class="-8852013276583646600" onmouseenter="enter('-8852013276583646600');" onmouseout="out('-8852013276583646600');" style=""> 384         mTagPadding = mRootView.findViewById(R.id.tag_padding);                                          </span>
<span class="6080374810605667863" onmouseenter="enter('6080374810605667863');" onmouseout="out('6080374810605667863');" style=""> 385         mHighlighter = new MatchOffsetHighlighter(mMatchHighlighter, mContentEditText);                  </span>
<span class="2946335853320733423" onmouseenter="enter('2946335853320733423');" onmouseout="out('2946335853320733423');" style=""> 386         mPlaceholderView = mRootView.findViewById(R.id.placeholder);                                     </span>
<span  style=""> 387                                                                                                          </span>
<span class="2767702191472733500" onmouseenter="enter('2767702191472733500');" onmouseout="out('2767702191472733500');" style=""> 388         if (DisplayUtils.isLargeScreenLandscape(getActivity()) &amp;&amp; mNote == null) {                       </span>
<span class="-5306578928333558235" onmouseenter="enter('-5306578928333558235');" onmouseout="out('-5306578928333558235');" style=""> 389             mPlaceholderView.setVisibility(View.VISIBLE);                                                </span>
<span class="-8532471920650411447" onmouseenter="enter('-8532471920650411447');" onmouseout="out('-8532471920650411447');" style=""> 390             requireActivity().invalidateOptionsMenu();                                                   </span>
<span class="-5966136890047999161" onmouseenter="enter('-5966136890047999161');" onmouseout="out('-5966136890047999161');" style=""> 391             mMarkdown = mRootView.findViewById(R.id.markdown);                                           </span>
<span class="7598536375028459133" onmouseenter="enter('7598536375028459133');" onmouseout="out('7598536375028459133');" style=""> 392 &lt;&lt;&lt;&lt;&lt;&lt;&lt; MINE                                                                                             </span>
<span class="-5122207664605231942" onmouseenter="enter('-5122207664605231942');" onmouseout="out('-5122207664605231942');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"><abbr title=" 393             mCss = ContextUtils.readCssFile(requireContext(), ThemeUtils.getCssFromStyle(requireContext()));"> 393             mCss = ContextUtils.readCssFile(requireContext(), ThemeUtils.getCssFromStyle(requireContext()🔵</abbr></span>
<span class="7991106586064342212" onmouseenter="enter('7991106586064342212');" onmouseout="out('7991106586064342212');" style=""> 394 ||||||| BASE                                                                                             </span>
<span class="4171573222855619135" onmouseenter="enter('4171573222855619135');" onmouseout="out('4171573222855619135');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 395             mCss = ThemeUtils.isLightTheme(requireContext())                                             </span>
<span class="2330250883811648743" onmouseenter="enter('2330250883811648743');" onmouseout="out('2330250883811648743');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 396                     ? ContextUtils.readCssFile(requireContext(), &quot;light.css&quot;)                            </span>
<span class="4652247646087549288" onmouseenter="enter('4652247646087549288');" onmouseout="out('4652247646087549288');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 397                     : ContextUtils.readCssFile(requireContext(), &quot;dark.css&quot;);                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 398         }                                                                                                </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 399                                                                                                          </span>
<span class="3045371367152506055" onmouseenter="enter('3045371367152506055');" onmouseout="out('3045371367152506055');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 400         mTagInput.setAdapter(mAutocompleteAdapter);                                                      </span>
<span class="-512438581163180757" onmouseenter="enter('-512438581163180757');" onmouseout="out('-512438581163180757');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 401         Bundle arguments = getArguments();                                                               </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 402                                                                                                          </span>
<span class="5652609996770636291" onmouseenter="enter('5652609996770636291');" onmouseout="out('5652609996770636291');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 403         if (arguments != null &amp;&amp; arguments.containsKey(ARG_ITEM_ID)) {                                   </span>
<span class="592168733134676120" onmouseenter="enter('592168733134676120');" onmouseout="out('592168733134676120');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 404             // Load note if we were passed a note Id                                                     </span>
<span class="-30854459346766710" onmouseenter="enter('-30854459346766710');" onmouseout="out('-30854459346766710');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 405             String key = arguments.getString(ARG_ITEM_ID);                                               </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 406                                                                                                          </span>
<span class="9138949033848867696" onmouseenter="enter('9138949033848867696');" onmouseout="out('9138949033848867696');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 407             if (arguments.containsKey(ARG_MATCH_OFFSETS)) {                                              </span>
<span class="-1831707694683903303" onmouseenter="enter('-1831707694683903303');" onmouseout="out('-1831707694683903303');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 408                 mMatchOffsets = arguments.getString(ARG_MATCH_OFFSETS);                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 409             }                                                                                            </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 410                                                                                                          </span>
<span class="-5471626349746072894" onmouseenter="enter('-5471626349746072894');" onmouseout="out('-5471626349746072894');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 411             mIsFromWidget = arguments.getBoolean(ARG_IS_FROM_WIDGET);                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 412                                                                                                          </span>
<span class="7955966257819193736" onmouseenter="enter('7955966257819193736');" onmouseout="out('7955966257819193736');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 413             if (mIsFromWidget) {                                                                         </span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style=""> 414 =======                                                                                                  </span>
<span class="2573488642866082316" onmouseenter="enter('2573488642866082316');" onmouseout="out('2573488642866082316');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 415             mMarkdown.setWebViewClient(                                                                  </span>
<span class="6636825780888069899" onmouseenter="enter('6636825780888069899');" onmouseout="out('6636825780888069899');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 416                 new WebViewClient() {                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 417                     @Override                                                                            </span>
<span class="-9087834862940521077" onmouseenter="enter('-9087834862940521077');" onmouseout="out('-9087834862940521077');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 418                     public boolean shouldOverrideUrlLoading(WebView view, WebResourceRequest request){   </span>
<span class="-5381905371386971985" onmouseenter="enter('-5381905371386971985');" onmouseout="out('-5381905371386971985');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 419                         String url = request.getUrl().toString();                                        </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 420                                                                                                          </span>
<span class="-4642998270142287952" onmouseenter="enter('-4642998270142287952');" onmouseout="out('-4642998270142287952');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 421                         if (url.startsWith(SimplenoteLinkify.SIMPLENOTE_LINK_PREFIX)){                   </span>
<span class="1249235461949968343" onmouseenter="enter('1249235461949968343');" onmouseout="out('1249235461949968343');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"><abbr title=" 422                             SimplenoteLinkify.openNote(requireActivity(), url.replace(SIMPLENOTE_LINK_PREFIX, &quot;&quot;));"> 422                             SimplenoteLinkify.openNote(requireActivity(), url.replace(SIMPLENOTE_LINK_PRE🔵</abbr></span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 423                         } else {                                                                         </span>
<span class="4407241748321738249" onmouseenter="enter('4407241748321738249');" onmouseout="out('4407241748321738249');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 424                             BrowserUtils.launchBrowserOrShowError(requireContext(), url);                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 425                         }                                                                                </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 426                                                                                                          </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 427                         return true;                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 428                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 429                 }                                                                                        </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 430             );                                                                                           </span>
<span class="4171573222855619135" onmouseenter="enter('4171573222855619135');" onmouseout="out('4171573222855619135');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 431             mCss = ThemeUtils.isLightTheme(requireContext())                                             </span>
<span class="2330250883811648743" onmouseenter="enter('2330250883811648743');" onmouseout="out('2330250883811648743');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 432                 ? ContextUtils.readCssFile(requireContext(), &quot;light.css&quot;)                                </span>
<span class="4652247646087549288" onmouseenter="enter('4652247646087549288');" onmouseout="out('4652247646087549288');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 433                 : ContextUtils.readCssFile(requireContext(), &quot;dark.css&quot;);                                </span>
<span class="-5027112130205478640" onmouseenter="enter('-5027112130205478640');" onmouseout="out('-5027112130205478640');" style=""> 434 &gt;&gt;&gt;&gt;&gt;&gt;&gt; YOURS                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 435         }                                                                                                </span>
<span  style=""> 436                                                                                                          </span>
<span class="3045371367152506055" onmouseenter="enter('3045371367152506055');" onmouseout="out('3045371367152506055');" style=""> 437         mTagInput.setAdapter(mAutocompleteAdapter);                                                      </span>
<span class="-512438581163180757" onmouseenter="enter('-512438581163180757');" onmouseout="out('-512438581163180757');" style=""> 438         Bundle arguments = getArguments();                                                               </span>
<span  style=""> 439                                                                                                          </span>
<span class="5652609996770636291" onmouseenter="enter('5652609996770636291');" onmouseout="out('5652609996770636291');" style=""> 440         if (arguments != null &amp;&amp; arguments.containsKey(ARG_ITEM_ID)) {                                   </span>
<span class="592168733134676120" onmouseenter="enter('592168733134676120');" onmouseout="out('592168733134676120');" style=""> 441             // Load note if we were passed a note Id                                                     </span>
<span class="-30854459346766710" onmouseenter="enter('-30854459346766710');" onmouseout="out('-30854459346766710');" style=""> 442             String key = arguments.getString(ARG_ITEM_ID);                                               </span>
<span  style=""> 443                                                                                                          </span>
<span class="9138949033848867696" onmouseenter="enter('9138949033848867696');" onmouseout="out('9138949033848867696');" style=""> 444             if (arguments.containsKey(ARG_MATCH_OFFSETS)) {                                              </span>
<span class="-1831707694683903303" onmouseenter="enter('-1831707694683903303');" onmouseout="out('-1831707694683903303');" style=""> 445                 mMatchOffsets = arguments.getString(ARG_MATCH_OFFSETS);                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 446             }                                                                                            </span>
<span  style=""> 447                                                                                                          </span>
<span class="-5471626349746072894" onmouseenter="enter('-5471626349746072894');" onmouseout="out('-5471626349746072894');" style=""> 448             mIsFromWidget = arguments.getBoolean(ARG_IS_FROM_WIDGET);                                    </span>
<span  style=""> 449                                                                                                          </span>
<span class="7955966257819193736" onmouseenter="enter('7955966257819193736');" onmouseout="out('7955966257819193736');" style=""> 450             if (mIsFromWidget) {                                                                         </span>
<span class="-5617995102329158939" onmouseenter="enter('-5617995102329158939');" onmouseout="out('-5617995102329158939');" style=""> 451                 AppLog.add(Type.ACTION, &quot;Opened from widget (NoteEditorFragment)&quot;);                      </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 452             } else {                                                                                     </span>
<span class="8953265153297736425" onmouseenter="enter('8953265153297736425');" onmouseout="out('8953265153297736425');" style=""> 453                 AppLog.add(Type.ACTION, &quot;Opened from list (NoteEditorFragment)&quot;);                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 454             }                                                                                            </span>
<span  style=""> 455                                                                                                          </span>
<span class="2821548101564163251" onmouseenter="enter('2821548101564163251');" onmouseout="out('2821548101564163251');" style=""> 456             new LoadNoteTask(this).executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR, key);               </span>
<span class="-7018322201047939593" onmouseenter="enter('-7018322201047939593');" onmouseout="out('-7018322201047939593');" style=""> 457         } else if (DisplayUtils.isLargeScreenLandscape(getActivity()) &amp;&amp; savedInstanceState != null) {   </span>
<span class="-5586601087309648352" onmouseenter="enter('-5586601087309648352');" onmouseout="out('-5586601087309648352');" style=""> 458             // Restore selected note when in dual pane mode                                              </span>
<span class="-6627973434382116830" onmouseenter="enter('-6627973434382116830');" onmouseout="out('-6627973434382116830');" style=""> 459             String noteId = savedInstanceState.getString(STATE_NOTE_ID);                                 </span>
<span  style=""> 460                                                                                                          </span>
<span class="3431348253079949637" onmouseenter="enter('3431348253079949637');" onmouseout="out('3431348253079949637');" style=""> 461             if (noteId != null) {                                                                        </span>
<span class="6131131744168781054" onmouseenter="enter('6131131744168781054');" onmouseout="out('6131131744168781054');" style=""> 462                 setNote(noteId);                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 463             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 464         }                                                                                                </span>
<span  style=""> 465                                                                                                          </span>
<span class="-6084360450426647292" onmouseenter="enter('-6084360450426647292');" onmouseout="out('-6084360450426647292');" style=""> 466         ViewTreeObserver viewTreeObserver = mContentEditText.getViewTreeObserver();                      </span>
<span class="5566036156549578856" onmouseenter="enter('5566036156549578856');" onmouseout="out('5566036156549578856');" style=""> 467         viewTreeObserver.addOnGlobalLayoutListener(new ViewTreeObserver.OnGlobalLayoutListener() {       </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 468             @Override                                                                                    </span>
<span class="7412300164717447449" onmouseenter="enter('7412300164717447449');" onmouseout="out('7412300164717447449');" style=""> 469             public void onGlobalLayout() {                                                               </span>
<span class="-1303582393563450897" onmouseenter="enter('-1303582393563450897');" onmouseout="out('-1303582393563450897');" style=""> 470                 // If a note was loaded with search matches, scroll to the first match in the editor     </span>
<span class="-6404251855291734375" onmouseenter="enter('-6404251855291734375');" onmouseout="out('-6404251855291734375');" style=""> 471                 if (mShouldScrollToSearchMatch &amp;&amp; mMatchOffsets != null) {                               </span>
<span class="5514287417242355685" onmouseenter="enter('5514287417242355685');" onmouseout="out('5514287417242355685');" style=""> 472                     if (!isAdded()) {                                                                    </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 473                         return;                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 474                     }                                                                                    </span>
<span  style=""> 475                                                                                                          </span>
<span class="-5871446470780506147" onmouseenter="enter('-5871446470780506147');" onmouseout="out('-5871446470780506147');" style=""> 476                     // Get the character location of the first search match                              </span>
<span class="1328407546550738965" onmouseenter="enter('1328407546550738965');" onmouseout="out('1328407546550738965');" style=""> 477                     int matchLocation = MatchOffsetHighlighter.getFirstMatchLocation(                    </span>
<span class="2395792868164050050" onmouseenter="enter('2395792868164050050');" onmouseout="out('2395792868164050050');" style=""> 478                             mContentEditText.getText(),                                                  </span>
<span class="6736916049865032431" onmouseenter="enter('6736916049865032431');" onmouseout="out('6736916049865032431');" style=""> 479                             mMatchOffsets                                                                </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 480                     );                                                                                   </span>
<span class="3937327664514143598" onmouseenter="enter('3937327664514143598');" onmouseout="out('3937327664514143598');" style=""> 481                     if (matchLocation == 0) {                                                            </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 482                         return;                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 483                     }                                                                                    </span>
<span  style=""> 484                                                                                                          </span>
<span class="-8411350726545484842" onmouseenter="enter('-8411350726545484842');" onmouseout="out('-8411350726545484842');" style=""> 485                     // Calculate how far to scroll to bring the match into view                          </span>
<span class="-8088580226996087877" onmouseenter="enter('-8088580226996087877');" onmouseout="out('-8088580226996087877');" style=""> 486                     Layout layout = mContentEditText.getLayout();                                        </span>
<span class="4818857677317424270" onmouseenter="enter('4818857677317424270');" onmouseout="out('4818857677317424270');" style=""> 487                     int lineTop = layout.getLineTop(layout.getLineForOffset(matchLocation));             </span>
<span class="1129057737754431865" onmouseenter="enter('1129057737754431865');" onmouseout="out('1129057737754431865');" style=""> 488                     ((NestedScrollView) mRootView).smoothScrollTo(0, lineTop);                           </span>
<span class="1093252497226085042" onmouseenter="enter('1093252497226085042');" onmouseout="out('1093252497226085042');" style=""> 489                     mShouldScrollToSearchMatch = false;                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 490                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 491             }                                                                                            </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 492         });                                                                                              </span>
<span class="7823602444079418117" onmouseenter="enter('7823602444079418117');" onmouseout="out('7823602444079418117');" style=""> 493         setHasOptionsMenu(true);                                                                         </span>
<span class="-6258722083869792010" onmouseenter="enter('-6258722083869792010');" onmouseout="out('-6258722083869792010');" style=""> 494         return mRootView;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 495     }                                                                                                    </span>
<span  style=""> 496                                                                                                          </span>
<span class="4710528937935082296" onmouseenter="enter('4710528937935082296');" onmouseout="out('4710528937935082296');" style=""> 497     public void scrollToMatch(int location) {                                                            </span>
<span class="-7481427962806884462" onmouseenter="enter('-7481427962806884462');" onmouseout="out('-7481427962806884462');" style=""> 498         if (isAdded()) {                                                                                 </span>
<span class="-8411350726545484842" onmouseenter="enter('-8411350726545484842');" onmouseout="out('-8411350726545484842');" style=""> 499             // Calculate how far to scroll to bring the match into view                                  </span>
<span class="-8088580226996087877" onmouseenter="enter('-8088580226996087877');" onmouseout="out('-8088580226996087877');" style=""> 500             Layout layout = mContentEditText.getLayout();                                                </span>
<span class="7976110079331789160" onmouseenter="enter('7976110079331789160');" onmouseout="out('7976110079331789160');" style=""> 501             int lineTop = layout.getLineTop(layout.getLineForOffset(location));                          </span>
<span class="1129057737754431865" onmouseenter="enter('1129057737754431865');" onmouseout="out('1129057737754431865');" style=""> 502             ((NestedScrollView) mRootView).smoothScrollTo(0, lineTop);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 503         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 504     }                                                                                                    </span>
<span  style=""> 505                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 506     @Override                                                                                            </span>
<span class="3212580988936830895" onmouseenter="enter('3212580988936830895');" onmouseout="out('3212580988936830895');" style=""> 507     public void onResume() {                                                                             </span>
<span class="-6840488528374549322" onmouseenter="enter('-6840488528374549322');" onmouseout="out('-6840488528374549322');" style=""> 508         super.onResume();                                                                                </span>
<span class="-295722270474880574" onmouseenter="enter('-295722270474880574');" onmouseout="out('-295722270474880574');" style=""> 509         mNotesBucket.start();                                                                            </span>
<span class="-2614582349717816655" onmouseenter="enter('-2614582349717816655');" onmouseout="out('-2614582349717816655');" style=""> 510         AppLog.add(Type.SYNC, &quot;Started note bucket (NoteEditorFragment)&quot;);                               </span>
<span class="8320491026461558488" onmouseenter="enter('8320491026461558488');" onmouseout="out('8320491026461558488');" style=""> 511         mNotesBucket.addListener(this);                                                                  </span>
<span class="5183219019881866175" onmouseenter="enter('5183219019881866175');" onmouseout="out('5183219019881866175');" style=""> 512         mTagInput.setOnTagAddedListener(this);                                                           </span>
<span  style=""> 513                                                                                                          </span>
<span class="-8630351771722931094" onmouseenter="enter('-8630351771722931094');" onmouseout="out('-8630351771722931094');" style=""> 514         if (mContentEditText != null) {                                                                  </span>
<span class="7906960005192148215" onmouseenter="enter('7906960005192148215');" onmouseout="out('7906960005192148215');" style=""><abbr title=" 515             mContentEditText.setTextSize(TypedValue.COMPLEX_UNIT_SP, PrefUtils.getFontSize(requireContext()));"> 515             mContentEditText.setTextSize(TypedValue.COMPLEX_UNIT_SP, PrefUtils.getFontSize(requireContext🔵</abbr></span>
<span  style=""> 516                                                                                                          </span>
<span class="-9045903618847243853" onmouseenter="enter('-9045903618847243853');" onmouseout="out('-9045903618847243853');" style=""> 517             if (mContentEditText.hasFocus()) {                                                           </span>
<span class="2378139384018001812" onmouseenter="enter('2378139384018001812');" onmouseout="out('2378139384018001812');" style=""> 518                 showSoftKeyboard();                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 519             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 520         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 521     }                                                                                                    </span>
<span  style=""> 522                                                                                                          </span>
<span class="-7408745136026343325" onmouseenter="enter('-7408745136026343325');" onmouseout="out('-7408745136026343325');" style=""> 523     private void showSoftKeyboard() {                                                                    </span>
<span class="7162501222170899627" onmouseenter="enter('7162501222170899627');" onmouseout="out('7162501222170899627');" style=""> 524         new Handler().postDelayed(new Runnable() {                                                       </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 525             @Override                                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 526             public void run() {                                                                          </span>
<span class="-3170312762343778784" onmouseenter="enter('-3170312762343778784');" onmouseout="out('-3170312762343778784');" style=""> 527                 if (getActivity() == null) {                                                             </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 528                     return;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 529                 }                                                                                        </span>
<span  style=""> 530                                                                                                          </span>
<span class="6943331498658216188" onmouseenter="enter('6943331498658216188');" onmouseout="out('6943331498658216188');" style=""><abbr title=" 531                 InputMethodManager inputMethodManager = (InputMethodManager) getActivity().getSystemService(Context.INPUT_METHOD_SERVICE);"> 531                 InputMethodManager inputMethodManager = (InputMethodManager) getActivity().getSystemServi🔵</abbr></span>
<span class="-9213036537020298306" onmouseenter="enter('-9213036537020298306');" onmouseout="out('-9213036537020298306');" style=""> 532                 if (inputMethodManager != null) {                                                        </span>
<span class="7954226653587797662" onmouseenter="enter('7954226653587797662');" onmouseout="out('7954226653587797662');" style=""> 533                     inputMethodManager.showSoftInput(mContentEditText, 0);                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 534                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 535             }                                                                                            </span>
<span class="-4884776244894547305" onmouseenter="enter('-4884776244894547305');" onmouseout="out('-4884776244894547305');" style=""> 536         }, 100);                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 537     }                                                                                                    </span>
<span  style=""> 538                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 539     @Override                                                                                            </span>
<span class="3108783673391190151" onmouseenter="enter('3108783673391190151');" onmouseout="out('3108783673391190151');" style=""> 540     public void onPause() {                                                                              </span>
<span class="4626272369407912674" onmouseenter="enter('4626272369407912674');" onmouseout="out('4626272369407912674');" style=""> 541         super.onPause();  // Always call the superclass method first                                     </span>
<span class="-5493396254025166032" onmouseenter="enter('-5493396254025166032');" onmouseout="out('-5493396254025166032');" style=""> 542         mIsPaused = true;                                                                                </span>
<span  style=""> 543                                                                                                          </span>
<span class="-4286062678685908757" onmouseenter="enter('-4286062678685908757');" onmouseout="out('-4286062678685908757');" style=""> 544         // Hide soft keyboard if it is showing...                                                        </span>
<span class="5486984069351007864" onmouseenter="enter('5486984069351007864');" onmouseout="out('5486984069351007864');" style=""> 545         DisplayUtils.hideKeyboard(mContentEditText);                                                     </span>
<span  style=""> 546                                                                                                          </span>
<span class="6353289516119274314" onmouseenter="enter('6353289516119274314');" onmouseout="out('6353289516119274314');" style=""> 547         mTagInput.setOnTagAddedListener(null);                                                           </span>
<span  style=""> 548                                                                                                          </span>
<span class="-2149096896161266035" onmouseenter="enter('-2149096896161266035');" onmouseout="out('-2149096896161266035');" style=""> 549         if (mAutoSaveHandler != null) {                                                                  </span>
<span class="-5465787548318672754" onmouseenter="enter('-5465787548318672754');" onmouseout="out('-5465787548318672754');" style=""> 550             mAutoSaveHandler.removeCallbacks(mAutoSaveRunnable);                                         </span>
<span class="-837723219443324586" onmouseenter="enter('-837723219443324586');" onmouseout="out('-837723219443324586');" style=""> 551             mAutoSaveHandler.post(mAutoSaveRunnable);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 552         }                                                                                                </span>
<span  style=""> 553                                                                                                          </span>
<span class="-8758788084050668688" onmouseenter="enter('-8758788084050668688');" onmouseout="out('-8758788084050668688');" style=""> 554         if (mPublishTimeoutHandler != null) {                                                            </span>
<span class="-1646454762641300025" onmouseenter="enter('-1646454762641300025');" onmouseout="out('-1646454762641300025');" style=""> 555             mPublishTimeoutHandler.removeCallbacks(mPublishTimeoutRunnable);                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 556         }                                                                                                </span>
<span  style=""> 557                                                                                                          </span>
<span class="16247739636052398" onmouseenter="enter('16247739636052398');" onmouseout="out('16247739636052398');" style=""> 558         if (mHistoryTimeoutHandler != null) {                                                            </span>
<span class="7316258928910882956" onmouseenter="enter('7316258928910882956');" onmouseout="out('7316258928910882956');" style=""> 559             mHistoryTimeoutHandler.removeCallbacks(mHistoryTimeoutRunnable);                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 560         }                                                                                                </span>
<span  style=""> 561                                                                                                          </span>
<span class="212618759798230270" onmouseenter="enter('212618759798230270');" onmouseout="out('212618759798230270');" style=""> 562         mHighlighter.stop();                                                                             </span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style=""> 563         saveNote();                                                                                      </span>
<span class="-5110134461042230019" onmouseenter="enter('-5110134461042230019');" onmouseout="out('-5110134461042230019');" style=""> 564         AppLog.add(Type.SCREEN, &quot;Paused (NoteEditorFragment)&quot;);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 565     }                                                                                                    </span>
<span  style=""> 566                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 567     @Override                                                                                            </span>
<span class="658855826062432633" onmouseenter="enter('658855826062432633');" onmouseout="out('658855826062432633');" style=""> 568     public void onDestroy() {                                                                            </span>
<span class="7275190530034972367" onmouseenter="enter('7275190530034972367');" onmouseout="out('7275190530034972367');" style=""> 569         super.onDestroy();                                                                               </span>
<span class="-1649552973291504175" onmouseenter="enter('-1649552973291504175');" onmouseout="out('-1649552973291504175');" style=""> 570         mNotesBucket.removeListener(this);                                                               </span>
<span class="-9222421628383802707" onmouseenter="enter('-9222421628383802707');" onmouseout="out('-9222421628383802707');" style=""> 571         mNotesBucket.stop();                                                                             </span>
<span class="-5888247817738062720" onmouseenter="enter('-5888247817738062720');" onmouseout="out('-5888247817738062720');" style=""> 572         AppLog.add(Type.SYNC, &quot;Stopped note bucket (NoteEditorFragment)&quot;);                               </span>
<span class="284986690041099701" onmouseenter="enter('284986690041099701');" onmouseout="out('284986690041099701');" style=""> 573         AppLog.add(Type.SCREEN, &quot;Destroyed (NoteEditorFragment)&quot;);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 574     }                                                                                                    </span>
<span  style=""> 575                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 576     @Override                                                                                            </span>
<span class="5678576148993170097" onmouseenter="enter('5678576148993170097');" onmouseout="out('5678576148993170097');" style=""> 577     public void onSaveInstanceState(@NonNull Bundle outState) {                                          </span>
<span class="2796648189832219063" onmouseenter="enter('2796648189832219063');" onmouseout="out('2796648189832219063');" style=""> 578         super.onSaveInstanceState(outState);                                                             </span>
<span  style=""> 579                                                                                                          </span>
<span class="4471570229761422149" onmouseenter="enter('4471570229761422149');" onmouseout="out('4471570229761422149');" style=""> 580         if (DisplayUtils.isLargeScreenLandscape(getActivity()) &amp;&amp; mNote != null) {                       </span>
<span class="7419969731723984173" onmouseenter="enter('7419969731723984173');" onmouseout="out('7419969731723984173');" style=""> 581             outState.putString(STATE_NOTE_ID, mNote.getSimperiumKey());                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 582         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 583     }                                                                                                    </span>
<span  style=""> 584                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 585     @Override                                                                                            </span>
<span class="-3104619052446816858" onmouseenter="enter('-3104619052446816858');" onmouseout="out('-3104619052446816858');" style=""> 586     public void onCreateOptionsMenu(@NonNull Menu menu, @NonNull MenuInflater inflater) {                </span>
<span class="5772887857065615623" onmouseenter="enter('5772887857065615623');" onmouseout="out('5772887857065615623');" style=""> 587         super.onCreateOptionsMenu(menu, inflater);                                                       </span>
<span  style=""> 588                                                                                                          </span>
<span class="-4568224188607879240" onmouseenter="enter('-4568224188607879240');" onmouseout="out('-4568224188607879240');" style=""><abbr title=" 589         if (!isAdded() || (!mIsFromWidget &amp;&amp; DisplayUtils.isLargeScreenLandscape(getActivity()) &amp;&amp; mNoteMarkdownFragment == null)) {"> 589         if (!isAdded() || (!mIsFromWidget &amp;&amp; DisplayUtils.isLargeScreenLandscape(getActivity()) &amp;&amp; mNoteM🔵</abbr></span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 590             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 591         }                                                                                                </span>
<span  style=""> 592                                                                                                          </span>
<span class="-5591635883999644357" onmouseenter="enter('-5591635883999644357');" onmouseout="out('-5591635883999644357');" style=""> 593         inflater.inflate(R.menu.note_editor, menu);                                                      </span>
<span class="5385664906661306149" onmouseenter="enter('5385664906661306149');" onmouseout="out('5385664906661306149');" style=""> 594         MenuCompat.setGroupDividerEnabled(menu, true);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 595     }                                                                                                    </span>
<span  style=""> 596                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 597     @Override                                                                                            </span>
<span class="-882410792536471577" onmouseenter="enter('-882410792536471577');" onmouseout="out('-882410792536471577');" style=""> 598     public boolean onOptionsItemSelected(@NonNull MenuItem item) {                                       </span>
<span class="2068182408853392247" onmouseenter="enter('2068182408853392247');" onmouseout="out('2068182408853392247');" style=""> 599         switch (item.getItemId()) {                                                                      </span>
<span class="-9105547343157360739" onmouseenter="enter('-9105547343157360739');" onmouseout="out('-9105547343157360739');" style=""> 600             case R.id.menu_checklist:                                                                    </span>
<span class="2996686463249748346" onmouseenter="enter('2996686463249748346');" onmouseout="out('2996686463249748346');" style=""> 601                 insertChecklist();                                                                       </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 602                 return true;                                                                             </span>
<span class="1323072004784584241" onmouseenter="enter('1323072004784584241');" onmouseout="out('1323072004784584241');" style=""> 603             case R.id.menu_copy:                                                                         </span>
<span class="8518441705934796822" onmouseenter="enter('8518441705934796822');" onmouseout="out('8518441705934796822');" style=""> 604                 if (BrowserUtils.copyToClipboard(requireContext(), mNote.getPublishedUrl())) {           </span>
<span class="3795490233575843146" onmouseenter="enter('3795490233575843146');" onmouseout="out('3795490233575843146');" style=""> 605                     Snackbar.make(mRootView, R.string.link_copied, Snackbar.LENGTH_SHORT).show();        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 606                 } else {                                                                                 </span>
<span class="8359220226685626421" onmouseenter="enter('8359220226685626421');" onmouseout="out('8359220226685626421');" style=""> 607                     Snackbar.make(mRootView, R.string.link_copied_failure, Snackbar.LENGTH_SHORT).show();</span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 608                 }                                                                                        </span>
<span  style=""> 609                                                                                                          </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 610                 return true;                                                                             </span>
<span class="5654474204908123045" onmouseenter="enter('5654474204908123045');" onmouseout="out('5654474204908123045');" style=""> 611             case R.id.menu_copy_internal:                                                                </span>
<span class="-3103212045473028348" onmouseenter="enter('-3103212045473028348');" onmouseout="out('-3103212045473028348');" style=""><abbr title=" 612                 if (BrowserUtils.copyToClipboard(requireContext(), SimplenoteLinkify.getNoteLinkWithTitle(mNote.getTitle(), mNote.getSimperiumKey()))) {"> 612                 if (BrowserUtils.copyToClipboard(requireContext(), SimplenoteLinkify.getNoteLinkWithTitle🔵</abbr></span>
<span class="3795490233575843146" onmouseenter="enter('3795490233575843146');" onmouseout="out('3795490233575843146');" style=""> 613                     Snackbar.make(mRootView, R.string.link_copied, Snackbar.LENGTH_SHORT).show();        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 614                 } else {                                                                                 </span>
<span class="8359220226685626421" onmouseenter="enter('8359220226685626421');" onmouseout="out('8359220226685626421');" style=""> 615                     Snackbar.make(mRootView, R.string.link_copied_failure, Snackbar.LENGTH_SHORT).show();</span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 616                 }                                                                                        </span>
<span  style=""> 617                                                                                                          </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 618                 return true;                                                                             </span>
<span class="1329351071337199880" onmouseenter="enter('1329351071337199880');" onmouseout="out('1329351071337199880');" style=""> 619             case R.id.menu_history:                                                                      </span>
<span class="3115064412317025337" onmouseenter="enter('3115064412317025337');" onmouseout="out('3115064412317025337');" style=""> 620                 showHistory();                                                                           </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 621                 return true;                                                                             </span>
<span class="-7455228569432134304" onmouseenter="enter('-7455228569432134304');" onmouseout="out('-7455228569432134304');" style=""> 622             case R.id.menu_info:                                                                         </span>
<span class="1221863391504882204" onmouseenter="enter('1221863391504882204');" onmouseout="out('1221863391504882204');" style=""> 623                 showInfo();                                                                              </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 624                 return true;                                                                             </span>
<span class="1690518520070570963" onmouseenter="enter('1690518520070570963');" onmouseout="out('1690518520070570963');" style=""> 625             case R.id.menu_markdown:                                                                     </span>
<span class="-3926545672787324985" onmouseenter="enter('-3926545672787324985');" onmouseout="out('-3926545672787324985');" style=""> 626                 setMarkdown(!item.isChecked());                                                          </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 627                 return true;                                                                             </span>
<span class="2584816759865872098" onmouseenter="enter('2584816759865872098');" onmouseout="out('2584816759865872098');" style=""> 628             case R.id.menu_pin:                                                                          </span>
<span class="846429991982879471" onmouseenter="enter('846429991982879471');" onmouseout="out('846429991982879471');" style=""> 629                 NoteUtils.setNotePin(mNote, !item.isChecked());                                          </span>
<span class="-8532471920650411447" onmouseenter="enter('-8532471920650411447');" onmouseout="out('-8532471920650411447');" style=""> 630                 requireActivity().invalidateOptionsMenu();                                               </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 631                 return true;                                                                             </span>
<span class="-1377067082739801221" onmouseenter="enter('-1377067082739801221');" onmouseout="out('-1377067082739801221');" style=""> 632             case R.id.menu_publish:                                                                      </span>
<span class="-3060727947180574444" onmouseenter="enter('-3060727947180574444');" onmouseout="out('-3060727947180574444');" style=""> 633                 if (item.isChecked()) {                                                                  </span>
<span class="4812123925634099655" onmouseenter="enter('4812123925634099655');" onmouseout="out('4812123925634099655');" style=""> 634                     unpublishNote();                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 635                 } else {                                                                                 </span>
<span class="7985358866333072123" onmouseenter="enter('7985358866333072123');" onmouseout="out('7985358866333072123');" style=""> 636                     publishNote();                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 637                 }                                                                                        </span>
<span  style=""> 638                                                                                                          </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 639                 return true;                                                                             </span>
<span class="4712317589059090097" onmouseenter="enter('4712317589059090097');" onmouseout="out('4712317589059090097');" style=""> 640             case R.id.menu_share:                                                                        </span>
<span class="2819818847761455451" onmouseenter="enter('2819818847761455451');" onmouseout="out('2819818847761455451');" style=""> 641                 shareNote();                                                                             </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 642                 return true;                                                                             </span>
<span class="-7045228079815744059" onmouseenter="enter('-7045228079815744059');" onmouseout="out('-7045228079815744059');" style=""> 643             case R.id.menu_trash:                                                                        </span>
<span class="5514287417242355685" onmouseenter="enter('5514287417242355685');" onmouseout="out('5514287417242355685');" style=""> 644                 if (!isAdded()) {                                                                        </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 645                     return false;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 646                 }                                                                                        </span>
<span  style=""> 647                                                                                                          </span>
<span class="3639769569139585690" onmouseenter="enter('3639769569139585690');" onmouseout="out('3639769569139585690');" style=""> 648                 deleteNote();                                                                            </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 649                 return true;                                                                             </span>
<span class="4538874991877816092" onmouseenter="enter('4538874991877816092');" onmouseout="out('4538874991877816092');" style=""> 650             case android.R.id.home:                                                                      </span>
<span class="-5022390127132774156" onmouseenter="enter('-5022390127132774156');" onmouseout="out('-5022390127132774156');" style=""> 651                 AppLog.add(Type.ACTION, &quot;Tapped back arrow in app bar (NoteEditorFragment)&quot;);            </span>
<span class="5514287417242355685" onmouseenter="enter('5514287417242355685');" onmouseout="out('5514287417242355685');" style=""> 652                 if (!isAdded()) {                                                                        </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 653                     return false;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 654                 }                                                                                        </span>
<span  style=""> 655                                                                                                          </span>
<span class="-1923482990691915278" onmouseenter="enter('-1923482990691915278');" onmouseout="out('-1923482990691915278');" style=""> 656                 requireActivity().finish();                                                              </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 657                 return true;                                                                             </span>
<span class="-8178136317704390296" onmouseenter="enter('-8178136317704390296');" onmouseout="out('-8178136317704390296');" style=""> 658             default:                                                                                     </span>
<span class="-3863613010288750787" onmouseenter="enter('-3863613010288750787');" onmouseout="out('-3863613010288750787');" style=""> 659                 return super.onOptionsItemSelected(item);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 660         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 661     }                                                                                                    </span>
<span  style=""> 662                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 663     @Override                                                                                            </span>
<span class="976560802893770483" onmouseenter="enter('976560802893770483');" onmouseout="out('976560802893770483');" style=""> 664     public void onPrepareOptionsMenu(@NonNull Menu menu) {                                               </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 665         if (mNote != null) {                                                                             </span>
<span class="4103252492326247538" onmouseenter="enter('4103252492326247538');" onmouseout="out('4103252492326247538');" style=""> 666             MenuItem pinItem = menu.findItem(R.id.menu_pin);                                             </span>
<span class="-1901297934576221502" onmouseenter="enter('-1901297934576221502');" onmouseout="out('-1901297934576221502');" style=""> 667             MenuItem shareItem = menu.findItem(R.id.menu_share);                                         </span>
<span class="-1024200395334062210" onmouseenter="enter('-1024200395334062210');" onmouseout="out('-1024200395334062210');" style=""> 668             MenuItem historyItem = menu.findItem(R.id.menu_history);                                     </span>
<span class="8524821600195318381" onmouseenter="enter('8524821600195318381');" onmouseout="out('8524821600195318381');" style=""> 669             MenuItem publishItem = menu.findItem(R.id.menu_publish);                                     </span>
<span class="-2596587708374310136" onmouseenter="enter('-2596587708374310136');" onmouseout="out('-2596587708374310136');" style=""> 670             MenuItem copyLinkItem = menu.findItem(R.id.menu_copy);                                       </span>
<span class="3256712546982954826" onmouseenter="enter('3256712546982954826');" onmouseout="out('3256712546982954826');" style=""> 671             MenuItem markdownItem = menu.findItem(R.id.menu_markdown);                                   </span>
<span class="7126556138263523964" onmouseenter="enter('7126556138263523964');" onmouseout="out('7126556138263523964');" style=""> 672             MenuItem trashItem = menu.findItem(R.id.menu_trash);                                         </span>
<span class="-481966053977064278" onmouseenter="enter('-481966053977064278');" onmouseout="out('-481966053977064278');" style=""> 673             mChecklistMenuItem = menu.findItem(R.id.menu_checklist);                                     </span>
<span class="-41110414926085356" onmouseenter="enter('-41110414926085356');" onmouseout="out('-41110414926085356');" style=""> 674             mInformationMenuItem = menu.findItem(R.id.menu_info).setVisible(true);                       </span>
<span  style=""> 675                                                                                                          </span>
<span class="-7678419238898690461" onmouseenter="enter('-7678419238898690461');" onmouseout="out('-7678419238898690461');" style=""> 676             pinItem.setChecked(mNote.isPinned());                                                        </span>
<span class="5915502490134342688" onmouseenter="enter('5915502490134342688');" onmouseout="out('5915502490134342688');" style=""> 677             publishItem.setChecked(mNote.isPublished());                                                 </span>
<span class="-2454055549809219964" onmouseenter="enter('-2454055549809219964');" onmouseout="out('-2454055549809219964');" style=""> 678             markdownItem.setChecked(mNote.isMarkdownEnabled());                                          </span>
<span  style=""> 679                                                                                                          </span>
<span class="8027745968637922893" onmouseenter="enter('8027745968637922893');" onmouseout="out('8027745968637922893');" style=""> 680             // Disable actions when note is in Trash or markdown view is shown on large device.          </span>
<span class="-431402929828645917" onmouseenter="enter('-431402929828645917');" onmouseout="out('-431402929828645917');" style=""> 681             if (mNote.isDeleted() || (mMarkdown != null &amp;&amp; mMarkdown.getVisibility() == View.VISIBLE)) { </span>
<span class="-1690132925836641241" onmouseenter="enter('-1690132925836641241');" onmouseout="out('-1690132925836641241');" style=""> 682                 pinItem.setEnabled(false);                                                               </span>
<span class="-5469494517506321069" onmouseenter="enter('-5469494517506321069');" onmouseout="out('-5469494517506321069');" style=""> 683                 shareItem.setEnabled(false);                                                             </span>
<span class="9085171889633758452" onmouseenter="enter('9085171889633758452');" onmouseout="out('9085171889633758452');" style=""> 684                 historyItem.setEnabled(false);                                                           </span>
<span class="6693521395658962624" onmouseenter="enter('6693521395658962624');" onmouseout="out('6693521395658962624');" style=""> 685                 publishItem.setEnabled(false);                                                           </span>
<span class="9087995724461855803" onmouseenter="enter('9087995724461855803');" onmouseout="out('9087995724461855803');" style=""> 686                 copyLinkItem.setEnabled(false);                                                          </span>
<span class="-1845358690665350593" onmouseenter="enter('-1845358690665350593');" onmouseout="out('-1845358690665350593');" style=""> 687                 markdownItem.setEnabled(false);                                                          </span>
<span class="1533489871724235057" onmouseenter="enter('1533489871724235057');" onmouseout="out('1533489871724235057');" style=""> 688                 mChecklistMenuItem.setEnabled(false);                                                    </span>
<span class="5575712097606361646" onmouseenter="enter('5575712097606361646');" onmouseout="out('5575712097606361646');" style=""> 689                 DrawableUtils.setMenuItemAlpha(mChecklistMenuItem, 0.3);  // 0.3 is 30% opacity.         </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 690             } else {                                                                                     </span>
<span class="-4176946050939173198" onmouseenter="enter('-4176946050939173198');" onmouseout="out('-4176946050939173198');" style=""> 691                 pinItem.setEnabled(true);                                                                </span>
<span class="-8607869884042424878" onmouseenter="enter('-8607869884042424878');" onmouseout="out('-8607869884042424878');" style=""> 692                 shareItem.setEnabled(true);                                                              </span>
<span class="-4314747760650157745" onmouseenter="enter('-4314747760650157745');" onmouseout="out('-4314747760650157745');" style=""> 693                 historyItem.setEnabled(true);                                                            </span>
<span class="3398211100008798634" onmouseenter="enter('3398211100008798634');" onmouseout="out('3398211100008798634');" style=""> 694                 publishItem.setEnabled(true);                                                            </span>
<span class="-4773075625324516073" onmouseenter="enter('-4773075625324516073');" onmouseout="out('-4773075625324516073');" style=""> 695                 copyLinkItem.setEnabled(mNote.isPublished());                                            </span>
<span class="3540588263915729219" onmouseenter="enter('3540588263915729219');" onmouseout="out('3540588263915729219');" style=""> 696                 markdownItem.setEnabled(true);                                                           </span>
<span class="9157159425417983851" onmouseenter="enter('9157159425417983851');" onmouseout="out('9157159425417983851');" style=""> 697                 mChecklistMenuItem.setEnabled(true);                                                     </span>
<span class="-997998498639683163" onmouseenter="enter('-997998498639683163');" onmouseout="out('-997998498639683163');" style=""> 698                 DrawableUtils.setMenuItemAlpha(mChecklistMenuItem, 1.0);  // 1.0 is 100% opacity.        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 699             }                                                                                            </span>
<span  style=""> 700                                                                                                          </span>
<span class="5561093706160816776" onmouseenter="enter('5561093706160816776');" onmouseout="out('5561093706160816776');" style=""> 701             if (mNote.isDeleted()) {                                                                     </span>
<span class="-3033015909800303171" onmouseenter="enter('-3033015909800303171');" onmouseout="out('-3033015909800303171');" style=""> 702                 trashItem.setTitle(R.string.restore);                                                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 703             } else {                                                                                     </span>
<span class="-1683477354690990368" onmouseenter="enter('-1683477354690990368');" onmouseout="out('-1683477354690990368');" style=""> 704                 trashItem.setTitle(R.string.trash);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 705             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 706         }                                                                                                </span>
<span  style=""> 707                                                                                                          </span>
<span class="-5146912340244450550" onmouseenter="enter('-5146912340244450550');" onmouseout="out('-5146912340244450550');" style=""> 708         DrawableUtils.tintMenuWithAttribute(getActivity(), menu, R.attr.toolbarIconColor);               </span>
<span class="1467059367331108531" onmouseenter="enter('1467059367331108531');" onmouseout="out('1467059367331108531');" style=""> 709         super.onPrepareOptionsMenu(menu);                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 710     }                                                                                                    </span>
<span  style=""> 711                                                                                                          </span>
<span class="-2056093237925143337" onmouseenter="enter('-2056093237925143337');" onmouseout="out('-2056093237925143337');" style=""> 712     public void insertChecklist() {                                                                      </span>
<span class="-2132172590912834546" onmouseenter="enter('-2132172590912834546');" onmouseout="out('-2132172590912834546');" style=""> 713         DrawableUtils.startAnimatedVectorDrawable(mChecklistMenuItem.getIcon());                         </span>
<span  style=""> 714                                                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 715         try {                                                                                            </span>
<span class="5818347684529310934" onmouseenter="enter('5818347684529310934');" onmouseout="out('5818347684529310934');" style=""> 716             mContentEditText.insertChecklist();                                                          </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 717         } catch (Exception e) {                                                                          </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 718             e.printStackTrace();                                                                         </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 719             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 720         }                                                                                                </span>
<span  style=""> 721                                                                                                          </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 722         AnalyticsTracker.track(                                                                          </span>
<span class="2856363448162984839" onmouseenter="enter('2856363448162984839');" onmouseout="out('2856363448162984839');" style=""> 723             EDITOR_CHECKLIST_INSERTED,                                                                   </span>
<span class="-2430475172570880083" onmouseenter="enter('-2430475172570880083');" onmouseout="out('-2430475172570880083');" style=""> 724             CATEGORY_NOTE,                                                                               </span>
<span class="3613116414135407305" onmouseenter="enter('3613116414135407305');" onmouseout="out('3613116414135407305');" style=""> 725             &quot;toolbar_button&quot;                                                                             </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 726         );                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 727     }                                                                                                    </span>
<span  style=""> 728                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 729     @Override                                                                                            </span>
<span class="-8145186961220354967" onmouseenter="enter('-8145186961220354967');" onmouseout="out('-8145186961220354967');" style=""> 730     public void onCheckboxToggled() {                                                                    </span>
<span class="-2834824800808682286" onmouseenter="enter('-2834824800808682286');" onmouseout="out('-2834824800808682286');" style=""> 731         // Save note (using delay) after toggling a checkbox                                             </span>
<span class="-2149096896161266035" onmouseenter="enter('-2149096896161266035');" onmouseout="out('-2149096896161266035');" style=""> 732         if (mAutoSaveHandler != null) {                                                                  </span>
<span class="-5465787548318672754" onmouseenter="enter('-5465787548318672754');" onmouseout="out('-5465787548318672754');" style=""> 733             mAutoSaveHandler.removeCallbacks(mAutoSaveRunnable);                                         </span>
<span class="3237260668993885548" onmouseenter="enter('3237260668993885548');" onmouseout="out('3237260668993885548');" style=""> 734             mAutoSaveHandler.postDelayed(mAutoSaveRunnable, AUTOSAVE_DELAY_MILLIS);                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 735         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 736     }                                                                                                    </span>
<span  style=""> 737                                                                                                          </span>
<span class="-7228463698535350052" onmouseenter="enter('-7228463698535350052');" onmouseout="out('-7228463698535350052');" style=""> 738     private void deleteNote() {                                                                          </span>
<span class="4492119149633458811" onmouseenter="enter('4492119149633458811');" onmouseout="out('4492119149633458811');" style=""> 739         NoteUtils.deleteNote(mNote, getActivity());                                                      </span>
<span class="-1923482990691915278" onmouseenter="enter('-1923482990691915278');" onmouseout="out('-1923482990691915278');" style=""> 740         requireActivity().finish();                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 741     }                                                                                                    </span>
<span  style=""> 742                                                                                                          </span>
<span class="6575837707802621057" onmouseenter="enter('6575837707802621057');" onmouseout="out('6575837707802621057');" style=""> 743     protected void clearMarkdown() {                                                                     </span>
<span class="4379033444024403701" onmouseenter="enter('4379033444024403701');" onmouseout="out('4379033444024403701');" style=""> 744         mMarkdown.loadDataWithBaseURL(&quot;file:///android_asset/&quot;, mCss + &quot;&quot;, &quot;text/html&quot;, &quot;utf-8&quot;, null);  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 745     }                                                                                                    </span>
<span  style=""> 746                                                                                                          </span>
<span class="4876877473500420963" onmouseenter="enter('4876877473500420963');" onmouseout="out('4876877473500420963');" style=""> 747     protected void hideMarkdown() {                                                                      </span>
<span class="6362103358672335388" onmouseenter="enter('6362103358672335388');" onmouseout="out('6362103358672335388');" style=""> 748         mMarkdown.setVisibility(View.INVISIBLE);                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 749     }                                                                                                    </span>
<span  style=""> 750                                                                                                          </span>
<span class="-3219341107535080329" onmouseenter="enter('-3219341107535080329');" onmouseout="out('-3219341107535080329');" style=""> 751     protected void showMarkdown() {                                                                      </span>
<span class="3327794499329885328" onmouseenter="enter('3327794499329885328');" onmouseout="out('3327794499329885328');" style=""> 752         loadMarkdownData();                                                                              </span>
<span class="4346698976501095620" onmouseenter="enter('4346698976501095620');" onmouseout="out('4346698976501095620');" style=""> 753         mMarkdown.setVisibility(View.VISIBLE);                                                           </span>
<span  style=""> 754                                                                                                          </span>
<span class="-8355266079523609200" onmouseenter="enter('-8355266079523609200');" onmouseout="out('-8355266079523609200');" style=""> 755         new Handler().postDelayed(                                                                       </span>
<span class="4860439059348199630" onmouseenter="enter('4860439059348199630');" onmouseout="out('4860439059348199630');" style=""> 756             new Runnable() {                                                                             </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 757                 @Override                                                                                </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 758                 public void run() {                                                                      </span>
<span class="-8532471920650411447" onmouseenter="enter('-8532471920650411447');" onmouseout="out('-8532471920650411447');" style=""> 759                     requireActivity().invalidateOptionsMenu();                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 760                 }                                                                                        </span>
<span class="-4102417550988568311" onmouseenter="enter('-4102417550988568311');" onmouseout="out('-4102417550988568311');" style=""> 761             },                                                                                           </span>
<span class="5128296635725421077" onmouseenter="enter('5128296635725421077');" onmouseout="out('5128296635725421077');" style=""> 762             getResources().getInteger(R.integer.time_animation)                                          </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 763         );                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 764     }                                                                                                    </span>
<span  style=""> 765                                                                                                          </span>
<span class="796341583224604558" onmouseenter="enter('796341583224604558');" onmouseout="out('796341583224604558');" style=""> 766     public void shareNote() {                                                                            </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 767         if (mNote != null) {                                                                             </span>
<span class="-5662939853121386036" onmouseenter="enter('-5662939853121386036');" onmouseout="out('-5662939853121386036');" style=""> 768             mContentEditText.clearFocus();                                                               </span>
<span class="-641201949227129854" onmouseenter="enter('-641201949227129854');" onmouseout="out('-641201949227129854');" style=""> 769             showShareSheet();                                                                            </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 770             AnalyticsTracker.track(                                                                      </span>
<span class="-5025794315104060878" onmouseenter="enter('-5025794315104060878');" onmouseout="out('-5025794315104060878');" style=""> 771                 EDITOR_NOTE_CONTENT_SHARED,                                                              </span>
<span class="-2430475172570880083" onmouseenter="enter('-2430475172570880083');" onmouseout="out('-2430475172570880083');" style=""> 772                 CATEGORY_NOTE,                                                                           </span>
<span class="2749115305963564191" onmouseenter="enter('2749115305963564191');" onmouseout="out('2749115305963564191');" style=""> 773                 &quot;action_bar_share_button&quot;                                                                </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 774             );                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 775         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 776     }                                                                                                    </span>
<span  style=""> 777                                                                                                          </span>
<span class="-6549715277076486587" onmouseenter="enter('-6549715277076486587');" onmouseout="out('-6549715277076486587');" style=""> 778     public void showHistory() {                                                                          </span>
<span class="-4132317386083687564" onmouseenter="enter('-4132317386083687564');" onmouseout="out('-4132317386083687564');" style=""> 779         if (mNote != null &amp;&amp; mNote.getVersion() &gt; 1) {                                                   </span>
<span class="-5662939853121386036" onmouseenter="enter('-5662939853121386036');" onmouseout="out('-5662939853121386036');" style=""> 780             mContentEditText.clearFocus();                                                               </span>
<span class="2792270431942423109" onmouseenter="enter('2792270431942423109');" onmouseout="out('2792270431942423109');" style=""> 781             mHistoryTimeoutHandler.postDelayed(mHistoryTimeoutRunnable, HISTORY_TIMEOUT);                </span>
<span class="-6120831555230055153" onmouseenter="enter('-6120831555230055153');" onmouseout="out('-6120831555230055153');" style=""> 782             showHistorySheet();                                                                          </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 783         } else {                                                                                         </span>
<span class="-1949769614201595359" onmouseenter="enter('-1949769614201595359');" onmouseout="out('-1949769614201595359');" style=""> 784             Toast.makeText(getActivity(), R.string.error_history, Toast.LENGTH_LONG).show();             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 785         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 786     }                                                                                                    </span>
<span  style=""> 787                                                                                                          </span>
<span class="7631792944897512467" onmouseenter="enter('7631792944897512467');" onmouseout="out('7631792944897512467');" style=""> 788     public void showInfo() {                                                                             </span>
<span class="8350219460722128573" onmouseenter="enter('8350219460722128573');" onmouseout="out('8350219460722128573');" style=""> 789         DrawableUtils.startAnimatedVectorDrawable(mInformationMenuItem.getIcon());                       </span>
<span  style=""> 790                                                                                                          </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 791         if (mNote != null) {                                                                             </span>
<span class="-5662939853121386036" onmouseenter="enter('-5662939853121386036');" onmouseout="out('-5662939853121386036');" style=""> 792             mContentEditText.clearFocus();                                                               </span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style=""> 793             saveNote();                                                                                  </span>
<span class="-4032532453651560177" onmouseenter="enter('-4032532453651560177');" onmouseout="out('-4032532453651560177');" style=""> 794             showInfoSheet();                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 795         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 796     }                                                                                                    </span>
<span  style=""> 797                                                                                                          </span>
<span class="-352900364532795923" onmouseenter="enter('-352900364532795923');" onmouseout="out('-352900364532795923');" style=""> 798     private void setMarkdown(boolean isChecked) {                                                        </span>
<span class="-8726857289881922025" onmouseenter="enter('-8726857289881922025');" onmouseout="out('-8726857289881922025');" style=""> 799         mIsMarkdownEnabled = isChecked;                                                                  </span>
<span class="-2583362461360625309" onmouseenter="enter('-2583362461360625309');" onmouseout="out('-2583362461360625309');" style=""> 800         showMarkdownActionOrTabs();                                                                      </span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style=""> 801         saveNote();                                                                                      </span>
<span  style=""> 802                                                                                                          </span>
<span class="4232333416851338644" onmouseenter="enter('4232333416851338644');" onmouseout="out('4232333416851338644');" style=""> 803         // Set preference so that next new note will have markdown enabled.                              </span>
<span class="6036884777494374936" onmouseenter="enter('6036884777494374936');" onmouseout="out('6036884777494374936');" style=""> 804         SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(requireContext());       </span>
<span class="-5940133505573131741" onmouseenter="enter('-5940133505573131741');" onmouseout="out('-5940133505573131741');" style=""> 805         SharedPreferences.Editor editor = prefs.edit();                                                  </span>
<span class="5795063328820819160" onmouseenter="enter('5795063328820819160');" onmouseout="out('5795063328820819160');" style=""> 806         editor.putBoolean(PrefUtils.PREF_MARKDOWN_ENABLED, isChecked);                                   </span>
<span class="-5305612453340718340" onmouseenter="enter('-5305612453340718340');" onmouseout="out('-5305612453340718340');" style=""> 807         editor.apply();                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 808     }                                                                                                    </span>
<span  style=""> 809                                                                                                          </span>
<span class="-8233267360630545179" onmouseenter="enter('-8233267360630545179');" onmouseout="out('-8233267360630545179');" style=""> 810     private void setMarkdownEnabled(boolean enabled) {                                                   </span>
<span class="-9128949734751156553" onmouseenter="enter('-9128949734751156553');" onmouseout="out('-9128949734751156553');" style=""> 811         mIsMarkdownEnabled = enabled;                                                                    </span>
<span  style=""> 812                                                                                                          </span>
<span class="-5497853437151453135" onmouseenter="enter('-5497853437151453135');" onmouseout="out('-5497853437151453135');" style=""> 813         if (mIsMarkdownEnabled) {                                                                        </span>
<span class="3327794499329885328" onmouseenter="enter('3327794499329885328');" onmouseout="out('3327794499329885328');" style=""> 814             loadMarkdownData();                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 815         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 816     }                                                                                                    </span>
<span  style=""> 817                                                                                                          </span>
<span class="-150225536602277221" onmouseenter="enter('-150225536602277221');" onmouseout="out('-150225536602277221');" style=""> 818     private void showMarkdownActionOrTabs() {                                                            </span>
<span class="-5071525869541290984" onmouseenter="enter('-5071525869541290984');" onmouseout="out('-5071525869541290984');" style=""> 819         Activity activity = getActivity();                                                               </span>
<span  style=""> 820                                                                                                          </span>
<span class="2687579389951242136" onmouseenter="enter('2687579389951242136');" onmouseout="out('2687579389951242136');" style=""> 821         if (activity instanceof NoteEditorActivity) {                                                    </span>
<span class="-2402557313247060047" onmouseenter="enter('-2402557313247060047');" onmouseout="out('-2402557313247060047');" style=""> 822             NoteEditorActivity editorActivity = (NoteEditorActivity) activity;                           </span>
<span  style=""> 823                                                                                                          </span>
<span class="-5497853437151453135" onmouseenter="enter('-5497853437151453135');" onmouseout="out('-5497853437151453135');" style=""> 824             if (mIsMarkdownEnabled) {                                                                    </span>
<span class="2738920073364403707" onmouseenter="enter('2738920073364403707');" onmouseout="out('2738920073364403707');" style=""> 825                 editorActivity.showTabs();                                                               </span>
<span  style=""> 826                                                                                                          </span>
<span class="-3674842258349497418" onmouseenter="enter('-3674842258349497418');" onmouseout="out('-3674842258349497418');" style=""> 827                 if (mNoteMarkdownFragment == null) {                                                     </span>
<span class="-8091199532300597402" onmouseenter="enter('-8091199532300597402');" onmouseout="out('-8091199532300597402');" style=""> 828                     // Get markdown fragment and update content                                          </span>
<span class="6541177819216640453" onmouseenter="enter('6541177819216640453');" onmouseout="out('6541177819216640453');" style=""> 829                     mNoteMarkdownFragment = editorActivity.getNoteMarkdownFragment();                    </span>
<span class="8234543871026198045" onmouseenter="enter('8234543871026198045');" onmouseout="out('8234543871026198045');" style=""> 830                     mNoteMarkdownFragment.updateMarkdown(mContentEditText.getPreviewTextContent());      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 831                 }                                                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 832             } else {                                                                                     </span>
<span class="-1827112023263463857" onmouseenter="enter('-1827112023263463857');" onmouseout="out('-1827112023263463857');" style=""> 833                 editorActivity.hideTabs();                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 834             }                                                                                            </span>
<span class="-8182258209329027497" onmouseenter="enter('-8182258209329027497');" onmouseout="out('-8182258209329027497');" style=""> 835         } else if (activity instanceof NotesActivity) {                                                  </span>
<span class="714586879751884809" onmouseenter="enter('714586879751884809');" onmouseout="out('714586879751884809');" style=""> 836             setMarkdownEnabled(mIsMarkdownEnabled);                                                      </span>
<span class="9075936053703013718" onmouseenter="enter('9075936053703013718');" onmouseout="out('9075936053703013718');" style=""> 837             ((NotesActivity) getActivity()).setMarkdownShowing(false);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 838         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 839     }                                                                                                    </span>
<span  style=""> 840                                                                                                          </span>
<span class="-2467052403250215415" onmouseenter="enter('-2467052403250215415');" onmouseout="out('-2467052403250215415');" style=""> 841     private void loadMarkdownData() {                                                                    </span>
<span class="-8622237621259523057" onmouseenter="enter('-8622237621259523057');" onmouseout="out('-8622237621259523057');" style=""> 842         String formattedContent = NoteMarkdownFragment.getMarkdownFormattedContent(                      </span>
<span class="-107180190148709194" onmouseenter="enter('-107180190148709194');" onmouseout="out('-107180190148709194');" style=""> 843                 mCss,                                                                                    </span>
<span class="8402262730640179324" onmouseenter="enter('8402262730640179324');" onmouseout="out('8402262730640179324');" style=""> 844                 mContentEditText.getPreviewTextContent()                                                 </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 845         );                                                                                               </span>
<span  style=""> 846                                                                                                          </span>
<span class="-1179287945165338458" onmouseenter="enter('-1179287945165338458');" onmouseout="out('-1179287945165338458');" style=""> 847         mMarkdown.loadDataWithBaseURL(null, formattedContent, &quot;text/html&quot;, &quot;utf-8&quot;, null);               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 848     }                                                                                                    </span>
<span  style=""> 849                                                                                                          </span>
<span class="8195105300246755684" onmouseenter="enter('8195105300246755684');" onmouseout="out('8195105300246755684');" style=""> 850     public void setNote(String noteID, String matchOffsets) {                                            </span>
<span class="-3646372507164546123" onmouseenter="enter('-3646372507164546123');" onmouseout="out('-3646372507164546123');" style=""> 851         if (mAutoSaveHandler != null)                                                                    </span>
<span class="-5465787548318672754" onmouseenter="enter('-5465787548318672754');" onmouseout="out('-5465787548318672754');" style=""> 852             mAutoSaveHandler.removeCallbacks(mAutoSaveRunnable);                                         </span>
<span  style=""> 853                                                                                                          </span>
<span class="-2690182352330934584" onmouseenter="enter('-2690182352330934584');" onmouseout="out('-2690182352330934584');" style=""> 854         mPlaceholderView.setVisibility(View.GONE);                                                       </span>
<span  style=""> 855                                                                                                          </span>
<span class="-7566474685196195951" onmouseenter="enter('-7566474685196195951');" onmouseout="out('-7566474685196195951');" style=""> 856         if (matchOffsets != null) {                                                                      </span>
<span class="76822769413740338" onmouseenter="enter('76822769413740338');" onmouseout="out('76822769413740338');" style=""> 857             mMatchOffsets = matchOffsets;                                                                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 858         } else {                                                                                         </span>
<span class="-5254682256162211718" onmouseenter="enter('-5254682256162211718');" onmouseout="out('-5254682256162211718');" style=""> 859             mMatchOffsets = null;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 860         }                                                                                                </span>
<span  style=""> 861                                                                                                          </span>
<span  style=""> 862                                                                                                          </span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style=""> 863         saveNote();                                                                                      </span>
<span  style=""> 864                                                                                                          </span>
<span class="-2429694576102374369" onmouseenter="enter('-2429694576102374369');" onmouseout="out('-2429694576102374369');" style=""> 865         new LoadNoteTask(this).executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR, noteID);                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 866     }                                                                                                    </span>
<span  style=""> 867                                                                                                          </span>
<span class="2912110192045859171" onmouseenter="enter('2912110192045859171');" onmouseout="out('2912110192045859171');" style=""> 868     private void updateNote(Note updatedNote) {                                                          </span>
<span class="1053945494720623403" onmouseenter="enter('1053945494720623403');" onmouseout="out('1053945494720623403');" style=""> 869         // update note if network change arrived                                                         </span>
<span class="8715526790189509580" onmouseenter="enter('8715526790189509580');" onmouseout="out('8715526790189509580');" style=""> 870         mNote = updatedNote;                                                                             </span>
<span class="-1082183570760036139" onmouseenter="enter('-1082183570760036139');" onmouseout="out('-1082183570760036139');" style=""> 871         refreshContent(true);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 872     }                                                                                                    </span>
<span  style=""> 873                                                                                                          </span>
<span class="-7217331690392611444" onmouseenter="enter('-7217331690392611444');" onmouseout="out('-7217331690392611444');" style=""> 874     private void refreshContent(boolean isNoteUpdate) {                                                  </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 875         if (mNote != null) {                                                                             </span>
<span class="9083634457699551889" onmouseenter="enter('9083634457699551889');" onmouseout="out('9083634457699551889');" style=""> 876             // Restore the cursor position if possible.                                                  </span>
<span class="-3899995221280134201" onmouseenter="enter('-3899995221280134201');" onmouseout="out('-3899995221280134201');" style=""><abbr title=" 877             int cursorPosition = newCursorLocation(mNote.getContent(), getNoteContentString(), mContentEditText.getSelectionEnd());"> 877             int cursorPosition = newCursorLocation(mNote.getContent(), getNoteContentString(), mContentEd🔵</abbr></span>
<span class="4148799213240179760" onmouseenter="enter('4148799213240179760');" onmouseout="out('4148799213240179760');" style=""> 878             mContentEditText.setText(mNote.getContent());                                                </span>
<span  style=""> 879                                                                                                          </span>
<span class="2353268123342341866" onmouseenter="enter('2353268123342341866');" onmouseout="out('2353268123342341866');" style=""> 880             if (isNoteUpdate) {                                                                          </span>
<span class="-7373810293776319490" onmouseenter="enter('-7373810293776319490');" onmouseout="out('-7373810293776319490');" style=""> 881                 // Update markdown and preview flags from updated note.                                  </span>
<span class="-6548100248772474304" onmouseenter="enter('-6548100248772474304');" onmouseout="out('-6548100248772474304');" style=""> 882                 mIsMarkdownEnabled = mNote.isMarkdownEnabled();                                          </span>
<span class="8897386780031316770" onmouseenter="enter('8897386780031316770');" onmouseout="out('8897386780031316770');" style=""> 883                 mIsPreviewEnabled = mNote.isPreviewEnabled();                                            </span>
<span  style=""> 884                                                                                                          </span>
<span class="-3172285059116353636" onmouseenter="enter('-3172285059116353636');" onmouseout="out('-3172285059116353636');" style=""> 885                 // Show/Hide action/tabs based on markdown flag.                                         </span>
<span class="-2583362461360625309" onmouseenter="enter('-2583362461360625309');" onmouseout="out('-2583362461360625309');" style=""> 886                 showMarkdownActionOrTabs();                                                              </span>
<span  style=""> 887                                                                                                          </span>
<span class="8277551329937109619" onmouseenter="enter('8277551329937109619');" onmouseout="out('8277551329937109619');" style=""> 888                 // Save note so any local changes get synced.                                            </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style=""> 889                 mNote.save();                                                                            </span>
<span  style=""> 890                                                                                                          </span>
<span class="-4783156834321463304" onmouseenter="enter('-4783156834321463304');" onmouseout="out('-4783156834321463304');" style=""> 891                 // Update current note object on large screen devices in landscape orientation.          </span>
<span class="-7225941789318469668" onmouseenter="enter('-7225941789318469668');" onmouseout="out('-7225941789318469668');" style=""> 892                 if (DisplayUtils.isLargeScreenLandscape(requireContext())) {                             </span>
<span class="9072366327646001644" onmouseenter="enter('9072366327646001644');" onmouseout="out('9072366327646001644');" style=""> 893                     ((NotesActivity) requireActivity()).setCurrentNote(mNote);                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 894                 }                                                                                        </span>
<span  style=""> 895                                                                                                          </span>
<span class="-510315884444466739" onmouseenter="enter('-510315884444466739');" onmouseout="out('-510315884444466739');" style=""> 896                 // Update overflow popup menu.                                                           </span>
<span class="-8532471920650411447" onmouseenter="enter('-8532471920650411447');" onmouseout="out('-8532471920650411447');" style=""> 897                 requireActivity().invalidateOptionsMenu();                                               </span>
<span  style=""> 898                                                                                                          </span>
<span class="8073598210414419917" onmouseenter="enter('8073598210414419917');" onmouseout="out('8073598210414419917');" style=""> 899                 if (mContentEditText.hasFocus()                                                          </span>
<span class="1644140795570121810" onmouseenter="enter('1644140795570121810');" onmouseout="out('1644140795570121810');" style=""> 900                         &amp;&amp; cursorPosition != mContentEditText.getSelectionEnd()                          </span>
<span class="-7547165723183084197" onmouseenter="enter('-7547165723183084197');" onmouseout="out('-7547165723183084197');" style=""> 901                         &amp;&amp; cursorPosition &lt; mContentEditText.getText().length()) {                       </span>
<span class="2096054726124109686" onmouseenter="enter('2096054726124109686');" onmouseout="out('2096054726124109686');" style=""> 902                     mContentEditText.setSelection(cursorPosition);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 903                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 904             }                                                                                            </span>
<span  style=""> 905                                                                                                          </span>
<span class="-2853209662220592982" onmouseenter="enter('-2853209662220592982');" onmouseout="out('-2853209662220592982');" style=""> 906             afterTextChanged(mContentEditText.getText());                                                </span>
<span class="-5644737892245114659" onmouseenter="enter('-5644737892245114659');" onmouseout="out('-5644737892245114659');" style=""> 907             mContentEditText.processChecklists();                                                        </span>
<span class="3745953297761259324" onmouseenter="enter('3745953297761259324');" onmouseout="out('3745953297761259324');" style=""> 908             updateTagList();                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 909         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 910     }                                                                                                    </span>
<span  style=""> 911                                                                                                          </span>
<span class="8641648550056617419" onmouseenter="enter('8641648550056617419');" onmouseout="out('8641648550056617419');" style=""> 912     private void updateTagList() {                                                                       </span>
<span class="-2248190398996855538" onmouseenter="enter('-2248190398996855538');" onmouseout="out('-2248190398996855538');" style=""> 913         setChips(mNote.getTagString());                                                                  </span>
<span class="704222064602714746" onmouseenter="enter('704222064602714746');" onmouseout="out('704222064602714746');" style=""> 914         mTagInput.setText(&quot;&quot;);                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 915     }                                                                                                    </span>
<span  style=""> 916                                                                                                          </span>
<span class="4246690832623096875" onmouseenter="enter('4246690832623096875');" onmouseout="out('4246690832623096875');" style=""> 917     private int newCursorLocation(String newText, String oldText, int cursorLocation) {                  </span>
<span class="9215253731107462720" onmouseenter="enter('9215253731107462720');" onmouseout="out('9215253731107462720');" style=""> 918         // Ported from the iOS app :)                                                                    </span>
<span class="746416875920517525" onmouseenter="enter('746416875920517525');" onmouseout="out('746416875920517525');" style=""> 919         // Cases:                                                                                        </span>
<span class="5532692154938930485" onmouseenter="enter('5532692154938930485');" onmouseout="out('5532692154938930485');" style=""> 920         // 0. All text after cursor (and possibly more) was removed ==&gt; put cursor at end                </span>
<span class="7679522442911259243" onmouseenter="enter('7679522442911259243');" onmouseout="out('7679522442911259243');" style=""> 921         // 1. Text was added after the cursor ==&gt; no change                                              </span>
<span class="-7894032746042607578" onmouseenter="enter('-7894032746042607578');" onmouseout="out('-7894032746042607578');" style=""> 922         // 2. Text was added before the cursor ==&gt; location advances                                     </span>
<span class="-2716138352653500367" onmouseenter="enter('-2716138352653500367');" onmouseout="out('-2716138352653500367');" style=""> 923         // 3. Text was removed after the cursor ==&gt; no change                                            </span>
<span class="-5135222146548415418" onmouseenter="enter('-5135222146548415418');" onmouseout="out('-5135222146548415418');" style=""> 924         // 4. Text was removed before the cursor ==&gt; location retreats                                   </span>
<span class="-7558810491072030947" onmouseenter="enter('-7558810491072030947');" onmouseout="out('-7558810491072030947');" style=""> 925         // 5. Text was added/removed on both sides of the cursor ==&gt; not handled                         </span>
<span  style=""> 926                                                                                                          </span>
<span class="6113131008706185379" onmouseenter="enter('6113131008706185379');" onmouseout="out('6113131008706185379');" style=""> 927         cursorLocation = Math.max(cursorLocation, 0);                                                    </span>
<span  style=""> 928                                                                                                          </span>
<span class="2494517364842646163" onmouseenter="enter('2494517364842646163');" onmouseout="out('2494517364842646163');" style=""> 929         int newCursorLocation = cursorLocation;                                                          </span>
<span  style=""> 930                                                                                                          </span>
<span class="5908042661332565473" onmouseenter="enter('5908042661332565473');" onmouseout="out('5908042661332565473');" style=""> 931         int deltaLength = newText.length() - oldText.length();                                           </span>
<span  style=""> 932                                                                                                          </span>
<span class="-6285488792309831531" onmouseenter="enter('-6285488792309831531');" onmouseout="out('-6285488792309831531');" style=""> 933         // Case 0                                                                                        </span>
<span class="-3414403190560247865" onmouseenter="enter('-3414403190560247865');" onmouseout="out('-3414403190560247865');" style=""> 934         if (newText.length() &lt; cursorLocation)                                                           </span>
<span class="-8431314608568195365" onmouseenter="enter('-8431314608568195365');" onmouseout="out('-8431314608568195365');" style=""> 935             return newText.length();                                                                     </span>
<span  style=""> 936                                                                                                          </span>
<span class="-8591384106259708496" onmouseenter="enter('-8591384106259708496');" onmouseout="out('-8591384106259708496');" style=""> 937         boolean beforeCursorMatches = false;                                                             </span>
<span class="-2836779116340504068" onmouseenter="enter('-2836779116340504068');" onmouseout="out('-2836779116340504068');" style=""> 938         boolean afterCursorMatches = false;                                                              </span>
<span  style=""> 939                                                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 940         try {                                                                                            </span>
<span class="535177221055952012" onmouseenter="enter('535177221055952012');" onmouseout="out('535177221055952012');" style=""><abbr title=" 941             beforeCursorMatches = oldText.substring(0, cursorLocation).equals(newText.substring(0, cursorLocation));"> 941             beforeCursorMatches = oldText.substring(0, cursorLocation).equals(newText.substring(0, cursor🔵</abbr></span>
<span class="4519924127741002604" onmouseenter="enter('4519924127741002604');" onmouseout="out('4519924127741002604');" style=""><abbr title=" 942             afterCursorMatches = oldText.substring(cursorLocation).equals(newText.substring(cursorLocation + deltaLength));"> 942             afterCursorMatches = oldText.substring(cursorLocation).equals(newText.substring(cursorLocatio🔵</abbr></span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 943         } catch (Exception e) {                                                                          </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 944             e.printStackTrace();                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 945         }                                                                                                </span>
<span  style=""> 946                                                                                                          </span>
<span class="-8188204612528872149" onmouseenter="enter('-8188204612528872149');" onmouseout="out('-8188204612528872149');" style=""> 947         // Cases 2 and 4                                                                                 </span>
<span class="6616414540674367624" onmouseenter="enter('6616414540674367624');" onmouseout="out('6616414540674367624');" style=""> 948         if (!beforeCursorMatches &amp;&amp; afterCursorMatches)                                                  </span>
<span class="-4510977125628343614" onmouseenter="enter('-4510977125628343614');" onmouseout="out('-4510977125628343614');" style=""> 949             newCursorLocation += deltaLength;                                                            </span>
<span  style=""> 950                                                                                                          </span>
<span class="6867115481875645839" onmouseenter="enter('6867115481875645839');" onmouseout="out('6867115481875645839');" style=""> 951         // Cases 1, 3 and 5 have no change                                                               </span>
<span class="-7784410696724573059" onmouseenter="enter('-7784410696724573059');" onmouseout="out('-7784410696724573059');" style=""> 952         return newCursorLocation;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 953     }                                                                                                    </span>
<span  style=""> 954                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 955     @Override                                                                                            </span>
<span class="7167548776341584998" onmouseenter="enter('7167548776341584998');" onmouseout="out('7167548776341584998');" style=""> 956     public void onTagAdded(String tag) {                                                                 </span>
<span class="-7210480112102928295" onmouseenter="enter('-7210480112102928295');" onmouseout="out('-7210480112102928295');" style=""> 957         if (mNote == null || !isAdded()) {                                                               </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 958             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 959         }                                                                                                </span>
<span  style=""> 960                                                                                                          </span>
<span class="-5238169388612496279" onmouseenter="enter('-5238169388612496279');" onmouseout="out('-5238169388612496279');" style=""> 961         if (mNote.getTagString() != null &amp;&amp; tag.length() &gt; mNote.getTagString().length()) {              </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 962             AnalyticsTracker.track(                                                                      </span>
<span class="-1422381609780470266" onmouseenter="enter('-1422381609780470266');" onmouseout="out('-1422381609780470266');" style=""> 963                 EDITOR_TAG_ADDED,                                                                        </span>
<span class="-2430475172570880083" onmouseenter="enter('-2430475172570880083');" onmouseout="out('-2430475172570880083');" style=""> 964                 CATEGORY_NOTE,                                                                           </span>
<span class="7268236347956630095" onmouseenter="enter('7268236347956630095');" onmouseout="out('7268236347956630095');" style=""> 965                 &quot;tag_added_to_note&quot;                                                                      </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 966             );                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 967         }                                                                                                </span>
<span  style=""> 968                                                                                                          </span>
<span class="-1987136146652427775" onmouseenter="enter('-1987136146652427775');" onmouseout="out('-1987136146652427775');" style=""> 969         mNote.setTagString(mNote.getTagString() + String.valueOf(SPACE) + tag);                          </span>
<span class="-3343075472306200704" onmouseenter="enter('-3343075472306200704');" onmouseout="out('-3343075472306200704');" style=""> 970         mNote.setModificationDate(Calendar.getInstance());                                               </span>
<span class="3745953297761259324" onmouseenter="enter('3745953297761259324');" onmouseout="out('3745953297761259324');" style=""> 971         updateTagList();                                                                                 </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style=""> 972         mNote.save();                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 973     }                                                                                                    </span>
<span  style=""> 974                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 975     @Override                                                                                            </span>
<span class="-5110897291356760413" onmouseenter="enter('-5110897291356760413');" onmouseout="out('-5110897291356760413');" style=""> 976     public void beforeTextChanged(CharSequence charSequence, int i, int i2, int i3) {                    </span>
<span class="7490540504293754116" onmouseenter="enter('7490540504293754116');" onmouseout="out('7490540504293754116');" style=""> 977         // Unused                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 978     }                                                                                                    </span>
<span  style=""> 979                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 980     @Override                                                                                            </span>
<span class="-3169498224421089624" onmouseenter="enter('-3169498224421089624');" onmouseout="out('-3169498224421089624');" style=""> 981     public void afterTextChanged(Editable editable) {                                                    </span>
<span class="4641646211430236365" onmouseenter="enter('4641646211430236365');" onmouseout="out('4641646211430236365');" style=""> 982         attemptAutoList(editable);                                                                       </span>
<span class="7005237563799171506" onmouseenter="enter('7005237563799171506');" onmouseout="out('7005237563799171506');" style=""> 983         setTitleSpan(editable);                                                                          </span>
<span class="-7817145757567347170" onmouseenter="enter('-7817145757567347170');" onmouseout="out('-7817145757567347170');" style=""> 984         mContentEditText.fixLineSpacing();                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 985     }                                                                                                    </span>
<span  style=""> 986                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 987     @Override                                                                                            </span>
<span class="-6004971105578563950" onmouseenter="enter('-6004971105578563950');" onmouseout="out('-6004971105578563950');" style=""> 988     public void onTextChanged(CharSequence charSequence, int start, int before, int count) {             </span>
<span class="2036741165452809133" onmouseenter="enter('2036741165452809133');" onmouseout="out('2036741165452809133');" style=""> 989         // When text changes, start timer that will fire after AUTOSAVE_DELAY_MILLIS passes              </span>
<span class="-2149096896161266035" onmouseenter="enter('-2149096896161266035');" onmouseout="out('-2149096896161266035');" style=""> 990         if (mAutoSaveHandler != null) {                                                                  </span>
<span class="-5465787548318672754" onmouseenter="enter('-5465787548318672754');" onmouseout="out('-5465787548318672754');" style=""> 991             mAutoSaveHandler.removeCallbacks(mAutoSaveRunnable);                                         </span>
<span class="3237260668993885548" onmouseenter="enter('3237260668993885548');" onmouseout="out('3237260668993885548');" style=""> 992             mAutoSaveHandler.postDelayed(mAutoSaveRunnable, AUTOSAVE_DELAY_MILLIS);                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 993         }                                                                                                </span>
<span  style=""> 994                                                                                                          </span>
<span class="5409551732025834677" onmouseenter="enter('5409551732025834677');" onmouseout="out('5409551732025834677');" style=""> 995         // Remove search highlight spans when note content changes                                       </span>
<span class="5721815250190525804" onmouseenter="enter('5721815250190525804');" onmouseout="out('5721815250190525804');" style=""> 996         if (mMatchOffsets != null) {                                                                     </span>
<span class="-5254682256162211718" onmouseenter="enter('-5254682256162211718');" onmouseout="out('-5254682256162211718');" style=""> 997             mMatchOffsets = null;                                                                        </span>
<span class="2930846742809702691" onmouseenter="enter('2930846742809702691');" onmouseout="out('2930846742809702691');" style=""> 998             mHighlighter.removeMatches();                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 999         }                                                                                                </span>
<span  style="">1000                                                                                                          </span>
<span class="-5025193748599864334" onmouseenter="enter('-5025193748599864334');" onmouseout="out('-5025193748599864334');" style="">1001         if (!DisplayUtils.isLargeScreenLandscape(requireContext())) {                                    </span>
<span class="7215698034791320296" onmouseenter="enter('7215698034791320296');" onmouseout="out('7215698034791320296');" style="">1002             ((NoteEditorActivity) requireActivity()).setSearchMatchBarVisible(false);                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1003         }                                                                                                </span>
<span  style="">1004                                                                                                          </span>
<span class="8786270533737299967" onmouseenter="enter('8786270533737299967');" onmouseout="out('8786270533737299967');" style="">1005         // Temporarily remove the text watcher as we process checklists to prevent callback looping      </span>
<span class="2095720317794995897" onmouseenter="enter('2095720317794995897');" onmouseout="out('2095720317794995897');" style="">1006         mContentEditText.removeTextChangedListener(this);                                                </span>
<span class="-5644737892245114659" onmouseenter="enter('-5644737892245114659');" onmouseout="out('-5644737892245114659');" style="">1007         mContentEditText.processChecklists();                                                            </span>
<span class="8154880790715077967" onmouseenter="enter('8154880790715077967');" onmouseout="out('8154880790715077967');" style="">1008         mContentEditText.addTextChangedListener(this);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1009     }                                                                                                    </span>
<span  style="">1010                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1011     /**                                                                                                  </span>
<span class="-6594088544842821458" onmouseenter="enter('-6594088544842821458');" onmouseout="out('-6594088544842821458');" style="">1012      * Set the note title to be a larger size and bold style.                                            </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1013      *                                                                                                   </span>
<span class="108828526699167208" onmouseenter="enter('108828526699167208');" onmouseout="out('108828526699167208');" style="">1014      * Remove all existing spans before applying spans or performance issues will occur.  Since both     </span>
<span class="-1228016533055730748" onmouseenter="enter('-1228016533055730748');" onmouseout="out('-1228016533055730748');" style="">1015      * {@link RelativeSizeSpan} and {@link StyleSpan} inherit from {@link MetricAffectingSpan}, all      </span>
<span class="7893653129030957545" onmouseenter="enter('7893653129030957545');" onmouseout="out('7893653129030957545');" style="">1016      * spans are removed when {@link MetricAffectingSpan} is removed.                                    </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1017      */                                                                                                  </span>
<span class="6849776144692122373" onmouseenter="enter('6849776144692122373');" onmouseout="out('6849776144692122373');" style="">1018     private void setTitleSpan(Editable editable) {                                                       </span>
<span class="-8681644249984288865" onmouseenter="enter('-8681644249984288865');" onmouseout="out('-8681644249984288865');" style=""><abbr title="1019         for (MetricAffectingSpan span : editable.getSpans(0, editable.length(), MetricAffectingSpan.class)) {">1019         for (MetricAffectingSpan span : editable.getSpans(0, editable.length(), MetricAffectingSpan.class🔵</abbr></span>
<span class="3876289346053092432" onmouseenter="enter('3876289346053092432');" onmouseout="out('3876289346053092432');" style="">1020             if (span instanceof RelativeSizeSpan || span instanceof StyleSpan) {                         </span>
<span class="-4538099325482792099" onmouseenter="enter('-4538099325482792099');" onmouseout="out('-4538099325482792099');" style="">1021                 editable.removeSpan(span);                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1022             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1023         }                                                                                                </span>
<span  style="">1024                                                                                                          </span>
<span class="-901734861574280266" onmouseenter="enter('-901734861574280266');" onmouseout="out('-901734861574280266');" style="">1025         int newLinePosition = getNoteContentString().indexOf(&quot;\n&quot;);                                      </span>
<span  style="">1026                                                                                                          </span>
<span class="-3049917029530340718" onmouseenter="enter('-3049917029530340718');" onmouseout="out('-3049917029530340718');" style="">1027         if (newLinePosition == 0) {                                                                      </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1028             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1029         }                                                                                                </span>
<span  style="">1030                                                                                                          </span>
<span class="2729500347175780141" onmouseenter="enter('2729500347175780141');" onmouseout="out('2729500347175780141');" style="">1031         int titleEndPosition = (newLinePosition &gt; 0) ? newLinePosition : editable.length();              </span>
<span class="2132700250735486844" onmouseenter="enter('2132700250735486844');" onmouseout="out('2132700250735486844');" style=""><abbr title="1032         editable.setSpan(new RelativeSizeSpan(1.3f), 0, titleEndPosition, Spanned.SPAN_INCLUSIVE_EXCLUSIVE);">1032         editable.setSpan(new RelativeSizeSpan(1.3f), 0, titleEndPosition, Spanned.SPAN_INCLUSIVE_EXCLUSIV🔵</abbr></span>
<span class="2779153330581394975" onmouseenter="enter('2779153330581394975');" onmouseout="out('2779153330581394975');" style=""><abbr title="1033         editable.setSpan(new StyleSpan(Typeface.BOLD), 0, titleEndPosition, Spanned.SPAN_INCLUSIVE_EXCLUSIVE);">1033         editable.setSpan(new StyleSpan(Typeface.BOLD), 0, titleEndPosition, Spanned.SPAN_INCLUSIVE_EXCLUS🔵</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1034     }                                                                                                    </span>
<span  style="">1035                                                                                                          </span>
<span class="8395667075038215241" onmouseenter="enter('8395667075038215241');" onmouseout="out('8395667075038215241');" style="">1036     private void attemptAutoList(Editable editable) {                                                    </span>
<span class="1630313539519665774" onmouseenter="enter('1630313539519665774');" onmouseout="out('1630313539519665774');" style="">1037         int oldCursorPosition = mCurrentCursorPosition;                                                  </span>
<span class="2154628209294087333" onmouseenter="enter('2154628209294087333');" onmouseout="out('2154628209294087333');" style="">1038         mCurrentCursorPosition = mContentEditText.getSelectionStart();                                   </span>
<span class="-1456162723219098064" onmouseenter="enter('-1456162723219098064');" onmouseout="out('-1456162723219098064');" style="">1039         AutoBullet.apply(editable, oldCursorPosition, mCurrentCursorPosition);                           </span>
<span class="2154628209294087333" onmouseenter="enter('2154628209294087333');" onmouseout="out('2154628209294087333');" style="">1040         mCurrentCursorPosition = mContentEditText.getSelectionStart();                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1041     }                                                                                                    </span>
<span  style="">1042                                                                                                          </span>
<span class="-6933317077070028336" onmouseenter="enter('-6933317077070028336');" onmouseout="out('-6933317077070028336');" style="">1043     private void saveAndSyncNote() {                                                                     </span>
<span class="-6566957513776356959" onmouseenter="enter('-6566957513776356959');" onmouseout="out('-6566957513776356959');" style="">1044         if (mNote == null) {                                                                             </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1045             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1046         }                                                                                                </span>
<span  style="">1047                                                                                                          </span>
<span class="1712554612672119113" onmouseenter="enter('1712554612672119113');" onmouseout="out('1712554612672119113');" style="">1048         AppLog.add(                                                                                      </span>
<span class="5578246801297368785" onmouseenter="enter('5578246801297368785');" onmouseout="out('5578246801297368785');" style="">1049             Type.ACTION,                                                                                 </span>
<span class="5428018773251277804" onmouseenter="enter('5428018773251277804');" onmouseout="out('5428018773251277804');" style="">1050             &quot;Edited note (ID: &quot; + mNote.getSimperiumKey() +                                              </span>
<span class="7932348859464220053" onmouseenter="enter('7932348859464220053');" onmouseout="out('7932348859464220053');" style="">1051                 &quot; / Title: &quot; + mNote.getTitle() +                                                        </span>
<span class="8952698626932118067" onmouseenter="enter('8952698626932118067');" onmouseout="out('8952698626932118067');" style="">1052                 &quot; / Characters: &quot; + NoteUtils.getCharactersCount(mNote.getContent()) +                   </span>
<span class="638163407399296951" onmouseenter="enter('638163407399296951');" onmouseout="out('638163407399296951');" style="">1053                 &quot; / Words: &quot; + NoteUtils.getWordCount(mNote.getContent()) + &quot;)&quot;                          </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">1054         );                                                                                               </span>
<span class="16839101082915315" onmouseenter="enter('16839101082915315');" onmouseout="out('16839101082915315');" style="">1055         new SaveNoteTask(this).executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR);                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1056     }                                                                                                    </span>
<span  style="">1057                                                                                                          </span>
<span class="-710883025591886987" onmouseenter="enter('-710883025591886987');" onmouseout="out('-710883025591886987');" style="">1058     public boolean isPlaceholderVisible() {                                                              </span>
<span class="-4989874178895443572" onmouseenter="enter('-4989874178895443572');" onmouseout="out('-4989874178895443572');" style="">1059         if (mPlaceholderView != null) {                                                                  </span>
<span class="9146837192541101428" onmouseenter="enter('9146837192541101428');" onmouseout="out('9146837192541101428');" style="">1060             return mPlaceholderView.getVisibility() == View.VISIBLE;                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1061         } else {                                                                                         </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1062             return false;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1063         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1064     }                                                                                                    </span>
<span  style="">1065                                                                                                          </span>
<span class="-4564004023547017377" onmouseenter="enter('-4564004023547017377');" onmouseout="out('-4564004023547017377');" style="">1066     public void setPlaceholderVisible(boolean isVisible) {                                               </span>
<span class="-6467031518050872536" onmouseenter="enter('-6467031518050872536');" onmouseout="out('-6467031518050872536');" style="">1067         if (isVisible) {                                                                                 </span>
<span class="1687907534970456445" onmouseenter="enter('1687907534970456445');" onmouseout="out('1687907534970456445');" style="">1068             mNote = null;                                                                                </span>
<span class="-3407359796970873837" onmouseenter="enter('-3407359796970873837');" onmouseout="out('-3407359796970873837');" style="">1069             mContentEditText.setText(&quot;&quot;);                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1070         }                                                                                                </span>
<span  style="">1071                                                                                                          </span>
<span class="-4989874178895443572" onmouseenter="enter('-4989874178895443572');" onmouseout="out('-4989874178895443572');" style="">1072         if (mPlaceholderView != null) {                                                                  </span>
<span class="-1939399638656140532" onmouseenter="enter('-1939399638656140532');" onmouseout="out('-1939399638656140532');" style="">1073             mPlaceholderView.setVisibility(isVisible ? View.VISIBLE : View.GONE);                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1074         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1075     }                                                                                                    </span>
<span  style="">1076                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1077     @Override                                                                                            </span>
<span class="-3315120631467309087" onmouseenter="enter('-3315120631467309087');" onmouseout="out('-3315120631467309087');" style="">1078     public void onFocusChange(View v, boolean hasFocus) {                                                </span>
<span class="-6285712256166584728" onmouseenter="enter('-6285712256166584728');" onmouseout="out('-6285712256166584728');" style="">1079         if (!hasFocus) {                                                                                 </span>
<span class="6004881889903239201" onmouseenter="enter('6004881889903239201');" onmouseout="out('6004881889903239201');" style="">1080             String tags = getNoteTagsString().trim();                                                    </span>
<span  style="">1081                                                                                                          </span>
<span class="-8405816820067798370" onmouseenter="enter('-8405816820067798370');" onmouseout="out('-8405816820067798370');" style="">1082             if (mTagInput.getText().toString().trim().length() &gt; 0                                       </span>
<span class="-3023921947470011218" onmouseenter="enter('-3023921947470011218');" onmouseout="out('-3023921947470011218');" style="">1083                 &amp;&amp; TagUtils.hashTagValid(mTagInput.getText().toString().trim())) {                       </span>
<span class="-8826289385438230332" onmouseenter="enter('-8826289385438230332');" onmouseout="out('-8826289385438230332');" style="">1084                 onTagAdded(mTagInput.getText().toString());                                              </span>
<span class="-2106738445799932691" onmouseenter="enter('-2106738445799932691');" onmouseout="out('-2106738445799932691');" style="">1085             } else if (tags.length() &gt; 0) {                                                              </span>
<span class="822236618440501069" onmouseenter="enter('822236618440501069');" onmouseout="out('822236618440501069');" style="">1086                 setChips(tags);                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1087             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1088         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1089     }                                                                                                    </span>
<span  style="">1090                                                                                                          </span>
<span class="4758115017921537055" onmouseenter="enter('4758115017921537055');" onmouseout="out('4758115017921537055');" style="">1091     private Note getNote() {                                                                             </span>
<span class="6687317620803594982" onmouseenter="enter('6687317620803594982');" onmouseout="out('6687317620803594982');" style="">1092         return mNote;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1093     }                                                                                                    </span>
<span  style="">1094                                                                                                          </span>
<span class="627621646474661739" onmouseenter="enter('627621646474661739');" onmouseout="out('627621646474661739');" style="">1095     public void setNote(String noteID) {                                                                 </span>
<span class="-6972394152055286124" onmouseenter="enter('-6972394152055286124');" onmouseout="out('-6972394152055286124');" style="">1096         setNote(noteID, null);                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1097     }                                                                                                    </span>
<span  style="">1098                                                                                                          </span>
<span class="-260751237439499239" onmouseenter="enter('-260751237439499239');" onmouseout="out('-260751237439499239');" style="">1099     private String getNoteContentString() {                                                              </span>
<span class="-8451380960236704581" onmouseenter="enter('-8451380960236704581');" onmouseout="out('-8451380960236704581');" style="">1100         if (mContentEditText == null || mContentEditText.getText() == null) {                            </span>
<span class="-8289946804601166879" onmouseenter="enter('-8289946804601166879');" onmouseout="out('-8289946804601166879');" style="">1101             return &quot;&quot;;                                                                                   </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1102         } else {                                                                                         </span>
<span class="9069870454824528783" onmouseenter="enter('9069870454824528783');" onmouseout="out('9069870454824528783');" style="">1103             return mContentEditText.getText().toString();                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1104         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1105     }                                                                                                    </span>
<span  style="">1106                                                                                                          </span>
<span class="1791713131652036535" onmouseenter="enter('1791713131652036535');" onmouseout="out('1791713131652036535');" style="">1107     private String getNoteTagsString() {                                                                 </span>
<span class="-6446890674263139592" onmouseenter="enter('-6446890674263139592');" onmouseout="out('-6446890674263139592');" style="">1108         StringBuilder tags = new StringBuilder();                                                        </span>
<span  style="">1109                                                                                                          </span>
<span class="-4475001311202686832" onmouseenter="enter('-4475001311202686832');" onmouseout="out('-4475001311202686832');" style="">1110         for (int i= 0; i &lt; mTagChips.getChildCount(); i++) {                                             </span>
<span class="5232521310381718252" onmouseenter="enter('5232521310381718252');" onmouseout="out('5232521310381718252');" style="">1111             tags.append(((Chip) mTagChips.getChildAt(i)).getText()).append(&quot; &quot;);                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1112         }                                                                                                </span>
<span  style="">1113                                                                                                          </span>
<span class="-8755942361109275249" onmouseenter="enter('-8755942361109275249');" onmouseout="out('-8755942361109275249');" style="">1114         return tags.toString();                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1115     }                                                                                                    </span>
<span  style="">1116                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1117     /**                                                                                                  </span>
<span class="-7590765322671442969" onmouseenter="enter('-7590765322671442969');" onmouseout="out('-7590765322671442969');" style="">1118      * Share bottom sheet callbacks                                                                      </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1119      */                                                                                                  </span>
<span  style="">1120                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1121     @Override                                                                                            </span>
<span class="2968602784493438427" onmouseenter="enter('2968602784493438427');" onmouseout="out('2968602784493438427');" style="">1122     public void onSharePublishClicked() {                                                                </span>
<span class="7985358866333072123" onmouseenter="enter('7985358866333072123');" onmouseout="out('7985358866333072123');" style="">1123         publishNote();                                                                                   </span>
<span class="4172821335322908069" onmouseenter="enter('4172821335322908069');" onmouseout="out('4172821335322908069');" style="">1124         if (mShareBottomSheet != null) {                                                                 </span>
<span class="-4836834074376612243" onmouseenter="enter('-4836834074376612243');" onmouseout="out('-4836834074376612243');" style="">1125             mShareBottomSheet.dismiss();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1126         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1127     }                                                                                                    </span>
<span  style="">1128                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1129     @Override                                                                                            </span>
<span class="2232780665187036053" onmouseenter="enter('2232780665187036053');" onmouseout="out('2232780665187036053');" style="">1130     public void onShareUnpublishClicked() {                                                              </span>
<span class="4812123925634099655" onmouseenter="enter('4812123925634099655');" onmouseout="out('4812123925634099655');" style="">1131         unpublishNote();                                                                                 </span>
<span class="4172821335322908069" onmouseenter="enter('4172821335322908069');" onmouseout="out('4172821335322908069');" style="">1132         if (mShareBottomSheet != null) {                                                                 </span>
<span class="-4836834074376612243" onmouseenter="enter('-4836834074376612243');" onmouseout="out('-4836834074376612243');" style="">1133             mShareBottomSheet.dismiss();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1134         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1135     }                                                                                                    </span>
<span  style="">1136                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1137     @Override                                                                                            </span>
<span class="1895662807531612039" onmouseenter="enter('1895662807531612039');" onmouseout="out('1895662807531612039');" style="">1138     public void onWordPressPostClicked() {                                                               </span>
<span class="4172821335322908069" onmouseenter="enter('4172821335322908069');" onmouseout="out('4172821335322908069');" style="">1139         if (mShareBottomSheet != null) {                                                                 </span>
<span class="-4836834074376612243" onmouseenter="enter('-4836834074376612243');" onmouseout="out('-4836834074376612243');" style="">1140             mShareBottomSheet.dismiss();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1141         }                                                                                                </span>
<span  style="">1142                                                                                                          </span>
<span class="3314881699989820063" onmouseenter="enter('3314881699989820063');" onmouseout="out('3314881699989820063');" style="">1143         if (getFragmentManager() == null) {                                                              </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1144             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1145         }                                                                                                </span>
<span  style="">1146                                                                                                          </span>
<span class="5636539351844670959" onmouseenter="enter('5636539351844670959');" onmouseout="out('5636539351844670959');" style="">1147         FragmentTransaction ft = getFragmentManager().beginTransaction();                                </span>
<span class="-500976049723048206" onmouseenter="enter('-500976049723048206');" onmouseout="out('-500976049723048206');" style="">1148         Fragment prev = getFragmentManager().findFragmentByTag(WordPressDialogFragment.DIALOG_TAG);      </span>
<span class="6915708381430486628" onmouseenter="enter('6915708381430486628');" onmouseout="out('6915708381430486628');" style="">1149         if (prev != null) {                                                                              </span>
<span class="6191551415319260668" onmouseenter="enter('6191551415319260668');" onmouseout="out('6191551415319260668');" style="">1150             ft.remove(prev);                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1151         }                                                                                                </span>
<span class="4313436897323820694" onmouseenter="enter('4313436897323820694');" onmouseout="out('4313436897323820694');" style="">1152         ft.addToBackStack(null);                                                                         </span>
<span  style="">1153                                                                                                          </span>
<span class="-5506082590725208104" onmouseenter="enter('-5506082590725208104');" onmouseout="out('-5506082590725208104');" style="">1154         // Create and show the dialog.                                                                   </span>
<span class="1756820858117205319" onmouseenter="enter('1756820858117205319');" onmouseout="out('1756820858117205319');" style="">1155         WordPressDialogFragment wpDialogFragment = new WordPressDialogFragment();                        </span>
<span class="8550268343842317092" onmouseenter="enter('8550268343842317092');" onmouseout="out('8550268343842317092');" style="">1156         wpDialogFragment.setNote(mNote);                                                                 </span>
<span class="-7041960731203586914" onmouseenter="enter('-7041960731203586914');" onmouseout="out('-7041960731203586914');" style="">1157         wpDialogFragment.show(ft, WordPressDialogFragment.DIALOG_TAG);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1158     }                                                                                                    </span>
<span  style="">1159                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1160     @Override                                                                                            </span>
<span class="8390280653962331927" onmouseenter="enter('8390280653962331927');" onmouseout="out('8390280653962331927');" style="">1161     public void onShareCollaborateClicked() {                                                            </span>
<span class="8508848920358466816" onmouseenter="enter('8508848920358466816');" onmouseout="out('8508848920358466816');" style="">1162         Toast.makeText(getActivity(), R.string.collaborate_message, Toast.LENGTH_LONG).show();           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1163     }                                                                                                    </span>
<span  style="">1164                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1165     @Override                                                                                            </span>
<span class="-3569494199320067069" onmouseenter="enter('-3569494199320067069');" onmouseout="out('-3569494199320067069');" style="">1166     public void onShareDismissed() {                                                                     </span>
<span  style="">1167                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1168     }                                                                                                    </span>
<span  style="">1169                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1170     /**                                                                                                  </span>
<span class="358915473298384679" onmouseenter="enter('358915473298384679');" onmouseout="out('358915473298384679');" style="">1171      * History bottom sheet listeners                                                                    </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1172      */                                                                                                  </span>
<span  style="">1173                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1174     @Override                                                                                            </span>
<span class="486589109199450506" onmouseenter="enter('486589109199450506');" onmouseout="out('486589109199450506');" style="">1175     public void onHistoryCancelClicked() {                                                               </span>
<span class="4148799213240179760" onmouseenter="enter('4148799213240179760');" onmouseout="out('4148799213240179760');" style="">1176         mContentEditText.setText(mNote.getContent());                                                    </span>
<span class="-7542139914053196629" onmouseenter="enter('-7542139914053196629');" onmouseout="out('-7542139914053196629');" style="">1177         if (mHistoryBottomSheet != null) {                                                               </span>
<span class="-2599981510781765889" onmouseenter="enter('-2599981510781765889');" onmouseout="out('-2599981510781765889');" style="">1178             mHistoryBottomSheet.dismiss();                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1179         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1180     }                                                                                                    </span>
<span  style="">1181                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1182     @Override                                                                                            </span>
<span class="1746452780349475726" onmouseenter="enter('1746452780349475726');" onmouseout="out('1746452780349475726');" style="">1183     public void onHistoryRestoreClicked() {                                                              </span>
<span class="-7542139914053196629" onmouseenter="enter('-7542139914053196629');" onmouseout="out('-7542139914053196629');" style="">1184         if (mHistoryBottomSheet != null) {                                                               </span>
<span class="-2599981510781765889" onmouseenter="enter('-2599981510781765889');" onmouseout="out('-2599981510781765889');" style="">1185             mHistoryBottomSheet.dismiss();                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1186         }                                                                                                </span>
<span class="-2186856349666885424" onmouseenter="enter('-2186856349666885424');" onmouseout="out('-2186856349666885424');" style="">1187         saveAndSyncNote();                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1188     }                                                                                                    </span>
<span  style="">1189                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1190     @Override                                                                                            </span>
<span class="-1766878417892030172" onmouseenter="enter('-1766878417892030172');" onmouseout="out('-1766878417892030172');" style="">1191     public void onHistoryDismissed() {                                                                   </span>
<span class="7350001942179054285" onmouseenter="enter('7350001942179054285');" onmouseout="out('7350001942179054285');" style="">1192         if (!mHistoryBottomSheet.didTapOnButton()) {                                                     </span>
<span class="4148799213240179760" onmouseenter="enter('4148799213240179760');" onmouseout="out('4148799213240179760');" style="">1193             mContentEditText.setText(mNote.getContent());                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1194         }                                                                                                </span>
<span  style="">1195                                                                                                          </span>
<span class="16247739636052398" onmouseenter="enter('16247739636052398');" onmouseout="out('16247739636052398');" style="">1196         if (mHistoryTimeoutHandler != null) {                                                            </span>
<span class="7316258928910882956" onmouseenter="enter('7316258928910882956');" onmouseout="out('7316258928910882956');" style="">1197             mHistoryTimeoutHandler.removeCallbacks(mHistoryTimeoutRunnable);                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1198         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1199     }                                                                                                    </span>
<span  style="">1200                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1201     @Override                                                                                            </span>
<span class="6142431680500084708" onmouseenter="enter('6142431680500084708');" onmouseout="out('6142431680500084708');" style="">1202     public void onHistoryUpdateNote(String content) {                                                    </span>
<span class="5474545381550473491" onmouseenter="enter('5474545381550473491');" onmouseout="out('5474545381550473491');" style="">1203         mContentEditText.setText(content);                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1204     }                                                                                                    </span>
<span  style="">1205                                                                                                          </span>
<span class="-2294831155573525866" onmouseenter="enter('-2294831155573525866');" onmouseout="out('-2294831155573525866');" style="">1206     private void saveNote() {                                                                            </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1207         try {                                                                                            </span>
<span class="1165974910453313736" onmouseenter="enter('1165974910453313736');" onmouseout="out('1165974910453313736');" style="">1208             if (mNote == null || mNotesBucket == null || mContentEditText == null || mIsLoadingNote ||   </span>
<span class="-8027031690448598107" onmouseenter="enter('-8027031690448598107');" onmouseout="out('-8027031690448598107');" style=""><abbr title="1209                 (mHistoryBottomSheet != null &amp;&amp; mHistoryBottomSheet.getDialog() != null &amp;&amp; mHistoryBottomSheet.getDialog().isShowing())) {">1209                 (mHistoryBottomSheet != null &amp;&amp; mHistoryBottomSheet.getDialog() != null &amp;&amp; mHistoryBottom🔵</abbr></span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1210                 return;                                                                                  </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1211             } else {                                                                                     </span>
<span class="-1125588719504868669" onmouseenter="enter('-1125588719504868669');" onmouseout="out('-1125588719504868669');" style="">1212                 mNote = mNotesBucket.get(mNote.getSimperiumKey());                                       </span>
<span class="8897386780031316770" onmouseenter="enter('8897386780031316770');" onmouseout="out('8897386780031316770');" style="">1213                 mIsPreviewEnabled = mNote.isPreviewEnabled();                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1214             }                                                                                            </span>
<span  style="">1215                                                                                                          </span>
<span class="6475969200315240778" onmouseenter="enter('6475969200315240778');" onmouseout="out('6475969200315240778');" style="">1216             String content = mContentEditText.getPlainTextContent();                                     </span>
<span class="-8502490389039341280" onmouseenter="enter('-8502490389039341280');" onmouseout="out('-8502490389039341280');" style="">1217             String tagString = getNoteTagsString();                                                      </span>
<span  style="">1218                                                                                                          </span>
<span class="3350877423550460602" onmouseenter="enter('3350877423550460602');" onmouseout="out('3350877423550460602');" style=""><abbr title="1219             if (mNote.hasChanges(content, tagString.trim(), mNote.isPinned(), mIsMarkdownEnabled, mIsPreviewEnabled)) {">1219             if (mNote.hasChanges(content, tagString.trim(), mNote.isPinned(), mIsMarkdownEnabled, mIsPrev🔵</abbr></span>
<span class="843504871988910810" onmouseenter="enter('843504871988910810');" onmouseout="out('843504871988910810');" style="">1220                 mNote.setContent(content);                                                               </span>
<span class="1553130968631643861" onmouseenter="enter('1553130968631643861');" onmouseout="out('1553130968631643861');" style="">1221                 mNote.setTagString(tagString);                                                           </span>
<span class="-3343075472306200704" onmouseenter="enter('-3343075472306200704');" onmouseout="out('-3343075472306200704');" style="">1222                 mNote.setModificationDate(Calendar.getInstance());                                       </span>
<span class="-2172998267651300967" onmouseenter="enter('-2172998267651300967');" onmouseout="out('-2172998267651300967');" style="">1223                 mNote.setMarkdownEnabled(mIsMarkdownEnabled);                                            </span>
<span class="822592535093481459" onmouseenter="enter('822592535093481459');" onmouseout="out('822592535093481459');" style="">1224                 mNote.setPreviewEnabled(mIsPreviewEnabled);                                              </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style="">1225                 mNote.save();                                                                            </span>
<span  style="">1226                                                                                                          </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style="">1227                 AnalyticsTracker.track(                                                                  </span>
<span class="5989088647015258106" onmouseenter="enter('5989088647015258106');" onmouseout="out('5989088647015258106');" style="">1228                     EDITOR_NOTE_EDITED,                                                                  </span>
<span class="-2430475172570880083" onmouseenter="enter('-2430475172570880083');" onmouseout="out('-2430475172570880083');" style="">1229                     CATEGORY_NOTE,                                                                       </span>
<span class="7262276752106887505" onmouseenter="enter('7262276752106887505');" onmouseout="out('7262276752106887505');" style="">1230                     &quot;editor_save&quot;                                                                        </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">1231                 );                                                                                       </span>
<span  style="">1232                                                                                                          </span>
<span class="1712554612672119113" onmouseenter="enter('1712554612672119113');" onmouseout="out('1712554612672119113');" style="">1233                 AppLog.add(                                                                              </span>
<span class="5387827170384214934" onmouseenter="enter('5387827170384214934');" onmouseout="out('5387827170384214934');" style="">1234                     Type.SYNC,                                                                           </span>
<span class="6067618927567422040" onmouseenter="enter('6067618927567422040');" onmouseout="out('6067618927567422040');" style="">1235                     &quot;Saved note locally in NoteEditorFragment (ID: &quot; + mNote.getSimperiumKey() +         </span>
<span class="7932348859464220053" onmouseenter="enter('7932348859464220053');" onmouseout="out('7932348859464220053');" style="">1236                         &quot; / Title: &quot; + mNote.getTitle() +                                                </span>
<span class="431319751787505650" onmouseenter="enter('431319751787505650');" onmouseout="out('431319751787505650');" style="">1237                         &quot; / Characters: &quot; + NoteUtils.getCharactersCount(content) +                      </span>
<span class="-6931859245270948040" onmouseenter="enter('-6931859245270948040');" onmouseout="out('-6931859245270948040');" style="">1238                         &quot; / Words: &quot; + NoteUtils.getWordCount(content) + &quot;)&quot;                             </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">1239                 );                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1240             }                                                                                            </span>
<span class="-3643940737031631548" onmouseenter="enter('-3643940737031631548');" onmouseout="out('-3643940737031631548');" style="">1241         } catch (BucketObjectMissingException exception) {                                               </span>
<span class="-5036816163125879973" onmouseenter="enter('-5036816163125879973');" onmouseout="out('-5036816163125879973');" style="">1242             exception.printStackTrace();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1243         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1244     }                                                                                                    </span>
<span  style="">1245                                                                                                          </span>
<span class="-6769383367293074987" onmouseenter="enter('-6769383367293074987');" onmouseout="out('-6769383367293074987');" style="">1246     // Checks if cursor is at a URL when the selection changes                                           </span>
<span class="499820509706145242" onmouseenter="enter('499820509706145242');" onmouseout="out('499820509706145242');" style="">1247     // If it is a URL, show the contextual action bar                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1248     @Override                                                                                            </span>
<span class="-6619706727651867065" onmouseenter="enter('-6619706727651867065');" onmouseout="out('-6619706727651867065');" style="">1249     public void onSelectionChanged(int selStart, int selEnd) {                                           </span>
<span class="7239443724625299771" onmouseenter="enter('7239443724625299771');" onmouseout="out('7239443724625299771');" style="">1250         mCurrentCursorPosition = selEnd;                                                                 </span>
<span  style="">1251                                                                                                          </span>
<span class="-5773931921061181239" onmouseenter="enter('-5773931921061181239');" onmouseout="out('-5773931921061181239');" style="">1252         if (selStart == selEnd) {                                                                        </span>
<span class="-1073801886026856185" onmouseenter="enter('-1073801886026856185');" onmouseout="out('-1073801886026856185');" style="">1253             Editable noteContent = mContentEditText.getText();                                           </span>
<span  style="">1254                                                                                                          </span>
<span class="-3728163105261704014" onmouseenter="enter('-3728163105261704014');" onmouseout="out('-3728163105261704014');" style="">1255             if (noteContent == null) {                                                                   </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1256                 return;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1257             }                                                                                            </span>
<span  style="">1258                                                                                                          </span>
<span class="1258634593958745929" onmouseenter="enter('1258634593958745929');" onmouseout="out('1258634593958745929');" style="">1259             URLSpan[] urlSpans = noteContent.getSpans(selStart, selStart, URLSpan.class);                </span>
<span  style="">1260                                                                                                          </span>
<span class="8265917182779455796" onmouseenter="enter('8265917182779455796');" onmouseout="out('8265917182779455796');" style="">1261             if (urlSpans.length &gt; 0) {                                                                   </span>
<span class="379938049561077801" onmouseenter="enter('379938049561077801');" onmouseout="out('379938049561077801');" style="">1262                 URLSpan urlSpan = urlSpans[0];                                                           </span>
<span class="7382553573082356877" onmouseenter="enter('7382553573082356877');" onmouseout="out('7382553573082356877');" style="">1263                 mLinkUrl = urlSpan.getURL();                                                             </span>
<span class="-2685141031372274993" onmouseenter="enter('-2685141031372274993');" onmouseout="out('-2685141031372274993');" style=""><abbr title="1264                 mLinkText = noteContent.subSequence(noteContent.getSpanStart(urlSpan), noteContent.getSpanEnd(urlSpan)).toString();">1264                 mLinkText = noteContent.subSequence(noteContent.getSpanStart(urlSpan), noteContent.getSpa🔵</abbr></span>
<span  style="">1265                                                                                                          </span>
<span class="-1291529600191394909" onmouseenter="enter('-1291529600191394909');" onmouseout="out('-1291529600191394909');" style="">1266                 if (mActionMode != null) {                                                               </span>
<span class="8256553390773794578" onmouseenter="enter('8256553390773794578');" onmouseout="out('8256553390773794578');" style="">1267                     mActionMode.setSubtitle(mLinkText);                                                  </span>
<span class="-5782179795728005521" onmouseenter="enter('-5782179795728005521');" onmouseout="out('-5782179795728005521');" style="">1268                     updateMenuItems();                                                                   </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1269                     return;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1270                 }                                                                                        </span>
<span  style="">1271                                                                                                          </span>
<span class="-4243988111679111503" onmouseenter="enter('-4243988111679111503');" onmouseout="out('-4243988111679111503');" style="">1272                 // Show the Contextual Action Bar                                                        </span>
<span class="4809573797151136036" onmouseenter="enter('4809573797151136036');" onmouseout="out('4809573797151136036');" style="">1273                 if (getActivity() != null) {                                                             </span>
<span class="-21436323499410640" onmouseenter="enter('-21436323499410640');" onmouseout="out('-21436323499410640');" style=""><abbr title="1274                     mActionMode = ((AppCompatActivity) getActivity()).startSupportActionMode(mActionModeCallback);">1274                     mActionMode = ((AppCompatActivity) getActivity()).startSupportActionMode(mActionModeC🔵</abbr></span>
<span  style="">1275                                                                                                          </span>
<span class="-1291529600191394909" onmouseenter="enter('-1291529600191394909');" onmouseout="out('-1291529600191394909');" style="">1276                     if (mActionMode != null) {                                                           </span>
<span class="8256553390773794578" onmouseenter="enter('8256553390773794578');" onmouseout="out('8256553390773794578');" style="">1277                         mActionMode.setSubtitle(mLinkText);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1278                     }                                                                                    </span>
<span  style="">1279                                                                                                          </span>
<span class="-5782179795728005521" onmouseenter="enter('-5782179795728005521');" onmouseout="out('-5782179795728005521');" style="">1280                     updateMenuItems();                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1281                 }                                                                                        </span>
<span class="7515827566305000834" onmouseenter="enter('7515827566305000834');" onmouseout="out('7515827566305000834');" style="">1282             } else if (mActionMode != null) {                                                            </span>
<span class="7165201847947665807" onmouseenter="enter('7165201847947665807');" onmouseout="out('7165201847947665807');" style="">1283                 mActionMode.finish();                                                                    </span>
<span class="291405596407736607" onmouseenter="enter('291405596407736607');" onmouseout="out('291405596407736607');" style="">1284                 mActionMode = null;                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1285             }                                                                                            </span>
<span class="7515827566305000834" onmouseenter="enter('7515827566305000834');" onmouseout="out('7515827566305000834');" style="">1286         } else if (mActionMode != null) {                                                                </span>
<span class="7165201847947665807" onmouseenter="enter('7165201847947665807');" onmouseout="out('7165201847947665807');" style="">1287             mActionMode.finish();                                                                        </span>
<span class="291405596407736607" onmouseenter="enter('291405596407736607');" onmouseout="out('291405596407736607');" style="">1288             mActionMode = null;                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1289         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1290     }                                                                                                    </span>
<span  style="">1291                                                                                                          </span>
<span class="2270277682351720198" onmouseenter="enter('2270277682351720198');" onmouseout="out('2270277682351720198');" style="">1292     private void updateMenuItems() {                                                                     </span>
<span class="-515446486584282912" onmouseenter="enter('-515446486584282912');" onmouseout="out('-515446486584282912');" style="">1293         mCopyMenuItem.setIcon(mCopyIcon);                                                                </span>
<span class="773177223161240604" onmouseenter="enter('773177223161240604');" onmouseout="out('773177223161240604');" style="">1294         mShareMenuItem.setIcon(mShareIcon);                                                              </span>
<span  style="">1295                                                                                                          </span>
<span class="-4542884014549729251" onmouseenter="enter('-4542884014549729251');" onmouseout="out('-4542884014549729251');" style="">1296         if (mViewLinkMenuItem != null &amp;&amp; mLinkUrl != null) {                                             </span>
<span class="7070835845876331574" onmouseenter="enter('7070835845876331574');" onmouseout="out('7070835845876331574');" style="">1297             if (mLinkUrl.startsWith(&quot;tel:&quot;)) {                                                           </span>
<span class="-3393709522714367611" onmouseenter="enter('-3393709522714367611');" onmouseout="out('-3393709522714367611');" style="">1298                 mViewLinkMenuItem.setIcon(mCallIcon);                                                    </span>
<span class="-1045706461125369539" onmouseenter="enter('-1045706461125369539');" onmouseout="out('-1045706461125369539');" style="">1299                 mViewLinkMenuItem.setTitle(getString(R.string.call));                                    </span>
<span class="-4087102511435152339" onmouseenter="enter('-4087102511435152339');" onmouseout="out('-4087102511435152339');" style="">1300             } else if (mLinkUrl.startsWith(&quot;mailto:&quot;)) {                                                 </span>
<span class="3689189789047011289" onmouseenter="enter('3689189789047011289');" onmouseout="out('3689189789047011289');" style="">1301                 mViewLinkMenuItem.setIcon(mEmailIcon);                                                   </span>
<span class="7417350135164215691" onmouseenter="enter('7417350135164215691');" onmouseout="out('7417350135164215691');" style="">1302                 mViewLinkMenuItem.setTitle(getString(R.string.email));                                   </span>
<span class="-1372170246346381865" onmouseenter="enter('-1372170246346381865');" onmouseout="out('-1372170246346381865');" style="">1303             } else if (mLinkUrl.startsWith(&quot;geo:&quot;)) {                                                    </span>
<span class="-4826865256995968603" onmouseenter="enter('-4826865256995968603');" onmouseout="out('-4826865256995968603');" style="">1304                 mViewLinkMenuItem.setIcon(mMapIcon);                                                     </span>
<span class="5018205442899714685" onmouseenter="enter('5018205442899714685');" onmouseout="out('5018205442899714685');" style="">1305                 mViewLinkMenuItem.setTitle(getString(R.string.view_map));                                </span>
<span class="217084746454652922" onmouseenter="enter('217084746454652922');" onmouseout="out('217084746454652922');" style="">1306             } else if (mLinkUrl.startsWith(SIMPLENOTE_LINK_PREFIX)) {                                    </span>
<span class="238390611676684376" onmouseenter="enter('238390611676684376');" onmouseout="out('238390611676684376');" style="">1307                 mViewLinkMenuItem.setIcon(mLinkIcon);                                                    </span>
<span class="-8064422576667643895" onmouseenter="enter('-8064422576667643895');" onmouseout="out('-8064422576667643895');" style="">1308                 mViewLinkMenuItem.setTitle(getString(R.string.open_note));                               </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1309             } else {                                                                                     </span>
<span class="7513617525800990773" onmouseenter="enter('7513617525800990773');" onmouseout="out('7513617525800990773');" style="">1310                 mViewLinkMenuItem.setIcon(mBrowserIcon);                                                 </span>
<span class="4171282647008223100" onmouseenter="enter('4171282647008223100');" onmouseout="out('4171282647008223100');" style="">1311                 mViewLinkMenuItem.setTitle(getString(R.string.view_in_browser));                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1312             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1313         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1314     }                                                                                                    </span>
<span  style="">1315                                                                                                          </span>
<span class="91579398727100136" onmouseenter="enter('91579398727100136');" onmouseout="out('91579398727100136');" style="">1316     private void setPublishedNote(boolean isPublished) {                                                 </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style="">1317         if (mNote != null) {                                                                             </span>
<span class="316653489117166649" onmouseenter="enter('316653489117166649');" onmouseout="out('316653489117166649');" style="">1318             mNote.setPublished(isPublished);                                                             </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style="">1319             mNote.save();                                                                                </span>
<span  style="">1320                                                                                                          </span>
<span class="3198515589608942377" onmouseenter="enter('3198515589608942377');" onmouseout="out('3198515589608942377');" style="">1321             // reset publish status in 20 seconds if we don&#x27;t hear back from Simperium                   </span>
<span class="-8751687465189974985" onmouseenter="enter('-8751687465189974985');" onmouseout="out('-8751687465189974985');" style="">1322             mPublishTimeoutHandler.postDelayed(mPublishTimeoutRunnable, PUBLISH_TIMEOUT);                </span>
<span  style="">1323                                                                                                          </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style="">1324             AnalyticsTracker.track(                                                                      </span>
<span class="1199660928845890452" onmouseenter="enter('1199660928845890452');" onmouseout="out('1199660928845890452');" style="">1325                 isPublished ? EDITOR_NOTE_PUBLISHED : EDITOR_NOTE_UNPUBLISHED,                           </span>
<span class="-2430475172570880083" onmouseenter="enter('-2430475172570880083');" onmouseout="out('-2430475172570880083');" style="">1326                 CATEGORY_NOTE,                                                                           </span>
<span class="-4469222051298874183" onmouseenter="enter('-4469222051298874183');" onmouseout="out('-4469222051298874183');" style="">1327                 &quot;publish_note_button&quot;                                                                    </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">1328             );                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1329         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1330     }                                                                                                    </span>
<span  style="">1331                                                                                                          </span>
<span class="-8415113329489780394" onmouseenter="enter('-8415113329489780394');" onmouseout="out('-8415113329489780394');" style="">1332     private void updatePublishedState(boolean isSuccess) {                                               </span>
<span class="7049673307523359848" onmouseenter="enter('7049673307523359848');" onmouseout="out('7049673307523359848');" style="">1333         if (mPublishingSnackbar == null) {                                                               </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1334             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1335         }                                                                                                </span>
<span  style="">1336                                                                                                          </span>
<span class="-7291151504336992329" onmouseenter="enter('-7291151504336992329');" onmouseout="out('-7291151504336992329');" style="">1337         mPublishingSnackbar.dismiss();                                                                   </span>
<span class="-2275300557144928477" onmouseenter="enter('-2275300557144928477');" onmouseout="out('-2275300557144928477');" style="">1338         mPublishingSnackbar = null;                                                                      </span>
<span  style="">1339                                                                                                          </span>
<span class="3311052756729554547" onmouseenter="enter('3311052756729554547');" onmouseout="out('3311052756729554547');" style="">1340         if (isSuccess &amp;&amp; isAdded()) {                                                                    </span>
<span class="-1365615346790030662" onmouseenter="enter('-1365615346790030662');" onmouseout="out('-1365615346790030662');" style="">1341             if (mNote.isPublished()) {                                                                   </span>
<span class="5497411134593542747" onmouseenter="enter('5497411134593542747');" onmouseout="out('5497411134593542747');" style="">1342                 @StringRes int text;                                                                     </span>
<span  style="">1343                                                                                                          </span>
<span class="8518441705934796822" onmouseenter="enter('8518441705934796822');" onmouseout="out('8518441705934796822');" style="">1344                 if (BrowserUtils.copyToClipboard(requireContext(), mNote.getPublishedUrl())) {           </span>
<span class="8974304534544855275" onmouseenter="enter('8974304534544855275');" onmouseout="out('8974304534544855275');" style="">1345                     text = R.string.publish_successful_link;                                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1346                 } else {                                                                                 </span>
<span class="-3232510055763324097" onmouseenter="enter('-3232510055763324097');" onmouseout="out('-3232510055763324097');" style="">1347                     text = R.string.publish_successful;                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1348                 }                                                                                        </span>
<span  style="">1349                                                                                                          </span>
<span class="7461063035263331376" onmouseenter="enter('7461063035263331376');" onmouseout="out('7461063035263331376');" style="">1350                 if (mHideActionOnSuccess) {                                                              </span>
<span class="6757689242728251287" onmouseenter="enter('6757689242728251287');" onmouseout="out('6757689242728251287');" style="">1351                     Snackbar.make(mRootView, text, Snackbar.LENGTH_LONG).show();                         </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1352                 } else {                                                                                 </span>
<span class="6243176840022533873" onmouseenter="enter('6243176840022533873');" onmouseout="out('6243176840022533873');" style="">1353                     Snackbar.make(mRootView, text, Snackbar.LENGTH_LONG)                                 </span>
<span class="1204503404672542585" onmouseenter="enter('1204503404672542585');" onmouseout="out('1204503404672542585');" style="">1354                         .setAction(                                                                      </span>
<span class="3956744015789713296" onmouseenter="enter('3956744015789713296');" onmouseout="out('3956744015789713296');" style="">1355                             R.string.undo,                                                               </span>
<span class="6694611070408135822" onmouseenter="enter('6694611070408135822');" onmouseout="out('6694611070408135822');" style="">1356                             new View.OnClickListener() {                                                 </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1357                                 @Override                                                                </span>
<span class="-6587489291029443051" onmouseenter="enter('-6587489291029443051');" onmouseout="out('-6587489291029443051');" style="">1358                                 public void onClick(View v) {                                            </span>
<span class="-4312757058216662092" onmouseenter="enter('-4312757058216662092');" onmouseout="out('-4312757058216662092');" style="">1359                                     mHideActionOnSuccess = true;                                         </span>
<span class="4812123925634099655" onmouseenter="enter('4812123925634099655');" onmouseout="out('4812123925634099655');" style="">1360                                     unpublishNote();                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1361                                 }                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1362                             }                                                                            </span>
<span class="-2015476096144723150" onmouseenter="enter('-2015476096144723150');" onmouseout="out('-2015476096144723150');" style="">1363                         )                                                                                </span>
<span class="-4298987925833899609" onmouseenter="enter('-4298987925833899609');" onmouseout="out('-4298987925833899609');" style="">1364                         .show();                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1365                 }                                                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1366             } else {                                                                                     </span>
<span class="7461063035263331376" onmouseenter="enter('7461063035263331376');" onmouseout="out('7461063035263331376');" style="">1367                 if (mHideActionOnSuccess) {                                                              </span>
<span class="525266416384737723" onmouseenter="enter('525266416384737723');" onmouseout="out('525266416384737723');" style="">1368                     Snackbar.make(mRootView, R.string.unpublish_successful, Snackbar.LENGTH_LONG)        </span>
<span class="-4298987925833899609" onmouseenter="enter('-4298987925833899609');" onmouseout="out('-4298987925833899609');" style="">1369                             .show();                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1370                 } else {                                                                                 </span>
<span class="525266416384737723" onmouseenter="enter('525266416384737723');" onmouseout="out('525266416384737723');" style="">1371                     Snackbar.make(mRootView, R.string.unpublish_successful, Snackbar.LENGTH_LONG)        </span>
<span class="1204503404672542585" onmouseenter="enter('1204503404672542585');" onmouseout="out('1204503404672542585');" style="">1372                             .setAction(                                                                  </span>
<span class="3956744015789713296" onmouseenter="enter('3956744015789713296');" onmouseout="out('3956744015789713296');" style="">1373                                 R.string.undo,                                                           </span>
<span class="6694611070408135822" onmouseenter="enter('6694611070408135822');" onmouseout="out('6694611070408135822');" style="">1374                                 new View.OnClickListener() {                                             </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1375                                     @Override                                                            </span>
<span class="-6587489291029443051" onmouseenter="enter('-6587489291029443051');" onmouseout="out('-6587489291029443051');" style="">1376                                     public void onClick(View v) {                                        </span>
<span class="-4312757058216662092" onmouseenter="enter('-4312757058216662092');" onmouseout="out('-4312757058216662092');" style="">1377                                         mHideActionOnSuccess = true;                                     </span>
<span class="7985358866333072123" onmouseenter="enter('7985358866333072123');" onmouseout="out('7985358866333072123');" style="">1378                                         publishNote();                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1379                                     }                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1380                                 }                                                                        </span>
<span class="-2015476096144723150" onmouseenter="enter('-2015476096144723150');" onmouseout="out('-2015476096144723150');" style="">1381                             )                                                                            </span>
<span class="-4298987925833899609" onmouseenter="enter('-4298987925833899609');" onmouseout="out('-4298987925833899609');" style="">1382                             .show();                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1383                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1384             }                                                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1385         } else {                                                                                         </span>
<span class="-1365615346790030662" onmouseenter="enter('-1365615346790030662');" onmouseout="out('-1365615346790030662');" style="">1386             if (mNote.isPublished()) {                                                                   </span>
<span class="-4464833730716871257" onmouseenter="enter('-4464833730716871257');" onmouseout="out('-4464833730716871257');" style="">1387                 Snackbar.make(mRootView, R.string.unpublish_error, Snackbar.LENGTH_LONG)                 </span>
<span class="1204503404672542585" onmouseenter="enter('1204503404672542585');" onmouseout="out('1204503404672542585');" style="">1388                         .setAction(                                                                      </span>
<span class="4947887522108728525" onmouseenter="enter('4947887522108728525');" onmouseout="out('4947887522108728525');" style="">1389                             R.string.retry,                                                              </span>
<span class="6694611070408135822" onmouseenter="enter('6694611070408135822');" onmouseout="out('6694611070408135822');" style="">1390                             new View.OnClickListener() {                                                 </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1391                                 @Override                                                                </span>
<span class="-6587489291029443051" onmouseenter="enter('-6587489291029443051');" onmouseout="out('-6587489291029443051');" style="">1392                                 public void onClick(View v) {                                            </span>
<span class="-4312757058216662092" onmouseenter="enter('-4312757058216662092');" onmouseout="out('-4312757058216662092');" style="">1393                                     mHideActionOnSuccess = true;                                         </span>
<span class="4812123925634099655" onmouseenter="enter('4812123925634099655');" onmouseout="out('4812123925634099655');" style="">1394                                     unpublishNote();                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1395                                 }                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1396                             }                                                                            </span>
<span class="1929519410657596695" onmouseenter="enter('1929519410657596695');" onmouseout="out('1929519410657596695');" style="">1397                         ).show();                                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1398             } else {                                                                                     </span>
<span class="-2467718639414539789" onmouseenter="enter('-2467718639414539789');" onmouseout="out('-2467718639414539789');" style="">1399                 Snackbar.make(mRootView, R.string.publish_error, Snackbar.LENGTH_LONG)                   </span>
<span class="1204503404672542585" onmouseenter="enter('1204503404672542585');" onmouseout="out('1204503404672542585');" style="">1400                         .setAction(                                                                      </span>
<span class="4947887522108728525" onmouseenter="enter('4947887522108728525');" onmouseout="out('4947887522108728525');" style="">1401                             R.string.retry,                                                              </span>
<span class="6694611070408135822" onmouseenter="enter('6694611070408135822');" onmouseout="out('6694611070408135822');" style="">1402                             new View.OnClickListener() {                                                 </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1403                                 @Override                                                                </span>
<span class="-6587489291029443051" onmouseenter="enter('-6587489291029443051');" onmouseout="out('-6587489291029443051');" style="">1404                                 public void onClick(View v) {                                            </span>
<span class="-4312757058216662092" onmouseenter="enter('-4312757058216662092');" onmouseout="out('-4312757058216662092');" style="">1405                                     mHideActionOnSuccess = true;                                         </span>
<span class="7985358866333072123" onmouseenter="enter('7985358866333072123');" onmouseout="out('7985358866333072123');" style="">1406                                     publishNote();                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1407                                 }                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1408                             }                                                                            </span>
<span class="1929519410657596695" onmouseenter="enter('1929519410657596695');" onmouseout="out('1929519410657596695');" style="">1409                         ).show();                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1410             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1411         }                                                                                                </span>
<span  style="">1412                                                                                                          </span>
<span class="-6543205336186683580" onmouseenter="enter('-6543205336186683580');" onmouseout="out('-6543205336186683580');" style="">1413         mHideActionOnSuccess = false;                                                                    </span>
<span class="-8532471920650411447" onmouseenter="enter('-8532471920650411447');" onmouseout="out('-8532471920650411447');" style="">1414         requireActivity().invalidateOptionsMenu();                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1415     }                                                                                                    </span>
<span  style="">1416                                                                                                          </span>
<span class="6900416574659568584" onmouseenter="enter('6900416574659568584');" onmouseout="out('6900416574659568584');" style="">1417     private void publishNote() {                                                                         </span>
<span class="939688580551732431" onmouseenter="enter('939688580551732431');" onmouseout="out('939688580551732431');" style="">1418         if (!NetworkUtils.isNetworkAvailable(requireContext())) {                                        </span>
<span class="8924960461604916754" onmouseenter="enter('8924960461604916754');" onmouseout="out('8924960461604916754');" style="">1419             Toast.makeText(requireContext(), R.string.error_network_required, Toast.LENGTH_LONG).show(); </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1420             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1421         }                                                                                                </span>
<span  style="">1422                                                                                                          </span>
<span class="-7481427962806884462" onmouseenter="enter('-7481427962806884462');" onmouseout="out('-7481427962806884462');" style="">1423         if (isAdded()) {                                                                                 </span>
<span class="402944241808212646" onmouseenter="enter('402944241808212646');" onmouseout="out('402944241808212646');" style=""><abbr title="1424             mPublishingSnackbar = Snackbar.make(mRootView, R.string.publishing, Snackbar.LENGTH_INDEFINITE);">1424             mPublishingSnackbar = Snackbar.make(mRootView, R.string.publishing, Snackbar.LENGTH_INDEFINIT🔵</abbr></span>
<span class="-8074649539774450656" onmouseenter="enter('-8074649539774450656');" onmouseout="out('-8074649539774450656');" style="">1425             mPublishingSnackbar.show();                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1426         }                                                                                                </span>
<span  style="">1427                                                                                                          </span>
<span class="5480526116728317891" onmouseenter="enter('5480526116728317891');" onmouseout="out('5480526116728317891');" style="">1428         setPublishedNote(true);                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1429     }                                                                                                    </span>
<span  style="">1430                                                                                                          </span>
<span class="-8215923685018306170" onmouseenter="enter('-8215923685018306170');" onmouseout="out('-8215923685018306170');" style="">1431     private void unpublishNote() {                                                                       </span>
<span class="939688580551732431" onmouseenter="enter('939688580551732431');" onmouseout="out('939688580551732431');" style="">1432         if (!NetworkUtils.isNetworkAvailable(requireContext())) {                                        </span>
<span class="8924960461604916754" onmouseenter="enter('8924960461604916754');" onmouseout="out('8924960461604916754');" style="">1433             Toast.makeText(requireContext(), R.string.error_network_required, Toast.LENGTH_LONG).show(); </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1434             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1435         }                                                                                                </span>
<span  style="">1436                                                                                                          </span>
<span class="-7481427962806884462" onmouseenter="enter('-7481427962806884462');" onmouseout="out('-7481427962806884462');" style="">1437         if (isAdded()) {                                                                                 </span>
<span class="-5849073483621593387" onmouseenter="enter('-5849073483621593387');" onmouseout="out('-5849073483621593387');" style=""><abbr title="1438             mPublishingSnackbar = Snackbar.make(mRootView, R.string.unpublishing, Snackbar.LENGTH_INDEFINITE);">1438             mPublishingSnackbar = Snackbar.make(mRootView, R.string.unpublishing, Snackbar.LENGTH_INDEFIN🔵</abbr></span>
<span class="-8074649539774450656" onmouseenter="enter('-8074649539774450656');" onmouseout="out('-8074649539774450656');" style="">1439             mPublishingSnackbar.show();                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1440         }                                                                                                </span>
<span  style="">1441                                                                                                          </span>
<span class="8445226168544755352" onmouseenter="enter('8445226168544755352');" onmouseout="out('8445226168544755352');" style="">1442         setPublishedNote(false);                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1443     }                                                                                                    </span>
<span  style="">1444                                                                                                          </span>
<span class="-2059530202125765167" onmouseenter="enter('-2059530202125765167');" onmouseout="out('-2059530202125765167');" style="">1445     private void showShare(String text) {                                                                </span>
<span class="-462181345749239892" onmouseenter="enter('-462181345749239892');" onmouseout="out('-462181345749239892');" style="">1446         startActivity(                                                                                   </span>
<span class="-2960409665728397105" onmouseenter="enter('-2960409665728397105');" onmouseout="out('-2960409665728397105');" style="">1447             ShareCompat.IntentBuilder.from(requireActivity())                                            </span>
<span class="-7167858845932453536" onmouseenter="enter('-7167858845932453536');" onmouseout="out('-7167858845932453536');" style="">1448                 .setText(text)                                                                           </span>
<span class="8809275298081922415" onmouseenter="enter('8809275298081922415');" onmouseout="out('8809275298081922415');" style="">1449                 .setType(&quot;text/plain&quot;)                                                                   </span>
<span class="-4946837607512363870" onmouseenter="enter('-4946837607512363870');" onmouseout="out('-4946837607512363870');" style="">1450                 .createChooserIntent()                                                                   </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">1451         );                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1452     }                                                                                                    </span>
<span class="552430204178555924" onmouseenter="enter('552430204178555924');" onmouseout="out('552430204178555924');" style="">1453     private void showShareSheet() {                                                                      </span>
<span class="4007819101803880383" onmouseenter="enter('4007819101803880383');" onmouseout="out('4007819101803880383');" style="">1454         if (isAdded() &amp;&amp; mShareBottomSheet != null &amp;&amp; !mShareBottomSheet.isAdded()) {                    </span>
<span class="-6363695226018504364" onmouseenter="enter('-6363695226018504364');" onmouseout="out('-6363695226018504364');" style="">1455             mShareBottomSheet.show(requireFragmentManager(), mNote);                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1456         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1457     }                                                                                                    </span>
<span  style="">1458                                                                                                          </span>
<span class="-4049506869902668727" onmouseenter="enter('-4049506869902668727');" onmouseout="out('-4049506869902668727');" style="">1459     private void showInfoSheet() {                                                                       </span>
<span class="2029397660939536329" onmouseenter="enter('2029397660939536329');" onmouseout="out('2029397660939536329');" style="">1460         if (isAdded() &amp;&amp; mInfoBottomSheet != null &amp;&amp; !mInfoBottomSheet.isAdded()) {                      </span>
<span class="-1248038515529606639" onmouseenter="enter('-1248038515529606639');" onmouseout="out('-1248038515529606639');" style="">1461             mInfoBottomSheet.show(requireFragmentManager(), mNote);                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1462         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1463     }                                                                                                    </span>
<span  style="">1464                                                                                                          </span>
<span class="5911143564482716303" onmouseenter="enter('5911143564482716303');" onmouseout="out('5911143564482716303');" style="">1465     private void showHistorySheet() {                                                                    </span>
<span class="1950176939429748509" onmouseenter="enter('1950176939429748509');" onmouseout="out('1950176939429748509');" style="">1466         if (isAdded() &amp;&amp; mHistoryBottomSheet != null &amp;&amp; !mHistoryBottomSheet.isAdded()) {                </span>
<span class="8706434621047143120" onmouseenter="enter('8706434621047143120');" onmouseout="out('8706434621047143120');" style="">1467             // Request revisions for the current note                                                    </span>
<span class="-1574938770535875074" onmouseenter="enter('-1574938770535875074');" onmouseout="out('-1574938770535875074');" style=""><abbr title="1468             mNotesBucket.getRevisions(mNote, MAX_REVISIONS, mHistoryBottomSheet.getRevisionsRequestCallbacks());">1468             mNotesBucket.getRevisions(mNote, MAX_REVISIONS, mHistoryBottomSheet.getRevisionsRequestCallba🔵</abbr></span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style="">1469             saveNote();                                                                                  </span>
<span  style="">1470                                                                                                          </span>
<span class="4961792341108798217" onmouseenter="enter('4961792341108798217');" onmouseout="out('4961792341108798217');" style="">1471             mHistoryBottomSheet.show(requireFragmentManager(), mNote);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1472         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1473     }                                                                                                    </span>
<span  style="">1474                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1475     @Override                                                                                            </span>
<span class="3459602708969445883" onmouseenter="enter('3459602708969445883');" onmouseout="out('3459602708969445883');" style="">1476     public void onDeleteObject(Bucket&lt;Note&gt; noteBucket, Note note) {                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1477     }                                                                                                    </span>
<span  style="">1478                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1479     @Override                                                                                            </span>
<span class="-2970240973750057256" onmouseenter="enter('-2970240973750057256');" onmouseout="out('-2970240973750057256');" style=""><abbr title="1480     public void onNetworkChange(Bucket&lt;Note&gt; noteBucket, Bucket.ChangeType changeType, final String key) {">1480     public void onNetworkChange(Bucket&lt;Note&gt; noteBucket, Bucket.ChangeType changeType, final String key) 🔵</abbr></span>
<span class="6607037711761945955" onmouseenter="enter('6607037711761945955');" onmouseout="out('6607037711761945955');" style="">1481         if (changeType == Bucket.ChangeType.MODIFY) {                                                    </span>
<span class="-6254872391725782597" onmouseenter="enter('-6254872391725782597');" onmouseout="out('-6254872391725782597');" style="">1482             if (getNote() != null &amp;&amp; getNote().getSimperiumKey().equals(key)) {                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1483                 try {                                                                                    </span>
<span class="-1578175229665237336" onmouseenter="enter('-1578175229665237336');" onmouseout="out('-1578175229665237336');" style="">1484                     mNotesBucket = noteBucket;                                                           </span>
<span class="3951885723067312215" onmouseenter="enter('3951885723067312215');" onmouseout="out('3951885723067312215');" style="">1485                     final Note updatedNote = mNotesBucket.get(key);                                      </span>
<span class="4809573797151136036" onmouseenter="enter('4809573797151136036');" onmouseout="out('4809573797151136036');" style="">1486                     if (getActivity() != null) {                                                         </span>
<span class="-3876200887541462175" onmouseenter="enter('-3876200887541462175');" onmouseout="out('-3876200887541462175');" style="">1487                         getActivity().runOnUiThread(new Runnable() {                                     </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1488                             @Override                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">1489                             public void run() {                                                          </span>
<span class="-8758788084050668688" onmouseenter="enter('-8758788084050668688');" onmouseout="out('-8758788084050668688');" style="">1490                                 if (mPublishTimeoutHandler != null) {                                    </span>
<span class="-1646454762641300025" onmouseenter="enter('-1646454762641300025');" onmouseout="out('-1646454762641300025');" style="">1491                                     mPublishTimeoutHandler.removeCallbacks(mPublishTimeoutRunnable);     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1492                                 }                                                                        </span>
<span  style="">1493                                                                                                          </span>
<span class="-8617980127286778731" onmouseenter="enter('-8617980127286778731');" onmouseout="out('-8617980127286778731');" style="">1494                                 updateNote(updatedNote);                                                 </span>
<span class="2318735056997767280" onmouseenter="enter('2318735056997767280');" onmouseout="out('2318735056997767280');" style="">1495                                 updatePublishedState(true);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1496                             }                                                                            </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">1497                         });                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1498                     }                                                                                    </span>
<span class="-1560847995217927266" onmouseenter="enter('-1560847995217927266');" onmouseout="out('-1560847995217927266');" style="">1499                 } catch (BucketObjectMissingException e) {                                               </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style="">1500                     e.printStackTrace();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1501                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1502             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1503         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1504     }                                                                                                    </span>
<span  style="">1505                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1506     @Override                                                                                            </span>
<span class="1835476648918604123" onmouseenter="enter('1835476648918604123');" onmouseout="out('1835476648918604123');" style="">1507     public void onSaveObject(Bucket&lt;Note&gt; noteBucket, Note note) {                                       </span>
<span class="-2565337116915540090" onmouseenter="enter('-2565337116915540090');" onmouseout="out('-2565337116915540090');" style="">1508         if (mIsPaused) {                                                                                 </span>
<span class="-1649552973291504175" onmouseenter="enter('-1649552973291504175');" onmouseout="out('-1649552973291504175');" style="">1509             mNotesBucket.removeListener(this);                                                           </span>
<span class="-9222421628383802707" onmouseenter="enter('-9222421628383802707');" onmouseout="out('-9222421628383802707');" style="">1510             mNotesBucket.stop();                                                                         </span>
<span class="-5888247817738062720" onmouseenter="enter('-5888247817738062720');" onmouseout="out('-5888247817738062720');" style="">1511             AppLog.add(Type.SYNC, &quot;Stopped note bucket (NoteEditorFragment)&quot;);                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1512         }                                                                                                </span>
<span  style="">1513                                                                                                          </span>
<span class="1712554612672119113" onmouseenter="enter('1712554612672119113');" onmouseout="out('1712554612672119113');" style="">1514         AppLog.add(                                                                                      </span>
<span class="5387827170384214934" onmouseenter="enter('5387827170384214934');" onmouseout="out('5387827170384214934');" style="">1515             Type.SYNC,                                                                                   </span>
<span class="-2467507706164826416" onmouseenter="enter('-2467507706164826416');" onmouseout="out('-2467507706164826416');" style="">1516             &quot;Saved note callback in NoteEditorFragment (ID: &quot; + note.getSimperiumKey() +                 </span>
<span class="8009766076008568533" onmouseenter="enter('8009766076008568533');" onmouseout="out('8009766076008568533');" style="">1517                 &quot; / Title: &quot; + note.getTitle() +                                                         </span>
<span class="3373129960779075140" onmouseenter="enter('3373129960779075140');" onmouseout="out('3373129960779075140');" style="">1518                 &quot; / Characters: &quot; + NoteUtils.getCharactersCount(note.getContent()) +                    </span>
<span class="-6586905692045925149" onmouseenter="enter('-6586905692045925149');" onmouseout="out('-6586905692045925149');" style="">1519                 &quot; / Words: &quot; + NoteUtils.getWordCount(note.getContent()) + &quot;)&quot;                           </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">1520         );                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1521     }                                                                                                    </span>
<span  style="">1522                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1523     @Override                                                                                            </span>
<span class="-5956849782971602831" onmouseenter="enter('-5956849782971602831');" onmouseout="out('-5956849782971602831');" style="">1524     public void onBeforeUpdateObject(Bucket&lt;Note&gt; bucket, Note note) {                                   </span>
<span class="9133977848896323437" onmouseenter="enter('9133977848896323437');" onmouseout="out('9133977848896323437');" style="">1525         // Don&#x27;t apply updates if we haven&#x27;t loaded the note yet                                         </span>
<span class="-1541782922582123662" onmouseenter="enter('-1541782922582123662');" onmouseout="out('-1541782922582123662');" style="">1526         if (mIsLoadingNote)                                                                              </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1527             return;                                                                                      </span>
<span  style="">1528                                                                                                          </span>
<span class="1341660593539808393" onmouseenter="enter('1341660593539808393');" onmouseout="out('1341660593539808393');" style="">1529         Note openNote = getNote();                                                                       </span>
<span class="-6997098079508589023" onmouseenter="enter('-6997098079508589023');" onmouseout="out('-6997098079508589023');" style="">1530         if (openNote == null || !openNote.getSimperiumKey().equals(note.getSimperiumKey()))              </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1531             return;                                                                                      </span>
<span  style="">1532                                                                                                          </span>
<span class="7121549238466162700" onmouseenter="enter('7121549238466162700');" onmouseout="out('7121549238466162700');" style="">1533         note.setContent(mContentEditText.getPlainTextContent());                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1534     }                                                                                                    </span>
<span  style="">1535                                                                                                          </span>
<span class="9045414880144452172" onmouseenter="enter('9045414880144452172');" onmouseout="out('9045414880144452172');" style="">1536     private static class LoadNoteTask extends AsyncTask&lt;String, Void, Void&gt; {                            </span>
<span class="2470819661574637360" onmouseenter="enter('2470819661574637360');" onmouseout="out('2470819661574637360');" style="">1537         WeakReference&lt;NoteEditorFragment&gt; mNoteEditorFragmentReference;                                  </span>
<span  style="">1538                                                                                                          </span>
<span class="-5095898803565568819" onmouseenter="enter('-5095898803565568819');" onmouseout="out('-5095898803565568819');" style="">1539         LoadNoteTask(NoteEditorFragment fragment) {                                                      </span>
<span class="-729324371914675142" onmouseenter="enter('-729324371914675142');" onmouseout="out('-729324371914675142');" style="">1540             mNoteEditorFragmentReference = new WeakReference&lt;&gt;(fragment);                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1541         }                                                                                                </span>
<span  style="">1542                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1543         @Override                                                                                        </span>
<span class="-2143377957271683587" onmouseenter="enter('-2143377957271683587');" onmouseout="out('-2143377957271683587');" style="">1544         protected void onPreExecute() {                                                                  </span>
<span class="-6239297955916786402" onmouseenter="enter('-6239297955916786402');" onmouseout="out('-6239297955916786402');" style="">1545             NoteEditorFragment fragment = mNoteEditorFragmentReference.get();                            </span>
<span  style="">1546                                                                                                          </span>
<span class="8682461618194216316" onmouseenter="enter('8682461618194216316');" onmouseout="out('8682461618194216316');" style="">1547             if (fragment != null) {                                                                      </span>
<span class="60782620590248864" onmouseenter="enter('60782620590248864');" onmouseout="out('60782620590248864');" style="">1548                 fragment.mContentEditText.removeTextChangedListener(fragment);                           </span>
<span class="-1534119248334961722" onmouseenter="enter('-1534119248334961722');" onmouseout="out('-1534119248334961722');" style="">1549                 fragment.mIsLoadingNote = true;                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1550             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1551         }                                                                                                </span>
<span  style="">1552                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1553         @Override                                                                                        </span>
<span class="2907103121668961470" onmouseenter="enter('2907103121668961470');" onmouseout="out('2907103121668961470');" style="">1554         protected Void doInBackground(String... args) {                                                  </span>
<span class="-6239297955916786402" onmouseenter="enter('-6239297955916786402');" onmouseout="out('-6239297955916786402');" style="">1555             NoteEditorFragment fragment = mNoteEditorFragmentReference.get();                            </span>
<span  style="">1556                                                                                                          </span>
<span class="-8032132530741633390" onmouseenter="enter('-8032132530741633390');" onmouseout="out('-8032132530741633390');" style="">1557             if (fragment == null || fragment.getActivity() == null) {                                    </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1558                 return null;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1559             }                                                                                            </span>
<span  style="">1560                                                                                                          </span>
<span class="-6905640337159350056" onmouseenter="enter('-6905640337159350056');" onmouseout="out('-6905640337159350056');" style="">1561             String noteID = args[0];                                                                     </span>
<span class="-2377301998895691620" onmouseenter="enter('-2377301998895691620');" onmouseout="out('-2377301998895691620');" style="">1562             Simplenote application = (Simplenote) fragment.getActivity().getApplication();               </span>
<span class="3820701427545927889" onmouseenter="enter('3820701427545927889');" onmouseout="out('3820701427545927889');" style="">1563             Bucket&lt;Note&gt; notesBucket = application.getNotesBucket();                                     </span>
<span  style="">1564                                                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1565             try {                                                                                        </span>
<span class="-4946232803333130386" onmouseenter="enter('-4946232803333130386');" onmouseout="out('-4946232803333130386');" style="">1566                 fragment.mNote = notesBucket.get(noteID);                                                </span>
<span  style="">1567                                                                                                          </span>
<span class="-8094446681246514952" onmouseenter="enter('-8094446681246514952');" onmouseout="out('-8094446681246514952');" style="">1568                 // Set the current note in NotesActivity when on a tablet                                </span>
<span class="-8543118244487944112" onmouseenter="enter('-8543118244487944112');" onmouseout="out('-8543118244487944112');" style="">1569                 if (fragment.getActivity() instanceof NotesActivity) {                                   </span>
<span class="7201017209637424614" onmouseenter="enter('7201017209637424614');" onmouseout="out('7201017209637424614');" style="">1570                     ((NotesActivity) fragment.getActivity()).setCurrentNote(fragment.mNote);             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1571                 }                                                                                        </span>
<span  style="">1572                                                                                                          </span>
<span class="-7559761486783625846" onmouseenter="enter('-7559761486783625846');" onmouseout="out('-7559761486783625846');" style="">1573                 // Set markdown and preview flags for current note                                       </span>
<span class="5610790463962208778" onmouseenter="enter('5610790463962208778');" onmouseout="out('5610790463962208778');" style="">1574                 if (fragment.mNote != null) {                                                            </span>
<span class="-8180075389206795559" onmouseenter="enter('-8180075389206795559');" onmouseout="out('-8180075389206795559');" style="">1575                     fragment.mIsMarkdownEnabled = fragment.mNote.isMarkdownEnabled();                    </span>
<span class="4693841747578299424" onmouseenter="enter('4693841747578299424');" onmouseout="out('4693841747578299424');" style="">1576                     fragment.mIsPreviewEnabled = fragment.mNote.isPreviewEnabled();                      </span>
<span class="1712554612672119113" onmouseenter="enter('1712554612672119113');" onmouseout="out('1712554612672119113');" style="">1577                     AppLog.add(                                                                          </span>
<span class="5387827170384214934" onmouseenter="enter('5387827170384214934');" onmouseout="out('5387827170384214934');" style="">1578                         Type.SYNC,                                                                       </span>
<span class="-7392016025425077182" onmouseenter="enter('-7392016025425077182');" onmouseout="out('-7392016025425077182');" style="">1579                         &quot;Loaded note (ID: &quot; + fragment.mNote.getSimperiumKey() +                         </span>
<span class="-7384197456729805506" onmouseenter="enter('-7384197456729805506');" onmouseout="out('-7384197456729805506');" style="">1580                             &quot; / Title: &quot; + fragment.mNote.getTitle() +                                   </span>
<span class="-9069213288035386789" onmouseenter="enter('-9069213288035386789');" onmouseout="out('-9069213288035386789');" style=""><abbr title="1581                             &quot; / Characters: &quot; + NoteUtils.getCharactersCount(fragment.mNote.getContent()) +">1581                             &quot; / Characters: &quot; + NoteUtils.getCharactersCount(fragment.mNote.getContent())🔵</abbr></span>
<span class="-2213550460625477177" onmouseenter="enter('-2213550460625477177');" onmouseout="out('-2213550460625477177');" style="">1582                             &quot; / Words: &quot; + NoteUtils.getWordCount(fragment.mNote.getContent()) + &quot;)&quot;     </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">1583                     );                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1584                 }                                                                                        </span>
<span class="-1560847995217927266" onmouseenter="enter('-1560847995217927266');" onmouseout="out('-1560847995217927266');" style="">1585             } catch (BucketObjectMissingException e) {                                                   </span>
<span class="2089208945464326929" onmouseenter="enter('2089208945464326929');" onmouseout="out('2089208945464326929');" style="">1586                 // See if the note is in the object store                                                </span>
<span class="369229994761936281" onmouseenter="enter('369229994761936281');" onmouseout="out('369229994761936281');" style="">1587                 Bucket.ObjectCursor&lt;Note&gt; notesCursor = notesBucket.allObjects();                        </span>
<span  style="">1588                                                                                                          </span>
<span class="-3178781815102550114" onmouseenter="enter('-3178781815102550114');" onmouseout="out('-3178781815102550114');" style="">1589                 while (notesCursor.moveToNext()) {                                                       </span>
<span class="-6636674936476994775" onmouseenter="enter('-6636674936476994775');" onmouseout="out('-6636674936476994775');" style="">1590                     Note currentNote = notesCursor.getObject();                                          </span>
<span  style="">1591                                                                                                          </span>
<span class="5230840531090379031" onmouseenter="enter('5230840531090379031');" onmouseout="out('5230840531090379031');" style="">1592                     if (currentNote != null &amp;&amp; currentNote.getSimperiumKey().equals(noteID)) {           </span>
<span class="8774517486286621197" onmouseenter="enter('8774517486286621197');" onmouseout="out('8774517486286621197');" style="">1593                         fragment.mNote = currentNote;                                                    </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1594                         return null;                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1595                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1596                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1597             }                                                                                            </span>
<span  style="">1598                                                                                                          </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1599             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1600         }                                                                                                </span>
<span  style="">1601                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1602         @Override                                                                                        </span>
<span class="2295103304779241059" onmouseenter="enter('2295103304779241059');" onmouseout="out('2295103304779241059');" style="">1603         protected void onPostExecute(Void nada) {                                                        </span>
<span class="-6221597993462190775" onmouseenter="enter('-6221597993462190775');" onmouseout="out('-6221597993462190775');" style="">1604             final NoteEditorFragment fragment = mNoteEditorFragmentReference.get();                      </span>
<span class="-5025636818911942947" onmouseenter="enter('-5025636818911942947');" onmouseout="out('-5025636818911942947');" style=""><abbr title="1605             if (fragment == null || fragment.getActivity() == null || fragment.getActivity().isFinishing()) {">1605             if (fragment == null || fragment.getActivity() == null || fragment.getActivity().isFinishing(🔵</abbr></span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1606                 return;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1607             }                                                                                            </span>
<span  style="">1608                                                                                                          </span>
<span class="-6603799210363857095" onmouseenter="enter('-6603799210363857095');" onmouseout="out('-6603799210363857095');" style="">1609             fragment.refreshContent(false);                                                              </span>
<span  style="">1610                                                                                                          </span>
<span class="5917882013700041584" onmouseenter="enter('5917882013700041584');" onmouseout="out('5917882013700041584');" style="">1611             if (fragment.mMatchOffsets != null) {                                                        </span>
<span class="3332467390516262576" onmouseenter="enter('3332467390516262576');" onmouseout="out('3332467390516262576');" style=""><abbr title="1612                 int columnIndex = fragment.mNote.getBucket().getSchema().getFullTextIndex().getColumnIndex(Note.CONTENT_PROPERTY);">1612                 int columnIndex = fragment.mNote.getBucket().getSchema().getFullTextIndex().getColumnInde🔵</abbr></span>
<span class="-941659818852434408" onmouseenter="enter('-941659818852434408');" onmouseout="out('-941659818852434408');" style="">1613                 fragment.mHighlighter.highlightMatches(fragment.mMatchOffsets, columnIndex);             </span>
<span class="-5586540550370892268" onmouseenter="enter('-5586540550370892268');" onmouseout="out('-5586540550370892268');" style="">1614                 fragment.mShouldScrollToSearchMatch = true;                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1615             }                                                                                            </span>
<span  style="">1616                                                                                                          </span>
<span class="973040091990718145" onmouseenter="enter('973040091990718145');" onmouseout="out('973040091990718145');" style="">1617             fragment.mContentEditText.addTextChangedListener(fragment);                                  </span>
<span  style="">1618                                                                                                          </span>
<span class="2402633428423922470" onmouseenter="enter('2402633428423922470');" onmouseout="out('2402633428423922470');" style="">1619             if (fragment.mNote != null &amp;&amp; fragment.mNote.getContent().isEmpty()) {                       </span>
<span class="-7639034409774462373" onmouseenter="enter('-7639034409774462373');" onmouseout="out('-7639034409774462373');" style="">1620                 // Show soft keyboard                                                                    </span>
<span class="-4206285070691362757" onmouseenter="enter('-4206285070691362757');" onmouseout="out('-4206285070691362757');" style="">1621                 fragment.mContentEditText.requestFocus();                                                </span>
<span  style="">1622                                                                                                          </span>
<span class="7162501222170899627" onmouseenter="enter('7162501222170899627');" onmouseout="out('7162501222170899627');" style="">1623                 new Handler().postDelayed(new Runnable() {                                               </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1624                     @Override                                                                            </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">1625                     public void run() {                                                                  </span>
<span class="-3270581272855840613" onmouseenter="enter('-3270581272855840613');" onmouseout="out('-3270581272855840613');" style="">1626                         if (fragment.getActivity() == null) {                                            </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1627                             return;                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1628                         }                                                                                </span>
<span  style="">1629                                                                                                          </span>
<span class="-9053809797008075040" onmouseenter="enter('-9053809797008075040');" onmouseout="out('-9053809797008075040');" style=""><abbr title="1630                         InputMethodManager inputMethodManager = (InputMethodManager) fragment.getActivity().getSystemService(Context.INPUT_METHOD_SERVICE);">1630                         InputMethodManager inputMethodManager = (InputMethodManager) fragment.getActivity🔵</abbr></span>
<span  style="">1631                                                                                                          </span>
<span class="-9213036537020298306" onmouseenter="enter('-9213036537020298306');" onmouseout="out('-9213036537020298306');" style="">1632                         if (inputMethodManager != null) {                                                </span>
<span class="195139432086188728" onmouseenter="enter('195139432086188728');" onmouseout="out('195139432086188728');" style="">1633                             inputMethodManager.showSoftInput(fragment.mContentEditText, 0);              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1634                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1635                     }                                                                                    </span>
<span class="-4884776244894547305" onmouseenter="enter('-4884776244894547305');" onmouseout="out('-4884776244894547305');" style="">1636                 }, 100);                                                                                 </span>
<span class="-6150494714931322561" onmouseenter="enter('-6150494714931322561');" onmouseout="out('-6150494714931322561');" style="">1637             } else if (fragment.mNote != null) {                                                         </span>
<span class="-1393000384089402121" onmouseenter="enter('-1393000384089402121');" onmouseout="out('-1393000384089402121');" style="">1638                 // If we have a valid note, hide the placeholder                                         </span>
<span class="8494685023237855547" onmouseenter="enter('8494685023237855547');" onmouseout="out('8494685023237855547');" style="">1639                 fragment.setPlaceholderVisible(false);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1640             }                                                                                            </span>
<span  style="">1641                                                                                                          </span>
<span class="-204842057880624038" onmouseenter="enter('-204842057880624038');" onmouseout="out('-204842057880624038');" style="">1642             fragment.updateMarkdownView();                                                               </span>
<span class="-7853767312046629249" onmouseenter="enter('-7853767312046629249');" onmouseout="out('-7853767312046629249');" style="">1643             fragment.requireActivity().invalidateOptionsMenu();                                          </span>
<span class="-6330986853491903464" onmouseenter="enter('-6330986853491903464');" onmouseout="out('-6330986853491903464');" style="">1644             fragment.linkifyEditorContent();                                                             </span>
<span class="-4002830427376252976" onmouseenter="enter('-4002830427376252976');" onmouseout="out('-4002830427376252976');" style="">1645             fragment.mIsLoadingNote = false;                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1646         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1647     }                                                                                                    </span>
<span  style="">1648                                                                                                          </span>
<span class="-2513677254117436534" onmouseenter="enter('-2513677254117436534');" onmouseout="out('-2513677254117436534');" style="">1649     private static class SaveNoteTask extends AsyncTask&lt;Void, Void, Void&gt; {                              </span>
<span class="2470819661574637360" onmouseenter="enter('2470819661574637360');" onmouseout="out('2470819661574637360');" style="">1650         WeakReference&lt;NoteEditorFragment&gt; mNoteEditorFragmentReference;                                  </span>
<span  style="">1651                                                                                                          </span>
<span class="-3144982887415890281" onmouseenter="enter('-3144982887415890281');" onmouseout="out('-3144982887415890281');" style="">1652         SaveNoteTask(NoteEditorFragment fragment) {                                                      </span>
<span class="-729324371914675142" onmouseenter="enter('-729324371914675142');" onmouseout="out('-729324371914675142');" style="">1653             mNoteEditorFragmentReference = new WeakReference&lt;&gt;(fragment);                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1654         }                                                                                                </span>
<span  style="">1655                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1656         @Override                                                                                        </span>
<span class="1259374977543247181" onmouseenter="enter('1259374977543247181');" onmouseout="out('1259374977543247181');" style="">1657         protected Void doInBackground(Void... args) {                                                    </span>
<span class="-6239297955916786402" onmouseenter="enter('-6239297955916786402');" onmouseout="out('-6239297955916786402');" style="">1658             NoteEditorFragment fragment = mNoteEditorFragmentReference.get();                            </span>
<span  style="">1659                                                                                                          </span>
<span class="8682461618194216316" onmouseenter="enter('8682461618194216316');" onmouseout="out('8682461618194216316');" style="">1660             if (fragment != null) {                                                                      </span>
<span class="8575404770768137029" onmouseenter="enter('8575404770768137029');" onmouseout="out('8575404770768137029');" style="">1661                 fragment.saveNote();                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1662             }                                                                                            </span>
<span  style="">1663                                                                                                          </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1664             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1665         }                                                                                                </span>
<span  style="">1666                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1667         @Override                                                                                        </span>
<span class="2295103304779241059" onmouseenter="enter('2295103304779241059');" onmouseout="out('2295103304779241059');" style="">1668         protected void onPostExecute(Void nada) {                                                        </span>
<span class="-6239297955916786402" onmouseenter="enter('-6239297955916786402');" onmouseout="out('-6239297955916786402');" style="">1669             NoteEditorFragment fragment = mNoteEditorFragmentReference.get();                            </span>
<span  style="">1670                                                                                                          </span>
<span class="-8106394483710371243" onmouseenter="enter('-8106394483710371243');" onmouseout="out('-8106394483710371243');" style=""><abbr title="1671             if (fragment != null &amp;&amp; fragment.getActivity() != null &amp;&amp; !fragment.getActivity().isFinishing()) {">1671             if (fragment != null &amp;&amp; fragment.getActivity() != null &amp;&amp; !fragment.getActivity().isFinishing🔵</abbr></span>
<span class="4157206213844518202" onmouseenter="enter('4157206213844518202');" onmouseout="out('4157206213844518202');" style="">1672                 // Update links                                                                          </span>
<span class="-6330986853491903464" onmouseenter="enter('-6330986853491903464');" onmouseout="out('-6330986853491903464');" style="">1673                 fragment.linkifyEditorContent();                                                         </span>
<span class="-204842057880624038" onmouseenter="enter('-204842057880624038');" onmouseout="out('-204842057880624038');" style="">1674                 fragment.updateMarkdownView();                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1675             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1676         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1677     }                                                                                                    </span>
<span  style="">1678                                                                                                          </span>
<span class="5750088007463981533" onmouseenter="enter('5750088007463981533');" onmouseout="out('5750088007463981533');" style="">1679     private void linkifyEditorContent() {                                                                </span>
<span class="-7408428876964241805" onmouseenter="enter('-7408428876964241805');" onmouseout="out('-7408428876964241805');" style="">1680         if (getActivity() == null || getActivity().isFinishing()) {                                      </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1681             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1682         }                                                                                                </span>
<span  style="">1683                                                                                                          </span>
<span class="-8676186023856313759" onmouseenter="enter('-8676186023856313759');" onmouseout="out('-8676186023856313759');" style="">1684         if (PrefUtils.getBoolPref(getActivity(), PrefUtils.PREF_DETECT_LINKS)) {                         </span>
<span class="-5493645025534883433" onmouseenter="enter('-5493645025534883433');" onmouseout="out('-5493645025534883433');" style="">1685             SimplenoteLinkify.addLinks(mContentEditText, Linkify.ALL);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1686         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1687     }                                                                                                    </span>
<span  style="">1688                                                                                                          </span>
<span class="-5950330616337931457" onmouseenter="enter('-5950330616337931457');" onmouseout="out('-5950330616337931457');" style="">1689     // Show tabs if markdown is enabled globally, for current note, and not tablet landscape             </span>
<span class="2649812560178195830" onmouseenter="enter('2649812560178195830');" onmouseout="out('2649812560178195830');" style="">1690     private void updateMarkdownView() {                                                                  </span>
<span class="-6478060281573302790" onmouseenter="enter('-6478060281573302790');" onmouseout="out('-6478060281573302790');" style="">1691         if (!mIsMarkdownEnabled) {                                                                       </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1692             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1693         }                                                                                                </span>
<span  style="">1694                                                                                                          </span>
<span class="-5071525869541290984" onmouseenter="enter('-5071525869541290984');" onmouseout="out('-5071525869541290984');" style="">1695         Activity activity = getActivity();                                                               </span>
<span class="6030899174327056570" onmouseenter="enter('6030899174327056570');" onmouseout="out('6030899174327056570');" style="">1696         if (activity instanceof NotesActivity) {                                                         </span>
<span class="2782126590805787389" onmouseenter="enter('2782126590805787389');" onmouseout="out('2782126590805787389');" style="">1697             // This fragment lives in NotesActivity, so load markdown in this fragment&#x27;s WebView.        </span>
<span class="3327794499329885328" onmouseenter="enter('3327794499329885328');" onmouseout="out('3327794499329885328');" style="">1698             loadMarkdownData();                                                                          </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1699         } else {                                                                                         </span>
<span class="8122704767225379324" onmouseenter="enter('8122704767225379324');" onmouseout="out('8122704767225379324');" style="">1700             // This fragment lives in the NoteEditorActivity&#x27;s ViewPager.                                </span>
<span class="-3674842258349497418" onmouseenter="enter('-3674842258349497418');" onmouseout="out('-3674842258349497418');" style="">1701             if (mNoteMarkdownFragment == null) {                                                         </span>
<span class="3603448342706497777" onmouseenter="enter('3603448342706497777');" onmouseout="out('3603448342706497777');" style="">1702                 mNoteMarkdownFragment = ((NoteEditorActivity) requireActivity())                         </span>
<span class="-2617317400764712760" onmouseenter="enter('-2617317400764712760');" onmouseout="out('-2617317400764712760');" style="">1703                         .getNoteMarkdownFragment();                                                      </span>
<span class="3313661309460802096" onmouseenter="enter('3313661309460802096');" onmouseout="out('3313661309460802096');" style="">1704                 ((NoteEditorActivity) requireActivity()).showTabs();                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1705             }                                                                                            </span>
<span class="-1009334497805408344" onmouseenter="enter('-1009334497805408344');" onmouseout="out('-1009334497805408344');" style="">1706             // Load markdown in the sibling NoteMarkdownFragment&#x27;s WebView.                              </span>
<span class="8234543871026198045" onmouseenter="enter('8234543871026198045');" onmouseout="out('8234543871026198045');" style="">1707             mNoteMarkdownFragment.updateMarkdown(mContentEditText.getPreviewTextContent());              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1708         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1709     }                                                                                                    </span>
<span  style="">1710                                                                                                          </span>
<span class="621072892992557040" onmouseenter="enter('621072892992557040');" onmouseout="out('621072892992557040');" style="">1711     private ColorStateList getChipBackgroundColor() {                                                    </span>
<span class="-2852806967863140186" onmouseenter="enter('-2852806967863140186');" onmouseout="out('-2852806967863140186');" style="">1712         int[][] states = new int[][] {                                                                   </span>
<span class="3138779758285079345" onmouseenter="enter('3138779758285079345');" onmouseout="out('3138779758285079345');" style="">1713             new int[] { android.R.attr.state_checked}, // checked                                        </span>
<span class="2921033856249437884" onmouseenter="enter('2921033856249437884');" onmouseout="out('2921033856249437884');" style="">1714             new int[] {-android.R.attr.state_checked}  // unchecked                                      </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">1715         };                                                                                               </span>
<span  style="">1716                                                                                                          </span>
<span class="-5399670070282478940" onmouseenter="enter('-5399670070282478940');" onmouseout="out('-5399670070282478940');" style="">1717         int[] colors = new int[] {                                                                       </span>
<span class="3188530588543322355" onmouseenter="enter('3188530588543322355');" onmouseout="out('3188530588543322355');" style="">1718             ThemeUtils.getColorFromAttribute(requireContext(), R.attr.chipCheckedOnBackgroundColor),     </span>
<span class="1811726545786864469" onmouseenter="enter('1811726545786864469');" onmouseout="out('1811726545786864469');" style="">1719             ThemeUtils.getColorFromAttribute(requireContext(), R.attr.chipCheckedOffBackgroundColor)     </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">1720         };                                                                                               </span>
<span  style="">1721                                                                                                          </span>
<span class="-5773454088160861424" onmouseenter="enter('-5773454088160861424');" onmouseout="out('-5773454088160861424');" style="">1722         return new ColorStateList(states, colors);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1723     }                                                                                                    </span>
<span  style="">1724                                                                                                          </span>
<span class="7978150615022703967" onmouseenter="enter('7978150615022703967');" onmouseout="out('7978150615022703967');" style="">1725     private void setChips(CharSequence text) {                                                           </span>
<span class="-6352640607268108974" onmouseenter="enter('-6352640607268108974');" onmouseout="out('-6352640607268108974');" style="">1726         mTagPadding.setVisibility(text.length() &gt; 0 ? View.VISIBLE : View.GONE);                         </span>
<span class="5420418357496709981" onmouseenter="enter('5420418357496709981');" onmouseout="out('5420418357496709981');" style="">1727         mTagChips.setVisibility(text.length() &gt; 0 ? View.VISIBLE : View.GONE);                           </span>
<span class="6036610741747636495" onmouseenter="enter('6036610741747636495');" onmouseout="out('6036610741747636495');" style="">1728         mTagChips.setSingleSelection(true);                                                              </span>
<span class="-281158766645647153" onmouseenter="enter('-281158766645647153');" onmouseout="out('-281158766645647153');" style="">1729         mTagChips.removeAllViews();                                                                      </span>
<span class="-2312425264507564639" onmouseenter="enter('-2312425264507564639');" onmouseout="out('-2312425264507564639');" style="">1730         SimpleStringSplitter tags = new SimpleStringSplitter(SPACE);                                     </span>
<span class="-2221549004994088170" onmouseenter="enter('-2221549004994088170');" onmouseout="out('-2221549004994088170');" style="">1731         tags.setString(text.toString());                                                                 </span>
<span  style="">1732                                                                                                          </span>
<span class="-7185531782033852210" onmouseenter="enter('-7185531782033852210');" onmouseout="out('-7185531782033852210');" style="">1733         for (String tag : tags) {                                                                        </span>
<span class="-4253336828679787495" onmouseenter="enter('-4253336828679787495');" onmouseout="out('-4253336828679787495');" style="">1734             final Chip chip = new Chip(requireContext());                                                </span>
<span class="1656135987988335587" onmouseenter="enter('1656135987988335587');" onmouseout="out('1656135987988335587');" style="">1735             chip.setText(tag);                                                                           </span>
<span class="-8675353638360963179" onmouseenter="enter('-8675353638360963179');" onmouseout="out('-8675353638360963179');" style="">1736             chip.setCheckable(true);                                                                     </span>
<span class="67942289785469509" onmouseenter="enter('67942289785469509');" onmouseout="out('67942289785469509');" style="">1737             chip.setCheckedIcon(null);                                                                   </span>
<span class="4360750963000358582" onmouseenter="enter('4360750963000358582');" onmouseout="out('4360750963000358582');" style="">1738             chip.setChipBackgroundColor(getChipBackgroundColor());                                       </span>
<span class="9213121115800400320" onmouseenter="enter('9213121115800400320');" onmouseout="out('9213121115800400320');" style="">1739             chip.setTextColor(ThemeUtils.getColorFromAttribute(requireContext(), R.attr.chipTextColor)); </span>
<span class="7518117741736260019" onmouseenter="enter('7518117741736260019');" onmouseout="out('7518117741736260019');" style="">1740             chip.setStateListAnimator(null);                                                             </span>
<span class="-4577029713597050278" onmouseenter="enter('-4577029713597050278');" onmouseout="out('-4577029713597050278');" style="">1741             chip.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {               </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1742                 @Override                                                                                </span>
<span class="3078550550582438549" onmouseenter="enter('3078550550582438549');" onmouseout="out('3078550550582438549');" style="">1743                 public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {             </span>
<span class="44703121288981283" onmouseenter="enter('44703121288981283');" onmouseout="out('44703121288981283');" style="">1744                     chip.setCloseIconVisible(isChecked);                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1745                 }                                                                                        </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">1746             });                                                                                          </span>
<span class="160847713587338016" onmouseenter="enter('160847713587338016');" onmouseout="out('160847713587338016');" style="">1747             chip.setOnCloseIconClickListener(new View.OnClickListener() {                                </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1748                 @Override                                                                                </span>
<span class="2630081792579352299" onmouseenter="enter('2630081792579352299');" onmouseout="out('2630081792579352299');" style="">1749                 public void onClick(View view) {                                                         </span>
<span class="-7509335457070409893" onmouseenter="enter('-7509335457070409893');" onmouseout="out('-7509335457070409893');" style="">1750                     mTagChips.removeView(view);                                                          </span>
<span class="6057505716411681059" onmouseenter="enter('6057505716411681059');" onmouseout="out('6057505716411681059');" style="">1751                     updateTags();                                                                        </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style="">1752                     AnalyticsTracker.track(                                                              </span>
<span class="6322942827450848506" onmouseenter="enter('6322942827450848506');" onmouseout="out('6322942827450848506');" style="">1753                         EDITOR_TAG_REMOVED,                                                              </span>
<span class="-2430475172570880083" onmouseenter="enter('-2430475172570880083');" onmouseout="out('-2430475172570880083');" style="">1754                         CATEGORY_NOTE,                                                                   </span>
<span class="7139119425176259618" onmouseenter="enter('7139119425176259618');" onmouseout="out('7139119425176259618');" style="">1755                         &quot;tag_removed_from_note&quot;                                                          </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">1756                     );                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1757                 }                                                                                        </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">1758             });                                                                                          </span>
<span class="-535069795448615627" onmouseenter="enter('-535069795448615627');" onmouseout="out('-535069795448615627');" style="">1759             mTagChips.addView(chip);                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1760         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1761     }                                                                                                    </span>
<span  style="">1762                                                                                                          </span>
<span class="2006864524440231174" onmouseenter="enter('2006864524440231174');" onmouseout="out('2006864524440231174');" style="">1763     private void updateTags() {                                                                          </span>
<span class="-6566957513776356959" onmouseenter="enter('-6566957513776356959');" onmouseout="out('-6566957513776356959');" style="">1764         if (mNote == null) {                                                                             </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1765             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1766         }                                                                                                </span>
<span  style="">1767                                                                                                          </span>
<span class="2510051710836521686" onmouseenter="enter('2510051710836521686');" onmouseout="out('2510051710836521686');" style="">1768         mNote.setTagString(getNoteTagsString());                                                         </span>
<span class="-3343075472306200704" onmouseenter="enter('-3343075472306200704');" onmouseout="out('-3343075472306200704');" style="">1769         mNote.setModificationDate(Calendar.getInstance());                                               </span>
<span class="3745953297761259324" onmouseenter="enter('3745953297761259324');" onmouseout="out('3745953297761259324');" style="">1770         updateTagList();                                                                                 </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style="">1771         mNote.save();                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1772     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1773 }                                                                                                        </span>












</pre></td>
                            <td><pre><span class="8328120990598135231" onmouseenter="enter('8328120990598135231');" onmouseout="out('8328120990598135231');" style="">   1 package com.automattic.simplenote;                                                                       </span>
<span  style="">   2                                                                                                          </span>
<span class="-7090287939251728203" onmouseenter="enter('-7090287939251728203');" onmouseout="out('-7090287939251728203');" style="">   3 import android.app.Activity;                                                                             </span>
<span class="5922045460006936195" onmouseenter="enter('5922045460006936195');" onmouseout="out('5922045460006936195');" style="">   4 import android.content.Context;                                                                          </span>
<span class="4122587240602557356" onmouseenter="enter('4122587240602557356');" onmouseout="out('4122587240602557356');" style="">   5 import android.content.SharedPreferences;                                                                </span>
<span class="437349496656716435" onmouseenter="enter('437349496656716435');" onmouseout="out('437349496656716435');" style="">   6 import android.content.res.ColorStateList;                                                               </span>
<span class="6294169624328016071" onmouseenter="enter('6294169624328016071');" onmouseout="out('6294169624328016071');" style="">   7 import android.database.Cursor;                                                                          </span>
<span class="-5606798514618908790" onmouseenter="enter('-5606798514618908790');" onmouseout="out('-5606798514618908790');" style="">   8 import android.graphics.Typeface;                                                                        </span>
<span class="-1737226814075322931" onmouseenter="enter('-1737226814075322931');" onmouseout="out('-1737226814075322931');" style="">   9 import android.graphics.drawable.Drawable;                                                               </span>
<span class="955674827050616793" onmouseenter="enter('955674827050616793');" onmouseout="out('955674827050616793');" style="">  10 import android.os.AsyncTask;                                                                             </span>
<span class="8096531590004379472" onmouseenter="enter('8096531590004379472');" onmouseout="out('8096531590004379472');" style="">  11 import android.os.Bundle;                                                                                </span>
<span class="-1086316590722027623" onmouseenter="enter('-1086316590722027623');" onmouseout="out('-1086316590722027623');" style="">  12 import android.os.Handler;                                                                               </span>
<span class="4177373235046048356" onmouseenter="enter('4177373235046048356');" onmouseout="out('4177373235046048356');" style="">  13 import android.text.Editable;                                                                            </span>
<span class="-578015270574978569" onmouseenter="enter('-578015270574978569');" onmouseout="out('-578015270574978569');" style="">  14 import android.text.Layout;                                                                              </span>
<span class="7731806713123176572" onmouseenter="enter('7731806713123176572');" onmouseout="out('7731806713123176572');" style="">  15 import android.text.Spanned;                                                                             </span>
<span class="-3299261040401335998" onmouseenter="enter('-3299261040401335998');" onmouseout="out('-3299261040401335998');" style="">  16 import android.text.TextUtils.SimpleStringSplitter;                                                      </span>
<span class="4038639591141008331" onmouseenter="enter('4038639591141008331');" onmouseout="out('4038639591141008331');" style="">  17 import android.text.TextWatcher;                                                                         </span>
<span class="-654170262772204786" onmouseenter="enter('-654170262772204786');" onmouseout="out('-654170262772204786');" style="">  18 import android.text.style.MetricAffectingSpan;                                                           </span>
<span class="2374973474356501783" onmouseenter="enter('2374973474356501783');" onmouseout="out('2374973474356501783');" style="">  19 import android.text.style.RelativeSizeSpan;                                                              </span>
<span class="-6813443535687611228" onmouseenter="enter('-6813443535687611228');" onmouseout="out('-6813443535687611228');" style="">  20 import android.text.style.StyleSpan;                                                                     </span>
<span class="-1165963660754430642" onmouseenter="enter('-1165963660754430642');" onmouseout="out('-1165963660754430642');" style="">  21 import android.text.style.URLSpan;                                                                       </span>
<span class="-3804250137032727253" onmouseenter="enter('-3804250137032727253');" onmouseout="out('-3804250137032727253');" style="">  22 import android.text.util.Linkify;                                                                        </span>
<span class="-1289400933432271961" onmouseenter="enter('-1289400933432271961');" onmouseout="out('-1289400933432271961');" style="">  23 import android.util.TypedValue;                                                                          </span>
<span class="8553241717595905778" onmouseenter="enter('8553241717595905778');" onmouseout="out('8553241717595905778');" style="">  24 import android.view.LayoutInflater;                                                                      </span>
<span class="-603490076395619238" onmouseenter="enter('-603490076395619238');" onmouseout="out('-603490076395619238');" style="">  25 import android.view.Menu;                                                                                </span>
<span class="-434306062495579804" onmouseenter="enter('-434306062495579804');" onmouseout="out('-434306062495579804');" style="">  26 import android.view.MenuInflater;                                                                        </span>
<span class="6391706839654240930" onmouseenter="enter('6391706839654240930');" onmouseout="out('6391706839654240930');" style="">  27 import android.view.MenuItem;                                                                            </span>
<span class="-8980485571216513882" onmouseenter="enter('-8980485571216513882');" onmouseout="out('-8980485571216513882');" style="">  28 import android.view.View;                                                                                </span>
<span class="7569314084591619834" onmouseenter="enter('7569314084591619834');" onmouseout="out('7569314084591619834');" style="">  29 import android.view.ViewGroup;                                                                           </span>
<span class="-4985651548362660777" onmouseenter="enter('-4985651548362660777');" onmouseout="out('-4985651548362660777');" style="">  30 import android.view.ViewTreeObserver;                                                                    </span>
<span class="-3117363671899680167" onmouseenter="enter('-3117363671899680167');" onmouseout="out('-3117363671899680167');" style="">  31 import android.view.inputmethod.InputMethodManager;                                                      </span>
<span class="1348319594514771408" onmouseenter="enter('1348319594514771408');" onmouseout="out('1348319594514771408');" style="">  32 import android.webkit.WebResourceRequest;                                                                </span>
<span class="2723690893492346945" onmouseenter="enter('2723690893492346945');" onmouseout="out('2723690893492346945');" style="">  33 import android.webkit.WebView;                                                                           </span>
<span class="-3167847991483127041" onmouseenter="enter('-3167847991483127041');" onmouseout="out('-3167847991483127041');" style="">  34 import android.webkit.WebViewClient;                                                                     </span>
<span class="2736968318319789680" onmouseenter="enter('2736968318319789680');" onmouseout="out('2736968318319789680');" style="">  35 import android.widget.CompoundButton;                                                                    </span>
<span class="5634491474902588492" onmouseenter="enter('5634491474902588492');" onmouseout="out('5634491474902588492');" style="">  36 import android.widget.CursorAdapter;                                                                     </span>
<span class="5987800420235491716" onmouseenter="enter('5987800420235491716');" onmouseout="out('5987800420235491716');" style="">  37 import android.widget.LinearLayout;                                                                      </span>
<span class="-4961528671422147708" onmouseenter="enter('-4961528671422147708');" onmouseout="out('-4961528671422147708');" style="">  38 import android.widget.TextView;                                                                          </span>
<span class="-4373317539211938720" onmouseenter="enter('-4373317539211938720');" onmouseout="out('-4373317539211938720');" style="">  39 import android.widget.Toast;                                                                             </span>
<span class="6963272077887521702" onmouseenter="enter('6963272077887521702');" onmouseout="out('6963272077887521702');" style="">  40 import androidx.annotation.NonNull;                                                                      </span>
<span class="-4688549274525092465" onmouseenter="enter('-4688549274525092465');" onmouseout="out('-4688549274525092465');" style="">  41 import androidx.annotation.StringRes;                                                                    </span>
<span class="8057892732248099365" onmouseenter="enter('8057892732248099365');" onmouseout="out('8057892732248099365');" style="">  42 import androidx.appcompat.app.AppCompatActivity;                                                         </span>
<span class="2035494855708115696" onmouseenter="enter('2035494855708115696');" onmouseout="out('2035494855708115696');" style="">  43 import androidx.appcompat.view.ActionMode;                                                               </span>
<span class="-6344652174315873597" onmouseenter="enter('-6344652174315873597');" onmouseout="out('-6344652174315873597');" style="">  44 import androidx.core.app.ShareCompat;                                                                    </span>
<span class="-362404946986079023" onmouseenter="enter('-362404946986079023');" onmouseout="out('-362404946986079023');" style="">  45 import androidx.core.view.MenuCompat;                                                                    </span>
<span class="-767584428700722881" onmouseenter="enter('-767584428700722881');" onmouseout="out('-767584428700722881');" style="">  46 import androidx.core.widget.NestedScrollView;                                                            </span>
<span class="2878002094531064439" onmouseenter="enter('2878002094531064439');" onmouseout="out('2878002094531064439');" style="">  47 import androidx.fragment.app.Fragment;                                                                   </span>
<span class="-6950145472733447700" onmouseenter="enter('-6950145472733447700');" onmouseout="out('-6950145472733447700');" style="">  48 import androidx.fragment.app.FragmentTransaction;                                                        </span>
<span class="-7272383226560052741" onmouseenter="enter('-7272383226560052741');" onmouseout="out('-7272383226560052741');" style="">  49 import androidx.preference.PreferenceManager;                                                            </span>
<span class="-155835000323929258" onmouseenter="enter('-155835000323929258');" onmouseout="out('-155835000323929258');" style="">  50 import com.automattic.simplenote.analytics.AnalyticsTracker;                                             </span>
<span class="9061368408436996655" onmouseenter="enter('9061368408436996655');" onmouseout="out('9061368408436996655');" style="">  51 import com.automattic.simplenote.models.Note;                                                            </span>
<span class="107771998888903823" onmouseenter="enter('107771998888903823');" onmouseout="out('107771998888903823');" style="">  52 import com.automattic.simplenote.models.Tag;                                                             </span>
<span class="7580776162261256599" onmouseenter="enter('7580776162261256599');" onmouseout="out('7580776162261256599');" style="">  53 import com.automattic.simplenote.utils.AppLog.Type;                                                      </span>
<span class="160698548927534529" onmouseenter="enter('160698548927534529');" onmouseout="out('160698548927534529');" style="">  54 import com.automattic.simplenote.utils.AppLog;                                                           </span>
<span class="-4380838228434146133" onmouseenter="enter('-4380838228434146133');" onmouseout="out('-4380838228434146133');" style="">  55 import com.automattic.simplenote.utils.AutoBullet;                                                       </span>
<span class="1593315676680608324" onmouseenter="enter('1593315676680608324');" onmouseout="out('1593315676680608324');" style="">  56 import com.automattic.simplenote.utils.BrowserUtils;                                                     </span>
<span class="8229771960302052711" onmouseenter="enter('8229771960302052711');" onmouseout="out('8229771960302052711');" style="">  57 import com.automattic.simplenote.utils.ContextUtils;                                                     </span>
<span class="8577850632926167445" onmouseenter="enter('8577850632926167445');" onmouseout="out('8577850632926167445');" style="">  58 import com.automattic.simplenote.utils.DisplayUtils;                                                     </span>
<span class="930019215389101465" onmouseenter="enter('930019215389101465');" onmouseout="out('930019215389101465');" style="">  59 import com.automattic.simplenote.utils.DrawableUtils;                                                    </span>
<span class="1327521140651609704" onmouseenter="enter('1327521140651609704');" onmouseout="out('1327521140651609704');" style="">  60 import com.automattic.simplenote.utils.MatchOffsetHighlighter;                                           </span>
<span class="6713747859106964949" onmouseenter="enter('6713747859106964949');" onmouseout="out('6713747859106964949');" style="">  61 import com.automattic.simplenote.utils.NetworkUtils;                                                     </span>
<span class="2290458949892536112" onmouseenter="enter('2290458949892536112');" onmouseout="out('2290458949892536112');" style="">  62 import com.automattic.simplenote.utils.NoteUtils;                                                        </span>
<span class="-7136497821822559876" onmouseenter="enter('-7136497821822559876');" onmouseout="out('-7136497821822559876');" style="">  63 import com.automattic.simplenote.utils.PrefUtils;                                                        </span>
<span class="2537926396801226048" onmouseenter="enter('2537926396801226048');" onmouseout="out('2537926396801226048');" style="">  64 import com.automattic.simplenote.utils.SimplenoteLinkify;                                                </span>
<span class="-42292328951391685" onmouseenter="enter('-42292328951391685');" onmouseout="out('-42292328951391685');" style="">  65 import com.automattic.simplenote.utils.SimplenoteMovementMethod;                                         </span>
<span class="13513923158165555" onmouseenter="enter('13513923158165555');" onmouseout="out('13513923158165555');" style="">  66 import com.automattic.simplenote.utils.SpaceTokenizer;                                                   </span>
<span class="-643769428942460504" onmouseenter="enter('-643769428942460504');" onmouseout="out('-643769428942460504');" style="">  67 import com.automattic.simplenote.utils.TagUtils;                                                         </span>
<span class="451633977271230846" onmouseenter="enter('451633977271230846');" onmouseout="out('451633977271230846');" style="">  68 import com.automattic.simplenote.utils.TagsMultiAutoCompleteTextView.OnTagAddedListener;                 </span>
<span class="-4652171765784917488" onmouseenter="enter('-4652171765784917488');" onmouseout="out('-4652171765784917488');" style="">  69 import com.automattic.simplenote.utils.TagsMultiAutoCompleteTextView;                                    </span>
<span class="3055903766206676561" onmouseenter="enter('3055903766206676561');" onmouseout="out('3055903766206676561');" style="">  70 import com.automattic.simplenote.utils.TextHighlighter;                                                  </span>
<span class="7305000128845659611" onmouseenter="enter('7305000128845659611');" onmouseout="out('7305000128845659611');" style="">  71 import com.automattic.simplenote.utils.ThemeUtils;                                                       </span>
<span class="-3457858113236631039" onmouseenter="enter('-3457858113236631039');" onmouseout="out('-3457858113236631039');" style="">  72 import com.automattic.simplenote.utils.WidgetUtils;                                                      </span>
<span class="4834384566534786428" onmouseenter="enter('4834384566534786428');" onmouseout="out('4834384566534786428');" style="">  73 import com.automattic.simplenote.widgets.SimplenoteEditText;                                             </span>
<span class="4924672443805777373" onmouseenter="enter('4924672443805777373');" onmouseout="out('4924672443805777373');" style="">  74 import com.google.android.material.chip.Chip;                                                            </span>
<span class="6530176725815500896" onmouseenter="enter('6530176725815500896');" onmouseout="out('6530176725815500896');" style="">  75 import com.google.android.material.chip.ChipGroup;                                                       </span>
<span class="-6749865676367010343" onmouseenter="enter('-6749865676367010343');" onmouseout="out('-6749865676367010343');" style="">  76 import com.google.android.material.snackbar.Snackbar;                                                    </span>
<span class="-8170925370861558125" onmouseenter="enter('-8170925370861558125');" onmouseout="out('-8170925370861558125');" style="">  77 import com.simperium.client.Bucket;                                                                      </span>
<span class="-8454203534157102839" onmouseenter="enter('-8454203534157102839');" onmouseout="out('-8454203534157102839');" style="">  78 import com.simperium.client.BucketObjectMissingException;                                                </span>
<span class="-6020507013779766735" onmouseenter="enter('-6020507013779766735');" onmouseout="out('-6020507013779766735');" style="">  79 import com.simperium.client.Query;                                                                       </span>
<span class="-8692343821508153377" onmouseenter="enter('-8692343821508153377');" onmouseout="out('-8692343821508153377');" style="">  80 import java.lang.ref.WeakReference;                                                                      </span>
<span class="1562735530241225598" onmouseenter="enter('1562735530241225598');" onmouseout="out('1562735530241225598');" style="">  81 import java.util.Calendar;                                                                               </span>
<span class="-3102294303099779792" onmouseenter="enter('-3102294303099779792');" onmouseout="out('-3102294303099779792');" style="">  82 import static com.automattic.simplenote.analytics.AnalyticsTracker.CATEGORY_NOTE;                        </span>
<span class="5242531748460347937" onmouseenter="enter('5242531748460347937');" onmouseout="out('5242531748460347937');" style="">  83 import static com.automattic.simplenote.analytics.AnalyticsTracker.Stat.EDITOR_CHECKLIST_INSERTED;       </span>
<span class="-3490868053375355616" onmouseenter="enter('-3490868053375355616');" onmouseout="out('-3490868053375355616');" style="">  84 import static com.automattic.simplenote.analytics.AnalyticsTracker.Stat.EDITOR_NOTE_CONTENT_SHARED;      </span>
<span class="-2121854313245668982" onmouseenter="enter('-2121854313245668982');" onmouseout="out('-2121854313245668982');" style="">  85 import static com.automattic.simplenote.analytics.AnalyticsTracker.Stat.EDITOR_NOTE_EDITED;              </span>
<span class="-6581780444010205945" onmouseenter="enter('-6581780444010205945');" onmouseout="out('-6581780444010205945');" style="">  86 import static com.automattic.simplenote.analytics.AnalyticsTracker.Stat.EDITOR_NOTE_PUBLISHED;           </span>
<span class="-9109271177878770606" onmouseenter="enter('-9109271177878770606');" onmouseout="out('-9109271177878770606');" style="">  87 import static com.automattic.simplenote.analytics.AnalyticsTracker.Stat.EDITOR_NOTE_UNPUBLISHED;         </span>
<span class="1895845895606351499" onmouseenter="enter('1895845895606351499');" onmouseout="out('1895845895606351499');" style="">  88 import static com.automattic.simplenote.analytics.AnalyticsTracker.Stat.EDITOR_TAG_ADDED;                </span>
<span class="-7938671928844888956" onmouseenter="enter('-7938671928844888956');" onmouseout="out('-7938671928844888956');" style="">  89 import static com.automattic.simplenote.analytics.AnalyticsTracker.Stat.EDITOR_TAG_REMOVED;              </span>
<span class="8057784740076816561" onmouseenter="enter('8057784740076816561');" onmouseout="out('8057784740076816561');" style="">  90 import static com.automattic.simplenote.utils.SearchTokenizer.SPACE;                                     </span>
<span class="-4405840676582391526" onmouseenter="enter('-4405840676582391526');" onmouseout="out('-4405840676582391526');" style="">  91 import static com.automattic.simplenote.utils.SimplenoteLinkify.SIMPLENOTE_LINK_PREFIX;                  </span>
<span  style="">  92                                                                                                          </span>
<span  style="">  93                                                                                                          </span>
<span class="-7776761414948279806" onmouseenter="enter('-7776761414948279806');" onmouseout="out('-7776761414948279806');" style=""><abbr title="  94 public class NoteEditorFragment extends Fragment implements Bucket.Listener&lt;Note&gt; , TextWatcher , OnTagAddedListener , View.OnFocusChangeListener , SimplenoteEditText.OnSelectionChangedListener , ShareBottomSheetDialog.ShareSheetListener , HistoryBottomSheetDialog.HistorySheetListener , SimplenoteEditText.OnCheckboxToggledListener {">  94 public class NoteEditorFragment extends Fragment implements Bucket.Listener&lt;Note&gt; , TextWatcher , OnTagAd🔵</abbr></span>
<span class="7313308760576274084" onmouseenter="enter('7313308760576274084');" onmouseout="out('7313308760576274084');" style="">  95     public static final String ARG_IS_FROM_WIDGET = &quot;is_from_widget&quot;;                                    </span>
<span  style="">  96                                                                                                          </span>
<span class="-4619625032881090052" onmouseenter="enter('-4619625032881090052');" onmouseout="out('-4619625032881090052');" style="">  97     public static final String ARG_ITEM_ID = &quot;item_id&quot;;                                                  </span>
<span  style="">  98                                                                                                          </span>
<span class="-7299684920632401552" onmouseenter="enter('-7299684920632401552');" onmouseout="out('-7299684920632401552');" style="">  99     public static final String ARG_NEW_NOTE = &quot;new_note&quot;;                                                </span>
<span  style=""> 100                                                                                                          </span>
<span class="5570942911396170891" onmouseenter="enter('5570942911396170891');" onmouseout="out('5570942911396170891');" style=""> 101     public static final String ARG_MATCH_OFFSETS = &quot;match_offsets&quot;;                                      </span>
<span  style=""> 102                                                                                                          </span>
<span class="8145563106929735928" onmouseenter="enter('8145563106929735928');" onmouseout="out('8145563106929735928');" style=""> 103     public static final String ARG_MARKDOWN_ENABLED = &quot;markdown_enabled&quot;;                                </span>
<span  style=""> 104                                                                                                          </span>
<span class="-9204037548779502592" onmouseenter="enter('-9204037548779502592');" onmouseout="out('-9204037548779502592');" style=""> 105     public static final String ARG_PREVIEW_ENABLED = &quot;preview_enabled&quot;;                                  </span>
<span  style=""> 106                                                                                                          </span>
<span class="-4900097812038151447" onmouseenter="enter('-4900097812038151447');" onmouseout="out('-4900097812038151447');" style=""> 107     private static final String STATE_NOTE_ID = &quot;state_note_id&quot;;                                         </span>
<span  style=""> 108                                                                                                          </span>
<span class="8491452362607628076" onmouseenter="enter('8491452362607628076');" onmouseout="out('8491452362607628076');" style=""> 109     private static final int AUTOSAVE_DELAY_MILLIS = 2000;                                               </span>
<span  style=""> 110                                                                                                          </span>
<span class="6474488624255872222" onmouseenter="enter('6474488624255872222');" onmouseout="out('6474488624255872222');" style=""> 111     private static final int MAX_REVISIONS = 30;                                                         </span>
<span  style=""> 112                                                                                                          </span>
<span class="2597021995687752472" onmouseenter="enter('2597021995687752472');" onmouseout="out('2597021995687752472');" style=""> 113     private static final int PUBLISH_TIMEOUT = 20000;                                                    </span>
<span  style=""> 114                                                                                                          </span>
<span class="3616229628179044566" onmouseenter="enter('3616229628179044566');" onmouseout="out('3616229628179044566');" style=""> 115     private static final int HISTORY_TIMEOUT = 10000;                                                    </span>
<span  style=""> 116                                                                                                          </span>
<span class="-6846870049312317979" onmouseenter="enter('-6846870049312317979');" onmouseout="out('-6846870049312317979');" style=""> 117     private Note mNote;                                                                                  </span>
<span  style=""> 118                                                                                                          </span>
<span class="-567099590261614492" onmouseenter="enter('-567099590261614492');" onmouseout="out('-567099590261614492');" style=""> 119     private final Runnable mAutoSaveRunnable = new Runnable() {                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 120         @Override                                                                                        </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 121         public void run() {                                                                              </span>
<span class="-2186856349666885424" onmouseenter="enter('-2186856349666885424');" onmouseout="out('-2186856349666885424');" style=""> 122             saveAndSyncNote();                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 123         }                                                                                                </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 124     };                                                                                                   </span>
<span  style=""> 125                                                                                                          </span>
<span class="-7913886194286774922" onmouseenter="enter('-7913886194286774922');" onmouseout="out('-7913886194286774922');" style=""> 126     private Bucket&lt;Note&gt; mNotesBucket;                                                                   </span>
<span  style=""> 127                                                                                                          </span>
<span class="335650161029573145" onmouseenter="enter('335650161029573145');" onmouseout="out('335650161029573145');" style=""> 128     private View mRootView;                                                                              </span>
<span  style=""> 129                                                                                                          </span>
<span class="8292114391111638673" onmouseenter="enter('8292114391111638673');" onmouseout="out('8292114391111638673');" style=""> 130     private View mTagPadding;                                                                            </span>
<span  style=""> 131                                                                                                          </span>
<span class="6580801006778009663" onmouseenter="enter('6580801006778009663');" onmouseout="out('6580801006778009663');" style=""> 132     private SimplenoteEditText mContentEditText;                                                         </span>
<span  style=""> 133                                                                                                          </span>
<span class="-1116191624704212145" onmouseenter="enter('-1116191624704212145');" onmouseout="out('-1116191624704212145');" style=""> 134     private ChipGroup mTagChips;                                                                         </span>
<span  style=""> 135                                                                                                          </span>
<span class="7794609246836871312" onmouseenter="enter('7794609246836871312');" onmouseout="out('7794609246836871312');" style=""> 136     private TagsMultiAutoCompleteTextView mTagInput;                                                     </span>
<span  style=""> 137                                                                                                          </span>
<span class="6494121288462075344" onmouseenter="enter('6494121288462075344');" onmouseout="out('6494121288462075344');" style=""> 138     private Handler mAutoSaveHandler;                                                                    </span>
<span  style=""> 139                                                                                                          </span>
<span class="8783277907965445564" onmouseenter="enter('8783277907965445564');" onmouseout="out('8783277907965445564');" style=""> 140     private Handler mPublishTimeoutHandler;                                                              </span>
<span  style=""> 141                                                                                                          </span>
<span class="4217449185156868905" onmouseenter="enter('4217449185156868905');" onmouseout="out('4217449185156868905');" style=""> 142     private Handler mHistoryTimeoutHandler;                                                              </span>
<span  style=""> 143                                                                                                          </span>
<span class="-1776320876088405367" onmouseenter="enter('-1776320876088405367');" onmouseout="out('-1776320876088405367');" style=""> 144     private LinearLayout mPlaceholderView;                                                               </span>
<span  style=""> 145                                                                                                          </span>
<span class="-5862875858497045082" onmouseenter="enter('-5862875858497045082');" onmouseout="out('-5862875858497045082');" style=""> 146     private CursorAdapter mAutocompleteAdapter;                                                          </span>
<span  style=""> 147                                                                                                          </span>
<span class="-7523089573477153489" onmouseenter="enter('-7523089573477153489');" onmouseout="out('-7523089573477153489');" style=""> 148     private boolean mIsLoadingNote;                                                                      </span>
<span  style=""> 149                                                                                                          </span>
<span class="-721861736726211964" onmouseenter="enter('-721861736726211964');" onmouseout="out('-721861736726211964');" style=""> 150     private boolean mIsMarkdownEnabled;                                                                  </span>
<span  style=""> 151                                                                                                          </span>
<span class="5667351599274937983" onmouseenter="enter('5667351599274937983');" onmouseout="out('5667351599274937983');" style=""> 152     private boolean mIsPreviewEnabled;                                                                   </span>
<span  style=""> 153                                                                                                          </span>
<span class="1780690803770096596" onmouseenter="enter('1780690803770096596');" onmouseout="out('1780690803770096596');" style=""> 154     private boolean mShouldScrollToSearchMatch;                                                          </span>
<span  style=""> 155                                                                                                          </span>
<span class="7307228847460234411" onmouseenter="enter('7307228847460234411');" onmouseout="out('7307228847460234411');" style=""> 156     private ActionMode mActionMode;                                                                      </span>
<span  style=""> 157                                                                                                          </span>
<span class="6272698018239268533" onmouseenter="enter('6272698018239268533');" onmouseout="out('6272698018239268533');" style=""> 158     private MenuItem mChecklistMenuItem;                                                                 </span>
<span  style=""> 159                                                                                                          </span>
<span class="-801211553419280849" onmouseenter="enter('-801211553419280849');" onmouseout="out('-801211553419280849');" style=""> 160     private MenuItem mCopyMenuItem;                                                                      </span>
<span  style=""> 161                                                                                                          </span>
<span class="-8722853698202618925" onmouseenter="enter('-8722853698202618925');" onmouseout="out('-8722853698202618925');" style=""> 162     private MenuItem mInformationMenuItem;                                                               </span>
<span  style=""> 163                                                                                                          </span>
<span class="6754990951372191595" onmouseenter="enter('6754990951372191595');" onmouseout="out('6754990951372191595');" style=""> 164     private MenuItem mShareMenuItem;                                                                     </span>
<span  style=""> 165                                                                                                          </span>
<span class="-1934738222867341331" onmouseenter="enter('-1934738222867341331');" onmouseout="out('-1934738222867341331');" style=""> 166     private MenuItem mViewLinkMenuItem;                                                                  </span>
<span  style=""> 167                                                                                                          </span>
<span class="-3624836155172024592" onmouseenter="enter('-3624836155172024592');" onmouseout="out('-3624836155172024592');" style=""> 168     private String mLinkUrl;                                                                             </span>
<span  style=""> 169                                                                                                          </span>
<span class="-680149036339568713" onmouseenter="enter('-680149036339568713');" onmouseout="out('-680149036339568713');" style=""> 170     private String mLinkText;                                                                            </span>
<span  style=""> 171                                                                                                          </span>
<span class="-8355060532383088001" onmouseenter="enter('-8355060532383088001');" onmouseout="out('-8355060532383088001');" style=""> 172     private MatchOffsetHighlighter mHighlighter;                                                         </span>
<span  style=""> 173                                                                                                          </span>
<span class="-3046310933001836521" onmouseenter="enter('-3046310933001836521');" onmouseout="out('-3046310933001836521');" style=""> 174     private Drawable mBrowserIcon;                                                                       </span>
<span  style=""> 175                                                                                                          </span>
<span class="-2893651165769435735" onmouseenter="enter('-2893651165769435735');" onmouseout="out('-2893651165769435735');" style=""> 176     private Drawable mCallIcon;                                                                          </span>
<span  style=""> 177                                                                                                          </span>
<span class="-4798548703316944753" onmouseenter="enter('-4798548703316944753');" onmouseout="out('-4798548703316944753');" style=""> 178     private Drawable mCopyIcon;                                                                          </span>
<span  style=""> 179                                                                                                          </span>
<span class="6775927648012186278" onmouseenter="enter('6775927648012186278');" onmouseout="out('6775927648012186278');" style=""> 180     private Drawable mEmailIcon;                                                                         </span>
<span  style=""> 181                                                                                                          </span>
<span class="-3265647716576371737" onmouseenter="enter('-3265647716576371737');" onmouseout="out('-3265647716576371737');" style=""> 182     private Drawable mLinkIcon;                                                                          </span>
<span  style=""> 183                                                                                                          </span>
<span class="-2947594512272302462" onmouseenter="enter('-2947594512272302462');" onmouseout="out('-2947594512272302462');" style=""> 184     private Drawable mMapIcon;                                                                           </span>
<span  style=""> 185                                                                                                          </span>
<span class="-8263922286266999556" onmouseenter="enter('-8263922286266999556');" onmouseout="out('-8263922286266999556');" style=""> 186     private Drawable mShareIcon;                                                                         </span>
<span  style=""> 187                                                                                                          </span>
<span class="-7542236593744276396" onmouseenter="enter('-7542236593744276396');" onmouseout="out('-7542236593744276396');" style=""> 188     private MatchOffsetHighlighter.SpanFactory mMatchHighlighter;                                        </span>
<span  style=""> 189                                                                                                          </span>
<span class="2689815831275839045" onmouseenter="enter('2689815831275839045');" onmouseout="out('2689815831275839045');" style=""> 190     private String mMatchOffsets;                                                                        </span>
<span  style=""> 191                                                                                                          </span>
<span class="-7790101837861097441" onmouseenter="enter('-7790101837861097441');" onmouseout="out('-7790101837861097441');" style=""> 192     private int mCurrentCursorPosition;                                                                  </span>
<span  style=""> 193                                                                                                          </span>
<span class="6178043190004357016" onmouseenter="enter('6178043190004357016');" onmouseout="out('6178043190004357016');" style=""> 194     private HistoryBottomSheetDialog mHistoryBottomSheet;                                                </span>
<span  style=""> 195                                                                                                          </span>
<span class="-2764923775971952187" onmouseenter="enter('-2764923775971952187');" onmouseout="out('-2764923775971952187');" style=""> 196     private boolean mIsPaused;                                                                           </span>
<span  style=""> 197                                                                                                          </span>
<span class="-4741322818714001783" onmouseenter="enter('-4741322818714001783');" onmouseout="out('-4741322818714001783');" style=""> 198     private boolean mIsFromWidget;                                                                       </span>
<span  style=""> 199                                                                                                          </span>
<span class="-595864044689580029" onmouseenter="enter('-595864044689580029');" onmouseout="out('-595864044689580029');" style=""> 200     // Hides the history bottom sheet if no revisions are loaded                                         </span>
<span class="-595864044689580029" onmouseenter="enter('-595864044689580029');" onmouseout="out('-595864044689580029');" style=""> 201     // Hides the history bottom sheet if no revisions are loaded                                         </span>
<span class="9136224915231079842" onmouseenter="enter('9136224915231079842');" onmouseout="out('9136224915231079842');" style=""> 202     private final Runnable mHistoryTimeoutRunnable = new Runnable() {                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 203         @Override                                                                                        </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 204         public void run() {                                                                              </span>
<span class="5514287417242355685" onmouseenter="enter('5514287417242355685');" onmouseout="out('5514287417242355685');" style=""> 205             if (!isAdded()) {                                                                            </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 206                 return;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 207             }                                                                                            </span>
<span  style=""> 208                                                                                                          </span>
<span class="5713980397306524156" onmouseenter="enter('5713980397306524156');" onmouseout="out('5713980397306524156');" style=""> 209             requireActivity().runOnUiThread(new Runnable() {                                             </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 210                 @Override                                                                                </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 211                 public void run() {                                                                      </span>
<span class="-3311389934398547914" onmouseenter="enter('-3311389934398547914');" onmouseout="out('-3311389934398547914');" style=""><abbr title=" 212                     if (mHistoryBottomSheet.getDialog() != null &amp;&amp; mHistoryBottomSheet.getDialog().isShowing() &amp;&amp; !mHistoryBottomSheet.isHistoryLoaded()) {"> 212                     if (mHistoryBottomSheet.getDialog() != null &amp;&amp; mHistoryBottomSheet.getDialog().isShow🔵</abbr></span>
<span class="-2599981510781765889" onmouseenter="enter('-2599981510781765889');" onmouseout="out('-2599981510781765889');" style=""> 213                         mHistoryBottomSheet.dismiss();                                                   </span>
<span class="-1949769614201595359" onmouseenter="enter('-1949769614201595359');" onmouseout="out('-1949769614201595359');" style=""> 214                         Toast.makeText(getActivity(), R.string.error_history, Toast.LENGTH_LONG).show(); </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 215                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 216                 }                                                                                        </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 217             });                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 218         }                                                                                                </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 219     };                                                                                                   </span>
<span  style=""> 220                                                                                                          </span>
<span class="-7982825583780013979" onmouseenter="enter('-7982825583780013979');" onmouseout="out('-7982825583780013979');" style=""> 221     private InfoBottomSheetDialog mInfoBottomSheet;                                                      </span>
<span  style=""> 222                                                                                                          </span>
<span class="3825770423127948234" onmouseenter="enter('3825770423127948234');" onmouseout="out('3825770423127948234');" style=""> 223     private ShareBottomSheetDialog mShareBottomSheet;                                                    </span>
<span  style=""> 224                                                                                                          </span>
<span class="9084056993766846780" onmouseenter="enter('9084056993766846780');" onmouseout="out('9084056993766846780');" style=""> 225     // Contextual action bar for dealing with links                                                      </span>
<span class="7674077006773948876" onmouseenter="enter('7674077006773948876');" onmouseout="out('7674077006773948876');" style=""> 226     private final ActionMode.Callback mActionModeCallback = new ActionMode.Callback() {                  </span>
<span class="-5830922032047880245" onmouseenter="enter('-5830922032047880245');" onmouseout="out('-5830922032047880245');" style=""> 227         // Called when the action mode is created; startActionMode() was called                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 228         @Override                                                                                        </span>
<span class="6869646826473679297" onmouseenter="enter('6869646826473679297');" onmouseout="out('6869646826473679297');" style=""> 229         public boolean onCreateActionMode(ActionMode mode, Menu menu) {                                  </span>
<span class="-5328486553851934265" onmouseenter="enter('-5328486553851934265');" onmouseout="out('-5328486553851934265');" style=""> 230             // Inflate a menu resource providing context menu items                                      </span>
<span class="8164139660214751060" onmouseenter="enter('8164139660214751060');" onmouseout="out('8164139660214751060');" style=""> 231             MenuInflater inflater = mode.getMenuInflater();                                              </span>
<span class="-1400051225095864167" onmouseenter="enter('-1400051225095864167');" onmouseout="out('-1400051225095864167');" style=""> 232             if (inflater != null) {                                                                      </span>
<span class="6552624979414277895" onmouseenter="enter('6552624979414277895');" onmouseout="out('6552624979414277895');" style=""> 233                 inflater.inflate(R.menu.view_link, menu);                                                </span>
<span class="1687703529546627770" onmouseenter="enter('1687703529546627770');" onmouseout="out('1687703529546627770');" style=""> 234                 mCopyMenuItem = menu.findItem(R.id.menu_copy);                                           </span>
<span class="-7121630790551700692" onmouseenter="enter('-7121630790551700692');" onmouseout="out('-7121630790551700692');" style=""> 235                 mShareMenuItem = menu.findItem(R.id.menu_share);                                         </span>
<span class="2045169504868185532" onmouseenter="enter('2045169504868185532');" onmouseout="out('2045169504868185532');" style=""> 236                 mViewLinkMenuItem = menu.findItem(R.id.menu_view_link);                                  </span>
<span class="4190298810187820509" onmouseenter="enter('4190298810187820509');" onmouseout="out('4190298810187820509');" style=""> 237                 mode.setTitle(getString(R.string.link));                                                 </span>
<span class="-2927630225150463376" onmouseenter="enter('-2927630225150463376');" onmouseout="out('-2927630225150463376');" style=""> 238                 mode.setTitleOptionalHint(false);                                                        </span>
<span class="-5146912340244450550" onmouseenter="enter('-5146912340244450550');" onmouseout="out('-5146912340244450550');" style=""> 239                 DrawableUtils.tintMenuWithAttribute(getActivity(), menu, R.attr.toolbarIconColor);       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 240             }                                                                                            </span>
<span class="2269582470475983092" onmouseenter="enter('2269582470475983092');" onmouseout="out('2269582470475983092');" style=""><abbr title=" 241             requireActivity().getWindow().setStatusBarColor(ThemeUtils.getColorFromAttribute(requireContext(), R.attr.mainBackgroundColor));"> 241             requireActivity().getWindow().setStatusBarColor(ThemeUtils.getColorFromAttribute(requireConte🔵</abbr></span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 242             return true;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 243         }                                                                                                </span>
<span  style=""> 244                                                                                                          </span>
<span class="-7885162724385925248" onmouseenter="enter('-7885162724385925248');" onmouseout="out('-7885162724385925248');" style=""> 245         // Called each time the action mode is shown. Always called after onCreateActionMode, but        </span>
<span class="6140331646129020842" onmouseenter="enter('6140331646129020842');" onmouseout="out('6140331646129020842');" style=""> 246         // may be called multiple times if the mode is invalidated.                                      </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 247         @Override                                                                                        </span>
<span class="5392123371105216364" onmouseenter="enter('5392123371105216364');" onmouseout="out('5392123371105216364');" style=""> 248         public boolean onPrepareActionMode(ActionMode mode, Menu menu) {                                 </span>
<span class="9220029862843236189" onmouseenter="enter('9220029862843236189');" onmouseout="out('9220029862843236189');" style=""> 249             return false; // Return false if nothing is done                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 250         }                                                                                                </span>
<span  style=""> 251                                                                                                          </span>
<span class="-918812678605329556" onmouseenter="enter('-918812678605329556');" onmouseout="out('-918812678605329556');" style=""> 252         // Called when the user selects a contextual menu item                                           </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 253         @Override                                                                                        </span>
<span class="816131742774025467" onmouseenter="enter('816131742774025467');" onmouseout="out('816131742774025467');" style=""> 254         public boolean onActionItemClicked(ActionMode mode, MenuItem item) {                             </span>
<span class="2068182408853392247" onmouseenter="enter('2068182408853392247');" onmouseout="out('2068182408853392247');" style=""> 255             switch (item.getItemId()) {                                                                  </span>
<span class="7972927839947469451" onmouseenter="enter('7972927839947469451');" onmouseout="out('7972927839947469451');" style=""> 256                 case R.id.menu_view_link :                                                               </span>
<span class="-6928924091126055668" onmouseenter="enter('-6928924091126055668');" onmouseout="out('-6928924091126055668');" style=""> 257                     if (mLinkText != null) {                                                             </span>
<span class="-3849773635172233058" onmouseenter="enter('-3849773635172233058');" onmouseout="out('-3849773635172233058');" style=""> 258                         if (mLinkText.startsWith(SIMPLENOTE_LINK_PREFIX)) {                              </span>
<span class="3123112009632250348" onmouseenter="enter('3123112009632250348');" onmouseout="out('3123112009632250348');" style=""><abbr title=" 259                             SimplenoteLinkify.openNote(requireActivity(), mLinkText.replace(SIMPLENOTE_LINK_PREFIX, &quot;&quot;));"> 259                             SimplenoteLinkify.openNote(requireActivity(), mLinkText.replace(SIMPLENOTE_LI🔵</abbr></span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 260                         } else {                                                                         </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 261                             try {                                                                        </span>
<span class="5138461002499295767" onmouseenter="enter('5138461002499295767');" onmouseout="out('5138461002499295767');" style=""> 262                                 BrowserUtils.launchBrowserOrShowError(requireContext(), mLinkText);      </span>
<span class="-3589222456918676513" onmouseenter="enter('-3589222456918676513');" onmouseout="out('-3589222456918676513');" style=""> 263                             } catch (java.lang.Exception e) {                                            </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 264                                 e.printStackTrace();                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 265                             }                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 266                         }                                                                                </span>
<span class="1437018376781324775" onmouseenter="enter('1437018376781324775');" onmouseout="out('1437018376781324775');" style=""> 267                         mode.finish();// Action picked, so close the CAB                                 </span>
<span  style=""> 268                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 269                     }                                                                                    </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 270                     return true;                                                                         </span>
<span class="-4634405621556180819" onmouseenter="enter('-4634405621556180819');" onmouseout="out('-4634405621556180819');" style=""> 271                 case R.id.menu_copy :                                                                    </span>
<span class="-1509454475486936846" onmouseenter="enter('-1509454475486936846');" onmouseout="out('-1509454475486936846');" style=""> 272                     if ((mLinkText != null) &amp;&amp; (getActivity() != null)) {                                </span>
<span class="-3995442483487827848" onmouseenter="enter('-3995442483487827848');" onmouseout="out('-3995442483487827848');" style=""> 273                         if (BrowserUtils.copyToClipboard(requireContext(), mLinkText)) {                 </span>
<span class="3795490233575843146" onmouseenter="enter('3795490233575843146');" onmouseout="out('3795490233575843146');" style=""> 274                             Snackbar.make(mRootView, R.string.link_copied, Snackbar.LENGTH_SHORT).show();</span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 275                         } else {                                                                         </span>
<span class="8359220226685626421" onmouseenter="enter('8359220226685626421');" onmouseout="out('8359220226685626421');" style=""><abbr title=" 276                             Snackbar.make(mRootView, R.string.link_copied_failure, Snackbar.LENGTH_SHORT).show();"> 276                             Snackbar.make(mRootView, R.string.link_copied_failure, Snackbar.LENGTH_SHORT)🔵</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 277                         }                                                                                </span>
<span class="5768223614092288606" onmouseenter="enter('5768223614092288606');" onmouseout="out('5768223614092288606');" style=""> 278                         mode.finish();                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 279                     }                                                                                    </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 280                     return true;                                                                         </span>
<span class="-4929350896823615772" onmouseenter="enter('-4929350896823615772');" onmouseout="out('-4929350896823615772');" style=""> 281                 case R.id.menu_share :                                                                   </span>
<span class="-6928924091126055668" onmouseenter="enter('-6928924091126055668');" onmouseout="out('-6928924091126055668');" style=""> 282                     if (mLinkText != null) {                                                             </span>
<span class="8185075650085964623" onmouseenter="enter('8185075650085964623');" onmouseout="out('8185075650085964623');" style=""> 283                         showShare(mLinkText);                                                            </span>
<span class="5768223614092288606" onmouseenter="enter('5768223614092288606');" onmouseout="out('5768223614092288606');" style=""> 284                         mode.finish();                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 285                     }                                                                                    </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 286                     return true;                                                                         </span>
<span class="3050734735710613783" onmouseenter="enter('3050734735710613783');" onmouseout="out('3050734735710613783');" style=""> 287                 default :                                                                                </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 288                     return false;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 289             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 290         }                                                                                                </span>
<span  style=""> 291                                                                                                          </span>
<span class="2525157012953828009" onmouseenter="enter('2525157012953828009');" onmouseout="out('2525157012953828009');" style=""> 292         // Called when the user exits the action mode                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 293         @Override                                                                                        </span>
<span class="-2232977199830239129" onmouseenter="enter('-2232977199830239129');" onmouseout="out('-2232977199830239129');" style=""> 294         public void onDestroyActionMode(ActionMode mode) {                                               </span>
<span class="-1291529600191394909" onmouseenter="enter('-1291529600191394909');" onmouseout="out('-1291529600191394909');" style=""> 295             if (mActionMode != null) {                                                                   </span>
<span class="-4156109494689565575" onmouseenter="enter('-4156109494689565575');" onmouseout="out('-4156109494689565575');" style=""> 296                 mActionMode.setSubtitle(&quot;&quot;);                                                             </span>
<span class="291405596407736607" onmouseenter="enter('291405596407736607');" onmouseout="out('291405596407736607');" style=""> 297                 mActionMode = null;                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 298             }                                                                                            </span>
<span class="7162501222170899627" onmouseenter="enter('7162501222170899627');" onmouseout="out('7162501222170899627');" style=""> 299             new Handler().postDelayed(new Runnable() {                                                   </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 300                 @Override                                                                                </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 301                 public void run() {                                                                      </span>
<span class="-407723737955280968" onmouseenter="enter('-407723737955280968');" onmouseout="out('-407723737955280968');" style=""><abbr title=" 302                     requireActivity().getWindow().setStatusBarColor(getResources().getColor(android.R.color.transparent, requireActivity().getTheme()));"> 302                     requireActivity().getWindow().setStatusBarColor(getResources().getColor(android.R.col🔵</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 303                 }                                                                                        </span>
<span class="6160542413574756811" onmouseenter="enter('6160542413574756811');" onmouseout="out('6160542413574756811');" style=""> 304             }, requireContext().getResources().getInteger(android.R.integer.config_mediumAnimTime));     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 305         }                                                                                                </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 306     };                                                                                                   </span>
<span  style=""> 307                                                                                                          </span>
<span class="-2321350652617580771" onmouseenter="enter('-2321350652617580771');" onmouseout="out('-2321350652617580771');" style=""> 308     private Snackbar mPublishingSnackbar;                                                                </span>
<span  style=""> 309                                                                                                          </span>
<span class="3063974407169104073" onmouseenter="enter('3063974407169104073');" onmouseout="out('3063974407169104073');" style=""> 310     private boolean mHideActionOnSuccess;                                                                </span>
<span  style=""> 311                                                                                                          </span>
<span class="1686976550776889109" onmouseenter="enter('1686976550776889109');" onmouseout="out('1686976550776889109');" style=""> 312     // Resets note publish status if Simperium never returned the new publish status                     </span>
<span class="1686976550776889109" onmouseenter="enter('1686976550776889109');" onmouseout="out('1686976550776889109');" style=""> 313     // Resets note publish status if Simperium never returned the new publish status                     </span>
<span class="4037453836709826519" onmouseenter="enter('4037453836709826519');" onmouseout="out('4037453836709826519');" style=""> 314     private final Runnable mPublishTimeoutRunnable = new Runnable() {                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 315         @Override                                                                                        </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 316         public void run() {                                                                              </span>
<span class="6112154992837754036" onmouseenter="enter('6112154992837754036');" onmouseout="out('6112154992837754036');" style=""> 317             if (!isAdded()) return;                                                                      </span>
<span  style=""> 318                                                                                                          </span>
<span class="5713980397306524156" onmouseenter="enter('5713980397306524156');" onmouseout="out('5713980397306524156');" style=""> 319             requireActivity().runOnUiThread(new Runnable() {                                             </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 320                 @Override                                                                                </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 321                 public void run() {                                                                      </span>
<span  style=""> 322                                                                                                          </span>
<span class="-6752199236124778161" onmouseenter="enter('-6752199236124778161');" onmouseout="out('-6752199236124778161');" style=""> 323                     mNote.setPublished(!mNote.isPublished());                                            </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style=""> 324                     mNote.save();                                                                        </span>
<span  style=""> 325                                                                                                          </span>
<span class="7513447915538188553" onmouseenter="enter('7513447915538188553');" onmouseout="out('7513447915538188553');" style=""> 326                     updatePublishedState(false);                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 327                 }                                                                                        </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 328             });                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 329         }                                                                                                </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 330     };                                                                                                   </span>
<span  style=""> 331                                                                                                          </span>
<span class="-3565365231364209094" onmouseenter="enter('-3565365231364209094');" onmouseout="out('-3565365231364209094');" style=""> 332     private NoteMarkdownFragment mNoteMarkdownFragment;                                                  </span>
<span  style=""> 333                                                                                                          </span>
<span class="8334835640808763040" onmouseenter="enter('8334835640808763040');" onmouseout="out('8334835640808763040');" style=""> 334     private String mCss;                                                                                 </span>
<span  style=""> 335                                                                                                          </span>
<span class="2417381421481423525" onmouseenter="enter('2417381421481423525');" onmouseout="out('2417381421481423525');" style=""> 336     private WebView mMarkdown;                                                                           </span>
<span  style=""> 337                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 338     /**                                                                                                  </span>
<span class="7780585517980788373" onmouseenter="enter('7780585517980788373');" onmouseout="out('7780585517980788373');" style=""> 339      * Mandatory empty constructor for the fragment manager to instantiate the                           </span>
<span class="7130060501227883159" onmouseenter="enter('7130060501227883159');" onmouseout="out('7130060501227883159');" style=""> 340      * fragment (e.g. upon screen orientation changes).                                                  </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 341      */                                                                                                  </span>
<span class="2055429757813344166" onmouseenter="enter('2055429757813344166');" onmouseout="out('2055429757813344166');" style=""> 342     public NoteEditorFragment() {                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 343     }                                                                                                    </span>
<span  style=""> 344                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 345     @Override                                                                                            </span>
<span class="2351026872416697132" onmouseenter="enter('2351026872416697132');" onmouseout="out('2351026872416697132');" style=""> 346     public void onCreate(Bundle savedInstanceState) {                                                    </span>
<span class="8760898167212384157" onmouseenter="enter('8760898167212384157');" onmouseout="out('8760898167212384157');" style=""> 347         super.onCreate(savedInstanceState);                                                              </span>
<span class="-8622194682109655372" onmouseenter="enter('-8622194682109655372');" onmouseout="out('-8622194682109655372');" style=""> 348         AppLog.add(Type.NETWORK, NetworkUtils.getNetworkInfo(requireContext()));                         </span>
<span class="4067704072097909993" onmouseenter="enter('4067704072097909993');" onmouseout="out('4067704072097909993');" style=""> 349         AppLog.add(Type.SCREEN, &quot;Created (NoteEditorFragment)&quot;);                                         </span>
<span class="-7986434609852753971" onmouseenter="enter('-7986434609852753971');" onmouseout="out('-7986434609852753971');" style=""> 350         mInfoBottomSheet = new InfoBottomSheetDialog(this);                                              </span>
<span class="-3585171833526124401" onmouseenter="enter('-3585171833526124401');" onmouseout="out('-3585171833526124401');" style=""> 351         mShareBottomSheet = new ShareBottomSheetDialog(this, this);                                      </span>
<span class="8727018902564285339" onmouseenter="enter('8727018902564285339');" onmouseout="out('8727018902564285339');" style=""> 352         mHistoryBottomSheet = new HistoryBottomSheetDialog(this, this);                                  </span>
<span class="4122566193626969811" onmouseenter="enter('4122566193626969811');" onmouseout="out('4122566193626969811');" style=""> 353         Simplenote currentApp = ((Simplenote) (requireActivity().getApplication()));                     </span>
<span class="3464165486447434608" onmouseenter="enter('3464165486447434608');" onmouseout="out('3464165486447434608');" style=""> 354         mNotesBucket = currentApp.getNotesBucket();                                                      </span>
<span class="-5396295556438155472" onmouseenter="enter('-5396295556438155472');" onmouseout="out('-5396295556438155472');" style=""><abbr title=" 355         mCallIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_call_white_24dp, R.attr.actionModeTextColor);"> 355         mCallIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_call_white_24dp,🔵</abbr></span>
<span class="-6467507895043748101" onmouseenter="enter('-6467507895043748101');" onmouseout="out('-6467507895043748101');" style=""><abbr title=" 356         mEmailIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_email_24dp, R.attr.actionModeTextColor);"> 356         mEmailIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_email_24dp, R.a🔵</abbr></span>
<span class="467194819286006014" onmouseenter="enter('467194819286006014');" onmouseout="out('467194819286006014');" style=""><abbr title=" 357         mLinkIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_note_24dp, R.attr.actionModeTextColor);"> 357         mLinkIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_note_24dp, R.att🔵</abbr></span>
<span class="439472828334727129" onmouseenter="enter('439472828334727129');" onmouseout="out('439472828334727129');" style=""><abbr title=" 358         mMapIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_map_24dp, R.attr.actionModeTextColor);"> 358         mMapIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_map_24dp, R.attr.🔵</abbr></span>
<span class="6692132481762191849" onmouseenter="enter('6692132481762191849');" onmouseout="out('6692132481762191849');" style=""><abbr title=" 359         mBrowserIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_browser_24dp, R.attr.actionModeTextColor);"> 359         mBrowserIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_browser_24dp,🔵</abbr></span>
<span class="-1469196158673197606" onmouseenter="enter('-1469196158673197606');" onmouseout="out('-1469196158673197606');" style=""><abbr title=" 360         mCopyIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_copy_24dp, R.attr.actionModeTextColor);"> 360         mCopyIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_copy_24dp, R.att🔵</abbr></span>
<span class="2974983401105131042" onmouseenter="enter('2974983401105131042');" onmouseout="out('2974983401105131042');" style=""><abbr title=" 361         mShareIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_share_24dp, R.attr.actionModeTextColor);"> 361         mShareIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_share_24dp, R.a🔵</abbr></span>
<span class="-7557436274459739944" onmouseenter="enter('-7557436274459739944');" onmouseout="out('-7557436274459739944');" style=""> 362         mAutoSaveHandler = new Handler();                                                                </span>
<span class="5311700283685025064" onmouseenter="enter('5311700283685025064');" onmouseout="out('5311700283685025064');" style=""> 363         mPublishTimeoutHandler = new Handler();                                                          </span>
<span class="-5335062074040604305" onmouseenter="enter('-5335062074040604305');" onmouseout="out('-5335062074040604305');" style=""> 364         mHistoryTimeoutHandler = new Handler();                                                          </span>
<span class="8242274546015911034" onmouseenter="enter('8242274546015911034');" onmouseout="out('8242274546015911034');" style=""><abbr title=" 365         mMatchHighlighter = new TextHighlighter(requireActivity(), R.attr.editorSearchHighlightForegroundColor, R.attr.editorSearchHighlightBackgroundColor);"> 365         mMatchHighlighter = new TextHighlighter(requireActivity(), R.attr.editorSearchHighlightForeground🔵</abbr></span>
<span class="-2796700407695620291" onmouseenter="enter('-2796700407695620291');" onmouseout="out('-2796700407695620291');" style=""> 366         mAutocompleteAdapter = new CursorAdapter(getActivity(), null, 0x0) {                             </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 367             @Override                                                                                    </span>
<span class="5082230411214880762" onmouseenter="enter('5082230411214880762');" onmouseout="out('5082230411214880762');" style=""> 368             public View newView(Context context, Cursor cursor, ViewGroup parent) {                      </span>
<span class="2260898774317245438" onmouseenter="enter('2260898774317245438');" onmouseout="out('2260898774317245438');" style=""> 369                 Activity activity = ((Activity) (context));                                              </span>
<span class="-686470663642561295" onmouseenter="enter('-686470663642561295');" onmouseout="out('-686470663642561295');" style=""> 370                 if (activity == null) {                                                                  </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 371                     return null;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 372                 }                                                                                        </span>
<span class="-3314008061858345993" onmouseenter="enter('-3314008061858345993');" onmouseout="out('-3314008061858345993');" style=""> 373                 return activity.getLayoutInflater().inflate(R.layout.tag_autocomplete_list_item, null);  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 374             }                                                                                            </span>
<span  style=""> 375                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 376             @Override                                                                                    </span>
<span class="19024103499623332" onmouseenter="enter('19024103499623332');" onmouseout="out('19024103499623332');" style=""> 377             public void bindView(View view, Context context, Cursor cursor) {                            </span>
<span class="-6599830707153798207" onmouseenter="enter('-6599830707153798207');" onmouseout="out('-6599830707153798207');" style=""> 378                 TextView textView = ((TextView) (view));                                                 </span>
<span class="6731261465219202848" onmouseenter="enter('6731261465219202848');" onmouseout="out('6731261465219202848');" style=""> 379                 textView.setText(convertToString(cursor));                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 380             }                                                                                            </span>
<span  style=""> 381                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 382             @Override                                                                                    </span>
<span class="-8397701079695881614" onmouseenter="enter('-8397701079695881614');" onmouseout="out('-8397701079695881614');" style=""> 383             public CharSequence convertToString(Cursor cursor) {                                         </span>
<span class="-7149458698442797769" onmouseenter="enter('-7149458698442797769');" onmouseout="out('-7149458698442797769');" style=""> 384                 return cursor.getString(cursor.getColumnIndex(Tag.NAME_PROPERTY));                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 385             }                                                                                            </span>
<span  style=""> 386                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 387             @Override                                                                                    </span>
<span class="-6792310640715402890" onmouseenter="enter('-6792310640715402890');" onmouseout="out('-6792310640715402890');" style=""> 388             public Cursor runQueryOnBackgroundThread(CharSequence filter) {                              </span>
<span class="-5071525869541290984" onmouseenter="enter('-5071525869541290984');" onmouseout="out('-5071525869541290984');" style=""> 389                 Activity activity = getActivity();                                                       </span>
<span class="-686470663642561295" onmouseenter="enter('-686470663642561295');" onmouseout="out('-686470663642561295');" style=""> 390                 if (activity == null) {                                                                  </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 391                     return null;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 392                 }                                                                                        </span>
<span class="3849441011104911255" onmouseenter="enter('3849441011104911255');" onmouseout="out('3849441011104911255');" style=""> 393                 Simplenote application = ((Simplenote) (activity.getApplication()));                     </span>
<span class="-288329532637656436" onmouseenter="enter('-288329532637656436');" onmouseout="out('-288329532637656436');" style=""> 394                 Query&lt;Tag&gt; query = application.getTagsBucket().query();                                  </span>
<span class="-1263658484466254954" onmouseenter="enter('-1263658484466254954');" onmouseout="out('-1263658484466254954');" style=""> 395                 // make the tag name available to the cursor                                             </span>
<span class="5748018636045801946" onmouseenter="enter('5748018636045801946');" onmouseout="out('5748018636045801946');" style=""> 396                 query.include(Tag.NAME_PROPERTY);                                                        </span>
<span class="-7615810455976629564" onmouseenter="enter('-7615810455976629564');" onmouseout="out('-7615810455976629564');" style=""> 397                 // sort the tags by their names                                                          </span>
<span class="5674220988188306819" onmouseenter="enter('5674220988188306819');" onmouseout="out('5674220988188306819');" style=""> 398                 query.order(Tag.NAME_PROPERTY);                                                          </span>
<span class="8185275162074884971" onmouseenter="enter('8185275162074884971');" onmouseout="out('8185275162074884971');" style=""> 399                 // if there&#x27;s a filter string find only matching tag names                               </span>
<span class="-3981714819480949036" onmouseenter="enter('-3981714819480949036');" onmouseout="out('-3981714819480949036');" style=""> 400                 if (filter != null) {                                                                    </span>
<span class="-8675928632322864405" onmouseenter="enter('-8675928632322864405');" onmouseout="out('-8675928632322864405');" style=""><abbr title=" 401                     query.where(Tag.NAME_PROPERTY, Query.ComparisonType.LIKE, String.format(&quot;%s%%&quot;, filter));"> 401                     query.where(Tag.NAME_PROPERTY, Query.ComparisonType.LIKE, String.format(&quot;%s%%&quot;, filte🔵</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 402                 }                                                                                        </span>
<span class="8392918727668200780" onmouseenter="enter('8392918727668200780');" onmouseout="out('8392918727668200780');" style=""> 403                 return query.execute();                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 404             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 405         };                                                                                               </span>
<span class="-2915955960672646870" onmouseenter="enter('-2915955960672646870');" onmouseout="out('-2915955960672646870');" style=""> 406         WidgetUtils.updateNoteWidgets(requireActivity().getApplicationContext());                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 407     }                                                                                                    </span>
<span  style=""> 408                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 409     @Override                                                                                            </span>
<span class="-5467678769290806465" onmouseenter="enter('-5467678769290806465');" onmouseout="out('-5467678769290806465');" style=""> 410     public View onCreateView(@NonNull                                                                    </span>
<span class="-2940382649904418396" onmouseenter="enter('-2940382649904418396');" onmouseout="out('-2940382649904418396');" style=""> 411     LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {                           </span>
<span class="3579130562560764282" onmouseenter="enter('3579130562560764282');" onmouseout="out('3579130562560764282');" style=""> 412         mRootView = inflater.inflate(R.layout.fragment_note_editor, container, false);                   </span>
<span class="-4779369533477417305" onmouseenter="enter('-4779369533477417305');" onmouseout="out('-4779369533477417305');" style=""> 413         mContentEditText = mRootView.findViewById(R.id.note_content);                                    </span>
<span class="-2924083774161461664" onmouseenter="enter('-2924083774161461664');" onmouseout="out('-2924083774161461664');" style=""> 414         mContentEditText.addOnSelectionChangedListener(this);                                            </span>
<span class="5354424100413888199" onmouseenter="enter('5354424100413888199');" onmouseout="out('5354424100413888199');" style=""> 415         mContentEditText.setOnCheckboxToggledListener(this);                                             </span>
<span class="4799293943910864448" onmouseenter="enter('4799293943910864448');" onmouseout="out('4799293943910864448');" style=""> 416         mContentEditText.setMovementMethod(SimplenoteMovementMethod.getInstance());                      </span>
<span class="-7684087958922635100" onmouseenter="enter('-7684087958922635100');" onmouseout="out('-7684087958922635100');" style=""> 417         mContentEditText.setOnFocusChangeListener(this);                                                 </span>
<span class="7906960005192148215" onmouseenter="enter('7906960005192148215');" onmouseout="out('7906960005192148215');" style=""><abbr title=" 418         mContentEditText.setTextSize(TypedValue.COMPLEX_UNIT_SP, PrefUtils.getFontSize(requireContext()));"> 418         mContentEditText.setTextSize(TypedValue.COMPLEX_UNIT_SP, PrefUtils.getFontSize(requireContext()))🔵</abbr></span>
<span class="-8410945612023549246" onmouseenter="enter('-8410945612023549246');" onmouseout="out('-8410945612023549246');" style=""> 419         mTagInput = mRootView.findViewById(R.id.tag_input);                                              </span>
<span class="-8520636764026895045" onmouseenter="enter('-8520636764026895045');" onmouseout="out('-8520636764026895045');" style=""> 420         mTagInput.setDropDownBackgroundResource(R.drawable.bg_list_popup);                               </span>
<span class="-8046888072996277100" onmouseenter="enter('-8046888072996277100');" onmouseout="out('-8046888072996277100');" style=""> 421         mTagInput.setTokenizer(new SpaceTokenizer());                                                    </span>
<span class="8277910060096767493" onmouseenter="enter('8277910060096767493');" onmouseout="out('8277910060096767493');" style=""> 422         mTagInput.setOnFocusChangeListener(this);                                                        </span>
<span class="9064951361673299699" onmouseenter="enter('9064951361673299699');" onmouseout="out('9064951361673299699');" style=""> 423         mTagChips = mRootView.findViewById(R.id.tag_chips);                                              </span>
<span class="-8852013276583646600" onmouseenter="enter('-8852013276583646600');" onmouseout="out('-8852013276583646600');" style=""> 424         mTagPadding = mRootView.findViewById(R.id.tag_padding);                                          </span>
<span class="6080374810605667863" onmouseenter="enter('6080374810605667863');" onmouseout="out('6080374810605667863');" style=""> 425         mHighlighter = new MatchOffsetHighlighter(mMatchHighlighter, mContentEditText);                  </span>
<span class="2946335853320733423" onmouseenter="enter('2946335853320733423');" onmouseout="out('2946335853320733423');" style=""> 426         mPlaceholderView = mRootView.findViewById(R.id.placeholder);                                     </span>
<span class="-892880346674209254" onmouseenter="enter('-892880346674209254');" onmouseout="out('-892880346674209254');" style=""> 427         if (DisplayUtils.isLargeScreenLandscape(getActivity()) &amp;&amp; (mNote == null)) {                     </span>
<span class="-5306578928333558235" onmouseenter="enter('-5306578928333558235');" onmouseout="out('-5306578928333558235');" style=""> 428             mPlaceholderView.setVisibility(View.VISIBLE);                                                </span>
<span class="-8532471920650411447" onmouseenter="enter('-8532471920650411447');" onmouseout="out('-8532471920650411447');" style=""> 429             requireActivity().invalidateOptionsMenu();                                                   </span>
<span class="-5966136890047999161" onmouseenter="enter('-5966136890047999161');" onmouseout="out('-5966136890047999161');" style=""> 430             mMarkdown = mRootView.findViewById(R.id.markdown);                                           </span>
<span class="1363245066851978300" onmouseenter="enter('1363245066851978300');" onmouseout="out('1363245066851978300');" style=""> 431             mMarkdown.setWebViewClient(new WebViewClient() {                                             </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 432                 @Override                                                                                </span>
<span class="-7741512549281860073" onmouseenter="enter('-7741512549281860073');" onmouseout="out('-7741512549281860073');" style=""> 433                 public boolean shouldOverrideUrlLoading(WebView view, WebResourceRequest request) {      </span>
<span class="-5381905371386971985" onmouseenter="enter('-5381905371386971985');" onmouseout="out('-5381905371386971985');" style=""> 434                     String url = request.getUrl().toString();                                            </span>
<span class="-2285634234159712436" onmouseenter="enter('-2285634234159712436');" onmouseout="out('-2285634234159712436');" style=""> 435                     if (url.startsWith(SimplenoteLinkify.SIMPLENOTE_LINK_PREFIX)) {                      </span>
<span class="1249235461949968343" onmouseenter="enter('1249235461949968343');" onmouseout="out('1249235461949968343');" style=""><abbr title=" 436                         SimplenoteLinkify.openNote(requireActivity(), url.replace(SIMPLENOTE_LINK_PREFIX, &quot;&quot;));"> 436                         SimplenoteLinkify.openNote(requireActivity(), url.replace(SIMPLENOTE_LINK_PREFIX,🔵</abbr></span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 437                     } else {                                                                             </span>
<span class="4407241748321738249" onmouseenter="enter('4407241748321738249');" onmouseout="out('4407241748321738249');" style=""> 438                         BrowserUtils.launchBrowserOrShowError(requireContext(), url);                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 439                     }                                                                                    </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 440                     return true;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 441                 }                                                                                        </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 442             });                                                                                          </span>
<span class="-5122207664605231942" onmouseenter="enter('-5122207664605231942');" onmouseout="out('-5122207664605231942');" style=""><abbr title=" 443             mCss = ContextUtils.readCssFile(requireContext(), ThemeUtils.getCssFromStyle(requireContext()));"> 443             mCss = ContextUtils.readCssFile(requireContext(), ThemeUtils.getCssFromStyle(requireContext()🔵</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 444         }                                                                                                </span>
<span class="3045371367152506055" onmouseenter="enter('3045371367152506055');" onmouseout="out('3045371367152506055');" style=""> 445         mTagInput.setAdapter(mAutocompleteAdapter);                                                      </span>
<span class="-512438581163180757" onmouseenter="enter('-512438581163180757');" onmouseout="out('-512438581163180757');" style=""> 446         Bundle arguments = getArguments();                                                               </span>
<span class="4011393863908935220" onmouseenter="enter('4011393863908935220');" onmouseout="out('4011393863908935220');" style=""> 447         if ((arguments != null) &amp;&amp; arguments.containsKey(ARG_ITEM_ID)) {                                 </span>
<span class="592168733134676120" onmouseenter="enter('592168733134676120');" onmouseout="out('592168733134676120');" style=""> 448             // Load note if we were passed a note Id                                                     </span>
<span class="-30854459346766710" onmouseenter="enter('-30854459346766710');" onmouseout="out('-30854459346766710');" style=""> 449             String key = arguments.getString(ARG_ITEM_ID);                                               </span>
<span class="9138949033848867696" onmouseenter="enter('9138949033848867696');" onmouseout="out('9138949033848867696');" style=""> 450             if (arguments.containsKey(ARG_MATCH_OFFSETS)) {                                              </span>
<span class="-1831707694683903303" onmouseenter="enter('-1831707694683903303');" onmouseout="out('-1831707694683903303');" style=""> 451                 mMatchOffsets = arguments.getString(ARG_MATCH_OFFSETS);                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 452             }                                                                                            </span>
<span class="-5471626349746072894" onmouseenter="enter('-5471626349746072894');" onmouseout="out('-5471626349746072894');" style=""> 453             mIsFromWidget = arguments.getBoolean(ARG_IS_FROM_WIDGET);                                    </span>
<span class="7955966257819193736" onmouseenter="enter('7955966257819193736');" onmouseout="out('7955966257819193736');" style=""> 454             if (mIsFromWidget) {                                                                         </span>
<span class="-5617995102329158939" onmouseenter="enter('-5617995102329158939');" onmouseout="out('-5617995102329158939');" style=""> 455                 AppLog.add(Type.ACTION, &quot;Opened from widget (NoteEditorFragment)&quot;);                      </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 456             } else {                                                                                     </span>
<span class="8953265153297736425" onmouseenter="enter('8953265153297736425');" onmouseout="out('8953265153297736425');" style=""> 457                 AppLog.add(Type.ACTION, &quot;Opened from list (NoteEditorFragment)&quot;);                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 458             }                                                                                            </span>
<span class="2821548101564163251" onmouseenter="enter('2821548101564163251');" onmouseout="out('2821548101564163251');" style=""> 459             new LoadNoteTask(this).executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR, key);               </span>
<span class="-1543887229946404071" onmouseenter="enter('-1543887229946404071');" onmouseout="out('-1543887229946404071');" style=""> 460         } else if (DisplayUtils.isLargeScreenLandscape(getActivity()) &amp;&amp; (savedInstanceState != null)) { </span>
<span class="-5586601087309648352" onmouseenter="enter('-5586601087309648352');" onmouseout="out('-5586601087309648352');" style=""> 461             // Restore selected note when in dual pane mode                                              </span>
<span class="-6627973434382116830" onmouseenter="enter('-6627973434382116830');" onmouseout="out('-6627973434382116830');" style=""> 462             String noteId = savedInstanceState.getString(STATE_NOTE_ID);                                 </span>
<span class="3431348253079949637" onmouseenter="enter('3431348253079949637');" onmouseout="out('3431348253079949637');" style=""> 463             if (noteId != null) {                                                                        </span>
<span class="6131131744168781054" onmouseenter="enter('6131131744168781054');" onmouseout="out('6131131744168781054');" style=""> 464                 setNote(noteId);                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 465             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 466         }                                                                                                </span>
<span class="-6084360450426647292" onmouseenter="enter('-6084360450426647292');" onmouseout="out('-6084360450426647292');" style=""> 467         ViewTreeObserver viewTreeObserver = mContentEditText.getViewTreeObserver();                      </span>
<span class="5566036156549578856" onmouseenter="enter('5566036156549578856');" onmouseout="out('5566036156549578856');" style=""> 468         viewTreeObserver.addOnGlobalLayoutListener(new ViewTreeObserver.OnGlobalLayoutListener() {       </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 469             @Override                                                                                    </span>
<span class="7412300164717447449" onmouseenter="enter('7412300164717447449');" onmouseout="out('7412300164717447449');" style=""> 470             public void onGlobalLayout() {                                                               </span>
<span class="-1303582393563450897" onmouseenter="enter('-1303582393563450897');" onmouseout="out('-1303582393563450897');" style=""> 471                 // If a note was loaded with search matches, scroll to the first match in the editor     </span>
<span class="3238390833870160843" onmouseenter="enter('3238390833870160843');" onmouseout="out('3238390833870160843');" style=""> 472                 if (mShouldScrollToSearchMatch &amp;&amp; (mMatchOffsets != null)) {                             </span>
<span class="5514287417242355685" onmouseenter="enter('5514287417242355685');" onmouseout="out('5514287417242355685');" style=""> 473                     if (!isAdded()) {                                                                    </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 474                         return;                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 475                     }                                                                                    </span>
<span class="-5871446470780506147" onmouseenter="enter('-5871446470780506147');" onmouseout="out('-5871446470780506147');" style=""> 476                     // Get the character location of the first search match                              </span>
<span class="-5203029704561705542" onmouseenter="enter('-5203029704561705542');" onmouseout="out('-5203029704561705542');" style=""><abbr title=" 477                     int matchLocation = MatchOffsetHighlighter.getFirstMatchLocation(mContentEditText.getText(), mMatchOffsets);"> 477                     int matchLocation = MatchOffsetHighlighter.getFirstMatchLocation(mContentEditText.get🔵</abbr></span>
<span class="3937327664514143598" onmouseenter="enter('3937327664514143598');" onmouseout="out('3937327664514143598');" style=""> 478                     if (matchLocation == 0) {                                                            </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 479                         return;                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 480                     }                                                                                    </span>
<span class="-8411350726545484842" onmouseenter="enter('-8411350726545484842');" onmouseout="out('-8411350726545484842');" style=""> 481                     // Calculate how far to scroll to bring the match into view                          </span>
<span class="-8088580226996087877" onmouseenter="enter('-8088580226996087877');" onmouseout="out('-8088580226996087877');" style=""> 482                     Layout layout = mContentEditText.getLayout();                                        </span>
<span class="4818857677317424270" onmouseenter="enter('4818857677317424270');" onmouseout="out('4818857677317424270');" style=""> 483                     int lineTop = layout.getLineTop(layout.getLineForOffset(matchLocation));             </span>
<span class="-5430599965701064414" onmouseenter="enter('-5430599965701064414');" onmouseout="out('-5430599965701064414');" style=""> 484                     ((NestedScrollView) (mRootView)).smoothScrollTo(0, lineTop);                         </span>
<span class="1093252497226085042" onmouseenter="enter('1093252497226085042');" onmouseout="out('1093252497226085042');" style=""> 485                     mShouldScrollToSearchMatch = false;                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 486                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 487             }                                                                                            </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 488         });                                                                                              </span>
<span class="7823602444079418117" onmouseenter="enter('7823602444079418117');" onmouseout="out('7823602444079418117');" style=""> 489         setHasOptionsMenu(true);                                                                         </span>
<span class="-6258722083869792010" onmouseenter="enter('-6258722083869792010');" onmouseout="out('-6258722083869792010');" style=""> 490         return mRootView;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 491     }                                                                                                    </span>
<span  style=""> 492                                                                                                          </span>
<span class="4710528937935082296" onmouseenter="enter('4710528937935082296');" onmouseout="out('4710528937935082296');" style=""> 493     public void scrollToMatch(int location) {                                                            </span>
<span class="-7481427962806884462" onmouseenter="enter('-7481427962806884462');" onmouseout="out('-7481427962806884462');" style=""> 494         if (isAdded()) {                                                                                 </span>
<span class="-8411350726545484842" onmouseenter="enter('-8411350726545484842');" onmouseout="out('-8411350726545484842');" style=""> 495             // Calculate how far to scroll to bring the match into view                                  </span>
<span class="-8088580226996087877" onmouseenter="enter('-8088580226996087877');" onmouseout="out('-8088580226996087877');" style=""> 496             Layout layout = mContentEditText.getLayout();                                                </span>
<span class="7976110079331789160" onmouseenter="enter('7976110079331789160');" onmouseout="out('7976110079331789160');" style=""> 497             int lineTop = layout.getLineTop(layout.getLineForOffset(location));                          </span>
<span class="1129057737754431865" onmouseenter="enter('1129057737754431865');" onmouseout="out('1129057737754431865');" style=""> 498             ((NestedScrollView) mRootView).smoothScrollTo(0, lineTop);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 499         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 500     }                                                                                                    </span>
<span  style=""> 501                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 502     @Override                                                                                            </span>
<span class="3212580988936830895" onmouseenter="enter('3212580988936830895');" onmouseout="out('3212580988936830895');" style=""> 503     public void onResume() {                                                                             </span>
<span class="-6840488528374549322" onmouseenter="enter('-6840488528374549322');" onmouseout="out('-6840488528374549322');" style=""> 504         super.onResume();                                                                                </span>
<span class="-295722270474880574" onmouseenter="enter('-295722270474880574');" onmouseout="out('-295722270474880574');" style=""> 505         mNotesBucket.start();                                                                            </span>
<span class="-2614582349717816655" onmouseenter="enter('-2614582349717816655');" onmouseout="out('-2614582349717816655');" style=""> 506         AppLog.add(Type.SYNC, &quot;Started note bucket (NoteEditorFragment)&quot;);                               </span>
<span class="8320491026461558488" onmouseenter="enter('8320491026461558488');" onmouseout="out('8320491026461558488');" style=""> 507         mNotesBucket.addListener(this);                                                                  </span>
<span class="5183219019881866175" onmouseenter="enter('5183219019881866175');" onmouseout="out('5183219019881866175');" style=""> 508         mTagInput.setOnTagAddedListener(this);                                                           </span>
<span  style=""> 509                                                                                                          </span>
<span class="-8630351771722931094" onmouseenter="enter('-8630351771722931094');" onmouseout="out('-8630351771722931094');" style=""> 510         if (mContentEditText != null) {                                                                  </span>
<span class="7906960005192148215" onmouseenter="enter('7906960005192148215');" onmouseout="out('7906960005192148215');" style=""><abbr title=" 511             mContentEditText.setTextSize(TypedValue.COMPLEX_UNIT_SP, PrefUtils.getFontSize(requireContext()));"> 511             mContentEditText.setTextSize(TypedValue.COMPLEX_UNIT_SP, PrefUtils.getFontSize(requireContext🔵</abbr></span>
<span  style=""> 512                                                                                                          </span>
<span class="-9045903618847243853" onmouseenter="enter('-9045903618847243853');" onmouseout="out('-9045903618847243853');" style=""> 513             if (mContentEditText.hasFocus()) {                                                           </span>
<span class="2378139384018001812" onmouseenter="enter('2378139384018001812');" onmouseout="out('2378139384018001812');" style=""> 514                 showSoftKeyboard();                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 515             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 516         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 517     }                                                                                                    </span>
<span  style=""> 518                                                                                                          </span>
<span class="-7408745136026343325" onmouseenter="enter('-7408745136026343325');" onmouseout="out('-7408745136026343325');" style=""> 519     private void showSoftKeyboard() {                                                                    </span>
<span class="7162501222170899627" onmouseenter="enter('7162501222170899627');" onmouseout="out('7162501222170899627');" style=""> 520         new Handler().postDelayed(new Runnable() {                                                       </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 521             @Override                                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 522             public void run() {                                                                          </span>
<span class="-3170312762343778784" onmouseenter="enter('-3170312762343778784');" onmouseout="out('-3170312762343778784');" style=""> 523                 if (getActivity() == null) {                                                             </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 524                     return;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 525                 }                                                                                        </span>
<span class="-3252807025427255436" onmouseenter="enter('-3252807025427255436');" onmouseout="out('-3252807025427255436');" style=""><abbr title=" 526                 InputMethodManager inputMethodManager = ((InputMethodManager) (getActivity().getSystemService(Context.INPUT_METHOD_SERVICE)));"> 526                 InputMethodManager inputMethodManager = ((InputMethodManager) (getActivity().getSystemSer🔵</abbr></span>
<span class="-9213036537020298306" onmouseenter="enter('-9213036537020298306');" onmouseout="out('-9213036537020298306');" style=""> 527                 if (inputMethodManager != null) {                                                        </span>
<span class="7954226653587797662" onmouseenter="enter('7954226653587797662');" onmouseout="out('7954226653587797662');" style=""> 528                     inputMethodManager.showSoftInput(mContentEditText, 0);                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 529                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 530             }                                                                                            </span>
<span class="-4884776244894547305" onmouseenter="enter('-4884776244894547305');" onmouseout="out('-4884776244894547305');" style=""> 531         }, 100);                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 532     }                                                                                                    </span>
<span  style=""> 533                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 534     @Override                                                                                            </span>
<span class="3108783673391190151" onmouseenter="enter('3108783673391190151');" onmouseout="out('3108783673391190151');" style=""> 535     public void onPause() {                                                                              </span>
<span class="4626272369407912674" onmouseenter="enter('4626272369407912674');" onmouseout="out('4626272369407912674');" style=""> 536         super.onPause();  // Always call the superclass method first                                     </span>
<span class="-5493396254025166032" onmouseenter="enter('-5493396254025166032');" onmouseout="out('-5493396254025166032');" style=""> 537         mIsPaused = true;                                                                                </span>
<span  style=""> 538                                                                                                          </span>
<span class="-4286062678685908757" onmouseenter="enter('-4286062678685908757');" onmouseout="out('-4286062678685908757');" style=""> 539         // Hide soft keyboard if it is showing...                                                        </span>
<span class="5486984069351007864" onmouseenter="enter('5486984069351007864');" onmouseout="out('5486984069351007864');" style=""> 540         DisplayUtils.hideKeyboard(mContentEditText);                                                     </span>
<span  style=""> 541                                                                                                          </span>
<span class="6353289516119274314" onmouseenter="enter('6353289516119274314');" onmouseout="out('6353289516119274314');" style=""> 542         mTagInput.setOnTagAddedListener(null);                                                           </span>
<span  style=""> 543                                                                                                          </span>
<span class="-2149096896161266035" onmouseenter="enter('-2149096896161266035');" onmouseout="out('-2149096896161266035');" style=""> 544         if (mAutoSaveHandler != null) {                                                                  </span>
<span class="-5465787548318672754" onmouseenter="enter('-5465787548318672754');" onmouseout="out('-5465787548318672754');" style=""> 545             mAutoSaveHandler.removeCallbacks(mAutoSaveRunnable);                                         </span>
<span class="-837723219443324586" onmouseenter="enter('-837723219443324586');" onmouseout="out('-837723219443324586');" style=""> 546             mAutoSaveHandler.post(mAutoSaveRunnable);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 547         }                                                                                                </span>
<span  style=""> 548                                                                                                          </span>
<span class="-8758788084050668688" onmouseenter="enter('-8758788084050668688');" onmouseout="out('-8758788084050668688');" style=""> 549         if (mPublishTimeoutHandler != null) {                                                            </span>
<span class="-1646454762641300025" onmouseenter="enter('-1646454762641300025');" onmouseout="out('-1646454762641300025');" style=""> 550             mPublishTimeoutHandler.removeCallbacks(mPublishTimeoutRunnable);                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 551         }                                                                                                </span>
<span  style=""> 552                                                                                                          </span>
<span class="16247739636052398" onmouseenter="enter('16247739636052398');" onmouseout="out('16247739636052398');" style=""> 553         if (mHistoryTimeoutHandler != null) {                                                            </span>
<span class="7316258928910882956" onmouseenter="enter('7316258928910882956');" onmouseout="out('7316258928910882956');" style=""> 554             mHistoryTimeoutHandler.removeCallbacks(mHistoryTimeoutRunnable);                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 555         }                                                                                                </span>
<span  style=""> 556                                                                                                          </span>
<span class="212618759798230270" onmouseenter="enter('212618759798230270');" onmouseout="out('212618759798230270');" style=""> 557         mHighlighter.stop();                                                                             </span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style=""> 558         saveNote();                                                                                      </span>
<span class="-5110134461042230019" onmouseenter="enter('-5110134461042230019');" onmouseout="out('-5110134461042230019');" style=""> 559         AppLog.add(Type.SCREEN, &quot;Paused (NoteEditorFragment)&quot;);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 560     }                                                                                                    </span>
<span  style=""> 561                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 562     @Override                                                                                            </span>
<span class="658855826062432633" onmouseenter="enter('658855826062432633');" onmouseout="out('658855826062432633');" style=""> 563     public void onDestroy() {                                                                            </span>
<span class="7275190530034972367" onmouseenter="enter('7275190530034972367');" onmouseout="out('7275190530034972367');" style=""> 564         super.onDestroy();                                                                               </span>
<span class="-1649552973291504175" onmouseenter="enter('-1649552973291504175');" onmouseout="out('-1649552973291504175');" style=""> 565         mNotesBucket.removeListener(this);                                                               </span>
<span class="-9222421628383802707" onmouseenter="enter('-9222421628383802707');" onmouseout="out('-9222421628383802707');" style=""> 566         mNotesBucket.stop();                                                                             </span>
<span class="-5888247817738062720" onmouseenter="enter('-5888247817738062720');" onmouseout="out('-5888247817738062720');" style=""> 567         AppLog.add(Type.SYNC, &quot;Stopped note bucket (NoteEditorFragment)&quot;);                               </span>
<span class="284986690041099701" onmouseenter="enter('284986690041099701');" onmouseout="out('284986690041099701');" style=""> 568         AppLog.add(Type.SCREEN, &quot;Destroyed (NoteEditorFragment)&quot;);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 569     }                                                                                                    </span>
<span  style=""> 570                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 571     @Override                                                                                            </span>
<span class="5678576148993170097" onmouseenter="enter('5678576148993170097');" onmouseout="out('5678576148993170097');" style=""> 572     public void onSaveInstanceState(@NonNull Bundle outState) {                                          </span>
<span class="2796648189832219063" onmouseenter="enter('2796648189832219063');" onmouseout="out('2796648189832219063');" style=""> 573         super.onSaveInstanceState(outState);                                                             </span>
<span  style=""> 574                                                                                                          </span>
<span class="4471570229761422149" onmouseenter="enter('4471570229761422149');" onmouseout="out('4471570229761422149');" style=""> 575         if (DisplayUtils.isLargeScreenLandscape(getActivity()) &amp;&amp; mNote != null) {                       </span>
<span class="7419969731723984173" onmouseenter="enter('7419969731723984173');" onmouseout="out('7419969731723984173');" style=""> 576             outState.putString(STATE_NOTE_ID, mNote.getSimperiumKey());                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 577         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 578     }                                                                                                    </span>
<span  style=""> 579                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 580     @Override                                                                                            </span>
<span class="-3104619052446816858" onmouseenter="enter('-3104619052446816858');" onmouseout="out('-3104619052446816858');" style=""> 581     public void onCreateOptionsMenu(@NonNull Menu menu, @NonNull MenuInflater inflater) {                </span>
<span class="5772887857065615623" onmouseenter="enter('5772887857065615623');" onmouseout="out('5772887857065615623');" style=""> 582         super.onCreateOptionsMenu(menu, inflater);                                                       </span>
<span  style=""> 583                                                                                                          </span>
<span class="-4568224188607879240" onmouseenter="enter('-4568224188607879240');" onmouseout="out('-4568224188607879240');" style=""><abbr title=" 584         if (!isAdded() || (!mIsFromWidget &amp;&amp; DisplayUtils.isLargeScreenLandscape(getActivity()) &amp;&amp; mNoteMarkdownFragment == null)) {"> 584         if (!isAdded() || (!mIsFromWidget &amp;&amp; DisplayUtils.isLargeScreenLandscape(getActivity()) &amp;&amp; mNoteM🔵</abbr></span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 585             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 586         }                                                                                                </span>
<span  style=""> 587                                                                                                          </span>
<span class="-5591635883999644357" onmouseenter="enter('-5591635883999644357');" onmouseout="out('-5591635883999644357');" style=""> 588         inflater.inflate(R.menu.note_editor, menu);                                                      </span>
<span class="5385664906661306149" onmouseenter="enter('5385664906661306149');" onmouseout="out('5385664906661306149');" style=""> 589         MenuCompat.setGroupDividerEnabled(menu, true);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 590     }                                                                                                    </span>
<span  style=""> 591                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 592     @Override                                                                                            </span>
<span class="-1268726994169507961" onmouseenter="enter('-1268726994169507961');" onmouseout="out('-1268726994169507961');" style=""> 593     public boolean onOptionsItemSelected(@NonNull                                                        </span>
<span class="-8513836018934639037" onmouseenter="enter('-8513836018934639037');" onmouseout="out('-8513836018934639037');" style=""> 594     MenuItem item) {                                                                                     </span>
<span class="2068182408853392247" onmouseenter="enter('2068182408853392247');" onmouseout="out('2068182408853392247');" style=""> 595         switch (item.getItemId()) {                                                                      </span>
<span class="8867537987050623817" onmouseenter="enter('8867537987050623817');" onmouseout="out('8867537987050623817');" style=""> 596             case R.id.menu_checklist :                                                                   </span>
<span class="2996686463249748346" onmouseenter="enter('2996686463249748346');" onmouseout="out('2996686463249748346');" style=""> 597                 insertChecklist();                                                                       </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 598                 return true;                                                                             </span>
<span class="-4634405621556180819" onmouseenter="enter('-4634405621556180819');" onmouseout="out('-4634405621556180819');" style=""> 599             case R.id.menu_copy :                                                                        </span>
<span class="8518441705934796822" onmouseenter="enter('8518441705934796822');" onmouseout="out('8518441705934796822');" style=""> 600                 if (BrowserUtils.copyToClipboard(requireContext(), mNote.getPublishedUrl())) {           </span>
<span class="3795490233575843146" onmouseenter="enter('3795490233575843146');" onmouseout="out('3795490233575843146');" style=""> 601                     Snackbar.make(mRootView, R.string.link_copied, Snackbar.LENGTH_SHORT).show();        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 602                 } else {                                                                                 </span>
<span class="8359220226685626421" onmouseenter="enter('8359220226685626421');" onmouseout="out('8359220226685626421');" style=""> 603                     Snackbar.make(mRootView, R.string.link_copied_failure, Snackbar.LENGTH_SHORT).show();</span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 604                 }                                                                                        </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 605                 return true;                                                                             </span>
<span class="8246830278668697775" onmouseenter="enter('8246830278668697775');" onmouseout="out('8246830278668697775');" style=""> 606             case R.id.menu_copy_internal :                                                               </span>
<span class="-3103212045473028348" onmouseenter="enter('-3103212045473028348');" onmouseout="out('-3103212045473028348');" style=""><abbr title=" 607                 if (BrowserUtils.copyToClipboard(requireContext(), SimplenoteLinkify.getNoteLinkWithTitle(mNote.getTitle(), mNote.getSimperiumKey()))) {"> 607                 if (BrowserUtils.copyToClipboard(requireContext(), SimplenoteLinkify.getNoteLinkWithTitle🔵</abbr></span>
<span class="3795490233575843146" onmouseenter="enter('3795490233575843146');" onmouseout="out('3795490233575843146');" style=""> 608                     Snackbar.make(mRootView, R.string.link_copied, Snackbar.LENGTH_SHORT).show();        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 609                 } else {                                                                                 </span>
<span class="8359220226685626421" onmouseenter="enter('8359220226685626421');" onmouseout="out('8359220226685626421');" style=""> 610                     Snackbar.make(mRootView, R.string.link_copied_failure, Snackbar.LENGTH_SHORT).show();</span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 611                 }                                                                                        </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 612                 return true;                                                                             </span>
<span class="-4298636595580130452" onmouseenter="enter('-4298636595580130452');" onmouseout="out('-4298636595580130452');" style=""> 613             case R.id.menu_history :                                                                     </span>
<span class="3115064412317025337" onmouseenter="enter('3115064412317025337');" onmouseout="out('3115064412317025337');" style=""> 614                 showHistory();                                                                           </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 615                 return true;                                                                             </span>
<span class="5135492236944900528" onmouseenter="enter('5135492236944900528');" onmouseout="out('5135492236944900528');" style=""> 616             case R.id.menu_info :                                                                        </span>
<span class="1221863391504882204" onmouseenter="enter('1221863391504882204');" onmouseout="out('1221863391504882204');" style=""> 617                 showInfo();                                                                              </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 618                 return true;                                                                             </span>
<span class="1450934417613029198" onmouseenter="enter('1450934417613029198');" onmouseout="out('1450934417613029198');" style=""> 619             case R.id.menu_markdown :                                                                    </span>
<span class="-3926545672787324985" onmouseenter="enter('-3926545672787324985');" onmouseout="out('-3926545672787324985');" style=""> 620                 setMarkdown(!item.isChecked());                                                          </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 621                 return true;                                                                             </span>
<span class="264731523796471094" onmouseenter="enter('264731523796471094');" onmouseout="out('264731523796471094');" style=""> 622             case R.id.menu_pin :                                                                         </span>
<span class="846429991982879471" onmouseenter="enter('846429991982879471');" onmouseout="out('846429991982879471');" style=""> 623                 NoteUtils.setNotePin(mNote, !item.isChecked());                                          </span>
<span class="-8532471920650411447" onmouseenter="enter('-8532471920650411447');" onmouseout="out('-8532471920650411447');" style=""> 624                 requireActivity().invalidateOptionsMenu();                                               </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 625                 return true;                                                                             </span>
<span class="-1927084815834323870" onmouseenter="enter('-1927084815834323870');" onmouseout="out('-1927084815834323870');" style=""> 626             case R.id.menu_publish :                                                                     </span>
<span class="-3060727947180574444" onmouseenter="enter('-3060727947180574444');" onmouseout="out('-3060727947180574444');" style=""> 627                 if (item.isChecked()) {                                                                  </span>
<span class="4812123925634099655" onmouseenter="enter('4812123925634099655');" onmouseout="out('4812123925634099655');" style=""> 628                     unpublishNote();                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 629                 } else {                                                                                 </span>
<span class="7985358866333072123" onmouseenter="enter('7985358866333072123');" onmouseout="out('7985358866333072123');" style=""> 630                     publishNote();                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 631                 }                                                                                        </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 632                 return true;                                                                             </span>
<span class="-4929350896823615772" onmouseenter="enter('-4929350896823615772');" onmouseout="out('-4929350896823615772');" style=""> 633             case R.id.menu_share :                                                                       </span>
<span class="2819818847761455451" onmouseenter="enter('2819818847761455451');" onmouseout="out('2819818847761455451');" style=""> 634                 shareNote();                                                                             </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 635                 return true;                                                                             </span>
<span class="7986356063039371943" onmouseenter="enter('7986356063039371943');" onmouseout="out('7986356063039371943');" style=""> 636             case R.id.menu_trash :                                                                       </span>
<span class="5514287417242355685" onmouseenter="enter('5514287417242355685');" onmouseout="out('5514287417242355685');" style=""> 637                 if (!isAdded()) {                                                                        </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 638                     return false;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 639                 }                                                                                        </span>
<span class="3639769569139585690" onmouseenter="enter('3639769569139585690');" onmouseout="out('3639769569139585690');" style=""> 640                 deleteNote();                                                                            </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 641                 return true;                                                                             </span>
<span class="-1147335564575759755" onmouseenter="enter('-1147335564575759755');" onmouseout="out('-1147335564575759755');" style=""> 642             case android.R.id.home :                                                                     </span>
<span class="-5022390127132774156" onmouseenter="enter('-5022390127132774156');" onmouseout="out('-5022390127132774156');" style=""> 643                 AppLog.add(Type.ACTION, &quot;Tapped back arrow in app bar (NoteEditorFragment)&quot;);            </span>
<span class="5514287417242355685" onmouseenter="enter('5514287417242355685');" onmouseout="out('5514287417242355685');" style=""> 644                 if (!isAdded()) {                                                                        </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 645                     return false;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 646                 }                                                                                        </span>
<span class="-1923482990691915278" onmouseenter="enter('-1923482990691915278');" onmouseout="out('-1923482990691915278');" style=""> 647                 requireActivity().finish();                                                              </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 648                 return true;                                                                             </span>
<span class="3050734735710613783" onmouseenter="enter('3050734735710613783');" onmouseout="out('3050734735710613783');" style=""> 649             default :                                                                                    </span>
<span class="-3863613010288750787" onmouseenter="enter('-3863613010288750787');" onmouseout="out('-3863613010288750787');" style=""> 650                 return super.onOptionsItemSelected(item);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 651         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 652     }                                                                                                    </span>
<span  style=""> 653                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 654     @Override                                                                                            </span>
<span class="976560802893770483" onmouseenter="enter('976560802893770483');" onmouseout="out('976560802893770483');" style=""> 655     public void onPrepareOptionsMenu(@NonNull Menu menu) {                                               </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 656         if (mNote != null) {                                                                             </span>
<span class="4103252492326247538" onmouseenter="enter('4103252492326247538');" onmouseout="out('4103252492326247538');" style=""> 657             MenuItem pinItem = menu.findItem(R.id.menu_pin);                                             </span>
<span class="-1901297934576221502" onmouseenter="enter('-1901297934576221502');" onmouseout="out('-1901297934576221502');" style=""> 658             MenuItem shareItem = menu.findItem(R.id.menu_share);                                         </span>
<span class="-1024200395334062210" onmouseenter="enter('-1024200395334062210');" onmouseout="out('-1024200395334062210');" style=""> 659             MenuItem historyItem = menu.findItem(R.id.menu_history);                                     </span>
<span class="8524821600195318381" onmouseenter="enter('8524821600195318381');" onmouseout="out('8524821600195318381');" style=""> 660             MenuItem publishItem = menu.findItem(R.id.menu_publish);                                     </span>
<span class="-2596587708374310136" onmouseenter="enter('-2596587708374310136');" onmouseout="out('-2596587708374310136');" style=""> 661             MenuItem copyLinkItem = menu.findItem(R.id.menu_copy);                                       </span>
<span class="3256712546982954826" onmouseenter="enter('3256712546982954826');" onmouseout="out('3256712546982954826');" style=""> 662             MenuItem markdownItem = menu.findItem(R.id.menu_markdown);                                   </span>
<span class="7126556138263523964" onmouseenter="enter('7126556138263523964');" onmouseout="out('7126556138263523964');" style=""> 663             MenuItem trashItem = menu.findItem(R.id.menu_trash);                                         </span>
<span class="-481966053977064278" onmouseenter="enter('-481966053977064278');" onmouseout="out('-481966053977064278');" style=""> 664             mChecklistMenuItem = menu.findItem(R.id.menu_checklist);                                     </span>
<span class="-41110414926085356" onmouseenter="enter('-41110414926085356');" onmouseout="out('-41110414926085356');" style=""> 665             mInformationMenuItem = menu.findItem(R.id.menu_info).setVisible(true);                       </span>
<span  style=""> 666                                                                                                          </span>
<span class="-7678419238898690461" onmouseenter="enter('-7678419238898690461');" onmouseout="out('-7678419238898690461');" style=""> 667             pinItem.setChecked(mNote.isPinned());                                                        </span>
<span class="5915502490134342688" onmouseenter="enter('5915502490134342688');" onmouseout="out('5915502490134342688');" style=""> 668             publishItem.setChecked(mNote.isPublished());                                                 </span>
<span class="-2454055549809219964" onmouseenter="enter('-2454055549809219964');" onmouseout="out('-2454055549809219964');" style=""> 669             markdownItem.setChecked(mNote.isMarkdownEnabled());                                          </span>
<span  style=""> 670                                                                                                          </span>
<span class="8027745968637922893" onmouseenter="enter('8027745968637922893');" onmouseout="out('8027745968637922893');" style=""> 671             // Disable actions when note is in Trash or markdown view is shown on large device.          </span>
<span class="-431402929828645917" onmouseenter="enter('-431402929828645917');" onmouseout="out('-431402929828645917');" style=""> 672             if (mNote.isDeleted() || (mMarkdown != null &amp;&amp; mMarkdown.getVisibility() == View.VISIBLE)) { </span>
<span class="-1690132925836641241" onmouseenter="enter('-1690132925836641241');" onmouseout="out('-1690132925836641241');" style=""> 673                 pinItem.setEnabled(false);                                                               </span>
<span class="-5469494517506321069" onmouseenter="enter('-5469494517506321069');" onmouseout="out('-5469494517506321069');" style=""> 674                 shareItem.setEnabled(false);                                                             </span>
<span class="9085171889633758452" onmouseenter="enter('9085171889633758452');" onmouseout="out('9085171889633758452');" style=""> 675                 historyItem.setEnabled(false);                                                           </span>
<span class="6693521395658962624" onmouseenter="enter('6693521395658962624');" onmouseout="out('6693521395658962624');" style=""> 676                 publishItem.setEnabled(false);                                                           </span>
<span class="9087995724461855803" onmouseenter="enter('9087995724461855803');" onmouseout="out('9087995724461855803');" style=""> 677                 copyLinkItem.setEnabled(false);                                                          </span>
<span class="-1845358690665350593" onmouseenter="enter('-1845358690665350593');" onmouseout="out('-1845358690665350593');" style=""> 678                 markdownItem.setEnabled(false);                                                          </span>
<span class="1533489871724235057" onmouseenter="enter('1533489871724235057');" onmouseout="out('1533489871724235057');" style=""> 679                 mChecklistMenuItem.setEnabled(false);                                                    </span>
<span class="5575712097606361646" onmouseenter="enter('5575712097606361646');" onmouseout="out('5575712097606361646');" style=""> 680                 DrawableUtils.setMenuItemAlpha(mChecklistMenuItem, 0.3);  // 0.3 is 30% opacity.         </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 681             } else {                                                                                     </span>
<span class="-4176946050939173198" onmouseenter="enter('-4176946050939173198');" onmouseout="out('-4176946050939173198');" style=""> 682                 pinItem.setEnabled(true);                                                                </span>
<span class="-8607869884042424878" onmouseenter="enter('-8607869884042424878');" onmouseout="out('-8607869884042424878');" style=""> 683                 shareItem.setEnabled(true);                                                              </span>
<span class="-4314747760650157745" onmouseenter="enter('-4314747760650157745');" onmouseout="out('-4314747760650157745');" style=""> 684                 historyItem.setEnabled(true);                                                            </span>
<span class="3398211100008798634" onmouseenter="enter('3398211100008798634');" onmouseout="out('3398211100008798634');" style=""> 685                 publishItem.setEnabled(true);                                                            </span>
<span class="-4773075625324516073" onmouseenter="enter('-4773075625324516073');" onmouseout="out('-4773075625324516073');" style=""> 686                 copyLinkItem.setEnabled(mNote.isPublished());                                            </span>
<span class="3540588263915729219" onmouseenter="enter('3540588263915729219');" onmouseout="out('3540588263915729219');" style=""> 687                 markdownItem.setEnabled(true);                                                           </span>
<span class="9157159425417983851" onmouseenter="enter('9157159425417983851');" onmouseout="out('9157159425417983851');" style=""> 688                 mChecklistMenuItem.setEnabled(true);                                                     </span>
<span class="-997998498639683163" onmouseenter="enter('-997998498639683163');" onmouseout="out('-997998498639683163');" style=""> 689                 DrawableUtils.setMenuItemAlpha(mChecklistMenuItem, 1.0);  // 1.0 is 100% opacity.        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 690             }                                                                                            </span>
<span  style=""> 691                                                                                                          </span>
<span class="5561093706160816776" onmouseenter="enter('5561093706160816776');" onmouseout="out('5561093706160816776');" style=""> 692             if (mNote.isDeleted()) {                                                                     </span>
<span class="-3033015909800303171" onmouseenter="enter('-3033015909800303171');" onmouseout="out('-3033015909800303171');" style=""> 693                 trashItem.setTitle(R.string.restore);                                                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 694             } else {                                                                                     </span>
<span class="-1683477354690990368" onmouseenter="enter('-1683477354690990368');" onmouseout="out('-1683477354690990368');" style=""> 695                 trashItem.setTitle(R.string.trash);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 696             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 697         }                                                                                                </span>
<span  style=""> 698                                                                                                          </span>
<span class="-5146912340244450550" onmouseenter="enter('-5146912340244450550');" onmouseout="out('-5146912340244450550');" style=""> 699         DrawableUtils.tintMenuWithAttribute(getActivity(), menu, R.attr.toolbarIconColor);               </span>
<span class="1467059367331108531" onmouseenter="enter('1467059367331108531');" onmouseout="out('1467059367331108531');" style=""> 700         super.onPrepareOptionsMenu(menu);                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 701     }                                                                                                    </span>
<span  style=""> 702                                                                                                          </span>
<span class="-2056093237925143337" onmouseenter="enter('-2056093237925143337');" onmouseout="out('-2056093237925143337');" style=""> 703     public void insertChecklist() {                                                                      </span>
<span class="-2132172590912834546" onmouseenter="enter('-2132172590912834546');" onmouseout="out('-2132172590912834546');" style=""> 704         DrawableUtils.startAnimatedVectorDrawable(mChecklistMenuItem.getIcon());                         </span>
<span  style=""> 705                                                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 706         try {                                                                                            </span>
<span class="5818347684529310934" onmouseenter="enter('5818347684529310934');" onmouseout="out('5818347684529310934');" style=""> 707             mContentEditText.insertChecklist();                                                          </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 708         } catch (Exception e) {                                                                          </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 709             e.printStackTrace();                                                                         </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 710             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 711         }                                                                                                </span>
<span  style=""> 712                                                                                                          </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 713         AnalyticsTracker.track(                                                                          </span>
<span class="2856363448162984839" onmouseenter="enter('2856363448162984839');" onmouseout="out('2856363448162984839');" style=""> 714             EDITOR_CHECKLIST_INSERTED,                                                                   </span>
<span class="-2430475172570880083" onmouseenter="enter('-2430475172570880083');" onmouseout="out('-2430475172570880083');" style=""> 715             CATEGORY_NOTE,                                                                               </span>
<span class="3613116414135407305" onmouseenter="enter('3613116414135407305');" onmouseout="out('3613116414135407305');" style=""> 716             &quot;toolbar_button&quot;                                                                             </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 717         );                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 718     }                                                                                                    </span>
<span  style=""> 719                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 720     @Override                                                                                            </span>
<span class="-8145186961220354967" onmouseenter="enter('-8145186961220354967');" onmouseout="out('-8145186961220354967');" style=""> 721     public void onCheckboxToggled() {                                                                    </span>
<span class="-2834824800808682286" onmouseenter="enter('-2834824800808682286');" onmouseout="out('-2834824800808682286');" style=""> 722         // Save note (using delay) after toggling a checkbox                                             </span>
<span class="-2149096896161266035" onmouseenter="enter('-2149096896161266035');" onmouseout="out('-2149096896161266035');" style=""> 723         if (mAutoSaveHandler != null) {                                                                  </span>
<span class="-5465787548318672754" onmouseenter="enter('-5465787548318672754');" onmouseout="out('-5465787548318672754');" style=""> 724             mAutoSaveHandler.removeCallbacks(mAutoSaveRunnable);                                         </span>
<span class="3237260668993885548" onmouseenter="enter('3237260668993885548');" onmouseout="out('3237260668993885548');" style=""> 725             mAutoSaveHandler.postDelayed(mAutoSaveRunnable, AUTOSAVE_DELAY_MILLIS);                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 726         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 727     }                                                                                                    </span>
<span  style=""> 728                                                                                                          </span>
<span class="-7228463698535350052" onmouseenter="enter('-7228463698535350052');" onmouseout="out('-7228463698535350052');" style=""> 729     private void deleteNote() {                                                                          </span>
<span class="4492119149633458811" onmouseenter="enter('4492119149633458811');" onmouseout="out('4492119149633458811');" style=""> 730         NoteUtils.deleteNote(mNote, getActivity());                                                      </span>
<span class="-1923482990691915278" onmouseenter="enter('-1923482990691915278');" onmouseout="out('-1923482990691915278');" style=""> 731         requireActivity().finish();                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 732     }                                                                                                    </span>
<span  style=""> 733                                                                                                          </span>
<span class="6575837707802621057" onmouseenter="enter('6575837707802621057');" onmouseout="out('6575837707802621057');" style=""> 734     protected void clearMarkdown() {                                                                     </span>
<span class="4379033444024403701" onmouseenter="enter('4379033444024403701');" onmouseout="out('4379033444024403701');" style=""> 735         mMarkdown.loadDataWithBaseURL(&quot;file:///android_asset/&quot;, mCss + &quot;&quot;, &quot;text/html&quot;, &quot;utf-8&quot;, null);  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 736     }                                                                                                    </span>
<span  style=""> 737                                                                                                          </span>
<span class="4876877473500420963" onmouseenter="enter('4876877473500420963');" onmouseout="out('4876877473500420963');" style=""> 738     protected void hideMarkdown() {                                                                      </span>
<span class="6362103358672335388" onmouseenter="enter('6362103358672335388');" onmouseout="out('6362103358672335388');" style=""> 739         mMarkdown.setVisibility(View.INVISIBLE);                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 740     }                                                                                                    </span>
<span  style=""> 741                                                                                                          </span>
<span class="-3219341107535080329" onmouseenter="enter('-3219341107535080329');" onmouseout="out('-3219341107535080329');" style=""> 742     protected void showMarkdown() {                                                                      </span>
<span class="3327794499329885328" onmouseenter="enter('3327794499329885328');" onmouseout="out('3327794499329885328');" style=""> 743         loadMarkdownData();                                                                              </span>
<span class="4346698976501095620" onmouseenter="enter('4346698976501095620');" onmouseout="out('4346698976501095620');" style=""> 744         mMarkdown.setVisibility(View.VISIBLE);                                                           </span>
<span  style=""> 745                                                                                                          </span>
<span class="-8355266079523609200" onmouseenter="enter('-8355266079523609200');" onmouseout="out('-8355266079523609200');" style=""> 746         new Handler().postDelayed(                                                                       </span>
<span class="4860439059348199630" onmouseenter="enter('4860439059348199630');" onmouseout="out('4860439059348199630');" style=""> 747             new Runnable() {                                                                             </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 748                 @Override                                                                                </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 749                 public void run() {                                                                      </span>
<span class="-8532471920650411447" onmouseenter="enter('-8532471920650411447');" onmouseout="out('-8532471920650411447');" style=""> 750                     requireActivity().invalidateOptionsMenu();                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 751                 }                                                                                        </span>
<span class="-4102417550988568311" onmouseenter="enter('-4102417550988568311');" onmouseout="out('-4102417550988568311');" style=""> 752             },                                                                                           </span>
<span class="5128296635725421077" onmouseenter="enter('5128296635725421077');" onmouseout="out('5128296635725421077');" style=""> 753             getResources().getInteger(R.integer.time_animation)                                          </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 754         );                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 755     }                                                                                                    </span>
<span  style=""> 756                                                                                                          </span>
<span class="796341583224604558" onmouseenter="enter('796341583224604558');" onmouseout="out('796341583224604558');" style=""> 757     public void shareNote() {                                                                            </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 758         if (mNote != null) {                                                                             </span>
<span class="-5662939853121386036" onmouseenter="enter('-5662939853121386036');" onmouseout="out('-5662939853121386036');" style=""> 759             mContentEditText.clearFocus();                                                               </span>
<span class="-641201949227129854" onmouseenter="enter('-641201949227129854');" onmouseout="out('-641201949227129854');" style=""> 760             showShareSheet();                                                                            </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 761             AnalyticsTracker.track(                                                                      </span>
<span class="-5025794315104060878" onmouseenter="enter('-5025794315104060878');" onmouseout="out('-5025794315104060878');" style=""> 762                 EDITOR_NOTE_CONTENT_SHARED,                                                              </span>
<span class="-2430475172570880083" onmouseenter="enter('-2430475172570880083');" onmouseout="out('-2430475172570880083');" style=""> 763                 CATEGORY_NOTE,                                                                           </span>
<span class="2749115305963564191" onmouseenter="enter('2749115305963564191');" onmouseout="out('2749115305963564191');" style=""> 764                 &quot;action_bar_share_button&quot;                                                                </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 765             );                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 766         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 767     }                                                                                                    </span>
<span  style=""> 768                                                                                                          </span>
<span class="-6549715277076486587" onmouseenter="enter('-6549715277076486587');" onmouseout="out('-6549715277076486587');" style=""> 769     public void showHistory() {                                                                          </span>
<span class="-4132317386083687564" onmouseenter="enter('-4132317386083687564');" onmouseout="out('-4132317386083687564');" style=""> 770         if (mNote != null &amp;&amp; mNote.getVersion() &gt; 1) {                                                   </span>
<span class="-5662939853121386036" onmouseenter="enter('-5662939853121386036');" onmouseout="out('-5662939853121386036');" style=""> 771             mContentEditText.clearFocus();                                                               </span>
<span class="2792270431942423109" onmouseenter="enter('2792270431942423109');" onmouseout="out('2792270431942423109');" style=""> 772             mHistoryTimeoutHandler.postDelayed(mHistoryTimeoutRunnable, HISTORY_TIMEOUT);                </span>
<span class="-6120831555230055153" onmouseenter="enter('-6120831555230055153');" onmouseout="out('-6120831555230055153');" style=""> 773             showHistorySheet();                                                                          </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 774         } else {                                                                                         </span>
<span class="-1949769614201595359" onmouseenter="enter('-1949769614201595359');" onmouseout="out('-1949769614201595359');" style=""> 775             Toast.makeText(getActivity(), R.string.error_history, Toast.LENGTH_LONG).show();             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 776         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 777     }                                                                                                    </span>
<span  style=""> 778                                                                                                          </span>
<span class="7631792944897512467" onmouseenter="enter('7631792944897512467');" onmouseout="out('7631792944897512467');" style=""> 779     public void showInfo() {                                                                             </span>
<span class="8350219460722128573" onmouseenter="enter('8350219460722128573');" onmouseout="out('8350219460722128573');" style=""> 780         DrawableUtils.startAnimatedVectorDrawable(mInformationMenuItem.getIcon());                       </span>
<span  style=""> 781                                                                                                          </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 782         if (mNote != null) {                                                                             </span>
<span class="-5662939853121386036" onmouseenter="enter('-5662939853121386036');" onmouseout="out('-5662939853121386036');" style=""> 783             mContentEditText.clearFocus();                                                               </span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style=""> 784             saveNote();                                                                                  </span>
<span class="-4032532453651560177" onmouseenter="enter('-4032532453651560177');" onmouseout="out('-4032532453651560177');" style=""> 785             showInfoSheet();                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 786         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 787     }                                                                                                    </span>
<span  style=""> 788                                                                                                          </span>
<span class="-352900364532795923" onmouseenter="enter('-352900364532795923');" onmouseout="out('-352900364532795923');" style=""> 789     private void setMarkdown(boolean isChecked) {                                                        </span>
<span class="-8726857289881922025" onmouseenter="enter('-8726857289881922025');" onmouseout="out('-8726857289881922025');" style=""> 790         mIsMarkdownEnabled = isChecked;                                                                  </span>
<span class="-2583362461360625309" onmouseenter="enter('-2583362461360625309');" onmouseout="out('-2583362461360625309');" style=""> 791         showMarkdownActionOrTabs();                                                                      </span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style=""> 792         saveNote();                                                                                      </span>
<span  style=""> 793                                                                                                          </span>
<span class="4232333416851338644" onmouseenter="enter('4232333416851338644');" onmouseout="out('4232333416851338644');" style=""> 794         // Set preference so that next new note will have markdown enabled.                              </span>
<span class="6036884777494374936" onmouseenter="enter('6036884777494374936');" onmouseout="out('6036884777494374936');" style=""> 795         SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(requireContext());       </span>
<span class="-5940133505573131741" onmouseenter="enter('-5940133505573131741');" onmouseout="out('-5940133505573131741');" style=""> 796         SharedPreferences.Editor editor = prefs.edit();                                                  </span>
<span class="5795063328820819160" onmouseenter="enter('5795063328820819160');" onmouseout="out('5795063328820819160');" style=""> 797         editor.putBoolean(PrefUtils.PREF_MARKDOWN_ENABLED, isChecked);                                   </span>
<span class="-5305612453340718340" onmouseenter="enter('-5305612453340718340');" onmouseout="out('-5305612453340718340');" style=""> 798         editor.apply();                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 799     }                                                                                                    </span>
<span  style=""> 800                                                                                                          </span>
<span class="-8233267360630545179" onmouseenter="enter('-8233267360630545179');" onmouseout="out('-8233267360630545179');" style=""> 801     private void setMarkdownEnabled(boolean enabled) {                                                   </span>
<span class="-9128949734751156553" onmouseenter="enter('-9128949734751156553');" onmouseout="out('-9128949734751156553');" style=""> 802         mIsMarkdownEnabled = enabled;                                                                    </span>
<span  style=""> 803                                                                                                          </span>
<span class="-5497853437151453135" onmouseenter="enter('-5497853437151453135');" onmouseout="out('-5497853437151453135');" style=""> 804         if (mIsMarkdownEnabled) {                                                                        </span>
<span class="3327794499329885328" onmouseenter="enter('3327794499329885328');" onmouseout="out('3327794499329885328');" style=""> 805             loadMarkdownData();                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 806         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 807     }                                                                                                    </span>
<span  style=""> 808                                                                                                          </span>
<span class="-150225536602277221" onmouseenter="enter('-150225536602277221');" onmouseout="out('-150225536602277221');" style=""> 809     private void showMarkdownActionOrTabs() {                                                            </span>
<span class="-5071525869541290984" onmouseenter="enter('-5071525869541290984');" onmouseout="out('-5071525869541290984');" style=""> 810         Activity activity = getActivity();                                                               </span>
<span  style=""> 811                                                                                                          </span>
<span class="2687579389951242136" onmouseenter="enter('2687579389951242136');" onmouseout="out('2687579389951242136');" style=""> 812         if (activity instanceof NoteEditorActivity) {                                                    </span>
<span class="-2402557313247060047" onmouseenter="enter('-2402557313247060047');" onmouseout="out('-2402557313247060047');" style=""> 813             NoteEditorActivity editorActivity = (NoteEditorActivity) activity;                           </span>
<span  style=""> 814                                                                                                          </span>
<span class="-5497853437151453135" onmouseenter="enter('-5497853437151453135');" onmouseout="out('-5497853437151453135');" style=""> 815             if (mIsMarkdownEnabled) {                                                                    </span>
<span class="2738920073364403707" onmouseenter="enter('2738920073364403707');" onmouseout="out('2738920073364403707');" style=""> 816                 editorActivity.showTabs();                                                               </span>
<span  style=""> 817                                                                                                          </span>
<span class="-3674842258349497418" onmouseenter="enter('-3674842258349497418');" onmouseout="out('-3674842258349497418');" style=""> 818                 if (mNoteMarkdownFragment == null) {                                                     </span>
<span class="-8091199532300597402" onmouseenter="enter('-8091199532300597402');" onmouseout="out('-8091199532300597402');" style=""> 819                     // Get markdown fragment and update content                                          </span>
<span class="6541177819216640453" onmouseenter="enter('6541177819216640453');" onmouseout="out('6541177819216640453');" style=""> 820                     mNoteMarkdownFragment = editorActivity.getNoteMarkdownFragment();                    </span>
<span class="8234543871026198045" onmouseenter="enter('8234543871026198045');" onmouseout="out('8234543871026198045');" style=""> 821                     mNoteMarkdownFragment.updateMarkdown(mContentEditText.getPreviewTextContent());      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 822                 }                                                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 823             } else {                                                                                     </span>
<span class="-1827112023263463857" onmouseenter="enter('-1827112023263463857');" onmouseout="out('-1827112023263463857');" style=""> 824                 editorActivity.hideTabs();                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 825             }                                                                                            </span>
<span class="-8182258209329027497" onmouseenter="enter('-8182258209329027497');" onmouseout="out('-8182258209329027497');" style=""> 826         } else if (activity instanceof NotesActivity) {                                                  </span>
<span class="714586879751884809" onmouseenter="enter('714586879751884809');" onmouseout="out('714586879751884809');" style=""> 827             setMarkdownEnabled(mIsMarkdownEnabled);                                                      </span>
<span class="9075936053703013718" onmouseenter="enter('9075936053703013718');" onmouseout="out('9075936053703013718');" style=""> 828             ((NotesActivity) getActivity()).setMarkdownShowing(false);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 829         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 830     }                                                                                                    </span>
<span  style=""> 831                                                                                                          </span>
<span class="-2467052403250215415" onmouseenter="enter('-2467052403250215415');" onmouseout="out('-2467052403250215415');" style=""> 832     private void loadMarkdownData() {                                                                    </span>
<span class="-8622237621259523057" onmouseenter="enter('-8622237621259523057');" onmouseout="out('-8622237621259523057');" style=""> 833         String formattedContent = NoteMarkdownFragment.getMarkdownFormattedContent(                      </span>
<span class="-107180190148709194" onmouseenter="enter('-107180190148709194');" onmouseout="out('-107180190148709194');" style=""> 834                 mCss,                                                                                    </span>
<span class="8402262730640179324" onmouseenter="enter('8402262730640179324');" onmouseout="out('8402262730640179324');" style=""> 835                 mContentEditText.getPreviewTextContent()                                                 </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 836         );                                                                                               </span>
<span  style=""> 837                                                                                                          </span>
<span class="-1179287945165338458" onmouseenter="enter('-1179287945165338458');" onmouseout="out('-1179287945165338458');" style=""> 838         mMarkdown.loadDataWithBaseURL(null, formattedContent, &quot;text/html&quot;, &quot;utf-8&quot;, null);               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 839     }                                                                                                    </span>
<span  style=""> 840                                                                                                          </span>
<span class="8195105300246755684" onmouseenter="enter('8195105300246755684');" onmouseout="out('8195105300246755684');" style=""> 841     public void setNote(String noteID, String matchOffsets) {                                            </span>
<span class="-3646372507164546123" onmouseenter="enter('-3646372507164546123');" onmouseout="out('-3646372507164546123');" style=""> 842         if (mAutoSaveHandler != null)                                                                    </span>
<span class="-5465787548318672754" onmouseenter="enter('-5465787548318672754');" onmouseout="out('-5465787548318672754');" style=""> 843             mAutoSaveHandler.removeCallbacks(mAutoSaveRunnable);                                         </span>
<span  style=""> 844                                                                                                          </span>
<span class="-2690182352330934584" onmouseenter="enter('-2690182352330934584');" onmouseout="out('-2690182352330934584');" style=""> 845         mPlaceholderView.setVisibility(View.GONE);                                                       </span>
<span  style=""> 846                                                                                                          </span>
<span class="-7566474685196195951" onmouseenter="enter('-7566474685196195951');" onmouseout="out('-7566474685196195951');" style=""> 847         if (matchOffsets != null) {                                                                      </span>
<span class="76822769413740338" onmouseenter="enter('76822769413740338');" onmouseout="out('76822769413740338');" style=""> 848             mMatchOffsets = matchOffsets;                                                                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 849         } else {                                                                                         </span>
<span class="-5254682256162211718" onmouseenter="enter('-5254682256162211718');" onmouseout="out('-5254682256162211718');" style=""> 850             mMatchOffsets = null;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 851         }                                                                                                </span>
<span  style=""> 852                                                                                                          </span>
<span  style=""> 853                                                                                                          </span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style=""> 854         saveNote();                                                                                      </span>
<span  style=""> 855                                                                                                          </span>
<span class="-2429694576102374369" onmouseenter="enter('-2429694576102374369');" onmouseout="out('-2429694576102374369');" style=""> 856         new LoadNoteTask(this).executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR, noteID);                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 857     }                                                                                                    </span>
<span  style=""> 858                                                                                                          </span>
<span class="2912110192045859171" onmouseenter="enter('2912110192045859171');" onmouseout="out('2912110192045859171');" style=""> 859     private void updateNote(Note updatedNote) {                                                          </span>
<span class="1053945494720623403" onmouseenter="enter('1053945494720623403');" onmouseout="out('1053945494720623403');" style=""> 860         // update note if network change arrived                                                         </span>
<span class="8715526790189509580" onmouseenter="enter('8715526790189509580');" onmouseout="out('8715526790189509580');" style=""> 861         mNote = updatedNote;                                                                             </span>
<span class="-1082183570760036139" onmouseenter="enter('-1082183570760036139');" onmouseout="out('-1082183570760036139');" style=""> 862         refreshContent(true);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 863     }                                                                                                    </span>
<span  style=""> 864                                                                                                          </span>
<span class="-7217331690392611444" onmouseenter="enter('-7217331690392611444');" onmouseout="out('-7217331690392611444');" style=""> 865     private void refreshContent(boolean isNoteUpdate) {                                                  </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 866         if (mNote != null) {                                                                             </span>
<span class="9083634457699551889" onmouseenter="enter('9083634457699551889');" onmouseout="out('9083634457699551889');" style=""> 867             // Restore the cursor position if possible.                                                  </span>
<span class="-3899995221280134201" onmouseenter="enter('-3899995221280134201');" onmouseout="out('-3899995221280134201');" style=""><abbr title=" 868             int cursorPosition = newCursorLocation(mNote.getContent(), getNoteContentString(), mContentEditText.getSelectionEnd());"> 868             int cursorPosition = newCursorLocation(mNote.getContent(), getNoteContentString(), mContentEd🔵</abbr></span>
<span class="4148799213240179760" onmouseenter="enter('4148799213240179760');" onmouseout="out('4148799213240179760');" style=""> 869             mContentEditText.setText(mNote.getContent());                                                </span>
<span  style=""> 870                                                                                                          </span>
<span class="2353268123342341866" onmouseenter="enter('2353268123342341866');" onmouseout="out('2353268123342341866');" style=""> 871             if (isNoteUpdate) {                                                                          </span>
<span class="-7373810293776319490" onmouseenter="enter('-7373810293776319490');" onmouseout="out('-7373810293776319490');" style=""> 872                 // Update markdown and preview flags from updated note.                                  </span>
<span class="-6548100248772474304" onmouseenter="enter('-6548100248772474304');" onmouseout="out('-6548100248772474304');" style=""> 873                 mIsMarkdownEnabled = mNote.isMarkdownEnabled();                                          </span>
<span class="8897386780031316770" onmouseenter="enter('8897386780031316770');" onmouseout="out('8897386780031316770');" style=""> 874                 mIsPreviewEnabled = mNote.isPreviewEnabled();                                            </span>
<span  style=""> 875                                                                                                          </span>
<span class="-3172285059116353636" onmouseenter="enter('-3172285059116353636');" onmouseout="out('-3172285059116353636');" style=""> 876                 // Show/Hide action/tabs based on markdown flag.                                         </span>
<span class="-2583362461360625309" onmouseenter="enter('-2583362461360625309');" onmouseout="out('-2583362461360625309');" style=""> 877                 showMarkdownActionOrTabs();                                                              </span>
<span  style=""> 878                                                                                                          </span>
<span class="8277551329937109619" onmouseenter="enter('8277551329937109619');" onmouseout="out('8277551329937109619');" style=""> 879                 // Save note so any local changes get synced.                                            </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style=""> 880                 mNote.save();                                                                            </span>
<span  style=""> 881                                                                                                          </span>
<span class="-4783156834321463304" onmouseenter="enter('-4783156834321463304');" onmouseout="out('-4783156834321463304');" style=""> 882                 // Update current note object on large screen devices in landscape orientation.          </span>
<span class="-7225941789318469668" onmouseenter="enter('-7225941789318469668');" onmouseout="out('-7225941789318469668');" style=""> 883                 if (DisplayUtils.isLargeScreenLandscape(requireContext())) {                             </span>
<span class="9072366327646001644" onmouseenter="enter('9072366327646001644');" onmouseout="out('9072366327646001644');" style=""> 884                     ((NotesActivity) requireActivity()).setCurrentNote(mNote);                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 885                 }                                                                                        </span>
<span  style=""> 886                                                                                                          </span>
<span class="-510315884444466739" onmouseenter="enter('-510315884444466739');" onmouseout="out('-510315884444466739');" style=""> 887                 // Update overflow popup menu.                                                           </span>
<span class="-8532471920650411447" onmouseenter="enter('-8532471920650411447');" onmouseout="out('-8532471920650411447');" style=""> 888                 requireActivity().invalidateOptionsMenu();                                               </span>
<span  style=""> 889                                                                                                          </span>
<span class="8073598210414419917" onmouseenter="enter('8073598210414419917');" onmouseout="out('8073598210414419917');" style=""> 890                 if (mContentEditText.hasFocus()                                                          </span>
<span class="1644140795570121810" onmouseenter="enter('1644140795570121810');" onmouseout="out('1644140795570121810');" style=""> 891                         &amp;&amp; cursorPosition != mContentEditText.getSelectionEnd()                          </span>
<span class="-7547165723183084197" onmouseenter="enter('-7547165723183084197');" onmouseout="out('-7547165723183084197');" style=""> 892                         &amp;&amp; cursorPosition &lt; mContentEditText.getText().length()) {                       </span>
<span class="2096054726124109686" onmouseenter="enter('2096054726124109686');" onmouseout="out('2096054726124109686');" style=""> 893                     mContentEditText.setSelection(cursorPosition);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 894                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 895             }                                                                                            </span>
<span  style=""> 896                                                                                                          </span>
<span class="-2853209662220592982" onmouseenter="enter('-2853209662220592982');" onmouseout="out('-2853209662220592982');" style=""> 897             afterTextChanged(mContentEditText.getText());                                                </span>
<span class="-5644737892245114659" onmouseenter="enter('-5644737892245114659');" onmouseout="out('-5644737892245114659');" style=""> 898             mContentEditText.processChecklists();                                                        </span>
<span class="3745953297761259324" onmouseenter="enter('3745953297761259324');" onmouseout="out('3745953297761259324');" style=""> 899             updateTagList();                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 900         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 901     }                                                                                                    </span>
<span  style=""> 902                                                                                                          </span>
<span class="8641648550056617419" onmouseenter="enter('8641648550056617419');" onmouseout="out('8641648550056617419');" style=""> 903     private void updateTagList() {                                                                       </span>
<span class="-2248190398996855538" onmouseenter="enter('-2248190398996855538');" onmouseout="out('-2248190398996855538');" style=""> 904         setChips(mNote.getTagString());                                                                  </span>
<span class="704222064602714746" onmouseenter="enter('704222064602714746');" onmouseout="out('704222064602714746');" style=""> 905         mTagInput.setText(&quot;&quot;);                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 906     }                                                                                                    </span>
<span  style=""> 907                                                                                                          </span>
<span class="4246690832623096875" onmouseenter="enter('4246690832623096875');" onmouseout="out('4246690832623096875');" style=""> 908     private int newCursorLocation(String newText, String oldText, int cursorLocation) {                  </span>
<span class="9215253731107462720" onmouseenter="enter('9215253731107462720');" onmouseout="out('9215253731107462720');" style=""> 909         // Ported from the iOS app :)                                                                    </span>
<span class="746416875920517525" onmouseenter="enter('746416875920517525');" onmouseout="out('746416875920517525');" style=""> 910         // Cases:                                                                                        </span>
<span class="5532692154938930485" onmouseenter="enter('5532692154938930485');" onmouseout="out('5532692154938930485');" style=""> 911         // 0. All text after cursor (and possibly more) was removed ==&gt; put cursor at end                </span>
<span class="7679522442911259243" onmouseenter="enter('7679522442911259243');" onmouseout="out('7679522442911259243');" style=""> 912         // 1. Text was added after the cursor ==&gt; no change                                              </span>
<span class="-7894032746042607578" onmouseenter="enter('-7894032746042607578');" onmouseout="out('-7894032746042607578');" style=""> 913         // 2. Text was added before the cursor ==&gt; location advances                                     </span>
<span class="-2716138352653500367" onmouseenter="enter('-2716138352653500367');" onmouseout="out('-2716138352653500367');" style=""> 914         // 3. Text was removed after the cursor ==&gt; no change                                            </span>
<span class="-5135222146548415418" onmouseenter="enter('-5135222146548415418');" onmouseout="out('-5135222146548415418');" style=""> 915         // 4. Text was removed before the cursor ==&gt; location retreats                                   </span>
<span class="-7558810491072030947" onmouseenter="enter('-7558810491072030947');" onmouseout="out('-7558810491072030947');" style=""> 916         // 5. Text was added/removed on both sides of the cursor ==&gt; not handled                         </span>
<span  style=""> 917                                                                                                          </span>
<span class="6113131008706185379" onmouseenter="enter('6113131008706185379');" onmouseout="out('6113131008706185379');" style=""> 918         cursorLocation = Math.max(cursorLocation, 0);                                                    </span>
<span  style=""> 919                                                                                                          </span>
<span class="2494517364842646163" onmouseenter="enter('2494517364842646163');" onmouseout="out('2494517364842646163');" style=""> 920         int newCursorLocation = cursorLocation;                                                          </span>
<span  style=""> 921                                                                                                          </span>
<span class="5908042661332565473" onmouseenter="enter('5908042661332565473');" onmouseout="out('5908042661332565473');" style=""> 922         int deltaLength = newText.length() - oldText.length();                                           </span>
<span  style=""> 923                                                                                                          </span>
<span class="-6285488792309831531" onmouseenter="enter('-6285488792309831531');" onmouseout="out('-6285488792309831531');" style=""> 924         // Case 0                                                                                        </span>
<span class="-3414403190560247865" onmouseenter="enter('-3414403190560247865');" onmouseout="out('-3414403190560247865');" style=""> 925         if (newText.length() &lt; cursorLocation)                                                           </span>
<span class="-8431314608568195365" onmouseenter="enter('-8431314608568195365');" onmouseout="out('-8431314608568195365');" style=""> 926             return newText.length();                                                                     </span>
<span  style=""> 927                                                                                                          </span>
<span class="-8591384106259708496" onmouseenter="enter('-8591384106259708496');" onmouseout="out('-8591384106259708496');" style=""> 928         boolean beforeCursorMatches = false;                                                             </span>
<span class="-2836779116340504068" onmouseenter="enter('-2836779116340504068');" onmouseout="out('-2836779116340504068');" style=""> 929         boolean afterCursorMatches = false;                                                              </span>
<span  style=""> 930                                                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 931         try {                                                                                            </span>
<span class="535177221055952012" onmouseenter="enter('535177221055952012');" onmouseout="out('535177221055952012');" style=""><abbr title=" 932             beforeCursorMatches = oldText.substring(0, cursorLocation).equals(newText.substring(0, cursorLocation));"> 932             beforeCursorMatches = oldText.substring(0, cursorLocation).equals(newText.substring(0, cursor🔵</abbr></span>
<span class="4519924127741002604" onmouseenter="enter('4519924127741002604');" onmouseout="out('4519924127741002604');" style=""><abbr title=" 933             afterCursorMatches = oldText.substring(cursorLocation).equals(newText.substring(cursorLocation + deltaLength));"> 933             afterCursorMatches = oldText.substring(cursorLocation).equals(newText.substring(cursorLocatio🔵</abbr></span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 934         } catch (Exception e) {                                                                          </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 935             e.printStackTrace();                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 936         }                                                                                                </span>
<span  style=""> 937                                                                                                          </span>
<span class="-8188204612528872149" onmouseenter="enter('-8188204612528872149');" onmouseout="out('-8188204612528872149');" style=""> 938         // Cases 2 and 4                                                                                 </span>
<span class="6616414540674367624" onmouseenter="enter('6616414540674367624');" onmouseout="out('6616414540674367624');" style=""> 939         if (!beforeCursorMatches &amp;&amp; afterCursorMatches)                                                  </span>
<span class="-4510977125628343614" onmouseenter="enter('-4510977125628343614');" onmouseout="out('-4510977125628343614');" style=""> 940             newCursorLocation += deltaLength;                                                            </span>
<span  style=""> 941                                                                                                          </span>
<span class="6867115481875645839" onmouseenter="enter('6867115481875645839');" onmouseout="out('6867115481875645839');" style=""> 942         // Cases 1, 3 and 5 have no change                                                               </span>
<span class="-7784410696724573059" onmouseenter="enter('-7784410696724573059');" onmouseout="out('-7784410696724573059');" style=""> 943         return newCursorLocation;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 944     }                                                                                                    </span>
<span  style=""> 945                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 946     @Override                                                                                            </span>
<span class="7167548776341584998" onmouseenter="enter('7167548776341584998');" onmouseout="out('7167548776341584998');" style=""> 947     public void onTagAdded(String tag) {                                                                 </span>
<span class="-7210480112102928295" onmouseenter="enter('-7210480112102928295');" onmouseout="out('-7210480112102928295');" style=""> 948         if (mNote == null || !isAdded()) {                                                               </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 949             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 950         }                                                                                                </span>
<span  style=""> 951                                                                                                          </span>
<span class="-5238169388612496279" onmouseenter="enter('-5238169388612496279');" onmouseout="out('-5238169388612496279');" style=""> 952         if (mNote.getTagString() != null &amp;&amp; tag.length() &gt; mNote.getTagString().length()) {              </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 953             AnalyticsTracker.track(                                                                      </span>
<span class="-1422381609780470266" onmouseenter="enter('-1422381609780470266');" onmouseout="out('-1422381609780470266');" style=""> 954                 EDITOR_TAG_ADDED,                                                                        </span>
<span class="-2430475172570880083" onmouseenter="enter('-2430475172570880083');" onmouseout="out('-2430475172570880083');" style=""> 955                 CATEGORY_NOTE,                                                                           </span>
<span class="7268236347956630095" onmouseenter="enter('7268236347956630095');" onmouseout="out('7268236347956630095');" style=""> 956                 &quot;tag_added_to_note&quot;                                                                      </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 957             );                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 958         }                                                                                                </span>
<span  style=""> 959                                                                                                          </span>
<span class="-1987136146652427775" onmouseenter="enter('-1987136146652427775');" onmouseout="out('-1987136146652427775');" style=""> 960         mNote.setTagString(mNote.getTagString() + String.valueOf(SPACE) + tag);                          </span>
<span class="-3343075472306200704" onmouseenter="enter('-3343075472306200704');" onmouseout="out('-3343075472306200704');" style=""> 961         mNote.setModificationDate(Calendar.getInstance());                                               </span>
<span class="3745953297761259324" onmouseenter="enter('3745953297761259324');" onmouseout="out('3745953297761259324');" style=""> 962         updateTagList();                                                                                 </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style=""> 963         mNote.save();                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 964     }                                                                                                    </span>
<span  style=""> 965                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 966     @Override                                                                                            </span>
<span class="-5110897291356760413" onmouseenter="enter('-5110897291356760413');" onmouseout="out('-5110897291356760413');" style=""> 967     public void beforeTextChanged(CharSequence charSequence, int i, int i2, int i3) {                    </span>
<span class="7490540504293754116" onmouseenter="enter('7490540504293754116');" onmouseout="out('7490540504293754116');" style=""> 968         // Unused                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 969     }                                                                                                    </span>
<span  style=""> 970                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 971     @Override                                                                                            </span>
<span class="-3169498224421089624" onmouseenter="enter('-3169498224421089624');" onmouseout="out('-3169498224421089624');" style=""> 972     public void afterTextChanged(Editable editable) {                                                    </span>
<span class="4641646211430236365" onmouseenter="enter('4641646211430236365');" onmouseout="out('4641646211430236365');" style=""> 973         attemptAutoList(editable);                                                                       </span>
<span class="7005237563799171506" onmouseenter="enter('7005237563799171506');" onmouseout="out('7005237563799171506');" style=""> 974         setTitleSpan(editable);                                                                          </span>
<span class="-7817145757567347170" onmouseenter="enter('-7817145757567347170');" onmouseout="out('-7817145757567347170');" style=""> 975         mContentEditText.fixLineSpacing();                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 976     }                                                                                                    </span>
<span  style=""> 977                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 978     @Override                                                                                            </span>
<span class="-6004971105578563950" onmouseenter="enter('-6004971105578563950');" onmouseout="out('-6004971105578563950');" style=""> 979     public void onTextChanged(CharSequence charSequence, int start, int before, int count) {             </span>
<span class="2036741165452809133" onmouseenter="enter('2036741165452809133');" onmouseout="out('2036741165452809133');" style=""> 980         // When text changes, start timer that will fire after AUTOSAVE_DELAY_MILLIS passes              </span>
<span class="-2149096896161266035" onmouseenter="enter('-2149096896161266035');" onmouseout="out('-2149096896161266035');" style=""> 981         if (mAutoSaveHandler != null) {                                                                  </span>
<span class="-5465787548318672754" onmouseenter="enter('-5465787548318672754');" onmouseout="out('-5465787548318672754');" style=""> 982             mAutoSaveHandler.removeCallbacks(mAutoSaveRunnable);                                         </span>
<span class="3237260668993885548" onmouseenter="enter('3237260668993885548');" onmouseout="out('3237260668993885548');" style=""> 983             mAutoSaveHandler.postDelayed(mAutoSaveRunnable, AUTOSAVE_DELAY_MILLIS);                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 984         }                                                                                                </span>
<span  style=""> 985                                                                                                          </span>
<span class="5409551732025834677" onmouseenter="enter('5409551732025834677');" onmouseout="out('5409551732025834677');" style=""> 986         // Remove search highlight spans when note content changes                                       </span>
<span class="5721815250190525804" onmouseenter="enter('5721815250190525804');" onmouseout="out('5721815250190525804');" style=""> 987         if (mMatchOffsets != null) {                                                                     </span>
<span class="-5254682256162211718" onmouseenter="enter('-5254682256162211718');" onmouseout="out('-5254682256162211718');" style=""> 988             mMatchOffsets = null;                                                                        </span>
<span class="2930846742809702691" onmouseenter="enter('2930846742809702691');" onmouseout="out('2930846742809702691');" style=""> 989             mHighlighter.removeMatches();                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 990         }                                                                                                </span>
<span  style=""> 991                                                                                                          </span>
<span class="-5025193748599864334" onmouseenter="enter('-5025193748599864334');" onmouseout="out('-5025193748599864334');" style=""> 992         if (!DisplayUtils.isLargeScreenLandscape(requireContext())) {                                    </span>
<span class="7215698034791320296" onmouseenter="enter('7215698034791320296');" onmouseout="out('7215698034791320296');" style=""> 993             ((NoteEditorActivity) requireActivity()).setSearchMatchBarVisible(false);                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 994         }                                                                                                </span>
<span  style=""> 995                                                                                                          </span>
<span class="8786270533737299967" onmouseenter="enter('8786270533737299967');" onmouseout="out('8786270533737299967');" style=""> 996         // Temporarily remove the text watcher as we process checklists to prevent callback looping      </span>
<span class="2095720317794995897" onmouseenter="enter('2095720317794995897');" onmouseout="out('2095720317794995897');" style=""> 997         mContentEditText.removeTextChangedListener(this);                                                </span>
<span class="-5644737892245114659" onmouseenter="enter('-5644737892245114659');" onmouseout="out('-5644737892245114659');" style=""> 998         mContentEditText.processChecklists();                                                            </span>
<span class="8154880790715077967" onmouseenter="enter('8154880790715077967');" onmouseout="out('8154880790715077967');" style=""> 999         mContentEditText.addTextChangedListener(this);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1000     }                                                                                                    </span>
<span  style="">1001                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1002     /**                                                                                                  </span>
<span class="-6594088544842821458" onmouseenter="enter('-6594088544842821458');" onmouseout="out('-6594088544842821458');" style="">1003      * Set the note title to be a larger size and bold style.                                            </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1004      *                                                                                                   </span>
<span class="108828526699167208" onmouseenter="enter('108828526699167208');" onmouseout="out('108828526699167208');" style="">1005      * Remove all existing spans before applying spans or performance issues will occur.  Since both     </span>
<span class="-1228016533055730748" onmouseenter="enter('-1228016533055730748');" onmouseout="out('-1228016533055730748');" style="">1006      * {@link RelativeSizeSpan} and {@link StyleSpan} inherit from {@link MetricAffectingSpan}, all      </span>
<span class="7893653129030957545" onmouseenter="enter('7893653129030957545');" onmouseout="out('7893653129030957545');" style="">1007      * spans are removed when {@link MetricAffectingSpan} is removed.                                    </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1008      */                                                                                                  </span>
<span class="6849776144692122373" onmouseenter="enter('6849776144692122373');" onmouseout="out('6849776144692122373');" style="">1009     private void setTitleSpan(Editable editable) {                                                       </span>
<span class="-8681644249984288865" onmouseenter="enter('-8681644249984288865');" onmouseout="out('-8681644249984288865');" style=""><abbr title="1010         for (MetricAffectingSpan span : editable.getSpans(0, editable.length(), MetricAffectingSpan.class)) {">1010         for (MetricAffectingSpan span : editable.getSpans(0, editable.length(), MetricAffectingSpan.class🔵</abbr></span>
<span class="3876289346053092432" onmouseenter="enter('3876289346053092432');" onmouseout="out('3876289346053092432');" style="">1011             if (span instanceof RelativeSizeSpan || span instanceof StyleSpan) {                         </span>
<span class="-4538099325482792099" onmouseenter="enter('-4538099325482792099');" onmouseout="out('-4538099325482792099');" style="">1012                 editable.removeSpan(span);                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1013             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1014         }                                                                                                </span>
<span  style="">1015                                                                                                          </span>
<span class="-901734861574280266" onmouseenter="enter('-901734861574280266');" onmouseout="out('-901734861574280266');" style="">1016         int newLinePosition = getNoteContentString().indexOf(&quot;\n&quot;);                                      </span>
<span  style="">1017                                                                                                          </span>
<span class="-3049917029530340718" onmouseenter="enter('-3049917029530340718');" onmouseout="out('-3049917029530340718');" style="">1018         if (newLinePosition == 0) {                                                                      </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1019             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1020         }                                                                                                </span>
<span  style="">1021                                                                                                          </span>
<span class="2729500347175780141" onmouseenter="enter('2729500347175780141');" onmouseout="out('2729500347175780141');" style="">1022         int titleEndPosition = (newLinePosition &gt; 0) ? newLinePosition : editable.length();              </span>
<span class="2132700250735486844" onmouseenter="enter('2132700250735486844');" onmouseout="out('2132700250735486844');" style=""><abbr title="1023         editable.setSpan(new RelativeSizeSpan(1.3f), 0, titleEndPosition, Spanned.SPAN_INCLUSIVE_EXCLUSIVE);">1023         editable.setSpan(new RelativeSizeSpan(1.3f), 0, titleEndPosition, Spanned.SPAN_INCLUSIVE_EXCLUSIV🔵</abbr></span>
<span class="2779153330581394975" onmouseenter="enter('2779153330581394975');" onmouseout="out('2779153330581394975');" style=""><abbr title="1024         editable.setSpan(new StyleSpan(Typeface.BOLD), 0, titleEndPosition, Spanned.SPAN_INCLUSIVE_EXCLUSIVE);">1024         editable.setSpan(new StyleSpan(Typeface.BOLD), 0, titleEndPosition, Spanned.SPAN_INCLUSIVE_EXCLUS🔵</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1025     }                                                                                                    </span>
<span  style="">1026                                                                                                          </span>
<span class="8395667075038215241" onmouseenter="enter('8395667075038215241');" onmouseout="out('8395667075038215241');" style="">1027     private void attemptAutoList(Editable editable) {                                                    </span>
<span class="1630313539519665774" onmouseenter="enter('1630313539519665774');" onmouseout="out('1630313539519665774');" style="">1028         int oldCursorPosition = mCurrentCursorPosition;                                                  </span>
<span class="2154628209294087333" onmouseenter="enter('2154628209294087333');" onmouseout="out('2154628209294087333');" style="">1029         mCurrentCursorPosition = mContentEditText.getSelectionStart();                                   </span>
<span class="-1456162723219098064" onmouseenter="enter('-1456162723219098064');" onmouseout="out('-1456162723219098064');" style="">1030         AutoBullet.apply(editable, oldCursorPosition, mCurrentCursorPosition);                           </span>
<span class="2154628209294087333" onmouseenter="enter('2154628209294087333');" onmouseout="out('2154628209294087333');" style="">1031         mCurrentCursorPosition = mContentEditText.getSelectionStart();                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1032     }                                                                                                    </span>
<span  style="">1033                                                                                                          </span>
<span class="-6933317077070028336" onmouseenter="enter('-6933317077070028336');" onmouseout="out('-6933317077070028336');" style="">1034     private void saveAndSyncNote() {                                                                     </span>
<span class="-6566957513776356959" onmouseenter="enter('-6566957513776356959');" onmouseout="out('-6566957513776356959');" style="">1035         if (mNote == null) {                                                                             </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1036             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1037         }                                                                                                </span>
<span  style="">1038                                                                                                          </span>
<span class="1712554612672119113" onmouseenter="enter('1712554612672119113');" onmouseout="out('1712554612672119113');" style="">1039         AppLog.add(                                                                                      </span>
<span class="5578246801297368785" onmouseenter="enter('5578246801297368785');" onmouseout="out('5578246801297368785');" style="">1040             Type.ACTION,                                                                                 </span>
<span class="5428018773251277804" onmouseenter="enter('5428018773251277804');" onmouseout="out('5428018773251277804');" style="">1041             &quot;Edited note (ID: &quot; + mNote.getSimperiumKey() +                                              </span>
<span class="7932348859464220053" onmouseenter="enter('7932348859464220053');" onmouseout="out('7932348859464220053');" style="">1042                 &quot; / Title: &quot; + mNote.getTitle() +                                                        </span>
<span class="8952698626932118067" onmouseenter="enter('8952698626932118067');" onmouseout="out('8952698626932118067');" style="">1043                 &quot; / Characters: &quot; + NoteUtils.getCharactersCount(mNote.getContent()) +                   </span>
<span class="638163407399296951" onmouseenter="enter('638163407399296951');" onmouseout="out('638163407399296951');" style="">1044                 &quot; / Words: &quot; + NoteUtils.getWordCount(mNote.getContent()) + &quot;)&quot;                          </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">1045         );                                                                                               </span>
<span class="16839101082915315" onmouseenter="enter('16839101082915315');" onmouseout="out('16839101082915315');" style="">1046         new SaveNoteTask(this).executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR);                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1047     }                                                                                                    </span>
<span  style="">1048                                                                                                          </span>
<span class="-710883025591886987" onmouseenter="enter('-710883025591886987');" onmouseout="out('-710883025591886987');" style="">1049     public boolean isPlaceholderVisible() {                                                              </span>
<span class="-4989874178895443572" onmouseenter="enter('-4989874178895443572');" onmouseout="out('-4989874178895443572');" style="">1050         if (mPlaceholderView != null) {                                                                  </span>
<span class="9146837192541101428" onmouseenter="enter('9146837192541101428');" onmouseout="out('9146837192541101428');" style="">1051             return mPlaceholderView.getVisibility() == View.VISIBLE;                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1052         } else {                                                                                         </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1053             return false;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1054         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1055     }                                                                                                    </span>
<span  style="">1056                                                                                                          </span>
<span class="-4564004023547017377" onmouseenter="enter('-4564004023547017377');" onmouseout="out('-4564004023547017377');" style="">1057     public void setPlaceholderVisible(boolean isVisible) {                                               </span>
<span class="-6467031518050872536" onmouseenter="enter('-6467031518050872536');" onmouseout="out('-6467031518050872536');" style="">1058         if (isVisible) {                                                                                 </span>
<span class="1687907534970456445" onmouseenter="enter('1687907534970456445');" onmouseout="out('1687907534970456445');" style="">1059             mNote = null;                                                                                </span>
<span class="-3407359796970873837" onmouseenter="enter('-3407359796970873837');" onmouseout="out('-3407359796970873837');" style="">1060             mContentEditText.setText(&quot;&quot;);                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1061         }                                                                                                </span>
<span  style="">1062                                                                                                          </span>
<span class="-4989874178895443572" onmouseenter="enter('-4989874178895443572');" onmouseout="out('-4989874178895443572');" style="">1063         if (mPlaceholderView != null) {                                                                  </span>
<span class="-1939399638656140532" onmouseenter="enter('-1939399638656140532');" onmouseout="out('-1939399638656140532');" style="">1064             mPlaceholderView.setVisibility(isVisible ? View.VISIBLE : View.GONE);                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1065         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1066     }                                                                                                    </span>
<span  style="">1067                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1068     @Override                                                                                            </span>
<span class="-3315120631467309087" onmouseenter="enter('-3315120631467309087');" onmouseout="out('-3315120631467309087');" style="">1069     public void onFocusChange(View v, boolean hasFocus) {                                                </span>
<span class="-6285712256166584728" onmouseenter="enter('-6285712256166584728');" onmouseout="out('-6285712256166584728');" style="">1070         if (!hasFocus) {                                                                                 </span>
<span class="6004881889903239201" onmouseenter="enter('6004881889903239201');" onmouseout="out('6004881889903239201');" style="">1071             String tags = getNoteTagsString().trim();                                                    </span>
<span  style="">1072                                                                                                          </span>
<span class="-8405816820067798370" onmouseenter="enter('-8405816820067798370');" onmouseout="out('-8405816820067798370');" style="">1073             if (mTagInput.getText().toString().trim().length() &gt; 0                                       </span>
<span class="-3023921947470011218" onmouseenter="enter('-3023921947470011218');" onmouseout="out('-3023921947470011218');" style="">1074                 &amp;&amp; TagUtils.hashTagValid(mTagInput.getText().toString().trim())) {                       </span>
<span class="-8826289385438230332" onmouseenter="enter('-8826289385438230332');" onmouseout="out('-8826289385438230332');" style="">1075                 onTagAdded(mTagInput.getText().toString());                                              </span>
<span class="-2106738445799932691" onmouseenter="enter('-2106738445799932691');" onmouseout="out('-2106738445799932691');" style="">1076             } else if (tags.length() &gt; 0) {                                                              </span>
<span class="822236618440501069" onmouseenter="enter('822236618440501069');" onmouseout="out('822236618440501069');" style="">1077                 setChips(tags);                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1078             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1079         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1080     }                                                                                                    </span>
<span  style="">1081                                                                                                          </span>
<span class="4758115017921537055" onmouseenter="enter('4758115017921537055');" onmouseout="out('4758115017921537055');" style="">1082     private Note getNote() {                                                                             </span>
<span class="6687317620803594982" onmouseenter="enter('6687317620803594982');" onmouseout="out('6687317620803594982');" style="">1083         return mNote;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1084     }                                                                                                    </span>
<span  style="">1085                                                                                                          </span>
<span class="627621646474661739" onmouseenter="enter('627621646474661739');" onmouseout="out('627621646474661739');" style="">1086     public void setNote(String noteID) {                                                                 </span>
<span class="-6972394152055286124" onmouseenter="enter('-6972394152055286124');" onmouseout="out('-6972394152055286124');" style="">1087         setNote(noteID, null);                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1088     }                                                                                                    </span>
<span  style="">1089                                                                                                          </span>
<span class="-260751237439499239" onmouseenter="enter('-260751237439499239');" onmouseout="out('-260751237439499239');" style="">1090     private String getNoteContentString() {                                                              </span>
<span class="-8451380960236704581" onmouseenter="enter('-8451380960236704581');" onmouseout="out('-8451380960236704581');" style="">1091         if (mContentEditText == null || mContentEditText.getText() == null) {                            </span>
<span class="-8289946804601166879" onmouseenter="enter('-8289946804601166879');" onmouseout="out('-8289946804601166879');" style="">1092             return &quot;&quot;;                                                                                   </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1093         } else {                                                                                         </span>
<span class="9069870454824528783" onmouseenter="enter('9069870454824528783');" onmouseout="out('9069870454824528783');" style="">1094             return mContentEditText.getText().toString();                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1095         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1096     }                                                                                                    </span>
<span  style="">1097                                                                                                          </span>
<span class="1791713131652036535" onmouseenter="enter('1791713131652036535');" onmouseout="out('1791713131652036535');" style="">1098     private String getNoteTagsString() {                                                                 </span>
<span class="-6446890674263139592" onmouseenter="enter('-6446890674263139592');" onmouseout="out('-6446890674263139592');" style="">1099         StringBuilder tags = new StringBuilder();                                                        </span>
<span  style="">1100                                                                                                          </span>
<span class="-4475001311202686832" onmouseenter="enter('-4475001311202686832');" onmouseout="out('-4475001311202686832');" style="">1101         for (int i= 0; i &lt; mTagChips.getChildCount(); i++) {                                             </span>
<span class="5232521310381718252" onmouseenter="enter('5232521310381718252');" onmouseout="out('5232521310381718252');" style="">1102             tags.append(((Chip) mTagChips.getChildAt(i)).getText()).append(&quot; &quot;);                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1103         }                                                                                                </span>
<span  style="">1104                                                                                                          </span>
<span class="-8755942361109275249" onmouseenter="enter('-8755942361109275249');" onmouseout="out('-8755942361109275249');" style="">1105         return tags.toString();                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1106     }                                                                                                    </span>
<span  style="">1107                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1108     /**                                                                                                  </span>
<span class="-7590765322671442969" onmouseenter="enter('-7590765322671442969');" onmouseout="out('-7590765322671442969');" style="">1109      * Share bottom sheet callbacks                                                                      </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1110      */                                                                                                  </span>
<span  style="">1111                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1112     @Override                                                                                            </span>
<span class="2968602784493438427" onmouseenter="enter('2968602784493438427');" onmouseout="out('2968602784493438427');" style="">1113     public void onSharePublishClicked() {                                                                </span>
<span class="7985358866333072123" onmouseenter="enter('7985358866333072123');" onmouseout="out('7985358866333072123');" style="">1114         publishNote();                                                                                   </span>
<span class="4172821335322908069" onmouseenter="enter('4172821335322908069');" onmouseout="out('4172821335322908069');" style="">1115         if (mShareBottomSheet != null) {                                                                 </span>
<span class="-4836834074376612243" onmouseenter="enter('-4836834074376612243');" onmouseout="out('-4836834074376612243');" style="">1116             mShareBottomSheet.dismiss();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1117         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1118     }                                                                                                    </span>
<span  style="">1119                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1120     @Override                                                                                            </span>
<span class="2232780665187036053" onmouseenter="enter('2232780665187036053');" onmouseout="out('2232780665187036053');" style="">1121     public void onShareUnpublishClicked() {                                                              </span>
<span class="4812123925634099655" onmouseenter="enter('4812123925634099655');" onmouseout="out('4812123925634099655');" style="">1122         unpublishNote();                                                                                 </span>
<span class="4172821335322908069" onmouseenter="enter('4172821335322908069');" onmouseout="out('4172821335322908069');" style="">1123         if (mShareBottomSheet != null) {                                                                 </span>
<span class="-4836834074376612243" onmouseenter="enter('-4836834074376612243');" onmouseout="out('-4836834074376612243');" style="">1124             mShareBottomSheet.dismiss();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1125         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1126     }                                                                                                    </span>
<span  style="">1127                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1128     @Override                                                                                            </span>
<span class="1895662807531612039" onmouseenter="enter('1895662807531612039');" onmouseout="out('1895662807531612039');" style="">1129     public void onWordPressPostClicked() {                                                               </span>
<span class="4172821335322908069" onmouseenter="enter('4172821335322908069');" onmouseout="out('4172821335322908069');" style="">1130         if (mShareBottomSheet != null) {                                                                 </span>
<span class="-4836834074376612243" onmouseenter="enter('-4836834074376612243');" onmouseout="out('-4836834074376612243');" style="">1131             mShareBottomSheet.dismiss();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1132         }                                                                                                </span>
<span  style="">1133                                                                                                          </span>
<span class="3314881699989820063" onmouseenter="enter('3314881699989820063');" onmouseout="out('3314881699989820063');" style="">1134         if (getFragmentManager() == null) {                                                              </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1135             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1136         }                                                                                                </span>
<span  style="">1137                                                                                                          </span>
<span class="5636539351844670959" onmouseenter="enter('5636539351844670959');" onmouseout="out('5636539351844670959');" style="">1138         FragmentTransaction ft = getFragmentManager().beginTransaction();                                </span>
<span class="-500976049723048206" onmouseenter="enter('-500976049723048206');" onmouseout="out('-500976049723048206');" style="">1139         Fragment prev = getFragmentManager().findFragmentByTag(WordPressDialogFragment.DIALOG_TAG);      </span>
<span class="6915708381430486628" onmouseenter="enter('6915708381430486628');" onmouseout="out('6915708381430486628');" style="">1140         if (prev != null) {                                                                              </span>
<span class="6191551415319260668" onmouseenter="enter('6191551415319260668');" onmouseout="out('6191551415319260668');" style="">1141             ft.remove(prev);                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1142         }                                                                                                </span>
<span class="4313436897323820694" onmouseenter="enter('4313436897323820694');" onmouseout="out('4313436897323820694');" style="">1143         ft.addToBackStack(null);                                                                         </span>
<span  style="">1144                                                                                                          </span>
<span class="-5506082590725208104" onmouseenter="enter('-5506082590725208104');" onmouseout="out('-5506082590725208104');" style="">1145         // Create and show the dialog.                                                                   </span>
<span class="1756820858117205319" onmouseenter="enter('1756820858117205319');" onmouseout="out('1756820858117205319');" style="">1146         WordPressDialogFragment wpDialogFragment = new WordPressDialogFragment();                        </span>
<span class="8550268343842317092" onmouseenter="enter('8550268343842317092');" onmouseout="out('8550268343842317092');" style="">1147         wpDialogFragment.setNote(mNote);                                                                 </span>
<span class="-7041960731203586914" onmouseenter="enter('-7041960731203586914');" onmouseout="out('-7041960731203586914');" style="">1148         wpDialogFragment.show(ft, WordPressDialogFragment.DIALOG_TAG);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1149     }                                                                                                    </span>
<span  style="">1150                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1151     @Override                                                                                            </span>
<span class="8390280653962331927" onmouseenter="enter('8390280653962331927');" onmouseout="out('8390280653962331927');" style="">1152     public void onShareCollaborateClicked() {                                                            </span>
<span class="8508848920358466816" onmouseenter="enter('8508848920358466816');" onmouseout="out('8508848920358466816');" style="">1153         Toast.makeText(getActivity(), R.string.collaborate_message, Toast.LENGTH_LONG).show();           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1154     }                                                                                                    </span>
<span  style="">1155                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1156     @Override                                                                                            </span>
<span class="-3569494199320067069" onmouseenter="enter('-3569494199320067069');" onmouseout="out('-3569494199320067069');" style="">1157     public void onShareDismissed() {                                                                     </span>
<span  style="">1158                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1159     }                                                                                                    </span>
<span  style="">1160                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1161     /**                                                                                                  </span>
<span class="358915473298384679" onmouseenter="enter('358915473298384679');" onmouseout="out('358915473298384679');" style="">1162      * History bottom sheet listeners                                                                    </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1163      */                                                                                                  </span>
<span  style="">1164                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1165     @Override                                                                                            </span>
<span class="486589109199450506" onmouseenter="enter('486589109199450506');" onmouseout="out('486589109199450506');" style="">1166     public void onHistoryCancelClicked() {                                                               </span>
<span class="4148799213240179760" onmouseenter="enter('4148799213240179760');" onmouseout="out('4148799213240179760');" style="">1167         mContentEditText.setText(mNote.getContent());                                                    </span>
<span class="-7542139914053196629" onmouseenter="enter('-7542139914053196629');" onmouseout="out('-7542139914053196629');" style="">1168         if (mHistoryBottomSheet != null) {                                                               </span>
<span class="-2599981510781765889" onmouseenter="enter('-2599981510781765889');" onmouseout="out('-2599981510781765889');" style="">1169             mHistoryBottomSheet.dismiss();                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1170         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1171     }                                                                                                    </span>
<span  style="">1172                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1173     @Override                                                                                            </span>
<span class="1746452780349475726" onmouseenter="enter('1746452780349475726');" onmouseout="out('1746452780349475726');" style="">1174     public void onHistoryRestoreClicked() {                                                              </span>
<span class="-7542139914053196629" onmouseenter="enter('-7542139914053196629');" onmouseout="out('-7542139914053196629');" style="">1175         if (mHistoryBottomSheet != null) {                                                               </span>
<span class="-2599981510781765889" onmouseenter="enter('-2599981510781765889');" onmouseout="out('-2599981510781765889');" style="">1176             mHistoryBottomSheet.dismiss();                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1177         }                                                                                                </span>
<span class="-2186856349666885424" onmouseenter="enter('-2186856349666885424');" onmouseout="out('-2186856349666885424');" style="">1178         saveAndSyncNote();                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1179     }                                                                                                    </span>
<span  style="">1180                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1181     @Override                                                                                            </span>
<span class="-1766878417892030172" onmouseenter="enter('-1766878417892030172');" onmouseout="out('-1766878417892030172');" style="">1182     public void onHistoryDismissed() {                                                                   </span>
<span class="7350001942179054285" onmouseenter="enter('7350001942179054285');" onmouseout="out('7350001942179054285');" style="">1183         if (!mHistoryBottomSheet.didTapOnButton()) {                                                     </span>
<span class="4148799213240179760" onmouseenter="enter('4148799213240179760');" onmouseout="out('4148799213240179760');" style="">1184             mContentEditText.setText(mNote.getContent());                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1185         }                                                                                                </span>
<span  style="">1186                                                                                                          </span>
<span class="16247739636052398" onmouseenter="enter('16247739636052398');" onmouseout="out('16247739636052398');" style="">1187         if (mHistoryTimeoutHandler != null) {                                                            </span>
<span class="7316258928910882956" onmouseenter="enter('7316258928910882956');" onmouseout="out('7316258928910882956');" style="">1188             mHistoryTimeoutHandler.removeCallbacks(mHistoryTimeoutRunnable);                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1189         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1190     }                                                                                                    </span>
<span  style="">1191                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1192     @Override                                                                                            </span>
<span class="6142431680500084708" onmouseenter="enter('6142431680500084708');" onmouseout="out('6142431680500084708');" style="">1193     public void onHistoryUpdateNote(String content) {                                                    </span>
<span class="5474545381550473491" onmouseenter="enter('5474545381550473491');" onmouseout="out('5474545381550473491');" style="">1194         mContentEditText.setText(content);                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1195     }                                                                                                    </span>
<span  style="">1196                                                                                                          </span>
<span class="-2294831155573525866" onmouseenter="enter('-2294831155573525866');" onmouseout="out('-2294831155573525866');" style="">1197     private void saveNote() {                                                                            </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1198         try {                                                                                            </span>
<span class="1165974910453313736" onmouseenter="enter('1165974910453313736');" onmouseout="out('1165974910453313736');" style="">1199             if (mNote == null || mNotesBucket == null || mContentEditText == null || mIsLoadingNote ||   </span>
<span class="-8027031690448598107" onmouseenter="enter('-8027031690448598107');" onmouseout="out('-8027031690448598107');" style=""><abbr title="1200                 (mHistoryBottomSheet != null &amp;&amp; mHistoryBottomSheet.getDialog() != null &amp;&amp; mHistoryBottomSheet.getDialog().isShowing())) {">1200                 (mHistoryBottomSheet != null &amp;&amp; mHistoryBottomSheet.getDialog() != null &amp;&amp; mHistoryBottom🔵</abbr></span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1201                 return;                                                                                  </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1202             } else {                                                                                     </span>
<span class="-1125588719504868669" onmouseenter="enter('-1125588719504868669');" onmouseout="out('-1125588719504868669');" style="">1203                 mNote = mNotesBucket.get(mNote.getSimperiumKey());                                       </span>
<span class="8897386780031316770" onmouseenter="enter('8897386780031316770');" onmouseout="out('8897386780031316770');" style="">1204                 mIsPreviewEnabled = mNote.isPreviewEnabled();                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1205             }                                                                                            </span>
<span  style="">1206                                                                                                          </span>
<span class="6475969200315240778" onmouseenter="enter('6475969200315240778');" onmouseout="out('6475969200315240778');" style="">1207             String content = mContentEditText.getPlainTextContent();                                     </span>
<span class="-8502490389039341280" onmouseenter="enter('-8502490389039341280');" onmouseout="out('-8502490389039341280');" style="">1208             String tagString = getNoteTagsString();                                                      </span>
<span  style="">1209                                                                                                          </span>
<span class="3350877423550460602" onmouseenter="enter('3350877423550460602');" onmouseout="out('3350877423550460602');" style=""><abbr title="1210             if (mNote.hasChanges(content, tagString.trim(), mNote.isPinned(), mIsMarkdownEnabled, mIsPreviewEnabled)) {">1210             if (mNote.hasChanges(content, tagString.trim(), mNote.isPinned(), mIsMarkdownEnabled, mIsPrev🔵</abbr></span>
<span class="843504871988910810" onmouseenter="enter('843504871988910810');" onmouseout="out('843504871988910810');" style="">1211                 mNote.setContent(content);                                                               </span>
<span class="1553130968631643861" onmouseenter="enter('1553130968631643861');" onmouseout="out('1553130968631643861');" style="">1212                 mNote.setTagString(tagString);                                                           </span>
<span class="-3343075472306200704" onmouseenter="enter('-3343075472306200704');" onmouseout="out('-3343075472306200704');" style="">1213                 mNote.setModificationDate(Calendar.getInstance());                                       </span>
<span class="-2172998267651300967" onmouseenter="enter('-2172998267651300967');" onmouseout="out('-2172998267651300967');" style="">1214                 mNote.setMarkdownEnabled(mIsMarkdownEnabled);                                            </span>
<span class="822592535093481459" onmouseenter="enter('822592535093481459');" onmouseout="out('822592535093481459');" style="">1215                 mNote.setPreviewEnabled(mIsPreviewEnabled);                                              </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style="">1216                 mNote.save();                                                                            </span>
<span  style="">1217                                                                                                          </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style="">1218                 AnalyticsTracker.track(                                                                  </span>
<span class="5989088647015258106" onmouseenter="enter('5989088647015258106');" onmouseout="out('5989088647015258106');" style="">1219                     EDITOR_NOTE_EDITED,                                                                  </span>
<span class="-2430475172570880083" onmouseenter="enter('-2430475172570880083');" onmouseout="out('-2430475172570880083');" style="">1220                     CATEGORY_NOTE,                                                                       </span>
<span class="7262276752106887505" onmouseenter="enter('7262276752106887505');" onmouseout="out('7262276752106887505');" style="">1221                     &quot;editor_save&quot;                                                                        </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">1222                 );                                                                                       </span>
<span  style="">1223                                                                                                          </span>
<span class="1712554612672119113" onmouseenter="enter('1712554612672119113');" onmouseout="out('1712554612672119113');" style="">1224                 AppLog.add(                                                                              </span>
<span class="5387827170384214934" onmouseenter="enter('5387827170384214934');" onmouseout="out('5387827170384214934');" style="">1225                     Type.SYNC,                                                                           </span>
<span class="6067618927567422040" onmouseenter="enter('6067618927567422040');" onmouseout="out('6067618927567422040');" style="">1226                     &quot;Saved note locally in NoteEditorFragment (ID: &quot; + mNote.getSimperiumKey() +         </span>
<span class="7932348859464220053" onmouseenter="enter('7932348859464220053');" onmouseout="out('7932348859464220053');" style="">1227                         &quot; / Title: &quot; + mNote.getTitle() +                                                </span>
<span class="431319751787505650" onmouseenter="enter('431319751787505650');" onmouseout="out('431319751787505650');" style="">1228                         &quot; / Characters: &quot; + NoteUtils.getCharactersCount(content) +                      </span>
<span class="-6931859245270948040" onmouseenter="enter('-6931859245270948040');" onmouseout="out('-6931859245270948040');" style="">1229                         &quot; / Words: &quot; + NoteUtils.getWordCount(content) + &quot;)&quot;                             </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">1230                 );                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1231             }                                                                                            </span>
<span class="-3643940737031631548" onmouseenter="enter('-3643940737031631548');" onmouseout="out('-3643940737031631548');" style="">1232         } catch (BucketObjectMissingException exception) {                                               </span>
<span class="-5036816163125879973" onmouseenter="enter('-5036816163125879973');" onmouseout="out('-5036816163125879973');" style="">1233             exception.printStackTrace();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1234         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1235     }                                                                                                    </span>
<span  style="">1236                                                                                                          </span>
<span class="-6769383367293074987" onmouseenter="enter('-6769383367293074987');" onmouseout="out('-6769383367293074987');" style="">1237     // Checks if cursor is at a URL when the selection changes                                           </span>
<span class="499820509706145242" onmouseenter="enter('499820509706145242');" onmouseout="out('499820509706145242');" style="">1238     // If it is a URL, show the contextual action bar                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1239     @Override                                                                                            </span>
<span class="-6619706727651867065" onmouseenter="enter('-6619706727651867065');" onmouseout="out('-6619706727651867065');" style="">1240     public void onSelectionChanged(int selStart, int selEnd) {                                           </span>
<span class="7239443724625299771" onmouseenter="enter('7239443724625299771');" onmouseout="out('7239443724625299771');" style="">1241         mCurrentCursorPosition = selEnd;                                                                 </span>
<span class="-5773931921061181239" onmouseenter="enter('-5773931921061181239');" onmouseout="out('-5773931921061181239');" style="">1242         if (selStart == selEnd) {                                                                        </span>
<span class="-1073801886026856185" onmouseenter="enter('-1073801886026856185');" onmouseout="out('-1073801886026856185');" style="">1243             Editable noteContent = mContentEditText.getText();                                           </span>
<span class="-3728163105261704014" onmouseenter="enter('-3728163105261704014');" onmouseout="out('-3728163105261704014');" style="">1244             if (noteContent == null) {                                                                   </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1245                 return;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1246             }                                                                                            </span>
<span class="1258634593958745929" onmouseenter="enter('1258634593958745929');" onmouseout="out('1258634593958745929');" style="">1247             URLSpan[] urlSpans = noteContent.getSpans(selStart, selStart, URLSpan.class);                </span>
<span class="8265917182779455796" onmouseenter="enter('8265917182779455796');" onmouseout="out('8265917182779455796');" style="">1248             if (urlSpans.length &gt; 0) {                                                                   </span>
<span class="379938049561077801" onmouseenter="enter('379938049561077801');" onmouseout="out('379938049561077801');" style="">1249                 URLSpan urlSpan = urlSpans[0];                                                           </span>
<span class="7382553573082356877" onmouseenter="enter('7382553573082356877');" onmouseout="out('7382553573082356877');" style="">1250                 mLinkUrl = urlSpan.getURL();                                                             </span>
<span class="-2685141031372274993" onmouseenter="enter('-2685141031372274993');" onmouseout="out('-2685141031372274993');" style=""><abbr title="1251                 mLinkText = noteContent.subSequence(noteContent.getSpanStart(urlSpan), noteContent.getSpanEnd(urlSpan)).toString();">1251                 mLinkText = noteContent.subSequence(noteContent.getSpanStart(urlSpan), noteContent.getSpa🔵</abbr></span>
<span class="-1291529600191394909" onmouseenter="enter('-1291529600191394909');" onmouseout="out('-1291529600191394909');" style="">1252                 if (mActionMode != null) {                                                               </span>
<span class="8256553390773794578" onmouseenter="enter('8256553390773794578');" onmouseout="out('8256553390773794578');" style="">1253                     mActionMode.setSubtitle(mLinkText);                                                  </span>
<span class="-5782179795728005521" onmouseenter="enter('-5782179795728005521');" onmouseout="out('-5782179795728005521');" style="">1254                     updateMenuItems();                                                                   </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1255                     return;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1256                 }                                                                                        </span>
<span class="-4243988111679111503" onmouseenter="enter('-4243988111679111503');" onmouseout="out('-4243988111679111503');" style="">1257                 // Show the Contextual Action Bar                                                        </span>
<span class="4809573797151136036" onmouseenter="enter('4809573797151136036');" onmouseout="out('4809573797151136036');" style="">1258                 if (getActivity() != null) {                                                             </span>
<span class="1526821488869269623" onmouseenter="enter('1526821488869269623');" onmouseout="out('1526821488869269623');" style=""><abbr title="1259                     mActionMode = ((AppCompatActivity) (getActivity())).startSupportActionMode(mActionModeCallback);">1259                     mActionMode = ((AppCompatActivity) (getActivity())).startSupportActionMode(mActionMod🔵</abbr></span>
<span class="-1291529600191394909" onmouseenter="enter('-1291529600191394909');" onmouseout="out('-1291529600191394909');" style="">1260                     if (mActionMode != null) {                                                           </span>
<span class="8256553390773794578" onmouseenter="enter('8256553390773794578');" onmouseout="out('8256553390773794578');" style="">1261                         mActionMode.setSubtitle(mLinkText);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1262                     }                                                                                    </span>
<span class="-5782179795728005521" onmouseenter="enter('-5782179795728005521');" onmouseout="out('-5782179795728005521');" style="">1263                     updateMenuItems();                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1264                 }                                                                                        </span>
<span class="7515827566305000834" onmouseenter="enter('7515827566305000834');" onmouseout="out('7515827566305000834');" style="">1265             } else if (mActionMode != null) {                                                            </span>
<span class="7165201847947665807" onmouseenter="enter('7165201847947665807');" onmouseout="out('7165201847947665807');" style="">1266                 mActionMode.finish();                                                                    </span>
<span class="291405596407736607" onmouseenter="enter('291405596407736607');" onmouseout="out('291405596407736607');" style="">1267                 mActionMode = null;                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1268             }                                                                                            </span>
<span class="7515827566305000834" onmouseenter="enter('7515827566305000834');" onmouseout="out('7515827566305000834');" style="">1269         } else if (mActionMode != null) {                                                                </span>
<span class="7165201847947665807" onmouseenter="enter('7165201847947665807');" onmouseout="out('7165201847947665807');" style="">1270             mActionMode.finish();                                                                        </span>
<span class="291405596407736607" onmouseenter="enter('291405596407736607');" onmouseout="out('291405596407736607');" style="">1271             mActionMode = null;                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1272         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1273     }                                                                                                    </span>
<span  style="">1274                                                                                                          </span>
<span class="2270277682351720198" onmouseenter="enter('2270277682351720198');" onmouseout="out('2270277682351720198');" style="">1275     private void updateMenuItems() {                                                                     </span>
<span class="-515446486584282912" onmouseenter="enter('-515446486584282912');" onmouseout="out('-515446486584282912');" style="">1276         mCopyMenuItem.setIcon(mCopyIcon);                                                                </span>
<span class="773177223161240604" onmouseenter="enter('773177223161240604');" onmouseout="out('773177223161240604');" style="">1277         mShareMenuItem.setIcon(mShareIcon);                                                              </span>
<span class="-2925180578428897037" onmouseenter="enter('-2925180578428897037');" onmouseout="out('-2925180578428897037');" style="">1278         if ((mViewLinkMenuItem != null) &amp;&amp; (mLinkUrl != null)) {                                         </span>
<span class="7070835845876331574" onmouseenter="enter('7070835845876331574');" onmouseout="out('7070835845876331574');" style="">1279             if (mLinkUrl.startsWith(&quot;tel:&quot;)) {                                                           </span>
<span class="-3393709522714367611" onmouseenter="enter('-3393709522714367611');" onmouseout="out('-3393709522714367611');" style="">1280                 mViewLinkMenuItem.setIcon(mCallIcon);                                                    </span>
<span class="-1045706461125369539" onmouseenter="enter('-1045706461125369539');" onmouseout="out('-1045706461125369539');" style="">1281                 mViewLinkMenuItem.setTitle(getString(R.string.call));                                    </span>
<span class="-4087102511435152339" onmouseenter="enter('-4087102511435152339');" onmouseout="out('-4087102511435152339');" style="">1282             } else if (mLinkUrl.startsWith(&quot;mailto:&quot;)) {                                                 </span>
<span class="3689189789047011289" onmouseenter="enter('3689189789047011289');" onmouseout="out('3689189789047011289');" style="">1283                 mViewLinkMenuItem.setIcon(mEmailIcon);                                                   </span>
<span class="7417350135164215691" onmouseenter="enter('7417350135164215691');" onmouseout="out('7417350135164215691');" style="">1284                 mViewLinkMenuItem.setTitle(getString(R.string.email));                                   </span>
<span class="-1372170246346381865" onmouseenter="enter('-1372170246346381865');" onmouseout="out('-1372170246346381865');" style="">1285             } else if (mLinkUrl.startsWith(&quot;geo:&quot;)) {                                                    </span>
<span class="-4826865256995968603" onmouseenter="enter('-4826865256995968603');" onmouseout="out('-4826865256995968603');" style="">1286                 mViewLinkMenuItem.setIcon(mMapIcon);                                                     </span>
<span class="5018205442899714685" onmouseenter="enter('5018205442899714685');" onmouseout="out('5018205442899714685');" style="">1287                 mViewLinkMenuItem.setTitle(getString(R.string.view_map));                                </span>
<span class="217084746454652922" onmouseenter="enter('217084746454652922');" onmouseout="out('217084746454652922');" style="">1288             } else if (mLinkUrl.startsWith(SIMPLENOTE_LINK_PREFIX)) {                                    </span>
<span class="238390611676684376" onmouseenter="enter('238390611676684376');" onmouseout="out('238390611676684376');" style="">1289                 mViewLinkMenuItem.setIcon(mLinkIcon);                                                    </span>
<span class="-8064422576667643895" onmouseenter="enter('-8064422576667643895');" onmouseout="out('-8064422576667643895');" style="">1290                 mViewLinkMenuItem.setTitle(getString(R.string.open_note));                               </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1291             } else {                                                                                     </span>
<span class="7513617525800990773" onmouseenter="enter('7513617525800990773');" onmouseout="out('7513617525800990773');" style="">1292                 mViewLinkMenuItem.setIcon(mBrowserIcon);                                                 </span>
<span class="4171282647008223100" onmouseenter="enter('4171282647008223100');" onmouseout="out('4171282647008223100');" style="">1293                 mViewLinkMenuItem.setTitle(getString(R.string.view_in_browser));                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1294             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1295         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1296     }                                                                                                    </span>
<span  style="">1297                                                                                                          </span>
<span class="91579398727100136" onmouseenter="enter('91579398727100136');" onmouseout="out('91579398727100136');" style="">1298     private void setPublishedNote(boolean isPublished) {                                                 </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style="">1299         if (mNote != null) {                                                                             </span>
<span class="316653489117166649" onmouseenter="enter('316653489117166649');" onmouseout="out('316653489117166649');" style="">1300             mNote.setPublished(isPublished);                                                             </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style="">1301             mNote.save();                                                                                </span>
<span  style="">1302                                                                                                          </span>
<span class="3198515589608942377" onmouseenter="enter('3198515589608942377');" onmouseout="out('3198515589608942377');" style="">1303             // reset publish status in 20 seconds if we don&#x27;t hear back from Simperium                   </span>
<span class="-8751687465189974985" onmouseenter="enter('-8751687465189974985');" onmouseout="out('-8751687465189974985');" style="">1304             mPublishTimeoutHandler.postDelayed(mPublishTimeoutRunnable, PUBLISH_TIMEOUT);                </span>
<span  style="">1305                                                                                                          </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style="">1306             AnalyticsTracker.track(                                                                      </span>
<span class="1199660928845890452" onmouseenter="enter('1199660928845890452');" onmouseout="out('1199660928845890452');" style="">1307                 isPublished ? EDITOR_NOTE_PUBLISHED : EDITOR_NOTE_UNPUBLISHED,                           </span>
<span class="-2430475172570880083" onmouseenter="enter('-2430475172570880083');" onmouseout="out('-2430475172570880083');" style="">1308                 CATEGORY_NOTE,                                                                           </span>
<span class="-4469222051298874183" onmouseenter="enter('-4469222051298874183');" onmouseout="out('-4469222051298874183');" style="">1309                 &quot;publish_note_button&quot;                                                                    </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">1310             );                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1311         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1312     }                                                                                                    </span>
<span  style="">1313                                                                                                          </span>
<span class="-8415113329489780394" onmouseenter="enter('-8415113329489780394');" onmouseout="out('-8415113329489780394');" style="">1314     private void updatePublishedState(boolean isSuccess) {                                               </span>
<span class="7049673307523359848" onmouseenter="enter('7049673307523359848');" onmouseout="out('7049673307523359848');" style="">1315         if (mPublishingSnackbar == null) {                                                               </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1316             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1317         }                                                                                                </span>
<span class="-7291151504336992329" onmouseenter="enter('-7291151504336992329');" onmouseout="out('-7291151504336992329');" style="">1318         mPublishingSnackbar.dismiss();                                                                   </span>
<span class="-2275300557144928477" onmouseenter="enter('-2275300557144928477');" onmouseout="out('-2275300557144928477');" style="">1319         mPublishingSnackbar = null;                                                                      </span>
<span class="3311052756729554547" onmouseenter="enter('3311052756729554547');" onmouseout="out('3311052756729554547');" style="">1320         if (isSuccess &amp;&amp; isAdded()) {                                                                    </span>
<span class="-1365615346790030662" onmouseenter="enter('-1365615346790030662');" onmouseout="out('-1365615346790030662');" style="">1321             if (mNote.isPublished()) {                                                                   </span>
<span class="6931787349875723907" onmouseenter="enter('6931787349875723907');" onmouseout="out('6931787349875723907');" style="">1322                 @StringRes                                                                               </span>
<span class="-8305395674858987452" onmouseenter="enter('-8305395674858987452');" onmouseout="out('-8305395674858987452');" style="">1323                 int text;                                                                                </span>
<span class="8518441705934796822" onmouseenter="enter('8518441705934796822');" onmouseout="out('8518441705934796822');" style="">1324                 if (BrowserUtils.copyToClipboard(requireContext(), mNote.getPublishedUrl())) {           </span>
<span class="8974304534544855275" onmouseenter="enter('8974304534544855275');" onmouseout="out('8974304534544855275');" style="">1325                     text = R.string.publish_successful_link;                                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1326                 } else {                                                                                 </span>
<span class="-3232510055763324097" onmouseenter="enter('-3232510055763324097');" onmouseout="out('-3232510055763324097');" style="">1327                     text = R.string.publish_successful;                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1328                 }                                                                                        </span>
<span class="7461063035263331376" onmouseenter="enter('7461063035263331376');" onmouseout="out('7461063035263331376');" style="">1329                 if (mHideActionOnSuccess) {                                                              </span>
<span class="6757689242728251287" onmouseenter="enter('6757689242728251287');" onmouseout="out('6757689242728251287');" style="">1330                     Snackbar.make(mRootView, text, Snackbar.LENGTH_LONG).show();                         </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1331                 } else {                                                                                 </span>
<span class="-4550124972500945421" onmouseenter="enter('-4550124972500945421');" onmouseout="out('-4550124972500945421');" style=""><abbr title="1332                     Snackbar.make(mRootView, text, Snackbar.LENGTH_LONG).setAction(R.string.undo, new View.OnClickListener() {">1332                     Snackbar.make(mRootView, text, Snackbar.LENGTH_LONG).setAction(R.string.undo, new Vie🔵</abbr></span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1333                         @Override                                                                        </span>
<span class="-6587489291029443051" onmouseenter="enter('-6587489291029443051');" onmouseout="out('-6587489291029443051');" style="">1334                         public void onClick(View v) {                                                    </span>
<span class="-4312757058216662092" onmouseenter="enter('-4312757058216662092');" onmouseout="out('-4312757058216662092');" style="">1335                             mHideActionOnSuccess = true;                                                 </span>
<span class="4812123925634099655" onmouseenter="enter('4812123925634099655');" onmouseout="out('4812123925634099655');" style="">1336                             unpublishNote();                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1337                         }                                                                                </span>
<span class="-4345860548322303041" onmouseenter="enter('-4345860548322303041');" onmouseout="out('-4345860548322303041');" style="">1338                     }).show();                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1339                 }                                                                                        </span>
<span class="-3790430051689614068" onmouseenter="enter('-3790430051689614068');" onmouseout="out('-3790430051689614068');" style="">1340             } else if (mHideActionOnSuccess) {                                                           </span>
<span class="-3987684412384152113" onmouseenter="enter('-3987684412384152113');" onmouseout="out('-3987684412384152113');" style="">1341                 Snackbar.make(mRootView, R.string.unpublish_successful, Snackbar.LENGTH_LONG).show();    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1342             } else {                                                                                     </span>
<span class="7601439931758089790" onmouseenter="enter('7601439931758089790');" onmouseout="out('7601439931758089790');" style=""><abbr title="1343                 Snackbar.make(mRootView, R.string.unpublish_successful, Snackbar.LENGTH_LONG).setAction(R.string.undo, new View.OnClickListener() {">1343                 Snackbar.make(mRootView, R.string.unpublish_successful, Snackbar.LENGTH_LONG).setAction(R🔵</abbr></span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1344                     @Override                                                                            </span>
<span class="-6587489291029443051" onmouseenter="enter('-6587489291029443051');" onmouseout="out('-6587489291029443051');" style="">1345                     public void onClick(View v) {                                                        </span>
<span class="-4312757058216662092" onmouseenter="enter('-4312757058216662092');" onmouseout="out('-4312757058216662092');" style="">1346                         mHideActionOnSuccess = true;                                                     </span>
<span class="7985358866333072123" onmouseenter="enter('7985358866333072123');" onmouseout="out('7985358866333072123');" style="">1347                         publishNote();                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1348                     }                                                                                    </span>
<span class="-4345860548322303041" onmouseenter="enter('-4345860548322303041');" onmouseout="out('-4345860548322303041');" style="">1349                 }).show();                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1350             }                                                                                            </span>
<span class="4765506669760455758" onmouseenter="enter('4765506669760455758');" onmouseout="out('4765506669760455758');" style="">1351         } else if (mNote.isPublished()) {                                                                </span>
<span class="1560587261098083611" onmouseenter="enter('1560587261098083611');" onmouseout="out('1560587261098083611');" style=""><abbr title="1352             Snackbar.make(mRootView, R.string.unpublish_error, Snackbar.LENGTH_LONG).setAction(R.string.retry, new View.OnClickListener() {">1352             Snackbar.make(mRootView, R.string.unpublish_error, Snackbar.LENGTH_LONG).setAction(R.string.r🔵</abbr></span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1353                 @Override                                                                                </span>
<span class="-6587489291029443051" onmouseenter="enter('-6587489291029443051');" onmouseout="out('-6587489291029443051');" style="">1354                 public void onClick(View v) {                                                            </span>
<span class="-4312757058216662092" onmouseenter="enter('-4312757058216662092');" onmouseout="out('-4312757058216662092');" style="">1355                     mHideActionOnSuccess = true;                                                         </span>
<span class="4812123925634099655" onmouseenter="enter('4812123925634099655');" onmouseout="out('4812123925634099655');" style="">1356                     unpublishNote();                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1357                 }                                                                                        </span>
<span class="-4345860548322303041" onmouseenter="enter('-4345860548322303041');" onmouseout="out('-4345860548322303041');" style="">1358             }).show();                                                                                   </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1359         } else {                                                                                         </span>
<span class="-3203060346162978224" onmouseenter="enter('-3203060346162978224');" onmouseout="out('-3203060346162978224');" style=""><abbr title="1360             Snackbar.make(mRootView, R.string.publish_error, Snackbar.LENGTH_LONG).setAction(R.string.retry, new View.OnClickListener() {">1360             Snackbar.make(mRootView, R.string.publish_error, Snackbar.LENGTH_LONG).setAction(R.string.ret🔵</abbr></span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1361                 @Override                                                                                </span>
<span class="-6587489291029443051" onmouseenter="enter('-6587489291029443051');" onmouseout="out('-6587489291029443051');" style="">1362                 public void onClick(View v) {                                                            </span>
<span class="-4312757058216662092" onmouseenter="enter('-4312757058216662092');" onmouseout="out('-4312757058216662092');" style="">1363                     mHideActionOnSuccess = true;                                                         </span>
<span class="7985358866333072123" onmouseenter="enter('7985358866333072123');" onmouseout="out('7985358866333072123');" style="">1364                     publishNote();                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1365                 }                                                                                        </span>
<span class="-4345860548322303041" onmouseenter="enter('-4345860548322303041');" onmouseout="out('-4345860548322303041');" style="">1366             }).show();                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1367         }                                                                                                </span>
<span class="-6543205336186683580" onmouseenter="enter('-6543205336186683580');" onmouseout="out('-6543205336186683580');" style="">1368         mHideActionOnSuccess = false;                                                                    </span>
<span class="-8532471920650411447" onmouseenter="enter('-8532471920650411447');" onmouseout="out('-8532471920650411447');" style="">1369         requireActivity().invalidateOptionsMenu();                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1370     }                                                                                                    </span>
<span  style="">1371                                                                                                          </span>
<span class="6900416574659568584" onmouseenter="enter('6900416574659568584');" onmouseout="out('6900416574659568584');" style="">1372     private void publishNote() {                                                                         </span>
<span class="939688580551732431" onmouseenter="enter('939688580551732431');" onmouseout="out('939688580551732431');" style="">1373         if (!NetworkUtils.isNetworkAvailable(requireContext())) {                                        </span>
<span class="8924960461604916754" onmouseenter="enter('8924960461604916754');" onmouseout="out('8924960461604916754');" style="">1374             Toast.makeText(requireContext(), R.string.error_network_required, Toast.LENGTH_LONG).show(); </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1375             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1376         }                                                                                                </span>
<span  style="">1377                                                                                                          </span>
<span class="-7481427962806884462" onmouseenter="enter('-7481427962806884462');" onmouseout="out('-7481427962806884462');" style="">1378         if (isAdded()) {                                                                                 </span>
<span class="402944241808212646" onmouseenter="enter('402944241808212646');" onmouseout="out('402944241808212646');" style=""><abbr title="1379             mPublishingSnackbar = Snackbar.make(mRootView, R.string.publishing, Snackbar.LENGTH_INDEFINITE);">1379             mPublishingSnackbar = Snackbar.make(mRootView, R.string.publishing, Snackbar.LENGTH_INDEFINIT🔵</abbr></span>
<span class="-8074649539774450656" onmouseenter="enter('-8074649539774450656');" onmouseout="out('-8074649539774450656');" style="">1380             mPublishingSnackbar.show();                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1381         }                                                                                                </span>
<span  style="">1382                                                                                                          </span>
<span class="5480526116728317891" onmouseenter="enter('5480526116728317891');" onmouseout="out('5480526116728317891');" style="">1383         setPublishedNote(true);                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1384     }                                                                                                    </span>
<span  style="">1385                                                                                                          </span>
<span class="-8215923685018306170" onmouseenter="enter('-8215923685018306170');" onmouseout="out('-8215923685018306170');" style="">1386     private void unpublishNote() {                                                                       </span>
<span class="939688580551732431" onmouseenter="enter('939688580551732431');" onmouseout="out('939688580551732431');" style="">1387         if (!NetworkUtils.isNetworkAvailable(requireContext())) {                                        </span>
<span class="8924960461604916754" onmouseenter="enter('8924960461604916754');" onmouseout="out('8924960461604916754');" style="">1388             Toast.makeText(requireContext(), R.string.error_network_required, Toast.LENGTH_LONG).show(); </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1389             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1390         }                                                                                                </span>
<span  style="">1391                                                                                                          </span>
<span class="-7481427962806884462" onmouseenter="enter('-7481427962806884462');" onmouseout="out('-7481427962806884462');" style="">1392         if (isAdded()) {                                                                                 </span>
<span class="-5849073483621593387" onmouseenter="enter('-5849073483621593387');" onmouseout="out('-5849073483621593387');" style=""><abbr title="1393             mPublishingSnackbar = Snackbar.make(mRootView, R.string.unpublishing, Snackbar.LENGTH_INDEFINITE);">1393             mPublishingSnackbar = Snackbar.make(mRootView, R.string.unpublishing, Snackbar.LENGTH_INDEFIN🔵</abbr></span>
<span class="-8074649539774450656" onmouseenter="enter('-8074649539774450656');" onmouseout="out('-8074649539774450656');" style="">1394             mPublishingSnackbar.show();                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1395         }                                                                                                </span>
<span  style="">1396                                                                                                          </span>
<span class="8445226168544755352" onmouseenter="enter('8445226168544755352');" onmouseout="out('8445226168544755352');" style="">1397         setPublishedNote(false);                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1398     }                                                                                                    </span>
<span  style="">1399                                                                                                          </span>
<span class="-2059530202125765167" onmouseenter="enter('-2059530202125765167');" onmouseout="out('-2059530202125765167');" style="">1400     private void showShare(String text) {                                                                </span>
<span class="-462181345749239892" onmouseenter="enter('-462181345749239892');" onmouseout="out('-462181345749239892');" style="">1401         startActivity(                                                                                   </span>
<span class="-2960409665728397105" onmouseenter="enter('-2960409665728397105');" onmouseout="out('-2960409665728397105');" style="">1402             ShareCompat.IntentBuilder.from(requireActivity())                                            </span>
<span class="-7167858845932453536" onmouseenter="enter('-7167858845932453536');" onmouseout="out('-7167858845932453536');" style="">1403                 .setText(text)                                                                           </span>
<span class="8809275298081922415" onmouseenter="enter('8809275298081922415');" onmouseout="out('8809275298081922415');" style="">1404                 .setType(&quot;text/plain&quot;)                                                                   </span>
<span class="-4946837607512363870" onmouseenter="enter('-4946837607512363870');" onmouseout="out('-4946837607512363870');" style="">1405                 .createChooserIntent()                                                                   </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">1406         );                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1407     }                                                                                                    </span>
<span  style="">1408                                                                                                          </span>
<span class="552430204178555924" onmouseenter="enter('552430204178555924');" onmouseout="out('552430204178555924');" style="">1409     private void showShareSheet() {                                                                      </span>
<span class="4007819101803880383" onmouseenter="enter('4007819101803880383');" onmouseout="out('4007819101803880383');" style="">1410         if (isAdded() &amp;&amp; mShareBottomSheet != null &amp;&amp; !mShareBottomSheet.isAdded()) {                    </span>
<span class="-6363695226018504364" onmouseenter="enter('-6363695226018504364');" onmouseout="out('-6363695226018504364');" style="">1411             mShareBottomSheet.show(requireFragmentManager(), mNote);                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1412         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1413     }                                                                                                    </span>
<span  style="">1414                                                                                                          </span>
<span class="-4049506869902668727" onmouseenter="enter('-4049506869902668727');" onmouseout="out('-4049506869902668727');" style="">1415     private void showInfoSheet() {                                                                       </span>
<span class="2029397660939536329" onmouseenter="enter('2029397660939536329');" onmouseout="out('2029397660939536329');" style="">1416         if (isAdded() &amp;&amp; mInfoBottomSheet != null &amp;&amp; !mInfoBottomSheet.isAdded()) {                      </span>
<span class="-1248038515529606639" onmouseenter="enter('-1248038515529606639');" onmouseout="out('-1248038515529606639');" style="">1417             mInfoBottomSheet.show(requireFragmentManager(), mNote);                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1418         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1419     }                                                                                                    </span>
<span  style="">1420                                                                                                          </span>
<span class="5911143564482716303" onmouseenter="enter('5911143564482716303');" onmouseout="out('5911143564482716303');" style="">1421     private void showHistorySheet() {                                                                    </span>
<span class="1950176939429748509" onmouseenter="enter('1950176939429748509');" onmouseout="out('1950176939429748509');" style="">1422         if (isAdded() &amp;&amp; mHistoryBottomSheet != null &amp;&amp; !mHistoryBottomSheet.isAdded()) {                </span>
<span class="8706434621047143120" onmouseenter="enter('8706434621047143120');" onmouseout="out('8706434621047143120');" style="">1423             // Request revisions for the current note                                                    </span>
<span class="-1574938770535875074" onmouseenter="enter('-1574938770535875074');" onmouseout="out('-1574938770535875074');" style=""><abbr title="1424             mNotesBucket.getRevisions(mNote, MAX_REVISIONS, mHistoryBottomSheet.getRevisionsRequestCallbacks());">1424             mNotesBucket.getRevisions(mNote, MAX_REVISIONS, mHistoryBottomSheet.getRevisionsRequestCallba🔵</abbr></span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style="">1425             saveNote();                                                                                  </span>
<span  style="">1426                                                                                                          </span>
<span class="4961792341108798217" onmouseenter="enter('4961792341108798217');" onmouseout="out('4961792341108798217');" style="">1427             mHistoryBottomSheet.show(requireFragmentManager(), mNote);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1428         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1429     }                                                                                                    </span>
<span  style="">1430                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1431     @Override                                                                                            </span>
<span class="3459602708969445883" onmouseenter="enter('3459602708969445883');" onmouseout="out('3459602708969445883');" style="">1432     public void onDeleteObject(Bucket&lt;Note&gt; noteBucket, Note note) {                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1433     }                                                                                                    </span>
<span  style="">1434                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1435     @Override                                                                                            </span>
<span class="-2970240973750057256" onmouseenter="enter('-2970240973750057256');" onmouseout="out('-2970240973750057256');" style=""><abbr title="1436     public void onNetworkChange(Bucket&lt;Note&gt; noteBucket, Bucket.ChangeType changeType, final String key) {">1436     public void onNetworkChange(Bucket&lt;Note&gt; noteBucket, Bucket.ChangeType changeType, final String key) 🔵</abbr></span>
<span class="6607037711761945955" onmouseenter="enter('6607037711761945955');" onmouseout="out('6607037711761945955');" style="">1437         if (changeType == Bucket.ChangeType.MODIFY) {                                                    </span>
<span class="-6254872391725782597" onmouseenter="enter('-6254872391725782597');" onmouseout="out('-6254872391725782597');" style="">1438             if (getNote() != null &amp;&amp; getNote().getSimperiumKey().equals(key)) {                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1439                 try {                                                                                    </span>
<span class="-1578175229665237336" onmouseenter="enter('-1578175229665237336');" onmouseout="out('-1578175229665237336');" style="">1440                     mNotesBucket = noteBucket;                                                           </span>
<span class="3951885723067312215" onmouseenter="enter('3951885723067312215');" onmouseout="out('3951885723067312215');" style="">1441                     final Note updatedNote = mNotesBucket.get(key);                                      </span>
<span class="4809573797151136036" onmouseenter="enter('4809573797151136036');" onmouseout="out('4809573797151136036');" style="">1442                     if (getActivity() != null) {                                                         </span>
<span class="-3876200887541462175" onmouseenter="enter('-3876200887541462175');" onmouseout="out('-3876200887541462175');" style="">1443                         getActivity().runOnUiThread(new Runnable() {                                     </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1444                             @Override                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">1445                             public void run() {                                                          </span>
<span class="-8758788084050668688" onmouseenter="enter('-8758788084050668688');" onmouseout="out('-8758788084050668688');" style="">1446                                 if (mPublishTimeoutHandler != null) {                                    </span>
<span class="-1646454762641300025" onmouseenter="enter('-1646454762641300025');" onmouseout="out('-1646454762641300025');" style="">1447                                     mPublishTimeoutHandler.removeCallbacks(mPublishTimeoutRunnable);     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1448                                 }                                                                        </span>
<span  style="">1449                                                                                                          </span>
<span class="-8617980127286778731" onmouseenter="enter('-8617980127286778731');" onmouseout="out('-8617980127286778731');" style="">1450                                 updateNote(updatedNote);                                                 </span>
<span class="2318735056997767280" onmouseenter="enter('2318735056997767280');" onmouseout="out('2318735056997767280');" style="">1451                                 updatePublishedState(true);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1452                             }                                                                            </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">1453                         });                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1454                     }                                                                                    </span>
<span class="-1560847995217927266" onmouseenter="enter('-1560847995217927266');" onmouseout="out('-1560847995217927266');" style="">1455                 } catch (BucketObjectMissingException e) {                                               </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style="">1456                     e.printStackTrace();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1457                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1458             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1459         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1460     }                                                                                                    </span>
<span  style="">1461                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1462     @Override                                                                                            </span>
<span class="1835476648918604123" onmouseenter="enter('1835476648918604123');" onmouseout="out('1835476648918604123');" style="">1463     public void onSaveObject(Bucket&lt;Note&gt; noteBucket, Note note) {                                       </span>
<span class="-2565337116915540090" onmouseenter="enter('-2565337116915540090');" onmouseout="out('-2565337116915540090');" style="">1464         if (mIsPaused) {                                                                                 </span>
<span class="-1649552973291504175" onmouseenter="enter('-1649552973291504175');" onmouseout="out('-1649552973291504175');" style="">1465             mNotesBucket.removeListener(this);                                                           </span>
<span class="-9222421628383802707" onmouseenter="enter('-9222421628383802707');" onmouseout="out('-9222421628383802707');" style="">1466             mNotesBucket.stop();                                                                         </span>
<span class="-5888247817738062720" onmouseenter="enter('-5888247817738062720');" onmouseout="out('-5888247817738062720');" style="">1467             AppLog.add(Type.SYNC, &quot;Stopped note bucket (NoteEditorFragment)&quot;);                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1468         }                                                                                                </span>
<span  style="">1469                                                                                                          </span>
<span class="1712554612672119113" onmouseenter="enter('1712554612672119113');" onmouseout="out('1712554612672119113');" style="">1470         AppLog.add(                                                                                      </span>
<span class="5387827170384214934" onmouseenter="enter('5387827170384214934');" onmouseout="out('5387827170384214934');" style="">1471             Type.SYNC,                                                                                   </span>
<span class="-2467507706164826416" onmouseenter="enter('-2467507706164826416');" onmouseout="out('-2467507706164826416');" style="">1472             &quot;Saved note callback in NoteEditorFragment (ID: &quot; + note.getSimperiumKey() +                 </span>
<span class="8009766076008568533" onmouseenter="enter('8009766076008568533');" onmouseout="out('8009766076008568533');" style="">1473                 &quot; / Title: &quot; + note.getTitle() +                                                         </span>
<span class="3373129960779075140" onmouseenter="enter('3373129960779075140');" onmouseout="out('3373129960779075140');" style="">1474                 &quot; / Characters: &quot; + NoteUtils.getCharactersCount(note.getContent()) +                    </span>
<span class="-6586905692045925149" onmouseenter="enter('-6586905692045925149');" onmouseout="out('-6586905692045925149');" style="">1475                 &quot; / Words: &quot; + NoteUtils.getWordCount(note.getContent()) + &quot;)&quot;                           </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">1476         );                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1477     }                                                                                                    </span>
<span  style="">1478                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1479     @Override                                                                                            </span>
<span class="-5956849782971602831" onmouseenter="enter('-5956849782971602831');" onmouseout="out('-5956849782971602831');" style="">1480     public void onBeforeUpdateObject(Bucket&lt;Note&gt; bucket, Note note) {                                   </span>
<span class="9133977848896323437" onmouseenter="enter('9133977848896323437');" onmouseout="out('9133977848896323437');" style="">1481         // Don&#x27;t apply updates if we haven&#x27;t loaded the note yet                                         </span>
<span class="-1541782922582123662" onmouseenter="enter('-1541782922582123662');" onmouseout="out('-1541782922582123662');" style="">1482         if (mIsLoadingNote)                                                                              </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1483             return;                                                                                      </span>
<span  style="">1484                                                                                                          </span>
<span class="1341660593539808393" onmouseenter="enter('1341660593539808393');" onmouseout="out('1341660593539808393');" style="">1485         Note openNote = getNote();                                                                       </span>
<span class="-6997098079508589023" onmouseenter="enter('-6997098079508589023');" onmouseout="out('-6997098079508589023');" style="">1486         if (openNote == null || !openNote.getSimperiumKey().equals(note.getSimperiumKey()))              </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1487             return;                                                                                      </span>
<span  style="">1488                                                                                                          </span>
<span class="7121549238466162700" onmouseenter="enter('7121549238466162700');" onmouseout="out('7121549238466162700');" style="">1489         note.setContent(mContentEditText.getPlainTextContent());                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1490     }                                                                                                    </span>
<span  style="">1491                                                                                                          </span>
<span class="9045414880144452172" onmouseenter="enter('9045414880144452172');" onmouseout="out('9045414880144452172');" style="">1492     private static class LoadNoteTask extends AsyncTask&lt;String, Void, Void&gt; {                            </span>
<span class="2470819661574637360" onmouseenter="enter('2470819661574637360');" onmouseout="out('2470819661574637360');" style="">1493         WeakReference&lt;NoteEditorFragment&gt; mNoteEditorFragmentReference;                                  </span>
<span  style="">1494                                                                                                          </span>
<span class="-5095898803565568819" onmouseenter="enter('-5095898803565568819');" onmouseout="out('-5095898803565568819');" style="">1495         LoadNoteTask(NoteEditorFragment fragment) {                                                      </span>
<span class="-729324371914675142" onmouseenter="enter('-729324371914675142');" onmouseout="out('-729324371914675142');" style="">1496             mNoteEditorFragmentReference = new WeakReference&lt;&gt;(fragment);                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1497         }                                                                                                </span>
<span  style="">1498                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1499         @Override                                                                                        </span>
<span class="-2143377957271683587" onmouseenter="enter('-2143377957271683587');" onmouseout="out('-2143377957271683587');" style="">1500         protected void onPreExecute() {                                                                  </span>
<span class="-6239297955916786402" onmouseenter="enter('-6239297955916786402');" onmouseout="out('-6239297955916786402');" style="">1501             NoteEditorFragment fragment = mNoteEditorFragmentReference.get();                            </span>
<span class="8682461618194216316" onmouseenter="enter('8682461618194216316');" onmouseout="out('8682461618194216316');" style="">1502             if (fragment != null) {                                                                      </span>
<span class="60782620590248864" onmouseenter="enter('60782620590248864');" onmouseout="out('60782620590248864');" style="">1503                 fragment.mContentEditText.removeTextChangedListener(fragment);                           </span>
<span class="-1534119248334961722" onmouseenter="enter('-1534119248334961722');" onmouseout="out('-1534119248334961722');" style="">1504                 fragment.mIsLoadingNote = true;                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1505             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1506         }                                                                                                </span>
<span  style="">1507                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1508         @Override                                                                                        </span>
<span class="2907103121668961470" onmouseenter="enter('2907103121668961470');" onmouseout="out('2907103121668961470');" style="">1509         protected Void doInBackground(String... args) {                                                  </span>
<span class="-6239297955916786402" onmouseenter="enter('-6239297955916786402');" onmouseout="out('-6239297955916786402');" style="">1510             NoteEditorFragment fragment = mNoteEditorFragmentReference.get();                            </span>
<span class="4349500834754523537" onmouseenter="enter('4349500834754523537');" onmouseout="out('4349500834754523537');" style="">1511             if ((fragment == null) || (fragment.getActivity() == null)) {                                </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1512                 return null;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1513             }                                                                                            </span>
<span class="-6905640337159350056" onmouseenter="enter('-6905640337159350056');" onmouseout="out('-6905640337159350056');" style="">1514             String noteID = args[0];                                                                     </span>
<span class="2152357253618292092" onmouseenter="enter('2152357253618292092');" onmouseout="out('2152357253618292092');" style="">1515             Simplenote application = ((Simplenote) (fragment.getActivity().getApplication()));           </span>
<span class="3820701427545927889" onmouseenter="enter('3820701427545927889');" onmouseout="out('3820701427545927889');" style="">1516             Bucket&lt;Note&gt; notesBucket = application.getNotesBucket();                                     </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1517             try {                                                                                        </span>
<span class="-4946232803333130386" onmouseenter="enter('-4946232803333130386');" onmouseout="out('-4946232803333130386');" style="">1518                 fragment.mNote = notesBucket.get(noteID);                                                </span>
<span class="-8094446681246514952" onmouseenter="enter('-8094446681246514952');" onmouseout="out('-8094446681246514952');" style="">1519                 // Set the current note in NotesActivity when on a tablet                                </span>
<span class="-8543118244487944112" onmouseenter="enter('-8543118244487944112');" onmouseout="out('-8543118244487944112');" style="">1520                 if (fragment.getActivity() instanceof NotesActivity) {                                   </span>
<span class="8585053155468161660" onmouseenter="enter('8585053155468161660');" onmouseout="out('8585053155468161660');" style="">1521                     ((NotesActivity) (fragment.getActivity())).setCurrentNote(fragment.mNote);           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1522                 }                                                                                        </span>
<span class="-7559761486783625846" onmouseenter="enter('-7559761486783625846');" onmouseout="out('-7559761486783625846');" style="">1523                 // Set markdown and preview flags for current note                                       </span>
<span class="5610790463962208778" onmouseenter="enter('5610790463962208778');" onmouseout="out('5610790463962208778');" style="">1524                 if (fragment.mNote != null) {                                                            </span>
<span class="-8180075389206795559" onmouseenter="enter('-8180075389206795559');" onmouseout="out('-8180075389206795559');" style="">1525                     fragment.mIsMarkdownEnabled = fragment.mNote.isMarkdownEnabled();                    </span>
<span class="4693841747578299424" onmouseenter="enter('4693841747578299424');" onmouseout="out('4693841747578299424');" style="">1526                     fragment.mIsPreviewEnabled = fragment.mNote.isPreviewEnabled();                      </span>
<span class="-7926751375494125320" onmouseenter="enter('-7926751375494125320');" onmouseout="out('-7926751375494125320');" style=""><abbr title="1527                     AppLog.add(Type.SYNC, (((((((&quot;Loaded note (ID: &quot; + fragment.mNote.getSimperiumKey()) + &quot; / Title: &quot;) + fragment.mNote.getTitle()) + &quot; / Characters: &quot;) + NoteUtils.getCharactersCount(fragment.mNote.getContent())) + &quot; / Words: &quot;) + NoteUtils.getWordCount(fragment.mNote.getContent())) + &quot;)&quot;);">1527                     AppLog.add(Type.SYNC, (((((((&quot;Loaded note (ID: &quot; + fragment.mNote.getSimperiumKey()) 🔵</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1528                 }                                                                                        </span>
<span class="-1560847995217927266" onmouseenter="enter('-1560847995217927266');" onmouseout="out('-1560847995217927266');" style="">1529             } catch (BucketObjectMissingException e) {                                                   </span>
<span class="2089208945464326929" onmouseenter="enter('2089208945464326929');" onmouseout="out('2089208945464326929');" style="">1530                 // See if the note is in the object store                                                </span>
<span class="369229994761936281" onmouseenter="enter('369229994761936281');" onmouseout="out('369229994761936281');" style="">1531                 Bucket.ObjectCursor&lt;Note&gt; notesCursor = notesBucket.allObjects();                        </span>
<span class="-3178781815102550114" onmouseenter="enter('-3178781815102550114');" onmouseout="out('-3178781815102550114');" style="">1532                 while (notesCursor.moveToNext()) {                                                       </span>
<span class="-6636674936476994775" onmouseenter="enter('-6636674936476994775');" onmouseout="out('-6636674936476994775');" style="">1533                     Note currentNote = notesCursor.getObject();                                          </span>
<span class="8264360518691996978" onmouseenter="enter('8264360518691996978');" onmouseout="out('8264360518691996978');" style="">1534                     if ((currentNote != null) &amp;&amp; currentNote.getSimperiumKey().equals(noteID)) {         </span>
<span class="8774517486286621197" onmouseenter="enter('8774517486286621197');" onmouseout="out('8774517486286621197');" style="">1535                         fragment.mNote = currentNote;                                                    </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1536                         return null;                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1537                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1538                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1539             }                                                                                            </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1540             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1541         }                                                                                                </span>
<span  style="">1542                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1543         @Override                                                                                        </span>
<span class="2295103304779241059" onmouseenter="enter('2295103304779241059');" onmouseout="out('2295103304779241059');" style="">1544         protected void onPostExecute(Void nada) {                                                        </span>
<span class="-6221597993462190775" onmouseenter="enter('-6221597993462190775');" onmouseout="out('-6221597993462190775');" style="">1545             final NoteEditorFragment fragment = mNoteEditorFragmentReference.get();                      </span>
<span class="-9214324735517901283" onmouseenter="enter('-9214324735517901283');" onmouseout="out('-9214324735517901283');" style=""><abbr title="1546             if (((fragment == null) || (fragment.getActivity() == null)) || fragment.getActivity().isFinishing()) {">1546             if (((fragment == null) || (fragment.getActivity() == null)) || fragment.getActivity().isFini🔵</abbr></span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1547                 return;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1548             }                                                                                            </span>
<span class="-6603799210363857095" onmouseenter="enter('-6603799210363857095');" onmouseout="out('-6603799210363857095');" style="">1549             fragment.refreshContent(false);                                                              </span>
<span class="5917882013700041584" onmouseenter="enter('5917882013700041584');" onmouseout="out('5917882013700041584');" style="">1550             if (fragment.mMatchOffsets != null) {                                                        </span>
<span class="3332467390516262576" onmouseenter="enter('3332467390516262576');" onmouseout="out('3332467390516262576');" style=""><abbr title="1551                 int columnIndex = fragment.mNote.getBucket().getSchema().getFullTextIndex().getColumnIndex(Note.CONTENT_PROPERTY);">1551                 int columnIndex = fragment.mNote.getBucket().getSchema().getFullTextIndex().getColumnInde🔵</abbr></span>
<span class="-941659818852434408" onmouseenter="enter('-941659818852434408');" onmouseout="out('-941659818852434408');" style="">1552                 fragment.mHighlighter.highlightMatches(fragment.mMatchOffsets, columnIndex);             </span>
<span class="-5586540550370892268" onmouseenter="enter('-5586540550370892268');" onmouseout="out('-5586540550370892268');" style="">1553                 fragment.mShouldScrollToSearchMatch = true;                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1554             }                                                                                            </span>
<span class="973040091990718145" onmouseenter="enter('973040091990718145');" onmouseout="out('973040091990718145');" style="">1555             fragment.mContentEditText.addTextChangedListener(fragment);                                  </span>
<span class="-4686922819076112275" onmouseenter="enter('-4686922819076112275');" onmouseout="out('-4686922819076112275');" style="">1556             if ((fragment.mNote != null) &amp;&amp; fragment.mNote.getContent().isEmpty()) {                     </span>
<span class="-7639034409774462373" onmouseenter="enter('-7639034409774462373');" onmouseout="out('-7639034409774462373');" style="">1557                 // Show soft keyboard                                                                    </span>
<span class="-4206285070691362757" onmouseenter="enter('-4206285070691362757');" onmouseout="out('-4206285070691362757');" style="">1558                 fragment.mContentEditText.requestFocus();                                                </span>
<span class="7162501222170899627" onmouseenter="enter('7162501222170899627');" onmouseout="out('7162501222170899627');" style="">1559                 new Handler().postDelayed(new Runnable() {                                               </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1560                     @Override                                                                            </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">1561                     public void run() {                                                                  </span>
<span class="-3270581272855840613" onmouseenter="enter('-3270581272855840613');" onmouseout="out('-3270581272855840613');" style="">1562                         if (fragment.getActivity() == null) {                                            </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1563                             return;                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1564                         }                                                                                </span>
<span class="-6396953671275869188" onmouseenter="enter('-6396953671275869188');" onmouseout="out('-6396953671275869188');" style=""><abbr title="1565                         InputMethodManager inputMethodManager = ((InputMethodManager) (fragment.getActivity().getSystemService(Context.INPUT_METHOD_SERVICE)));">1565                         InputMethodManager inputMethodManager = ((InputMethodManager) (fragment.getActivi🔵</abbr></span>
<span class="-9213036537020298306" onmouseenter="enter('-9213036537020298306');" onmouseout="out('-9213036537020298306');" style="">1566                         if (inputMethodManager != null) {                                                </span>
<span class="195139432086188728" onmouseenter="enter('195139432086188728');" onmouseout="out('195139432086188728');" style="">1567                             inputMethodManager.showSoftInput(fragment.mContentEditText, 0);              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1568                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1569                     }                                                                                    </span>
<span class="-4884776244894547305" onmouseenter="enter('-4884776244894547305');" onmouseout="out('-4884776244894547305');" style="">1570                 }, 100);                                                                                 </span>
<span class="-6150494714931322561" onmouseenter="enter('-6150494714931322561');" onmouseout="out('-6150494714931322561');" style="">1571             } else if (fragment.mNote != null) {                                                         </span>
<span class="-1393000384089402121" onmouseenter="enter('-1393000384089402121');" onmouseout="out('-1393000384089402121');" style="">1572                 // If we have a valid note, hide the placeholder                                         </span>
<span class="8494685023237855547" onmouseenter="enter('8494685023237855547');" onmouseout="out('8494685023237855547');" style="">1573                 fragment.setPlaceholderVisible(false);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1574             }                                                                                            </span>
<span class="-204842057880624038" onmouseenter="enter('-204842057880624038');" onmouseout="out('-204842057880624038');" style="">1575             fragment.updateMarkdownView();                                                               </span>
<span class="-7853767312046629249" onmouseenter="enter('-7853767312046629249');" onmouseout="out('-7853767312046629249');" style="">1576             fragment.requireActivity().invalidateOptionsMenu();                                          </span>
<span class="-6330986853491903464" onmouseenter="enter('-6330986853491903464');" onmouseout="out('-6330986853491903464');" style="">1577             fragment.linkifyEditorContent();                                                             </span>
<span class="-4002830427376252976" onmouseenter="enter('-4002830427376252976');" onmouseout="out('-4002830427376252976');" style="">1578             fragment.mIsLoadingNote = false;                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1579         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1580     }                                                                                                    </span>
<span  style="">1581                                                                                                          </span>
<span class="-2513677254117436534" onmouseenter="enter('-2513677254117436534');" onmouseout="out('-2513677254117436534');" style="">1582     private static class SaveNoteTask extends AsyncTask&lt;Void, Void, Void&gt; {                              </span>
<span class="2470819661574637360" onmouseenter="enter('2470819661574637360');" onmouseout="out('2470819661574637360');" style="">1583         WeakReference&lt;NoteEditorFragment&gt; mNoteEditorFragmentReference;                                  </span>
<span  style="">1584                                                                                                          </span>
<span class="-3144982887415890281" onmouseenter="enter('-3144982887415890281');" onmouseout="out('-3144982887415890281');" style="">1585         SaveNoteTask(NoteEditorFragment fragment) {                                                      </span>
<span class="-729324371914675142" onmouseenter="enter('-729324371914675142');" onmouseout="out('-729324371914675142');" style="">1586             mNoteEditorFragmentReference = new WeakReference&lt;&gt;(fragment);                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1587         }                                                                                                </span>
<span  style="">1588                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1589         @Override                                                                                        </span>
<span class="1259374977543247181" onmouseenter="enter('1259374977543247181');" onmouseout="out('1259374977543247181');" style="">1590         protected Void doInBackground(Void... args) {                                                    </span>
<span class="-6239297955916786402" onmouseenter="enter('-6239297955916786402');" onmouseout="out('-6239297955916786402');" style="">1591             NoteEditorFragment fragment = mNoteEditorFragmentReference.get();                            </span>
<span class="8682461618194216316" onmouseenter="enter('8682461618194216316');" onmouseout="out('8682461618194216316');" style="">1592             if (fragment != null) {                                                                      </span>
<span class="8575404770768137029" onmouseenter="enter('8575404770768137029');" onmouseout="out('8575404770768137029');" style="">1593                 fragment.saveNote();                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1594             }                                                                                            </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1595             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1596         }                                                                                                </span>
<span  style="">1597                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1598         @Override                                                                                        </span>
<span class="2295103304779241059" onmouseenter="enter('2295103304779241059');" onmouseout="out('2295103304779241059');" style="">1599         protected void onPostExecute(Void nada) {                                                        </span>
<span class="-6239297955916786402" onmouseenter="enter('-6239297955916786402');" onmouseout="out('-6239297955916786402');" style="">1600             NoteEditorFragment fragment = mNoteEditorFragmentReference.get();                            </span>
<span class="4331800031661631828" onmouseenter="enter('4331800031661631828');" onmouseout="out('4331800031661631828');" style=""><abbr title="1601             if (((fragment != null) &amp;&amp; (fragment.getActivity() != null)) &amp;&amp; (!fragment.getActivity().isFinishing())) {">1601             if (((fragment != null) &amp;&amp; (fragment.getActivity() != null)) &amp;&amp; (!fragment.getActivity().isFi🔵</abbr></span>
<span class="4157206213844518202" onmouseenter="enter('4157206213844518202');" onmouseout="out('4157206213844518202');" style="">1602                 // Update links                                                                          </span>
<span class="-6330986853491903464" onmouseenter="enter('-6330986853491903464');" onmouseout="out('-6330986853491903464');" style="">1603                 fragment.linkifyEditorContent();                                                         </span>
<span class="-204842057880624038" onmouseenter="enter('-204842057880624038');" onmouseout="out('-204842057880624038');" style="">1604                 fragment.updateMarkdownView();                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1605             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1606         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1607     }                                                                                                    </span>
<span  style="">1608                                                                                                          </span>
<span class="5750088007463981533" onmouseenter="enter('5750088007463981533');" onmouseout="out('5750088007463981533');" style="">1609     private void linkifyEditorContent() {                                                                </span>
<span class="-7408428876964241805" onmouseenter="enter('-7408428876964241805');" onmouseout="out('-7408428876964241805');" style="">1610         if (getActivity() == null || getActivity().isFinishing()) {                                      </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1611             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1612         }                                                                                                </span>
<span  style="">1613                                                                                                          </span>
<span class="-8676186023856313759" onmouseenter="enter('-8676186023856313759');" onmouseout="out('-8676186023856313759');" style="">1614         if (PrefUtils.getBoolPref(getActivity(), PrefUtils.PREF_DETECT_LINKS)) {                         </span>
<span class="-5493645025534883433" onmouseenter="enter('-5493645025534883433');" onmouseout="out('-5493645025534883433');" style="">1615             SimplenoteLinkify.addLinks(mContentEditText, Linkify.ALL);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1616         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1617     }                                                                                                    </span>
<span  style="">1618                                                                                                          </span>
<span class="-5950330616337931457" onmouseenter="enter('-5950330616337931457');" onmouseout="out('-5950330616337931457');" style="">1619     // Show tabs if markdown is enabled globally, for current note, and not tablet landscape             </span>
<span class="2649812560178195830" onmouseenter="enter('2649812560178195830');" onmouseout="out('2649812560178195830');" style="">1620     private void updateMarkdownView() {                                                                  </span>
<span class="-6478060281573302790" onmouseenter="enter('-6478060281573302790');" onmouseout="out('-6478060281573302790');" style="">1621         if (!mIsMarkdownEnabled) {                                                                       </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1622             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1623         }                                                                                                </span>
<span  style="">1624                                                                                                          </span>
<span class="-5071525869541290984" onmouseenter="enter('-5071525869541290984');" onmouseout="out('-5071525869541290984');" style="">1625         Activity activity = getActivity();                                                               </span>
<span class="6030899174327056570" onmouseenter="enter('6030899174327056570');" onmouseout="out('6030899174327056570');" style="">1626         if (activity instanceof NotesActivity) {                                                         </span>
<span class="2782126590805787389" onmouseenter="enter('2782126590805787389');" onmouseout="out('2782126590805787389');" style="">1627             // This fragment lives in NotesActivity, so load markdown in this fragment&#x27;s WebView.        </span>
<span class="3327794499329885328" onmouseenter="enter('3327794499329885328');" onmouseout="out('3327794499329885328');" style="">1628             loadMarkdownData();                                                                          </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1629         } else {                                                                                         </span>
<span class="8122704767225379324" onmouseenter="enter('8122704767225379324');" onmouseout="out('8122704767225379324');" style="">1630             // This fragment lives in the NoteEditorActivity&#x27;s ViewPager.                                </span>
<span class="-3674842258349497418" onmouseenter="enter('-3674842258349497418');" onmouseout="out('-3674842258349497418');" style="">1631             if (mNoteMarkdownFragment == null) {                                                         </span>
<span class="3603448342706497777" onmouseenter="enter('3603448342706497777');" onmouseout="out('3603448342706497777');" style="">1632                 mNoteMarkdownFragment = ((NoteEditorActivity) requireActivity())                         </span>
<span class="-2617317400764712760" onmouseenter="enter('-2617317400764712760');" onmouseout="out('-2617317400764712760');" style="">1633                         .getNoteMarkdownFragment();                                                      </span>
<span class="3313661309460802096" onmouseenter="enter('3313661309460802096');" onmouseout="out('3313661309460802096');" style="">1634                 ((NoteEditorActivity) requireActivity()).showTabs();                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1635             }                                                                                            </span>
<span class="-1009334497805408344" onmouseenter="enter('-1009334497805408344');" onmouseout="out('-1009334497805408344');" style="">1636             // Load markdown in the sibling NoteMarkdownFragment&#x27;s WebView.                              </span>
<span class="8234543871026198045" onmouseenter="enter('8234543871026198045');" onmouseout="out('8234543871026198045');" style="">1637             mNoteMarkdownFragment.updateMarkdown(mContentEditText.getPreviewTextContent());              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1638         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1639     }                                                                                                    </span>
<span  style="">1640                                                                                                          </span>
<span class="621072892992557040" onmouseenter="enter('621072892992557040');" onmouseout="out('621072892992557040');" style="">1641     private ColorStateList getChipBackgroundColor() {                                                    </span>
<span class="-2852806967863140186" onmouseenter="enter('-2852806967863140186');" onmouseout="out('-2852806967863140186');" style="">1642         int[][] states = new int[][] {                                                                   </span>
<span class="3138779758285079345" onmouseenter="enter('3138779758285079345');" onmouseout="out('3138779758285079345');" style="">1643             new int[] { android.R.attr.state_checked}, // checked                                        </span>
<span class="2921033856249437884" onmouseenter="enter('2921033856249437884');" onmouseout="out('2921033856249437884');" style="">1644             new int[] {-android.R.attr.state_checked}  // unchecked                                      </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">1645         };                                                                                               </span>
<span  style="">1646                                                                                                          </span>
<span class="-5399670070282478940" onmouseenter="enter('-5399670070282478940');" onmouseout="out('-5399670070282478940');" style="">1647         int[] colors = new int[] {                                                                       </span>
<span class="3188530588543322355" onmouseenter="enter('3188530588543322355');" onmouseout="out('3188530588543322355');" style="">1648             ThemeUtils.getColorFromAttribute(requireContext(), R.attr.chipCheckedOnBackgroundColor),     </span>
<span class="1811726545786864469" onmouseenter="enter('1811726545786864469');" onmouseout="out('1811726545786864469');" style="">1649             ThemeUtils.getColorFromAttribute(requireContext(), R.attr.chipCheckedOffBackgroundColor)     </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">1650         };                                                                                               </span>
<span  style="">1651                                                                                                          </span>
<span class="-5773454088160861424" onmouseenter="enter('-5773454088160861424');" onmouseout="out('-5773454088160861424');" style="">1652         return new ColorStateList(states, colors);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1653     }                                                                                                    </span>
<span  style="">1654                                                                                                          </span>
<span class="7978150615022703967" onmouseenter="enter('7978150615022703967');" onmouseout="out('7978150615022703967');" style="">1655     private void setChips(CharSequence text) {                                                           </span>
<span class="-6352640607268108974" onmouseenter="enter('-6352640607268108974');" onmouseout="out('-6352640607268108974');" style="">1656         mTagPadding.setVisibility(text.length() &gt; 0 ? View.VISIBLE : View.GONE);                         </span>
<span class="5420418357496709981" onmouseenter="enter('5420418357496709981');" onmouseout="out('5420418357496709981');" style="">1657         mTagChips.setVisibility(text.length() &gt; 0 ? View.VISIBLE : View.GONE);                           </span>
<span class="6036610741747636495" onmouseenter="enter('6036610741747636495');" onmouseout="out('6036610741747636495');" style="">1658         mTagChips.setSingleSelection(true);                                                              </span>
<span class="-281158766645647153" onmouseenter="enter('-281158766645647153');" onmouseout="out('-281158766645647153');" style="">1659         mTagChips.removeAllViews();                                                                      </span>
<span class="-2312425264507564639" onmouseenter="enter('-2312425264507564639');" onmouseout="out('-2312425264507564639');" style="">1660         SimpleStringSplitter tags = new SimpleStringSplitter(SPACE);                                     </span>
<span class="-2221549004994088170" onmouseenter="enter('-2221549004994088170');" onmouseout="out('-2221549004994088170');" style="">1661         tags.setString(text.toString());                                                                 </span>
<span  style="">1662                                                                                                          </span>
<span class="-7185531782033852210" onmouseenter="enter('-7185531782033852210');" onmouseout="out('-7185531782033852210');" style="">1663         for (String tag : tags) {                                                                        </span>
<span class="-4253336828679787495" onmouseenter="enter('-4253336828679787495');" onmouseout="out('-4253336828679787495');" style="">1664             final Chip chip = new Chip(requireContext());                                                </span>
<span class="1656135987988335587" onmouseenter="enter('1656135987988335587');" onmouseout="out('1656135987988335587');" style="">1665             chip.setText(tag);                                                                           </span>
<span class="-8675353638360963179" onmouseenter="enter('-8675353638360963179');" onmouseout="out('-8675353638360963179');" style="">1666             chip.setCheckable(true);                                                                     </span>
<span class="67942289785469509" onmouseenter="enter('67942289785469509');" onmouseout="out('67942289785469509');" style="">1667             chip.setCheckedIcon(null);                                                                   </span>
<span class="4360750963000358582" onmouseenter="enter('4360750963000358582');" onmouseout="out('4360750963000358582');" style="">1668             chip.setChipBackgroundColor(getChipBackgroundColor());                                       </span>
<span class="9213121115800400320" onmouseenter="enter('9213121115800400320');" onmouseout="out('9213121115800400320');" style="">1669             chip.setTextColor(ThemeUtils.getColorFromAttribute(requireContext(), R.attr.chipTextColor)); </span>
<span class="7518117741736260019" onmouseenter="enter('7518117741736260019');" onmouseout="out('7518117741736260019');" style="">1670             chip.setStateListAnimator(null);                                                             </span>
<span class="-4577029713597050278" onmouseenter="enter('-4577029713597050278');" onmouseout="out('-4577029713597050278');" style="">1671             chip.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {               </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1672                 @Override                                                                                </span>
<span class="3078550550582438549" onmouseenter="enter('3078550550582438549');" onmouseout="out('3078550550582438549');" style="">1673                 public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {             </span>
<span class="44703121288981283" onmouseenter="enter('44703121288981283');" onmouseout="out('44703121288981283');" style="">1674                     chip.setCloseIconVisible(isChecked);                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1675                 }                                                                                        </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">1676             });                                                                                          </span>
<span class="160847713587338016" onmouseenter="enter('160847713587338016');" onmouseout="out('160847713587338016');" style="">1677             chip.setOnCloseIconClickListener(new View.OnClickListener() {                                </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1678                 @Override                                                                                </span>
<span class="2630081792579352299" onmouseenter="enter('2630081792579352299');" onmouseout="out('2630081792579352299');" style="">1679                 public void onClick(View view) {                                                         </span>
<span class="-7509335457070409893" onmouseenter="enter('-7509335457070409893');" onmouseout="out('-7509335457070409893');" style="">1680                     mTagChips.removeView(view);                                                          </span>
<span class="6057505716411681059" onmouseenter="enter('6057505716411681059');" onmouseout="out('6057505716411681059');" style="">1681                     updateTags();                                                                        </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style="">1682                     AnalyticsTracker.track(                                                              </span>
<span class="6322942827450848506" onmouseenter="enter('6322942827450848506');" onmouseout="out('6322942827450848506');" style="">1683                         EDITOR_TAG_REMOVED,                                                              </span>
<span class="-2430475172570880083" onmouseenter="enter('-2430475172570880083');" onmouseout="out('-2430475172570880083');" style="">1684                         CATEGORY_NOTE,                                                                   </span>
<span class="7139119425176259618" onmouseenter="enter('7139119425176259618');" onmouseout="out('7139119425176259618');" style="">1685                         &quot;tag_removed_from_note&quot;                                                          </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">1686                     );                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1687                 }                                                                                        </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">1688             });                                                                                          </span>
<span class="-535069795448615627" onmouseenter="enter('-535069795448615627');" onmouseout="out('-535069795448615627');" style="">1689             mTagChips.addView(chip);                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1690         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1691     }                                                                                                    </span>
<span  style="">1692                                                                                                          </span>
<span class="2006864524440231174" onmouseenter="enter('2006864524440231174');" onmouseout="out('2006864524440231174');" style="">1693     private void updateTags() {                                                                          </span>
<span class="-6566957513776356959" onmouseenter="enter('-6566957513776356959');" onmouseout="out('-6566957513776356959');" style="">1694         if (mNote == null) {                                                                             </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1695             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1696         }                                                                                                </span>
<span  style="">1697                                                                                                          </span>
<span class="2510051710836521686" onmouseenter="enter('2510051710836521686');" onmouseout="out('2510051710836521686');" style="">1698         mNote.setTagString(getNoteTagsString());                                                         </span>
<span class="-3343075472306200704" onmouseenter="enter('-3343075472306200704');" onmouseout="out('-3343075472306200704');" style="">1699         mNote.setModificationDate(Calendar.getInstance());                                               </span>
<span class="3745953297761259324" onmouseenter="enter('3745953297761259324');" onmouseout="out('3745953297761259324');" style="">1700         updateTagList();                                                                                 </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style="">1701         mNote.save();                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1702     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1703 }                                                                                                        </span>


















































































</pre></td>
                        </tr>
                    </table>
                </div>
                <div id="bottom">
                    <table style="margin:auto">
                        <tr>
                            <th>ours vs. base</th>
                            <th>theirs vs. base</th>
                        </tr>
                        <tr>
                            <td><pre><span class="8328120990598135231" onmouseenter="enter('8328120990598135231');" onmouseout="out('8328120990598135231');" style="">   1  package com.automattic.simplenote;                                                                                </span>
<span  style="">   2                                                                                                                    </span>
<span class="-7090287939251728203" onmouseenter="enter('-7090287939251728203');" onmouseout="out('-7090287939251728203');" style="">   3  import android.app.Activity;                                                                                      </span>
<span class="5922045460006936195" onmouseenter="enter('5922045460006936195');" onmouseout="out('5922045460006936195');" style="">   4  import android.content.Context;                                                                                   </span>
<span class="4122587240602557356" onmouseenter="enter('4122587240602557356');" onmouseout="out('4122587240602557356');" style="">   5  import android.content.SharedPreferences;                                                                         </span>
<span class="437349496656716435" onmouseenter="enter('437349496656716435');" onmouseout="out('437349496656716435');" style="">   6  import android.content.res.ColorStateList;                                                                        </span>
<span class="6294169624328016071" onmouseenter="enter('6294169624328016071');" onmouseout="out('6294169624328016071');" style="">   7  import android.database.Cursor;                                                                                   </span>
<span class="-5606798514618908790" onmouseenter="enter('-5606798514618908790');" onmouseout="out('-5606798514618908790');" style="">   8  import android.graphics.Typeface;                                                                                 </span>
<span class="-1737226814075322931" onmouseenter="enter('-1737226814075322931');" onmouseout="out('-1737226814075322931');" style="">   9  import android.graphics.drawable.Drawable;                                                                        </span>
<span class="955674827050616793" onmouseenter="enter('955674827050616793');" onmouseout="out('955674827050616793');" style="">  10  import android.os.AsyncTask;                                                                                      </span>
<span class="8096531590004379472" onmouseenter="enter('8096531590004379472');" onmouseout="out('8096531590004379472');" style="">  11  import android.os.Bundle;                                                                                         </span>
<span class="-1086316590722027623" onmouseenter="enter('-1086316590722027623');" onmouseout="out('-1086316590722027623');" style="">  12  import android.os.Handler;                                                                                        </span>
<span class="4177373235046048356" onmouseenter="enter('4177373235046048356');" onmouseout="out('4177373235046048356');" style="">  13  import android.text.Editable;                                                                                     </span>
<span class="-578015270574978569" onmouseenter="enter('-578015270574978569');" onmouseout="out('-578015270574978569');" style="">  14  import android.text.Layout;                                                                                       </span>
<span class="7731806713123176572" onmouseenter="enter('7731806713123176572');" onmouseout="out('7731806713123176572');" style="">  15  import android.text.Spanned;                                                                                      </span>
<span class="-3299261040401335998" onmouseenter="enter('-3299261040401335998');" onmouseout="out('-3299261040401335998');" style="">  16  import android.text.TextUtils.SimpleStringSplitter;                                                               </span>
<span class="4038639591141008331" onmouseenter="enter('4038639591141008331');" onmouseout="out('4038639591141008331');" style="">  17  import android.text.TextWatcher;                                                                                  </span>
<span class="-654170262772204786" onmouseenter="enter('-654170262772204786');" onmouseout="out('-654170262772204786');" style="">  18  import android.text.style.MetricAffectingSpan;                                                                    </span>
<span class="2374973474356501783" onmouseenter="enter('2374973474356501783');" onmouseout="out('2374973474356501783');" style="">  19  import android.text.style.RelativeSizeSpan;                                                                       </span>
<span class="-6813443535687611228" onmouseenter="enter('-6813443535687611228');" onmouseout="out('-6813443535687611228');" style="">  20  import android.text.style.StyleSpan;                                                                              </span>
<span class="-1165963660754430642" onmouseenter="enter('-1165963660754430642');" onmouseout="out('-1165963660754430642');" style="">  21  import android.text.style.URLSpan;                                                                                </span>
<span class="-3804250137032727253" onmouseenter="enter('-3804250137032727253');" onmouseout="out('-3804250137032727253');" style="">  22  import android.text.util.Linkify;                                                                                 </span>
<span class="-1289400933432271961" onmouseenter="enter('-1289400933432271961');" onmouseout="out('-1289400933432271961');" style="">  23  import android.util.TypedValue;                                                                                   </span>
<span class="8553241717595905778" onmouseenter="enter('8553241717595905778');" onmouseout="out('8553241717595905778');" style="">  24  import android.view.LayoutInflater;                                                                               </span>
<span class="-603490076395619238" onmouseenter="enter('-603490076395619238');" onmouseout="out('-603490076395619238');" style="">  25  import android.view.Menu;                                                                                         </span>
<span class="-434306062495579804" onmouseenter="enter('-434306062495579804');" onmouseout="out('-434306062495579804');" style="">  26  import android.view.MenuInflater;                                                                                 </span>
<span class="6391706839654240930" onmouseenter="enter('6391706839654240930');" onmouseout="out('6391706839654240930');" style="">  27  import android.view.MenuItem;                                                                                     </span>
<span class="-8980485571216513882" onmouseenter="enter('-8980485571216513882');" onmouseout="out('-8980485571216513882');" style="">  28  import android.view.View;                                                                                         </span>
<span class="7569314084591619834" onmouseenter="enter('7569314084591619834');" onmouseout="out('7569314084591619834');" style="">  29  import android.view.ViewGroup;                                                                                    </span>
<span class="-4985651548362660777" onmouseenter="enter('-4985651548362660777');" onmouseout="out('-4985651548362660777');" style="">  30  import android.view.ViewTreeObserver;                                                                             </span>
<span class="-3117363671899680167" onmouseenter="enter('-3117363671899680167');" onmouseout="out('-3117363671899680167');" style="">  31  import android.view.inputmethod.InputMethodManager;                                                               </span>

<span class="2723690893492346945" onmouseenter="enter('2723690893492346945');" onmouseout="out('2723690893492346945');" style="">  32  import android.webkit.WebView;                                                                                    </span>

<span class="2736968318319789680" onmouseenter="enter('2736968318319789680');" onmouseout="out('2736968318319789680');" style="">  33  import android.widget.CompoundButton;                                                                             </span>
<span class="5634491474902588492" onmouseenter="enter('5634491474902588492');" onmouseout="out('5634491474902588492');" style="">  34  import android.widget.CursorAdapter;                                                                              </span>
<span class="5987800420235491716" onmouseenter="enter('5987800420235491716');" onmouseout="out('5987800420235491716');" style="">  35  import android.widget.LinearLayout;                                                                               </span>
<span class="-4961528671422147708" onmouseenter="enter('-4961528671422147708');" onmouseout="out('-4961528671422147708');" style="">  36  import android.widget.TextView;                                                                                   </span>
<span class="-4373317539211938720" onmouseenter="enter('-4373317539211938720');" onmouseout="out('-4373317539211938720');" style="">  37  import android.widget.Toast;                                                                                      </span>
<span  style="">  38                                                                                                                    </span>
<span class="6963272077887521702" onmouseenter="enter('6963272077887521702');" onmouseout="out('6963272077887521702');" style="">  39  import androidx.annotation.NonNull;                                                                               </span>
<span class="-4688549274525092465" onmouseenter="enter('-4688549274525092465');" onmouseout="out('-4688549274525092465');" style="">  40  import androidx.annotation.StringRes;                                                                             </span>
<span class="8057892732248099365" onmouseenter="enter('8057892732248099365');" onmouseout="out('8057892732248099365');" style="">  41  import androidx.appcompat.app.AppCompatActivity;                                                                  </span>
<span class="2035494855708115696" onmouseenter="enter('2035494855708115696');" onmouseout="out('2035494855708115696');" style="">  42  import androidx.appcompat.view.ActionMode;                                                                        </span>
<span class="-6344652174315873597" onmouseenter="enter('-6344652174315873597');" onmouseout="out('-6344652174315873597');" style="">  43  import androidx.core.app.ShareCompat;                                                                             </span>
<span class="-362404946986079023" onmouseenter="enter('-362404946986079023');" onmouseout="out('-362404946986079023');" style="">  44  import androidx.core.view.MenuCompat;                                                                             </span>
<span class="-767584428700722881" onmouseenter="enter('-767584428700722881');" onmouseout="out('-767584428700722881');" style="">  45  import androidx.core.widget.NestedScrollView;                                                                     </span>
<span class="2878002094531064439" onmouseenter="enter('2878002094531064439');" onmouseout="out('2878002094531064439');" style="">  46  import androidx.fragment.app.Fragment;                                                                            </span>
<span class="-6950145472733447700" onmouseenter="enter('-6950145472733447700');" onmouseout="out('-6950145472733447700');" style="">  47  import androidx.fragment.app.FragmentTransaction;                                                                 </span>
<span class="-7272383226560052741" onmouseenter="enter('-7272383226560052741');" onmouseout="out('-7272383226560052741');" style="">  48  import androidx.preference.PreferenceManager;                                                                     </span>
<span  style="">  49                                                                                                                    </span>
<span class="-155835000323929258" onmouseenter="enter('-155835000323929258');" onmouseout="out('-155835000323929258');" style="">  50  import com.automattic.simplenote.analytics.AnalyticsTracker;                                                      </span>
<span class="9061368408436996655" onmouseenter="enter('9061368408436996655');" onmouseout="out('9061368408436996655');" style="">  51  import com.automattic.simplenote.models.Note;                                                                     </span>
<span class="107771998888903823" onmouseenter="enter('107771998888903823');" onmouseout="out('107771998888903823');" style="">  52  import com.automattic.simplenote.models.Tag;                                                                      </span>
<span class="160698548927534529" onmouseenter="enter('160698548927534529');" onmouseout="out('160698548927534529');" style="">  53  import com.automattic.simplenote.utils.AppLog;                                                                    </span>
<span class="7580776162261256599" onmouseenter="enter('7580776162261256599');" onmouseout="out('7580776162261256599');" style="">  54  import com.automattic.simplenote.utils.AppLog.Type;                                                               </span>
<span class="-4380838228434146133" onmouseenter="enter('-4380838228434146133');" onmouseout="out('-4380838228434146133');" style="">  55  import com.automattic.simplenote.utils.AutoBullet;                                                                </span>
<span class="1593315676680608324" onmouseenter="enter('1593315676680608324');" onmouseout="out('1593315676680608324');" style="">  56  import com.automattic.simplenote.utils.BrowserUtils;                                                              </span>
<span class="8229771960302052711" onmouseenter="enter('8229771960302052711');" onmouseout="out('8229771960302052711');" style="">  57  import com.automattic.simplenote.utils.ContextUtils;                                                              </span>
<span class="8577850632926167445" onmouseenter="enter('8577850632926167445');" onmouseout="out('8577850632926167445');" style="">  58  import com.automattic.simplenote.utils.DisplayUtils;                                                              </span>
<span class="930019215389101465" onmouseenter="enter('930019215389101465');" onmouseout="out('930019215389101465');" style="">  59  import com.automattic.simplenote.utils.DrawableUtils;                                                             </span>
<span class="1327521140651609704" onmouseenter="enter('1327521140651609704');" onmouseout="out('1327521140651609704');" style="">  60  import com.automattic.simplenote.utils.MatchOffsetHighlighter;                                                    </span>
<span class="6713747859106964949" onmouseenter="enter('6713747859106964949');" onmouseout="out('6713747859106964949');" style="">  61  import com.automattic.simplenote.utils.NetworkUtils;                                                              </span>
<span class="2290458949892536112" onmouseenter="enter('2290458949892536112');" onmouseout="out('2290458949892536112');" style="">  62  import com.automattic.simplenote.utils.NoteUtils;                                                                 </span>
<span class="-7136497821822559876" onmouseenter="enter('-7136497821822559876');" onmouseout="out('-7136497821822559876');" style="">  63  import com.automattic.simplenote.utils.PrefUtils;                                                                 </span>
<span class="2537926396801226048" onmouseenter="enter('2537926396801226048');" onmouseout="out('2537926396801226048');" style="">  64  import com.automattic.simplenote.utils.SimplenoteLinkify;                                                         </span>
<span class="-42292328951391685" onmouseenter="enter('-42292328951391685');" onmouseout="out('-42292328951391685');" style="">  65  import com.automattic.simplenote.utils.SimplenoteMovementMethod;                                                  </span>
<span class="13513923158165555" onmouseenter="enter('13513923158165555');" onmouseout="out('13513923158165555');" style="">  66  import com.automattic.simplenote.utils.SpaceTokenizer;                                                            </span>
<span class="-643769428942460504" onmouseenter="enter('-643769428942460504');" onmouseout="out('-643769428942460504');" style="">  67  import com.automattic.simplenote.utils.TagUtils;                                                                  </span>
<span class="-4652171765784917488" onmouseenter="enter('-4652171765784917488');" onmouseout="out('-4652171765784917488');" style="">  68  import com.automattic.simplenote.utils.TagsMultiAutoCompleteTextView;                                             </span>
<span class="451633977271230846" onmouseenter="enter('451633977271230846');" onmouseout="out('451633977271230846');" style="">  69  import com.automattic.simplenote.utils.TagsMultiAutoCompleteTextView.OnTagAddedListener;                          </span>
<span class="3055903766206676561" onmouseenter="enter('3055903766206676561');" onmouseout="out('3055903766206676561');" style="">  70  import com.automattic.simplenote.utils.TextHighlighter;                                                           </span>
<span class="7305000128845659611" onmouseenter="enter('7305000128845659611');" onmouseout="out('7305000128845659611');" style="">  71  import com.automattic.simplenote.utils.ThemeUtils;                                                                </span>
<span class="-3457858113236631039" onmouseenter="enter('-3457858113236631039');" onmouseout="out('-3457858113236631039');" style="">  72  import com.automattic.simplenote.utils.WidgetUtils;                                                               </span>
<span class="4834384566534786428" onmouseenter="enter('4834384566534786428');" onmouseout="out('4834384566534786428');" style="">  73  import com.automattic.simplenote.widgets.SimplenoteEditText;                                                      </span>
<span class="4924672443805777373" onmouseenter="enter('4924672443805777373');" onmouseout="out('4924672443805777373');" style="">  74  import com.google.android.material.chip.Chip;                                                                     </span>
<span class="6530176725815500896" onmouseenter="enter('6530176725815500896');" onmouseout="out('6530176725815500896');" style="">  75  import com.google.android.material.chip.ChipGroup;                                                                </span>
<span class="-6749865676367010343" onmouseenter="enter('-6749865676367010343');" onmouseout="out('-6749865676367010343');" style="">  76  import com.google.android.material.snackbar.Snackbar;                                                             </span>
<span class="-8170925370861558125" onmouseenter="enter('-8170925370861558125');" onmouseout="out('-8170925370861558125');" style="">  77  import com.simperium.client.Bucket;                                                                               </span>
<span class="-8454203534157102839" onmouseenter="enter('-8454203534157102839');" onmouseout="out('-8454203534157102839');" style="">  78  import com.simperium.client.BucketObjectMissingException;                                                         </span>
<span class="-6020507013779766735" onmouseenter="enter('-6020507013779766735');" onmouseout="out('-6020507013779766735');" style="">  79  import com.simperium.client.Query;                                                                                </span>
<span  style="">  80                                                                                                                    </span>
<span class="-8692343821508153377" onmouseenter="enter('-8692343821508153377');" onmouseout="out('-8692343821508153377');" style="">  81  import java.lang.ref.WeakReference;                                                                               </span>
<span class="1562735530241225598" onmouseenter="enter('1562735530241225598');" onmouseout="out('1562735530241225598');" style="">  82  import java.util.Calendar;                                                                                        </span>
<span  style="">  83                                                                                                                    </span>
<span class="-3102294303099779792" onmouseenter="enter('-3102294303099779792');" onmouseout="out('-3102294303099779792');" style="">  84  import static com.automattic.simplenote.analytics.AnalyticsTracker.CATEGORY_NOTE;                                 </span>
<span class="5242531748460347937" onmouseenter="enter('5242531748460347937');" onmouseout="out('5242531748460347937');" style="">  85  import static com.automattic.simplenote.analytics.AnalyticsTracker.Stat.EDITOR_CHECKLIST_INSERTED;                </span>
<span class="-3490868053375355616" onmouseenter="enter('-3490868053375355616');" onmouseout="out('-3490868053375355616');" style="">  86  import static com.automattic.simplenote.analytics.AnalyticsTracker.Stat.EDITOR_NOTE_CONTENT_SHARED;               </span>
<span class="-2121854313245668982" onmouseenter="enter('-2121854313245668982');" onmouseout="out('-2121854313245668982');" style="">  87  import static com.automattic.simplenote.analytics.AnalyticsTracker.Stat.EDITOR_NOTE_EDITED;                       </span>
<span class="-6581780444010205945" onmouseenter="enter('-6581780444010205945');" onmouseout="out('-6581780444010205945');" style="">  88  import static com.automattic.simplenote.analytics.AnalyticsTracker.Stat.EDITOR_NOTE_PUBLISHED;                    </span>
<span class="-9109271177878770606" onmouseenter="enter('-9109271177878770606');" onmouseout="out('-9109271177878770606');" style="">  89  import static com.automattic.simplenote.analytics.AnalyticsTracker.Stat.EDITOR_NOTE_UNPUBLISHED;                  </span>
<span class="1895845895606351499" onmouseenter="enter('1895845895606351499');" onmouseout="out('1895845895606351499');" style="">  90  import static com.automattic.simplenote.analytics.AnalyticsTracker.Stat.EDITOR_TAG_ADDED;                         </span>
<span class="-7938671928844888956" onmouseenter="enter('-7938671928844888956');" onmouseout="out('-7938671928844888956');" style="">  91  import static com.automattic.simplenote.analytics.AnalyticsTracker.Stat.EDITOR_TAG_REMOVED;                       </span>
<span class="8057784740076816561" onmouseenter="enter('8057784740076816561');" onmouseout="out('8057784740076816561');" style="">  92  import static com.automattic.simplenote.utils.SearchTokenizer.SPACE;                                              </span>

<span  style="">  93                                                                                                                    </span>
<span class="-5596461229958448202" onmouseenter="enter('-5596461229958448202');" onmouseout="out('-5596461229958448202');" style="">  94  public class NoteEditorFragment extends Fragment implements Bucket.Listener&lt;Note&gt;,                                </span>
<span class="-9099249676109797171" onmouseenter="enter('-9099249676109797171');" onmouseout="out('-9099249676109797171');" style="">  95          TextWatcher, OnTagAddedListener, View.OnFocusChangeListener,                                              </span>
<span class="-4114387936964500842" onmouseenter="enter('-4114387936964500842');" onmouseout="out('-4114387936964500842');" style="">  96          SimplenoteEditText.OnSelectionChangedListener,                                                            </span>
<span class="-5510788947576290679" onmouseenter="enter('-5510788947576290679');" onmouseout="out('-5510788947576290679');" style="">  97          ShareBottomSheetDialog.ShareSheetListener,                                                                </span>
<span class="2293972252045109195" onmouseenter="enter('2293972252045109195');" onmouseout="out('2293972252045109195');" style="">  98          HistoryBottomSheetDialog.HistorySheetListener,                                                            </span>
<span class="-712538187674189072" onmouseenter="enter('-712538187674189072');" onmouseout="out('-712538187674189072');" style="">  99          SimplenoteEditText.OnCheckboxToggledListener {                                                            </span>
<span  style=""> 100                                                                                                                    </span>
<span class="7313308760576274084" onmouseenter="enter('7313308760576274084');" onmouseout="out('7313308760576274084');" style=""> 101      public static final String ARG_IS_FROM_WIDGET = &quot;is_from_widget&quot;;                                             </span>
<span class="-4619625032881090052" onmouseenter="enter('-4619625032881090052');" onmouseout="out('-4619625032881090052');" style=""> 102      public static final String ARG_ITEM_ID = &quot;item_id&quot;;                                                           </span>
<span class="-7299684920632401552" onmouseenter="enter('-7299684920632401552');" onmouseout="out('-7299684920632401552');" style=""> 103      public static final String ARG_NEW_NOTE = &quot;new_note&quot;;                                                         </span>
<span class="5570942911396170891" onmouseenter="enter('5570942911396170891');" onmouseout="out('5570942911396170891');" style=""> 104      public static final String ARG_MATCH_OFFSETS = &quot;match_offsets&quot;;                                               </span>
<span class="8145563106929735928" onmouseenter="enter('8145563106929735928');" onmouseout="out('8145563106929735928');" style=""> 105      public static final String ARG_MARKDOWN_ENABLED = &quot;markdown_enabled&quot;;                                         </span>
<span class="-9204037548779502592" onmouseenter="enter('-9204037548779502592');" onmouseout="out('-9204037548779502592');" style=""> 106      public static final String ARG_PREVIEW_ENABLED = &quot;preview_enabled&quot;;                                           </span>
<span class="-4900097812038151447" onmouseenter="enter('-4900097812038151447');" onmouseout="out('-4900097812038151447');" style=""> 107      private static final String STATE_NOTE_ID = &quot;state_note_id&quot;;                                                  </span>
<span class="8491452362607628076" onmouseenter="enter('8491452362607628076');" onmouseout="out('8491452362607628076');" style=""> 108      private static final int AUTOSAVE_DELAY_MILLIS = 2000;                                                        </span>
<span class="6474488624255872222" onmouseenter="enter('6474488624255872222');" onmouseout="out('6474488624255872222');" style=""> 109      private static final int MAX_REVISIONS = 30;                                                                  </span>
<span class="2597021995687752472" onmouseenter="enter('2597021995687752472');" onmouseout="out('2597021995687752472');" style=""> 110      private static final int PUBLISH_TIMEOUT = 20000;                                                             </span>
<span class="3616229628179044566" onmouseenter="enter('3616229628179044566');" onmouseout="out('3616229628179044566');" style=""> 111      private static final int HISTORY_TIMEOUT = 10000;                                                             </span>
<span class="-6846870049312317979" onmouseenter="enter('-6846870049312317979');" onmouseout="out('-6846870049312317979');" style=""> 112      private Note mNote;                                                                                           </span>
<span class="-567099590261614492" onmouseenter="enter('-567099590261614492');" onmouseout="out('-567099590261614492');" style=""> 113      private final Runnable mAutoSaveRunnable = new Runnable() {                                                   </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 114          @Override                                                                                                 </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 115          public void run() {                                                                                       </span>
<span class="-2186856349666885424" onmouseenter="enter('-2186856349666885424');" onmouseout="out('-2186856349666885424');" style=""> 116              saveAndSyncNote();                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 117          }                                                                                                         </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 118      };                                                                                                            </span>
<span class="-7913886194286774922" onmouseenter="enter('-7913886194286774922');" onmouseout="out('-7913886194286774922');" style=""> 119      private Bucket&lt;Note&gt; mNotesBucket;                                                                            </span>
<span class="335650161029573145" onmouseenter="enter('335650161029573145');" onmouseout="out('335650161029573145');" style=""> 120      private View mRootView;                                                                                       </span>
<span class="8292114391111638673" onmouseenter="enter('8292114391111638673');" onmouseout="out('8292114391111638673');" style=""> 121      private View mTagPadding;                                                                                     </span>
<span class="6580801006778009663" onmouseenter="enter('6580801006778009663');" onmouseout="out('6580801006778009663');" style=""> 122      private SimplenoteEditText mContentEditText;                                                                  </span>
<span class="-1116191624704212145" onmouseenter="enter('-1116191624704212145');" onmouseout="out('-1116191624704212145');" style=""> 123      private ChipGroup mTagChips;                                                                                  </span>
<span class="7794609246836871312" onmouseenter="enter('7794609246836871312');" onmouseout="out('7794609246836871312');" style=""> 124      private TagsMultiAutoCompleteTextView mTagInput;                                                              </span>
<span class="6494121288462075344" onmouseenter="enter('6494121288462075344');" onmouseout="out('6494121288462075344');" style=""> 125      private Handler mAutoSaveHandler;                                                                             </span>
<span class="8783277907965445564" onmouseenter="enter('8783277907965445564');" onmouseout="out('8783277907965445564');" style=""> 126      private Handler mPublishTimeoutHandler;                                                                       </span>
<span class="4217449185156868905" onmouseenter="enter('4217449185156868905');" onmouseout="out('4217449185156868905');" style=""> 127      private Handler mHistoryTimeoutHandler;                                                                       </span>
<span class="-1776320876088405367" onmouseenter="enter('-1776320876088405367');" onmouseout="out('-1776320876088405367');" style=""> 128      private LinearLayout mPlaceholderView;                                                                        </span>
<span class="-5862875858497045082" onmouseenter="enter('-5862875858497045082');" onmouseout="out('-5862875858497045082');" style=""> 129      private CursorAdapter mAutocompleteAdapter;                                                                   </span>
<span class="-7523089573477153489" onmouseenter="enter('-7523089573477153489');" onmouseout="out('-7523089573477153489');" style=""> 130      private boolean mIsLoadingNote;                                                                               </span>
<span class="-721861736726211964" onmouseenter="enter('-721861736726211964');" onmouseout="out('-721861736726211964');" style=""> 131      private boolean mIsMarkdownEnabled;                                                                           </span>
<span class="5667351599274937983" onmouseenter="enter('5667351599274937983');" onmouseout="out('5667351599274937983');" style=""> 132      private boolean mIsPreviewEnabled;                                                                            </span>
<span class="1780690803770096596" onmouseenter="enter('1780690803770096596');" onmouseout="out('1780690803770096596');" style=""> 133      private boolean mShouldScrollToSearchMatch;                                                                   </span>
<span class="7307228847460234411" onmouseenter="enter('7307228847460234411');" onmouseout="out('7307228847460234411');" style=""> 134      private ActionMode mActionMode;                                                                               </span>
<span class="6272698018239268533" onmouseenter="enter('6272698018239268533');" onmouseout="out('6272698018239268533');" style=""> 135      private MenuItem mChecklistMenuItem;                                                                          </span>
<span class="-801211553419280849" onmouseenter="enter('-801211553419280849');" onmouseout="out('-801211553419280849');" style=""> 136      private MenuItem mCopyMenuItem;                                                                               </span>
<span class="-8722853698202618925" onmouseenter="enter('-8722853698202618925');" onmouseout="out('-8722853698202618925');" style=""> 137      private MenuItem mInformationMenuItem;                                                                        </span>
<span class="6754990951372191595" onmouseenter="enter('6754990951372191595');" onmouseout="out('6754990951372191595');" style=""> 138      private MenuItem mShareMenuItem;                                                                              </span>
<span class="-1934738222867341331" onmouseenter="enter('-1934738222867341331');" onmouseout="out('-1934738222867341331');" style=""> 139      private MenuItem mViewLinkMenuItem;                                                                           </span>
<span class="-3624836155172024592" onmouseenter="enter('-3624836155172024592');" onmouseout="out('-3624836155172024592');" style=""> 140      private String mLinkUrl;                                                                                      </span>
<span class="-680149036339568713" onmouseenter="enter('-680149036339568713');" onmouseout="out('-680149036339568713');" style=""> 141      private String mLinkText;                                                                                     </span>
<span class="-8355060532383088001" onmouseenter="enter('-8355060532383088001');" onmouseout="out('-8355060532383088001');" style=""> 142      private MatchOffsetHighlighter mHighlighter;                                                                  </span>

<span class="-2893651165769435735" onmouseenter="enter('-2893651165769435735');" onmouseout="out('-2893651165769435735');" style=""> 143      private Drawable mCallIcon;                                                                                   </span>
<span class="-4798548703316944753" onmouseenter="enter('-4798548703316944753');" onmouseout="out('-4798548703316944753');" style=""> 144      private Drawable mCopyIcon;                                                                                   </span>
<span class="6775927648012186278" onmouseenter="enter('6775927648012186278');" onmouseout="out('6775927648012186278');" style=""> 145      private Drawable mEmailIcon;                                                                                  </span>

<span class="-2947594512272302462" onmouseenter="enter('-2947594512272302462');" onmouseout="out('-2947594512272302462');" style=""> 146      private Drawable mMapIcon;                                                                                    </span>
<span class="-8263922286266999556" onmouseenter="enter('-8263922286266999556');" onmouseout="out('-8263922286266999556');" style=""> 147      private Drawable mShareIcon;                                                                                  </span>
<span class="-3046310933001836521" onmouseenter="enter('-3046310933001836521');" onmouseout="out('-3046310933001836521');" style=""> 148      private Drawable mBrowserIcon;                                                                                </span>
<span class="-7542236593744276396" onmouseenter="enter('-7542236593744276396');" onmouseout="out('-7542236593744276396');" style=""> 149      private MatchOffsetHighlighter.SpanFactory mMatchHighlighter;                                                 </span>
<span class="2689815831275839045" onmouseenter="enter('2689815831275839045');" onmouseout="out('2689815831275839045');" style=""> 150      private String mMatchOffsets;                                                                                 </span>
<span class="-7790101837861097441" onmouseenter="enter('-7790101837861097441');" onmouseout="out('-7790101837861097441');" style=""> 151      private int mCurrentCursorPosition;                                                                           </span>
<span class="6178043190004357016" onmouseenter="enter('6178043190004357016');" onmouseout="out('6178043190004357016');" style=""> 152      private HistoryBottomSheetDialog mHistoryBottomSheet;                                                         </span>
<span class="-2764923775971952187" onmouseenter="enter('-2764923775971952187');" onmouseout="out('-2764923775971952187');" style=""> 153      private boolean mIsPaused;                                                                                    </span>
<span class="-4741322818714001783" onmouseenter="enter('-4741322818714001783');" onmouseout="out('-4741322818714001783');" style=""> 154      private boolean mIsFromWidget;                                                                                </span>
<span  style=""> 155                                                                                                                    </span>
<span class="-595864044689580029" onmouseenter="enter('-595864044689580029');" onmouseout="out('-595864044689580029');" style=""> 156      // Hides the history bottom sheet if no revisions are loaded                                                  </span>
<span class="9136224915231079842" onmouseenter="enter('9136224915231079842');" onmouseout="out('9136224915231079842');" style=""> 157      private final Runnable mHistoryTimeoutRunnable = new Runnable() {                                             </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 158          @Override                                                                                                 </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 159          public void run() {                                                                                       </span>
<span class="5514287417242355685" onmouseenter="enter('5514287417242355685');" onmouseout="out('5514287417242355685');" style=""> 160              if (!isAdded()) {                                                                                     </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 161                  return;                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 162              }                                                                                                     </span>
<span  style=""> 163                                                                                                                    </span>
<span class="5713980397306524156" onmouseenter="enter('5713980397306524156');" onmouseout="out('5713980397306524156');" style=""> 164              requireActivity().runOnUiThread(new Runnable() {                                                      </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 165                  @Override                                                                                         </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 166                  public void run() {                                                                               </span>
<span class="-3311389934398547914" onmouseenter="enter('-3311389934398547914');" onmouseout="out('-3311389934398547914');" style=""><abbr title=" 167                      if (mHistoryBottomSheet.getDialog() != null &amp;&amp; mHistoryBottomSheet.getDialog().isShowing() &amp;&amp; !mHistoryBottomSheet.isHistoryLoaded()) {"> 167                      if (mHistoryBottomSheet.getDialog() != null &amp;&amp; mHistoryBottomSheet.getDialog().isShowing() &amp;&amp; 🔵</abbr></span>
<span class="-2599981510781765889" onmouseenter="enter('-2599981510781765889');" onmouseout="out('-2599981510781765889');" style=""> 168                          mHistoryBottomSheet.dismiss();                                                            </span>
<span class="-1949769614201595359" onmouseenter="enter('-1949769614201595359');" onmouseout="out('-1949769614201595359');" style=""> 169                          Toast.makeText(getActivity(), R.string.error_history, Toast.LENGTH_LONG).show();          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 170                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 171                  }                                                                                                 </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 172              });                                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 173          }                                                                                                         </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 174      };                                                                                                            </span>
<span class="-7982825583780013979" onmouseenter="enter('-7982825583780013979');" onmouseout="out('-7982825583780013979');" style=""> 175      private InfoBottomSheetDialog mInfoBottomSheet;                                                               </span>
<span class="3825770423127948234" onmouseenter="enter('3825770423127948234');" onmouseout="out('3825770423127948234');" style=""> 176      private ShareBottomSheetDialog mShareBottomSheet;                                                             </span>
<span class="9084056993766846780" onmouseenter="enter('9084056993766846780');" onmouseout="out('9084056993766846780');" style=""> 177      // Contextual action bar for dealing with links                                                               </span>
<span class="7674077006773948876" onmouseenter="enter('7674077006773948876');" onmouseout="out('7674077006773948876');" style=""> 178      private final ActionMode.Callback mActionModeCallback = new ActionMode.Callback() {                           </span>
<span class="-5830922032047880245" onmouseenter="enter('-5830922032047880245');" onmouseout="out('-5830922032047880245');" style=""> 179          // Called when the action mode is created; startActionMode() was called                                   </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 180          @Override                                                                                                 </span>
<span class="6869646826473679297" onmouseenter="enter('6869646826473679297');" onmouseout="out('6869646826473679297');" style=""> 181          public boolean onCreateActionMode(ActionMode mode, Menu menu) {                                           </span>
<span class="-5328486553851934265" onmouseenter="enter('-5328486553851934265');" onmouseout="out('-5328486553851934265');" style=""> 182              // Inflate a menu resource providing context menu items                                               </span>
<span class="8164139660214751060" onmouseenter="enter('8164139660214751060');" onmouseout="out('8164139660214751060');" style=""> 183              MenuInflater inflater = mode.getMenuInflater();                                                       </span>
<span  style=""> 184                                                                                                                    </span>
<span class="-1400051225095864167" onmouseenter="enter('-1400051225095864167');" onmouseout="out('-1400051225095864167');" style=""> 185              if (inflater != null) {                                                                               </span>
<span class="6552624979414277895" onmouseenter="enter('6552624979414277895');" onmouseout="out('6552624979414277895');" style=""> 186                  inflater.inflate(R.menu.view_link, menu);                                                         </span>
<span class="1687703529546627770" onmouseenter="enter('1687703529546627770');" onmouseout="out('1687703529546627770');" style=""> 187                  mCopyMenuItem = menu.findItem(R.id.menu_copy);                                                    </span>
<span class="-7121630790551700692" onmouseenter="enter('-7121630790551700692');" onmouseout="out('-7121630790551700692');" style=""> 188                  mShareMenuItem = menu.findItem(R.id.menu_share);                                                  </span>
<span class="2045169504868185532" onmouseenter="enter('2045169504868185532');" onmouseout="out('2045169504868185532');" style=""> 189                  mViewLinkMenuItem = menu.findItem(R.id.menu_view_link);                                           </span>
<span class="4190298810187820509" onmouseenter="enter('4190298810187820509');" onmouseout="out('4190298810187820509');" style=""> 190                  mode.setTitle(getString(R.string.link));                                                          </span>
<span class="-2927630225150463376" onmouseenter="enter('-2927630225150463376');" onmouseout="out('-2927630225150463376');" style=""> 191                  mode.setTitleOptionalHint(false);                                                                 </span>
<span  style=""> 192                                                                                                                    </span>
<span class="-5146912340244450550" onmouseenter="enter('-5146912340244450550');" onmouseout="out('-5146912340244450550');" style=""> 193                  DrawableUtils.tintMenuWithAttribute(getActivity(), menu, R.attr.toolbarIconColor);                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 194              }                                                                                                     </span>
<span  style=""> 195                                                                                                                    </span>
<span class="397900323864486173" onmouseenter="enter('397900323864486173');" onmouseout="out('397900323864486173');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"><abbr title=" 196 -            int colorResId = ThemeUtils.isLightTheme(requireContext()) ? R.color.background_light : R.color.background_dark;"> 196 -            int colorResId = ThemeUtils.isLightTheme(requireContext()) ? R.color.background_light : R.color.backgr🔵</abbr></span>
<span class="-1803795242967224864" onmouseenter="enter('-1803795242967224864');" onmouseout="out('-1803795242967224864');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"><abbr title=" 197 -            requireActivity().getWindow().setStatusBarColor(getResources().getColor(colorResId, requireActivity().getTheme()));"> 197 -            requireActivity().getWindow().setStatusBarColor(getResources().getColor(colorResId, requireActivity().🔵</abbr></span>
<span class="2269582470475983092" onmouseenter="enter('2269582470475983092');" onmouseout="out('2269582470475983092');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"><abbr title=" 198 +            requireActivity().getWindow().setStatusBarColor(ThemeUtils.getColorFromAttribute(requireContext(), R.attr.mainBackgroundColor));"> 198 +            requireActivity().getWindow().setStatusBarColor(ThemeUtils.getColorFromAttribute(requireContext(), R.a🔵</abbr></span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 199              return true;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 200          }                                                                                                         </span>
<span  style=""> 201                                                                                                                    </span>
<span class="-7885162724385925248" onmouseenter="enter('-7885162724385925248');" onmouseout="out('-7885162724385925248');" style=""> 202          // Called each time the action mode is shown. Always called after onCreateActionMode, but                 </span>
<span class="6140331646129020842" onmouseenter="enter('6140331646129020842');" onmouseout="out('6140331646129020842');" style=""> 203          // may be called multiple times if the mode is invalidated.                                               </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 204          @Override                                                                                                 </span>
<span class="5392123371105216364" onmouseenter="enter('5392123371105216364');" onmouseout="out('5392123371105216364');" style=""> 205          public boolean onPrepareActionMode(ActionMode mode, Menu menu) {                                          </span>
<span class="9220029862843236189" onmouseenter="enter('9220029862843236189');" onmouseout="out('9220029862843236189');" style=""> 206              return false; // Return false if nothing is done                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 207          }                                                                                                         </span>
<span  style=""> 208                                                                                                                    </span>
<span class="-918812678605329556" onmouseenter="enter('-918812678605329556');" onmouseout="out('-918812678605329556');" style=""> 209          // Called when the user selects a contextual menu item                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 210          @Override                                                                                                 </span>
<span class="816131742774025467" onmouseenter="enter('816131742774025467');" onmouseout="out('816131742774025467');" style=""> 211          public boolean onActionItemClicked(ActionMode mode, MenuItem item) {                                      </span>
<span class="2068182408853392247" onmouseenter="enter('2068182408853392247');" onmouseout="out('2068182408853392247');" style=""> 212              switch (item.getItemId()) {                                                                           </span>
<span class="1241487664924667668" onmouseenter="enter('1241487664924667668');" onmouseout="out('1241487664924667668');" style=""> 213                  case R.id.menu_view_link:                                                                         </span>
<span class="2689068574112651560" onmouseenter="enter('2689068574112651560');" onmouseout="out('2689068574112651560');" style=""> 214                      if (mLinkUrl != null) {                                                                       </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 215                          try {                                                                                     </span>
<span class="-2933476939259365458" onmouseenter="enter('-2933476939259365458');" onmouseout="out('-2933476939259365458');" style=""> 216                              BrowserUtils.launchBrowserOrShowError(requireContext(), mLinkUrl);                    </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 217                          } catch (Exception e) {                                                                   </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 218                              e.printStackTrace();                                                                  </span>









<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 219                          }                                                                                         </span>
<span  style=""> 220                                                                                                                    </span>
<span class="-5985541663234456921" onmouseenter="enter('-5985541663234456921');" onmouseout="out('-5985541663234456921');" style=""> 221                          mode.finish(); // Action picked, so close the CAB                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 222                      }                                                                                             </span>
<span  style=""> 223                                                                                                                    </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 224                      return true;                                                                                  </span>
<span class="1323072004784584241" onmouseenter="enter('1323072004784584241');" onmouseout="out('1323072004784584241');" style=""> 225                  case R.id.menu_copy:                                                                              </span>
<span class="5917848124130151943" onmouseenter="enter('5917848124130151943');" onmouseout="out('5917848124130151943');" style=""> 226                      if (mLinkText != null &amp;&amp; getActivity() != null) {                                             </span>
<span class="-3995442483487827848" onmouseenter="enter('-3995442483487827848');" onmouseout="out('-3995442483487827848');" style=""> 227                          if (BrowserUtils.copyToClipboard(requireContext(), mLinkText)) {                          </span>
<span class="3795490233575843146" onmouseenter="enter('3795490233575843146');" onmouseout="out('3795490233575843146');" style=""> 228                              Snackbar.make(mRootView, R.string.link_copied, Snackbar.LENGTH_SHORT).show();         </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 229                          } else {                                                                                  </span>
<span class="8359220226685626421" onmouseenter="enter('8359220226685626421');" onmouseout="out('8359220226685626421');" style=""> 230                              Snackbar.make(mRootView, R.string.link_copied_failure, Snackbar.LENGTH_SHORT).show(); </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 231                          }                                                                                         </span>
<span  style=""> 232                                                                                                                    </span>
<span class="5768223614092288606" onmouseenter="enter('5768223614092288606');" onmouseout="out('5768223614092288606');" style=""> 233                          mode.finish();                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 234                      }                                                                                             </span>
<span  style=""> 235                                                                                                                    </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 236                      return true;                                                                                  </span>
<span class="4712317589059090097" onmouseenter="enter('4712317589059090097');" onmouseout="out('4712317589059090097');" style=""> 237                  case R.id.menu_share:                                                                             </span>
<span class="-6928924091126055668" onmouseenter="enter('-6928924091126055668');" onmouseout="out('-6928924091126055668');" style=""> 238                      if (mLinkText != null) {                                                                      </span>
<span class="8185075650085964623" onmouseenter="enter('8185075650085964623');" onmouseout="out('8185075650085964623');" style=""> 239                          showShare(mLinkText);                                                                     </span>
<span class="5768223614092288606" onmouseenter="enter('5768223614092288606');" onmouseout="out('5768223614092288606');" style=""> 240                          mode.finish();                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 241                      }                                                                                             </span>
<span  style=""> 242                                                                                                                    </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 243                      return true;                                                                                  </span>
<span class="-8178136317704390296" onmouseenter="enter('-8178136317704390296');" onmouseout="out('-8178136317704390296');" style=""> 244                  default:                                                                                          </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 245                      return false;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 246              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 247          }                                                                                                         </span>
<span  style=""> 248                                                                                                                    </span>
<span class="2525157012953828009" onmouseenter="enter('2525157012953828009');" onmouseout="out('2525157012953828009');" style=""> 249          // Called when the user exits the action mode                                                             </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 250          @Override                                                                                                 </span>
<span class="-2232977199830239129" onmouseenter="enter('-2232977199830239129');" onmouseout="out('-2232977199830239129');" style=""> 251          public void onDestroyActionMode(ActionMode mode) {                                                        </span>
<span class="291405596407736607" onmouseenter="enter('291405596407736607');" onmouseout="out('291405596407736607');" style=""> 252              mActionMode = null;                                                                                   </span>





<span class="-8355266079523609200" onmouseenter="enter('-8355266079523609200');" onmouseout="out('-8355266079523609200');" style=""> 253              new Handler().postDelayed(                                                                            </span>
<span class="4860439059348199630" onmouseenter="enter('4860439059348199630');" onmouseout="out('4860439059348199630');" style=""> 254                  new Runnable() {                                                                                  </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 255                      @Override                                                                                     </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 256                      public void run() {                                                                           </span>
<span class="-407723737955280968" onmouseenter="enter('-407723737955280968');" onmouseout="out('-407723737955280968');" style=""><abbr title=" 257                          requireActivity().getWindow().setStatusBarColor(getResources().getColor(android.R.color.transparent, requireActivity().getTheme()));"> 257                          requireActivity().getWindow().setStatusBarColor(getResources().getColor(android.R.color.tr🔵</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 258                      }                                                                                             </span>
<span class="-4102417550988568311" onmouseenter="enter('-4102417550988568311');" onmouseout="out('-4102417550988568311');" style=""> 259                  },                                                                                                </span>
<span class="-4127758747219082725" onmouseenter="enter('-4127758747219082725');" onmouseout="out('-4127758747219082725');" style=""> 260                  requireContext().getResources().getInteger(android.R.integer.config_mediumAnimTime)               </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 261              );                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 262          }                                                                                                         </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 263      };                                                                                                            </span>
<span class="-2321350652617580771" onmouseenter="enter('-2321350652617580771');" onmouseout="out('-2321350652617580771');" style=""> 264      private Snackbar mPublishingSnackbar;                                                                         </span>
<span class="3063974407169104073" onmouseenter="enter('3063974407169104073');" onmouseout="out('3063974407169104073');" style=""> 265      private boolean mHideActionOnSuccess;                                                                         </span>
<span class="1686976550776889109" onmouseenter="enter('1686976550776889109');" onmouseout="out('1686976550776889109');" style=""> 266      // Resets note publish status if Simperium never returned the new publish status                              </span>
<span class="4037453836709826519" onmouseenter="enter('4037453836709826519');" onmouseout="out('4037453836709826519');" style=""> 267      private final Runnable mPublishTimeoutRunnable = new Runnable() {                                             </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 268          @Override                                                                                                 </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 269          public void run() {                                                                                       </span>
<span class="6112154992837754036" onmouseenter="enter('6112154992837754036');" onmouseout="out('6112154992837754036');" style=""> 270              if (!isAdded()) return;                                                                               </span>
<span  style=""> 271                                                                                                                    </span>
<span class="5713980397306524156" onmouseenter="enter('5713980397306524156');" onmouseout="out('5713980397306524156');" style=""> 272              requireActivity().runOnUiThread(new Runnable() {                                                      </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 273                  @Override                                                                                         </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 274                  public void run() {                                                                               </span>
<span  style=""> 275                                                                                                                    </span>
<span class="-6752199236124778161" onmouseenter="enter('-6752199236124778161');" onmouseout="out('-6752199236124778161');" style=""> 276                      mNote.setPublished(!mNote.isPublished());                                                     </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style=""> 277                      mNote.save();                                                                                 </span>
<span  style=""> 278                                                                                                                    </span>
<span class="7513447915538188553" onmouseenter="enter('7513447915538188553');" onmouseout="out('7513447915538188553');" style=""> 279                      updatePublishedState(false);                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 280                  }                                                                                                 </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 281              });                                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 282          }                                                                                                         </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 283      };                                                                                                            </span>
<span class="-3565365231364209094" onmouseenter="enter('-3565365231364209094');" onmouseout="out('-3565365231364209094');" style=""> 284      private NoteMarkdownFragment mNoteMarkdownFragment;                                                           </span>
<span class="8334835640808763040" onmouseenter="enter('8334835640808763040');" onmouseout="out('8334835640808763040');" style=""> 285      private String mCss;                                                                                          </span>
<span class="2417381421481423525" onmouseenter="enter('2417381421481423525');" onmouseout="out('2417381421481423525');" style=""> 286      private WebView mMarkdown;                                                                                    </span>
<span  style=""> 287                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 288      /**                                                                                                           </span>
<span class="7780585517980788373" onmouseenter="enter('7780585517980788373');" onmouseout="out('7780585517980788373');" style=""> 289       * Mandatory empty constructor for the fragment manager to instantiate the                                    </span>
<span class="7130060501227883159" onmouseenter="enter('7130060501227883159');" onmouseout="out('7130060501227883159');" style=""> 290       * fragment (e.g. upon screen orientation changes).                                                           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 291       */                                                                                                           </span>
<span class="2055429757813344166" onmouseenter="enter('2055429757813344166');" onmouseout="out('2055429757813344166');" style=""> 292      public NoteEditorFragment() {                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 293      }                                                                                                             </span>
<span  style=""> 294                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 295      @Override                                                                                                     </span>
<span class="2351026872416697132" onmouseenter="enter('2351026872416697132');" onmouseout="out('2351026872416697132');" style=""> 296      public void onCreate(Bundle savedInstanceState) {                                                             </span>
<span class="8760898167212384157" onmouseenter="enter('8760898167212384157');" onmouseout="out('8760898167212384157');" style=""> 297          super.onCreate(savedInstanceState);                                                                       </span>
<span class="-8622194682109655372" onmouseenter="enter('-8622194682109655372');" onmouseout="out('-8622194682109655372');" style=""> 298          AppLog.add(Type.NETWORK, NetworkUtils.getNetworkInfo(requireContext()));                                  </span>
<span class="4067704072097909993" onmouseenter="enter('4067704072097909993');" onmouseout="out('4067704072097909993');" style=""> 299          AppLog.add(Type.SCREEN, &quot;Created (NoteEditorFragment)&quot;);                                                  </span>
<span class="-7986434609852753971" onmouseenter="enter('-7986434609852753971');" onmouseout="out('-7986434609852753971');" style=""> 300          mInfoBottomSheet = new InfoBottomSheetDialog(this);                                                       </span>
<span class="-3585171833526124401" onmouseenter="enter('-3585171833526124401');" onmouseout="out('-3585171833526124401');" style=""> 301          mShareBottomSheet = new ShareBottomSheetDialog(this, this);                                               </span>
<span class="8727018902564285339" onmouseenter="enter('8727018902564285339');" onmouseout="out('8727018902564285339');" style=""> 302          mHistoryBottomSheet = new HistoryBottomSheetDialog(this, this);                                           </span>
<span  style=""> 303                                                                                                                    </span>
<span class="7015772157047139063" onmouseenter="enter('7015772157047139063');" onmouseout="out('7015772157047139063');" style=""> 304          Simplenote currentApp = (Simplenote) requireActivity().getApplication();                                  </span>
<span class="3464165486447434608" onmouseenter="enter('3464165486447434608');" onmouseout="out('3464165486447434608');" style=""> 305          mNotesBucket = currentApp.getNotesBucket();                                                               </span>
<span  style=""> 306                                                                                                                    </span>
<span class="-5396295556438155472" onmouseenter="enter('-5396295556438155472');" onmouseout="out('-5396295556438155472');" style=""><abbr title=" 307          mCallIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_call_white_24dp, R.attr.actionModeTextColor);"> 307          mCallIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_call_white_24dp, R.attr.a🔵</abbr></span>
<span class="-6467507895043748101" onmouseenter="enter('-6467507895043748101');" onmouseout="out('-6467507895043748101');" style=""><abbr title=" 308          mEmailIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_email_24dp, R.attr.actionModeTextColor);"> 308          mEmailIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_email_24dp, R.attr.actio🔵</abbr></span>

<span class="439472828334727129" onmouseenter="enter('439472828334727129');" onmouseout="out('439472828334727129');" style=""><abbr title=" 309          mMapIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_map_24dp, R.attr.actionModeTextColor);"> 309          mMapIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_map_24dp, R.attr.actionMod🔵</abbr></span>
<span class="6692132481762191849" onmouseenter="enter('6692132481762191849');" onmouseout="out('6692132481762191849');" style=""><abbr title=" 310          mBrowserIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_browser_24dp, R.attr.actionModeTextColor);"> 310          mBrowserIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_browser_24dp, R.attr.a🔵</abbr></span>
<span class="-1469196158673197606" onmouseenter="enter('-1469196158673197606');" onmouseout="out('-1469196158673197606');" style=""><abbr title=" 311          mCopyIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_copy_24dp, R.attr.actionModeTextColor);"> 311          mCopyIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_copy_24dp, R.attr.actionM🔵</abbr></span>
<span class="2974983401105131042" onmouseenter="enter('2974983401105131042');" onmouseout="out('2974983401105131042');" style=""><abbr title=" 312          mShareIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_share_24dp, R.attr.actionModeTextColor);"> 312          mShareIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_share_24dp, R.attr.actio🔵</abbr></span>
<span  style=""> 313                                                                                                                    </span>
<span class="-7557436274459739944" onmouseenter="enter('-7557436274459739944');" onmouseout="out('-7557436274459739944');" style=""> 314          mAutoSaveHandler = new Handler();                                                                         </span>
<span class="5311700283685025064" onmouseenter="enter('5311700283685025064');" onmouseout="out('5311700283685025064');" style=""> 315          mPublishTimeoutHandler = new Handler();                                                                   </span>
<span class="-5335062074040604305" onmouseenter="enter('-5335062074040604305');" onmouseout="out('-5335062074040604305');" style=""> 316          mHistoryTimeoutHandler = new Handler();                                                                   </span>
<span  style=""> 317                                                                                                                    </span>
<span class="-7210994120079343670" onmouseenter="enter('-7210994120079343670');" onmouseout="out('-7210994120079343670');" style=""> 318          mMatchHighlighter = new TextHighlighter(requireActivity(),                                                </span>
<span class="5690198221529347900" onmouseenter="enter('5690198221529347900');" onmouseout="out('5690198221529347900');" style=""> 319                  R.attr.editorSearchHighlightForegroundColor, R.attr.editorSearchHighlightBackgroundColor);        </span>
<span class="-2796700407695620291" onmouseenter="enter('-2796700407695620291');" onmouseout="out('-2796700407695620291');" style=""> 320          mAutocompleteAdapter = new CursorAdapter(getActivity(), null, 0x0) {                                      </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 321              @Override                                                                                             </span>
<span class="5082230411214880762" onmouseenter="enter('5082230411214880762');" onmouseout="out('5082230411214880762');" style=""> 322              public View newView(Context context, Cursor cursor, ViewGroup parent) {                               </span>
<span class="-7341849400851650995" onmouseenter="enter('-7341849400851650995');" onmouseout="out('-7341849400851650995');" style=""> 323                  Activity activity = (Activity) context;                                                           </span>
<span class="-4259990117100818562" onmouseenter="enter('-4259990117100818562');" onmouseout="out('-4259990117100818562');" style=""> 324                  if (activity == null) return null;                                                                </span>
<span class="-3314008061858345993" onmouseenter="enter('-3314008061858345993');" onmouseout="out('-3314008061858345993');" style=""> 325                  return activity.getLayoutInflater().inflate(R.layout.tag_autocomplete_list_item, null);           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 326              }                                                                                                     </span>
<span  style=""> 327                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 328              @Override                                                                                             </span>
<span class="19024103499623332" onmouseenter="enter('19024103499623332');" onmouseout="out('19024103499623332');" style=""> 329              public void bindView(View view, Context context, Cursor cursor) {                                     </span>
<span class="1800045997788095368" onmouseenter="enter('1800045997788095368');" onmouseout="out('1800045997788095368');" style=""> 330                  TextView textView = (TextView) view;                                                              </span>
<span class="6731261465219202848" onmouseenter="enter('6731261465219202848');" onmouseout="out('6731261465219202848');" style=""> 331                  textView.setText(convertToString(cursor));                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 332              }                                                                                                     </span>
<span  style=""> 333                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 334              @Override                                                                                             </span>
<span class="-8397701079695881614" onmouseenter="enter('-8397701079695881614');" onmouseout="out('-8397701079695881614');" style=""> 335              public CharSequence convertToString(Cursor cursor) {                                                  </span>
<span class="-7149458698442797769" onmouseenter="enter('-7149458698442797769');" onmouseout="out('-7149458698442797769');" style=""> 336                  return cursor.getString(cursor.getColumnIndex(Tag.NAME_PROPERTY));                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 337              }                                                                                                     </span>
<span  style=""> 338                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 339              @Override                                                                                             </span>
<span class="-6792310640715402890" onmouseenter="enter('-6792310640715402890');" onmouseout="out('-6792310640715402890');" style=""> 340              public Cursor runQueryOnBackgroundThread(CharSequence filter) {                                       </span>
<span class="-5071525869541290984" onmouseenter="enter('-5071525869541290984');" onmouseout="out('-5071525869541290984');" style=""> 341                  Activity activity = getActivity();                                                                </span>
<span class="-4259990117100818562" onmouseenter="enter('-4259990117100818562');" onmouseout="out('-4259990117100818562');" style=""> 342                  if (activity == null) return null;                                                                </span>
<span class="9016693485500608067" onmouseenter="enter('9016693485500608067');" onmouseout="out('9016693485500608067');" style=""> 343                  Simplenote application = (Simplenote) activity.getApplication();                                  </span>
<span class="-288329532637656436" onmouseenter="enter('-288329532637656436');" onmouseout="out('-288329532637656436');" style=""> 344                  Query&lt;Tag&gt; query = application.getTagsBucket().query();                                           </span>
<span class="-1263658484466254954" onmouseenter="enter('-1263658484466254954');" onmouseout="out('-1263658484466254954');" style=""> 345                  // make the tag name available to the cursor                                                      </span>
<span class="5748018636045801946" onmouseenter="enter('5748018636045801946');" onmouseout="out('5748018636045801946');" style=""> 346                  query.include(Tag.NAME_PROPERTY);                                                                 </span>
<span class="-7615810455976629564" onmouseenter="enter('-7615810455976629564');" onmouseout="out('-7615810455976629564');" style=""> 347                  // sort the tags by their names                                                                   </span>
<span class="5674220988188306819" onmouseenter="enter('5674220988188306819');" onmouseout="out('5674220988188306819');" style=""> 348                  query.order(Tag.NAME_PROPERTY);                                                                   </span>
<span class="8185275162074884971" onmouseenter="enter('8185275162074884971');" onmouseout="out('8185275162074884971');" style=""> 349                  // if there&#x27;s a filter string find only matching tag names                                        </span>
<span class="-2390759895253291766" onmouseenter="enter('-2390759895253291766');" onmouseout="out('-2390759895253291766');" style=""> 350                  if (filter != null)                                                                               </span>
<span class="-8675928632322864405" onmouseenter="enter('-8675928632322864405');" onmouseout="out('-8675928632322864405');" style=""> 351                      query.where(Tag.NAME_PROPERTY, Query.ComparisonType.LIKE, String.format(&quot;%s%%&quot;, filter));     </span>
<span class="8392918727668200780" onmouseenter="enter('8392918727668200780');" onmouseout="out('8392918727668200780');" style=""> 352                  return query.execute();                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 353              }                                                                                                     </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 354          };                                                                                                        </span>
<span  style=""> 355                                                                                                                    </span>
<span class="-2915955960672646870" onmouseenter="enter('-2915955960672646870');" onmouseout="out('-2915955960672646870');" style=""> 356          WidgetUtils.updateNoteWidgets(requireActivity().getApplicationContext());                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 357      }                                                                                                             </span>
<span  style=""> 358                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 359      @Override                                                                                                     </span>
<span class="-3764996828666781026" onmouseenter="enter('-3764996828666781026');" onmouseout="out('-3764996828666781026');" style=""> 360      public View onCreateView(@NonNull LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {  </span>
<span class="3579130562560764282" onmouseenter="enter('3579130562560764282');" onmouseout="out('3579130562560764282');" style=""> 361          mRootView = inflater.inflate(R.layout.fragment_note_editor, container, false);                            </span>
<span class="-4779369533477417305" onmouseenter="enter('-4779369533477417305');" onmouseout="out('-4779369533477417305');" style=""> 362          mContentEditText = mRootView.findViewById(R.id.note_content);                                             </span>
<span class="-2924083774161461664" onmouseenter="enter('-2924083774161461664');" onmouseout="out('-2924083774161461664');" style=""> 363          mContentEditText.addOnSelectionChangedListener(this);                                                     </span>
<span class="5354424100413888199" onmouseenter="enter('5354424100413888199');" onmouseout="out('5354424100413888199');" style=""> 364          mContentEditText.setOnCheckboxToggledListener(this);                                                      </span>
<span class="4799293943910864448" onmouseenter="enter('4799293943910864448');" onmouseout="out('4799293943910864448');" style=""> 365          mContentEditText.setMovementMethod(SimplenoteMovementMethod.getInstance());                               </span>
<span class="-7684087958922635100" onmouseenter="enter('-7684087958922635100');" onmouseout="out('-7684087958922635100');" style=""> 366          mContentEditText.setOnFocusChangeListener(this);                                                          </span>
<span class="7906960005192148215" onmouseenter="enter('7906960005192148215');" onmouseout="out('7906960005192148215');" style=""> 367          mContentEditText.setTextSize(TypedValue.COMPLEX_UNIT_SP, PrefUtils.getFontSize(requireContext()));        </span>
<span class="-8410945612023549246" onmouseenter="enter('-8410945612023549246');" onmouseout="out('-8410945612023549246');" style=""> 368          mTagInput = mRootView.findViewById(R.id.tag_input);                                                       </span>
<span class="-8520636764026895045" onmouseenter="enter('-8520636764026895045');" onmouseout="out('-8520636764026895045');" style=""> 369          mTagInput.setDropDownBackgroundResource(R.drawable.bg_list_popup);                                        </span>
<span class="-8046888072996277100" onmouseenter="enter('-8046888072996277100');" onmouseout="out('-8046888072996277100');" style=""> 370          mTagInput.setTokenizer(new SpaceTokenizer());                                                             </span>
<span class="8277910060096767493" onmouseenter="enter('8277910060096767493');" onmouseout="out('8277910060096767493');" style=""> 371          mTagInput.setOnFocusChangeListener(this);                                                                 </span>
<span class="9064951361673299699" onmouseenter="enter('9064951361673299699');" onmouseout="out('9064951361673299699');" style=""> 372          mTagChips = mRootView.findViewById(R.id.tag_chips);                                                       </span>
<span class="-8852013276583646600" onmouseenter="enter('-8852013276583646600');" onmouseout="out('-8852013276583646600');" style=""> 373          mTagPadding = mRootView.findViewById(R.id.tag_padding);                                                   </span>
<span class="6080374810605667863" onmouseenter="enter('6080374810605667863');" onmouseout="out('6080374810605667863');" style=""> 374          mHighlighter = new MatchOffsetHighlighter(mMatchHighlighter, mContentEditText);                           </span>
<span class="2946335853320733423" onmouseenter="enter('2946335853320733423');" onmouseout="out('2946335853320733423');" style=""> 375          mPlaceholderView = mRootView.findViewById(R.id.placeholder);                                              </span>
<span  style=""> 376                                                                                                                    </span>
<span class="2767702191472733500" onmouseenter="enter('2767702191472733500');" onmouseout="out('2767702191472733500');" style=""> 377          if (DisplayUtils.isLargeScreenLandscape(getActivity()) &amp;&amp; mNote == null) {                                </span>
<span class="-5306578928333558235" onmouseenter="enter('-5306578928333558235');" onmouseout="out('-5306578928333558235');" style=""> 378              mPlaceholderView.setVisibility(View.VISIBLE);                                                         </span>
<span class="-8532471920650411447" onmouseenter="enter('-8532471920650411447');" onmouseout="out('-8532471920650411447');" style=""> 379              requireActivity().invalidateOptionsMenu();                                                            </span>
<span class="-5966136890047999161" onmouseenter="enter('-5966136890047999161');" onmouseout="out('-5966136890047999161');" style=""> 380              mMarkdown = mRootView.findViewById(R.id.markdown);                                                    </span>
















<span class="4171573222855619135" onmouseenter="enter('4171573222855619135');" onmouseout="out('4171573222855619135');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 381 -            mCss = ThemeUtils.isLightTheme(requireContext())                                                      </span>
<span class="2330250883811648743" onmouseenter="enter('2330250883811648743');" onmouseout="out('2330250883811648743');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 382 -                    ? ContextUtils.readCssFile(requireContext(), &quot;light.css&quot;)                                     </span>
<span class="4652247646087549288" onmouseenter="enter('4652247646087549288');" onmouseout="out('4652247646087549288');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 383 -                    : ContextUtils.readCssFile(requireContext(), &quot;dark.css&quot;);                                     </span>
<span class="-5122207664605231942" onmouseenter="enter('-5122207664605231942');" onmouseout="out('-5122207664605231942');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 384 +            mCss = ContextUtils.readCssFile(requireContext(), ThemeUtils.getCssFromStyle(requireContext()));      </span>

<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 385          }                                                                                                         </span>
<span  style=""> 386                                                                                                                    </span>
<span class="3045371367152506055" onmouseenter="enter('3045371367152506055');" onmouseout="out('3045371367152506055');" style=""> 387          mTagInput.setAdapter(mAutocompleteAdapter);                                                               </span>
<span class="-512438581163180757" onmouseenter="enter('-512438581163180757');" onmouseout="out('-512438581163180757');" style=""> 388          Bundle arguments = getArguments();                                                                        </span>
<span  style=""> 389                                                                                                                    </span>
<span class="5652609996770636291" onmouseenter="enter('5652609996770636291');" onmouseout="out('5652609996770636291');" style=""> 390          if (arguments != null &amp;&amp; arguments.containsKey(ARG_ITEM_ID)) {                                            </span>
<span class="592168733134676120" onmouseenter="enter('592168733134676120');" onmouseout="out('592168733134676120');" style=""> 391              // Load note if we were passed a note Id                                                              </span>
<span class="-30854459346766710" onmouseenter="enter('-30854459346766710');" onmouseout="out('-30854459346766710');" style=""> 392              String key = arguments.getString(ARG_ITEM_ID);                                                        </span>
<span  style=""> 393                                                                                                                    </span>
<span class="9138949033848867696" onmouseenter="enter('9138949033848867696');" onmouseout="out('9138949033848867696');" style=""> 394              if (arguments.containsKey(ARG_MATCH_OFFSETS)) {                                                       </span>
<span class="-1831707694683903303" onmouseenter="enter('-1831707694683903303');" onmouseout="out('-1831707694683903303');" style=""> 395                  mMatchOffsets = arguments.getString(ARG_MATCH_OFFSETS);                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 396              }                                                                                                     </span>
<span  style=""> 397                                                                                                                    </span>
<span class="-5471626349746072894" onmouseenter="enter('-5471626349746072894');" onmouseout="out('-5471626349746072894');" style=""> 398              mIsFromWidget = arguments.getBoolean(ARG_IS_FROM_WIDGET);                                             </span>
<span  style=""> 399                                                                                                                    </span>
<span class="7955966257819193736" onmouseenter="enter('7955966257819193736');" onmouseout="out('7955966257819193736');" style=""> 400              if (mIsFromWidget) {                                                                                  </span>
<span class="-5617995102329158939" onmouseenter="enter('-5617995102329158939');" onmouseout="out('-5617995102329158939');" style=""> 401                  AppLog.add(Type.ACTION, &quot;Opened from widget (NoteEditorFragment)&quot;);                               </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 402              } else {                                                                                              </span>
<span class="8953265153297736425" onmouseenter="enter('8953265153297736425');" onmouseout="out('8953265153297736425');" style=""> 403                  AppLog.add(Type.ACTION, &quot;Opened from list (NoteEditorFragment)&quot;);                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 404              }                                                                                                     </span>
<span  style=""> 405                                                                                                                    </span>
<span class="2821548101564163251" onmouseenter="enter('2821548101564163251');" onmouseout="out('2821548101564163251');" style=""> 406              new LoadNoteTask(this).executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR, key);                        </span>
<span class="-7018322201047939593" onmouseenter="enter('-7018322201047939593');" onmouseout="out('-7018322201047939593');" style=""> 407          } else if (DisplayUtils.isLargeScreenLandscape(getActivity()) &amp;&amp; savedInstanceState != null) {            </span>
<span class="-5586601087309648352" onmouseenter="enter('-5586601087309648352');" onmouseout="out('-5586601087309648352');" style=""> 408              // Restore selected note when in dual pane mode                                                       </span>
<span class="-6627973434382116830" onmouseenter="enter('-6627973434382116830');" onmouseout="out('-6627973434382116830');" style=""> 409              String noteId = savedInstanceState.getString(STATE_NOTE_ID);                                          </span>
<span  style=""> 410                                                                                                                    </span>
<span class="3431348253079949637" onmouseenter="enter('3431348253079949637');" onmouseout="out('3431348253079949637');" style=""> 411              if (noteId != null) {                                                                                 </span>
<span class="6131131744168781054" onmouseenter="enter('6131131744168781054');" onmouseout="out('6131131744168781054');" style=""> 412                  setNote(noteId);                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 413              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 414          }                                                                                                         </span>
<span  style=""> 415                                                                                                                    </span>
<span class="-6084360450426647292" onmouseenter="enter('-6084360450426647292');" onmouseout="out('-6084360450426647292');" style=""> 416          ViewTreeObserver viewTreeObserver = mContentEditText.getViewTreeObserver();                               </span>
<span class="5566036156549578856" onmouseenter="enter('5566036156549578856');" onmouseout="out('5566036156549578856');" style=""> 417          viewTreeObserver.addOnGlobalLayoutListener(new ViewTreeObserver.OnGlobalLayoutListener() {                </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 418              @Override                                                                                             </span>
<span class="7412300164717447449" onmouseenter="enter('7412300164717447449');" onmouseout="out('7412300164717447449');" style=""> 419              public void onGlobalLayout() {                                                                        </span>
<span class="-1303582393563450897" onmouseenter="enter('-1303582393563450897');" onmouseout="out('-1303582393563450897');" style=""> 420                  // If a note was loaded with search matches, scroll to the first match in the editor              </span>
<span class="-6404251855291734375" onmouseenter="enter('-6404251855291734375');" onmouseout="out('-6404251855291734375');" style=""> 421                  if (mShouldScrollToSearchMatch &amp;&amp; mMatchOffsets != null) {                                        </span>
<span class="5514287417242355685" onmouseenter="enter('5514287417242355685');" onmouseout="out('5514287417242355685');" style=""> 422                      if (!isAdded()) {                                                                             </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 423                          return;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 424                      }                                                                                             </span>
<span  style=""> 425                                                                                                                    </span>
<span class="-5871446470780506147" onmouseenter="enter('-5871446470780506147');" onmouseout="out('-5871446470780506147');" style=""> 426                      // Get the character location of the first search match                                       </span>
<span class="1328407546550738965" onmouseenter="enter('1328407546550738965');" onmouseout="out('1328407546550738965');" style=""> 427                      int matchLocation = MatchOffsetHighlighter.getFirstMatchLocation(                             </span>
<span class="2395792868164050050" onmouseenter="enter('2395792868164050050');" onmouseout="out('2395792868164050050');" style=""> 428                              mContentEditText.getText(),                                                           </span>
<span class="6736916049865032431" onmouseenter="enter('6736916049865032431');" onmouseout="out('6736916049865032431');" style=""> 429                              mMatchOffsets                                                                         </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 430                      );                                                                                            </span>
<span class="3937327664514143598" onmouseenter="enter('3937327664514143598');" onmouseout="out('3937327664514143598');" style=""> 431                      if (matchLocation == 0) {                                                                     </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 432                          return;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 433                      }                                                                                             </span>
<span  style=""> 434                                                                                                                    </span>
<span class="-8411350726545484842" onmouseenter="enter('-8411350726545484842');" onmouseout="out('-8411350726545484842');" style=""> 435                      // Calculate how far to scroll to bring the match into view                                   </span>
<span class="-8088580226996087877" onmouseenter="enter('-8088580226996087877');" onmouseout="out('-8088580226996087877');" style=""> 436                      Layout layout = mContentEditText.getLayout();                                                 </span>
<span class="4818857677317424270" onmouseenter="enter('4818857677317424270');" onmouseout="out('4818857677317424270');" style=""> 437                      int lineTop = layout.getLineTop(layout.getLineForOffset(matchLocation));                      </span>
<span class="1129057737754431865" onmouseenter="enter('1129057737754431865');" onmouseout="out('1129057737754431865');" style=""> 438                      ((NestedScrollView) mRootView).smoothScrollTo(0, lineTop);                                    </span>
<span class="1093252497226085042" onmouseenter="enter('1093252497226085042');" onmouseout="out('1093252497226085042');" style=""> 439                      mShouldScrollToSearchMatch = false;                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 440                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 441              }                                                                                                     </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 442          });                                                                                                       </span>
<span class="7823602444079418117" onmouseenter="enter('7823602444079418117');" onmouseout="out('7823602444079418117');" style=""> 443          setHasOptionsMenu(true);                                                                                  </span>
<span class="-6258722083869792010" onmouseenter="enter('-6258722083869792010');" onmouseout="out('-6258722083869792010');" style=""> 444          return mRootView;                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 445      }                                                                                                             </span>
<span  style=""> 446                                                                                                                    </span>
<span class="4710528937935082296" onmouseenter="enter('4710528937935082296');" onmouseout="out('4710528937935082296');" style=""> 447      public void scrollToMatch(int location) {                                                                     </span>
<span class="-7481427962806884462" onmouseenter="enter('-7481427962806884462');" onmouseout="out('-7481427962806884462');" style=""> 448          if (isAdded()) {                                                                                          </span>
<span class="-8411350726545484842" onmouseenter="enter('-8411350726545484842');" onmouseout="out('-8411350726545484842');" style=""> 449              // Calculate how far to scroll to bring the match into view                                           </span>
<span class="-8088580226996087877" onmouseenter="enter('-8088580226996087877');" onmouseout="out('-8088580226996087877');" style=""> 450              Layout layout = mContentEditText.getLayout();                                                         </span>
<span class="7976110079331789160" onmouseenter="enter('7976110079331789160');" onmouseout="out('7976110079331789160');" style=""> 451              int lineTop = layout.getLineTop(layout.getLineForOffset(location));                                   </span>
<span class="1129057737754431865" onmouseenter="enter('1129057737754431865');" onmouseout="out('1129057737754431865');" style=""> 452              ((NestedScrollView) mRootView).smoothScrollTo(0, lineTop);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 453          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 454      }                                                                                                             </span>
<span  style=""> 455                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 456      @Override                                                                                                     </span>
<span class="3212580988936830895" onmouseenter="enter('3212580988936830895');" onmouseout="out('3212580988936830895');" style=""> 457      public void onResume() {                                                                                      </span>
<span class="-6840488528374549322" onmouseenter="enter('-6840488528374549322');" onmouseout="out('-6840488528374549322');" style=""> 458          super.onResume();                                                                                         </span>
<span class="-295722270474880574" onmouseenter="enter('-295722270474880574');" onmouseout="out('-295722270474880574');" style=""> 459          mNotesBucket.start();                                                                                     </span>
<span class="-2614582349717816655" onmouseenter="enter('-2614582349717816655');" onmouseout="out('-2614582349717816655');" style=""> 460          AppLog.add(Type.SYNC, &quot;Started note bucket (NoteEditorFragment)&quot;);                                        </span>
<span class="8320491026461558488" onmouseenter="enter('8320491026461558488');" onmouseout="out('8320491026461558488');" style=""> 461          mNotesBucket.addListener(this);                                                                           </span>
<span class="5183219019881866175" onmouseenter="enter('5183219019881866175');" onmouseout="out('5183219019881866175');" style=""> 462          mTagInput.setOnTagAddedListener(this);                                                                    </span>
<span  style=""> 463                                                                                                                    </span>
<span class="-8630351771722931094" onmouseenter="enter('-8630351771722931094');" onmouseout="out('-8630351771722931094');" style=""> 464          if (mContentEditText != null) {                                                                           </span>
<span class="7906960005192148215" onmouseenter="enter('7906960005192148215');" onmouseout="out('7906960005192148215');" style=""> 465              mContentEditText.setTextSize(TypedValue.COMPLEX_UNIT_SP, PrefUtils.getFontSize(requireContext()));    </span>
<span  style=""> 466                                                                                                                    </span>
<span class="-9045903618847243853" onmouseenter="enter('-9045903618847243853');" onmouseout="out('-9045903618847243853');" style=""> 467              if (mContentEditText.hasFocus()) {                                                                    </span>
<span class="2378139384018001812" onmouseenter="enter('2378139384018001812');" onmouseout="out('2378139384018001812');" style=""> 468                  showSoftKeyboard();                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 469              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 470          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 471      }                                                                                                             </span>
<span  style=""> 472                                                                                                                    </span>
<span class="-7408745136026343325" onmouseenter="enter('-7408745136026343325');" onmouseout="out('-7408745136026343325');" style=""> 473      private void showSoftKeyboard() {                                                                             </span>
<span class="7162501222170899627" onmouseenter="enter('7162501222170899627');" onmouseout="out('7162501222170899627');" style=""> 474          new Handler().postDelayed(new Runnable() {                                                                </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 475              @Override                                                                                             </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 476              public void run() {                                                                                   </span>
<span class="-3170312762343778784" onmouseenter="enter('-3170312762343778784');" onmouseout="out('-3170312762343778784');" style=""> 477                  if (getActivity() == null) {                                                                      </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 478                      return;                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 479                  }                                                                                                 </span>
<span  style=""> 480                                                                                                                    </span>
<span class="6943331498658216188" onmouseenter="enter('6943331498658216188');" onmouseout="out('6943331498658216188');" style=""><abbr title=" 481                  InputMethodManager inputMethodManager = (InputMethodManager) getActivity().getSystemService(Context.INPUT_METHOD_SERVICE);"> 481                  InputMethodManager inputMethodManager = (InputMethodManager) getActivity().getSystemService(Contex🔵</abbr></span>
<span class="-9213036537020298306" onmouseenter="enter('-9213036537020298306');" onmouseout="out('-9213036537020298306');" style=""> 482                  if (inputMethodManager != null) {                                                                 </span>
<span class="7954226653587797662" onmouseenter="enter('7954226653587797662');" onmouseout="out('7954226653587797662');" style=""> 483                      inputMethodManager.showSoftInput(mContentEditText, 0);                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 484                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 485              }                                                                                                     </span>
<span class="-4884776244894547305" onmouseenter="enter('-4884776244894547305');" onmouseout="out('-4884776244894547305');" style=""> 486          }, 100);                                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 487      }                                                                                                             </span>
<span  style=""> 488                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 489      @Override                                                                                                     </span>
<span class="3108783673391190151" onmouseenter="enter('3108783673391190151');" onmouseout="out('3108783673391190151');" style=""> 490      public void onPause() {                                                                                       </span>
<span class="4626272369407912674" onmouseenter="enter('4626272369407912674');" onmouseout="out('4626272369407912674');" style=""> 491          super.onPause();  // Always call the superclass method first                                              </span>
<span class="-5493396254025166032" onmouseenter="enter('-5493396254025166032');" onmouseout="out('-5493396254025166032');" style=""> 492          mIsPaused = true;                                                                                         </span>
<span  style=""> 493                                                                                                                    </span>
<span class="-4286062678685908757" onmouseenter="enter('-4286062678685908757');" onmouseout="out('-4286062678685908757');" style=""> 494          // Hide soft keyboard if it is showing...                                                                 </span>
<span class="5486984069351007864" onmouseenter="enter('5486984069351007864');" onmouseout="out('5486984069351007864');" style=""> 495          DisplayUtils.hideKeyboard(mContentEditText);                                                              </span>
<span  style=""> 496                                                                                                                    </span>
<span class="6353289516119274314" onmouseenter="enter('6353289516119274314');" onmouseout="out('6353289516119274314');" style=""> 497          mTagInput.setOnTagAddedListener(null);                                                                    </span>
<span  style=""> 498                                                                                                                    </span>
<span class="-2149096896161266035" onmouseenter="enter('-2149096896161266035');" onmouseout="out('-2149096896161266035');" style=""> 499          if (mAutoSaveHandler != null) {                                                                           </span>
<span class="-5465787548318672754" onmouseenter="enter('-5465787548318672754');" onmouseout="out('-5465787548318672754');" style=""> 500              mAutoSaveHandler.removeCallbacks(mAutoSaveRunnable);                                                  </span>
<span class="-837723219443324586" onmouseenter="enter('-837723219443324586');" onmouseout="out('-837723219443324586');" style=""> 501              mAutoSaveHandler.post(mAutoSaveRunnable);                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 502          }                                                                                                         </span>
<span  style=""> 503                                                                                                                    </span>
<span class="-8758788084050668688" onmouseenter="enter('-8758788084050668688');" onmouseout="out('-8758788084050668688');" style=""> 504          if (mPublishTimeoutHandler != null) {                                                                     </span>
<span class="-1646454762641300025" onmouseenter="enter('-1646454762641300025');" onmouseout="out('-1646454762641300025');" style=""> 505              mPublishTimeoutHandler.removeCallbacks(mPublishTimeoutRunnable);                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 506          }                                                                                                         </span>
<span  style=""> 507                                                                                                                    </span>
<span class="16247739636052398" onmouseenter="enter('16247739636052398');" onmouseout="out('16247739636052398');" style=""> 508          if (mHistoryTimeoutHandler != null) {                                                                     </span>
<span class="7316258928910882956" onmouseenter="enter('7316258928910882956');" onmouseout="out('7316258928910882956');" style=""> 509              mHistoryTimeoutHandler.removeCallbacks(mHistoryTimeoutRunnable);                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 510          }                                                                                                         </span>
<span  style=""> 511                                                                                                                    </span>
<span class="212618759798230270" onmouseenter="enter('212618759798230270');" onmouseout="out('212618759798230270');" style=""> 512          mHighlighter.stop();                                                                                      </span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style=""> 513          saveNote();                                                                                               </span>
<span class="-5110134461042230019" onmouseenter="enter('-5110134461042230019');" onmouseout="out('-5110134461042230019');" style=""> 514          AppLog.add(Type.SCREEN, &quot;Paused (NoteEditorFragment)&quot;);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 515      }                                                                                                             </span>
<span  style=""> 516                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 517      @Override                                                                                                     </span>
<span class="658855826062432633" onmouseenter="enter('658855826062432633');" onmouseout="out('658855826062432633');" style=""> 518      public void onDestroy() {                                                                                     </span>
<span class="7275190530034972367" onmouseenter="enter('7275190530034972367');" onmouseout="out('7275190530034972367');" style=""> 519          super.onDestroy();                                                                                        </span>
<span class="-1649552973291504175" onmouseenter="enter('-1649552973291504175');" onmouseout="out('-1649552973291504175');" style=""> 520          mNotesBucket.removeListener(this);                                                                        </span>
<span class="-9222421628383802707" onmouseenter="enter('-9222421628383802707');" onmouseout="out('-9222421628383802707');" style=""> 521          mNotesBucket.stop();                                                                                      </span>
<span class="-5888247817738062720" onmouseenter="enter('-5888247817738062720');" onmouseout="out('-5888247817738062720');" style=""> 522          AppLog.add(Type.SYNC, &quot;Stopped note bucket (NoteEditorFragment)&quot;);                                        </span>
<span class="284986690041099701" onmouseenter="enter('284986690041099701');" onmouseout="out('284986690041099701');" style=""> 523          AppLog.add(Type.SCREEN, &quot;Destroyed (NoteEditorFragment)&quot;);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 524      }                                                                                                             </span>
<span  style=""> 525                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 526      @Override                                                                                                     </span>
<span class="5678576148993170097" onmouseenter="enter('5678576148993170097');" onmouseout="out('5678576148993170097');" style=""> 527      public void onSaveInstanceState(@NonNull Bundle outState) {                                                   </span>
<span class="2796648189832219063" onmouseenter="enter('2796648189832219063');" onmouseout="out('2796648189832219063');" style=""> 528          super.onSaveInstanceState(outState);                                                                      </span>
<span  style=""> 529                                                                                                                    </span>
<span class="4471570229761422149" onmouseenter="enter('4471570229761422149');" onmouseout="out('4471570229761422149');" style=""> 530          if (DisplayUtils.isLargeScreenLandscape(getActivity()) &amp;&amp; mNote != null) {                                </span>
<span class="7419969731723984173" onmouseenter="enter('7419969731723984173');" onmouseout="out('7419969731723984173');" style=""> 531              outState.putString(STATE_NOTE_ID, mNote.getSimperiumKey());                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 532          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 533      }                                                                                                             </span>
<span  style=""> 534                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 535      @Override                                                                                                     </span>
<span class="-3104619052446816858" onmouseenter="enter('-3104619052446816858');" onmouseout="out('-3104619052446816858');" style=""> 536      public void onCreateOptionsMenu(@NonNull Menu menu, @NonNull MenuInflater inflater) {                         </span>
<span class="5772887857065615623" onmouseenter="enter('5772887857065615623');" onmouseout="out('5772887857065615623');" style=""> 537          super.onCreateOptionsMenu(menu, inflater);                                                                </span>
<span  style=""> 538                                                                                                                    </span>
<span class="-4568224188607879240" onmouseenter="enter('-4568224188607879240');" onmouseout="out('-4568224188607879240');" style=""><abbr title=" 539          if (!isAdded() || (!mIsFromWidget &amp;&amp; DisplayUtils.isLargeScreenLandscape(getActivity()) &amp;&amp; mNoteMarkdownFragment == null)) {"> 539          if (!isAdded() || (!mIsFromWidget &amp;&amp; DisplayUtils.isLargeScreenLandscape(getActivity()) &amp;&amp; mNoteMarkdownFr🔵</abbr></span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 540              return;                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 541          }                                                                                                         </span>
<span  style=""> 542                                                                                                                    </span>
<span class="-5591635883999644357" onmouseenter="enter('-5591635883999644357');" onmouseout="out('-5591635883999644357');" style=""> 543          inflater.inflate(R.menu.note_editor, menu);                                                               </span>
<span class="5385664906661306149" onmouseenter="enter('5385664906661306149');" onmouseout="out('5385664906661306149');" style=""> 544          MenuCompat.setGroupDividerEnabled(menu, true);                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 545      }                                                                                                             </span>
<span  style=""> 546                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 547      @Override                                                                                                     </span>
<span class="-882410792536471577" onmouseenter="enter('-882410792536471577');" onmouseout="out('-882410792536471577');" style=""> 548      public boolean onOptionsItemSelected(@NonNull MenuItem item) {                                                </span>
<span class="2068182408853392247" onmouseenter="enter('2068182408853392247');" onmouseout="out('2068182408853392247');" style=""> 549          switch (item.getItemId()) {                                                                               </span>
<span class="-9105547343157360739" onmouseenter="enter('-9105547343157360739');" onmouseout="out('-9105547343157360739');" style=""> 550              case R.id.menu_checklist:                                                                             </span>
<span class="2996686463249748346" onmouseenter="enter('2996686463249748346');" onmouseout="out('2996686463249748346');" style=""> 551                  insertChecklist();                                                                                </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 552                  return true;                                                                                      </span>
<span class="1323072004784584241" onmouseenter="enter('1323072004784584241');" onmouseout="out('1323072004784584241');" style=""> 553              case R.id.menu_copy:                                                                                  </span>
<span class="8518441705934796822" onmouseenter="enter('8518441705934796822');" onmouseout="out('8518441705934796822');" style=""> 554                  if (BrowserUtils.copyToClipboard(requireContext(), mNote.getPublishedUrl())) {                    </span>








<span class="3795490233575843146" onmouseenter="enter('3795490233575843146');" onmouseout="out('3795490233575843146');" style=""> 555                      Snackbar.make(mRootView, R.string.link_copied, Snackbar.LENGTH_SHORT).show();                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 556                  } else {                                                                                          </span>
<span class="8359220226685626421" onmouseenter="enter('8359220226685626421');" onmouseout="out('8359220226685626421');" style=""> 557                      Snackbar.make(mRootView, R.string.link_copied_failure, Snackbar.LENGTH_SHORT).show();         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 558                  }                                                                                                 </span>
<span  style=""> 559                                                                                                                    </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 560                  return true;                                                                                      </span>
<span class="1329351071337199880" onmouseenter="enter('1329351071337199880');" onmouseout="out('1329351071337199880');" style=""> 561              case R.id.menu_history:                                                                               </span>
<span class="3115064412317025337" onmouseenter="enter('3115064412317025337');" onmouseout="out('3115064412317025337');" style=""> 562                  showHistory();                                                                                    </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 563                  return true;                                                                                      </span>
<span class="-7455228569432134304" onmouseenter="enter('-7455228569432134304');" onmouseout="out('-7455228569432134304');" style=""> 564              case R.id.menu_info:                                                                                  </span>
<span class="1221863391504882204" onmouseenter="enter('1221863391504882204');" onmouseout="out('1221863391504882204');" style=""> 565                  showInfo();                                                                                       </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 566                  return true;                                                                                      </span>
<span class="1690518520070570963" onmouseenter="enter('1690518520070570963');" onmouseout="out('1690518520070570963');" style=""> 567              case R.id.menu_markdown:                                                                              </span>
<span class="-3926545672787324985" onmouseenter="enter('-3926545672787324985');" onmouseout="out('-3926545672787324985');" style=""> 568                  setMarkdown(!item.isChecked());                                                                   </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 569                  return true;                                                                                      </span>
<span class="2584816759865872098" onmouseenter="enter('2584816759865872098');" onmouseout="out('2584816759865872098');" style=""> 570              case R.id.menu_pin:                                                                                   </span>
<span class="846429991982879471" onmouseenter="enter('846429991982879471');" onmouseout="out('846429991982879471');" style=""> 571                  NoteUtils.setNotePin(mNote, !item.isChecked());                                                   </span>
<span class="-8532471920650411447" onmouseenter="enter('-8532471920650411447');" onmouseout="out('-8532471920650411447');" style=""> 572                  requireActivity().invalidateOptionsMenu();                                                        </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 573                  return true;                                                                                      </span>
<span class="-1377067082739801221" onmouseenter="enter('-1377067082739801221');" onmouseout="out('-1377067082739801221');" style=""> 574              case R.id.menu_publish:                                                                               </span>
<span class="-3060727947180574444" onmouseenter="enter('-3060727947180574444');" onmouseout="out('-3060727947180574444');" style=""> 575                  if (item.isChecked()) {                                                                           </span>
<span class="4812123925634099655" onmouseenter="enter('4812123925634099655');" onmouseout="out('4812123925634099655');" style=""> 576                      unpublishNote();                                                                              </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 577                  } else {                                                                                          </span>
<span class="7985358866333072123" onmouseenter="enter('7985358866333072123');" onmouseout="out('7985358866333072123');" style=""> 578                      publishNote();                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 579                  }                                                                                                 </span>
<span  style=""> 580                                                                                                                    </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 581                  return true;                                                                                      </span>
<span class="4712317589059090097" onmouseenter="enter('4712317589059090097');" onmouseout="out('4712317589059090097');" style=""> 582              case R.id.menu_share:                                                                                 </span>
<span class="2819818847761455451" onmouseenter="enter('2819818847761455451');" onmouseout="out('2819818847761455451');" style=""> 583                  shareNote();                                                                                      </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 584                  return true;                                                                                      </span>
<span class="-7045228079815744059" onmouseenter="enter('-7045228079815744059');" onmouseout="out('-7045228079815744059');" style=""> 585              case R.id.menu_trash:                                                                                 </span>
<span class="5514287417242355685" onmouseenter="enter('5514287417242355685');" onmouseout="out('5514287417242355685');" style=""> 586                  if (!isAdded()) {                                                                                 </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 587                      return false;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 588                  }                                                                                                 </span>
<span  style=""> 589                                                                                                                    </span>
<span class="3639769569139585690" onmouseenter="enter('3639769569139585690');" onmouseout="out('3639769569139585690');" style=""> 590                  deleteNote();                                                                                     </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 591                  return true;                                                                                      </span>
<span class="4538874991877816092" onmouseenter="enter('4538874991877816092');" onmouseout="out('4538874991877816092');" style=""> 592              case android.R.id.home:                                                                               </span>
<span class="-5022390127132774156" onmouseenter="enter('-5022390127132774156');" onmouseout="out('-5022390127132774156');" style=""> 593                  AppLog.add(Type.ACTION, &quot;Tapped back arrow in app bar (NoteEditorFragment)&quot;);                     </span>
<span class="5514287417242355685" onmouseenter="enter('5514287417242355685');" onmouseout="out('5514287417242355685');" style=""> 594                  if (!isAdded()) {                                                                                 </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 595                      return false;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 596                  }                                                                                                 </span>
<span  style=""> 597                                                                                                                    </span>
<span class="-1923482990691915278" onmouseenter="enter('-1923482990691915278');" onmouseout="out('-1923482990691915278');" style=""> 598                  requireActivity().finish();                                                                       </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 599                  return true;                                                                                      </span>
<span class="-8178136317704390296" onmouseenter="enter('-8178136317704390296');" onmouseout="out('-8178136317704390296');" style=""> 600              default:                                                                                              </span>
<span class="-3863613010288750787" onmouseenter="enter('-3863613010288750787');" onmouseout="out('-3863613010288750787');" style=""> 601                  return super.onOptionsItemSelected(item);                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 602          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 603      }                                                                                                             </span>
<span  style=""> 604                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 605      @Override                                                                                                     </span>
<span class="976560802893770483" onmouseenter="enter('976560802893770483');" onmouseout="out('976560802893770483');" style=""> 606      public void onPrepareOptionsMenu(@NonNull Menu menu) {                                                        </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 607          if (mNote != null) {                                                                                      </span>
<span class="4103252492326247538" onmouseenter="enter('4103252492326247538');" onmouseout="out('4103252492326247538');" style=""> 608              MenuItem pinItem = menu.findItem(R.id.menu_pin);                                                      </span>
<span class="-1901297934576221502" onmouseenter="enter('-1901297934576221502');" onmouseout="out('-1901297934576221502');" style=""> 609              MenuItem shareItem = menu.findItem(R.id.menu_share);                                                  </span>
<span class="-1024200395334062210" onmouseenter="enter('-1024200395334062210');" onmouseout="out('-1024200395334062210');" style=""> 610              MenuItem historyItem = menu.findItem(R.id.menu_history);                                              </span>
<span class="8524821600195318381" onmouseenter="enter('8524821600195318381');" onmouseout="out('8524821600195318381');" style=""> 611              MenuItem publishItem = menu.findItem(R.id.menu_publish);                                              </span>
<span class="-2596587708374310136" onmouseenter="enter('-2596587708374310136');" onmouseout="out('-2596587708374310136');" style=""> 612              MenuItem copyLinkItem = menu.findItem(R.id.menu_copy);                                                </span>
<span class="3256712546982954826" onmouseenter="enter('3256712546982954826');" onmouseout="out('3256712546982954826');" style=""> 613              MenuItem markdownItem = menu.findItem(R.id.menu_markdown);                                            </span>
<span class="7126556138263523964" onmouseenter="enter('7126556138263523964');" onmouseout="out('7126556138263523964');" style=""> 614              MenuItem trashItem = menu.findItem(R.id.menu_trash);                                                  </span>
<span class="-481966053977064278" onmouseenter="enter('-481966053977064278');" onmouseout="out('-481966053977064278');" style=""> 615              mChecklistMenuItem = menu.findItem(R.id.menu_checklist);                                              </span>
<span class="-41110414926085356" onmouseenter="enter('-41110414926085356');" onmouseout="out('-41110414926085356');" style=""> 616              mInformationMenuItem = menu.findItem(R.id.menu_info).setVisible(true);                                </span>
<span  style=""> 617                                                                                                                    </span>
<span class="-7678419238898690461" onmouseenter="enter('-7678419238898690461');" onmouseout="out('-7678419238898690461');" style=""> 618              pinItem.setChecked(mNote.isPinned());                                                                 </span>
<span class="5915502490134342688" onmouseenter="enter('5915502490134342688');" onmouseout="out('5915502490134342688');" style=""> 619              publishItem.setChecked(mNote.isPublished());                                                          </span>
<span class="-2454055549809219964" onmouseenter="enter('-2454055549809219964');" onmouseout="out('-2454055549809219964');" style=""> 620              markdownItem.setChecked(mNote.isMarkdownEnabled());                                                   </span>
<span  style=""> 621                                                                                                                    </span>
<span class="8027745968637922893" onmouseenter="enter('8027745968637922893');" onmouseout="out('8027745968637922893');" style=""> 622              // Disable actions when note is in Trash or markdown view is shown on large device.                   </span>
<span class="-431402929828645917" onmouseenter="enter('-431402929828645917');" onmouseout="out('-431402929828645917');" style=""> 623              if (mNote.isDeleted() || (mMarkdown != null &amp;&amp; mMarkdown.getVisibility() == View.VISIBLE)) {          </span>
<span class="-1690132925836641241" onmouseenter="enter('-1690132925836641241');" onmouseout="out('-1690132925836641241');" style=""> 624                  pinItem.setEnabled(false);                                                                        </span>
<span class="-5469494517506321069" onmouseenter="enter('-5469494517506321069');" onmouseout="out('-5469494517506321069');" style=""> 625                  shareItem.setEnabled(false);                                                                      </span>
<span class="9085171889633758452" onmouseenter="enter('9085171889633758452');" onmouseout="out('9085171889633758452');" style=""> 626                  historyItem.setEnabled(false);                                                                    </span>
<span class="6693521395658962624" onmouseenter="enter('6693521395658962624');" onmouseout="out('6693521395658962624');" style=""> 627                  publishItem.setEnabled(false);                                                                    </span>
<span class="9087995724461855803" onmouseenter="enter('9087995724461855803');" onmouseout="out('9087995724461855803');" style=""> 628                  copyLinkItem.setEnabled(false);                                                                   </span>
<span class="-1845358690665350593" onmouseenter="enter('-1845358690665350593');" onmouseout="out('-1845358690665350593');" style=""> 629                  markdownItem.setEnabled(false);                                                                   </span>
<span class="1533489871724235057" onmouseenter="enter('1533489871724235057');" onmouseout="out('1533489871724235057');" style=""> 630                  mChecklistMenuItem.setEnabled(false);                                                             </span>
<span class="5575712097606361646" onmouseenter="enter('5575712097606361646');" onmouseout="out('5575712097606361646');" style=""> 631                  DrawableUtils.setMenuItemAlpha(mChecklistMenuItem, 0.3);  // 0.3 is 30% opacity.                  </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 632              } else {                                                                                              </span>
<span class="-4176946050939173198" onmouseenter="enter('-4176946050939173198');" onmouseout="out('-4176946050939173198');" style=""> 633                  pinItem.setEnabled(true);                                                                         </span>
<span class="-8607869884042424878" onmouseenter="enter('-8607869884042424878');" onmouseout="out('-8607869884042424878');" style=""> 634                  shareItem.setEnabled(true);                                                                       </span>
<span class="-4314747760650157745" onmouseenter="enter('-4314747760650157745');" onmouseout="out('-4314747760650157745');" style=""> 635                  historyItem.setEnabled(true);                                                                     </span>
<span class="3398211100008798634" onmouseenter="enter('3398211100008798634');" onmouseout="out('3398211100008798634');" style=""> 636                  publishItem.setEnabled(true);                                                                     </span>
<span class="-4773075625324516073" onmouseenter="enter('-4773075625324516073');" onmouseout="out('-4773075625324516073');" style=""> 637                  copyLinkItem.setEnabled(mNote.isPublished());                                                     </span>
<span class="3540588263915729219" onmouseenter="enter('3540588263915729219');" onmouseout="out('3540588263915729219');" style=""> 638                  markdownItem.setEnabled(true);                                                                    </span>
<span class="9157159425417983851" onmouseenter="enter('9157159425417983851');" onmouseout="out('9157159425417983851');" style=""> 639                  mChecklistMenuItem.setEnabled(true);                                                              </span>
<span class="-997998498639683163" onmouseenter="enter('-997998498639683163');" onmouseout="out('-997998498639683163');" style=""> 640                  DrawableUtils.setMenuItemAlpha(mChecklistMenuItem, 1.0);  // 1.0 is 100% opacity.                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 641              }                                                                                                     </span>
<span  style=""> 642                                                                                                                    </span>
<span class="5561093706160816776" onmouseenter="enter('5561093706160816776');" onmouseout="out('5561093706160816776');" style=""> 643              if (mNote.isDeleted()) {                                                                              </span>
<span class="-3033015909800303171" onmouseenter="enter('-3033015909800303171');" onmouseout="out('-3033015909800303171');" style=""> 644                  trashItem.setTitle(R.string.restore);                                                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 645              } else {                                                                                              </span>
<span class="-1683477354690990368" onmouseenter="enter('-1683477354690990368');" onmouseout="out('-1683477354690990368');" style=""> 646                  trashItem.setTitle(R.string.trash);                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 647              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 648          }                                                                                                         </span>
<span  style=""> 649                                                                                                                    </span>
<span class="-5146912340244450550" onmouseenter="enter('-5146912340244450550');" onmouseout="out('-5146912340244450550');" style=""> 650          DrawableUtils.tintMenuWithAttribute(getActivity(), menu, R.attr.toolbarIconColor);                        </span>
<span class="1467059367331108531" onmouseenter="enter('1467059367331108531');" onmouseout="out('1467059367331108531');" style=""> 651          super.onPrepareOptionsMenu(menu);                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 652      }                                                                                                             </span>
<span  style=""> 653                                                                                                                    </span>
<span class="-2056093237925143337" onmouseenter="enter('-2056093237925143337');" onmouseout="out('-2056093237925143337');" style=""> 654      public void insertChecklist() {                                                                               </span>
<span class="-2132172590912834546" onmouseenter="enter('-2132172590912834546');" onmouseout="out('-2132172590912834546');" style=""> 655          DrawableUtils.startAnimatedVectorDrawable(mChecklistMenuItem.getIcon());                                  </span>
<span  style=""> 656                                                                                                                    </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 657          try {                                                                                                     </span>
<span class="5818347684529310934" onmouseenter="enter('5818347684529310934');" onmouseout="out('5818347684529310934');" style=""> 658              mContentEditText.insertChecklist();                                                                   </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 659          } catch (Exception e) {                                                                                   </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 660              e.printStackTrace();                                                                                  </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 661              return;                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 662          }                                                                                                         </span>
<span  style=""> 663                                                                                                                    </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 664          AnalyticsTracker.track(                                                                                   </span>
<span class="2856363448162984839" onmouseenter="enter('2856363448162984839');" onmouseout="out('2856363448162984839');" style=""> 665              EDITOR_CHECKLIST_INSERTED,                                                                            </span>
<span class="-2430475172570880083" onmouseenter="enter('-2430475172570880083');" onmouseout="out('-2430475172570880083');" style=""> 666              CATEGORY_NOTE,                                                                                        </span>
<span class="3613116414135407305" onmouseenter="enter('3613116414135407305');" onmouseout="out('3613116414135407305');" style=""> 667              &quot;toolbar_button&quot;                                                                                      </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 668          );                                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 669      }                                                                                                             </span>
<span  style=""> 670                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 671      @Override                                                                                                     </span>
<span class="-8145186961220354967" onmouseenter="enter('-8145186961220354967');" onmouseout="out('-8145186961220354967');" style=""> 672      public void onCheckboxToggled() {                                                                             </span>
<span class="-2834824800808682286" onmouseenter="enter('-2834824800808682286');" onmouseout="out('-2834824800808682286');" style=""> 673          // Save note (using delay) after toggling a checkbox                                                      </span>
<span class="-2149096896161266035" onmouseenter="enter('-2149096896161266035');" onmouseout="out('-2149096896161266035');" style=""> 674          if (mAutoSaveHandler != null) {                                                                           </span>
<span class="-5465787548318672754" onmouseenter="enter('-5465787548318672754');" onmouseout="out('-5465787548318672754');" style=""> 675              mAutoSaveHandler.removeCallbacks(mAutoSaveRunnable);                                                  </span>
<span class="3237260668993885548" onmouseenter="enter('3237260668993885548');" onmouseout="out('3237260668993885548');" style=""> 676              mAutoSaveHandler.postDelayed(mAutoSaveRunnable, AUTOSAVE_DELAY_MILLIS);                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 677          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 678      }                                                                                                             </span>
<span  style=""> 679                                                                                                                    </span>
<span class="-7228463698535350052" onmouseenter="enter('-7228463698535350052');" onmouseout="out('-7228463698535350052');" style=""> 680      private void deleteNote() {                                                                                   </span>
<span class="4492119149633458811" onmouseenter="enter('4492119149633458811');" onmouseout="out('4492119149633458811');" style=""> 681          NoteUtils.deleteNote(mNote, getActivity());                                                               </span>
<span class="-1923482990691915278" onmouseenter="enter('-1923482990691915278');" onmouseout="out('-1923482990691915278');" style=""> 682          requireActivity().finish();                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 683      }                                                                                                             </span>
<span  style=""> 684                                                                                                                    </span>
<span class="6575837707802621057" onmouseenter="enter('6575837707802621057');" onmouseout="out('6575837707802621057');" style=""> 685      protected void clearMarkdown() {                                                                              </span>
<span class="4379033444024403701" onmouseenter="enter('4379033444024403701');" onmouseout="out('4379033444024403701');" style=""> 686          mMarkdown.loadDataWithBaseURL(&quot;file:///android_asset/&quot;, mCss + &quot;&quot;, &quot;text/html&quot;, &quot;utf-8&quot;, null);           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 687      }                                                                                                             </span>
<span  style=""> 688                                                                                                                    </span>
<span class="4876877473500420963" onmouseenter="enter('4876877473500420963');" onmouseout="out('4876877473500420963');" style=""> 689      protected void hideMarkdown() {                                                                               </span>
<span class="6362103358672335388" onmouseenter="enter('6362103358672335388');" onmouseout="out('6362103358672335388');" style=""> 690          mMarkdown.setVisibility(View.INVISIBLE);                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 691      }                                                                                                             </span>
<span  style=""> 692                                                                                                                    </span>
<span class="-3219341107535080329" onmouseenter="enter('-3219341107535080329');" onmouseout="out('-3219341107535080329');" style=""> 693      protected void showMarkdown() {                                                                               </span>
<span class="3327794499329885328" onmouseenter="enter('3327794499329885328');" onmouseout="out('3327794499329885328');" style=""> 694          loadMarkdownData();                                                                                       </span>
<span class="4346698976501095620" onmouseenter="enter('4346698976501095620');" onmouseout="out('4346698976501095620');" style=""> 695          mMarkdown.setVisibility(View.VISIBLE);                                                                    </span>
<span  style=""> 696                                                                                                                    </span>
<span class="-8355266079523609200" onmouseenter="enter('-8355266079523609200');" onmouseout="out('-8355266079523609200');" style=""> 697          new Handler().postDelayed(                                                                                </span>
<span class="4860439059348199630" onmouseenter="enter('4860439059348199630');" onmouseout="out('4860439059348199630');" style=""> 698              new Runnable() {                                                                                      </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 699                  @Override                                                                                         </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 700                  public void run() {                                                                               </span>
<span class="-8532471920650411447" onmouseenter="enter('-8532471920650411447');" onmouseout="out('-8532471920650411447');" style=""> 701                      requireActivity().invalidateOptionsMenu();                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 702                  }                                                                                                 </span>
<span class="-4102417550988568311" onmouseenter="enter('-4102417550988568311');" onmouseout="out('-4102417550988568311');" style=""> 703              },                                                                                                    </span>
<span class="5128296635725421077" onmouseenter="enter('5128296635725421077');" onmouseout="out('5128296635725421077');" style=""> 704              getResources().getInteger(R.integer.time_animation)                                                   </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 705          );                                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 706      }                                                                                                             </span>
<span  style=""> 707                                                                                                                    </span>
<span class="796341583224604558" onmouseenter="enter('796341583224604558');" onmouseout="out('796341583224604558');" style=""> 708      public void shareNote() {                                                                                     </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 709          if (mNote != null) {                                                                                      </span>
<span class="-5662939853121386036" onmouseenter="enter('-5662939853121386036');" onmouseout="out('-5662939853121386036');" style=""> 710              mContentEditText.clearFocus();                                                                        </span>
<span class="-641201949227129854" onmouseenter="enter('-641201949227129854');" onmouseout="out('-641201949227129854');" style=""> 711              showShareSheet();                                                                                     </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 712              AnalyticsTracker.track(                                                                               </span>
<span class="-5025794315104060878" onmouseenter="enter('-5025794315104060878');" onmouseout="out('-5025794315104060878');" style=""> 713                  EDITOR_NOTE_CONTENT_SHARED,                                                                       </span>
<span class="-2430475172570880083" onmouseenter="enter('-2430475172570880083');" onmouseout="out('-2430475172570880083');" style=""> 714                  CATEGORY_NOTE,                                                                                    </span>
<span class="2749115305963564191" onmouseenter="enter('2749115305963564191');" onmouseout="out('2749115305963564191');" style=""> 715                  &quot;action_bar_share_button&quot;                                                                         </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 716              );                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 717          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 718      }                                                                                                             </span>
<span  style=""> 719                                                                                                                    </span>
<span class="-6549715277076486587" onmouseenter="enter('-6549715277076486587');" onmouseout="out('-6549715277076486587');" style=""> 720      public void showHistory() {                                                                                   </span>
<span class="-4132317386083687564" onmouseenter="enter('-4132317386083687564');" onmouseout="out('-4132317386083687564');" style=""> 721          if (mNote != null &amp;&amp; mNote.getVersion() &gt; 1) {                                                            </span>
<span class="-5662939853121386036" onmouseenter="enter('-5662939853121386036');" onmouseout="out('-5662939853121386036');" style=""> 722              mContentEditText.clearFocus();                                                                        </span>
<span class="2792270431942423109" onmouseenter="enter('2792270431942423109');" onmouseout="out('2792270431942423109');" style=""> 723              mHistoryTimeoutHandler.postDelayed(mHistoryTimeoutRunnable, HISTORY_TIMEOUT);                         </span>
<span class="-6120831555230055153" onmouseenter="enter('-6120831555230055153');" onmouseout="out('-6120831555230055153');" style=""> 724              showHistorySheet();                                                                                   </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 725          } else {                                                                                                  </span>
<span class="-1949769614201595359" onmouseenter="enter('-1949769614201595359');" onmouseout="out('-1949769614201595359');" style=""> 726              Toast.makeText(getActivity(), R.string.error_history, Toast.LENGTH_LONG).show();                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 727          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 728      }                                                                                                             </span>
<span  style=""> 729                                                                                                                    </span>
<span class="7631792944897512467" onmouseenter="enter('7631792944897512467');" onmouseout="out('7631792944897512467');" style=""> 730      public void showInfo() {                                                                                      </span>
<span class="8350219460722128573" onmouseenter="enter('8350219460722128573');" onmouseout="out('8350219460722128573');" style=""> 731          DrawableUtils.startAnimatedVectorDrawable(mInformationMenuItem.getIcon());                                </span>
<span  style=""> 732                                                                                                                    </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 733          if (mNote != null) {                                                                                      </span>
<span class="-5662939853121386036" onmouseenter="enter('-5662939853121386036');" onmouseout="out('-5662939853121386036');" style=""> 734              mContentEditText.clearFocus();                                                                        </span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style=""> 735              saveNote();                                                                                           </span>
<span class="-4032532453651560177" onmouseenter="enter('-4032532453651560177');" onmouseout="out('-4032532453651560177');" style=""> 736              showInfoSheet();                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 737          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 738      }                                                                                                             </span>
<span  style=""> 739                                                                                                                    </span>
<span class="-352900364532795923" onmouseenter="enter('-352900364532795923');" onmouseout="out('-352900364532795923');" style=""> 740      private void setMarkdown(boolean isChecked) {                                                                 </span>
<span class="-8726857289881922025" onmouseenter="enter('-8726857289881922025');" onmouseout="out('-8726857289881922025');" style=""> 741          mIsMarkdownEnabled = isChecked;                                                                           </span>
<span class="-2583362461360625309" onmouseenter="enter('-2583362461360625309');" onmouseout="out('-2583362461360625309');" style=""> 742          showMarkdownActionOrTabs();                                                                               </span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style=""> 743          saveNote();                                                                                               </span>
<span  style=""> 744                                                                                                                    </span>
<span class="4232333416851338644" onmouseenter="enter('4232333416851338644');" onmouseout="out('4232333416851338644');" style=""> 745          // Set preference so that next new note will have markdown enabled.                                       </span>
<span class="6036884777494374936" onmouseenter="enter('6036884777494374936');" onmouseout="out('6036884777494374936');" style=""> 746          SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(requireContext());                </span>
<span class="-5940133505573131741" onmouseenter="enter('-5940133505573131741');" onmouseout="out('-5940133505573131741');" style=""> 747          SharedPreferences.Editor editor = prefs.edit();                                                           </span>
<span class="5795063328820819160" onmouseenter="enter('5795063328820819160');" onmouseout="out('5795063328820819160');" style=""> 748          editor.putBoolean(PrefUtils.PREF_MARKDOWN_ENABLED, isChecked);                                            </span>
<span class="-5305612453340718340" onmouseenter="enter('-5305612453340718340');" onmouseout="out('-5305612453340718340');" style=""> 749          editor.apply();                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 750      }                                                                                                             </span>
<span  style=""> 751                                                                                                                    </span>
<span class="-8233267360630545179" onmouseenter="enter('-8233267360630545179');" onmouseout="out('-8233267360630545179');" style=""> 752      private void setMarkdownEnabled(boolean enabled) {                                                            </span>
<span class="-9128949734751156553" onmouseenter="enter('-9128949734751156553');" onmouseout="out('-9128949734751156553');" style=""> 753          mIsMarkdownEnabled = enabled;                                                                             </span>
<span  style=""> 754                                                                                                                    </span>
<span class="-5497853437151453135" onmouseenter="enter('-5497853437151453135');" onmouseout="out('-5497853437151453135');" style=""> 755          if (mIsMarkdownEnabled) {                                                                                 </span>
<span class="3327794499329885328" onmouseenter="enter('3327794499329885328');" onmouseout="out('3327794499329885328');" style=""> 756              loadMarkdownData();                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 757          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 758      }                                                                                                             </span>
<span  style=""> 759                                                                                                                    </span>
<span class="-150225536602277221" onmouseenter="enter('-150225536602277221');" onmouseout="out('-150225536602277221');" style=""> 760      private void showMarkdownActionOrTabs() {                                                                     </span>
<span class="-5071525869541290984" onmouseenter="enter('-5071525869541290984');" onmouseout="out('-5071525869541290984');" style=""> 761          Activity activity = getActivity();                                                                        </span>
<span  style=""> 762                                                                                                                    </span>
<span class="2687579389951242136" onmouseenter="enter('2687579389951242136');" onmouseout="out('2687579389951242136');" style=""> 763          if (activity instanceof NoteEditorActivity) {                                                             </span>
<span class="-2402557313247060047" onmouseenter="enter('-2402557313247060047');" onmouseout="out('-2402557313247060047');" style=""> 764              NoteEditorActivity editorActivity = (NoteEditorActivity) activity;                                    </span>
<span  style=""> 765                                                                                                                    </span>
<span class="-5497853437151453135" onmouseenter="enter('-5497853437151453135');" onmouseout="out('-5497853437151453135');" style=""> 766              if (mIsMarkdownEnabled) {                                                                             </span>
<span class="2738920073364403707" onmouseenter="enter('2738920073364403707');" onmouseout="out('2738920073364403707');" style=""> 767                  editorActivity.showTabs();                                                                        </span>
<span  style=""> 768                                                                                                                    </span>
<span class="-3674842258349497418" onmouseenter="enter('-3674842258349497418');" onmouseout="out('-3674842258349497418');" style=""> 769                  if (mNoteMarkdownFragment == null) {                                                              </span>
<span class="-8091199532300597402" onmouseenter="enter('-8091199532300597402');" onmouseout="out('-8091199532300597402');" style=""> 770                      // Get markdown fragment and update content                                                   </span>
<span class="6541177819216640453" onmouseenter="enter('6541177819216640453');" onmouseout="out('6541177819216640453');" style=""> 771                      mNoteMarkdownFragment = editorActivity.getNoteMarkdownFragment();                             </span>
<span class="8234543871026198045" onmouseenter="enter('8234543871026198045');" onmouseout="out('8234543871026198045');" style=""> 772                      mNoteMarkdownFragment.updateMarkdown(mContentEditText.getPreviewTextContent());               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 773                  }                                                                                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 774              } else {                                                                                              </span>
<span class="-1827112023263463857" onmouseenter="enter('-1827112023263463857');" onmouseout="out('-1827112023263463857');" style=""> 775                  editorActivity.hideTabs();                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 776              }                                                                                                     </span>
<span class="-8182258209329027497" onmouseenter="enter('-8182258209329027497');" onmouseout="out('-8182258209329027497');" style=""> 777          } else if (activity instanceof NotesActivity) {                                                           </span>
<span class="714586879751884809" onmouseenter="enter('714586879751884809');" onmouseout="out('714586879751884809');" style=""> 778              setMarkdownEnabled(mIsMarkdownEnabled);                                                               </span>
<span class="9075936053703013718" onmouseenter="enter('9075936053703013718');" onmouseout="out('9075936053703013718');" style=""> 779              ((NotesActivity) getActivity()).setMarkdownShowing(false);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 780          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 781      }                                                                                                             </span>
<span  style=""> 782                                                                                                                    </span>
<span class="-2467052403250215415" onmouseenter="enter('-2467052403250215415');" onmouseout="out('-2467052403250215415');" style=""> 783      private void loadMarkdownData() {                                                                             </span>
<span class="-8622237621259523057" onmouseenter="enter('-8622237621259523057');" onmouseout="out('-8622237621259523057');" style=""> 784          String formattedContent = NoteMarkdownFragment.getMarkdownFormattedContent(                               </span>
<span class="-107180190148709194" onmouseenter="enter('-107180190148709194');" onmouseout="out('-107180190148709194');" style=""> 785                  mCss,                                                                                             </span>
<span class="8402262730640179324" onmouseenter="enter('8402262730640179324');" onmouseout="out('8402262730640179324');" style=""> 786                  mContentEditText.getPreviewTextContent()                                                          </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 787          );                                                                                                        </span>
<span  style=""> 788                                                                                                                    </span>
<span class="-1179287945165338458" onmouseenter="enter('-1179287945165338458');" onmouseout="out('-1179287945165338458');" style=""> 789          mMarkdown.loadDataWithBaseURL(null, formattedContent, &quot;text/html&quot;, &quot;utf-8&quot;, null);                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 790      }                                                                                                             </span>
<span  style=""> 791                                                                                                                    </span>
<span class="8195105300246755684" onmouseenter="enter('8195105300246755684');" onmouseout="out('8195105300246755684');" style=""> 792      public void setNote(String noteID, String matchOffsets) {                                                     </span>
<span class="-3646372507164546123" onmouseenter="enter('-3646372507164546123');" onmouseout="out('-3646372507164546123');" style=""> 793          if (mAutoSaveHandler != null)                                                                             </span>
<span class="-5465787548318672754" onmouseenter="enter('-5465787548318672754');" onmouseout="out('-5465787548318672754');" style=""> 794              mAutoSaveHandler.removeCallbacks(mAutoSaveRunnable);                                                  </span>
<span  style=""> 795                                                                                                                    </span>
<span class="-2690182352330934584" onmouseenter="enter('-2690182352330934584');" onmouseout="out('-2690182352330934584');" style=""> 796          mPlaceholderView.setVisibility(View.GONE);                                                                </span>
<span  style=""> 797                                                                                                                    </span>
<span class="-7566474685196195951" onmouseenter="enter('-7566474685196195951');" onmouseout="out('-7566474685196195951');" style=""> 798          if (matchOffsets != null) {                                                                               </span>
<span class="76822769413740338" onmouseenter="enter('76822769413740338');" onmouseout="out('76822769413740338');" style=""> 799              mMatchOffsets = matchOffsets;                                                                         </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 800          } else {                                                                                                  </span>
<span class="-5254682256162211718" onmouseenter="enter('-5254682256162211718');" onmouseout="out('-5254682256162211718');" style=""> 801              mMatchOffsets = null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 802          }                                                                                                         </span>
<span  style=""> 803                                                                                                                    </span>
<span  style=""> 804                                                                                                                    </span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style=""> 805          saveNote();                                                                                               </span>
<span  style=""> 806                                                                                                                    </span>
<span class="-2429694576102374369" onmouseenter="enter('-2429694576102374369');" onmouseout="out('-2429694576102374369');" style=""> 807          new LoadNoteTask(this).executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR, noteID);                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 808      }                                                                                                             </span>
<span  style=""> 809                                                                                                                    </span>
<span class="2912110192045859171" onmouseenter="enter('2912110192045859171');" onmouseout="out('2912110192045859171');" style=""> 810      private void updateNote(Note updatedNote) {                                                                   </span>
<span class="1053945494720623403" onmouseenter="enter('1053945494720623403');" onmouseout="out('1053945494720623403');" style=""> 811          // update note if network change arrived                                                                  </span>
<span class="8715526790189509580" onmouseenter="enter('8715526790189509580');" onmouseout="out('8715526790189509580');" style=""> 812          mNote = updatedNote;                                                                                      </span>
<span class="-1082183570760036139" onmouseenter="enter('-1082183570760036139');" onmouseout="out('-1082183570760036139');" style=""> 813          refreshContent(true);                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 814      }                                                                                                             </span>
<span  style=""> 815                                                                                                                    </span>
<span class="-7217331690392611444" onmouseenter="enter('-7217331690392611444');" onmouseout="out('-7217331690392611444');" style=""> 816      private void refreshContent(boolean isNoteUpdate) {                                                           </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 817          if (mNote != null) {                                                                                      </span>
<span class="9083634457699551889" onmouseenter="enter('9083634457699551889');" onmouseout="out('9083634457699551889');" style=""> 818              // Restore the cursor position if possible.                                                           </span>
<span class="-3899995221280134201" onmouseenter="enter('-3899995221280134201');" onmouseout="out('-3899995221280134201');" style=""><abbr title=" 819              int cursorPosition = newCursorLocation(mNote.getContent(), getNoteContentString(), mContentEditText.getSelectionEnd());"> 819              int cursorPosition = newCursorLocation(mNote.getContent(), getNoteContentString(), mContentEditText.ge🔵</abbr></span>
<span class="4148799213240179760" onmouseenter="enter('4148799213240179760');" onmouseout="out('4148799213240179760');" style=""> 820              mContentEditText.setText(mNote.getContent());                                                         </span>
<span  style=""> 821                                                                                                                    </span>
<span class="2353268123342341866" onmouseenter="enter('2353268123342341866');" onmouseout="out('2353268123342341866');" style=""> 822              if (isNoteUpdate) {                                                                                   </span>
<span class="-7373810293776319490" onmouseenter="enter('-7373810293776319490');" onmouseout="out('-7373810293776319490');" style=""> 823                  // Update markdown and preview flags from updated note.                                           </span>
<span class="-6548100248772474304" onmouseenter="enter('-6548100248772474304');" onmouseout="out('-6548100248772474304');" style=""> 824                  mIsMarkdownEnabled = mNote.isMarkdownEnabled();                                                   </span>
<span class="8897386780031316770" onmouseenter="enter('8897386780031316770');" onmouseout="out('8897386780031316770');" style=""> 825                  mIsPreviewEnabled = mNote.isPreviewEnabled();                                                     </span>
<span  style=""> 826                                                                                                                    </span>
<span class="-3172285059116353636" onmouseenter="enter('-3172285059116353636');" onmouseout="out('-3172285059116353636');" style=""> 827                  // Show/Hide action/tabs based on markdown flag.                                                  </span>
<span class="-2583362461360625309" onmouseenter="enter('-2583362461360625309');" onmouseout="out('-2583362461360625309');" style=""> 828                  showMarkdownActionOrTabs();                                                                       </span>
<span  style=""> 829                                                                                                                    </span>
<span class="8277551329937109619" onmouseenter="enter('8277551329937109619');" onmouseout="out('8277551329937109619');" style=""> 830                  // Save note so any local changes get synced.                                                     </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style=""> 831                  mNote.save();                                                                                     </span>
<span  style=""> 832                                                                                                                    </span>
<span class="-4783156834321463304" onmouseenter="enter('-4783156834321463304');" onmouseout="out('-4783156834321463304');" style=""> 833                  // Update current note object on large screen devices in landscape orientation.                   </span>
<span class="-7225941789318469668" onmouseenter="enter('-7225941789318469668');" onmouseout="out('-7225941789318469668');" style=""> 834                  if (DisplayUtils.isLargeScreenLandscape(requireContext())) {                                      </span>
<span class="9072366327646001644" onmouseenter="enter('9072366327646001644');" onmouseout="out('9072366327646001644');" style=""> 835                      ((NotesActivity) requireActivity()).setCurrentNote(mNote);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 836                  }                                                                                                 </span>
<span  style=""> 837                                                                                                                    </span>
<span class="-510315884444466739" onmouseenter="enter('-510315884444466739');" onmouseout="out('-510315884444466739');" style=""> 838                  // Update overflow popup menu.                                                                    </span>
<span class="-8532471920650411447" onmouseenter="enter('-8532471920650411447');" onmouseout="out('-8532471920650411447');" style=""> 839                  requireActivity().invalidateOptionsMenu();                                                        </span>
<span  style=""> 840                                                                                                                    </span>
<span class="8073598210414419917" onmouseenter="enter('8073598210414419917');" onmouseout="out('8073598210414419917');" style=""> 841                  if (mContentEditText.hasFocus()                                                                   </span>
<span class="1644140795570121810" onmouseenter="enter('1644140795570121810');" onmouseout="out('1644140795570121810');" style=""> 842                          &amp;&amp; cursorPosition != mContentEditText.getSelectionEnd()                                   </span>
<span class="-7547165723183084197" onmouseenter="enter('-7547165723183084197');" onmouseout="out('-7547165723183084197');" style=""> 843                          &amp;&amp; cursorPosition &lt; mContentEditText.getText().length()) {                                </span>
<span class="2096054726124109686" onmouseenter="enter('2096054726124109686');" onmouseout="out('2096054726124109686');" style=""> 844                      mContentEditText.setSelection(cursorPosition);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 845                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 846              }                                                                                                     </span>
<span  style=""> 847                                                                                                                    </span>
<span class="-2853209662220592982" onmouseenter="enter('-2853209662220592982');" onmouseout="out('-2853209662220592982');" style=""> 848              afterTextChanged(mContentEditText.getText());                                                         </span>
<span class="-5644737892245114659" onmouseenter="enter('-5644737892245114659');" onmouseout="out('-5644737892245114659');" style=""> 849              mContentEditText.processChecklists();                                                                 </span>
<span class="3745953297761259324" onmouseenter="enter('3745953297761259324');" onmouseout="out('3745953297761259324');" style=""> 850              updateTagList();                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 851          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 852      }                                                                                                             </span>
<span  style=""> 853                                                                                                                    </span>
<span class="8641648550056617419" onmouseenter="enter('8641648550056617419');" onmouseout="out('8641648550056617419');" style=""> 854      private void updateTagList() {                                                                                </span>
<span class="-2248190398996855538" onmouseenter="enter('-2248190398996855538');" onmouseout="out('-2248190398996855538');" style=""> 855          setChips(mNote.getTagString());                                                                           </span>
<span class="704222064602714746" onmouseenter="enter('704222064602714746');" onmouseout="out('704222064602714746');" style=""> 856          mTagInput.setText(&quot;&quot;);                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 857      }                                                                                                             </span>
<span  style=""> 858                                                                                                                    </span>
<span class="4246690832623096875" onmouseenter="enter('4246690832623096875');" onmouseout="out('4246690832623096875');" style=""> 859      private int newCursorLocation(String newText, String oldText, int cursorLocation) {                           </span>
<span class="9215253731107462720" onmouseenter="enter('9215253731107462720');" onmouseout="out('9215253731107462720');" style=""> 860          // Ported from the iOS app :)                                                                             </span>
<span class="746416875920517525" onmouseenter="enter('746416875920517525');" onmouseout="out('746416875920517525');" style=""> 861          // Cases:                                                                                                 </span>
<span class="5532692154938930485" onmouseenter="enter('5532692154938930485');" onmouseout="out('5532692154938930485');" style=""> 862          // 0. All text after cursor (and possibly more) was removed ==&gt; put cursor at end                         </span>
<span class="7679522442911259243" onmouseenter="enter('7679522442911259243');" onmouseout="out('7679522442911259243');" style=""> 863          // 1. Text was added after the cursor ==&gt; no change                                                       </span>
<span class="-7894032746042607578" onmouseenter="enter('-7894032746042607578');" onmouseout="out('-7894032746042607578');" style=""> 864          // 2. Text was added before the cursor ==&gt; location advances                                              </span>
<span class="-2716138352653500367" onmouseenter="enter('-2716138352653500367');" onmouseout="out('-2716138352653500367');" style=""> 865          // 3. Text was removed after the cursor ==&gt; no change                                                     </span>
<span class="-5135222146548415418" onmouseenter="enter('-5135222146548415418');" onmouseout="out('-5135222146548415418');" style=""> 866          // 4. Text was removed before the cursor ==&gt; location retreats                                            </span>
<span class="-7558810491072030947" onmouseenter="enter('-7558810491072030947');" onmouseout="out('-7558810491072030947');" style=""> 867          // 5. Text was added/removed on both sides of the cursor ==&gt; not handled                                  </span>
<span  style=""> 868                                                                                                                    </span>
<span class="6113131008706185379" onmouseenter="enter('6113131008706185379');" onmouseout="out('6113131008706185379');" style=""> 869          cursorLocation = Math.max(cursorLocation, 0);                                                             </span>
<span  style=""> 870                                                                                                                    </span>
<span class="2494517364842646163" onmouseenter="enter('2494517364842646163');" onmouseout="out('2494517364842646163');" style=""> 871          int newCursorLocation = cursorLocation;                                                                   </span>
<span  style=""> 872                                                                                                                    </span>
<span class="5908042661332565473" onmouseenter="enter('5908042661332565473');" onmouseout="out('5908042661332565473');" style=""> 873          int deltaLength = newText.length() - oldText.length();                                                    </span>
<span  style=""> 874                                                                                                                    </span>
<span class="-6285488792309831531" onmouseenter="enter('-6285488792309831531');" onmouseout="out('-6285488792309831531');" style=""> 875          // Case 0                                                                                                 </span>
<span class="-3414403190560247865" onmouseenter="enter('-3414403190560247865');" onmouseout="out('-3414403190560247865');" style=""> 876          if (newText.length() &lt; cursorLocation)                                                                    </span>
<span class="-8431314608568195365" onmouseenter="enter('-8431314608568195365');" onmouseout="out('-8431314608568195365');" style=""> 877              return newText.length();                                                                              </span>
<span  style=""> 878                                                                                                                    </span>
<span class="-8591384106259708496" onmouseenter="enter('-8591384106259708496');" onmouseout="out('-8591384106259708496');" style=""> 879          boolean beforeCursorMatches = false;                                                                      </span>
<span class="-2836779116340504068" onmouseenter="enter('-2836779116340504068');" onmouseout="out('-2836779116340504068');" style=""> 880          boolean afterCursorMatches = false;                                                                       </span>
<span  style=""> 881                                                                                                                    </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 882          try {                                                                                                     </span>
<span class="535177221055952012" onmouseenter="enter('535177221055952012');" onmouseout="out('535177221055952012');" style=""><abbr title=" 883              beforeCursorMatches = oldText.substring(0, cursorLocation).equals(newText.substring(0, cursorLocation));"> 883              beforeCursorMatches = oldText.substring(0, cursorLocation).equals(newText.substring(0, cursorLocation)🔵</abbr></span>
<span class="4519924127741002604" onmouseenter="enter('4519924127741002604');" onmouseout="out('4519924127741002604');" style=""><abbr title=" 884              afterCursorMatches = oldText.substring(cursorLocation).equals(newText.substring(cursorLocation + deltaLength));"> 884              afterCursorMatches = oldText.substring(cursorLocation).equals(newText.substring(cursorLocation + delta🔵</abbr></span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 885          } catch (Exception e) {                                                                                   </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 886              e.printStackTrace();                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 887          }                                                                                                         </span>
<span  style=""> 888                                                                                                                    </span>
<span class="-8188204612528872149" onmouseenter="enter('-8188204612528872149');" onmouseout="out('-8188204612528872149');" style=""> 889          // Cases 2 and 4                                                                                          </span>
<span class="6616414540674367624" onmouseenter="enter('6616414540674367624');" onmouseout="out('6616414540674367624');" style=""> 890          if (!beforeCursorMatches &amp;&amp; afterCursorMatches)                                                           </span>
<span class="-4510977125628343614" onmouseenter="enter('-4510977125628343614');" onmouseout="out('-4510977125628343614');" style=""> 891              newCursorLocation += deltaLength;                                                                     </span>
<span  style=""> 892                                                                                                                    </span>
<span class="6867115481875645839" onmouseenter="enter('6867115481875645839');" onmouseout="out('6867115481875645839');" style=""> 893          // Cases 1, 3 and 5 have no change                                                                        </span>
<span class="-7784410696724573059" onmouseenter="enter('-7784410696724573059');" onmouseout="out('-7784410696724573059');" style=""> 894          return newCursorLocation;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 895      }                                                                                                             </span>
<span  style=""> 896                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 897      @Override                                                                                                     </span>
<span class="7167548776341584998" onmouseenter="enter('7167548776341584998');" onmouseout="out('7167548776341584998');" style=""> 898      public void onTagAdded(String tag) {                                                                          </span>
<span class="-7210480112102928295" onmouseenter="enter('-7210480112102928295');" onmouseout="out('-7210480112102928295');" style=""> 899          if (mNote == null || !isAdded()) {                                                                        </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 900              return;                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 901          }                                                                                                         </span>
<span  style=""> 902                                                                                                                    </span>
<span class="-5238169388612496279" onmouseenter="enter('-5238169388612496279');" onmouseout="out('-5238169388612496279');" style=""> 903          if (mNote.getTagString() != null &amp;&amp; tag.length() &gt; mNote.getTagString().length()) {                       </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 904              AnalyticsTracker.track(                                                                               </span>
<span class="-1422381609780470266" onmouseenter="enter('-1422381609780470266');" onmouseout="out('-1422381609780470266');" style=""> 905                  EDITOR_TAG_ADDED,                                                                                 </span>
<span class="-2430475172570880083" onmouseenter="enter('-2430475172570880083');" onmouseout="out('-2430475172570880083');" style=""> 906                  CATEGORY_NOTE,                                                                                    </span>
<span class="7268236347956630095" onmouseenter="enter('7268236347956630095');" onmouseout="out('7268236347956630095');" style=""> 907                  &quot;tag_added_to_note&quot;                                                                               </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 908              );                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 909          }                                                                                                         </span>
<span  style=""> 910                                                                                                                    </span>
<span class="-1987136146652427775" onmouseenter="enter('-1987136146652427775');" onmouseout="out('-1987136146652427775');" style=""> 911          mNote.setTagString(mNote.getTagString() + String.valueOf(SPACE) + tag);                                   </span>
<span class="-3343075472306200704" onmouseenter="enter('-3343075472306200704');" onmouseout="out('-3343075472306200704');" style=""> 912          mNote.setModificationDate(Calendar.getInstance());                                                        </span>
<span class="3745953297761259324" onmouseenter="enter('3745953297761259324');" onmouseout="out('3745953297761259324');" style=""> 913          updateTagList();                                                                                          </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style=""> 914          mNote.save();                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 915      }                                                                                                             </span>
<span  style=""> 916                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 917      @Override                                                                                                     </span>
<span class="-5110897291356760413" onmouseenter="enter('-5110897291356760413');" onmouseout="out('-5110897291356760413');" style=""> 918      public void beforeTextChanged(CharSequence charSequence, int i, int i2, int i3) {                             </span>
<span class="7490540504293754116" onmouseenter="enter('7490540504293754116');" onmouseout="out('7490540504293754116');" style=""> 919          // Unused                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 920      }                                                                                                             </span>
<span  style=""> 921                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 922      @Override                                                                                                     </span>
<span class="-3169498224421089624" onmouseenter="enter('-3169498224421089624');" onmouseout="out('-3169498224421089624');" style=""> 923      public void afterTextChanged(Editable editable) {                                                             </span>
<span class="4641646211430236365" onmouseenter="enter('4641646211430236365');" onmouseout="out('4641646211430236365');" style=""> 924          attemptAutoList(editable);                                                                                </span>
<span class="7005237563799171506" onmouseenter="enter('7005237563799171506');" onmouseout="out('7005237563799171506');" style=""> 925          setTitleSpan(editable);                                                                                   </span>
<span class="-7817145757567347170" onmouseenter="enter('-7817145757567347170');" onmouseout="out('-7817145757567347170');" style=""> 926          mContentEditText.fixLineSpacing();                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 927      }                                                                                                             </span>
<span  style=""> 928                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 929      @Override                                                                                                     </span>
<span class="-6004971105578563950" onmouseenter="enter('-6004971105578563950');" onmouseout="out('-6004971105578563950');" style=""> 930      public void onTextChanged(CharSequence charSequence, int start, int before, int count) {                      </span>
<span class="2036741165452809133" onmouseenter="enter('2036741165452809133');" onmouseout="out('2036741165452809133');" style=""> 931          // When text changes, start timer that will fire after AUTOSAVE_DELAY_MILLIS passes                       </span>
<span class="-2149096896161266035" onmouseenter="enter('-2149096896161266035');" onmouseout="out('-2149096896161266035');" style=""> 932          if (mAutoSaveHandler != null) {                                                                           </span>
<span class="-5465787548318672754" onmouseenter="enter('-5465787548318672754');" onmouseout="out('-5465787548318672754');" style=""> 933              mAutoSaveHandler.removeCallbacks(mAutoSaveRunnable);                                                  </span>
<span class="3237260668993885548" onmouseenter="enter('3237260668993885548');" onmouseout="out('3237260668993885548');" style=""> 934              mAutoSaveHandler.postDelayed(mAutoSaveRunnable, AUTOSAVE_DELAY_MILLIS);                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 935          }                                                                                                         </span>
<span  style=""> 936                                                                                                                    </span>
<span class="5409551732025834677" onmouseenter="enter('5409551732025834677');" onmouseout="out('5409551732025834677');" style=""> 937          // Remove search highlight spans when note content changes                                                </span>
<span class="5721815250190525804" onmouseenter="enter('5721815250190525804');" onmouseout="out('5721815250190525804');" style=""> 938          if (mMatchOffsets != null) {                                                                              </span>
<span class="-5254682256162211718" onmouseenter="enter('-5254682256162211718');" onmouseout="out('-5254682256162211718');" style=""> 939              mMatchOffsets = null;                                                                                 </span>
<span class="2930846742809702691" onmouseenter="enter('2930846742809702691');" onmouseout="out('2930846742809702691');" style=""> 940              mHighlighter.removeMatches();                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 941          }                                                                                                         </span>
<span  style=""> 942                                                                                                                    </span>
<span class="-5025193748599864334" onmouseenter="enter('-5025193748599864334');" onmouseout="out('-5025193748599864334');" style=""> 943          if (!DisplayUtils.isLargeScreenLandscape(requireContext())) {                                             </span>
<span class="7215698034791320296" onmouseenter="enter('7215698034791320296');" onmouseout="out('7215698034791320296');" style=""> 944              ((NoteEditorActivity) requireActivity()).setSearchMatchBarVisible(false);                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 945          }                                                                                                         </span>
<span  style=""> 946                                                                                                                    </span>
<span class="8786270533737299967" onmouseenter="enter('8786270533737299967');" onmouseout="out('8786270533737299967');" style=""> 947          // Temporarily remove the text watcher as we process checklists to prevent callback looping               </span>
<span class="2095720317794995897" onmouseenter="enter('2095720317794995897');" onmouseout="out('2095720317794995897');" style=""> 948          mContentEditText.removeTextChangedListener(this);                                                         </span>
<span class="-5644737892245114659" onmouseenter="enter('-5644737892245114659');" onmouseout="out('-5644737892245114659');" style=""> 949          mContentEditText.processChecklists();                                                                     </span>
<span class="8154880790715077967" onmouseenter="enter('8154880790715077967');" onmouseout="out('8154880790715077967');" style=""> 950          mContentEditText.addTextChangedListener(this);                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 951      }                                                                                                             </span>
<span  style=""> 952                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 953      /**                                                                                                           </span>
<span class="-6594088544842821458" onmouseenter="enter('-6594088544842821458');" onmouseout="out('-6594088544842821458');" style=""> 954       * Set the note title to be a larger size and bold style.                                                     </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 955       *                                                                                                            </span>
<span class="108828526699167208" onmouseenter="enter('108828526699167208');" onmouseout="out('108828526699167208');" style=""> 956       * Remove all existing spans before applying spans or performance issues will occur.  Since both              </span>
<span class="-1228016533055730748" onmouseenter="enter('-1228016533055730748');" onmouseout="out('-1228016533055730748');" style=""> 957       * {@link RelativeSizeSpan} and {@link StyleSpan} inherit from {@link MetricAffectingSpan}, all               </span>
<span class="7893653129030957545" onmouseenter="enter('7893653129030957545');" onmouseout="out('7893653129030957545');" style=""> 958       * spans are removed when {@link MetricAffectingSpan} is removed.                                             </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 959       */                                                                                                           </span>
<span class="6849776144692122373" onmouseenter="enter('6849776144692122373');" onmouseout="out('6849776144692122373');" style=""> 960      private void setTitleSpan(Editable editable) {                                                                </span>
<span class="-8681644249984288865" onmouseenter="enter('-8681644249984288865');" onmouseout="out('-8681644249984288865');" style=""> 961          for (MetricAffectingSpan span : editable.getSpans(0, editable.length(), MetricAffectingSpan.class)) {     </span>
<span class="3876289346053092432" onmouseenter="enter('3876289346053092432');" onmouseout="out('3876289346053092432');" style=""> 962              if (span instanceof RelativeSizeSpan || span instanceof StyleSpan) {                                  </span>
<span class="-4538099325482792099" onmouseenter="enter('-4538099325482792099');" onmouseout="out('-4538099325482792099');" style=""> 963                  editable.removeSpan(span);                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 964              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 965          }                                                                                                         </span>
<span  style=""> 966                                                                                                                    </span>
<span class="-901734861574280266" onmouseenter="enter('-901734861574280266');" onmouseout="out('-901734861574280266');" style=""> 967          int newLinePosition = getNoteContentString().indexOf(&quot;\n&quot;);                                               </span>
<span  style=""> 968                                                                                                                    </span>
<span class="-3049917029530340718" onmouseenter="enter('-3049917029530340718');" onmouseout="out('-3049917029530340718');" style=""> 969          if (newLinePosition == 0) {                                                                               </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 970              return;                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 971          }                                                                                                         </span>
<span  style=""> 972                                                                                                                    </span>
<span class="2729500347175780141" onmouseenter="enter('2729500347175780141');" onmouseout="out('2729500347175780141');" style=""> 973          int titleEndPosition = (newLinePosition &gt; 0) ? newLinePosition : editable.length();                       </span>
<span class="2132700250735486844" onmouseenter="enter('2132700250735486844');" onmouseout="out('2132700250735486844');" style=""> 974          editable.setSpan(new RelativeSizeSpan(1.3f), 0, titleEndPosition, Spanned.SPAN_INCLUSIVE_EXCLUSIVE);      </span>
<span class="2779153330581394975" onmouseenter="enter('2779153330581394975');" onmouseout="out('2779153330581394975');" style=""> 975          editable.setSpan(new StyleSpan(Typeface.BOLD), 0, titleEndPosition, Spanned.SPAN_INCLUSIVE_EXCLUSIVE);    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 976      }                                                                                                             </span>
<span  style=""> 977                                                                                                                    </span>
<span class="8395667075038215241" onmouseenter="enter('8395667075038215241');" onmouseout="out('8395667075038215241');" style=""> 978      private void attemptAutoList(Editable editable) {                                                             </span>
<span class="1630313539519665774" onmouseenter="enter('1630313539519665774');" onmouseout="out('1630313539519665774');" style=""> 979          int oldCursorPosition = mCurrentCursorPosition;                                                           </span>
<span class="2154628209294087333" onmouseenter="enter('2154628209294087333');" onmouseout="out('2154628209294087333');" style=""> 980          mCurrentCursorPosition = mContentEditText.getSelectionStart();                                            </span>
<span class="-1456162723219098064" onmouseenter="enter('-1456162723219098064');" onmouseout="out('-1456162723219098064');" style=""> 981          AutoBullet.apply(editable, oldCursorPosition, mCurrentCursorPosition);                                    </span>
<span class="2154628209294087333" onmouseenter="enter('2154628209294087333');" onmouseout="out('2154628209294087333');" style=""> 982          mCurrentCursorPosition = mContentEditText.getSelectionStart();                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 983      }                                                                                                             </span>
<span  style=""> 984                                                                                                                    </span>
<span class="-6933317077070028336" onmouseenter="enter('-6933317077070028336');" onmouseout="out('-6933317077070028336');" style=""> 985      private void saveAndSyncNote() {                                                                              </span>
<span class="-6566957513776356959" onmouseenter="enter('-6566957513776356959');" onmouseout="out('-6566957513776356959');" style=""> 986          if (mNote == null) {                                                                                      </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 987              return;                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 988          }                                                                                                         </span>
<span  style=""> 989                                                                                                                    </span>
<span class="1712554612672119113" onmouseenter="enter('1712554612672119113');" onmouseout="out('1712554612672119113');" style=""> 990          AppLog.add(                                                                                               </span>
<span class="5578246801297368785" onmouseenter="enter('5578246801297368785');" onmouseout="out('5578246801297368785');" style=""> 991              Type.ACTION,                                                                                          </span>
<span class="5428018773251277804" onmouseenter="enter('5428018773251277804');" onmouseout="out('5428018773251277804');" style=""> 992              &quot;Edited note (ID: &quot; + mNote.getSimperiumKey() +                                                       </span>
<span class="7932348859464220053" onmouseenter="enter('7932348859464220053');" onmouseout="out('7932348859464220053');" style=""> 993                  &quot; / Title: &quot; + mNote.getTitle() +                                                                 </span>
<span class="8952698626932118067" onmouseenter="enter('8952698626932118067');" onmouseout="out('8952698626932118067');" style=""> 994                  &quot; / Characters: &quot; + NoteUtils.getCharactersCount(mNote.getContent()) +                            </span>
<span class="638163407399296951" onmouseenter="enter('638163407399296951');" onmouseout="out('638163407399296951');" style=""> 995                  &quot; / Words: &quot; + NoteUtils.getWordCount(mNote.getContent()) + &quot;)&quot;                                   </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 996          );                                                                                                        </span>
<span class="16839101082915315" onmouseenter="enter('16839101082915315');" onmouseout="out('16839101082915315');" style=""> 997          new SaveNoteTask(this).executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR);                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 998      }                                                                                                             </span>
<span  style=""> 999                                                                                                                    </span>
<span class="-710883025591886987" onmouseenter="enter('-710883025591886987');" onmouseout="out('-710883025591886987');" style="">1000      public boolean isPlaceholderVisible() {                                                                       </span>
<span class="-4989874178895443572" onmouseenter="enter('-4989874178895443572');" onmouseout="out('-4989874178895443572');" style="">1001          if (mPlaceholderView != null) {                                                                           </span>
<span class="9146837192541101428" onmouseenter="enter('9146837192541101428');" onmouseout="out('9146837192541101428');" style="">1002              return mPlaceholderView.getVisibility() == View.VISIBLE;                                              </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1003          } else {                                                                                                  </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1004              return false;                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1005          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1006      }                                                                                                             </span>
<span  style="">1007                                                                                                                    </span>
<span class="-4564004023547017377" onmouseenter="enter('-4564004023547017377');" onmouseout="out('-4564004023547017377');" style="">1008      public void setPlaceholderVisible(boolean isVisible) {                                                        </span>
<span class="-6467031518050872536" onmouseenter="enter('-6467031518050872536');" onmouseout="out('-6467031518050872536');" style="">1009          if (isVisible) {                                                                                          </span>
<span class="1687907534970456445" onmouseenter="enter('1687907534970456445');" onmouseout="out('1687907534970456445');" style="">1010              mNote = null;                                                                                         </span>
<span class="-3407359796970873837" onmouseenter="enter('-3407359796970873837');" onmouseout="out('-3407359796970873837');" style="">1011              mContentEditText.setText(&quot;&quot;);                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1012          }                                                                                                         </span>
<span  style="">1013                                                                                                                    </span>
<span class="-4989874178895443572" onmouseenter="enter('-4989874178895443572');" onmouseout="out('-4989874178895443572');" style="">1014          if (mPlaceholderView != null) {                                                                           </span>
<span class="-1939399638656140532" onmouseenter="enter('-1939399638656140532');" onmouseout="out('-1939399638656140532');" style="">1015              mPlaceholderView.setVisibility(isVisible ? View.VISIBLE : View.GONE);                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1016          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1017      }                                                                                                             </span>
<span  style="">1018                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1019      @Override                                                                                                     </span>
<span class="-3315120631467309087" onmouseenter="enter('-3315120631467309087');" onmouseout="out('-3315120631467309087');" style="">1020      public void onFocusChange(View v, boolean hasFocus) {                                                         </span>
<span class="-6285712256166584728" onmouseenter="enter('-6285712256166584728');" onmouseout="out('-6285712256166584728');" style="">1021          if (!hasFocus) {                                                                                          </span>
<span class="6004881889903239201" onmouseenter="enter('6004881889903239201');" onmouseout="out('6004881889903239201');" style="">1022              String tags = getNoteTagsString().trim();                                                             </span>
<span  style="">1023                                                                                                                    </span>
<span class="-8405816820067798370" onmouseenter="enter('-8405816820067798370');" onmouseout="out('-8405816820067798370');" style="">1024              if (mTagInput.getText().toString().trim().length() &gt; 0                                                </span>
<span class="-3023921947470011218" onmouseenter="enter('-3023921947470011218');" onmouseout="out('-3023921947470011218');" style="">1025                  &amp;&amp; TagUtils.hashTagValid(mTagInput.getText().toString().trim())) {                                </span>
<span class="-8826289385438230332" onmouseenter="enter('-8826289385438230332');" onmouseout="out('-8826289385438230332');" style="">1026                  onTagAdded(mTagInput.getText().toString());                                                       </span>
<span class="-2106738445799932691" onmouseenter="enter('-2106738445799932691');" onmouseout="out('-2106738445799932691');" style="">1027              } else if (tags.length() &gt; 0) {                                                                       </span>
<span class="822236618440501069" onmouseenter="enter('822236618440501069');" onmouseout="out('822236618440501069');" style="">1028                  setChips(tags);                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1029              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1030          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1031      }                                                                                                             </span>
<span  style="">1032                                                                                                                    </span>
<span class="4758115017921537055" onmouseenter="enter('4758115017921537055');" onmouseout="out('4758115017921537055');" style="">1033      private Note getNote() {                                                                                      </span>
<span class="6687317620803594982" onmouseenter="enter('6687317620803594982');" onmouseout="out('6687317620803594982');" style="">1034          return mNote;                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1035      }                                                                                                             </span>
<span  style="">1036                                                                                                                    </span>
<span class="627621646474661739" onmouseenter="enter('627621646474661739');" onmouseout="out('627621646474661739');" style="">1037      public void setNote(String noteID) {                                                                          </span>
<span class="-6972394152055286124" onmouseenter="enter('-6972394152055286124');" onmouseout="out('-6972394152055286124');" style="">1038          setNote(noteID, null);                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1039      }                                                                                                             </span>
<span  style="">1040                                                                                                                    </span>
<span class="-260751237439499239" onmouseenter="enter('-260751237439499239');" onmouseout="out('-260751237439499239');" style="">1041      private String getNoteContentString() {                                                                       </span>
<span class="-8451380960236704581" onmouseenter="enter('-8451380960236704581');" onmouseout="out('-8451380960236704581');" style="">1042          if (mContentEditText == null || mContentEditText.getText() == null) {                                     </span>
<span class="-8289946804601166879" onmouseenter="enter('-8289946804601166879');" onmouseout="out('-8289946804601166879');" style="">1043              return &quot;&quot;;                                                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1044          } else {                                                                                                  </span>
<span class="9069870454824528783" onmouseenter="enter('9069870454824528783');" onmouseout="out('9069870454824528783');" style="">1045              return mContentEditText.getText().toString();                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1046          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1047      }                                                                                                             </span>
<span  style="">1048                                                                                                                    </span>
<span class="1791713131652036535" onmouseenter="enter('1791713131652036535');" onmouseout="out('1791713131652036535');" style="">1049      private String getNoteTagsString() {                                                                          </span>
<span class="-6446890674263139592" onmouseenter="enter('-6446890674263139592');" onmouseout="out('-6446890674263139592');" style="">1050          StringBuilder tags = new StringBuilder();                                                                 </span>
<span  style="">1051                                                                                                                    </span>
<span class="-4475001311202686832" onmouseenter="enter('-4475001311202686832');" onmouseout="out('-4475001311202686832');" style="">1052          for (int i= 0; i &lt; mTagChips.getChildCount(); i++) {                                                      </span>
<span class="5232521310381718252" onmouseenter="enter('5232521310381718252');" onmouseout="out('5232521310381718252');" style="">1053              tags.append(((Chip) mTagChips.getChildAt(i)).getText()).append(&quot; &quot;);                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1054          }                                                                                                         </span>
<span  style="">1055                                                                                                                    </span>
<span class="-8755942361109275249" onmouseenter="enter('-8755942361109275249');" onmouseout="out('-8755942361109275249');" style="">1056          return tags.toString();                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1057      }                                                                                                             </span>
<span  style="">1058                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1059      /**                                                                                                           </span>
<span class="-7590765322671442969" onmouseenter="enter('-7590765322671442969');" onmouseout="out('-7590765322671442969');" style="">1060       * Share bottom sheet callbacks                                                                               </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1061       */                                                                                                           </span>
<span  style="">1062                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1063      @Override                                                                                                     </span>
<span class="2968602784493438427" onmouseenter="enter('2968602784493438427');" onmouseout="out('2968602784493438427');" style="">1064      public void onSharePublishClicked() {                                                                         </span>
<span class="7985358866333072123" onmouseenter="enter('7985358866333072123');" onmouseout="out('7985358866333072123');" style="">1065          publishNote();                                                                                            </span>
<span class="4172821335322908069" onmouseenter="enter('4172821335322908069');" onmouseout="out('4172821335322908069');" style="">1066          if (mShareBottomSheet != null) {                                                                          </span>
<span class="-4836834074376612243" onmouseenter="enter('-4836834074376612243');" onmouseout="out('-4836834074376612243');" style="">1067              mShareBottomSheet.dismiss();                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1068          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1069      }                                                                                                             </span>
<span  style="">1070                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1071      @Override                                                                                                     </span>
<span class="2232780665187036053" onmouseenter="enter('2232780665187036053');" onmouseout="out('2232780665187036053');" style="">1072      public void onShareUnpublishClicked() {                                                                       </span>
<span class="4812123925634099655" onmouseenter="enter('4812123925634099655');" onmouseout="out('4812123925634099655');" style="">1073          unpublishNote();                                                                                          </span>
<span class="4172821335322908069" onmouseenter="enter('4172821335322908069');" onmouseout="out('4172821335322908069');" style="">1074          if (mShareBottomSheet != null) {                                                                          </span>
<span class="-4836834074376612243" onmouseenter="enter('-4836834074376612243');" onmouseout="out('-4836834074376612243');" style="">1075              mShareBottomSheet.dismiss();                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1076          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1077      }                                                                                                             </span>
<span  style="">1078                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1079      @Override                                                                                                     </span>
<span class="1895662807531612039" onmouseenter="enter('1895662807531612039');" onmouseout="out('1895662807531612039');" style="">1080      public void onWordPressPostClicked() {                                                                        </span>
<span class="4172821335322908069" onmouseenter="enter('4172821335322908069');" onmouseout="out('4172821335322908069');" style="">1081          if (mShareBottomSheet != null) {                                                                          </span>
<span class="-4836834074376612243" onmouseenter="enter('-4836834074376612243');" onmouseout="out('-4836834074376612243');" style="">1082              mShareBottomSheet.dismiss();                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1083          }                                                                                                         </span>
<span  style="">1084                                                                                                                    </span>
<span class="3314881699989820063" onmouseenter="enter('3314881699989820063');" onmouseout="out('3314881699989820063');" style="">1085          if (getFragmentManager() == null) {                                                                       </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1086              return;                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1087          }                                                                                                         </span>
<span  style="">1088                                                                                                                    </span>
<span class="5636539351844670959" onmouseenter="enter('5636539351844670959');" onmouseout="out('5636539351844670959');" style="">1089          FragmentTransaction ft = getFragmentManager().beginTransaction();                                         </span>
<span class="-500976049723048206" onmouseenter="enter('-500976049723048206');" onmouseout="out('-500976049723048206');" style="">1090          Fragment prev = getFragmentManager().findFragmentByTag(WordPressDialogFragment.DIALOG_TAG);               </span>
<span class="6915708381430486628" onmouseenter="enter('6915708381430486628');" onmouseout="out('6915708381430486628');" style="">1091          if (prev != null) {                                                                                       </span>
<span class="6191551415319260668" onmouseenter="enter('6191551415319260668');" onmouseout="out('6191551415319260668');" style="">1092              ft.remove(prev);                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1093          }                                                                                                         </span>
<span class="4313436897323820694" onmouseenter="enter('4313436897323820694');" onmouseout="out('4313436897323820694');" style="">1094          ft.addToBackStack(null);                                                                                  </span>
<span  style="">1095                                                                                                                    </span>
<span class="-5506082590725208104" onmouseenter="enter('-5506082590725208104');" onmouseout="out('-5506082590725208104');" style="">1096          // Create and show the dialog.                                                                            </span>
<span class="1756820858117205319" onmouseenter="enter('1756820858117205319');" onmouseout="out('1756820858117205319');" style="">1097          WordPressDialogFragment wpDialogFragment = new WordPressDialogFragment();                                 </span>
<span class="8550268343842317092" onmouseenter="enter('8550268343842317092');" onmouseout="out('8550268343842317092');" style="">1098          wpDialogFragment.setNote(mNote);                                                                          </span>
<span class="-7041960731203586914" onmouseenter="enter('-7041960731203586914');" onmouseout="out('-7041960731203586914');" style="">1099          wpDialogFragment.show(ft, WordPressDialogFragment.DIALOG_TAG);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1100      }                                                                                                             </span>
<span  style="">1101                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1102      @Override                                                                                                     </span>
<span class="8390280653962331927" onmouseenter="enter('8390280653962331927');" onmouseout="out('8390280653962331927');" style="">1103      public void onShareCollaborateClicked() {                                                                     </span>
<span class="8508848920358466816" onmouseenter="enter('8508848920358466816');" onmouseout="out('8508848920358466816');" style="">1104          Toast.makeText(getActivity(), R.string.collaborate_message, Toast.LENGTH_LONG).show();                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1105      }                                                                                                             </span>
<span  style="">1106                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1107      @Override                                                                                                     </span>
<span class="-3569494199320067069" onmouseenter="enter('-3569494199320067069');" onmouseout="out('-3569494199320067069');" style="">1108      public void onShareDismissed() {                                                                              </span>
<span  style="">1109                                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1110      }                                                                                                             </span>
<span  style="">1111                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1112      /**                                                                                                           </span>
<span class="358915473298384679" onmouseenter="enter('358915473298384679');" onmouseout="out('358915473298384679');" style="">1113       * History bottom sheet listeners                                                                             </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1114       */                                                                                                           </span>
<span  style="">1115                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1116      @Override                                                                                                     </span>
<span class="486589109199450506" onmouseenter="enter('486589109199450506');" onmouseout="out('486589109199450506');" style="">1117      public void onHistoryCancelClicked() {                                                                        </span>
<span class="4148799213240179760" onmouseenter="enter('4148799213240179760');" onmouseout="out('4148799213240179760');" style="">1118          mContentEditText.setText(mNote.getContent());                                                             </span>
<span class="-7542139914053196629" onmouseenter="enter('-7542139914053196629');" onmouseout="out('-7542139914053196629');" style="">1119          if (mHistoryBottomSheet != null) {                                                                        </span>
<span class="-2599981510781765889" onmouseenter="enter('-2599981510781765889');" onmouseout="out('-2599981510781765889');" style="">1120              mHistoryBottomSheet.dismiss();                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1121          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1122      }                                                                                                             </span>
<span  style="">1123                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1124      @Override                                                                                                     </span>
<span class="1746452780349475726" onmouseenter="enter('1746452780349475726');" onmouseout="out('1746452780349475726');" style="">1125      public void onHistoryRestoreClicked() {                                                                       </span>
<span class="-7542139914053196629" onmouseenter="enter('-7542139914053196629');" onmouseout="out('-7542139914053196629');" style="">1126          if (mHistoryBottomSheet != null) {                                                                        </span>
<span class="-2599981510781765889" onmouseenter="enter('-2599981510781765889');" onmouseout="out('-2599981510781765889');" style="">1127              mHistoryBottomSheet.dismiss();                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1128          }                                                                                                         </span>
<span class="-2186856349666885424" onmouseenter="enter('-2186856349666885424');" onmouseout="out('-2186856349666885424');" style="">1129          saveAndSyncNote();                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1130      }                                                                                                             </span>
<span  style="">1131                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1132      @Override                                                                                                     </span>
<span class="-1766878417892030172" onmouseenter="enter('-1766878417892030172');" onmouseout="out('-1766878417892030172');" style="">1133      public void onHistoryDismissed() {                                                                            </span>
<span class="7350001942179054285" onmouseenter="enter('7350001942179054285');" onmouseout="out('7350001942179054285');" style="">1134          if (!mHistoryBottomSheet.didTapOnButton()) {                                                              </span>
<span class="4148799213240179760" onmouseenter="enter('4148799213240179760');" onmouseout="out('4148799213240179760');" style="">1135              mContentEditText.setText(mNote.getContent());                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1136          }                                                                                                         </span>
<span  style="">1137                                                                                                                    </span>
<span class="16247739636052398" onmouseenter="enter('16247739636052398');" onmouseout="out('16247739636052398');" style="">1138          if (mHistoryTimeoutHandler != null) {                                                                     </span>
<span class="7316258928910882956" onmouseenter="enter('7316258928910882956');" onmouseout="out('7316258928910882956');" style="">1139              mHistoryTimeoutHandler.removeCallbacks(mHistoryTimeoutRunnable);                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1140          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1141      }                                                                                                             </span>
<span  style="">1142                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1143      @Override                                                                                                     </span>
<span class="6142431680500084708" onmouseenter="enter('6142431680500084708');" onmouseout="out('6142431680500084708');" style="">1144      public void onHistoryUpdateNote(String content) {                                                             </span>
<span class="5474545381550473491" onmouseenter="enter('5474545381550473491');" onmouseout="out('5474545381550473491');" style="">1145          mContentEditText.setText(content);                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1146      }                                                                                                             </span>
<span  style="">1147                                                                                                                    </span>
<span class="-2294831155573525866" onmouseenter="enter('-2294831155573525866');" onmouseout="out('-2294831155573525866');" style="">1148      private void saveNote() {                                                                                     </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1149          try {                                                                                                     </span>
<span class="1165974910453313736" onmouseenter="enter('1165974910453313736');" onmouseout="out('1165974910453313736');" style="">1150              if (mNote == null || mNotesBucket == null || mContentEditText == null || mIsLoadingNote ||            </span>
<span class="-8027031690448598107" onmouseenter="enter('-8027031690448598107');" onmouseout="out('-8027031690448598107');" style=""><abbr title="1151                  (mHistoryBottomSheet != null &amp;&amp; mHistoryBottomSheet.getDialog() != null &amp;&amp; mHistoryBottomSheet.getDialog().isShowing())) {">1151                  (mHistoryBottomSheet != null &amp;&amp; mHistoryBottomSheet.getDialog() != null &amp;&amp; mHistoryBottomSheet.get🔵</abbr></span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1152                  return;                                                                                           </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1153              } else {                                                                                              </span>
<span class="-1125588719504868669" onmouseenter="enter('-1125588719504868669');" onmouseout="out('-1125588719504868669');" style="">1154                  mNote = mNotesBucket.get(mNote.getSimperiumKey());                                                </span>
<span class="8897386780031316770" onmouseenter="enter('8897386780031316770');" onmouseout="out('8897386780031316770');" style="">1155                  mIsPreviewEnabled = mNote.isPreviewEnabled();                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1156              }                                                                                                     </span>
<span  style="">1157                                                                                                                    </span>
<span class="6475969200315240778" onmouseenter="enter('6475969200315240778');" onmouseout="out('6475969200315240778');" style="">1158              String content = mContentEditText.getPlainTextContent();                                              </span>
<span class="-8502490389039341280" onmouseenter="enter('-8502490389039341280');" onmouseout="out('-8502490389039341280');" style="">1159              String tagString = getNoteTagsString();                                                               </span>
<span  style="">1160                                                                                                                    </span>
<span class="3350877423550460602" onmouseenter="enter('3350877423550460602');" onmouseout="out('3350877423550460602');" style=""><abbr title="1161              if (mNote.hasChanges(content, tagString.trim(), mNote.isPinned(), mIsMarkdownEnabled, mIsPreviewEnabled)) {">1161              if (mNote.hasChanges(content, tagString.trim(), mNote.isPinned(), mIsMarkdownEnabled, mIsPreviewEnable🔵</abbr></span>
<span class="843504871988910810" onmouseenter="enter('843504871988910810');" onmouseout="out('843504871988910810');" style="">1162                  mNote.setContent(content);                                                                        </span>
<span class="1553130968631643861" onmouseenter="enter('1553130968631643861');" onmouseout="out('1553130968631643861');" style="">1163                  mNote.setTagString(tagString);                                                                    </span>
<span class="-3343075472306200704" onmouseenter="enter('-3343075472306200704');" onmouseout="out('-3343075472306200704');" style="">1164                  mNote.setModificationDate(Calendar.getInstance());                                                </span>
<span class="-2172998267651300967" onmouseenter="enter('-2172998267651300967');" onmouseout="out('-2172998267651300967');" style="">1165                  mNote.setMarkdownEnabled(mIsMarkdownEnabled);                                                     </span>
<span class="822592535093481459" onmouseenter="enter('822592535093481459');" onmouseout="out('822592535093481459');" style="">1166                  mNote.setPreviewEnabled(mIsPreviewEnabled);                                                       </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style="">1167                  mNote.save();                                                                                     </span>
<span  style="">1168                                                                                                                    </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style="">1169                  AnalyticsTracker.track(                                                                           </span>
<span class="5989088647015258106" onmouseenter="enter('5989088647015258106');" onmouseout="out('5989088647015258106');" style="">1170                      EDITOR_NOTE_EDITED,                                                                           </span>
<span class="-2430475172570880083" onmouseenter="enter('-2430475172570880083');" onmouseout="out('-2430475172570880083');" style="">1171                      CATEGORY_NOTE,                                                                                </span>
<span class="7262276752106887505" onmouseenter="enter('7262276752106887505');" onmouseout="out('7262276752106887505');" style="">1172                      &quot;editor_save&quot;                                                                                 </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">1173                  );                                                                                                </span>
<span  style="">1174                                                                                                                    </span>
<span class="1712554612672119113" onmouseenter="enter('1712554612672119113');" onmouseout="out('1712554612672119113');" style="">1175                  AppLog.add(                                                                                       </span>
<span class="5387827170384214934" onmouseenter="enter('5387827170384214934');" onmouseout="out('5387827170384214934');" style="">1176                      Type.SYNC,                                                                                    </span>
<span class="6067618927567422040" onmouseenter="enter('6067618927567422040');" onmouseout="out('6067618927567422040');" style="">1177                      &quot;Saved note locally in NoteEditorFragment (ID: &quot; + mNote.getSimperiumKey() +                  </span>
<span class="7932348859464220053" onmouseenter="enter('7932348859464220053');" onmouseout="out('7932348859464220053');" style="">1178                          &quot; / Title: &quot; + mNote.getTitle() +                                                         </span>
<span class="431319751787505650" onmouseenter="enter('431319751787505650');" onmouseout="out('431319751787505650');" style="">1179                          &quot; / Characters: &quot; + NoteUtils.getCharactersCount(content) +                               </span>
<span class="-6931859245270948040" onmouseenter="enter('-6931859245270948040');" onmouseout="out('-6931859245270948040');" style="">1180                          &quot; / Words: &quot; + NoteUtils.getWordCount(content) + &quot;)&quot;                                      </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">1181                  );                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1182              }                                                                                                     </span>
<span class="-3643940737031631548" onmouseenter="enter('-3643940737031631548');" onmouseout="out('-3643940737031631548');" style="">1183          } catch (BucketObjectMissingException exception) {                                                        </span>
<span class="-5036816163125879973" onmouseenter="enter('-5036816163125879973');" onmouseout="out('-5036816163125879973');" style="">1184              exception.printStackTrace();                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1185          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1186      }                                                                                                             </span>
<span  style="">1187                                                                                                                    </span>
<span class="-6769383367293074987" onmouseenter="enter('-6769383367293074987');" onmouseout="out('-6769383367293074987');" style="">1188      // Checks if cursor is at a URL when the selection changes                                                    </span>
<span class="499820509706145242" onmouseenter="enter('499820509706145242');" onmouseout="out('499820509706145242');" style="">1189      // If it is a URL, show the contextual action bar                                                             </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1190      @Override                                                                                                     </span>
<span class="-6619706727651867065" onmouseenter="enter('-6619706727651867065');" onmouseout="out('-6619706727651867065');" style="">1191      public void onSelectionChanged(int selStart, int selEnd) {                                                    </span>
<span class="7239443724625299771" onmouseenter="enter('7239443724625299771');" onmouseout="out('7239443724625299771');" style="">1192          mCurrentCursorPosition = selEnd;                                                                          </span>

<span class="-5773931921061181239" onmouseenter="enter('-5773931921061181239');" onmouseout="out('-5773931921061181239');" style="">1193          if (selStart == selEnd) {                                                                                 </span>
<span class="-1073801886026856185" onmouseenter="enter('-1073801886026856185');" onmouseout="out('-1073801886026856185');" style="">1194              Editable noteContent = mContentEditText.getText();                                                    </span>
<span class="6562974929235397620" onmouseenter="enter('6562974929235397620');" onmouseout="out('6562974929235397620');" style="">1195              if (noteContent == null)                                                                              </span>


<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1196                  return;                                                                                           </span>

<span  style="">1197                                                                                                                    </span>
<span class="1258634593958745929" onmouseenter="enter('1258634593958745929');" onmouseout="out('1258634593958745929');" style="">1198              URLSpan[] urlSpans = noteContent.getSpans(selStart, selStart, URLSpan.class);                         </span>

<span class="8265917182779455796" onmouseenter="enter('8265917182779455796');" onmouseout="out('8265917182779455796');" style="">1199              if (urlSpans.length &gt; 0) {                                                                            </span>
<span class="379938049561077801" onmouseenter="enter('379938049561077801');" onmouseout="out('379938049561077801');" style="">1200                  URLSpan urlSpan = urlSpans[0];                                                                    </span>
<span class="7382553573082356877" onmouseenter="enter('7382553573082356877');" onmouseout="out('7382553573082356877');" style="">1201                  mLinkUrl = urlSpan.getURL();                                                                      </span>
<span class="-2685141031372274993" onmouseenter="enter('-2685141031372274993');" onmouseout="out('-2685141031372274993');" style=""><abbr title="1202                  mLinkText = noteContent.subSequence(noteContent.getSpanStart(urlSpan), noteContent.getSpanEnd(urlSpan)).toString();">1202                  mLinkText = noteContent.subSequence(noteContent.getSpanStart(urlSpan), noteContent.getSpanEnd(urlS🔵</abbr></span>

<span class="-1291529600191394909" onmouseenter="enter('-1291529600191394909');" onmouseout="out('-1291529600191394909');" style="">1203                  if (mActionMode != null) {                                                                        </span>
<span class="8256553390773794578" onmouseenter="enter('8256553390773794578');" onmouseout="out('8256553390773794578');" style="">1204                      mActionMode.setSubtitle(mLinkText);                                                           </span>
<span class="-5782179795728005521" onmouseenter="enter('-5782179795728005521');" onmouseout="out('-5782179795728005521');" style="">1205                      updateMenuItems();                                                                            </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1206                      return;                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1207                  }                                                                                                 </span>
<span  style="">1208                                                                                                                    </span>
<span class="-4243988111679111503" onmouseenter="enter('-4243988111679111503');" onmouseout="out('-4243988111679111503');" style="">1209                  // Show the Contextual Action Bar                                                                 </span>
<span class="4809573797151136036" onmouseenter="enter('4809573797151136036');" onmouseout="out('4809573797151136036');" style="">1210                  if (getActivity() != null) {                                                                      </span>
<span class="-21436323499410640" onmouseenter="enter('-21436323499410640');" onmouseout="out('-21436323499410640');" style="">1211                      mActionMode = ((AppCompatActivity) getActivity()).startSupportActionMode(mActionModeCallback);</span>

<span class="-1291529600191394909" onmouseenter="enter('-1291529600191394909');" onmouseout="out('-1291529600191394909');" style="">1212                      if (mActionMode != null) {                                                                    </span>
<span class="8256553390773794578" onmouseenter="enter('8256553390773794578');" onmouseout="out('8256553390773794578');" style="">1213                          mActionMode.setSubtitle(mLinkText);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1214                      }                                                                                             </span>
<span  style="">1215                                                                                                                    </span>
<span class="-5782179795728005521" onmouseenter="enter('-5782179795728005521');" onmouseout="out('-5782179795728005521');" style="">1216                      updateMenuItems();                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1217                  }                                                                                                 </span>
<span class="7515827566305000834" onmouseenter="enter('7515827566305000834');" onmouseout="out('7515827566305000834');" style="">1218              } else if (mActionMode != null) {                                                                     </span>
<span class="7165201847947665807" onmouseenter="enter('7165201847947665807');" onmouseout="out('7165201847947665807');" style="">1219                  mActionMode.finish();                                                                             </span>
<span class="291405596407736607" onmouseenter="enter('291405596407736607');" onmouseout="out('291405596407736607');" style="">1220                  mActionMode = null;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1221              }                                                                                                     </span>
<span class="7515827566305000834" onmouseenter="enter('7515827566305000834');" onmouseout="out('7515827566305000834');" style="">1222          } else if (mActionMode != null) {                                                                         </span>
<span class="7165201847947665807" onmouseenter="enter('7165201847947665807');" onmouseout="out('7165201847947665807');" style="">1223              mActionMode.finish();                                                                                 </span>
<span class="291405596407736607" onmouseenter="enter('291405596407736607');" onmouseout="out('291405596407736607');" style="">1224              mActionMode = null;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1225          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1226      }                                                                                                             </span>
<span  style="">1227                                                                                                                    </span>
<span class="2270277682351720198" onmouseenter="enter('2270277682351720198');" onmouseout="out('2270277682351720198');" style="">1228      private void updateMenuItems() {                                                                              </span>
<span class="-515446486584282912" onmouseenter="enter('-515446486584282912');" onmouseout="out('-515446486584282912');" style="">1229          mCopyMenuItem.setIcon(mCopyIcon);                                                                         </span>
<span class="773177223161240604" onmouseenter="enter('773177223161240604');" onmouseout="out('773177223161240604');" style="">1230          mShareMenuItem.setIcon(mShareIcon);                                                                       </span>
<span  style="">1231                                                                                                                    </span>
<span class="-4542884014549729251" onmouseenter="enter('-4542884014549729251');" onmouseout="out('-4542884014549729251');" style="">1232          if (mViewLinkMenuItem != null &amp;&amp; mLinkUrl != null) {                                                      </span>
<span class="7070835845876331574" onmouseenter="enter('7070835845876331574');" onmouseout="out('7070835845876331574');" style="">1233              if (mLinkUrl.startsWith(&quot;tel:&quot;)) {                                                                    </span>
<span class="-3393709522714367611" onmouseenter="enter('-3393709522714367611');" onmouseout="out('-3393709522714367611');" style="">1234                  mViewLinkMenuItem.setIcon(mCallIcon);                                                             </span>
<span class="-1045706461125369539" onmouseenter="enter('-1045706461125369539');" onmouseout="out('-1045706461125369539');" style="">1235                  mViewLinkMenuItem.setTitle(getString(R.string.call));                                             </span>
<span class="-4087102511435152339" onmouseenter="enter('-4087102511435152339');" onmouseout="out('-4087102511435152339');" style="">1236              } else if (mLinkUrl.startsWith(&quot;mailto:&quot;)) {                                                          </span>
<span class="3689189789047011289" onmouseenter="enter('3689189789047011289');" onmouseout="out('3689189789047011289');" style="">1237                  mViewLinkMenuItem.setIcon(mEmailIcon);                                                            </span>
<span class="7417350135164215691" onmouseenter="enter('7417350135164215691');" onmouseout="out('7417350135164215691');" style="">1238                  mViewLinkMenuItem.setTitle(getString(R.string.email));                                            </span>
<span class="-1372170246346381865" onmouseenter="enter('-1372170246346381865');" onmouseout="out('-1372170246346381865');" style="">1239              } else if (mLinkUrl.startsWith(&quot;geo:&quot;)) {                                                             </span>
<span class="-4826865256995968603" onmouseenter="enter('-4826865256995968603');" onmouseout="out('-4826865256995968603');" style="">1240                  mViewLinkMenuItem.setIcon(mMapIcon);                                                              </span>
<span class="5018205442899714685" onmouseenter="enter('5018205442899714685');" onmouseout="out('5018205442899714685');" style="">1241                  mViewLinkMenuItem.setTitle(getString(R.string.view_map));                                         </span>



<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1242              } else {                                                                                              </span>
<span class="7513617525800990773" onmouseenter="enter('7513617525800990773');" onmouseout="out('7513617525800990773');" style="">1243                  mViewLinkMenuItem.setIcon(mBrowserIcon);                                                          </span>
<span class="4171282647008223100" onmouseenter="enter('4171282647008223100');" onmouseout="out('4171282647008223100');" style="">1244                  mViewLinkMenuItem.setTitle(getString(R.string.view_in_browser));                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1245              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1246          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1247      }                                                                                                             </span>
<span  style="">1248                                                                                                                    </span>
<span class="91579398727100136" onmouseenter="enter('91579398727100136');" onmouseout="out('91579398727100136');" style="">1249      private void setPublishedNote(boolean isPublished) {                                                          </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style="">1250          if (mNote != null) {                                                                                      </span>
<span class="316653489117166649" onmouseenter="enter('316653489117166649');" onmouseout="out('316653489117166649');" style="">1251              mNote.setPublished(isPublished);                                                                      </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style="">1252              mNote.save();                                                                                         </span>
<span  style="">1253                                                                                                                    </span>
<span class="3198515589608942377" onmouseenter="enter('3198515589608942377');" onmouseout="out('3198515589608942377');" style="">1254              // reset publish status in 20 seconds if we don&#x27;t hear back from Simperium                            </span>
<span class="-8751687465189974985" onmouseenter="enter('-8751687465189974985');" onmouseout="out('-8751687465189974985');" style="">1255              mPublishTimeoutHandler.postDelayed(mPublishTimeoutRunnable, PUBLISH_TIMEOUT);                         </span>
<span  style="">1256                                                                                                                    </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style="">1257              AnalyticsTracker.track(                                                                               </span>
<span class="1199660928845890452" onmouseenter="enter('1199660928845890452');" onmouseout="out('1199660928845890452');" style="">1258                  isPublished ? EDITOR_NOTE_PUBLISHED : EDITOR_NOTE_UNPUBLISHED,                                    </span>
<span class="-2430475172570880083" onmouseenter="enter('-2430475172570880083');" onmouseout="out('-2430475172570880083');" style="">1259                  CATEGORY_NOTE,                                                                                    </span>
<span class="-4469222051298874183" onmouseenter="enter('-4469222051298874183');" onmouseout="out('-4469222051298874183');" style="">1260                  &quot;publish_note_button&quot;                                                                             </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">1261              );                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1262          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1263      }                                                                                                             </span>
<span  style="">1264                                                                                                                    </span>
<span class="-8415113329489780394" onmouseenter="enter('-8415113329489780394');" onmouseout="out('-8415113329489780394');" style="">1265      private void updatePublishedState(boolean isSuccess) {                                                        </span>
<span class="7049673307523359848" onmouseenter="enter('7049673307523359848');" onmouseout="out('7049673307523359848');" style="">1266          if (mPublishingSnackbar == null) {                                                                        </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1267              return;                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1268          }                                                                                                         </span>
<span  style="">1269                                                                                                                    </span>
<span class="-7291151504336992329" onmouseenter="enter('-7291151504336992329');" onmouseout="out('-7291151504336992329');" style="">1270          mPublishingSnackbar.dismiss();                                                                            </span>
<span class="-2275300557144928477" onmouseenter="enter('-2275300557144928477');" onmouseout="out('-2275300557144928477');" style="">1271          mPublishingSnackbar = null;                                                                               </span>
<span  style="">1272                                                                                                                    </span>
<span class="3311052756729554547" onmouseenter="enter('3311052756729554547');" onmouseout="out('3311052756729554547');" style="">1273          if (isSuccess &amp;&amp; isAdded()) {                                                                             </span>
<span class="-1365615346790030662" onmouseenter="enter('-1365615346790030662');" onmouseout="out('-1365615346790030662');" style="">1274              if (mNote.isPublished()) {                                                                            </span>
<span class="5497411134593542747" onmouseenter="enter('5497411134593542747');" onmouseout="out('5497411134593542747');" style="">1275                  @StringRes int text;                                                                              </span>
<span  style="">1276                                                                                                                    </span>
<span class="8518441705934796822" onmouseenter="enter('8518441705934796822');" onmouseout="out('8518441705934796822');" style="">1277                  if (BrowserUtils.copyToClipboard(requireContext(), mNote.getPublishedUrl())) {                    </span>
<span class="8974304534544855275" onmouseenter="enter('8974304534544855275');" onmouseout="out('8974304534544855275');" style="">1278                      text = R.string.publish_successful_link;                                                      </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1279                  } else {                                                                                          </span>
<span class="-3232510055763324097" onmouseenter="enter('-3232510055763324097');" onmouseout="out('-3232510055763324097');" style="">1280                      text = R.string.publish_successful;                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1281                  }                                                                                                 </span>
<span  style="">1282                                                                                                                    </span>
<span class="7461063035263331376" onmouseenter="enter('7461063035263331376');" onmouseout="out('7461063035263331376');" style="">1283                  if (mHideActionOnSuccess) {                                                                       </span>
<span class="6757689242728251287" onmouseenter="enter('6757689242728251287');" onmouseout="out('6757689242728251287');" style="">1284                      Snackbar.make(mRootView, text, Snackbar.LENGTH_LONG).show();                                  </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1285                  } else {                                                                                          </span>
<span class="6243176840022533873" onmouseenter="enter('6243176840022533873');" onmouseout="out('6243176840022533873');" style="">1286                      Snackbar.make(mRootView, text, Snackbar.LENGTH_LONG)                                          </span>
<span class="1204503404672542585" onmouseenter="enter('1204503404672542585');" onmouseout="out('1204503404672542585');" style="">1287                          .setAction(                                                                               </span>
<span class="3956744015789713296" onmouseenter="enter('3956744015789713296');" onmouseout="out('3956744015789713296');" style="">1288                              R.string.undo,                                                                        </span>
<span class="6694611070408135822" onmouseenter="enter('6694611070408135822');" onmouseout="out('6694611070408135822');" style="">1289                              new View.OnClickListener() {                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1290                                  @Override                                                                         </span>
<span class="-6587489291029443051" onmouseenter="enter('-6587489291029443051');" onmouseout="out('-6587489291029443051');" style="">1291                                  public void onClick(View v) {                                                     </span>
<span class="-4312757058216662092" onmouseenter="enter('-4312757058216662092');" onmouseout="out('-4312757058216662092');" style="">1292                                      mHideActionOnSuccess = true;                                                  </span>
<span class="4812123925634099655" onmouseenter="enter('4812123925634099655');" onmouseout="out('4812123925634099655');" style="">1293                                      unpublishNote();                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1294                                  }                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1295                              }                                                                                     </span>
<span class="-2015476096144723150" onmouseenter="enter('-2015476096144723150');" onmouseout="out('-2015476096144723150');" style="">1296                          )                                                                                         </span>
<span class="-4298987925833899609" onmouseenter="enter('-4298987925833899609');" onmouseout="out('-4298987925833899609');" style="">1297                          .show();                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1298                  }                                                                                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1299              } else {                                                                                              </span>
<span class="7461063035263331376" onmouseenter="enter('7461063035263331376');" onmouseout="out('7461063035263331376');" style="">1300                  if (mHideActionOnSuccess) {                                                                       </span>
<span class="525266416384737723" onmouseenter="enter('525266416384737723');" onmouseout="out('525266416384737723');" style="">1301                      Snackbar.make(mRootView, R.string.unpublish_successful, Snackbar.LENGTH_LONG)                 </span>
<span class="-4298987925833899609" onmouseenter="enter('-4298987925833899609');" onmouseout="out('-4298987925833899609');" style="">1302                              .show();                                                                              </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1303                  } else {                                                                                          </span>
<span class="525266416384737723" onmouseenter="enter('525266416384737723');" onmouseout="out('525266416384737723');" style="">1304                      Snackbar.make(mRootView, R.string.unpublish_successful, Snackbar.LENGTH_LONG)                 </span>
<span class="1204503404672542585" onmouseenter="enter('1204503404672542585');" onmouseout="out('1204503404672542585');" style="">1305                              .setAction(                                                                           </span>
<span class="3956744015789713296" onmouseenter="enter('3956744015789713296');" onmouseout="out('3956744015789713296');" style="">1306                                  R.string.undo,                                                                    </span>
<span class="6694611070408135822" onmouseenter="enter('6694611070408135822');" onmouseout="out('6694611070408135822');" style="">1307                                  new View.OnClickListener() {                                                      </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1308                                      @Override                                                                     </span>
<span class="-6587489291029443051" onmouseenter="enter('-6587489291029443051');" onmouseout="out('-6587489291029443051');" style="">1309                                      public void onClick(View v) {                                                 </span>
<span class="-4312757058216662092" onmouseenter="enter('-4312757058216662092');" onmouseout="out('-4312757058216662092');" style="">1310                                          mHideActionOnSuccess = true;                                              </span>
<span class="7985358866333072123" onmouseenter="enter('7985358866333072123');" onmouseout="out('7985358866333072123');" style="">1311                                          publishNote();                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1312                                      }                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1313                                  }                                                                                 </span>
<span class="-2015476096144723150" onmouseenter="enter('-2015476096144723150');" onmouseout="out('-2015476096144723150');" style="">1314                              )                                                                                     </span>
<span class="-4298987925833899609" onmouseenter="enter('-4298987925833899609');" onmouseout="out('-4298987925833899609');" style="">1315                              .show();                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1316                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1317              }                                                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1318          } else {                                                                                                  </span>
<span class="-1365615346790030662" onmouseenter="enter('-1365615346790030662');" onmouseout="out('-1365615346790030662');" style="">1319              if (mNote.isPublished()) {                                                                            </span>
<span class="-4464833730716871257" onmouseenter="enter('-4464833730716871257');" onmouseout="out('-4464833730716871257');" style="">1320                  Snackbar.make(mRootView, R.string.unpublish_error, Snackbar.LENGTH_LONG)                          </span>
<span class="1204503404672542585" onmouseenter="enter('1204503404672542585');" onmouseout="out('1204503404672542585');" style="">1321                          .setAction(                                                                               </span>
<span class="4947887522108728525" onmouseenter="enter('4947887522108728525');" onmouseout="out('4947887522108728525');" style="">1322                              R.string.retry,                                                                       </span>
<span class="6694611070408135822" onmouseenter="enter('6694611070408135822');" onmouseout="out('6694611070408135822');" style="">1323                              new View.OnClickListener() {                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1324                                  @Override                                                                         </span>
<span class="-6587489291029443051" onmouseenter="enter('-6587489291029443051');" onmouseout="out('-6587489291029443051');" style="">1325                                  public void onClick(View v) {                                                     </span>
<span class="-4312757058216662092" onmouseenter="enter('-4312757058216662092');" onmouseout="out('-4312757058216662092');" style="">1326                                      mHideActionOnSuccess = true;                                                  </span>
<span class="4812123925634099655" onmouseenter="enter('4812123925634099655');" onmouseout="out('4812123925634099655');" style="">1327                                      unpublishNote();                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1328                                  }                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1329                              }                                                                                     </span>
<span class="1929519410657596695" onmouseenter="enter('1929519410657596695');" onmouseout="out('1929519410657596695');" style="">1330                          ).show();                                                                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1331              } else {                                                                                              </span>
<span class="-2467718639414539789" onmouseenter="enter('-2467718639414539789');" onmouseout="out('-2467718639414539789');" style="">1332                  Snackbar.make(mRootView, R.string.publish_error, Snackbar.LENGTH_LONG)                            </span>
<span class="1204503404672542585" onmouseenter="enter('1204503404672542585');" onmouseout="out('1204503404672542585');" style="">1333                          .setAction(                                                                               </span>
<span class="4947887522108728525" onmouseenter="enter('4947887522108728525');" onmouseout="out('4947887522108728525');" style="">1334                              R.string.retry,                                                                       </span>
<span class="6694611070408135822" onmouseenter="enter('6694611070408135822');" onmouseout="out('6694611070408135822');" style="">1335                              new View.OnClickListener() {                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1336                                  @Override                                                                         </span>
<span class="-6587489291029443051" onmouseenter="enter('-6587489291029443051');" onmouseout="out('-6587489291029443051');" style="">1337                                  public void onClick(View v) {                                                     </span>
<span class="-4312757058216662092" onmouseenter="enter('-4312757058216662092');" onmouseout="out('-4312757058216662092');" style="">1338                                      mHideActionOnSuccess = true;                                                  </span>
<span class="7985358866333072123" onmouseenter="enter('7985358866333072123');" onmouseout="out('7985358866333072123');" style="">1339                                      publishNote();                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1340                                  }                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1341                              }                                                                                     </span>
<span class="1929519410657596695" onmouseenter="enter('1929519410657596695');" onmouseout="out('1929519410657596695');" style="">1342                          ).show();                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1343              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1344          }                                                                                                         </span>
<span  style="">1345                                                                                                                    </span>
<span class="-6543205336186683580" onmouseenter="enter('-6543205336186683580');" onmouseout="out('-6543205336186683580');" style="">1346          mHideActionOnSuccess = false;                                                                             </span>
<span class="-8532471920650411447" onmouseenter="enter('-8532471920650411447');" onmouseout="out('-8532471920650411447');" style="">1347          requireActivity().invalidateOptionsMenu();                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1348      }                                                                                                             </span>
<span  style="">1349                                                                                                                    </span>
<span class="6900416574659568584" onmouseenter="enter('6900416574659568584');" onmouseout="out('6900416574659568584');" style="">1350      private void publishNote() {                                                                                  </span>
<span class="939688580551732431" onmouseenter="enter('939688580551732431');" onmouseout="out('939688580551732431');" style="">1351          if (!NetworkUtils.isNetworkAvailable(requireContext())) {                                                 </span>
<span class="8924960461604916754" onmouseenter="enter('8924960461604916754');" onmouseout="out('8924960461604916754');" style="">1352              Toast.makeText(requireContext(), R.string.error_network_required, Toast.LENGTH_LONG).show();          </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1353              return;                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1354          }                                                                                                         </span>
<span  style="">1355                                                                                                                    </span>
<span class="-7481427962806884462" onmouseenter="enter('-7481427962806884462');" onmouseout="out('-7481427962806884462');" style="">1356          if (isAdded()) {                                                                                          </span>
<span class="402944241808212646" onmouseenter="enter('402944241808212646');" onmouseout="out('402944241808212646');" style="">1357              mPublishingSnackbar = Snackbar.make(mRootView, R.string.publishing, Snackbar.LENGTH_INDEFINITE);      </span>
<span class="-8074649539774450656" onmouseenter="enter('-8074649539774450656');" onmouseout="out('-8074649539774450656');" style="">1358              mPublishingSnackbar.show();                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1359          }                                                                                                         </span>
<span  style="">1360                                                                                                                    </span>
<span class="5480526116728317891" onmouseenter="enter('5480526116728317891');" onmouseout="out('5480526116728317891');" style="">1361          setPublishedNote(true);                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1362      }                                                                                                             </span>
<span  style="">1363                                                                                                                    </span>
<span class="-8215923685018306170" onmouseenter="enter('-8215923685018306170');" onmouseout="out('-8215923685018306170');" style="">1364      private void unpublishNote() {                                                                                </span>
<span class="939688580551732431" onmouseenter="enter('939688580551732431');" onmouseout="out('939688580551732431');" style="">1365          if (!NetworkUtils.isNetworkAvailable(requireContext())) {                                                 </span>
<span class="8924960461604916754" onmouseenter="enter('8924960461604916754');" onmouseout="out('8924960461604916754');" style="">1366              Toast.makeText(requireContext(), R.string.error_network_required, Toast.LENGTH_LONG).show();          </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1367              return;                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1368          }                                                                                                         </span>
<span  style="">1369                                                                                                                    </span>
<span class="-7481427962806884462" onmouseenter="enter('-7481427962806884462');" onmouseout="out('-7481427962806884462');" style="">1370          if (isAdded()) {                                                                                          </span>
<span class="-5849073483621593387" onmouseenter="enter('-5849073483621593387');" onmouseout="out('-5849073483621593387');" style="">1371              mPublishingSnackbar = Snackbar.make(mRootView, R.string.unpublishing, Snackbar.LENGTH_INDEFINITE);    </span>
<span class="-8074649539774450656" onmouseenter="enter('-8074649539774450656');" onmouseout="out('-8074649539774450656');" style="">1372              mPublishingSnackbar.show();                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1373          }                                                                                                         </span>
<span  style="">1374                                                                                                                    </span>
<span class="8445226168544755352" onmouseenter="enter('8445226168544755352');" onmouseout="out('8445226168544755352');" style="">1375          setPublishedNote(false);                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1376      }                                                                                                             </span>
<span  style="">1377                                                                                                                    </span>
<span class="-2059530202125765167" onmouseenter="enter('-2059530202125765167');" onmouseout="out('-2059530202125765167');" style="">1378      private void showShare(String text) {                                                                         </span>
<span class="-462181345749239892" onmouseenter="enter('-462181345749239892');" onmouseout="out('-462181345749239892');" style="">1379          startActivity(                                                                                            </span>
<span class="-2960409665728397105" onmouseenter="enter('-2960409665728397105');" onmouseout="out('-2960409665728397105');" style="">1380              ShareCompat.IntentBuilder.from(requireActivity())                                                     </span>
<span class="-7167858845932453536" onmouseenter="enter('-7167858845932453536');" onmouseout="out('-7167858845932453536');" style="">1381                  .setText(text)                                                                                    </span>
<span class="8809275298081922415" onmouseenter="enter('8809275298081922415');" onmouseout="out('8809275298081922415');" style="">1382                  .setType(&quot;text/plain&quot;)                                                                            </span>
<span class="-4946837607512363870" onmouseenter="enter('-4946837607512363870');" onmouseout="out('-4946837607512363870');" style="">1383                  .createChooserIntent()                                                                            </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">1384          );                                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1385      }                                                                                                             </span>
<span class="552430204178555924" onmouseenter="enter('552430204178555924');" onmouseout="out('552430204178555924');" style="">1386      private void showShareSheet() {                                                                               </span>
<span class="4007819101803880383" onmouseenter="enter('4007819101803880383');" onmouseout="out('4007819101803880383');" style="">1387          if (isAdded() &amp;&amp; mShareBottomSheet != null &amp;&amp; !mShareBottomSheet.isAdded()) {                             </span>
<span class="-6363695226018504364" onmouseenter="enter('-6363695226018504364');" onmouseout="out('-6363695226018504364');" style="">1388              mShareBottomSheet.show(requireFragmentManager(), mNote);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1389          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1390      }                                                                                                             </span>
<span  style="">1391                                                                                                                    </span>
<span class="-4049506869902668727" onmouseenter="enter('-4049506869902668727');" onmouseout="out('-4049506869902668727');" style="">1392      private void showInfoSheet() {                                                                                </span>
<span class="2029397660939536329" onmouseenter="enter('2029397660939536329');" onmouseout="out('2029397660939536329');" style="">1393          if (isAdded() &amp;&amp; mInfoBottomSheet != null &amp;&amp; !mInfoBottomSheet.isAdded()) {                               </span>
<span class="-1248038515529606639" onmouseenter="enter('-1248038515529606639');" onmouseout="out('-1248038515529606639');" style="">1394              mInfoBottomSheet.show(requireFragmentManager(), mNote);                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1395          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1396      }                                                                                                             </span>
<span  style="">1397                                                                                                                    </span>
<span class="5911143564482716303" onmouseenter="enter('5911143564482716303');" onmouseout="out('5911143564482716303');" style="">1398      private void showHistorySheet() {                                                                             </span>
<span class="1950176939429748509" onmouseenter="enter('1950176939429748509');" onmouseout="out('1950176939429748509');" style="">1399          if (isAdded() &amp;&amp; mHistoryBottomSheet != null &amp;&amp; !mHistoryBottomSheet.isAdded()) {                         </span>
<span class="8706434621047143120" onmouseenter="enter('8706434621047143120');" onmouseout="out('8706434621047143120');" style="">1400              // Request revisions for the current note                                                             </span>
<span class="-1574938770535875074" onmouseenter="enter('-1574938770535875074');" onmouseout="out('-1574938770535875074');" style="">1401              mNotesBucket.getRevisions(mNote, MAX_REVISIONS, mHistoryBottomSheet.getRevisionsRequestCallbacks());  </span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style="">1402              saveNote();                                                                                           </span>
<span  style="">1403                                                                                                                    </span>
<span class="4961792341108798217" onmouseenter="enter('4961792341108798217');" onmouseout="out('4961792341108798217');" style="">1404              mHistoryBottomSheet.show(requireFragmentManager(), mNote);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1405          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1406      }                                                                                                             </span>
<span  style="">1407                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1408      /**                                                                                                           </span>
<span class="-1711188639399183775" onmouseenter="enter('-1711188639399183775');" onmouseout="out('-1711188639399183775');" style="">1409       * Simperium listeners                                                                                        </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1410       */                                                                                                           </span>
<span  style="">1411                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1412      @Override                                                                                                     </span>
<span class="3459602708969445883" onmouseenter="enter('3459602708969445883');" onmouseout="out('3459602708969445883');" style="">1413      public void onDeleteObject(Bucket&lt;Note&gt; noteBucket, Note note) {                                              </span>
<span  style="">1414                                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1415      }                                                                                                             </span>
<span  style="">1416                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1417      @Override                                                                                                     </span>
<span class="-2970240973750057256" onmouseenter="enter('-2970240973750057256');" onmouseout="out('-2970240973750057256');" style="">1418      public void onNetworkChange(Bucket&lt;Note&gt; noteBucket, Bucket.ChangeType changeType, final String key) {        </span>
<span class="6607037711761945955" onmouseenter="enter('6607037711761945955');" onmouseout="out('6607037711761945955');" style="">1419          if (changeType == Bucket.ChangeType.MODIFY) {                                                             </span>
<span class="-6254872391725782597" onmouseenter="enter('-6254872391725782597');" onmouseout="out('-6254872391725782597');" style="">1420              if (getNote() != null &amp;&amp; getNote().getSimperiumKey().equals(key)) {                                   </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1421                  try {                                                                                             </span>
<span class="-1578175229665237336" onmouseenter="enter('-1578175229665237336');" onmouseout="out('-1578175229665237336');" style="">1422                      mNotesBucket = noteBucket;                                                                    </span>
<span class="3951885723067312215" onmouseenter="enter('3951885723067312215');" onmouseout="out('3951885723067312215');" style="">1423                      final Note updatedNote = mNotesBucket.get(key);                                               </span>
<span class="4809573797151136036" onmouseenter="enter('4809573797151136036');" onmouseout="out('4809573797151136036');" style="">1424                      if (getActivity() != null) {                                                                  </span>
<span class="-3876200887541462175" onmouseenter="enter('-3876200887541462175');" onmouseout="out('-3876200887541462175');" style="">1425                          getActivity().runOnUiThread(new Runnable() {                                              </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1426                              @Override                                                                             </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">1427                              public void run() {                                                                   </span>
<span class="-8758788084050668688" onmouseenter="enter('-8758788084050668688');" onmouseout="out('-8758788084050668688');" style="">1428                                  if (mPublishTimeoutHandler != null) {                                             </span>
<span class="-1646454762641300025" onmouseenter="enter('-1646454762641300025');" onmouseout="out('-1646454762641300025');" style="">1429                                      mPublishTimeoutHandler.removeCallbacks(mPublishTimeoutRunnable);              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1430                                  }                                                                                 </span>
<span  style="">1431                                                                                                                    </span>
<span class="-8617980127286778731" onmouseenter="enter('-8617980127286778731');" onmouseout="out('-8617980127286778731');" style="">1432                                  updateNote(updatedNote);                                                          </span>
<span class="2318735056997767280" onmouseenter="enter('2318735056997767280');" onmouseout="out('2318735056997767280');" style="">1433                                  updatePublishedState(true);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1434                              }                                                                                     </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">1435                          });                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1436                      }                                                                                             </span>
<span class="-1560847995217927266" onmouseenter="enter('-1560847995217927266');" onmouseout="out('-1560847995217927266');" style="">1437                  } catch (BucketObjectMissingException e) {                                                        </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style="">1438                      e.printStackTrace();                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1439                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1440              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1441          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1442      }                                                                                                             </span>
<span  style="">1443                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1444      @Override                                                                                                     </span>
<span class="1835476648918604123" onmouseenter="enter('1835476648918604123');" onmouseout="out('1835476648918604123');" style="">1445      public void onSaveObject(Bucket&lt;Note&gt; noteBucket, Note note) {                                                </span>
<span class="-2565337116915540090" onmouseenter="enter('-2565337116915540090');" onmouseout="out('-2565337116915540090');" style="">1446          if (mIsPaused) {                                                                                          </span>
<span class="-1649552973291504175" onmouseenter="enter('-1649552973291504175');" onmouseout="out('-1649552973291504175');" style="">1447              mNotesBucket.removeListener(this);                                                                    </span>
<span class="-9222421628383802707" onmouseenter="enter('-9222421628383802707');" onmouseout="out('-9222421628383802707');" style="">1448              mNotesBucket.stop();                                                                                  </span>
<span class="-5888247817738062720" onmouseenter="enter('-5888247817738062720');" onmouseout="out('-5888247817738062720');" style="">1449              AppLog.add(Type.SYNC, &quot;Stopped note bucket (NoteEditorFragment)&quot;);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1450          }                                                                                                         </span>
<span  style="">1451                                                                                                                    </span>
<span class="1712554612672119113" onmouseenter="enter('1712554612672119113');" onmouseout="out('1712554612672119113');" style="">1452          AppLog.add(                                                                                               </span>
<span class="5387827170384214934" onmouseenter="enter('5387827170384214934');" onmouseout="out('5387827170384214934');" style="">1453              Type.SYNC,                                                                                            </span>
<span class="-2467507706164826416" onmouseenter="enter('-2467507706164826416');" onmouseout="out('-2467507706164826416');" style="">1454              &quot;Saved note callback in NoteEditorFragment (ID: &quot; + note.getSimperiumKey() +                          </span>
<span class="8009766076008568533" onmouseenter="enter('8009766076008568533');" onmouseout="out('8009766076008568533');" style="">1455                  &quot; / Title: &quot; + note.getTitle() +                                                                  </span>
<span class="3373129960779075140" onmouseenter="enter('3373129960779075140');" onmouseout="out('3373129960779075140');" style="">1456                  &quot; / Characters: &quot; + NoteUtils.getCharactersCount(note.getContent()) +                             </span>
<span class="-6586905692045925149" onmouseenter="enter('-6586905692045925149');" onmouseout="out('-6586905692045925149');" style="">1457                  &quot; / Words: &quot; + NoteUtils.getWordCount(note.getContent()) + &quot;)&quot;                                    </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">1458          );                                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1459      }                                                                                                             </span>
<span  style="">1460                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1461      @Override                                                                                                     </span>
<span class="-5956849782971602831" onmouseenter="enter('-5956849782971602831');" onmouseout="out('-5956849782971602831');" style="">1462      public void onBeforeUpdateObject(Bucket&lt;Note&gt; bucket, Note note) {                                            </span>
<span class="9133977848896323437" onmouseenter="enter('9133977848896323437');" onmouseout="out('9133977848896323437');" style="">1463          // Don&#x27;t apply updates if we haven&#x27;t loaded the note yet                                                  </span>
<span class="-1541782922582123662" onmouseenter="enter('-1541782922582123662');" onmouseout="out('-1541782922582123662');" style="">1464          if (mIsLoadingNote)                                                                                       </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1465              return;                                                                                               </span>
<span  style="">1466                                                                                                                    </span>
<span class="1341660593539808393" onmouseenter="enter('1341660593539808393');" onmouseout="out('1341660593539808393');" style="">1467          Note openNote = getNote();                                                                                </span>
<span class="-6997098079508589023" onmouseenter="enter('-6997098079508589023');" onmouseout="out('-6997098079508589023');" style="">1468          if (openNote == null || !openNote.getSimperiumKey().equals(note.getSimperiumKey()))                       </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1469              return;                                                                                               </span>
<span  style="">1470                                                                                                                    </span>
<span class="7121549238466162700" onmouseenter="enter('7121549238466162700');" onmouseout="out('7121549238466162700');" style="">1471          note.setContent(mContentEditText.getPlainTextContent());                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1472      }                                                                                                             </span>
<span  style="">1473                                                                                                                    </span>
<span class="9045414880144452172" onmouseenter="enter('9045414880144452172');" onmouseout="out('9045414880144452172');" style="">1474      private static class LoadNoteTask extends AsyncTask&lt;String, Void, Void&gt; {                                     </span>
<span class="2470819661574637360" onmouseenter="enter('2470819661574637360');" onmouseout="out('2470819661574637360');" style="">1475          WeakReference&lt;NoteEditorFragment&gt; mNoteEditorFragmentReference;                                           </span>
<span  style="">1476                                                                                                                    </span>
<span class="-5095898803565568819" onmouseenter="enter('-5095898803565568819');" onmouseout="out('-5095898803565568819');" style="">1477          LoadNoteTask(NoteEditorFragment fragment) {                                                               </span>
<span class="-729324371914675142" onmouseenter="enter('-729324371914675142');" onmouseout="out('-729324371914675142');" style="">1478              mNoteEditorFragmentReference = new WeakReference&lt;&gt;(fragment);                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1479          }                                                                                                         </span>
<span  style="">1480                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1481          @Override                                                                                                 </span>
<span class="-2143377957271683587" onmouseenter="enter('-2143377957271683587');" onmouseout="out('-2143377957271683587');" style="">1482          protected void onPreExecute() {                                                                           </span>
<span class="-6239297955916786402" onmouseenter="enter('-6239297955916786402');" onmouseout="out('-6239297955916786402');" style="">1483              NoteEditorFragment fragment = mNoteEditorFragmentReference.get();                                     </span>
<span  style="">1484                                                                                                                    </span>
<span class="8682461618194216316" onmouseenter="enter('8682461618194216316');" onmouseout="out('8682461618194216316');" style="">1485              if (fragment != null) {                                                                               </span>
<span class="60782620590248864" onmouseenter="enter('60782620590248864');" onmouseout="out('60782620590248864');" style="">1486                  fragment.mContentEditText.removeTextChangedListener(fragment);                                    </span>
<span class="-1534119248334961722" onmouseenter="enter('-1534119248334961722');" onmouseout="out('-1534119248334961722');" style="">1487                  fragment.mIsLoadingNote = true;                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1488              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1489          }                                                                                                         </span>
<span  style="">1490                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1491          @Override                                                                                                 </span>
<span class="2907103121668961470" onmouseenter="enter('2907103121668961470');" onmouseout="out('2907103121668961470');" style="">1492          protected Void doInBackground(String... args) {                                                           </span>
<span class="-6239297955916786402" onmouseenter="enter('-6239297955916786402');" onmouseout="out('-6239297955916786402');" style="">1493              NoteEditorFragment fragment = mNoteEditorFragmentReference.get();                                     </span>
<span  style="">1494                                                                                                                    </span>
<span class="-8032132530741633390" onmouseenter="enter('-8032132530741633390');" onmouseout="out('-8032132530741633390');" style="">1495              if (fragment == null || fragment.getActivity() == null) {                                             </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1496                  return null;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1497              }                                                                                                     </span>
<span  style="">1498                                                                                                                    </span>
<span class="-6905640337159350056" onmouseenter="enter('-6905640337159350056');" onmouseout="out('-6905640337159350056');" style="">1499              String noteID = args[0];                                                                              </span>
<span class="-2377301998895691620" onmouseenter="enter('-2377301998895691620');" onmouseout="out('-2377301998895691620');" style="">1500              Simplenote application = (Simplenote) fragment.getActivity().getApplication();                        </span>
<span class="3820701427545927889" onmouseenter="enter('3820701427545927889');" onmouseout="out('3820701427545927889');" style="">1501              Bucket&lt;Note&gt; notesBucket = application.getNotesBucket();                                              </span>
<span  style="">1502                                                                                                                    </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1503              try {                                                                                                 </span>
<span class="-4946232803333130386" onmouseenter="enter('-4946232803333130386');" onmouseout="out('-4946232803333130386');" style="">1504                  fragment.mNote = notesBucket.get(noteID);                                                         </span>
<span  style="">1505                                                                                                                    </span>
<span class="-8094446681246514952" onmouseenter="enter('-8094446681246514952');" onmouseout="out('-8094446681246514952');" style="">1506                  // Set the current note in NotesActivity when on a tablet                                         </span>
<span class="-8543118244487944112" onmouseenter="enter('-8543118244487944112');" onmouseout="out('-8543118244487944112');" style="">1507                  if (fragment.getActivity() instanceof NotesActivity) {                                            </span>
<span class="7201017209637424614" onmouseenter="enter('7201017209637424614');" onmouseout="out('7201017209637424614');" style="">1508                      ((NotesActivity) fragment.getActivity()).setCurrentNote(fragment.mNote);                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1509                  }                                                                                                 </span>
<span  style="">1510                                                                                                                    </span>
<span class="-7559761486783625846" onmouseenter="enter('-7559761486783625846');" onmouseout="out('-7559761486783625846');" style="">1511                  // Set markdown and preview flags for current note                                                </span>
<span class="5610790463962208778" onmouseenter="enter('5610790463962208778');" onmouseout="out('5610790463962208778');" style="">1512                  if (fragment.mNote != null) {                                                                     </span>
<span class="-8180075389206795559" onmouseenter="enter('-8180075389206795559');" onmouseout="out('-8180075389206795559');" style="">1513                      fragment.mIsMarkdownEnabled = fragment.mNote.isMarkdownEnabled();                             </span>
<span class="4693841747578299424" onmouseenter="enter('4693841747578299424');" onmouseout="out('4693841747578299424');" style="">1514                      fragment.mIsPreviewEnabled = fragment.mNote.isPreviewEnabled();                               </span>
<span class="1712554612672119113" onmouseenter="enter('1712554612672119113');" onmouseout="out('1712554612672119113');" style="">1515                      AppLog.add(                                                                                   </span>
<span class="5387827170384214934" onmouseenter="enter('5387827170384214934');" onmouseout="out('5387827170384214934');" style="">1516                          Type.SYNC,                                                                                </span>
<span class="-7392016025425077182" onmouseenter="enter('-7392016025425077182');" onmouseout="out('-7392016025425077182');" style="">1517                          &quot;Loaded note (ID: &quot; + fragment.mNote.getSimperiumKey() +                                  </span>
<span class="-7384197456729805506" onmouseenter="enter('-7384197456729805506');" onmouseout="out('-7384197456729805506');" style="">1518                              &quot; / Title: &quot; + fragment.mNote.getTitle() +                                            </span>
<span class="-9069213288035386789" onmouseenter="enter('-9069213288035386789');" onmouseout="out('-9069213288035386789');" style="">1519                              &quot; / Characters: &quot; + NoteUtils.getCharactersCount(fragment.mNote.getContent()) +       </span>
<span class="-2213550460625477177" onmouseenter="enter('-2213550460625477177');" onmouseout="out('-2213550460625477177');" style="">1520                              &quot; / Words: &quot; + NoteUtils.getWordCount(fragment.mNote.getContent()) + &quot;)&quot;              </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">1521                      );                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1522                  }                                                                                                 </span>
<span class="-1560847995217927266" onmouseenter="enter('-1560847995217927266');" onmouseout="out('-1560847995217927266');" style="">1523              } catch (BucketObjectMissingException e) {                                                            </span>
<span class="2089208945464326929" onmouseenter="enter('2089208945464326929');" onmouseout="out('2089208945464326929');" style="">1524                  // See if the note is in the object store                                                         </span>
<span class="369229994761936281" onmouseenter="enter('369229994761936281');" onmouseout="out('369229994761936281');" style="">1525                  Bucket.ObjectCursor&lt;Note&gt; notesCursor = notesBucket.allObjects();                                 </span>
<span  style="">1526                                                                                                                    </span>
<span class="-3178781815102550114" onmouseenter="enter('-3178781815102550114');" onmouseout="out('-3178781815102550114');" style="">1527                  while (notesCursor.moveToNext()) {                                                                </span>
<span class="-6636674936476994775" onmouseenter="enter('-6636674936476994775');" onmouseout="out('-6636674936476994775');" style="">1528                      Note currentNote = notesCursor.getObject();                                                   </span>
<span  style="">1529                                                                                                                    </span>
<span class="5230840531090379031" onmouseenter="enter('5230840531090379031');" onmouseout="out('5230840531090379031');" style="">1530                      if (currentNote != null &amp;&amp; currentNote.getSimperiumKey().equals(noteID)) {                    </span>
<span class="8774517486286621197" onmouseenter="enter('8774517486286621197');" onmouseout="out('8774517486286621197');" style="">1531                          fragment.mNote = currentNote;                                                             </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1532                          return null;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1533                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1534                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1535              }                                                                                                     </span>
<span  style="">1536                                                                                                                    </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1537              return null;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1538          }                                                                                                         </span>
<span  style="">1539                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1540          @Override                                                                                                 </span>
<span class="2295103304779241059" onmouseenter="enter('2295103304779241059');" onmouseout="out('2295103304779241059');" style="">1541          protected void onPostExecute(Void nada) {                                                                 </span>
<span class="-6221597993462190775" onmouseenter="enter('-6221597993462190775');" onmouseout="out('-6221597993462190775');" style="">1542              final NoteEditorFragment fragment = mNoteEditorFragmentReference.get();                               </span>
<span class="-5025636818911942947" onmouseenter="enter('-5025636818911942947');" onmouseout="out('-5025636818911942947');" style="">1543              if (fragment == null || fragment.getActivity() == null || fragment.getActivity().isFinishing()) {     </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1544                  return;                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1545              }                                                                                                     </span>
<span  style="">1546                                                                                                                    </span>
<span class="-6603799210363857095" onmouseenter="enter('-6603799210363857095');" onmouseout="out('-6603799210363857095');" style="">1547              fragment.refreshContent(false);                                                                       </span>
<span  style="">1548                                                                                                                    </span>
<span class="5917882013700041584" onmouseenter="enter('5917882013700041584');" onmouseout="out('5917882013700041584');" style="">1549              if (fragment.mMatchOffsets != null) {                                                                 </span>
<span class="3332467390516262576" onmouseenter="enter('3332467390516262576');" onmouseout="out('3332467390516262576');" style=""><abbr title="1550                  int columnIndex = fragment.mNote.getBucket().getSchema().getFullTextIndex().getColumnIndex(Note.CONTENT_PROPERTY);">1550                  int columnIndex = fragment.mNote.getBucket().getSchema().getFullTextIndex().getColumnIndex(Note.CO🔵</abbr></span>
<span class="-941659818852434408" onmouseenter="enter('-941659818852434408');" onmouseout="out('-941659818852434408');" style="">1551                  fragment.mHighlighter.highlightMatches(fragment.mMatchOffsets, columnIndex);                      </span>
<span class="-5586540550370892268" onmouseenter="enter('-5586540550370892268');" onmouseout="out('-5586540550370892268');" style="">1552                  fragment.mShouldScrollToSearchMatch = true;                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1553              }                                                                                                     </span>
<span  style="">1554                                                                                                                    </span>
<span class="973040091990718145" onmouseenter="enter('973040091990718145');" onmouseout="out('973040091990718145');" style="">1555              fragment.mContentEditText.addTextChangedListener(fragment);                                           </span>
<span  style="">1556                                                                                                                    </span>
<span class="2402633428423922470" onmouseenter="enter('2402633428423922470');" onmouseout="out('2402633428423922470');" style="">1557              if (fragment.mNote != null &amp;&amp; fragment.mNote.getContent().isEmpty()) {                                </span>
<span class="-7639034409774462373" onmouseenter="enter('-7639034409774462373');" onmouseout="out('-7639034409774462373');" style="">1558                  // Show soft keyboard                                                                             </span>
<span class="-4206285070691362757" onmouseenter="enter('-4206285070691362757');" onmouseout="out('-4206285070691362757');" style="">1559                  fragment.mContentEditText.requestFocus();                                                         </span>
<span  style="">1560                                                                                                                    </span>
<span class="7162501222170899627" onmouseenter="enter('7162501222170899627');" onmouseout="out('7162501222170899627');" style="">1561                  new Handler().postDelayed(new Runnable() {                                                        </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1562                      @Override                                                                                     </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">1563                      public void run() {                                                                           </span>
<span class="-3270581272855840613" onmouseenter="enter('-3270581272855840613');" onmouseout="out('-3270581272855840613');" style="">1564                          if (fragment.getActivity() == null) {                                                     </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1565                              return;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1566                          }                                                                                         </span>
<span  style="">1567                                                                                                                    </span>
<span class="-9053809797008075040" onmouseenter="enter('-9053809797008075040');" onmouseout="out('-9053809797008075040');" style=""><abbr title="1568                          InputMethodManager inputMethodManager = (InputMethodManager) fragment.getActivity().getSystemService(Context.INPUT_METHOD_SERVICE);">1568                          InputMethodManager inputMethodManager = (InputMethodManager) fragment.getActivity().getSys🔵</abbr></span>
<span  style="">1569                                                                                                                    </span>
<span class="-9213036537020298306" onmouseenter="enter('-9213036537020298306');" onmouseout="out('-9213036537020298306');" style="">1570                          if (inputMethodManager != null) {                                                         </span>
<span class="195139432086188728" onmouseenter="enter('195139432086188728');" onmouseout="out('195139432086188728');" style="">1571                              inputMethodManager.showSoftInput(fragment.mContentEditText, 0);                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1572                          }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1573                      }                                                                                             </span>
<span class="-4884776244894547305" onmouseenter="enter('-4884776244894547305');" onmouseout="out('-4884776244894547305');" style="">1574                  }, 100);                                                                                          </span>
<span class="-6150494714931322561" onmouseenter="enter('-6150494714931322561');" onmouseout="out('-6150494714931322561');" style="">1575              } else if (fragment.mNote != null) {                                                                  </span>
<span class="-1393000384089402121" onmouseenter="enter('-1393000384089402121');" onmouseout="out('-1393000384089402121');" style="">1576                  // If we have a valid note, hide the placeholder                                                  </span>
<span class="8494685023237855547" onmouseenter="enter('8494685023237855547');" onmouseout="out('8494685023237855547');" style="">1577                  fragment.setPlaceholderVisible(false);                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1578              }                                                                                                     </span>
<span  style="">1579                                                                                                                    </span>
<span class="-204842057880624038" onmouseenter="enter('-204842057880624038');" onmouseout="out('-204842057880624038');" style="">1580              fragment.updateMarkdownView();                                                                        </span>
<span class="-7853767312046629249" onmouseenter="enter('-7853767312046629249');" onmouseout="out('-7853767312046629249');" style="">1581              fragment.requireActivity().invalidateOptionsMenu();                                                   </span>
<span class="-6330986853491903464" onmouseenter="enter('-6330986853491903464');" onmouseout="out('-6330986853491903464');" style="">1582              fragment.linkifyEditorContent();                                                                      </span>
<span class="-4002830427376252976" onmouseenter="enter('-4002830427376252976');" onmouseout="out('-4002830427376252976');" style="">1583              fragment.mIsLoadingNote = false;                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1584          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1585      }                                                                                                             </span>
<span  style="">1586                                                                                                                    </span>
<span class="-2513677254117436534" onmouseenter="enter('-2513677254117436534');" onmouseout="out('-2513677254117436534');" style="">1587      private static class SaveNoteTask extends AsyncTask&lt;Void, Void, Void&gt; {                                       </span>
<span class="2470819661574637360" onmouseenter="enter('2470819661574637360');" onmouseout="out('2470819661574637360');" style="">1588          WeakReference&lt;NoteEditorFragment&gt; mNoteEditorFragmentReference;                                           </span>
<span  style="">1589                                                                                                                    </span>
<span class="-3144982887415890281" onmouseenter="enter('-3144982887415890281');" onmouseout="out('-3144982887415890281');" style="">1590          SaveNoteTask(NoteEditorFragment fragment) {                                                               </span>
<span class="-729324371914675142" onmouseenter="enter('-729324371914675142');" onmouseout="out('-729324371914675142');" style="">1591              mNoteEditorFragmentReference = new WeakReference&lt;&gt;(fragment);                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1592          }                                                                                                         </span>
<span  style="">1593                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1594          @Override                                                                                                 </span>
<span class="1259374977543247181" onmouseenter="enter('1259374977543247181');" onmouseout="out('1259374977543247181');" style="">1595          protected Void doInBackground(Void... args) {                                                             </span>
<span class="-6239297955916786402" onmouseenter="enter('-6239297955916786402');" onmouseout="out('-6239297955916786402');" style="">1596              NoteEditorFragment fragment = mNoteEditorFragmentReference.get();                                     </span>
<span  style="">1597                                                                                                                    </span>
<span class="8682461618194216316" onmouseenter="enter('8682461618194216316');" onmouseout="out('8682461618194216316');" style="">1598              if (fragment != null) {                                                                               </span>
<span class="8575404770768137029" onmouseenter="enter('8575404770768137029');" onmouseout="out('8575404770768137029');" style="">1599                  fragment.saveNote();                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1600              }                                                                                                     </span>
<span  style="">1601                                                                                                                    </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1602              return null;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1603          }                                                                                                         </span>
<span  style="">1604                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1605          @Override                                                                                                 </span>
<span class="2295103304779241059" onmouseenter="enter('2295103304779241059');" onmouseout="out('2295103304779241059');" style="">1606          protected void onPostExecute(Void nada) {                                                                 </span>
<span class="-6239297955916786402" onmouseenter="enter('-6239297955916786402');" onmouseout="out('-6239297955916786402');" style="">1607              NoteEditorFragment fragment = mNoteEditorFragmentReference.get();                                     </span>
<span  style="">1608                                                                                                                    </span>
<span class="-8106394483710371243" onmouseenter="enter('-8106394483710371243');" onmouseout="out('-8106394483710371243');" style="">1609              if (fragment != null &amp;&amp; fragment.getActivity() != null &amp;&amp; !fragment.getActivity().isFinishing()) {    </span>
<span class="4157206213844518202" onmouseenter="enter('4157206213844518202');" onmouseout="out('4157206213844518202');" style="">1610                  // Update links                                                                                   </span>
<span class="-6330986853491903464" onmouseenter="enter('-6330986853491903464');" onmouseout="out('-6330986853491903464');" style="">1611                  fragment.linkifyEditorContent();                                                                  </span>
<span class="-204842057880624038" onmouseenter="enter('-204842057880624038');" onmouseout="out('-204842057880624038');" style="">1612                  fragment.updateMarkdownView();                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1613              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1614          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1615      }                                                                                                             </span>
<span  style="">1616                                                                                                                    </span>
<span class="5750088007463981533" onmouseenter="enter('5750088007463981533');" onmouseout="out('5750088007463981533');" style="">1617      private void linkifyEditorContent() {                                                                         </span>
<span class="-7408428876964241805" onmouseenter="enter('-7408428876964241805');" onmouseout="out('-7408428876964241805');" style="">1618          if (getActivity() == null || getActivity().isFinishing()) {                                               </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1619              return;                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1620          }                                                                                                         </span>
<span  style="">1621                                                                                                                    </span>
<span class="-8676186023856313759" onmouseenter="enter('-8676186023856313759');" onmouseout="out('-8676186023856313759');" style="">1622          if (PrefUtils.getBoolPref(getActivity(), PrefUtils.PREF_DETECT_LINKS)) {                                  </span>
<span class="-5493645025534883433" onmouseenter="enter('-5493645025534883433');" onmouseout="out('-5493645025534883433');" style="">1623              SimplenoteLinkify.addLinks(mContentEditText, Linkify.ALL);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1624          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1625      }                                                                                                             </span>
<span  style="">1626                                                                                                                    </span>
<span class="-5950330616337931457" onmouseenter="enter('-5950330616337931457');" onmouseout="out('-5950330616337931457');" style="">1627      // Show tabs if markdown is enabled globally, for current note, and not tablet landscape                      </span>
<span class="2649812560178195830" onmouseenter="enter('2649812560178195830');" onmouseout="out('2649812560178195830');" style="">1628      private void updateMarkdownView() {                                                                           </span>
<span class="-6478060281573302790" onmouseenter="enter('-6478060281573302790');" onmouseout="out('-6478060281573302790');" style="">1629          if (!mIsMarkdownEnabled) {                                                                                </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1630              return;                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1631          }                                                                                                         </span>
<span  style="">1632                                                                                                                    </span>
<span class="-5071525869541290984" onmouseenter="enter('-5071525869541290984');" onmouseout="out('-5071525869541290984');" style="">1633          Activity activity = getActivity();                                                                        </span>
<span class="6030899174327056570" onmouseenter="enter('6030899174327056570');" onmouseout="out('6030899174327056570');" style="">1634          if (activity instanceof NotesActivity) {                                                                  </span>
<span class="2782126590805787389" onmouseenter="enter('2782126590805787389');" onmouseout="out('2782126590805787389');" style="">1635              // This fragment lives in NotesActivity, so load markdown in this fragment&#x27;s WebView.                 </span>
<span class="3327794499329885328" onmouseenter="enter('3327794499329885328');" onmouseout="out('3327794499329885328');" style="">1636              loadMarkdownData();                                                                                   </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1637          } else {                                                                                                  </span>
<span class="8122704767225379324" onmouseenter="enter('8122704767225379324');" onmouseout="out('8122704767225379324');" style="">1638              // This fragment lives in the NoteEditorActivity&#x27;s ViewPager.                                         </span>
<span class="-3674842258349497418" onmouseenter="enter('-3674842258349497418');" onmouseout="out('-3674842258349497418');" style="">1639              if (mNoteMarkdownFragment == null) {                                                                  </span>
<span class="3603448342706497777" onmouseenter="enter('3603448342706497777');" onmouseout="out('3603448342706497777');" style="">1640                  mNoteMarkdownFragment = ((NoteEditorActivity) requireActivity())                                  </span>
<span class="-2617317400764712760" onmouseenter="enter('-2617317400764712760');" onmouseout="out('-2617317400764712760');" style="">1641                          .getNoteMarkdownFragment();                                                               </span>
<span class="3313661309460802096" onmouseenter="enter('3313661309460802096');" onmouseout="out('3313661309460802096');" style="">1642                  ((NoteEditorActivity) requireActivity()).showTabs();                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1643              }                                                                                                     </span>
<span class="-1009334497805408344" onmouseenter="enter('-1009334497805408344');" onmouseout="out('-1009334497805408344');" style="">1644              // Load markdown in the sibling NoteMarkdownFragment&#x27;s WebView.                                       </span>
<span class="8234543871026198045" onmouseenter="enter('8234543871026198045');" onmouseout="out('8234543871026198045');" style="">1645              mNoteMarkdownFragment.updateMarkdown(mContentEditText.getPreviewTextContent());                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1646          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1647      }                                                                                                             </span>
<span  style="">1648                                                                                                                    </span>
<span class="621072892992557040" onmouseenter="enter('621072892992557040');" onmouseout="out('621072892992557040');" style="">1649      private ColorStateList getChipBackgroundColor() {                                                             </span>
<span class="-2852806967863140186" onmouseenter="enter('-2852806967863140186');" onmouseout="out('-2852806967863140186');" style="">1650          int[][] states = new int[][] {                                                                            </span>
<span class="3138779758285079345" onmouseenter="enter('3138779758285079345');" onmouseout="out('3138779758285079345');" style="">1651              new int[] { android.R.attr.state_checked}, // checked                                                 </span>
<span class="2921033856249437884" onmouseenter="enter('2921033856249437884');" onmouseout="out('2921033856249437884');" style="">1652              new int[] {-android.R.attr.state_checked}  // unchecked                                               </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">1653          };                                                                                                        </span>
<span  style="">1654                                                                                                                    </span>
<span class="-5399670070282478940" onmouseenter="enter('-5399670070282478940');" onmouseout="out('-5399670070282478940');" style="">1655          int[] colors = new int[] {                                                                                </span>
<span class="3188530588543322355" onmouseenter="enter('3188530588543322355');" onmouseout="out('3188530588543322355');" style="">1656              ThemeUtils.getColorFromAttribute(requireContext(), R.attr.chipCheckedOnBackgroundColor),              </span>
<span class="1811726545786864469" onmouseenter="enter('1811726545786864469');" onmouseout="out('1811726545786864469');" style="">1657              ThemeUtils.getColorFromAttribute(requireContext(), R.attr.chipCheckedOffBackgroundColor)              </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">1658          };                                                                                                        </span>
<span  style="">1659                                                                                                                    </span>
<span class="-5773454088160861424" onmouseenter="enter('-5773454088160861424');" onmouseout="out('-5773454088160861424');" style="">1660          return new ColorStateList(states, colors);                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1661      }                                                                                                             </span>
<span  style="">1662                                                                                                                    </span>
<span class="7978150615022703967" onmouseenter="enter('7978150615022703967');" onmouseout="out('7978150615022703967');" style="">1663      private void setChips(CharSequence text) {                                                                    </span>
<span class="-6352640607268108974" onmouseenter="enter('-6352640607268108974');" onmouseout="out('-6352640607268108974');" style="">1664          mTagPadding.setVisibility(text.length() &gt; 0 ? View.VISIBLE : View.GONE);                                  </span>
<span class="5420418357496709981" onmouseenter="enter('5420418357496709981');" onmouseout="out('5420418357496709981');" style="">1665          mTagChips.setVisibility(text.length() &gt; 0 ? View.VISIBLE : View.GONE);                                    </span>
<span class="6036610741747636495" onmouseenter="enter('6036610741747636495');" onmouseout="out('6036610741747636495');" style="">1666          mTagChips.setSingleSelection(true);                                                                       </span>
<span class="-281158766645647153" onmouseenter="enter('-281158766645647153');" onmouseout="out('-281158766645647153');" style="">1667          mTagChips.removeAllViews();                                                                               </span>
<span class="-2312425264507564639" onmouseenter="enter('-2312425264507564639');" onmouseout="out('-2312425264507564639');" style="">1668          SimpleStringSplitter tags = new SimpleStringSplitter(SPACE);                                              </span>
<span class="-2221549004994088170" onmouseenter="enter('-2221549004994088170');" onmouseout="out('-2221549004994088170');" style="">1669          tags.setString(text.toString());                                                                          </span>
<span  style="">1670                                                                                                                    </span>
<span class="-7185531782033852210" onmouseenter="enter('-7185531782033852210');" onmouseout="out('-7185531782033852210');" style="">1671          for (String tag : tags) {                                                                                 </span>
<span class="-4253336828679787495" onmouseenter="enter('-4253336828679787495');" onmouseout="out('-4253336828679787495');" style="">1672              final Chip chip = new Chip(requireContext());                                                         </span>
<span class="1656135987988335587" onmouseenter="enter('1656135987988335587');" onmouseout="out('1656135987988335587');" style="">1673              chip.setText(tag);                                                                                    </span>
<span class="-8675353638360963179" onmouseenter="enter('-8675353638360963179');" onmouseout="out('-8675353638360963179');" style="">1674              chip.setCheckable(true);                                                                              </span>
<span class="67942289785469509" onmouseenter="enter('67942289785469509');" onmouseout="out('67942289785469509');" style="">1675              chip.setCheckedIcon(null);                                                                            </span>
<span class="4360750963000358582" onmouseenter="enter('4360750963000358582');" onmouseout="out('4360750963000358582');" style="">1676              chip.setChipBackgroundColor(getChipBackgroundColor());                                                </span>
<span class="9213121115800400320" onmouseenter="enter('9213121115800400320');" onmouseout="out('9213121115800400320');" style="">1677              chip.setTextColor(ThemeUtils.getColorFromAttribute(requireContext(), R.attr.chipTextColor));          </span>
<span class="7518117741736260019" onmouseenter="enter('7518117741736260019');" onmouseout="out('7518117741736260019');" style="">1678              chip.setStateListAnimator(null);                                                                      </span>
<span class="-4577029713597050278" onmouseenter="enter('-4577029713597050278');" onmouseout="out('-4577029713597050278');" style="">1679              chip.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {                        </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1680                  @Override                                                                                         </span>
<span class="3078550550582438549" onmouseenter="enter('3078550550582438549');" onmouseout="out('3078550550582438549');" style="">1681                  public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {                      </span>
<span class="44703121288981283" onmouseenter="enter('44703121288981283');" onmouseout="out('44703121288981283');" style="">1682                      chip.setCloseIconVisible(isChecked);                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1683                  }                                                                                                 </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">1684              });                                                                                                   </span>
<span class="160847713587338016" onmouseenter="enter('160847713587338016');" onmouseout="out('160847713587338016');" style="">1685              chip.setOnCloseIconClickListener(new View.OnClickListener() {                                         </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1686                  @Override                                                                                         </span>
<span class="2630081792579352299" onmouseenter="enter('2630081792579352299');" onmouseout="out('2630081792579352299');" style="">1687                  public void onClick(View view) {                                                                  </span>
<span class="-7509335457070409893" onmouseenter="enter('-7509335457070409893');" onmouseout="out('-7509335457070409893');" style="">1688                      mTagChips.removeView(view);                                                                   </span>
<span class="6057505716411681059" onmouseenter="enter('6057505716411681059');" onmouseout="out('6057505716411681059');" style="">1689                      updateTags();                                                                                 </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style="">1690                      AnalyticsTracker.track(                                                                       </span>
<span class="6322942827450848506" onmouseenter="enter('6322942827450848506');" onmouseout="out('6322942827450848506');" style="">1691                          EDITOR_TAG_REMOVED,                                                                       </span>
<span class="-2430475172570880083" onmouseenter="enter('-2430475172570880083');" onmouseout="out('-2430475172570880083');" style="">1692                          CATEGORY_NOTE,                                                                            </span>
<span class="7139119425176259618" onmouseenter="enter('7139119425176259618');" onmouseout="out('7139119425176259618');" style="">1693                          &quot;tag_removed_from_note&quot;                                                                   </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">1694                      );                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1695                  }                                                                                                 </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">1696              });                                                                                                   </span>
<span class="-535069795448615627" onmouseenter="enter('-535069795448615627');" onmouseout="out('-535069795448615627');" style="">1697              mTagChips.addView(chip);                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1698          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1699      }                                                                                                             </span>
<span  style="">1700                                                                                                                    </span>
<span class="2006864524440231174" onmouseenter="enter('2006864524440231174');" onmouseout="out('2006864524440231174');" style="">1701      private void updateTags() {                                                                                   </span>
<span class="-6566957513776356959" onmouseenter="enter('-6566957513776356959');" onmouseout="out('-6566957513776356959');" style="">1702          if (mNote == null) {                                                                                      </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1703              return;                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1704          }                                                                                                         </span>
<span  style="">1705                                                                                                                    </span>
<span class="2510051710836521686" onmouseenter="enter('2510051710836521686');" onmouseout="out('2510051710836521686');" style="">1706          mNote.setTagString(getNoteTagsString());                                                                  </span>
<span class="-3343075472306200704" onmouseenter="enter('-3343075472306200704');" onmouseout="out('-3343075472306200704');" style="">1707          mNote.setModificationDate(Calendar.getInstance());                                                        </span>
<span class="3745953297761259324" onmouseenter="enter('3745953297761259324');" onmouseout="out('3745953297761259324');" style="">1708          updateTagList();                                                                                          </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style="">1709          mNote.save();                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1710      }                                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1711  }                                                                                                                 </span></pre></td>
                            <td><pre><span class="8328120990598135231" onmouseenter="enter('8328120990598135231');" onmouseout="out('8328120990598135231');" style="">   1  package com.automattic.simplenote;                                                                                </span>
<span  style="">   2                                                                                                                    </span>
<span class="-7090287939251728203" onmouseenter="enter('-7090287939251728203');" onmouseout="out('-7090287939251728203');" style="">   3  import android.app.Activity;                                                                                      </span>
<span class="5922045460006936195" onmouseenter="enter('5922045460006936195');" onmouseout="out('5922045460006936195');" style="">   4  import android.content.Context;                                                                                   </span>
<span class="4122587240602557356" onmouseenter="enter('4122587240602557356');" onmouseout="out('4122587240602557356');" style="">   5  import android.content.SharedPreferences;                                                                         </span>
<span class="437349496656716435" onmouseenter="enter('437349496656716435');" onmouseout="out('437349496656716435');" style="">   6  import android.content.res.ColorStateList;                                                                        </span>
<span class="6294169624328016071" onmouseenter="enter('6294169624328016071');" onmouseout="out('6294169624328016071');" style="">   7  import android.database.Cursor;                                                                                   </span>
<span class="-5606798514618908790" onmouseenter="enter('-5606798514618908790');" onmouseout="out('-5606798514618908790');" style="">   8  import android.graphics.Typeface;                                                                                 </span>
<span class="-1737226814075322931" onmouseenter="enter('-1737226814075322931');" onmouseout="out('-1737226814075322931');" style="">   9  import android.graphics.drawable.Drawable;                                                                        </span>
<span class="955674827050616793" onmouseenter="enter('955674827050616793');" onmouseout="out('955674827050616793');" style="">  10  import android.os.AsyncTask;                                                                                      </span>
<span class="8096531590004379472" onmouseenter="enter('8096531590004379472');" onmouseout="out('8096531590004379472');" style="">  11  import android.os.Bundle;                                                                                         </span>
<span class="-1086316590722027623" onmouseenter="enter('-1086316590722027623');" onmouseout="out('-1086316590722027623');" style="">  12  import android.os.Handler;                                                                                        </span>
<span class="4177373235046048356" onmouseenter="enter('4177373235046048356');" onmouseout="out('4177373235046048356');" style="">  13  import android.text.Editable;                                                                                     </span>
<span class="-578015270574978569" onmouseenter="enter('-578015270574978569');" onmouseout="out('-578015270574978569');" style="">  14  import android.text.Layout;                                                                                       </span>
<span class="7731806713123176572" onmouseenter="enter('7731806713123176572');" onmouseout="out('7731806713123176572');" style="">  15  import android.text.Spanned;                                                                                      </span>
<span class="-3299261040401335998" onmouseenter="enter('-3299261040401335998');" onmouseout="out('-3299261040401335998');" style="">  16  import android.text.TextUtils.SimpleStringSplitter;                                                               </span>
<span class="4038639591141008331" onmouseenter="enter('4038639591141008331');" onmouseout="out('4038639591141008331');" style="">  17  import android.text.TextWatcher;                                                                                  </span>
<span class="-654170262772204786" onmouseenter="enter('-654170262772204786');" onmouseout="out('-654170262772204786');" style="">  18  import android.text.style.MetricAffectingSpan;                                                                    </span>
<span class="2374973474356501783" onmouseenter="enter('2374973474356501783');" onmouseout="out('2374973474356501783');" style="">  19  import android.text.style.RelativeSizeSpan;                                                                       </span>
<span class="-6813443535687611228" onmouseenter="enter('-6813443535687611228');" onmouseout="out('-6813443535687611228');" style="">  20  import android.text.style.StyleSpan;                                                                              </span>
<span class="-1165963660754430642" onmouseenter="enter('-1165963660754430642');" onmouseout="out('-1165963660754430642');" style="">  21  import android.text.style.URLSpan;                                                                                </span>
<span class="-3804250137032727253" onmouseenter="enter('-3804250137032727253');" onmouseout="out('-3804250137032727253');" style="">  22  import android.text.util.Linkify;                                                                                 </span>
<span class="-1289400933432271961" onmouseenter="enter('-1289400933432271961');" onmouseout="out('-1289400933432271961');" style="">  23  import android.util.TypedValue;                                                                                   </span>
<span class="8553241717595905778" onmouseenter="enter('8553241717595905778');" onmouseout="out('8553241717595905778');" style="">  24  import android.view.LayoutInflater;                                                                               </span>
<span class="-603490076395619238" onmouseenter="enter('-603490076395619238');" onmouseout="out('-603490076395619238');" style="">  25  import android.view.Menu;                                                                                         </span>
<span class="-434306062495579804" onmouseenter="enter('-434306062495579804');" onmouseout="out('-434306062495579804');" style="">  26  import android.view.MenuInflater;                                                                                 </span>
<span class="6391706839654240930" onmouseenter="enter('6391706839654240930');" onmouseout="out('6391706839654240930');" style="">  27  import android.view.MenuItem;                                                                                     </span>
<span class="-8980485571216513882" onmouseenter="enter('-8980485571216513882');" onmouseout="out('-8980485571216513882');" style="">  28  import android.view.View;                                                                                         </span>
<span class="7569314084591619834" onmouseenter="enter('7569314084591619834');" onmouseout="out('7569314084591619834');" style="">  29  import android.view.ViewGroup;                                                                                    </span>
<span class="-4985651548362660777" onmouseenter="enter('-4985651548362660777');" onmouseout="out('-4985651548362660777');" style="">  30  import android.view.ViewTreeObserver;                                                                             </span>
<span class="-3117363671899680167" onmouseenter="enter('-3117363671899680167');" onmouseout="out('-3117363671899680167');" style="">  31  import android.view.inputmethod.InputMethodManager;                                                               </span>
<span class="1348319594514771408" onmouseenter="enter('1348319594514771408');" onmouseout="out('1348319594514771408');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  32 +import android.webkit.WebResourceRequest;                                                                         </span>
<span class="2723690893492346945" onmouseenter="enter('2723690893492346945');" onmouseout="out('2723690893492346945');" style="">  33  import android.webkit.WebView;                                                                                    </span>
<span class="-3167847991483127041" onmouseenter="enter('-3167847991483127041');" onmouseout="out('-3167847991483127041');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  34 +import android.webkit.WebViewClient;                                                                              </span>
<span class="2736968318319789680" onmouseenter="enter('2736968318319789680');" onmouseout="out('2736968318319789680');" style="">  35  import android.widget.CompoundButton;                                                                             </span>
<span class="5634491474902588492" onmouseenter="enter('5634491474902588492');" onmouseout="out('5634491474902588492');" style="">  36  import android.widget.CursorAdapter;                                                                              </span>
<span class="5987800420235491716" onmouseenter="enter('5987800420235491716');" onmouseout="out('5987800420235491716');" style="">  37  import android.widget.LinearLayout;                                                                               </span>
<span class="-4961528671422147708" onmouseenter="enter('-4961528671422147708');" onmouseout="out('-4961528671422147708');" style="">  38  import android.widget.TextView;                                                                                   </span>
<span class="-4373317539211938720" onmouseenter="enter('-4373317539211938720');" onmouseout="out('-4373317539211938720');" style="">  39  import android.widget.Toast;                                                                                      </span>
<span  style="">  40                                                                                                                    </span>
<span class="6963272077887521702" onmouseenter="enter('6963272077887521702');" onmouseout="out('6963272077887521702');" style="">  41  import androidx.annotation.NonNull;                                                                               </span>
<span class="-4688549274525092465" onmouseenter="enter('-4688549274525092465');" onmouseout="out('-4688549274525092465');" style="">  42  import androidx.annotation.StringRes;                                                                             </span>
<span class="8057892732248099365" onmouseenter="enter('8057892732248099365');" onmouseout="out('8057892732248099365');" style="">  43  import androidx.appcompat.app.AppCompatActivity;                                                                  </span>
<span class="2035494855708115696" onmouseenter="enter('2035494855708115696');" onmouseout="out('2035494855708115696');" style="">  44  import androidx.appcompat.view.ActionMode;                                                                        </span>
<span class="-6344652174315873597" onmouseenter="enter('-6344652174315873597');" onmouseout="out('-6344652174315873597');" style="">  45  import androidx.core.app.ShareCompat;                                                                             </span>
<span class="-362404946986079023" onmouseenter="enter('-362404946986079023');" onmouseout="out('-362404946986079023');" style="">  46  import androidx.core.view.MenuCompat;                                                                             </span>
<span class="-767584428700722881" onmouseenter="enter('-767584428700722881');" onmouseout="out('-767584428700722881');" style="">  47  import androidx.core.widget.NestedScrollView;                                                                     </span>
<span class="2878002094531064439" onmouseenter="enter('2878002094531064439');" onmouseout="out('2878002094531064439');" style="">  48  import androidx.fragment.app.Fragment;                                                                            </span>
<span class="-6950145472733447700" onmouseenter="enter('-6950145472733447700');" onmouseout="out('-6950145472733447700');" style="">  49  import androidx.fragment.app.FragmentTransaction;                                                                 </span>
<span class="-7272383226560052741" onmouseenter="enter('-7272383226560052741');" onmouseout="out('-7272383226560052741');" style="">  50  import androidx.preference.PreferenceManager;                                                                     </span>
<span  style="">  51                                                                                                                    </span>
<span class="-155835000323929258" onmouseenter="enter('-155835000323929258');" onmouseout="out('-155835000323929258');" style="">  52  import com.automattic.simplenote.analytics.AnalyticsTracker;                                                      </span>
<span class="9061368408436996655" onmouseenter="enter('9061368408436996655');" onmouseout="out('9061368408436996655');" style="">  53  import com.automattic.simplenote.models.Note;                                                                     </span>
<span class="107771998888903823" onmouseenter="enter('107771998888903823');" onmouseout="out('107771998888903823');" style="">  54  import com.automattic.simplenote.models.Tag;                                                                      </span>
<span class="160698548927534529" onmouseenter="enter('160698548927534529');" onmouseout="out('160698548927534529');" style="">  55  import com.automattic.simplenote.utils.AppLog;                                                                    </span>
<span class="7580776162261256599" onmouseenter="enter('7580776162261256599');" onmouseout="out('7580776162261256599');" style="">  56  import com.automattic.simplenote.utils.AppLog.Type;                                                               </span>
<span class="-4380838228434146133" onmouseenter="enter('-4380838228434146133');" onmouseout="out('-4380838228434146133');" style="">  57  import com.automattic.simplenote.utils.AutoBullet;                                                                </span>
<span class="1593315676680608324" onmouseenter="enter('1593315676680608324');" onmouseout="out('1593315676680608324');" style="">  58  import com.automattic.simplenote.utils.BrowserUtils;                                                              </span>
<span class="8229771960302052711" onmouseenter="enter('8229771960302052711');" onmouseout="out('8229771960302052711');" style="">  59  import com.automattic.simplenote.utils.ContextUtils;                                                              </span>
<span class="8577850632926167445" onmouseenter="enter('8577850632926167445');" onmouseout="out('8577850632926167445');" style="">  60  import com.automattic.simplenote.utils.DisplayUtils;                                                              </span>
<span class="930019215389101465" onmouseenter="enter('930019215389101465');" onmouseout="out('930019215389101465');" style="">  61  import com.automattic.simplenote.utils.DrawableUtils;                                                             </span>
<span class="1327521140651609704" onmouseenter="enter('1327521140651609704');" onmouseout="out('1327521140651609704');" style="">  62  import com.automattic.simplenote.utils.MatchOffsetHighlighter;                                                    </span>
<span class="6713747859106964949" onmouseenter="enter('6713747859106964949');" onmouseout="out('6713747859106964949');" style="">  63  import com.automattic.simplenote.utils.NetworkUtils;                                                              </span>
<span class="2290458949892536112" onmouseenter="enter('2290458949892536112');" onmouseout="out('2290458949892536112');" style="">  64  import com.automattic.simplenote.utils.NoteUtils;                                                                 </span>
<span class="-7136497821822559876" onmouseenter="enter('-7136497821822559876');" onmouseout="out('-7136497821822559876');" style="">  65  import com.automattic.simplenote.utils.PrefUtils;                                                                 </span>
<span class="2537926396801226048" onmouseenter="enter('2537926396801226048');" onmouseout="out('2537926396801226048');" style="">  66  import com.automattic.simplenote.utils.SimplenoteLinkify;                                                         </span>
<span class="-42292328951391685" onmouseenter="enter('-42292328951391685');" onmouseout="out('-42292328951391685');" style="">  67  import com.automattic.simplenote.utils.SimplenoteMovementMethod;                                                  </span>
<span class="13513923158165555" onmouseenter="enter('13513923158165555');" onmouseout="out('13513923158165555');" style="">  68  import com.automattic.simplenote.utils.SpaceTokenizer;                                                            </span>
<span class="-643769428942460504" onmouseenter="enter('-643769428942460504');" onmouseout="out('-643769428942460504');" style="">  69  import com.automattic.simplenote.utils.TagUtils;                                                                  </span>
<span class="-4652171765784917488" onmouseenter="enter('-4652171765784917488');" onmouseout="out('-4652171765784917488');" style="">  70  import com.automattic.simplenote.utils.TagsMultiAutoCompleteTextView;                                             </span>
<span class="451633977271230846" onmouseenter="enter('451633977271230846');" onmouseout="out('451633977271230846');" style="">  71  import com.automattic.simplenote.utils.TagsMultiAutoCompleteTextView.OnTagAddedListener;                          </span>
<span class="3055903766206676561" onmouseenter="enter('3055903766206676561');" onmouseout="out('3055903766206676561');" style="">  72  import com.automattic.simplenote.utils.TextHighlighter;                                                           </span>
<span class="7305000128845659611" onmouseenter="enter('7305000128845659611');" onmouseout="out('7305000128845659611');" style="">  73  import com.automattic.simplenote.utils.ThemeUtils;                                                                </span>
<span class="-3457858113236631039" onmouseenter="enter('-3457858113236631039');" onmouseout="out('-3457858113236631039');" style="">  74  import com.automattic.simplenote.utils.WidgetUtils;                                                               </span>
<span class="4834384566534786428" onmouseenter="enter('4834384566534786428');" onmouseout="out('4834384566534786428');" style="">  75  import com.automattic.simplenote.widgets.SimplenoteEditText;                                                      </span>
<span class="4924672443805777373" onmouseenter="enter('4924672443805777373');" onmouseout="out('4924672443805777373');" style="">  76  import com.google.android.material.chip.Chip;                                                                     </span>
<span class="6530176725815500896" onmouseenter="enter('6530176725815500896');" onmouseout="out('6530176725815500896');" style="">  77  import com.google.android.material.chip.ChipGroup;                                                                </span>
<span class="-6749865676367010343" onmouseenter="enter('-6749865676367010343');" onmouseout="out('-6749865676367010343');" style="">  78  import com.google.android.material.snackbar.Snackbar;                                                             </span>
<span class="-8170925370861558125" onmouseenter="enter('-8170925370861558125');" onmouseout="out('-8170925370861558125');" style="">  79  import com.simperium.client.Bucket;                                                                               </span>
<span class="-8454203534157102839" onmouseenter="enter('-8454203534157102839');" onmouseout="out('-8454203534157102839');" style="">  80  import com.simperium.client.BucketObjectMissingException;                                                         </span>
<span class="-6020507013779766735" onmouseenter="enter('-6020507013779766735');" onmouseout="out('-6020507013779766735');" style="">  81  import com.simperium.client.Query;                                                                                </span>
<span  style="">  82                                                                                                                    </span>
<span class="-8692343821508153377" onmouseenter="enter('-8692343821508153377');" onmouseout="out('-8692343821508153377');" style="">  83  import java.lang.ref.WeakReference;                                                                               </span>
<span class="1562735530241225598" onmouseenter="enter('1562735530241225598');" onmouseout="out('1562735530241225598');" style="">  84  import java.util.Calendar;                                                                                        </span>
<span  style="">  85                                                                                                                    </span>
<span class="-3102294303099779792" onmouseenter="enter('-3102294303099779792');" onmouseout="out('-3102294303099779792');" style="">  86  import static com.automattic.simplenote.analytics.AnalyticsTracker.CATEGORY_NOTE;                                 </span>
<span class="5242531748460347937" onmouseenter="enter('5242531748460347937');" onmouseout="out('5242531748460347937');" style="">  87  import static com.automattic.simplenote.analytics.AnalyticsTracker.Stat.EDITOR_CHECKLIST_INSERTED;                </span>
<span class="-3490868053375355616" onmouseenter="enter('-3490868053375355616');" onmouseout="out('-3490868053375355616');" style="">  88  import static com.automattic.simplenote.analytics.AnalyticsTracker.Stat.EDITOR_NOTE_CONTENT_SHARED;               </span>
<span class="-2121854313245668982" onmouseenter="enter('-2121854313245668982');" onmouseout="out('-2121854313245668982');" style="">  89  import static com.automattic.simplenote.analytics.AnalyticsTracker.Stat.EDITOR_NOTE_EDITED;                       </span>
<span class="-6581780444010205945" onmouseenter="enter('-6581780444010205945');" onmouseout="out('-6581780444010205945');" style="">  90  import static com.automattic.simplenote.analytics.AnalyticsTracker.Stat.EDITOR_NOTE_PUBLISHED;                    </span>
<span class="-9109271177878770606" onmouseenter="enter('-9109271177878770606');" onmouseout="out('-9109271177878770606');" style="">  91  import static com.automattic.simplenote.analytics.AnalyticsTracker.Stat.EDITOR_NOTE_UNPUBLISHED;                  </span>
<span class="1895845895606351499" onmouseenter="enter('1895845895606351499');" onmouseout="out('1895845895606351499');" style="">  92  import static com.automattic.simplenote.analytics.AnalyticsTracker.Stat.EDITOR_TAG_ADDED;                         </span>
<span class="-7938671928844888956" onmouseenter="enter('-7938671928844888956');" onmouseout="out('-7938671928844888956');" style="">  93  import static com.automattic.simplenote.analytics.AnalyticsTracker.Stat.EDITOR_TAG_REMOVED;                       </span>
<span class="8057784740076816561" onmouseenter="enter('8057784740076816561');" onmouseout="out('8057784740076816561');" style="">  94  import static com.automattic.simplenote.utils.SearchTokenizer.SPACE;                                              </span>
<span class="-4405840676582391526" onmouseenter="enter('-4405840676582391526');" onmouseout="out('-4405840676582391526');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  95 +import static com.automattic.simplenote.utils.SimplenoteLinkify.SIMPLENOTE_LINK_PREFIX;                           </span>
<span  style="">  96                                                                                                                    </span>
<span class="-5596461229958448202" onmouseenter="enter('-5596461229958448202');" onmouseout="out('-5596461229958448202');" style="">  97  public class NoteEditorFragment extends Fragment implements Bucket.Listener&lt;Note&gt;,                                </span>
<span class="-9099249676109797171" onmouseenter="enter('-9099249676109797171');" onmouseout="out('-9099249676109797171');" style="">  98          TextWatcher, OnTagAddedListener, View.OnFocusChangeListener,                                              </span>
<span class="-4114387936964500842" onmouseenter="enter('-4114387936964500842');" onmouseout="out('-4114387936964500842');" style="">  99          SimplenoteEditText.OnSelectionChangedListener,                                                            </span>
<span class="-5510788947576290679" onmouseenter="enter('-5510788947576290679');" onmouseout="out('-5510788947576290679');" style=""> 100          ShareBottomSheetDialog.ShareSheetListener,                                                                </span>
<span class="2293972252045109195" onmouseenter="enter('2293972252045109195');" onmouseout="out('2293972252045109195');" style=""> 101          HistoryBottomSheetDialog.HistorySheetListener,                                                            </span>
<span class="-712538187674189072" onmouseenter="enter('-712538187674189072');" onmouseout="out('-712538187674189072');" style=""> 102          SimplenoteEditText.OnCheckboxToggledListener {                                                            </span>
<span  style=""> 103                                                                                                                    </span>
<span class="7313308760576274084" onmouseenter="enter('7313308760576274084');" onmouseout="out('7313308760576274084');" style=""> 104      public static final String ARG_IS_FROM_WIDGET = &quot;is_from_widget&quot;;                                             </span>
<span class="-4619625032881090052" onmouseenter="enter('-4619625032881090052');" onmouseout="out('-4619625032881090052');" style=""> 105      public static final String ARG_ITEM_ID = &quot;item_id&quot;;                                                           </span>
<span class="-7299684920632401552" onmouseenter="enter('-7299684920632401552');" onmouseout="out('-7299684920632401552');" style=""> 106      public static final String ARG_NEW_NOTE = &quot;new_note&quot;;                                                         </span>
<span class="5570942911396170891" onmouseenter="enter('5570942911396170891');" onmouseout="out('5570942911396170891');" style=""> 107      public static final String ARG_MATCH_OFFSETS = &quot;match_offsets&quot;;                                               </span>
<span class="8145563106929735928" onmouseenter="enter('8145563106929735928');" onmouseout="out('8145563106929735928');" style=""> 108      public static final String ARG_MARKDOWN_ENABLED = &quot;markdown_enabled&quot;;                                         </span>
<span class="-9204037548779502592" onmouseenter="enter('-9204037548779502592');" onmouseout="out('-9204037548779502592');" style=""> 109      public static final String ARG_PREVIEW_ENABLED = &quot;preview_enabled&quot;;                                           </span>
<span class="-4900097812038151447" onmouseenter="enter('-4900097812038151447');" onmouseout="out('-4900097812038151447');" style=""> 110      private static final String STATE_NOTE_ID = &quot;state_note_id&quot;;                                                  </span>
<span class="8491452362607628076" onmouseenter="enter('8491452362607628076');" onmouseout="out('8491452362607628076');" style=""> 111      private static final int AUTOSAVE_DELAY_MILLIS = 2000;                                                        </span>
<span class="6474488624255872222" onmouseenter="enter('6474488624255872222');" onmouseout="out('6474488624255872222');" style=""> 112      private static final int MAX_REVISIONS = 30;                                                                  </span>
<span class="2597021995687752472" onmouseenter="enter('2597021995687752472');" onmouseout="out('2597021995687752472');" style=""> 113      private static final int PUBLISH_TIMEOUT = 20000;                                                             </span>
<span class="3616229628179044566" onmouseenter="enter('3616229628179044566');" onmouseout="out('3616229628179044566');" style=""> 114      private static final int HISTORY_TIMEOUT = 10000;                                                             </span>
<span class="-6846870049312317979" onmouseenter="enter('-6846870049312317979');" onmouseout="out('-6846870049312317979');" style=""> 115      private Note mNote;                                                                                           </span>
<span class="-567099590261614492" onmouseenter="enter('-567099590261614492');" onmouseout="out('-567099590261614492');" style=""> 116      private final Runnable mAutoSaveRunnable = new Runnable() {                                                   </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 117          @Override                                                                                                 </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 118          public void run() {                                                                                       </span>
<span class="-2186856349666885424" onmouseenter="enter('-2186856349666885424');" onmouseout="out('-2186856349666885424');" style=""> 119              saveAndSyncNote();                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 120          }                                                                                                         </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 121      };                                                                                                            </span>
<span class="-7913886194286774922" onmouseenter="enter('-7913886194286774922');" onmouseout="out('-7913886194286774922');" style=""> 122      private Bucket&lt;Note&gt; mNotesBucket;                                                                            </span>
<span class="335650161029573145" onmouseenter="enter('335650161029573145');" onmouseout="out('335650161029573145');" style=""> 123      private View mRootView;                                                                                       </span>
<span class="8292114391111638673" onmouseenter="enter('8292114391111638673');" onmouseout="out('8292114391111638673');" style=""> 124      private View mTagPadding;                                                                                     </span>
<span class="6580801006778009663" onmouseenter="enter('6580801006778009663');" onmouseout="out('6580801006778009663');" style=""> 125      private SimplenoteEditText mContentEditText;                                                                  </span>
<span class="-1116191624704212145" onmouseenter="enter('-1116191624704212145');" onmouseout="out('-1116191624704212145');" style=""> 126      private ChipGroup mTagChips;                                                                                  </span>
<span class="7794609246836871312" onmouseenter="enter('7794609246836871312');" onmouseout="out('7794609246836871312');" style=""> 127      private TagsMultiAutoCompleteTextView mTagInput;                                                              </span>
<span class="6494121288462075344" onmouseenter="enter('6494121288462075344');" onmouseout="out('6494121288462075344');" style=""> 128      private Handler mAutoSaveHandler;                                                                             </span>
<span class="8783277907965445564" onmouseenter="enter('8783277907965445564');" onmouseout="out('8783277907965445564');" style=""> 129      private Handler mPublishTimeoutHandler;                                                                       </span>
<span class="4217449185156868905" onmouseenter="enter('4217449185156868905');" onmouseout="out('4217449185156868905');" style=""> 130      private Handler mHistoryTimeoutHandler;                                                                       </span>
<span class="-1776320876088405367" onmouseenter="enter('-1776320876088405367');" onmouseout="out('-1776320876088405367');" style=""> 131      private LinearLayout mPlaceholderView;                                                                        </span>
<span class="-5862875858497045082" onmouseenter="enter('-5862875858497045082');" onmouseout="out('-5862875858497045082');" style=""> 132      private CursorAdapter mAutocompleteAdapter;                                                                   </span>
<span class="-7523089573477153489" onmouseenter="enter('-7523089573477153489');" onmouseout="out('-7523089573477153489');" style=""> 133      private boolean mIsLoadingNote;                                                                               </span>
<span class="-721861736726211964" onmouseenter="enter('-721861736726211964');" onmouseout="out('-721861736726211964');" style=""> 134      private boolean mIsMarkdownEnabled;                                                                           </span>
<span class="5667351599274937983" onmouseenter="enter('5667351599274937983');" onmouseout="out('5667351599274937983');" style=""> 135      private boolean mIsPreviewEnabled;                                                                            </span>
<span class="1780690803770096596" onmouseenter="enter('1780690803770096596');" onmouseout="out('1780690803770096596');" style=""> 136      private boolean mShouldScrollToSearchMatch;                                                                   </span>
<span class="7307228847460234411" onmouseenter="enter('7307228847460234411');" onmouseout="out('7307228847460234411');" style=""> 137      private ActionMode mActionMode;                                                                               </span>
<span class="6272698018239268533" onmouseenter="enter('6272698018239268533');" onmouseout="out('6272698018239268533');" style=""> 138      private MenuItem mChecklistMenuItem;                                                                          </span>
<span class="-801211553419280849" onmouseenter="enter('-801211553419280849');" onmouseout="out('-801211553419280849');" style=""> 139      private MenuItem mCopyMenuItem;                                                                               </span>
<span class="-8722853698202618925" onmouseenter="enter('-8722853698202618925');" onmouseout="out('-8722853698202618925');" style=""> 140      private MenuItem mInformationMenuItem;                                                                        </span>
<span class="6754990951372191595" onmouseenter="enter('6754990951372191595');" onmouseout="out('6754990951372191595');" style=""> 141      private MenuItem mShareMenuItem;                                                                              </span>
<span class="-1934738222867341331" onmouseenter="enter('-1934738222867341331');" onmouseout="out('-1934738222867341331');" style=""> 142      private MenuItem mViewLinkMenuItem;                                                                           </span>
<span class="-3624836155172024592" onmouseenter="enter('-3624836155172024592');" onmouseout="out('-3624836155172024592');" style=""> 143      private String mLinkUrl;                                                                                      </span>
<span class="-680149036339568713" onmouseenter="enter('-680149036339568713');" onmouseout="out('-680149036339568713');" style=""> 144      private String mLinkText;                                                                                     </span>
<span class="-8355060532383088001" onmouseenter="enter('-8355060532383088001');" onmouseout="out('-8355060532383088001');" style=""> 145      private MatchOffsetHighlighter mHighlighter;                                                                  </span>
<span class="-3046310933001836521" onmouseenter="enter('-3046310933001836521');" onmouseout="out('-3046310933001836521');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 146 +    private Drawable mBrowserIcon;                                                                                </span>
<span class="-2893651165769435735" onmouseenter="enter('-2893651165769435735');" onmouseout="out('-2893651165769435735');" style=""> 147      private Drawable mCallIcon;                                                                                   </span>
<span class="-4798548703316944753" onmouseenter="enter('-4798548703316944753');" onmouseout="out('-4798548703316944753');" style=""> 148      private Drawable mCopyIcon;                                                                                   </span>
<span class="6775927648012186278" onmouseenter="enter('6775927648012186278');" onmouseout="out('6775927648012186278');" style=""> 149      private Drawable mEmailIcon;                                                                                  </span>
<span class="-3265647716576371737" onmouseenter="enter('-3265647716576371737');" onmouseout="out('-3265647716576371737');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 150 +    private Drawable mLinkIcon;                                                                                   </span>
<span class="-2947594512272302462" onmouseenter="enter('-2947594512272302462');" onmouseout="out('-2947594512272302462');" style=""> 151      private Drawable mMapIcon;                                                                                    </span>
<span class="-8263922286266999556" onmouseenter="enter('-8263922286266999556');" onmouseout="out('-8263922286266999556');" style=""> 152      private Drawable mShareIcon;                                                                                  </span>
<span class="-3046310933001836521" onmouseenter="enter('-3046310933001836521');" onmouseout="out('-3046310933001836521');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 153 -    private Drawable mBrowserIcon;                                                                                </span>
<span class="-7542236593744276396" onmouseenter="enter('-7542236593744276396');" onmouseout="out('-7542236593744276396');" style=""> 154      private MatchOffsetHighlighter.SpanFactory mMatchHighlighter;                                                 </span>
<span class="2689815831275839045" onmouseenter="enter('2689815831275839045');" onmouseout="out('2689815831275839045');" style=""> 155      private String mMatchOffsets;                                                                                 </span>
<span class="-7790101837861097441" onmouseenter="enter('-7790101837861097441');" onmouseout="out('-7790101837861097441');" style=""> 156      private int mCurrentCursorPosition;                                                                           </span>
<span class="6178043190004357016" onmouseenter="enter('6178043190004357016');" onmouseout="out('6178043190004357016');" style=""> 157      private HistoryBottomSheetDialog mHistoryBottomSheet;                                                         </span>
<span class="-2764923775971952187" onmouseenter="enter('-2764923775971952187');" onmouseout="out('-2764923775971952187');" style=""> 158      private boolean mIsPaused;                                                                                    </span>
<span class="-4741322818714001783" onmouseenter="enter('-4741322818714001783');" onmouseout="out('-4741322818714001783');" style=""> 159      private boolean mIsFromWidget;                                                                                </span>
<span  style=""> 160                                                                                                                    </span>
<span class="-595864044689580029" onmouseenter="enter('-595864044689580029');" onmouseout="out('-595864044689580029');" style=""> 161      // Hides the history bottom sheet if no revisions are loaded                                                  </span>
<span class="9136224915231079842" onmouseenter="enter('9136224915231079842');" onmouseout="out('9136224915231079842');" style=""> 162      private final Runnable mHistoryTimeoutRunnable = new Runnable() {                                             </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 163          @Override                                                                                                 </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 164          public void run() {                                                                                       </span>
<span class="5514287417242355685" onmouseenter="enter('5514287417242355685');" onmouseout="out('5514287417242355685');" style=""> 165              if (!isAdded()) {                                                                                     </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 166                  return;                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 167              }                                                                                                     </span>
<span  style=""> 168                                                                                                                    </span>
<span class="5713980397306524156" onmouseenter="enter('5713980397306524156');" onmouseout="out('5713980397306524156');" style=""> 169              requireActivity().runOnUiThread(new Runnable() {                                                      </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 170                  @Override                                                                                         </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 171                  public void run() {                                                                               </span>
<span class="-3311389934398547914" onmouseenter="enter('-3311389934398547914');" onmouseout="out('-3311389934398547914');" style=""><abbr title=" 172                      if (mHistoryBottomSheet.getDialog() != null &amp;&amp; mHistoryBottomSheet.getDialog().isShowing() &amp;&amp; !mHistoryBottomSheet.isHistoryLoaded()) {"> 172                      if (mHistoryBottomSheet.getDialog() != null &amp;&amp; mHistoryBottomSheet.getDialog().isShowing() &amp;&amp; 🔵</abbr></span>
<span class="-2599981510781765889" onmouseenter="enter('-2599981510781765889');" onmouseout="out('-2599981510781765889');" style=""> 173                          mHistoryBottomSheet.dismiss();                                                            </span>
<span class="-1949769614201595359" onmouseenter="enter('-1949769614201595359');" onmouseout="out('-1949769614201595359');" style=""> 174                          Toast.makeText(getActivity(), R.string.error_history, Toast.LENGTH_LONG).show();          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 175                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 176                  }                                                                                                 </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 177              });                                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 178          }                                                                                                         </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 179      };                                                                                                            </span>
<span class="-7982825583780013979" onmouseenter="enter('-7982825583780013979');" onmouseout="out('-7982825583780013979');" style=""> 180      private InfoBottomSheetDialog mInfoBottomSheet;                                                               </span>
<span class="3825770423127948234" onmouseenter="enter('3825770423127948234');" onmouseout="out('3825770423127948234');" style=""> 181      private ShareBottomSheetDialog mShareBottomSheet;                                                             </span>
<span class="9084056993766846780" onmouseenter="enter('9084056993766846780');" onmouseout="out('9084056993766846780');" style=""> 182      // Contextual action bar for dealing with links                                                               </span>
<span class="7674077006773948876" onmouseenter="enter('7674077006773948876');" onmouseout="out('7674077006773948876');" style=""> 183      private final ActionMode.Callback mActionModeCallback = new ActionMode.Callback() {                           </span>
<span class="-5830922032047880245" onmouseenter="enter('-5830922032047880245');" onmouseout="out('-5830922032047880245');" style=""> 184          // Called when the action mode is created; startActionMode() was called                                   </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 185          @Override                                                                                                 </span>
<span class="6869646826473679297" onmouseenter="enter('6869646826473679297');" onmouseout="out('6869646826473679297');" style=""> 186          public boolean onCreateActionMode(ActionMode mode, Menu menu) {                                           </span>
<span class="-5328486553851934265" onmouseenter="enter('-5328486553851934265');" onmouseout="out('-5328486553851934265');" style=""> 187              // Inflate a menu resource providing context menu items                                               </span>
<span class="8164139660214751060" onmouseenter="enter('8164139660214751060');" onmouseout="out('8164139660214751060');" style=""> 188              MenuInflater inflater = mode.getMenuInflater();                                                       </span>
<span  style=""> 189                                                                                                                    </span>
<span class="-1400051225095864167" onmouseenter="enter('-1400051225095864167');" onmouseout="out('-1400051225095864167');" style=""> 190              if (inflater != null) {                                                                               </span>
<span class="6552624979414277895" onmouseenter="enter('6552624979414277895');" onmouseout="out('6552624979414277895');" style=""> 191                  inflater.inflate(R.menu.view_link, menu);                                                         </span>
<span class="1687703529546627770" onmouseenter="enter('1687703529546627770');" onmouseout="out('1687703529546627770');" style=""> 192                  mCopyMenuItem = menu.findItem(R.id.menu_copy);                                                    </span>
<span class="-7121630790551700692" onmouseenter="enter('-7121630790551700692');" onmouseout="out('-7121630790551700692');" style=""> 193                  mShareMenuItem = menu.findItem(R.id.menu_share);                                                  </span>
<span class="2045169504868185532" onmouseenter="enter('2045169504868185532');" onmouseout="out('2045169504868185532');" style=""> 194                  mViewLinkMenuItem = menu.findItem(R.id.menu_view_link);                                           </span>
<span class="4190298810187820509" onmouseenter="enter('4190298810187820509');" onmouseout="out('4190298810187820509');" style=""> 195                  mode.setTitle(getString(R.string.link));                                                          </span>
<span class="-2927630225150463376" onmouseenter="enter('-2927630225150463376');" onmouseout="out('-2927630225150463376');" style=""> 196                  mode.setTitleOptionalHint(false);                                                                 </span>
<span  style=""> 197                                                                                                                    </span>
<span class="-5146912340244450550" onmouseenter="enter('-5146912340244450550');" onmouseout="out('-5146912340244450550');" style=""> 198                  DrawableUtils.tintMenuWithAttribute(getActivity(), menu, R.attr.toolbarIconColor);                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 199              }                                                                                                     </span>
<span  style=""> 200                                                                                                                    </span>
<span class="397900323864486173" onmouseenter="enter('397900323864486173');" onmouseout="out('397900323864486173');" style=""><abbr title=" 201              int colorResId = ThemeUtils.isLightTheme(requireContext()) ? R.color.background_light : R.color.background_dark;"> 201              int colorResId = ThemeUtils.isLightTheme(requireContext()) ? R.color.background_light : R.color.backgr🔵</abbr></span>
<span class="-1803795242967224864" onmouseenter="enter('-1803795242967224864');" onmouseout="out('-1803795242967224864');" style=""><abbr title=" 202              requireActivity().getWindow().setStatusBarColor(getResources().getColor(colorResId, requireActivity().getTheme()));"> 202              requireActivity().getWindow().setStatusBarColor(getResources().getColor(colorResId, requireActivity().🔵</abbr></span>

<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 203              return true;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 204          }                                                                                                         </span>
<span  style=""> 205                                                                                                                    </span>
<span class="-7885162724385925248" onmouseenter="enter('-7885162724385925248');" onmouseout="out('-7885162724385925248');" style=""> 206          // Called each time the action mode is shown. Always called after onCreateActionMode, but                 </span>
<span class="6140331646129020842" onmouseenter="enter('6140331646129020842');" onmouseout="out('6140331646129020842');" style=""> 207          // may be called multiple times if the mode is invalidated.                                               </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 208          @Override                                                                                                 </span>
<span class="5392123371105216364" onmouseenter="enter('5392123371105216364');" onmouseout="out('5392123371105216364');" style=""> 209          public boolean onPrepareActionMode(ActionMode mode, Menu menu) {                                          </span>
<span class="9220029862843236189" onmouseenter="enter('9220029862843236189');" onmouseout="out('9220029862843236189');" style=""> 210              return false; // Return false if nothing is done                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 211          }                                                                                                         </span>
<span  style=""> 212                                                                                                                    </span>
<span class="-918812678605329556" onmouseenter="enter('-918812678605329556');" onmouseout="out('-918812678605329556');" style=""> 213          // Called when the user selects a contextual menu item                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 214          @Override                                                                                                 </span>
<span class="816131742774025467" onmouseenter="enter('816131742774025467');" onmouseout="out('816131742774025467');" style=""> 215          public boolean onActionItemClicked(ActionMode mode, MenuItem item) {                                      </span>
<span class="2068182408853392247" onmouseenter="enter('2068182408853392247');" onmouseout="out('2068182408853392247');" style=""> 216              switch (item.getItemId()) {                                                                           </span>
<span class="1241487664924667668" onmouseenter="enter('1241487664924667668');" onmouseout="out('1241487664924667668');" style=""> 217                  case R.id.menu_view_link:                                                                         </span>
<span class="2689068574112651560" onmouseenter="enter('2689068574112651560');" onmouseout="out('2689068574112651560');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 218 -                    if (mLinkUrl != null) {                                                                       </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 219 -                        try {                                                                                     </span>
<span class="-2933476939259365458" onmouseenter="enter('-2933476939259365458');" onmouseout="out('-2933476939259365458');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 220 -                            BrowserUtils.launchBrowserOrShowError(requireContext(), mLinkUrl);                    </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 221 -                        } catch (Exception e) {                                                                   </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 222 -                            e.printStackTrace();                                                                  </span>
<span class="-6928924091126055668" onmouseenter="enter('-6928924091126055668');" onmouseout="out('-6928924091126055668');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 223 +                    if (mLinkText != null) {                                                                      </span>
<span class="-3849773635172233058" onmouseenter="enter('-3849773635172233058');" onmouseout="out('-3849773635172233058');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 224 +                        if (mLinkText.startsWith(SIMPLENOTE_LINK_PREFIX)) {                                       </span>
<span class="3123112009632250348" onmouseenter="enter('3123112009632250348');" onmouseout="out('3123112009632250348');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"><abbr title=" 225 +                            SimplenoteLinkify.openNote(requireActivity(), mLinkText.replace(SIMPLENOTE_LINK_PREFIX, &quot;&quot;));"> 225 +                            SimplenoteLinkify.openNote(requireActivity(), mLinkText.replace(SIMPLENOTE_LINK_PREFIX🔵</abbr></span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 226 +                        } else {                                                                                  </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 227 +                            try {                                                                                 </span>
<span class="5138461002499295767" onmouseenter="enter('5138461002499295767');" onmouseout="out('5138461002499295767');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 228 +                                BrowserUtils.launchBrowserOrShowError(requireContext(), mLinkText);               </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 229 +                            } catch (Exception e) {                                                               </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 230 +                                e.printStackTrace();                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 231 +                            }                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 232                          }                                                                                         </span>
<span  style=""> 233                                                                                                                    </span>
<span class="-5985541663234456921" onmouseenter="enter('-5985541663234456921');" onmouseout="out('-5985541663234456921');" style=""> 234                          mode.finish(); // Action picked, so close the CAB                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 235                      }                                                                                             </span>
<span  style=""> 236                                                                                                                    </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 237                      return true;                                                                                  </span>
<span class="1323072004784584241" onmouseenter="enter('1323072004784584241');" onmouseout="out('1323072004784584241');" style=""> 238                  case R.id.menu_copy:                                                                              </span>
<span class="5917848124130151943" onmouseenter="enter('5917848124130151943');" onmouseout="out('5917848124130151943');" style=""> 239                      if (mLinkText != null &amp;&amp; getActivity() != null) {                                             </span>
<span class="-3995442483487827848" onmouseenter="enter('-3995442483487827848');" onmouseout="out('-3995442483487827848');" style=""> 240                          if (BrowserUtils.copyToClipboard(requireContext(), mLinkText)) {                          </span>
<span class="3795490233575843146" onmouseenter="enter('3795490233575843146');" onmouseout="out('3795490233575843146');" style=""> 241                              Snackbar.make(mRootView, R.string.link_copied, Snackbar.LENGTH_SHORT).show();         </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 242                          } else {                                                                                  </span>
<span class="8359220226685626421" onmouseenter="enter('8359220226685626421');" onmouseout="out('8359220226685626421');" style=""> 243                              Snackbar.make(mRootView, R.string.link_copied_failure, Snackbar.LENGTH_SHORT).show(); </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 244                          }                                                                                         </span>
<span  style=""> 245                                                                                                                    </span>
<span class="5768223614092288606" onmouseenter="enter('5768223614092288606');" onmouseout="out('5768223614092288606');" style=""> 246                          mode.finish();                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 247                      }                                                                                             </span>
<span  style=""> 248                                                                                                                    </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 249                      return true;                                                                                  </span>
<span class="4712317589059090097" onmouseenter="enter('4712317589059090097');" onmouseout="out('4712317589059090097');" style=""> 250                  case R.id.menu_share:                                                                             </span>
<span class="-6928924091126055668" onmouseenter="enter('-6928924091126055668');" onmouseout="out('-6928924091126055668');" style=""> 251                      if (mLinkText != null) {                                                                      </span>
<span class="8185075650085964623" onmouseenter="enter('8185075650085964623');" onmouseout="out('8185075650085964623');" style=""> 252                          showShare(mLinkText);                                                                     </span>
<span class="5768223614092288606" onmouseenter="enter('5768223614092288606');" onmouseout="out('5768223614092288606');" style=""> 253                          mode.finish();                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 254                      }                                                                                             </span>
<span  style=""> 255                                                                                                                    </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 256                      return true;                                                                                  </span>
<span class="-8178136317704390296" onmouseenter="enter('-8178136317704390296');" onmouseout="out('-8178136317704390296');" style=""> 257                  default:                                                                                          </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 258                      return false;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 259              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 260          }                                                                                                         </span>
<span  style=""> 261                                                                                                                    </span>
<span class="2525157012953828009" onmouseenter="enter('2525157012953828009');" onmouseout="out('2525157012953828009');" style=""> 262          // Called when the user exits the action mode                                                             </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 263          @Override                                                                                                 </span>
<span class="-2232977199830239129" onmouseenter="enter('-2232977199830239129');" onmouseout="out('-2232977199830239129');" style=""> 264          public void onDestroyActionMode(ActionMode mode) {                                                        </span>
<span class="291405596407736607" onmouseenter="enter('291405596407736607');" onmouseout="out('291405596407736607');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 265 -            mActionMode = null;                                                                                   </span>
<span class="-1291529600191394909" onmouseenter="enter('-1291529600191394909');" onmouseout="out('-1291529600191394909');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 266 +            if (mActionMode != null) {                                                                            </span>
<span class="-4156109494689565575" onmouseenter="enter('-4156109494689565575');" onmouseout="out('-4156109494689565575');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 267 +                mActionMode.setSubtitle(&quot;&quot;);                                                                      </span>
<span class="291405596407736607" onmouseenter="enter('291405596407736607');" onmouseout="out('291405596407736607');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 268 +                mActionMode = null;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 269 +            }                                                                                                     </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 270 +                                                                                                                  </span>
<span class="-8355266079523609200" onmouseenter="enter('-8355266079523609200');" onmouseout="out('-8355266079523609200');" style=""> 271              new Handler().postDelayed(                                                                            </span>
<span class="4860439059348199630" onmouseenter="enter('4860439059348199630');" onmouseout="out('4860439059348199630');" style=""> 272                  new Runnable() {                                                                                  </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 273                      @Override                                                                                     </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 274                      public void run() {                                                                           </span>
<span class="-407723737955280968" onmouseenter="enter('-407723737955280968');" onmouseout="out('-407723737955280968');" style=""><abbr title=" 275                          requireActivity().getWindow().setStatusBarColor(getResources().getColor(android.R.color.transparent, requireActivity().getTheme()));"> 275                          requireActivity().getWindow().setStatusBarColor(getResources().getColor(android.R.color.tr🔵</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 276                      }                                                                                             </span>
<span class="-4102417550988568311" onmouseenter="enter('-4102417550988568311');" onmouseout="out('-4102417550988568311');" style=""> 277                  },                                                                                                </span>
<span class="-4127758747219082725" onmouseenter="enter('-4127758747219082725');" onmouseout="out('-4127758747219082725');" style=""> 278                  requireContext().getResources().getInteger(android.R.integer.config_mediumAnimTime)               </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 279              );                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 280          }                                                                                                         </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 281      };                                                                                                            </span>
<span class="-2321350652617580771" onmouseenter="enter('-2321350652617580771');" onmouseout="out('-2321350652617580771');" style=""> 282      private Snackbar mPublishingSnackbar;                                                                         </span>
<span class="3063974407169104073" onmouseenter="enter('3063974407169104073');" onmouseout="out('3063974407169104073');" style=""> 283      private boolean mHideActionOnSuccess;                                                                         </span>
<span class="1686976550776889109" onmouseenter="enter('1686976550776889109');" onmouseout="out('1686976550776889109');" style=""> 284      // Resets note publish status if Simperium never returned the new publish status                              </span>
<span class="4037453836709826519" onmouseenter="enter('4037453836709826519');" onmouseout="out('4037453836709826519');" style=""> 285      private final Runnable mPublishTimeoutRunnable = new Runnable() {                                             </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 286          @Override                                                                                                 </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 287          public void run() {                                                                                       </span>
<span class="6112154992837754036" onmouseenter="enter('6112154992837754036');" onmouseout="out('6112154992837754036');" style=""> 288              if (!isAdded()) return;                                                                               </span>
<span  style=""> 289                                                                                                                    </span>
<span class="5713980397306524156" onmouseenter="enter('5713980397306524156');" onmouseout="out('5713980397306524156');" style=""> 290              requireActivity().runOnUiThread(new Runnable() {                                                      </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 291                  @Override                                                                                         </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 292                  public void run() {                                                                               </span>
<span  style=""> 293                                                                                                                    </span>
<span class="-6752199236124778161" onmouseenter="enter('-6752199236124778161');" onmouseout="out('-6752199236124778161');" style=""> 294                      mNote.setPublished(!mNote.isPublished());                                                     </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style=""> 295                      mNote.save();                                                                                 </span>
<span  style=""> 296                                                                                                                    </span>
<span class="7513447915538188553" onmouseenter="enter('7513447915538188553');" onmouseout="out('7513447915538188553');" style=""> 297                      updatePublishedState(false);                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 298                  }                                                                                                 </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 299              });                                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 300          }                                                                                                         </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 301      };                                                                                                            </span>
<span class="-3565365231364209094" onmouseenter="enter('-3565365231364209094');" onmouseout="out('-3565365231364209094');" style=""> 302      private NoteMarkdownFragment mNoteMarkdownFragment;                                                           </span>
<span class="8334835640808763040" onmouseenter="enter('8334835640808763040');" onmouseout="out('8334835640808763040');" style=""> 303      private String mCss;                                                                                          </span>
<span class="2417381421481423525" onmouseenter="enter('2417381421481423525');" onmouseout="out('2417381421481423525');" style=""> 304      private WebView mMarkdown;                                                                                    </span>
<span  style=""> 305                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 306      /**                                                                                                           </span>
<span class="7780585517980788373" onmouseenter="enter('7780585517980788373');" onmouseout="out('7780585517980788373');" style=""> 307       * Mandatory empty constructor for the fragment manager to instantiate the                                    </span>
<span class="7130060501227883159" onmouseenter="enter('7130060501227883159');" onmouseout="out('7130060501227883159');" style=""> 308       * fragment (e.g. upon screen orientation changes).                                                           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 309       */                                                                                                           </span>
<span class="2055429757813344166" onmouseenter="enter('2055429757813344166');" onmouseout="out('2055429757813344166');" style=""> 310      public NoteEditorFragment() {                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 311      }                                                                                                             </span>
<span  style=""> 312                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 313      @Override                                                                                                     </span>
<span class="2351026872416697132" onmouseenter="enter('2351026872416697132');" onmouseout="out('2351026872416697132');" style=""> 314      public void onCreate(Bundle savedInstanceState) {                                                             </span>
<span class="8760898167212384157" onmouseenter="enter('8760898167212384157');" onmouseout="out('8760898167212384157');" style=""> 315          super.onCreate(savedInstanceState);                                                                       </span>
<span class="-8622194682109655372" onmouseenter="enter('-8622194682109655372');" onmouseout="out('-8622194682109655372');" style=""> 316          AppLog.add(Type.NETWORK, NetworkUtils.getNetworkInfo(requireContext()));                                  </span>
<span class="4067704072097909993" onmouseenter="enter('4067704072097909993');" onmouseout="out('4067704072097909993');" style=""> 317          AppLog.add(Type.SCREEN, &quot;Created (NoteEditorFragment)&quot;);                                                  </span>
<span class="-7986434609852753971" onmouseenter="enter('-7986434609852753971');" onmouseout="out('-7986434609852753971');" style=""> 318          mInfoBottomSheet = new InfoBottomSheetDialog(this);                                                       </span>
<span class="-3585171833526124401" onmouseenter="enter('-3585171833526124401');" onmouseout="out('-3585171833526124401');" style=""> 319          mShareBottomSheet = new ShareBottomSheetDialog(this, this);                                               </span>
<span class="8727018902564285339" onmouseenter="enter('8727018902564285339');" onmouseout="out('8727018902564285339');" style=""> 320          mHistoryBottomSheet = new HistoryBottomSheetDialog(this, this);                                           </span>
<span  style=""> 321                                                                                                                    </span>
<span class="7015772157047139063" onmouseenter="enter('7015772157047139063');" onmouseout="out('7015772157047139063');" style=""> 322          Simplenote currentApp = (Simplenote) requireActivity().getApplication();                                  </span>
<span class="3464165486447434608" onmouseenter="enter('3464165486447434608');" onmouseout="out('3464165486447434608');" style=""> 323          mNotesBucket = currentApp.getNotesBucket();                                                               </span>
<span  style=""> 324                                                                                                                    </span>
<span class="-5396295556438155472" onmouseenter="enter('-5396295556438155472');" onmouseout="out('-5396295556438155472');" style=""><abbr title=" 325          mCallIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_call_white_24dp, R.attr.actionModeTextColor);"> 325          mCallIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_call_white_24dp, R.attr.a🔵</abbr></span>
<span class="-6467507895043748101" onmouseenter="enter('-6467507895043748101');" onmouseout="out('-6467507895043748101');" style=""><abbr title=" 326          mEmailIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_email_24dp, R.attr.actionModeTextColor);"> 326          mEmailIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_email_24dp, R.attr.actio🔵</abbr></span>
<span class="467194819286006014" onmouseenter="enter('467194819286006014');" onmouseout="out('467194819286006014');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"><abbr title=" 327 +        mLinkIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_note_24dp, R.attr.actionModeTextColor);"> 327 +        mLinkIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_note_24dp, R.attr.actionM🔵</abbr></span>
<span class="439472828334727129" onmouseenter="enter('439472828334727129');" onmouseout="out('439472828334727129');" style=""><abbr title=" 328          mMapIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_map_24dp, R.attr.actionModeTextColor);"> 328          mMapIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_map_24dp, R.attr.actionMod🔵</abbr></span>
<span class="6692132481762191849" onmouseenter="enter('6692132481762191849');" onmouseout="out('6692132481762191849');" style=""><abbr title=" 329          mBrowserIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_browser_24dp, R.attr.actionModeTextColor);"> 329          mBrowserIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_browser_24dp, R.attr.a🔵</abbr></span>
<span class="-1469196158673197606" onmouseenter="enter('-1469196158673197606');" onmouseout="out('-1469196158673197606');" style=""><abbr title=" 330          mCopyIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_copy_24dp, R.attr.actionModeTextColor);"> 330          mCopyIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_copy_24dp, R.attr.actionM🔵</abbr></span>
<span class="2974983401105131042" onmouseenter="enter('2974983401105131042');" onmouseout="out('2974983401105131042');" style=""><abbr title=" 331          mShareIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_share_24dp, R.attr.actionModeTextColor);"> 331          mShareIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_share_24dp, R.attr.actio🔵</abbr></span>
<span  style=""> 332                                                                                                                    </span>
<span class="-7557436274459739944" onmouseenter="enter('-7557436274459739944');" onmouseout="out('-7557436274459739944');" style=""> 333          mAutoSaveHandler = new Handler();                                                                         </span>
<span class="5311700283685025064" onmouseenter="enter('5311700283685025064');" onmouseout="out('5311700283685025064');" style=""> 334          mPublishTimeoutHandler = new Handler();                                                                   </span>
<span class="-5335062074040604305" onmouseenter="enter('-5335062074040604305');" onmouseout="out('-5335062074040604305');" style=""> 335          mHistoryTimeoutHandler = new Handler();                                                                   </span>
<span  style=""> 336                                                                                                                    </span>
<span class="-7210994120079343670" onmouseenter="enter('-7210994120079343670');" onmouseout="out('-7210994120079343670');" style=""> 337          mMatchHighlighter = new TextHighlighter(requireActivity(),                                                </span>
<span class="5690198221529347900" onmouseenter="enter('5690198221529347900');" onmouseout="out('5690198221529347900');" style=""> 338                  R.attr.editorSearchHighlightForegroundColor, R.attr.editorSearchHighlightBackgroundColor);        </span>
<span class="-2796700407695620291" onmouseenter="enter('-2796700407695620291');" onmouseout="out('-2796700407695620291');" style=""> 339          mAutocompleteAdapter = new CursorAdapter(getActivity(), null, 0x0) {                                      </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 340              @Override                                                                                             </span>
<span class="5082230411214880762" onmouseenter="enter('5082230411214880762');" onmouseout="out('5082230411214880762');" style=""> 341              public View newView(Context context, Cursor cursor, ViewGroup parent) {                               </span>
<span class="-7341849400851650995" onmouseenter="enter('-7341849400851650995');" onmouseout="out('-7341849400851650995');" style=""> 342                  Activity activity = (Activity) context;                                                           </span>
<span class="-4259990117100818562" onmouseenter="enter('-4259990117100818562');" onmouseout="out('-4259990117100818562');" style=""> 343                  if (activity == null) return null;                                                                </span>
<span class="-3314008061858345993" onmouseenter="enter('-3314008061858345993');" onmouseout="out('-3314008061858345993');" style=""> 344                  return activity.getLayoutInflater().inflate(R.layout.tag_autocomplete_list_item, null);           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 345              }                                                                                                     </span>
<span  style=""> 346                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 347              @Override                                                                                             </span>
<span class="19024103499623332" onmouseenter="enter('19024103499623332');" onmouseout="out('19024103499623332');" style=""> 348              public void bindView(View view, Context context, Cursor cursor) {                                     </span>
<span class="1800045997788095368" onmouseenter="enter('1800045997788095368');" onmouseout="out('1800045997788095368');" style=""> 349                  TextView textView = (TextView) view;                                                              </span>
<span class="6731261465219202848" onmouseenter="enter('6731261465219202848');" onmouseout="out('6731261465219202848');" style=""> 350                  textView.setText(convertToString(cursor));                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 351              }                                                                                                     </span>
<span  style=""> 352                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 353              @Override                                                                                             </span>
<span class="-8397701079695881614" onmouseenter="enter('-8397701079695881614');" onmouseout="out('-8397701079695881614');" style=""> 354              public CharSequence convertToString(Cursor cursor) {                                                  </span>
<span class="-7149458698442797769" onmouseenter="enter('-7149458698442797769');" onmouseout="out('-7149458698442797769');" style=""> 355                  return cursor.getString(cursor.getColumnIndex(Tag.NAME_PROPERTY));                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 356              }                                                                                                     </span>
<span  style=""> 357                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 358              @Override                                                                                             </span>
<span class="-6792310640715402890" onmouseenter="enter('-6792310640715402890');" onmouseout="out('-6792310640715402890');" style=""> 359              public Cursor runQueryOnBackgroundThread(CharSequence filter) {                                       </span>
<span class="-5071525869541290984" onmouseenter="enter('-5071525869541290984');" onmouseout="out('-5071525869541290984');" style=""> 360                  Activity activity = getActivity();                                                                </span>
<span class="-4259990117100818562" onmouseenter="enter('-4259990117100818562');" onmouseout="out('-4259990117100818562');" style=""> 361                  if (activity == null) return null;                                                                </span>
<span class="9016693485500608067" onmouseenter="enter('9016693485500608067');" onmouseout="out('9016693485500608067');" style=""> 362                  Simplenote application = (Simplenote) activity.getApplication();                                  </span>
<span class="-288329532637656436" onmouseenter="enter('-288329532637656436');" onmouseout="out('-288329532637656436');" style=""> 363                  Query&lt;Tag&gt; query = application.getTagsBucket().query();                                           </span>
<span class="-1263658484466254954" onmouseenter="enter('-1263658484466254954');" onmouseout="out('-1263658484466254954');" style=""> 364                  // make the tag name available to the cursor                                                      </span>
<span class="5748018636045801946" onmouseenter="enter('5748018636045801946');" onmouseout="out('5748018636045801946');" style=""> 365                  query.include(Tag.NAME_PROPERTY);                                                                 </span>
<span class="-7615810455976629564" onmouseenter="enter('-7615810455976629564');" onmouseout="out('-7615810455976629564');" style=""> 366                  // sort the tags by their names                                                                   </span>
<span class="5674220988188306819" onmouseenter="enter('5674220988188306819');" onmouseout="out('5674220988188306819');" style=""> 367                  query.order(Tag.NAME_PROPERTY);                                                                   </span>
<span class="8185275162074884971" onmouseenter="enter('8185275162074884971');" onmouseout="out('8185275162074884971');" style=""> 368                  // if there&#x27;s a filter string find only matching tag names                                        </span>
<span class="-2390759895253291766" onmouseenter="enter('-2390759895253291766');" onmouseout="out('-2390759895253291766');" style=""> 369                  if (filter != null)                                                                               </span>
<span class="-8675928632322864405" onmouseenter="enter('-8675928632322864405');" onmouseout="out('-8675928632322864405');" style=""> 370                      query.where(Tag.NAME_PROPERTY, Query.ComparisonType.LIKE, String.format(&quot;%s%%&quot;, filter));     </span>
<span class="8392918727668200780" onmouseenter="enter('8392918727668200780');" onmouseout="out('8392918727668200780');" style=""> 371                  return query.execute();                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 372              }                                                                                                     </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 373          };                                                                                                        </span>
<span  style=""> 374                                                                                                                    </span>
<span class="-2915955960672646870" onmouseenter="enter('-2915955960672646870');" onmouseout="out('-2915955960672646870');" style=""> 375          WidgetUtils.updateNoteWidgets(requireActivity().getApplicationContext());                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 376      }                                                                                                             </span>
<span  style=""> 377                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 378      @Override                                                                                                     </span>
<span class="-3764996828666781026" onmouseenter="enter('-3764996828666781026');" onmouseout="out('-3764996828666781026');" style=""> 379      public View onCreateView(@NonNull LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {  </span>
<span class="3579130562560764282" onmouseenter="enter('3579130562560764282');" onmouseout="out('3579130562560764282');" style=""> 380          mRootView = inflater.inflate(R.layout.fragment_note_editor, container, false);                            </span>
<span class="-4779369533477417305" onmouseenter="enter('-4779369533477417305');" onmouseout="out('-4779369533477417305');" style=""> 381          mContentEditText = mRootView.findViewById(R.id.note_content);                                             </span>
<span class="-2924083774161461664" onmouseenter="enter('-2924083774161461664');" onmouseout="out('-2924083774161461664');" style=""> 382          mContentEditText.addOnSelectionChangedListener(this);                                                     </span>
<span class="5354424100413888199" onmouseenter="enter('5354424100413888199');" onmouseout="out('5354424100413888199');" style=""> 383          mContentEditText.setOnCheckboxToggledListener(this);                                                      </span>
<span class="4799293943910864448" onmouseenter="enter('4799293943910864448');" onmouseout="out('4799293943910864448');" style=""> 384          mContentEditText.setMovementMethod(SimplenoteMovementMethod.getInstance());                               </span>
<span class="-7684087958922635100" onmouseenter="enter('-7684087958922635100');" onmouseout="out('-7684087958922635100');" style=""> 385          mContentEditText.setOnFocusChangeListener(this);                                                          </span>
<span class="7906960005192148215" onmouseenter="enter('7906960005192148215');" onmouseout="out('7906960005192148215');" style=""> 386          mContentEditText.setTextSize(TypedValue.COMPLEX_UNIT_SP, PrefUtils.getFontSize(requireContext()));        </span>
<span class="-8410945612023549246" onmouseenter="enter('-8410945612023549246');" onmouseout="out('-8410945612023549246');" style=""> 387          mTagInput = mRootView.findViewById(R.id.tag_input);                                                       </span>
<span class="-8520636764026895045" onmouseenter="enter('-8520636764026895045');" onmouseout="out('-8520636764026895045');" style=""> 388          mTagInput.setDropDownBackgroundResource(R.drawable.bg_list_popup);                                        </span>
<span class="-8046888072996277100" onmouseenter="enter('-8046888072996277100');" onmouseout="out('-8046888072996277100');" style=""> 389          mTagInput.setTokenizer(new SpaceTokenizer());                                                             </span>
<span class="8277910060096767493" onmouseenter="enter('8277910060096767493');" onmouseout="out('8277910060096767493');" style=""> 390          mTagInput.setOnFocusChangeListener(this);                                                                 </span>
<span class="9064951361673299699" onmouseenter="enter('9064951361673299699');" onmouseout="out('9064951361673299699');" style=""> 391          mTagChips = mRootView.findViewById(R.id.tag_chips);                                                       </span>
<span class="-8852013276583646600" onmouseenter="enter('-8852013276583646600');" onmouseout="out('-8852013276583646600');" style=""> 392          mTagPadding = mRootView.findViewById(R.id.tag_padding);                                                   </span>
<span class="6080374810605667863" onmouseenter="enter('6080374810605667863');" onmouseout="out('6080374810605667863');" style=""> 393          mHighlighter = new MatchOffsetHighlighter(mMatchHighlighter, mContentEditText);                           </span>
<span class="2946335853320733423" onmouseenter="enter('2946335853320733423');" onmouseout="out('2946335853320733423');" style=""> 394          mPlaceholderView = mRootView.findViewById(R.id.placeholder);                                              </span>
<span  style=""> 395                                                                                                                    </span>
<span class="2767702191472733500" onmouseenter="enter('2767702191472733500');" onmouseout="out('2767702191472733500');" style=""> 396          if (DisplayUtils.isLargeScreenLandscape(getActivity()) &amp;&amp; mNote == null) {                                </span>
<span class="-5306578928333558235" onmouseenter="enter('-5306578928333558235');" onmouseout="out('-5306578928333558235');" style=""> 397              mPlaceholderView.setVisibility(View.VISIBLE);                                                         </span>
<span class="-8532471920650411447" onmouseenter="enter('-8532471920650411447');" onmouseout="out('-8532471920650411447');" style=""> 398              requireActivity().invalidateOptionsMenu();                                                            </span>
<span class="-5966136890047999161" onmouseenter="enter('-5966136890047999161');" onmouseout="out('-5966136890047999161');" style=""> 399              mMarkdown = mRootView.findViewById(R.id.markdown);                                                    </span>
<span class="2573488642866082316" onmouseenter="enter('2573488642866082316');" onmouseout="out('2573488642866082316');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 400 +            mMarkdown.setWebViewClient(                                                                           </span>
<span class="6636825780888069899" onmouseenter="enter('6636825780888069899');" onmouseout="out('6636825780888069899');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 401 +                new WebViewClient() {                                                                             </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 402 +                    @Override                                                                                     </span>
<span class="-9087834862940521077" onmouseenter="enter('-9087834862940521077');" onmouseout="out('-9087834862940521077');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 403 +                    public boolean shouldOverrideUrlLoading(WebView view, WebResourceRequest request){            </span>
<span class="-5381905371386971985" onmouseenter="enter('-5381905371386971985');" onmouseout="out('-5381905371386971985');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 404 +                        String url = request.getUrl().toString();                                                 </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 405 +                                                                                                                  </span>
<span class="-4642998270142287952" onmouseenter="enter('-4642998270142287952');" onmouseout="out('-4642998270142287952');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 406 +                        if (url.startsWith(SimplenoteLinkify.SIMPLENOTE_LINK_PREFIX)){                            </span>
<span class="1249235461949968343" onmouseenter="enter('1249235461949968343');" onmouseout="out('1249235461949968343');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"><abbr title=" 407 +                            SimplenoteLinkify.openNote(requireActivity(), url.replace(SIMPLENOTE_LINK_PREFIX, &quot;&quot;));"> 407 +                            SimplenoteLinkify.openNote(requireActivity(), url.replace(SIMPLENOTE_LINK_PREFIX, &quot;&quot;))🔵</abbr></span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 408 +                        } else {                                                                                  </span>
<span class="4407241748321738249" onmouseenter="enter('4407241748321738249');" onmouseout="out('4407241748321738249');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 409 +                            BrowserUtils.launchBrowserOrShowError(requireContext(), url);                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 410 +                        }                                                                                         </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 411 +                                                                                                                  </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 412 +                        return true;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 413 +                    }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 414 +                }                                                                                                 </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 415 +            );                                                                                                    </span>
<span class="4171573222855619135" onmouseenter="enter('4171573222855619135');" onmouseout="out('4171573222855619135');" style=""> 416              mCss = ThemeUtils.isLightTheme(requireContext())                                                      </span>
<span class="2330250883811648743" onmouseenter="enter('2330250883811648743');" onmouseout="out('2330250883811648743');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 417 -                    ? ContextUtils.readCssFile(requireContext(), &quot;light.css&quot;)                                     </span>
<span class="4652247646087549288" onmouseenter="enter('4652247646087549288');" onmouseout="out('4652247646087549288');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 418 -                    : ContextUtils.readCssFile(requireContext(), &quot;dark.css&quot;);                                     </span>
<span class="2330250883811648743" onmouseenter="enter('2330250883811648743');" onmouseout="out('2330250883811648743');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 419 +                ? ContextUtils.readCssFile(requireContext(), &quot;light.css&quot;)                                         </span>
<span class="4652247646087549288" onmouseenter="enter('4652247646087549288');" onmouseout="out('4652247646087549288');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 420 +                : ContextUtils.readCssFile(requireContext(), &quot;dark.css&quot;);                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 421          }                                                                                                         </span>
<span  style=""> 422                                                                                                                    </span>
<span class="3045371367152506055" onmouseenter="enter('3045371367152506055');" onmouseout="out('3045371367152506055');" style=""> 423          mTagInput.setAdapter(mAutocompleteAdapter);                                                               </span>
<span class="-512438581163180757" onmouseenter="enter('-512438581163180757');" onmouseout="out('-512438581163180757');" style=""> 424          Bundle arguments = getArguments();                                                                        </span>
<span  style=""> 425                                                                                                                    </span>
<span class="5652609996770636291" onmouseenter="enter('5652609996770636291');" onmouseout="out('5652609996770636291');" style=""> 426          if (arguments != null &amp;&amp; arguments.containsKey(ARG_ITEM_ID)) {                                            </span>
<span class="592168733134676120" onmouseenter="enter('592168733134676120');" onmouseout="out('592168733134676120');" style=""> 427              // Load note if we were passed a note Id                                                              </span>
<span class="-30854459346766710" onmouseenter="enter('-30854459346766710');" onmouseout="out('-30854459346766710');" style=""> 428              String key = arguments.getString(ARG_ITEM_ID);                                                        </span>
<span  style=""> 429                                                                                                                    </span>
<span class="9138949033848867696" onmouseenter="enter('9138949033848867696');" onmouseout="out('9138949033848867696');" style=""> 430              if (arguments.containsKey(ARG_MATCH_OFFSETS)) {                                                       </span>
<span class="-1831707694683903303" onmouseenter="enter('-1831707694683903303');" onmouseout="out('-1831707694683903303');" style=""> 431                  mMatchOffsets = arguments.getString(ARG_MATCH_OFFSETS);                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 432              }                                                                                                     </span>
<span  style=""> 433                                                                                                                    </span>
<span class="-5471626349746072894" onmouseenter="enter('-5471626349746072894');" onmouseout="out('-5471626349746072894');" style=""> 434              mIsFromWidget = arguments.getBoolean(ARG_IS_FROM_WIDGET);                                             </span>
<span  style=""> 435                                                                                                                    </span>
<span class="7955966257819193736" onmouseenter="enter('7955966257819193736');" onmouseout="out('7955966257819193736');" style=""> 436              if (mIsFromWidget) {                                                                                  </span>
<span class="-5617995102329158939" onmouseenter="enter('-5617995102329158939');" onmouseout="out('-5617995102329158939');" style=""> 437                  AppLog.add(Type.ACTION, &quot;Opened from widget (NoteEditorFragment)&quot;);                               </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 438              } else {                                                                                              </span>
<span class="8953265153297736425" onmouseenter="enter('8953265153297736425');" onmouseout="out('8953265153297736425');" style=""> 439                  AppLog.add(Type.ACTION, &quot;Opened from list (NoteEditorFragment)&quot;);                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 440              }                                                                                                     </span>
<span  style=""> 441                                                                                                                    </span>
<span class="2821548101564163251" onmouseenter="enter('2821548101564163251');" onmouseout="out('2821548101564163251');" style=""> 442              new LoadNoteTask(this).executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR, key);                        </span>
<span class="-7018322201047939593" onmouseenter="enter('-7018322201047939593');" onmouseout="out('-7018322201047939593');" style=""> 443          } else if (DisplayUtils.isLargeScreenLandscape(getActivity()) &amp;&amp; savedInstanceState != null) {            </span>
<span class="-5586601087309648352" onmouseenter="enter('-5586601087309648352');" onmouseout="out('-5586601087309648352');" style=""> 444              // Restore selected note when in dual pane mode                                                       </span>
<span class="-6627973434382116830" onmouseenter="enter('-6627973434382116830');" onmouseout="out('-6627973434382116830');" style=""> 445              String noteId = savedInstanceState.getString(STATE_NOTE_ID);                                          </span>
<span  style=""> 446                                                                                                                    </span>
<span class="3431348253079949637" onmouseenter="enter('3431348253079949637');" onmouseout="out('3431348253079949637');" style=""> 447              if (noteId != null) {                                                                                 </span>
<span class="6131131744168781054" onmouseenter="enter('6131131744168781054');" onmouseout="out('6131131744168781054');" style=""> 448                  setNote(noteId);                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 449              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 450          }                                                                                                         </span>
<span  style=""> 451                                                                                                                    </span>
<span class="-6084360450426647292" onmouseenter="enter('-6084360450426647292');" onmouseout="out('-6084360450426647292');" style=""> 452          ViewTreeObserver viewTreeObserver = mContentEditText.getViewTreeObserver();                               </span>
<span class="5566036156549578856" onmouseenter="enter('5566036156549578856');" onmouseout="out('5566036156549578856');" style=""> 453          viewTreeObserver.addOnGlobalLayoutListener(new ViewTreeObserver.OnGlobalLayoutListener() {                </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 454              @Override                                                                                             </span>
<span class="7412300164717447449" onmouseenter="enter('7412300164717447449');" onmouseout="out('7412300164717447449');" style=""> 455              public void onGlobalLayout() {                                                                        </span>
<span class="-1303582393563450897" onmouseenter="enter('-1303582393563450897');" onmouseout="out('-1303582393563450897');" style=""> 456                  // If a note was loaded with search matches, scroll to the first match in the editor              </span>
<span class="-6404251855291734375" onmouseenter="enter('-6404251855291734375');" onmouseout="out('-6404251855291734375');" style=""> 457                  if (mShouldScrollToSearchMatch &amp;&amp; mMatchOffsets != null) {                                        </span>
<span class="5514287417242355685" onmouseenter="enter('5514287417242355685');" onmouseout="out('5514287417242355685');" style=""> 458                      if (!isAdded()) {                                                                             </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 459                          return;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 460                      }                                                                                             </span>
<span  style=""> 461                                                                                                                    </span>
<span class="-5871446470780506147" onmouseenter="enter('-5871446470780506147');" onmouseout="out('-5871446470780506147');" style=""> 462                      // Get the character location of the first search match                                       </span>
<span class="1328407546550738965" onmouseenter="enter('1328407546550738965');" onmouseout="out('1328407546550738965');" style=""> 463                      int matchLocation = MatchOffsetHighlighter.getFirstMatchLocation(                             </span>
<span class="2395792868164050050" onmouseenter="enter('2395792868164050050');" onmouseout="out('2395792868164050050');" style=""> 464                              mContentEditText.getText(),                                                           </span>
<span class="6736916049865032431" onmouseenter="enter('6736916049865032431');" onmouseout="out('6736916049865032431');" style=""> 465                              mMatchOffsets                                                                         </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 466                      );                                                                                            </span>
<span class="3937327664514143598" onmouseenter="enter('3937327664514143598');" onmouseout="out('3937327664514143598');" style=""> 467                      if (matchLocation == 0) {                                                                     </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 468                          return;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 469                      }                                                                                             </span>
<span  style=""> 470                                                                                                                    </span>
<span class="-8411350726545484842" onmouseenter="enter('-8411350726545484842');" onmouseout="out('-8411350726545484842');" style=""> 471                      // Calculate how far to scroll to bring the match into view                                   </span>
<span class="-8088580226996087877" onmouseenter="enter('-8088580226996087877');" onmouseout="out('-8088580226996087877');" style=""> 472                      Layout layout = mContentEditText.getLayout();                                                 </span>
<span class="4818857677317424270" onmouseenter="enter('4818857677317424270');" onmouseout="out('4818857677317424270');" style=""> 473                      int lineTop = layout.getLineTop(layout.getLineForOffset(matchLocation));                      </span>
<span class="1129057737754431865" onmouseenter="enter('1129057737754431865');" onmouseout="out('1129057737754431865');" style=""> 474                      ((NestedScrollView) mRootView).smoothScrollTo(0, lineTop);                                    </span>
<span class="1093252497226085042" onmouseenter="enter('1093252497226085042');" onmouseout="out('1093252497226085042');" style=""> 475                      mShouldScrollToSearchMatch = false;                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 476                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 477              }                                                                                                     </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 478          });                                                                                                       </span>
<span class="7823602444079418117" onmouseenter="enter('7823602444079418117');" onmouseout="out('7823602444079418117');" style=""> 479          setHasOptionsMenu(true);                                                                                  </span>
<span class="-6258722083869792010" onmouseenter="enter('-6258722083869792010');" onmouseout="out('-6258722083869792010');" style=""> 480          return mRootView;                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 481      }                                                                                                             </span>
<span  style=""> 482                                                                                                                    </span>
<span class="4710528937935082296" onmouseenter="enter('4710528937935082296');" onmouseout="out('4710528937935082296');" style=""> 483      public void scrollToMatch(int location) {                                                                     </span>
<span class="-7481427962806884462" onmouseenter="enter('-7481427962806884462');" onmouseout="out('-7481427962806884462');" style=""> 484          if (isAdded()) {                                                                                          </span>
<span class="-8411350726545484842" onmouseenter="enter('-8411350726545484842');" onmouseout="out('-8411350726545484842');" style=""> 485              // Calculate how far to scroll to bring the match into view                                           </span>
<span class="-8088580226996087877" onmouseenter="enter('-8088580226996087877');" onmouseout="out('-8088580226996087877');" style=""> 486              Layout layout = mContentEditText.getLayout();                                                         </span>
<span class="7976110079331789160" onmouseenter="enter('7976110079331789160');" onmouseout="out('7976110079331789160');" style=""> 487              int lineTop = layout.getLineTop(layout.getLineForOffset(location));                                   </span>
<span class="1129057737754431865" onmouseenter="enter('1129057737754431865');" onmouseout="out('1129057737754431865');" style=""> 488              ((NestedScrollView) mRootView).smoothScrollTo(0, lineTop);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 489          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 490      }                                                                                                             </span>
<span  style=""> 491                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 492      @Override                                                                                                     </span>
<span class="3212580988936830895" onmouseenter="enter('3212580988936830895');" onmouseout="out('3212580988936830895');" style=""> 493      public void onResume() {                                                                                      </span>
<span class="-6840488528374549322" onmouseenter="enter('-6840488528374549322');" onmouseout="out('-6840488528374549322');" style=""> 494          super.onResume();                                                                                         </span>
<span class="-295722270474880574" onmouseenter="enter('-295722270474880574');" onmouseout="out('-295722270474880574');" style=""> 495          mNotesBucket.start();                                                                                     </span>
<span class="-2614582349717816655" onmouseenter="enter('-2614582349717816655');" onmouseout="out('-2614582349717816655');" style=""> 496          AppLog.add(Type.SYNC, &quot;Started note bucket (NoteEditorFragment)&quot;);                                        </span>
<span class="8320491026461558488" onmouseenter="enter('8320491026461558488');" onmouseout="out('8320491026461558488');" style=""> 497          mNotesBucket.addListener(this);                                                                           </span>
<span class="5183219019881866175" onmouseenter="enter('5183219019881866175');" onmouseout="out('5183219019881866175');" style=""> 498          mTagInput.setOnTagAddedListener(this);                                                                    </span>
<span  style=""> 499                                                                                                                    </span>
<span class="-8630351771722931094" onmouseenter="enter('-8630351771722931094');" onmouseout="out('-8630351771722931094');" style=""> 500          if (mContentEditText != null) {                                                                           </span>
<span class="7906960005192148215" onmouseenter="enter('7906960005192148215');" onmouseout="out('7906960005192148215');" style=""> 501              mContentEditText.setTextSize(TypedValue.COMPLEX_UNIT_SP, PrefUtils.getFontSize(requireContext()));    </span>
<span  style=""> 502                                                                                                                    </span>
<span class="-9045903618847243853" onmouseenter="enter('-9045903618847243853');" onmouseout="out('-9045903618847243853');" style=""> 503              if (mContentEditText.hasFocus()) {                                                                    </span>
<span class="2378139384018001812" onmouseenter="enter('2378139384018001812');" onmouseout="out('2378139384018001812');" style=""> 504                  showSoftKeyboard();                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 505              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 506          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 507      }                                                                                                             </span>
<span  style=""> 508                                                                                                                    </span>
<span class="-7408745136026343325" onmouseenter="enter('-7408745136026343325');" onmouseout="out('-7408745136026343325');" style=""> 509      private void showSoftKeyboard() {                                                                             </span>
<span class="7162501222170899627" onmouseenter="enter('7162501222170899627');" onmouseout="out('7162501222170899627');" style=""> 510          new Handler().postDelayed(new Runnable() {                                                                </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 511              @Override                                                                                             </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 512              public void run() {                                                                                   </span>
<span class="-3170312762343778784" onmouseenter="enter('-3170312762343778784');" onmouseout="out('-3170312762343778784');" style=""> 513                  if (getActivity() == null) {                                                                      </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 514                      return;                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 515                  }                                                                                                 </span>
<span  style=""> 516                                                                                                                    </span>
<span class="6943331498658216188" onmouseenter="enter('6943331498658216188');" onmouseout="out('6943331498658216188');" style=""><abbr title=" 517                  InputMethodManager inputMethodManager = (InputMethodManager) getActivity().getSystemService(Context.INPUT_METHOD_SERVICE);"> 517                  InputMethodManager inputMethodManager = (InputMethodManager) getActivity().getSystemService(Contex🔵</abbr></span>
<span class="-9213036537020298306" onmouseenter="enter('-9213036537020298306');" onmouseout="out('-9213036537020298306');" style=""> 518                  if (inputMethodManager != null) {                                                                 </span>
<span class="7954226653587797662" onmouseenter="enter('7954226653587797662');" onmouseout="out('7954226653587797662');" style=""> 519                      inputMethodManager.showSoftInput(mContentEditText, 0);                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 520                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 521              }                                                                                                     </span>
<span class="-4884776244894547305" onmouseenter="enter('-4884776244894547305');" onmouseout="out('-4884776244894547305');" style=""> 522          }, 100);                                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 523      }                                                                                                             </span>
<span  style=""> 524                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 525      @Override                                                                                                     </span>
<span class="3108783673391190151" onmouseenter="enter('3108783673391190151');" onmouseout="out('3108783673391190151');" style=""> 526      public void onPause() {                                                                                       </span>
<span class="4626272369407912674" onmouseenter="enter('4626272369407912674');" onmouseout="out('4626272369407912674');" style=""> 527          super.onPause();  // Always call the superclass method first                                              </span>
<span class="-5493396254025166032" onmouseenter="enter('-5493396254025166032');" onmouseout="out('-5493396254025166032');" style=""> 528          mIsPaused = true;                                                                                         </span>
<span  style=""> 529                                                                                                                    </span>
<span class="-4286062678685908757" onmouseenter="enter('-4286062678685908757');" onmouseout="out('-4286062678685908757');" style=""> 530          // Hide soft keyboard if it is showing...                                                                 </span>
<span class="5486984069351007864" onmouseenter="enter('5486984069351007864');" onmouseout="out('5486984069351007864');" style=""> 531          DisplayUtils.hideKeyboard(mContentEditText);                                                              </span>
<span  style=""> 532                                                                                                                    </span>
<span class="6353289516119274314" onmouseenter="enter('6353289516119274314');" onmouseout="out('6353289516119274314');" style=""> 533          mTagInput.setOnTagAddedListener(null);                                                                    </span>
<span  style=""> 534                                                                                                                    </span>
<span class="-2149096896161266035" onmouseenter="enter('-2149096896161266035');" onmouseout="out('-2149096896161266035');" style=""> 535          if (mAutoSaveHandler != null) {                                                                           </span>
<span class="-5465787548318672754" onmouseenter="enter('-5465787548318672754');" onmouseout="out('-5465787548318672754');" style=""> 536              mAutoSaveHandler.removeCallbacks(mAutoSaveRunnable);                                                  </span>
<span class="-837723219443324586" onmouseenter="enter('-837723219443324586');" onmouseout="out('-837723219443324586');" style=""> 537              mAutoSaveHandler.post(mAutoSaveRunnable);                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 538          }                                                                                                         </span>
<span  style=""> 539                                                                                                                    </span>
<span class="-8758788084050668688" onmouseenter="enter('-8758788084050668688');" onmouseout="out('-8758788084050668688');" style=""> 540          if (mPublishTimeoutHandler != null) {                                                                     </span>
<span class="-1646454762641300025" onmouseenter="enter('-1646454762641300025');" onmouseout="out('-1646454762641300025');" style=""> 541              mPublishTimeoutHandler.removeCallbacks(mPublishTimeoutRunnable);                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 542          }                                                                                                         </span>
<span  style=""> 543                                                                                                                    </span>
<span class="16247739636052398" onmouseenter="enter('16247739636052398');" onmouseout="out('16247739636052398');" style=""> 544          if (mHistoryTimeoutHandler != null) {                                                                     </span>
<span class="7316258928910882956" onmouseenter="enter('7316258928910882956');" onmouseout="out('7316258928910882956');" style=""> 545              mHistoryTimeoutHandler.removeCallbacks(mHistoryTimeoutRunnable);                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 546          }                                                                                                         </span>
<span  style=""> 547                                                                                                                    </span>
<span class="212618759798230270" onmouseenter="enter('212618759798230270');" onmouseout="out('212618759798230270');" style=""> 548          mHighlighter.stop();                                                                                      </span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style=""> 549          saveNote();                                                                                               </span>
<span class="-5110134461042230019" onmouseenter="enter('-5110134461042230019');" onmouseout="out('-5110134461042230019');" style=""> 550          AppLog.add(Type.SCREEN, &quot;Paused (NoteEditorFragment)&quot;);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 551      }                                                                                                             </span>
<span  style=""> 552                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 553      @Override                                                                                                     </span>
<span class="658855826062432633" onmouseenter="enter('658855826062432633');" onmouseout="out('658855826062432633');" style=""> 554      public void onDestroy() {                                                                                     </span>
<span class="7275190530034972367" onmouseenter="enter('7275190530034972367');" onmouseout="out('7275190530034972367');" style=""> 555          super.onDestroy();                                                                                        </span>
<span class="-1649552973291504175" onmouseenter="enter('-1649552973291504175');" onmouseout="out('-1649552973291504175');" style=""> 556          mNotesBucket.removeListener(this);                                                                        </span>
<span class="-9222421628383802707" onmouseenter="enter('-9222421628383802707');" onmouseout="out('-9222421628383802707');" style=""> 557          mNotesBucket.stop();                                                                                      </span>
<span class="-5888247817738062720" onmouseenter="enter('-5888247817738062720');" onmouseout="out('-5888247817738062720');" style=""> 558          AppLog.add(Type.SYNC, &quot;Stopped note bucket (NoteEditorFragment)&quot;);                                        </span>
<span class="284986690041099701" onmouseenter="enter('284986690041099701');" onmouseout="out('284986690041099701');" style=""> 559          AppLog.add(Type.SCREEN, &quot;Destroyed (NoteEditorFragment)&quot;);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 560      }                                                                                                             </span>
<span  style=""> 561                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 562      @Override                                                                                                     </span>
<span class="5678576148993170097" onmouseenter="enter('5678576148993170097');" onmouseout="out('5678576148993170097');" style=""> 563      public void onSaveInstanceState(@NonNull Bundle outState) {                                                   </span>
<span class="2796648189832219063" onmouseenter="enter('2796648189832219063');" onmouseout="out('2796648189832219063');" style=""> 564          super.onSaveInstanceState(outState);                                                                      </span>
<span  style=""> 565                                                                                                                    </span>
<span class="4471570229761422149" onmouseenter="enter('4471570229761422149');" onmouseout="out('4471570229761422149');" style=""> 566          if (DisplayUtils.isLargeScreenLandscape(getActivity()) &amp;&amp; mNote != null) {                                </span>
<span class="7419969731723984173" onmouseenter="enter('7419969731723984173');" onmouseout="out('7419969731723984173');" style=""> 567              outState.putString(STATE_NOTE_ID, mNote.getSimperiumKey());                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 568          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 569      }                                                                                                             </span>
<span  style=""> 570                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 571      @Override                                                                                                     </span>
<span class="-3104619052446816858" onmouseenter="enter('-3104619052446816858');" onmouseout="out('-3104619052446816858');" style=""> 572      public void onCreateOptionsMenu(@NonNull Menu menu, @NonNull MenuInflater inflater) {                         </span>
<span class="5772887857065615623" onmouseenter="enter('5772887857065615623');" onmouseout="out('5772887857065615623');" style=""> 573          super.onCreateOptionsMenu(menu, inflater);                                                                </span>
<span  style=""> 574                                                                                                                    </span>
<span class="-4568224188607879240" onmouseenter="enter('-4568224188607879240');" onmouseout="out('-4568224188607879240');" style=""><abbr title=" 575          if (!isAdded() || (!mIsFromWidget &amp;&amp; DisplayUtils.isLargeScreenLandscape(getActivity()) &amp;&amp; mNoteMarkdownFragment == null)) {"> 575          if (!isAdded() || (!mIsFromWidget &amp;&amp; DisplayUtils.isLargeScreenLandscape(getActivity()) &amp;&amp; mNoteMarkdownFr🔵</abbr></span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 576              return;                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 577          }                                                                                                         </span>
<span  style=""> 578                                                                                                                    </span>
<span class="-5591635883999644357" onmouseenter="enter('-5591635883999644357');" onmouseout="out('-5591635883999644357');" style=""> 579          inflater.inflate(R.menu.note_editor, menu);                                                               </span>
<span class="5385664906661306149" onmouseenter="enter('5385664906661306149');" onmouseout="out('5385664906661306149');" style=""> 580          MenuCompat.setGroupDividerEnabled(menu, true);                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 581      }                                                                                                             </span>
<span  style=""> 582                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 583      @Override                                                                                                     </span>
<span class="-882410792536471577" onmouseenter="enter('-882410792536471577');" onmouseout="out('-882410792536471577');" style=""> 584      public boolean onOptionsItemSelected(@NonNull MenuItem item) {                                                </span>
<span class="2068182408853392247" onmouseenter="enter('2068182408853392247');" onmouseout="out('2068182408853392247');" style=""> 585          switch (item.getItemId()) {                                                                               </span>
<span class="-9105547343157360739" onmouseenter="enter('-9105547343157360739');" onmouseout="out('-9105547343157360739');" style=""> 586              case R.id.menu_checklist:                                                                             </span>
<span class="2996686463249748346" onmouseenter="enter('2996686463249748346');" onmouseout="out('2996686463249748346');" style=""> 587                  insertChecklist();                                                                                </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 588                  return true;                                                                                      </span>
<span class="1323072004784584241" onmouseenter="enter('1323072004784584241');" onmouseout="out('1323072004784584241');" style=""> 589              case R.id.menu_copy:                                                                                  </span>
<span class="8518441705934796822" onmouseenter="enter('8518441705934796822');" onmouseout="out('8518441705934796822');" style=""> 590                  if (BrowserUtils.copyToClipboard(requireContext(), mNote.getPublishedUrl())) {                    </span>
<span class="3795490233575843146" onmouseenter="enter('3795490233575843146');" onmouseout="out('3795490233575843146');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 591 +                    Snackbar.make(mRootView, R.string.link_copied, Snackbar.LENGTH_SHORT).show();                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 592 +                } else {                                                                                          </span>
<span class="8359220226685626421" onmouseenter="enter('8359220226685626421');" onmouseout="out('8359220226685626421');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 593 +                    Snackbar.make(mRootView, R.string.link_copied_failure, Snackbar.LENGTH_SHORT).show();         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 594 +                }                                                                                                 </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 595 +                                                                                                                  </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 596 +                return true;                                                                                      </span>
<span class="5654474204908123045" onmouseenter="enter('5654474204908123045');" onmouseout="out('5654474204908123045');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 597 +            case R.id.menu_copy_internal:                                                                         </span>
<span class="-3103212045473028348" onmouseenter="enter('-3103212045473028348');" onmouseout="out('-3103212045473028348');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"><abbr title=" 598 +                if (BrowserUtils.copyToClipboard(requireContext(), SimplenoteLinkify.getNoteLinkWithTitle(mNote.getTitle(), mNote.getSimperiumKey()))) {"> 598 +                if (BrowserUtils.copyToClipboard(requireContext(), SimplenoteLinkify.getNoteLinkWithTitle(mNote.ge🔵</abbr></span>
<span class="3795490233575843146" onmouseenter="enter('3795490233575843146');" onmouseout="out('3795490233575843146');" style=""> 599                      Snackbar.make(mRootView, R.string.link_copied, Snackbar.LENGTH_SHORT).show();                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 600                  } else {                                                                                          </span>
<span class="8359220226685626421" onmouseenter="enter('8359220226685626421');" onmouseout="out('8359220226685626421');" style=""> 601                      Snackbar.make(mRootView, R.string.link_copied_failure, Snackbar.LENGTH_SHORT).show();         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 602                  }                                                                                                 </span>
<span  style=""> 603                                                                                                                    </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 604                  return true;                                                                                      </span>
<span class="1329351071337199880" onmouseenter="enter('1329351071337199880');" onmouseout="out('1329351071337199880');" style=""> 605              case R.id.menu_history:                                                                               </span>
<span class="3115064412317025337" onmouseenter="enter('3115064412317025337');" onmouseout="out('3115064412317025337');" style=""> 606                  showHistory();                                                                                    </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 607                  return true;                                                                                      </span>
<span class="-7455228569432134304" onmouseenter="enter('-7455228569432134304');" onmouseout="out('-7455228569432134304');" style=""> 608              case R.id.menu_info:                                                                                  </span>
<span class="1221863391504882204" onmouseenter="enter('1221863391504882204');" onmouseout="out('1221863391504882204');" style=""> 609                  showInfo();                                                                                       </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 610                  return true;                                                                                      </span>
<span class="1690518520070570963" onmouseenter="enter('1690518520070570963');" onmouseout="out('1690518520070570963');" style=""> 611              case R.id.menu_markdown:                                                                              </span>
<span class="-3926545672787324985" onmouseenter="enter('-3926545672787324985');" onmouseout="out('-3926545672787324985');" style=""> 612                  setMarkdown(!item.isChecked());                                                                   </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 613                  return true;                                                                                      </span>
<span class="2584816759865872098" onmouseenter="enter('2584816759865872098');" onmouseout="out('2584816759865872098');" style=""> 614              case R.id.menu_pin:                                                                                   </span>
<span class="846429991982879471" onmouseenter="enter('846429991982879471');" onmouseout="out('846429991982879471');" style=""> 615                  NoteUtils.setNotePin(mNote, !item.isChecked());                                                   </span>
<span class="-8532471920650411447" onmouseenter="enter('-8532471920650411447');" onmouseout="out('-8532471920650411447');" style=""> 616                  requireActivity().invalidateOptionsMenu();                                                        </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 617                  return true;                                                                                      </span>
<span class="-1377067082739801221" onmouseenter="enter('-1377067082739801221');" onmouseout="out('-1377067082739801221');" style=""> 618              case R.id.menu_publish:                                                                               </span>
<span class="-3060727947180574444" onmouseenter="enter('-3060727947180574444');" onmouseout="out('-3060727947180574444');" style=""> 619                  if (item.isChecked()) {                                                                           </span>
<span class="4812123925634099655" onmouseenter="enter('4812123925634099655');" onmouseout="out('4812123925634099655');" style=""> 620                      unpublishNote();                                                                              </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 621                  } else {                                                                                          </span>
<span class="7985358866333072123" onmouseenter="enter('7985358866333072123');" onmouseout="out('7985358866333072123');" style=""> 622                      publishNote();                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 623                  }                                                                                                 </span>
<span  style=""> 624                                                                                                                    </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 625                  return true;                                                                                      </span>
<span class="4712317589059090097" onmouseenter="enter('4712317589059090097');" onmouseout="out('4712317589059090097');" style=""> 626              case R.id.menu_share:                                                                                 </span>
<span class="2819818847761455451" onmouseenter="enter('2819818847761455451');" onmouseout="out('2819818847761455451');" style=""> 627                  shareNote();                                                                                      </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 628                  return true;                                                                                      </span>
<span class="-7045228079815744059" onmouseenter="enter('-7045228079815744059');" onmouseout="out('-7045228079815744059');" style=""> 629              case R.id.menu_trash:                                                                                 </span>
<span class="5514287417242355685" onmouseenter="enter('5514287417242355685');" onmouseout="out('5514287417242355685');" style=""> 630                  if (!isAdded()) {                                                                                 </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 631                      return false;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 632                  }                                                                                                 </span>
<span  style=""> 633                                                                                                                    </span>
<span class="3639769569139585690" onmouseenter="enter('3639769569139585690');" onmouseout="out('3639769569139585690');" style=""> 634                  deleteNote();                                                                                     </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 635                  return true;                                                                                      </span>
<span class="4538874991877816092" onmouseenter="enter('4538874991877816092');" onmouseout="out('4538874991877816092');" style=""> 636              case android.R.id.home:                                                                               </span>
<span class="-5022390127132774156" onmouseenter="enter('-5022390127132774156');" onmouseout="out('-5022390127132774156');" style=""> 637                  AppLog.add(Type.ACTION, &quot;Tapped back arrow in app bar (NoteEditorFragment)&quot;);                     </span>
<span class="5514287417242355685" onmouseenter="enter('5514287417242355685');" onmouseout="out('5514287417242355685');" style=""> 638                  if (!isAdded()) {                                                                                 </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 639                      return false;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 640                  }                                                                                                 </span>
<span  style=""> 641                                                                                                                    </span>
<span class="-1923482990691915278" onmouseenter="enter('-1923482990691915278');" onmouseout="out('-1923482990691915278');" style=""> 642                  requireActivity().finish();                                                                       </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 643                  return true;                                                                                      </span>
<span class="-8178136317704390296" onmouseenter="enter('-8178136317704390296');" onmouseout="out('-8178136317704390296');" style=""> 644              default:                                                                                              </span>
<span class="-3863613010288750787" onmouseenter="enter('-3863613010288750787');" onmouseout="out('-3863613010288750787');" style=""> 645                  return super.onOptionsItemSelected(item);                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 646          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 647      }                                                                                                             </span>
<span  style=""> 648                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 649      @Override                                                                                                     </span>
<span class="976560802893770483" onmouseenter="enter('976560802893770483');" onmouseout="out('976560802893770483');" style=""> 650      public void onPrepareOptionsMenu(@NonNull Menu menu) {                                                        </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 651          if (mNote != null) {                                                                                      </span>
<span class="4103252492326247538" onmouseenter="enter('4103252492326247538');" onmouseout="out('4103252492326247538');" style=""> 652              MenuItem pinItem = menu.findItem(R.id.menu_pin);                                                      </span>
<span class="-1901297934576221502" onmouseenter="enter('-1901297934576221502');" onmouseout="out('-1901297934576221502');" style=""> 653              MenuItem shareItem = menu.findItem(R.id.menu_share);                                                  </span>
<span class="-1024200395334062210" onmouseenter="enter('-1024200395334062210');" onmouseout="out('-1024200395334062210');" style=""> 654              MenuItem historyItem = menu.findItem(R.id.menu_history);                                              </span>
<span class="8524821600195318381" onmouseenter="enter('8524821600195318381');" onmouseout="out('8524821600195318381');" style=""> 655              MenuItem publishItem = menu.findItem(R.id.menu_publish);                                              </span>
<span class="-2596587708374310136" onmouseenter="enter('-2596587708374310136');" onmouseout="out('-2596587708374310136');" style=""> 656              MenuItem copyLinkItem = menu.findItem(R.id.menu_copy);                                                </span>
<span class="3256712546982954826" onmouseenter="enter('3256712546982954826');" onmouseout="out('3256712546982954826');" style=""> 657              MenuItem markdownItem = menu.findItem(R.id.menu_markdown);                                            </span>
<span class="7126556138263523964" onmouseenter="enter('7126556138263523964');" onmouseout="out('7126556138263523964');" style=""> 658              MenuItem trashItem = menu.findItem(R.id.menu_trash);                                                  </span>
<span class="-481966053977064278" onmouseenter="enter('-481966053977064278');" onmouseout="out('-481966053977064278');" style=""> 659              mChecklistMenuItem = menu.findItem(R.id.menu_checklist);                                              </span>
<span class="-41110414926085356" onmouseenter="enter('-41110414926085356');" onmouseout="out('-41110414926085356');" style=""> 660              mInformationMenuItem = menu.findItem(R.id.menu_info).setVisible(true);                                </span>
<span  style=""> 661                                                                                                                    </span>
<span class="-7678419238898690461" onmouseenter="enter('-7678419238898690461');" onmouseout="out('-7678419238898690461');" style=""> 662              pinItem.setChecked(mNote.isPinned());                                                                 </span>
<span class="5915502490134342688" onmouseenter="enter('5915502490134342688');" onmouseout="out('5915502490134342688');" style=""> 663              publishItem.setChecked(mNote.isPublished());                                                          </span>
<span class="-2454055549809219964" onmouseenter="enter('-2454055549809219964');" onmouseout="out('-2454055549809219964');" style=""> 664              markdownItem.setChecked(mNote.isMarkdownEnabled());                                                   </span>
<span  style=""> 665                                                                                                                    </span>
<span class="8027745968637922893" onmouseenter="enter('8027745968637922893');" onmouseout="out('8027745968637922893');" style=""> 666              // Disable actions when note is in Trash or markdown view is shown on large device.                   </span>
<span class="-431402929828645917" onmouseenter="enter('-431402929828645917');" onmouseout="out('-431402929828645917');" style=""> 667              if (mNote.isDeleted() || (mMarkdown != null &amp;&amp; mMarkdown.getVisibility() == View.VISIBLE)) {          </span>
<span class="-1690132925836641241" onmouseenter="enter('-1690132925836641241');" onmouseout="out('-1690132925836641241');" style=""> 668                  pinItem.setEnabled(false);                                                                        </span>
<span class="-5469494517506321069" onmouseenter="enter('-5469494517506321069');" onmouseout="out('-5469494517506321069');" style=""> 669                  shareItem.setEnabled(false);                                                                      </span>
<span class="9085171889633758452" onmouseenter="enter('9085171889633758452');" onmouseout="out('9085171889633758452');" style=""> 670                  historyItem.setEnabled(false);                                                                    </span>
<span class="6693521395658962624" onmouseenter="enter('6693521395658962624');" onmouseout="out('6693521395658962624');" style=""> 671                  publishItem.setEnabled(false);                                                                    </span>
<span class="9087995724461855803" onmouseenter="enter('9087995724461855803');" onmouseout="out('9087995724461855803');" style=""> 672                  copyLinkItem.setEnabled(false);                                                                   </span>
<span class="-1845358690665350593" onmouseenter="enter('-1845358690665350593');" onmouseout="out('-1845358690665350593');" style=""> 673                  markdownItem.setEnabled(false);                                                                   </span>
<span class="1533489871724235057" onmouseenter="enter('1533489871724235057');" onmouseout="out('1533489871724235057');" style=""> 674                  mChecklistMenuItem.setEnabled(false);                                                             </span>
<span class="5575712097606361646" onmouseenter="enter('5575712097606361646');" onmouseout="out('5575712097606361646');" style=""> 675                  DrawableUtils.setMenuItemAlpha(mChecklistMenuItem, 0.3);  // 0.3 is 30% opacity.                  </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 676              } else {                                                                                              </span>
<span class="-4176946050939173198" onmouseenter="enter('-4176946050939173198');" onmouseout="out('-4176946050939173198');" style=""> 677                  pinItem.setEnabled(true);                                                                         </span>
<span class="-8607869884042424878" onmouseenter="enter('-8607869884042424878');" onmouseout="out('-8607869884042424878');" style=""> 678                  shareItem.setEnabled(true);                                                                       </span>
<span class="-4314747760650157745" onmouseenter="enter('-4314747760650157745');" onmouseout="out('-4314747760650157745');" style=""> 679                  historyItem.setEnabled(true);                                                                     </span>
<span class="3398211100008798634" onmouseenter="enter('3398211100008798634');" onmouseout="out('3398211100008798634');" style=""> 680                  publishItem.setEnabled(true);                                                                     </span>
<span class="-4773075625324516073" onmouseenter="enter('-4773075625324516073');" onmouseout="out('-4773075625324516073');" style=""> 681                  copyLinkItem.setEnabled(mNote.isPublished());                                                     </span>
<span class="3540588263915729219" onmouseenter="enter('3540588263915729219');" onmouseout="out('3540588263915729219');" style=""> 682                  markdownItem.setEnabled(true);                                                                    </span>
<span class="9157159425417983851" onmouseenter="enter('9157159425417983851');" onmouseout="out('9157159425417983851');" style=""> 683                  mChecklistMenuItem.setEnabled(true);                                                              </span>
<span class="-997998498639683163" onmouseenter="enter('-997998498639683163');" onmouseout="out('-997998498639683163');" style=""> 684                  DrawableUtils.setMenuItemAlpha(mChecklistMenuItem, 1.0);  // 1.0 is 100% opacity.                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 685              }                                                                                                     </span>
<span  style=""> 686                                                                                                                    </span>
<span class="5561093706160816776" onmouseenter="enter('5561093706160816776');" onmouseout="out('5561093706160816776');" style=""> 687              if (mNote.isDeleted()) {                                                                              </span>
<span class="-3033015909800303171" onmouseenter="enter('-3033015909800303171');" onmouseout="out('-3033015909800303171');" style=""> 688                  trashItem.setTitle(R.string.restore);                                                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 689              } else {                                                                                              </span>
<span class="-1683477354690990368" onmouseenter="enter('-1683477354690990368');" onmouseout="out('-1683477354690990368');" style=""> 690                  trashItem.setTitle(R.string.trash);                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 691              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 692          }                                                                                                         </span>
<span  style=""> 693                                                                                                                    </span>
<span class="-5146912340244450550" onmouseenter="enter('-5146912340244450550');" onmouseout="out('-5146912340244450550');" style=""> 694          DrawableUtils.tintMenuWithAttribute(getActivity(), menu, R.attr.toolbarIconColor);                        </span>
<span class="1467059367331108531" onmouseenter="enter('1467059367331108531');" onmouseout="out('1467059367331108531');" style=""> 695          super.onPrepareOptionsMenu(menu);                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 696      }                                                                                                             </span>
<span  style=""> 697                                                                                                                    </span>
<span class="-2056093237925143337" onmouseenter="enter('-2056093237925143337');" onmouseout="out('-2056093237925143337');" style=""> 698      public void insertChecklist() {                                                                               </span>
<span class="-2132172590912834546" onmouseenter="enter('-2132172590912834546');" onmouseout="out('-2132172590912834546');" style=""> 699          DrawableUtils.startAnimatedVectorDrawable(mChecklistMenuItem.getIcon());                                  </span>
<span  style=""> 700                                                                                                                    </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 701          try {                                                                                                     </span>
<span class="5818347684529310934" onmouseenter="enter('5818347684529310934');" onmouseout="out('5818347684529310934');" style=""> 702              mContentEditText.insertChecklist();                                                                   </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 703          } catch (Exception e) {                                                                                   </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 704              e.printStackTrace();                                                                                  </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 705              return;                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 706          }                                                                                                         </span>
<span  style=""> 707                                                                                                                    </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 708          AnalyticsTracker.track(                                                                                   </span>
<span class="2856363448162984839" onmouseenter="enter('2856363448162984839');" onmouseout="out('2856363448162984839');" style=""> 709              EDITOR_CHECKLIST_INSERTED,                                                                            </span>
<span class="-2430475172570880083" onmouseenter="enter('-2430475172570880083');" onmouseout="out('-2430475172570880083');" style=""> 710              CATEGORY_NOTE,                                                                                        </span>
<span class="3613116414135407305" onmouseenter="enter('3613116414135407305');" onmouseout="out('3613116414135407305');" style=""> 711              &quot;toolbar_button&quot;                                                                                      </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 712          );                                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 713      }                                                                                                             </span>
<span  style=""> 714                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 715      @Override                                                                                                     </span>
<span class="-8145186961220354967" onmouseenter="enter('-8145186961220354967');" onmouseout="out('-8145186961220354967');" style=""> 716      public void onCheckboxToggled() {                                                                             </span>
<span class="-2834824800808682286" onmouseenter="enter('-2834824800808682286');" onmouseout="out('-2834824800808682286');" style=""> 717          // Save note (using delay) after toggling a checkbox                                                      </span>
<span class="-2149096896161266035" onmouseenter="enter('-2149096896161266035');" onmouseout="out('-2149096896161266035');" style=""> 718          if (mAutoSaveHandler != null) {                                                                           </span>
<span class="-5465787548318672754" onmouseenter="enter('-5465787548318672754');" onmouseout="out('-5465787548318672754');" style=""> 719              mAutoSaveHandler.removeCallbacks(mAutoSaveRunnable);                                                  </span>
<span class="3237260668993885548" onmouseenter="enter('3237260668993885548');" onmouseout="out('3237260668993885548');" style=""> 720              mAutoSaveHandler.postDelayed(mAutoSaveRunnable, AUTOSAVE_DELAY_MILLIS);                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 721          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 722      }                                                                                                             </span>
<span  style=""> 723                                                                                                                    </span>
<span class="-7228463698535350052" onmouseenter="enter('-7228463698535350052');" onmouseout="out('-7228463698535350052');" style=""> 724      private void deleteNote() {                                                                                   </span>
<span class="4492119149633458811" onmouseenter="enter('4492119149633458811');" onmouseout="out('4492119149633458811');" style=""> 725          NoteUtils.deleteNote(mNote, getActivity());                                                               </span>
<span class="-1923482990691915278" onmouseenter="enter('-1923482990691915278');" onmouseout="out('-1923482990691915278');" style=""> 726          requireActivity().finish();                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 727      }                                                                                                             </span>
<span  style=""> 728                                                                                                                    </span>
<span class="6575837707802621057" onmouseenter="enter('6575837707802621057');" onmouseout="out('6575837707802621057');" style=""> 729      protected void clearMarkdown() {                                                                              </span>
<span class="4379033444024403701" onmouseenter="enter('4379033444024403701');" onmouseout="out('4379033444024403701');" style=""> 730          mMarkdown.loadDataWithBaseURL(&quot;file:///android_asset/&quot;, mCss + &quot;&quot;, &quot;text/html&quot;, &quot;utf-8&quot;, null);           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 731      }                                                                                                             </span>
<span  style=""> 732                                                                                                                    </span>
<span class="4876877473500420963" onmouseenter="enter('4876877473500420963');" onmouseout="out('4876877473500420963');" style=""> 733      protected void hideMarkdown() {                                                                               </span>
<span class="6362103358672335388" onmouseenter="enter('6362103358672335388');" onmouseout="out('6362103358672335388');" style=""> 734          mMarkdown.setVisibility(View.INVISIBLE);                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 735      }                                                                                                             </span>
<span  style=""> 736                                                                                                                    </span>
<span class="-3219341107535080329" onmouseenter="enter('-3219341107535080329');" onmouseout="out('-3219341107535080329');" style=""> 737      protected void showMarkdown() {                                                                               </span>
<span class="3327794499329885328" onmouseenter="enter('3327794499329885328');" onmouseout="out('3327794499329885328');" style=""> 738          loadMarkdownData();                                                                                       </span>
<span class="4346698976501095620" onmouseenter="enter('4346698976501095620');" onmouseout="out('4346698976501095620');" style=""> 739          mMarkdown.setVisibility(View.VISIBLE);                                                                    </span>
<span  style=""> 740                                                                                                                    </span>
<span class="-8355266079523609200" onmouseenter="enter('-8355266079523609200');" onmouseout="out('-8355266079523609200');" style=""> 741          new Handler().postDelayed(                                                                                </span>
<span class="4860439059348199630" onmouseenter="enter('4860439059348199630');" onmouseout="out('4860439059348199630');" style=""> 742              new Runnable() {                                                                                      </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 743                  @Override                                                                                         </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 744                  public void run() {                                                                               </span>
<span class="-8532471920650411447" onmouseenter="enter('-8532471920650411447');" onmouseout="out('-8532471920650411447');" style=""> 745                      requireActivity().invalidateOptionsMenu();                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 746                  }                                                                                                 </span>
<span class="-4102417550988568311" onmouseenter="enter('-4102417550988568311');" onmouseout="out('-4102417550988568311');" style=""> 747              },                                                                                                    </span>
<span class="5128296635725421077" onmouseenter="enter('5128296635725421077');" onmouseout="out('5128296635725421077');" style=""> 748              getResources().getInteger(R.integer.time_animation)                                                   </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 749          );                                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 750      }                                                                                                             </span>
<span  style=""> 751                                                                                                                    </span>
<span class="796341583224604558" onmouseenter="enter('796341583224604558');" onmouseout="out('796341583224604558');" style=""> 752      public void shareNote() {                                                                                     </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 753          if (mNote != null) {                                                                                      </span>
<span class="-5662939853121386036" onmouseenter="enter('-5662939853121386036');" onmouseout="out('-5662939853121386036');" style=""> 754              mContentEditText.clearFocus();                                                                        </span>
<span class="-641201949227129854" onmouseenter="enter('-641201949227129854');" onmouseout="out('-641201949227129854');" style=""> 755              showShareSheet();                                                                                     </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 756              AnalyticsTracker.track(                                                                               </span>
<span class="-5025794315104060878" onmouseenter="enter('-5025794315104060878');" onmouseout="out('-5025794315104060878');" style=""> 757                  EDITOR_NOTE_CONTENT_SHARED,                                                                       </span>
<span class="-2430475172570880083" onmouseenter="enter('-2430475172570880083');" onmouseout="out('-2430475172570880083');" style=""> 758                  CATEGORY_NOTE,                                                                                    </span>
<span class="2749115305963564191" onmouseenter="enter('2749115305963564191');" onmouseout="out('2749115305963564191');" style=""> 759                  &quot;action_bar_share_button&quot;                                                                         </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 760              );                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 761          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 762      }                                                                                                             </span>
<span  style=""> 763                                                                                                                    </span>
<span class="-6549715277076486587" onmouseenter="enter('-6549715277076486587');" onmouseout="out('-6549715277076486587');" style=""> 764      public void showHistory() {                                                                                   </span>
<span class="-4132317386083687564" onmouseenter="enter('-4132317386083687564');" onmouseout="out('-4132317386083687564');" style=""> 765          if (mNote != null &amp;&amp; mNote.getVersion() &gt; 1) {                                                            </span>
<span class="-5662939853121386036" onmouseenter="enter('-5662939853121386036');" onmouseout="out('-5662939853121386036');" style=""> 766              mContentEditText.clearFocus();                                                                        </span>
<span class="2792270431942423109" onmouseenter="enter('2792270431942423109');" onmouseout="out('2792270431942423109');" style=""> 767              mHistoryTimeoutHandler.postDelayed(mHistoryTimeoutRunnable, HISTORY_TIMEOUT);                         </span>
<span class="-6120831555230055153" onmouseenter="enter('-6120831555230055153');" onmouseout="out('-6120831555230055153');" style=""> 768              showHistorySheet();                                                                                   </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 769          } else {                                                                                                  </span>
<span class="-1949769614201595359" onmouseenter="enter('-1949769614201595359');" onmouseout="out('-1949769614201595359');" style=""> 770              Toast.makeText(getActivity(), R.string.error_history, Toast.LENGTH_LONG).show();                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 771          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 772      }                                                                                                             </span>
<span  style=""> 773                                                                                                                    </span>
<span class="7631792944897512467" onmouseenter="enter('7631792944897512467');" onmouseout="out('7631792944897512467');" style=""> 774      public void showInfo() {                                                                                      </span>
<span class="8350219460722128573" onmouseenter="enter('8350219460722128573');" onmouseout="out('8350219460722128573');" style=""> 775          DrawableUtils.startAnimatedVectorDrawable(mInformationMenuItem.getIcon());                                </span>
<span  style=""> 776                                                                                                                    </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 777          if (mNote != null) {                                                                                      </span>
<span class="-5662939853121386036" onmouseenter="enter('-5662939853121386036');" onmouseout="out('-5662939853121386036');" style=""> 778              mContentEditText.clearFocus();                                                                        </span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style=""> 779              saveNote();                                                                                           </span>
<span class="-4032532453651560177" onmouseenter="enter('-4032532453651560177');" onmouseout="out('-4032532453651560177');" style=""> 780              showInfoSheet();                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 781          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 782      }                                                                                                             </span>
<span  style=""> 783                                                                                                                    </span>
<span class="-352900364532795923" onmouseenter="enter('-352900364532795923');" onmouseout="out('-352900364532795923');" style=""> 784      private void setMarkdown(boolean isChecked) {                                                                 </span>
<span class="-8726857289881922025" onmouseenter="enter('-8726857289881922025');" onmouseout="out('-8726857289881922025');" style=""> 785          mIsMarkdownEnabled = isChecked;                                                                           </span>
<span class="-2583362461360625309" onmouseenter="enter('-2583362461360625309');" onmouseout="out('-2583362461360625309');" style=""> 786          showMarkdownActionOrTabs();                                                                               </span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style=""> 787          saveNote();                                                                                               </span>
<span  style=""> 788                                                                                                                    </span>
<span class="4232333416851338644" onmouseenter="enter('4232333416851338644');" onmouseout="out('4232333416851338644');" style=""> 789          // Set preference so that next new note will have markdown enabled.                                       </span>
<span class="6036884777494374936" onmouseenter="enter('6036884777494374936');" onmouseout="out('6036884777494374936');" style=""> 790          SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(requireContext());                </span>
<span class="-5940133505573131741" onmouseenter="enter('-5940133505573131741');" onmouseout="out('-5940133505573131741');" style=""> 791          SharedPreferences.Editor editor = prefs.edit();                                                           </span>
<span class="5795063328820819160" onmouseenter="enter('5795063328820819160');" onmouseout="out('5795063328820819160');" style=""> 792          editor.putBoolean(PrefUtils.PREF_MARKDOWN_ENABLED, isChecked);                                            </span>
<span class="-5305612453340718340" onmouseenter="enter('-5305612453340718340');" onmouseout="out('-5305612453340718340');" style=""> 793          editor.apply();                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 794      }                                                                                                             </span>
<span  style=""> 795                                                                                                                    </span>
<span class="-8233267360630545179" onmouseenter="enter('-8233267360630545179');" onmouseout="out('-8233267360630545179');" style=""> 796      private void setMarkdownEnabled(boolean enabled) {                                                            </span>
<span class="-9128949734751156553" onmouseenter="enter('-9128949734751156553');" onmouseout="out('-9128949734751156553');" style=""> 797          mIsMarkdownEnabled = enabled;                                                                             </span>
<span  style=""> 798                                                                                                                    </span>
<span class="-5497853437151453135" onmouseenter="enter('-5497853437151453135');" onmouseout="out('-5497853437151453135');" style=""> 799          if (mIsMarkdownEnabled) {                                                                                 </span>
<span class="3327794499329885328" onmouseenter="enter('3327794499329885328');" onmouseout="out('3327794499329885328');" style=""> 800              loadMarkdownData();                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 801          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 802      }                                                                                                             </span>
<span  style=""> 803                                                                                                                    </span>
<span class="-150225536602277221" onmouseenter="enter('-150225536602277221');" onmouseout="out('-150225536602277221');" style=""> 804      private void showMarkdownActionOrTabs() {                                                                     </span>
<span class="-5071525869541290984" onmouseenter="enter('-5071525869541290984');" onmouseout="out('-5071525869541290984');" style=""> 805          Activity activity = getActivity();                                                                        </span>
<span  style=""> 806                                                                                                                    </span>
<span class="2687579389951242136" onmouseenter="enter('2687579389951242136');" onmouseout="out('2687579389951242136');" style=""> 807          if (activity instanceof NoteEditorActivity) {                                                             </span>
<span class="-2402557313247060047" onmouseenter="enter('-2402557313247060047');" onmouseout="out('-2402557313247060047');" style=""> 808              NoteEditorActivity editorActivity = (NoteEditorActivity) activity;                                    </span>
<span  style=""> 809                                                                                                                    </span>
<span class="-5497853437151453135" onmouseenter="enter('-5497853437151453135');" onmouseout="out('-5497853437151453135');" style=""> 810              if (mIsMarkdownEnabled) {                                                                             </span>
<span class="2738920073364403707" onmouseenter="enter('2738920073364403707');" onmouseout="out('2738920073364403707');" style=""> 811                  editorActivity.showTabs();                                                                        </span>
<span  style=""> 812                                                                                                                    </span>
<span class="-3674842258349497418" onmouseenter="enter('-3674842258349497418');" onmouseout="out('-3674842258349497418');" style=""> 813                  if (mNoteMarkdownFragment == null) {                                                              </span>
<span class="-8091199532300597402" onmouseenter="enter('-8091199532300597402');" onmouseout="out('-8091199532300597402');" style=""> 814                      // Get markdown fragment and update content                                                   </span>
<span class="6541177819216640453" onmouseenter="enter('6541177819216640453');" onmouseout="out('6541177819216640453');" style=""> 815                      mNoteMarkdownFragment = editorActivity.getNoteMarkdownFragment();                             </span>
<span class="8234543871026198045" onmouseenter="enter('8234543871026198045');" onmouseout="out('8234543871026198045');" style=""> 816                      mNoteMarkdownFragment.updateMarkdown(mContentEditText.getPreviewTextContent());               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 817                  }                                                                                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 818              } else {                                                                                              </span>
<span class="-1827112023263463857" onmouseenter="enter('-1827112023263463857');" onmouseout="out('-1827112023263463857');" style=""> 819                  editorActivity.hideTabs();                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 820              }                                                                                                     </span>
<span class="-8182258209329027497" onmouseenter="enter('-8182258209329027497');" onmouseout="out('-8182258209329027497');" style=""> 821          } else if (activity instanceof NotesActivity) {                                                           </span>
<span class="714586879751884809" onmouseenter="enter('714586879751884809');" onmouseout="out('714586879751884809');" style=""> 822              setMarkdownEnabled(mIsMarkdownEnabled);                                                               </span>
<span class="9075936053703013718" onmouseenter="enter('9075936053703013718');" onmouseout="out('9075936053703013718');" style=""> 823              ((NotesActivity) getActivity()).setMarkdownShowing(false);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 824          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 825      }                                                                                                             </span>
<span  style=""> 826                                                                                                                    </span>
<span class="-2467052403250215415" onmouseenter="enter('-2467052403250215415');" onmouseout="out('-2467052403250215415');" style=""> 827      private void loadMarkdownData() {                                                                             </span>
<span class="-8622237621259523057" onmouseenter="enter('-8622237621259523057');" onmouseout="out('-8622237621259523057');" style=""> 828          String formattedContent = NoteMarkdownFragment.getMarkdownFormattedContent(                               </span>
<span class="-107180190148709194" onmouseenter="enter('-107180190148709194');" onmouseout="out('-107180190148709194');" style=""> 829                  mCss,                                                                                             </span>
<span class="8402262730640179324" onmouseenter="enter('8402262730640179324');" onmouseout="out('8402262730640179324');" style=""> 830                  mContentEditText.getPreviewTextContent()                                                          </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 831          );                                                                                                        </span>
<span  style=""> 832                                                                                                                    </span>
<span class="-1179287945165338458" onmouseenter="enter('-1179287945165338458');" onmouseout="out('-1179287945165338458');" style=""> 833          mMarkdown.loadDataWithBaseURL(null, formattedContent, &quot;text/html&quot;, &quot;utf-8&quot;, null);                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 834      }                                                                                                             </span>
<span  style=""> 835                                                                                                                    </span>
<span class="8195105300246755684" onmouseenter="enter('8195105300246755684');" onmouseout="out('8195105300246755684');" style=""> 836      public void setNote(String noteID, String matchOffsets) {                                                     </span>
<span class="-3646372507164546123" onmouseenter="enter('-3646372507164546123');" onmouseout="out('-3646372507164546123');" style=""> 837          if (mAutoSaveHandler != null)                                                                             </span>
<span class="-5465787548318672754" onmouseenter="enter('-5465787548318672754');" onmouseout="out('-5465787548318672754');" style=""> 838              mAutoSaveHandler.removeCallbacks(mAutoSaveRunnable);                                                  </span>
<span  style=""> 839                                                                                                                    </span>
<span class="-2690182352330934584" onmouseenter="enter('-2690182352330934584');" onmouseout="out('-2690182352330934584');" style=""> 840          mPlaceholderView.setVisibility(View.GONE);                                                                </span>
<span  style=""> 841                                                                                                                    </span>
<span class="-7566474685196195951" onmouseenter="enter('-7566474685196195951');" onmouseout="out('-7566474685196195951');" style=""> 842          if (matchOffsets != null) {                                                                               </span>
<span class="76822769413740338" onmouseenter="enter('76822769413740338');" onmouseout="out('76822769413740338');" style=""> 843              mMatchOffsets = matchOffsets;                                                                         </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 844          } else {                                                                                                  </span>
<span class="-5254682256162211718" onmouseenter="enter('-5254682256162211718');" onmouseout="out('-5254682256162211718');" style=""> 845              mMatchOffsets = null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 846          }                                                                                                         </span>
<span  style=""> 847                                                                                                                    </span>
<span  style=""> 848                                                                                                                    </span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style=""> 849          saveNote();                                                                                               </span>
<span  style=""> 850                                                                                                                    </span>
<span class="-2429694576102374369" onmouseenter="enter('-2429694576102374369');" onmouseout="out('-2429694576102374369');" style=""> 851          new LoadNoteTask(this).executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR, noteID);                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 852      }                                                                                                             </span>
<span  style=""> 853                                                                                                                    </span>
<span class="2912110192045859171" onmouseenter="enter('2912110192045859171');" onmouseout="out('2912110192045859171');" style=""> 854      private void updateNote(Note updatedNote) {                                                                   </span>
<span class="1053945494720623403" onmouseenter="enter('1053945494720623403');" onmouseout="out('1053945494720623403');" style=""> 855          // update note if network change arrived                                                                  </span>
<span class="8715526790189509580" onmouseenter="enter('8715526790189509580');" onmouseout="out('8715526790189509580');" style=""> 856          mNote = updatedNote;                                                                                      </span>
<span class="-1082183570760036139" onmouseenter="enter('-1082183570760036139');" onmouseout="out('-1082183570760036139');" style=""> 857          refreshContent(true);                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 858      }                                                                                                             </span>
<span  style=""> 859                                                                                                                    </span>
<span class="-7217331690392611444" onmouseenter="enter('-7217331690392611444');" onmouseout="out('-7217331690392611444');" style=""> 860      private void refreshContent(boolean isNoteUpdate) {                                                           </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 861          if (mNote != null) {                                                                                      </span>
<span class="9083634457699551889" onmouseenter="enter('9083634457699551889');" onmouseout="out('9083634457699551889');" style=""> 862              // Restore the cursor position if possible.                                                           </span>
<span class="-3899995221280134201" onmouseenter="enter('-3899995221280134201');" onmouseout="out('-3899995221280134201');" style=""><abbr title=" 863              int cursorPosition = newCursorLocation(mNote.getContent(), getNoteContentString(), mContentEditText.getSelectionEnd());"> 863              int cursorPosition = newCursorLocation(mNote.getContent(), getNoteContentString(), mContentEditText.ge🔵</abbr></span>
<span class="4148799213240179760" onmouseenter="enter('4148799213240179760');" onmouseout="out('4148799213240179760');" style=""> 864              mContentEditText.setText(mNote.getContent());                                                         </span>
<span  style=""> 865                                                                                                                    </span>
<span class="2353268123342341866" onmouseenter="enter('2353268123342341866');" onmouseout="out('2353268123342341866');" style=""> 866              if (isNoteUpdate) {                                                                                   </span>
<span class="-7373810293776319490" onmouseenter="enter('-7373810293776319490');" onmouseout="out('-7373810293776319490');" style=""> 867                  // Update markdown and preview flags from updated note.                                           </span>
<span class="-6548100248772474304" onmouseenter="enter('-6548100248772474304');" onmouseout="out('-6548100248772474304');" style=""> 868                  mIsMarkdownEnabled = mNote.isMarkdownEnabled();                                                   </span>
<span class="8897386780031316770" onmouseenter="enter('8897386780031316770');" onmouseout="out('8897386780031316770');" style=""> 869                  mIsPreviewEnabled = mNote.isPreviewEnabled();                                                     </span>
<span  style=""> 870                                                                                                                    </span>
<span class="-3172285059116353636" onmouseenter="enter('-3172285059116353636');" onmouseout="out('-3172285059116353636');" style=""> 871                  // Show/Hide action/tabs based on markdown flag.                                                  </span>
<span class="-2583362461360625309" onmouseenter="enter('-2583362461360625309');" onmouseout="out('-2583362461360625309');" style=""> 872                  showMarkdownActionOrTabs();                                                                       </span>
<span  style=""> 873                                                                                                                    </span>
<span class="8277551329937109619" onmouseenter="enter('8277551329937109619');" onmouseout="out('8277551329937109619');" style=""> 874                  // Save note so any local changes get synced.                                                     </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style=""> 875                  mNote.save();                                                                                     </span>
<span  style=""> 876                                                                                                                    </span>
<span class="-4783156834321463304" onmouseenter="enter('-4783156834321463304');" onmouseout="out('-4783156834321463304');" style=""> 877                  // Update current note object on large screen devices in landscape orientation.                   </span>
<span class="-7225941789318469668" onmouseenter="enter('-7225941789318469668');" onmouseout="out('-7225941789318469668');" style=""> 878                  if (DisplayUtils.isLargeScreenLandscape(requireContext())) {                                      </span>
<span class="9072366327646001644" onmouseenter="enter('9072366327646001644');" onmouseout="out('9072366327646001644');" style=""> 879                      ((NotesActivity) requireActivity()).setCurrentNote(mNote);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 880                  }                                                                                                 </span>
<span  style=""> 881                                                                                                                    </span>
<span class="-510315884444466739" onmouseenter="enter('-510315884444466739');" onmouseout="out('-510315884444466739');" style=""> 882                  // Update overflow popup menu.                                                                    </span>
<span class="-8532471920650411447" onmouseenter="enter('-8532471920650411447');" onmouseout="out('-8532471920650411447');" style=""> 883                  requireActivity().invalidateOptionsMenu();                                                        </span>
<span  style=""> 884                                                                                                                    </span>
<span class="8073598210414419917" onmouseenter="enter('8073598210414419917');" onmouseout="out('8073598210414419917');" style=""> 885                  if (mContentEditText.hasFocus()                                                                   </span>
<span class="1644140795570121810" onmouseenter="enter('1644140795570121810');" onmouseout="out('1644140795570121810');" style=""> 886                          &amp;&amp; cursorPosition != mContentEditText.getSelectionEnd()                                   </span>
<span class="-7547165723183084197" onmouseenter="enter('-7547165723183084197');" onmouseout="out('-7547165723183084197');" style=""> 887                          &amp;&amp; cursorPosition &lt; mContentEditText.getText().length()) {                                </span>
<span class="2096054726124109686" onmouseenter="enter('2096054726124109686');" onmouseout="out('2096054726124109686');" style=""> 888                      mContentEditText.setSelection(cursorPosition);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 889                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 890              }                                                                                                     </span>
<span  style=""> 891                                                                                                                    </span>
<span class="-2853209662220592982" onmouseenter="enter('-2853209662220592982');" onmouseout="out('-2853209662220592982');" style=""> 892              afterTextChanged(mContentEditText.getText());                                                         </span>
<span class="-5644737892245114659" onmouseenter="enter('-5644737892245114659');" onmouseout="out('-5644737892245114659');" style=""> 893              mContentEditText.processChecklists();                                                                 </span>
<span class="3745953297761259324" onmouseenter="enter('3745953297761259324');" onmouseout="out('3745953297761259324');" style=""> 894              updateTagList();                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 895          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 896      }                                                                                                             </span>
<span  style=""> 897                                                                                                                    </span>
<span class="8641648550056617419" onmouseenter="enter('8641648550056617419');" onmouseout="out('8641648550056617419');" style=""> 898      private void updateTagList() {                                                                                </span>
<span class="-2248190398996855538" onmouseenter="enter('-2248190398996855538');" onmouseout="out('-2248190398996855538');" style=""> 899          setChips(mNote.getTagString());                                                                           </span>
<span class="704222064602714746" onmouseenter="enter('704222064602714746');" onmouseout="out('704222064602714746');" style=""> 900          mTagInput.setText(&quot;&quot;);                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 901      }                                                                                                             </span>
<span  style=""> 902                                                                                                                    </span>
<span class="4246690832623096875" onmouseenter="enter('4246690832623096875');" onmouseout="out('4246690832623096875');" style=""> 903      private int newCursorLocation(String newText, String oldText, int cursorLocation) {                           </span>
<span class="9215253731107462720" onmouseenter="enter('9215253731107462720');" onmouseout="out('9215253731107462720');" style=""> 904          // Ported from the iOS app :)                                                                             </span>
<span class="746416875920517525" onmouseenter="enter('746416875920517525');" onmouseout="out('746416875920517525');" style=""> 905          // Cases:                                                                                                 </span>
<span class="5532692154938930485" onmouseenter="enter('5532692154938930485');" onmouseout="out('5532692154938930485');" style=""> 906          // 0. All text after cursor (and possibly more) was removed ==&gt; put cursor at end                         </span>
<span class="7679522442911259243" onmouseenter="enter('7679522442911259243');" onmouseout="out('7679522442911259243');" style=""> 907          // 1. Text was added after the cursor ==&gt; no change                                                       </span>
<span class="-7894032746042607578" onmouseenter="enter('-7894032746042607578');" onmouseout="out('-7894032746042607578');" style=""> 908          // 2. Text was added before the cursor ==&gt; location advances                                              </span>
<span class="-2716138352653500367" onmouseenter="enter('-2716138352653500367');" onmouseout="out('-2716138352653500367');" style=""> 909          // 3. Text was removed after the cursor ==&gt; no change                                                     </span>
<span class="-5135222146548415418" onmouseenter="enter('-5135222146548415418');" onmouseout="out('-5135222146548415418');" style=""> 910          // 4. Text was removed before the cursor ==&gt; location retreats                                            </span>
<span class="-7558810491072030947" onmouseenter="enter('-7558810491072030947');" onmouseout="out('-7558810491072030947');" style=""> 911          // 5. Text was added/removed on both sides of the cursor ==&gt; not handled                                  </span>
<span  style=""> 912                                                                                                                    </span>
<span class="6113131008706185379" onmouseenter="enter('6113131008706185379');" onmouseout="out('6113131008706185379');" style=""> 913          cursorLocation = Math.max(cursorLocation, 0);                                                             </span>
<span  style=""> 914                                                                                                                    </span>
<span class="2494517364842646163" onmouseenter="enter('2494517364842646163');" onmouseout="out('2494517364842646163');" style=""> 915          int newCursorLocation = cursorLocation;                                                                   </span>
<span  style=""> 916                                                                                                                    </span>
<span class="5908042661332565473" onmouseenter="enter('5908042661332565473');" onmouseout="out('5908042661332565473');" style=""> 917          int deltaLength = newText.length() - oldText.length();                                                    </span>
<span  style=""> 918                                                                                                                    </span>
<span class="-6285488792309831531" onmouseenter="enter('-6285488792309831531');" onmouseout="out('-6285488792309831531');" style=""> 919          // Case 0                                                                                                 </span>
<span class="-3414403190560247865" onmouseenter="enter('-3414403190560247865');" onmouseout="out('-3414403190560247865');" style=""> 920          if (newText.length() &lt; cursorLocation)                                                                    </span>
<span class="-8431314608568195365" onmouseenter="enter('-8431314608568195365');" onmouseout="out('-8431314608568195365');" style=""> 921              return newText.length();                                                                              </span>
<span  style=""> 922                                                                                                                    </span>
<span class="-8591384106259708496" onmouseenter="enter('-8591384106259708496');" onmouseout="out('-8591384106259708496');" style=""> 923          boolean beforeCursorMatches = false;                                                                      </span>
<span class="-2836779116340504068" onmouseenter="enter('-2836779116340504068');" onmouseout="out('-2836779116340504068');" style=""> 924          boolean afterCursorMatches = false;                                                                       </span>
<span  style=""> 925                                                                                                                    </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 926          try {                                                                                                     </span>
<span class="535177221055952012" onmouseenter="enter('535177221055952012');" onmouseout="out('535177221055952012');" style=""><abbr title=" 927              beforeCursorMatches = oldText.substring(0, cursorLocation).equals(newText.substring(0, cursorLocation));"> 927              beforeCursorMatches = oldText.substring(0, cursorLocation).equals(newText.substring(0, cursorLocation)🔵</abbr></span>
<span class="4519924127741002604" onmouseenter="enter('4519924127741002604');" onmouseout="out('4519924127741002604');" style=""><abbr title=" 928              afterCursorMatches = oldText.substring(cursorLocation).equals(newText.substring(cursorLocation + deltaLength));"> 928              afterCursorMatches = oldText.substring(cursorLocation).equals(newText.substring(cursorLocation + delta🔵</abbr></span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 929          } catch (Exception e) {                                                                                   </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 930              e.printStackTrace();                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 931          }                                                                                                         </span>
<span  style=""> 932                                                                                                                    </span>
<span class="-8188204612528872149" onmouseenter="enter('-8188204612528872149');" onmouseout="out('-8188204612528872149');" style=""> 933          // Cases 2 and 4                                                                                          </span>
<span class="6616414540674367624" onmouseenter="enter('6616414540674367624');" onmouseout="out('6616414540674367624');" style=""> 934          if (!beforeCursorMatches &amp;&amp; afterCursorMatches)                                                           </span>
<span class="-4510977125628343614" onmouseenter="enter('-4510977125628343614');" onmouseout="out('-4510977125628343614');" style=""> 935              newCursorLocation += deltaLength;                                                                     </span>
<span  style=""> 936                                                                                                                    </span>
<span class="6867115481875645839" onmouseenter="enter('6867115481875645839');" onmouseout="out('6867115481875645839');" style=""> 937          // Cases 1, 3 and 5 have no change                                                                        </span>
<span class="-7784410696724573059" onmouseenter="enter('-7784410696724573059');" onmouseout="out('-7784410696724573059');" style=""> 938          return newCursorLocation;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 939      }                                                                                                             </span>
<span  style=""> 940                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 941      @Override                                                                                                     </span>
<span class="7167548776341584998" onmouseenter="enter('7167548776341584998');" onmouseout="out('7167548776341584998');" style=""> 942      public void onTagAdded(String tag) {                                                                          </span>
<span class="-7210480112102928295" onmouseenter="enter('-7210480112102928295');" onmouseout="out('-7210480112102928295');" style=""> 943          if (mNote == null || !isAdded()) {                                                                        </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 944              return;                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 945          }                                                                                                         </span>
<span  style=""> 946                                                                                                                    </span>
<span class="-5238169388612496279" onmouseenter="enter('-5238169388612496279');" onmouseout="out('-5238169388612496279');" style=""> 947          if (mNote.getTagString() != null &amp;&amp; tag.length() &gt; mNote.getTagString().length()) {                       </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 948              AnalyticsTracker.track(                                                                               </span>
<span class="-1422381609780470266" onmouseenter="enter('-1422381609780470266');" onmouseout="out('-1422381609780470266');" style=""> 949                  EDITOR_TAG_ADDED,                                                                                 </span>
<span class="-2430475172570880083" onmouseenter="enter('-2430475172570880083');" onmouseout="out('-2430475172570880083');" style=""> 950                  CATEGORY_NOTE,                                                                                    </span>
<span class="7268236347956630095" onmouseenter="enter('7268236347956630095');" onmouseout="out('7268236347956630095');" style=""> 951                  &quot;tag_added_to_note&quot;                                                                               </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 952              );                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 953          }                                                                                                         </span>
<span  style=""> 954                                                                                                                    </span>
<span class="-1987136146652427775" onmouseenter="enter('-1987136146652427775');" onmouseout="out('-1987136146652427775');" style=""> 955          mNote.setTagString(mNote.getTagString() + String.valueOf(SPACE) + tag);                                   </span>
<span class="-3343075472306200704" onmouseenter="enter('-3343075472306200704');" onmouseout="out('-3343075472306200704');" style=""> 956          mNote.setModificationDate(Calendar.getInstance());                                                        </span>
<span class="3745953297761259324" onmouseenter="enter('3745953297761259324');" onmouseout="out('3745953297761259324');" style=""> 957          updateTagList();                                                                                          </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style=""> 958          mNote.save();                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 959      }                                                                                                             </span>
<span  style=""> 960                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 961      @Override                                                                                                     </span>
<span class="-5110897291356760413" onmouseenter="enter('-5110897291356760413');" onmouseout="out('-5110897291356760413');" style=""> 962      public void beforeTextChanged(CharSequence charSequence, int i, int i2, int i3) {                             </span>
<span class="7490540504293754116" onmouseenter="enter('7490540504293754116');" onmouseout="out('7490540504293754116');" style=""> 963          // Unused                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 964      }                                                                                                             </span>
<span  style=""> 965                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 966      @Override                                                                                                     </span>
<span class="-3169498224421089624" onmouseenter="enter('-3169498224421089624');" onmouseout="out('-3169498224421089624');" style=""> 967      public void afterTextChanged(Editable editable) {                                                             </span>
<span class="4641646211430236365" onmouseenter="enter('4641646211430236365');" onmouseout="out('4641646211430236365');" style=""> 968          attemptAutoList(editable);                                                                                </span>
<span class="7005237563799171506" onmouseenter="enter('7005237563799171506');" onmouseout="out('7005237563799171506');" style=""> 969          setTitleSpan(editable);                                                                                   </span>
<span class="-7817145757567347170" onmouseenter="enter('-7817145757567347170');" onmouseout="out('-7817145757567347170');" style=""> 970          mContentEditText.fixLineSpacing();                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 971      }                                                                                                             </span>
<span  style=""> 972                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 973      @Override                                                                                                     </span>
<span class="-6004971105578563950" onmouseenter="enter('-6004971105578563950');" onmouseout="out('-6004971105578563950');" style=""> 974      public void onTextChanged(CharSequence charSequence, int start, int before, int count) {                      </span>
<span class="2036741165452809133" onmouseenter="enter('2036741165452809133');" onmouseout="out('2036741165452809133');" style=""> 975          // When text changes, start timer that will fire after AUTOSAVE_DELAY_MILLIS passes                       </span>
<span class="-2149096896161266035" onmouseenter="enter('-2149096896161266035');" onmouseout="out('-2149096896161266035');" style=""> 976          if (mAutoSaveHandler != null) {                                                                           </span>
<span class="-5465787548318672754" onmouseenter="enter('-5465787548318672754');" onmouseout="out('-5465787548318672754');" style=""> 977              mAutoSaveHandler.removeCallbacks(mAutoSaveRunnable);                                                  </span>
<span class="3237260668993885548" onmouseenter="enter('3237260668993885548');" onmouseout="out('3237260668993885548');" style=""> 978              mAutoSaveHandler.postDelayed(mAutoSaveRunnable, AUTOSAVE_DELAY_MILLIS);                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 979          }                                                                                                         </span>
<span  style=""> 980                                                                                                                    </span>
<span class="5409551732025834677" onmouseenter="enter('5409551732025834677');" onmouseout="out('5409551732025834677');" style=""> 981          // Remove search highlight spans when note content changes                                                </span>
<span class="5721815250190525804" onmouseenter="enter('5721815250190525804');" onmouseout="out('5721815250190525804');" style=""> 982          if (mMatchOffsets != null) {                                                                              </span>
<span class="-5254682256162211718" onmouseenter="enter('-5254682256162211718');" onmouseout="out('-5254682256162211718');" style=""> 983              mMatchOffsets = null;                                                                                 </span>
<span class="2930846742809702691" onmouseenter="enter('2930846742809702691');" onmouseout="out('2930846742809702691');" style=""> 984              mHighlighter.removeMatches();                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 985          }                                                                                                         </span>
<span  style=""> 986                                                                                                                    </span>
<span class="-5025193748599864334" onmouseenter="enter('-5025193748599864334');" onmouseout="out('-5025193748599864334');" style=""> 987          if (!DisplayUtils.isLargeScreenLandscape(requireContext())) {                                             </span>
<span class="7215698034791320296" onmouseenter="enter('7215698034791320296');" onmouseout="out('7215698034791320296');" style=""> 988              ((NoteEditorActivity) requireActivity()).setSearchMatchBarVisible(false);                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 989          }                                                                                                         </span>
<span  style=""> 990                                                                                                                    </span>
<span class="8786270533737299967" onmouseenter="enter('8786270533737299967');" onmouseout="out('8786270533737299967');" style=""> 991          // Temporarily remove the text watcher as we process checklists to prevent callback looping               </span>
<span class="2095720317794995897" onmouseenter="enter('2095720317794995897');" onmouseout="out('2095720317794995897');" style=""> 992          mContentEditText.removeTextChangedListener(this);                                                         </span>
<span class="-5644737892245114659" onmouseenter="enter('-5644737892245114659');" onmouseout="out('-5644737892245114659');" style=""> 993          mContentEditText.processChecklists();                                                                     </span>
<span class="8154880790715077967" onmouseenter="enter('8154880790715077967');" onmouseout="out('8154880790715077967');" style=""> 994          mContentEditText.addTextChangedListener(this);                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 995      }                                                                                                             </span>
<span  style=""> 996                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 997      /**                                                                                                           </span>
<span class="-6594088544842821458" onmouseenter="enter('-6594088544842821458');" onmouseout="out('-6594088544842821458');" style=""> 998       * Set the note title to be a larger size and bold style.                                                     </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 999       *                                                                                                            </span>
<span class="108828526699167208" onmouseenter="enter('108828526699167208');" onmouseout="out('108828526699167208');" style="">1000       * Remove all existing spans before applying spans or performance issues will occur.  Since both              </span>
<span class="-1228016533055730748" onmouseenter="enter('-1228016533055730748');" onmouseout="out('-1228016533055730748');" style="">1001       * {@link RelativeSizeSpan} and {@link StyleSpan} inherit from {@link MetricAffectingSpan}, all               </span>
<span class="7893653129030957545" onmouseenter="enter('7893653129030957545');" onmouseout="out('7893653129030957545');" style="">1002       * spans are removed when {@link MetricAffectingSpan} is removed.                                             </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1003       */                                                                                                           </span>
<span class="6849776144692122373" onmouseenter="enter('6849776144692122373');" onmouseout="out('6849776144692122373');" style="">1004      private void setTitleSpan(Editable editable) {                                                                </span>
<span class="-8681644249984288865" onmouseenter="enter('-8681644249984288865');" onmouseout="out('-8681644249984288865');" style="">1005          for (MetricAffectingSpan span : editable.getSpans(0, editable.length(), MetricAffectingSpan.class)) {     </span>
<span class="3876289346053092432" onmouseenter="enter('3876289346053092432');" onmouseout="out('3876289346053092432');" style="">1006              if (span instanceof RelativeSizeSpan || span instanceof StyleSpan) {                                  </span>
<span class="-4538099325482792099" onmouseenter="enter('-4538099325482792099');" onmouseout="out('-4538099325482792099');" style="">1007                  editable.removeSpan(span);                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1008              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1009          }                                                                                                         </span>
<span  style="">1010                                                                                                                    </span>
<span class="-901734861574280266" onmouseenter="enter('-901734861574280266');" onmouseout="out('-901734861574280266');" style="">1011          int newLinePosition = getNoteContentString().indexOf(&quot;\n&quot;);                                               </span>
<span  style="">1012                                                                                                                    </span>
<span class="-3049917029530340718" onmouseenter="enter('-3049917029530340718');" onmouseout="out('-3049917029530340718');" style="">1013          if (newLinePosition == 0) {                                                                               </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1014              return;                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1015          }                                                                                                         </span>
<span  style="">1016                                                                                                                    </span>
<span class="2729500347175780141" onmouseenter="enter('2729500347175780141');" onmouseout="out('2729500347175780141');" style="">1017          int titleEndPosition = (newLinePosition &gt; 0) ? newLinePosition : editable.length();                       </span>
<span class="2132700250735486844" onmouseenter="enter('2132700250735486844');" onmouseout="out('2132700250735486844');" style="">1018          editable.setSpan(new RelativeSizeSpan(1.3f), 0, titleEndPosition, Spanned.SPAN_INCLUSIVE_EXCLUSIVE);      </span>
<span class="2779153330581394975" onmouseenter="enter('2779153330581394975');" onmouseout="out('2779153330581394975');" style="">1019          editable.setSpan(new StyleSpan(Typeface.BOLD), 0, titleEndPosition, Spanned.SPAN_INCLUSIVE_EXCLUSIVE);    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1020      }                                                                                                             </span>
<span  style="">1021                                                                                                                    </span>
<span class="8395667075038215241" onmouseenter="enter('8395667075038215241');" onmouseout="out('8395667075038215241');" style="">1022      private void attemptAutoList(Editable editable) {                                                             </span>
<span class="1630313539519665774" onmouseenter="enter('1630313539519665774');" onmouseout="out('1630313539519665774');" style="">1023          int oldCursorPosition = mCurrentCursorPosition;                                                           </span>
<span class="2154628209294087333" onmouseenter="enter('2154628209294087333');" onmouseout="out('2154628209294087333');" style="">1024          mCurrentCursorPosition = mContentEditText.getSelectionStart();                                            </span>
<span class="-1456162723219098064" onmouseenter="enter('-1456162723219098064');" onmouseout="out('-1456162723219098064');" style="">1025          AutoBullet.apply(editable, oldCursorPosition, mCurrentCursorPosition);                                    </span>
<span class="2154628209294087333" onmouseenter="enter('2154628209294087333');" onmouseout="out('2154628209294087333');" style="">1026          mCurrentCursorPosition = mContentEditText.getSelectionStart();                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1027      }                                                                                                             </span>
<span  style="">1028                                                                                                                    </span>
<span class="-6933317077070028336" onmouseenter="enter('-6933317077070028336');" onmouseout="out('-6933317077070028336');" style="">1029      private void saveAndSyncNote() {                                                                              </span>
<span class="-6566957513776356959" onmouseenter="enter('-6566957513776356959');" onmouseout="out('-6566957513776356959');" style="">1030          if (mNote == null) {                                                                                      </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1031              return;                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1032          }                                                                                                         </span>
<span  style="">1033                                                                                                                    </span>
<span class="1712554612672119113" onmouseenter="enter('1712554612672119113');" onmouseout="out('1712554612672119113');" style="">1034          AppLog.add(                                                                                               </span>
<span class="5578246801297368785" onmouseenter="enter('5578246801297368785');" onmouseout="out('5578246801297368785');" style="">1035              Type.ACTION,                                                                                          </span>
<span class="5428018773251277804" onmouseenter="enter('5428018773251277804');" onmouseout="out('5428018773251277804');" style="">1036              &quot;Edited note (ID: &quot; + mNote.getSimperiumKey() +                                                       </span>
<span class="7932348859464220053" onmouseenter="enter('7932348859464220053');" onmouseout="out('7932348859464220053');" style="">1037                  &quot; / Title: &quot; + mNote.getTitle() +                                                                 </span>
<span class="8952698626932118067" onmouseenter="enter('8952698626932118067');" onmouseout="out('8952698626932118067');" style="">1038                  &quot; / Characters: &quot; + NoteUtils.getCharactersCount(mNote.getContent()) +                            </span>
<span class="638163407399296951" onmouseenter="enter('638163407399296951');" onmouseout="out('638163407399296951');" style="">1039                  &quot; / Words: &quot; + NoteUtils.getWordCount(mNote.getContent()) + &quot;)&quot;                                   </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">1040          );                                                                                                        </span>
<span class="16839101082915315" onmouseenter="enter('16839101082915315');" onmouseout="out('16839101082915315');" style="">1041          new SaveNoteTask(this).executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR);                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1042      }                                                                                                             </span>
<span  style="">1043                                                                                                                    </span>
<span class="-710883025591886987" onmouseenter="enter('-710883025591886987');" onmouseout="out('-710883025591886987');" style="">1044      public boolean isPlaceholderVisible() {                                                                       </span>
<span class="-4989874178895443572" onmouseenter="enter('-4989874178895443572');" onmouseout="out('-4989874178895443572');" style="">1045          if (mPlaceholderView != null) {                                                                           </span>
<span class="9146837192541101428" onmouseenter="enter('9146837192541101428');" onmouseout="out('9146837192541101428');" style="">1046              return mPlaceholderView.getVisibility() == View.VISIBLE;                                              </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1047          } else {                                                                                                  </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1048              return false;                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1049          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1050      }                                                                                                             </span>
<span  style="">1051                                                                                                                    </span>
<span class="-4564004023547017377" onmouseenter="enter('-4564004023547017377');" onmouseout="out('-4564004023547017377');" style="">1052      public void setPlaceholderVisible(boolean isVisible) {                                                        </span>
<span class="-6467031518050872536" onmouseenter="enter('-6467031518050872536');" onmouseout="out('-6467031518050872536');" style="">1053          if (isVisible) {                                                                                          </span>
<span class="1687907534970456445" onmouseenter="enter('1687907534970456445');" onmouseout="out('1687907534970456445');" style="">1054              mNote = null;                                                                                         </span>
<span class="-3407359796970873837" onmouseenter="enter('-3407359796970873837');" onmouseout="out('-3407359796970873837');" style="">1055              mContentEditText.setText(&quot;&quot;);                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1056          }                                                                                                         </span>
<span  style="">1057                                                                                                                    </span>
<span class="-4989874178895443572" onmouseenter="enter('-4989874178895443572');" onmouseout="out('-4989874178895443572');" style="">1058          if (mPlaceholderView != null) {                                                                           </span>
<span class="-1939399638656140532" onmouseenter="enter('-1939399638656140532');" onmouseout="out('-1939399638656140532');" style="">1059              mPlaceholderView.setVisibility(isVisible ? View.VISIBLE : View.GONE);                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1060          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1061      }                                                                                                             </span>
<span  style="">1062                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1063      @Override                                                                                                     </span>
<span class="-3315120631467309087" onmouseenter="enter('-3315120631467309087');" onmouseout="out('-3315120631467309087');" style="">1064      public void onFocusChange(View v, boolean hasFocus) {                                                         </span>
<span class="-6285712256166584728" onmouseenter="enter('-6285712256166584728');" onmouseout="out('-6285712256166584728');" style="">1065          if (!hasFocus) {                                                                                          </span>
<span class="6004881889903239201" onmouseenter="enter('6004881889903239201');" onmouseout="out('6004881889903239201');" style="">1066              String tags = getNoteTagsString().trim();                                                             </span>
<span  style="">1067                                                                                                                    </span>
<span class="-8405816820067798370" onmouseenter="enter('-8405816820067798370');" onmouseout="out('-8405816820067798370');" style="">1068              if (mTagInput.getText().toString().trim().length() &gt; 0                                                </span>
<span class="-3023921947470011218" onmouseenter="enter('-3023921947470011218');" onmouseout="out('-3023921947470011218');" style="">1069                  &amp;&amp; TagUtils.hashTagValid(mTagInput.getText().toString().trim())) {                                </span>
<span class="-8826289385438230332" onmouseenter="enter('-8826289385438230332');" onmouseout="out('-8826289385438230332');" style="">1070                  onTagAdded(mTagInput.getText().toString());                                                       </span>
<span class="-2106738445799932691" onmouseenter="enter('-2106738445799932691');" onmouseout="out('-2106738445799932691');" style="">1071              } else if (tags.length() &gt; 0) {                                                                       </span>
<span class="822236618440501069" onmouseenter="enter('822236618440501069');" onmouseout="out('822236618440501069');" style="">1072                  setChips(tags);                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1073              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1074          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1075      }                                                                                                             </span>
<span  style="">1076                                                                                                                    </span>
<span class="4758115017921537055" onmouseenter="enter('4758115017921537055');" onmouseout="out('4758115017921537055');" style="">1077      private Note getNote() {                                                                                      </span>
<span class="6687317620803594982" onmouseenter="enter('6687317620803594982');" onmouseout="out('6687317620803594982');" style="">1078          return mNote;                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1079      }                                                                                                             </span>
<span  style="">1080                                                                                                                    </span>
<span class="627621646474661739" onmouseenter="enter('627621646474661739');" onmouseout="out('627621646474661739');" style="">1081      public void setNote(String noteID) {                                                                          </span>
<span class="-6972394152055286124" onmouseenter="enter('-6972394152055286124');" onmouseout="out('-6972394152055286124');" style="">1082          setNote(noteID, null);                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1083      }                                                                                                             </span>
<span  style="">1084                                                                                                                    </span>
<span class="-260751237439499239" onmouseenter="enter('-260751237439499239');" onmouseout="out('-260751237439499239');" style="">1085      private String getNoteContentString() {                                                                       </span>
<span class="-8451380960236704581" onmouseenter="enter('-8451380960236704581');" onmouseout="out('-8451380960236704581');" style="">1086          if (mContentEditText == null || mContentEditText.getText() == null) {                                     </span>
<span class="-8289946804601166879" onmouseenter="enter('-8289946804601166879');" onmouseout="out('-8289946804601166879');" style="">1087              return &quot;&quot;;                                                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1088          } else {                                                                                                  </span>
<span class="9069870454824528783" onmouseenter="enter('9069870454824528783');" onmouseout="out('9069870454824528783');" style="">1089              return mContentEditText.getText().toString();                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1090          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1091      }                                                                                                             </span>
<span  style="">1092                                                                                                                    </span>
<span class="1791713131652036535" onmouseenter="enter('1791713131652036535');" onmouseout="out('1791713131652036535');" style="">1093      private String getNoteTagsString() {                                                                          </span>
<span class="-6446890674263139592" onmouseenter="enter('-6446890674263139592');" onmouseout="out('-6446890674263139592');" style="">1094          StringBuilder tags = new StringBuilder();                                                                 </span>
<span  style="">1095                                                                                                                    </span>
<span class="-4475001311202686832" onmouseenter="enter('-4475001311202686832');" onmouseout="out('-4475001311202686832');" style="">1096          for (int i= 0; i &lt; mTagChips.getChildCount(); i++) {                                                      </span>
<span class="5232521310381718252" onmouseenter="enter('5232521310381718252');" onmouseout="out('5232521310381718252');" style="">1097              tags.append(((Chip) mTagChips.getChildAt(i)).getText()).append(&quot; &quot;);                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1098          }                                                                                                         </span>
<span  style="">1099                                                                                                                    </span>
<span class="-8755942361109275249" onmouseenter="enter('-8755942361109275249');" onmouseout="out('-8755942361109275249');" style="">1100          return tags.toString();                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1101      }                                                                                                             </span>
<span  style="">1102                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1103      /**                                                                                                           </span>
<span class="-7590765322671442969" onmouseenter="enter('-7590765322671442969');" onmouseout="out('-7590765322671442969');" style="">1104       * Share bottom sheet callbacks                                                                               </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1105       */                                                                                                           </span>
<span  style="">1106                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1107      @Override                                                                                                     </span>
<span class="2968602784493438427" onmouseenter="enter('2968602784493438427');" onmouseout="out('2968602784493438427');" style="">1108      public void onSharePublishClicked() {                                                                         </span>
<span class="7985358866333072123" onmouseenter="enter('7985358866333072123');" onmouseout="out('7985358866333072123');" style="">1109          publishNote();                                                                                            </span>
<span class="4172821335322908069" onmouseenter="enter('4172821335322908069');" onmouseout="out('4172821335322908069');" style="">1110          if (mShareBottomSheet != null) {                                                                          </span>
<span class="-4836834074376612243" onmouseenter="enter('-4836834074376612243');" onmouseout="out('-4836834074376612243');" style="">1111              mShareBottomSheet.dismiss();                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1112          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1113      }                                                                                                             </span>
<span  style="">1114                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1115      @Override                                                                                                     </span>
<span class="2232780665187036053" onmouseenter="enter('2232780665187036053');" onmouseout="out('2232780665187036053');" style="">1116      public void onShareUnpublishClicked() {                                                                       </span>
<span class="4812123925634099655" onmouseenter="enter('4812123925634099655');" onmouseout="out('4812123925634099655');" style="">1117          unpublishNote();                                                                                          </span>
<span class="4172821335322908069" onmouseenter="enter('4172821335322908069');" onmouseout="out('4172821335322908069');" style="">1118          if (mShareBottomSheet != null) {                                                                          </span>
<span class="-4836834074376612243" onmouseenter="enter('-4836834074376612243');" onmouseout="out('-4836834074376612243');" style="">1119              mShareBottomSheet.dismiss();                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1120          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1121      }                                                                                                             </span>
<span  style="">1122                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1123      @Override                                                                                                     </span>
<span class="1895662807531612039" onmouseenter="enter('1895662807531612039');" onmouseout="out('1895662807531612039');" style="">1124      public void onWordPressPostClicked() {                                                                        </span>
<span class="4172821335322908069" onmouseenter="enter('4172821335322908069');" onmouseout="out('4172821335322908069');" style="">1125          if (mShareBottomSheet != null) {                                                                          </span>
<span class="-4836834074376612243" onmouseenter="enter('-4836834074376612243');" onmouseout="out('-4836834074376612243');" style="">1126              mShareBottomSheet.dismiss();                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1127          }                                                                                                         </span>
<span  style="">1128                                                                                                                    </span>
<span class="3314881699989820063" onmouseenter="enter('3314881699989820063');" onmouseout="out('3314881699989820063');" style="">1129          if (getFragmentManager() == null) {                                                                       </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1130              return;                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1131          }                                                                                                         </span>
<span  style="">1132                                                                                                                    </span>
<span class="5636539351844670959" onmouseenter="enter('5636539351844670959');" onmouseout="out('5636539351844670959');" style="">1133          FragmentTransaction ft = getFragmentManager().beginTransaction();                                         </span>
<span class="-500976049723048206" onmouseenter="enter('-500976049723048206');" onmouseout="out('-500976049723048206');" style="">1134          Fragment prev = getFragmentManager().findFragmentByTag(WordPressDialogFragment.DIALOG_TAG);               </span>
<span class="6915708381430486628" onmouseenter="enter('6915708381430486628');" onmouseout="out('6915708381430486628');" style="">1135          if (prev != null) {                                                                                       </span>
<span class="6191551415319260668" onmouseenter="enter('6191551415319260668');" onmouseout="out('6191551415319260668');" style="">1136              ft.remove(prev);                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1137          }                                                                                                         </span>
<span class="4313436897323820694" onmouseenter="enter('4313436897323820694');" onmouseout="out('4313436897323820694');" style="">1138          ft.addToBackStack(null);                                                                                  </span>
<span  style="">1139                                                                                                                    </span>
<span class="-5506082590725208104" onmouseenter="enter('-5506082590725208104');" onmouseout="out('-5506082590725208104');" style="">1140          // Create and show the dialog.                                                                            </span>
<span class="1756820858117205319" onmouseenter="enter('1756820858117205319');" onmouseout="out('1756820858117205319');" style="">1141          WordPressDialogFragment wpDialogFragment = new WordPressDialogFragment();                                 </span>
<span class="8550268343842317092" onmouseenter="enter('8550268343842317092');" onmouseout="out('8550268343842317092');" style="">1142          wpDialogFragment.setNote(mNote);                                                                          </span>
<span class="-7041960731203586914" onmouseenter="enter('-7041960731203586914');" onmouseout="out('-7041960731203586914');" style="">1143          wpDialogFragment.show(ft, WordPressDialogFragment.DIALOG_TAG);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1144      }                                                                                                             </span>
<span  style="">1145                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1146      @Override                                                                                                     </span>
<span class="8390280653962331927" onmouseenter="enter('8390280653962331927');" onmouseout="out('8390280653962331927');" style="">1147      public void onShareCollaborateClicked() {                                                                     </span>
<span class="8508848920358466816" onmouseenter="enter('8508848920358466816');" onmouseout="out('8508848920358466816');" style="">1148          Toast.makeText(getActivity(), R.string.collaborate_message, Toast.LENGTH_LONG).show();                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1149      }                                                                                                             </span>
<span  style="">1150                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1151      @Override                                                                                                     </span>
<span class="-3569494199320067069" onmouseenter="enter('-3569494199320067069');" onmouseout="out('-3569494199320067069');" style="">1152      public void onShareDismissed() {                                                                              </span>
<span  style="">1153                                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1154      }                                                                                                             </span>
<span  style="">1155                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1156      /**                                                                                                           </span>
<span class="358915473298384679" onmouseenter="enter('358915473298384679');" onmouseout="out('358915473298384679');" style="">1157       * History bottom sheet listeners                                                                             </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1158       */                                                                                                           </span>
<span  style="">1159                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1160      @Override                                                                                                     </span>
<span class="486589109199450506" onmouseenter="enter('486589109199450506');" onmouseout="out('486589109199450506');" style="">1161      public void onHistoryCancelClicked() {                                                                        </span>
<span class="4148799213240179760" onmouseenter="enter('4148799213240179760');" onmouseout="out('4148799213240179760');" style="">1162          mContentEditText.setText(mNote.getContent());                                                             </span>
<span class="-7542139914053196629" onmouseenter="enter('-7542139914053196629');" onmouseout="out('-7542139914053196629');" style="">1163          if (mHistoryBottomSheet != null) {                                                                        </span>
<span class="-2599981510781765889" onmouseenter="enter('-2599981510781765889');" onmouseout="out('-2599981510781765889');" style="">1164              mHistoryBottomSheet.dismiss();                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1165          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1166      }                                                                                                             </span>
<span  style="">1167                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1168      @Override                                                                                                     </span>
<span class="1746452780349475726" onmouseenter="enter('1746452780349475726');" onmouseout="out('1746452780349475726');" style="">1169      public void onHistoryRestoreClicked() {                                                                       </span>
<span class="-7542139914053196629" onmouseenter="enter('-7542139914053196629');" onmouseout="out('-7542139914053196629');" style="">1170          if (mHistoryBottomSheet != null) {                                                                        </span>
<span class="-2599981510781765889" onmouseenter="enter('-2599981510781765889');" onmouseout="out('-2599981510781765889');" style="">1171              mHistoryBottomSheet.dismiss();                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1172          }                                                                                                         </span>
<span class="-2186856349666885424" onmouseenter="enter('-2186856349666885424');" onmouseout="out('-2186856349666885424');" style="">1173          saveAndSyncNote();                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1174      }                                                                                                             </span>
<span  style="">1175                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1176      @Override                                                                                                     </span>
<span class="-1766878417892030172" onmouseenter="enter('-1766878417892030172');" onmouseout="out('-1766878417892030172');" style="">1177      public void onHistoryDismissed() {                                                                            </span>
<span class="7350001942179054285" onmouseenter="enter('7350001942179054285');" onmouseout="out('7350001942179054285');" style="">1178          if (!mHistoryBottomSheet.didTapOnButton()) {                                                              </span>
<span class="4148799213240179760" onmouseenter="enter('4148799213240179760');" onmouseout="out('4148799213240179760');" style="">1179              mContentEditText.setText(mNote.getContent());                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1180          }                                                                                                         </span>
<span  style="">1181                                                                                                                    </span>
<span class="16247739636052398" onmouseenter="enter('16247739636052398');" onmouseout="out('16247739636052398');" style="">1182          if (mHistoryTimeoutHandler != null) {                                                                     </span>
<span class="7316258928910882956" onmouseenter="enter('7316258928910882956');" onmouseout="out('7316258928910882956');" style="">1183              mHistoryTimeoutHandler.removeCallbacks(mHistoryTimeoutRunnable);                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1184          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1185      }                                                                                                             </span>
<span  style="">1186                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1187      @Override                                                                                                     </span>
<span class="6142431680500084708" onmouseenter="enter('6142431680500084708');" onmouseout="out('6142431680500084708');" style="">1188      public void onHistoryUpdateNote(String content) {                                                             </span>
<span class="5474545381550473491" onmouseenter="enter('5474545381550473491');" onmouseout="out('5474545381550473491');" style="">1189          mContentEditText.setText(content);                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1190      }                                                                                                             </span>
<span  style="">1191                                                                                                                    </span>
<span class="-2294831155573525866" onmouseenter="enter('-2294831155573525866');" onmouseout="out('-2294831155573525866');" style="">1192      private void saveNote() {                                                                                     </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1193          try {                                                                                                     </span>
<span class="1165974910453313736" onmouseenter="enter('1165974910453313736');" onmouseout="out('1165974910453313736');" style="">1194              if (mNote == null || mNotesBucket == null || mContentEditText == null || mIsLoadingNote ||            </span>
<span class="-8027031690448598107" onmouseenter="enter('-8027031690448598107');" onmouseout="out('-8027031690448598107');" style=""><abbr title="1195                  (mHistoryBottomSheet != null &amp;&amp; mHistoryBottomSheet.getDialog() != null &amp;&amp; mHistoryBottomSheet.getDialog().isShowing())) {">1195                  (mHistoryBottomSheet != null &amp;&amp; mHistoryBottomSheet.getDialog() != null &amp;&amp; mHistoryBottomSheet.get🔵</abbr></span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1196                  return;                                                                                           </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1197              } else {                                                                                              </span>
<span class="-1125588719504868669" onmouseenter="enter('-1125588719504868669');" onmouseout="out('-1125588719504868669');" style="">1198                  mNote = mNotesBucket.get(mNote.getSimperiumKey());                                                </span>
<span class="8897386780031316770" onmouseenter="enter('8897386780031316770');" onmouseout="out('8897386780031316770');" style="">1199                  mIsPreviewEnabled = mNote.isPreviewEnabled();                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1200              }                                                                                                     </span>
<span  style="">1201                                                                                                                    </span>
<span class="6475969200315240778" onmouseenter="enter('6475969200315240778');" onmouseout="out('6475969200315240778');" style="">1202              String content = mContentEditText.getPlainTextContent();                                              </span>
<span class="-8502490389039341280" onmouseenter="enter('-8502490389039341280');" onmouseout="out('-8502490389039341280');" style="">1203              String tagString = getNoteTagsString();                                                               </span>
<span  style="">1204                                                                                                                    </span>
<span class="3350877423550460602" onmouseenter="enter('3350877423550460602');" onmouseout="out('3350877423550460602');" style=""><abbr title="1205              if (mNote.hasChanges(content, tagString.trim(), mNote.isPinned(), mIsMarkdownEnabled, mIsPreviewEnabled)) {">1205              if (mNote.hasChanges(content, tagString.trim(), mNote.isPinned(), mIsMarkdownEnabled, mIsPreviewEnable🔵</abbr></span>
<span class="843504871988910810" onmouseenter="enter('843504871988910810');" onmouseout="out('843504871988910810');" style="">1206                  mNote.setContent(content);                                                                        </span>
<span class="1553130968631643861" onmouseenter="enter('1553130968631643861');" onmouseout="out('1553130968631643861');" style="">1207                  mNote.setTagString(tagString);                                                                    </span>
<span class="-3343075472306200704" onmouseenter="enter('-3343075472306200704');" onmouseout="out('-3343075472306200704');" style="">1208                  mNote.setModificationDate(Calendar.getInstance());                                                </span>
<span class="-2172998267651300967" onmouseenter="enter('-2172998267651300967');" onmouseout="out('-2172998267651300967');" style="">1209                  mNote.setMarkdownEnabled(mIsMarkdownEnabled);                                                     </span>
<span class="822592535093481459" onmouseenter="enter('822592535093481459');" onmouseout="out('822592535093481459');" style="">1210                  mNote.setPreviewEnabled(mIsPreviewEnabled);                                                       </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style="">1211                  mNote.save();                                                                                     </span>
<span  style="">1212                                                                                                                    </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style="">1213                  AnalyticsTracker.track(                                                                           </span>
<span class="5989088647015258106" onmouseenter="enter('5989088647015258106');" onmouseout="out('5989088647015258106');" style="">1214                      EDITOR_NOTE_EDITED,                                                                           </span>
<span class="-2430475172570880083" onmouseenter="enter('-2430475172570880083');" onmouseout="out('-2430475172570880083');" style="">1215                      CATEGORY_NOTE,                                                                                </span>
<span class="7262276752106887505" onmouseenter="enter('7262276752106887505');" onmouseout="out('7262276752106887505');" style="">1216                      &quot;editor_save&quot;                                                                                 </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">1217                  );                                                                                                </span>
<span  style="">1218                                                                                                                    </span>
<span class="1712554612672119113" onmouseenter="enter('1712554612672119113');" onmouseout="out('1712554612672119113');" style="">1219                  AppLog.add(                                                                                       </span>
<span class="5387827170384214934" onmouseenter="enter('5387827170384214934');" onmouseout="out('5387827170384214934');" style="">1220                      Type.SYNC,                                                                                    </span>
<span class="6067618927567422040" onmouseenter="enter('6067618927567422040');" onmouseout="out('6067618927567422040');" style="">1221                      &quot;Saved note locally in NoteEditorFragment (ID: &quot; + mNote.getSimperiumKey() +                  </span>
<span class="7932348859464220053" onmouseenter="enter('7932348859464220053');" onmouseout="out('7932348859464220053');" style="">1222                          &quot; / Title: &quot; + mNote.getTitle() +                                                         </span>
<span class="431319751787505650" onmouseenter="enter('431319751787505650');" onmouseout="out('431319751787505650');" style="">1223                          &quot; / Characters: &quot; + NoteUtils.getCharactersCount(content) +                               </span>
<span class="-6931859245270948040" onmouseenter="enter('-6931859245270948040');" onmouseout="out('-6931859245270948040');" style="">1224                          &quot; / Words: &quot; + NoteUtils.getWordCount(content) + &quot;)&quot;                                      </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">1225                  );                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1226              }                                                                                                     </span>
<span class="-3643940737031631548" onmouseenter="enter('-3643940737031631548');" onmouseout="out('-3643940737031631548');" style="">1227          } catch (BucketObjectMissingException exception) {                                                        </span>
<span class="-5036816163125879973" onmouseenter="enter('-5036816163125879973');" onmouseout="out('-5036816163125879973');" style="">1228              exception.printStackTrace();                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1229          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1230      }                                                                                                             </span>
<span  style="">1231                                                                                                                    </span>
<span class="-6769383367293074987" onmouseenter="enter('-6769383367293074987');" onmouseout="out('-6769383367293074987');" style="">1232      // Checks if cursor is at a URL when the selection changes                                                    </span>
<span class="499820509706145242" onmouseenter="enter('499820509706145242');" onmouseout="out('499820509706145242');" style="">1233      // If it is a URL, show the contextual action bar                                                             </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1234      @Override                                                                                                     </span>
<span class="-6619706727651867065" onmouseenter="enter('-6619706727651867065');" onmouseout="out('-6619706727651867065');" style="">1235      public void onSelectionChanged(int selStart, int selEnd) {                                                    </span>
<span class="7239443724625299771" onmouseenter="enter('7239443724625299771');" onmouseout="out('7239443724625299771');" style="">1236          mCurrentCursorPosition = selEnd;                                                                          </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1237 +                                                                                                                  </span>
<span class="-5773931921061181239" onmouseenter="enter('-5773931921061181239');" onmouseout="out('-5773931921061181239');" style="">1238          if (selStart == selEnd) {                                                                                 </span>
<span class="-1073801886026856185" onmouseenter="enter('-1073801886026856185');" onmouseout="out('-1073801886026856185');" style="">1239              Editable noteContent = mContentEditText.getText();                                                    </span>
<span class="6562974929235397620" onmouseenter="enter('6562974929235397620');" onmouseout="out('6562974929235397620');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1240 -            if (noteContent == null)                                                                              </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1241 +                                                                                                                  </span>
<span class="-3728163105261704014" onmouseenter="enter('-3728163105261704014');" onmouseout="out('-3728163105261704014');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1242 +            if (noteContent == null) {                                                                            </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1243                  return;                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1244 +            }                                                                                                     </span>
<span  style="">1245                                                                                                                    </span>
<span class="1258634593958745929" onmouseenter="enter('1258634593958745929');" onmouseout="out('1258634593958745929');" style="">1246              URLSpan[] urlSpans = noteContent.getSpans(selStart, selStart, URLSpan.class);                         </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1247 +                                                                                                                  </span>
<span class="8265917182779455796" onmouseenter="enter('8265917182779455796');" onmouseout="out('8265917182779455796');" style="">1248              if (urlSpans.length &gt; 0) {                                                                            </span>
<span class="379938049561077801" onmouseenter="enter('379938049561077801');" onmouseout="out('379938049561077801');" style="">1249                  URLSpan urlSpan = urlSpans[0];                                                                    </span>
<span class="7382553573082356877" onmouseenter="enter('7382553573082356877');" onmouseout="out('7382553573082356877');" style="">1250                  mLinkUrl = urlSpan.getURL();                                                                      </span>
<span class="-2685141031372274993" onmouseenter="enter('-2685141031372274993');" onmouseout="out('-2685141031372274993');" style=""><abbr title="1251                  mLinkText = noteContent.subSequence(noteContent.getSpanStart(urlSpan), noteContent.getSpanEnd(urlSpan)).toString();">1251                  mLinkText = noteContent.subSequence(noteContent.getSpanStart(urlSpan), noteContent.getSpanEnd(urlS🔵</abbr></span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1252 +                                                                                                                  </span>
<span class="-1291529600191394909" onmouseenter="enter('-1291529600191394909');" onmouseout="out('-1291529600191394909');" style="">1253                  if (mActionMode != null) {                                                                        </span>
<span class="8256553390773794578" onmouseenter="enter('8256553390773794578');" onmouseout="out('8256553390773794578');" style="">1254                      mActionMode.setSubtitle(mLinkText);                                                           </span>
<span class="-5782179795728005521" onmouseenter="enter('-5782179795728005521');" onmouseout="out('-5782179795728005521');" style="">1255                      updateMenuItems();                                                                            </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1256                      return;                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1257                  }                                                                                                 </span>
<span  style="">1258                                                                                                                    </span>
<span class="-4243988111679111503" onmouseenter="enter('-4243988111679111503');" onmouseout="out('-4243988111679111503');" style="">1259                  // Show the Contextual Action Bar                                                                 </span>
<span class="4809573797151136036" onmouseenter="enter('4809573797151136036');" onmouseout="out('4809573797151136036');" style="">1260                  if (getActivity() != null) {                                                                      </span>
<span class="-21436323499410640" onmouseenter="enter('-21436323499410640');" onmouseout="out('-21436323499410640');" style="">1261                      mActionMode = ((AppCompatActivity) getActivity()).startSupportActionMode(mActionModeCallback);</span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1262 +                                                                                                                  </span>
<span class="-1291529600191394909" onmouseenter="enter('-1291529600191394909');" onmouseout="out('-1291529600191394909');" style="">1263                      if (mActionMode != null) {                                                                    </span>
<span class="8256553390773794578" onmouseenter="enter('8256553390773794578');" onmouseout="out('8256553390773794578');" style="">1264                          mActionMode.setSubtitle(mLinkText);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1265                      }                                                                                             </span>
<span  style="">1266                                                                                                                    </span>
<span class="-5782179795728005521" onmouseenter="enter('-5782179795728005521');" onmouseout="out('-5782179795728005521');" style="">1267                      updateMenuItems();                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1268                  }                                                                                                 </span>
<span class="7515827566305000834" onmouseenter="enter('7515827566305000834');" onmouseout="out('7515827566305000834');" style="">1269              } else if (mActionMode != null) {                                                                     </span>
<span class="7165201847947665807" onmouseenter="enter('7165201847947665807');" onmouseout="out('7165201847947665807');" style="">1270                  mActionMode.finish();                                                                             </span>
<span class="291405596407736607" onmouseenter="enter('291405596407736607');" onmouseout="out('291405596407736607');" style="">1271                  mActionMode = null;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1272              }                                                                                                     </span>
<span class="7515827566305000834" onmouseenter="enter('7515827566305000834');" onmouseout="out('7515827566305000834');" style="">1273          } else if (mActionMode != null) {                                                                         </span>
<span class="7165201847947665807" onmouseenter="enter('7165201847947665807');" onmouseout="out('7165201847947665807');" style="">1274              mActionMode.finish();                                                                                 </span>
<span class="291405596407736607" onmouseenter="enter('291405596407736607');" onmouseout="out('291405596407736607');" style="">1275              mActionMode = null;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1276          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1277      }                                                                                                             </span>
<span  style="">1278                                                                                                                    </span>
<span class="2270277682351720198" onmouseenter="enter('2270277682351720198');" onmouseout="out('2270277682351720198');" style="">1279      private void updateMenuItems() {                                                                              </span>
<span class="-515446486584282912" onmouseenter="enter('-515446486584282912');" onmouseout="out('-515446486584282912');" style="">1280          mCopyMenuItem.setIcon(mCopyIcon);                                                                         </span>
<span class="773177223161240604" onmouseenter="enter('773177223161240604');" onmouseout="out('773177223161240604');" style="">1281          mShareMenuItem.setIcon(mShareIcon);                                                                       </span>
<span  style="">1282                                                                                                                    </span>
<span class="-4542884014549729251" onmouseenter="enter('-4542884014549729251');" onmouseout="out('-4542884014549729251');" style="">1283          if (mViewLinkMenuItem != null &amp;&amp; mLinkUrl != null) {                                                      </span>
<span class="7070835845876331574" onmouseenter="enter('7070835845876331574');" onmouseout="out('7070835845876331574');" style="">1284              if (mLinkUrl.startsWith(&quot;tel:&quot;)) {                                                                    </span>
<span class="-3393709522714367611" onmouseenter="enter('-3393709522714367611');" onmouseout="out('-3393709522714367611');" style="">1285                  mViewLinkMenuItem.setIcon(mCallIcon);                                                             </span>
<span class="-1045706461125369539" onmouseenter="enter('-1045706461125369539');" onmouseout="out('-1045706461125369539');" style="">1286                  mViewLinkMenuItem.setTitle(getString(R.string.call));                                             </span>
<span class="-4087102511435152339" onmouseenter="enter('-4087102511435152339');" onmouseout="out('-4087102511435152339');" style="">1287              } else if (mLinkUrl.startsWith(&quot;mailto:&quot;)) {                                                          </span>
<span class="3689189789047011289" onmouseenter="enter('3689189789047011289');" onmouseout="out('3689189789047011289');" style="">1288                  mViewLinkMenuItem.setIcon(mEmailIcon);                                                            </span>
<span class="7417350135164215691" onmouseenter="enter('7417350135164215691');" onmouseout="out('7417350135164215691');" style="">1289                  mViewLinkMenuItem.setTitle(getString(R.string.email));                                            </span>
<span class="-1372170246346381865" onmouseenter="enter('-1372170246346381865');" onmouseout="out('-1372170246346381865');" style="">1290              } else if (mLinkUrl.startsWith(&quot;geo:&quot;)) {                                                             </span>
<span class="-4826865256995968603" onmouseenter="enter('-4826865256995968603');" onmouseout="out('-4826865256995968603');" style="">1291                  mViewLinkMenuItem.setIcon(mMapIcon);                                                              </span>
<span class="5018205442899714685" onmouseenter="enter('5018205442899714685');" onmouseout="out('5018205442899714685');" style="">1292                  mViewLinkMenuItem.setTitle(getString(R.string.view_map));                                         </span>
<span class="217084746454652922" onmouseenter="enter('217084746454652922');" onmouseout="out('217084746454652922');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1293 +            } else if (mLinkUrl.startsWith(SIMPLENOTE_LINK_PREFIX)) {                                             </span>
<span class="238390611676684376" onmouseenter="enter('238390611676684376');" onmouseout="out('238390611676684376');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1294 +                mViewLinkMenuItem.setIcon(mLinkIcon);                                                             </span>
<span class="-8064422576667643895" onmouseenter="enter('-8064422576667643895');" onmouseout="out('-8064422576667643895');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1295 +                mViewLinkMenuItem.setTitle(getString(R.string.open_note));                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1296              } else {                                                                                              </span>
<span class="7513617525800990773" onmouseenter="enter('7513617525800990773');" onmouseout="out('7513617525800990773');" style="">1297                  mViewLinkMenuItem.setIcon(mBrowserIcon);                                                          </span>
<span class="4171282647008223100" onmouseenter="enter('4171282647008223100');" onmouseout="out('4171282647008223100');" style="">1298                  mViewLinkMenuItem.setTitle(getString(R.string.view_in_browser));                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1299              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1300          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1301      }                                                                                                             </span>
<span  style="">1302                                                                                                                    </span>
<span class="91579398727100136" onmouseenter="enter('91579398727100136');" onmouseout="out('91579398727100136');" style="">1303      private void setPublishedNote(boolean isPublished) {                                                          </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style="">1304          if (mNote != null) {                                                                                      </span>
<span class="316653489117166649" onmouseenter="enter('316653489117166649');" onmouseout="out('316653489117166649');" style="">1305              mNote.setPublished(isPublished);                                                                      </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style="">1306              mNote.save();                                                                                         </span>
<span  style="">1307                                                                                                                    </span>
<span class="3198515589608942377" onmouseenter="enter('3198515589608942377');" onmouseout="out('3198515589608942377');" style="">1308              // reset publish status in 20 seconds if we don&#x27;t hear back from Simperium                            </span>
<span class="-8751687465189974985" onmouseenter="enter('-8751687465189974985');" onmouseout="out('-8751687465189974985');" style="">1309              mPublishTimeoutHandler.postDelayed(mPublishTimeoutRunnable, PUBLISH_TIMEOUT);                         </span>
<span  style="">1310                                                                                                                    </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style="">1311              AnalyticsTracker.track(                                                                               </span>
<span class="1199660928845890452" onmouseenter="enter('1199660928845890452');" onmouseout="out('1199660928845890452');" style="">1312                  isPublished ? EDITOR_NOTE_PUBLISHED : EDITOR_NOTE_UNPUBLISHED,                                    </span>
<span class="-2430475172570880083" onmouseenter="enter('-2430475172570880083');" onmouseout="out('-2430475172570880083');" style="">1313                  CATEGORY_NOTE,                                                                                    </span>
<span class="-4469222051298874183" onmouseenter="enter('-4469222051298874183');" onmouseout="out('-4469222051298874183');" style="">1314                  &quot;publish_note_button&quot;                                                                             </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">1315              );                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1316          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1317      }                                                                                                             </span>
<span  style="">1318                                                                                                                    </span>
<span class="-8415113329489780394" onmouseenter="enter('-8415113329489780394');" onmouseout="out('-8415113329489780394');" style="">1319      private void updatePublishedState(boolean isSuccess) {                                                        </span>
<span class="7049673307523359848" onmouseenter="enter('7049673307523359848');" onmouseout="out('7049673307523359848');" style="">1320          if (mPublishingSnackbar == null) {                                                                        </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1321              return;                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1322          }                                                                                                         </span>
<span  style="">1323                                                                                                                    </span>
<span class="-7291151504336992329" onmouseenter="enter('-7291151504336992329');" onmouseout="out('-7291151504336992329');" style="">1324          mPublishingSnackbar.dismiss();                                                                            </span>
<span class="-2275300557144928477" onmouseenter="enter('-2275300557144928477');" onmouseout="out('-2275300557144928477');" style="">1325          mPublishingSnackbar = null;                                                                               </span>
<span  style="">1326                                                                                                                    </span>
<span class="3311052756729554547" onmouseenter="enter('3311052756729554547');" onmouseout="out('3311052756729554547');" style="">1327          if (isSuccess &amp;&amp; isAdded()) {                                                                             </span>
<span class="-1365615346790030662" onmouseenter="enter('-1365615346790030662');" onmouseout="out('-1365615346790030662');" style="">1328              if (mNote.isPublished()) {                                                                            </span>
<span class="5497411134593542747" onmouseenter="enter('5497411134593542747');" onmouseout="out('5497411134593542747');" style="">1329                  @StringRes int text;                                                                              </span>
<span  style="">1330                                                                                                                    </span>
<span class="8518441705934796822" onmouseenter="enter('8518441705934796822');" onmouseout="out('8518441705934796822');" style="">1331                  if (BrowserUtils.copyToClipboard(requireContext(), mNote.getPublishedUrl())) {                    </span>
<span class="8974304534544855275" onmouseenter="enter('8974304534544855275');" onmouseout="out('8974304534544855275');" style="">1332                      text = R.string.publish_successful_link;                                                      </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1333                  } else {                                                                                          </span>
<span class="-3232510055763324097" onmouseenter="enter('-3232510055763324097');" onmouseout="out('-3232510055763324097');" style="">1334                      text = R.string.publish_successful;                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1335                  }                                                                                                 </span>
<span  style="">1336                                                                                                                    </span>
<span class="7461063035263331376" onmouseenter="enter('7461063035263331376');" onmouseout="out('7461063035263331376');" style="">1337                  if (mHideActionOnSuccess) {                                                                       </span>
<span class="6757689242728251287" onmouseenter="enter('6757689242728251287');" onmouseout="out('6757689242728251287');" style="">1338                      Snackbar.make(mRootView, text, Snackbar.LENGTH_LONG).show();                                  </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1339                  } else {                                                                                          </span>
<span class="6243176840022533873" onmouseenter="enter('6243176840022533873');" onmouseout="out('6243176840022533873');" style="">1340                      Snackbar.make(mRootView, text, Snackbar.LENGTH_LONG)                                          </span>
<span class="1204503404672542585" onmouseenter="enter('1204503404672542585');" onmouseout="out('1204503404672542585');" style="">1341                          .setAction(                                                                               </span>
<span class="3956744015789713296" onmouseenter="enter('3956744015789713296');" onmouseout="out('3956744015789713296');" style="">1342                              R.string.undo,                                                                        </span>
<span class="6694611070408135822" onmouseenter="enter('6694611070408135822');" onmouseout="out('6694611070408135822');" style="">1343                              new View.OnClickListener() {                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1344                                  @Override                                                                         </span>
<span class="-6587489291029443051" onmouseenter="enter('-6587489291029443051');" onmouseout="out('-6587489291029443051');" style="">1345                                  public void onClick(View v) {                                                     </span>
<span class="-4312757058216662092" onmouseenter="enter('-4312757058216662092');" onmouseout="out('-4312757058216662092');" style="">1346                                      mHideActionOnSuccess = true;                                                  </span>
<span class="4812123925634099655" onmouseenter="enter('4812123925634099655');" onmouseout="out('4812123925634099655');" style="">1347                                      unpublishNote();                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1348                                  }                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1349                              }                                                                                     </span>
<span class="-2015476096144723150" onmouseenter="enter('-2015476096144723150');" onmouseout="out('-2015476096144723150');" style="">1350                          )                                                                                         </span>
<span class="-4298987925833899609" onmouseenter="enter('-4298987925833899609');" onmouseout="out('-4298987925833899609');" style="">1351                          .show();                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1352                  }                                                                                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1353              } else {                                                                                              </span>
<span class="7461063035263331376" onmouseenter="enter('7461063035263331376');" onmouseout="out('7461063035263331376');" style="">1354                  if (mHideActionOnSuccess) {                                                                       </span>
<span class="525266416384737723" onmouseenter="enter('525266416384737723');" onmouseout="out('525266416384737723');" style="">1355                      Snackbar.make(mRootView, R.string.unpublish_successful, Snackbar.LENGTH_LONG)                 </span>
<span class="-4298987925833899609" onmouseenter="enter('-4298987925833899609');" onmouseout="out('-4298987925833899609');" style="">1356                              .show();                                                                              </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1357                  } else {                                                                                          </span>
<span class="525266416384737723" onmouseenter="enter('525266416384737723');" onmouseout="out('525266416384737723');" style="">1358                      Snackbar.make(mRootView, R.string.unpublish_successful, Snackbar.LENGTH_LONG)                 </span>
<span class="1204503404672542585" onmouseenter="enter('1204503404672542585');" onmouseout="out('1204503404672542585');" style="">1359                              .setAction(                                                                           </span>
<span class="3956744015789713296" onmouseenter="enter('3956744015789713296');" onmouseout="out('3956744015789713296');" style="">1360                                  R.string.undo,                                                                    </span>
<span class="6694611070408135822" onmouseenter="enter('6694611070408135822');" onmouseout="out('6694611070408135822');" style="">1361                                  new View.OnClickListener() {                                                      </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1362                                      @Override                                                                     </span>
<span class="-6587489291029443051" onmouseenter="enter('-6587489291029443051');" onmouseout="out('-6587489291029443051');" style="">1363                                      public void onClick(View v) {                                                 </span>
<span class="-4312757058216662092" onmouseenter="enter('-4312757058216662092');" onmouseout="out('-4312757058216662092');" style="">1364                                          mHideActionOnSuccess = true;                                              </span>
<span class="7985358866333072123" onmouseenter="enter('7985358866333072123');" onmouseout="out('7985358866333072123');" style="">1365                                          publishNote();                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1366                                      }                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1367                                  }                                                                                 </span>
<span class="-2015476096144723150" onmouseenter="enter('-2015476096144723150');" onmouseout="out('-2015476096144723150');" style="">1368                              )                                                                                     </span>
<span class="-4298987925833899609" onmouseenter="enter('-4298987925833899609');" onmouseout="out('-4298987925833899609');" style="">1369                              .show();                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1370                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1371              }                                                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1372          } else {                                                                                                  </span>
<span class="-1365615346790030662" onmouseenter="enter('-1365615346790030662');" onmouseout="out('-1365615346790030662');" style="">1373              if (mNote.isPublished()) {                                                                            </span>
<span class="-4464833730716871257" onmouseenter="enter('-4464833730716871257');" onmouseout="out('-4464833730716871257');" style="">1374                  Snackbar.make(mRootView, R.string.unpublish_error, Snackbar.LENGTH_LONG)                          </span>
<span class="1204503404672542585" onmouseenter="enter('1204503404672542585');" onmouseout="out('1204503404672542585');" style="">1375                          .setAction(                                                                               </span>
<span class="4947887522108728525" onmouseenter="enter('4947887522108728525');" onmouseout="out('4947887522108728525');" style="">1376                              R.string.retry,                                                                       </span>
<span class="6694611070408135822" onmouseenter="enter('6694611070408135822');" onmouseout="out('6694611070408135822');" style="">1377                              new View.OnClickListener() {                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1378                                  @Override                                                                         </span>
<span class="-6587489291029443051" onmouseenter="enter('-6587489291029443051');" onmouseout="out('-6587489291029443051');" style="">1379                                  public void onClick(View v) {                                                     </span>
<span class="-4312757058216662092" onmouseenter="enter('-4312757058216662092');" onmouseout="out('-4312757058216662092');" style="">1380                                      mHideActionOnSuccess = true;                                                  </span>
<span class="4812123925634099655" onmouseenter="enter('4812123925634099655');" onmouseout="out('4812123925634099655');" style="">1381                                      unpublishNote();                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1382                                  }                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1383                              }                                                                                     </span>
<span class="1929519410657596695" onmouseenter="enter('1929519410657596695');" onmouseout="out('1929519410657596695');" style="">1384                          ).show();                                                                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1385              } else {                                                                                              </span>
<span class="-2467718639414539789" onmouseenter="enter('-2467718639414539789');" onmouseout="out('-2467718639414539789');" style="">1386                  Snackbar.make(mRootView, R.string.publish_error, Snackbar.LENGTH_LONG)                            </span>
<span class="1204503404672542585" onmouseenter="enter('1204503404672542585');" onmouseout="out('1204503404672542585');" style="">1387                          .setAction(                                                                               </span>
<span class="4947887522108728525" onmouseenter="enter('4947887522108728525');" onmouseout="out('4947887522108728525');" style="">1388                              R.string.retry,                                                                       </span>
<span class="6694611070408135822" onmouseenter="enter('6694611070408135822');" onmouseout="out('6694611070408135822');" style="">1389                              new View.OnClickListener() {                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1390                                  @Override                                                                         </span>
<span class="-6587489291029443051" onmouseenter="enter('-6587489291029443051');" onmouseout="out('-6587489291029443051');" style="">1391                                  public void onClick(View v) {                                                     </span>
<span class="-4312757058216662092" onmouseenter="enter('-4312757058216662092');" onmouseout="out('-4312757058216662092');" style="">1392                                      mHideActionOnSuccess = true;                                                  </span>
<span class="7985358866333072123" onmouseenter="enter('7985358866333072123');" onmouseout="out('7985358866333072123');" style="">1393                                      publishNote();                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1394                                  }                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1395                              }                                                                                     </span>
<span class="1929519410657596695" onmouseenter="enter('1929519410657596695');" onmouseout="out('1929519410657596695');" style="">1396                          ).show();                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1397              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1398          }                                                                                                         </span>
<span  style="">1399                                                                                                                    </span>
<span class="-6543205336186683580" onmouseenter="enter('-6543205336186683580');" onmouseout="out('-6543205336186683580');" style="">1400          mHideActionOnSuccess = false;                                                                             </span>
<span class="-8532471920650411447" onmouseenter="enter('-8532471920650411447');" onmouseout="out('-8532471920650411447');" style="">1401          requireActivity().invalidateOptionsMenu();                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1402      }                                                                                                             </span>
<span  style="">1403                                                                                                                    </span>
<span class="6900416574659568584" onmouseenter="enter('6900416574659568584');" onmouseout="out('6900416574659568584');" style="">1404      private void publishNote() {                                                                                  </span>
<span class="939688580551732431" onmouseenter="enter('939688580551732431');" onmouseout="out('939688580551732431');" style="">1405          if (!NetworkUtils.isNetworkAvailable(requireContext())) {                                                 </span>
<span class="8924960461604916754" onmouseenter="enter('8924960461604916754');" onmouseout="out('8924960461604916754');" style="">1406              Toast.makeText(requireContext(), R.string.error_network_required, Toast.LENGTH_LONG).show();          </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1407              return;                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1408          }                                                                                                         </span>
<span  style="">1409                                                                                                                    </span>
<span class="-7481427962806884462" onmouseenter="enter('-7481427962806884462');" onmouseout="out('-7481427962806884462');" style="">1410          if (isAdded()) {                                                                                          </span>
<span class="402944241808212646" onmouseenter="enter('402944241808212646');" onmouseout="out('402944241808212646');" style="">1411              mPublishingSnackbar = Snackbar.make(mRootView, R.string.publishing, Snackbar.LENGTH_INDEFINITE);      </span>
<span class="-8074649539774450656" onmouseenter="enter('-8074649539774450656');" onmouseout="out('-8074649539774450656');" style="">1412              mPublishingSnackbar.show();                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1413          }                                                                                                         </span>
<span  style="">1414                                                                                                                    </span>
<span class="5480526116728317891" onmouseenter="enter('5480526116728317891');" onmouseout="out('5480526116728317891');" style="">1415          setPublishedNote(true);                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1416      }                                                                                                             </span>
<span  style="">1417                                                                                                                    </span>
<span class="-8215923685018306170" onmouseenter="enter('-8215923685018306170');" onmouseout="out('-8215923685018306170');" style="">1418      private void unpublishNote() {                                                                                </span>
<span class="939688580551732431" onmouseenter="enter('939688580551732431');" onmouseout="out('939688580551732431');" style="">1419          if (!NetworkUtils.isNetworkAvailable(requireContext())) {                                                 </span>
<span class="8924960461604916754" onmouseenter="enter('8924960461604916754');" onmouseout="out('8924960461604916754');" style="">1420              Toast.makeText(requireContext(), R.string.error_network_required, Toast.LENGTH_LONG).show();          </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1421              return;                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1422          }                                                                                                         </span>
<span  style="">1423                                                                                                                    </span>
<span class="-7481427962806884462" onmouseenter="enter('-7481427962806884462');" onmouseout="out('-7481427962806884462');" style="">1424          if (isAdded()) {                                                                                          </span>
<span class="-5849073483621593387" onmouseenter="enter('-5849073483621593387');" onmouseout="out('-5849073483621593387');" style="">1425              mPublishingSnackbar = Snackbar.make(mRootView, R.string.unpublishing, Snackbar.LENGTH_INDEFINITE);    </span>
<span class="-8074649539774450656" onmouseenter="enter('-8074649539774450656');" onmouseout="out('-8074649539774450656');" style="">1426              mPublishingSnackbar.show();                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1427          }                                                                                                         </span>
<span  style="">1428                                                                                                                    </span>
<span class="8445226168544755352" onmouseenter="enter('8445226168544755352');" onmouseout="out('8445226168544755352');" style="">1429          setPublishedNote(false);                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1430      }                                                                                                             </span>
<span  style="">1431                                                                                                                    </span>
<span class="-2059530202125765167" onmouseenter="enter('-2059530202125765167');" onmouseout="out('-2059530202125765167');" style="">1432      private void showShare(String text) {                                                                         </span>
<span class="-462181345749239892" onmouseenter="enter('-462181345749239892');" onmouseout="out('-462181345749239892');" style="">1433          startActivity(                                                                                            </span>
<span class="-2960409665728397105" onmouseenter="enter('-2960409665728397105');" onmouseout="out('-2960409665728397105');" style="">1434              ShareCompat.IntentBuilder.from(requireActivity())                                                     </span>
<span class="-7167858845932453536" onmouseenter="enter('-7167858845932453536');" onmouseout="out('-7167858845932453536');" style="">1435                  .setText(text)                                                                                    </span>
<span class="8809275298081922415" onmouseenter="enter('8809275298081922415');" onmouseout="out('8809275298081922415');" style="">1436                  .setType(&quot;text/plain&quot;)                                                                            </span>
<span class="-4946837607512363870" onmouseenter="enter('-4946837607512363870');" onmouseout="out('-4946837607512363870');" style="">1437                  .createChooserIntent()                                                                            </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">1438          );                                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1439      }                                                                                                             </span>
<span class="552430204178555924" onmouseenter="enter('552430204178555924');" onmouseout="out('552430204178555924');" style="">1440      private void showShareSheet() {                                                                               </span>
<span class="4007819101803880383" onmouseenter="enter('4007819101803880383');" onmouseout="out('4007819101803880383');" style="">1441          if (isAdded() &amp;&amp; mShareBottomSheet != null &amp;&amp; !mShareBottomSheet.isAdded()) {                             </span>
<span class="-6363695226018504364" onmouseenter="enter('-6363695226018504364');" onmouseout="out('-6363695226018504364');" style="">1442              mShareBottomSheet.show(requireFragmentManager(), mNote);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1443          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1444      }                                                                                                             </span>
<span  style="">1445                                                                                                                    </span>
<span class="-4049506869902668727" onmouseenter="enter('-4049506869902668727');" onmouseout="out('-4049506869902668727');" style="">1446      private void showInfoSheet() {                                                                                </span>
<span class="2029397660939536329" onmouseenter="enter('2029397660939536329');" onmouseout="out('2029397660939536329');" style="">1447          if (isAdded() &amp;&amp; mInfoBottomSheet != null &amp;&amp; !mInfoBottomSheet.isAdded()) {                               </span>
<span class="-1248038515529606639" onmouseenter="enter('-1248038515529606639');" onmouseout="out('-1248038515529606639');" style="">1448              mInfoBottomSheet.show(requireFragmentManager(), mNote);                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1449          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1450      }                                                                                                             </span>
<span  style="">1451                                                                                                                    </span>
<span class="5911143564482716303" onmouseenter="enter('5911143564482716303');" onmouseout="out('5911143564482716303');" style="">1452      private void showHistorySheet() {                                                                             </span>
<span class="1950176939429748509" onmouseenter="enter('1950176939429748509');" onmouseout="out('1950176939429748509');" style="">1453          if (isAdded() &amp;&amp; mHistoryBottomSheet != null &amp;&amp; !mHistoryBottomSheet.isAdded()) {                         </span>
<span class="8706434621047143120" onmouseenter="enter('8706434621047143120');" onmouseout="out('8706434621047143120');" style="">1454              // Request revisions for the current note                                                             </span>
<span class="-1574938770535875074" onmouseenter="enter('-1574938770535875074');" onmouseout="out('-1574938770535875074');" style="">1455              mNotesBucket.getRevisions(mNote, MAX_REVISIONS, mHistoryBottomSheet.getRevisionsRequestCallbacks());  </span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style="">1456              saveNote();                                                                                           </span>
<span  style="">1457                                                                                                                    </span>
<span class="4961792341108798217" onmouseenter="enter('4961792341108798217');" onmouseout="out('4961792341108798217');" style="">1458              mHistoryBottomSheet.show(requireFragmentManager(), mNote);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1459          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1460      }                                                                                                             </span>
<span  style="">1461                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1462 -    /**                                                                                                           </span>
<span class="-1711188639399183775" onmouseenter="enter('-1711188639399183775');" onmouseout="out('-1711188639399183775');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1463 -     * Simperium listeners                                                                                        </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1464 -     */                                                                                                           </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1465 -                                                                                                                  </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1466      @Override                                                                                                     </span>
<span class="3459602708969445883" onmouseenter="enter('3459602708969445883');" onmouseout="out('3459602708969445883');" style="">1467      public void onDeleteObject(Bucket&lt;Note&gt; noteBucket, Note note) {                                              </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1468 -                                                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1469      }                                                                                                             </span>
<span  style="">1470                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1471      @Override                                                                                                     </span>
<span class="-2970240973750057256" onmouseenter="enter('-2970240973750057256');" onmouseout="out('-2970240973750057256');" style="">1472      public void onNetworkChange(Bucket&lt;Note&gt; noteBucket, Bucket.ChangeType changeType, final String key) {        </span>
<span class="6607037711761945955" onmouseenter="enter('6607037711761945955');" onmouseout="out('6607037711761945955');" style="">1473          if (changeType == Bucket.ChangeType.MODIFY) {                                                             </span>
<span class="-6254872391725782597" onmouseenter="enter('-6254872391725782597');" onmouseout="out('-6254872391725782597');" style="">1474              if (getNote() != null &amp;&amp; getNote().getSimperiumKey().equals(key)) {                                   </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1475                  try {                                                                                             </span>
<span class="-1578175229665237336" onmouseenter="enter('-1578175229665237336');" onmouseout="out('-1578175229665237336');" style="">1476                      mNotesBucket = noteBucket;                                                                    </span>
<span class="3951885723067312215" onmouseenter="enter('3951885723067312215');" onmouseout="out('3951885723067312215');" style="">1477                      final Note updatedNote = mNotesBucket.get(key);                                               </span>
<span class="4809573797151136036" onmouseenter="enter('4809573797151136036');" onmouseout="out('4809573797151136036');" style="">1478                      if (getActivity() != null) {                                                                  </span>
<span class="-3876200887541462175" onmouseenter="enter('-3876200887541462175');" onmouseout="out('-3876200887541462175');" style="">1479                          getActivity().runOnUiThread(new Runnable() {                                              </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1480                              @Override                                                                             </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">1481                              public void run() {                                                                   </span>
<span class="-8758788084050668688" onmouseenter="enter('-8758788084050668688');" onmouseout="out('-8758788084050668688');" style="">1482                                  if (mPublishTimeoutHandler != null) {                                             </span>
<span class="-1646454762641300025" onmouseenter="enter('-1646454762641300025');" onmouseout="out('-1646454762641300025');" style="">1483                                      mPublishTimeoutHandler.removeCallbacks(mPublishTimeoutRunnable);              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1484                                  }                                                                                 </span>
<span  style="">1485                                                                                                                    </span>
<span class="-8617980127286778731" onmouseenter="enter('-8617980127286778731');" onmouseout="out('-8617980127286778731');" style="">1486                                  updateNote(updatedNote);                                                          </span>
<span class="2318735056997767280" onmouseenter="enter('2318735056997767280');" onmouseout="out('2318735056997767280');" style="">1487                                  updatePublishedState(true);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1488                              }                                                                                     </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">1489                          });                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1490                      }                                                                                             </span>
<span class="-1560847995217927266" onmouseenter="enter('-1560847995217927266');" onmouseout="out('-1560847995217927266');" style="">1491                  } catch (BucketObjectMissingException e) {                                                        </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style="">1492                      e.printStackTrace();                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1493                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1494              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1495          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1496      }                                                                                                             </span>
<span  style="">1497                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1498      @Override                                                                                                     </span>
<span class="1835476648918604123" onmouseenter="enter('1835476648918604123');" onmouseout="out('1835476648918604123');" style="">1499      public void onSaveObject(Bucket&lt;Note&gt; noteBucket, Note note) {                                                </span>
<span class="-2565337116915540090" onmouseenter="enter('-2565337116915540090');" onmouseout="out('-2565337116915540090');" style="">1500          if (mIsPaused) {                                                                                          </span>
<span class="-1649552973291504175" onmouseenter="enter('-1649552973291504175');" onmouseout="out('-1649552973291504175');" style="">1501              mNotesBucket.removeListener(this);                                                                    </span>
<span class="-9222421628383802707" onmouseenter="enter('-9222421628383802707');" onmouseout="out('-9222421628383802707');" style="">1502              mNotesBucket.stop();                                                                                  </span>
<span class="-5888247817738062720" onmouseenter="enter('-5888247817738062720');" onmouseout="out('-5888247817738062720');" style="">1503              AppLog.add(Type.SYNC, &quot;Stopped note bucket (NoteEditorFragment)&quot;);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1504          }                                                                                                         </span>
<span  style="">1505                                                                                                                    </span>
<span class="1712554612672119113" onmouseenter="enter('1712554612672119113');" onmouseout="out('1712554612672119113');" style="">1506          AppLog.add(                                                                                               </span>
<span class="5387827170384214934" onmouseenter="enter('5387827170384214934');" onmouseout="out('5387827170384214934');" style="">1507              Type.SYNC,                                                                                            </span>
<span class="-2467507706164826416" onmouseenter="enter('-2467507706164826416');" onmouseout="out('-2467507706164826416');" style="">1508              &quot;Saved note callback in NoteEditorFragment (ID: &quot; + note.getSimperiumKey() +                          </span>
<span class="8009766076008568533" onmouseenter="enter('8009766076008568533');" onmouseout="out('8009766076008568533');" style="">1509                  &quot; / Title: &quot; + note.getTitle() +                                                                  </span>
<span class="3373129960779075140" onmouseenter="enter('3373129960779075140');" onmouseout="out('3373129960779075140');" style="">1510                  &quot; / Characters: &quot; + NoteUtils.getCharactersCount(note.getContent()) +                             </span>
<span class="-6586905692045925149" onmouseenter="enter('-6586905692045925149');" onmouseout="out('-6586905692045925149');" style="">1511                  &quot; / Words: &quot; + NoteUtils.getWordCount(note.getContent()) + &quot;)&quot;                                    </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">1512          );                                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1513      }                                                                                                             </span>
<span  style="">1514                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1515      @Override                                                                                                     </span>
<span class="-5956849782971602831" onmouseenter="enter('-5956849782971602831');" onmouseout="out('-5956849782971602831');" style="">1516      public void onBeforeUpdateObject(Bucket&lt;Note&gt; bucket, Note note) {                                            </span>
<span class="9133977848896323437" onmouseenter="enter('9133977848896323437');" onmouseout="out('9133977848896323437');" style="">1517          // Don&#x27;t apply updates if we haven&#x27;t loaded the note yet                                                  </span>
<span class="-1541782922582123662" onmouseenter="enter('-1541782922582123662');" onmouseout="out('-1541782922582123662');" style="">1518          if (mIsLoadingNote)                                                                                       </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1519              return;                                                                                               </span>
<span  style="">1520                                                                                                                    </span>
<span class="1341660593539808393" onmouseenter="enter('1341660593539808393');" onmouseout="out('1341660593539808393');" style="">1521          Note openNote = getNote();                                                                                </span>
<span class="-6997098079508589023" onmouseenter="enter('-6997098079508589023');" onmouseout="out('-6997098079508589023');" style="">1522          if (openNote == null || !openNote.getSimperiumKey().equals(note.getSimperiumKey()))                       </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1523              return;                                                                                               </span>
<span  style="">1524                                                                                                                    </span>
<span class="7121549238466162700" onmouseenter="enter('7121549238466162700');" onmouseout="out('7121549238466162700');" style="">1525          note.setContent(mContentEditText.getPlainTextContent());                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1526      }                                                                                                             </span>
<span  style="">1527                                                                                                                    </span>
<span class="9045414880144452172" onmouseenter="enter('9045414880144452172');" onmouseout="out('9045414880144452172');" style="">1528      private static class LoadNoteTask extends AsyncTask&lt;String, Void, Void&gt; {                                     </span>
<span class="2470819661574637360" onmouseenter="enter('2470819661574637360');" onmouseout="out('2470819661574637360');" style="">1529          WeakReference&lt;NoteEditorFragment&gt; mNoteEditorFragmentReference;                                           </span>
<span  style="">1530                                                                                                                    </span>
<span class="-5095898803565568819" onmouseenter="enter('-5095898803565568819');" onmouseout="out('-5095898803565568819');" style="">1531          LoadNoteTask(NoteEditorFragment fragment) {                                                               </span>
<span class="-729324371914675142" onmouseenter="enter('-729324371914675142');" onmouseout="out('-729324371914675142');" style="">1532              mNoteEditorFragmentReference = new WeakReference&lt;&gt;(fragment);                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1533          }                                                                                                         </span>
<span  style="">1534                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1535          @Override                                                                                                 </span>
<span class="-2143377957271683587" onmouseenter="enter('-2143377957271683587');" onmouseout="out('-2143377957271683587');" style="">1536          protected void onPreExecute() {                                                                           </span>
<span class="-6239297955916786402" onmouseenter="enter('-6239297955916786402');" onmouseout="out('-6239297955916786402');" style="">1537              NoteEditorFragment fragment = mNoteEditorFragmentReference.get();                                     </span>
<span  style="">1538                                                                                                                    </span>
<span class="8682461618194216316" onmouseenter="enter('8682461618194216316');" onmouseout="out('8682461618194216316');" style="">1539              if (fragment != null) {                                                                               </span>
<span class="60782620590248864" onmouseenter="enter('60782620590248864');" onmouseout="out('60782620590248864');" style="">1540                  fragment.mContentEditText.removeTextChangedListener(fragment);                                    </span>
<span class="-1534119248334961722" onmouseenter="enter('-1534119248334961722');" onmouseout="out('-1534119248334961722');" style="">1541                  fragment.mIsLoadingNote = true;                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1542              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1543          }                                                                                                         </span>
<span  style="">1544                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1545          @Override                                                                                                 </span>
<span class="2907103121668961470" onmouseenter="enter('2907103121668961470');" onmouseout="out('2907103121668961470');" style="">1546          protected Void doInBackground(String... args) {                                                           </span>
<span class="-6239297955916786402" onmouseenter="enter('-6239297955916786402');" onmouseout="out('-6239297955916786402');" style="">1547              NoteEditorFragment fragment = mNoteEditorFragmentReference.get();                                     </span>
<span  style="">1548                                                                                                                    </span>
<span class="-8032132530741633390" onmouseenter="enter('-8032132530741633390');" onmouseout="out('-8032132530741633390');" style="">1549              if (fragment == null || fragment.getActivity() == null) {                                             </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1550                  return null;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1551              }                                                                                                     </span>
<span  style="">1552                                                                                                                    </span>
<span class="-6905640337159350056" onmouseenter="enter('-6905640337159350056');" onmouseout="out('-6905640337159350056');" style="">1553              String noteID = args[0];                                                                              </span>
<span class="-2377301998895691620" onmouseenter="enter('-2377301998895691620');" onmouseout="out('-2377301998895691620');" style="">1554              Simplenote application = (Simplenote) fragment.getActivity().getApplication();                        </span>
<span class="3820701427545927889" onmouseenter="enter('3820701427545927889');" onmouseout="out('3820701427545927889');" style="">1555              Bucket&lt;Note&gt; notesBucket = application.getNotesBucket();                                              </span>
<span  style="">1556                                                                                                                    </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1557              try {                                                                                                 </span>
<span class="-4946232803333130386" onmouseenter="enter('-4946232803333130386');" onmouseout="out('-4946232803333130386');" style="">1558                  fragment.mNote = notesBucket.get(noteID);                                                         </span>
<span  style="">1559                                                                                                                    </span>
<span class="-8094446681246514952" onmouseenter="enter('-8094446681246514952');" onmouseout="out('-8094446681246514952');" style="">1560                  // Set the current note in NotesActivity when on a tablet                                         </span>
<span class="-8543118244487944112" onmouseenter="enter('-8543118244487944112');" onmouseout="out('-8543118244487944112');" style="">1561                  if (fragment.getActivity() instanceof NotesActivity) {                                            </span>
<span class="7201017209637424614" onmouseenter="enter('7201017209637424614');" onmouseout="out('7201017209637424614');" style="">1562                      ((NotesActivity) fragment.getActivity()).setCurrentNote(fragment.mNote);                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1563                  }                                                                                                 </span>
<span  style="">1564                                                                                                                    </span>
<span class="-7559761486783625846" onmouseenter="enter('-7559761486783625846');" onmouseout="out('-7559761486783625846');" style="">1565                  // Set markdown and preview flags for current note                                                </span>
<span class="5610790463962208778" onmouseenter="enter('5610790463962208778');" onmouseout="out('5610790463962208778');" style="">1566                  if (fragment.mNote != null) {                                                                     </span>
<span class="-8180075389206795559" onmouseenter="enter('-8180075389206795559');" onmouseout="out('-8180075389206795559');" style="">1567                      fragment.mIsMarkdownEnabled = fragment.mNote.isMarkdownEnabled();                             </span>
<span class="4693841747578299424" onmouseenter="enter('4693841747578299424');" onmouseout="out('4693841747578299424');" style="">1568                      fragment.mIsPreviewEnabled = fragment.mNote.isPreviewEnabled();                               </span>
<span class="1712554612672119113" onmouseenter="enter('1712554612672119113');" onmouseout="out('1712554612672119113');" style="">1569                      AppLog.add(                                                                                   </span>
<span class="5387827170384214934" onmouseenter="enter('5387827170384214934');" onmouseout="out('5387827170384214934');" style="">1570                          Type.SYNC,                                                                                </span>
<span class="-7392016025425077182" onmouseenter="enter('-7392016025425077182');" onmouseout="out('-7392016025425077182');" style="">1571                          &quot;Loaded note (ID: &quot; + fragment.mNote.getSimperiumKey() +                                  </span>
<span class="-7384197456729805506" onmouseenter="enter('-7384197456729805506');" onmouseout="out('-7384197456729805506');" style="">1572                              &quot; / Title: &quot; + fragment.mNote.getTitle() +                                            </span>
<span class="-9069213288035386789" onmouseenter="enter('-9069213288035386789');" onmouseout="out('-9069213288035386789');" style="">1573                              &quot; / Characters: &quot; + NoteUtils.getCharactersCount(fragment.mNote.getContent()) +       </span>
<span class="-2213550460625477177" onmouseenter="enter('-2213550460625477177');" onmouseout="out('-2213550460625477177');" style="">1574                              &quot; / Words: &quot; + NoteUtils.getWordCount(fragment.mNote.getContent()) + &quot;)&quot;              </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">1575                      );                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1576                  }                                                                                                 </span>
<span class="-1560847995217927266" onmouseenter="enter('-1560847995217927266');" onmouseout="out('-1560847995217927266');" style="">1577              } catch (BucketObjectMissingException e) {                                                            </span>
<span class="2089208945464326929" onmouseenter="enter('2089208945464326929');" onmouseout="out('2089208945464326929');" style="">1578                  // See if the note is in the object store                                                         </span>
<span class="369229994761936281" onmouseenter="enter('369229994761936281');" onmouseout="out('369229994761936281');" style="">1579                  Bucket.ObjectCursor&lt;Note&gt; notesCursor = notesBucket.allObjects();                                 </span>
<span  style="">1580                                                                                                                    </span>
<span class="-3178781815102550114" onmouseenter="enter('-3178781815102550114');" onmouseout="out('-3178781815102550114');" style="">1581                  while (notesCursor.moveToNext()) {                                                                </span>
<span class="-6636674936476994775" onmouseenter="enter('-6636674936476994775');" onmouseout="out('-6636674936476994775');" style="">1582                      Note currentNote = notesCursor.getObject();                                                   </span>
<span  style="">1583                                                                                                                    </span>
<span class="5230840531090379031" onmouseenter="enter('5230840531090379031');" onmouseout="out('5230840531090379031');" style="">1584                      if (currentNote != null &amp;&amp; currentNote.getSimperiumKey().equals(noteID)) {                    </span>
<span class="8774517486286621197" onmouseenter="enter('8774517486286621197');" onmouseout="out('8774517486286621197');" style="">1585                          fragment.mNote = currentNote;                                                             </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1586                          return null;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1587                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1588                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1589              }                                                                                                     </span>
<span  style="">1590                                                                                                                    </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1591              return null;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1592          }                                                                                                         </span>
<span  style="">1593                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1594          @Override                                                                                                 </span>
<span class="2295103304779241059" onmouseenter="enter('2295103304779241059');" onmouseout="out('2295103304779241059');" style="">1595          protected void onPostExecute(Void nada) {                                                                 </span>
<span class="-6221597993462190775" onmouseenter="enter('-6221597993462190775');" onmouseout="out('-6221597993462190775');" style="">1596              final NoteEditorFragment fragment = mNoteEditorFragmentReference.get();                               </span>
<span class="-5025636818911942947" onmouseenter="enter('-5025636818911942947');" onmouseout="out('-5025636818911942947');" style="">1597              if (fragment == null || fragment.getActivity() == null || fragment.getActivity().isFinishing()) {     </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1598                  return;                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1599              }                                                                                                     </span>
<span  style="">1600                                                                                                                    </span>
<span class="-6603799210363857095" onmouseenter="enter('-6603799210363857095');" onmouseout="out('-6603799210363857095');" style="">1601              fragment.refreshContent(false);                                                                       </span>
<span  style="">1602                                                                                                                    </span>
<span class="5917882013700041584" onmouseenter="enter('5917882013700041584');" onmouseout="out('5917882013700041584');" style="">1603              if (fragment.mMatchOffsets != null) {                                                                 </span>
<span class="3332467390516262576" onmouseenter="enter('3332467390516262576');" onmouseout="out('3332467390516262576');" style=""><abbr title="1604                  int columnIndex = fragment.mNote.getBucket().getSchema().getFullTextIndex().getColumnIndex(Note.CONTENT_PROPERTY);">1604                  int columnIndex = fragment.mNote.getBucket().getSchema().getFullTextIndex().getColumnIndex(Note.CO🔵</abbr></span>
<span class="-941659818852434408" onmouseenter="enter('-941659818852434408');" onmouseout="out('-941659818852434408');" style="">1605                  fragment.mHighlighter.highlightMatches(fragment.mMatchOffsets, columnIndex);                      </span>
<span class="-5586540550370892268" onmouseenter="enter('-5586540550370892268');" onmouseout="out('-5586540550370892268');" style="">1606                  fragment.mShouldScrollToSearchMatch = true;                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1607              }                                                                                                     </span>
<span  style="">1608                                                                                                                    </span>
<span class="973040091990718145" onmouseenter="enter('973040091990718145');" onmouseout="out('973040091990718145');" style="">1609              fragment.mContentEditText.addTextChangedListener(fragment);                                           </span>
<span  style="">1610                                                                                                                    </span>
<span class="2402633428423922470" onmouseenter="enter('2402633428423922470');" onmouseout="out('2402633428423922470');" style="">1611              if (fragment.mNote != null &amp;&amp; fragment.mNote.getContent().isEmpty()) {                                </span>
<span class="-7639034409774462373" onmouseenter="enter('-7639034409774462373');" onmouseout="out('-7639034409774462373');" style="">1612                  // Show soft keyboard                                                                             </span>
<span class="-4206285070691362757" onmouseenter="enter('-4206285070691362757');" onmouseout="out('-4206285070691362757');" style="">1613                  fragment.mContentEditText.requestFocus();                                                         </span>
<span  style="">1614                                                                                                                    </span>
<span class="7162501222170899627" onmouseenter="enter('7162501222170899627');" onmouseout="out('7162501222170899627');" style="">1615                  new Handler().postDelayed(new Runnable() {                                                        </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1616                      @Override                                                                                     </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">1617                      public void run() {                                                                           </span>
<span class="-3270581272855840613" onmouseenter="enter('-3270581272855840613');" onmouseout="out('-3270581272855840613');" style="">1618                          if (fragment.getActivity() == null) {                                                     </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1619                              return;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1620                          }                                                                                         </span>
<span  style="">1621                                                                                                                    </span>
<span class="-9053809797008075040" onmouseenter="enter('-9053809797008075040');" onmouseout="out('-9053809797008075040');" style=""><abbr title="1622                          InputMethodManager inputMethodManager = (InputMethodManager) fragment.getActivity().getSystemService(Context.INPUT_METHOD_SERVICE);">1622                          InputMethodManager inputMethodManager = (InputMethodManager) fragment.getActivity().getSys🔵</abbr></span>
<span  style="">1623                                                                                                                    </span>
<span class="-9213036537020298306" onmouseenter="enter('-9213036537020298306');" onmouseout="out('-9213036537020298306');" style="">1624                          if (inputMethodManager != null) {                                                         </span>
<span class="195139432086188728" onmouseenter="enter('195139432086188728');" onmouseout="out('195139432086188728');" style="">1625                              inputMethodManager.showSoftInput(fragment.mContentEditText, 0);                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1626                          }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1627                      }                                                                                             </span>
<span class="-4884776244894547305" onmouseenter="enter('-4884776244894547305');" onmouseout="out('-4884776244894547305');" style="">1628                  }, 100);                                                                                          </span>
<span class="-6150494714931322561" onmouseenter="enter('-6150494714931322561');" onmouseout="out('-6150494714931322561');" style="">1629              } else if (fragment.mNote != null) {                                                                  </span>
<span class="-1393000384089402121" onmouseenter="enter('-1393000384089402121');" onmouseout="out('-1393000384089402121');" style="">1630                  // If we have a valid note, hide the placeholder                                                  </span>
<span class="8494685023237855547" onmouseenter="enter('8494685023237855547');" onmouseout="out('8494685023237855547');" style="">1631                  fragment.setPlaceholderVisible(false);                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1632              }                                                                                                     </span>
<span  style="">1633                                                                                                                    </span>
<span class="-204842057880624038" onmouseenter="enter('-204842057880624038');" onmouseout="out('-204842057880624038');" style="">1634              fragment.updateMarkdownView();                                                                        </span>
<span class="-7853767312046629249" onmouseenter="enter('-7853767312046629249');" onmouseout="out('-7853767312046629249');" style="">1635              fragment.requireActivity().invalidateOptionsMenu();                                                   </span>
<span class="-6330986853491903464" onmouseenter="enter('-6330986853491903464');" onmouseout="out('-6330986853491903464');" style="">1636              fragment.linkifyEditorContent();                                                                      </span>
<span class="-4002830427376252976" onmouseenter="enter('-4002830427376252976');" onmouseout="out('-4002830427376252976');" style="">1637              fragment.mIsLoadingNote = false;                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1638          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1639      }                                                                                                             </span>
<span  style="">1640                                                                                                                    </span>
<span class="-2513677254117436534" onmouseenter="enter('-2513677254117436534');" onmouseout="out('-2513677254117436534');" style="">1641      private static class SaveNoteTask extends AsyncTask&lt;Void, Void, Void&gt; {                                       </span>
<span class="2470819661574637360" onmouseenter="enter('2470819661574637360');" onmouseout="out('2470819661574637360');" style="">1642          WeakReference&lt;NoteEditorFragment&gt; mNoteEditorFragmentReference;                                           </span>
<span  style="">1643                                                                                                                    </span>
<span class="-3144982887415890281" onmouseenter="enter('-3144982887415890281');" onmouseout="out('-3144982887415890281');" style="">1644          SaveNoteTask(NoteEditorFragment fragment) {                                                               </span>
<span class="-729324371914675142" onmouseenter="enter('-729324371914675142');" onmouseout="out('-729324371914675142');" style="">1645              mNoteEditorFragmentReference = new WeakReference&lt;&gt;(fragment);                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1646          }                                                                                                         </span>
<span  style="">1647                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1648          @Override                                                                                                 </span>
<span class="1259374977543247181" onmouseenter="enter('1259374977543247181');" onmouseout="out('1259374977543247181');" style="">1649          protected Void doInBackground(Void... args) {                                                             </span>
<span class="-6239297955916786402" onmouseenter="enter('-6239297955916786402');" onmouseout="out('-6239297955916786402');" style="">1650              NoteEditorFragment fragment = mNoteEditorFragmentReference.get();                                     </span>
<span  style="">1651                                                                                                                    </span>
<span class="8682461618194216316" onmouseenter="enter('8682461618194216316');" onmouseout="out('8682461618194216316');" style="">1652              if (fragment != null) {                                                                               </span>
<span class="8575404770768137029" onmouseenter="enter('8575404770768137029');" onmouseout="out('8575404770768137029');" style="">1653                  fragment.saveNote();                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1654              }                                                                                                     </span>
<span  style="">1655                                                                                                                    </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1656              return null;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1657          }                                                                                                         </span>
<span  style="">1658                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1659          @Override                                                                                                 </span>
<span class="2295103304779241059" onmouseenter="enter('2295103304779241059');" onmouseout="out('2295103304779241059');" style="">1660          protected void onPostExecute(Void nada) {                                                                 </span>
<span class="-6239297955916786402" onmouseenter="enter('-6239297955916786402');" onmouseout="out('-6239297955916786402');" style="">1661              NoteEditorFragment fragment = mNoteEditorFragmentReference.get();                                     </span>
<span  style="">1662                                                                                                                    </span>
<span class="-8106394483710371243" onmouseenter="enter('-8106394483710371243');" onmouseout="out('-8106394483710371243');" style="">1663              if (fragment != null &amp;&amp; fragment.getActivity() != null &amp;&amp; !fragment.getActivity().isFinishing()) {    </span>
<span class="4157206213844518202" onmouseenter="enter('4157206213844518202');" onmouseout="out('4157206213844518202');" style="">1664                  // Update links                                                                                   </span>
<span class="-6330986853491903464" onmouseenter="enter('-6330986853491903464');" onmouseout="out('-6330986853491903464');" style="">1665                  fragment.linkifyEditorContent();                                                                  </span>
<span class="-204842057880624038" onmouseenter="enter('-204842057880624038');" onmouseout="out('-204842057880624038');" style="">1666                  fragment.updateMarkdownView();                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1667              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1668          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1669      }                                                                                                             </span>
<span  style="">1670                                                                                                                    </span>
<span class="5750088007463981533" onmouseenter="enter('5750088007463981533');" onmouseout="out('5750088007463981533');" style="">1671      private void linkifyEditorContent() {                                                                         </span>
<span class="-7408428876964241805" onmouseenter="enter('-7408428876964241805');" onmouseout="out('-7408428876964241805');" style="">1672          if (getActivity() == null || getActivity().isFinishing()) {                                               </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1673              return;                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1674          }                                                                                                         </span>
<span  style="">1675                                                                                                                    </span>
<span class="-8676186023856313759" onmouseenter="enter('-8676186023856313759');" onmouseout="out('-8676186023856313759');" style="">1676          if (PrefUtils.getBoolPref(getActivity(), PrefUtils.PREF_DETECT_LINKS)) {                                  </span>
<span class="-5493645025534883433" onmouseenter="enter('-5493645025534883433');" onmouseout="out('-5493645025534883433');" style="">1677              SimplenoteLinkify.addLinks(mContentEditText, Linkify.ALL);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1678          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1679      }                                                                                                             </span>
<span  style="">1680                                                                                                                    </span>
<span class="-5950330616337931457" onmouseenter="enter('-5950330616337931457');" onmouseout="out('-5950330616337931457');" style="">1681      // Show tabs if markdown is enabled globally, for current note, and not tablet landscape                      </span>
<span class="2649812560178195830" onmouseenter="enter('2649812560178195830');" onmouseout="out('2649812560178195830');" style="">1682      private void updateMarkdownView() {                                                                           </span>
<span class="-6478060281573302790" onmouseenter="enter('-6478060281573302790');" onmouseout="out('-6478060281573302790');" style="">1683          if (!mIsMarkdownEnabled) {                                                                                </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1684              return;                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1685          }                                                                                                         </span>
<span  style="">1686                                                                                                                    </span>
<span class="-5071525869541290984" onmouseenter="enter('-5071525869541290984');" onmouseout="out('-5071525869541290984');" style="">1687          Activity activity = getActivity();                                                                        </span>
<span class="6030899174327056570" onmouseenter="enter('6030899174327056570');" onmouseout="out('6030899174327056570');" style="">1688          if (activity instanceof NotesActivity) {                                                                  </span>
<span class="2782126590805787389" onmouseenter="enter('2782126590805787389');" onmouseout="out('2782126590805787389');" style="">1689              // This fragment lives in NotesActivity, so load markdown in this fragment&#x27;s WebView.                 </span>
<span class="3327794499329885328" onmouseenter="enter('3327794499329885328');" onmouseout="out('3327794499329885328');" style="">1690              loadMarkdownData();                                                                                   </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1691          } else {                                                                                                  </span>
<span class="8122704767225379324" onmouseenter="enter('8122704767225379324');" onmouseout="out('8122704767225379324');" style="">1692              // This fragment lives in the NoteEditorActivity&#x27;s ViewPager.                                         </span>
<span class="-3674842258349497418" onmouseenter="enter('-3674842258349497418');" onmouseout="out('-3674842258349497418');" style="">1693              if (mNoteMarkdownFragment == null) {                                                                  </span>
<span class="3603448342706497777" onmouseenter="enter('3603448342706497777');" onmouseout="out('3603448342706497777');" style="">1694                  mNoteMarkdownFragment = ((NoteEditorActivity) requireActivity())                                  </span>
<span class="-2617317400764712760" onmouseenter="enter('-2617317400764712760');" onmouseout="out('-2617317400764712760');" style="">1695                          .getNoteMarkdownFragment();                                                               </span>
<span class="3313661309460802096" onmouseenter="enter('3313661309460802096');" onmouseout="out('3313661309460802096');" style="">1696                  ((NoteEditorActivity) requireActivity()).showTabs();                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1697              }                                                                                                     </span>
<span class="-1009334497805408344" onmouseenter="enter('-1009334497805408344');" onmouseout="out('-1009334497805408344');" style="">1698              // Load markdown in the sibling NoteMarkdownFragment&#x27;s WebView.                                       </span>
<span class="8234543871026198045" onmouseenter="enter('8234543871026198045');" onmouseout="out('8234543871026198045');" style="">1699              mNoteMarkdownFragment.updateMarkdown(mContentEditText.getPreviewTextContent());                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1700          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1701      }                                                                                                             </span>
<span  style="">1702                                                                                                                    </span>
<span class="621072892992557040" onmouseenter="enter('621072892992557040');" onmouseout="out('621072892992557040');" style="">1703      private ColorStateList getChipBackgroundColor() {                                                             </span>
<span class="-2852806967863140186" onmouseenter="enter('-2852806967863140186');" onmouseout="out('-2852806967863140186');" style="">1704          int[][] states = new int[][] {                                                                            </span>
<span class="3138779758285079345" onmouseenter="enter('3138779758285079345');" onmouseout="out('3138779758285079345');" style="">1705              new int[] { android.R.attr.state_checked}, // checked                                                 </span>
<span class="2921033856249437884" onmouseenter="enter('2921033856249437884');" onmouseout="out('2921033856249437884');" style="">1706              new int[] {-android.R.attr.state_checked}  // unchecked                                               </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">1707          };                                                                                                        </span>
<span  style="">1708                                                                                                                    </span>
<span class="-5399670070282478940" onmouseenter="enter('-5399670070282478940');" onmouseout="out('-5399670070282478940');" style="">1709          int[] colors = new int[] {                                                                                </span>
<span class="3188530588543322355" onmouseenter="enter('3188530588543322355');" onmouseout="out('3188530588543322355');" style="">1710              ThemeUtils.getColorFromAttribute(requireContext(), R.attr.chipCheckedOnBackgroundColor),              </span>
<span class="1811726545786864469" onmouseenter="enter('1811726545786864469');" onmouseout="out('1811726545786864469');" style="">1711              ThemeUtils.getColorFromAttribute(requireContext(), R.attr.chipCheckedOffBackgroundColor)              </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">1712          };                                                                                                        </span>
<span  style="">1713                                                                                                                    </span>
<span class="-5773454088160861424" onmouseenter="enter('-5773454088160861424');" onmouseout="out('-5773454088160861424');" style="">1714          return new ColorStateList(states, colors);                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1715      }                                                                                                             </span>
<span  style="">1716                                                                                                                    </span>
<span class="7978150615022703967" onmouseenter="enter('7978150615022703967');" onmouseout="out('7978150615022703967');" style="">1717      private void setChips(CharSequence text) {                                                                    </span>
<span class="-6352640607268108974" onmouseenter="enter('-6352640607268108974');" onmouseout="out('-6352640607268108974');" style="">1718          mTagPadding.setVisibility(text.length() &gt; 0 ? View.VISIBLE : View.GONE);                                  </span>
<span class="5420418357496709981" onmouseenter="enter('5420418357496709981');" onmouseout="out('5420418357496709981');" style="">1719          mTagChips.setVisibility(text.length() &gt; 0 ? View.VISIBLE : View.GONE);                                    </span>
<span class="6036610741747636495" onmouseenter="enter('6036610741747636495');" onmouseout="out('6036610741747636495');" style="">1720          mTagChips.setSingleSelection(true);                                                                       </span>
<span class="-281158766645647153" onmouseenter="enter('-281158766645647153');" onmouseout="out('-281158766645647153');" style="">1721          mTagChips.removeAllViews();                                                                               </span>
<span class="-2312425264507564639" onmouseenter="enter('-2312425264507564639');" onmouseout="out('-2312425264507564639');" style="">1722          SimpleStringSplitter tags = new SimpleStringSplitter(SPACE);                                              </span>
<span class="-2221549004994088170" onmouseenter="enter('-2221549004994088170');" onmouseout="out('-2221549004994088170');" style="">1723          tags.setString(text.toString());                                                                          </span>
<span  style="">1724                                                                                                                    </span>
<span class="-7185531782033852210" onmouseenter="enter('-7185531782033852210');" onmouseout="out('-7185531782033852210');" style="">1725          for (String tag : tags) {                                                                                 </span>
<span class="-4253336828679787495" onmouseenter="enter('-4253336828679787495');" onmouseout="out('-4253336828679787495');" style="">1726              final Chip chip = new Chip(requireContext());                                                         </span>
<span class="1656135987988335587" onmouseenter="enter('1656135987988335587');" onmouseout="out('1656135987988335587');" style="">1727              chip.setText(tag);                                                                                    </span>
<span class="-8675353638360963179" onmouseenter="enter('-8675353638360963179');" onmouseout="out('-8675353638360963179');" style="">1728              chip.setCheckable(true);                                                                              </span>
<span class="67942289785469509" onmouseenter="enter('67942289785469509');" onmouseout="out('67942289785469509');" style="">1729              chip.setCheckedIcon(null);                                                                            </span>
<span class="4360750963000358582" onmouseenter="enter('4360750963000358582');" onmouseout="out('4360750963000358582');" style="">1730              chip.setChipBackgroundColor(getChipBackgroundColor());                                                </span>
<span class="9213121115800400320" onmouseenter="enter('9213121115800400320');" onmouseout="out('9213121115800400320');" style="">1731              chip.setTextColor(ThemeUtils.getColorFromAttribute(requireContext(), R.attr.chipTextColor));          </span>
<span class="7518117741736260019" onmouseenter="enter('7518117741736260019');" onmouseout="out('7518117741736260019');" style="">1732              chip.setStateListAnimator(null);                                                                      </span>
<span class="-4577029713597050278" onmouseenter="enter('-4577029713597050278');" onmouseout="out('-4577029713597050278');" style="">1733              chip.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {                        </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1734                  @Override                                                                                         </span>
<span class="3078550550582438549" onmouseenter="enter('3078550550582438549');" onmouseout="out('3078550550582438549');" style="">1735                  public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {                      </span>
<span class="44703121288981283" onmouseenter="enter('44703121288981283');" onmouseout="out('44703121288981283');" style="">1736                      chip.setCloseIconVisible(isChecked);                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1737                  }                                                                                                 </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">1738              });                                                                                                   </span>
<span class="160847713587338016" onmouseenter="enter('160847713587338016');" onmouseout="out('160847713587338016');" style="">1739              chip.setOnCloseIconClickListener(new View.OnClickListener() {                                         </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1740                  @Override                                                                                         </span>
<span class="2630081792579352299" onmouseenter="enter('2630081792579352299');" onmouseout="out('2630081792579352299');" style="">1741                  public void onClick(View view) {                                                                  </span>
<span class="-7509335457070409893" onmouseenter="enter('-7509335457070409893');" onmouseout="out('-7509335457070409893');" style="">1742                      mTagChips.removeView(view);                                                                   </span>
<span class="6057505716411681059" onmouseenter="enter('6057505716411681059');" onmouseout="out('6057505716411681059');" style="">1743                      updateTags();                                                                                 </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style="">1744                      AnalyticsTracker.track(                                                                       </span>
<span class="6322942827450848506" onmouseenter="enter('6322942827450848506');" onmouseout="out('6322942827450848506');" style="">1745                          EDITOR_TAG_REMOVED,                                                                       </span>
<span class="-2430475172570880083" onmouseenter="enter('-2430475172570880083');" onmouseout="out('-2430475172570880083');" style="">1746                          CATEGORY_NOTE,                                                                            </span>
<span class="7139119425176259618" onmouseenter="enter('7139119425176259618');" onmouseout="out('7139119425176259618');" style="">1747                          &quot;tag_removed_from_note&quot;                                                                   </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">1748                      );                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1749                  }                                                                                                 </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">1750              });                                                                                                   </span>
<span class="-535069795448615627" onmouseenter="enter('-535069795448615627');" onmouseout="out('-535069795448615627');" style="">1751              mTagChips.addView(chip);                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1752          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1753      }                                                                                                             </span>
<span  style="">1754                                                                                                                    </span>
<span class="2006864524440231174" onmouseenter="enter('2006864524440231174');" onmouseout="out('2006864524440231174');" style="">1755      private void updateTags() {                                                                                   </span>
<span class="-6566957513776356959" onmouseenter="enter('-6566957513776356959');" onmouseout="out('-6566957513776356959');" style="">1756          if (mNote == null) {                                                                                      </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1757              return;                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1758          }                                                                                                         </span>
<span  style="">1759                                                                                                                    </span>
<span class="2510051710836521686" onmouseenter="enter('2510051710836521686');" onmouseout="out('2510051710836521686');" style="">1760          mNote.setTagString(getNoteTagsString());                                                                  </span>
<span class="-3343075472306200704" onmouseenter="enter('-3343075472306200704');" onmouseout="out('-3343075472306200704');" style="">1761          mNote.setModificationDate(Calendar.getInstance());                                                        </span>
<span class="3745953297761259324" onmouseenter="enter('3745953297761259324');" onmouseout="out('3745953297761259324');" style="">1762          updateTagList();                                                                                          </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style="">1763          mNote.save();                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1764      }                                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1765  }                                                                                                                 </span></pre></td>
                        </tr>
                    </table>
                </div>
              </body>
            </html>
            