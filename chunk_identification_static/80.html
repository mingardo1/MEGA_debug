<!DOCTYPE html>
    <html lang="en">
              <head>
                <meta charset="utf-8">
                <title>80</title>
                    <style>
                        #top {
                            height: 48vh;
                            overflow-y: auto;
                        }
                        #bottom {
                            height: 48vh;
                            overflow-y: auto;
                        }
                        .highlighted {
                            background-color: rgba(177, 82, 227, 0.85) !important;
                        }
                    </style>
                    <script>
                        function enter(c) {
                            const lines = document.getElementsByClassName(c);
                            for (let i = 0; i < lines.length; i++) {
                               lines.item(i).classList.add('highlighted');
                            }
                        }
                        function out(c) {
                            const lines = document.getElementsByClassName(c);
                            for (let i = 0; i < lines.length; i++) {
                               lines.item(i).classList.remove('highlighted');
                            }
                        }
                    </script>
              </head>
              <body>
                <span style="height: 4vh">
                    80
                    <a href="79.html">prev</a>
                    <a href="81.html">next</a>
                    <a href="80_chunks.html">chunks</a>
                    <a href="index.html">index</a>
                    Automattic/simplenote-android_4e1fa0199c788f410832032e7aff720f0bc7c32d_Simplenote/src/main/java/com/automattic/simplenote/Simplenote.java
                    <textarea rows=1 onclick='navigator.clipboard.writeText(this.value)'>cd C:\studies\se\mega\git-analyzer-plus\notebooks\debug
del /Q *
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\Automattic\simplenote-android show &quot;4e1fa0199c788f410832032e7aff720f0bc7c32d:Simplenote/src/main/java/com/automattic/simplenote/Simplenote.java&quot; &gt; committed.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\Automattic\simplenote-android show &quot;4e1fa0199c788f410832032e7aff720f0bc7c32d^1:Simplenote/src/main/java/com/automattic/simplenote/Simplenote.java&quot; &gt; ours.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\Automattic\simplenote-android show &quot;4e1fa0199c788f410832032e7aff720f0bc7c32d^2:Simplenote/src/main/java/com/automattic/simplenote/Simplenote.java&quot; &gt; theirs.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\Automattic\simplenote-android show &quot;3a764d7c3f78240be2e14be35d5bf4517e6f794e:Simplenote/src/main/java/com/automattic/simplenote/Simplenote.java&quot; &gt; base.java
copy ours.java 1ours.java
copy ours.java 2ours.java
copy theirs.java 1theirs.java
copy theirs.java 2theirs.java
copy base.java 1base.java
copy base.java 2base.java
&quot;C:\Program Files\Java\jdk1.8.0_241\bin\java.exe&quot; -Dfile.encoding=UTF-8 -jar &quot;C:\studies\se\jFSTMerge\build\libs\jFSTMerge-all.jar&quot; C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1ours.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1base.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1theirs.java -o C:\studies\se\mega\git-analyzer-plus\notebooks\debug\jfstmerge.java --show-base
&quot;C:\Program Files\Eclipse Adoptium\jdk-17.0.11.9-hotspot\bin\java.exe&quot; -Dfile.encoding=UTF-8 -jar &quot;C:\studies\se\spork\target\spork-0.5.0-SNAPSHOT.jar&quot; C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2ours.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2base.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2theirs.java -o C:\studies\se\mega\git-analyzer-plus\notebooks\debug\spork.java
del /Q 1*.java
del /Q 2*.java
del /Q jfstmerge.java.merge
</textarea>
                    {strict: [[b]], subset: [[b]]}
                </span>
                <div id="top">

                    <table>
                        <tr>
                            <th>line based (standard git)</th>
                            <th>jfstmerge</th>
                            <th>spork</th>
                        </tr>
                        <tr>
                            <td><pre><span class="8328120990598135231" onmouseenter="enter('8328120990598135231');" onmouseout="out('8328120990598135231');" style="">   1 package com.automattic.simplenote;                                                                       </span>
<span  style="">   2                                                                                                          </span>
<span class="-4667942192763773056" onmouseenter="enter('-4667942192763773056');" onmouseout="out('-4667942192763773056');" style="">   3 &lt;&lt;&lt;&lt;&lt;&lt;&lt; GitAnalyzerPlus_ours                                                                             </span>
<span class="6741223626729319096" onmouseenter="enter('6741223626729319096');" onmouseout="out('6741223626729319096');" style="">   4 ||||||| GitAnalyzerPlus_base                                                                             </span>
<span class="-3997288425915246049" onmouseenter="enter('-3997288425915246049');" onmouseout="out('-3997288425915246049');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">   5 import android.annotation.SuppressLint;                                                                  </span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style="">   6 =======                                                                                                  </span>
<span class="-3495781243593779480" onmouseenter="enter('-3495781243593779480');" onmouseout="out('-3495781243593779480');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">   7 import static com.automattic.simplenote.models.Account.KEY_EMAIL_VERIFICATION;                           </span>
<span class="-1382546150375666264" onmouseenter="enter('-1382546150375666264');" onmouseout="out('-1382546150375666264');" style="">   8 &gt;&gt;&gt;&gt;&gt;&gt;&gt; GitAnalyzerPlus_theirs                                                                           </span>
<span class="3919052636780858758" onmouseenter="enter('3919052636780858758');" onmouseout="out('3919052636780858758');" style="">   9 import static com.automattic.simplenote.models.Preferences.PREFERENCES_OBJECT_KEY;                       </span>
<span class="-2196284958529318469" onmouseenter="enter('-2196284958529318469');" onmouseout="out('-2196284958529318469');" style="">  10 import static com.simperium.android.AsyncAuthClient.USER_ACCESS_TOKEN_PREFERENCE;                        </span>
<span class="-7261804762945120970" onmouseenter="enter('-7261804762945120970');" onmouseout="out('-7261804762945120970');" style="">  11 import static com.simperium.android.AsyncAuthClient.USER_EMAIL_PREFERENCE;                               </span>
<span  style="">  12                                                                                                          </span>
<span class="-3997288425915246049" onmouseenter="enter('-3997288425915246049');" onmouseout="out('-3997288425915246049');" style="">  13 import android.annotation.SuppressLint;                                                                  </span>
<span class="-7090287939251728203" onmouseenter="enter('-7090287939251728203');" onmouseout="out('-7090287939251728203');" style="">  14 import android.app.Activity;                                                                             </span>
<span class="-4535828467892621321" onmouseenter="enter('-4535828467892621321');" onmouseout="out('-4535828467892621321');" style="">  15 import android.app.Application;                                                                          </span>
<span class="-5120547123096501078" onmouseenter="enter('-5120547123096501078');" onmouseout="out('-5120547123096501078');" style="">  16 import android.content.ComponentCallbacks2;                                                              </span>
<span class="5922045460006936195" onmouseenter="enter('5922045460006936195');" onmouseout="out('5922045460006936195');" style="">  17 import android.content.Context;                                                                          </span>
<span class="4122587240602557356" onmouseenter="enter('4122587240602557356');" onmouseout="out('4122587240602557356');" style="">  18 import android.content.SharedPreferences;                                                                </span>
<span class="-9179032954578521484" onmouseenter="enter('-9179032954578521484');" onmouseout="out('-9179032954578521484');" style="">  19 import android.content.res.Configuration;                                                                </span>
<span class="-4549785658871057260" onmouseenter="enter('-4549785658871057260');" onmouseout="out('-4549785658871057260');" style="">  20 import android.os.Build;                                                                                 </span>
<span class="8096531590004379472" onmouseenter="enter('8096531590004379472');" onmouseout="out('8096531590004379472');" style="">  21 import android.os.Bundle;                                                                                </span>
<span class="-1086316590722027623" onmouseenter="enter('-1086316590722027623');" onmouseout="out('-1086316590722027623');" style="">  22 import android.os.Handler;                                                                               </span>
<span class="7196841398407674858" onmouseenter="enter('7196841398407674858');" onmouseout="out('7196841398407674858');" style="">  23 import android.util.Log;                                                                                 </span>
<span  style="">  24                                                                                                          </span>
<span class="-6242887455281895424" onmouseenter="enter('-6242887455281895424');" onmouseout="out('-6242887455281895424');" style="">  25 import androidx.annotation.IdRes;                                                                        </span>
<span class="6963272077887521702" onmouseenter="enter('6963272077887521702');" onmouseout="out('6963272077887521702');" style="">  26 import androidx.annotation.NonNull;                                                                      </span>
<span class="7702331687346133722" onmouseenter="enter('7702331687346133722');" onmouseout="out('7702331687346133722');" style="">  27 import androidx.appcompat.app.AppCompatDelegate;                                                         </span>
<span class="2878002094531064439" onmouseenter="enter('2878002094531064439');" onmouseout="out('2878002094531064439');" style="">  28 import androidx.fragment.app.Fragment;                                                                   </span>
<span class="-6438193002598115217" onmouseenter="enter('-6438193002598115217');" onmouseout="out('-6438193002598115217');" style="">  29 import androidx.fragment.app.FragmentManager;                                                            </span>
<span class="-5166869418136344301" onmouseenter="enter('-5166869418136344301');" onmouseout="out('-5166869418136344301');" style="">  30 import androidx.work.BackoffPolicy;                                                                      </span>
<span class="-4431582294891577664" onmouseenter="enter('-4431582294891577664');" onmouseout="out('-4431582294891577664');" style="">  31 import androidx.work.Constraints;                                                                        </span>
<span class="3185086351037345986" onmouseenter="enter('3185086351037345986');" onmouseout="out('3185086351037345986');" style="">  32 import androidx.work.ExistingPeriodicWorkPolicy;                                                         </span>
<span class="-3698903318922252687" onmouseenter="enter('-3698903318922252687');" onmouseout="out('-3698903318922252687');" style="">  33 import androidx.work.NetworkType;                                                                        </span>
<span class="2994979786497810699" onmouseenter="enter('2994979786497810699');" onmouseout="out('2994979786497810699');" style="">  34 import androidx.work.PeriodicWorkRequest;                                                                </span>
<span class="5786013396577205846" onmouseenter="enter('5786013396577205846');" onmouseout="out('5786013396577205846');" style="">  35 import androidx.work.WorkManager;                                                                        </span>
<span  style="">  36                                                                                                          </span>
<span class="-155835000323929258" onmouseenter="enter('-155835000323929258');" onmouseout="out('-155835000323929258');" style="">  37 import com.automattic.simplenote.analytics.AnalyticsTracker;                                             </span>
<span class="-2312717542362407496" onmouseenter="enter('-2312717542362407496');" onmouseout="out('-2312717542362407496');" style="">  38 import com.automattic.simplenote.analytics.AnalyticsTrackerNosara;                                       </span>
<span class="-149350832801163469" onmouseenter="enter('-149350832801163469');" onmouseout="out('-149350832801163469');" style="">  39 import com.automattic.simplenote.models.Account;                                                         </span>
<span class="9061368408436996655" onmouseenter="enter('9061368408436996655');" onmouseout="out('9061368408436996655');" style="">  40 import com.automattic.simplenote.models.Note;                                                            </span>
<span class="7102019831075911821" onmouseenter="enter('7102019831075911821');" onmouseout="out('7102019831075911821');" style="">  41 import com.automattic.simplenote.models.NoteCountIndexer;                                                </span>
<span class="4426422982983644373" onmouseenter="enter('4426422982983644373');" onmouseout="out('4426422982983644373');" style="">  42 import com.automattic.simplenote.models.NoteTagger;                                                      </span>
<span class="2894626372351854793" onmouseenter="enter('2894626372351854793');" onmouseout="out('2894626372351854793');" style="">  43 import com.automattic.simplenote.models.Preferences;                                                     </span>
<span class="107771998888903823" onmouseenter="enter('107771998888903823');" onmouseout="out('107771998888903823');" style="">  44 import com.automattic.simplenote.models.Tag;                                                             </span>
<span class="3201045117631650546" onmouseenter="enter('3201045117631650546');" onmouseout="out('3201045117631650546');" style="">  45 import com.automattic.simplenote.utils.AccountVerificationWatcher;                                       </span>
<span class="160698548927534529" onmouseenter="enter('160698548927534529');" onmouseout="out('160698548927534529');" style="">  46 import com.automattic.simplenote.utils.AppLog;                                                           </span>
<span class="7580776162261256599" onmouseenter="enter('7580776162261256599');" onmouseout="out('7580776162261256599');" style="">  47 import com.automattic.simplenote.utils.AppLog.Type;                                                      </span>
<span class="-3429573708794919100" onmouseenter="enter('-3429573708794919100');" onmouseout="out('-3429573708794919100');" style="">  48 import com.automattic.simplenote.utils.CrashUtils;                                                       </span>
<span class="8577850632926167445" onmouseenter="enter('8577850632926167445');" onmouseout="out('8577850632926167445');" style="">  49 import com.automattic.simplenote.utils.DisplayUtils;                                                     </span>
<span class="-7136497821822559876" onmouseenter="enter('-7136497821822559876');" onmouseout="out('-7136497821822559876');" style="">  50 import com.automattic.simplenote.utils.PrefUtils;                                                        </span>
<span class="-5753381984404345794" onmouseenter="enter('-5753381984404345794');" onmouseout="out('-5753381984404345794');" style="">  51 import com.automattic.simplenote.utils.SyncWorker;                                                       </span>
<span class="-6131823772648778947" onmouseenter="enter('-6131823772648778947');" onmouseout="out('-6131823772648778947');" style="">  52 import com.simperium.Simperium;                                                                          </span>
<span class="581913492648825508" onmouseenter="enter('581913492648825508');" onmouseout="out('581913492648825508');" style="">  53 import com.simperium.android.AndroidClient;                                                              </span>
<span class="1573888967082901106" onmouseenter="enter('1573888967082901106');" onmouseout="out('1573888967082901106');" style="">  54 import com.simperium.android.WebSocketManager;                                                           </span>
<span class="-8170925370861558125" onmouseenter="enter('-8170925370861558125');" onmouseout="out('-8170925370861558125');" style="">  55 import com.simperium.client.Bucket;                                                                      </span>
<span class="-6754815116321497467" onmouseenter="enter('-6754815116321497467');" onmouseout="out('-6754815116321497467');" style="">  56 import com.simperium.client.BucketNameInvalid;                                                           </span>
<span class="-8454203534157102839" onmouseenter="enter('-8454203534157102839');" onmouseout="out('-8454203534157102839');" style="">  57 import com.simperium.client.BucketObjectMissingException;                                                </span>
<span class="-6128914918417430442" onmouseenter="enter('-6128914918417430442');" onmouseout="out('-6128914918417430442');" style="">  58 import com.simperium.client.ChannelProvider.HeartbeatListener;                                           </span>
<span class="4554110602695491054" onmouseenter="enter('4554110602695491054');" onmouseout="out('4554110602695491054');" style="">  59 import com.simperium.client.User;                                                                        </span>
<span  style="">  60                                                                                                          </span>
<span class="7324884800271719890" onmouseenter="enter('7324884800271719890');" onmouseout="out('7324884800271719890');" style="">  61 import org.wordpress.passcodelock.AppLockManager;                                                        </span>
<span  style="">  62                                                                                                          </span>
<span class="1562735530241225598" onmouseenter="enter('1562735530241225598');" onmouseout="out('1562735530241225598');" style="">  63 import java.util.Calendar;                                                                               </span>
<span class="4169599896190320038" onmouseenter="enter('4169599896190320038');" onmouseout="out('4169599896190320038');" style="">  64 import java.util.HashMap;                                                                                </span>
<span class="6618655971923850695" onmouseenter="enter('6618655971923850695');" onmouseout="out('6618655971923850695');" style="">  65 import java.util.Map;                                                                                    </span>
<span class="-6356287537734540725" onmouseenter="enter('-6356287537734540725');" onmouseout="out('-6356287537734540725');" style="">  66 import java.util.concurrent.TimeUnit;                                                                    </span>
<span  style="">  67                                                                                                          </span>
<span class="4818424207955561707" onmouseenter="enter('4818424207955561707');" onmouseout="out('4818424207955561707');" style="">  68 import dagger.hilt.android.HiltAndroidApp;                                                               </span>
<span  style="">  69                                                                                                          </span>
<span class="-1044996963561409144" onmouseenter="enter('-1044996963561409144');" onmouseout="out('-1044996963561409144');" style="">  70 @HiltAndroidApp                                                                                          </span>
<span class="5261034755457737176" onmouseenter="enter('5261034755457737176');" onmouseout="out('5261034755457737176');" style="">  71 public class Simplenote extends Application implements HeartbeatListener {                               </span>
<span class="-9163404905215646951" onmouseenter="enter('-9163404905215646951');" onmouseout="out('-9163404905215646951');" style="">  72     public static final String DELETED_NOTE_ID = &quot;deletedNoteId&quot;;                                        </span>
<span class="5833235806353570833" onmouseenter="enter('5833235806353570833');" onmouseout="out('5833235806353570833');" style="">  73     public static final String SELECTED_NOTE_ID = &quot;selectedNoteId&quot;;                                      </span>
<span class="6246994664501093582" onmouseenter="enter('6246994664501093582');" onmouseout="out('6246994664501093582');" style="">  74     public static final String SCROLL_POSITION_PREFERENCES = &quot;scroll_position&quot;;                          </span>
<span class="-7519035262730977956" onmouseenter="enter('-7519035262730977956');" onmouseout="out('-7519035262730977956');" style="">  75     public static final String SYNC_TIME_PREFERENCES = &quot;sync_time&quot;;                                      </span>
<span class="-8693524844222569932" onmouseenter="enter('-8693524844222569932');" onmouseout="out('-8693524844222569932');" style="">  76     public static final String TAG = &quot;Simplenote&quot;;                                                       </span>
<span class="3215095332324123101" onmouseenter="enter('3215095332324123101');" onmouseout="out('3215095332324123101');" style="">  77     public static final int INTENT_EDIT_NOTE = 2;                                                        </span>
<span class="5587967888967017737" onmouseenter="enter('5587967888967017737');" onmouseout="out('5587967888967017737');" style="">  78     public static final int INTENT_PREFERENCES = 1;                                                      </span>
<span class="-7131135836515418231" onmouseenter="enter('-7131135836515418231');" onmouseout="out('-7131135836515418231');" style="">  79     public static final int ONE_MINUTE_MILLIS = 60 * 1000;  // 60 seconds                                </span>
<span class="2194585893201893968" onmouseenter="enter('2194585893201893968');" onmouseout="out('2194585893201893968');" style="">  80     public static final int TEN_SECONDS_MILLIS = 10 * 1000;  // 10 seconds                               </span>
<span class="-6274174172868583745" onmouseenter="enter('-6274174172868583745');" onmouseout="out('-6274174172868583745');" style="">  81     public static final int TWENTY_SECONDS_MILLIS = 20 * 1000;  // 20 seconds                            </span>
<span  style="">  82                                                                                                          </span>
<span class="53348235283476519" onmouseenter="enter('53348235283476519');" onmouseout="out('53348235283476519');" style="">  83     private static final String AUTH_PROVIDER = &quot;simplenote.com&quot;;                                        </span>
<span class="3318171237102217895" onmouseenter="enter('3318171237102217895');" onmouseout="out('3318171237102217895');" style="">  84     private static final String TAG_SYNC = &quot;sync&quot;;                                                       </span>
<span class="4591981961767073369" onmouseenter="enter('4591981961767073369');" onmouseout="out('4591981961767073369');" style="">  85     private static final long HEARTBEAT_TIMEOUT =  WebSocketManager.HEARTBEAT_INTERVAL * 2;              </span>
<span  style="">  86                                                                                                          </span>
<span class="4362379815071194585" onmouseenter="enter('4362379815071194585');" onmouseout="out('4362379815071194585');" style="">  87     private Activity mCurrentActivity;                                                                   </span>
<span  style="">  88                                                                                                          </span>
<span class="7535211107389480967" onmouseenter="enter('7535211107389480967');" onmouseout="out('7535211107389480967');" style="">  89     private static Bucket&lt;Account&gt; mAccountBucket;                                                       </span>
<span class="-5728139290357644856" onmouseenter="enter('-5728139290357644856');" onmouseout="out('-5728139290357644856');" style="">  90     private static Bucket&lt;Preferences&gt; mPreferencesBucket;                                               </span>
<span  style="">  91                                                                                                          </span>
<span class="-7913886194286774922" onmouseenter="enter('-7913886194286774922');" onmouseout="out('-7913886194286774922');" style="">  92     private Bucket&lt;Note&gt; mNotesBucket;                                                                   </span>
<span class="-3447103309759426335" onmouseenter="enter('-3447103309759426335');" onmouseout="out('-3447103309759426335');" style="">  93     private Bucket&lt;Tag&gt; mTagsBucket;                                                                     </span>
<span class="5428937602637269790" onmouseenter="enter('5428937602637269790');" onmouseout="out('5428937602637269790');" style="">  94     private SyncTimes&lt;Note&gt; mNoteSyncTimes;                                                              </span>
<span class="1419071614229033804" onmouseenter="enter('1419071614229033804');" onmouseout="out('1419071614229033804');" style="">  95     private Handler mHeartbeatHandler;                                                                   </span>
<span class="-7581284801413594720" onmouseenter="enter('-7581284801413594720');" onmouseout="out('-7581284801413594720');" style="">  96     private Runnable mHeartbeatRunnable;                                                                 </span>
<span class="8198744544525618575" onmouseenter="enter('8198744544525618575');" onmouseout="out('8198744544525618575');" style="">  97     private Simperium mSimperium;                                                                        </span>
<span class="-2339277597485504791" onmouseenter="enter('-2339277597485504791');" onmouseout="out('-2339277597485504791');" style="">  98     private boolean mIsInBackground = true;                                                              </span>
<span  style="">  99                                                                                                          </span>
<span class="-2716773701189387633" onmouseenter="enter('-2716773701189387633');" onmouseout="out('-2716773701189387633');" style=""> 100     public void onCreate() {                                                                             </span>
<span class="-2958534921295515858" onmouseenter="enter('-2958534921295515858');" onmouseout="out('-2958534921295515858');" style=""> 101         super.onCreate();                                                                                </span>
<span  style=""> 102                                                                                                          </span>
<span class="4646367228775257968" onmouseenter="enter('4646367228775257968');" onmouseout="out('4646367228775257968');" style=""> 103         CrashUtils.initWithContext(this);                                                                </span>
<span  style=""> 104                                                                                                          </span>
<span class="-5111101701014776486" onmouseenter="enter('-5111101701014776486');" onmouseout="out('-5111101701014776486');" style=""> 105         SimplenoteAppLock appLock = new SimplenoteAppLock(this);                                         </span>
<span class="-2126957952781882671" onmouseenter="enter('-2126957952781882671');" onmouseout="out('-2126957952781882671');" style=""> 106         AppLockManager.getInstance().setCurrentAppLock(appLock);                                         </span>
<span class="-192548486813849389" onmouseenter="enter('-192548486813849389');" onmouseout="out('-192548486813849389');" style=""> 107         appLock.enable();                                                                                </span>
<span  style=""> 108                                                                                                          </span>
<span class="-6610099647322125620" onmouseenter="enter('-6610099647322125620');" onmouseout="out('-6610099647322125620');" style=""> 109         mSimperium = Simperium.newClient(                                                                </span>
<span class="-4695376588658458273" onmouseenter="enter('-4695376588658458273');" onmouseout="out('-4695376588658458273');" style=""> 110                 BuildConfig.SIMPERIUM_APP_ID,                                                            </span>
<span class="4318504011662215607" onmouseenter="enter('4318504011662215607');" onmouseout="out('4318504011662215607');" style=""> 111                 BuildConfig.SIMPERIUM_APP_KEY,                                                           </span>
<span class="7848723611787395232" onmouseenter="enter('7848723611787395232');" onmouseout="out('7848723611787395232');" style=""> 112                 this                                                                                     </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 113         );                                                                                               </span>
<span  style=""> 114                                                                                                          </span>
<span class="7031285256639409704" onmouseenter="enter('7031285256639409704');" onmouseout="out('7031285256639409704');" style=""> 115         mSimperium.setAuthProvider(AUTH_PROVIDER);                                                       </span>
<span class="9065419810018319535" onmouseenter="enter('9065419810018319535');" onmouseout="out('9065419810018319535');" style=""> 116         mSimperium.addHeartbeatListener(this);                                                           </span>
<span  style=""> 117                                                                                                          </span>
<span class="-1855727841872273262" onmouseenter="enter('-1855727841872273262');" onmouseout="out('-1855727841872273262');" style=""> 118         mHeartbeatHandler = new Handler();                                                               </span>
<span class="-1915212603929880067" onmouseenter="enter('-1915212603929880067');" onmouseout="out('-1915212603929880067');" style=""> 119         mHeartbeatRunnable = new Runnable() {                                                            </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 120             @Override                                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 121             public void run() {                                                                          </span>
<span class="4054271998020395502" onmouseenter="enter('4054271998020395502');" onmouseout="out('4054271998020395502');" style=""> 122                 AppLog.add(Type.NETWORK, &quot;Heartbeat stopped&quot;);                                           </span>
<span class="6204465678829044464" onmouseenter="enter('6204465678829044464');" onmouseout="out('6204465678829044464');" style=""> 123                 mHeartbeatHandler.removeCallbacks(mHeartbeatRunnable);                                   </span>
<span class="209086841339708400" onmouseenter="enter('209086841339708400');" onmouseout="out('209086841339708400');" style=""> 124                 mHeartbeatHandler.postDelayed(mHeartbeatRunnable, HEARTBEAT_TIMEOUT);                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 125             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 126         };                                                                                               </span>
<span  style=""> 127                                                                                                          </span>
<span class="3598094545545730496" onmouseenter="enter('3598094545545730496');" onmouseout="out('3598094545545730496');" style=""> 128         SyncTimePersister syncTimePersister = new SyncTimePersister();                                   </span>
<span class="2948787900293662004" onmouseenter="enter('2948787900293662004');" onmouseout="out('2948787900293662004');" style=""> 129         mNoteSyncTimes = new SyncTimes&lt;&gt;(syncTimePersister.load());                                      </span>
<span class="8243749995089440347" onmouseenter="enter('8243749995089440347');" onmouseout="out('8243749995089440347');" style=""> 130         mNoteSyncTimes.addListener(syncTimePersister);                                                   </span>
<span  style=""> 131                                                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 132         try {                                                                                            </span>
<span class="-3712083184111777754" onmouseenter="enter('-3712083184111777754');" onmouseout="out('-3712083184111777754');" style=""> 133             mNotesBucket = mSimperium.bucket(new Note.Schema());                                         </span>
<span class="6461086551110304444" onmouseenter="enter('6461086551110304444');" onmouseout="out('6461086551110304444');" style=""> 134             mNotesBucket.addListener(mNoteSyncTimes.bucketListener);                                     </span>
<span class="8722979014886483827" onmouseenter="enter('8722979014886483827');" onmouseout="out('8722979014886483827');" style=""> 135             Tag.Schema tagSchema = new Tag.Schema();                                                     </span>
<span class="-9102287405513372469" onmouseenter="enter('-9102287405513372469');" onmouseout="out('-9102287405513372469');" style=""> 136             tagSchema.addIndex(new NoteCountIndexer(mNotesBucket));                                      </span>
<span class="-175388701111242190" onmouseenter="enter('-175388701111242190');" onmouseout="out('-175388701111242190');" style=""> 137             mTagsBucket = mSimperium.bucket(tagSchema);                                                  </span>
<span class="4439876589301981228" onmouseenter="enter('4439876589301981228');" onmouseout="out('4439876589301981228');" style=""> 138             mPreferencesBucket = mSimperium.bucket(new Preferences.Schema());                            </span>
<span class="-2625727357905435450" onmouseenter="enter('-2625727357905435450');" onmouseout="out('-2625727357905435450');" style=""> 139             mAccountBucket = mSimperium.bucket(new Account.Schema());                                    </span>
<span class="-8362296136901081825" onmouseenter="enter('-8362296136901081825');" onmouseout="out('-8362296136901081825');" style=""> 140             mAccountBucket.addOnNetworkChangeListener(                                                   </span>
<span class="4260345062700661756" onmouseenter="enter('4260345062700661756');" onmouseout="out('4260345062700661756');" style=""> 141                     new AccountVerificationWatcher(this, new VerificationListener())                     </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 142             );                                                                                           </span>
<span class="6417103925919259383" onmouseenter="enter('6417103925919259383');" onmouseout="out('6417103925919259383');" style=""> 143             // Every time a note changes or is deleted we need to reindex the tag counts                 </span>
<span class="1028093174501664258" onmouseenter="enter('1028093174501664258');" onmouseout="out('1028093174501664258');" style=""> 144             mNotesBucket.addListener(new NoteTagger(mTagsBucket));                                       </span>
<span class="9150575117674564137" onmouseenter="enter('9150575117674564137');" onmouseout="out('9150575117674564137');" style=""> 145         } catch (BucketNameInvalid e) {                                                                  </span>
<span class="5045778340242790475" onmouseenter="enter('5045778340242790475');" onmouseout="out('5045778340242790475');" style=""> 146             throw new RuntimeException(&quot;Could not create bucket&quot;, e);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 147         }                                                                                                </span>
<span  style=""> 148                                                                                                          </span>
<span class="-6104247182653922910" onmouseenter="enter('-6104247182653922910');" onmouseout="out('-6104247182653922910');" style=""> 149         AppCompatDelegate.setCompatVectorFromResourcesEnabled(true);                                     </span>
<span  style=""> 150                                                                                                          </span>
<span class="1079457458543399093" onmouseenter="enter('1079457458543399093');" onmouseout="out('1079457458543399093');" style=""> 151         ApplicationLifecycleMonitor applicationLifecycleMonitor = new ApplicationLifecycleMonitor();     </span>
<span class="381596098670029908" onmouseenter="enter('381596098670029908');" onmouseout="out('381596098670029908');" style=""> 152         registerComponentCallbacks(applicationLifecycleMonitor);                                         </span>
<span class="-8076193737884381578" onmouseenter="enter('-8076193737884381578');" onmouseout="out('-8076193737884381578');" style=""> 153         registerActivityLifecycleCallbacks(applicationLifecycleMonitor);                                 </span>
<span  style=""> 154                                                                                                          </span>
<span class="1335392763825317999" onmouseenter="enter('1335392763825317999');" onmouseout="out('1335392763825317999');" style=""> 155         AnalyticsTracker.registerTracker(new AnalyticsTrackerNosara(this));                              </span>
<span class="-1844307234054360739" onmouseenter="enter('-1844307234054360739');" onmouseout="out('-1844307234054360739');" style=""> 156         AnalyticsTracker.refreshMetadata(mSimperium.getUser().getEmail());                               </span>
<span class="8399230582885161213" onmouseenter="enter('8399230582885161213');" onmouseout="out('8399230582885161213');" style=""> 157         CrashUtils.setCurrentUser(mSimperium.getUser());                                                 </span>
<span  style=""> 158                                                                                                          </span>
<span class="-1455224487599073617" onmouseenter="enter('-1455224487599073617');" onmouseout="out('-1455224487599073617');" style=""> 159         AppLog.add(Type.DEVICE, getDeviceInfo());                                                        </span>
<span class="-4084915558750483061" onmouseenter="enter('-4084915558750483061');" onmouseout="out('-4084915558750483061');" style=""> 160         AppLog.add(Type.ACCOUNT, getAccountInfo());                                                      </span>
<span class="-671791306218270016" onmouseenter="enter('-671791306218270016');" onmouseout="out('-671791306218270016');" style=""> 161         AppLog.add(Type.LAYOUT, DisplayUtils.getDisplaySizeAndOrientation(Simplenote.this));             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 162     }                                                                                                    </span>
<span  style=""> 163                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 164     @Override                                                                                            </span>
<span class="7640484986889102054" onmouseenter="enter('7640484986889102054');" onmouseout="out('7640484986889102054');" style=""> 165     public void onBeat() {                                                                               </span>
<span class="7315421582655131800" onmouseenter="enter('7315421582655131800');" onmouseout="out('7315421582655131800');" style=""> 166         AppLog.add(Type.NETWORK, &quot;Heartbeat received&quot;);                                                  </span>
<span class="6204465678829044464" onmouseenter="enter('6204465678829044464');" onmouseout="out('6204465678829044464');" style=""> 167         mHeartbeatHandler.removeCallbacks(mHeartbeatRunnable);                                           </span>
<span class="209086841339708400" onmouseenter="enter('209086841339708400');" onmouseout="out('209086841339708400');" style=""> 168         mHeartbeatHandler.postDelayed(mHeartbeatRunnable, HEARTBEAT_TIMEOUT);                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 169     }                                                                                                    </span>
<span  style=""> 170                                                                                                          </span>
<span class="-5261177328937716585" onmouseenter="enter('-5261177328937716585');" onmouseout="out('-5261177328937716585');" style=""> 171     public static boolean analyticsIsEnabled() {                                                         </span>
<span class="1755574756529165678" onmouseenter="enter('1755574756529165678');" onmouseout="out('1755574756529165678');" style=""> 172         if (mPreferencesBucket == null) {                                                                </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 173             return true;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 174         }                                                                                                </span>
<span  style=""> 175                                                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 176         try {                                                                                            </span>
<span class="734651049898166881" onmouseenter="enter('734651049898166881');" onmouseout="out('734651049898166881');" style=""> 177             Preferences prefs = mPreferencesBucket.get(PREFERENCES_OBJECT_KEY);                          </span>
<span class="1383721738222569542" onmouseenter="enter('1383721738222569542');" onmouseout="out('1383721738222569542');" style=""> 178             return prefs.getAnalyticsEnabled();                                                          </span>
<span class="-1560847995217927266" onmouseenter="enter('-1560847995217927266');" onmouseout="out('-1560847995217927266');" style=""> 179         } catch (BucketObjectMissingException e) {                                                       </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 180             return true;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 181         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 182     }                                                                                                    </span>
<span  style=""> 183                                                                                                          </span>
<span class="4656537755100497713" onmouseenter="enter('4656537755100497713');" onmouseout="out('4656537755100497713');" style=""> 184     private String getAccountInfo() {                                                                    </span>
<span class="-4909194837402373696" onmouseenter="enter('-4909194837402373696');" onmouseout="out('-4909194837402373696');" style=""><abbr title=" 185         String email = &quot;Email: &quot; + (mSimperium != null &amp;&amp; mSimperium.getUser() != null ? mSimperium.getUser().getEmail() : &quot;?&quot;);"> 185         String email = &quot;Email: &quot; + (mSimperium != null &amp;&amp; mSimperium.getUser() != null ? mSimperium.getUsðŸ”µ</abbr></span>
<span class="-1815219994356976513" onmouseenter="enter('-1815219994356976513');" onmouseout="out('-1815219994356976513');" style=""> 186         String notes = &quot;Notes: &quot; + (mNotesBucket != null ? mNotesBucket.count() : &quot;?&quot;);                  </span>
<span class="-4701463784795893558" onmouseenter="enter('-4701463784795893558');" onmouseout="out('-4701463784795893558');" style=""> 187         String tags = &quot;Tags: &quot; + (mTagsBucket != null ? mTagsBucket.count() : &quot;?&quot;);                      </span>
<span class="5597163353916173356" onmouseenter="enter('5597163353916173356');" onmouseout="out('5597163353916173356');" style=""> 188         return email + &quot;\n&quot; + notes + &quot;\n&quot; + tags + &quot;\n\n&quot;;                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 189     }                                                                                                    </span>
<span  style=""> 190                                                                                                          </span>
<span class="-4176269846075250192" onmouseenter="enter('-4176269846075250192');" onmouseout="out('-4176269846075250192');" style=""> 191     private String getDeviceInfo() {                                                                     </span>
<span class="7581408804502865572" onmouseenter="enter('7581408804502865572');" onmouseout="out('7581408804502865572');" style=""><abbr title=" 192         String architecture = Build.DEVICE != null &amp;&amp; Build.DEVICE.matches(&quot;.+_cheets|cheets_.+&quot;) ? &quot;Chrome OS &quot; : &quot;Android &quot;;"> 192         String architecture = Build.DEVICE != null &amp;&amp; Build.DEVICE.matches(&quot;.+_cheets|cheets_.+&quot;) ? &quot;ChroðŸ”µ</abbr></span>
<span class="-921339907737118722" onmouseenter="enter('-921339907737118722');" onmouseout="out('-921339907737118722');" style=""> 193         String device = &quot;Device: &quot; + Build.MANUFACTURER + &quot; &quot; + Build.MODEL + &quot; (&quot; + Build.DEVICE + &quot;)&quot;; </span>
<span class="-7970072835487477375" onmouseenter="enter('-7970072835487477375');" onmouseout="out('-7970072835487477375');" style=""><abbr title=" 194         String system = &quot;System: &quot; + architecture + Build.VERSION.RELEASE + &quot; (&quot; + Build.VERSION.SDK_INT + &quot;)&quot;;"> 194         String system = &quot;System: &quot; + architecture + Build.VERSION.RELEASE + &quot; (&quot; + Build.VERSION.SDK_INT ðŸ”µ</abbr></span>
<span class="3648033425382070956" onmouseenter="enter('3648033425382070956');" onmouseout="out('3648033425382070956');" style=""> 195         String app = &quot;App: Simplenote &quot; + PrefUtils.versionInfo();                                       </span>
<span class="6793127563363345208" onmouseenter="enter('6793127563363345208');" onmouseout="out('6793127563363345208');" style=""> 196         return device + &quot;\n&quot; + system + &quot;\n&quot; + app + &quot;\n\n&quot;;                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 197     }                                                                                                    </span>
<span  style=""> 198                                                                                                          </span>
<span class="-2452840228833033114" onmouseenter="enter('-2452840228833033114');" onmouseout="out('-2452840228833033114');" style=""> 199     public Simperium getSimperium() {                                                                    </span>
<span class="-1067936515361198064" onmouseenter="enter('-1067936515361198064');" onmouseout="out('-1067936515361198064');" style=""> 200         return mSimperium;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 201     }                                                                                                    </span>
<span  style=""> 202                                                                                                          </span>
<span class="8475950615112765175" onmouseenter="enter('8475950615112765175');" onmouseout="out('8475950615112765175');" style=""> 203     public Bucket&lt;Note&gt; getNotesBucket() {                                                               </span>
<span class="3001734825963445545" onmouseenter="enter('3001734825963445545');" onmouseout="out('3001734825963445545');" style=""> 204         return mNotesBucket;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 205     }                                                                                                    </span>
<span  style=""> 206                                                                                                          </span>
<span class="365385451944262609" onmouseenter="enter('365385451944262609');" onmouseout="out('365385451944262609');" style=""> 207     public SyncTimes getNoteSyncTimes() {                                                                </span>
<span class="6562319796144170989" onmouseenter="enter('6562319796144170989');" onmouseout="out('6562319796144170989');" style=""> 208         return mNoteSyncTimes;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 209     }                                                                                                    </span>
<span  style=""> 210                                                                                                          </span>
<span class="1680392141704969043" onmouseenter="enter('1680392141704969043');" onmouseout="out('1680392141704969043');" style=""> 211     public Bucket&lt;Tag&gt; getTagsBucket() {                                                                 </span>
<span class="6135487691608919718" onmouseenter="enter('6135487691608919718');" onmouseout="out('6135487691608919718');" style=""> 212         return mTagsBucket;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 213     }                                                                                                    </span>
<span  style=""> 214                                                                                                          </span>
<span class="-4506300185279466066" onmouseenter="enter('-4506300185279466066');" onmouseout="out('-4506300185279466066');" style=""> 215     public Bucket&lt;Preferences&gt; getPreferencesBucket() {                                                  </span>
<span class="6715102450829888836" onmouseenter="enter('6715102450829888836');" onmouseout="out('6715102450829888836');" style=""> 216         return mPreferencesBucket;                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 217     }                                                                                                    </span>
<span  style=""> 218                                                                                                          </span>
<span class="8939354386013821015" onmouseenter="enter('8939354386013821015');" onmouseout="out('8939354386013821015');" style=""> 219     public Bucket&lt;Account&gt; getAccountBucket() {                                                          </span>
<span class="2771394281478310822" onmouseenter="enter('2771394281478310822');" onmouseout="out('2771394281478310822');" style=""> 220         return mAccountBucket;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 221     }                                                                                                    </span>
<span  style=""> 222                                                                                                          </span>
<span class="-5307885032361585350" onmouseenter="enter('-5307885032361585350');" onmouseout="out('-5307885032361585350');" style=""> 223     public boolean isInBackground() {                                                                    </span>
<span class="3812912940560000313" onmouseenter="enter('3812912940560000313');" onmouseout="out('3812912940560000313');" style=""> 224         return mIsInBackground;                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 225     }                                                                                                    </span>
<span  style=""> 226                                                                                                          </span>
<span class="9084571718636450070" onmouseenter="enter('9084571718636450070');" onmouseout="out('9084571718636450070');" style=""> 227     public void loginWithToken(String email, String spToken) {                                           </span>
<span class="2848300691293606814" onmouseenter="enter('2848300691293606814');" onmouseout="out('2848300691293606814');" style=""> 228         // Manually authorize the user with Simperium                                                    </span>
<span class="-4556253445089435832" onmouseenter="enter('-4556253445089435832');" onmouseout="out('-4556253445089435832');" style=""> 229         User user = mSimperium.getUser();                                                                </span>
<span class="-4915005065677121955" onmouseenter="enter('-4915005065677121955');" onmouseout="out('-4915005065677121955');" style=""> 230         user.setAccessToken(spToken);                                                                    </span>
<span class="877344059420132568" onmouseenter="enter('877344059420132568');" onmouseout="out('877344059420132568');" style=""> 231         user.setEmail(email);                                                                            </span>
<span class="538456865812119501" onmouseenter="enter('538456865812119501');" onmouseout="out('538456865812119501');" style=""> 232         user.setStatus(User.Status.AUTHORIZED);                                                          </span>
<span  style=""> 233                                                                                                          </span>
<span class="-755513241422191443" onmouseenter="enter('-755513241422191443');" onmouseout="out('-755513241422191443');" style=""> 234         // Store the user data in Simperium shared preferences                                           </span>
<span class="4508720492858536163" onmouseenter="enter('4508720492858536163');" onmouseout="out('4508720492858536163');" style=""> 235         SharedPreferences.Editor editor = AndroidClient.sharedPreferences(this).edit();                  </span>
<span class="2812904514433972765" onmouseenter="enter('2812904514433972765');" onmouseout="out('2812904514433972765');" style=""> 236         editor.putString(USER_ACCESS_TOKEN_PREFERENCE, user.getAccessToken());                           </span>
<span class="-3810862774138306438" onmouseenter="enter('-3810862774138306438');" onmouseout="out('-3810862774138306438');" style=""> 237         editor.putString(USER_EMAIL_PREFERENCE, user.getEmail());                                        </span>
<span class="-5305612453340718340" onmouseenter="enter('-5305612453340718340');" onmouseout="out('-5305612453340718340');" style=""> 238         editor.apply();                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 239     }                                                                                                    </span>
<span  style=""> 240                                                                                                          </span>
<span class="2855914666290052253" onmouseenter="enter('2855914666290052253');" onmouseout="out('2855914666290052253');" style=""> 241     public boolean isLoggedIn() {                                                                        </span>
<span class="-4556253445089435832" onmouseenter="enter('-4556253445089435832');" onmouseout="out('-4556253445089435832');" style=""> 242         User user = mSimperium.getUser();                                                                </span>
<span class="754608154577126470" onmouseenter="enter('754608154577126470');" onmouseout="out('754608154577126470');" style=""> 243         return user != null &amp;&amp; user.getStatus() == User.Status.AUTHORIZED;                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 244     }                                                                                                    </span>
<span  style=""> 245                                                                                                          </span>
<span class="542821705420321329" onmouseenter="enter('542821705420321329');" onmouseout="out('542821705420321329');" style=""> 246     public String getUserEmail() {                                                                       </span>
<span class="-4556253445089435832" onmouseenter="enter('-4556253445089435832');" onmouseout="out('-4556253445089435832');" style=""> 247         User user = mSimperium.getUser();                                                                </span>
<span class="-5079006915454915875" onmouseenter="enter('-5079006915454915875');" onmouseout="out('-5079006915454915875');" style=""> 248         return user != null ? user.getEmail() : null;                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 249     }                                                                                                    </span>
<span  style=""> 250                                                                                                          </span>
<span class="2937462577027157320" onmouseenter="enter('2937462577027157320');" onmouseout="out('2937462577027157320');" style=""> 251     private void showUnverifiedAccount() {                                                               </span>
<span class="3922537486351779763" onmouseenter="enter('3922537486351779763');" onmouseout="out('3922537486351779763');" style=""> 252         showReviewAccountOrVerifyEmail(mCurrentActivity, false);                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 253     }                                                                                                    </span>
<span  style=""> 254                                                                                                          </span>
<span class="-1951278736681351578" onmouseenter="enter('-1951278736681351578');" onmouseout="out('-1951278736681351578');" style=""> 255     private void showWaitingOnEmailConfirmation() {                                                      </span>
<span class="1761307439081029946" onmouseenter="enter('1761307439081029946');" onmouseout="out('1761307439081029946');" style=""> 256         showReviewAccountOrVerifyEmail(mCurrentActivity, true);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 257     }                                                                                                    </span>
<span  style=""> 258                                                                                                          </span>
<span class="-3355299330142398603" onmouseenter="enter('-3355299330142398603');" onmouseout="out('-3355299330142398603');" style=""> 259     private void dismissReviewAccountDialog() {                                                          </span>
<span class="-4849539574283382852" onmouseenter="enter('-4849539574283382852');" onmouseout="out('-4849539574283382852');" style=""> 260         FragmentManager fragmentManager;                                                                 </span>
<span class="-8221972854904999507" onmouseenter="enter('-8221972854904999507');" onmouseout="out('-8221972854904999507');" style=""> 261         if (mCurrentActivity instanceof NotesActivity) {                                                 </span>
<span class="-4446108831753952720" onmouseenter="enter('-4446108831753952720');" onmouseout="out('-4446108831753952720');" style=""> 262             fragmentManager = ((NotesActivity) mCurrentActivity).getSupportFragmentManager();            </span>
<span class="-5847895969969896469" onmouseenter="enter('-5847895969969896469');" onmouseout="out('-5847895969969896469');" style=""> 263         } else if (mCurrentActivity instanceof NoteEditorActivity) {                                     </span>
<span class="5051439688965850781" onmouseenter="enter('5051439688965850781');" onmouseout="out('5051439688965850781');" style=""> 264             fragmentManager = ((NoteEditorActivity) mCurrentActivity).getSupportFragmentManager();       </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 265         } else {                                                                                         </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 266             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 267         }                                                                                                </span>
<span  style=""> 268                                                                                                          </span>
<span class="-1386275356577769478" onmouseenter="enter('-1386275356577769478');" onmouseout="out('-1386275356577769478');" style=""> 269         for (Fragment fragment : fragmentManager.getFragments()) {                                       </span>
<span class="-3329316781317474527" onmouseenter="enter('-3329316781317474527');" onmouseout="out('-3329316781317474527');" style=""> 270             if (fragment instanceof FullScreenDialogFragment) {                                          </span>
<span class="-4810257083241229038" onmouseenter="enter('-4810257083241229038');" onmouseout="out('-4810257083241229038');" style=""> 271                 ((FullScreenDialogFragment) fragment).dismiss();                                         </span>
<span  style=""> 272                                                                                                          </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 273                 return;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 274             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 275         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 276     }                                                                                                    </span>
<span class="2332882432376014482" onmouseenter="enter('2332882432376014482');" onmouseout="out('2332882432376014482');" style=""> 277     private void showReviewAccountOrVerifyEmail(final Activity activity, boolean hasSentEmail) {         </span>
<span class="-3746560840586400800" onmouseenter="enter('-3746560840586400800');" onmouseout="out('-3746560840586400800');" style=""> 278         final FragmentManager fragmentManager;                                                           </span>
<span class="-8603498050420470579" onmouseenter="enter('-8603498050420470579');" onmouseout="out('-8603498050420470579');" style=""> 279         final @IdRes int container;                                                                      </span>
<span  style=""> 280                                                                                                          </span>
<span class="6030899174327056570" onmouseenter="enter('6030899174327056570');" onmouseout="out('6030899174327056570');" style=""> 281         if (activity instanceof NotesActivity) {                                                         </span>
<span class="1073665129405439698" onmouseenter="enter('1073665129405439698');" onmouseout="out('1073665129405439698');" style=""> 282             fragmentManager = ((NotesActivity) activity).getSupportFragmentManager();                    </span>
<span class="-6813895032683749169" onmouseenter="enter('-6813895032683749169');" onmouseout="out('-6813895032683749169');" style=""> 283             container = R.id.drawer_layout;                                                              </span>
<span class="-6053920028300427274" onmouseenter="enter('-6053920028300427274');" onmouseout="out('-6053920028300427274');" style=""> 284         } else if (activity instanceof NoteEditorActivity) {                                             </span>
<span class="6040549106017882092" onmouseenter="enter('6040549106017882092');" onmouseout="out('6040549106017882092');" style=""> 285             fragmentManager = ((NoteEditorActivity) activity).getSupportFragmentManager();               </span>
<span class="5106126685052663813" onmouseenter="enter('5106126685052663813');" onmouseout="out('5106126685052663813');" style=""> 286             container = android.R.id.content;                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 287         } else {                                                                                         </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 288             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 289         }                                                                                                </span>
<span  style=""> 290                                                                                                          </span>
<span class="7005732918292981998" onmouseenter="enter('7005732918292981998');" onmouseout="out('7005732918292981998');" style=""> 291         final Bundle bundle = ReviewAccountVerifyEmailFragment.newBundle(hasSentEmail);                  </span>
<span  style=""> 292                                                                                                          </span>
<span class="3595979510228424567" onmouseenter="enter('3595979510228424567');" onmouseout="out('3595979510228424567');" style=""> 293         new FullScreenDialogFragment.Builder(activity)                                                   </span>
<span class="1707505884861492887" onmouseenter="enter('1707505884861492887');" onmouseout="out('1707505884861492887');" style=""> 294             .setContent(ReviewAccountVerifyEmailFragment.class, bundle)                                  </span>
<span class="-7730204517414597577" onmouseenter="enter('-7730204517414597577');" onmouseout="out('-7730204517414597577');" style=""> 295             .setOnConfirmListener(null)                                                                  </span>
<span class="5374833142702814180" onmouseenter="enter('5374833142702814180');" onmouseout="out('5374833142702814180');" style=""> 296             .setOnDismissListener(null)                                                                  </span>
<span class="7759061789741077424" onmouseenter="enter('7759061789741077424');" onmouseout="out('7759061789741077424');" style=""> 297             .setToolbarElevation(0)                                                                      </span>
<span class="9206956024064176315" onmouseenter="enter('9206956024064176315');" onmouseout="out('9206956024064176315');" style=""> 298             .setViewContainer(container)                                                                 </span>
<span class="3616109827455273093" onmouseenter="enter('3616109827455273093');" onmouseout="out('3616109827455273093');" style=""> 299             .build()                                                                                     </span>
<span class="4065757138376521916" onmouseenter="enter('4065757138376521916');" onmouseout="out('4065757138376521916');" style=""> 300             .show(fragmentManager, FullScreenDialogFragment.TAG);                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 301     }                                                                                                    </span>
<span  style=""> 302                                                                                                          </span>
<span class="72925131662297315" onmouseenter="enter('72925131662297315');" onmouseout="out('72925131662297315');" style=""><abbr title=" 303     private class ApplicationLifecycleMonitor implements Application.ActivityLifecycleCallbacks, ComponentCallbacks2 {"> 303     private class ApplicationLifecycleMonitor implements Application.ActivityLifecycleCallbacks, ComponenðŸ”µ</abbr></span>
<span class="3103941996577506651" onmouseenter="enter('3103941996577506651');" onmouseout="out('3103941996577506651');" style=""> 304         // ComponentCallbacks                                                                            </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 305         @Override                                                                                        </span>
<span class="2274976836934101801" onmouseenter="enter('2274976836934101801');" onmouseout="out('2274976836934101801');" style=""> 306         public void onTrimMemory(int level) {                                                            </span>
<span class="-1837603280920501393" onmouseenter="enter('-1837603280920501393');" onmouseout="out('-1837603280920501393');" style=""> 307             if (level == ComponentCallbacks2.TRIM_MEMORY_UI_HIDDEN) {                                    </span>
<span class="-4583313459107718715" onmouseenter="enter('-4583313459107718715');" onmouseout="out('-4583313459107718715');" style=""> 308                 mIsInBackground = true;                                                                  </span>
<span  style=""> 309                                                                                                          </span>
<span class="-7450229904998226699" onmouseenter="enter('-7450229904998226699');" onmouseout="out('-7450229904998226699');" style=""> 310                 // Give the buckets some time to finish sync, then stop them                             </span>
<span class="7162501222170899627" onmouseenter="enter('7162501222170899627');" onmouseout="out('7162501222170899627');" style=""> 311                 new Handler().postDelayed(new Runnable() {                                               </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 312                     @Override                                                                            </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 313                     public void run() {                                                                  </span>
<span class="1937243434374323959" onmouseenter="enter('1937243434374323959');" onmouseout="out('1937243434374323959');" style=""> 314                         if (!mIsInBackground) {                                                          </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 315                             return;                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 316                         }                                                                                </span>
<span  style=""> 317                                                                                                          </span>
<span class="-2200993789662803159" onmouseenter="enter('-2200993789662803159');" onmouseout="out('-2200993789662803159');" style=""> 318                         if (mAccountBucket != null) {                                                    </span>
<span class="1251129820679832423" onmouseenter="enter('1251129820679832423');" onmouseout="out('1251129820679832423');" style=""> 319                             mAccountBucket.stop();                                                       </span>
<span class="3408645548049517244" onmouseenter="enter('3408645548049517244');" onmouseout="out('3408645548049517244');" style=""> 320                             AppLog.add(Type.SYNC, &quot;Stopped account bucket (Simplenote)&quot;);                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 321                         }                                                                                </span>
<span  style=""> 322                                                                                                          </span>
<span class="6694920678363305995" onmouseenter="enter('6694920678363305995');" onmouseout="out('6694920678363305995');" style=""> 323                         if (mNotesBucket != null) {                                                      </span>
<span class="-9222421628383802707" onmouseenter="enter('-9222421628383802707');" onmouseout="out('-9222421628383802707');" style=""> 324                             mNotesBucket.stop();                                                         </span>
<span class="-8256972624868266110" onmouseenter="enter('-8256972624868266110');" onmouseout="out('-8256972624868266110');" style=""> 325                             AppLog.add(Type.SYNC, &quot;Stopped note bucket (Simplenote)&quot;);                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 326                         }                                                                                </span>
<span  style=""> 327                                                                                                          </span>
<span class="-6758879846146730703" onmouseenter="enter('-6758879846146730703');" onmouseout="out('-6758879846146730703');" style=""> 328                         if (mTagsBucket != null) {                                                       </span>
<span class="7440275301365041157" onmouseenter="enter('7440275301365041157');" onmouseout="out('7440275301365041157');" style=""> 329                             mTagsBucket.stop();                                                          </span>
<span class="3632904236952271414" onmouseenter="enter('3632904236952271414');" onmouseout="out('3632904236952271414');" style=""> 330                             AppLog.add(Type.SYNC, &quot;Stopped tag bucket (Simplenote)&quot;);                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 331                         }                                                                                </span>
<span  style=""> 332                                                                                                          </span>
<span class="-6192025378026905457" onmouseenter="enter('-6192025378026905457');" onmouseout="out('-6192025378026905457');" style=""> 333                         if (mPreferencesBucket != null) {                                                </span>
<span class="-7405985386384713994" onmouseenter="enter('-7405985386384713994');" onmouseout="out('-7405985386384713994');" style=""> 334                             mPreferencesBucket.stop();                                                   </span>
<span class="-5651227749650235797" onmouseenter="enter('-5651227749650235797');" onmouseout="out('-5651227749650235797');" style=""> 335                             AppLog.add(Type.SYNC, &quot;Stopped preference bucket (Simplenote)&quot;);             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 336                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 337                     }                                                                                    </span>
<span class="6786785065928556607" onmouseenter="enter('6786785065928556607');" onmouseout="out('6786785065928556607');" style=""> 338                 }, TEN_SECONDS_MILLIS);                                                                  </span>
<span  style=""> 339                                                                                                          </span>
<span class="5599227697513165792" onmouseenter="enter('5599227697513165792');" onmouseout="out('5599227697513165792');" style=""> 340                 PeriodicWorkRequest syncWorkRequest = new PeriodicWorkRequest.Builder(                   </span>
<span class="1408067071873564180" onmouseenter="enter('1408067071873564180');" onmouseout="out('1408067071873564180');" style=""> 341                     SyncWorker.class,                                                                    </span>
<span class="2973406529671611856" onmouseenter="enter('2973406529671611856');" onmouseout="out('2973406529671611856');" style=""> 342                     PeriodicWorkRequest.MIN_PERIODIC_INTERVAL_MILLIS,                                    </span>
<span class="-80463983603518610" onmouseenter="enter('-80463983603518610');" onmouseout="out('-80463983603518610');" style=""> 343                     TimeUnit.MILLISECONDS                                                                </span>
<span class="-2015476096144723150" onmouseenter="enter('-2015476096144723150');" onmouseout="out('-2015476096144723150');" style=""> 344                 )                                                                                        </span>
<span class="-6346518985674576590" onmouseenter="enter('-6346518985674576590');" onmouseout="out('-6346518985674576590');" style=""><abbr title=" 345                     .setConstraints(new Constraints.Builder().setRequiredNetworkType(NetworkType.CONNECTED).build())"> 345                     .setConstraints(new Constraints.Builder().setRequiredNetworkType(NetworkType.CONNECTEðŸ”µ</abbr></span>
<span class="1554687427185788181" onmouseenter="enter('1554687427185788181');" onmouseout="out('1554687427185788181');" style=""> 346                     .setBackoffCriteria(BackoffPolicy.LINEAR, ONE_MINUTE_MILLIS, TimeUnit.MILLISECONDS)  </span>
<span class="1665711086511789732" onmouseenter="enter('1665711086511789732');" onmouseout="out('1665711086511789732');" style=""> 347                     .setInitialDelay(TWENTY_SECONDS_MILLIS, TimeUnit.MILLISECONDS)                       </span>
<span class="8816433673387605168" onmouseenter="enter('8816433673387605168');" onmouseout="out('8816433673387605168');" style=""> 348                     .addTag(TAG_SYNC)                                                                    </span>
<span class="-368814941510255410" onmouseenter="enter('-368814941510255410');" onmouseout="out('-368814941510255410');" style=""> 349                     .build();                                                                            </span>
<span class="-957289309636137365" onmouseenter="enter('-957289309636137365');" onmouseout="out('-957289309636137365');" style=""> 350                 WorkManager.getInstance(getApplicationContext()).enqueueUniquePeriodicWork(              </span>
<span class="1890759471518076421" onmouseenter="enter('1890759471518076421');" onmouseout="out('1890759471518076421');" style=""> 351                     TAG_SYNC,                                                                            </span>
<span class="7031641102110402794" onmouseenter="enter('7031641102110402794');" onmouseout="out('7031641102110402794');" style=""> 352                     ExistingPeriodicWorkPolicy.REPLACE,                                                  </span>
<span class="7844672442552797006" onmouseenter="enter('7844672442552797006');" onmouseout="out('7844672442552797006');" style=""> 353                     syncWorkRequest                                                                      </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 354                 );                                                                                       </span>
<span class="-6272207136493112653" onmouseenter="enter('-6272207136493112653');" onmouseout="out('-6272207136493112653');" style=""> 355                 Log.d(&quot;Simplenote.onTrimMemory&quot;, &quot;Started worker&quot;);                                      </span>
<span  style=""> 356                                                                                                          </span>
<span class="-341478899160030823" onmouseenter="enter('-341478899160030823');" onmouseout="out('-341478899160030823');" style=""> 357                 // Send analytics if app is in the background                                            </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 358                 AnalyticsTracker.track(                                                                  </span>
<span class="3485374480742718668" onmouseenter="enter('3485374480742718668');" onmouseout="out('3485374480742718668');" style=""> 359                         AnalyticsTracker.Stat.APPLICATION_CLOSED,                                        </span>
<span class="3255995284721740364" onmouseenter="enter('3255995284721740364');" onmouseout="out('3255995284721740364');" style=""> 360                         AnalyticsTracker.CATEGORY_USER,                                                  </span>
<span class="3140085526459106828" onmouseenter="enter('3140085526459106828');" onmouseout="out('3140085526459106828');" style=""> 361                         &quot;application_closed&quot;                                                             </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 362                 );                                                                                       </span>
<span class="-7792835064107422696" onmouseenter="enter('-7792835064107422696');" onmouseout="out('-7792835064107422696');" style=""> 363                 AnalyticsTracker.flush();                                                                </span>
<span class="-6664472740739433069" onmouseenter="enter('-6664472740739433069');" onmouseout="out('-6664472740739433069');" style=""> 364                 AppLog.add(Type.ACTION, &quot;App closed&quot;);                                                   </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 365             } else {                                                                                     </span>
<span class="-6497924770077247329" onmouseenter="enter('-6497924770077247329');" onmouseout="out('-6497924770077247329');" style=""> 366                 mIsInBackground = false;                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 367             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 368         }                                                                                                </span>
<span  style=""> 369                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 370         @Override                                                                                        </span>
<span class="6856792358586712593" onmouseenter="enter('6856792358586712593');" onmouseout="out('6856792358586712593');" style=""> 371         public void onConfigurationChanged(@NonNull Configuration newConfig) {                           </span>
<span class="-671791306218270016" onmouseenter="enter('-671791306218270016');" onmouseout="out('-671791306218270016');" style=""> 372             AppLog.add(Type.LAYOUT, DisplayUtils.getDisplaySizeAndOrientation(Simplenote.this));         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 373         }                                                                                                </span>
<span  style=""> 374                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 375         @Override                                                                                        </span>
<span class="-4981664158563918121" onmouseenter="enter('-4981664158563918121');" onmouseout="out('-4981664158563918121');" style=""> 376         public void onLowMemory() {                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 377         }                                                                                                </span>
<span  style=""> 378                                                                                                          </span>
<span class="-4597135701451302256" onmouseenter="enter('-4597135701451302256');" onmouseout="out('-4597135701451302256');" style=""> 379         // ActivityLifecycleCallbacks                                                                    </span>
<span class="-9026181668329411137" onmouseenter="enter('-9026181668329411137');" onmouseout="out('-9026181668329411137');" style=""> 380         @SuppressLint(&quot;LongLogTag&quot;)                                                                      </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 381         @Override                                                                                        </span>
<span class="-3924077821180675166" onmouseenter="enter('-3924077821180675166');" onmouseout="out('-3924077821180675166');" style=""> 382         public void onActivityResumed(@NonNull Activity activity) {                                      </span>
<span class="-1824713474309501961" onmouseenter="enter('-1824713474309501961');" onmouseout="out('-1824713474309501961');" style=""> 383             if (mIsInBackground) {                                                                       </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 384                 AnalyticsTracker.track(                                                                  </span>
<span class="-9053818901097240592" onmouseenter="enter('-9053818901097240592');" onmouseout="out('-9053818901097240592');" style=""> 385                         AnalyticsTracker.Stat.APPLICATION_OPENED,                                        </span>
<span class="3255995284721740364" onmouseenter="enter('3255995284721740364');" onmouseout="out('3255995284721740364');" style=""> 386                         AnalyticsTracker.CATEGORY_USER,                                                  </span>
<span class="5765105888033949578" onmouseenter="enter('5765105888033949578');" onmouseout="out('5765105888033949578');" style=""> 387                         &quot;application_opened&quot;                                                             </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 388                 );                                                                                       </span>
<span  style=""> 389                                                                                                          </span>
<span class="-6497924770077247329" onmouseenter="enter('-6497924770077247329');" onmouseout="out('-6497924770077247329');" style=""> 390                 mIsInBackground = false;                                                                 </span>
<span class="-6333475820451850994" onmouseenter="enter('-6333475820451850994');" onmouseout="out('-6333475820451850994');" style=""> 391                 AppLog.add(Type.ACTION, &quot;App opened&quot;);                                                   </span>
<span class="7194601290059164528" onmouseenter="enter('7194601290059164528');" onmouseout="out('7194601290059164528');" style=""> 392                 WorkManager.getInstance(getApplicationContext()).cancelUniqueWork(TAG_SYNC);             </span>
<span class="-5838238914207245906" onmouseenter="enter('-5838238914207245906');" onmouseout="out('-5838238914207245906');" style=""> 393                 Log.d(&quot;Simplenote.onActivityResumed&quot;, &quot;Stopped worker&quot;);                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 394             }                                                                                            </span>
<span  style=""> 395                                                                                                          </span>
<span class="5242495516731300622" onmouseenter="enter('5242495516731300622');" onmouseout="out('5242495516731300622');" style=""> 396             String activitySimpleName = activity.getClass().getSimpleName();                             </span>
<span  style=""> 397                                                                                                          </span>
<span class="-8846517571959259873" onmouseenter="enter('-8846517571959259873');" onmouseout="out('-8846517571959259873');" style=""> 398             mAccountBucket.start();                                                                      </span>
<span class="4612815040229921167" onmouseenter="enter('4612815040229921167');" onmouseout="out('4612815040229921167');" style=""> 399             AppLog.add(Type.SYNC, &quot;Started account bucket (&quot; + activitySimpleName + &quot;)&quot;);                </span>
<span class="8915853447379815980" onmouseenter="enter('8915853447379815980');" onmouseout="out('8915853447379815980');" style=""> 400             mPreferencesBucket.start();                                                                  </span>
<span class="-3539741953604827644" onmouseenter="enter('-3539741953604827644');" onmouseout="out('-3539741953604827644');" style=""> 401             AppLog.add(Type.SYNC, &quot;Started preference bucket (&quot; + activitySimpleName + &quot;)&quot;);             </span>
<span class="-295722270474880574" onmouseenter="enter('-295722270474880574');" onmouseout="out('-295722270474880574');" style=""> 402             mNotesBucket.start();                                                                        </span>
<span class="-9002409501487253211" onmouseenter="enter('-9002409501487253211');" onmouseout="out('-9002409501487253211');" style=""> 403             AppLog.add(Type.SYNC, &quot;Started note bucket (&quot; + activitySimpleName + &quot;)&quot;);                   </span>
<span class="-8311192473139463459" onmouseenter="enter('-8311192473139463459');" onmouseout="out('-8311192473139463459');" style=""> 404             mTagsBucket.start();                                                                         </span>
<span class="2042044416855016901" onmouseenter="enter('2042044416855016901');" onmouseout="out('2042044416855016901');" style=""> 405             AppLog.add(Type.SYNC, &quot;Started tag bucket (&quot; + activitySimpleName + &quot;)&quot;);                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 406         }                                                                                                </span>
<span  style=""> 407                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 408         @Override                                                                                        </span>
<span class="3802784276197342934" onmouseenter="enter('3802784276197342934');" onmouseout="out('3802784276197342934');" style=""> 409         public void onActivityCreated(@NonNull Activity activity, Bundle savedInstanceState) {           </span>
<span  style=""> 410                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 411         }                                                                                                </span>
<span  style=""> 412                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 413         @Override                                                                                        </span>
<span class="1925798780581030833" onmouseenter="enter('1925798780581030833');" onmouseout="out('1925798780581030833');" style=""> 414         public void onActivityStarted(@NonNull Activity activity) {                                      </span>
<span class="9099687594228455443" onmouseenter="enter('9099687594228455443');" onmouseout="out('9099687594228455443');" style=""> 415             mCurrentActivity = activity;                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 416         }                                                                                                </span>
<span  style=""> 417                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 418         @Override                                                                                        </span>
<span class="6762635398346313192" onmouseenter="enter('6762635398346313192');" onmouseout="out('6762635398346313192');" style=""> 419         public void onActivityPaused(@NonNull Activity activity) {                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 420         }                                                                                                </span>
<span  style=""> 421                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 422         @Override                                                                                        </span>
<span class="-7982391621651416385" onmouseenter="enter('-7982391621651416385');" onmouseout="out('-7982391621651416385');" style=""> 423         public void onActivityStopped(@NonNull Activity activity) {                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 424         }                                                                                                </span>
<span  style=""> 425                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 426         @Override                                                                                        </span>
<span class="2275335402994256657" onmouseenter="enter('2275335402994256657');" onmouseout="out('2275335402994256657');" style=""> 427         public void onActivitySaveInstanceState(@NonNull Activity activity, @NonNull Bundle outState) {  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 428         }                                                                                                </span>
<span  style=""> 429                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 430         @Override                                                                                        </span>
<span class="7397501089288945407" onmouseenter="enter('7397501089288945407');" onmouseout="out('7397501089288945407');" style=""> 431         public void onActivityDestroyed(@NonNull Activity activity) {                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 432         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 433     }                                                                                                    </span>
<span  style=""> 434                                                                                                          </span>
<span class="-8023094567209057938" onmouseenter="enter('-8023094567209057938');" onmouseout="out('-8023094567209057938');" style=""> 435     private class SyncTimePersister implements SyncTimes.SyncTimeListener {                              </span>
<span class="-8038048970190219255" onmouseenter="enter('-8038048970190219255');" onmouseout="out('-8038048970190219255');" style=""> 436         private final SharedPreferences mPreferences;                                                    </span>
<span  style=""> 437                                                                                                          </span>
<span class="-5420023059608856786" onmouseenter="enter('-5420023059608856786');" onmouseout="out('-5420023059608856786');" style=""> 438         public SyncTimePersister() {                                                                     </span>
<span class="-1774045212698754392" onmouseenter="enter('-1774045212698754392');" onmouseout="out('-1774045212698754392');" style=""> 439             mPreferences = getSharedPreferences(SYNC_TIME_PREFERENCES, Context.MODE_PRIVATE);            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 440         }                                                                                                </span>
<span  style=""> 441                                                                                                          </span>
<span class="5373267673669371854" onmouseenter="enter('5373267673669371854');" onmouseout="out('5373267673669371854');" style=""> 442         public HashMap&lt;String, Calendar&gt; load() {                                                        </span>
<span class="8617201152557861833" onmouseenter="enter('8617201152557861833');" onmouseout="out('8617201152557861833');" style=""> 443             HashMap&lt;String, Calendar&gt; syncTimes = new HashMap&lt;&gt;();                                       </span>
<span  style=""> 444                                                                                                          </span>
<span class="4462978973621022506" onmouseenter="enter('4462978973621022506');" onmouseout="out('4462978973621022506');" style=""> 445             //noinspection unchecked                                                                     </span>
<span class="1896092932717377555" onmouseenter="enter('1896092932717377555');" onmouseout="out('1896092932717377555');" style=""><abbr title=" 446             for (Map.Entry&lt;String, Long&gt; syncTime : ((Map&lt;String, Long&gt;) mPreferences.getAll()).entrySet()) {"> 446             for (Map.Entry&lt;String, Long&gt; syncTime : ((Map&lt;String, Long&gt;) mPreferences.getAll()).entrySet(ðŸ”µ</abbr></span>
<span class="-785210168314593407" onmouseenter="enter('-785210168314593407');" onmouseout="out('-785210168314593407');" style=""> 447                 Calendar instant = Calendar.getInstance();                                               </span>
<span class="2126061339283800576" onmouseenter="enter('2126061339283800576');" onmouseout="out('2126061339283800576');" style=""> 448                 instant.setTimeInMillis(syncTime.getValue());                                            </span>
<span class="6843114433125041391" onmouseenter="enter('6843114433125041391');" onmouseout="out('6843114433125041391');" style=""> 449                 syncTimes.put(syncTime.getKey(), instant);                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 450             }                                                                                            </span>
<span  style=""> 451                                                                                                          </span>
<span class="7782563231142685256" onmouseenter="enter('7782563231142685256');" onmouseout="out('7782563231142685256');" style=""> 452             return syncTimes;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 453         }                                                                                                </span>
<span  style=""> 454                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 455         @Override                                                                                        </span>
<span class="-6287771297506053883" onmouseenter="enter('-6287771297506053883');" onmouseout="out('-6287771297506053883');" style=""> 456         public void onRemove(String entityId) {                                                          </span>
<span class="2942962400697544803" onmouseenter="enter('2942962400697544803');" onmouseout="out('2942962400697544803');" style=""> 457             mPreferences.edit().remove(entityId).apply();                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 458         }                                                                                                </span>
<span  style=""> 459                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 460         @Override                                                                                        </span>
<span class="5435537090917886229" onmouseenter="enter('5435537090917886229');" onmouseout="out('5435537090917886229');" style=""> 461         public void onUpdate(String entityId, Calendar lastSyncTime, boolean isSynced) {                 </span>
<span class="1289918888759771632" onmouseenter="enter('1289918888759771632');" onmouseout="out('1289918888759771632');" style=""> 462             mPreferences.edit().putLong(entityId, lastSyncTime.getTimeInMillis()).apply();               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 463         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 464     }                                                                                                    </span>
<span  style=""> 465                                                                                                          </span>
<span class="-7040876324129805454" onmouseenter="enter('-7040876324129805454');" onmouseout="out('-7040876324129805454');" style=""> 466     private class VerificationListener implements AccountVerificationWatcher.VerificationStateListener { </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 467         @Override                                                                                        </span>
<span class="8311567710390595869" onmouseenter="enter('8311567710390595869');" onmouseout="out('8311567710390595869');" style=""> 468         public void onUpdate(AccountVerificationWatcher.Status status) {                                 </span>
<span class="1723944522238068006" onmouseenter="enter('1723944522238068006');" onmouseout="out('1723944522238068006');" style=""> 469             switch (status) {                                                                            </span>
<span class="7135169508302009941" onmouseenter="enter('7135169508302009941');" onmouseout="out('7135169508302009941');" style=""> 470                 case VERIFIED:                                                                           </span>
<span class="-4701728580258499512" onmouseenter="enter('-4701728580258499512');" onmouseout="out('-4701728580258499512');" style=""> 471                     dismissReviewAccountDialog();                                                        </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 472                     return;                                                                              </span>
<span  style=""> 473                                                                                                          </span>
<span class="-5520308039380404987" onmouseenter="enter('-5520308039380404987');" onmouseout="out('-5520308039380404987');" style=""> 474                 case SENT_EMAIL:                                                                         </span>
<span class="691507398654622561" onmouseenter="enter('691507398654622561');" onmouseout="out('691507398654622561');" style=""> 475                     showWaitingOnEmailConfirmation();                                                    </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 476                     return;                                                                              </span>
<span  style=""> 477                                                                                                          </span>
<span class="1250246892713626578" onmouseenter="enter('1250246892713626578');" onmouseout="out('1250246892713626578');" style=""> 478                 case UNVERIFIED:                                                                         </span>
<span class="-1913002634248395144" onmouseenter="enter('-1913002634248395144');" onmouseout="out('-1913002634248395144');" style=""> 479                     showUnverifiedAccount();                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 480             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 481         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 482     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 483 }                                                                                                        </span></pre></td>
                            <td><pre><span class="8328120990598135231" onmouseenter="enter('8328120990598135231');" onmouseout="out('8328120990598135231');" style="">   1 package com.automattic.simplenote;                                                                       </span>
<span  style="">   2                                                                                                          </span>
<span class="3919052636780858758" onmouseenter="enter('3919052636780858758');" onmouseout="out('3919052636780858758');" style="">   3 import static com.automattic.simplenote.models.Preferences.PREFERENCES_OBJECT_KEY;                       </span>
<span class="-2196284958529318469" onmouseenter="enter('-2196284958529318469');" onmouseout="out('-2196284958529318469');" style="">   4 import static com.simperium.android.AsyncAuthClient.USER_ACCESS_TOKEN_PREFERENCE;                        </span>
<span class="-7261804762945120970" onmouseenter="enter('-7261804762945120970');" onmouseout="out('-7261804762945120970');" style="">   5 import static com.simperium.android.AsyncAuthClient.USER_EMAIL_PREFERENCE;                               </span>
<span  style="">   6                                                                                                          </span>
<span class="-3997288425915246049" onmouseenter="enter('-3997288425915246049');" onmouseout="out('-3997288425915246049');" style="">   7 import android.annotation.SuppressLint;                                                                  </span>
<span class="-7090287939251728203" onmouseenter="enter('-7090287939251728203');" onmouseout="out('-7090287939251728203');" style="">   8 import android.app.Activity;                                                                             </span>
<span class="-4535828467892621321" onmouseenter="enter('-4535828467892621321');" onmouseout="out('-4535828467892621321');" style="">   9 import android.app.Application;                                                                          </span>
<span class="-5120547123096501078" onmouseenter="enter('-5120547123096501078');" onmouseout="out('-5120547123096501078');" style="">  10 import android.content.ComponentCallbacks2;                                                              </span>
<span class="5922045460006936195" onmouseenter="enter('5922045460006936195');" onmouseout="out('5922045460006936195');" style="">  11 import android.content.Context;                                                                          </span>
<span class="4122587240602557356" onmouseenter="enter('4122587240602557356');" onmouseout="out('4122587240602557356');" style="">  12 import android.content.SharedPreferences;                                                                </span>
<span class="-9179032954578521484" onmouseenter="enter('-9179032954578521484');" onmouseout="out('-9179032954578521484');" style="">  13 import android.content.res.Configuration;                                                                </span>
<span class="-4549785658871057260" onmouseenter="enter('-4549785658871057260');" onmouseout="out('-4549785658871057260');" style="">  14 import android.os.Build;                                                                                 </span>
<span class="8096531590004379472" onmouseenter="enter('8096531590004379472');" onmouseout="out('8096531590004379472');" style="">  15 import android.os.Bundle;                                                                                </span>
<span class="-1086316590722027623" onmouseenter="enter('-1086316590722027623');" onmouseout="out('-1086316590722027623');" style="">  16 import android.os.Handler;                                                                               </span>
<span class="7196841398407674858" onmouseenter="enter('7196841398407674858');" onmouseout="out('7196841398407674858');" style="">  17 import android.util.Log;                                                                                 </span>
<span  style="">  18                                                                                                          </span>
<span class="-6242887455281895424" onmouseenter="enter('-6242887455281895424');" onmouseout="out('-6242887455281895424');" style="">  19 import androidx.annotation.IdRes;                                                                        </span>
<span class="6963272077887521702" onmouseenter="enter('6963272077887521702');" onmouseout="out('6963272077887521702');" style="">  20 import androidx.annotation.NonNull;                                                                      </span>
<span class="7702331687346133722" onmouseenter="enter('7702331687346133722');" onmouseout="out('7702331687346133722');" style="">  21 import androidx.appcompat.app.AppCompatDelegate;                                                         </span>
<span class="2878002094531064439" onmouseenter="enter('2878002094531064439');" onmouseout="out('2878002094531064439');" style="">  22 import androidx.fragment.app.Fragment;                                                                   </span>
<span class="-6438193002598115217" onmouseenter="enter('-6438193002598115217');" onmouseout="out('-6438193002598115217');" style="">  23 import androidx.fragment.app.FragmentManager;                                                            </span>
<span class="-5166869418136344301" onmouseenter="enter('-5166869418136344301');" onmouseout="out('-5166869418136344301');" style="">  24 import androidx.work.BackoffPolicy;                                                                      </span>
<span class="-4431582294891577664" onmouseenter="enter('-4431582294891577664');" onmouseout="out('-4431582294891577664');" style="">  25 import androidx.work.Constraints;                                                                        </span>
<span class="3185086351037345986" onmouseenter="enter('3185086351037345986');" onmouseout="out('3185086351037345986');" style="">  26 import androidx.work.ExistingPeriodicWorkPolicy;                                                         </span>
<span class="-3698903318922252687" onmouseenter="enter('-3698903318922252687');" onmouseout="out('-3698903318922252687');" style="">  27 import androidx.work.NetworkType;                                                                        </span>
<span class="2994979786497810699" onmouseenter="enter('2994979786497810699');" onmouseout="out('2994979786497810699');" style="">  28 import androidx.work.PeriodicWorkRequest;                                                                </span>
<span class="5786013396577205846" onmouseenter="enter('5786013396577205846');" onmouseout="out('5786013396577205846');" style="">  29 import androidx.work.WorkManager;                                                                        </span>
<span  style="">  30                                                                                                          </span>
<span class="-155835000323929258" onmouseenter="enter('-155835000323929258');" onmouseout="out('-155835000323929258');" style="">  31 import com.automattic.simplenote.analytics.AnalyticsTracker;                                             </span>
<span class="-2312717542362407496" onmouseenter="enter('-2312717542362407496');" onmouseout="out('-2312717542362407496');" style="">  32 import com.automattic.simplenote.analytics.AnalyticsTrackerNosara;                                       </span>
<span class="-149350832801163469" onmouseenter="enter('-149350832801163469');" onmouseout="out('-149350832801163469');" style="">  33 import com.automattic.simplenote.models.Account;                                                         </span>
<span class="9061368408436996655" onmouseenter="enter('9061368408436996655');" onmouseout="out('9061368408436996655');" style="">  34 import com.automattic.simplenote.models.Note;                                                            </span>
<span class="7102019831075911821" onmouseenter="enter('7102019831075911821');" onmouseout="out('7102019831075911821');" style="">  35 import com.automattic.simplenote.models.NoteCountIndexer;                                                </span>
<span class="4426422982983644373" onmouseenter="enter('4426422982983644373');" onmouseout="out('4426422982983644373');" style="">  36 import com.automattic.simplenote.models.NoteTagger;                                                      </span>
<span class="2894626372351854793" onmouseenter="enter('2894626372351854793');" onmouseout="out('2894626372351854793');" style="">  37 import com.automattic.simplenote.models.Preferences;                                                     </span>
<span class="107771998888903823" onmouseenter="enter('107771998888903823');" onmouseout="out('107771998888903823');" style="">  38 import com.automattic.simplenote.models.Tag;                                                             </span>
<span class="3201045117631650546" onmouseenter="enter('3201045117631650546');" onmouseout="out('3201045117631650546');" style="">  39 import com.automattic.simplenote.utils.AccountVerificationWatcher;                                       </span>
<span class="160698548927534529" onmouseenter="enter('160698548927534529');" onmouseout="out('160698548927534529');" style="">  40 import com.automattic.simplenote.utils.AppLog;                                                           </span>
<span class="7580776162261256599" onmouseenter="enter('7580776162261256599');" onmouseout="out('7580776162261256599');" style="">  41 import com.automattic.simplenote.utils.AppLog.Type;                                                      </span>
<span class="-3429573708794919100" onmouseenter="enter('-3429573708794919100');" onmouseout="out('-3429573708794919100');" style="">  42 import com.automattic.simplenote.utils.CrashUtils;                                                       </span>
<span class="8577850632926167445" onmouseenter="enter('8577850632926167445');" onmouseout="out('8577850632926167445');" style="">  43 import com.automattic.simplenote.utils.DisplayUtils;                                                     </span>
<span class="-7136497821822559876" onmouseenter="enter('-7136497821822559876');" onmouseout="out('-7136497821822559876');" style="">  44 import com.automattic.simplenote.utils.PrefUtils;                                                        </span>
<span class="-5753381984404345794" onmouseenter="enter('-5753381984404345794');" onmouseout="out('-5753381984404345794');" style="">  45 import com.automattic.simplenote.utils.SyncWorker;                                                       </span>
<span class="-6131823772648778947" onmouseenter="enter('-6131823772648778947');" onmouseout="out('-6131823772648778947');" style="">  46 import com.simperium.Simperium;                                                                          </span>
<span class="581913492648825508" onmouseenter="enter('581913492648825508');" onmouseout="out('581913492648825508');" style="">  47 import com.simperium.android.AndroidClient;                                                              </span>
<span class="1573888967082901106" onmouseenter="enter('1573888967082901106');" onmouseout="out('1573888967082901106');" style="">  48 import com.simperium.android.WebSocketManager;                                                           </span>
<span class="-8170925370861558125" onmouseenter="enter('-8170925370861558125');" onmouseout="out('-8170925370861558125');" style="">  49 import com.simperium.client.Bucket;                                                                      </span>
<span class="-6754815116321497467" onmouseenter="enter('-6754815116321497467');" onmouseout="out('-6754815116321497467');" style="">  50 import com.simperium.client.BucketNameInvalid;                                                           </span>
<span class="-8454203534157102839" onmouseenter="enter('-8454203534157102839');" onmouseout="out('-8454203534157102839');" style="">  51 import com.simperium.client.BucketObjectMissingException;                                                </span>
<span class="-6128914918417430442" onmouseenter="enter('-6128914918417430442');" onmouseout="out('-6128914918417430442');" style="">  52 import com.simperium.client.ChannelProvider.HeartbeatListener;                                           </span>
<span class="4554110602695491054" onmouseenter="enter('4554110602695491054');" onmouseout="out('4554110602695491054');" style="">  53 import com.simperium.client.User;                                                                        </span>
<span  style="">  54                                                                                                          </span>
<span class="7324884800271719890" onmouseenter="enter('7324884800271719890');" onmouseout="out('7324884800271719890');" style="">  55 import org.wordpress.passcodelock.AppLockManager;                                                        </span>
<span  style="">  56                                                                                                          </span>
<span class="1562735530241225598" onmouseenter="enter('1562735530241225598');" onmouseout="out('1562735530241225598');" style="">  57 import java.util.Calendar;                                                                               </span>
<span class="4169599896190320038" onmouseenter="enter('4169599896190320038');" onmouseout="out('4169599896190320038');" style="">  58 import java.util.HashMap;                                                                                </span>
<span class="6618655971923850695" onmouseenter="enter('6618655971923850695');" onmouseout="out('6618655971923850695');" style="">  59 import java.util.Map;                                                                                    </span>
<span class="-6356287537734540725" onmouseenter="enter('-6356287537734540725');" onmouseout="out('-6356287537734540725');" style="">  60 import java.util.concurrent.TimeUnit;                                                                    </span>
<span  style="">  61                                                                                                          </span>
<span class="4818424207955561707" onmouseenter="enter('4818424207955561707');" onmouseout="out('4818424207955561707');" style="">  62 import dagger.hilt.android.HiltAndroidApp;                                                               </span>
<span  style="">  63                                                                                                          </span>
<span class="-1044996963561409144" onmouseenter="enter('-1044996963561409144');" onmouseout="out('-1044996963561409144');" style="">  64 @HiltAndroidApp                                                                                          </span>
<span class="5261034755457737176" onmouseenter="enter('5261034755457737176');" onmouseout="out('5261034755457737176');" style="">  65 public class Simplenote extends Application implements HeartbeatListener {                               </span>
<span class="-9163404905215646951" onmouseenter="enter('-9163404905215646951');" onmouseout="out('-9163404905215646951');" style="">  66     public static final String DELETED_NOTE_ID = &quot;deletedNoteId&quot;;                                        </span>
<span class="5833235806353570833" onmouseenter="enter('5833235806353570833');" onmouseout="out('5833235806353570833');" style="">  67     public static final String SELECTED_NOTE_ID = &quot;selectedNoteId&quot;;                                      </span>
<span class="6246994664501093582" onmouseenter="enter('6246994664501093582');" onmouseout="out('6246994664501093582');" style="">  68     public static final String SCROLL_POSITION_PREFERENCES = &quot;scroll_position&quot;;                          </span>
<span class="-7519035262730977956" onmouseenter="enter('-7519035262730977956');" onmouseout="out('-7519035262730977956');" style="">  69     public static final String SYNC_TIME_PREFERENCES = &quot;sync_time&quot;;                                      </span>
<span class="-8693524844222569932" onmouseenter="enter('-8693524844222569932');" onmouseout="out('-8693524844222569932');" style="">  70     public static final String TAG = &quot;Simplenote&quot;;                                                       </span>
<span class="3215095332324123101" onmouseenter="enter('3215095332324123101');" onmouseout="out('3215095332324123101');" style="">  71     public static final int INTENT_EDIT_NOTE = 2;                                                        </span>
<span class="5587967888967017737" onmouseenter="enter('5587967888967017737');" onmouseout="out('5587967888967017737');" style="">  72     public static final int INTENT_PREFERENCES = 1;                                                      </span>
<span class="-7131135836515418231" onmouseenter="enter('-7131135836515418231');" onmouseout="out('-7131135836515418231');" style="">  73     public static final int ONE_MINUTE_MILLIS = 60 * 1000;  // 60 seconds                                </span>
<span class="2194585893201893968" onmouseenter="enter('2194585893201893968');" onmouseout="out('2194585893201893968');" style="">  74     public static final int TEN_SECONDS_MILLIS = 10 * 1000;  // 10 seconds                               </span>
<span class="-6274174172868583745" onmouseenter="enter('-6274174172868583745');" onmouseout="out('-6274174172868583745');" style="">  75     public static final int TWENTY_SECONDS_MILLIS = 20 * 1000;  // 20 seconds                            </span>
<span  style="">  76                                                                                                          </span>
<span class="53348235283476519" onmouseenter="enter('53348235283476519');" onmouseout="out('53348235283476519');" style="">  77     private static final String AUTH_PROVIDER = &quot;simplenote.com&quot;;                                        </span>
<span class="3318171237102217895" onmouseenter="enter('3318171237102217895');" onmouseout="out('3318171237102217895');" style="">  78     private static final String TAG_SYNC = &quot;sync&quot;;                                                       </span>
<span class="4591981961767073369" onmouseenter="enter('4591981961767073369');" onmouseout="out('4591981961767073369');" style="">  79     private static final long HEARTBEAT_TIMEOUT =  WebSocketManager.HEARTBEAT_INTERVAL * 2;              </span>
<span  style="">  80                                                                                                          </span>
<span class="4362379815071194585" onmouseenter="enter('4362379815071194585');" onmouseout="out('4362379815071194585');" style="">  81     private Activity mCurrentActivity;                                                                   </span>
<span  style="">  82                                                                                                          </span>
<span class="7535211107389480967" onmouseenter="enter('7535211107389480967');" onmouseout="out('7535211107389480967');" style="">  83     private static Bucket&lt;Account&gt; mAccountBucket;                                                       </span>
<span class="-5728139290357644856" onmouseenter="enter('-5728139290357644856');" onmouseout="out('-5728139290357644856');" style="">  84     private static Bucket&lt;Preferences&gt; mPreferencesBucket;                                               </span>
<span  style="">  85                                                                                                          </span>
<span class="-7913886194286774922" onmouseenter="enter('-7913886194286774922');" onmouseout="out('-7913886194286774922');" style="">  86     private Bucket&lt;Note&gt; mNotesBucket;                                                                   </span>
<span class="-3447103309759426335" onmouseenter="enter('-3447103309759426335');" onmouseout="out('-3447103309759426335');" style="">  87     private Bucket&lt;Tag&gt; mTagsBucket;                                                                     </span>
<span class="5428937602637269790" onmouseenter="enter('5428937602637269790');" onmouseout="out('5428937602637269790');" style="">  88     private SyncTimes&lt;Note&gt; mNoteSyncTimes;                                                              </span>
<span class="1419071614229033804" onmouseenter="enter('1419071614229033804');" onmouseout="out('1419071614229033804');" style="">  89     private Handler mHeartbeatHandler;                                                                   </span>
<span class="-7581284801413594720" onmouseenter="enter('-7581284801413594720');" onmouseout="out('-7581284801413594720');" style="">  90     private Runnable mHeartbeatRunnable;                                                                 </span>
<span class="8198744544525618575" onmouseenter="enter('8198744544525618575');" onmouseout="out('8198744544525618575');" style="">  91     private Simperium mSimperium;                                                                        </span>
<span class="-2339277597485504791" onmouseenter="enter('-2339277597485504791');" onmouseout="out('-2339277597485504791');" style="">  92     private boolean mIsInBackground = true;                                                              </span>
<span  style="">  93                                                                                                          </span>
<span class="-2716773701189387633" onmouseenter="enter('-2716773701189387633');" onmouseout="out('-2716773701189387633');" style="">  94     public void onCreate() {                                                                             </span>
<span class="-2958534921295515858" onmouseenter="enter('-2958534921295515858');" onmouseout="out('-2958534921295515858');" style="">  95         super.onCreate();                                                                                </span>
<span  style="">  96                                                                                                          </span>
<span class="4646367228775257968" onmouseenter="enter('4646367228775257968');" onmouseout="out('4646367228775257968');" style="">  97         CrashUtils.initWithContext(this);                                                                </span>
<span  style="">  98                                                                                                          </span>
<span class="-5111101701014776486" onmouseenter="enter('-5111101701014776486');" onmouseout="out('-5111101701014776486');" style="">  99         SimplenoteAppLock appLock = new SimplenoteAppLock(this);                                         </span>
<span class="-2126957952781882671" onmouseenter="enter('-2126957952781882671');" onmouseout="out('-2126957952781882671');" style=""> 100         AppLockManager.getInstance().setCurrentAppLock(appLock);                                         </span>
<span class="-192548486813849389" onmouseenter="enter('-192548486813849389');" onmouseout="out('-192548486813849389');" style=""> 101         appLock.enable();                                                                                </span>
<span  style=""> 102                                                                                                          </span>
<span class="-6610099647322125620" onmouseenter="enter('-6610099647322125620');" onmouseout="out('-6610099647322125620');" style=""> 103         mSimperium = Simperium.newClient(                                                                </span>
<span class="-4695376588658458273" onmouseenter="enter('-4695376588658458273');" onmouseout="out('-4695376588658458273');" style=""> 104                 BuildConfig.SIMPERIUM_APP_ID,                                                            </span>
<span class="4318504011662215607" onmouseenter="enter('4318504011662215607');" onmouseout="out('4318504011662215607');" style=""> 105                 BuildConfig.SIMPERIUM_APP_KEY,                                                           </span>
<span class="7848723611787395232" onmouseenter="enter('7848723611787395232');" onmouseout="out('7848723611787395232');" style=""> 106                 this                                                                                     </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 107         );                                                                                               </span>
<span  style=""> 108                                                                                                          </span>
<span class="7031285256639409704" onmouseenter="enter('7031285256639409704');" onmouseout="out('7031285256639409704');" style=""> 109         mSimperium.setAuthProvider(AUTH_PROVIDER);                                                       </span>
<span class="9065419810018319535" onmouseenter="enter('9065419810018319535');" onmouseout="out('9065419810018319535');" style=""> 110         mSimperium.addHeartbeatListener(this);                                                           </span>
<span  style=""> 111                                                                                                          </span>
<span class="-1855727841872273262" onmouseenter="enter('-1855727841872273262');" onmouseout="out('-1855727841872273262');" style=""> 112         mHeartbeatHandler = new Handler();                                                               </span>
<span class="-1915212603929880067" onmouseenter="enter('-1915212603929880067');" onmouseout="out('-1915212603929880067');" style=""> 113         mHeartbeatRunnable = new Runnable() {                                                            </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 114             @Override                                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 115             public void run() {                                                                          </span>
<span class="4054271998020395502" onmouseenter="enter('4054271998020395502');" onmouseout="out('4054271998020395502');" style=""> 116                 AppLog.add(Type.NETWORK, &quot;Heartbeat stopped&quot;);                                           </span>
<span class="6204465678829044464" onmouseenter="enter('6204465678829044464');" onmouseout="out('6204465678829044464');" style=""> 117                 mHeartbeatHandler.removeCallbacks(mHeartbeatRunnable);                                   </span>
<span class="209086841339708400" onmouseenter="enter('209086841339708400');" onmouseout="out('209086841339708400');" style=""> 118                 mHeartbeatHandler.postDelayed(mHeartbeatRunnable, HEARTBEAT_TIMEOUT);                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 119             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 120         };                                                                                               </span>
<span  style=""> 121                                                                                                          </span>
<span class="3598094545545730496" onmouseenter="enter('3598094545545730496');" onmouseout="out('3598094545545730496');" style=""> 122         SyncTimePersister syncTimePersister = new SyncTimePersister();                                   </span>
<span class="2948787900293662004" onmouseenter="enter('2948787900293662004');" onmouseout="out('2948787900293662004');" style=""> 123         mNoteSyncTimes = new SyncTimes&lt;&gt;(syncTimePersister.load());                                      </span>
<span class="8243749995089440347" onmouseenter="enter('8243749995089440347');" onmouseout="out('8243749995089440347');" style=""> 124         mNoteSyncTimes.addListener(syncTimePersister);                                                   </span>
<span  style=""> 125                                                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 126         try {                                                                                            </span>
<span class="-3712083184111777754" onmouseenter="enter('-3712083184111777754');" onmouseout="out('-3712083184111777754');" style=""> 127             mNotesBucket = mSimperium.bucket(new Note.Schema());                                         </span>
<span class="6461086551110304444" onmouseenter="enter('6461086551110304444');" onmouseout="out('6461086551110304444');" style=""> 128             mNotesBucket.addListener(mNoteSyncTimes.bucketListener);                                     </span>
<span class="8722979014886483827" onmouseenter="enter('8722979014886483827');" onmouseout="out('8722979014886483827');" style=""> 129             Tag.Schema tagSchema = new Tag.Schema();                                                     </span>
<span class="-9102287405513372469" onmouseenter="enter('-9102287405513372469');" onmouseout="out('-9102287405513372469');" style=""> 130             tagSchema.addIndex(new NoteCountIndexer(mNotesBucket));                                      </span>
<span class="-175388701111242190" onmouseenter="enter('-175388701111242190');" onmouseout="out('-175388701111242190');" style=""> 131             mTagsBucket = mSimperium.bucket(tagSchema);                                                  </span>
<span class="4439876589301981228" onmouseenter="enter('4439876589301981228');" onmouseout="out('4439876589301981228');" style=""> 132             mPreferencesBucket = mSimperium.bucket(new Preferences.Schema());                            </span>
<span class="-2625727357905435450" onmouseenter="enter('-2625727357905435450');" onmouseout="out('-2625727357905435450');" style=""> 133             mAccountBucket = mSimperium.bucket(new Account.Schema());                                    </span>
<span class="-8362296136901081825" onmouseenter="enter('-8362296136901081825');" onmouseout="out('-8362296136901081825');" style=""> 134             mAccountBucket.addOnNetworkChangeListener(                                                   </span>
<span class="4260345062700661756" onmouseenter="enter('4260345062700661756');" onmouseout="out('4260345062700661756');" style=""> 135                     new AccountVerificationWatcher(this, new VerificationListener())                     </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 136             );                                                                                           </span>
<span class="6417103925919259383" onmouseenter="enter('6417103925919259383');" onmouseout="out('6417103925919259383');" style=""> 137             // Every time a note changes or is deleted we need to reindex the tag counts                 </span>
<span class="1028093174501664258" onmouseenter="enter('1028093174501664258');" onmouseout="out('1028093174501664258');" style=""> 138             mNotesBucket.addListener(new NoteTagger(mTagsBucket));                                       </span>
<span class="9150575117674564137" onmouseenter="enter('9150575117674564137');" onmouseout="out('9150575117674564137');" style=""> 139         } catch (BucketNameInvalid e) {                                                                  </span>
<span class="5045778340242790475" onmouseenter="enter('5045778340242790475');" onmouseout="out('5045778340242790475');" style=""> 140             throw new RuntimeException(&quot;Could not create bucket&quot;, e);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 141         }                                                                                                </span>
<span  style=""> 142                                                                                                          </span>
<span class="-6104247182653922910" onmouseenter="enter('-6104247182653922910');" onmouseout="out('-6104247182653922910');" style=""> 143         AppCompatDelegate.setCompatVectorFromResourcesEnabled(true);                                     </span>
<span  style=""> 144                                                                                                          </span>
<span class="1079457458543399093" onmouseenter="enter('1079457458543399093');" onmouseout="out('1079457458543399093');" style=""> 145         ApplicationLifecycleMonitor applicationLifecycleMonitor = new ApplicationLifecycleMonitor();     </span>
<span class="381596098670029908" onmouseenter="enter('381596098670029908');" onmouseout="out('381596098670029908');" style=""> 146         registerComponentCallbacks(applicationLifecycleMonitor);                                         </span>
<span class="-8076193737884381578" onmouseenter="enter('-8076193737884381578');" onmouseout="out('-8076193737884381578');" style=""> 147         registerActivityLifecycleCallbacks(applicationLifecycleMonitor);                                 </span>
<span  style=""> 148                                                                                                          </span>
<span class="1335392763825317999" onmouseenter="enter('1335392763825317999');" onmouseout="out('1335392763825317999');" style=""> 149         AnalyticsTracker.registerTracker(new AnalyticsTrackerNosara(this));                              </span>
<span class="-1844307234054360739" onmouseenter="enter('-1844307234054360739');" onmouseout="out('-1844307234054360739');" style=""> 150         AnalyticsTracker.refreshMetadata(mSimperium.getUser().getEmail());                               </span>
<span class="8399230582885161213" onmouseenter="enter('8399230582885161213');" onmouseout="out('8399230582885161213');" style=""> 151         CrashUtils.setCurrentUser(mSimperium.getUser());                                                 </span>
<span  style=""> 152                                                                                                          </span>
<span class="-1455224487599073617" onmouseenter="enter('-1455224487599073617');" onmouseout="out('-1455224487599073617');" style=""> 153         AppLog.add(Type.DEVICE, getDeviceInfo());                                                        </span>
<span class="-4084915558750483061" onmouseenter="enter('-4084915558750483061');" onmouseout="out('-4084915558750483061');" style=""> 154         AppLog.add(Type.ACCOUNT, getAccountInfo());                                                      </span>
<span class="-671791306218270016" onmouseenter="enter('-671791306218270016');" onmouseout="out('-671791306218270016');" style=""> 155         AppLog.add(Type.LAYOUT, DisplayUtils.getDisplaySizeAndOrientation(Simplenote.this));             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 156     }                                                                                                    </span>
<span  style=""> 157                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 158     @Override                                                                                            </span>
<span class="7640484986889102054" onmouseenter="enter('7640484986889102054');" onmouseout="out('7640484986889102054');" style=""> 159     public void onBeat() {                                                                               </span>
<span class="7315421582655131800" onmouseenter="enter('7315421582655131800');" onmouseout="out('7315421582655131800');" style=""> 160         AppLog.add(Type.NETWORK, &quot;Heartbeat received&quot;);                                                  </span>
<span class="6204465678829044464" onmouseenter="enter('6204465678829044464');" onmouseout="out('6204465678829044464');" style=""> 161         mHeartbeatHandler.removeCallbacks(mHeartbeatRunnable);                                           </span>
<span class="209086841339708400" onmouseenter="enter('209086841339708400');" onmouseout="out('209086841339708400');" style=""> 162         mHeartbeatHandler.postDelayed(mHeartbeatRunnable, HEARTBEAT_TIMEOUT);                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 163     }                                                                                                    </span>
<span  style=""> 164                                                                                                          </span>
<span class="-5261177328937716585" onmouseenter="enter('-5261177328937716585');" onmouseout="out('-5261177328937716585');" style=""> 165     public static boolean analyticsIsEnabled() {                                                         </span>
<span class="1755574756529165678" onmouseenter="enter('1755574756529165678');" onmouseout="out('1755574756529165678');" style=""> 166         if (mPreferencesBucket == null) {                                                                </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 167             return true;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 168         }                                                                                                </span>
<span  style=""> 169                                                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 170         try {                                                                                            </span>
<span class="734651049898166881" onmouseenter="enter('734651049898166881');" onmouseout="out('734651049898166881');" style=""> 171             Preferences prefs = mPreferencesBucket.get(PREFERENCES_OBJECT_KEY);                          </span>
<span class="1383721738222569542" onmouseenter="enter('1383721738222569542');" onmouseout="out('1383721738222569542');" style=""> 172             return prefs.getAnalyticsEnabled();                                                          </span>
<span class="-1560847995217927266" onmouseenter="enter('-1560847995217927266');" onmouseout="out('-1560847995217927266');" style=""> 173         } catch (BucketObjectMissingException e) {                                                       </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 174             return true;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 175         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 176     }                                                                                                    </span>
<span  style=""> 177                                                                                                          </span>
<span class="4656537755100497713" onmouseenter="enter('4656537755100497713');" onmouseout="out('4656537755100497713');" style=""> 178     private String getAccountInfo() {                                                                    </span>
<span class="-4909194837402373696" onmouseenter="enter('-4909194837402373696');" onmouseout="out('-4909194837402373696');" style=""><abbr title=" 179         String email = &quot;Email: &quot; + (mSimperium != null &amp;&amp; mSimperium.getUser() != null ? mSimperium.getUser().getEmail() : &quot;?&quot;);"> 179         String email = &quot;Email: &quot; + (mSimperium != null &amp;&amp; mSimperium.getUser() != null ? mSimperium.getUsðŸ”µ</abbr></span>
<span class="-1815219994356976513" onmouseenter="enter('-1815219994356976513');" onmouseout="out('-1815219994356976513');" style=""> 180         String notes = &quot;Notes: &quot; + (mNotesBucket != null ? mNotesBucket.count() : &quot;?&quot;);                  </span>
<span class="-4701463784795893558" onmouseenter="enter('-4701463784795893558');" onmouseout="out('-4701463784795893558');" style=""> 181         String tags = &quot;Tags: &quot; + (mTagsBucket != null ? mTagsBucket.count() : &quot;?&quot;);                      </span>
<span class="5597163353916173356" onmouseenter="enter('5597163353916173356');" onmouseout="out('5597163353916173356');" style=""> 182         return email + &quot;\n&quot; + notes + &quot;\n&quot; + tags + &quot;\n\n&quot;;                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 183     }                                                                                                    </span>
<span  style=""> 184                                                                                                          </span>
<span class="-4176269846075250192" onmouseenter="enter('-4176269846075250192');" onmouseout="out('-4176269846075250192');" style=""> 185     private String getDeviceInfo() {                                                                     </span>
<span class="7581408804502865572" onmouseenter="enter('7581408804502865572');" onmouseout="out('7581408804502865572');" style=""><abbr title=" 186         String architecture = Build.DEVICE != null &amp;&amp; Build.DEVICE.matches(&quot;.+_cheets|cheets_.+&quot;) ? &quot;Chrome OS &quot; : &quot;Android &quot;;"> 186         String architecture = Build.DEVICE != null &amp;&amp; Build.DEVICE.matches(&quot;.+_cheets|cheets_.+&quot;) ? &quot;ChroðŸ”µ</abbr></span>
<span class="-921339907737118722" onmouseenter="enter('-921339907737118722');" onmouseout="out('-921339907737118722');" style=""> 187         String device = &quot;Device: &quot; + Build.MANUFACTURER + &quot; &quot; + Build.MODEL + &quot; (&quot; + Build.DEVICE + &quot;)&quot;; </span>
<span class="-7970072835487477375" onmouseenter="enter('-7970072835487477375');" onmouseout="out('-7970072835487477375');" style=""><abbr title=" 188         String system = &quot;System: &quot; + architecture + Build.VERSION.RELEASE + &quot; (&quot; + Build.VERSION.SDK_INT + &quot;)&quot;;"> 188         String system = &quot;System: &quot; + architecture + Build.VERSION.RELEASE + &quot; (&quot; + Build.VERSION.SDK_INT ðŸ”µ</abbr></span>
<span class="3648033425382070956" onmouseenter="enter('3648033425382070956');" onmouseout="out('3648033425382070956');" style=""> 189         String app = &quot;App: Simplenote &quot; + PrefUtils.versionInfo();                                       </span>
<span class="6793127563363345208" onmouseenter="enter('6793127563363345208');" onmouseout="out('6793127563363345208');" style=""> 190         return device + &quot;\n&quot; + system + &quot;\n&quot; + app + &quot;\n\n&quot;;                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 191     }                                                                                                    </span>
<span  style=""> 192                                                                                                          </span>
<span class="-2452840228833033114" onmouseenter="enter('-2452840228833033114');" onmouseout="out('-2452840228833033114');" style=""> 193     public Simperium getSimperium() {                                                                    </span>
<span class="-1067936515361198064" onmouseenter="enter('-1067936515361198064');" onmouseout="out('-1067936515361198064');" style=""> 194         return mSimperium;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 195     }                                                                                                    </span>
<span  style=""> 196                                                                                                          </span>
<span class="8475950615112765175" onmouseenter="enter('8475950615112765175');" onmouseout="out('8475950615112765175');" style=""> 197     public Bucket&lt;Note&gt; getNotesBucket() {                                                               </span>
<span class="3001734825963445545" onmouseenter="enter('3001734825963445545');" onmouseout="out('3001734825963445545');" style=""> 198         return mNotesBucket;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 199     }                                                                                                    </span>
<span  style=""> 200                                                                                                          </span>
<span class="365385451944262609" onmouseenter="enter('365385451944262609');" onmouseout="out('365385451944262609');" style=""> 201     public SyncTimes getNoteSyncTimes() {                                                                </span>
<span class="6562319796144170989" onmouseenter="enter('6562319796144170989');" onmouseout="out('6562319796144170989');" style=""> 202         return mNoteSyncTimes;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 203     }                                                                                                    </span>
<span  style=""> 204                                                                                                          </span>
<span class="1680392141704969043" onmouseenter="enter('1680392141704969043');" onmouseout="out('1680392141704969043');" style=""> 205     public Bucket&lt;Tag&gt; getTagsBucket() {                                                                 </span>
<span class="6135487691608919718" onmouseenter="enter('6135487691608919718');" onmouseout="out('6135487691608919718');" style=""> 206         return mTagsBucket;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 207     }                                                                                                    </span>
<span  style=""> 208                                                                                                          </span>
<span class="-4506300185279466066" onmouseenter="enter('-4506300185279466066');" onmouseout="out('-4506300185279466066');" style=""> 209     public Bucket&lt;Preferences&gt; getPreferencesBucket() {                                                  </span>
<span class="6715102450829888836" onmouseenter="enter('6715102450829888836');" onmouseout="out('6715102450829888836');" style=""> 210         return mPreferencesBucket;                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 211     }                                                                                                    </span>
<span  style=""> 212                                                                                                          </span>
<span class="8939354386013821015" onmouseenter="enter('8939354386013821015');" onmouseout="out('8939354386013821015');" style=""> 213     public Bucket&lt;Account&gt; getAccountBucket() {                                                          </span>
<span class="2771394281478310822" onmouseenter="enter('2771394281478310822');" onmouseout="out('2771394281478310822');" style=""> 214         return mAccountBucket;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 215     }                                                                                                    </span>
<span  style=""> 216                                                                                                          </span>
<span class="-5307885032361585350" onmouseenter="enter('-5307885032361585350');" onmouseout="out('-5307885032361585350');" style=""> 217     public boolean isInBackground() {                                                                    </span>
<span class="3812912940560000313" onmouseenter="enter('3812912940560000313');" onmouseout="out('3812912940560000313');" style=""> 218         return mIsInBackground;                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 219     }                                                                                                    </span>
<span  style=""> 220                                                                                                          </span>
<span class="9084571718636450070" onmouseenter="enter('9084571718636450070');" onmouseout="out('9084571718636450070');" style=""> 221     public void loginWithToken(String email, String spToken) {                                           </span>
<span class="2848300691293606814" onmouseenter="enter('2848300691293606814');" onmouseout="out('2848300691293606814');" style=""> 222         // Manually authorize the user with Simperium                                                    </span>
<span class="-4556253445089435832" onmouseenter="enter('-4556253445089435832');" onmouseout="out('-4556253445089435832');" style=""> 223         User user = mSimperium.getUser();                                                                </span>
<span class="-4915005065677121955" onmouseenter="enter('-4915005065677121955');" onmouseout="out('-4915005065677121955');" style=""> 224         user.setAccessToken(spToken);                                                                    </span>
<span class="877344059420132568" onmouseenter="enter('877344059420132568');" onmouseout="out('877344059420132568');" style=""> 225         user.setEmail(email);                                                                            </span>
<span class="538456865812119501" onmouseenter="enter('538456865812119501');" onmouseout="out('538456865812119501');" style=""> 226         user.setStatus(User.Status.AUTHORIZED);                                                          </span>
<span  style=""> 227                                                                                                          </span>
<span class="-755513241422191443" onmouseenter="enter('-755513241422191443');" onmouseout="out('-755513241422191443');" style=""> 228         // Store the user data in Simperium shared preferences                                           </span>
<span class="4508720492858536163" onmouseenter="enter('4508720492858536163');" onmouseout="out('4508720492858536163');" style=""> 229         SharedPreferences.Editor editor = AndroidClient.sharedPreferences(this).edit();                  </span>
<span class="2812904514433972765" onmouseenter="enter('2812904514433972765');" onmouseout="out('2812904514433972765');" style=""> 230         editor.putString(USER_ACCESS_TOKEN_PREFERENCE, user.getAccessToken());                           </span>
<span class="-3810862774138306438" onmouseenter="enter('-3810862774138306438');" onmouseout="out('-3810862774138306438');" style=""> 231         editor.putString(USER_EMAIL_PREFERENCE, user.getEmail());                                        </span>
<span class="-5305612453340718340" onmouseenter="enter('-5305612453340718340');" onmouseout="out('-5305612453340718340');" style=""> 232         editor.apply();                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 233     }                                                                                                    </span>
<span  style=""> 234                                                                                                          </span>
<span class="2855914666290052253" onmouseenter="enter('2855914666290052253');" onmouseout="out('2855914666290052253');" style=""> 235     public boolean isLoggedIn() {                                                                        </span>
<span class="-4556253445089435832" onmouseenter="enter('-4556253445089435832');" onmouseout="out('-4556253445089435832');" style=""> 236         User user = mSimperium.getUser();                                                                </span>
<span class="754608154577126470" onmouseenter="enter('754608154577126470');" onmouseout="out('754608154577126470');" style=""> 237         return user != null &amp;&amp; user.getStatus() == User.Status.AUTHORIZED;                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 238     }                                                                                                    </span>
<span  style=""> 239                                                                                                          </span>
<span class="542821705420321329" onmouseenter="enter('542821705420321329');" onmouseout="out('542821705420321329');" style=""> 240     public String getUserEmail() {                                                                       </span>
<span class="-4556253445089435832" onmouseenter="enter('-4556253445089435832');" onmouseout="out('-4556253445089435832');" style=""> 241         User user = mSimperium.getUser();                                                                </span>
<span class="-5079006915454915875" onmouseenter="enter('-5079006915454915875');" onmouseout="out('-5079006915454915875');" style=""> 242         return user != null ? user.getEmail() : null;                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 243     }                                                                                                    </span>
<span  style=""> 244                                                                                                          </span>
<span class="2937462577027157320" onmouseenter="enter('2937462577027157320');" onmouseout="out('2937462577027157320');" style=""> 245     private void showUnverifiedAccount() {                                                               </span>
<span class="3922537486351779763" onmouseenter="enter('3922537486351779763');" onmouseout="out('3922537486351779763');" style=""> 246         showReviewAccountOrVerifyEmail(mCurrentActivity, false);                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 247     }                                                                                                    </span>
<span  style=""> 248                                                                                                          </span>
<span class="-1951278736681351578" onmouseenter="enter('-1951278736681351578');" onmouseout="out('-1951278736681351578');" style=""> 249     private void showWaitingOnEmailConfirmation() {                                                      </span>
<span class="1761307439081029946" onmouseenter="enter('1761307439081029946');" onmouseout="out('1761307439081029946');" style=""> 250         showReviewAccountOrVerifyEmail(mCurrentActivity, true);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 251     }                                                                                                    </span>
<span  style=""> 252                                                                                                          </span>
<span class="-3355299330142398603" onmouseenter="enter('-3355299330142398603');" onmouseout="out('-3355299330142398603');" style=""> 253     private void dismissReviewAccountDialog() {                                                          </span>
<span class="-4849539574283382852" onmouseenter="enter('-4849539574283382852');" onmouseout="out('-4849539574283382852');" style=""> 254         FragmentManager fragmentManager;                                                                 </span>
<span class="-8221972854904999507" onmouseenter="enter('-8221972854904999507');" onmouseout="out('-8221972854904999507');" style=""> 255         if (mCurrentActivity instanceof NotesActivity) {                                                 </span>
<span class="-4446108831753952720" onmouseenter="enter('-4446108831753952720');" onmouseout="out('-4446108831753952720');" style=""> 256             fragmentManager = ((NotesActivity) mCurrentActivity).getSupportFragmentManager();            </span>
<span class="-5847895969969896469" onmouseenter="enter('-5847895969969896469');" onmouseout="out('-5847895969969896469');" style=""> 257         } else if (mCurrentActivity instanceof NoteEditorActivity) {                                     </span>
<span class="5051439688965850781" onmouseenter="enter('5051439688965850781');" onmouseout="out('5051439688965850781');" style=""> 258             fragmentManager = ((NoteEditorActivity) mCurrentActivity).getSupportFragmentManager();       </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 259         } else {                                                                                         </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 260             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 261         }                                                                                                </span>
<span  style=""> 262                                                                                                          </span>
<span class="-1386275356577769478" onmouseenter="enter('-1386275356577769478');" onmouseout="out('-1386275356577769478');" style=""> 263         for (Fragment fragment : fragmentManager.getFragments()) {                                       </span>
<span class="-3329316781317474527" onmouseenter="enter('-3329316781317474527');" onmouseout="out('-3329316781317474527');" style=""> 264             if (fragment instanceof FullScreenDialogFragment) {                                          </span>
<span class="-4810257083241229038" onmouseenter="enter('-4810257083241229038');" onmouseout="out('-4810257083241229038');" style=""> 265                 ((FullScreenDialogFragment) fragment).dismiss();                                         </span>
<span  style=""> 266                                                                                                          </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 267                 return;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 268             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 269         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 270     }                                                                                                    </span>
<span class="2332882432376014482" onmouseenter="enter('2332882432376014482');" onmouseout="out('2332882432376014482');" style=""> 271     private void showReviewAccountOrVerifyEmail(final Activity activity, boolean hasSentEmail) {         </span>
<span class="-3746560840586400800" onmouseenter="enter('-3746560840586400800');" onmouseout="out('-3746560840586400800');" style=""> 272         final FragmentManager fragmentManager;                                                           </span>
<span class="-8603498050420470579" onmouseenter="enter('-8603498050420470579');" onmouseout="out('-8603498050420470579');" style=""> 273         final @IdRes int container;                                                                      </span>
<span  style=""> 274                                                                                                          </span>
<span class="6030899174327056570" onmouseenter="enter('6030899174327056570');" onmouseout="out('6030899174327056570');" style=""> 275         if (activity instanceof NotesActivity) {                                                         </span>
<span class="1073665129405439698" onmouseenter="enter('1073665129405439698');" onmouseout="out('1073665129405439698');" style=""> 276             fragmentManager = ((NotesActivity) activity).getSupportFragmentManager();                    </span>
<span class="-6813895032683749169" onmouseenter="enter('-6813895032683749169');" onmouseout="out('-6813895032683749169');" style=""> 277             container = R.id.drawer_layout;                                                              </span>
<span class="-6053920028300427274" onmouseenter="enter('-6053920028300427274');" onmouseout="out('-6053920028300427274');" style=""> 278         } else if (activity instanceof NoteEditorActivity) {                                             </span>
<span class="6040549106017882092" onmouseenter="enter('6040549106017882092');" onmouseout="out('6040549106017882092');" style=""> 279             fragmentManager = ((NoteEditorActivity) activity).getSupportFragmentManager();               </span>
<span class="5106126685052663813" onmouseenter="enter('5106126685052663813');" onmouseout="out('5106126685052663813');" style=""> 280             container = android.R.id.content;                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 281         } else {                                                                                         </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 282             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 283         }                                                                                                </span>
<span  style=""> 284                                                                                                          </span>
<span class="7005732918292981998" onmouseenter="enter('7005732918292981998');" onmouseout="out('7005732918292981998');" style=""> 285         final Bundle bundle = ReviewAccountVerifyEmailFragment.newBundle(hasSentEmail);                  </span>
<span  style=""> 286                                                                                                          </span>
<span class="3595979510228424567" onmouseenter="enter('3595979510228424567');" onmouseout="out('3595979510228424567');" style=""> 287         new FullScreenDialogFragment.Builder(activity)                                                   </span>
<span class="1707505884861492887" onmouseenter="enter('1707505884861492887');" onmouseout="out('1707505884861492887');" style=""> 288             .setContent(ReviewAccountVerifyEmailFragment.class, bundle)                                  </span>
<span class="-7730204517414597577" onmouseenter="enter('-7730204517414597577');" onmouseout="out('-7730204517414597577');" style=""> 289             .setOnConfirmListener(null)                                                                  </span>
<span class="5374833142702814180" onmouseenter="enter('5374833142702814180');" onmouseout="out('5374833142702814180');" style=""> 290             .setOnDismissListener(null)                                                                  </span>
<span class="7759061789741077424" onmouseenter="enter('7759061789741077424');" onmouseout="out('7759061789741077424');" style=""> 291             .setToolbarElevation(0)                                                                      </span>
<span class="9206956024064176315" onmouseenter="enter('9206956024064176315');" onmouseout="out('9206956024064176315');" style=""> 292             .setViewContainer(container)                                                                 </span>
<span class="3616109827455273093" onmouseenter="enter('3616109827455273093');" onmouseout="out('3616109827455273093');" style=""> 293             .build()                                                                                     </span>
<span class="4065757138376521916" onmouseenter="enter('4065757138376521916');" onmouseout="out('4065757138376521916');" style=""> 294             .show(fragmentManager, FullScreenDialogFragment.TAG);                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 295     }                                                                                                    </span>
<span  style=""> 296                                                                                                          </span>
<span class="72925131662297315" onmouseenter="enter('72925131662297315');" onmouseout="out('72925131662297315');" style=""><abbr title=" 297     private class ApplicationLifecycleMonitor implements Application.ActivityLifecycleCallbacks, ComponentCallbacks2 {"> 297     private class ApplicationLifecycleMonitor implements Application.ActivityLifecycleCallbacks, ComponenðŸ”µ</abbr></span>
<span class="3103941996577506651" onmouseenter="enter('3103941996577506651');" onmouseout="out('3103941996577506651');" style=""> 298         // ComponentCallbacks                                                                            </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 299         @Override                                                                                        </span>
<span class="2274976836934101801" onmouseenter="enter('2274976836934101801');" onmouseout="out('2274976836934101801');" style=""> 300         public void onTrimMemory(int level) {                                                            </span>
<span class="-1837603280920501393" onmouseenter="enter('-1837603280920501393');" onmouseout="out('-1837603280920501393');" style=""> 301             if (level == ComponentCallbacks2.TRIM_MEMORY_UI_HIDDEN) {                                    </span>
<span class="-4583313459107718715" onmouseenter="enter('-4583313459107718715');" onmouseout="out('-4583313459107718715');" style=""> 302                 mIsInBackground = true;                                                                  </span>
<span  style=""> 303                                                                                                          </span>
<span class="-7450229904998226699" onmouseenter="enter('-7450229904998226699');" onmouseout="out('-7450229904998226699');" style=""> 304                 // Give the buckets some time to finish sync, then stop them                             </span>
<span class="7162501222170899627" onmouseenter="enter('7162501222170899627');" onmouseout="out('7162501222170899627');" style=""> 305                 new Handler().postDelayed(new Runnable() {                                               </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 306                     @Override                                                                            </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 307                     public void run() {                                                                  </span>
<span class="1937243434374323959" onmouseenter="enter('1937243434374323959');" onmouseout="out('1937243434374323959');" style=""> 308                         if (!mIsInBackground) {                                                          </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 309                             return;                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 310                         }                                                                                </span>
<span  style=""> 311                                                                                                          </span>
<span class="-2200993789662803159" onmouseenter="enter('-2200993789662803159');" onmouseout="out('-2200993789662803159');" style=""> 312                         if (mAccountBucket != null) {                                                    </span>
<span class="1251129820679832423" onmouseenter="enter('1251129820679832423');" onmouseout="out('1251129820679832423');" style=""> 313                             mAccountBucket.stop();                                                       </span>
<span class="3408645548049517244" onmouseenter="enter('3408645548049517244');" onmouseout="out('3408645548049517244');" style=""> 314                             AppLog.add(Type.SYNC, &quot;Stopped account bucket (Simplenote)&quot;);                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 315                         }                                                                                </span>
<span  style=""> 316                                                                                                          </span>
<span class="6694920678363305995" onmouseenter="enter('6694920678363305995');" onmouseout="out('6694920678363305995');" style=""> 317                         if (mNotesBucket != null) {                                                      </span>
<span class="-9222421628383802707" onmouseenter="enter('-9222421628383802707');" onmouseout="out('-9222421628383802707');" style=""> 318                             mNotesBucket.stop();                                                         </span>
<span class="-8256972624868266110" onmouseenter="enter('-8256972624868266110');" onmouseout="out('-8256972624868266110');" style=""> 319                             AppLog.add(Type.SYNC, &quot;Stopped note bucket (Simplenote)&quot;);                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 320                         }                                                                                </span>
<span  style=""> 321                                                                                                          </span>
<span class="-6758879846146730703" onmouseenter="enter('-6758879846146730703');" onmouseout="out('-6758879846146730703');" style=""> 322                         if (mTagsBucket != null) {                                                       </span>
<span class="7440275301365041157" onmouseenter="enter('7440275301365041157');" onmouseout="out('7440275301365041157');" style=""> 323                             mTagsBucket.stop();                                                          </span>
<span class="3632904236952271414" onmouseenter="enter('3632904236952271414');" onmouseout="out('3632904236952271414');" style=""> 324                             AppLog.add(Type.SYNC, &quot;Stopped tag bucket (Simplenote)&quot;);                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 325                         }                                                                                </span>
<span  style=""> 326                                                                                                          </span>
<span class="-6192025378026905457" onmouseenter="enter('-6192025378026905457');" onmouseout="out('-6192025378026905457');" style=""> 327                         if (mPreferencesBucket != null) {                                                </span>
<span class="-7405985386384713994" onmouseenter="enter('-7405985386384713994');" onmouseout="out('-7405985386384713994');" style=""> 328                             mPreferencesBucket.stop();                                                   </span>
<span class="-5651227749650235797" onmouseenter="enter('-5651227749650235797');" onmouseout="out('-5651227749650235797');" style=""> 329                             AppLog.add(Type.SYNC, &quot;Stopped preference bucket (Simplenote)&quot;);             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 330                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 331                     }                                                                                    </span>
<span class="6786785065928556607" onmouseenter="enter('6786785065928556607');" onmouseout="out('6786785065928556607');" style=""> 332                 }, TEN_SECONDS_MILLIS);                                                                  </span>
<span  style=""> 333                                                                                                          </span>
<span class="5599227697513165792" onmouseenter="enter('5599227697513165792');" onmouseout="out('5599227697513165792');" style=""> 334                 PeriodicWorkRequest syncWorkRequest = new PeriodicWorkRequest.Builder(                   </span>
<span class="1408067071873564180" onmouseenter="enter('1408067071873564180');" onmouseout="out('1408067071873564180');" style=""> 335                     SyncWorker.class,                                                                    </span>
<span class="2973406529671611856" onmouseenter="enter('2973406529671611856');" onmouseout="out('2973406529671611856');" style=""> 336                     PeriodicWorkRequest.MIN_PERIODIC_INTERVAL_MILLIS,                                    </span>
<span class="-80463983603518610" onmouseenter="enter('-80463983603518610');" onmouseout="out('-80463983603518610');" style=""> 337                     TimeUnit.MILLISECONDS                                                                </span>
<span class="-2015476096144723150" onmouseenter="enter('-2015476096144723150');" onmouseout="out('-2015476096144723150');" style=""> 338                 )                                                                                        </span>
<span class="-6346518985674576590" onmouseenter="enter('-6346518985674576590');" onmouseout="out('-6346518985674576590');" style=""><abbr title=" 339                     .setConstraints(new Constraints.Builder().setRequiredNetworkType(NetworkType.CONNECTED).build())"> 339                     .setConstraints(new Constraints.Builder().setRequiredNetworkType(NetworkType.CONNECTEðŸ”µ</abbr></span>
<span class="1554687427185788181" onmouseenter="enter('1554687427185788181');" onmouseout="out('1554687427185788181');" style=""> 340                     .setBackoffCriteria(BackoffPolicy.LINEAR, ONE_MINUTE_MILLIS, TimeUnit.MILLISECONDS)  </span>
<span class="1665711086511789732" onmouseenter="enter('1665711086511789732');" onmouseout="out('1665711086511789732');" style=""> 341                     .setInitialDelay(TWENTY_SECONDS_MILLIS, TimeUnit.MILLISECONDS)                       </span>
<span class="8816433673387605168" onmouseenter="enter('8816433673387605168');" onmouseout="out('8816433673387605168');" style=""> 342                     .addTag(TAG_SYNC)                                                                    </span>
<span class="-368814941510255410" onmouseenter="enter('-368814941510255410');" onmouseout="out('-368814941510255410');" style=""> 343                     .build();                                                                            </span>
<span class="-957289309636137365" onmouseenter="enter('-957289309636137365');" onmouseout="out('-957289309636137365');" style=""> 344                 WorkManager.getInstance(getApplicationContext()).enqueueUniquePeriodicWork(              </span>
<span class="1890759471518076421" onmouseenter="enter('1890759471518076421');" onmouseout="out('1890759471518076421');" style=""> 345                     TAG_SYNC,                                                                            </span>
<span class="7031641102110402794" onmouseenter="enter('7031641102110402794');" onmouseout="out('7031641102110402794');" style=""> 346                     ExistingPeriodicWorkPolicy.REPLACE,                                                  </span>
<span class="7844672442552797006" onmouseenter="enter('7844672442552797006');" onmouseout="out('7844672442552797006');" style=""> 347                     syncWorkRequest                                                                      </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 348                 );                                                                                       </span>
<span class="-6272207136493112653" onmouseenter="enter('-6272207136493112653');" onmouseout="out('-6272207136493112653');" style=""> 349                 Log.d(&quot;Simplenote.onTrimMemory&quot;, &quot;Started worker&quot;);                                      </span>
<span  style=""> 350                                                                                                          </span>
<span class="-341478899160030823" onmouseenter="enter('-341478899160030823');" onmouseout="out('-341478899160030823');" style=""> 351                 // Send analytics if app is in the background                                            </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 352                 AnalyticsTracker.track(                                                                  </span>
<span class="3485374480742718668" onmouseenter="enter('3485374480742718668');" onmouseout="out('3485374480742718668');" style=""> 353                         AnalyticsTracker.Stat.APPLICATION_CLOSED,                                        </span>
<span class="3255995284721740364" onmouseenter="enter('3255995284721740364');" onmouseout="out('3255995284721740364');" style=""> 354                         AnalyticsTracker.CATEGORY_USER,                                                  </span>
<span class="3140085526459106828" onmouseenter="enter('3140085526459106828');" onmouseout="out('3140085526459106828');" style=""> 355                         &quot;application_closed&quot;                                                             </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 356                 );                                                                                       </span>
<span class="-7792835064107422696" onmouseenter="enter('-7792835064107422696');" onmouseout="out('-7792835064107422696');" style=""> 357                 AnalyticsTracker.flush();                                                                </span>
<span class="-6664472740739433069" onmouseenter="enter('-6664472740739433069');" onmouseout="out('-6664472740739433069');" style=""> 358                 AppLog.add(Type.ACTION, &quot;App closed&quot;);                                                   </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 359             } else {                                                                                     </span>
<span class="-6497924770077247329" onmouseenter="enter('-6497924770077247329');" onmouseout="out('-6497924770077247329');" style=""> 360                 mIsInBackground = false;                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 361             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 362         }                                                                                                </span>
<span  style=""> 363                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 364         @Override                                                                                        </span>
<span class="6856792358586712593" onmouseenter="enter('6856792358586712593');" onmouseout="out('6856792358586712593');" style=""> 365         public void onConfigurationChanged(@NonNull Configuration newConfig) {                           </span>
<span class="-671791306218270016" onmouseenter="enter('-671791306218270016');" onmouseout="out('-671791306218270016');" style=""> 366             AppLog.add(Type.LAYOUT, DisplayUtils.getDisplaySizeAndOrientation(Simplenote.this));         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 367         }                                                                                                </span>
<span  style=""> 368                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 369         @Override                                                                                        </span>
<span class="-4981664158563918121" onmouseenter="enter('-4981664158563918121');" onmouseout="out('-4981664158563918121');" style=""> 370         public void onLowMemory() {                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 371         }                                                                                                </span>
<span  style=""> 372                                                                                                          </span>
<span class="-4597135701451302256" onmouseenter="enter('-4597135701451302256');" onmouseout="out('-4597135701451302256');" style=""> 373         // ActivityLifecycleCallbacks                                                                    </span>
<span class="-9026181668329411137" onmouseenter="enter('-9026181668329411137');" onmouseout="out('-9026181668329411137');" style=""> 374         @SuppressLint(&quot;LongLogTag&quot;)                                                                      </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 375         @Override                                                                                        </span>
<span class="-3924077821180675166" onmouseenter="enter('-3924077821180675166');" onmouseout="out('-3924077821180675166');" style=""> 376         public void onActivityResumed(@NonNull Activity activity) {                                      </span>
<span class="-1824713474309501961" onmouseenter="enter('-1824713474309501961');" onmouseout="out('-1824713474309501961');" style=""> 377             if (mIsInBackground) {                                                                       </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 378                 AnalyticsTracker.track(                                                                  </span>
<span class="-9053818901097240592" onmouseenter="enter('-9053818901097240592');" onmouseout="out('-9053818901097240592');" style=""> 379                         AnalyticsTracker.Stat.APPLICATION_OPENED,                                        </span>
<span class="3255995284721740364" onmouseenter="enter('3255995284721740364');" onmouseout="out('3255995284721740364');" style=""> 380                         AnalyticsTracker.CATEGORY_USER,                                                  </span>
<span class="5765105888033949578" onmouseenter="enter('5765105888033949578');" onmouseout="out('5765105888033949578');" style=""> 381                         &quot;application_opened&quot;                                                             </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 382                 );                                                                                       </span>
<span  style=""> 383                                                                                                          </span>
<span class="-6497924770077247329" onmouseenter="enter('-6497924770077247329');" onmouseout="out('-6497924770077247329');" style=""> 384                 mIsInBackground = false;                                                                 </span>
<span class="-6333475820451850994" onmouseenter="enter('-6333475820451850994');" onmouseout="out('-6333475820451850994');" style=""> 385                 AppLog.add(Type.ACTION, &quot;App opened&quot;);                                                   </span>
<span class="7194601290059164528" onmouseenter="enter('7194601290059164528');" onmouseout="out('7194601290059164528');" style=""> 386                 WorkManager.getInstance(getApplicationContext()).cancelUniqueWork(TAG_SYNC);             </span>
<span class="-5838238914207245906" onmouseenter="enter('-5838238914207245906');" onmouseout="out('-5838238914207245906');" style=""> 387                 Log.d(&quot;Simplenote.onActivityResumed&quot;, &quot;Stopped worker&quot;);                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 388             }                                                                                            </span>
<span  style=""> 389                                                                                                          </span>
<span class="5242495516731300622" onmouseenter="enter('5242495516731300622');" onmouseout="out('5242495516731300622');" style=""> 390             String activitySimpleName = activity.getClass().getSimpleName();                             </span>
<span  style=""> 391                                                                                                          </span>
<span class="-8846517571959259873" onmouseenter="enter('-8846517571959259873');" onmouseout="out('-8846517571959259873');" style=""> 392             mAccountBucket.start();                                                                      </span>
<span class="4612815040229921167" onmouseenter="enter('4612815040229921167');" onmouseout="out('4612815040229921167');" style=""> 393             AppLog.add(Type.SYNC, &quot;Started account bucket (&quot; + activitySimpleName + &quot;)&quot;);                </span>
<span class="8915853447379815980" onmouseenter="enter('8915853447379815980');" onmouseout="out('8915853447379815980');" style=""> 394             mPreferencesBucket.start();                                                                  </span>
<span class="-3539741953604827644" onmouseenter="enter('-3539741953604827644');" onmouseout="out('-3539741953604827644');" style=""> 395             AppLog.add(Type.SYNC, &quot;Started preference bucket (&quot; + activitySimpleName + &quot;)&quot;);             </span>
<span class="-295722270474880574" onmouseenter="enter('-295722270474880574');" onmouseout="out('-295722270474880574');" style=""> 396             mNotesBucket.start();                                                                        </span>
<span class="-9002409501487253211" onmouseenter="enter('-9002409501487253211');" onmouseout="out('-9002409501487253211');" style=""> 397             AppLog.add(Type.SYNC, &quot;Started note bucket (&quot; + activitySimpleName + &quot;)&quot;);                   </span>
<span class="-8311192473139463459" onmouseenter="enter('-8311192473139463459');" onmouseout="out('-8311192473139463459');" style=""> 398             mTagsBucket.start();                                                                         </span>
<span class="2042044416855016901" onmouseenter="enter('2042044416855016901');" onmouseout="out('2042044416855016901');" style=""> 399             AppLog.add(Type.SYNC, &quot;Started tag bucket (&quot; + activitySimpleName + &quot;)&quot;);                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 400         }                                                                                                </span>
<span  style=""> 401                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 402         @Override                                                                                        </span>
<span class="3802784276197342934" onmouseenter="enter('3802784276197342934');" onmouseout="out('3802784276197342934');" style=""> 403         public void onActivityCreated(@NonNull Activity activity, Bundle savedInstanceState) {           </span>
<span  style=""> 404                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 405         }                                                                                                </span>
<span  style=""> 406                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 407         @Override                                                                                        </span>
<span class="1925798780581030833" onmouseenter="enter('1925798780581030833');" onmouseout="out('1925798780581030833');" style=""> 408         public void onActivityStarted(@NonNull Activity activity) {                                      </span>
<span class="9099687594228455443" onmouseenter="enter('9099687594228455443');" onmouseout="out('9099687594228455443');" style=""> 409             mCurrentActivity = activity;                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 410         }                                                                                                </span>
<span  style=""> 411                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 412         @Override                                                                                        </span>
<span class="6762635398346313192" onmouseenter="enter('6762635398346313192');" onmouseout="out('6762635398346313192');" style=""> 413         public void onActivityPaused(@NonNull Activity activity) {                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 414         }                                                                                                </span>
<span  style=""> 415                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 416         @Override                                                                                        </span>
<span class="-7982391621651416385" onmouseenter="enter('-7982391621651416385');" onmouseout="out('-7982391621651416385');" style=""> 417         public void onActivityStopped(@NonNull Activity activity) {                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 418         }                                                                                                </span>
<span  style=""> 419                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 420         @Override                                                                                        </span>
<span class="2275335402994256657" onmouseenter="enter('2275335402994256657');" onmouseout="out('2275335402994256657');" style=""> 421         public void onActivitySaveInstanceState(@NonNull Activity activity, @NonNull Bundle outState) {  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 422         }                                                                                                </span>
<span  style=""> 423                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 424         @Override                                                                                        </span>
<span class="7397501089288945407" onmouseenter="enter('7397501089288945407');" onmouseout="out('7397501089288945407');" style=""> 425         public void onActivityDestroyed(@NonNull Activity activity) {                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 426         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 427     }                                                                                                    </span>
<span  style=""> 428                                                                                                          </span>
<span class="-8023094567209057938" onmouseenter="enter('-8023094567209057938');" onmouseout="out('-8023094567209057938');" style=""> 429     private class SyncTimePersister implements SyncTimes.SyncTimeListener {                              </span>
<span class="-8038048970190219255" onmouseenter="enter('-8038048970190219255');" onmouseout="out('-8038048970190219255');" style=""> 430         private final SharedPreferences mPreferences;                                                    </span>
<span  style=""> 431                                                                                                          </span>
<span class="-5420023059608856786" onmouseenter="enter('-5420023059608856786');" onmouseout="out('-5420023059608856786');" style=""> 432         public SyncTimePersister() {                                                                     </span>
<span class="-1774045212698754392" onmouseenter="enter('-1774045212698754392');" onmouseout="out('-1774045212698754392');" style=""> 433             mPreferences = getSharedPreferences(SYNC_TIME_PREFERENCES, Context.MODE_PRIVATE);            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 434         }                                                                                                </span>
<span  style=""> 435                                                                                                          </span>
<span class="5373267673669371854" onmouseenter="enter('5373267673669371854');" onmouseout="out('5373267673669371854');" style=""> 436         public HashMap&lt;String, Calendar&gt; load() {                                                        </span>
<span class="8617201152557861833" onmouseenter="enter('8617201152557861833');" onmouseout="out('8617201152557861833');" style=""> 437             HashMap&lt;String, Calendar&gt; syncTimes = new HashMap&lt;&gt;();                                       </span>
<span  style=""> 438                                                                                                          </span>
<span class="4462978973621022506" onmouseenter="enter('4462978973621022506');" onmouseout="out('4462978973621022506');" style=""> 439             //noinspection unchecked                                                                     </span>
<span class="1896092932717377555" onmouseenter="enter('1896092932717377555');" onmouseout="out('1896092932717377555');" style=""><abbr title=" 440             for (Map.Entry&lt;String, Long&gt; syncTime : ((Map&lt;String, Long&gt;) mPreferences.getAll()).entrySet()) {"> 440             for (Map.Entry&lt;String, Long&gt; syncTime : ((Map&lt;String, Long&gt;) mPreferences.getAll()).entrySet(ðŸ”µ</abbr></span>
<span class="-785210168314593407" onmouseenter="enter('-785210168314593407');" onmouseout="out('-785210168314593407');" style=""> 441                 Calendar instant = Calendar.getInstance();                                               </span>
<span class="2126061339283800576" onmouseenter="enter('2126061339283800576');" onmouseout="out('2126061339283800576');" style=""> 442                 instant.setTimeInMillis(syncTime.getValue());                                            </span>
<span class="6843114433125041391" onmouseenter="enter('6843114433125041391');" onmouseout="out('6843114433125041391');" style=""> 443                 syncTimes.put(syncTime.getKey(), instant);                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 444             }                                                                                            </span>
<span  style=""> 445                                                                                                          </span>
<span class="7782563231142685256" onmouseenter="enter('7782563231142685256');" onmouseout="out('7782563231142685256');" style=""> 446             return syncTimes;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 447         }                                                                                                </span>
<span  style=""> 448                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 449         @Override                                                                                        </span>
<span class="-6287771297506053883" onmouseenter="enter('-6287771297506053883');" onmouseout="out('-6287771297506053883');" style=""> 450         public void onRemove(String entityId) {                                                          </span>
<span class="2942962400697544803" onmouseenter="enter('2942962400697544803');" onmouseout="out('2942962400697544803');" style=""> 451             mPreferences.edit().remove(entityId).apply();                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 452         }                                                                                                </span>
<span  style=""> 453                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 454         @Override                                                                                        </span>
<span class="5435537090917886229" onmouseenter="enter('5435537090917886229');" onmouseout="out('5435537090917886229');" style=""> 455         public void onUpdate(String entityId, Calendar lastSyncTime, boolean isSynced) {                 </span>
<span class="1289918888759771632" onmouseenter="enter('1289918888759771632');" onmouseout="out('1289918888759771632');" style=""> 456             mPreferences.edit().putLong(entityId, lastSyncTime.getTimeInMillis()).apply();               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 457         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 458     }                                                                                                    </span>
<span  style=""> 459                                                                                                          </span>
<span class="-7040876324129805454" onmouseenter="enter('-7040876324129805454');" onmouseout="out('-7040876324129805454');" style=""> 460     private class VerificationListener implements AccountVerificationWatcher.VerificationStateListener { </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 461         @Override                                                                                        </span>
<span class="8311567710390595869" onmouseenter="enter('8311567710390595869');" onmouseout="out('8311567710390595869');" style=""> 462         public void onUpdate(AccountVerificationWatcher.Status status) {                                 </span>
<span class="1723944522238068006" onmouseenter="enter('1723944522238068006');" onmouseout="out('1723944522238068006');" style=""> 463             switch (status) {                                                                            </span>
<span class="7135169508302009941" onmouseenter="enter('7135169508302009941');" onmouseout="out('7135169508302009941');" style=""> 464                 case VERIFIED:                                                                           </span>
<span class="-4701728580258499512" onmouseenter="enter('-4701728580258499512');" onmouseout="out('-4701728580258499512');" style=""> 465                     dismissReviewAccountDialog();                                                        </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 466                     return;                                                                              </span>
<span  style=""> 467                                                                                                          </span>
<span class="-5520308039380404987" onmouseenter="enter('-5520308039380404987');" onmouseout="out('-5520308039380404987');" style=""> 468                 case SENT_EMAIL:                                                                         </span>
<span class="691507398654622561" onmouseenter="enter('691507398654622561');" onmouseout="out('691507398654622561');" style=""> 469                     showWaitingOnEmailConfirmation();                                                    </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 470                     return;                                                                              </span>
<span  style=""> 471                                                                                                          </span>
<span class="1250246892713626578" onmouseenter="enter('1250246892713626578');" onmouseout="out('1250246892713626578');" style=""> 472                 case UNVERIFIED:                                                                         </span>
<span class="-1913002634248395144" onmouseenter="enter('-1913002634248395144');" onmouseout="out('-1913002634248395144');" style=""> 473                     showUnverifiedAccount();                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 474             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 475         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 476     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 477 }                                                                                                        </span>




</pre></td>
                            <td><pre><span class="8328120990598135231" onmouseenter="enter('8328120990598135231');" onmouseout="out('8328120990598135231');" style="">   1 package com.automattic.simplenote;                                                                       </span>
<span  style="">   2                                                                                                          </span>
<span class="-3997288425915246049" onmouseenter="enter('-3997288425915246049');" onmouseout="out('-3997288425915246049');" style="">   3 import android.annotation.SuppressLint;                                                                  </span>
<span class="-7090287939251728203" onmouseenter="enter('-7090287939251728203');" onmouseout="out('-7090287939251728203');" style="">   4 import android.app.Activity;                                                                             </span>
<span class="-4535828467892621321" onmouseenter="enter('-4535828467892621321');" onmouseout="out('-4535828467892621321');" style="">   5 import android.app.Application;                                                                          </span>
<span class="-5120547123096501078" onmouseenter="enter('-5120547123096501078');" onmouseout="out('-5120547123096501078');" style="">   6 import android.content.ComponentCallbacks2;                                                              </span>
<span class="5922045460006936195" onmouseenter="enter('5922045460006936195');" onmouseout="out('5922045460006936195');" style="">   7 import android.content.Context;                                                                          </span>
<span class="4122587240602557356" onmouseenter="enter('4122587240602557356');" onmouseout="out('4122587240602557356');" style="">   8 import android.content.SharedPreferences;                                                                </span>
<span class="-9179032954578521484" onmouseenter="enter('-9179032954578521484');" onmouseout="out('-9179032954578521484');" style="">   9 import android.content.res.Configuration;                                                                </span>
<span class="-4549785658871057260" onmouseenter="enter('-4549785658871057260');" onmouseout="out('-4549785658871057260');" style="">  10 import android.os.Build;                                                                                 </span>
<span class="8096531590004379472" onmouseenter="enter('8096531590004379472');" onmouseout="out('8096531590004379472');" style="">  11 import android.os.Bundle;                                                                                </span>
<span class="-1086316590722027623" onmouseenter="enter('-1086316590722027623');" onmouseout="out('-1086316590722027623');" style="">  12 import android.os.Handler;                                                                               </span>
<span class="7196841398407674858" onmouseenter="enter('7196841398407674858');" onmouseout="out('7196841398407674858');" style="">  13 import android.util.Log;                                                                                 </span>
<span class="-6242887455281895424" onmouseenter="enter('-6242887455281895424');" onmouseout="out('-6242887455281895424');" style="">  14 import androidx.annotation.IdRes;                                                                        </span>
<span class="6963272077887521702" onmouseenter="enter('6963272077887521702');" onmouseout="out('6963272077887521702');" style="">  15 import androidx.annotation.NonNull;                                                                      </span>
<span class="7702331687346133722" onmouseenter="enter('7702331687346133722');" onmouseout="out('7702331687346133722');" style="">  16 import androidx.appcompat.app.AppCompatDelegate;                                                         </span>
<span class="2878002094531064439" onmouseenter="enter('2878002094531064439');" onmouseout="out('2878002094531064439');" style="">  17 import androidx.fragment.app.Fragment;                                                                   </span>
<span class="-6438193002598115217" onmouseenter="enter('-6438193002598115217');" onmouseout="out('-6438193002598115217');" style="">  18 import androidx.fragment.app.FragmentManager;                                                            </span>
<span class="-5166869418136344301" onmouseenter="enter('-5166869418136344301');" onmouseout="out('-5166869418136344301');" style="">  19 import androidx.work.BackoffPolicy;                                                                      </span>
<span class="-4431582294891577664" onmouseenter="enter('-4431582294891577664');" onmouseout="out('-4431582294891577664');" style="">  20 import androidx.work.Constraints;                                                                        </span>
<span class="3185086351037345986" onmouseenter="enter('3185086351037345986');" onmouseout="out('3185086351037345986');" style="">  21 import androidx.work.ExistingPeriodicWorkPolicy;                                                         </span>
<span class="-3698903318922252687" onmouseenter="enter('-3698903318922252687');" onmouseout="out('-3698903318922252687');" style="">  22 import androidx.work.NetworkType;                                                                        </span>
<span class="2994979786497810699" onmouseenter="enter('2994979786497810699');" onmouseout="out('2994979786497810699');" style="">  23 import androidx.work.PeriodicWorkRequest;                                                                </span>
<span class="5786013396577205846" onmouseenter="enter('5786013396577205846');" onmouseout="out('5786013396577205846');" style="">  24 import androidx.work.WorkManager;                                                                        </span>
<span class="-155835000323929258" onmouseenter="enter('-155835000323929258');" onmouseout="out('-155835000323929258');" style="">  25 import com.automattic.simplenote.analytics.AnalyticsTracker;                                             </span>
<span class="-2312717542362407496" onmouseenter="enter('-2312717542362407496');" onmouseout="out('-2312717542362407496');" style="">  26 import com.automattic.simplenote.analytics.AnalyticsTrackerNosara;                                       </span>
<span class="-149350832801163469" onmouseenter="enter('-149350832801163469');" onmouseout="out('-149350832801163469');" style="">  27 import com.automattic.simplenote.models.Account;                                                         </span>
<span class="9061368408436996655" onmouseenter="enter('9061368408436996655');" onmouseout="out('9061368408436996655');" style="">  28 import com.automattic.simplenote.models.Note;                                                            </span>
<span class="7102019831075911821" onmouseenter="enter('7102019831075911821');" onmouseout="out('7102019831075911821');" style="">  29 import com.automattic.simplenote.models.NoteCountIndexer;                                                </span>
<span class="4426422982983644373" onmouseenter="enter('4426422982983644373');" onmouseout="out('4426422982983644373');" style="">  30 import com.automattic.simplenote.models.NoteTagger;                                                      </span>
<span class="2894626372351854793" onmouseenter="enter('2894626372351854793');" onmouseout="out('2894626372351854793');" style="">  31 import com.automattic.simplenote.models.Preferences;                                                     </span>
<span class="107771998888903823" onmouseenter="enter('107771998888903823');" onmouseout="out('107771998888903823');" style="">  32 import com.automattic.simplenote.models.Tag;                                                             </span>
<span class="3201045117631650546" onmouseenter="enter('3201045117631650546');" onmouseout="out('3201045117631650546');" style="">  33 import com.automattic.simplenote.utils.AccountVerificationWatcher;                                       </span>
<span class="7580776162261256599" onmouseenter="enter('7580776162261256599');" onmouseout="out('7580776162261256599');" style="">  34 import com.automattic.simplenote.utils.AppLog.Type;                                                      </span>
<span class="160698548927534529" onmouseenter="enter('160698548927534529');" onmouseout="out('160698548927534529');" style="">  35 import com.automattic.simplenote.utils.AppLog;                                                           </span>
<span class="-3429573708794919100" onmouseenter="enter('-3429573708794919100');" onmouseout="out('-3429573708794919100');" style="">  36 import com.automattic.simplenote.utils.CrashUtils;                                                       </span>
<span class="8577850632926167445" onmouseenter="enter('8577850632926167445');" onmouseout="out('8577850632926167445');" style="">  37 import com.automattic.simplenote.utils.DisplayUtils;                                                     </span>
<span class="-7136497821822559876" onmouseenter="enter('-7136497821822559876');" onmouseout="out('-7136497821822559876');" style="">  38 import com.automattic.simplenote.utils.PrefUtils;                                                        </span>
<span class="-5753381984404345794" onmouseenter="enter('-5753381984404345794');" onmouseout="out('-5753381984404345794');" style="">  39 import com.automattic.simplenote.utils.SyncWorker;                                                       </span>
<span class="-6131823772648778947" onmouseenter="enter('-6131823772648778947');" onmouseout="out('-6131823772648778947');" style="">  40 import com.simperium.Simperium;                                                                          </span>
<span class="581913492648825508" onmouseenter="enter('581913492648825508');" onmouseout="out('581913492648825508');" style="">  41 import com.simperium.android.AndroidClient;                                                              </span>
<span class="1573888967082901106" onmouseenter="enter('1573888967082901106');" onmouseout="out('1573888967082901106');" style="">  42 import com.simperium.android.WebSocketManager;                                                           </span>
<span class="-8170925370861558125" onmouseenter="enter('-8170925370861558125');" onmouseout="out('-8170925370861558125');" style="">  43 import com.simperium.client.Bucket;                                                                      </span>
<span class="-6754815116321497467" onmouseenter="enter('-6754815116321497467');" onmouseout="out('-6754815116321497467');" style="">  44 import com.simperium.client.BucketNameInvalid;                                                           </span>
<span class="-8454203534157102839" onmouseenter="enter('-8454203534157102839');" onmouseout="out('-8454203534157102839');" style="">  45 import com.simperium.client.BucketObjectMissingException;                                                </span>
<span class="-6128914918417430442" onmouseenter="enter('-6128914918417430442');" onmouseout="out('-6128914918417430442');" style="">  46 import com.simperium.client.ChannelProvider.HeartbeatListener;                                           </span>
<span class="4554110602695491054" onmouseenter="enter('4554110602695491054');" onmouseout="out('4554110602695491054');" style="">  47 import com.simperium.client.User;                                                                        </span>
<span class="4818424207955561707" onmouseenter="enter('4818424207955561707');" onmouseout="out('4818424207955561707');" style="">  48 import dagger.hilt.android.HiltAndroidApp;                                                               </span>
<span class="1562735530241225598" onmouseenter="enter('1562735530241225598');" onmouseout="out('1562735530241225598');" style="">  49 import java.util.Calendar;                                                                               </span>
<span class="4169599896190320038" onmouseenter="enter('4169599896190320038');" onmouseout="out('4169599896190320038');" style="">  50 import java.util.HashMap;                                                                                </span>
<span class="6618655971923850695" onmouseenter="enter('6618655971923850695');" onmouseout="out('6618655971923850695');" style="">  51 import java.util.Map;                                                                                    </span>
<span class="-6356287537734540725" onmouseenter="enter('-6356287537734540725');" onmouseout="out('-6356287537734540725');" style="">  52 import java.util.concurrent.TimeUnit;                                                                    </span>
<span class="7324884800271719890" onmouseenter="enter('7324884800271719890');" onmouseout="out('7324884800271719890');" style="">  53 import org.wordpress.passcodelock.AppLockManager;                                                        </span>
<span class="3919052636780858758" onmouseenter="enter('3919052636780858758');" onmouseout="out('3919052636780858758');" style="">  54 import static com.automattic.simplenote.models.Preferences.PREFERENCES_OBJECT_KEY;                       </span>
<span class="-2196284958529318469" onmouseenter="enter('-2196284958529318469');" onmouseout="out('-2196284958529318469');" style="">  55 import static com.simperium.android.AsyncAuthClient.USER_ACCESS_TOKEN_PREFERENCE;                        </span>
<span class="-7261804762945120970" onmouseenter="enter('-7261804762945120970');" onmouseout="out('-7261804762945120970');" style="">  56 import static com.simperium.android.AsyncAuthClient.USER_EMAIL_PREFERENCE;                               </span>
<span  style="">  57                                                                                                          </span>
<span  style="">  58                                                                                                          </span>
<span class="-1044996963561409144" onmouseenter="enter('-1044996963561409144');" onmouseout="out('-1044996963561409144');" style="">  59 @HiltAndroidApp                                                                                          </span>
<span class="5261034755457737176" onmouseenter="enter('5261034755457737176');" onmouseout="out('5261034755457737176');" style="">  60 public class Simplenote extends Application implements HeartbeatListener {                               </span>
<span class="-9163404905215646951" onmouseenter="enter('-9163404905215646951');" onmouseout="out('-9163404905215646951');" style="">  61     public static final String DELETED_NOTE_ID = &quot;deletedNoteId&quot;;                                        </span>
<span  style="">  62                                                                                                          </span>
<span class="5833235806353570833" onmouseenter="enter('5833235806353570833');" onmouseout="out('5833235806353570833');" style="">  63     public static final String SELECTED_NOTE_ID = &quot;selectedNoteId&quot;;                                      </span>
<span  style="">  64                                                                                                          </span>
<span class="6246994664501093582" onmouseenter="enter('6246994664501093582');" onmouseout="out('6246994664501093582');" style="">  65     public static final String SCROLL_POSITION_PREFERENCES = &quot;scroll_position&quot;;                          </span>
<span  style="">  66                                                                                                          </span>
<span class="-7519035262730977956" onmouseenter="enter('-7519035262730977956');" onmouseout="out('-7519035262730977956');" style="">  67     public static final String SYNC_TIME_PREFERENCES = &quot;sync_time&quot;;                                      </span>
<span  style="">  68                                                                                                          </span>
<span class="-8693524844222569932" onmouseenter="enter('-8693524844222569932');" onmouseout="out('-8693524844222569932');" style="">  69     public static final String TAG = &quot;Simplenote&quot;;                                                       </span>
<span  style="">  70                                                                                                          </span>
<span class="3215095332324123101" onmouseenter="enter('3215095332324123101');" onmouseout="out('3215095332324123101');" style="">  71     public static final int INTENT_EDIT_NOTE = 2;                                                        </span>
<span  style="">  72                                                                                                          </span>
<span class="5587967888967017737" onmouseenter="enter('5587967888967017737');" onmouseout="out('5587967888967017737');" style="">  73     public static final int INTENT_PREFERENCES = 1;                                                      </span>
<span  style="">  74                                                                                                          </span>
<span class="-4201540866437643781" onmouseenter="enter('-4201540866437643781');" onmouseout="out('-4201540866437643781');" style="">  75     // 60 seconds                                                                                        </span>
<span class="-7131135836515418231" onmouseenter="enter('-7131135836515418231');" onmouseout="out('-7131135836515418231');" style="">  76     public static final int ONE_MINUTE_MILLIS = 60 * 1000;  // 60 seconds                                </span>
<span  style="">  77                                                                                                          </span>
<span class="4948440771636580240" onmouseenter="enter('4948440771636580240');" onmouseout="out('4948440771636580240');" style="">  78     // 10 seconds                                                                                        </span>
<span class="2194585893201893968" onmouseenter="enter('2194585893201893968');" onmouseout="out('2194585893201893968');" style="">  79     public static final int TEN_SECONDS_MILLIS = 10 * 1000;  // 10 seconds                               </span>
<span  style="">  80                                                                                                          </span>
<span class="-3645346098056154054" onmouseenter="enter('-3645346098056154054');" onmouseout="out('-3645346098056154054');" style="">  81     // 20 seconds                                                                                        </span>
<span class="-6274174172868583745" onmouseenter="enter('-6274174172868583745');" onmouseout="out('-6274174172868583745');" style="">  82     public static final int TWENTY_SECONDS_MILLIS = 20 * 1000;  // 20 seconds                            </span>
<span  style="">  83                                                                                                          </span>
<span class="53348235283476519" onmouseenter="enter('53348235283476519');" onmouseout="out('53348235283476519');" style="">  84     private static final String AUTH_PROVIDER = &quot;simplenote.com&quot;;                                        </span>
<span  style="">  85                                                                                                          </span>
<span class="3318171237102217895" onmouseenter="enter('3318171237102217895');" onmouseout="out('3318171237102217895');" style="">  86     private static final String TAG_SYNC = &quot;sync&quot;;                                                       </span>
<span  style="">  87                                                                                                          </span>
<span class="4591981961767073369" onmouseenter="enter('4591981961767073369');" onmouseout="out('4591981961767073369');" style="">  88     private static final long HEARTBEAT_TIMEOUT =  WebSocketManager.HEARTBEAT_INTERVAL * 2;              </span>
<span  style="">  89                                                                                                          </span>
<span class="4362379815071194585" onmouseenter="enter('4362379815071194585');" onmouseout="out('4362379815071194585');" style="">  90     private Activity mCurrentActivity;                                                                   </span>
<span  style="">  91                                                                                                          </span>
<span class="7535211107389480967" onmouseenter="enter('7535211107389480967');" onmouseout="out('7535211107389480967');" style="">  92     private static Bucket&lt;Account&gt; mAccountBucket;                                                       </span>
<span  style="">  93                                                                                                          </span>
<span class="-5728139290357644856" onmouseenter="enter('-5728139290357644856');" onmouseout="out('-5728139290357644856');" style="">  94     private static Bucket&lt;Preferences&gt; mPreferencesBucket;                                               </span>
<span  style="">  95                                                                                                          </span>
<span class="-7913886194286774922" onmouseenter="enter('-7913886194286774922');" onmouseout="out('-7913886194286774922');" style="">  96     private Bucket&lt;Note&gt; mNotesBucket;                                                                   </span>
<span  style="">  97                                                                                                          </span>
<span class="-3447103309759426335" onmouseenter="enter('-3447103309759426335');" onmouseout="out('-3447103309759426335');" style="">  98     private Bucket&lt;Tag&gt; mTagsBucket;                                                                     </span>
<span  style="">  99                                                                                                          </span>
<span class="5428937602637269790" onmouseenter="enter('5428937602637269790');" onmouseout="out('5428937602637269790');" style=""> 100     private SyncTimes&lt;Note&gt; mNoteSyncTimes;                                                              </span>
<span  style=""> 101                                                                                                          </span>
<span class="1419071614229033804" onmouseenter="enter('1419071614229033804');" onmouseout="out('1419071614229033804');" style=""> 102     private Handler mHeartbeatHandler;                                                                   </span>
<span  style=""> 103                                                                                                          </span>
<span class="-7581284801413594720" onmouseenter="enter('-7581284801413594720');" onmouseout="out('-7581284801413594720');" style=""> 104     private Runnable mHeartbeatRunnable;                                                                 </span>
<span  style=""> 105                                                                                                          </span>
<span class="8198744544525618575" onmouseenter="enter('8198744544525618575');" onmouseout="out('8198744544525618575');" style=""> 106     private Simperium mSimperium;                                                                        </span>
<span  style=""> 107                                                                                                          </span>
<span class="-2339277597485504791" onmouseenter="enter('-2339277597485504791');" onmouseout="out('-2339277597485504791');" style=""> 108     private boolean mIsInBackground = true;                                                              </span>
<span  style=""> 109                                                                                                          </span>
<span class="-2716773701189387633" onmouseenter="enter('-2716773701189387633');" onmouseout="out('-2716773701189387633');" style=""> 110     public void onCreate() {                                                                             </span>
<span class="-2958534921295515858" onmouseenter="enter('-2958534921295515858');" onmouseout="out('-2958534921295515858');" style=""> 111         super.onCreate();                                                                                </span>
<span class="4646367228775257968" onmouseenter="enter('4646367228775257968');" onmouseout="out('4646367228775257968');" style=""> 112         CrashUtils.initWithContext(this);                                                                </span>
<span class="-5111101701014776486" onmouseenter="enter('-5111101701014776486');" onmouseout="out('-5111101701014776486');" style=""> 113         SimplenoteAppLock appLock = new SimplenoteAppLock(this);                                         </span>
<span class="-2126957952781882671" onmouseenter="enter('-2126957952781882671');" onmouseout="out('-2126957952781882671');" style=""> 114         AppLockManager.getInstance().setCurrentAppLock(appLock);                                         </span>
<span class="-192548486813849389" onmouseenter="enter('-192548486813849389');" onmouseout="out('-192548486813849389');" style=""> 115         appLock.enable();                                                                                </span>
<span class="5255651973339491646" onmouseenter="enter('5255651973339491646');" onmouseout="out('5255651973339491646');" style=""><abbr title=" 116         mSimperium = Simperium.newClient(BuildConfig.SIMPERIUM_APP_ID, BuildConfig.SIMPERIUM_APP_KEY, this);"> 116         mSimperium = Simperium.newClient(BuildConfig.SIMPERIUM_APP_ID, BuildConfig.SIMPERIUM_APP_KEY, thiðŸ”µ</abbr></span>
<span class="7031285256639409704" onmouseenter="enter('7031285256639409704');" onmouseout="out('7031285256639409704');" style=""> 117         mSimperium.setAuthProvider(AUTH_PROVIDER);                                                       </span>
<span class="9065419810018319535" onmouseenter="enter('9065419810018319535');" onmouseout="out('9065419810018319535');" style=""> 118         mSimperium.addHeartbeatListener(this);                                                           </span>
<span class="-1855727841872273262" onmouseenter="enter('-1855727841872273262');" onmouseout="out('-1855727841872273262');" style=""> 119         mHeartbeatHandler = new Handler();                                                               </span>
<span class="-1915212603929880067" onmouseenter="enter('-1915212603929880067');" onmouseout="out('-1915212603929880067');" style=""> 120         mHeartbeatRunnable = new Runnable() {                                                            </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 121             @Override                                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 122             public void run() {                                                                          </span>
<span class="4054271998020395502" onmouseenter="enter('4054271998020395502');" onmouseout="out('4054271998020395502');" style=""> 123                 AppLog.add(Type.NETWORK, &quot;Heartbeat stopped&quot;);                                           </span>
<span class="6204465678829044464" onmouseenter="enter('6204465678829044464');" onmouseout="out('6204465678829044464');" style=""> 124                 mHeartbeatHandler.removeCallbacks(mHeartbeatRunnable);                                   </span>
<span class="209086841339708400" onmouseenter="enter('209086841339708400');" onmouseout="out('209086841339708400');" style=""> 125                 mHeartbeatHandler.postDelayed(mHeartbeatRunnable, HEARTBEAT_TIMEOUT);                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 126             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 127         };                                                                                               </span>
<span class="3598094545545730496" onmouseenter="enter('3598094545545730496');" onmouseout="out('3598094545545730496');" style=""> 128         SyncTimePersister syncTimePersister = new SyncTimePersister();                                   </span>
<span class="2948787900293662004" onmouseenter="enter('2948787900293662004');" onmouseout="out('2948787900293662004');" style=""> 129         mNoteSyncTimes = new SyncTimes&lt;&gt;(syncTimePersister.load());                                      </span>
<span class="8243749995089440347" onmouseenter="enter('8243749995089440347');" onmouseout="out('8243749995089440347');" style=""> 130         mNoteSyncTimes.addListener(syncTimePersister);                                                   </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 131         try {                                                                                            </span>
<span class="-3712083184111777754" onmouseenter="enter('-3712083184111777754');" onmouseout="out('-3712083184111777754');" style=""> 132             mNotesBucket = mSimperium.bucket(new Note.Schema());                                         </span>
<span class="6461086551110304444" onmouseenter="enter('6461086551110304444');" onmouseout="out('6461086551110304444');" style=""> 133             mNotesBucket.addListener(mNoteSyncTimes.bucketListener);                                     </span>
<span class="8722979014886483827" onmouseenter="enter('8722979014886483827');" onmouseout="out('8722979014886483827');" style=""> 134             Tag.Schema tagSchema = new Tag.Schema();                                                     </span>
<span class="-9102287405513372469" onmouseenter="enter('-9102287405513372469');" onmouseout="out('-9102287405513372469');" style=""> 135             tagSchema.addIndex(new NoteCountIndexer(mNotesBucket));                                      </span>
<span class="-175388701111242190" onmouseenter="enter('-175388701111242190');" onmouseout="out('-175388701111242190');" style=""> 136             mTagsBucket = mSimperium.bucket(tagSchema);                                                  </span>
<span class="4439876589301981228" onmouseenter="enter('4439876589301981228');" onmouseout="out('4439876589301981228');" style=""> 137             mPreferencesBucket = mSimperium.bucket(new Preferences.Schema());                            </span>
<span class="-2625727357905435450" onmouseenter="enter('-2625727357905435450');" onmouseout="out('-2625727357905435450');" style=""> 138             mAccountBucket = mSimperium.bucket(new Account.Schema());                                    </span>
<span class="-6547495449248025559" onmouseenter="enter('-6547495449248025559');" onmouseout="out('-6547495449248025559');" style=""><abbr title=" 139             mAccountBucket.addOnNetworkChangeListener(new AccountVerificationWatcher(this, new VerificationListener()));"> 139             mAccountBucket.addOnNetworkChangeListener(new AccountVerificationWatcher(this, new VerificatiðŸ”µ</abbr></span>
<span class="6417103925919259383" onmouseenter="enter('6417103925919259383');" onmouseout="out('6417103925919259383');" style=""> 140             // Every time a note changes or is deleted we need to reindex the tag counts                 </span>
<span class="1028093174501664258" onmouseenter="enter('1028093174501664258');" onmouseout="out('1028093174501664258');" style=""> 141             mNotesBucket.addListener(new NoteTagger(mTagsBucket));                                       </span>
<span class="9150575117674564137" onmouseenter="enter('9150575117674564137');" onmouseout="out('9150575117674564137');" style=""> 142         } catch (BucketNameInvalid e) {                                                                  </span>
<span class="5045778340242790475" onmouseenter="enter('5045778340242790475');" onmouseout="out('5045778340242790475');" style=""> 143             throw new RuntimeException(&quot;Could not create bucket&quot;, e);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 144         }                                                                                                </span>
<span class="-6104247182653922910" onmouseenter="enter('-6104247182653922910');" onmouseout="out('-6104247182653922910');" style=""> 145         AppCompatDelegate.setCompatVectorFromResourcesEnabled(true);                                     </span>
<span class="1079457458543399093" onmouseenter="enter('1079457458543399093');" onmouseout="out('1079457458543399093');" style=""> 146         ApplicationLifecycleMonitor applicationLifecycleMonitor = new ApplicationLifecycleMonitor();     </span>
<span class="381596098670029908" onmouseenter="enter('381596098670029908');" onmouseout="out('381596098670029908');" style=""> 147         registerComponentCallbacks(applicationLifecycleMonitor);                                         </span>
<span class="-8076193737884381578" onmouseenter="enter('-8076193737884381578');" onmouseout="out('-8076193737884381578');" style=""> 148         registerActivityLifecycleCallbacks(applicationLifecycleMonitor);                                 </span>
<span class="1335392763825317999" onmouseenter="enter('1335392763825317999');" onmouseout="out('1335392763825317999');" style=""> 149         AnalyticsTracker.registerTracker(new AnalyticsTrackerNosara(this));                              </span>
<span class="-1844307234054360739" onmouseenter="enter('-1844307234054360739');" onmouseout="out('-1844307234054360739');" style=""> 150         AnalyticsTracker.refreshMetadata(mSimperium.getUser().getEmail());                               </span>
<span class="8399230582885161213" onmouseenter="enter('8399230582885161213');" onmouseout="out('8399230582885161213');" style=""> 151         CrashUtils.setCurrentUser(mSimperium.getUser());                                                 </span>
<span class="-1455224487599073617" onmouseenter="enter('-1455224487599073617');" onmouseout="out('-1455224487599073617');" style=""> 152         AppLog.add(Type.DEVICE, getDeviceInfo());                                                        </span>
<span class="-4084915558750483061" onmouseenter="enter('-4084915558750483061');" onmouseout="out('-4084915558750483061');" style=""> 153         AppLog.add(Type.ACCOUNT, getAccountInfo());                                                      </span>
<span class="2836855866522176624" onmouseenter="enter('2836855866522176624');" onmouseout="out('2836855866522176624');" style=""> 154         AppLog.add(Type.LAYOUT, DisplayUtils.getDisplaySizeAndOrientation(this));                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 155     }                                                                                                    </span>
<span  style=""> 156                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 157     @Override                                                                                            </span>
<span class="7640484986889102054" onmouseenter="enter('7640484986889102054');" onmouseout="out('7640484986889102054');" style=""> 158     public void onBeat() {                                                                               </span>
<span class="7315421582655131800" onmouseenter="enter('7315421582655131800');" onmouseout="out('7315421582655131800');" style=""> 159         AppLog.add(Type.NETWORK, &quot;Heartbeat received&quot;);                                                  </span>
<span class="6204465678829044464" onmouseenter="enter('6204465678829044464');" onmouseout="out('6204465678829044464');" style=""> 160         mHeartbeatHandler.removeCallbacks(mHeartbeatRunnable);                                           </span>
<span class="209086841339708400" onmouseenter="enter('209086841339708400');" onmouseout="out('209086841339708400');" style=""> 161         mHeartbeatHandler.postDelayed(mHeartbeatRunnable, HEARTBEAT_TIMEOUT);                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 162     }                                                                                                    </span>
<span  style=""> 163                                                                                                          </span>
<span class="-5261177328937716585" onmouseenter="enter('-5261177328937716585');" onmouseout="out('-5261177328937716585');" style=""> 164     public static boolean analyticsIsEnabled() {                                                         </span>
<span class="1755574756529165678" onmouseenter="enter('1755574756529165678');" onmouseout="out('1755574756529165678');" style=""> 165         if (mPreferencesBucket == null) {                                                                </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 166             return true;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 167         }                                                                                                </span>
<span  style=""> 168                                                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 169         try {                                                                                            </span>
<span class="734651049898166881" onmouseenter="enter('734651049898166881');" onmouseout="out('734651049898166881');" style=""> 170             Preferences prefs = mPreferencesBucket.get(PREFERENCES_OBJECT_KEY);                          </span>
<span class="1383721738222569542" onmouseenter="enter('1383721738222569542');" onmouseout="out('1383721738222569542');" style=""> 171             return prefs.getAnalyticsEnabled();                                                          </span>
<span class="-1560847995217927266" onmouseenter="enter('-1560847995217927266');" onmouseout="out('-1560847995217927266');" style=""> 172         } catch (BucketObjectMissingException e) {                                                       </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 173             return true;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 174         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 175     }                                                                                                    </span>
<span  style=""> 176                                                                                                          </span>
<span class="4656537755100497713" onmouseenter="enter('4656537755100497713');" onmouseout="out('4656537755100497713');" style=""> 177     private String getAccountInfo() {                                                                    </span>
<span class="-4909194837402373696" onmouseenter="enter('-4909194837402373696');" onmouseout="out('-4909194837402373696');" style=""><abbr title=" 178         String email = &quot;Email: &quot; + (mSimperium != null &amp;&amp; mSimperium.getUser() != null ? mSimperium.getUser().getEmail() : &quot;?&quot;);"> 178         String email = &quot;Email: &quot; + (mSimperium != null &amp;&amp; mSimperium.getUser() != null ? mSimperium.getUsðŸ”µ</abbr></span>
<span class="-1815219994356976513" onmouseenter="enter('-1815219994356976513');" onmouseout="out('-1815219994356976513');" style=""> 179         String notes = &quot;Notes: &quot; + (mNotesBucket != null ? mNotesBucket.count() : &quot;?&quot;);                  </span>
<span class="-4701463784795893558" onmouseenter="enter('-4701463784795893558');" onmouseout="out('-4701463784795893558');" style=""> 180         String tags = &quot;Tags: &quot; + (mTagsBucket != null ? mTagsBucket.count() : &quot;?&quot;);                      </span>
<span class="5597163353916173356" onmouseenter="enter('5597163353916173356');" onmouseout="out('5597163353916173356');" style=""> 181         return email + &quot;\n&quot; + notes + &quot;\n&quot; + tags + &quot;\n\n&quot;;                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 182     }                                                                                                    </span>
<span  style=""> 183                                                                                                          </span>
<span class="-4176269846075250192" onmouseenter="enter('-4176269846075250192');" onmouseout="out('-4176269846075250192');" style=""> 184     private String getDeviceInfo() {                                                                     </span>
<span class="7581408804502865572" onmouseenter="enter('7581408804502865572');" onmouseout="out('7581408804502865572');" style=""><abbr title=" 185         String architecture = Build.DEVICE != null &amp;&amp; Build.DEVICE.matches(&quot;.+_cheets|cheets_.+&quot;) ? &quot;Chrome OS &quot; : &quot;Android &quot;;"> 185         String architecture = Build.DEVICE != null &amp;&amp; Build.DEVICE.matches(&quot;.+_cheets|cheets_.+&quot;) ? &quot;ChroðŸ”µ</abbr></span>
<span class="-921339907737118722" onmouseenter="enter('-921339907737118722');" onmouseout="out('-921339907737118722');" style=""> 186         String device = &quot;Device: &quot; + Build.MANUFACTURER + &quot; &quot; + Build.MODEL + &quot; (&quot; + Build.DEVICE + &quot;)&quot;; </span>
<span class="-7970072835487477375" onmouseenter="enter('-7970072835487477375');" onmouseout="out('-7970072835487477375');" style=""><abbr title=" 187         String system = &quot;System: &quot; + architecture + Build.VERSION.RELEASE + &quot; (&quot; + Build.VERSION.SDK_INT + &quot;)&quot;;"> 187         String system = &quot;System: &quot; + architecture + Build.VERSION.RELEASE + &quot; (&quot; + Build.VERSION.SDK_INT ðŸ”µ</abbr></span>
<span class="3648033425382070956" onmouseenter="enter('3648033425382070956');" onmouseout="out('3648033425382070956');" style=""> 188         String app = &quot;App: Simplenote &quot; + PrefUtils.versionInfo();                                       </span>
<span class="6793127563363345208" onmouseenter="enter('6793127563363345208');" onmouseout="out('6793127563363345208');" style=""> 189         return device + &quot;\n&quot; + system + &quot;\n&quot; + app + &quot;\n\n&quot;;                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 190     }                                                                                                    </span>
<span  style=""> 191                                                                                                          </span>
<span class="-2452840228833033114" onmouseenter="enter('-2452840228833033114');" onmouseout="out('-2452840228833033114');" style=""> 192     public Simperium getSimperium() {                                                                    </span>
<span class="-1067936515361198064" onmouseenter="enter('-1067936515361198064');" onmouseout="out('-1067936515361198064');" style=""> 193         return mSimperium;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 194     }                                                                                                    </span>
<span  style=""> 195                                                                                                          </span>
<span class="8475950615112765175" onmouseenter="enter('8475950615112765175');" onmouseout="out('8475950615112765175');" style=""> 196     public Bucket&lt;Note&gt; getNotesBucket() {                                                               </span>
<span class="3001734825963445545" onmouseenter="enter('3001734825963445545');" onmouseout="out('3001734825963445545');" style=""> 197         return mNotesBucket;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 198     }                                                                                                    </span>
<span  style=""> 199                                                                                                          </span>
<span class="365385451944262609" onmouseenter="enter('365385451944262609');" onmouseout="out('365385451944262609');" style=""> 200     public SyncTimes getNoteSyncTimes() {                                                                </span>
<span class="6562319796144170989" onmouseenter="enter('6562319796144170989');" onmouseout="out('6562319796144170989');" style=""> 201         return mNoteSyncTimes;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 202     }                                                                                                    </span>
<span  style=""> 203                                                                                                          </span>
<span class="1680392141704969043" onmouseenter="enter('1680392141704969043');" onmouseout="out('1680392141704969043');" style=""> 204     public Bucket&lt;Tag&gt; getTagsBucket() {                                                                 </span>
<span class="6135487691608919718" onmouseenter="enter('6135487691608919718');" onmouseout="out('6135487691608919718');" style=""> 205         return mTagsBucket;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 206     }                                                                                                    </span>
<span  style=""> 207                                                                                                          </span>
<span class="-4506300185279466066" onmouseenter="enter('-4506300185279466066');" onmouseout="out('-4506300185279466066');" style=""> 208     public Bucket&lt;Preferences&gt; getPreferencesBucket() {                                                  </span>
<span class="6715102450829888836" onmouseenter="enter('6715102450829888836');" onmouseout="out('6715102450829888836');" style=""> 209         return mPreferencesBucket;                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 210     }                                                                                                    </span>
<span  style=""> 211                                                                                                          </span>
<span class="8939354386013821015" onmouseenter="enter('8939354386013821015');" onmouseout="out('8939354386013821015');" style=""> 212     public Bucket&lt;Account&gt; getAccountBucket() {                                                          </span>
<span class="2771394281478310822" onmouseenter="enter('2771394281478310822');" onmouseout="out('2771394281478310822');" style=""> 213         return mAccountBucket;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 214     }                                                                                                    </span>
<span  style=""> 215                                                                                                          </span>
<span class="-5307885032361585350" onmouseenter="enter('-5307885032361585350');" onmouseout="out('-5307885032361585350');" style=""> 216     public boolean isInBackground() {                                                                    </span>
<span class="3812912940560000313" onmouseenter="enter('3812912940560000313');" onmouseout="out('3812912940560000313');" style=""> 217         return mIsInBackground;                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 218     }                                                                                                    </span>
<span  style=""> 219                                                                                                          </span>
<span class="9084571718636450070" onmouseenter="enter('9084571718636450070');" onmouseout="out('9084571718636450070');" style=""> 220     public void loginWithToken(String email, String spToken) {                                           </span>
<span class="2848300691293606814" onmouseenter="enter('2848300691293606814');" onmouseout="out('2848300691293606814');" style=""> 221         // Manually authorize the user with Simperium                                                    </span>
<span class="-4556253445089435832" onmouseenter="enter('-4556253445089435832');" onmouseout="out('-4556253445089435832');" style=""> 222         User user = mSimperium.getUser();                                                                </span>
<span class="-4915005065677121955" onmouseenter="enter('-4915005065677121955');" onmouseout="out('-4915005065677121955');" style=""> 223         user.setAccessToken(spToken);                                                                    </span>
<span class="877344059420132568" onmouseenter="enter('877344059420132568');" onmouseout="out('877344059420132568');" style=""> 224         user.setEmail(email);                                                                            </span>
<span class="538456865812119501" onmouseenter="enter('538456865812119501');" onmouseout="out('538456865812119501');" style=""> 225         user.setStatus(User.Status.AUTHORIZED);                                                          </span>
<span  style=""> 226                                                                                                          </span>
<span class="-755513241422191443" onmouseenter="enter('-755513241422191443');" onmouseout="out('-755513241422191443');" style=""> 227         // Store the user data in Simperium shared preferences                                           </span>
<span class="4508720492858536163" onmouseenter="enter('4508720492858536163');" onmouseout="out('4508720492858536163');" style=""> 228         SharedPreferences.Editor editor = AndroidClient.sharedPreferences(this).edit();                  </span>
<span class="2812904514433972765" onmouseenter="enter('2812904514433972765');" onmouseout="out('2812904514433972765');" style=""> 229         editor.putString(USER_ACCESS_TOKEN_PREFERENCE, user.getAccessToken());                           </span>
<span class="-3810862774138306438" onmouseenter="enter('-3810862774138306438');" onmouseout="out('-3810862774138306438');" style=""> 230         editor.putString(USER_EMAIL_PREFERENCE, user.getEmail());                                        </span>
<span class="-5305612453340718340" onmouseenter="enter('-5305612453340718340');" onmouseout="out('-5305612453340718340');" style=""> 231         editor.apply();                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 232     }                                                                                                    </span>
<span  style=""> 233                                                                                                          </span>
<span class="2855914666290052253" onmouseenter="enter('2855914666290052253');" onmouseout="out('2855914666290052253');" style=""> 234     public boolean isLoggedIn() {                                                                        </span>
<span class="-4556253445089435832" onmouseenter="enter('-4556253445089435832');" onmouseout="out('-4556253445089435832');" style=""> 235         User user = mSimperium.getUser();                                                                </span>
<span class="754608154577126470" onmouseenter="enter('754608154577126470');" onmouseout="out('754608154577126470');" style=""> 236         return user != null &amp;&amp; user.getStatus() == User.Status.AUTHORIZED;                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 237     }                                                                                                    </span>
<span  style=""> 238                                                                                                          </span>
<span class="542821705420321329" onmouseenter="enter('542821705420321329');" onmouseout="out('542821705420321329');" style=""> 239     public String getUserEmail() {                                                                       </span>
<span class="-4556253445089435832" onmouseenter="enter('-4556253445089435832');" onmouseout="out('-4556253445089435832');" style=""> 240         User user = mSimperium.getUser();                                                                </span>
<span class="-5079006915454915875" onmouseenter="enter('-5079006915454915875');" onmouseout="out('-5079006915454915875');" style=""> 241         return user != null ? user.getEmail() : null;                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 242     }                                                                                                    </span>
<span  style=""> 243                                                                                                          </span>
<span class="2937462577027157320" onmouseenter="enter('2937462577027157320');" onmouseout="out('2937462577027157320');" style=""> 244     private void showUnverifiedAccount() {                                                               </span>
<span class="3922537486351779763" onmouseenter="enter('3922537486351779763');" onmouseout="out('3922537486351779763');" style=""> 245         showReviewAccountOrVerifyEmail(mCurrentActivity, false);                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 246     }                                                                                                    </span>
<span  style=""> 247                                                                                                          </span>
<span class="-1951278736681351578" onmouseenter="enter('-1951278736681351578');" onmouseout="out('-1951278736681351578');" style=""> 248     private void showWaitingOnEmailConfirmation() {                                                      </span>
<span class="1761307439081029946" onmouseenter="enter('1761307439081029946');" onmouseout="out('1761307439081029946');" style=""> 249         showReviewAccountOrVerifyEmail(mCurrentActivity, true);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 250     }                                                                                                    </span>
<span  style=""> 251                                                                                                          </span>
<span class="-3355299330142398603" onmouseenter="enter('-3355299330142398603');" onmouseout="out('-3355299330142398603');" style=""> 252     private void dismissReviewAccountDialog() {                                                          </span>
<span class="-4849539574283382852" onmouseenter="enter('-4849539574283382852');" onmouseout="out('-4849539574283382852');" style=""> 253         FragmentManager fragmentManager;                                                                 </span>
<span class="-8221972854904999507" onmouseenter="enter('-8221972854904999507');" onmouseout="out('-8221972854904999507');" style=""> 254         if (mCurrentActivity instanceof NotesActivity) {                                                 </span>
<span class="-476761908897467356" onmouseenter="enter('-476761908897467356');" onmouseout="out('-476761908897467356');" style=""> 255             fragmentManager = ((NotesActivity) (mCurrentActivity)).getSupportFragmentManager();          </span>
<span class="-5847895969969896469" onmouseenter="enter('-5847895969969896469');" onmouseout="out('-5847895969969896469');" style=""> 256         } else if (mCurrentActivity instanceof NoteEditorActivity) {                                     </span>
<span class="-2581369323955266263" onmouseenter="enter('-2581369323955266263');" onmouseout="out('-2581369323955266263');" style=""> 257             fragmentManager = ((NoteEditorActivity) (mCurrentActivity)).getSupportFragmentManager();     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 258         } else {                                                                                         </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 259             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 260         }                                                                                                </span>
<span class="-1386275356577769478" onmouseenter="enter('-1386275356577769478');" onmouseout="out('-1386275356577769478');" style=""> 261         for (Fragment fragment : fragmentManager.getFragments()) {                                       </span>
<span class="-3329316781317474527" onmouseenter="enter('-3329316781317474527');" onmouseout="out('-3329316781317474527');" style=""> 262             if (fragment instanceof FullScreenDialogFragment) {                                          </span>
<span class="6444465259359632518" onmouseenter="enter('6444465259359632518');" onmouseout="out('6444465259359632518');" style=""> 263                 ((FullScreenDialogFragment) (fragment)).dismiss();                                       </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 264                 return;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 265             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 266         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 267     }                                                                                                    </span>
<span  style=""> 268                                                                                                          </span>
<span class="2332882432376014482" onmouseenter="enter('2332882432376014482');" onmouseout="out('2332882432376014482');" style=""> 269     private void showReviewAccountOrVerifyEmail(final Activity activity, boolean hasSentEmail) {         </span>
<span class="-3746560840586400800" onmouseenter="enter('-3746560840586400800');" onmouseout="out('-3746560840586400800');" style=""> 270         final FragmentManager fragmentManager;                                                           </span>
<span class="-589161453238220402" onmouseenter="enter('-589161453238220402');" onmouseout="out('-589161453238220402');" style=""> 271         @IdRes                                                                                           </span>
<span class="1558082516350669300" onmouseenter="enter('1558082516350669300');" onmouseout="out('1558082516350669300');" style=""> 272         final int container;                                                                             </span>
<span class="6030899174327056570" onmouseenter="enter('6030899174327056570');" onmouseout="out('6030899174327056570');" style=""> 273         if (activity instanceof NotesActivity) {                                                         </span>
<span class="5014419150268011880" onmouseenter="enter('5014419150268011880');" onmouseout="out('5014419150268011880');" style=""> 274             fragmentManager = ((NotesActivity) (activity)).getSupportFragmentManager();                  </span>
<span class="-6813895032683749169" onmouseenter="enter('-6813895032683749169');" onmouseout="out('-6813895032683749169');" style=""> 275             container = R.id.drawer_layout;                                                              </span>
<span class="-6053920028300427274" onmouseenter="enter('-6053920028300427274');" onmouseout="out('-6053920028300427274');" style=""> 276         } else if (activity instanceof NoteEditorActivity) {                                             </span>
<span class="3692377207499968869" onmouseenter="enter('3692377207499968869');" onmouseout="out('3692377207499968869');" style=""> 277             fragmentManager = ((NoteEditorActivity) (activity)).getSupportFragmentManager();             </span>
<span class="5106126685052663813" onmouseenter="enter('5106126685052663813');" onmouseout="out('5106126685052663813');" style=""> 278             container = android.R.id.content;                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 279         } else {                                                                                         </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 280             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 281         }                                                                                                </span>
<span class="7005732918292981998" onmouseenter="enter('7005732918292981998');" onmouseout="out('7005732918292981998');" style=""> 282         final Bundle bundle = ReviewAccountVerifyEmailFragment.newBundle(hasSentEmail);                  </span>
<span class="7235755588798393576" onmouseenter="enter('7235755588798393576');" onmouseout="out('7235755588798393576');" style=""><abbr title=" 283         new FullScreenDialogFragment.Builder(activity).setContent(ReviewAccountVerifyEmailFragment.class, bundle).setOnConfirmListener(null).setOnDismissListener(null).setToolbarElevation(0).setViewContainer(container).build().show(fragmentManager, FullScreenDialogFragment.TAG);"> 283         new FullScreenDialogFragment.Builder(activity).setContent(ReviewAccountVerifyEmailFragment.class,ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 284     }                                                                                                    </span>
<span  style=""> 285                                                                                                          </span>
<span class="5958494264761392989" onmouseenter="enter('5958494264761392989');" onmouseout="out('5958494264761392989');" style=""><abbr title=" 286     private class ApplicationLifecycleMonitor implements Application.ActivityLifecycleCallbacks , ComponentCallbacks2 {"> 286     private class ApplicationLifecycleMonitor implements Application.ActivityLifecycleCallbacks , ComponeðŸ”µ</abbr></span>
<span class="3103941996577506651" onmouseenter="enter('3103941996577506651');" onmouseout="out('3103941996577506651');" style=""> 287         // ComponentCallbacks                                                                            </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 288         @Override                                                                                        </span>
<span class="2274976836934101801" onmouseenter="enter('2274976836934101801');" onmouseout="out('2274976836934101801');" style=""> 289         public void onTrimMemory(int level) {                                                            </span>
<span class="-1837603280920501393" onmouseenter="enter('-1837603280920501393');" onmouseout="out('-1837603280920501393');" style=""> 290             if (level == ComponentCallbacks2.TRIM_MEMORY_UI_HIDDEN) {                                    </span>
<span class="-4583313459107718715" onmouseenter="enter('-4583313459107718715');" onmouseout="out('-4583313459107718715');" style=""> 291                 mIsInBackground = true;                                                                  </span>
<span  style=""> 292                                                                                                          </span>
<span class="-7450229904998226699" onmouseenter="enter('-7450229904998226699');" onmouseout="out('-7450229904998226699');" style=""> 293                 // Give the buckets some time to finish sync, then stop them                             </span>
<span class="7162501222170899627" onmouseenter="enter('7162501222170899627');" onmouseout="out('7162501222170899627');" style=""> 294                 new Handler().postDelayed(new Runnable() {                                               </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 295                     @Override                                                                            </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 296                     public void run() {                                                                  </span>
<span class="1937243434374323959" onmouseenter="enter('1937243434374323959');" onmouseout="out('1937243434374323959');" style=""> 297                         if (!mIsInBackground) {                                                          </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 298                             return;                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 299                         }                                                                                </span>
<span  style=""> 300                                                                                                          </span>
<span class="-2200993789662803159" onmouseenter="enter('-2200993789662803159');" onmouseout="out('-2200993789662803159');" style=""> 301                         if (mAccountBucket != null) {                                                    </span>
<span class="1251129820679832423" onmouseenter="enter('1251129820679832423');" onmouseout="out('1251129820679832423');" style=""> 302                             mAccountBucket.stop();                                                       </span>
<span class="3408645548049517244" onmouseenter="enter('3408645548049517244');" onmouseout="out('3408645548049517244');" style=""> 303                             AppLog.add(Type.SYNC, &quot;Stopped account bucket (Simplenote)&quot;);                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 304                         }                                                                                </span>
<span  style=""> 305                                                                                                          </span>
<span class="6694920678363305995" onmouseenter="enter('6694920678363305995');" onmouseout="out('6694920678363305995');" style=""> 306                         if (mNotesBucket != null) {                                                      </span>
<span class="-9222421628383802707" onmouseenter="enter('-9222421628383802707');" onmouseout="out('-9222421628383802707');" style=""> 307                             mNotesBucket.stop();                                                         </span>
<span class="-8256972624868266110" onmouseenter="enter('-8256972624868266110');" onmouseout="out('-8256972624868266110');" style=""> 308                             AppLog.add(Type.SYNC, &quot;Stopped note bucket (Simplenote)&quot;);                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 309                         }                                                                                </span>
<span  style=""> 310                                                                                                          </span>
<span class="-6758879846146730703" onmouseenter="enter('-6758879846146730703');" onmouseout="out('-6758879846146730703');" style=""> 311                         if (mTagsBucket != null) {                                                       </span>
<span class="7440275301365041157" onmouseenter="enter('7440275301365041157');" onmouseout="out('7440275301365041157');" style=""> 312                             mTagsBucket.stop();                                                          </span>
<span class="3632904236952271414" onmouseenter="enter('3632904236952271414');" onmouseout="out('3632904236952271414');" style=""> 313                             AppLog.add(Type.SYNC, &quot;Stopped tag bucket (Simplenote)&quot;);                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 314                         }                                                                                </span>
<span  style=""> 315                                                                                                          </span>
<span class="-6192025378026905457" onmouseenter="enter('-6192025378026905457');" onmouseout="out('-6192025378026905457');" style=""> 316                         if (mPreferencesBucket != null) {                                                </span>
<span class="-7405985386384713994" onmouseenter="enter('-7405985386384713994');" onmouseout="out('-7405985386384713994');" style=""> 317                             mPreferencesBucket.stop();                                                   </span>
<span class="-5651227749650235797" onmouseenter="enter('-5651227749650235797');" onmouseout="out('-5651227749650235797');" style=""> 318                             AppLog.add(Type.SYNC, &quot;Stopped preference bucket (Simplenote)&quot;);             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 319                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 320                     }                                                                                    </span>
<span class="6786785065928556607" onmouseenter="enter('6786785065928556607');" onmouseout="out('6786785065928556607');" style=""> 321                 }, TEN_SECONDS_MILLIS);                                                                  </span>
<span  style=""> 322                                                                                                          </span>
<span class="5599227697513165792" onmouseenter="enter('5599227697513165792');" onmouseout="out('5599227697513165792');" style=""> 323                 PeriodicWorkRequest syncWorkRequest = new PeriodicWorkRequest.Builder(                   </span>
<span class="1408067071873564180" onmouseenter="enter('1408067071873564180');" onmouseout="out('1408067071873564180');" style=""> 324                     SyncWorker.class,                                                                    </span>
<span class="2973406529671611856" onmouseenter="enter('2973406529671611856');" onmouseout="out('2973406529671611856');" style=""> 325                     PeriodicWorkRequest.MIN_PERIODIC_INTERVAL_MILLIS,                                    </span>
<span class="-80463983603518610" onmouseenter="enter('-80463983603518610');" onmouseout="out('-80463983603518610');" style=""> 326                     TimeUnit.MILLISECONDS                                                                </span>
<span class="-2015476096144723150" onmouseenter="enter('-2015476096144723150');" onmouseout="out('-2015476096144723150');" style=""> 327                 )                                                                                        </span>
<span class="-6346518985674576590" onmouseenter="enter('-6346518985674576590');" onmouseout="out('-6346518985674576590');" style=""><abbr title=" 328                     .setConstraints(new Constraints.Builder().setRequiredNetworkType(NetworkType.CONNECTED).build())"> 328                     .setConstraints(new Constraints.Builder().setRequiredNetworkType(NetworkType.CONNECTEðŸ”µ</abbr></span>
<span class="1554687427185788181" onmouseenter="enter('1554687427185788181');" onmouseout="out('1554687427185788181');" style=""> 329                     .setBackoffCriteria(BackoffPolicy.LINEAR, ONE_MINUTE_MILLIS, TimeUnit.MILLISECONDS)  </span>
<span class="1665711086511789732" onmouseenter="enter('1665711086511789732');" onmouseout="out('1665711086511789732');" style=""> 330                     .setInitialDelay(TWENTY_SECONDS_MILLIS, TimeUnit.MILLISECONDS)                       </span>
<span class="8816433673387605168" onmouseenter="enter('8816433673387605168');" onmouseout="out('8816433673387605168');" style=""> 331                     .addTag(TAG_SYNC)                                                                    </span>
<span class="-368814941510255410" onmouseenter="enter('-368814941510255410');" onmouseout="out('-368814941510255410');" style=""> 332                     .build();                                                                            </span>
<span class="-957289309636137365" onmouseenter="enter('-957289309636137365');" onmouseout="out('-957289309636137365');" style=""> 333                 WorkManager.getInstance(getApplicationContext()).enqueueUniquePeriodicWork(              </span>
<span class="1890759471518076421" onmouseenter="enter('1890759471518076421');" onmouseout="out('1890759471518076421');" style=""> 334                     TAG_SYNC,                                                                            </span>
<span class="7031641102110402794" onmouseenter="enter('7031641102110402794');" onmouseout="out('7031641102110402794');" style=""> 335                     ExistingPeriodicWorkPolicy.REPLACE,                                                  </span>
<span class="7844672442552797006" onmouseenter="enter('7844672442552797006');" onmouseout="out('7844672442552797006');" style=""> 336                     syncWorkRequest                                                                      </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 337                 );                                                                                       </span>
<span class="-6272207136493112653" onmouseenter="enter('-6272207136493112653');" onmouseout="out('-6272207136493112653');" style=""> 338                 Log.d(&quot;Simplenote.onTrimMemory&quot;, &quot;Started worker&quot;);                                      </span>
<span  style=""> 339                                                                                                          </span>
<span class="-341478899160030823" onmouseenter="enter('-341478899160030823');" onmouseout="out('-341478899160030823');" style=""> 340                 // Send analytics if app is in the background                                            </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 341                 AnalyticsTracker.track(                                                                  </span>
<span class="3485374480742718668" onmouseenter="enter('3485374480742718668');" onmouseout="out('3485374480742718668');" style=""> 342                         AnalyticsTracker.Stat.APPLICATION_CLOSED,                                        </span>
<span class="3255995284721740364" onmouseenter="enter('3255995284721740364');" onmouseout="out('3255995284721740364');" style=""> 343                         AnalyticsTracker.CATEGORY_USER,                                                  </span>
<span class="3140085526459106828" onmouseenter="enter('3140085526459106828');" onmouseout="out('3140085526459106828');" style=""> 344                         &quot;application_closed&quot;                                                             </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 345                 );                                                                                       </span>
<span class="-7792835064107422696" onmouseenter="enter('-7792835064107422696');" onmouseout="out('-7792835064107422696');" style=""> 346                 AnalyticsTracker.flush();                                                                </span>
<span class="-6664472740739433069" onmouseenter="enter('-6664472740739433069');" onmouseout="out('-6664472740739433069');" style=""> 347                 AppLog.add(Type.ACTION, &quot;App closed&quot;);                                                   </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 348             } else {                                                                                     </span>
<span class="-6497924770077247329" onmouseenter="enter('-6497924770077247329');" onmouseout="out('-6497924770077247329');" style=""> 349                 mIsInBackground = false;                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 350             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 351         }                                                                                                </span>
<span  style=""> 352                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 353         @Override                                                                                        </span>
<span class="6856792358586712593" onmouseenter="enter('6856792358586712593');" onmouseout="out('6856792358586712593');" style=""> 354         public void onConfigurationChanged(@NonNull Configuration newConfig) {                           </span>
<span class="-671791306218270016" onmouseenter="enter('-671791306218270016');" onmouseout="out('-671791306218270016');" style=""> 355             AppLog.add(Type.LAYOUT, DisplayUtils.getDisplaySizeAndOrientation(Simplenote.this));         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 356         }                                                                                                </span>
<span  style=""> 357                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 358         @Override                                                                                        </span>
<span class="-4981664158563918121" onmouseenter="enter('-4981664158563918121');" onmouseout="out('-4981664158563918121');" style=""> 359         public void onLowMemory() {                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 360         }                                                                                                </span>
<span  style=""> 361                                                                                                          </span>
<span class="-4597135701451302256" onmouseenter="enter('-4597135701451302256');" onmouseout="out('-4597135701451302256');" style=""> 362         // ActivityLifecycleCallbacks                                                                    </span>
<span class="-9026181668329411137" onmouseenter="enter('-9026181668329411137');" onmouseout="out('-9026181668329411137');" style=""> 363         @SuppressLint(&quot;LongLogTag&quot;)                                                                      </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 364         @Override                                                                                        </span>
<span class="-3924077821180675166" onmouseenter="enter('-3924077821180675166');" onmouseout="out('-3924077821180675166');" style=""> 365         public void onActivityResumed(@NonNull Activity activity) {                                      </span>
<span class="-1824713474309501961" onmouseenter="enter('-1824713474309501961');" onmouseout="out('-1824713474309501961');" style=""> 366             if (mIsInBackground) {                                                                       </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 367                 AnalyticsTracker.track(                                                                  </span>
<span class="-9053818901097240592" onmouseenter="enter('-9053818901097240592');" onmouseout="out('-9053818901097240592');" style=""> 368                         AnalyticsTracker.Stat.APPLICATION_OPENED,                                        </span>
<span class="3255995284721740364" onmouseenter="enter('3255995284721740364');" onmouseout="out('3255995284721740364');" style=""> 369                         AnalyticsTracker.CATEGORY_USER,                                                  </span>
<span class="5765105888033949578" onmouseenter="enter('5765105888033949578');" onmouseout="out('5765105888033949578');" style=""> 370                         &quot;application_opened&quot;                                                             </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 371                 );                                                                                       </span>
<span  style=""> 372                                                                                                          </span>
<span class="-6497924770077247329" onmouseenter="enter('-6497924770077247329');" onmouseout="out('-6497924770077247329');" style=""> 373                 mIsInBackground = false;                                                                 </span>
<span class="-6333475820451850994" onmouseenter="enter('-6333475820451850994');" onmouseout="out('-6333475820451850994');" style=""> 374                 AppLog.add(Type.ACTION, &quot;App opened&quot;);                                                   </span>
<span class="7194601290059164528" onmouseenter="enter('7194601290059164528');" onmouseout="out('7194601290059164528');" style=""> 375                 WorkManager.getInstance(getApplicationContext()).cancelUniqueWork(TAG_SYNC);             </span>
<span class="-5838238914207245906" onmouseenter="enter('-5838238914207245906');" onmouseout="out('-5838238914207245906');" style=""> 376                 Log.d(&quot;Simplenote.onActivityResumed&quot;, &quot;Stopped worker&quot;);                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 377             }                                                                                            </span>
<span  style=""> 378                                                                                                          </span>
<span class="5242495516731300622" onmouseenter="enter('5242495516731300622');" onmouseout="out('5242495516731300622');" style=""> 379             String activitySimpleName = activity.getClass().getSimpleName();                             </span>
<span  style=""> 380                                                                                                          </span>
<span class="-8846517571959259873" onmouseenter="enter('-8846517571959259873');" onmouseout="out('-8846517571959259873');" style=""> 381             mAccountBucket.start();                                                                      </span>
<span class="4612815040229921167" onmouseenter="enter('4612815040229921167');" onmouseout="out('4612815040229921167');" style=""> 382             AppLog.add(Type.SYNC, &quot;Started account bucket (&quot; + activitySimpleName + &quot;)&quot;);                </span>
<span class="8915853447379815980" onmouseenter="enter('8915853447379815980');" onmouseout="out('8915853447379815980');" style=""> 383             mPreferencesBucket.start();                                                                  </span>
<span class="-3539741953604827644" onmouseenter="enter('-3539741953604827644');" onmouseout="out('-3539741953604827644');" style=""> 384             AppLog.add(Type.SYNC, &quot;Started preference bucket (&quot; + activitySimpleName + &quot;)&quot;);             </span>
<span class="-295722270474880574" onmouseenter="enter('-295722270474880574');" onmouseout="out('-295722270474880574');" style=""> 385             mNotesBucket.start();                                                                        </span>
<span class="-9002409501487253211" onmouseenter="enter('-9002409501487253211');" onmouseout="out('-9002409501487253211');" style=""> 386             AppLog.add(Type.SYNC, &quot;Started note bucket (&quot; + activitySimpleName + &quot;)&quot;);                   </span>
<span class="-8311192473139463459" onmouseenter="enter('-8311192473139463459');" onmouseout="out('-8311192473139463459');" style=""> 387             mTagsBucket.start();                                                                         </span>
<span class="2042044416855016901" onmouseenter="enter('2042044416855016901');" onmouseout="out('2042044416855016901');" style=""> 388             AppLog.add(Type.SYNC, &quot;Started tag bucket (&quot; + activitySimpleName + &quot;)&quot;);                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 389         }                                                                                                </span>
<span  style=""> 390                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 391         @Override                                                                                        </span>
<span class="-6482926771895283448" onmouseenter="enter('-6482926771895283448');" onmouseout="out('-6482926771895283448');" style=""> 392         public void onActivityCreated(@NonNull                                                           </span>
<span class="7633832761115839580" onmouseenter="enter('7633832761115839580');" onmouseout="out('7633832761115839580');" style=""> 393         Activity activity, Bundle savedInstanceState) {                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 394         }                                                                                                </span>
<span  style=""> 395                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 396         @Override                                                                                        </span>
<span class="-1882356222218990526" onmouseenter="enter('-1882356222218990526');" onmouseout="out('-1882356222218990526');" style=""> 397         public void onActivityStarted(@NonNull                                                           </span>
<span class="7197252147044558293" onmouseenter="enter('7197252147044558293');" onmouseout="out('7197252147044558293');" style=""> 398         Activity activity) {                                                                             </span>
<span class="9099687594228455443" onmouseenter="enter('9099687594228455443');" onmouseout="out('9099687594228455443');" style=""> 399             mCurrentActivity = activity;                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 400         }                                                                                                </span>
<span  style=""> 401                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 402         @Override                                                                                        </span>
<span class="6762635398346313192" onmouseenter="enter('6762635398346313192');" onmouseout="out('6762635398346313192');" style=""> 403         public void onActivityPaused(@NonNull Activity activity) {                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 404         }                                                                                                </span>
<span  style=""> 405                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 406         @Override                                                                                        </span>
<span class="-7982391621651416385" onmouseenter="enter('-7982391621651416385');" onmouseout="out('-7982391621651416385');" style=""> 407         public void onActivityStopped(@NonNull Activity activity) {                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 408         }                                                                                                </span>
<span  style=""> 409                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 410         @Override                                                                                        </span>
<span class="2275335402994256657" onmouseenter="enter('2275335402994256657');" onmouseout="out('2275335402994256657');" style=""> 411         public void onActivitySaveInstanceState(@NonNull Activity activity, @NonNull Bundle outState) {  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 412         }                                                                                                </span>
<span  style=""> 413                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 414         @Override                                                                                        </span>
<span class="7397501089288945407" onmouseenter="enter('7397501089288945407');" onmouseout="out('7397501089288945407');" style=""> 415         public void onActivityDestroyed(@NonNull Activity activity) {                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 416         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 417     }                                                                                                    </span>
<span  style=""> 418                                                                                                          </span>
<span class="-8023094567209057938" onmouseenter="enter('-8023094567209057938');" onmouseout="out('-8023094567209057938');" style=""> 419     private class SyncTimePersister implements SyncTimes.SyncTimeListener {                              </span>
<span class="-8038048970190219255" onmouseenter="enter('-8038048970190219255');" onmouseout="out('-8038048970190219255');" style=""> 420         private final SharedPreferences mPreferences;                                                    </span>
<span  style=""> 421                                                                                                          </span>
<span class="-5420023059608856786" onmouseenter="enter('-5420023059608856786');" onmouseout="out('-5420023059608856786');" style=""> 422         public SyncTimePersister() {                                                                     </span>
<span class="-1774045212698754392" onmouseenter="enter('-1774045212698754392');" onmouseout="out('-1774045212698754392');" style=""> 423             mPreferences = getSharedPreferences(SYNC_TIME_PREFERENCES, Context.MODE_PRIVATE);            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 424         }                                                                                                </span>
<span  style=""> 425                                                                                                          </span>
<span class="5373267673669371854" onmouseenter="enter('5373267673669371854');" onmouseout="out('5373267673669371854');" style=""> 426         public HashMap&lt;String, Calendar&gt; load() {                                                        </span>
<span class="8617201152557861833" onmouseenter="enter('8617201152557861833');" onmouseout="out('8617201152557861833');" style=""> 427             HashMap&lt;String, Calendar&gt; syncTimes = new HashMap&lt;&gt;();                                       </span>
<span class="-5345543316550174178" onmouseenter="enter('-5345543316550174178');" onmouseout="out('-5345543316550174178');" style=""> 428             // noinspection unchecked                                                                    </span>
<span class="6802261998743949644" onmouseenter="enter('6802261998743949644');" onmouseout="out('6802261998743949644');" style=""><abbr title=" 429             for (Map.Entry&lt;String, Long&gt; syncTime : ((Map&lt;String, Long&gt;) (mPreferences.getAll())).entrySet()) {"> 429             for (Map.Entry&lt;String, Long&gt; syncTime : ((Map&lt;String, Long&gt;) (mPreferences.getAll())).entrySeðŸ”µ</abbr></span>
<span class="-785210168314593407" onmouseenter="enter('-785210168314593407');" onmouseout="out('-785210168314593407');" style=""> 430                 Calendar instant = Calendar.getInstance();                                               </span>
<span class="2126061339283800576" onmouseenter="enter('2126061339283800576');" onmouseout="out('2126061339283800576');" style=""> 431                 instant.setTimeInMillis(syncTime.getValue());                                            </span>
<span class="6843114433125041391" onmouseenter="enter('6843114433125041391');" onmouseout="out('6843114433125041391');" style=""> 432                 syncTimes.put(syncTime.getKey(), instant);                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 433             }                                                                                            </span>
<span class="7782563231142685256" onmouseenter="enter('7782563231142685256');" onmouseout="out('7782563231142685256');" style=""> 434             return syncTimes;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 435         }                                                                                                </span>
<span  style=""> 436                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 437         @Override                                                                                        </span>
<span class="-6287771297506053883" onmouseenter="enter('-6287771297506053883');" onmouseout="out('-6287771297506053883');" style=""> 438         public void onRemove(String entityId) {                                                          </span>
<span class="2942962400697544803" onmouseenter="enter('2942962400697544803');" onmouseout="out('2942962400697544803');" style=""> 439             mPreferences.edit().remove(entityId).apply();                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 440         }                                                                                                </span>
<span  style=""> 441                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 442         @Override                                                                                        </span>
<span class="5435537090917886229" onmouseenter="enter('5435537090917886229');" onmouseout="out('5435537090917886229');" style=""> 443         public void onUpdate(String entityId, Calendar lastSyncTime, boolean isSynced) {                 </span>
<span class="1289918888759771632" onmouseenter="enter('1289918888759771632');" onmouseout="out('1289918888759771632');" style=""> 444             mPreferences.edit().putLong(entityId, lastSyncTime.getTimeInMillis()).apply();               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 445         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 446     }                                                                                                    </span>
<span  style=""> 447                                                                                                          </span>
<span class="-7040876324129805454" onmouseenter="enter('-7040876324129805454');" onmouseout="out('-7040876324129805454');" style=""> 448     private class VerificationListener implements AccountVerificationWatcher.VerificationStateListener { </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 449         @Override                                                                                        </span>
<span class="8311567710390595869" onmouseenter="enter('8311567710390595869');" onmouseout="out('8311567710390595869');" style=""> 450         public void onUpdate(AccountVerificationWatcher.Status status) {                                 </span>
<span class="1723944522238068006" onmouseenter="enter('1723944522238068006');" onmouseout="out('1723944522238068006');" style=""> 451             switch (status) {                                                                            </span>
<span class="8689519497696275293" onmouseenter="enter('8689519497696275293');" onmouseout="out('8689519497696275293');" style=""> 452                 case VERIFIED :                                                                          </span>
<span class="-4701728580258499512" onmouseenter="enter('-4701728580258499512');" onmouseout="out('-4701728580258499512');" style=""> 453                     dismissReviewAccountDialog();                                                        </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 454                     return;                                                                              </span>
<span class="-3411819193940805837" onmouseenter="enter('-3411819193940805837');" onmouseout="out('-3411819193940805837');" style=""> 455                 case SENT_EMAIL :                                                                        </span>
<span class="691507398654622561" onmouseenter="enter('691507398654622561');" onmouseout="out('691507398654622561');" style=""> 456                     showWaitingOnEmailConfirmation();                                                    </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 457                     return;                                                                              </span>
<span class="-5875788079701673024" onmouseenter="enter('-5875788079701673024');" onmouseout="out('-5875788079701673024');" style=""> 458                 case UNVERIFIED :                                                                        </span>
<span class="-1913002634248395144" onmouseenter="enter('-1913002634248395144');" onmouseout="out('-1913002634248395144');" style=""> 459                     showUnverifiedAccount();                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 460             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 461         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 462     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 463 }                                                                                                        </span>


















</pre></td>
                        </tr>
                    </table>
                </div>
                <div id="bottom">
                    <table style="margin:auto">
                        <tr>
                            <th>ours vs. base</th>
                            <th>theirs vs. base</th>
                        </tr>
                        <tr>
                            <td><pre><span class="8328120990598135231" onmouseenter="enter('8328120990598135231');" onmouseout="out('8328120990598135231');" style="">   1  package com.automattic.simplenote;                                                                                </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">   2 +                                                                                                                  </span>
<span class="3919052636780858758" onmouseenter="enter('3919052636780858758');" onmouseout="out('3919052636780858758');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">   3 +import static com.automattic.simplenote.models.Preferences.PREFERENCES_OBJECT_KEY;                                </span>
<span class="-2196284958529318469" onmouseenter="enter('-2196284958529318469');" onmouseout="out('-2196284958529318469');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">   4 +import static com.simperium.android.AsyncAuthClient.USER_ACCESS_TOKEN_PREFERENCE;                                 </span>
<span class="-7261804762945120970" onmouseenter="enter('-7261804762945120970');" onmouseout="out('-7261804762945120970');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">   5 +import static com.simperium.android.AsyncAuthClient.USER_EMAIL_PREFERENCE;                                        </span>

<span  style="">   6                                                                                                                    </span>
<span class="-3997288425915246049" onmouseenter="enter('-3997288425915246049');" onmouseout="out('-3997288425915246049');" style="">   7  import android.annotation.SuppressLint;                                                                           </span>
<span class="-7090287939251728203" onmouseenter="enter('-7090287939251728203');" onmouseout="out('-7090287939251728203');" style="">   8  import android.app.Activity;                                                                                      </span>
<span class="-4535828467892621321" onmouseenter="enter('-4535828467892621321');" onmouseout="out('-4535828467892621321');" style="">   9  import android.app.Application;                                                                                   </span>
<span class="-5120547123096501078" onmouseenter="enter('-5120547123096501078');" onmouseout="out('-5120547123096501078');" style="">  10  import android.content.ComponentCallbacks2;                                                                       </span>
<span class="5922045460006936195" onmouseenter="enter('5922045460006936195');" onmouseout="out('5922045460006936195');" style="">  11  import android.content.Context;                                                                                   </span>
<span class="4122587240602557356" onmouseenter="enter('4122587240602557356');" onmouseout="out('4122587240602557356');" style="">  12  import android.content.SharedPreferences;                                                                         </span>
<span class="-9179032954578521484" onmouseenter="enter('-9179032954578521484');" onmouseout="out('-9179032954578521484');" style="">  13  import android.content.res.Configuration;                                                                         </span>
<span class="-8750621697125156872" onmouseenter="enter('-8750621697125156872');" onmouseout="out('-8750621697125156872');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  14 -import android.net.Uri;                                                                                           </span>
<span class="-4549785658871057260" onmouseenter="enter('-4549785658871057260');" onmouseout="out('-4549785658871057260');" style="">  15  import android.os.Build;                                                                                          </span>
<span class="8096531590004379472" onmouseenter="enter('8096531590004379472');" onmouseout="out('8096531590004379472');" style="">  16  import android.os.Bundle;                                                                                         </span>
<span class="-1086316590722027623" onmouseenter="enter('-1086316590722027623');" onmouseout="out('-1086316590722027623');" style="">  17  import android.os.Handler;                                                                                        </span>
<span class="7196841398407674858" onmouseenter="enter('7196841398407674858');" onmouseout="out('7196841398407674858');" style="">  18  import android.util.Log;                                                                                          </span>
<span  style="">  19                                                                                                                    </span>
<span class="-6242887455281895424" onmouseenter="enter('-6242887455281895424');" onmouseout="out('-6242887455281895424');" style="">  20  import androidx.annotation.IdRes;                                                                                 </span>
<span class="6963272077887521702" onmouseenter="enter('6963272077887521702');" onmouseout="out('6963272077887521702');" style="">  21  import androidx.annotation.NonNull;                                                                               </span>
<span class="7702331687346133722" onmouseenter="enter('7702331687346133722');" onmouseout="out('7702331687346133722');" style="">  22  import androidx.appcompat.app.AppCompatDelegate;                                                                  </span>
<span class="2878002094531064439" onmouseenter="enter('2878002094531064439');" onmouseout="out('2878002094531064439');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  23 +import androidx.fragment.app.Fragment;                                                                            </span>
<span class="-6438193002598115217" onmouseenter="enter('-6438193002598115217');" onmouseout="out('-6438193002598115217');" style="">  24  import androidx.fragment.app.FragmentManager;                                                                     </span>
<span class="-5166869418136344301" onmouseenter="enter('-5166869418136344301');" onmouseout="out('-5166869418136344301');" style="">  25  import androidx.work.BackoffPolicy;                                                                               </span>
<span class="-4431582294891577664" onmouseenter="enter('-4431582294891577664');" onmouseout="out('-4431582294891577664');" style="">  26  import androidx.work.Constraints;                                                                                 </span>
<span class="3185086351037345986" onmouseenter="enter('3185086351037345986');" onmouseout="out('3185086351037345986');" style="">  27  import androidx.work.ExistingPeriodicWorkPolicy;                                                                  </span>
<span class="-3698903318922252687" onmouseenter="enter('-3698903318922252687');" onmouseout="out('-3698903318922252687');" style="">  28  import androidx.work.NetworkType;                                                                                 </span>
<span class="2994979786497810699" onmouseenter="enter('2994979786497810699');" onmouseout="out('2994979786497810699');" style="">  29  import androidx.work.PeriodicWorkRequest;                                                                         </span>
<span class="5786013396577205846" onmouseenter="enter('5786013396577205846');" onmouseout="out('5786013396577205846');" style="">  30  import androidx.work.WorkManager;                                                                                 </span>
<span  style="">  31                                                                                                                    </span>
<span class="-155835000323929258" onmouseenter="enter('-155835000323929258');" onmouseout="out('-155835000323929258');" style="">  32  import com.automattic.simplenote.analytics.AnalyticsTracker;                                                      </span>
<span class="-2312717542362407496" onmouseenter="enter('-2312717542362407496');" onmouseout="out('-2312717542362407496');" style="">  33  import com.automattic.simplenote.analytics.AnalyticsTrackerNosara;                                                </span>
<span class="-149350832801163469" onmouseenter="enter('-149350832801163469');" onmouseout="out('-149350832801163469');" style="">  34  import com.automattic.simplenote.models.Account;                                                                  </span>
<span class="9061368408436996655" onmouseenter="enter('9061368408436996655');" onmouseout="out('9061368408436996655');" style="">  35  import com.automattic.simplenote.models.Note;                                                                     </span>
<span class="7102019831075911821" onmouseenter="enter('7102019831075911821');" onmouseout="out('7102019831075911821');" style="">  36  import com.automattic.simplenote.models.NoteCountIndexer;                                                         </span>
<span class="4426422982983644373" onmouseenter="enter('4426422982983644373');" onmouseout="out('4426422982983644373');" style="">  37  import com.automattic.simplenote.models.NoteTagger;                                                               </span>
<span class="2894626372351854793" onmouseenter="enter('2894626372351854793');" onmouseout="out('2894626372351854793');" style="">  38  import com.automattic.simplenote.models.Preferences;                                                              </span>
<span class="107771998888903823" onmouseenter="enter('107771998888903823');" onmouseout="out('107771998888903823');" style="">  39  import com.automattic.simplenote.models.Tag;                                                                      </span>
<span class="3201045117631650546" onmouseenter="enter('3201045117631650546');" onmouseout="out('3201045117631650546');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  40 +import com.automattic.simplenote.utils.AccountVerificationWatcher;                                                </span>
<span class="160698548927534529" onmouseenter="enter('160698548927534529');" onmouseout="out('160698548927534529');" style="">  41  import com.automattic.simplenote.utils.AppLog;                                                                    </span>
<span class="7580776162261256599" onmouseenter="enter('7580776162261256599');" onmouseout="out('7580776162261256599');" style="">  42  import com.automattic.simplenote.utils.AppLog.Type;                                                               </span>
<span class="-3429573708794919100" onmouseenter="enter('-3429573708794919100');" onmouseout="out('-3429573708794919100');" style="">  43  import com.automattic.simplenote.utils.CrashUtils;                                                                </span>
<span class="8577850632926167445" onmouseenter="enter('8577850632926167445');" onmouseout="out('8577850632926167445');" style="">  44  import com.automattic.simplenote.utils.DisplayUtils;                                                              </span>
<span class="6713747859106964949" onmouseenter="enter('6713747859106964949');" onmouseout="out('6713747859106964949');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  45 -import com.automattic.simplenote.utils.NetworkUtils;                                                              </span>
<span class="-7136497821822559876" onmouseenter="enter('-7136497821822559876');" onmouseout="out('-7136497821822559876');" style="">  46  import com.automattic.simplenote.utils.PrefUtils;                                                                 </span>
<span class="-5753381984404345794" onmouseenter="enter('-5753381984404345794');" onmouseout="out('-5753381984404345794');" style="">  47  import com.automattic.simplenote.utils.SyncWorker;                                                                </span>
<span class="-6131823772648778947" onmouseenter="enter('-6131823772648778947');" onmouseout="out('-6131823772648778947');" style="">  48  import com.simperium.Simperium;                                                                                   </span>
<span class="581913492648825508" onmouseenter="enter('581913492648825508');" onmouseout="out('581913492648825508');" style="">  49  import com.simperium.android.AndroidClient;                                                                       </span>
<span class="1573888967082901106" onmouseenter="enter('1573888967082901106');" onmouseout="out('1573888967082901106');" style="">  50  import com.simperium.android.WebSocketManager;                                                                    </span>
<span class="-8170925370861558125" onmouseenter="enter('-8170925370861558125');" onmouseout="out('-8170925370861558125');" style="">  51  import com.simperium.client.Bucket;                                                                               </span>
<span class="-6754815116321497467" onmouseenter="enter('-6754815116321497467');" onmouseout="out('-6754815116321497467');" style="">  52  import com.simperium.client.BucketNameInvalid;                                                                    </span>
<span class="-8454203534157102839" onmouseenter="enter('-8454203534157102839');" onmouseout="out('-8454203534157102839');" style="">  53  import com.simperium.client.BucketObjectMissingException;                                                         </span>
<span class="-6128914918417430442" onmouseenter="enter('-6128914918417430442');" onmouseout="out('-6128914918417430442');" style="">  54  import com.simperium.client.ChannelProvider.HeartbeatListener;                                                    </span>
<span class="4554110602695491054" onmouseenter="enter('4554110602695491054');" onmouseout="out('4554110602695491054');" style="">  55  import com.simperium.client.User;                                                                                 </span>
<span  style="">  56                                                                                                                    </span>
<span class="7324884800271719890" onmouseenter="enter('7324884800271719890');" onmouseout="out('7324884800271719890');" style="">  57  import org.wordpress.passcodelock.AppLockManager;                                                                 </span>
<span  style="">  58                                                                                                                    </span>
<span class="1562735530241225598" onmouseenter="enter('1562735530241225598');" onmouseout="out('1562735530241225598');" style="">  59  import java.util.Calendar;                                                                                        </span>
<span class="4169599896190320038" onmouseenter="enter('4169599896190320038');" onmouseout="out('4169599896190320038');" style="">  60  import java.util.HashMap;                                                                                         </span>
<span class="-4563680703184802189" onmouseenter="enter('-4563680703184802189');" onmouseout="out('-4563680703184802189');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  61 -import java.util.Locale;                                                                                          </span>
<span class="6618655971923850695" onmouseenter="enter('6618655971923850695');" onmouseout="out('6618655971923850695');" style="">  62  import java.util.Map;                                                                                             </span>
<span class="-6356287537734540725" onmouseenter="enter('-6356287537734540725');" onmouseout="out('-6356287537734540725');" style="">  63  import java.util.concurrent.TimeUnit;                                                                             </span>
<span  style="">  64                                                                                                                    </span>
<span class="-3495781243593779480" onmouseenter="enter('-3495781243593779480');" onmouseout="out('-3495781243593779480');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  65 -import static com.automattic.simplenote.models.Account.KEY_EMAIL_VERIFICATION;                                    </span>
<span class="3919052636780858758" onmouseenter="enter('3919052636780858758');" onmouseout="out('3919052636780858758');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  66 -import static com.automattic.simplenote.models.Preferences.PREFERENCES_OBJECT_KEY;                                </span>
<span class="-2196284958529318469" onmouseenter="enter('-2196284958529318469');" onmouseout="out('-2196284958529318469');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  67 -import static com.simperium.android.AsyncAuthClient.USER_ACCESS_TOKEN_PREFERENCE;                                 </span>
<span class="-7261804762945120970" onmouseenter="enter('-7261804762945120970');" onmouseout="out('-7261804762945120970');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  68 -import static com.simperium.android.AsyncAuthClient.USER_EMAIL_PREFERENCE;                                        </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  69 -                                                                                                                  </span>
<span class="4818424207955561707" onmouseenter="enter('4818424207955561707');" onmouseout="out('4818424207955561707');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  70 +import dagger.hilt.android.HiltAndroidApp;                                                                        </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  71 +                                                                                                                  </span>
<span class="-1044996963561409144" onmouseenter="enter('-1044996963561409144');" onmouseout="out('-1044996963561409144');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  72 +@HiltAndroidApp                                                                                                   </span>
<span class="5261034755457737176" onmouseenter="enter('5261034755457737176');" onmouseout="out('5261034755457737176');" style="">  73  public class Simplenote extends Application implements HeartbeatListener {                                        </span>
<span class="-9163404905215646951" onmouseenter="enter('-9163404905215646951');" onmouseout="out('-9163404905215646951');" style="">  74      public static final String DELETED_NOTE_ID = &quot;deletedNoteId&quot;;                                                 </span>
<span class="5833235806353570833" onmouseenter="enter('5833235806353570833');" onmouseout="out('5833235806353570833');" style="">  75      public static final String SELECTED_NOTE_ID = &quot;selectedNoteId&quot;;                                               </span>
<span class="6246994664501093582" onmouseenter="enter('6246994664501093582');" onmouseout="out('6246994664501093582');" style="">  76      public static final String SCROLL_POSITION_PREFERENCES = &quot;scroll_position&quot;;                                   </span>
<span class="-7519035262730977956" onmouseenter="enter('-7519035262730977956');" onmouseout="out('-7519035262730977956');" style="">  77      public static final String SYNC_TIME_PREFERENCES = &quot;sync_time&quot;;                                               </span>
<span class="-8693524844222569932" onmouseenter="enter('-8693524844222569932');" onmouseout="out('-8693524844222569932');" style="">  78      public static final String TAG = &quot;Simplenote&quot;;                                                                </span>
<span class="3215095332324123101" onmouseenter="enter('3215095332324123101');" onmouseout="out('3215095332324123101');" style="">  79      public static final int INTENT_EDIT_NOTE = 2;                                                                 </span>
<span class="5587967888967017737" onmouseenter="enter('5587967888967017737');" onmouseout="out('5587967888967017737');" style="">  80      public static final int INTENT_PREFERENCES = 1;                                                               </span>
<span class="-7131135836515418231" onmouseenter="enter('-7131135836515418231');" onmouseout="out('-7131135836515418231');" style="">  81      public static final int ONE_MINUTE_MILLIS = 60 * 1000;  // 60 seconds                                         </span>
<span class="2194585893201893968" onmouseenter="enter('2194585893201893968');" onmouseout="out('2194585893201893968');" style="">  82      public static final int TEN_SECONDS_MILLIS = 10 * 1000;  // 10 seconds                                        </span>
<span class="-6274174172868583745" onmouseenter="enter('-6274174172868583745');" onmouseout="out('-6274174172868583745');" style="">  83      public static final int TWENTY_SECONDS_MILLIS = 20 * 1000;  // 20 seconds                                     </span>
<span  style="">  84                                                                                                                    </span>
<span class="53348235283476519" onmouseenter="enter('53348235283476519');" onmouseout="out('53348235283476519');" style="">  85      private static final String AUTH_PROVIDER = &quot;simplenote.com&quot;;                                                 </span>
<span class="3318171237102217895" onmouseenter="enter('3318171237102217895');" onmouseout="out('3318171237102217895');" style="">  86      private static final String TAG_SYNC = &quot;sync&quot;;                                                                </span>
<span class="4591981961767073369" onmouseenter="enter('4591981961767073369');" onmouseout="out('4591981961767073369');" style="">  87      private static final long HEARTBEAT_TIMEOUT =  WebSocketManager.HEARTBEAT_INTERVAL * 2;                       </span>
<span  style="">  88                                                                                                                    </span>
<span class="4362379815071194585" onmouseenter="enter('4362379815071194585');" onmouseout="out('4362379815071194585');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  89 +    private Activity mCurrentActivity;                                                                            </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  90 +                                                                                                                  </span>
<span class="7535211107389480967" onmouseenter="enter('7535211107389480967');" onmouseout="out('7535211107389480967');" style="">  91      private static Bucket&lt;Account&gt; mAccountBucket;                                                                </span>
<span class="-5728139290357644856" onmouseenter="enter('-5728139290357644856');" onmouseout="out('-5728139290357644856');" style="">  92      private static Bucket&lt;Preferences&gt; mPreferencesBucket;                                                        </span>
<span  style="">  93                                                                                                                    </span>
<span class="-7913886194286774922" onmouseenter="enter('-7913886194286774922');" onmouseout="out('-7913886194286774922');" style="">  94      private Bucket&lt;Note&gt; mNotesBucket;                                                                            </span>
<span class="-3447103309759426335" onmouseenter="enter('-3447103309759426335');" onmouseout="out('-3447103309759426335');" style="">  95      private Bucket&lt;Tag&gt; mTagsBucket;                                                                              </span>
<span class="5428937602637269790" onmouseenter="enter('5428937602637269790');" onmouseout="out('5428937602637269790');" style="">  96      private SyncTimes&lt;Note&gt; mNoteSyncTimes;                                                                       </span>
<span class="1419071614229033804" onmouseenter="enter('1419071614229033804');" onmouseout="out('1419071614229033804');" style="">  97      private Handler mHeartbeatHandler;                                                                            </span>
<span class="-7581284801413594720" onmouseenter="enter('-7581284801413594720');" onmouseout="out('-7581284801413594720');" style="">  98      private Runnable mHeartbeatRunnable;                                                                          </span>
<span class="8198744544525618575" onmouseenter="enter('8198744544525618575');" onmouseout="out('8198744544525618575');" style="">  99      private Simperium mSimperium;                                                                                 </span>
<span class="9035842280354646506" onmouseenter="enter('9035842280354646506');" onmouseout="out('9035842280354646506');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 100 -    private boolean mHasShownReviewOrVerify;                                                                      </span>
<span class="-2339277597485504791" onmouseenter="enter('-2339277597485504791');" onmouseout="out('-2339277597485504791');" style=""> 101      private boolean mIsInBackground = true;                                                                       </span>
<span  style=""> 102                                                                                                                    </span>
<span class="-2716773701189387633" onmouseenter="enter('-2716773701189387633');" onmouseout="out('-2716773701189387633');" style=""> 103      public void onCreate() {                                                                                      </span>
<span class="-2958534921295515858" onmouseenter="enter('-2958534921295515858');" onmouseout="out('-2958534921295515858');" style=""> 104          super.onCreate();                                                                                         </span>
<span  style=""> 105                                                                                                                    </span>
<span class="4646367228775257968" onmouseenter="enter('4646367228775257968');" onmouseout="out('4646367228775257968');" style=""> 106          CrashUtils.initWithContext(this);                                                                         </span>
<span  style=""> 107                                                                                                                    </span>
<span class="-5111101701014776486" onmouseenter="enter('-5111101701014776486');" onmouseout="out('-5111101701014776486');" style=""> 108          SimplenoteAppLock appLock = new SimplenoteAppLock(this);                                                  </span>
<span class="-2126957952781882671" onmouseenter="enter('-2126957952781882671');" onmouseout="out('-2126957952781882671');" style=""> 109          AppLockManager.getInstance().setCurrentAppLock(appLock);                                                  </span>
<span class="-192548486813849389" onmouseenter="enter('-192548486813849389');" onmouseout="out('-192548486813849389');" style=""> 110          appLock.enable();                                                                                         </span>
<span  style=""> 111                                                                                                                    </span>
<span class="-6610099647322125620" onmouseenter="enter('-6610099647322125620');" onmouseout="out('-6610099647322125620');" style=""> 112          mSimperium = Simperium.newClient(                                                                         </span>
<span class="-4695376588658458273" onmouseenter="enter('-4695376588658458273');" onmouseout="out('-4695376588658458273');" style=""> 113                  BuildConfig.SIMPERIUM_APP_ID,                                                                     </span>
<span class="4318504011662215607" onmouseenter="enter('4318504011662215607');" onmouseout="out('4318504011662215607');" style=""> 114                  BuildConfig.SIMPERIUM_APP_KEY,                                                                    </span>
<span class="7848723611787395232" onmouseenter="enter('7848723611787395232');" onmouseout="out('7848723611787395232');" style=""> 115                  this                                                                                              </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 116          );                                                                                                        </span>
<span  style=""> 117                                                                                                                    </span>
<span class="7031285256639409704" onmouseenter="enter('7031285256639409704');" onmouseout="out('7031285256639409704');" style=""> 118          mSimperium.setAuthProvider(AUTH_PROVIDER);                                                                </span>
<span class="9065419810018319535" onmouseenter="enter('9065419810018319535');" onmouseout="out('9065419810018319535');" style=""> 119          mSimperium.addHeartbeatListener(this);                                                                    </span>
<span  style=""> 120                                                                                                                    </span>
<span class="-1855727841872273262" onmouseenter="enter('-1855727841872273262');" onmouseout="out('-1855727841872273262');" style=""> 121          mHeartbeatHandler = new Handler();                                                                        </span>
<span class="-1915212603929880067" onmouseenter="enter('-1915212603929880067');" onmouseout="out('-1915212603929880067');" style=""> 122          mHeartbeatRunnable = new Runnable() {                                                                     </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 123              @Override                                                                                             </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 124              public void run() {                                                                                   </span>
<span class="4054271998020395502" onmouseenter="enter('4054271998020395502');" onmouseout="out('4054271998020395502');" style=""> 125                  AppLog.add(Type.NETWORK, &quot;Heartbeat stopped&quot;);                                                    </span>
<span class="6204465678829044464" onmouseenter="enter('6204465678829044464');" onmouseout="out('6204465678829044464');" style=""> 126                  mHeartbeatHandler.removeCallbacks(mHeartbeatRunnable);                                            </span>
<span class="209086841339708400" onmouseenter="enter('209086841339708400');" onmouseout="out('209086841339708400');" style=""> 127                  mHeartbeatHandler.postDelayed(mHeartbeatRunnable, HEARTBEAT_TIMEOUT);                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 128              }                                                                                                     </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 129          };                                                                                                        </span>
<span  style=""> 130                                                                                                                    </span>
<span class="3598094545545730496" onmouseenter="enter('3598094545545730496');" onmouseout="out('3598094545545730496');" style=""> 131          SyncTimePersister syncTimePersister = new SyncTimePersister();                                            </span>
<span class="2948787900293662004" onmouseenter="enter('2948787900293662004');" onmouseout="out('2948787900293662004');" style=""> 132          mNoteSyncTimes = new SyncTimes&lt;&gt;(syncTimePersister.load());                                               </span>
<span class="8243749995089440347" onmouseenter="enter('8243749995089440347');" onmouseout="out('8243749995089440347');" style=""> 133          mNoteSyncTimes.addListener(syncTimePersister);                                                            </span>
<span  style=""> 134                                                                                                                    </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 135          try {                                                                                                     </span>
<span class="-3712083184111777754" onmouseenter="enter('-3712083184111777754');" onmouseout="out('-3712083184111777754');" style=""> 136              mNotesBucket = mSimperium.bucket(new Note.Schema());                                                  </span>
<span class="6461086551110304444" onmouseenter="enter('6461086551110304444');" onmouseout="out('6461086551110304444');" style=""> 137              mNotesBucket.addListener(mNoteSyncTimes.bucketListener);                                              </span>
<span class="8722979014886483827" onmouseenter="enter('8722979014886483827');" onmouseout="out('8722979014886483827');" style=""> 138              Tag.Schema tagSchema = new Tag.Schema();                                                              </span>
<span class="-9102287405513372469" onmouseenter="enter('-9102287405513372469');" onmouseout="out('-9102287405513372469');" style=""> 139              tagSchema.addIndex(new NoteCountIndexer(mNotesBucket));                                               </span>
<span class="-175388701111242190" onmouseenter="enter('-175388701111242190');" onmouseout="out('-175388701111242190');" style=""> 140              mTagsBucket = mSimperium.bucket(tagSchema);                                                           </span>
<span class="4439876589301981228" onmouseenter="enter('4439876589301981228');" onmouseout="out('4439876589301981228');" style=""> 141              mPreferencesBucket = mSimperium.bucket(new Preferences.Schema());                                     </span>
<span class="-2625727357905435450" onmouseenter="enter('-2625727357905435450');" onmouseout="out('-2625727357905435450');" style=""> 142              mAccountBucket = mSimperium.bucket(new Account.Schema());                                             </span>
<span class="-8362296136901081825" onmouseenter="enter('-8362296136901081825');" onmouseout="out('-8362296136901081825');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 143 +            mAccountBucket.addOnNetworkChangeListener(                                                            </span>
<span class="4260345062700661756" onmouseenter="enter('4260345062700661756');" onmouseout="out('4260345062700661756');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 144 +                    new AccountVerificationWatcher(this, new VerificationListener())                              </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 145 +            );                                                                                                    </span>
<span class="6417103925919259383" onmouseenter="enter('6417103925919259383');" onmouseout="out('6417103925919259383');" style=""> 146              // Every time a note changes or is deleted we need to reindex the tag counts                          </span>
<span class="1028093174501664258" onmouseenter="enter('1028093174501664258');" onmouseout="out('1028093174501664258');" style=""> 147              mNotesBucket.addListener(new NoteTagger(mTagsBucket));                                                </span>
<span class="9150575117674564137" onmouseenter="enter('9150575117674564137');" onmouseout="out('9150575117674564137');" style=""> 148          } catch (BucketNameInvalid e) {                                                                           </span>
<span class="5045778340242790475" onmouseenter="enter('5045778340242790475');" onmouseout="out('5045778340242790475');" style=""> 149              throw new RuntimeException(&quot;Could not create bucket&quot;, e);                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 150          }                                                                                                         </span>
<span  style=""> 151                                                                                                                    </span>
<span class="-6104247182653922910" onmouseenter="enter('-6104247182653922910');" onmouseout="out('-6104247182653922910');" style=""> 152          AppCompatDelegate.setCompatVectorFromResourcesEnabled(true);                                              </span>
<span  style=""> 153                                                                                                                    </span>
<span class="1079457458543399093" onmouseenter="enter('1079457458543399093');" onmouseout="out('1079457458543399093');" style=""> 154          ApplicationLifecycleMonitor applicationLifecycleMonitor = new ApplicationLifecycleMonitor();              </span>
<span class="381596098670029908" onmouseenter="enter('381596098670029908');" onmouseout="out('381596098670029908');" style=""> 155          registerComponentCallbacks(applicationLifecycleMonitor);                                                  </span>
<span class="-8076193737884381578" onmouseenter="enter('-8076193737884381578');" onmouseout="out('-8076193737884381578');" style=""> 156          registerActivityLifecycleCallbacks(applicationLifecycleMonitor);                                          </span>
<span  style=""> 157                                                                                                                    </span>
<span class="1335392763825317999" onmouseenter="enter('1335392763825317999');" onmouseout="out('1335392763825317999');" style=""> 158          AnalyticsTracker.registerTracker(new AnalyticsTrackerNosara(this));                                       </span>
<span class="-1844307234054360739" onmouseenter="enter('-1844307234054360739');" onmouseout="out('-1844307234054360739');" style=""> 159          AnalyticsTracker.refreshMetadata(mSimperium.getUser().getEmail());                                        </span>
<span class="8399230582885161213" onmouseenter="enter('8399230582885161213');" onmouseout="out('8399230582885161213');" style=""> 160          CrashUtils.setCurrentUser(mSimperium.getUser());                                                          </span>
<span  style=""> 161                                                                                                                    </span>
<span class="-1455224487599073617" onmouseenter="enter('-1455224487599073617');" onmouseout="out('-1455224487599073617');" style=""> 162          AppLog.add(Type.DEVICE, getDeviceInfo());                                                                 </span>
<span class="-4084915558750483061" onmouseenter="enter('-4084915558750483061');" onmouseout="out('-4084915558750483061');" style=""> 163          AppLog.add(Type.ACCOUNT, getAccountInfo());                                                               </span>
<span class="-671791306218270016" onmouseenter="enter('-671791306218270016');" onmouseout="out('-671791306218270016');" style=""> 164          AppLog.add(Type.LAYOUT, DisplayUtils.getDisplaySizeAndOrientation(Simplenote.this));                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 165      }                                                                                                             </span>
<span  style=""> 166                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 167      @Override                                                                                                     </span>
<span class="7640484986889102054" onmouseenter="enter('7640484986889102054');" onmouseout="out('7640484986889102054');" style=""> 168      public void onBeat() {                                                                                        </span>
<span class="7315421582655131800" onmouseenter="enter('7315421582655131800');" onmouseout="out('7315421582655131800');" style=""> 169          AppLog.add(Type.NETWORK, &quot;Heartbeat received&quot;);                                                           </span>
<span class="6204465678829044464" onmouseenter="enter('6204465678829044464');" onmouseout="out('6204465678829044464');" style=""> 170          mHeartbeatHandler.removeCallbacks(mHeartbeatRunnable);                                                    </span>
<span class="209086841339708400" onmouseenter="enter('209086841339708400');" onmouseout="out('209086841339708400');" style=""> 171          mHeartbeatHandler.postDelayed(mHeartbeatRunnable, HEARTBEAT_TIMEOUT);                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 172 -    }                                                                                                             </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 173 -                                                                                                                  </span>
<span class="7268646999054713936" onmouseenter="enter('7268646999054713936');" onmouseout="out('7268646999054713936');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 174 -    private boolean isFirstLaunch() {                                                                             </span>
<span class="4401662994174013480" onmouseenter="enter('4401662994174013480');" onmouseout="out('4401662994174013480');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 175 -        // NotesActivity sets this pref to false after first launch                                               </span>
<span class="5757483603403500826" onmouseenter="enter('5757483603403500826');" onmouseout="out('5757483603403500826');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 176 -        return PrefUtils.getBoolPref(this, PrefUtils.PREF_FIRST_LAUNCH, true);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 177      }                                                                                                             </span>
<span  style=""> 178                                                                                                                    </span>
<span class="-5261177328937716585" onmouseenter="enter('-5261177328937716585');" onmouseout="out('-5261177328937716585');" style=""> 179      public static boolean analyticsIsEnabled() {                                                                  </span>
<span class="1755574756529165678" onmouseenter="enter('1755574756529165678');" onmouseout="out('1755574756529165678');" style=""> 180          if (mPreferencesBucket == null) {                                                                         </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 181              return true;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 182          }                                                                                                         </span>
<span  style=""> 183                                                                                                                    </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 184          try {                                                                                                     </span>
<span class="734651049898166881" onmouseenter="enter('734651049898166881');" onmouseout="out('734651049898166881');" style=""> 185              Preferences prefs = mPreferencesBucket.get(PREFERENCES_OBJECT_KEY);                                   </span>
<span class="1383721738222569542" onmouseenter="enter('1383721738222569542');" onmouseout="out('1383721738222569542');" style=""> 186              return prefs.getAnalyticsEnabled();                                                                   </span>
<span class="-1560847995217927266" onmouseenter="enter('-1560847995217927266');" onmouseout="out('-1560847995217927266');" style=""> 187          } catch (BucketObjectMissingException e) {                                                                </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 188              return true;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 189          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 190      }                                                                                                             </span>
<span  style=""> 191                                                                                                                    </span>
<span class="4656537755100497713" onmouseenter="enter('4656537755100497713');" onmouseout="out('4656537755100497713');" style=""> 192      private String getAccountInfo() {                                                                             </span>
<span class="-4909194837402373696" onmouseenter="enter('-4909194837402373696');" onmouseout="out('-4909194837402373696');" style=""><abbr title=" 193          String email = &quot;Email: &quot; + (mSimperium != null &amp;&amp; mSimperium.getUser() != null ? mSimperium.getUser().getEmail() : &quot;?&quot;);"> 193          String email = &quot;Email: &quot; + (mSimperium != null &amp;&amp; mSimperium.getUser() != null ? mSimperium.getUser().getEðŸ”µ</abbr></span>
<span class="-1815219994356976513" onmouseenter="enter('-1815219994356976513');" onmouseout="out('-1815219994356976513');" style=""> 194          String notes = &quot;Notes: &quot; + (mNotesBucket != null ? mNotesBucket.count() : &quot;?&quot;);                           </span>
<span class="-4701463784795893558" onmouseenter="enter('-4701463784795893558');" onmouseout="out('-4701463784795893558');" style=""> 195          String tags = &quot;Tags: &quot; + (mTagsBucket != null ? mTagsBucket.count() : &quot;?&quot;);                               </span>
<span class="5597163353916173356" onmouseenter="enter('5597163353916173356');" onmouseout="out('5597163353916173356');" style=""> 196          return email + &quot;\n&quot; + notes + &quot;\n&quot; + tags + &quot;\n\n&quot;;                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 197      }                                                                                                             </span>
<span  style=""> 198                                                                                                                    </span>
<span class="-4176269846075250192" onmouseenter="enter('-4176269846075250192');" onmouseout="out('-4176269846075250192');" style=""> 199      private String getDeviceInfo() {                                                                              </span>
<span class="7581408804502865572" onmouseenter="enter('7581408804502865572');" onmouseout="out('7581408804502865572');" style=""><abbr title=" 200          String architecture = Build.DEVICE != null &amp;&amp; Build.DEVICE.matches(&quot;.+_cheets|cheets_.+&quot;) ? &quot;Chrome OS &quot; : &quot;Android &quot;;"> 200          String architecture = Build.DEVICE != null &amp;&amp; Build.DEVICE.matches(&quot;.+_cheets|cheets_.+&quot;) ? &quot;Chrome OS &quot; :ðŸ”µ</abbr></span>
<span class="-921339907737118722" onmouseenter="enter('-921339907737118722');" onmouseout="out('-921339907737118722');" style=""> 201          String device = &quot;Device: &quot; + Build.MANUFACTURER + &quot; &quot; + Build.MODEL + &quot; (&quot; + Build.DEVICE + &quot;)&quot;;          </span>
<span class="-7970072835487477375" onmouseenter="enter('-7970072835487477375');" onmouseout="out('-7970072835487477375');" style=""> 202          String system = &quot;System: &quot; + architecture + Build.VERSION.RELEASE + &quot; (&quot; + Build.VERSION.SDK_INT + &quot;)&quot;;   </span>
<span class="3648033425382070956" onmouseenter="enter('3648033425382070956');" onmouseout="out('3648033425382070956');" style=""> 203          String app = &quot;App: Simplenote &quot; + PrefUtils.versionInfo();                                                </span>
<span class="6793127563363345208" onmouseenter="enter('6793127563363345208');" onmouseout="out('6793127563363345208');" style=""> 204          return device + &quot;\n&quot; + system + &quot;\n&quot; + app + &quot;\n\n&quot;;                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 205      }                                                                                                             </span>
<span  style=""> 206                                                                                                                    </span>
<span class="-2452840228833033114" onmouseenter="enter('-2452840228833033114');" onmouseout="out('-2452840228833033114');" style=""> 207      public Simperium getSimperium() {                                                                             </span>
<span class="-1067936515361198064" onmouseenter="enter('-1067936515361198064');" onmouseout="out('-1067936515361198064');" style=""> 208          return mSimperium;                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 209      }                                                                                                             </span>
<span  style=""> 210                                                                                                                    </span>
<span class="8475950615112765175" onmouseenter="enter('8475950615112765175');" onmouseout="out('8475950615112765175');" style=""> 211      public Bucket&lt;Note&gt; getNotesBucket() {                                                                        </span>
<span class="3001734825963445545" onmouseenter="enter('3001734825963445545');" onmouseout="out('3001734825963445545');" style=""> 212          return mNotesBucket;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 213      }                                                                                                             </span>
<span  style=""> 214                                                                                                                    </span>
<span class="365385451944262609" onmouseenter="enter('365385451944262609');" onmouseout="out('365385451944262609');" style=""> 215      public SyncTimes getNoteSyncTimes() {                                                                         </span>
<span class="6562319796144170989" onmouseenter="enter('6562319796144170989');" onmouseout="out('6562319796144170989');" style=""> 216          return mNoteSyncTimes;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 217      }                                                                                                             </span>
<span  style=""> 218                                                                                                                    </span>
<span class="1680392141704969043" onmouseenter="enter('1680392141704969043');" onmouseout="out('1680392141704969043');" style=""> 219      public Bucket&lt;Tag&gt; getTagsBucket() {                                                                          </span>
<span class="6135487691608919718" onmouseenter="enter('6135487691608919718');" onmouseout="out('6135487691608919718');" style=""> 220          return mTagsBucket;                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 221      }                                                                                                             </span>
<span  style=""> 222                                                                                                                    </span>
<span class="-4506300185279466066" onmouseenter="enter('-4506300185279466066');" onmouseout="out('-4506300185279466066');" style=""> 223      public Bucket&lt;Preferences&gt; getPreferencesBucket() {                                                           </span>
<span class="6715102450829888836" onmouseenter="enter('6715102450829888836');" onmouseout="out('6715102450829888836');" style=""> 224          return mPreferencesBucket;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 225      }                                                                                                             </span>
<span  style=""> 226                                                                                                                    </span>
<span class="8939354386013821015" onmouseenter="enter('8939354386013821015');" onmouseout="out('8939354386013821015');" style=""> 227      public Bucket&lt;Account&gt; getAccountBucket() {                                                                   </span>
<span class="2771394281478310822" onmouseenter="enter('2771394281478310822');" onmouseout="out('2771394281478310822');" style=""> 228          return mAccountBucket;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 229      }                                                                                                             </span>
<span  style=""> 230                                                                                                                    </span>
<span class="-5307885032361585350" onmouseenter="enter('-5307885032361585350');" onmouseout="out('-5307885032361585350');" style=""> 231      public boolean isInBackground() {                                                                             </span>
<span class="3812912940560000313" onmouseenter="enter('3812912940560000313');" onmouseout="out('3812912940560000313');" style=""> 232          return mIsInBackground;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 233      }                                                                                                             </span>
<span  style=""> 234                                                                                                                    </span>
<span class="9084571718636450070" onmouseenter="enter('9084571718636450070');" onmouseout="out('9084571718636450070');" style=""> 235      public void loginWithToken(String email, String spToken) {                                                    </span>
<span class="2848300691293606814" onmouseenter="enter('2848300691293606814');" onmouseout="out('2848300691293606814');" style=""> 236          // Manually authorize the user with Simperium                                                             </span>
<span class="-4556253445089435832" onmouseenter="enter('-4556253445089435832');" onmouseout="out('-4556253445089435832');" style=""> 237          User user = mSimperium.getUser();                                                                         </span>
<span class="-4915005065677121955" onmouseenter="enter('-4915005065677121955');" onmouseout="out('-4915005065677121955');" style=""> 238          user.setAccessToken(spToken);                                                                             </span>
<span class="877344059420132568" onmouseenter="enter('877344059420132568');" onmouseout="out('877344059420132568');" style=""> 239          user.setEmail(email);                                                                                     </span>
<span class="538456865812119501" onmouseenter="enter('538456865812119501');" onmouseout="out('538456865812119501');" style=""> 240          user.setStatus(User.Status.AUTHORIZED);                                                                   </span>
<span  style=""> 241                                                                                                                    </span>
<span class="-755513241422191443" onmouseenter="enter('-755513241422191443');" onmouseout="out('-755513241422191443');" style=""> 242          // Store the user data in Simperium shared preferences                                                    </span>
<span class="4508720492858536163" onmouseenter="enter('4508720492858536163');" onmouseout="out('4508720492858536163');" style=""> 243          SharedPreferences.Editor editor = AndroidClient.sharedPreferences(this).edit();                           </span>
<span class="2812904514433972765" onmouseenter="enter('2812904514433972765');" onmouseout="out('2812904514433972765');" style=""> 244          editor.putString(USER_ACCESS_TOKEN_PREFERENCE, user.getAccessToken());                                    </span>
<span class="-3810862774138306438" onmouseenter="enter('-3810862774138306438');" onmouseout="out('-3810862774138306438');" style=""> 245          editor.putString(USER_EMAIL_PREFERENCE, user.getEmail());                                                 </span>
<span class="-5305612453340718340" onmouseenter="enter('-5305612453340718340');" onmouseout="out('-5305612453340718340');" style=""> 246          editor.apply();                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 247      }                                                                                                             </span>
<span  style=""> 248                                                                                                                    </span>
<span class="2855914666290052253" onmouseenter="enter('2855914666290052253');" onmouseout="out('2855914666290052253');" style=""> 249      public boolean isLoggedIn() {                                                                                 </span>
<span class="-4556253445089435832" onmouseenter="enter('-4556253445089435832');" onmouseout="out('-4556253445089435832');" style=""> 250          User user = mSimperium.getUser();                                                                         </span>
<span class="754608154577126470" onmouseenter="enter('754608154577126470');" onmouseout="out('754608154577126470');" style=""> 251          return user != null &amp;&amp; user.getStatus() == User.Status.AUTHORIZED;                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 252      }                                                                                                             </span>
<span  style=""> 253                                                                                                                    </span>
<span class="542821705420321329" onmouseenter="enter('542821705420321329');" onmouseout="out('542821705420321329');" style=""> 254      public String getUserEmail() {                                                                                </span>
<span class="-4556253445089435832" onmouseenter="enter('-4556253445089435832');" onmouseout="out('-4556253445089435832');" style=""> 255          User user = mSimperium.getUser();                                                                         </span>
<span class="-5079006915454915875" onmouseenter="enter('-5079006915454915875');" onmouseout="out('-5079006915454915875');" style=""> 256          return user != null ? user.getEmail() : null;                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 257      }                                                                                                             </span>
<span  style=""> 258                                                                                                                    </span>
<span class="6597616594928186346" onmouseenter="enter('6597616594928186346');" onmouseout="out('6597616594928186346');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 259 -    private void checkReviewAccountOrVerifyEmail(final Activity activity) {                                       </span>
<span class="2362663380307114251" onmouseenter="enter('2362663380307114251');" onmouseout="out('2362663380307114251');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 260 -        if (isFirstLaunch() || !NetworkUtils.isNetworkAvailable(this) || mHasShownReviewOrVerify) {               </span>
<span class="-6283561897593648565" onmouseenter="enter('-6283561897593648565');" onmouseout="out('-6283561897593648565');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 261 -            // Show nothing on first launch, no network connection, or has already shown review/verify.           </span>
<span class="2937462577027157320" onmouseenter="enter('2937462577027157320');" onmouseout="out('2937462577027157320');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 262 +    private void showUnverifiedAccount() {                                                                        </span>
<span class="3922537486351779763" onmouseenter="enter('3922537486351779763');" onmouseout="out('3922537486351779763');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 263 +        showReviewAccountOrVerifyEmail(mCurrentActivity, false);                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 264 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 265 +                                                                                                                  </span>
<span class="-1951278736681351578" onmouseenter="enter('-1951278736681351578');" onmouseout="out('-1951278736681351578');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 266 +    private void showWaitingOnEmailConfirmation() {                                                               </span>
<span class="1761307439081029946" onmouseenter="enter('1761307439081029946');" onmouseout="out('1761307439081029946');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 267 +        showReviewAccountOrVerifyEmail(mCurrentActivity, true);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 268 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 269 +                                                                                                                  </span>
<span class="-3355299330142398603" onmouseenter="enter('-3355299330142398603');" onmouseout="out('-3355299330142398603');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 270 +    private void dismissReviewAccountDialog() {                                                                   </span>
<span class="-4849539574283382852" onmouseenter="enter('-4849539574283382852');" onmouseout="out('-4849539574283382852');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 271 +        FragmentManager fragmentManager;                                                                          </span>
<span class="-8221972854904999507" onmouseenter="enter('-8221972854904999507');" onmouseout="out('-8221972854904999507');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 272 +        if (mCurrentActivity instanceof NotesActivity) {                                                          </span>
<span class="-4446108831753952720" onmouseenter="enter('-4446108831753952720');" onmouseout="out('-4446108831753952720');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 273 +            fragmentManager = ((NotesActivity) mCurrentActivity).getSupportFragmentManager();                     </span>
<span class="-5847895969969896469" onmouseenter="enter('-5847895969969896469');" onmouseout="out('-5847895969969896469');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 274 +        } else if (mCurrentActivity instanceof NoteEditorActivity) {                                              </span>
<span class="5051439688965850781" onmouseenter="enter('5051439688965850781');" onmouseout="out('5051439688965850781');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 275 +            fragmentManager = ((NoteEditorActivity) mCurrentActivity).getSupportFragmentManager();                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 276 +        } else {                                                                                                  </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 277              return;                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 278          }                                                                                                         </span>
<span  style=""> 279                                                                                                                    </span>
<span class="-540737122573501910" onmouseenter="enter('-540737122573501910');" onmouseout="out('-540737122573501910');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 280 -        Account account;                                                                                          </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 281 -                                                                                                                  </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 282 -        try {                                                                                                     </span>
<span class="-4662417686030682577" onmouseenter="enter('-4662417686030682577');" onmouseout="out('-4662417686030682577');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 283 -            account = mAccountBucket.get(KEY_EMAIL_VERIFICATION);                                                 </span>
<span class="5552480145733230038" onmouseenter="enter('5552480145733230038');" onmouseout="out('5552480145733230038');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 284 -        } catch (BucketObjectMissingException bucketObjectMissingException) {                                     </span>
<span class="6354876555049818706" onmouseenter="enter('6354876555049818706');" onmouseout="out('6354876555049818706');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 285 -            // Show review account when entity does not exist.                                                    </span>
<span class="-1048429067652814027" onmouseenter="enter('-1048429067652814027');" onmouseout="out('-1048429067652814027');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 286 -            showReviewAccountOrVerifyEmail(activity, false);                                                      </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 287 -            return;                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 288 -        }                                                                                                         </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 289 -                                                                                                                  </span>
<span class="7633177671918682469" onmouseenter="enter('7633177671918682469');" onmouseout="out('7633177671918682469');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 290 -        if (mSimperium == null || mSimperium.getUser() == null || mSimperium.getUser().getEmail() == null) {      </span>
<span class="-271293222991803357" onmouseenter="enter('-271293222991803357');" onmouseout="out('-271293222991803357');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 291 -            // Show nothing when Simperium, user, or email cannot be retrieved.                                   </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 292 -            return;                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 293 -        }                                                                                                         </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 294 -                                                                                                                  </span>
<span class="-5537883423725267075" onmouseenter="enter('-5537883423725267075');" onmouseout="out('-5537883423725267075');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 295 -        String email = mSimperium.getUser().getEmail();                                                           </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 296 -                                                                                                                  </span>
<span class="-8899475057461778111" onmouseenter="enter('-8899475057461778111');" onmouseout="out('-8899475057461778111');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 297 -        if (account.hasVerifiedEmail(email)) {                                                                    </span>
<span class="8892034391829602403" onmouseenter="enter('8892034391829602403');" onmouseout="out('8892034391829602403');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 298 -            // Show nothing when email has been verified.                                                         </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 299 -            return;                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 300 -        }                                                                                                         </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 301 -                                                                                                                  </span>
<span class="8842470115132734226" onmouseenter="enter('8842470115132734226');" onmouseout="out('8842470115132734226');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 302 -        // Show verify email when email has been sent to account address.  Show review account otherwise.         </span>
<span class="1162867526205024513" onmouseenter="enter('1162867526205024513');" onmouseout="out('1162867526205024513');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 303 -        showReviewAccountOrVerifyEmail(activity, account.hasSentEmail(email));                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 304 -    }                                                                                                             </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 305 -                                                                                                                  </span>
<span class="-1386275356577769478" onmouseenter="enter('-1386275356577769478');" onmouseout="out('-1386275356577769478');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 306 +        for (Fragment fragment : fragmentManager.getFragments()) {                                                </span>
<span class="-3329316781317474527" onmouseenter="enter('-3329316781317474527');" onmouseout="out('-3329316781317474527');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 307 +            if (fragment instanceof FullScreenDialogFragment) {                                                   </span>
<span class="-4810257083241229038" onmouseenter="enter('-4810257083241229038');" onmouseout="out('-4810257083241229038');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 308 +                ((FullScreenDialogFragment) fragment).dismiss();                                                  </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 309 +                                                                                                                  </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 310 +                return;                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 311 +            }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 312 +        }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 313 +    }                                                                                                             </span>
<span class="2332882432376014482" onmouseenter="enter('2332882432376014482');" onmouseout="out('2332882432376014482');" style=""> 314      private void showReviewAccountOrVerifyEmail(final Activity activity, boolean hasSentEmail) {                  </span>
<span class="-3746560840586400800" onmouseenter="enter('-3746560840586400800');" onmouseout="out('-3746560840586400800');" style=""> 315          final FragmentManager fragmentManager;                                                                    </span>
<span class="-8603498050420470579" onmouseenter="enter('-8603498050420470579');" onmouseout="out('-8603498050420470579');" style=""> 316          final @IdRes int container;                                                                               </span>
<span  style=""> 317                                                                                                                    </span>
<span class="6030899174327056570" onmouseenter="enter('6030899174327056570');" onmouseout="out('6030899174327056570');" style=""> 318          if (activity instanceof NotesActivity) {                                                                  </span>
<span class="1073665129405439698" onmouseenter="enter('1073665129405439698');" onmouseout="out('1073665129405439698');" style=""> 319              fragmentManager = ((NotesActivity) activity).getSupportFragmentManager();                             </span>
<span class="-6813895032683749169" onmouseenter="enter('-6813895032683749169');" onmouseout="out('-6813895032683749169');" style=""> 320              container = R.id.drawer_layout;                                                                       </span>
<span class="-6053920028300427274" onmouseenter="enter('-6053920028300427274');" onmouseout="out('-6053920028300427274');" style=""> 321          } else if (activity instanceof NoteEditorActivity) {                                                      </span>
<span class="6040549106017882092" onmouseenter="enter('6040549106017882092');" onmouseout="out('6040549106017882092');" style=""> 322              fragmentManager = ((NoteEditorActivity) activity).getSupportFragmentManager();                        </span>
<span class="5106126685052663813" onmouseenter="enter('5106126685052663813');" onmouseout="out('5106126685052663813');" style=""> 323              container = android.R.id.content;                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 324          } else {                                                                                                  </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 325              return;                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 326          }                                                                                                         </span>
<span  style=""> 327                                                                                                                    </span>
<span class="7005732918292981998" onmouseenter="enter('7005732918292981998');" onmouseout="out('7005732918292981998');" style=""> 328          final Bundle bundle = ReviewAccountVerifyEmailFragment.newBundle(hasSentEmail);                           </span>
<span  style=""> 329                                                                                                                    </span>
<span class="3595979510228424567" onmouseenter="enter('3595979510228424567');" onmouseout="out('3595979510228424567');" style=""> 330          new FullScreenDialogFragment.Builder(activity)                                                            </span>
<span class="1707505884861492887" onmouseenter="enter('1707505884861492887');" onmouseout="out('1707505884861492887');" style=""> 331              .setContent(ReviewAccountVerifyEmailFragment.class, bundle)                                           </span>
<span class="-7730204517414597577" onmouseenter="enter('-7730204517414597577');" onmouseout="out('-7730204517414597577');" style=""> 332              .setOnConfirmListener(null)                                                                           </span>
<span class="5374833142702814180" onmouseenter="enter('5374833142702814180');" onmouseout="out('5374833142702814180');" style=""> 333              .setOnDismissListener(null)                                                                           </span>
<span class="7759061789741077424" onmouseenter="enter('7759061789741077424');" onmouseout="out('7759061789741077424');" style=""> 334              .setToolbarElevation(0)                                                                               </span>
<span class="9206956024064176315" onmouseenter="enter('9206956024064176315');" onmouseout="out('9206956024064176315');" style=""> 335              .setViewContainer(container)                                                                          </span>
<span class="3616109827455273093" onmouseenter="enter('3616109827455273093');" onmouseout="out('3616109827455273093');" style=""> 336              .build()                                                                                              </span>
<span class="4065757138376521916" onmouseenter="enter('4065757138376521916');" onmouseout="out('4065757138376521916');" style=""> 337              .show(fragmentManager, FullScreenDialogFragment.TAG);                                                 </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 338 -                                                                                                                  </span>
<span class="-1389748088792650152" onmouseenter="enter('-1389748088792650152');" onmouseout="out('-1389748088792650152');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 339 -        mHasShownReviewOrVerify = true;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 340      }                                                                                                             </span>
<span  style=""> 341                                                                                                                    </span>
<span class="72925131662297315" onmouseenter="enter('72925131662297315');" onmouseout="out('72925131662297315');" style=""><abbr title=" 342      private class ApplicationLifecycleMonitor implements Application.ActivityLifecycleCallbacks, ComponentCallbacks2 {"> 342      private class ApplicationLifecycleMonitor implements Application.ActivityLifecycleCallbacks, ComponentCallbackðŸ”µ</abbr></span>
<span class="3103941996577506651" onmouseenter="enter('3103941996577506651');" onmouseout="out('3103941996577506651');" style=""> 343          // ComponentCallbacks                                                                                     </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 344          @Override                                                                                                 </span>
<span class="2274976836934101801" onmouseenter="enter('2274976836934101801');" onmouseout="out('2274976836934101801');" style=""> 345          public void onTrimMemory(int level) {                                                                     </span>
<span class="-1837603280920501393" onmouseenter="enter('-1837603280920501393');" onmouseout="out('-1837603280920501393');" style=""> 346              if (level == ComponentCallbacks2.TRIM_MEMORY_UI_HIDDEN) {                                             </span>
<span class="-4583313459107718715" onmouseenter="enter('-4583313459107718715');" onmouseout="out('-4583313459107718715');" style=""> 347                  mIsInBackground = true;                                                                           </span>
<span  style=""> 348                                                                                                                    </span>
<span class="-7450229904998226699" onmouseenter="enter('-7450229904998226699');" onmouseout="out('-7450229904998226699');" style=""> 349                  // Give the buckets some time to finish sync, then stop them                                      </span>
<span class="7162501222170899627" onmouseenter="enter('7162501222170899627');" onmouseout="out('7162501222170899627');" style=""> 350                  new Handler().postDelayed(new Runnable() {                                                        </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 351                      @Override                                                                                     </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 352                      public void run() {                                                                           </span>
<span class="1937243434374323959" onmouseenter="enter('1937243434374323959');" onmouseout="out('1937243434374323959');" style=""> 353                          if (!mIsInBackground) {                                                                   </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 354                              return;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 355                          }                                                                                         </span>
<span  style=""> 356                                                                                                                    </span>
<span class="-2200993789662803159" onmouseenter="enter('-2200993789662803159');" onmouseout="out('-2200993789662803159');" style=""> 357                          if (mAccountBucket != null) {                                                             </span>
<span class="1251129820679832423" onmouseenter="enter('1251129820679832423');" onmouseout="out('1251129820679832423');" style=""> 358                              mAccountBucket.stop();                                                                </span>
<span class="3408645548049517244" onmouseenter="enter('3408645548049517244');" onmouseout="out('3408645548049517244');" style=""> 359                              AppLog.add(Type.SYNC, &quot;Stopped account bucket (Simplenote)&quot;);                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 360                          }                                                                                         </span>
<span  style=""> 361                                                                                                                    </span>
<span class="6694920678363305995" onmouseenter="enter('6694920678363305995');" onmouseout="out('6694920678363305995');" style=""> 362                          if (mNotesBucket != null) {                                                               </span>
<span class="-9222421628383802707" onmouseenter="enter('-9222421628383802707');" onmouseout="out('-9222421628383802707');" style=""> 363                              mNotesBucket.stop();                                                                  </span>
<span class="-8256972624868266110" onmouseenter="enter('-8256972624868266110');" onmouseout="out('-8256972624868266110');" style=""> 364                              AppLog.add(Type.SYNC, &quot;Stopped note bucket (Simplenote)&quot;);                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 365                          }                                                                                         </span>
<span  style=""> 366                                                                                                                    </span>
<span class="-6758879846146730703" onmouseenter="enter('-6758879846146730703');" onmouseout="out('-6758879846146730703');" style=""> 367                          if (mTagsBucket != null) {                                                                </span>
<span class="7440275301365041157" onmouseenter="enter('7440275301365041157');" onmouseout="out('7440275301365041157');" style=""> 368                              mTagsBucket.stop();                                                                   </span>
<span class="3632904236952271414" onmouseenter="enter('3632904236952271414');" onmouseout="out('3632904236952271414');" style=""> 369                              AppLog.add(Type.SYNC, &quot;Stopped tag bucket (Simplenote)&quot;);                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 370                          }                                                                                         </span>
<span  style=""> 371                                                                                                                    </span>
<span class="-6192025378026905457" onmouseenter="enter('-6192025378026905457');" onmouseout="out('-6192025378026905457');" style=""> 372                          if (mPreferencesBucket != null) {                                                         </span>
<span class="-7405985386384713994" onmouseenter="enter('-7405985386384713994');" onmouseout="out('-7405985386384713994');" style=""> 373                              mPreferencesBucket.stop();                                                            </span>
<span class="-5651227749650235797" onmouseenter="enter('-5651227749650235797');" onmouseout="out('-5651227749650235797');" style=""> 374                              AppLog.add(Type.SYNC, &quot;Stopped preference bucket (Simplenote)&quot;);                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 375                          }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 376                      }                                                                                             </span>
<span class="6786785065928556607" onmouseenter="enter('6786785065928556607');" onmouseout="out('6786785065928556607');" style=""> 377                  }, TEN_SECONDS_MILLIS);                                                                           </span>
<span  style=""> 378                                                                                                                    </span>
<span class="5599227697513165792" onmouseenter="enter('5599227697513165792');" onmouseout="out('5599227697513165792');" style=""> 379                  PeriodicWorkRequest syncWorkRequest = new PeriodicWorkRequest.Builder(                            </span>
<span class="1408067071873564180" onmouseenter="enter('1408067071873564180');" onmouseout="out('1408067071873564180');" style=""> 380                      SyncWorker.class,                                                                             </span>
<span class="2973406529671611856" onmouseenter="enter('2973406529671611856');" onmouseout="out('2973406529671611856');" style=""> 381                      PeriodicWorkRequest.MIN_PERIODIC_INTERVAL_MILLIS,                                             </span>
<span class="-80463983603518610" onmouseenter="enter('-80463983603518610');" onmouseout="out('-80463983603518610');" style=""> 382                      TimeUnit.MILLISECONDS                                                                         </span>
<span class="-2015476096144723150" onmouseenter="enter('-2015476096144723150');" onmouseout="out('-2015476096144723150');" style=""> 383                  )                                                                                                 </span>
<span class="-6346518985674576590" onmouseenter="enter('-6346518985674576590');" onmouseout="out('-6346518985674576590');" style=""><abbr title=" 384                      .setConstraints(new Constraints.Builder().setRequiredNetworkType(NetworkType.CONNECTED).build())"> 384                      .setConstraints(new Constraints.Builder().setRequiredNetworkType(NetworkType.CONNECTED).build(ðŸ”µ</abbr></span>
<span class="1554687427185788181" onmouseenter="enter('1554687427185788181');" onmouseout="out('1554687427185788181');" style=""> 385                      .setBackoffCriteria(BackoffPolicy.LINEAR, ONE_MINUTE_MILLIS, TimeUnit.MILLISECONDS)           </span>
<span class="1665711086511789732" onmouseenter="enter('1665711086511789732');" onmouseout="out('1665711086511789732');" style=""> 386                      .setInitialDelay(TWENTY_SECONDS_MILLIS, TimeUnit.MILLISECONDS)                                </span>
<span class="8816433673387605168" onmouseenter="enter('8816433673387605168');" onmouseout="out('8816433673387605168');" style=""> 387                      .addTag(TAG_SYNC)                                                                             </span>
<span class="-368814941510255410" onmouseenter="enter('-368814941510255410');" onmouseout="out('-368814941510255410');" style=""> 388                      .build();                                                                                     </span>
<span class="-957289309636137365" onmouseenter="enter('-957289309636137365');" onmouseout="out('-957289309636137365');" style=""> 389                  WorkManager.getInstance(getApplicationContext()).enqueueUniquePeriodicWork(                       </span>
<span class="1890759471518076421" onmouseenter="enter('1890759471518076421');" onmouseout="out('1890759471518076421');" style=""> 390                      TAG_SYNC,                                                                                     </span>
<span class="7031641102110402794" onmouseenter="enter('7031641102110402794');" onmouseout="out('7031641102110402794');" style=""> 391                      ExistingPeriodicWorkPolicy.REPLACE,                                                           </span>
<span class="7844672442552797006" onmouseenter="enter('7844672442552797006');" onmouseout="out('7844672442552797006');" style=""> 392                      syncWorkRequest                                                                               </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 393                  );                                                                                                </span>
<span class="-6272207136493112653" onmouseenter="enter('-6272207136493112653');" onmouseout="out('-6272207136493112653');" style=""> 394                  Log.d(&quot;Simplenote.onTrimMemory&quot;, &quot;Started worker&quot;);                                               </span>
<span  style=""> 395                                                                                                                    </span>
<span class="-341478899160030823" onmouseenter="enter('-341478899160030823');" onmouseout="out('-341478899160030823');" style=""> 396                  // Send analytics if app is in the background                                                     </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 397                  AnalyticsTracker.track(                                                                           </span>
<span class="3485374480742718668" onmouseenter="enter('3485374480742718668');" onmouseout="out('3485374480742718668');" style=""> 398                          AnalyticsTracker.Stat.APPLICATION_CLOSED,                                                 </span>
<span class="3255995284721740364" onmouseenter="enter('3255995284721740364');" onmouseout="out('3255995284721740364');" style=""> 399                          AnalyticsTracker.CATEGORY_USER,                                                           </span>
<span class="3140085526459106828" onmouseenter="enter('3140085526459106828');" onmouseout="out('3140085526459106828');" style=""> 400                          &quot;application_closed&quot;                                                                      </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 401                  );                                                                                                </span>
<span class="-7792835064107422696" onmouseenter="enter('-7792835064107422696');" onmouseout="out('-7792835064107422696');" style=""> 402                  AnalyticsTracker.flush();                                                                         </span>
<span class="-6664472740739433069" onmouseenter="enter('-6664472740739433069');" onmouseout="out('-6664472740739433069');" style=""> 403                  AppLog.add(Type.ACTION, &quot;App closed&quot;);                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 404              } else {                                                                                              </span>
<span class="-6497924770077247329" onmouseenter="enter('-6497924770077247329');" onmouseout="out('-6497924770077247329');" style=""> 405                  mIsInBackground = false;                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 406              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 407          }                                                                                                         </span>
<span  style=""> 408                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 409          @Override                                                                                                 </span>
<span class="6856792358586712593" onmouseenter="enter('6856792358586712593');" onmouseout="out('6856792358586712593');" style=""> 410          public void onConfigurationChanged(@NonNull Configuration newConfig) {                                    </span>
<span class="-671791306218270016" onmouseenter="enter('-671791306218270016');" onmouseout="out('-671791306218270016');" style=""> 411              AppLog.add(Type.LAYOUT, DisplayUtils.getDisplaySizeAndOrientation(Simplenote.this));                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 412          }                                                                                                         </span>
<span  style=""> 413                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 414          @Override                                                                                                 </span>
<span class="-4981664158563918121" onmouseenter="enter('-4981664158563918121');" onmouseout="out('-4981664158563918121');" style=""> 415          public void onLowMemory() {                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 416          }                                                                                                         </span>
<span  style=""> 417                                                                                                                    </span>
<span class="-4597135701451302256" onmouseenter="enter('-4597135701451302256');" onmouseout="out('-4597135701451302256');" style=""> 418          // ActivityLifecycleCallbacks                                                                             </span>
<span class="-9026181668329411137" onmouseenter="enter('-9026181668329411137');" onmouseout="out('-9026181668329411137');" style=""> 419          @SuppressLint(&quot;LongLogTag&quot;)                                                                               </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 420          @Override                                                                                                 </span>
<span class="-3924077821180675166" onmouseenter="enter('-3924077821180675166');" onmouseout="out('-3924077821180675166');" style=""> 421          public void onActivityResumed(@NonNull Activity activity) {                                               </span>
<span class="-1824713474309501961" onmouseenter="enter('-1824713474309501961');" onmouseout="out('-1824713474309501961');" style=""> 422              if (mIsInBackground) {                                                                                </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 423                  AnalyticsTracker.track(                                                                           </span>
<span class="-9053818901097240592" onmouseenter="enter('-9053818901097240592');" onmouseout="out('-9053818901097240592');" style=""> 424                          AnalyticsTracker.Stat.APPLICATION_OPENED,                                                 </span>
<span class="3255995284721740364" onmouseenter="enter('3255995284721740364');" onmouseout="out('3255995284721740364');" style=""> 425                          AnalyticsTracker.CATEGORY_USER,                                                           </span>
<span class="5765105888033949578" onmouseenter="enter('5765105888033949578');" onmouseout="out('5765105888033949578');" style=""> 426                          &quot;application_opened&quot;                                                                      </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 427                  );                                                                                                </span>
<span  style=""> 428                                                                                                                    </span>
<span class="-6497924770077247329" onmouseenter="enter('-6497924770077247329');" onmouseout="out('-6497924770077247329');" style=""> 429                  mIsInBackground = false;                                                                          </span>
<span class="-6333475820451850994" onmouseenter="enter('-6333475820451850994');" onmouseout="out('-6333475820451850994');" style=""> 430                  AppLog.add(Type.ACTION, &quot;App opened&quot;);                                                            </span>
<span class="7194601290059164528" onmouseenter="enter('7194601290059164528');" onmouseout="out('7194601290059164528');" style=""> 431                  WorkManager.getInstance(getApplicationContext()).cancelUniqueWork(TAG_SYNC);                      </span>
<span class="-5838238914207245906" onmouseenter="enter('-5838238914207245906');" onmouseout="out('-5838238914207245906');" style=""> 432                  Log.d(&quot;Simplenote.onActivityResumed&quot;, &quot;Stopped worker&quot;);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 433              }                                                                                                     </span>
<span  style=""> 434                                                                                                                    </span>
<span class="5242495516731300622" onmouseenter="enter('5242495516731300622');" onmouseout="out('5242495516731300622');" style=""> 435              String activitySimpleName = activity.getClass().getSimpleName();                                      </span>
<span  style=""> 436                                                                                                                    </span>
<span class="-8846517571959259873" onmouseenter="enter('-8846517571959259873');" onmouseout="out('-8846517571959259873');" style=""> 437              mAccountBucket.start();                                                                               </span>
<span class="4612815040229921167" onmouseenter="enter('4612815040229921167');" onmouseout="out('4612815040229921167');" style=""> 438              AppLog.add(Type.SYNC, &quot;Started account bucket (&quot; + activitySimpleName + &quot;)&quot;);                         </span>
<span class="8915853447379815980" onmouseenter="enter('8915853447379815980');" onmouseout="out('8915853447379815980');" style=""> 439              mPreferencesBucket.start();                                                                           </span>
<span class="-3539741953604827644" onmouseenter="enter('-3539741953604827644');" onmouseout="out('-3539741953604827644');" style=""> 440              AppLog.add(Type.SYNC, &quot;Started preference bucket (&quot; + activitySimpleName + &quot;)&quot;);                      </span>
<span class="-295722270474880574" onmouseenter="enter('-295722270474880574');" onmouseout="out('-295722270474880574');" style=""> 441              mNotesBucket.start();                                                                                 </span>
<span class="-9002409501487253211" onmouseenter="enter('-9002409501487253211');" onmouseout="out('-9002409501487253211');" style=""> 442              AppLog.add(Type.SYNC, &quot;Started note bucket (&quot; + activitySimpleName + &quot;)&quot;);                            </span>
<span class="-8311192473139463459" onmouseenter="enter('-8311192473139463459');" onmouseout="out('-8311192473139463459');" style=""> 443              mTagsBucket.start();                                                                                  </span>
<span class="2042044416855016901" onmouseenter="enter('2042044416855016901');" onmouseout="out('2042044416855016901');" style=""> 444              AppLog.add(Type.SYNC, &quot;Started tag bucket (&quot; + activitySimpleName + &quot;)&quot;);                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 445          }                                                                                                         </span>
<span  style=""> 446                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 447          @Override                                                                                                 </span>
<span class="3802784276197342934" onmouseenter="enter('3802784276197342934');" onmouseout="out('3802784276197342934');" style=""> 448          public void onActivityCreated(@NonNull Activity activity, Bundle savedInstanceState) {                    </span>
<span class="-8791080748110343619" onmouseenter="enter('-8791080748110343619');" onmouseout="out('-8791080748110343619');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 449 -            checkReviewAccountOrVerifyEmail(activity);                                                            </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 450 +                                                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 451          }                                                                                                         </span>
<span  style=""> 452                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 453          @Override                                                                                                 </span>
<span class="1925798780581030833" onmouseenter="enter('1925798780581030833');" onmouseout="out('1925798780581030833');" style=""> 454          public void onActivityStarted(@NonNull Activity activity) {                                               </span>
<span class="9099687594228455443" onmouseenter="enter('9099687594228455443');" onmouseout="out('9099687594228455443');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 455 +            mCurrentActivity = activity;                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 456          }                                                                                                         </span>
<span  style=""> 457                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 458          @Override                                                                                                 </span>
<span class="6762635398346313192" onmouseenter="enter('6762635398346313192');" onmouseout="out('6762635398346313192');" style=""> 459          public void onActivityPaused(@NonNull Activity activity) {                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 460          }                                                                                                         </span>
<span  style=""> 461                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 462          @Override                                                                                                 </span>
<span class="-7982391621651416385" onmouseenter="enter('-7982391621651416385');" onmouseout="out('-7982391621651416385');" style=""> 463          public void onActivityStopped(@NonNull Activity activity) {                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 464          }                                                                                                         </span>
<span  style=""> 465                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 466          @Override                                                                                                 </span>
<span class="2275335402994256657" onmouseenter="enter('2275335402994256657');" onmouseout="out('2275335402994256657');" style=""> 467          public void onActivitySaveInstanceState(@NonNull Activity activity, @NonNull Bundle outState) {           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 468          }                                                                                                         </span>
<span  style=""> 469                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 470          @Override                                                                                                 </span>
<span class="7397501089288945407" onmouseenter="enter('7397501089288945407');" onmouseout="out('7397501089288945407');" style=""> 471          public void onActivityDestroyed(@NonNull Activity activity) {                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 472          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 473      }                                                                                                             </span>
<span  style=""> 474                                                                                                                    </span>
<span class="-8023094567209057938" onmouseenter="enter('-8023094567209057938');" onmouseout="out('-8023094567209057938');" style=""> 475      private class SyncTimePersister implements SyncTimes.SyncTimeListener {                                       </span>
<span class="-8038048970190219255" onmouseenter="enter('-8038048970190219255');" onmouseout="out('-8038048970190219255');" style=""> 476          private final SharedPreferences mPreferences;                                                             </span>
<span  style=""> 477                                                                                                                    </span>
<span class="-5420023059608856786" onmouseenter="enter('-5420023059608856786');" onmouseout="out('-5420023059608856786');" style=""> 478          public SyncTimePersister() {                                                                              </span>
<span class="-1774045212698754392" onmouseenter="enter('-1774045212698754392');" onmouseout="out('-1774045212698754392');" style=""> 479              mPreferences = getSharedPreferences(SYNC_TIME_PREFERENCES, Context.MODE_PRIVATE);                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 480          }                                                                                                         </span>
<span  style=""> 481                                                                                                                    </span>
<span class="5373267673669371854" onmouseenter="enter('5373267673669371854');" onmouseout="out('5373267673669371854');" style=""> 482          public HashMap&lt;String, Calendar&gt; load() {                                                                 </span>
<span class="8617201152557861833" onmouseenter="enter('8617201152557861833');" onmouseout="out('8617201152557861833');" style=""> 483              HashMap&lt;String, Calendar&gt; syncTimes = new HashMap&lt;&gt;();                                                </span>
<span  style=""> 484                                                                                                                    </span>
<span class="4462978973621022506" onmouseenter="enter('4462978973621022506');" onmouseout="out('4462978973621022506');" style=""> 485              //noinspection unchecked                                                                              </span>
<span class="1896092932717377555" onmouseenter="enter('1896092932717377555');" onmouseout="out('1896092932717377555');" style=""> 486              for (Map.Entry&lt;String, Long&gt; syncTime : ((Map&lt;String, Long&gt;) mPreferences.getAll()).entrySet()) {     </span>
<span class="-785210168314593407" onmouseenter="enter('-785210168314593407');" onmouseout="out('-785210168314593407');" style=""> 487                  Calendar instant = Calendar.getInstance();                                                        </span>
<span class="2126061339283800576" onmouseenter="enter('2126061339283800576');" onmouseout="out('2126061339283800576');" style=""> 488                  instant.setTimeInMillis(syncTime.getValue());                                                     </span>
<span class="6843114433125041391" onmouseenter="enter('6843114433125041391');" onmouseout="out('6843114433125041391');" style=""> 489                  syncTimes.put(syncTime.getKey(), instant);                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 490              }                                                                                                     </span>
<span  style=""> 491                                                                                                                    </span>
<span class="7782563231142685256" onmouseenter="enter('7782563231142685256');" onmouseout="out('7782563231142685256');" style=""> 492              return syncTimes;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 493          }                                                                                                         </span>
<span  style=""> 494                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 495          @Override                                                                                                 </span>
<span class="-6287771297506053883" onmouseenter="enter('-6287771297506053883');" onmouseout="out('-6287771297506053883');" style=""> 496          public void onRemove(String entityId) {                                                                   </span>
<span class="2942962400697544803" onmouseenter="enter('2942962400697544803');" onmouseout="out('2942962400697544803');" style=""> 497              mPreferences.edit().remove(entityId).apply();                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 498          }                                                                                                         </span>
<span  style=""> 499                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 500          @Override                                                                                                 </span>
<span class="5435537090917886229" onmouseenter="enter('5435537090917886229');" onmouseout="out('5435537090917886229');" style=""> 501          public void onUpdate(String entityId, Calendar lastSyncTime, boolean isSynced) {                          </span>
<span class="1289918888759771632" onmouseenter="enter('1289918888759771632');" onmouseout="out('1289918888759771632');" style=""> 502              mPreferences.edit().putLong(entityId, lastSyncTime.getTimeInMillis()).apply();                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 503          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 504      }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 505 +                                                                                                                  </span>
<span class="-7040876324129805454" onmouseenter="enter('-7040876324129805454');" onmouseout="out('-7040876324129805454');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 506 +    private class VerificationListener implements AccountVerificationWatcher.VerificationStateListener {          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 507 +        @Override                                                                                                 </span>
<span class="8311567710390595869" onmouseenter="enter('8311567710390595869');" onmouseout="out('8311567710390595869');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 508 +        public void onUpdate(AccountVerificationWatcher.Status status) {                                          </span>
<span class="1723944522238068006" onmouseenter="enter('1723944522238068006');" onmouseout="out('1723944522238068006');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 509 +            switch (status) {                                                                                     </span>
<span class="7135169508302009941" onmouseenter="enter('7135169508302009941');" onmouseout="out('7135169508302009941');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 510 +                case VERIFIED:                                                                                    </span>
<span class="-4701728580258499512" onmouseenter="enter('-4701728580258499512');" onmouseout="out('-4701728580258499512');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 511 +                    dismissReviewAccountDialog();                                                                 </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 512 +                    return;                                                                                       </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 513 +                                                                                                                  </span>
<span class="-5520308039380404987" onmouseenter="enter('-5520308039380404987');" onmouseout="out('-5520308039380404987');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 514 +                case SENT_EMAIL:                                                                                  </span>
<span class="691507398654622561" onmouseenter="enter('691507398654622561');" onmouseout="out('691507398654622561');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 515 +                    showWaitingOnEmailConfirmation();                                                             </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 516 +                    return;                                                                                       </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 517 +                                                                                                                  </span>
<span class="1250246892713626578" onmouseenter="enter('1250246892713626578');" onmouseout="out('1250246892713626578');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 518 +                case UNVERIFIED:                                                                                  </span>
<span class="-1913002634248395144" onmouseenter="enter('-1913002634248395144');" onmouseout="out('-1913002634248395144');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 519 +                    showUnverifiedAccount();                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 520 +            }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 521 +        }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 522 +    }                                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 523  }                                                                                                                 </span></pre></td>
                            <td><pre><span class="8328120990598135231" onmouseenter="enter('8328120990598135231');" onmouseout="out('8328120990598135231');" style="">   1  package com.automattic.simplenote;                                                                                </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">   2 +                                                                                                                  </span>
<span class="-3495781243593779480" onmouseenter="enter('-3495781243593779480');" onmouseout="out('-3495781243593779480');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">   3 +import static com.automattic.simplenote.models.Account.KEY_EMAIL_VERIFICATION;                                    </span>
<span class="3919052636780858758" onmouseenter="enter('3919052636780858758');" onmouseout="out('3919052636780858758');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">   4 +import static com.automattic.simplenote.models.Preferences.PREFERENCES_OBJECT_KEY;                                </span>
<span class="-2196284958529318469" onmouseenter="enter('-2196284958529318469');" onmouseout="out('-2196284958529318469');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">   5 +import static com.simperium.android.AsyncAuthClient.USER_ACCESS_TOKEN_PREFERENCE;                                 </span>
<span class="-7261804762945120970" onmouseenter="enter('-7261804762945120970');" onmouseout="out('-7261804762945120970');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">   6 +import static com.simperium.android.AsyncAuthClient.USER_EMAIL_PREFERENCE;                                        </span>
<span  style="">   7                                                                                                                    </span>
<span class="-3997288425915246049" onmouseenter="enter('-3997288425915246049');" onmouseout="out('-3997288425915246049');" style="">   8  import android.annotation.SuppressLint;                                                                           </span>
<span class="-7090287939251728203" onmouseenter="enter('-7090287939251728203');" onmouseout="out('-7090287939251728203');" style="">   9  import android.app.Activity;                                                                                      </span>
<span class="-4535828467892621321" onmouseenter="enter('-4535828467892621321');" onmouseout="out('-4535828467892621321');" style="">  10  import android.app.Application;                                                                                   </span>
<span class="-5120547123096501078" onmouseenter="enter('-5120547123096501078');" onmouseout="out('-5120547123096501078');" style="">  11  import android.content.ComponentCallbacks2;                                                                       </span>
<span class="5922045460006936195" onmouseenter="enter('5922045460006936195');" onmouseout="out('5922045460006936195');" style="">  12  import android.content.Context;                                                                                   </span>
<span class="4122587240602557356" onmouseenter="enter('4122587240602557356');" onmouseout="out('4122587240602557356');" style="">  13  import android.content.SharedPreferences;                                                                         </span>
<span class="-9179032954578521484" onmouseenter="enter('-9179032954578521484');" onmouseout="out('-9179032954578521484');" style="">  14  import android.content.res.Configuration;                                                                         </span>
<span class="-8750621697125156872" onmouseenter="enter('-8750621697125156872');" onmouseout="out('-8750621697125156872');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  15 -import android.net.Uri;                                                                                           </span>
<span class="-4549785658871057260" onmouseenter="enter('-4549785658871057260');" onmouseout="out('-4549785658871057260');" style="">  16  import android.os.Build;                                                                                          </span>
<span class="8096531590004379472" onmouseenter="enter('8096531590004379472');" onmouseout="out('8096531590004379472');" style="">  17  import android.os.Bundle;                                                                                         </span>
<span class="-1086316590722027623" onmouseenter="enter('-1086316590722027623');" onmouseout="out('-1086316590722027623');" style="">  18  import android.os.Handler;                                                                                        </span>
<span class="7196841398407674858" onmouseenter="enter('7196841398407674858');" onmouseout="out('7196841398407674858');" style="">  19  import android.util.Log;                                                                                          </span>
<span  style="">  20                                                                                                                    </span>
<span class="-6242887455281895424" onmouseenter="enter('-6242887455281895424');" onmouseout="out('-6242887455281895424');" style="">  21  import androidx.annotation.IdRes;                                                                                 </span>
<span class="6963272077887521702" onmouseenter="enter('6963272077887521702');" onmouseout="out('6963272077887521702');" style="">  22  import androidx.annotation.NonNull;                                                                               </span>
<span class="7702331687346133722" onmouseenter="enter('7702331687346133722');" onmouseout="out('7702331687346133722');" style="">  23  import androidx.appcompat.app.AppCompatDelegate;                                                                  </span>

<span class="-6438193002598115217" onmouseenter="enter('-6438193002598115217');" onmouseout="out('-6438193002598115217');" style="">  24  import androidx.fragment.app.FragmentManager;                                                                     </span>
<span class="-5166869418136344301" onmouseenter="enter('-5166869418136344301');" onmouseout="out('-5166869418136344301');" style="">  25  import androidx.work.BackoffPolicy;                                                                               </span>
<span class="-4431582294891577664" onmouseenter="enter('-4431582294891577664');" onmouseout="out('-4431582294891577664');" style="">  26  import androidx.work.Constraints;                                                                                 </span>
<span class="3185086351037345986" onmouseenter="enter('3185086351037345986');" onmouseout="out('3185086351037345986');" style="">  27  import androidx.work.ExistingPeriodicWorkPolicy;                                                                  </span>
<span class="-3698903318922252687" onmouseenter="enter('-3698903318922252687');" onmouseout="out('-3698903318922252687');" style="">  28  import androidx.work.NetworkType;                                                                                 </span>
<span class="2994979786497810699" onmouseenter="enter('2994979786497810699');" onmouseout="out('2994979786497810699');" style="">  29  import androidx.work.PeriodicWorkRequest;                                                                         </span>
<span class="5786013396577205846" onmouseenter="enter('5786013396577205846');" onmouseout="out('5786013396577205846');" style="">  30  import androidx.work.WorkManager;                                                                                 </span>
<span  style="">  31                                                                                                                    </span>
<span class="-155835000323929258" onmouseenter="enter('-155835000323929258');" onmouseout="out('-155835000323929258');" style="">  32  import com.automattic.simplenote.analytics.AnalyticsTracker;                                                      </span>
<span class="-2312717542362407496" onmouseenter="enter('-2312717542362407496');" onmouseout="out('-2312717542362407496');" style="">  33  import com.automattic.simplenote.analytics.AnalyticsTrackerNosara;                                                </span>
<span class="-149350832801163469" onmouseenter="enter('-149350832801163469');" onmouseout="out('-149350832801163469');" style="">  34  import com.automattic.simplenote.models.Account;                                                                  </span>
<span class="9061368408436996655" onmouseenter="enter('9061368408436996655');" onmouseout="out('9061368408436996655');" style="">  35  import com.automattic.simplenote.models.Note;                                                                     </span>
<span class="7102019831075911821" onmouseenter="enter('7102019831075911821');" onmouseout="out('7102019831075911821');" style="">  36  import com.automattic.simplenote.models.NoteCountIndexer;                                                         </span>
<span class="4426422982983644373" onmouseenter="enter('4426422982983644373');" onmouseout="out('4426422982983644373');" style="">  37  import com.automattic.simplenote.models.NoteTagger;                                                               </span>
<span class="2894626372351854793" onmouseenter="enter('2894626372351854793');" onmouseout="out('2894626372351854793');" style="">  38  import com.automattic.simplenote.models.Preferences;                                                              </span>
<span class="107771998888903823" onmouseenter="enter('107771998888903823');" onmouseout="out('107771998888903823');" style="">  39  import com.automattic.simplenote.models.Tag;                                                                      </span>

<span class="160698548927534529" onmouseenter="enter('160698548927534529');" onmouseout="out('160698548927534529');" style="">  40  import com.automattic.simplenote.utils.AppLog;                                                                    </span>
<span class="7580776162261256599" onmouseenter="enter('7580776162261256599');" onmouseout="out('7580776162261256599');" style="">  41  import com.automattic.simplenote.utils.AppLog.Type;                                                               </span>
<span class="-3429573708794919100" onmouseenter="enter('-3429573708794919100');" onmouseout="out('-3429573708794919100');" style="">  42  import com.automattic.simplenote.utils.CrashUtils;                                                                </span>
<span class="8577850632926167445" onmouseenter="enter('8577850632926167445');" onmouseout="out('8577850632926167445');" style="">  43  import com.automattic.simplenote.utils.DisplayUtils;                                                              </span>
<span class="6713747859106964949" onmouseenter="enter('6713747859106964949');" onmouseout="out('6713747859106964949');" style="">  44  import com.automattic.simplenote.utils.NetworkUtils;                                                              </span>
<span class="-7136497821822559876" onmouseenter="enter('-7136497821822559876');" onmouseout="out('-7136497821822559876');" style="">  45  import com.automattic.simplenote.utils.PrefUtils;                                                                 </span>
<span class="-5753381984404345794" onmouseenter="enter('-5753381984404345794');" onmouseout="out('-5753381984404345794');" style="">  46  import com.automattic.simplenote.utils.SyncWorker;                                                                </span>
<span class="-6131823772648778947" onmouseenter="enter('-6131823772648778947');" onmouseout="out('-6131823772648778947');" style="">  47  import com.simperium.Simperium;                                                                                   </span>
<span class="581913492648825508" onmouseenter="enter('581913492648825508');" onmouseout="out('581913492648825508');" style="">  48  import com.simperium.android.AndroidClient;                                                                       </span>
<span class="1573888967082901106" onmouseenter="enter('1573888967082901106');" onmouseout="out('1573888967082901106');" style="">  49  import com.simperium.android.WebSocketManager;                                                                    </span>
<span class="-8170925370861558125" onmouseenter="enter('-8170925370861558125');" onmouseout="out('-8170925370861558125');" style="">  50  import com.simperium.client.Bucket;                                                                               </span>
<span class="-6754815116321497467" onmouseenter="enter('-6754815116321497467');" onmouseout="out('-6754815116321497467');" style="">  51  import com.simperium.client.BucketNameInvalid;                                                                    </span>
<span class="-8454203534157102839" onmouseenter="enter('-8454203534157102839');" onmouseout="out('-8454203534157102839');" style="">  52  import com.simperium.client.BucketObjectMissingException;                                                         </span>
<span class="-6128914918417430442" onmouseenter="enter('-6128914918417430442');" onmouseout="out('-6128914918417430442');" style="">  53  import com.simperium.client.ChannelProvider.HeartbeatListener;                                                    </span>
<span class="4554110602695491054" onmouseenter="enter('4554110602695491054');" onmouseout="out('4554110602695491054');" style="">  54  import com.simperium.client.User;                                                                                 </span>
<span  style="">  55                                                                                                                    </span>
<span class="7324884800271719890" onmouseenter="enter('7324884800271719890');" onmouseout="out('7324884800271719890');" style="">  56  import org.wordpress.passcodelock.AppLockManager;                                                                 </span>
<span  style="">  57                                                                                                                    </span>
<span class="1562735530241225598" onmouseenter="enter('1562735530241225598');" onmouseout="out('1562735530241225598');" style="">  58  import java.util.Calendar;                                                                                        </span>
<span class="4169599896190320038" onmouseenter="enter('4169599896190320038');" onmouseout="out('4169599896190320038');" style="">  59  import java.util.HashMap;                                                                                         </span>
<span class="-4563680703184802189" onmouseenter="enter('-4563680703184802189');" onmouseout="out('-4563680703184802189');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  60 -import java.util.Locale;                                                                                          </span>
<span class="6618655971923850695" onmouseenter="enter('6618655971923850695');" onmouseout="out('6618655971923850695');" style="">  61  import java.util.Map;                                                                                             </span>
<span class="-6356287537734540725" onmouseenter="enter('-6356287537734540725');" onmouseout="out('-6356287537734540725');" style="">  62  import java.util.concurrent.TimeUnit;                                                                             </span>
<span  style="">  63                                                                                                                    </span>
<span class="-3495781243593779480" onmouseenter="enter('-3495781243593779480');" onmouseout="out('-3495781243593779480');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  64 -import static com.automattic.simplenote.models.Account.KEY_EMAIL_VERIFICATION;                                    </span>
<span class="3919052636780858758" onmouseenter="enter('3919052636780858758');" onmouseout="out('3919052636780858758');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  65 -import static com.automattic.simplenote.models.Preferences.PREFERENCES_OBJECT_KEY;                                </span>
<span class="-2196284958529318469" onmouseenter="enter('-2196284958529318469');" onmouseout="out('-2196284958529318469');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  66 -import static com.simperium.android.AsyncAuthClient.USER_ACCESS_TOKEN_PREFERENCE;                                 </span>
<span class="-7261804762945120970" onmouseenter="enter('-7261804762945120970');" onmouseout="out('-7261804762945120970');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  67 -import static com.simperium.android.AsyncAuthClient.USER_EMAIL_PREFERENCE;                                        </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  68 -                                                                                                                  </span>
<span class="4818424207955561707" onmouseenter="enter('4818424207955561707');" onmouseout="out('4818424207955561707');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  69 +import dagger.hilt.android.HiltAndroidApp;                                                                        </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  70 +                                                                                                                  </span>
<span class="-1044996963561409144" onmouseenter="enter('-1044996963561409144');" onmouseout="out('-1044996963561409144');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  71 +@HiltAndroidApp                                                                                                   </span>
<span class="5261034755457737176" onmouseenter="enter('5261034755457737176');" onmouseout="out('5261034755457737176');" style="">  72  public class Simplenote extends Application implements HeartbeatListener {                                        </span>
<span class="-9163404905215646951" onmouseenter="enter('-9163404905215646951');" onmouseout="out('-9163404905215646951');" style="">  73      public static final String DELETED_NOTE_ID = &quot;deletedNoteId&quot;;                                                 </span>
<span class="5833235806353570833" onmouseenter="enter('5833235806353570833');" onmouseout="out('5833235806353570833');" style="">  74      public static final String SELECTED_NOTE_ID = &quot;selectedNoteId&quot;;                                               </span>
<span class="6246994664501093582" onmouseenter="enter('6246994664501093582');" onmouseout="out('6246994664501093582');" style="">  75      public static final String SCROLL_POSITION_PREFERENCES = &quot;scroll_position&quot;;                                   </span>
<span class="-7519035262730977956" onmouseenter="enter('-7519035262730977956');" onmouseout="out('-7519035262730977956');" style="">  76      public static final String SYNC_TIME_PREFERENCES = &quot;sync_time&quot;;                                               </span>
<span class="-8693524844222569932" onmouseenter="enter('-8693524844222569932');" onmouseout="out('-8693524844222569932');" style="">  77      public static final String TAG = &quot;Simplenote&quot;;                                                                </span>
<span class="3215095332324123101" onmouseenter="enter('3215095332324123101');" onmouseout="out('3215095332324123101');" style="">  78      public static final int INTENT_EDIT_NOTE = 2;                                                                 </span>
<span class="5587967888967017737" onmouseenter="enter('5587967888967017737');" onmouseout="out('5587967888967017737');" style="">  79      public static final int INTENT_PREFERENCES = 1;                                                               </span>
<span class="-7131135836515418231" onmouseenter="enter('-7131135836515418231');" onmouseout="out('-7131135836515418231');" style="">  80      public static final int ONE_MINUTE_MILLIS = 60 * 1000;  // 60 seconds                                         </span>
<span class="2194585893201893968" onmouseenter="enter('2194585893201893968');" onmouseout="out('2194585893201893968');" style="">  81      public static final int TEN_SECONDS_MILLIS = 10 * 1000;  // 10 seconds                                        </span>
<span class="-6274174172868583745" onmouseenter="enter('-6274174172868583745');" onmouseout="out('-6274174172868583745');" style="">  82      public static final int TWENTY_SECONDS_MILLIS = 20 * 1000;  // 20 seconds                                     </span>
<span  style="">  83                                                                                                                    </span>
<span class="53348235283476519" onmouseenter="enter('53348235283476519');" onmouseout="out('53348235283476519');" style="">  84      private static final String AUTH_PROVIDER = &quot;simplenote.com&quot;;                                                 </span>
<span class="3318171237102217895" onmouseenter="enter('3318171237102217895');" onmouseout="out('3318171237102217895');" style="">  85      private static final String TAG_SYNC = &quot;sync&quot;;                                                                </span>
<span class="4591981961767073369" onmouseenter="enter('4591981961767073369');" onmouseout="out('4591981961767073369');" style="">  86      private static final long HEARTBEAT_TIMEOUT =  WebSocketManager.HEARTBEAT_INTERVAL * 2;                       </span>
<span  style="">  87                                                                                                                    </span>


<span class="7535211107389480967" onmouseenter="enter('7535211107389480967');" onmouseout="out('7535211107389480967');" style="">  88      private static Bucket&lt;Account&gt; mAccountBucket;                                                                </span>
<span class="-5728139290357644856" onmouseenter="enter('-5728139290357644856');" onmouseout="out('-5728139290357644856');" style="">  89      private static Bucket&lt;Preferences&gt; mPreferencesBucket;                                                        </span>
<span  style="">  90                                                                                                                    </span>
<span class="-7913886194286774922" onmouseenter="enter('-7913886194286774922');" onmouseout="out('-7913886194286774922');" style="">  91      private Bucket&lt;Note&gt; mNotesBucket;                                                                            </span>
<span class="-3447103309759426335" onmouseenter="enter('-3447103309759426335');" onmouseout="out('-3447103309759426335');" style="">  92      private Bucket&lt;Tag&gt; mTagsBucket;                                                                              </span>
<span class="5428937602637269790" onmouseenter="enter('5428937602637269790');" onmouseout="out('5428937602637269790');" style="">  93      private SyncTimes&lt;Note&gt; mNoteSyncTimes;                                                                       </span>
<span class="1419071614229033804" onmouseenter="enter('1419071614229033804');" onmouseout="out('1419071614229033804');" style="">  94      private Handler mHeartbeatHandler;                                                                            </span>
<span class="-7581284801413594720" onmouseenter="enter('-7581284801413594720');" onmouseout="out('-7581284801413594720');" style="">  95      private Runnable mHeartbeatRunnable;                                                                          </span>
<span class="8198744544525618575" onmouseenter="enter('8198744544525618575');" onmouseout="out('8198744544525618575');" style="">  96      private Simperium mSimperium;                                                                                 </span>
<span class="9035842280354646506" onmouseenter="enter('9035842280354646506');" onmouseout="out('9035842280354646506');" style="">  97      private boolean mHasShownReviewOrVerify;                                                                      </span>
<span class="-2339277597485504791" onmouseenter="enter('-2339277597485504791');" onmouseout="out('-2339277597485504791');" style="">  98      private boolean mIsInBackground = true;                                                                       </span>
<span  style="">  99                                                                                                                    </span>
<span class="-2716773701189387633" onmouseenter="enter('-2716773701189387633');" onmouseout="out('-2716773701189387633');" style=""> 100      public void onCreate() {                                                                                      </span>
<span class="-2958534921295515858" onmouseenter="enter('-2958534921295515858');" onmouseout="out('-2958534921295515858');" style=""> 101          super.onCreate();                                                                                         </span>
<span  style=""> 102                                                                                                                    </span>
<span class="4646367228775257968" onmouseenter="enter('4646367228775257968');" onmouseout="out('4646367228775257968');" style=""> 103          CrashUtils.initWithContext(this);                                                                         </span>
<span  style=""> 104                                                                                                                    </span>
<span class="-5111101701014776486" onmouseenter="enter('-5111101701014776486');" onmouseout="out('-5111101701014776486');" style=""> 105          SimplenoteAppLock appLock = new SimplenoteAppLock(this);                                                  </span>
<span class="-2126957952781882671" onmouseenter="enter('-2126957952781882671');" onmouseout="out('-2126957952781882671');" style=""> 106          AppLockManager.getInstance().setCurrentAppLock(appLock);                                                  </span>
<span class="-192548486813849389" onmouseenter="enter('-192548486813849389');" onmouseout="out('-192548486813849389');" style=""> 107          appLock.enable();                                                                                         </span>
<span  style=""> 108                                                                                                                    </span>
<span class="-6610099647322125620" onmouseenter="enter('-6610099647322125620');" onmouseout="out('-6610099647322125620');" style=""> 109          mSimperium = Simperium.newClient(                                                                         </span>
<span class="-4695376588658458273" onmouseenter="enter('-4695376588658458273');" onmouseout="out('-4695376588658458273');" style=""> 110                  BuildConfig.SIMPERIUM_APP_ID,                                                                     </span>
<span class="4318504011662215607" onmouseenter="enter('4318504011662215607');" onmouseout="out('4318504011662215607');" style=""> 111                  BuildConfig.SIMPERIUM_APP_KEY,                                                                    </span>
<span class="7848723611787395232" onmouseenter="enter('7848723611787395232');" onmouseout="out('7848723611787395232');" style=""> 112                  this                                                                                              </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 113          );                                                                                                        </span>
<span  style=""> 114                                                                                                                    </span>
<span class="7031285256639409704" onmouseenter="enter('7031285256639409704');" onmouseout="out('7031285256639409704');" style=""> 115          mSimperium.setAuthProvider(AUTH_PROVIDER);                                                                </span>
<span class="9065419810018319535" onmouseenter="enter('9065419810018319535');" onmouseout="out('9065419810018319535');" style=""> 116          mSimperium.addHeartbeatListener(this);                                                                    </span>
<span  style=""> 117                                                                                                                    </span>
<span class="-1855727841872273262" onmouseenter="enter('-1855727841872273262');" onmouseout="out('-1855727841872273262');" style=""> 118          mHeartbeatHandler = new Handler();                                                                        </span>
<span class="-1915212603929880067" onmouseenter="enter('-1915212603929880067');" onmouseout="out('-1915212603929880067');" style=""> 119          mHeartbeatRunnable = new Runnable() {                                                                     </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 120              @Override                                                                                             </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 121              public void run() {                                                                                   </span>
<span class="4054271998020395502" onmouseenter="enter('4054271998020395502');" onmouseout="out('4054271998020395502');" style=""> 122                  AppLog.add(Type.NETWORK, &quot;Heartbeat stopped&quot;);                                                    </span>
<span class="6204465678829044464" onmouseenter="enter('6204465678829044464');" onmouseout="out('6204465678829044464');" style=""> 123                  mHeartbeatHandler.removeCallbacks(mHeartbeatRunnable);                                            </span>
<span class="209086841339708400" onmouseenter="enter('209086841339708400');" onmouseout="out('209086841339708400');" style=""> 124                  mHeartbeatHandler.postDelayed(mHeartbeatRunnable, HEARTBEAT_TIMEOUT);                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 125              }                                                                                                     </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 126          };                                                                                                        </span>
<span  style=""> 127                                                                                                                    </span>
<span class="3598094545545730496" onmouseenter="enter('3598094545545730496');" onmouseout="out('3598094545545730496');" style=""> 128          SyncTimePersister syncTimePersister = new SyncTimePersister();                                            </span>
<span class="2948787900293662004" onmouseenter="enter('2948787900293662004');" onmouseout="out('2948787900293662004');" style=""> 129          mNoteSyncTimes = new SyncTimes&lt;&gt;(syncTimePersister.load());                                               </span>
<span class="8243749995089440347" onmouseenter="enter('8243749995089440347');" onmouseout="out('8243749995089440347');" style=""> 130          mNoteSyncTimes.addListener(syncTimePersister);                                                            </span>
<span  style=""> 131                                                                                                                    </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 132          try {                                                                                                     </span>
<span class="-3712083184111777754" onmouseenter="enter('-3712083184111777754');" onmouseout="out('-3712083184111777754');" style=""> 133              mNotesBucket = mSimperium.bucket(new Note.Schema());                                                  </span>
<span class="6461086551110304444" onmouseenter="enter('6461086551110304444');" onmouseout="out('6461086551110304444');" style=""> 134              mNotesBucket.addListener(mNoteSyncTimes.bucketListener);                                              </span>
<span class="8722979014886483827" onmouseenter="enter('8722979014886483827');" onmouseout="out('8722979014886483827');" style=""> 135              Tag.Schema tagSchema = new Tag.Schema();                                                              </span>
<span class="-9102287405513372469" onmouseenter="enter('-9102287405513372469');" onmouseout="out('-9102287405513372469');" style=""> 136              tagSchema.addIndex(new NoteCountIndexer(mNotesBucket));                                               </span>
<span class="-175388701111242190" onmouseenter="enter('-175388701111242190');" onmouseout="out('-175388701111242190');" style=""> 137              mTagsBucket = mSimperium.bucket(tagSchema);                                                           </span>
<span class="4439876589301981228" onmouseenter="enter('4439876589301981228');" onmouseout="out('4439876589301981228');" style=""> 138              mPreferencesBucket = mSimperium.bucket(new Preferences.Schema());                                     </span>
<span class="-2625727357905435450" onmouseenter="enter('-2625727357905435450');" onmouseout="out('-2625727357905435450');" style=""> 139              mAccountBucket = mSimperium.bucket(new Account.Schema());                                             </span>



<span class="6417103925919259383" onmouseenter="enter('6417103925919259383');" onmouseout="out('6417103925919259383');" style=""> 140              // Every time a note changes or is deleted we need to reindex the tag counts                          </span>
<span class="1028093174501664258" onmouseenter="enter('1028093174501664258');" onmouseout="out('1028093174501664258');" style=""> 141              mNotesBucket.addListener(new NoteTagger(mTagsBucket));                                                </span>
<span class="9150575117674564137" onmouseenter="enter('9150575117674564137');" onmouseout="out('9150575117674564137');" style=""> 142          } catch (BucketNameInvalid e) {                                                                           </span>
<span class="5045778340242790475" onmouseenter="enter('5045778340242790475');" onmouseout="out('5045778340242790475');" style=""> 143              throw new RuntimeException(&quot;Could not create bucket&quot;, e);                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 144          }                                                                                                         </span>
<span  style=""> 145                                                                                                                    </span>
<span class="-6104247182653922910" onmouseenter="enter('-6104247182653922910');" onmouseout="out('-6104247182653922910');" style=""> 146          AppCompatDelegate.setCompatVectorFromResourcesEnabled(true);                                              </span>
<span  style=""> 147                                                                                                                    </span>
<span class="1079457458543399093" onmouseenter="enter('1079457458543399093');" onmouseout="out('1079457458543399093');" style=""> 148          ApplicationLifecycleMonitor applicationLifecycleMonitor = new ApplicationLifecycleMonitor();              </span>
<span class="381596098670029908" onmouseenter="enter('381596098670029908');" onmouseout="out('381596098670029908');" style=""> 149          registerComponentCallbacks(applicationLifecycleMonitor);                                                  </span>
<span class="-8076193737884381578" onmouseenter="enter('-8076193737884381578');" onmouseout="out('-8076193737884381578');" style=""> 150          registerActivityLifecycleCallbacks(applicationLifecycleMonitor);                                          </span>
<span  style=""> 151                                                                                                                    </span>
<span class="1335392763825317999" onmouseenter="enter('1335392763825317999');" onmouseout="out('1335392763825317999');" style=""> 152          AnalyticsTracker.registerTracker(new AnalyticsTrackerNosara(this));                                       </span>
<span class="-1844307234054360739" onmouseenter="enter('-1844307234054360739');" onmouseout="out('-1844307234054360739');" style=""> 153          AnalyticsTracker.refreshMetadata(mSimperium.getUser().getEmail());                                        </span>
<span class="8399230582885161213" onmouseenter="enter('8399230582885161213');" onmouseout="out('8399230582885161213');" style=""> 154          CrashUtils.setCurrentUser(mSimperium.getUser());                                                          </span>
<span  style=""> 155                                                                                                                    </span>
<span class="-1455224487599073617" onmouseenter="enter('-1455224487599073617');" onmouseout="out('-1455224487599073617');" style=""> 156          AppLog.add(Type.DEVICE, getDeviceInfo());                                                                 </span>
<span class="-4084915558750483061" onmouseenter="enter('-4084915558750483061');" onmouseout="out('-4084915558750483061');" style=""> 157          AppLog.add(Type.ACCOUNT, getAccountInfo());                                                               </span>
<span class="-671791306218270016" onmouseenter="enter('-671791306218270016');" onmouseout="out('-671791306218270016');" style=""> 158          AppLog.add(Type.LAYOUT, DisplayUtils.getDisplaySizeAndOrientation(Simplenote.this));                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 159      }                                                                                                             </span>
<span  style=""> 160                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 161      @Override                                                                                                     </span>
<span class="7640484986889102054" onmouseenter="enter('7640484986889102054');" onmouseout="out('7640484986889102054');" style=""> 162      public void onBeat() {                                                                                        </span>
<span class="7315421582655131800" onmouseenter="enter('7315421582655131800');" onmouseout="out('7315421582655131800');" style=""> 163          AppLog.add(Type.NETWORK, &quot;Heartbeat received&quot;);                                                           </span>
<span class="6204465678829044464" onmouseenter="enter('6204465678829044464');" onmouseout="out('6204465678829044464');" style=""> 164          mHeartbeatHandler.removeCallbacks(mHeartbeatRunnable);                                                    </span>
<span class="209086841339708400" onmouseenter="enter('209086841339708400');" onmouseout="out('209086841339708400');" style=""> 165          mHeartbeatHandler.postDelayed(mHeartbeatRunnable, HEARTBEAT_TIMEOUT);                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 166      }                                                                                                             </span>
<span  style=""> 167                                                                                                                    </span>
<span class="7268646999054713936" onmouseenter="enter('7268646999054713936');" onmouseout="out('7268646999054713936');" style=""> 168      private boolean isFirstLaunch() {                                                                             </span>
<span class="4401662994174013480" onmouseenter="enter('4401662994174013480');" onmouseout="out('4401662994174013480');" style=""> 169          // NotesActivity sets this pref to false after first launch                                               </span>
<span class="5757483603403500826" onmouseenter="enter('5757483603403500826');" onmouseout="out('5757483603403500826');" style=""> 170          return PrefUtils.getBoolPref(this, PrefUtils.PREF_FIRST_LAUNCH, true);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 171      }                                                                                                             </span>
<span  style=""> 172                                                                                                                    </span>
<span class="-5261177328937716585" onmouseenter="enter('-5261177328937716585');" onmouseout="out('-5261177328937716585');" style=""> 173      public static boolean analyticsIsEnabled() {                                                                  </span>
<span class="1755574756529165678" onmouseenter="enter('1755574756529165678');" onmouseout="out('1755574756529165678');" style=""> 174          if (mPreferencesBucket == null) {                                                                         </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 175              return true;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 176          }                                                                                                         </span>
<span  style=""> 177                                                                                                                    </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 178          try {                                                                                                     </span>
<span class="734651049898166881" onmouseenter="enter('734651049898166881');" onmouseout="out('734651049898166881');" style=""> 179              Preferences prefs = mPreferencesBucket.get(PREFERENCES_OBJECT_KEY);                                   </span>
<span class="1383721738222569542" onmouseenter="enter('1383721738222569542');" onmouseout="out('1383721738222569542');" style=""> 180              return prefs.getAnalyticsEnabled();                                                                   </span>
<span class="-1560847995217927266" onmouseenter="enter('-1560847995217927266');" onmouseout="out('-1560847995217927266');" style=""> 181          } catch (BucketObjectMissingException e) {                                                                </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 182              return true;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 183          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 184      }                                                                                                             </span>
<span  style=""> 185                                                                                                                    </span>
<span class="4656537755100497713" onmouseenter="enter('4656537755100497713');" onmouseout="out('4656537755100497713');" style=""> 186      private String getAccountInfo() {                                                                             </span>
<span class="-4909194837402373696" onmouseenter="enter('-4909194837402373696');" onmouseout="out('-4909194837402373696');" style=""><abbr title=" 187          String email = &quot;Email: &quot; + (mSimperium != null &amp;&amp; mSimperium.getUser() != null ? mSimperium.getUser().getEmail() : &quot;?&quot;);"> 187          String email = &quot;Email: &quot; + (mSimperium != null &amp;&amp; mSimperium.getUser() != null ? mSimperium.getUser().getEðŸ”µ</abbr></span>
<span class="-1815219994356976513" onmouseenter="enter('-1815219994356976513');" onmouseout="out('-1815219994356976513');" style=""> 188          String notes = &quot;Notes: &quot; + (mNotesBucket != null ? mNotesBucket.count() : &quot;?&quot;);                           </span>
<span class="-4701463784795893558" onmouseenter="enter('-4701463784795893558');" onmouseout="out('-4701463784795893558');" style=""> 189          String tags = &quot;Tags: &quot; + (mTagsBucket != null ? mTagsBucket.count() : &quot;?&quot;);                               </span>
<span class="5597163353916173356" onmouseenter="enter('5597163353916173356');" onmouseout="out('5597163353916173356');" style=""> 190          return email + &quot;\n&quot; + notes + &quot;\n&quot; + tags + &quot;\n\n&quot;;                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 191      }                                                                                                             </span>
<span  style=""> 192                                                                                                                    </span>
<span class="-4176269846075250192" onmouseenter="enter('-4176269846075250192');" onmouseout="out('-4176269846075250192');" style=""> 193      private String getDeviceInfo() {                                                                              </span>
<span class="7581408804502865572" onmouseenter="enter('7581408804502865572');" onmouseout="out('7581408804502865572');" style=""><abbr title=" 194          String architecture = Build.DEVICE != null &amp;&amp; Build.DEVICE.matches(&quot;.+_cheets|cheets_.+&quot;) ? &quot;Chrome OS &quot; : &quot;Android &quot;;"> 194          String architecture = Build.DEVICE != null &amp;&amp; Build.DEVICE.matches(&quot;.+_cheets|cheets_.+&quot;) ? &quot;Chrome OS &quot; :ðŸ”µ</abbr></span>
<span class="-921339907737118722" onmouseenter="enter('-921339907737118722');" onmouseout="out('-921339907737118722');" style=""> 195          String device = &quot;Device: &quot; + Build.MANUFACTURER + &quot; &quot; + Build.MODEL + &quot; (&quot; + Build.DEVICE + &quot;)&quot;;          </span>
<span class="-7970072835487477375" onmouseenter="enter('-7970072835487477375');" onmouseout="out('-7970072835487477375');" style=""> 196          String system = &quot;System: &quot; + architecture + Build.VERSION.RELEASE + &quot; (&quot; + Build.VERSION.SDK_INT + &quot;)&quot;;   </span>
<span class="3648033425382070956" onmouseenter="enter('3648033425382070956');" onmouseout="out('3648033425382070956');" style=""> 197          String app = &quot;App: Simplenote &quot; + PrefUtils.versionInfo();                                                </span>
<span class="6793127563363345208" onmouseenter="enter('6793127563363345208');" onmouseout="out('6793127563363345208');" style=""> 198          return device + &quot;\n&quot; + system + &quot;\n&quot; + app + &quot;\n\n&quot;;                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 199      }                                                                                                             </span>
<span  style=""> 200                                                                                                                    </span>
<span class="-2452840228833033114" onmouseenter="enter('-2452840228833033114');" onmouseout="out('-2452840228833033114');" style=""> 201      public Simperium getSimperium() {                                                                             </span>
<span class="-1067936515361198064" onmouseenter="enter('-1067936515361198064');" onmouseout="out('-1067936515361198064');" style=""> 202          return mSimperium;                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 203      }                                                                                                             </span>
<span  style=""> 204                                                                                                                    </span>
<span class="8475950615112765175" onmouseenter="enter('8475950615112765175');" onmouseout="out('8475950615112765175');" style=""> 205      public Bucket&lt;Note&gt; getNotesBucket() {                                                                        </span>
<span class="3001734825963445545" onmouseenter="enter('3001734825963445545');" onmouseout="out('3001734825963445545');" style=""> 206          return mNotesBucket;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 207      }                                                                                                             </span>
<span  style=""> 208                                                                                                                    </span>
<span class="365385451944262609" onmouseenter="enter('365385451944262609');" onmouseout="out('365385451944262609');" style=""> 209      public SyncTimes getNoteSyncTimes() {                                                                         </span>
<span class="6562319796144170989" onmouseenter="enter('6562319796144170989');" onmouseout="out('6562319796144170989');" style=""> 210          return mNoteSyncTimes;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 211      }                                                                                                             </span>
<span  style=""> 212                                                                                                                    </span>
<span class="1680392141704969043" onmouseenter="enter('1680392141704969043');" onmouseout="out('1680392141704969043');" style=""> 213      public Bucket&lt;Tag&gt; getTagsBucket() {                                                                          </span>
<span class="6135487691608919718" onmouseenter="enter('6135487691608919718');" onmouseout="out('6135487691608919718');" style=""> 214          return mTagsBucket;                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 215      }                                                                                                             </span>
<span  style=""> 216                                                                                                                    </span>
<span class="-4506300185279466066" onmouseenter="enter('-4506300185279466066');" onmouseout="out('-4506300185279466066');" style=""> 217      public Bucket&lt;Preferences&gt; getPreferencesBucket() {                                                           </span>
<span class="6715102450829888836" onmouseenter="enter('6715102450829888836');" onmouseout="out('6715102450829888836');" style=""> 218          return mPreferencesBucket;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 219      }                                                                                                             </span>
<span  style=""> 220                                                                                                                    </span>
<span class="8939354386013821015" onmouseenter="enter('8939354386013821015');" onmouseout="out('8939354386013821015');" style=""> 221      public Bucket&lt;Account&gt; getAccountBucket() {                                                                   </span>
<span class="2771394281478310822" onmouseenter="enter('2771394281478310822');" onmouseout="out('2771394281478310822');" style=""> 222          return mAccountBucket;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 223      }                                                                                                             </span>
<span  style=""> 224                                                                                                                    </span>
<span class="-5307885032361585350" onmouseenter="enter('-5307885032361585350');" onmouseout="out('-5307885032361585350');" style=""> 225      public boolean isInBackground() {                                                                             </span>
<span class="3812912940560000313" onmouseenter="enter('3812912940560000313');" onmouseout="out('3812912940560000313');" style=""> 226          return mIsInBackground;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 227      }                                                                                                             </span>
<span  style=""> 228                                                                                                                    </span>
<span class="9084571718636450070" onmouseenter="enter('9084571718636450070');" onmouseout="out('9084571718636450070');" style=""> 229      public void loginWithToken(String email, String spToken) {                                                    </span>
<span class="2848300691293606814" onmouseenter="enter('2848300691293606814');" onmouseout="out('2848300691293606814');" style=""> 230          // Manually authorize the user with Simperium                                                             </span>
<span class="-4556253445089435832" onmouseenter="enter('-4556253445089435832');" onmouseout="out('-4556253445089435832');" style=""> 231          User user = mSimperium.getUser();                                                                         </span>
<span class="-4915005065677121955" onmouseenter="enter('-4915005065677121955');" onmouseout="out('-4915005065677121955');" style=""> 232          user.setAccessToken(spToken);                                                                             </span>
<span class="877344059420132568" onmouseenter="enter('877344059420132568');" onmouseout="out('877344059420132568');" style=""> 233          user.setEmail(email);                                                                                     </span>
<span class="538456865812119501" onmouseenter="enter('538456865812119501');" onmouseout="out('538456865812119501');" style=""> 234          user.setStatus(User.Status.AUTHORIZED);                                                                   </span>
<span  style=""> 235                                                                                                                    </span>
<span class="-755513241422191443" onmouseenter="enter('-755513241422191443');" onmouseout="out('-755513241422191443');" style=""> 236          // Store the user data in Simperium shared preferences                                                    </span>
<span class="4508720492858536163" onmouseenter="enter('4508720492858536163');" onmouseout="out('4508720492858536163');" style=""> 237          SharedPreferences.Editor editor = AndroidClient.sharedPreferences(this).edit();                           </span>
<span class="2812904514433972765" onmouseenter="enter('2812904514433972765');" onmouseout="out('2812904514433972765');" style=""> 238          editor.putString(USER_ACCESS_TOKEN_PREFERENCE, user.getAccessToken());                                    </span>
<span class="-3810862774138306438" onmouseenter="enter('-3810862774138306438');" onmouseout="out('-3810862774138306438');" style=""> 239          editor.putString(USER_EMAIL_PREFERENCE, user.getEmail());                                                 </span>
<span class="-5305612453340718340" onmouseenter="enter('-5305612453340718340');" onmouseout="out('-5305612453340718340');" style=""> 240          editor.apply();                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 241      }                                                                                                             </span>
<span  style=""> 242                                                                                                                    </span>
<span class="2855914666290052253" onmouseenter="enter('2855914666290052253');" onmouseout="out('2855914666290052253');" style=""> 243      public boolean isLoggedIn() {                                                                                 </span>
<span class="-4556253445089435832" onmouseenter="enter('-4556253445089435832');" onmouseout="out('-4556253445089435832');" style=""> 244          User user = mSimperium.getUser();                                                                         </span>
<span class="754608154577126470" onmouseenter="enter('754608154577126470');" onmouseout="out('754608154577126470');" style=""> 245          return user != null &amp;&amp; user.getStatus() == User.Status.AUTHORIZED;                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 246      }                                                                                                             </span>
<span  style=""> 247                                                                                                                    </span>
<span class="542821705420321329" onmouseenter="enter('542821705420321329');" onmouseout="out('542821705420321329');" style=""> 248      public String getUserEmail() {                                                                                </span>
<span class="-4556253445089435832" onmouseenter="enter('-4556253445089435832');" onmouseout="out('-4556253445089435832');" style=""> 249          User user = mSimperium.getUser();                                                                         </span>
<span class="-5079006915454915875" onmouseenter="enter('-5079006915454915875');" onmouseout="out('-5079006915454915875');" style=""> 250          return user != null ? user.getEmail() : null;                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 251      }                                                                                                             </span>
<span  style=""> 252                                                                                                                    </span>
<span class="6597616594928186346" onmouseenter="enter('6597616594928186346');" onmouseout="out('6597616594928186346');" style=""> 253      private void checkReviewAccountOrVerifyEmail(final Activity activity) {                                       </span>
<span class="2362663380307114251" onmouseenter="enter('2362663380307114251');" onmouseout="out('2362663380307114251');" style=""> 254          if (isFirstLaunch() || !NetworkUtils.isNetworkAvailable(this) || mHasShownReviewOrVerify) {               </span>
<span class="-6283561897593648565" onmouseenter="enter('-6283561897593648565');" onmouseout="out('-6283561897593648565');" style=""> 255              // Show nothing on first launch, no network connection, or has already shown review/verify.           </span>















<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 256              return;                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 257          }                                                                                                         </span>
<span  style=""> 258                                                                                                                    </span>
<span class="-540737122573501910" onmouseenter="enter('-540737122573501910');" onmouseout="out('-540737122573501910');" style=""> 259          Account account;                                                                                          </span>
<span  style=""> 260                                                                                                                    </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 261          try {                                                                                                     </span>
<span class="-4662417686030682577" onmouseenter="enter('-4662417686030682577');" onmouseout="out('-4662417686030682577');" style=""> 262              account = mAccountBucket.get(KEY_EMAIL_VERIFICATION);                                                 </span>
<span class="5552480145733230038" onmouseenter="enter('5552480145733230038');" onmouseout="out('5552480145733230038');" style=""> 263          } catch (BucketObjectMissingException bucketObjectMissingException) {                                     </span>
<span class="6354876555049818706" onmouseenter="enter('6354876555049818706');" onmouseout="out('6354876555049818706');" style=""> 264              // Show review account when entity does not exist.                                                    </span>
<span class="-1048429067652814027" onmouseenter="enter('-1048429067652814027');" onmouseout="out('-1048429067652814027');" style=""> 265              showReviewAccountOrVerifyEmail(activity, false);                                                      </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 266              return;                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 267          }                                                                                                         </span>
<span  style=""> 268                                                                                                                    </span>
<span class="7633177671918682469" onmouseenter="enter('7633177671918682469');" onmouseout="out('7633177671918682469');" style=""> 269          if (mSimperium == null || mSimperium.getUser() == null || mSimperium.getUser().getEmail() == null) {      </span>
<span class="-271293222991803357" onmouseenter="enter('-271293222991803357');" onmouseout="out('-271293222991803357');" style=""> 270              // Show nothing when Simperium, user, or email cannot be retrieved.                                   </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 271              return;                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 272          }                                                                                                         </span>
<span  style=""> 273                                                                                                                    </span>
<span class="-5537883423725267075" onmouseenter="enter('-5537883423725267075');" onmouseout="out('-5537883423725267075');" style=""> 274          String email = mSimperium.getUser().getEmail();                                                           </span>
<span  style=""> 275                                                                                                                    </span>
<span class="-8899475057461778111" onmouseenter="enter('-8899475057461778111');" onmouseout="out('-8899475057461778111');" style=""> 276          if (account.hasVerifiedEmail(email)) {                                                                    </span>
<span class="8892034391829602403" onmouseenter="enter('8892034391829602403');" onmouseout="out('8892034391829602403');" style=""> 277              // Show nothing when email has been verified.                                                         </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 278              return;                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 279          }                                                                                                         </span>
<span  style=""> 280                                                                                                                    </span>
<span class="8842470115132734226" onmouseenter="enter('8842470115132734226');" onmouseout="out('8842470115132734226');" style=""> 281          // Show verify email when email has been sent to account address.  Show review account otherwise.         </span>
<span class="1162867526205024513" onmouseenter="enter('1162867526205024513');" onmouseout="out('1162867526205024513');" style=""> 282          showReviewAccountOrVerifyEmail(activity, account.hasSentEmail(email));                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 283      }                                                                                                             </span>
<span  style=""> 284                                                                                                                    </span>








<span class="2332882432376014482" onmouseenter="enter('2332882432376014482');" onmouseout="out('2332882432376014482');" style=""> 285      private void showReviewAccountOrVerifyEmail(final Activity activity, boolean hasSentEmail) {                  </span>
<span class="-3746560840586400800" onmouseenter="enter('-3746560840586400800');" onmouseout="out('-3746560840586400800');" style=""> 286          final FragmentManager fragmentManager;                                                                    </span>
<span class="-8603498050420470579" onmouseenter="enter('-8603498050420470579');" onmouseout="out('-8603498050420470579');" style=""> 287          final @IdRes int container;                                                                               </span>
<span  style=""> 288                                                                                                                    </span>
<span class="6030899174327056570" onmouseenter="enter('6030899174327056570');" onmouseout="out('6030899174327056570');" style=""> 289          if (activity instanceof NotesActivity) {                                                                  </span>
<span class="1073665129405439698" onmouseenter="enter('1073665129405439698');" onmouseout="out('1073665129405439698');" style=""> 290              fragmentManager = ((NotesActivity) activity).getSupportFragmentManager();                             </span>
<span class="-6813895032683749169" onmouseenter="enter('-6813895032683749169');" onmouseout="out('-6813895032683749169');" style=""> 291              container = R.id.drawer_layout;                                                                       </span>
<span class="-6053920028300427274" onmouseenter="enter('-6053920028300427274');" onmouseout="out('-6053920028300427274');" style=""> 292          } else if (activity instanceof NoteEditorActivity) {                                                      </span>
<span class="6040549106017882092" onmouseenter="enter('6040549106017882092');" onmouseout="out('6040549106017882092');" style=""> 293              fragmentManager = ((NoteEditorActivity) activity).getSupportFragmentManager();                        </span>
<span class="5106126685052663813" onmouseenter="enter('5106126685052663813');" onmouseout="out('5106126685052663813');" style=""> 294              container = android.R.id.content;                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 295          } else {                                                                                                  </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 296              return;                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 297          }                                                                                                         </span>
<span  style=""> 298                                                                                                                    </span>
<span class="7005732918292981998" onmouseenter="enter('7005732918292981998');" onmouseout="out('7005732918292981998');" style=""> 299          final Bundle bundle = ReviewAccountVerifyEmailFragment.newBundle(hasSentEmail);                           </span>
<span  style=""> 300                                                                                                                    </span>
<span class="3595979510228424567" onmouseenter="enter('3595979510228424567');" onmouseout="out('3595979510228424567');" style=""> 301          new FullScreenDialogFragment.Builder(activity)                                                            </span>
<span class="1707505884861492887" onmouseenter="enter('1707505884861492887');" onmouseout="out('1707505884861492887');" style=""> 302              .setContent(ReviewAccountVerifyEmailFragment.class, bundle)                                           </span>
<span class="-7730204517414597577" onmouseenter="enter('-7730204517414597577');" onmouseout="out('-7730204517414597577');" style=""> 303              .setOnConfirmListener(null)                                                                           </span>
<span class="5374833142702814180" onmouseenter="enter('5374833142702814180');" onmouseout="out('5374833142702814180');" style=""> 304              .setOnDismissListener(null)                                                                           </span>
<span class="7759061789741077424" onmouseenter="enter('7759061789741077424');" onmouseout="out('7759061789741077424');" style=""> 305              .setToolbarElevation(0)                                                                               </span>
<span class="9206956024064176315" onmouseenter="enter('9206956024064176315');" onmouseout="out('9206956024064176315');" style=""> 306              .setViewContainer(container)                                                                          </span>
<span class="3616109827455273093" onmouseenter="enter('3616109827455273093');" onmouseout="out('3616109827455273093');" style=""> 307              .build()                                                                                              </span>
<span class="4065757138376521916" onmouseenter="enter('4065757138376521916');" onmouseout="out('4065757138376521916');" style=""> 308              .show(fragmentManager, FullScreenDialogFragment.TAG);                                                 </span>
<span  style=""> 309                                                                                                                    </span>
<span class="-1389748088792650152" onmouseenter="enter('-1389748088792650152');" onmouseout="out('-1389748088792650152');" style=""> 310          mHasShownReviewOrVerify = true;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 311      }                                                                                                             </span>
<span  style=""> 312                                                                                                                    </span>
<span class="72925131662297315" onmouseenter="enter('72925131662297315');" onmouseout="out('72925131662297315');" style=""><abbr title=" 313      private class ApplicationLifecycleMonitor implements Application.ActivityLifecycleCallbacks, ComponentCallbacks2 {"> 313      private class ApplicationLifecycleMonitor implements Application.ActivityLifecycleCallbacks, ComponentCallbackðŸ”µ</abbr></span>
<span class="3103941996577506651" onmouseenter="enter('3103941996577506651');" onmouseout="out('3103941996577506651');" style=""> 314          // ComponentCallbacks                                                                                     </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 315          @Override                                                                                                 </span>
<span class="2274976836934101801" onmouseenter="enter('2274976836934101801');" onmouseout="out('2274976836934101801');" style=""> 316          public void onTrimMemory(int level) {                                                                     </span>
<span class="-1837603280920501393" onmouseenter="enter('-1837603280920501393');" onmouseout="out('-1837603280920501393');" style=""> 317              if (level == ComponentCallbacks2.TRIM_MEMORY_UI_HIDDEN) {                                             </span>
<span class="-4583313459107718715" onmouseenter="enter('-4583313459107718715');" onmouseout="out('-4583313459107718715');" style=""> 318                  mIsInBackground = true;                                                                           </span>
<span  style=""> 319                                                                                                                    </span>
<span class="-7450229904998226699" onmouseenter="enter('-7450229904998226699');" onmouseout="out('-7450229904998226699');" style=""> 320                  // Give the buckets some time to finish sync, then stop them                                      </span>
<span class="7162501222170899627" onmouseenter="enter('7162501222170899627');" onmouseout="out('7162501222170899627');" style=""> 321                  new Handler().postDelayed(new Runnable() {                                                        </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 322                      @Override                                                                                     </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 323                      public void run() {                                                                           </span>
<span class="1937243434374323959" onmouseenter="enter('1937243434374323959');" onmouseout="out('1937243434374323959');" style=""> 324                          if (!mIsInBackground) {                                                                   </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 325                              return;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 326                          }                                                                                         </span>
<span  style=""> 327                                                                                                                    </span>
<span class="-2200993789662803159" onmouseenter="enter('-2200993789662803159');" onmouseout="out('-2200993789662803159');" style=""> 328                          if (mAccountBucket != null) {                                                             </span>
<span class="1251129820679832423" onmouseenter="enter('1251129820679832423');" onmouseout="out('1251129820679832423');" style=""> 329                              mAccountBucket.stop();                                                                </span>
<span class="3408645548049517244" onmouseenter="enter('3408645548049517244');" onmouseout="out('3408645548049517244');" style=""> 330                              AppLog.add(Type.SYNC, &quot;Stopped account bucket (Simplenote)&quot;);                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 331                          }                                                                                         </span>
<span  style=""> 332                                                                                                                    </span>
<span class="6694920678363305995" onmouseenter="enter('6694920678363305995');" onmouseout="out('6694920678363305995');" style=""> 333                          if (mNotesBucket != null) {                                                               </span>
<span class="-9222421628383802707" onmouseenter="enter('-9222421628383802707');" onmouseout="out('-9222421628383802707');" style=""> 334                              mNotesBucket.stop();                                                                  </span>
<span class="-8256972624868266110" onmouseenter="enter('-8256972624868266110');" onmouseout="out('-8256972624868266110');" style=""> 335                              AppLog.add(Type.SYNC, &quot;Stopped note bucket (Simplenote)&quot;);                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 336                          }                                                                                         </span>
<span  style=""> 337                                                                                                                    </span>
<span class="-6758879846146730703" onmouseenter="enter('-6758879846146730703');" onmouseout="out('-6758879846146730703');" style=""> 338                          if (mTagsBucket != null) {                                                                </span>
<span class="7440275301365041157" onmouseenter="enter('7440275301365041157');" onmouseout="out('7440275301365041157');" style=""> 339                              mTagsBucket.stop();                                                                   </span>
<span class="3632904236952271414" onmouseenter="enter('3632904236952271414');" onmouseout="out('3632904236952271414');" style=""> 340                              AppLog.add(Type.SYNC, &quot;Stopped tag bucket (Simplenote)&quot;);                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 341                          }                                                                                         </span>
<span  style=""> 342                                                                                                                    </span>
<span class="-6192025378026905457" onmouseenter="enter('-6192025378026905457');" onmouseout="out('-6192025378026905457');" style=""> 343                          if (mPreferencesBucket != null) {                                                         </span>
<span class="-7405985386384713994" onmouseenter="enter('-7405985386384713994');" onmouseout="out('-7405985386384713994');" style=""> 344                              mPreferencesBucket.stop();                                                            </span>
<span class="-5651227749650235797" onmouseenter="enter('-5651227749650235797');" onmouseout="out('-5651227749650235797');" style=""> 345                              AppLog.add(Type.SYNC, &quot;Stopped preference bucket (Simplenote)&quot;);                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 346                          }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 347                      }                                                                                             </span>
<span class="6786785065928556607" onmouseenter="enter('6786785065928556607');" onmouseout="out('6786785065928556607');" style=""> 348                  }, TEN_SECONDS_MILLIS);                                                                           </span>
<span  style=""> 349                                                                                                                    </span>
<span class="5599227697513165792" onmouseenter="enter('5599227697513165792');" onmouseout="out('5599227697513165792');" style=""> 350                  PeriodicWorkRequest syncWorkRequest = new PeriodicWorkRequest.Builder(                            </span>
<span class="1408067071873564180" onmouseenter="enter('1408067071873564180');" onmouseout="out('1408067071873564180');" style=""> 351                      SyncWorker.class,                                                                             </span>
<span class="2973406529671611856" onmouseenter="enter('2973406529671611856');" onmouseout="out('2973406529671611856');" style=""> 352                      PeriodicWorkRequest.MIN_PERIODIC_INTERVAL_MILLIS,                                             </span>
<span class="-80463983603518610" onmouseenter="enter('-80463983603518610');" onmouseout="out('-80463983603518610');" style=""> 353                      TimeUnit.MILLISECONDS                                                                         </span>
<span class="-2015476096144723150" onmouseenter="enter('-2015476096144723150');" onmouseout="out('-2015476096144723150');" style=""> 354                  )                                                                                                 </span>
<span class="-6346518985674576590" onmouseenter="enter('-6346518985674576590');" onmouseout="out('-6346518985674576590');" style=""><abbr title=" 355                      .setConstraints(new Constraints.Builder().setRequiredNetworkType(NetworkType.CONNECTED).build())"> 355                      .setConstraints(new Constraints.Builder().setRequiredNetworkType(NetworkType.CONNECTED).build(ðŸ”µ</abbr></span>
<span class="1554687427185788181" onmouseenter="enter('1554687427185788181');" onmouseout="out('1554687427185788181');" style=""> 356                      .setBackoffCriteria(BackoffPolicy.LINEAR, ONE_MINUTE_MILLIS, TimeUnit.MILLISECONDS)           </span>
<span class="1665711086511789732" onmouseenter="enter('1665711086511789732');" onmouseout="out('1665711086511789732');" style=""> 357                      .setInitialDelay(TWENTY_SECONDS_MILLIS, TimeUnit.MILLISECONDS)                                </span>
<span class="8816433673387605168" onmouseenter="enter('8816433673387605168');" onmouseout="out('8816433673387605168');" style=""> 358                      .addTag(TAG_SYNC)                                                                             </span>
<span class="-368814941510255410" onmouseenter="enter('-368814941510255410');" onmouseout="out('-368814941510255410');" style=""> 359                      .build();                                                                                     </span>
<span class="-957289309636137365" onmouseenter="enter('-957289309636137365');" onmouseout="out('-957289309636137365');" style=""> 360                  WorkManager.getInstance(getApplicationContext()).enqueueUniquePeriodicWork(                       </span>
<span class="1890759471518076421" onmouseenter="enter('1890759471518076421');" onmouseout="out('1890759471518076421');" style=""> 361                      TAG_SYNC,                                                                                     </span>
<span class="7031641102110402794" onmouseenter="enter('7031641102110402794');" onmouseout="out('7031641102110402794');" style=""> 362                      ExistingPeriodicWorkPolicy.REPLACE,                                                           </span>
<span class="7844672442552797006" onmouseenter="enter('7844672442552797006');" onmouseout="out('7844672442552797006');" style=""> 363                      syncWorkRequest                                                                               </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 364                  );                                                                                                </span>
<span class="-6272207136493112653" onmouseenter="enter('-6272207136493112653');" onmouseout="out('-6272207136493112653');" style=""> 365                  Log.d(&quot;Simplenote.onTrimMemory&quot;, &quot;Started worker&quot;);                                               </span>
<span  style=""> 366                                                                                                                    </span>
<span class="-341478899160030823" onmouseenter="enter('-341478899160030823');" onmouseout="out('-341478899160030823');" style=""> 367                  // Send analytics if app is in the background                                                     </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 368                  AnalyticsTracker.track(                                                                           </span>
<span class="3485374480742718668" onmouseenter="enter('3485374480742718668');" onmouseout="out('3485374480742718668');" style=""> 369                          AnalyticsTracker.Stat.APPLICATION_CLOSED,                                                 </span>
<span class="3255995284721740364" onmouseenter="enter('3255995284721740364');" onmouseout="out('3255995284721740364');" style=""> 370                          AnalyticsTracker.CATEGORY_USER,                                                           </span>
<span class="3140085526459106828" onmouseenter="enter('3140085526459106828');" onmouseout="out('3140085526459106828');" style=""> 371                          &quot;application_closed&quot;                                                                      </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 372                  );                                                                                                </span>
<span class="-7792835064107422696" onmouseenter="enter('-7792835064107422696');" onmouseout="out('-7792835064107422696');" style=""> 373                  AnalyticsTracker.flush();                                                                         </span>
<span class="-6664472740739433069" onmouseenter="enter('-6664472740739433069');" onmouseout="out('-6664472740739433069');" style=""> 374                  AppLog.add(Type.ACTION, &quot;App closed&quot;);                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 375              } else {                                                                                              </span>
<span class="-6497924770077247329" onmouseenter="enter('-6497924770077247329');" onmouseout="out('-6497924770077247329');" style=""> 376                  mIsInBackground = false;                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 377              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 378          }                                                                                                         </span>
<span  style=""> 379                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 380          @Override                                                                                                 </span>
<span class="6856792358586712593" onmouseenter="enter('6856792358586712593');" onmouseout="out('6856792358586712593');" style=""> 381          public void onConfigurationChanged(@NonNull Configuration newConfig) {                                    </span>
<span class="-671791306218270016" onmouseenter="enter('-671791306218270016');" onmouseout="out('-671791306218270016');" style=""> 382              AppLog.add(Type.LAYOUT, DisplayUtils.getDisplaySizeAndOrientation(Simplenote.this));                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 383          }                                                                                                         </span>
<span  style=""> 384                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 385          @Override                                                                                                 </span>
<span class="-4981664158563918121" onmouseenter="enter('-4981664158563918121');" onmouseout="out('-4981664158563918121');" style=""> 386          public void onLowMemory() {                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 387          }                                                                                                         </span>
<span  style=""> 388                                                                                                                    </span>
<span class="-4597135701451302256" onmouseenter="enter('-4597135701451302256');" onmouseout="out('-4597135701451302256');" style=""> 389          // ActivityLifecycleCallbacks                                                                             </span>
<span class="-9026181668329411137" onmouseenter="enter('-9026181668329411137');" onmouseout="out('-9026181668329411137');" style=""> 390          @SuppressLint(&quot;LongLogTag&quot;)                                                                               </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 391          @Override                                                                                                 </span>
<span class="-3924077821180675166" onmouseenter="enter('-3924077821180675166');" onmouseout="out('-3924077821180675166');" style=""> 392          public void onActivityResumed(@NonNull Activity activity) {                                               </span>
<span class="-1824713474309501961" onmouseenter="enter('-1824713474309501961');" onmouseout="out('-1824713474309501961');" style=""> 393              if (mIsInBackground) {                                                                                </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 394                  AnalyticsTracker.track(                                                                           </span>
<span class="-9053818901097240592" onmouseenter="enter('-9053818901097240592');" onmouseout="out('-9053818901097240592');" style=""> 395                          AnalyticsTracker.Stat.APPLICATION_OPENED,                                                 </span>
<span class="3255995284721740364" onmouseenter="enter('3255995284721740364');" onmouseout="out('3255995284721740364');" style=""> 396                          AnalyticsTracker.CATEGORY_USER,                                                           </span>
<span class="5765105888033949578" onmouseenter="enter('5765105888033949578');" onmouseout="out('5765105888033949578');" style=""> 397                          &quot;application_opened&quot;                                                                      </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 398                  );                                                                                                </span>
<span  style=""> 399                                                                                                                    </span>
<span class="-6497924770077247329" onmouseenter="enter('-6497924770077247329');" onmouseout="out('-6497924770077247329');" style=""> 400                  mIsInBackground = false;                                                                          </span>
<span class="-6333475820451850994" onmouseenter="enter('-6333475820451850994');" onmouseout="out('-6333475820451850994');" style=""> 401                  AppLog.add(Type.ACTION, &quot;App opened&quot;);                                                            </span>
<span class="7194601290059164528" onmouseenter="enter('7194601290059164528');" onmouseout="out('7194601290059164528');" style=""> 402                  WorkManager.getInstance(getApplicationContext()).cancelUniqueWork(TAG_SYNC);                      </span>
<span class="-5838238914207245906" onmouseenter="enter('-5838238914207245906');" onmouseout="out('-5838238914207245906');" style=""> 403                  Log.d(&quot;Simplenote.onActivityResumed&quot;, &quot;Stopped worker&quot;);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 404              }                                                                                                     </span>
<span  style=""> 405                                                                                                                    </span>
<span class="5242495516731300622" onmouseenter="enter('5242495516731300622');" onmouseout="out('5242495516731300622');" style=""> 406              String activitySimpleName = activity.getClass().getSimpleName();                                      </span>
<span  style=""> 407                                                                                                                    </span>
<span class="-8846517571959259873" onmouseenter="enter('-8846517571959259873');" onmouseout="out('-8846517571959259873');" style=""> 408              mAccountBucket.start();                                                                               </span>
<span class="4612815040229921167" onmouseenter="enter('4612815040229921167');" onmouseout="out('4612815040229921167');" style=""> 409              AppLog.add(Type.SYNC, &quot;Started account bucket (&quot; + activitySimpleName + &quot;)&quot;);                         </span>
<span class="8915853447379815980" onmouseenter="enter('8915853447379815980');" onmouseout="out('8915853447379815980');" style=""> 410              mPreferencesBucket.start();                                                                           </span>
<span class="-3539741953604827644" onmouseenter="enter('-3539741953604827644');" onmouseout="out('-3539741953604827644');" style=""> 411              AppLog.add(Type.SYNC, &quot;Started preference bucket (&quot; + activitySimpleName + &quot;)&quot;);                      </span>
<span class="-295722270474880574" onmouseenter="enter('-295722270474880574');" onmouseout="out('-295722270474880574');" style=""> 412              mNotesBucket.start();                                                                                 </span>
<span class="-9002409501487253211" onmouseenter="enter('-9002409501487253211');" onmouseout="out('-9002409501487253211');" style=""> 413              AppLog.add(Type.SYNC, &quot;Started note bucket (&quot; + activitySimpleName + &quot;)&quot;);                            </span>
<span class="-8311192473139463459" onmouseenter="enter('-8311192473139463459');" onmouseout="out('-8311192473139463459');" style=""> 414              mTagsBucket.start();                                                                                  </span>
<span class="2042044416855016901" onmouseenter="enter('2042044416855016901');" onmouseout="out('2042044416855016901');" style=""> 415              AppLog.add(Type.SYNC, &quot;Started tag bucket (&quot; + activitySimpleName + &quot;)&quot;);                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 416          }                                                                                                         </span>
<span  style=""> 417                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 418          @Override                                                                                                 </span>
<span class="3802784276197342934" onmouseenter="enter('3802784276197342934');" onmouseout="out('3802784276197342934');" style=""> 419          public void onActivityCreated(@NonNull Activity activity, Bundle savedInstanceState) {                    </span>
<span class="-8791080748110343619" onmouseenter="enter('-8791080748110343619');" onmouseout="out('-8791080748110343619');" style=""> 420              checkReviewAccountOrVerifyEmail(activity);                                                            </span>

<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 421          }                                                                                                         </span>
<span  style=""> 422                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 423          @Override                                                                                                 </span>
<span class="1925798780581030833" onmouseenter="enter('1925798780581030833');" onmouseout="out('1925798780581030833');" style=""> 424          public void onActivityStarted(@NonNull Activity activity) {                                               </span>

<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 425          }                                                                                                         </span>
<span  style=""> 426                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 427          @Override                                                                                                 </span>
<span class="6762635398346313192" onmouseenter="enter('6762635398346313192');" onmouseout="out('6762635398346313192');" style=""> 428          public void onActivityPaused(@NonNull Activity activity) {                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 429          }                                                                                                         </span>
<span  style=""> 430                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 431          @Override                                                                                                 </span>
<span class="-7982391621651416385" onmouseenter="enter('-7982391621651416385');" onmouseout="out('-7982391621651416385');" style=""> 432          public void onActivityStopped(@NonNull Activity activity) {                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 433          }                                                                                                         </span>
<span  style=""> 434                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 435          @Override                                                                                                 </span>
<span class="2275335402994256657" onmouseenter="enter('2275335402994256657');" onmouseout="out('2275335402994256657');" style=""> 436          public void onActivitySaveInstanceState(@NonNull Activity activity, @NonNull Bundle outState) {           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 437          }                                                                                                         </span>
<span  style=""> 438                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 439          @Override                                                                                                 </span>
<span class="7397501089288945407" onmouseenter="enter('7397501089288945407');" onmouseout="out('7397501089288945407');" style=""> 440          public void onActivityDestroyed(@NonNull Activity activity) {                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 441          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 442      }                                                                                                             </span>
<span  style=""> 443                                                                                                                    </span>
<span class="-8023094567209057938" onmouseenter="enter('-8023094567209057938');" onmouseout="out('-8023094567209057938');" style=""> 444      private class SyncTimePersister implements SyncTimes.SyncTimeListener {                                       </span>
<span class="-8038048970190219255" onmouseenter="enter('-8038048970190219255');" onmouseout="out('-8038048970190219255');" style=""> 445          private final SharedPreferences mPreferences;                                                             </span>
<span  style=""> 446                                                                                                                    </span>
<span class="-5420023059608856786" onmouseenter="enter('-5420023059608856786');" onmouseout="out('-5420023059608856786');" style=""> 447          public SyncTimePersister() {                                                                              </span>
<span class="-1774045212698754392" onmouseenter="enter('-1774045212698754392');" onmouseout="out('-1774045212698754392');" style=""> 448              mPreferences = getSharedPreferences(SYNC_TIME_PREFERENCES, Context.MODE_PRIVATE);                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 449          }                                                                                                         </span>
<span  style=""> 450                                                                                                                    </span>
<span class="5373267673669371854" onmouseenter="enter('5373267673669371854');" onmouseout="out('5373267673669371854');" style=""> 451          public HashMap&lt;String, Calendar&gt; load() {                                                                 </span>
<span class="8617201152557861833" onmouseenter="enter('8617201152557861833');" onmouseout="out('8617201152557861833');" style=""> 452              HashMap&lt;String, Calendar&gt; syncTimes = new HashMap&lt;&gt;();                                                </span>
<span  style=""> 453                                                                                                                    </span>
<span class="4462978973621022506" onmouseenter="enter('4462978973621022506');" onmouseout="out('4462978973621022506');" style=""> 454              //noinspection unchecked                                                                              </span>
<span class="1896092932717377555" onmouseenter="enter('1896092932717377555');" onmouseout="out('1896092932717377555');" style=""> 455              for (Map.Entry&lt;String, Long&gt; syncTime : ((Map&lt;String, Long&gt;) mPreferences.getAll()).entrySet()) {     </span>
<span class="-785210168314593407" onmouseenter="enter('-785210168314593407');" onmouseout="out('-785210168314593407');" style=""> 456                  Calendar instant = Calendar.getInstance();                                                        </span>
<span class="2126061339283800576" onmouseenter="enter('2126061339283800576');" onmouseout="out('2126061339283800576');" style=""> 457                  instant.setTimeInMillis(syncTime.getValue());                                                     </span>
<span class="6843114433125041391" onmouseenter="enter('6843114433125041391');" onmouseout="out('6843114433125041391');" style=""> 458                  syncTimes.put(syncTime.getKey(), instant);                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 459              }                                                                                                     </span>
<span  style=""> 460                                                                                                                    </span>
<span class="7782563231142685256" onmouseenter="enter('7782563231142685256');" onmouseout="out('7782563231142685256');" style=""> 461              return syncTimes;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 462          }                                                                                                         </span>
<span  style=""> 463                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 464          @Override                                                                                                 </span>
<span class="-6287771297506053883" onmouseenter="enter('-6287771297506053883');" onmouseout="out('-6287771297506053883');" style=""> 465          public void onRemove(String entityId) {                                                                   </span>
<span class="2942962400697544803" onmouseenter="enter('2942962400697544803');" onmouseout="out('2942962400697544803');" style=""> 466              mPreferences.edit().remove(entityId).apply();                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 467          }                                                                                                         </span>
<span  style=""> 468                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 469          @Override                                                                                                 </span>
<span class="5435537090917886229" onmouseenter="enter('5435537090917886229');" onmouseout="out('5435537090917886229');" style=""> 470          public void onUpdate(String entityId, Calendar lastSyncTime, boolean isSynced) {                          </span>
<span class="1289918888759771632" onmouseenter="enter('1289918888759771632');" onmouseout="out('1289918888759771632');" style=""> 471              mPreferences.edit().putLong(entityId, lastSyncTime.getTimeInMillis()).apply();                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 472          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 473      }                                                                                                             </span>


















<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 474  }                                                                                                                 </span></pre></td>
                        </tr>
                    </table>
                </div>
              </body>
            </html>
            