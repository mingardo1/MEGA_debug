<!DOCTYPE html>
    <html lang="en">
              <head>
                <meta charset="utf-8">
                <title>146</title>
                    <style>
                        #top {
                            height: 48vh;
                            overflow-y: auto;
                        }
                        #bottom {
                            height: 48vh;
                            overflow-y: auto;
                        }
                        abbr {
                          /* Here is the delay */
                          transition-delay:0s;
                        }
                    </style>
              </head>
              <body>
                <span style="height: 4vh">
                    146
                    <a href="145.html">prev</a>
                    <a href="147.html">next</a>
                    <a href="146_chunks.html">chunks</a>
                    <a href="index.html">index</a>
                    BroadleafCommerce/BroadleafCommerce_eb9f6cb33a94b081f79e2544a1b66941dd4c92ad_common/src/main/java/org/broadleafcommerce/common/util/DependencyLicenseCopy.java
                    <textarea rows=1 onclick='navigator.clipboard.writeText(this.value)'>cd C:\studies\se\mega\git-analyzer-plus\notebooks\debug
del /Q *
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\BroadleafCommerce\BroadleafCommerce show &quot;eb9f6cb33a94b081f79e2544a1b66941dd4c92ad:common/src/main/java/org/broadleafcommerce/common/util/DependencyLicenseCopy.java&quot; &gt; committed.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\BroadleafCommerce\BroadleafCommerce show &quot;eb9f6cb33a94b081f79e2544a1b66941dd4c92ad^1:common/src/main/java/org/broadleafcommerce/common/util/DependencyLicenseCopy.java&quot; &gt; ours.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\BroadleafCommerce\BroadleafCommerce show &quot;eb9f6cb33a94b081f79e2544a1b66941dd4c92ad^2:common/src/main/java/org/broadleafcommerce/common/util/DependencyLicenseCopy.java&quot; &gt; theirs.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\BroadleafCommerce\BroadleafCommerce show &quot;d09b9b2a8021c50bc75b33a8d780992ffde6095a:common/src/main/java/org/broadleafcommerce/common/util/DependencyLicenseCopy.java&quot; &gt; base.java
copy ours.java 1ours.java
copy ours.java 2ours.java
copy theirs.java 1theirs.java
copy theirs.java 2theirs.java
copy base.java 1base.java
copy base.java 2base.java
&quot;C:\Program Files\Java\jdk1.8.0_241\bin\java.exe&quot; -Dfile.encoding=UTF-8 -jar &quot;C:\studies\se\jFSTMerge\build\libs\jFSTMerge-all.jar&quot; C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1ours.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1base.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1theirs.java -o C:\studies\se\mega\git-analyzer-plus\notebooks\debug\jfstmerge.java --show-base
&quot;C:\Program Files\Eclipse Adoptium\jdk-17.0.11.9-hotspot\bin\java.exe&quot; -Dfile.encoding=UTF-8 -jar &quot;C:\studies\se\spork\target\spork-0.5.0-SNAPSHOT.jar&quot; C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2ours.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2base.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2theirs.java -o C:\studies\se\mega\git-analyzer-plus\notebooks\debug\spork.java
del /Q 1*.java
del /Q 2*.java
del /Q jfstmerge.java.merge
</textarea>
                    {strict: [[sbj]], subset: [[sbj]]}
                </span>
                <div id="top">

                    <table>
                        <tr>
                            <th>line based (standard git)</th>
                            <th>jfstmerge</th>
                            <th>spork</th>
                        </tr>
                        <tr>
                            <td><pre>   1 &lt;&lt;&lt;&lt;&lt;&lt;&lt; GitAnalyzerPlus_ours
   2 ||||||| GitAnalyzerPlus_base
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">   3 /*</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">   4  * #%L</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">   5  * BroadleafCommerce Common Libraries</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">   6  * %%</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">   7  * Copyright (C) 2009 - 2016 Broadleaf Commerce</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">   8  * %%</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">   9  * Licensed under the Broadleaf Fair Use License Agreement, Version 1.0</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  10  * (the &quot;Fair Use License&quot; located  at http://license.broadleafcommerce.org/fair_use_license-1.0.txt)</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  11  * unless the restrictions on use therein are violated and require payment to Broadleaf in which case</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  12  * the Broadleaf End User License Agreement (EULA), Version 1.1</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  13  * (the &quot;Commercial License&quot; located at http://license.broadleafcommerce.org/commercial_license-1.1.txt)</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  14  * shall apply.</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  15  * </span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"><abbr title="  16  * Alternatively, the Commercial License may be replaced with a mutually agreed upon license (the &quot;Custom License&quot;)">  16  * Alternatively, the Commercial License may be replaced with a mutually agreed upon license (the &quot;CustomðŸ”µ</abbr></span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"><abbr title="  17  * between you and Broadleaf Commerce. You may not use this file except in compliance with the applicable license.">  17  * between you and Broadleaf Commerce. You may not use this file except in compliance with the applicableðŸ”µ</abbr></span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  18  * #L%</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  19  */</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  20 package org.broadleafcommerce.common.util;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  21 </span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  22 import org.apache.commons.lang.StringUtils;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  23 import org.apache.tools.ant.BuildException;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  24 import org.apache.tools.ant.taskdefs.Copy;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  25 import org.apache.tools.ant.types.Resource;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  26 import org.apache.tools.ant.types.ResourceCollection;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  27 import org.apache.tools.ant.types.resources.FileResource;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  28 </span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  29 import java.io.File;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  30 import java.io.IOException;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  31 import java.util.Iterator;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  32 import java.util.Vector;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  33 </span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  34 public class DependencyLicenseCopy extends Copy {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  35 </span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  36     protected File licenseDir = null;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  37     protected Vector&lt;ResourceCollection&gt; rcs = new Vector&lt;ResourceCollection&gt;();</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  38     </span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  39     @SuppressWarnings(&quot;unchecked&quot;)</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  40     public void execute() throws BuildException {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  41         super.execute();</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  42         try {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  43             for (int i = 0; i &lt; rcs.size(); i++) {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  44                 ResourceCollection rc = (ResourceCollection) rcs.elementAt(i);  </span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  45                 Iterator&lt;Resource&gt; resources = rc.iterator();</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  46                 while (resources.hasNext()) {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  47                     Resource r = (Resource) resources.next();</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  48                     if (!r.isExists()) {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  49                         continue;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  50                     }</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  51                     if (r instanceof FileResource) {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  52                         FileResource fr = (FileResource) r;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  53                         String baseDir = fr.getBaseDir().getAbsolutePath();</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  54                         String file = fr.getFile().getAbsolutePath();</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  55                         file = file.substring(baseDir.length(), file.length());</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  56                         String[] parts = file.split(&quot;/&quot;);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  57                         if (parts.length&lt;=1) {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  58                             parts = file.split(&quot;\\\\&quot;);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  59                         }</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  60                         if (parts.length &lt;= 1) {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"><abbr title="  61                             throw new BuildException(&quot;Unable to recognize the path separator for src file: &quot; + file);">  61                             throw new BuildException(&quot;Unable to recognize the path separator for src fileðŸ”µ</abbr></span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  62                         }</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  63                         String[] specificParts = new String[parts.length-1];</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  64                         System.arraycopy(parts, 0, specificParts, 0, specificParts.length);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  65                         String specificFilePart = StringUtils.join(specificParts, &#x27;/&#x27;) + &quot;/license.txt&quot;;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  66                         File specificFile = new File(licenseDir, specificFilePart);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  67                         File specificDestinationFile = new File(destDir, specificFilePart);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  68                         if (specificFile.exists()) {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  69                             fileUtils.copyFile(specificFile, specificDestinationFile);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  70                             continue;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  71                         }</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  72                         </span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  73                         String[] generalParts = new String[3];</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  74                         System.arraycopy(parts, 0, generalParts, 0, 3);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  75                         String generalFilePart = StringUtils.join(generalParts, &#x27;/&#x27;) + &quot;/license.txt&quot;;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  76                         File generalFile = new File(licenseDir, generalFilePart);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  77                         if (generalFile.exists()) {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  78                             fileUtils.copyFile(generalFile, specificDestinationFile);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  79                             continue;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  80                         }</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  81                         </span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  82                         String[] moreGeneralParts = new String[2];</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  83                         System.arraycopy(parts, 0, moreGeneralParts, 0, 2);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"><abbr title="  84                         String moreGeneralFilePart = StringUtils.join(moreGeneralParts, &#x27;/&#x27;) + &quot;/license.txt&quot;;">  84                         String moreGeneralFilePart = StringUtils.join(moreGeneralParts, &#x27;/&#x27;) + &quot;/license.ðŸ”µ</abbr></span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  85                         File moreGeneralFile = new File(licenseDir, moreGeneralFilePart);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  86                         if (moreGeneralFile.exists()) {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  87                             fileUtils.copyFile(moreGeneralFile, specificDestinationFile);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  88                         }</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  89                     }</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  90                 }</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  91             }</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  92         } catch (IOException e) {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  93             throw new BuildException(e);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  94         }</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  95     }</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  96     </span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  97     public void add(ResourceCollection res) {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  98         super.add(res);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  99         rcs.add(res);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 100     }</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 101 </span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 102     public File getLicenseDir() {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 103         return licenseDir;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 104     }</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 105 </span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 106     public void setLicenseDir(File licenseDir) {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 107         this.licenseDir = licenseDir;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 108     }</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 109 }</span>
 110 =======
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 111 /*-</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 112  * #%L</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 113  * BroadleafCommerce Common Libraries</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 114  * %%</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 115  * Copyright (C) 2009 - 2022 Broadleaf Commerce</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 116  * %%</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 117  * Licensed under the Broadleaf Fair Use License Agreement, Version 1.0</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 118  * (the &quot;Fair Use License&quot; located  at http://license.broadleafcommerce.org/fair_use_license-1.0.txt)</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 119  * unless the restrictions on use therein are violated and require payment to Broadleaf in which case</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 120  * the Broadleaf End User License Agreement (EULA), Version 1.1</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 121  * (the &quot;Commercial License&quot; located at http://license.broadleafcommerce.org/commercial_license-1.1.txt)</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 122  * shall apply.</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 123  * </span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"><abbr title=" 124  * Alternatively, the Commercial License may be replaced with a mutually agreed upon license (the &quot;Custom License&quot;)"> 124  * Alternatively, the Commercial License may be replaced with a mutually agreed upon license (the &quot;CustomðŸ”µ</abbr></span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"><abbr title=" 125  * between you and Broadleaf Commerce. You may not use this file except in compliance with the applicable license."> 125  * between you and Broadleaf Commerce. You may not use this file except in compliance with the applicableðŸ”µ</abbr></span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 126  * #L%</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 127  */</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 128 package org.broadleafcommerce.common.util;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 129 </span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 130 import org.apache.commons.lang.StringUtils;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 131 import org.apache.tools.ant.BuildException;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 132 import org.apache.tools.ant.taskdefs.Copy;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 133 import org.apache.tools.ant.types.Resource;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 134 import org.apache.tools.ant.types.ResourceCollection;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 135 import org.apache.tools.ant.types.resources.FileResource;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 136 </span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 137 import java.io.File;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 138 import java.io.IOException;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 139 import java.util.Iterator;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 140 import java.util.Vector;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 141 </span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 142 public class DependencyLicenseCopy extends Copy {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 143 </span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 144     protected File licenseDir = null;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 145     protected Vector&lt;ResourceCollection&gt; rcs = new Vector&lt;ResourceCollection&gt;();</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 146     </span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 147     @SuppressWarnings(&quot;unchecked&quot;)</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 148     public void execute() throws BuildException {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 149         super.execute();</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 150         try {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 151             for (int i = 0; i &lt; rcs.size(); i++) {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 152                 ResourceCollection rc = (ResourceCollection) rcs.elementAt(i);  </span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 153                 Iterator&lt;Resource&gt; resources = rc.iterator();</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 154                 while (resources.hasNext()) {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 155                     Resource r = (Resource) resources.next();</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 156                     if (!r.isExists()) {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 157                         continue;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 158                     }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 159                     if (r instanceof FileResource) {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 160                         FileResource fr = (FileResource) r;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 161                         String baseDir = fr.getBaseDir().getAbsolutePath();</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 162                         String file = fr.getFile().getAbsolutePath();</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 163                         file = file.substring(baseDir.length(), file.length());</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 164                         String[] parts = file.split(&quot;/&quot;);</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 165                         if (parts.length&lt;=1) {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 166                             parts = file.split(&quot;\\\\&quot;);</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 167                         }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 168                         if (parts.length &lt;= 1) {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"><abbr title=" 169                             throw new BuildException(&quot;Unable to recognize the path separator for src file: &quot; + file);"> 169                             throw new BuildException(&quot;Unable to recognize the path separator for src fileðŸ”µ</abbr></span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 170                         }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 171                         String[] specificParts = new String[parts.length-1];</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 172                         System.arraycopy(parts, 0, specificParts, 0, specificParts.length);</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 173                         String specificFilePart = StringUtils.join(specificParts, &#x27;/&#x27;) + &quot;/license.txt&quot;;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 174                         File specificFile = new File(licenseDir, specificFilePart);</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 175                         File specificDestinationFile = new File(destDir, specificFilePart);</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 176                         if (specificFile.exists()) {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 177                             fileUtils.copyFile(specificFile, specificDestinationFile);</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 178                             continue;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 179                         }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 180                         </span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 181                         String[] generalParts = new String[3];</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 182                         System.arraycopy(parts, 0, generalParts, 0, 3);</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 183                         String generalFilePart = StringUtils.join(generalParts, &#x27;/&#x27;) + &quot;/license.txt&quot;;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 184                         File generalFile = new File(licenseDir, generalFilePart);</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 185                         if (generalFile.exists()) {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 186                             fileUtils.copyFile(generalFile, specificDestinationFile);</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 187                             continue;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 188                         }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 189                         </span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 190                         String[] moreGeneralParts = new String[2];</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 191                         System.arraycopy(parts, 0, moreGeneralParts, 0, 2);</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"><abbr title=" 192                         String moreGeneralFilePart = StringUtils.join(moreGeneralParts, &#x27;/&#x27;) + &quot;/license.txt&quot;;"> 192                         String moreGeneralFilePart = StringUtils.join(moreGeneralParts, &#x27;/&#x27;) + &quot;/license.ðŸ”µ</abbr></span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 193                         File moreGeneralFile = new File(licenseDir, moreGeneralFilePart);</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 194                         if (moreGeneralFile.exists()) {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 195                             fileUtils.copyFile(moreGeneralFile, specificDestinationFile);</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 196                         }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 197                     }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 198                 }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 199             }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 200         } catch (IOException e) {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 201             throw new BuildException(e);</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 202         }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 203     }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 204     </span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 205     public void add(ResourceCollection res) {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 206         super.add(res);</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 207         rcs.add(res);</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 208     }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 209 </span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 210     public File getLicenseDir() {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 211         return licenseDir;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 212     }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 213 </span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 214     public void setLicenseDir(File licenseDir) {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 215         this.licenseDir = licenseDir;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 216     }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 217 }</span>
 218 &gt;&gt;&gt;&gt;&gt;&gt;&gt; GitAnalyzerPlus_theirs</pre></td>
                            <td><pre>   1 &lt;&lt;&lt;&lt;&lt;&lt;&lt; MINE
   2 ||||||| BASE
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">   3 /*</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">   4  * #%L</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">   5  * BroadleafCommerce Common Libraries</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">   6  * %%</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">   7  * Copyright (C) 2009 - 2016 Broadleaf Commerce</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">   8  * %%</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">   9  * Licensed under the Broadleaf Fair Use License Agreement, Version 1.0</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  10  * (the &quot;Fair Use License&quot; located  at http://license.broadleafcommerce.org/fair_use_license-1.0.txt)</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  11  * unless the restrictions on use therein are violated and require payment to Broadleaf in which case</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  12  * the Broadleaf End User License Agreement (EULA), Version 1.1</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  13  * (the &quot;Commercial License&quot; located at http://license.broadleafcommerce.org/commercial_license-1.1.txt)</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  14  * shall apply.</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  15  *</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"><abbr title="  16  * Alternatively, the Commercial License may be replaced with a mutually agreed upon license (the &quot;Custom License&quot;)">  16  * Alternatively, the Commercial License may be replaced with a mutually agreed upon license (the &quot;CustomðŸ”µ</abbr></span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"><abbr title="  17  * between you and Broadleaf Commerce. You may not use this file except in compliance with the applicable license.">  17  * between you and Broadleaf Commerce. You may not use this file except in compliance with the applicableðŸ”µ</abbr></span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  18  * #L%</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  19  */</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  20 package org.broadleafcommerce.common.util;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  21 </span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  22 import org.apache.commons.lang.StringUtils;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  23 import org.apache.tools.ant.BuildException;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  24 import org.apache.tools.ant.taskdefs.Copy;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  25 import org.apache.tools.ant.types.Resource;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  26 import org.apache.tools.ant.types.ResourceCollection;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  27 import org.apache.tools.ant.types.resources.FileResource;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  28 </span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  29 import java.io.File;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  30 import java.io.IOException;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  31 import java.util.Iterator;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  32 import java.util.Vector;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  33 </span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  34 public class DependencyLicenseCopy extends Copy {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  35 </span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  36     protected File licenseDir = null;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  37     protected Vector&lt;ResourceCollection&gt; rcs = new Vector&lt;ResourceCollection&gt;();</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  38 </span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  39     @SuppressWarnings(&quot;unchecked&quot;)</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  40     public void execute() throws BuildException {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  41         super.execute();</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  42         try {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  43             for (int i = 0; i &lt; rcs.size(); i++) {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  44                 ResourceCollection rc = (ResourceCollection) rcs.elementAt(i);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  45                 Iterator&lt;Resource&gt; resources = rc.iterator();</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  46                 while (resources.hasNext()) {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  47                     Resource r = (Resource) resources.next();</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  48                     if (!r.isExists()) {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  49                         continue;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  50                     }</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  51                     if (r instanceof FileResource) {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  52                         FileResource fr = (FileResource) r;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  53                         String baseDir = fr.getBaseDir().getAbsolutePath();</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  54                         String file = fr.getFile().getAbsolutePath();</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  55                         file = file.substring(baseDir.length(), file.length());</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  56                         String[] parts = file.split(&quot;/&quot;);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  57                         if (parts.length&lt;=1) {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  58                             parts = file.split(&quot;\\\\&quot;);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  59                         }</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  60                         if (parts.length &lt;= 1) {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"><abbr title="  61                             throw new BuildException(&quot;Unable to recognize the path separator for src file: &quot; + file);">  61                             throw new BuildException(&quot;Unable to recognize the path separator for src fileðŸ”µ</abbr></span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  62                         }</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  63                         String[] specificParts = new String[parts.length-1];</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  64                         System.arraycopy(parts, 0, specificParts, 0, specificParts.length);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  65                         String specificFilePart = StringUtils.join(specificParts, &#x27;/&#x27;) + &quot;/license.txt&quot;;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  66                         File specificFile = new File(licenseDir, specificFilePart);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  67                         File specificDestinationFile = new File(destDir, specificFilePart);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  68                         if (specificFile.exists()) {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  69                             fileUtils.copyFile(specificFile, specificDestinationFile);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  70                             continue;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  71                         }</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  72 </span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  73                         String[] generalParts = new String[3];</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  74                         System.arraycopy(parts, 0, generalParts, 0, 3);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  75                         String generalFilePart = StringUtils.join(generalParts, &#x27;/&#x27;) + &quot;/license.txt&quot;;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  76                         File generalFile = new File(licenseDir, generalFilePart);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  77                         if (generalFile.exists()) {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  78                             fileUtils.copyFile(generalFile, specificDestinationFile);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  79                             continue;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  80                         }</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  81 </span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  82                         String[] moreGeneralParts = new String[2];</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  83                         System.arraycopy(parts, 0, moreGeneralParts, 0, 2);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"><abbr title="  84                         String moreGeneralFilePart = StringUtils.join(moreGeneralParts, &#x27;/&#x27;) + &quot;/license.txt&quot;;">  84                         String moreGeneralFilePart = StringUtils.join(moreGeneralParts, &#x27;/&#x27;) + &quot;/license.ðŸ”µ</abbr></span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  85                         File moreGeneralFile = new File(licenseDir, moreGeneralFilePart);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  86                         if (moreGeneralFile.exists()) {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  87                             fileUtils.copyFile(moreGeneralFile, specificDestinationFile);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  88                         }</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  89                     }</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  90                 }</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  91             }</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  92         } catch (IOException e) {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  93             throw new BuildException(e);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  94         }</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  95     }</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  96 </span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  97     public void add(ResourceCollection res) {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  98         super.add(res);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  99         rcs.add(res);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 100     }</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 101 </span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 102     public File getLicenseDir() {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 103         return licenseDir;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 104     }</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 105 </span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 106     public void setLicenseDir(File licenseDir) {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 107         this.licenseDir = licenseDir;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 108     }</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 109 }</span>
 110 =======
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 111 /*-</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 112  * #%L</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 113  * BroadleafCommerce Common Libraries</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 114  * %%</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 115  * Copyright (C) 2009 - 2022 Broadleaf Commerce</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 116  * %%</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 117  * Licensed under the Broadleaf Fair Use License Agreement, Version 1.0</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 118  * (the &quot;Fair Use License&quot; located  at http://license.broadleafcommerce.org/fair_use_license-1.0.txt)</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 119  * unless the restrictions on use therein are violated and require payment to Broadleaf in which case</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 120  * the Broadleaf End User License Agreement (EULA), Version 1.1</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 121  * (the &quot;Commercial License&quot; located at http://license.broadleafcommerce.org/commercial_license-1.1.txt)</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 122  * shall apply.</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 123  *</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"><abbr title=" 124  * Alternatively, the Commercial License may be replaced with a mutually agreed upon license (the &quot;Custom License&quot;)"> 124  * Alternatively, the Commercial License may be replaced with a mutually agreed upon license (the &quot;CustomðŸ”µ</abbr></span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"><abbr title=" 125  * between you and Broadleaf Commerce. You may not use this file except in compliance with the applicable license."> 125  * between you and Broadleaf Commerce. You may not use this file except in compliance with the applicableðŸ”µ</abbr></span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 126  * #L%</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 127  */</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 128 package org.broadleafcommerce.common.util;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 129 </span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 130 import org.apache.commons.lang.StringUtils;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 131 import org.apache.tools.ant.BuildException;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 132 import org.apache.tools.ant.taskdefs.Copy;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 133 import org.apache.tools.ant.types.Resource;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 134 import org.apache.tools.ant.types.ResourceCollection;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 135 import org.apache.tools.ant.types.resources.FileResource;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 136 </span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 137 import java.io.File;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 138 import java.io.IOException;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 139 import java.util.Iterator;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 140 import java.util.Vector;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 141 </span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 142 public class DependencyLicenseCopy extends Copy {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 143 </span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 144     protected File licenseDir = null;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 145     protected Vector&lt;ResourceCollection&gt; rcs = new Vector&lt;ResourceCollection&gt;();</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 146 </span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 147     @SuppressWarnings(&quot;unchecked&quot;)</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 148     public void execute() throws BuildException {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 149         super.execute();</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 150         try {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 151             for (int i = 0; i &lt; rcs.size(); i++) {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 152                 ResourceCollection rc = (ResourceCollection) rcs.elementAt(i);</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 153                 Iterator&lt;Resource&gt; resources = rc.iterator();</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 154                 while (resources.hasNext()) {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 155                     Resource r = (Resource) resources.next();</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 156                     if (!r.isExists()) {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 157                         continue;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 158                     }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 159                     if (r instanceof FileResource) {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 160                         FileResource fr = (FileResource) r;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 161                         String baseDir = fr.getBaseDir().getAbsolutePath();</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 162                         String file = fr.getFile().getAbsolutePath();</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 163                         file = file.substring(baseDir.length(), file.length());</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 164                         String[] parts = file.split(&quot;/&quot;);</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 165                         if (parts.length&lt;=1) {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 166                             parts = file.split(&quot;\\\\&quot;);</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 167                         }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 168                         if (parts.length &lt;= 1) {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"><abbr title=" 169                             throw new BuildException(&quot;Unable to recognize the path separator for src file: &quot; + file);"> 169                             throw new BuildException(&quot;Unable to recognize the path separator for src fileðŸ”µ</abbr></span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 170                         }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 171                         String[] specificParts = new String[parts.length-1];</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 172                         System.arraycopy(parts, 0, specificParts, 0, specificParts.length);</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 173                         String specificFilePart = StringUtils.join(specificParts, &#x27;/&#x27;) + &quot;/license.txt&quot;;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 174                         File specificFile = new File(licenseDir, specificFilePart);</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 175                         File specificDestinationFile = new File(destDir, specificFilePart);</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 176                         if (specificFile.exists()) {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 177                             fileUtils.copyFile(specificFile, specificDestinationFile);</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 178                             continue;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 179                         }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 180 </span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 181                         String[] generalParts = new String[3];</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 182                         System.arraycopy(parts, 0, generalParts, 0, 3);</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 183                         String generalFilePart = StringUtils.join(generalParts, &#x27;/&#x27;) + &quot;/license.txt&quot;;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 184                         File generalFile = new File(licenseDir, generalFilePart);</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 185                         if (generalFile.exists()) {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 186                             fileUtils.copyFile(generalFile, specificDestinationFile);</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 187                             continue;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 188                         }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 189 </span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 190                         String[] moreGeneralParts = new String[2];</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 191                         System.arraycopy(parts, 0, moreGeneralParts, 0, 2);</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"><abbr title=" 192                         String moreGeneralFilePart = StringUtils.join(moreGeneralParts, &#x27;/&#x27;) + &quot;/license.txt&quot;;"> 192                         String moreGeneralFilePart = StringUtils.join(moreGeneralParts, &#x27;/&#x27;) + &quot;/license.ðŸ”µ</abbr></span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 193                         File moreGeneralFile = new File(licenseDir, moreGeneralFilePart);</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 194                         if (moreGeneralFile.exists()) {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 195                             fileUtils.copyFile(moreGeneralFile, specificDestinationFile);</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 196                         }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 197                     }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 198                 }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 199             }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 200         } catch (IOException e) {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 201             throw new BuildException(e);</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 202         }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 203     }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 204 </span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 205     public void add(ResourceCollection res) {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 206         super.add(res);</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 207         rcs.add(res);</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 208     }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 209 </span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 210     public File getLicenseDir() {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 211         return licenseDir;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 212     }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 213 </span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 214     public void setLicenseDir(File licenseDir) {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 215         this.licenseDir = licenseDir;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 216     }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 217 }</span>
 218 &gt;&gt;&gt;&gt;&gt;&gt;&gt; YOURS</pre></td>
                            <td><pre>   1 &lt;&lt;&lt;&lt;&lt;&lt;&lt; LEFT
   2 ||||||| BASE
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"><abbr title="   3 /*d94z9sk0k4hf9j3ijd - note the base isn&#x27;t actually empty, spork simply doesn&#x27;t generate a base - gd930kwohrp23k5b6vdk93d3r*/">   3 /*d94z9sk0k4hf9j3ijd - note the base isn&#x27;t actually empty, spork simply doesn&#x27;t generate a base - gd930kwðŸ”µ</abbr></span>
   4 =======
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">   5 </span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">   6 /*-</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">   7  * #%L</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">   8  * BroadleafCommerce Common Libraries</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">   9  * %%</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  10  * Copyright (C) 2009 - 2022 Broadleaf Commerce</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  11  * %%</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  12  * Licensed under the Broadleaf Fair Use License Agreement, Version 1.0</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  13  * (the &quot;Fair Use License&quot; located  at http://license.broadleafcommerce.org/fair_use_license-1.0.txt)</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  14  * unless the restrictions on use therein are violated and require payment to Broadleaf in which case</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  15  * the Broadleaf End User License Agreement (EULA), Version 1.1</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  16  * (the &quot;Commercial License&quot; located at http://license.broadleafcommerce.org/commercial_license-1.1.txt)</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  17  * shall apply.</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  18  *</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"><abbr title="  19  * Alternatively, the Commercial License may be replaced with a mutually agreed upon license (the &quot;Custom License&quot;)">  19  * Alternatively, the Commercial License may be replaced with a mutually agreed upon license (the &quot;CustomðŸ”µ</abbr></span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"><abbr title="  20  * between you and Broadleaf Commerce. You may not use this file except in compliance with the applicable license.">  20  * between you and Broadleaf Commerce. You may not use this file except in compliance with the applicableðŸ”µ</abbr></span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  21  * #L%</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  22  */</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  23 package org.broadleafcommerce.common.util;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  24 </span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  25 import org.apache.commons.lang.StringUtils;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  26 import org.apache.tools.ant.BuildException;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  27 import org.apache.tools.ant.taskdefs.Copy;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  28 import org.apache.tools.ant.types.Resource;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  29 import org.apache.tools.ant.types.ResourceCollection;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  30 import org.apache.tools.ant.types.resources.FileResource;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  31 </span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  32 import java.io.File;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  33 import java.io.IOException;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  34 import java.util.Iterator;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  35 import java.util.Vector;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  36 </span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  37 public class DependencyLicenseCopy extends Copy {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  38 </span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  39     protected File licenseDir = null;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  40     protected Vector&lt;ResourceCollection&gt; rcs = new Vector&lt;ResourceCollection&gt;();</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  41 </span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  42     @SuppressWarnings(&quot;unchecked&quot;)</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  43     public void execute() throws BuildException {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  44         super.execute();</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  45         try {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  46             for (int i = 0; i &lt; rcs.size(); i++) {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  47                 ResourceCollection rc = (ResourceCollection) rcs.elementAt(i);</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  48                 Iterator&lt;Resource&gt; resources = rc.iterator();</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  49                 while (resources.hasNext()) {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  50                     Resource r = (Resource) resources.next();</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  51                     if (!r.isExists()) {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  52                         continue;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  53                     }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  54                     if (r instanceof FileResource) {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  55                         FileResource fr = (FileResource) r;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  56                         String baseDir = fr.getBaseDir().getAbsolutePath();</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  57                         String file = fr.getFile().getAbsolutePath();</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  58                         file = file.substring(baseDir.length(), file.length());</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  59                         String[] parts = file.split(&quot;/&quot;);</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  60                         if (parts.length&lt;=1) {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  61                             parts = file.split(&quot;\\\\&quot;);</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  62                         }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  63                         if (parts.length &lt;= 1) {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"><abbr title="  64                             throw new BuildException(&quot;Unable to recognize the path separator for src file: &quot; + file);">  64                             throw new BuildException(&quot;Unable to recognize the path separator for src fileðŸ”µ</abbr></span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  65                         }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  66                         String[] specificParts = new String[parts.length-1];</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  67                         System.arraycopy(parts, 0, specificParts, 0, specificParts.length);</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  68                         String specificFilePart = StringUtils.join(specificParts, &#x27;/&#x27;) + &quot;/license.txt&quot;;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  69                         File specificFile = new File(licenseDir, specificFilePart);</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  70                         File specificDestinationFile = new File(destDir, specificFilePart);</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  71                         if (specificFile.exists()) {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  72                             fileUtils.copyFile(specificFile, specificDestinationFile);</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  73                             continue;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  74                         }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  75 </span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  76                         String[] generalParts = new String[3];</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  77                         System.arraycopy(parts, 0, generalParts, 0, 3);</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  78                         String generalFilePart = StringUtils.join(generalParts, &#x27;/&#x27;) + &quot;/license.txt&quot;;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  79                         File generalFile = new File(licenseDir, generalFilePart);</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  80                         if (generalFile.exists()) {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  81                             fileUtils.copyFile(generalFile, specificDestinationFile);</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  82                             continue;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  83                         }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  84 </span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  85                         String[] moreGeneralParts = new String[2];</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  86                         System.arraycopy(parts, 0, moreGeneralParts, 0, 2);</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"><abbr title="  87                         String moreGeneralFilePart = StringUtils.join(moreGeneralParts, &#x27;/&#x27;) + &quot;/license.txt&quot;;">  87                         String moreGeneralFilePart = StringUtils.join(moreGeneralParts, &#x27;/&#x27;) + &quot;/license.ðŸ”µ</abbr></span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  88                         File moreGeneralFile = new File(licenseDir, moreGeneralFilePart);</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  89                         if (moreGeneralFile.exists()) {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  90                             fileUtils.copyFile(moreGeneralFile, specificDestinationFile);</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  91                         }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  92                     }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  93                 }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  94             }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  95         } catch (IOException e) {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  96             throw new BuildException(e);</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  97         }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  98     }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  99 </span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 100     public void add(ResourceCollection res) {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 101         super.add(res);</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 102         rcs.add(res);</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 103     }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 104 </span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 105     public File getLicenseDir() {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 106         return licenseDir;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 107     }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 108 </span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 109     public void setLicenseDir(File licenseDir) {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 110         this.licenseDir = licenseDir;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 111     }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 112 }</span>
 113 &gt;&gt;&gt;&gt;&gt;&gt;&gt; RIGHT
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 </pre></td>
                        </tr>
                    </table>
                </div>
                <div id="bottom">
                    <table style="margin:auto">
                        <tr>
                            <th>ours vs. base</th>
                            <th>theirs vs. base</th>
                        </tr>
                        <tr>
                            <td><pre><span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">   1 -/*</span>

<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">   2 - * #%L</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">   3 - * BroadleafCommerce Common Libraries</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">   4 - * %%</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">   5 - * Copyright (C) 2009 - 2016 Broadleaf Commerce</span>

<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">   6 - * %%</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">   7 - * Licensed under the Broadleaf Fair Use License Agreement, Version 1.0</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">   8 - * (the &quot;Fair Use License&quot; located  at http://license.broadleafcommerce.org/fair_use_license-1.0.txt)</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">   9 - * unless the restrictions on use therein are violated and require payment to Broadleaf in which case</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  10 - * the Broadleaf End User License Agreement (EULA), Version 1.1</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  11 - * (the &quot;Commercial License&quot; located at http://license.broadleafcommerce.org/commercial_license-1.1.txt)</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  12 - * shall apply.</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  13 - *</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"><abbr title="  14 - * Alternatively, the Commercial License may be replaced with a mutually agreed upon license (the &quot;Custom License&quot;)">  14 - * Alternatively, the Commercial License may be replaced with a mutually agreed upon license (the &quot;Custom License&quot;ðŸ”µ</abbr></span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  15 - * between you and Broadleaf Commerce. You may not use this file except in compliance with the applicable license.</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  16 - * #L%</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  17 - */</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  18 -package org.broadleafcommerce.common.util;</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  19 -</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  20 -import org.apache.commons.lang.StringUtils;</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  21 -import org.apache.tools.ant.BuildException;</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  22 -import org.apache.tools.ant.taskdefs.Copy;</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  23 -import org.apache.tools.ant.types.Resource;</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  24 -import org.apache.tools.ant.types.ResourceCollection;</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  25 -import org.apache.tools.ant.types.resources.FileResource;</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  26 -</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  27 -import java.io.File;</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  28 -import java.io.IOException;</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  29 -import java.util.Iterator;</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  30 -import java.util.Vector;</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  31 -</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  32 -public class DependencyLicenseCopy extends Copy {</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  33 -</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  34 -    protected File licenseDir = null;</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  35 -    protected Vector&lt;ResourceCollection&gt; rcs = new Vector&lt;ResourceCollection&gt;();</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  36 -</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  37 -    @SuppressWarnings(&quot;unchecked&quot;)</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  38 -    public void execute() throws BuildException {</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  39 -        super.execute();</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  40 -        try {</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  41 -            for (int i = 0; i &lt; rcs.size(); i++) {</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  42 -                ResourceCollection rc = (ResourceCollection) rcs.elementAt(i);</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  43 -                Iterator&lt;Resource&gt; resources = rc.iterator();</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  44 -                while (resources.hasNext()) {</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  45 -                    Resource r = (Resource) resources.next();</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  46 -                    if (!r.isExists()) {</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  47 -                        continue;</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  48 -                    }</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  49 -                    if (r instanceof FileResource) {</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  50 -                        FileResource fr = (FileResource) r;</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  51 -                        String baseDir = fr.getBaseDir().getAbsolutePath();</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  52 -                        String file = fr.getFile().getAbsolutePath();</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  53 -                        file = file.substring(baseDir.length(), file.length());</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  54 -                        String[] parts = file.split(&quot;/&quot;);</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  55 -                        if (parts.length&lt;=1) {</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  56 -                            parts = file.split(&quot;\\\\&quot;);</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  57 -                        }</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  58 -                        if (parts.length &lt;= 1) {</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"><abbr title="  59 -                            throw new BuildException(&quot;Unable to recognize the path separator for src file: &quot; + file);">  59 -                            throw new BuildException(&quot;Unable to recognize the path separator for src file: &quot; + filðŸ”µ</abbr></span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  60 -                        }</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  61 -                        String[] specificParts = new String[parts.length-1];</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  62 -                        System.arraycopy(parts, 0, specificParts, 0, specificParts.length);</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  63 -                        String specificFilePart = StringUtils.join(specificParts, &#x27;/&#x27;) + &quot;/license.txt&quot;;</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  64 -                        File specificFile = new File(licenseDir, specificFilePart);</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  65 -                        File specificDestinationFile = new File(destDir, specificFilePart);</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  66 -                        if (specificFile.exists()) {</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  67 -                            fileUtils.copyFile(specificFile, specificDestinationFile);</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  68 -                            continue;</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  69 -                        }</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  70 -</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  71 -                        String[] generalParts = new String[3];</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  72 -                        System.arraycopy(parts, 0, generalParts, 0, 3);</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  73 -                        String generalFilePart = StringUtils.join(generalParts, &#x27;/&#x27;) + &quot;/license.txt&quot;;</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  74 -                        File generalFile = new File(licenseDir, generalFilePart);</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  75 -                        if (generalFile.exists()) {</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  76 -                            fileUtils.copyFile(generalFile, specificDestinationFile);</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  77 -                            continue;</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  78 -                        }</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  79 -</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  80 -                        String[] moreGeneralParts = new String[2];</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  81 -                        System.arraycopy(parts, 0, moreGeneralParts, 0, 2);</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  82 -                        String moreGeneralFilePart = StringUtils.join(moreGeneralParts, &#x27;/&#x27;) + &quot;/license.txt&quot;;</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  83 -                        File moreGeneralFile = new File(licenseDir, moreGeneralFilePart);</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  84 -                        if (moreGeneralFile.exists()) {</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  85 -                            fileUtils.copyFile(moreGeneralFile, specificDestinationFile);</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  86 -                        }</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  87 -                    }</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  88 -                }</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  89 -            }</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  90 -        } catch (IOException e) {</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  91 -            throw new BuildException(e);</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  92 -        }</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  93 -    }</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  94 -</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  95 -    public void add(ResourceCollection res) {</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  96 -        super.add(res);</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  97 -        rcs.add(res);</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  98 -    }</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  99 -</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 100 -    public File getLicenseDir() {</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 101 -        return licenseDir;</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 102 -    }</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 103 -</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 104 -    public void setLicenseDir(File licenseDir) {</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 105 -        this.licenseDir = licenseDir;</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 106 -    }</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 107 -}</span></pre></td>
                            <td><pre><span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">   1 -/*</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0">   2 +/*-</span>
   3   * #%L
   4   * BroadleafCommerce Common Libraries
   5   * %%
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">   6 - * Copyright (C) 2009 - 2016 Broadleaf Commerce</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0">   7 + * Copyright (C) 2009 - 2022 Broadleaf Commerce</span>
   8   * %%
   9   * Licensed under the Broadleaf Fair Use License Agreement, Version 1.0
  10   * (the &quot;Fair Use License&quot; located  at http://license.broadleafcommerce.org/fair_use_license-1.0.txt)
  11   * unless the restrictions on use therein are violated and require payment to Broadleaf in which case
  12   * the Broadleaf End User License Agreement (EULA), Version 1.1
  13   * (the &quot;Commercial License&quot; located at http://license.broadleafcommerce.org/commercial_license-1.1.txt)
  14   * shall apply.
  15   *
<abbr title="  16   * Alternatively, the Commercial License may be replaced with a mutually agreed upon license (the &quot;Custom License&quot;)">  16   * Alternatively, the Commercial License may be replaced with a mutually agreed upon license (the &quot;Custom License&quot;ðŸ”µ</abbr>
  17   * between you and Broadleaf Commerce. You may not use this file except in compliance with the applicable license.
  18   * #L%
  19   */
  20  package org.broadleafcommerce.common.util;
  21  
  22  import org.apache.commons.lang.StringUtils;
  23  import org.apache.tools.ant.BuildException;
  24  import org.apache.tools.ant.taskdefs.Copy;
  25  import org.apache.tools.ant.types.Resource;
  26  import org.apache.tools.ant.types.ResourceCollection;
  27  import org.apache.tools.ant.types.resources.FileResource;
  28  
  29  import java.io.File;
  30  import java.io.IOException;
  31  import java.util.Iterator;
  32  import java.util.Vector;
  33  
  34  public class DependencyLicenseCopy extends Copy {
  35  
  36      protected File licenseDir = null;
  37      protected Vector&lt;ResourceCollection&gt; rcs = new Vector&lt;ResourceCollection&gt;();
  38  
  39      @SuppressWarnings(&quot;unchecked&quot;)
  40      public void execute() throws BuildException {
  41          super.execute();
  42          try {
  43              for (int i = 0; i &lt; rcs.size(); i++) {
  44                  ResourceCollection rc = (ResourceCollection) rcs.elementAt(i);
  45                  Iterator&lt;Resource&gt; resources = rc.iterator();
  46                  while (resources.hasNext()) {
  47                      Resource r = (Resource) resources.next();
  48                      if (!r.isExists()) {
  49                          continue;
  50                      }
  51                      if (r instanceof FileResource) {
  52                          FileResource fr = (FileResource) r;
  53                          String baseDir = fr.getBaseDir().getAbsolutePath();
  54                          String file = fr.getFile().getAbsolutePath();
  55                          file = file.substring(baseDir.length(), file.length());
  56                          String[] parts = file.split(&quot;/&quot;);
  57                          if (parts.length&lt;=1) {
  58                              parts = file.split(&quot;\\\\&quot;);
  59                          }
  60                          if (parts.length &lt;= 1) {
<abbr title="  61                              throw new BuildException(&quot;Unable to recognize the path separator for src file: &quot; + file);">  61                              throw new BuildException(&quot;Unable to recognize the path separator for src file: &quot; + filðŸ”µ</abbr>
  62                          }
  63                          String[] specificParts = new String[parts.length-1];
  64                          System.arraycopy(parts, 0, specificParts, 0, specificParts.length);
  65                          String specificFilePart = StringUtils.join(specificParts, &#x27;/&#x27;) + &quot;/license.txt&quot;;
  66                          File specificFile = new File(licenseDir, specificFilePart);
  67                          File specificDestinationFile = new File(destDir, specificFilePart);
  68                          if (specificFile.exists()) {
  69                              fileUtils.copyFile(specificFile, specificDestinationFile);
  70                              continue;
  71                          }
  72  
  73                          String[] generalParts = new String[3];
  74                          System.arraycopy(parts, 0, generalParts, 0, 3);
  75                          String generalFilePart = StringUtils.join(generalParts, &#x27;/&#x27;) + &quot;/license.txt&quot;;
  76                          File generalFile = new File(licenseDir, generalFilePart);
  77                          if (generalFile.exists()) {
  78                              fileUtils.copyFile(generalFile, specificDestinationFile);
  79                              continue;
  80                          }
  81  
  82                          String[] moreGeneralParts = new String[2];
  83                          System.arraycopy(parts, 0, moreGeneralParts, 0, 2);
  84                          String moreGeneralFilePart = StringUtils.join(moreGeneralParts, &#x27;/&#x27;) + &quot;/license.txt&quot;;
  85                          File moreGeneralFile = new File(licenseDir, moreGeneralFilePart);
  86                          if (moreGeneralFile.exists()) {
  87                              fileUtils.copyFile(moreGeneralFile, specificDestinationFile);
  88                          }
  89                      }
  90                  }
  91              }
  92          } catch (IOException e) {
  93              throw new BuildException(e);
  94          }
  95      }
  96  
  97      public void add(ResourceCollection res) {
  98          super.add(res);
  99          rcs.add(res);
 100      }
 101  
 102      public File getLicenseDir() {
 103          return licenseDir;
 104      }
 105  
 106      public void setLicenseDir(File licenseDir) {
 107          this.licenseDir = licenseDir;
 108      }
 109  }</pre></td>
                        </tr>
                    </table>
                </div>
              </body>
            </html>
            