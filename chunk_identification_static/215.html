<!DOCTYPE html>
    <html lang="en">
              <head>
                <meta charset="utf-8">
                <title>215</title>
                    <style>
                        #top {
                            height: 48vh;
                            overflow-y: auto;
                        }
                        #bottom {
                            height: 48vh;
                            overflow-y: auto;
                        }
                        .highlighted {
                            background-color: rgba(177, 82, 227, 0.85) !important;
                        }
                    </style>
                    <script>
                        function enter(c) {
                            const lines = document.getElementsByClassName(c);
                            for (let i = 0; i < lines.length; i++) {
                               lines.item(i).classList.add('highlighted');
                            }
                        }
                        function out(c) {
                            const lines = document.getElementsByClassName(c);
                            for (let i = 0; i < lines.length; i++) {
                               lines.item(i).classList.remove('highlighted');
                            }
                        }
                    </script>
              </head>
              <body>
                <span style="height: 4vh">
                    215
                    <a href="214.html">prev</a>
                    <a href="216.html">next</a>
                    <a href="215_chunks.html">chunks</a>
                    <a href="index.html">index</a>
                    CyanogenMod/android_packages_apps_Trebuchet_65d076b2ffe7ca96f014a95bd362c7d1ce004b97_src/com/android/launcher3/LauncherAccessibilityDelegate.java
                    <textarea rows=1 onclick='navigator.clipboard.writeText(this.value)'>cd C:\studies\se\mega\git-analyzer-plus\notebooks\debug
del /Q *
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\CyanogenMod\android_packages_apps_Trebuchet show &quot;65d076b2ffe7ca96f014a95bd362c7d1ce004b97:src/com/android/launcher3/LauncherAccessibilityDelegate.java&quot; &gt; committed.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\CyanogenMod\android_packages_apps_Trebuchet show &quot;65d076b2ffe7ca96f014a95bd362c7d1ce004b97^1:src/com/android/launcher3/LauncherAccessibilityDelegate.java&quot; &gt; ours.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\CyanogenMod\android_packages_apps_Trebuchet show &quot;65d076b2ffe7ca96f014a95bd362c7d1ce004b97^2:src/com/android/launcher3/LauncherAccessibilityDelegate.java&quot; &gt; theirs.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\CyanogenMod\android_packages_apps_Trebuchet show &quot;559d90d0dafbac1d97a1e6f18062309831a25d51:src/com/android/launcher3/LauncherAccessibilityDelegate.java&quot; &gt; base.java
copy ours.java 1ours.java
copy ours.java 2ours.java
copy theirs.java 1theirs.java
copy theirs.java 2theirs.java
copy base.java 1base.java
copy base.java 2base.java
&quot;C:\Program Files\Java\jdk1.8.0_241\bin\java.exe&quot; -Dfile.encoding=UTF-8 -jar &quot;C:\studies\se\jFSTMerge\build\libs\jFSTMerge-all.jar&quot; C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1ours.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1base.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1theirs.java -o C:\studies\se\mega\git-analyzer-plus\notebooks\debug\jfstmerge.java --show-base
&quot;C:\Program Files\Eclipse Adoptium\jdk-17.0.11.9-hotspot\bin\java.exe&quot; -Dfile.encoding=UTF-8 -jar &quot;C:\studies\se\spork\target\spork-0.5.0-SNAPSHOT.jar&quot; C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2ours.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2base.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2theirs.java -o C:\studies\se\mega\git-analyzer-plus\notebooks\debug\spork.java
del /Q 1*.java
del /Q 2*.java
del /Q jfstmerge.java.merge
</textarea>
                    {strict: [[b], [j]], subset: [[b], [j]]}
                </span>
                <div id="top">

                    <table>
                        <tr>
                            <th>line based (standard git)</th>
                            <th>jfstmerge</th>
                            <th>spork</th>
                        </tr>
                        <tr>
                            <td><pre><span class="5824586583419512860" onmouseenter="enter('5824586583419512860');" onmouseout="out('5824586583419512860');" style="">   1 package com.android.launcher3;                                                                           </span>
<span  style="">   2                                                                                                          </span>
<span class="-6548293536248798364" onmouseenter="enter('-6548293536248798364');" onmouseout="out('-6548293536248798364');" style="">   3 import android.annotation.TargetApi;                                                                     </span>
<span class="2207333516549486115" onmouseenter="enter('2207333516549486115');" onmouseout="out('2207333516549486115');" style="">   4 import android.graphics.Rect;                                                                            </span>
<span class="-4549785658871057260" onmouseenter="enter('-4549785658871057260');" onmouseout="out('-4549785658871057260');" style="">   5 import android.os.Build;                                                                                 </span>
<span class="8096531590004379472" onmouseenter="enter('8096531590004379472');" onmouseout="out('8096531590004379472');" style="">   6 import android.os.Bundle;                                                                                </span>
<span class="3727887607099278716" onmouseenter="enter('3727887607099278716');" onmouseout="out('3727887607099278716');" style="">   7 import android.text.TextUtils;                                                                           </span>
<span class="7196841398407674858" onmouseenter="enter('7196841398407674858');" onmouseout="out('7196841398407674858');" style="">   8 import android.util.Log;                                                                                 </span>
<span class="-1076320969941752510" onmouseenter="enter('-1076320969941752510');" onmouseout="out('-1076320969941752510');" style="">   9 import android.util.SparseArray;                                                                         </span>
<span class="-8980485571216513882" onmouseenter="enter('-8980485571216513882');" onmouseout="out('-8980485571216513882');" style="">  10 import android.view.View;                                                                                </span>
<span class="-8756648299805587161" onmouseenter="enter('-8756648299805587161');" onmouseout="out('-8756648299805587161');" style="">  11 import android.view.View.AccessibilityDelegate;                                                          </span>
<span class="-9138089611195246418" onmouseenter="enter('-9138089611195246418');" onmouseout="out('-9138089611195246418');" style="">  12 import android.view.accessibility.AccessibilityNodeInfo;                                                 </span>
<span class="6586281964506875986" onmouseenter="enter('6586281964506875986');" onmouseout="out('6586281964506875986');" style="">  13 import android.view.accessibility.AccessibilityNodeInfo.AccessibilityAction;                             </span>
<span  style="">  14                                                                                                          </span>
<span class="-1058861693464722738" onmouseenter="enter('-1058861693464722738');" onmouseout="out('-1058861693464722738');" style="">  15 import com.android.launcher3.util.Thunk;                                                                 </span>
<span  style="">  16                                                                                                          </span>
<span class="9191247685397773893" onmouseenter="enter('9191247685397773893');" onmouseout="out('9191247685397773893');" style="">  17 import java.util.ArrayList;                                                                              </span>
<span  style="">  18                                                                                                          </span>
<span class="-6039390701678024163" onmouseenter="enter('-6039390701678024163');" onmouseout="out('-6039390701678024163');" style="">  19 @TargetApi(Build.VERSION_CODES.LOLLIPOP)                                                                 </span>
<span class="-8878560747020984701" onmouseenter="enter('-8878560747020984701');" onmouseout="out('-8878560747020984701');" style="">  20 public class LauncherAccessibilityDelegate extends AccessibilityDelegate {                               </span>
<span  style="">  21                                                                                                          </span>
<span class="7739564262596514196" onmouseenter="enter('7739564262596514196');" onmouseout="out('7739564262596514196');" style="">  22     private static final String TAG = &quot;LauncherAccessibilityDelegate&quot;;                                   </span>
<span  style="">  23                                                                                                          </span>
<span class="8893345853299725292" onmouseenter="enter('8893345853299725292');" onmouseout="out('8893345853299725292');" style="">  24     private static final int REMOVE = R.id.action_remove;                                                </span>
<span class="-906913215818544777" onmouseenter="enter('-906913215818544777');" onmouseout="out('-906913215818544777');" style="">  25     private static final int INFO = R.id.action_info;                                                    </span>
<span class="-3078740714627643184" onmouseenter="enter('-3078740714627643184');" onmouseout="out('-3078740714627643184');" style="">  26     private static final int UNINSTALL = R.id.action_uninstall;                                          </span>
<span class="5609464324213502199" onmouseenter="enter('5609464324213502199');" onmouseout="out('5609464324213502199');" style="">  27     private static final int ADD_TO_WORKSPACE = R.id.action_add_to_workspace;                            </span>
<span class="6364084580512854800" onmouseenter="enter('6364084580512854800');" onmouseout="out('6364084580512854800');" style="">  28     private static final int MOVE = R.id.action_move;                                                    </span>
<span  style="">  29                                                                                                          </span>
<span class="7673266412363792703" onmouseenter="enter('7673266412363792703');" onmouseout="out('7673266412363792703');" style="">  30     public enum DragType {                                                                               </span>
<span class="6599392380188461557" onmouseenter="enter('6599392380188461557');" onmouseout="out('6599392380188461557');" style="">  31         ICON,                                                                                            </span>
<span class="4141185414388590054" onmouseenter="enter('4141185414388590054');" onmouseout="out('4141185414388590054');" style="">  32         FOLDER,                                                                                          </span>
<span class="2776364218855094894" onmouseenter="enter('2776364218855094894');" onmouseout="out('2776364218855094894');" style="">  33         WIDGET                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  34     }                                                                                                    </span>
<span  style="">  35                                                                                                          </span>
<span class="-5747080031433568185" onmouseenter="enter('-5747080031433568185');" onmouseout="out('-5747080031433568185');" style="">  36     public static class DragInfo {                                                                       </span>
<span class="5667865761898587461" onmouseenter="enter('5667865761898587461');" onmouseout="out('5667865761898587461');" style="">  37         public DragType dragType;                                                                        </span>
<span class="-55573915964491385" onmouseenter="enter('-55573915964491385');" onmouseout="out('-55573915964491385');" style="">  38         public ItemInfo info;                                                                            </span>
<span class="-3306033691746941643" onmouseenter="enter('-3306033691746941643');" onmouseout="out('-3306033691746941643');" style="">  39         public View item;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  40     }                                                                                                    </span>
<span  style="">  41                                                                                                          </span>
<span class="-4667942192763773056" onmouseenter="enter('-4667942192763773056');" onmouseout="out('-4667942192763773056');" style="">  42 &lt;&lt;&lt;&lt;&lt;&lt;&lt; GitAnalyzerPlus_ours                                                                             </span>
<span class="1250277373004768756" onmouseenter="enter('1250277373004768756');" onmouseout="out('1250277373004768756');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  43     private DragInfo mDragInfo = null;                                                                   </span>
<span  style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  44                                                                                                          </span>
<span class="-3331479472733402069" onmouseenter="enter('-3331479472733402069');" onmouseout="out('-3331479472733402069');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  45     private final SparseArray&lt;AccessibilityAction&gt; mActions = new SparseArray&lt;&gt;();                       </span>
<span class="6741223626729319096" onmouseenter="enter('6741223626729319096');" onmouseout="out('6741223626729319096');" style="">  46 ||||||| GitAnalyzerPlus_base                                                                             </span>
<span class="1250277373004768756" onmouseenter="enter('1250277373004768756');" onmouseout="out('1250277373004768756');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  47     private DragInfo mDragInfo = null;                                                                   </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  48                                                                                                          </span>
<span class="5640146400903499996" onmouseenter="enter('5640146400903499996');" onmouseout="out('5640146400903499996');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  49     private final SparseArray&lt;AccessibilityAction&gt; mActions =                                            </span>
<span class="3149191939623373676" onmouseenter="enter('3149191939623373676');" onmouseout="out('3149191939623373676');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  50             new SparseArray&lt;AccessibilityAction&gt;();                                                      </span>
<span class="-2157599464619833381" onmouseenter="enter('-2157599464619833381');" onmouseout="out('-2157599464619833381');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  51     @Thunk final Launcher mLauncher;                                                                     </span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style="">  52 =======                                                                                                  </span>
<span class="5640146400903499996" onmouseenter="enter('5640146400903499996');" onmouseout="out('5640146400903499996');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  53     private final SparseArray&lt;AccessibilityAction&gt; mActions =                                            </span>
<span class="3149191939623373676" onmouseenter="enter('3149191939623373676');" onmouseout="out('3149191939623373676');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  54             new SparseArray&lt;AccessibilityAction&gt;();                                                      </span>
<span class="-1382546150375666264" onmouseenter="enter('-1382546150375666264');" onmouseout="out('-1382546150375666264');" style="">  55 &gt;&gt;&gt;&gt;&gt;&gt;&gt; GitAnalyzerPlus_theirs                                                                           </span>
<span class="-2157599464619833381" onmouseenter="enter('-2157599464619833381');" onmouseout="out('-2157599464619833381');" style="">  56     @Thunk final Launcher mLauncher;                                                                     </span>
<span  style="">  57                                                                                                          </span>
<span class="1250277373004768756" onmouseenter="enter('1250277373004768756');" onmouseout="out('1250277373004768756');" style="">  58     private DragInfo mDragInfo = null;                                                                   </span>
<span class="-7500595780647369513" onmouseenter="enter('-7500595780647369513');" onmouseout="out('-7500595780647369513');" style="">  59     private AccessibilityDragSource mDragSource = null;                                                  </span>
<span  style="">  60                                                                                                          </span>
<span class="9167446891045078982" onmouseenter="enter('9167446891045078982');" onmouseout="out('9167446891045078982');" style="">  61     public LauncherAccessibilityDelegate(Launcher launcher) {                                            </span>
<span class="2298492052814421644" onmouseenter="enter('2298492052814421644');" onmouseout="out('2298492052814421644');" style="">  62         mLauncher = launcher;                                                                            </span>
<span  style="">  63                                                                                                          </span>
<span class="7477697817356762684" onmouseenter="enter('7477697817356762684');" onmouseout="out('7477697817356762684');" style="">  64         mActions.put(REMOVE, new AccessibilityAction(REMOVE,                                             </span>
<span class="-8677850870044205181" onmouseenter="enter('-8677850870044205181');" onmouseout="out('-8677850870044205181');" style="">  65                 launcher.getText(R.string.delete_target_label)));                                        </span>
<span class="-7538644546822342693" onmouseenter="enter('-7538644546822342693');" onmouseout="out('-7538644546822342693');" style="">  66         mActions.put(INFO, new AccessibilityAction(INFO,                                                 </span>
<span class="8147791143155311993" onmouseenter="enter('8147791143155311993');" onmouseout="out('8147791143155311993');" style="">  67                 launcher.getText(R.string.info_target_label)));                                          </span>
<span class="1420094022479585644" onmouseenter="enter('1420094022479585644');" onmouseout="out('1420094022479585644');" style="">  68         mActions.put(UNINSTALL, new AccessibilityAction(UNINSTALL,                                       </span>
<span class="2043043809479027256" onmouseenter="enter('2043043809479027256');" onmouseout="out('2043043809479027256');" style="">  69                 launcher.getText(R.string.delete_target_uninstall_label)));                              </span>
<span class="-1819373127340936143" onmouseenter="enter('-1819373127340936143');" onmouseout="out('-1819373127340936143');" style="">  70         mActions.put(ADD_TO_WORKSPACE, new AccessibilityAction(ADD_TO_WORKSPACE,                         </span>
<span class="4615291248298489067" onmouseenter="enter('4615291248298489067');" onmouseout="out('4615291248298489067');" style="">  71                 launcher.getText(R.string.action_add_to_workspace)));                                    </span>
<span class="4170488603958962915" onmouseenter="enter('4170488603958962915');" onmouseout="out('4170488603958962915');" style="">  72         mActions.put(MOVE, new AccessibilityAction(MOVE,                                                 </span>
<span class="3813665405157640687" onmouseenter="enter('3813665405157640687');" onmouseout="out('3813665405157640687');" style="">  73                 launcher.getText(R.string.action_move)));                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  74     }                                                                                                    </span>
<span  style="">  75                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  76     @Override                                                                                            </span>
<span class="-7273033023326048347" onmouseenter="enter('-7273033023326048347');" onmouseout="out('-7273033023326048347');" style="">  77     public void onInitializeAccessibilityNodeInfo(View host, AccessibilityNodeInfo info) {               </span>
<span class="139648597076357650" onmouseenter="enter('139648597076357650');" onmouseout="out('139648597076357650');" style="">  78         super.onInitializeAccessibilityNodeInfo(host, info);                                             </span>
<span class="-3962068915073104146" onmouseenter="enter('-3962068915073104146');" onmouseout="out('-3962068915073104146');" style="">  79         if (!(host.getTag() instanceof ItemInfo)) return;                                                </span>
<span class="-8132236601557406692" onmouseenter="enter('-8132236601557406692');" onmouseout="out('-8132236601557406692');" style="">  80         ItemInfo item = (ItemInfo) host.getTag();                                                        </span>
<span  style="">  81                                                                                                          </span>
<span class="332367922318480470" onmouseenter="enter('332367922318480470');" onmouseout="out('332367922318480470');" style="">  82         if (DeleteDropTarget.supportsDrop(item)) {                                                       </span>
<span class="-5050217148988535939" onmouseenter="enter('-5050217148988535939');" onmouseout="out('-5050217148988535939');" style="">  83             info.addAction(mActions.get(REMOVE));                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  84         }                                                                                                </span>
<span class="5211990641771115404" onmouseenter="enter('5211990641771115404');" onmouseout="out('5211990641771115404');" style="">  85         if (UninstallDropTarget.supportsDrop(host.getContext(), item)) {                                 </span>
<span class="-5511839775750584533" onmouseenter="enter('-5511839775750584533');" onmouseout="out('-5511839775750584533');" style="">  86             info.addAction(mActions.get(UNINSTALL));                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  87         }                                                                                                </span>
<span class="-6135045490709819928" onmouseenter="enter('-6135045490709819928');" onmouseout="out('-6135045490709819928');" style="">  88         if (InfoDropTarget.supportsDrop(host.getContext(), item)) {                                      </span>
<span class="-8451771459039353306" onmouseenter="enter('-8451771459039353306');" onmouseout="out('-8451771459039353306');" style="">  89             info.addAction(mActions.get(INFO));                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  90         }                                                                                                </span>
<span  style="">  91                                                                                                          </span>
<span class="-4176726828244621568" onmouseenter="enter('-4176726828244621568');" onmouseout="out('-4176726828244621568');" style="">  92         if ((item instanceof ShortcutInfo)                                                               </span>
<span class="92381045715047075" onmouseenter="enter('92381045715047075');" onmouseout="out('92381045715047075');" style="">  93                 || (item instanceof LauncherAppWidgetInfo)                                               </span>
<span class="6290010966115970084" onmouseenter="enter('6290010966115970084');" onmouseout="out('6290010966115970084');" style="">  94                 || (item instanceof FolderInfo)) {                                                       </span>
<span class="1504829505568936375" onmouseenter="enter('1504829505568936375');" onmouseout="out('1504829505568936375');" style="">  95             info.addAction(mActions.get(MOVE));                                                          </span>
<span class="2792177059488094606" onmouseenter="enter('2792177059488094606');" onmouseout="out('2792177059488094606');" style="">  96         } if ((item instanceof AppInfo) || (item instanceof PendingAddItemInfo)) {                       </span>
<span class="8430941158622436374" onmouseenter="enter('8430941158622436374');" onmouseout="out('8430941158622436374');" style="">  97             info.addAction(mActions.get(ADD_TO_WORKSPACE));                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  98         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  99     }                                                                                                    </span>
<span  style=""> 100                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 101     @Override                                                                                            </span>
<span class="7722350901789687268" onmouseenter="enter('7722350901789687268');" onmouseout="out('7722350901789687268');" style=""> 102     public boolean performAccessibilityAction(View host, int action, Bundle args) {                      </span>
<span class="4006206445105729116" onmouseenter="enter('4006206445105729116');" onmouseout="out('4006206445105729116');" style=""> 103         if ((host.getTag() instanceof ItemInfo)                                                          </span>
<span class="-4171950458181942960" onmouseenter="enter('-4171950458181942960');" onmouseout="out('-4171950458181942960');" style=""> 104                 &amp;&amp; performAction(host, (ItemInfo) host.getTag(), action)) {                              </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 105             return true;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 106         }                                                                                                </span>
<span class="8021458927511539515" onmouseenter="enter('8021458927511539515');" onmouseout="out('8021458927511539515');" style=""> 107         return super.performAccessibilityAction(host, action, args);                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 108     }                                                                                                    </span>
<span  style=""> 109                                                                                                          </span>
<span class="6279001524996292895" onmouseenter="enter('6279001524996292895');" onmouseout="out('6279001524996292895');" style=""> 110     public boolean performAction(View host, final ItemInfo item, int action) {                           </span>
<span class="4393566890332071869" onmouseenter="enter('4393566890332071869');" onmouseout="out('4393566890332071869');" style=""> 111         if (action == REMOVE) {                                                                          </span>
<span class="-2199579448516118049" onmouseenter="enter('-2199579448516118049');" onmouseout="out('-2199579448516118049');" style=""> 112             if (DeleteDropTarget.removeWorkspaceOrFolderItem(mLauncher, item, host)) {                   </span>
<span class="7360804705563363776" onmouseenter="enter('7360804705563363776');" onmouseout="out('7360804705563363776');" style=""> 113                 announceConfirmation(R.string.item_removed);                                             </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 114                 return true;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 115             }                                                                                            </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 116             return false;                                                                                </span>
<span class="-8596930384082519137" onmouseenter="enter('-8596930384082519137');" onmouseout="out('-8596930384082519137');" style=""> 117         } else if (action == INFO) {                                                                     </span>
<span class="-6081668339733927507" onmouseenter="enter('-6081668339733927507');" onmouseout="out('-6081668339733927507');" style=""> 118             InfoDropTarget.startDetailsActivityForInfo(item, mLauncher);                                 </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 119             return true;                                                                                 </span>
<span class="7336454124525502566" onmouseenter="enter('7336454124525502566');" onmouseout="out('7336454124525502566');" style=""> 120         } else if (action == UNINSTALL) {                                                                </span>
<span class="8153265809648871958" onmouseenter="enter('8153265809648871958');" onmouseout="out('8153265809648871958');" style=""> 121             return UninstallDropTarget.startUninstallActivity(mLauncher, item);                          </span>
<span class="8708031208236508741" onmouseenter="enter('8708031208236508741');" onmouseout="out('8708031208236508741');" style=""> 122         } else if (action == MOVE) {                                                                     </span>
<span class="-4333501895976180099" onmouseenter="enter('-4333501895976180099');" onmouseout="out('-4333501895976180099');" style=""> 123             beginAccessibleDrag(host, item);                                                             </span>
<span class="-7625017878828137005" onmouseenter="enter('-7625017878828137005');" onmouseout="out('-7625017878828137005');" style=""> 124         } else if (action == ADD_TO_WORKSPACE) {                                                         </span>
<span class="-3615093919413674906" onmouseenter="enter('-3615093919413674906');" onmouseout="out('-3615093919413674906');" style=""> 125             final int[] coordinates = new int[2];                                                        </span>
<span class="-501546482527604865" onmouseenter="enter('-501546482527604865');" onmouseout="out('-501546482527604865');" style=""> 126             final long screenId = findSpaceOnWorkspace(item, coordinates);                               </span>
<span class="-3207864149400801965" onmouseenter="enter('-3207864149400801965');" onmouseout="out('-3207864149400801965');" style=""> 127             mLauncher.showWorkspace(true, new Runnable() {                                               </span>
<span  style=""> 128                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 129                 @Override                                                                                </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 130                 public void run() {                                                                      </span>
<span class="3087153248308218904" onmouseenter="enter('3087153248308218904');" onmouseout="out('3087153248308218904');" style=""> 131                     if (item instanceof AppInfo) {                                                       </span>
<span class="-6107650958735857408" onmouseenter="enter('-6107650958735857408');" onmouseout="out('-6107650958735857408');" style=""> 132                         ShortcutInfo info = ((AppInfo) item).makeShortcut();                             </span>
<span class="5831912270471019662" onmouseenter="enter('5831912270471019662');" onmouseout="out('5831912270471019662');" style=""> 133                         LauncherModel.addItemToDatabase(mLauncher, info,                                 </span>
<span class="-99165044777853060" onmouseenter="enter('-99165044777853060');" onmouseout="out('-99165044777853060');" style=""> 134                                 LauncherSettings.Favorites.CONTAINER_DESKTOP,                            </span>
<span class="3929881692587777267" onmouseenter="enter('3929881692587777267');" onmouseout="out('3929881692587777267');" style=""> 135                                 screenId, coordinates[0], coordinates[1]);                               </span>
<span  style=""> 136                                                                                                          </span>
<span class="4676159660764912307" onmouseenter="enter('4676159660764912307');" onmouseout="out('4676159660764912307');" style=""> 137                         ArrayList&lt;ItemInfo&gt; itemList = new ArrayList&lt;&gt;();                                </span>
<span class="-696071559227223371" onmouseenter="enter('-696071559227223371');" onmouseout="out('-696071559227223371');" style=""> 138                         itemList.add(info);                                                              </span>
<span class="2486508908256184960" onmouseenter="enter('2486508908256184960');" onmouseout="out('2486508908256184960');" style=""> 139                         mLauncher.bindItems(itemList, 0, itemList.size(), true);                         </span>
<span class="3786527025674276993" onmouseenter="enter('3786527025674276993');" onmouseout="out('3786527025674276993');" style=""> 140                     } else if (item instanceof PendingAddItemInfo) {                                     </span>
<span class="-2938262450557814973" onmouseenter="enter('-2938262450557814973');" onmouseout="out('-2938262450557814973');" style=""> 141                         PendingAddItemInfo info = (PendingAddItemInfo) item;                             </span>
<span class="-8898517476178795631" onmouseenter="enter('-8898517476178795631');" onmouseout="out('-8898517476178795631');" style=""> 142                         Workspace workspace = mLauncher.getWorkspace();                                  </span>
<span class="-5790022812085146063" onmouseenter="enter('-5790022812085146063');" onmouseout="out('-5790022812085146063');" style=""> 143                         workspace.snapToPage(workspace.getPageIndexForScreenId(screenId));               </span>
<span class="4728923757793069874" onmouseenter="enter('4728923757793069874');" onmouseout="out('4728923757793069874');" style=""> 144                         mLauncher.addPendingItem(info, LauncherSettings.Favorites.CONTAINER_DESKTOP,     </span>
<span class="5623744536898048130" onmouseenter="enter('5623744536898048130');" onmouseout="out('5623744536898048130');" style=""> 145                                 screenId, coordinates, info.spanX, info.spanY);                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 146                     }                                                                                    </span>
<span class="8777719083063569498" onmouseenter="enter('8777719083063569498');" onmouseout="out('8777719083063569498');" style=""> 147                     announceConfirmation(R.string.item_added_to_workspace);                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 148                 }                                                                                        </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 149             });                                                                                          </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 150             return true;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 151         }                                                                                                </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 152         return false;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 153     }                                                                                                    </span>
<span  style=""> 154                                                                                                          </span>
<span class="5530528132112250436" onmouseenter="enter('5530528132112250436');" onmouseout="out('5530528132112250436');" style=""> 155     @Thunk void announceConfirmation(int resId) {                                                        </span>
<span class="1966081519457104996" onmouseenter="enter('1966081519457104996');" onmouseout="out('1966081519457104996');" style=""> 156         announceConfirmation(mLauncher.getResources().getString(resId));                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 157     }                                                                                                    </span>
<span  style=""> 158                                                                                                          </span>
<span class="-2504099072851321365" onmouseenter="enter('-2504099072851321365');" onmouseout="out('-2504099072851321365');" style=""> 159     @Thunk void announceConfirmation(String confirmation) {                                              </span>
<span class="-3898733617684276650" onmouseenter="enter('-3898733617684276650');" onmouseout="out('-3898733617684276650');" style=""> 160         mLauncher.getDragLayer().announceForAccessibility(confirmation);                                 </span>
<span  style=""> 161                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 162     }                                                                                                    </span>
<span  style=""> 163                                                                                                          </span>
<span class="1849019295951939912" onmouseenter="enter('1849019295951939912');" onmouseout="out('1849019295951939912');" style=""> 164     public boolean isInAccessibleDrag() {                                                                </span>
<span class="-385827363585866013" onmouseenter="enter('-385827363585866013');" onmouseout="out('-385827363585866013');" style=""> 165         return mDragInfo != null;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 166     }                                                                                                    </span>
<span  style=""> 167                                                                                                          </span>
<span class="-3994168187945610006" onmouseenter="enter('-3994168187945610006');" onmouseout="out('-3994168187945610006');" style=""> 168     public DragInfo getDragInfo() {                                                                      </span>
<span class="8960892273585302890" onmouseenter="enter('8960892273585302890');" onmouseout="out('8960892273585302890');" style=""> 169         return mDragInfo;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 170     }                                                                                                    </span>
<span  style=""> 171                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 172     /**                                                                                                  </span>
<span class="236839442839260132" onmouseenter="enter('236839442839260132');" onmouseout="out('236839442839260132');" style=""> 173      * @param clickedTarget the actual view that was clicked                                             </span>
<span class="-1732490391256382509" onmouseenter="enter('-1732490391256382509');" onmouseout="out('-1732490391256382509');" style=""> 174      * @param dropLocation relative to {@param clickedTarget}. If provided, its center is used           </span>
<span class="6001468343441999873" onmouseenter="enter('6001468343441999873');" onmouseout="out('6001468343441999873');" style=""> 175      * as the actual drop location otherwise the views center is used.                                   </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 176      */                                                                                                  </span>
<span class="-4302569842498638066" onmouseenter="enter('-4302569842498638066');" onmouseout="out('-4302569842498638066');" style=""> 177     public void handleAccessibleDrop(View clickedTarget, Rect dropLocation,                              </span>
<span class="4238978318551738396" onmouseenter="enter('4238978318551738396');" onmouseout="out('4238978318551738396');" style=""> 178             String confirmation) {                                                                       </span>
<span class="6617133783142233290" onmouseenter="enter('6617133783142233290');" onmouseout="out('6617133783142233290');" style=""> 179         if (!isInAccessibleDrag()) return;                                                               </span>
<span  style=""> 180                                                                                                          </span>
<span class="6057327878379417898" onmouseenter="enter('6057327878379417898');" onmouseout="out('6057327878379417898');" style=""> 181         int[] loc = new int[2];                                                                          </span>
<span class="5019373280508910104" onmouseenter="enter('5019373280508910104');" onmouseout="out('5019373280508910104');" style=""> 182         if (dropLocation == null) {                                                                      </span>
<span class="3648597410899046252" onmouseenter="enter('3648597410899046252');" onmouseout="out('3648597410899046252');" style=""> 183             loc[0] = clickedTarget.getWidth() / 2;                                                       </span>
<span class="5878598182157774358" onmouseenter="enter('5878598182157774358');" onmouseout="out('5878598182157774358');" style=""> 184             loc[1] = clickedTarget.getHeight() / 2;                                                      </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 185         } else {                                                                                         </span>
<span class="9008860610152082395" onmouseenter="enter('9008860610152082395');" onmouseout="out('9008860610152082395');" style=""> 186             loc[0] = dropLocation.centerX();                                                             </span>
<span class="638045140581511737" onmouseenter="enter('638045140581511737');" onmouseout="out('638045140581511737');" style=""> 187             loc[1] = dropLocation.centerY();                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 188         }                                                                                                </span>
<span  style=""> 189                                                                                                          </span>
<span class="8787232624983691433" onmouseenter="enter('8787232624983691433');" onmouseout="out('8787232624983691433');" style=""> 190         mLauncher.getDragLayer().getDescendantCoordRelativeToSelf(clickedTarget, loc);                   </span>
<span class="2381924639895412070" onmouseenter="enter('2381924639895412070');" onmouseout="out('2381924639895412070');" style=""> 191         mLauncher.getDragController().completeAccessibleDrag(loc);                                       </span>
<span  style=""> 192                                                                                                          </span>
<span class="-6860671001461264020" onmouseenter="enter('-6860671001461264020');" onmouseout="out('-6860671001461264020');" style=""> 193         endAccessibleDrag();                                                                             </span>
<span class="1428041471467928452" onmouseenter="enter('1428041471467928452');" onmouseout="out('1428041471467928452');" style=""> 194         if (!TextUtils.isEmpty(confirmation)) {                                                          </span>
<span class="-6572664765542834602" onmouseenter="enter('-6572664765542834602');" onmouseout="out('-6572664765542834602');" style=""> 195             announceConfirmation(confirmation);                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 196         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 197     }                                                                                                    </span>
<span  style=""> 198                                                                                                          </span>
<span class="-1129993023030719923" onmouseenter="enter('-1129993023030719923');" onmouseout="out('-1129993023030719923');" style=""> 199     public void beginAccessibleDrag(View item, ItemInfo info) {                                          </span>
<span class="-5250932433146430574" onmouseenter="enter('-5250932433146430574');" onmouseout="out('-5250932433146430574');" style=""> 200         mDragInfo = new DragInfo();                                                                      </span>
<span class="-5461126991672881398" onmouseenter="enter('-5461126991672881398');" onmouseout="out('-5461126991672881398');" style=""> 201         mDragInfo.info = info;                                                                           </span>
<span class="86699917550025500" onmouseenter="enter('86699917550025500');" onmouseout="out('86699917550025500');" style=""> 202         mDragInfo.item = item;                                                                           </span>
<span class="8897282540165502383" onmouseenter="enter('8897282540165502383');" onmouseout="out('8897282540165502383');" style=""> 203         mDragInfo.dragType = DragType.ICON;                                                              </span>
<span class="3055082266956930818" onmouseenter="enter('3055082266956930818');" onmouseout="out('3055082266956930818');" style=""> 204         if (info instanceof FolderInfo) {                                                                </span>
<span class="-305189524123954978" onmouseenter="enter('-305189524123954978');" onmouseout="out('-305189524123954978');" style=""> 205             mDragInfo.dragType = DragType.FOLDER;                                                        </span>
<span class="-1966513537137476875" onmouseenter="enter('-1966513537137476875');" onmouseout="out('-1966513537137476875');" style=""> 206         } else if (info instanceof LauncherAppWidgetInfo) {                                              </span>
<span class="3169679808344239028" onmouseenter="enter('3169679808344239028');" onmouseout="out('3169679808344239028');" style=""> 207             mDragInfo.dragType = DragType.WIDGET;                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 208         }                                                                                                </span>
<span  style=""> 209                                                                                                          </span>
<span class="-2983481679605606769" onmouseenter="enter('-2983481679605606769');" onmouseout="out('-2983481679605606769');" style=""> 210         CellLayout.CellInfo cellInfo = new CellLayout.CellInfo(item, info);                              </span>
<span  style=""> 211                                                                                                          </span>
<span class="6896707850216920608" onmouseenter="enter('6896707850216920608');" onmouseout="out('6896707850216920608');" style=""> 212         Rect pos = new Rect();                                                                           </span>
<span class="8980401198763381287" onmouseenter="enter('8980401198763381287');" onmouseout="out('8980401198763381287');" style=""> 213         mLauncher.getDragLayer().getDescendantRectRelativeToSelf(item, pos);                             </span>
<span class="2681535486778051939" onmouseenter="enter('2681535486778051939');" onmouseout="out('2681535486778051939');" style=""> 214         mLauncher.getDragController().prepareAccessibleDrag(pos.centerX(), pos.centerY());               </span>
<span  style=""> 215                                                                                                          </span>
<span class="-8898517476178795631" onmouseenter="enter('-8898517476178795631');" onmouseout="out('-8898517476178795631');" style=""> 216         Workspace workspace = mLauncher.getWorkspace();                                                  </span>
<span  style=""> 217                                                                                                          </span>
<span class="-2168812538654575513" onmouseenter="enter('-2168812538654575513');" onmouseout="out('-2168812538654575513');" style=""> 218         Folder folder = workspace.getOpenFolder();                                                       </span>
<span class="4345920871391947850" onmouseenter="enter('4345920871391947850');" onmouseout="out('4345920871391947850');" style=""> 219         if (folder != null) {                                                                            </span>
<span class="6561950418490654513" onmouseenter="enter('6561950418490654513');" onmouseout="out('6561950418490654513');" style=""> 220             if (folder.getItemsInReadingOrder().contains(item)) {                                        </span>
<span class="-1482898424830990869" onmouseenter="enter('-1482898424830990869');" onmouseout="out('-1482898424830990869');" style=""> 221                 mDragSource = folder;                                                                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 222             } else {                                                                                     </span>
<span class="1433268111386643131" onmouseenter="enter('1433268111386643131');" onmouseout="out('1433268111386643131');" style=""> 223                 mLauncher.closeFolder();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 224             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 225         }                                                                                                </span>
<span class="7846629690045505805" onmouseenter="enter('7846629690045505805');" onmouseout="out('7846629690045505805');" style=""> 226         if (mDragSource == null) {                                                                       </span>
<span class="413100008976257409" onmouseenter="enter('413100008976257409');" onmouseout="out('413100008976257409');" style=""> 227             mDragSource = workspace;                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 228         }                                                                                                </span>
<span class="5859894574795283871" onmouseenter="enter('5859894574795283871');" onmouseout="out('5859894574795283871');" style=""> 229         mDragSource.enableAccessibleDrag(true);                                                          </span>
<span class="-5926162775184360800" onmouseenter="enter('-5926162775184360800');" onmouseout="out('-5926162775184360800');" style=""> 230         mDragSource.startDrag(cellInfo, true);                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 231     }                                                                                                    </span>
<span  style=""> 232                                                                                                          </span>
<span class="3535599141602360082" onmouseenter="enter('3535599141602360082');" onmouseout="out('3535599141602360082');" style=""> 233     public boolean onBackPressed() {                                                                     </span>
<span class="3564218924313773086" onmouseenter="enter('3564218924313773086');" onmouseout="out('3564218924313773086');" style=""> 234         if (isInAccessibleDrag()) {                                                                      </span>
<span class="-5227244728485293050" onmouseenter="enter('-5227244728485293050');" onmouseout="out('-5227244728485293050');" style=""> 235             cancelAccessibleDrag();                                                                      </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 236             return true;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 237         }                                                                                                </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 238         return false;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 239     }                                                                                                    </span>
<span  style=""> 240                                                                                                          </span>
<span class="-4872468334895712870" onmouseenter="enter('-4872468334895712870');" onmouseout="out('-4872468334895712870');" style=""> 241     private void cancelAccessibleDrag() {                                                                </span>
<span class="-9047723378342617919" onmouseenter="enter('-9047723378342617919');" onmouseout="out('-9047723378342617919');" style=""> 242         mLauncher.getDragController().cancelDrag();                                                      </span>
<span class="-6860671001461264020" onmouseenter="enter('-6860671001461264020');" onmouseout="out('-6860671001461264020');" style=""> 243         endAccessibleDrag();                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 244     }                                                                                                    </span>
<span  style=""> 245                                                                                                          </span>
<span class="-9052858256904418219" onmouseenter="enter('-9052858256904418219');" onmouseout="out('-9052858256904418219');" style=""> 246     private void endAccessibleDrag() {                                                                   </span>
<span class="127949360596562642" onmouseenter="enter('127949360596562642');" onmouseout="out('127949360596562642');" style=""> 247         mDragInfo = null;                                                                                </span>
<span class="-3750607280547723055" onmouseenter="enter('-3750607280547723055');" onmouseout="out('-3750607280547723055');" style=""> 248         if (mDragSource != null) {                                                                       </span>
<span class="-7650855280373105515" onmouseenter="enter('-7650855280373105515');" onmouseout="out('-7650855280373105515');" style=""> 249             mDragSource.enableAccessibleDrag(false);                                                     </span>
<span class="653995248213737484" onmouseenter="enter('653995248213737484');" onmouseout="out('653995248213737484');" style=""> 250             mDragSource = null;                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 251         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 252     }                                                                                                    </span>
<span  style=""> 253                                                                                                          </span>
<span class="5577863383748596079" onmouseenter="enter('5577863383748596079');" onmouseout="out('5577863383748596079');" style=""> 254     public static interface AccessibilityDragSource {                                                    </span>
<span class="-4071568384152274162" onmouseenter="enter('-4071568384152274162');" onmouseout="out('-4071568384152274162');" style=""> 255         void startDrag(CellLayout.CellInfo cellInfo, boolean accessible);                                </span>
<span  style=""> 256                                                                                                          </span>
<span class="4842957631066629898" onmouseenter="enter('4842957631066629898');" onmouseout="out('4842957631066629898');" style=""> 257         void enableAccessibleDrag(boolean enable);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 258     }                                                                                                    </span>
<span  style=""> 259                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 260     /**                                                                                                  </span>
<span class="1495145993480841942" onmouseenter="enter('1495145993480841942');" onmouseout="out('1495145993480841942');" style=""> 261      * Find empty space on the workspace and returns the screenId.                                       </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 262      */                                                                                                  </span>
<span class="-8449688355135333212" onmouseenter="enter('-8449688355135333212');" onmouseout="out('-8449688355135333212');" style=""> 263     private long findSpaceOnWorkspace(ItemInfo info, int[] outCoordinates) {                             </span>
<span class="-8898517476178795631" onmouseenter="enter('-8898517476178795631');" onmouseout="out('-8898517476178795631');" style=""> 264         Workspace workspace = mLauncher.getWorkspace();                                                  </span>
<span class="6169180196845895454" onmouseenter="enter('6169180196845895454');" onmouseout="out('6169180196845895454');" style=""> 265         ArrayList&lt;Long&gt; workspaceScreens = workspace.getScreenOrder();                                   </span>
<span class="-4989071319680909609" onmouseenter="enter('-4989071319680909609');" onmouseout="out('-4989071319680909609');" style=""> 266         long screenId;                                                                                   </span>
<span  style=""> 267                                                                                                          </span>
<span class="130449504410014259" onmouseenter="enter('130449504410014259');" onmouseout="out('130449504410014259');" style=""> 268         // First check if there is space on the current screen.                                          </span>
<span class="-8555489554884006467" onmouseenter="enter('-8555489554884006467');" onmouseout="out('-8555489554884006467');" style=""> 269         int screenIndex = workspace.getCurrentPage();                                                    </span>
<span class="-8788546963715178191" onmouseenter="enter('-8788546963715178191');" onmouseout="out('-8788546963715178191');" style=""> 270         screenId = workspaceScreens.get(screenIndex);                                                    </span>
<span class="-7555813705215921025" onmouseenter="enter('-7555813705215921025');" onmouseout="out('-7555813705215921025');" style=""> 271         CellLayout layout = (CellLayout) workspace.getPageAt(screenIndex);                               </span>
<span  style=""> 272                                                                                                          </span>
<span class="9171918301514123154" onmouseenter="enter('9171918301514123154');" onmouseout="out('9171918301514123154');" style=""> 273         boolean found = layout.findCellForSpan(outCoordinates, info.spanX, info.spanY);                  </span>
<span class="-5373004249118909904" onmouseenter="enter('-5373004249118909904');" onmouseout="out('-5373004249118909904');" style=""> 274         screenIndex = workspace.hasCustomContent() ? 1 : 0;                                              </span>
<span class="3330737112868039910" onmouseenter="enter('3330737112868039910');" onmouseout="out('3330737112868039910');" style=""> 275         while (!found &amp;&amp; screenIndex &lt; workspaceScreens.size()) {                                        </span>
<span class="-8788546963715178191" onmouseenter="enter('-8788546963715178191');" onmouseout="out('-8788546963715178191');" style=""> 276             screenId = workspaceScreens.get(screenIndex);                                                </span>
<span class="-9142153871789250127" onmouseenter="enter('-9142153871789250127');" onmouseout="out('-9142153871789250127');" style=""> 277             layout = (CellLayout) workspace.getPageAt(screenIndex);                                      </span>
<span class="-665556803182872133" onmouseenter="enter('-665556803182872133');" onmouseout="out('-665556803182872133');" style=""> 278             found = layout.findCellForSpan(outCoordinates, info.spanX, info.spanY);                      </span>
<span class="-5540441054643006703" onmouseenter="enter('-5540441054643006703');" onmouseout="out('-5540441054643006703');" style=""> 279             screenIndex++;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 280         }                                                                                                </span>
<span  style=""> 281                                                                                                          </span>
<span class="7376901212312568013" onmouseenter="enter('7376901212312568013');" onmouseout="out('7376901212312568013');" style=""> 282         if (found) {                                                                                     </span>
<span class="-5251553830701359394" onmouseenter="enter('-5251553830701359394');" onmouseout="out('-5251553830701359394');" style=""> 283             return screenId;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 284         }                                                                                                </span>
<span  style=""> 285                                                                                                          </span>
<span class="8292819949706702167" onmouseenter="enter('8292819949706702167');" onmouseout="out('8292819949706702167');" style=""> 286         workspace.addExtraEmptyScreen();                                                                 </span>
<span class="6254629974422523980" onmouseenter="enter('6254629974422523980');" onmouseout="out('6254629974422523980');" style=""> 287         screenId = workspace.commitExtraEmptyScreen();                                                   </span>
<span class="-7669745941744532955" onmouseenter="enter('-7669745941744532955');" onmouseout="out('-7669745941744532955');" style=""> 288         layout = workspace.getScreenWithId(screenId);                                                    </span>
<span class="-665556803182872133" onmouseenter="enter('-665556803182872133');" onmouseout="out('-665556803182872133');" style=""> 289         found = layout.findCellForSpan(outCoordinates, info.spanX, info.spanY);                          </span>
<span  style=""> 290                                                                                                          </span>
<span class="8259597404101134668" onmouseenter="enter('8259597404101134668');" onmouseout="out('8259597404101134668');" style=""> 291         if (!found) {                                                                                    </span>
<span class="8444769247492975449" onmouseenter="enter('8444769247492975449');" onmouseout="out('8444769247492975449');" style=""> 292             Log.wtf(TAG, &quot;Not enough space on an empty screen&quot;);                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 293         }                                                                                                </span>
<span class="-5251553830701359394" onmouseenter="enter('-5251553830701359394');" onmouseout="out('-5251553830701359394');" style=""> 294         return screenId;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 295     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 296 }                                                                                                        </span></pre></td>
                            <td><pre><span class="5824586583419512860" onmouseenter="enter('5824586583419512860');" onmouseout="out('5824586583419512860');" style="">   1 package com.android.launcher3;                                                                           </span>
<span  style="">   2                                                                                                          </span>
<span class="-6548293536248798364" onmouseenter="enter('-6548293536248798364');" onmouseout="out('-6548293536248798364');" style="">   3 import android.annotation.TargetApi;                                                                     </span>
<span class="2207333516549486115" onmouseenter="enter('2207333516549486115');" onmouseout="out('2207333516549486115');" style="">   4 import android.graphics.Rect;                                                                            </span>
<span class="-4549785658871057260" onmouseenter="enter('-4549785658871057260');" onmouseout="out('-4549785658871057260');" style="">   5 import android.os.Build;                                                                                 </span>
<span class="8096531590004379472" onmouseenter="enter('8096531590004379472');" onmouseout="out('8096531590004379472');" style="">   6 import android.os.Bundle;                                                                                </span>
<span class="3727887607099278716" onmouseenter="enter('3727887607099278716');" onmouseout="out('3727887607099278716');" style="">   7 import android.text.TextUtils;                                                                           </span>
<span class="7196841398407674858" onmouseenter="enter('7196841398407674858');" onmouseout="out('7196841398407674858');" style="">   8 import android.util.Log;                                                                                 </span>
<span class="-1076320969941752510" onmouseenter="enter('-1076320969941752510');" onmouseout="out('-1076320969941752510');" style="">   9 import android.util.SparseArray;                                                                         </span>
<span class="-8980485571216513882" onmouseenter="enter('-8980485571216513882');" onmouseout="out('-8980485571216513882');" style="">  10 import android.view.View;                                                                                </span>
<span class="-8756648299805587161" onmouseenter="enter('-8756648299805587161');" onmouseout="out('-8756648299805587161');" style="">  11 import android.view.View.AccessibilityDelegate;                                                          </span>
<span class="-9138089611195246418" onmouseenter="enter('-9138089611195246418');" onmouseout="out('-9138089611195246418');" style="">  12 import android.view.accessibility.AccessibilityNodeInfo;                                                 </span>
<span class="6586281964506875986" onmouseenter="enter('6586281964506875986');" onmouseout="out('6586281964506875986');" style="">  13 import android.view.accessibility.AccessibilityNodeInfo.AccessibilityAction;                             </span>
<span  style="">  14                                                                                                          </span>
<span class="-1058861693464722738" onmouseenter="enter('-1058861693464722738');" onmouseout="out('-1058861693464722738');" style="">  15 import com.android.launcher3.util.Thunk;                                                                 </span>
<span  style="">  16                                                                                                          </span>
<span class="9191247685397773893" onmouseenter="enter('9191247685397773893');" onmouseout="out('9191247685397773893');" style="">  17 import java.util.ArrayList;                                                                              </span>
<span  style="">  18                                                                                                          </span>
<span class="-6039390701678024163" onmouseenter="enter('-6039390701678024163');" onmouseout="out('-6039390701678024163');" style="">  19 @TargetApi(Build.VERSION_CODES.LOLLIPOP)                                                                 </span>
<span class="-8878560747020984701" onmouseenter="enter('-8878560747020984701');" onmouseout="out('-8878560747020984701');" style="">  20 public class LauncherAccessibilityDelegate extends AccessibilityDelegate {                               </span>
<span  style="">  21                                                                                                          </span>
<span class="7739564262596514196" onmouseenter="enter('7739564262596514196');" onmouseout="out('7739564262596514196');" style="">  22     private static final String TAG = &quot;LauncherAccessibilityDelegate&quot;;                                   </span>
<span  style="">  23                                                                                                          </span>
<span class="8893345853299725292" onmouseenter="enter('8893345853299725292');" onmouseout="out('8893345853299725292');" style="">  24     private static final int REMOVE = R.id.action_remove;                                                </span>
<span class="-906913215818544777" onmouseenter="enter('-906913215818544777');" onmouseout="out('-906913215818544777');" style="">  25     private static final int INFO = R.id.action_info;                                                    </span>
<span class="-3078740714627643184" onmouseenter="enter('-3078740714627643184');" onmouseout="out('-3078740714627643184');" style="">  26     private static final int UNINSTALL = R.id.action_uninstall;                                          </span>
<span class="5609464324213502199" onmouseenter="enter('5609464324213502199');" onmouseout="out('5609464324213502199');" style="">  27     private static final int ADD_TO_WORKSPACE = R.id.action_add_to_workspace;                            </span>
<span class="6364084580512854800" onmouseenter="enter('6364084580512854800');" onmouseout="out('6364084580512854800');" style="">  28     private static final int MOVE = R.id.action_move;                                                    </span>
<span  style="">  29                                                                                                          </span>
<span class="7598536375028459133" onmouseenter="enter('7598536375028459133');" onmouseout="out('7598536375028459133');" style="">  30 &lt;&lt;&lt;&lt;&lt;&lt;&lt; MINE                                                                                             </span>
<span class="7991106586064342212" onmouseenter="enter('7991106586064342212');" onmouseout="out('7991106586064342212');" style="">  31 ||||||| BASE                                                                                             </span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style="">  32 =======                                                                                                  </span>
<span class="4363964211210821099" onmouseenter="enter('4363964211210821099');" onmouseout="out('4363964211210821099');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  33 public                                                                                                   </span>
<span class="-5027112130205478640" onmouseenter="enter('-5027112130205478640');" onmouseout="out('-5027112130205478640');" style="">  34 &gt;&gt;&gt;&gt;&gt;&gt;&gt; YOURS                                                                                            </span>
<span class="980920831342426459" onmouseenter="enter('980920831342426459');" onmouseout="out('980920831342426459');" style="">  35  enum DragType {                                                                                         </span>
<span class="6599392380188461557" onmouseenter="enter('6599392380188461557');" onmouseout="out('6599392380188461557');" style="">  36         ICON,                                                                                            </span>
<span class="4141185414388590054" onmouseenter="enter('4141185414388590054');" onmouseout="out('4141185414388590054');" style="">  37         FOLDER,                                                                                          </span>
<span class="2776364218855094894" onmouseenter="enter('2776364218855094894');" onmouseout="out('2776364218855094894');" style="">  38         WIDGET                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  39     }                                                                                                    </span>
<span  style="">  40                                                                                                          </span>
<span class="-5747080031433568185" onmouseenter="enter('-5747080031433568185');" onmouseout="out('-5747080031433568185');" style="">  41     public static class DragInfo {                                                                       </span>
<span class="5667865761898587461" onmouseenter="enter('5667865761898587461');" onmouseout="out('5667865761898587461');" style="">  42         public DragType dragType;                                                                        </span>
<span class="-55573915964491385" onmouseenter="enter('-55573915964491385');" onmouseout="out('-55573915964491385');" style="">  43         public ItemInfo info;                                                                            </span>
<span class="-3306033691746941643" onmouseenter="enter('-3306033691746941643');" onmouseout="out('-3306033691746941643');" style="">  44         public View item;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  45     }                                                                                                    </span>
<span  style="">  46                                                                                                          </span>
<span class="-3331479472733402069" onmouseenter="enter('-3331479472733402069');" onmouseout="out('-3331479472733402069');" style="">  47     private final SparseArray&lt;AccessibilityAction&gt; mActions = new SparseArray&lt;&gt;();                       </span>
<span class="-2157599464619833381" onmouseenter="enter('-2157599464619833381');" onmouseout="out('-2157599464619833381');" style="">  48     @Thunk final Launcher mLauncher;                                                                     </span>
<span  style="">  49                                                                                                          </span>
<span class="1250277373004768756" onmouseenter="enter('1250277373004768756');" onmouseout="out('1250277373004768756');" style="">  50     private DragInfo mDragInfo = null;                                                                   </span>
<span class="-7500595780647369513" onmouseenter="enter('-7500595780647369513');" onmouseout="out('-7500595780647369513');" style="">  51     private AccessibilityDragSource mDragSource = null;                                                  </span>
<span  style="">  52                                                                                                          </span>
<span class="9167446891045078982" onmouseenter="enter('9167446891045078982');" onmouseout="out('9167446891045078982');" style="">  53     public LauncherAccessibilityDelegate(Launcher launcher) {                                            </span>
<span class="2298492052814421644" onmouseenter="enter('2298492052814421644');" onmouseout="out('2298492052814421644');" style="">  54         mLauncher = launcher;                                                                            </span>
<span  style="">  55                                                                                                          </span>
<span class="7477697817356762684" onmouseenter="enter('7477697817356762684');" onmouseout="out('7477697817356762684');" style="">  56         mActions.put(REMOVE, new AccessibilityAction(REMOVE,                                             </span>
<span class="-8677850870044205181" onmouseenter="enter('-8677850870044205181');" onmouseout="out('-8677850870044205181');" style="">  57                 launcher.getText(R.string.delete_target_label)));                                        </span>
<span class="-7538644546822342693" onmouseenter="enter('-7538644546822342693');" onmouseout="out('-7538644546822342693');" style="">  58         mActions.put(INFO, new AccessibilityAction(INFO,                                                 </span>
<span class="8147791143155311993" onmouseenter="enter('8147791143155311993');" onmouseout="out('8147791143155311993');" style="">  59                 launcher.getText(R.string.info_target_label)));                                          </span>
<span class="1420094022479585644" onmouseenter="enter('1420094022479585644');" onmouseout="out('1420094022479585644');" style="">  60         mActions.put(UNINSTALL, new AccessibilityAction(UNINSTALL,                                       </span>
<span class="2043043809479027256" onmouseenter="enter('2043043809479027256');" onmouseout="out('2043043809479027256');" style="">  61                 launcher.getText(R.string.delete_target_uninstall_label)));                              </span>
<span class="-1819373127340936143" onmouseenter="enter('-1819373127340936143');" onmouseout="out('-1819373127340936143');" style="">  62         mActions.put(ADD_TO_WORKSPACE, new AccessibilityAction(ADD_TO_WORKSPACE,                         </span>
<span class="4615291248298489067" onmouseenter="enter('4615291248298489067');" onmouseout="out('4615291248298489067');" style="">  63                 launcher.getText(R.string.action_add_to_workspace)));                                    </span>
<span class="4170488603958962915" onmouseenter="enter('4170488603958962915');" onmouseout="out('4170488603958962915');" style="">  64         mActions.put(MOVE, new AccessibilityAction(MOVE,                                                 </span>
<span class="3813665405157640687" onmouseenter="enter('3813665405157640687');" onmouseout="out('3813665405157640687');" style="">  65                 launcher.getText(R.string.action_move)));                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  66     }                                                                                                    </span>
<span  style="">  67                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  68     @Override                                                                                            </span>
<span class="-7273033023326048347" onmouseenter="enter('-7273033023326048347');" onmouseout="out('-7273033023326048347');" style="">  69     public void onInitializeAccessibilityNodeInfo(View host, AccessibilityNodeInfo info) {               </span>
<span class="139648597076357650" onmouseenter="enter('139648597076357650');" onmouseout="out('139648597076357650');" style="">  70         super.onInitializeAccessibilityNodeInfo(host, info);                                             </span>
<span class="-3962068915073104146" onmouseenter="enter('-3962068915073104146');" onmouseout="out('-3962068915073104146');" style="">  71         if (!(host.getTag() instanceof ItemInfo)) return;                                                </span>
<span class="-8132236601557406692" onmouseenter="enter('-8132236601557406692');" onmouseout="out('-8132236601557406692');" style="">  72         ItemInfo item = (ItemInfo) host.getTag();                                                        </span>
<span  style="">  73                                                                                                          </span>
<span class="332367922318480470" onmouseenter="enter('332367922318480470');" onmouseout="out('332367922318480470');" style="">  74         if (DeleteDropTarget.supportsDrop(item)) {                                                       </span>
<span class="-5050217148988535939" onmouseenter="enter('-5050217148988535939');" onmouseout="out('-5050217148988535939');" style="">  75             info.addAction(mActions.get(REMOVE));                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  76         }                                                                                                </span>
<span class="5211990641771115404" onmouseenter="enter('5211990641771115404');" onmouseout="out('5211990641771115404');" style="">  77         if (UninstallDropTarget.supportsDrop(host.getContext(), item)) {                                 </span>
<span class="-5511839775750584533" onmouseenter="enter('-5511839775750584533');" onmouseout="out('-5511839775750584533');" style="">  78             info.addAction(mActions.get(UNINSTALL));                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  79         }                                                                                                </span>
<span class="-6135045490709819928" onmouseenter="enter('-6135045490709819928');" onmouseout="out('-6135045490709819928');" style="">  80         if (InfoDropTarget.supportsDrop(host.getContext(), item)) {                                      </span>
<span class="-8451771459039353306" onmouseenter="enter('-8451771459039353306');" onmouseout="out('-8451771459039353306');" style="">  81             info.addAction(mActions.get(INFO));                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  82         }                                                                                                </span>
<span  style="">  83                                                                                                          </span>
<span class="-4176726828244621568" onmouseenter="enter('-4176726828244621568');" onmouseout="out('-4176726828244621568');" style="">  84         if ((item instanceof ShortcutInfo)                                                               </span>
<span class="92381045715047075" onmouseenter="enter('92381045715047075');" onmouseout="out('92381045715047075');" style="">  85                 || (item instanceof LauncherAppWidgetInfo)                                               </span>
<span class="6290010966115970084" onmouseenter="enter('6290010966115970084');" onmouseout="out('6290010966115970084');" style="">  86                 || (item instanceof FolderInfo)) {                                                       </span>
<span class="1504829505568936375" onmouseenter="enter('1504829505568936375');" onmouseout="out('1504829505568936375');" style="">  87             info.addAction(mActions.get(MOVE));                                                          </span>
<span class="2792177059488094606" onmouseenter="enter('2792177059488094606');" onmouseout="out('2792177059488094606');" style="">  88         } if ((item instanceof AppInfo) || (item instanceof PendingAddItemInfo)) {                       </span>
<span class="8430941158622436374" onmouseenter="enter('8430941158622436374');" onmouseout="out('8430941158622436374');" style="">  89             info.addAction(mActions.get(ADD_TO_WORKSPACE));                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  90         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  91     }                                                                                                    </span>
<span  style="">  92                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  93     @Override                                                                                            </span>
<span class="7722350901789687268" onmouseenter="enter('7722350901789687268');" onmouseout="out('7722350901789687268');" style="">  94     public boolean performAccessibilityAction(View host, int action, Bundle args) {                      </span>
<span class="4006206445105729116" onmouseenter="enter('4006206445105729116');" onmouseout="out('4006206445105729116');" style="">  95         if ((host.getTag() instanceof ItemInfo)                                                          </span>
<span class="-4171950458181942960" onmouseenter="enter('-4171950458181942960');" onmouseout="out('-4171950458181942960');" style="">  96                 &amp;&amp; performAction(host, (ItemInfo) host.getTag(), action)) {                              </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">  97             return true;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  98         }                                                                                                </span>
<span class="8021458927511539515" onmouseenter="enter('8021458927511539515');" onmouseout="out('8021458927511539515');" style="">  99         return super.performAccessibilityAction(host, action, args);                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 100     }                                                                                                    </span>
<span  style=""> 101                                                                                                          </span>
<span class="6279001524996292895" onmouseenter="enter('6279001524996292895');" onmouseout="out('6279001524996292895');" style=""> 102     public boolean performAction(View host, final ItemInfo item, int action) {                           </span>
<span class="4393566890332071869" onmouseenter="enter('4393566890332071869');" onmouseout="out('4393566890332071869');" style=""> 103         if (action == REMOVE) {                                                                          </span>
<span class="-2199579448516118049" onmouseenter="enter('-2199579448516118049');" onmouseout="out('-2199579448516118049');" style=""> 104             if (DeleteDropTarget.removeWorkspaceOrFolderItem(mLauncher, item, host)) {                   </span>
<span class="7360804705563363776" onmouseenter="enter('7360804705563363776');" onmouseout="out('7360804705563363776');" style=""> 105                 announceConfirmation(R.string.item_removed);                                             </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 106                 return true;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 107             }                                                                                            </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 108             return false;                                                                                </span>
<span class="-8596930384082519137" onmouseenter="enter('-8596930384082519137');" onmouseout="out('-8596930384082519137');" style=""> 109         } else if (action == INFO) {                                                                     </span>
<span class="-6081668339733927507" onmouseenter="enter('-6081668339733927507');" onmouseout="out('-6081668339733927507');" style=""> 110             InfoDropTarget.startDetailsActivityForInfo(item, mLauncher);                                 </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 111             return true;                                                                                 </span>
<span class="7336454124525502566" onmouseenter="enter('7336454124525502566');" onmouseout="out('7336454124525502566');" style=""> 112         } else if (action == UNINSTALL) {                                                                </span>
<span class="8153265809648871958" onmouseenter="enter('8153265809648871958');" onmouseout="out('8153265809648871958');" style=""> 113             return UninstallDropTarget.startUninstallActivity(mLauncher, item);                          </span>
<span class="8708031208236508741" onmouseenter="enter('8708031208236508741');" onmouseout="out('8708031208236508741');" style=""> 114         } else if (action == MOVE) {                                                                     </span>
<span class="-4333501895976180099" onmouseenter="enter('-4333501895976180099');" onmouseout="out('-4333501895976180099');" style=""> 115             beginAccessibleDrag(host, item);                                                             </span>
<span class="-7625017878828137005" onmouseenter="enter('-7625017878828137005');" onmouseout="out('-7625017878828137005');" style=""> 116         } else if (action == ADD_TO_WORKSPACE) {                                                         </span>
<span class="-3615093919413674906" onmouseenter="enter('-3615093919413674906');" onmouseout="out('-3615093919413674906');" style=""> 117             final int[] coordinates = new int[2];                                                        </span>
<span class="-501546482527604865" onmouseenter="enter('-501546482527604865');" onmouseout="out('-501546482527604865');" style=""> 118             final long screenId = findSpaceOnWorkspace(item, coordinates);                               </span>
<span class="-3207864149400801965" onmouseenter="enter('-3207864149400801965');" onmouseout="out('-3207864149400801965');" style=""> 119             mLauncher.showWorkspace(true, new Runnable() {                                               </span>
<span  style=""> 120                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 121                 @Override                                                                                </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 122                     public void run() {                                                                  </span>
<span class="3087153248308218904" onmouseenter="enter('3087153248308218904');" onmouseout="out('3087153248308218904');" style=""> 123                     if (item instanceof AppInfo) {                                                       </span>
<span class="-6107650958735857408" onmouseenter="enter('-6107650958735857408');" onmouseout="out('-6107650958735857408');" style=""> 124                         ShortcutInfo info = ((AppInfo) item).makeShortcut();                             </span>
<span class="5831912270471019662" onmouseenter="enter('5831912270471019662');" onmouseout="out('5831912270471019662');" style=""> 125                         LauncherModel.addItemToDatabase(mLauncher, info,                                 </span>
<span class="-99165044777853060" onmouseenter="enter('-99165044777853060');" onmouseout="out('-99165044777853060');" style=""> 126                                 LauncherSettings.Favorites.CONTAINER_DESKTOP,                            </span>
<span class="3929881692587777267" onmouseenter="enter('3929881692587777267');" onmouseout="out('3929881692587777267');" style=""> 127                                 screenId, coordinates[0], coordinates[1]);                               </span>
<span  style=""> 128                                                                                                          </span>
<span class="4676159660764912307" onmouseenter="enter('4676159660764912307');" onmouseout="out('4676159660764912307');" style=""> 129                         ArrayList&lt;ItemInfo&gt; itemList = new ArrayList&lt;&gt;();                                </span>
<span class="-696071559227223371" onmouseenter="enter('-696071559227223371');" onmouseout="out('-696071559227223371');" style=""> 130                         itemList.add(info);                                                              </span>
<span class="2486508908256184960" onmouseenter="enter('2486508908256184960');" onmouseout="out('2486508908256184960');" style=""> 131                         mLauncher.bindItems(itemList, 0, itemList.size(), true);                         </span>
<span class="3786527025674276993" onmouseenter="enter('3786527025674276993');" onmouseout="out('3786527025674276993');" style=""> 132                     } else if (item instanceof PendingAddItemInfo) {                                     </span>
<span class="-2938262450557814973" onmouseenter="enter('-2938262450557814973');" onmouseout="out('-2938262450557814973');" style=""> 133                         PendingAddItemInfo info = (PendingAddItemInfo) item;                             </span>
<span class="-8898517476178795631" onmouseenter="enter('-8898517476178795631');" onmouseout="out('-8898517476178795631');" style=""> 134                         Workspace workspace = mLauncher.getWorkspace();                                  </span>
<span class="-5790022812085146063" onmouseenter="enter('-5790022812085146063');" onmouseout="out('-5790022812085146063');" style=""> 135                         workspace.snapToPage(workspace.getPageIndexForScreenId(screenId));               </span>
<span class="4728923757793069874" onmouseenter="enter('4728923757793069874');" onmouseout="out('4728923757793069874');" style=""> 136                         mLauncher.addPendingItem(info, LauncherSettings.Favorites.CONTAINER_DESKTOP,     </span>
<span class="5623744536898048130" onmouseenter="enter('5623744536898048130');" onmouseout="out('5623744536898048130');" style=""> 137                                 screenId, coordinates, info.spanX, info.spanY);                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 138                     }                                                                                    </span>
<span class="8777719083063569498" onmouseenter="enter('8777719083063569498');" onmouseout="out('8777719083063569498');" style=""> 139                         announceConfirmation(R.string.item_added_to_workspace);                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 140                     }                                                                                    </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 141                 });                                                                                      </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 142                 return true;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 143         }                                                                                                </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 144         return false;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 145     }                                                                                                    </span>
<span  style=""> 146                                                                                                          </span>
<span class="5530528132112250436" onmouseenter="enter('5530528132112250436');" onmouseout="out('5530528132112250436');" style=""> 147     @Thunk void announceConfirmation(int resId) {                                                        </span>
<span class="1966081519457104996" onmouseenter="enter('1966081519457104996');" onmouseout="out('1966081519457104996');" style=""> 148         announceConfirmation(mLauncher.getResources().getString(resId));                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 149     }                                                                                                    </span>
<span  style=""> 150                                                                                                          </span>
<span class="-2504099072851321365" onmouseenter="enter('-2504099072851321365');" onmouseout="out('-2504099072851321365');" style=""> 151     @Thunk void announceConfirmation(String confirmation) {                                              </span>
<span class="-3898733617684276650" onmouseenter="enter('-3898733617684276650');" onmouseout="out('-3898733617684276650');" style=""> 152         mLauncher.getDragLayer().announceForAccessibility(confirmation);                                 </span>
<span  style=""> 153                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 154     }                                                                                                    </span>
<span  style=""> 155                                                                                                          </span>
<span class="1849019295951939912" onmouseenter="enter('1849019295951939912');" onmouseout="out('1849019295951939912');" style=""> 156     public boolean isInAccessibleDrag() {                                                                </span>
<span class="-385827363585866013" onmouseenter="enter('-385827363585866013');" onmouseout="out('-385827363585866013');" style=""> 157         return mDragInfo != null;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 158     }                                                                                                    </span>
<span  style=""> 159                                                                                                          </span>
<span class="-3994168187945610006" onmouseenter="enter('-3994168187945610006');" onmouseout="out('-3994168187945610006');" style=""> 160     public DragInfo getDragInfo() {                                                                      </span>
<span class="8960892273585302890" onmouseenter="enter('8960892273585302890');" onmouseout="out('8960892273585302890');" style=""> 161         return mDragInfo;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 162     }                                                                                                    </span>
<span  style=""> 163                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 164     /**                                                                                                  </span>
<span class="236839442839260132" onmouseenter="enter('236839442839260132');" onmouseout="out('236839442839260132');" style=""> 165      * @param clickedTarget the actual view that was clicked                                             </span>
<span class="-1732490391256382509" onmouseenter="enter('-1732490391256382509');" onmouseout="out('-1732490391256382509');" style=""> 166      * @param dropLocation relative to {@param clickedTarget}. If provided, its center is used           </span>
<span class="6001468343441999873" onmouseenter="enter('6001468343441999873');" onmouseout="out('6001468343441999873');" style=""> 167      * as the actual drop location otherwise the views center is used.                                   </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 168      */                                                                                                  </span>
<span class="-4302569842498638066" onmouseenter="enter('-4302569842498638066');" onmouseout="out('-4302569842498638066');" style=""> 169     public void handleAccessibleDrop(View clickedTarget, Rect dropLocation,                              </span>
<span class="4238978318551738396" onmouseenter="enter('4238978318551738396');" onmouseout="out('4238978318551738396');" style=""> 170             String confirmation) {                                                                       </span>
<span class="6617133783142233290" onmouseenter="enter('6617133783142233290');" onmouseout="out('6617133783142233290');" style=""> 171         if (!isInAccessibleDrag()) return;                                                               </span>
<span  style=""> 172                                                                                                          </span>
<span class="6057327878379417898" onmouseenter="enter('6057327878379417898');" onmouseout="out('6057327878379417898');" style=""> 173         int[] loc = new int[2];                                                                          </span>
<span class="5019373280508910104" onmouseenter="enter('5019373280508910104');" onmouseout="out('5019373280508910104');" style=""> 174         if (dropLocation == null) {                                                                      </span>
<span class="3648597410899046252" onmouseenter="enter('3648597410899046252');" onmouseout="out('3648597410899046252');" style=""> 175             loc[0] = clickedTarget.getWidth() / 2;                                                       </span>
<span class="5878598182157774358" onmouseenter="enter('5878598182157774358');" onmouseout="out('5878598182157774358');" style=""> 176             loc[1] = clickedTarget.getHeight() / 2;                                                      </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 177         } else {                                                                                         </span>
<span class="9008860610152082395" onmouseenter="enter('9008860610152082395');" onmouseout="out('9008860610152082395');" style=""> 178             loc[0] = dropLocation.centerX();                                                             </span>
<span class="638045140581511737" onmouseenter="enter('638045140581511737');" onmouseout="out('638045140581511737');" style=""> 179             loc[1] = dropLocation.centerY();                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 180         }                                                                                                </span>
<span  style=""> 181                                                                                                          </span>
<span class="8787232624983691433" onmouseenter="enter('8787232624983691433');" onmouseout="out('8787232624983691433');" style=""> 182         mLauncher.getDragLayer().getDescendantCoordRelativeToSelf(clickedTarget, loc);                   </span>
<span class="2381924639895412070" onmouseenter="enter('2381924639895412070');" onmouseout="out('2381924639895412070');" style=""> 183         mLauncher.getDragController().completeAccessibleDrag(loc);                                       </span>
<span  style=""> 184                                                                                                          </span>
<span class="-6860671001461264020" onmouseenter="enter('-6860671001461264020');" onmouseout="out('-6860671001461264020');" style=""> 185         endAccessibleDrag();                                                                             </span>
<span class="1428041471467928452" onmouseenter="enter('1428041471467928452');" onmouseout="out('1428041471467928452');" style=""> 186         if (!TextUtils.isEmpty(confirmation)) {                                                          </span>
<span class="-6572664765542834602" onmouseenter="enter('-6572664765542834602');" onmouseout="out('-6572664765542834602');" style=""> 187             announceConfirmation(confirmation);                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 188         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 189     }                                                                                                    </span>
<span  style=""> 190                                                                                                          </span>
<span class="-1129993023030719923" onmouseenter="enter('-1129993023030719923');" onmouseout="out('-1129993023030719923');" style=""> 191     public void beginAccessibleDrag(View item, ItemInfo info) {                                          </span>
<span class="-5250932433146430574" onmouseenter="enter('-5250932433146430574');" onmouseout="out('-5250932433146430574');" style=""> 192         mDragInfo = new DragInfo();                                                                      </span>
<span class="-5461126991672881398" onmouseenter="enter('-5461126991672881398');" onmouseout="out('-5461126991672881398');" style=""> 193         mDragInfo.info = info;                                                                           </span>
<span class="86699917550025500" onmouseenter="enter('86699917550025500');" onmouseout="out('86699917550025500');" style=""> 194         mDragInfo.item = item;                                                                           </span>
<span class="8897282540165502383" onmouseenter="enter('8897282540165502383');" onmouseout="out('8897282540165502383');" style=""> 195         mDragInfo.dragType = DragType.ICON;                                                              </span>
<span class="3055082266956930818" onmouseenter="enter('3055082266956930818');" onmouseout="out('3055082266956930818');" style=""> 196         if (info instanceof FolderInfo) {                                                                </span>
<span class="-305189524123954978" onmouseenter="enter('-305189524123954978');" onmouseout="out('-305189524123954978');" style=""> 197             mDragInfo.dragType = DragType.FOLDER;                                                        </span>
<span class="-1966513537137476875" onmouseenter="enter('-1966513537137476875');" onmouseout="out('-1966513537137476875');" style=""> 198         } else if (info instanceof LauncherAppWidgetInfo) {                                              </span>
<span class="3169679808344239028" onmouseenter="enter('3169679808344239028');" onmouseout="out('3169679808344239028');" style=""> 199             mDragInfo.dragType = DragType.WIDGET;                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 200         }                                                                                                </span>
<span  style=""> 201                                                                                                          </span>
<span class="-2983481679605606769" onmouseenter="enter('-2983481679605606769');" onmouseout="out('-2983481679605606769');" style=""> 202         CellLayout.CellInfo cellInfo = new CellLayout.CellInfo(item, info);                              </span>
<span  style=""> 203                                                                                                          </span>
<span class="6896707850216920608" onmouseenter="enter('6896707850216920608');" onmouseout="out('6896707850216920608');" style=""> 204         Rect pos = new Rect();                                                                           </span>
<span class="8980401198763381287" onmouseenter="enter('8980401198763381287');" onmouseout="out('8980401198763381287');" style=""> 205         mLauncher.getDragLayer().getDescendantRectRelativeToSelf(item, pos);                             </span>
<span class="2681535486778051939" onmouseenter="enter('2681535486778051939');" onmouseout="out('2681535486778051939');" style=""> 206         mLauncher.getDragController().prepareAccessibleDrag(pos.centerX(), pos.centerY());               </span>
<span  style=""> 207                                                                                                          </span>
<span class="-8898517476178795631" onmouseenter="enter('-8898517476178795631');" onmouseout="out('-8898517476178795631');" style=""> 208         Workspace workspace = mLauncher.getWorkspace();                                                  </span>
<span  style=""> 209                                                                                                          </span>
<span class="-2168812538654575513" onmouseenter="enter('-2168812538654575513');" onmouseout="out('-2168812538654575513');" style=""> 210         Folder folder = workspace.getOpenFolder();                                                       </span>
<span class="4345920871391947850" onmouseenter="enter('4345920871391947850');" onmouseout="out('4345920871391947850');" style=""> 211         if (folder != null) {                                                                            </span>
<span class="6561950418490654513" onmouseenter="enter('6561950418490654513');" onmouseout="out('6561950418490654513');" style=""> 212             if (folder.getItemsInReadingOrder().contains(item)) {                                        </span>
<span class="-1482898424830990869" onmouseenter="enter('-1482898424830990869');" onmouseout="out('-1482898424830990869');" style=""> 213                 mDragSource = folder;                                                                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 214             } else {                                                                                     </span>
<span class="1433268111386643131" onmouseenter="enter('1433268111386643131');" onmouseout="out('1433268111386643131');" style=""> 215                 mLauncher.closeFolder();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 216             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 217         }                                                                                                </span>
<span class="7846629690045505805" onmouseenter="enter('7846629690045505805');" onmouseout="out('7846629690045505805');" style=""> 218         if (mDragSource == null) {                                                                       </span>
<span class="413100008976257409" onmouseenter="enter('413100008976257409');" onmouseout="out('413100008976257409');" style=""> 219             mDragSource = workspace;                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 220         }                                                                                                </span>
<span class="5859894574795283871" onmouseenter="enter('5859894574795283871');" onmouseout="out('5859894574795283871');" style=""> 221         mDragSource.enableAccessibleDrag(true);                                                          </span>
<span class="-5926162775184360800" onmouseenter="enter('-5926162775184360800');" onmouseout="out('-5926162775184360800');" style=""> 222         mDragSource.startDrag(cellInfo, true);                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 223     }                                                                                                    </span>
<span  style=""> 224                                                                                                          </span>
<span class="3535599141602360082" onmouseenter="enter('3535599141602360082');" onmouseout="out('3535599141602360082');" style=""> 225     public boolean onBackPressed() {                                                                     </span>
<span class="3564218924313773086" onmouseenter="enter('3564218924313773086');" onmouseout="out('3564218924313773086');" style=""> 226         if (isInAccessibleDrag()) {                                                                      </span>
<span class="-5227244728485293050" onmouseenter="enter('-5227244728485293050');" onmouseout="out('-5227244728485293050');" style=""> 227             cancelAccessibleDrag();                                                                      </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 228             return true;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 229         }                                                                                                </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 230         return false;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 231     }                                                                                                    </span>
<span  style=""> 232                                                                                                          </span>
<span class="-4872468334895712870" onmouseenter="enter('-4872468334895712870');" onmouseout="out('-4872468334895712870');" style=""> 233     private void cancelAccessibleDrag() {                                                                </span>
<span class="-9047723378342617919" onmouseenter="enter('-9047723378342617919');" onmouseout="out('-9047723378342617919');" style=""> 234         mLauncher.getDragController().cancelDrag();                                                      </span>
<span class="-6860671001461264020" onmouseenter="enter('-6860671001461264020');" onmouseout="out('-6860671001461264020');" style=""> 235         endAccessibleDrag();                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 236     }                                                                                                    </span>
<span  style=""> 237                                                                                                          </span>
<span class="-9052858256904418219" onmouseenter="enter('-9052858256904418219');" onmouseout="out('-9052858256904418219');" style=""> 238     private void endAccessibleDrag() {                                                                   </span>
<span class="127949360596562642" onmouseenter="enter('127949360596562642');" onmouseout="out('127949360596562642');" style=""> 239         mDragInfo = null;                                                                                </span>
<span class="-3750607280547723055" onmouseenter="enter('-3750607280547723055');" onmouseout="out('-3750607280547723055');" style=""> 240         if (mDragSource != null) {                                                                       </span>
<span class="-7650855280373105515" onmouseenter="enter('-7650855280373105515');" onmouseout="out('-7650855280373105515');" style=""> 241             mDragSource.enableAccessibleDrag(false);                                                     </span>
<span class="653995248213737484" onmouseenter="enter('653995248213737484');" onmouseout="out('653995248213737484');" style=""> 242             mDragSource = null;                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 243         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 244     }                                                                                                    </span>
<span  style=""> 245                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 246     /**                                                                                                  </span>
<span class="1495145993480841942" onmouseenter="enter('1495145993480841942');" onmouseout="out('1495145993480841942');" style=""> 247      * Find empty space on the workspace and returns the screenId.                                       </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 248      */                                                                                                  </span>
<span class="-8449688355135333212" onmouseenter="enter('-8449688355135333212');" onmouseout="out('-8449688355135333212');" style=""> 249     private long findSpaceOnWorkspace(ItemInfo info, int[] outCoordinates) {                             </span>
<span class="-8898517476178795631" onmouseenter="enter('-8898517476178795631');" onmouseout="out('-8898517476178795631');" style=""> 250         Workspace workspace = mLauncher.getWorkspace();                                                  </span>
<span class="6169180196845895454" onmouseenter="enter('6169180196845895454');" onmouseout="out('6169180196845895454');" style=""> 251         ArrayList&lt;Long&gt; workspaceScreens = workspace.getScreenOrder();                                   </span>
<span class="-4989071319680909609" onmouseenter="enter('-4989071319680909609');" onmouseout="out('-4989071319680909609');" style=""> 252         long screenId;                                                                                   </span>
<span  style=""> 253                                                                                                          </span>
<span class="130449504410014259" onmouseenter="enter('130449504410014259');" onmouseout="out('130449504410014259');" style=""> 254         // First check if there is space on the current screen.                                          </span>
<span class="-8555489554884006467" onmouseenter="enter('-8555489554884006467');" onmouseout="out('-8555489554884006467');" style=""> 255         int screenIndex = workspace.getCurrentPage();                                                    </span>
<span class="-8788546963715178191" onmouseenter="enter('-8788546963715178191');" onmouseout="out('-8788546963715178191');" style=""> 256         screenId = workspaceScreens.get(screenIndex);                                                    </span>
<span class="-7555813705215921025" onmouseenter="enter('-7555813705215921025');" onmouseout="out('-7555813705215921025');" style=""> 257         CellLayout layout = (CellLayout) workspace.getPageAt(screenIndex);                               </span>
<span  style=""> 258                                                                                                          </span>
<span class="9171918301514123154" onmouseenter="enter('9171918301514123154');" onmouseout="out('9171918301514123154');" style=""> 259         boolean found = layout.findCellForSpan(outCoordinates, info.spanX, info.spanY);                  </span>
<span class="-5373004249118909904" onmouseenter="enter('-5373004249118909904');" onmouseout="out('-5373004249118909904');" style=""> 260         screenIndex = workspace.hasCustomContent() ? 1 : 0;                                              </span>
<span class="3330737112868039910" onmouseenter="enter('3330737112868039910');" onmouseout="out('3330737112868039910');" style=""> 261         while (!found &amp;&amp; screenIndex &lt; workspaceScreens.size()) {                                        </span>
<span class="-8788546963715178191" onmouseenter="enter('-8788546963715178191');" onmouseout="out('-8788546963715178191');" style=""> 262             screenId = workspaceScreens.get(screenIndex);                                                </span>
<span class="-9142153871789250127" onmouseenter="enter('-9142153871789250127');" onmouseout="out('-9142153871789250127');" style=""> 263             layout = (CellLayout) workspace.getPageAt(screenIndex);                                      </span>
<span class="-665556803182872133" onmouseenter="enter('-665556803182872133');" onmouseout="out('-665556803182872133');" style=""> 264             found = layout.findCellForSpan(outCoordinates, info.spanX, info.spanY);                      </span>
<span class="-5540441054643006703" onmouseenter="enter('-5540441054643006703');" onmouseout="out('-5540441054643006703');" style=""> 265             screenIndex++;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 266         }                                                                                                </span>
<span  style=""> 267                                                                                                          </span>
<span class="7376901212312568013" onmouseenter="enter('7376901212312568013');" onmouseout="out('7376901212312568013');" style=""> 268         if (found) {                                                                                     </span>
<span class="-5251553830701359394" onmouseenter="enter('-5251553830701359394');" onmouseout="out('-5251553830701359394');" style=""> 269             return screenId;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 270         }                                                                                                </span>
<span  style=""> 271                                                                                                          </span>
<span class="8292819949706702167" onmouseenter="enter('8292819949706702167');" onmouseout="out('8292819949706702167');" style=""> 272         workspace.addExtraEmptyScreen();                                                                 </span>
<span class="6254629974422523980" onmouseenter="enter('6254629974422523980');" onmouseout="out('6254629974422523980');" style=""> 273         screenId = workspace.commitExtraEmptyScreen();                                                   </span>
<span class="-7669745941744532955" onmouseenter="enter('-7669745941744532955');" onmouseout="out('-7669745941744532955');" style=""> 274         layout = workspace.getScreenWithId(screenId);                                                    </span>
<span class="-665556803182872133" onmouseenter="enter('-665556803182872133');" onmouseout="out('-665556803182872133');" style=""> 275         found = layout.findCellForSpan(outCoordinates, info.spanX, info.spanY);                          </span>
<span  style=""> 276                                                                                                          </span>
<span class="8259597404101134668" onmouseenter="enter('8259597404101134668');" onmouseout="out('8259597404101134668');" style=""> 277         if (!found) {                                                                                    </span>
<span class="8444769247492975449" onmouseenter="enter('8444769247492975449');" onmouseout="out('8444769247492975449');" style=""> 278             Log.wtf(TAG, &quot;Not enough space on an empty screen&quot;);                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 279         }                                                                                                </span>
<span class="-5251553830701359394" onmouseenter="enter('-5251553830701359394');" onmouseout="out('-5251553830701359394');" style=""> 280         return screenId;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 281     }                                                                                                    </span>
<span  style=""> 282                                                                                                          </span>
<span class="5577863383748596079" onmouseenter="enter('5577863383748596079');" onmouseout="out('5577863383748596079');" style=""> 283     public static interface AccessibilityDragSource {                                                    </span>
<span class="-4071568384152274162" onmouseenter="enter('-4071568384152274162');" onmouseout="out('-4071568384152274162');" style=""> 284         void startDrag(CellLayout.CellInfo cellInfo, boolean accessible);                                </span>
<span  style=""> 285                                                                                                          </span>
<span class="4842957631066629898" onmouseenter="enter('4842957631066629898');" onmouseout="out('4842957631066629898');" style=""> 286         void enableAccessibleDrag(boolean enable);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 287     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 288 }                                                                                                        </span>






</pre></td>
                            <td><pre><span class="5824586583419512860" onmouseenter="enter('5824586583419512860');" onmouseout="out('5824586583419512860');" style="">   1 package com.android.launcher3;                                                                           </span>
<span  style="">   2                                                                                                          </span>
<span class="-6548293536248798364" onmouseenter="enter('-6548293536248798364');" onmouseout="out('-6548293536248798364');" style="">   3 import android.annotation.TargetApi;                                                                     </span>
<span class="2207333516549486115" onmouseenter="enter('2207333516549486115');" onmouseout="out('2207333516549486115');" style="">   4 import android.graphics.Rect;                                                                            </span>
<span class="-4549785658871057260" onmouseenter="enter('-4549785658871057260');" onmouseout="out('-4549785658871057260');" style="">   5 import android.os.Build;                                                                                 </span>
<span class="8096531590004379472" onmouseenter="enter('8096531590004379472');" onmouseout="out('8096531590004379472');" style="">   6 import android.os.Bundle;                                                                                </span>
<span class="3727887607099278716" onmouseenter="enter('3727887607099278716');" onmouseout="out('3727887607099278716');" style="">   7 import android.text.TextUtils;                                                                           </span>
<span class="7196841398407674858" onmouseenter="enter('7196841398407674858');" onmouseout="out('7196841398407674858');" style="">   8 import android.util.Log;                                                                                 </span>
<span class="-1076320969941752510" onmouseenter="enter('-1076320969941752510');" onmouseout="out('-1076320969941752510');" style="">   9 import android.util.SparseArray;                                                                         </span>
<span class="-8756648299805587161" onmouseenter="enter('-8756648299805587161');" onmouseout="out('-8756648299805587161');" style="">  10 import android.view.View.AccessibilityDelegate;                                                          </span>
<span class="-8980485571216513882" onmouseenter="enter('-8980485571216513882');" onmouseout="out('-8980485571216513882');" style="">  11 import android.view.View;                                                                                </span>
<span class="6586281964506875986" onmouseenter="enter('6586281964506875986');" onmouseout="out('6586281964506875986');" style="">  12 import android.view.accessibility.AccessibilityNodeInfo.AccessibilityAction;                             </span>
<span class="-9138089611195246418" onmouseenter="enter('-9138089611195246418');" onmouseout="out('-9138089611195246418');" style="">  13 import android.view.accessibility.AccessibilityNodeInfo;                                                 </span>
<span class="-1058861693464722738" onmouseenter="enter('-1058861693464722738');" onmouseout="out('-1058861693464722738');" style="">  14 import com.android.launcher3.util.Thunk;                                                                 </span>
<span class="9191247685397773893" onmouseenter="enter('9191247685397773893');" onmouseout="out('9191247685397773893');" style="">  15 import java.util.ArrayList;                                                                              </span>
<span  style="">  16                                                                                                          </span>
<span  style="">  17                                                                                                          </span>
<span class="-6039390701678024163" onmouseenter="enter('-6039390701678024163');" onmouseout="out('-6039390701678024163');" style="">  18 @TargetApi(Build.VERSION_CODES.LOLLIPOP)                                                                 </span>
<span class="-8878560747020984701" onmouseenter="enter('-8878560747020984701');" onmouseout="out('-8878560747020984701');" style="">  19 public class LauncherAccessibilityDelegate extends AccessibilityDelegate {                               </span>
<span class="7739564262596514196" onmouseenter="enter('7739564262596514196');" onmouseout="out('7739564262596514196');" style="">  20     private static final String TAG = &quot;LauncherAccessibilityDelegate&quot;;                                   </span>
<span  style="">  21                                                                                                          </span>
<span class="8893345853299725292" onmouseenter="enter('8893345853299725292');" onmouseout="out('8893345853299725292');" style="">  22     private static final int REMOVE = R.id.action_remove;                                                </span>
<span  style="">  23                                                                                                          </span>
<span class="-906913215818544777" onmouseenter="enter('-906913215818544777');" onmouseout="out('-906913215818544777');" style="">  24     private static final int INFO = R.id.action_info;                                                    </span>
<span  style="">  25                                                                                                          </span>
<span class="-3078740714627643184" onmouseenter="enter('-3078740714627643184');" onmouseout="out('-3078740714627643184');" style="">  26     private static final int UNINSTALL = R.id.action_uninstall;                                          </span>
<span  style="">  27                                                                                                          </span>
<span class="5609464324213502199" onmouseenter="enter('5609464324213502199');" onmouseout="out('5609464324213502199');" style="">  28     private static final int ADD_TO_WORKSPACE = R.id.action_add_to_workspace;                            </span>
<span  style="">  29                                                                                                          </span>
<span class="6364084580512854800" onmouseenter="enter('6364084580512854800');" onmouseout="out('6364084580512854800');" style="">  30     private static final int MOVE = R.id.action_move;                                                    </span>
<span  style="">  31                                                                                                          </span>
<span class="7673266412363792703" onmouseenter="enter('7673266412363792703');" onmouseout="out('7673266412363792703');" style="">  32     public enum DragType {                                                                               </span>
<span  style="">  33                                                                                                          </span>
<span class="6599392380188461557" onmouseenter="enter('6599392380188461557');" onmouseout="out('6599392380188461557');" style="">  34         ICON,                                                                                            </span>
<span class="4141185414388590054" onmouseenter="enter('4141185414388590054');" onmouseout="out('4141185414388590054');" style="">  35         FOLDER,                                                                                          </span>
<span class="-440475584730246393" onmouseenter="enter('-440475584730246393');" onmouseout="out('-440475584730246393');" style="">  36         WIDGET;}                                                                                         </span>
<span  style="">  37                                                                                                          </span>
<span class="-5747080031433568185" onmouseenter="enter('-5747080031433568185');" onmouseout="out('-5747080031433568185');" style="">  38     public static class DragInfo {                                                                       </span>
<span class="5667865761898587461" onmouseenter="enter('5667865761898587461');" onmouseout="out('5667865761898587461');" style="">  39         public DragType dragType;                                                                        </span>
<span  style="">  40                                                                                                          </span>
<span class="-55573915964491385" onmouseenter="enter('-55573915964491385');" onmouseout="out('-55573915964491385');" style="">  41         public ItemInfo info;                                                                            </span>
<span  style="">  42                                                                                                          </span>
<span class="-3306033691746941643" onmouseenter="enter('-3306033691746941643');" onmouseout="out('-3306033691746941643');" style="">  43         public View item;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  44     }                                                                                                    </span>
<span  style="">  45                                                                                                          </span>
<span class="-3331479472733402069" onmouseenter="enter('-3331479472733402069');" onmouseout="out('-3331479472733402069');" style="">  46     private final SparseArray&lt;AccessibilityAction&gt; mActions = new SparseArray&lt;&gt;();                       </span>
<span  style="">  47                                                                                                          </span>
<span class="-2157599464619833381" onmouseenter="enter('-2157599464619833381');" onmouseout="out('-2157599464619833381');" style="">  48     @Thunk final Launcher mLauncher;                                                                     </span>
<span  style="">  49                                                                                                          </span>
<span class="1250277373004768756" onmouseenter="enter('1250277373004768756');" onmouseout="out('1250277373004768756');" style="">  50     private DragInfo mDragInfo = null;                                                                   </span>
<span  style="">  51                                                                                                          </span>
<span class="-7500595780647369513" onmouseenter="enter('-7500595780647369513');" onmouseout="out('-7500595780647369513');" style="">  52     private AccessibilityDragSource mDragSource = null;                                                  </span>
<span  style="">  53                                                                                                          </span>
<span class="9167446891045078982" onmouseenter="enter('9167446891045078982');" onmouseout="out('9167446891045078982');" style="">  54     public LauncherAccessibilityDelegate(Launcher launcher) {                                            </span>
<span class="2298492052814421644" onmouseenter="enter('2298492052814421644');" onmouseout="out('2298492052814421644');" style="">  55         mLauncher = launcher;                                                                            </span>
<span class="3450447563725750368" onmouseenter="enter('3450447563725750368');" onmouseout="out('3450447563725750368');" style=""><abbr title="  56         mActions.put(REMOVE, new AccessibilityAction(REMOVE, launcher.getText(R.string.delete_target_label)));">  56         mActions.put(REMOVE, new AccessibilityAction(REMOVE, launcher.getText(R.string.delete_target_labe🔵</abbr></span>
<span class="-7214370288639068792" onmouseenter="enter('-7214370288639068792');" onmouseout="out('-7214370288639068792');" style="">  57         mActions.put(INFO, new AccessibilityAction(INFO, launcher.getText(R.string.info_target_label))); </span>
<span class="2064334536010227789" onmouseenter="enter('2064334536010227789');" onmouseout="out('2064334536010227789');" style=""><abbr title="  58         mActions.put(UNINSTALL, new AccessibilityAction(UNINSTALL, launcher.getText(R.string.delete_target_uninstall_label)));">  58         mActions.put(UNINSTALL, new AccessibilityAction(UNINSTALL, launcher.getText(R.string.delete_targe🔵</abbr></span>
<span class="-6228426163777656940" onmouseenter="enter('-6228426163777656940');" onmouseout="out('-6228426163777656940');" style=""><abbr title="  59         mActions.put(ADD_TO_WORKSPACE, new AccessibilityAction(ADD_TO_WORKSPACE, launcher.getText(R.string.action_add_to_workspace)));">  59         mActions.put(ADD_TO_WORKSPACE, new AccessibilityAction(ADD_TO_WORKSPACE, launcher.getText(R.strin🔵</abbr></span>
<span class="2870825980530755307" onmouseenter="enter('2870825980530755307');" onmouseout="out('2870825980530755307');" style="">  60         mActions.put(MOVE, new AccessibilityAction(MOVE, launcher.getText(R.string.action_move)));       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  61     }                                                                                                    </span>
<span  style="">  62                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  63     @Override                                                                                            </span>
<span class="-7273033023326048347" onmouseenter="enter('-7273033023326048347');" onmouseout="out('-7273033023326048347');" style="">  64     public void onInitializeAccessibilityNodeInfo(View host, AccessibilityNodeInfo info) {               </span>
<span class="139648597076357650" onmouseenter="enter('139648597076357650');" onmouseout="out('139648597076357650');" style="">  65         super.onInitializeAccessibilityNodeInfo(host, info);                                             </span>
<span class="-3962068915073104146" onmouseenter="enter('-3962068915073104146');" onmouseout="out('-3962068915073104146');" style="">  66         if (!(host.getTag() instanceof ItemInfo)) return;                                                </span>
<span class="-8132236601557406692" onmouseenter="enter('-8132236601557406692');" onmouseout="out('-8132236601557406692');" style="">  67         ItemInfo item = (ItemInfo) host.getTag();                                                        </span>
<span  style="">  68                                                                                                          </span>
<span class="332367922318480470" onmouseenter="enter('332367922318480470');" onmouseout="out('332367922318480470');" style="">  69         if (DeleteDropTarget.supportsDrop(item)) {                                                       </span>
<span class="-5050217148988535939" onmouseenter="enter('-5050217148988535939');" onmouseout="out('-5050217148988535939');" style="">  70             info.addAction(mActions.get(REMOVE));                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  71         }                                                                                                </span>
<span class="5211990641771115404" onmouseenter="enter('5211990641771115404');" onmouseout="out('5211990641771115404');" style="">  72         if (UninstallDropTarget.supportsDrop(host.getContext(), item)) {                                 </span>
<span class="-5511839775750584533" onmouseenter="enter('-5511839775750584533');" onmouseout="out('-5511839775750584533');" style="">  73             info.addAction(mActions.get(UNINSTALL));                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  74         }                                                                                                </span>
<span class="-6135045490709819928" onmouseenter="enter('-6135045490709819928');" onmouseout="out('-6135045490709819928');" style="">  75         if (InfoDropTarget.supportsDrop(host.getContext(), item)) {                                      </span>
<span class="-8451771459039353306" onmouseenter="enter('-8451771459039353306');" onmouseout="out('-8451771459039353306');" style="">  76             info.addAction(mActions.get(INFO));                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  77         }                                                                                                </span>
<span  style="">  78                                                                                                          </span>
<span class="-4176726828244621568" onmouseenter="enter('-4176726828244621568');" onmouseout="out('-4176726828244621568');" style="">  79         if ((item instanceof ShortcutInfo)                                                               </span>
<span class="92381045715047075" onmouseenter="enter('92381045715047075');" onmouseout="out('92381045715047075');" style="">  80                 || (item instanceof LauncherAppWidgetInfo)                                               </span>
<span class="6290010966115970084" onmouseenter="enter('6290010966115970084');" onmouseout="out('6290010966115970084');" style="">  81                 || (item instanceof FolderInfo)) {                                                       </span>
<span class="1504829505568936375" onmouseenter="enter('1504829505568936375');" onmouseout="out('1504829505568936375');" style="">  82             info.addAction(mActions.get(MOVE));                                                          </span>
<span class="2792177059488094606" onmouseenter="enter('2792177059488094606');" onmouseout="out('2792177059488094606');" style="">  83         } if ((item instanceof AppInfo) || (item instanceof PendingAddItemInfo)) {                       </span>
<span class="8430941158622436374" onmouseenter="enter('8430941158622436374');" onmouseout="out('8430941158622436374');" style="">  84             info.addAction(mActions.get(ADD_TO_WORKSPACE));                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  85         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  86     }                                                                                                    </span>
<span  style="">  87                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  88     @Override                                                                                            </span>
<span class="7722350901789687268" onmouseenter="enter('7722350901789687268');" onmouseout="out('7722350901789687268');" style="">  89     public boolean performAccessibilityAction(View host, int action, Bundle args) {                      </span>
<span class="4006206445105729116" onmouseenter="enter('4006206445105729116');" onmouseout="out('4006206445105729116');" style="">  90         if ((host.getTag() instanceof ItemInfo)                                                          </span>
<span class="-4171950458181942960" onmouseenter="enter('-4171950458181942960');" onmouseout="out('-4171950458181942960');" style="">  91                 &amp;&amp; performAction(host, (ItemInfo) host.getTag(), action)) {                              </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">  92             return true;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  93         }                                                                                                </span>
<span class="8021458927511539515" onmouseenter="enter('8021458927511539515');" onmouseout="out('8021458927511539515');" style="">  94         return super.performAccessibilityAction(host, action, args);                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  95     }                                                                                                    </span>
<span  style="">  96                                                                                                          </span>
<span class="6279001524996292895" onmouseenter="enter('6279001524996292895');" onmouseout="out('6279001524996292895');" style="">  97     public boolean performAction(View host, final ItemInfo item, int action) {                           </span>
<span class="4393566890332071869" onmouseenter="enter('4393566890332071869');" onmouseout="out('4393566890332071869');" style="">  98         if (action == REMOVE) {                                                                          </span>
<span class="-2199579448516118049" onmouseenter="enter('-2199579448516118049');" onmouseout="out('-2199579448516118049');" style="">  99             if (DeleteDropTarget.removeWorkspaceOrFolderItem(mLauncher, item, host)) {                   </span>
<span class="7360804705563363776" onmouseenter="enter('7360804705563363776');" onmouseout="out('7360804705563363776');" style=""> 100                 announceConfirmation(R.string.item_removed);                                             </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 101                 return true;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 102             }                                                                                            </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 103             return false;                                                                                </span>
<span class="-8596930384082519137" onmouseenter="enter('-8596930384082519137');" onmouseout="out('-8596930384082519137');" style=""> 104         } else if (action == INFO) {                                                                     </span>
<span class="-6081668339733927507" onmouseenter="enter('-6081668339733927507');" onmouseout="out('-6081668339733927507');" style=""> 105             InfoDropTarget.startDetailsActivityForInfo(item, mLauncher);                                 </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 106             return true;                                                                                 </span>
<span class="7336454124525502566" onmouseenter="enter('7336454124525502566');" onmouseout="out('7336454124525502566');" style=""> 107         } else if (action == UNINSTALL) {                                                                </span>
<span class="8153265809648871958" onmouseenter="enter('8153265809648871958');" onmouseout="out('8153265809648871958');" style=""> 108             return UninstallDropTarget.startUninstallActivity(mLauncher, item);                          </span>
<span class="8708031208236508741" onmouseenter="enter('8708031208236508741');" onmouseout="out('8708031208236508741');" style=""> 109         } else if (action == MOVE) {                                                                     </span>
<span class="-4333501895976180099" onmouseenter="enter('-4333501895976180099');" onmouseout="out('-4333501895976180099');" style=""> 110             beginAccessibleDrag(host, item);                                                             </span>
<span class="-7625017878828137005" onmouseenter="enter('-7625017878828137005');" onmouseout="out('-7625017878828137005');" style=""> 111         } else if (action == ADD_TO_WORKSPACE) {                                                         </span>
<span class="-3615093919413674906" onmouseenter="enter('-3615093919413674906');" onmouseout="out('-3615093919413674906');" style=""> 112             final int[] coordinates = new int[2];                                                        </span>
<span class="-501546482527604865" onmouseenter="enter('-501546482527604865');" onmouseout="out('-501546482527604865');" style=""> 113             final long screenId = findSpaceOnWorkspace(item, coordinates);                               </span>
<span class="-3207864149400801965" onmouseenter="enter('-3207864149400801965');" onmouseout="out('-3207864149400801965');" style=""> 114             mLauncher.showWorkspace(true, new Runnable() {                                               </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 115                 @Override                                                                                </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 116                 public void run() {                                                                      </span>
<span class="3087153248308218904" onmouseenter="enter('3087153248308218904');" onmouseout="out('3087153248308218904');" style=""> 117                     if (item instanceof AppInfo) {                                                       </span>
<span class="1381919971807482231" onmouseenter="enter('1381919971807482231');" onmouseout="out('1381919971807482231');" style=""> 118                         ShortcutInfo info = ((AppInfo) (item)).makeShortcut();                           </span>
<span class="-4393059941465146345" onmouseenter="enter('-4393059941465146345');" onmouseout="out('-4393059941465146345');" style=""><abbr title=" 119                         LauncherModel.addItemToDatabase(mLauncher, info, LauncherSettings.Favorites.CONTAINER_DESKTOP, screenId, coordinates[0], coordinates[1]);"> 119                         LauncherModel.addItemToDatabase(mLauncher, info, LauncherSettings.Favorites.CONTA🔵</abbr></span>
<span class="4676159660764912307" onmouseenter="enter('4676159660764912307');" onmouseout="out('4676159660764912307');" style=""> 120                         ArrayList&lt;ItemInfo&gt; itemList = new ArrayList&lt;&gt;();                                </span>
<span class="-696071559227223371" onmouseenter="enter('-696071559227223371');" onmouseout="out('-696071559227223371');" style=""> 121                         itemList.add(info);                                                              </span>
<span class="2486508908256184960" onmouseenter="enter('2486508908256184960');" onmouseout="out('2486508908256184960');" style=""> 122                         mLauncher.bindItems(itemList, 0, itemList.size(), true);                         </span>
<span class="3786527025674276993" onmouseenter="enter('3786527025674276993');" onmouseout="out('3786527025674276993');" style=""> 123                     } else if (item instanceof PendingAddItemInfo) {                                     </span>
<span class="-3997969260633571277" onmouseenter="enter('-3997969260633571277');" onmouseout="out('-3997969260633571277');" style=""> 124                         PendingAddItemInfo info = ((PendingAddItemInfo) (item));                         </span>
<span class="-8898517476178795631" onmouseenter="enter('-8898517476178795631');" onmouseout="out('-8898517476178795631');" style=""> 125                         Workspace workspace = mLauncher.getWorkspace();                                  </span>
<span class="-5790022812085146063" onmouseenter="enter('-5790022812085146063');" onmouseout="out('-5790022812085146063');" style=""> 126                         workspace.snapToPage(workspace.getPageIndexForScreenId(screenId));               </span>
<span class="6906646278132711726" onmouseenter="enter('6906646278132711726');" onmouseout="out('6906646278132711726');" style=""><abbr title=" 127                         mLauncher.addPendingItem(info, LauncherSettings.Favorites.CONTAINER_DESKTOP, screenId, coordinates, info.spanX, info.spanY);"> 127                         mLauncher.addPendingItem(info, LauncherSettings.Favorites.CONTAINER_DESKTOP, scre🔵</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 128                     }                                                                                    </span>
<span class="8777719083063569498" onmouseenter="enter('8777719083063569498');" onmouseout="out('8777719083063569498');" style=""> 129                     announceConfirmation(R.string.item_added_to_workspace);                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 130                 }                                                                                        </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 131             });                                                                                          </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 132             return true;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 133         }                                                                                                </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 134         return false;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 135     }                                                                                                    </span>
<span  style=""> 136                                                                                                          </span>
<span class="5530528132112250436" onmouseenter="enter('5530528132112250436');" onmouseout="out('5530528132112250436');" style=""> 137     @Thunk void announceConfirmation(int resId) {                                                        </span>
<span class="1966081519457104996" onmouseenter="enter('1966081519457104996');" onmouseout="out('1966081519457104996');" style=""> 138         announceConfirmation(mLauncher.getResources().getString(resId));                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 139     }                                                                                                    </span>
<span  style=""> 140                                                                                                          </span>
<span class="-2504099072851321365" onmouseenter="enter('-2504099072851321365');" onmouseout="out('-2504099072851321365');" style=""> 141     @Thunk void announceConfirmation(String confirmation) {                                              </span>
<span class="-3898733617684276650" onmouseenter="enter('-3898733617684276650');" onmouseout="out('-3898733617684276650');" style=""> 142         mLauncher.getDragLayer().announceForAccessibility(confirmation);                                 </span>
<span  style=""> 143                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 144     }                                                                                                    </span>
<span  style=""> 145                                                                                                          </span>
<span class="1849019295951939912" onmouseenter="enter('1849019295951939912');" onmouseout="out('1849019295951939912');" style=""> 146     public boolean isInAccessibleDrag() {                                                                </span>
<span class="-385827363585866013" onmouseenter="enter('-385827363585866013');" onmouseout="out('-385827363585866013');" style=""> 147         return mDragInfo != null;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 148     }                                                                                                    </span>
<span  style=""> 149                                                                                                          </span>
<span class="-3994168187945610006" onmouseenter="enter('-3994168187945610006');" onmouseout="out('-3994168187945610006');" style=""> 150     public DragInfo getDragInfo() {                                                                      </span>
<span class="8960892273585302890" onmouseenter="enter('8960892273585302890');" onmouseout="out('8960892273585302890');" style=""> 151         return mDragInfo;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 152     }                                                                                                    </span>
<span  style=""> 153                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 154     /**                                                                                                  </span>
<span class="236839442839260132" onmouseenter="enter('236839442839260132');" onmouseout="out('236839442839260132');" style=""> 155      * @param clickedTarget the actual view that was clicked                                             </span>
<span class="-1732490391256382509" onmouseenter="enter('-1732490391256382509');" onmouseout="out('-1732490391256382509');" style=""> 156      * @param dropLocation relative to {@param clickedTarget}. If provided, its center is used           </span>
<span class="6001468343441999873" onmouseenter="enter('6001468343441999873');" onmouseout="out('6001468343441999873');" style=""> 157      * as the actual drop location otherwise the views center is used.                                   </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 158      */                                                                                                  </span>
<span class="-4302569842498638066" onmouseenter="enter('-4302569842498638066');" onmouseout="out('-4302569842498638066');" style=""> 159     public void handleAccessibleDrop(View clickedTarget, Rect dropLocation,                              </span>
<span class="4238978318551738396" onmouseenter="enter('4238978318551738396');" onmouseout="out('4238978318551738396');" style=""> 160             String confirmation) {                                                                       </span>
<span class="6617133783142233290" onmouseenter="enter('6617133783142233290');" onmouseout="out('6617133783142233290');" style=""> 161         if (!isInAccessibleDrag()) return;                                                               </span>
<span  style=""> 162                                                                                                          </span>
<span class="6057327878379417898" onmouseenter="enter('6057327878379417898');" onmouseout="out('6057327878379417898');" style=""> 163         int[] loc = new int[2];                                                                          </span>
<span class="5019373280508910104" onmouseenter="enter('5019373280508910104');" onmouseout="out('5019373280508910104');" style=""> 164         if (dropLocation == null) {                                                                      </span>
<span class="3648597410899046252" onmouseenter="enter('3648597410899046252');" onmouseout="out('3648597410899046252');" style=""> 165             loc[0] = clickedTarget.getWidth() / 2;                                                       </span>
<span class="5878598182157774358" onmouseenter="enter('5878598182157774358');" onmouseout="out('5878598182157774358');" style=""> 166             loc[1] = clickedTarget.getHeight() / 2;                                                      </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 167         } else {                                                                                         </span>
<span class="9008860610152082395" onmouseenter="enter('9008860610152082395');" onmouseout="out('9008860610152082395');" style=""> 168             loc[0] = dropLocation.centerX();                                                             </span>
<span class="638045140581511737" onmouseenter="enter('638045140581511737');" onmouseout="out('638045140581511737');" style=""> 169             loc[1] = dropLocation.centerY();                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 170         }                                                                                                </span>
<span  style=""> 171                                                                                                          </span>
<span class="8787232624983691433" onmouseenter="enter('8787232624983691433');" onmouseout="out('8787232624983691433');" style=""> 172         mLauncher.getDragLayer().getDescendantCoordRelativeToSelf(clickedTarget, loc);                   </span>
<span class="2381924639895412070" onmouseenter="enter('2381924639895412070');" onmouseout="out('2381924639895412070');" style=""> 173         mLauncher.getDragController().completeAccessibleDrag(loc);                                       </span>
<span  style=""> 174                                                                                                          </span>
<span class="-6860671001461264020" onmouseenter="enter('-6860671001461264020');" onmouseout="out('-6860671001461264020');" style=""> 175         endAccessibleDrag();                                                                             </span>
<span class="1428041471467928452" onmouseenter="enter('1428041471467928452');" onmouseout="out('1428041471467928452');" style=""> 176         if (!TextUtils.isEmpty(confirmation)) {                                                          </span>
<span class="-6572664765542834602" onmouseenter="enter('-6572664765542834602');" onmouseout="out('-6572664765542834602');" style=""> 177             announceConfirmation(confirmation);                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 178         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 179     }                                                                                                    </span>
<span  style=""> 180                                                                                                          </span>
<span class="-1129993023030719923" onmouseenter="enter('-1129993023030719923');" onmouseout="out('-1129993023030719923');" style=""> 181     public void beginAccessibleDrag(View item, ItemInfo info) {                                          </span>
<span class="-5250932433146430574" onmouseenter="enter('-5250932433146430574');" onmouseout="out('-5250932433146430574');" style=""> 182         mDragInfo = new DragInfo();                                                                      </span>
<span class="-5461126991672881398" onmouseenter="enter('-5461126991672881398');" onmouseout="out('-5461126991672881398');" style=""> 183         mDragInfo.info = info;                                                                           </span>
<span class="86699917550025500" onmouseenter="enter('86699917550025500');" onmouseout="out('86699917550025500');" style=""> 184         mDragInfo.item = item;                                                                           </span>
<span class="8897282540165502383" onmouseenter="enter('8897282540165502383');" onmouseout="out('8897282540165502383');" style=""> 185         mDragInfo.dragType = DragType.ICON;                                                              </span>
<span class="3055082266956930818" onmouseenter="enter('3055082266956930818');" onmouseout="out('3055082266956930818');" style=""> 186         if (info instanceof FolderInfo) {                                                                </span>
<span class="-305189524123954978" onmouseenter="enter('-305189524123954978');" onmouseout="out('-305189524123954978');" style=""> 187             mDragInfo.dragType = DragType.FOLDER;                                                        </span>
<span class="-1966513537137476875" onmouseenter="enter('-1966513537137476875');" onmouseout="out('-1966513537137476875');" style=""> 188         } else if (info instanceof LauncherAppWidgetInfo) {                                              </span>
<span class="3169679808344239028" onmouseenter="enter('3169679808344239028');" onmouseout="out('3169679808344239028');" style=""> 189             mDragInfo.dragType = DragType.WIDGET;                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 190         }                                                                                                </span>
<span class="-2983481679605606769" onmouseenter="enter('-2983481679605606769');" onmouseout="out('-2983481679605606769');" style=""> 191         CellLayout.CellInfo cellInfo = new CellLayout.CellInfo(item, info);                              </span>
<span class="6896707850216920608" onmouseenter="enter('6896707850216920608');" onmouseout="out('6896707850216920608');" style=""> 192         Rect pos = new Rect();                                                                           </span>
<span class="8980401198763381287" onmouseenter="enter('8980401198763381287');" onmouseout="out('8980401198763381287');" style=""> 193         mLauncher.getDragLayer().getDescendantRectRelativeToSelf(item, pos);                             </span>
<span class="2681535486778051939" onmouseenter="enter('2681535486778051939');" onmouseout="out('2681535486778051939');" style=""> 194         mLauncher.getDragController().prepareAccessibleDrag(pos.centerX(), pos.centerY());               </span>
<span class="-8898517476178795631" onmouseenter="enter('-8898517476178795631');" onmouseout="out('-8898517476178795631');" style=""> 195         Workspace workspace = mLauncher.getWorkspace();                                                  </span>
<span class="-2168812538654575513" onmouseenter="enter('-2168812538654575513');" onmouseout="out('-2168812538654575513');" style=""> 196         Folder folder = workspace.getOpenFolder();                                                       </span>
<span class="4345920871391947850" onmouseenter="enter('4345920871391947850');" onmouseout="out('4345920871391947850');" style=""> 197         if (folder != null) {                                                                            </span>
<span class="6561950418490654513" onmouseenter="enter('6561950418490654513');" onmouseout="out('6561950418490654513');" style=""> 198             if (folder.getItemsInReadingOrder().contains(item)) {                                        </span>
<span class="-1482898424830990869" onmouseenter="enter('-1482898424830990869');" onmouseout="out('-1482898424830990869');" style=""> 199                 mDragSource = folder;                                                                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 200             } else {                                                                                     </span>
<span class="1433268111386643131" onmouseenter="enter('1433268111386643131');" onmouseout="out('1433268111386643131');" style=""> 201                 mLauncher.closeFolder();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 202             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 203         }                                                                                                </span>
<span class="7846629690045505805" onmouseenter="enter('7846629690045505805');" onmouseout="out('7846629690045505805');" style=""> 204         if (mDragSource == null) {                                                                       </span>
<span class="413100008976257409" onmouseenter="enter('413100008976257409');" onmouseout="out('413100008976257409');" style=""> 205             mDragSource = workspace;                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 206         }                                                                                                </span>
<span class="5859894574795283871" onmouseenter="enter('5859894574795283871');" onmouseout="out('5859894574795283871');" style=""> 207         mDragSource.enableAccessibleDrag(true);                                                          </span>
<span class="-5926162775184360800" onmouseenter="enter('-5926162775184360800');" onmouseout="out('-5926162775184360800');" style=""> 208         mDragSource.startDrag(cellInfo, true);                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 209     }                                                                                                    </span>
<span  style=""> 210                                                                                                          </span>
<span class="3535599141602360082" onmouseenter="enter('3535599141602360082');" onmouseout="out('3535599141602360082');" style=""> 211     public boolean onBackPressed() {                                                                     </span>
<span class="3564218924313773086" onmouseenter="enter('3564218924313773086');" onmouseout="out('3564218924313773086');" style=""> 212         if (isInAccessibleDrag()) {                                                                      </span>
<span class="-5227244728485293050" onmouseenter="enter('-5227244728485293050');" onmouseout="out('-5227244728485293050');" style=""> 213             cancelAccessibleDrag();                                                                      </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 214             return true;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 215         }                                                                                                </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 216         return false;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 217     }                                                                                                    </span>
<span  style=""> 218                                                                                                          </span>
<span class="-4872468334895712870" onmouseenter="enter('-4872468334895712870');" onmouseout="out('-4872468334895712870');" style=""> 219     private void cancelAccessibleDrag() {                                                                </span>
<span class="-9047723378342617919" onmouseenter="enter('-9047723378342617919');" onmouseout="out('-9047723378342617919');" style=""> 220         mLauncher.getDragController().cancelDrag();                                                      </span>
<span class="-6860671001461264020" onmouseenter="enter('-6860671001461264020');" onmouseout="out('-6860671001461264020');" style=""> 221         endAccessibleDrag();                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 222     }                                                                                                    </span>
<span  style=""> 223                                                                                                          </span>
<span class="-9052858256904418219" onmouseenter="enter('-9052858256904418219');" onmouseout="out('-9052858256904418219');" style=""> 224     private void endAccessibleDrag() {                                                                   </span>
<span class="127949360596562642" onmouseenter="enter('127949360596562642');" onmouseout="out('127949360596562642');" style=""> 225         mDragInfo = null;                                                                                </span>
<span class="-3750607280547723055" onmouseenter="enter('-3750607280547723055');" onmouseout="out('-3750607280547723055');" style=""> 226         if (mDragSource != null) {                                                                       </span>
<span class="-7650855280373105515" onmouseenter="enter('-7650855280373105515');" onmouseout="out('-7650855280373105515');" style=""> 227             mDragSource.enableAccessibleDrag(false);                                                     </span>
<span class="653995248213737484" onmouseenter="enter('653995248213737484');" onmouseout="out('653995248213737484');" style=""> 228             mDragSource = null;                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 229         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 230     }                                                                                                    </span>
<span  style=""> 231                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 232     /**                                                                                                  </span>
<span class="1495145993480841942" onmouseenter="enter('1495145993480841942');" onmouseout="out('1495145993480841942');" style=""> 233      * Find empty space on the workspace and returns the screenId.                                       </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 234      */                                                                                                  </span>
<span class="-8449688355135333212" onmouseenter="enter('-8449688355135333212');" onmouseout="out('-8449688355135333212');" style=""> 235     private long findSpaceOnWorkspace(ItemInfo info, int[] outCoordinates) {                             </span>
<span class="-8898517476178795631" onmouseenter="enter('-8898517476178795631');" onmouseout="out('-8898517476178795631');" style=""> 236         Workspace workspace = mLauncher.getWorkspace();                                                  </span>
<span class="6169180196845895454" onmouseenter="enter('6169180196845895454');" onmouseout="out('6169180196845895454');" style=""> 237         ArrayList&lt;Long&gt; workspaceScreens = workspace.getScreenOrder();                                   </span>
<span class="-4989071319680909609" onmouseenter="enter('-4989071319680909609');" onmouseout="out('-4989071319680909609');" style=""> 238         long screenId;                                                                                   </span>
<span  style=""> 239                                                                                                          </span>
<span class="130449504410014259" onmouseenter="enter('130449504410014259');" onmouseout="out('130449504410014259');" style=""> 240         // First check if there is space on the current screen.                                          </span>
<span class="-8555489554884006467" onmouseenter="enter('-8555489554884006467');" onmouseout="out('-8555489554884006467');" style=""> 241         int screenIndex = workspace.getCurrentPage();                                                    </span>
<span class="-8788546963715178191" onmouseenter="enter('-8788546963715178191');" onmouseout="out('-8788546963715178191');" style=""> 242         screenId = workspaceScreens.get(screenIndex);                                                    </span>
<span class="-7555813705215921025" onmouseenter="enter('-7555813705215921025');" onmouseout="out('-7555813705215921025');" style=""> 243         CellLayout layout = (CellLayout) workspace.getPageAt(screenIndex);                               </span>
<span  style=""> 244                                                                                                          </span>
<span class="9171918301514123154" onmouseenter="enter('9171918301514123154');" onmouseout="out('9171918301514123154');" style=""> 245         boolean found = layout.findCellForSpan(outCoordinates, info.spanX, info.spanY);                  </span>
<span class="-5373004249118909904" onmouseenter="enter('-5373004249118909904');" onmouseout="out('-5373004249118909904');" style=""> 246         screenIndex = workspace.hasCustomContent() ? 1 : 0;                                              </span>
<span class="3330737112868039910" onmouseenter="enter('3330737112868039910');" onmouseout="out('3330737112868039910');" style=""> 247         while (!found &amp;&amp; screenIndex &lt; workspaceScreens.size()) {                                        </span>
<span class="-8788546963715178191" onmouseenter="enter('-8788546963715178191');" onmouseout="out('-8788546963715178191');" style=""> 248             screenId = workspaceScreens.get(screenIndex);                                                </span>
<span class="-9142153871789250127" onmouseenter="enter('-9142153871789250127');" onmouseout="out('-9142153871789250127');" style=""> 249             layout = (CellLayout) workspace.getPageAt(screenIndex);                                      </span>
<span class="-665556803182872133" onmouseenter="enter('-665556803182872133');" onmouseout="out('-665556803182872133');" style=""> 250             found = layout.findCellForSpan(outCoordinates, info.spanX, info.spanY);                      </span>
<span class="-5540441054643006703" onmouseenter="enter('-5540441054643006703');" onmouseout="out('-5540441054643006703');" style=""> 251             screenIndex++;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 252         }                                                                                                </span>
<span  style=""> 253                                                                                                          </span>
<span class="7376901212312568013" onmouseenter="enter('7376901212312568013');" onmouseout="out('7376901212312568013');" style=""> 254         if (found) {                                                                                     </span>
<span class="-5251553830701359394" onmouseenter="enter('-5251553830701359394');" onmouseout="out('-5251553830701359394');" style=""> 255             return screenId;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 256         }                                                                                                </span>
<span  style=""> 257                                                                                                          </span>
<span class="8292819949706702167" onmouseenter="enter('8292819949706702167');" onmouseout="out('8292819949706702167');" style=""> 258         workspace.addExtraEmptyScreen();                                                                 </span>
<span class="6254629974422523980" onmouseenter="enter('6254629974422523980');" onmouseout="out('6254629974422523980');" style=""> 259         screenId = workspace.commitExtraEmptyScreen();                                                   </span>
<span class="-7669745941744532955" onmouseenter="enter('-7669745941744532955');" onmouseout="out('-7669745941744532955');" style=""> 260         layout = workspace.getScreenWithId(screenId);                                                    </span>
<span class="-665556803182872133" onmouseenter="enter('-665556803182872133');" onmouseout="out('-665556803182872133');" style=""> 261         found = layout.findCellForSpan(outCoordinates, info.spanX, info.spanY);                          </span>
<span  style=""> 262                                                                                                          </span>
<span class="8259597404101134668" onmouseenter="enter('8259597404101134668');" onmouseout="out('8259597404101134668');" style=""> 263         if (!found) {                                                                                    </span>
<span class="8444769247492975449" onmouseenter="enter('8444769247492975449');" onmouseout="out('8444769247492975449');" style=""> 264             Log.wtf(TAG, &quot;Not enough space on an empty screen&quot;);                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 265         }                                                                                                </span>
<span class="-5251553830701359394" onmouseenter="enter('-5251553830701359394');" onmouseout="out('-5251553830701359394');" style=""> 266         return screenId;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 267     }                                                                                                    </span>
<span  style=""> 268                                                                                                          </span>
<span class="5577863383748596079" onmouseenter="enter('5577863383748596079');" onmouseout="out('5577863383748596079');" style=""> 269     public static interface AccessibilityDragSource {                                                    </span>
<span class="2516208561188624524" onmouseenter="enter('2516208561188624524');" onmouseout="out('2516208561188624524');" style=""> 270         public abstract void startDrag(CellLayout.CellInfo cellInfo, boolean accessible);                </span>
<span  style=""> 271                                                                                                          </span>
<span class="6737016048716251847" onmouseenter="enter('6737016048716251847');" onmouseout="out('6737016048716251847');" style=""> 272         public abstract void enableAccessibleDrag(boolean enable);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 273     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 274 }                                                                                                        </span>




















</pre></td>
                        </tr>
                    </table>
                </div>
                <div id="bottom">
                    <table style="margin:auto">
                        <tr>
                            <th>ours vs. base</th>
                            <th>theirs vs. base</th>
                        </tr>
                        <tr>
                            <td><pre><span class="5824586583419512860" onmouseenter="enter('5824586583419512860');" onmouseout="out('5824586583419512860');" style="">   1  package com.android.launcher3;                                                                                    </span>
<span  style="">   2                                                                                                                    </span>
<span class="-6548293536248798364" onmouseenter="enter('-6548293536248798364');" onmouseout="out('-6548293536248798364');" style="">   3  import android.annotation.TargetApi;                                                                              </span>
<span class="2207333516549486115" onmouseenter="enter('2207333516549486115');" onmouseout="out('2207333516549486115');" style="">   4  import android.graphics.Rect;                                                                                     </span>
<span class="-4549785658871057260" onmouseenter="enter('-4549785658871057260');" onmouseout="out('-4549785658871057260');" style="">   5  import android.os.Build;                                                                                          </span>
<span class="8096531590004379472" onmouseenter="enter('8096531590004379472');" onmouseout="out('8096531590004379472');" style="">   6  import android.os.Bundle;                                                                                         </span>
<span class="3727887607099278716" onmouseenter="enter('3727887607099278716');" onmouseout="out('3727887607099278716');" style="">   7  import android.text.TextUtils;                                                                                    </span>
<span class="7196841398407674858" onmouseenter="enter('7196841398407674858');" onmouseout="out('7196841398407674858');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">   8 +import android.util.Log;                                                                                          </span>
<span class="-1076320969941752510" onmouseenter="enter('-1076320969941752510');" onmouseout="out('-1076320969941752510');" style="">   9  import android.util.SparseArray;                                                                                  </span>
<span class="-8980485571216513882" onmouseenter="enter('-8980485571216513882');" onmouseout="out('-8980485571216513882');" style="">  10  import android.view.View;                                                                                         </span>
<span class="-8756648299805587161" onmouseenter="enter('-8756648299805587161');" onmouseout="out('-8756648299805587161');" style="">  11  import android.view.View.AccessibilityDelegate;                                                                   </span>
<span class="-9138089611195246418" onmouseenter="enter('-9138089611195246418');" onmouseout="out('-9138089611195246418');" style="">  12  import android.view.accessibility.AccessibilityNodeInfo;                                                          </span>
<span class="6586281964506875986" onmouseenter="enter('6586281964506875986');" onmouseout="out('6586281964506875986');" style="">  13  import android.view.accessibility.AccessibilityNodeInfo.AccessibilityAction;                                      </span>
<span  style="">  14                                                                                                                    </span>
<span class="-1713087098650106505" onmouseenter="enter('-1713087098650106505');" onmouseout="out('-1713087098650106505');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  15 -import com.android.launcher3.LauncherModel.ScreenPosProvider;                                                     </span>
<span class="-1058861693464722738" onmouseenter="enter('-1058861693464722738');" onmouseout="out('-1058861693464722738');" style="">  16  import com.android.launcher3.util.Thunk;                                                                          </span>
<span  style="">  17                                                                                                                    </span>
<span class="9191247685397773893" onmouseenter="enter('9191247685397773893');" onmouseout="out('9191247685397773893');" style="">  18  import java.util.ArrayList;                                                                                       </span>
<span  style="">  19                                                                                                                    </span>
<span class="-6039390701678024163" onmouseenter="enter('-6039390701678024163');" onmouseout="out('-6039390701678024163');" style="">  20  @TargetApi(Build.VERSION_CODES.LOLLIPOP)                                                                          </span>
<span class="-8878560747020984701" onmouseenter="enter('-8878560747020984701');" onmouseout="out('-8878560747020984701');" style="">  21  public class LauncherAccessibilityDelegate extends AccessibilityDelegate {                                        </span>
<span  style="">  22                                                                                                                    </span>
<span class="-8291270054422931715" onmouseenter="enter('-8291270054422931715');" onmouseout="out('-8291270054422931715');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  23 -    public static final int REMOVE = R.id.action_remove;                                                          </span>
<span class="-4240579085397333593" onmouseenter="enter('-4240579085397333593');" onmouseout="out('-4240579085397333593');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  24 -    public static final int INFO = R.id.action_info;                                                              </span>
<span class="4082251591049698107" onmouseenter="enter('4082251591049698107');" onmouseout="out('4082251591049698107');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  25 -    public static final int UNINSTALL = R.id.action_uninstall;                                                    </span>
<span class="-3154820604586895804" onmouseenter="enter('-3154820604586895804');" onmouseout="out('-3154820604586895804');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  26 -    public static final int ADD_TO_WORKSPACE = R.id.action_add_to_workspace;                                      </span>
<span class="4315824411399435275" onmouseenter="enter('4315824411399435275');" onmouseout="out('4315824411399435275');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  27 -    public static final int MOVE = R.id.action_move;                                                              </span>
<span class="7739564262596514196" onmouseenter="enter('7739564262596514196');" onmouseout="out('7739564262596514196');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  28 +    private static final String TAG = &quot;LauncherAccessibilityDelegate&quot;;                                            </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  29 +                                                                                                                  </span>
<span class="8893345853299725292" onmouseenter="enter('8893345853299725292');" onmouseout="out('8893345853299725292');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  30 +    private static final int REMOVE = R.id.action_remove;                                                         </span>
<span class="-906913215818544777" onmouseenter="enter('-906913215818544777');" onmouseout="out('-906913215818544777');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  31 +    private static final int INFO = R.id.action_info;                                                             </span>
<span class="-3078740714627643184" onmouseenter="enter('-3078740714627643184');" onmouseout="out('-3078740714627643184');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  32 +    private static final int UNINSTALL = R.id.action_uninstall;                                                   </span>
<span class="5609464324213502199" onmouseenter="enter('5609464324213502199');" onmouseout="out('5609464324213502199');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  33 +    private static final int ADD_TO_WORKSPACE = R.id.action_add_to_workspace;                                     </span>
<span class="6364084580512854800" onmouseenter="enter('6364084580512854800');" onmouseout="out('6364084580512854800');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  34 +    private static final int MOVE = R.id.action_move;                                                             </span>
<span  style="">  35                                                                                                                    </span>
<span class="980920831342426459" onmouseenter="enter('980920831342426459');" onmouseout="out('980920831342426459');" style="">  36      enum DragType {                                                                                               </span>

<span class="6599392380188461557" onmouseenter="enter('6599392380188461557');" onmouseout="out('6599392380188461557');" style="">  37          ICON,                                                                                                     </span>
<span class="4141185414388590054" onmouseenter="enter('4141185414388590054');" onmouseout="out('4141185414388590054');" style="">  38          FOLDER,                                                                                                   </span>
<span class="2776364218855094894" onmouseenter="enter('2776364218855094894');" onmouseout="out('2776364218855094894');" style="">  39          WIDGET                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  40      }                                                                                                             </span>
<span  style="">  41                                                                                                                    </span>
<span class="-5747080031433568185" onmouseenter="enter('-5747080031433568185');" onmouseout="out('-5747080031433568185');" style="">  42      public static class DragInfo {                                                                                </span>
<span class="-168576182162282777" onmouseenter="enter('-168576182162282777');" onmouseout="out('-168576182162282777');" style="">  43          DragType dragType;                                                                                        </span>
<span class="-6986563059414353768" onmouseenter="enter('-6986563059414353768');" onmouseout="out('-6986563059414353768');" style="">  44          ItemInfo info;                                                                                            </span>
<span class="3895935870653362158" onmouseenter="enter('3895935870653362158');" onmouseout="out('3895935870653362158');" style="">  45          View item;                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  46      }                                                                                                             </span>
<span  style="">  47                                                                                                                    </span>
<span class="1250277373004768756" onmouseenter="enter('1250277373004768756');" onmouseout="out('1250277373004768756');" style="">  48      private DragInfo mDragInfo = null;                                                                            </span>




<span  style="">  49                                                                                                                    </span>
<span class="5640146400903499996" onmouseenter="enter('5640146400903499996');" onmouseout="out('5640146400903499996');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  50 -    private final SparseArray&lt;AccessibilityAction&gt; mActions =                                                     </span>
<span class="3149191939623373676" onmouseenter="enter('3149191939623373676');" onmouseout="out('3149191939623373676');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  51 -            new SparseArray&lt;AccessibilityAction&gt;();                                                               </span>
<span class="-3331479472733402069" onmouseenter="enter('-3331479472733402069');" onmouseout="out('-3331479472733402069');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  52 +    private final SparseArray&lt;AccessibilityAction&gt; mActions = new SparseArray&lt;&gt;();                                </span>
<span class="-2157599464619833381" onmouseenter="enter('-2157599464619833381');" onmouseout="out('-2157599464619833381');" style="">  53      @Thunk final Launcher mLauncher;                                                                              </span>



<span  style="">  54                                                                                                                    </span>
<span class="9167446891045078982" onmouseenter="enter('9167446891045078982');" onmouseout="out('9167446891045078982');" style="">  55      public LauncherAccessibilityDelegate(Launcher launcher) {                                                     </span>
<span class="2298492052814421644" onmouseenter="enter('2298492052814421644');" onmouseout="out('2298492052814421644');" style="">  56          mLauncher = launcher;                                                                                     </span>
<span  style="">  57                                                                                                                    </span>
<span class="7477697817356762684" onmouseenter="enter('7477697817356762684');" onmouseout="out('7477697817356762684');" style="">  58          mActions.put(REMOVE, new AccessibilityAction(REMOVE,                                                      </span>
<span class="-8677850870044205181" onmouseenter="enter('-8677850870044205181');" onmouseout="out('-8677850870044205181');" style="">  59                  launcher.getText(R.string.delete_target_label)));                                                 </span>
<span class="-7538644546822342693" onmouseenter="enter('-7538644546822342693');" onmouseout="out('-7538644546822342693');" style="">  60          mActions.put(INFO, new AccessibilityAction(INFO,                                                          </span>
<span class="8147791143155311993" onmouseenter="enter('8147791143155311993');" onmouseout="out('8147791143155311993');" style="">  61                  launcher.getText(R.string.info_target_label)));                                                   </span>
<span class="1420094022479585644" onmouseenter="enter('1420094022479585644');" onmouseout="out('1420094022479585644');" style="">  62          mActions.put(UNINSTALL, new AccessibilityAction(UNINSTALL,                                                </span>
<span class="2043043809479027256" onmouseenter="enter('2043043809479027256');" onmouseout="out('2043043809479027256');" style="">  63                  launcher.getText(R.string.delete_target_uninstall_label)));                                       </span>
<span class="-1819373127340936143" onmouseenter="enter('-1819373127340936143');" onmouseout="out('-1819373127340936143');" style="">  64          mActions.put(ADD_TO_WORKSPACE, new AccessibilityAction(ADD_TO_WORKSPACE,                                  </span>
<span class="4615291248298489067" onmouseenter="enter('4615291248298489067');" onmouseout="out('4615291248298489067');" style="">  65                  launcher.getText(R.string.action_add_to_workspace)));                                             </span>
<span class="4170488603958962915" onmouseenter="enter('4170488603958962915');" onmouseout="out('4170488603958962915');" style="">  66          mActions.put(MOVE, new AccessibilityAction(MOVE,                                                          </span>
<span class="3813665405157640687" onmouseenter="enter('3813665405157640687');" onmouseout="out('3813665405157640687');" style="">  67                  launcher.getText(R.string.action_move)));                                                         </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  68 -                                                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  69      }                                                                                                             </span>
<span  style="">  70                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  71      @Override                                                                                                     </span>
<span class="-7273033023326048347" onmouseenter="enter('-7273033023326048347');" onmouseout="out('-7273033023326048347');" style="">  72      public void onInitializeAccessibilityNodeInfo(View host, AccessibilityNodeInfo info) {                        </span>
<span class="139648597076357650" onmouseenter="enter('139648597076357650');" onmouseout="out('139648597076357650');" style="">  73          super.onInitializeAccessibilityNodeInfo(host, info);                                                      </span>
<span class="-3962068915073104146" onmouseenter="enter('-3962068915073104146');" onmouseout="out('-3962068915073104146');" style="">  74          if (!(host.getTag() instanceof ItemInfo)) return;                                                         </span>
<span class="-8132236601557406692" onmouseenter="enter('-8132236601557406692');" onmouseout="out('-8132236601557406692');" style="">  75          ItemInfo item = (ItemInfo) host.getTag();                                                                 </span>
<span  style="">  76                                                                                                                    </span>
<span class="332367922318480470" onmouseenter="enter('332367922318480470');" onmouseout="out('332367922318480470');" style="">  77          if (DeleteDropTarget.supportsDrop(item)) {                                                                </span>
<span class="-5050217148988535939" onmouseenter="enter('-5050217148988535939');" onmouseout="out('-5050217148988535939');" style="">  78              info.addAction(mActions.get(REMOVE));                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  79          }                                                                                                         </span>
<span class="5211990641771115404" onmouseenter="enter('5211990641771115404');" onmouseout="out('5211990641771115404');" style="">  80          if (UninstallDropTarget.supportsDrop(host.getContext(), item)) {                                          </span>
<span class="-5511839775750584533" onmouseenter="enter('-5511839775750584533');" onmouseout="out('-5511839775750584533');" style="">  81              info.addAction(mActions.get(UNINSTALL));                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  82          }                                                                                                         </span>
<span class="-6135045490709819928" onmouseenter="enter('-6135045490709819928');" onmouseout="out('-6135045490709819928');" style="">  83          if (InfoDropTarget.supportsDrop(host.getContext(), item)) {                                               </span>
<span class="-8451771459039353306" onmouseenter="enter('-8451771459039353306');" onmouseout="out('-8451771459039353306');" style="">  84              info.addAction(mActions.get(INFO));                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  85          }                                                                                                         </span>
<span  style="">  86                                                                                                                    </span>
<span class="-4176726828244621568" onmouseenter="enter('-4176726828244621568');" onmouseout="out('-4176726828244621568');" style="">  87          if ((item instanceof ShortcutInfo)                                                                        </span>
<span class="92381045715047075" onmouseenter="enter('92381045715047075');" onmouseout="out('92381045715047075');" style="">  88                  || (item instanceof LauncherAppWidgetInfo)                                                        </span>
<span class="6290010966115970084" onmouseenter="enter('6290010966115970084');" onmouseout="out('6290010966115970084');" style="">  89                  || (item instanceof FolderInfo)) {                                                                </span>
<span class="1504829505568936375" onmouseenter="enter('1504829505568936375');" onmouseout="out('1504829505568936375');" style="">  90              info.addAction(mActions.get(MOVE));                                                                   </span>
<span class="2792177059488094606" onmouseenter="enter('2792177059488094606');" onmouseout="out('2792177059488094606');" style="">  91          } if ((item instanceof AppInfo) || (item instanceof PendingAddItemInfo)) {                                </span>
<span class="8430941158622436374" onmouseenter="enter('8430941158622436374');" onmouseout="out('8430941158622436374');" style="">  92              info.addAction(mActions.get(ADD_TO_WORKSPACE));                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  93          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  94      }                                                                                                             </span>
<span  style="">  95                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  96      @Override                                                                                                     </span>
<span class="7722350901789687268" onmouseenter="enter('7722350901789687268');" onmouseout="out('7722350901789687268');" style="">  97      public boolean performAccessibilityAction(View host, int action, Bundle args) {                               </span>
<span class="4006206445105729116" onmouseenter="enter('4006206445105729116');" onmouseout="out('4006206445105729116');" style="">  98          if ((host.getTag() instanceof ItemInfo)                                                                   </span>
<span class="-4171950458181942960" onmouseenter="enter('-4171950458181942960');" onmouseout="out('-4171950458181942960');" style="">  99                  &amp;&amp; performAction(host, (ItemInfo) host.getTag(), action)) {                                       </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 100              return true;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 101          }                                                                                                         </span>
<span class="8021458927511539515" onmouseenter="enter('8021458927511539515');" onmouseout="out('8021458927511539515');" style=""> 102          return super.performAccessibilityAction(host, action, args);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 103      }                                                                                                             </span>
<span  style=""> 104                                                                                                                    </span>
<span class="4069932620502534029" onmouseenter="enter('4069932620502534029');" onmouseout="out('4069932620502534029');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 105 -    public boolean performAction(View host, ItemInfo item, int action) {                                          </span>
<span class="6279001524996292895" onmouseenter="enter('6279001524996292895');" onmouseout="out('6279001524996292895');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 106 +    public boolean performAction(View host, final ItemInfo item, int action) {                                    </span>
<span class="4393566890332071869" onmouseenter="enter('4393566890332071869');" onmouseout="out('4393566890332071869');" style=""> 107          if (action == REMOVE) {                                                                                   </span>
<span class="-2199579448516118049" onmouseenter="enter('-2199579448516118049');" onmouseout="out('-2199579448516118049');" style=""> 108              if (DeleteDropTarget.removeWorkspaceOrFolderItem(mLauncher, item, host)) {                            </span>
<span class="7360804705563363776" onmouseenter="enter('7360804705563363776');" onmouseout="out('7360804705563363776');" style=""> 109                  announceConfirmation(R.string.item_removed);                                                      </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 110                  return true;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 111              }                                                                                                     </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 112              return false;                                                                                         </span>
<span class="-8596930384082519137" onmouseenter="enter('-8596930384082519137');" onmouseout="out('-8596930384082519137');" style=""> 113          } else if (action == INFO) {                                                                              </span>
<span class="-6081668339733927507" onmouseenter="enter('-6081668339733927507');" onmouseout="out('-6081668339733927507');" style=""> 114              InfoDropTarget.startDetailsActivityForInfo(item, mLauncher);                                          </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 115              return true;                                                                                          </span>
<span class="7336454124525502566" onmouseenter="enter('7336454124525502566');" onmouseout="out('7336454124525502566');" style=""> 116          } else if (action == UNINSTALL) {                                                                         </span>
<span class="8153265809648871958" onmouseenter="enter('8153265809648871958');" onmouseout="out('8153265809648871958');" style=""> 117              return UninstallDropTarget.startUninstallActivity(mLauncher, item);                                   </span>
<span class="8708031208236508741" onmouseenter="enter('8708031208236508741');" onmouseout="out('8708031208236508741');" style=""> 118          } else if (action == MOVE) {                                                                              </span>
<span class="-4333501895976180099" onmouseenter="enter('-4333501895976180099');" onmouseout="out('-4333501895976180099');" style=""> 119              beginAccessibleDrag(host, item);                                                                      </span>
<span class="-7625017878828137005" onmouseenter="enter('-7625017878828137005');" onmouseout="out('-7625017878828137005');" style=""> 120          } else if (action == ADD_TO_WORKSPACE) {                                                                  </span>
<span class="7840247695439077580" onmouseenter="enter('7840247695439077580');" onmouseout="out('7840247695439077580');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 121 -            final int preferredPage = mLauncher.getWorkspace().getCurrentPage();                                  </span>
<span class="-7503040317112429082" onmouseenter="enter('-7503040317112429082');" onmouseout="out('-7503040317112429082');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 122 -            final ScreenPosProvider screenProvider = new ScreenPosProvider() {                                    </span>
<span class="-3615093919413674906" onmouseenter="enter('-3615093919413674906');" onmouseout="out('-3615093919413674906');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 123 +            final int[] coordinates = new int[2];                                                                 </span>
<span class="-501546482527604865" onmouseenter="enter('-501546482527604865');" onmouseout="out('-501546482527604865');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 124 +            final long screenId = findSpaceOnWorkspace(item, coordinates);                                        </span>
<span class="-3207864149400801965" onmouseenter="enter('-3207864149400801965');" onmouseout="out('-3207864149400801965');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 125 +            mLauncher.showWorkspace(true, new Runnable() {                                                        </span>
<span  style=""> 126                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 127                  @Override                                                                                         </span>
<span class="6504896003238256083" onmouseenter="enter('6504896003238256083');" onmouseout="out('6504896003238256083');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 128 -                public int getScreenIndex(ArrayList&lt;Long&gt; screenIDs) {                                            </span>
<span class="264877725477182703" onmouseenter="enter('264877725477182703');" onmouseout="out('264877725477182703');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 129 -                    return preferredPage;                                                                         </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 130 +                public void run() {                                                                               </span>
<span class="3087153248308218904" onmouseenter="enter('3087153248308218904');" onmouseout="out('3087153248308218904');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 131 +                    if (item instanceof AppInfo) {                                                                </span>
<span class="-6107650958735857408" onmouseenter="enter('-6107650958735857408');" onmouseout="out('-6107650958735857408');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 132 +                        ShortcutInfo info = ((AppInfo) item).makeShortcut();                                      </span>
<span class="5831912270471019662" onmouseenter="enter('5831912270471019662');" onmouseout="out('5831912270471019662');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 133 +                        LauncherModel.addItemToDatabase(mLauncher, info,                                          </span>
<span class="-99165044777853060" onmouseenter="enter('-99165044777853060');" onmouseout="out('-99165044777853060');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 134 +                                LauncherSettings.Favorites.CONTAINER_DESKTOP,                                     </span>
<span class="3929881692587777267" onmouseenter="enter('3929881692587777267');" onmouseout="out('3929881692587777267');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 135 +                                screenId, coordinates[0], coordinates[1]);                                        </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 136 +                                                                                                                  </span>
<span class="4676159660764912307" onmouseenter="enter('4676159660764912307');" onmouseout="out('4676159660764912307');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 137 +                        ArrayList&lt;ItemInfo&gt; itemList = new ArrayList&lt;&gt;();                                         </span>
<span class="-696071559227223371" onmouseenter="enter('-696071559227223371');" onmouseout="out('-696071559227223371');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 138 +                        itemList.add(info);                                                                       </span>
<span class="2486508908256184960" onmouseenter="enter('2486508908256184960');" onmouseout="out('2486508908256184960');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 139 +                        mLauncher.bindItems(itemList, 0, itemList.size(), true);                                  </span>
<span class="3786527025674276993" onmouseenter="enter('3786527025674276993');" onmouseout="out('3786527025674276993');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 140 +                    } else if (item instanceof PendingAddItemInfo) {                                              </span>
<span class="-2938262450557814973" onmouseenter="enter('-2938262450557814973');" onmouseout="out('-2938262450557814973');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 141 +                        PendingAddItemInfo info = (PendingAddItemInfo) item;                                      </span>
<span class="-8898517476178795631" onmouseenter="enter('-8898517476178795631');" onmouseout="out('-8898517476178795631');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 142 +                        Workspace workspace = mLauncher.getWorkspace();                                           </span>
<span class="-5790022812085146063" onmouseenter="enter('-5790022812085146063');" onmouseout="out('-5790022812085146063');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 143 +                        workspace.snapToPage(workspace.getPageIndexForScreenId(screenId));                        </span>
<span class="4728923757793069874" onmouseenter="enter('4728923757793069874');" onmouseout="out('4728923757793069874');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 144 +                        mLauncher.addPendingItem(info, LauncherSettings.Favorites.CONTAINER_DESKTOP,              </span>
<span class="5623744536898048130" onmouseenter="enter('5623744536898048130');" onmouseout="out('5623744536898048130');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 145 +                                screenId, coordinates, info.spanX, info.spanY);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 146 +                    }                                                                                             </span>
<span class="8777719083063569498" onmouseenter="enter('8777719083063569498');" onmouseout="out('8777719083063569498');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 147 +                    announceConfirmation(R.string.item_added_to_workspace);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 148                  }                                                                                                 </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 149 -            };                                                                                                    </span>
<span class="3087153248308218904" onmouseenter="enter('3087153248308218904');" onmouseout="out('3087153248308218904');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 150 -            if (item instanceof AppInfo) {                                                                        </span>
<span class="668495607649231711" onmouseenter="enter('668495607649231711');" onmouseout="out('668495607649231711');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 151 -                final ArrayList&lt;ItemInfo&gt; addShortcuts = new ArrayList&lt;ItemInfo&gt;();                               </span>
<span class="5718879838322604717" onmouseenter="enter('5718879838322604717');" onmouseout="out('5718879838322604717');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 152 -                addShortcuts.add(((AppInfo) item).makeShortcut());                                                </span>
<span class="-3207864149400801965" onmouseenter="enter('-3207864149400801965');" onmouseout="out('-3207864149400801965');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 153 -                mLauncher.showWorkspace(true, new Runnable() {                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 154 -                    @Override                                                                                     </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 155 -                    public void run() {                                                                           </span>
<span class="-1987035550833938362" onmouseenter="enter('-1987035550833938362');" onmouseout="out('-1987035550833938362');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 156 -                        mLauncher.getModel().addAndBindAddedWorkspaceItems(                                       </span>
<span class="9122088915268304484" onmouseenter="enter('9122088915268304484');" onmouseout="out('9122088915268304484');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 157 -                                mLauncher, addShortcuts, screenProvider, 0, true);                                </span>
<span class="8777719083063569498" onmouseenter="enter('8777719083063569498');" onmouseout="out('8777719083063569498');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 158 -                        announceConfirmation(R.string.item_added_to_workspace);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 159 -                    }                                                                                             </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 160 -                });                                                                                               </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 161 -                return true;                                                                                      </span>
<span class="3786527025674276993" onmouseenter="enter('3786527025674276993');" onmouseout="out('3786527025674276993');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 162 -            } else if (item instanceof PendingAddItemInfo) {                                                      </span>
<span class="-6407787993250996896" onmouseenter="enter('-6407787993250996896');" onmouseout="out('-6407787993250996896');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 163 -                mLauncher.getModel().addAndBindPendingItem(                                                       </span>
<span class="-6769649078985764469" onmouseenter="enter('-6769649078985764469');" onmouseout="out('-6769649078985764469');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 164 -                        mLauncher, (PendingAddItemInfo) item, screenProvider, 0);                                 </span>
<span class="8777719083063569498" onmouseenter="enter('8777719083063569498');" onmouseout="out('8777719083063569498');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 165 -                announceConfirmation(R.string.item_added_to_workspace);                                           </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 166 -                return true;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 167 -            }                                                                                                     </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 168 +            });                                                                                                   </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 169 +            return true;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 170          }                                                                                                         </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 171          return false;                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 172      }                                                                                                             </span>
<span  style=""> 173                                                                                                                    </span>
<span class="5530528132112250436" onmouseenter="enter('5530528132112250436');" onmouseout="out('5530528132112250436');" style=""> 174      @Thunk void announceConfirmation(int resId) {                                                                 </span>
<span class="1966081519457104996" onmouseenter="enter('1966081519457104996');" onmouseout="out('1966081519457104996');" style=""> 175          announceConfirmation(mLauncher.getResources().getString(resId));                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 176      }                                                                                                             </span>
<span  style=""> 177                                                                                                                    </span>
<span class="-2504099072851321365" onmouseenter="enter('-2504099072851321365');" onmouseout="out('-2504099072851321365');" style=""> 178      @Thunk void announceConfirmation(String confirmation) {                                                       </span>
<span class="-3898733617684276650" onmouseenter="enter('-3898733617684276650');" onmouseout="out('-3898733617684276650');" style=""> 179          mLauncher.getDragLayer().announceForAccessibility(confirmation);                                          </span>
<span  style=""> 180                                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 181      }                                                                                                             </span>
<span  style=""> 182                                                                                                                    </span>
<span class="1849019295951939912" onmouseenter="enter('1849019295951939912');" onmouseout="out('1849019295951939912');" style=""> 183      public boolean isInAccessibleDrag() {                                                                         </span>
<span class="-385827363585866013" onmouseenter="enter('-385827363585866013');" onmouseout="out('-385827363585866013');" style=""> 184          return mDragInfo != null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 185      }                                                                                                             </span>
<span  style=""> 186                                                                                                                    </span>
<span class="-3994168187945610006" onmouseenter="enter('-3994168187945610006');" onmouseout="out('-3994168187945610006');" style=""> 187      public DragInfo getDragInfo() {                                                                               </span>
<span class="8960892273585302890" onmouseenter="enter('8960892273585302890');" onmouseout="out('8960892273585302890');" style=""> 188          return mDragInfo;                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 189      }                                                                                                             </span>
<span  style=""> 190                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 191      /**                                                                                                           </span>
<span class="236839442839260132" onmouseenter="enter('236839442839260132');" onmouseout="out('236839442839260132');" style=""> 192       * @param clickedTarget the actual view that was clicked                                                      </span>
<span class="-1732490391256382509" onmouseenter="enter('-1732490391256382509');" onmouseout="out('-1732490391256382509');" style=""> 193       * @param dropLocation relative to {@param clickedTarget}. If provided, its center is used                    </span>
<span class="6001468343441999873" onmouseenter="enter('6001468343441999873');" onmouseout="out('6001468343441999873');" style=""> 194       * as the actual drop location otherwise the views center is used.                                            </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 195       */                                                                                                           </span>
<span class="-4302569842498638066" onmouseenter="enter('-4302569842498638066');" onmouseout="out('-4302569842498638066');" style=""> 196      public void handleAccessibleDrop(View clickedTarget, Rect dropLocation,                                       </span>
<span class="4238978318551738396" onmouseenter="enter('4238978318551738396');" onmouseout="out('4238978318551738396');" style=""> 197              String confirmation) {                                                                                </span>
<span class="6617133783142233290" onmouseenter="enter('6617133783142233290');" onmouseout="out('6617133783142233290');" style=""> 198          if (!isInAccessibleDrag()) return;                                                                        </span>
<span  style=""> 199                                                                                                                    </span>
<span class="6057327878379417898" onmouseenter="enter('6057327878379417898');" onmouseout="out('6057327878379417898');" style=""> 200          int[] loc = new int[2];                                                                                   </span>
<span class="5019373280508910104" onmouseenter="enter('5019373280508910104');" onmouseout="out('5019373280508910104');" style=""> 201          if (dropLocation == null) {                                                                               </span>
<span class="3648597410899046252" onmouseenter="enter('3648597410899046252');" onmouseout="out('3648597410899046252');" style=""> 202              loc[0] = clickedTarget.getWidth() / 2;                                                                </span>
<span class="5878598182157774358" onmouseenter="enter('5878598182157774358');" onmouseout="out('5878598182157774358');" style=""> 203              loc[1] = clickedTarget.getHeight() / 2;                                                               </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 204          } else {                                                                                                  </span>
<span class="9008860610152082395" onmouseenter="enter('9008860610152082395');" onmouseout="out('9008860610152082395');" style=""> 205              loc[0] = dropLocation.centerX();                                                                      </span>
<span class="638045140581511737" onmouseenter="enter('638045140581511737');" onmouseout="out('638045140581511737');" style=""> 206              loc[1] = dropLocation.centerY();                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 207          }                                                                                                         </span>
<span  style=""> 208                                                                                                                    </span>
<span class="8787232624983691433" onmouseenter="enter('8787232624983691433');" onmouseout="out('8787232624983691433');" style=""> 209          mLauncher.getDragLayer().getDescendantCoordRelativeToSelf(clickedTarget, loc);                            </span>
<span class="2381924639895412070" onmouseenter="enter('2381924639895412070');" onmouseout="out('2381924639895412070');" style=""> 210          mLauncher.getDragController().completeAccessibleDrag(loc);                                                </span>
<span  style=""> 211                                                                                                                    </span>
<span class="-6860671001461264020" onmouseenter="enter('-6860671001461264020');" onmouseout="out('-6860671001461264020');" style=""> 212          endAccessibleDrag();                                                                                      </span>
<span class="1428041471467928452" onmouseenter="enter('1428041471467928452');" onmouseout="out('1428041471467928452');" style=""> 213          if (!TextUtils.isEmpty(confirmation)) {                                                                   </span>
<span class="-6572664765542834602" onmouseenter="enter('-6572664765542834602');" onmouseout="out('-6572664765542834602');" style=""> 214              announceConfirmation(confirmation);                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 215          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 216      }                                                                                                             </span>
<span  style=""> 217                                                                                                                    </span>
<span class="-1129993023030719923" onmouseenter="enter('-1129993023030719923');" onmouseout="out('-1129993023030719923');" style=""> 218      public void beginAccessibleDrag(View item, ItemInfo info) {                                                   </span>
<span class="-5250932433146430574" onmouseenter="enter('-5250932433146430574');" onmouseout="out('-5250932433146430574');" style=""> 219          mDragInfo = new DragInfo();                                                                               </span>
<span class="-5461126991672881398" onmouseenter="enter('-5461126991672881398');" onmouseout="out('-5461126991672881398');" style=""> 220          mDragInfo.info = info;                                                                                    </span>
<span class="86699917550025500" onmouseenter="enter('86699917550025500');" onmouseout="out('86699917550025500');" style=""> 221          mDragInfo.item = item;                                                                                    </span>
<span class="8897282540165502383" onmouseenter="enter('8897282540165502383');" onmouseout="out('8897282540165502383');" style=""> 222          mDragInfo.dragType = DragType.ICON;                                                                       </span>
<span class="3055082266956930818" onmouseenter="enter('3055082266956930818');" onmouseout="out('3055082266956930818');" style=""> 223          if (info instanceof FolderInfo) {                                                                         </span>
<span class="-305189524123954978" onmouseenter="enter('-305189524123954978');" onmouseout="out('-305189524123954978');" style=""> 224              mDragInfo.dragType = DragType.FOLDER;                                                                 </span>
<span class="-1966513537137476875" onmouseenter="enter('-1966513537137476875');" onmouseout="out('-1966513537137476875');" style=""> 225          } else if (info instanceof LauncherAppWidgetInfo) {                                                       </span>
<span class="3169679808344239028" onmouseenter="enter('3169679808344239028');" onmouseout="out('3169679808344239028');" style=""> 226              mDragInfo.dragType = DragType.WIDGET;                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 227          }                                                                                                         </span>
<span  style=""> 228                                                                                                                    </span>
<span class="-2983481679605606769" onmouseenter="enter('-2983481679605606769');" onmouseout="out('-2983481679605606769');" style=""> 229          CellLayout.CellInfo cellInfo = new CellLayout.CellInfo(item, info);                                       </span>
<span  style=""> 230                                                                                                                    </span>
<span class="6896707850216920608" onmouseenter="enter('6896707850216920608');" onmouseout="out('6896707850216920608');" style=""> 231          Rect pos = new Rect();                                                                                    </span>
<span class="8980401198763381287" onmouseenter="enter('8980401198763381287');" onmouseout="out('8980401198763381287');" style=""> 232          mLauncher.getDragLayer().getDescendantRectRelativeToSelf(item, pos);                                      </span>
<span  style=""> 233                                                                                                                    </span>
<span class="2681535486778051939" onmouseenter="enter('2681535486778051939');" onmouseout="out('2681535486778051939');" style=""> 234          mLauncher.getDragController().prepareAccessibleDrag(pos.centerX(), pos.centerY());                        </span>
<span class="-8617534026514829889" onmouseenter="enter('-8617534026514829889');" onmouseout="out('-8617534026514829889');" style=""> 235          mLauncher.getWorkspace().enableAccessibleDrag(true);                                                      </span>
<span class="1952351581193865747" onmouseenter="enter('1952351581193865747');" onmouseout="out('1952351581193865747');" style=""> 236          mLauncher.getWorkspace().startDrag(cellInfo, true);                                                       </span>
















<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 237      }                                                                                                             </span>
<span  style=""> 238                                                                                                                    </span>
<span class="3535599141602360082" onmouseenter="enter('3535599141602360082');" onmouseout="out('3535599141602360082');" style=""> 239      public boolean onBackPressed() {                                                                              </span>
<span class="3564218924313773086" onmouseenter="enter('3564218924313773086');" onmouseout="out('3564218924313773086');" style=""> 240          if (isInAccessibleDrag()) {                                                                               </span>
<span class="-5227244728485293050" onmouseenter="enter('-5227244728485293050');" onmouseout="out('-5227244728485293050');" style=""> 241              cancelAccessibleDrag();                                                                               </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 242              return true;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 243          }                                                                                                         </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 244          return false;                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 245      }                                                                                                             </span>
<span  style=""> 246                                                                                                                    </span>
<span class="-4872468334895712870" onmouseenter="enter('-4872468334895712870');" onmouseout="out('-4872468334895712870');" style=""> 247      private void cancelAccessibleDrag() {                                                                         </span>
<span class="-9047723378342617919" onmouseenter="enter('-9047723378342617919');" onmouseout="out('-9047723378342617919');" style=""> 248          mLauncher.getDragController().cancelDrag();                                                               </span>
<span class="-6860671001461264020" onmouseenter="enter('-6860671001461264020');" onmouseout="out('-6860671001461264020');" style=""> 249          endAccessibleDrag();                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 250      }                                                                                                             </span>
<span  style=""> 251                                                                                                                    </span>
<span class="-9052858256904418219" onmouseenter="enter('-9052858256904418219');" onmouseout="out('-9052858256904418219');" style=""> 252      private void endAccessibleDrag() {                                                                            </span>
<span class="127949360596562642" onmouseenter="enter('127949360596562642');" onmouseout="out('127949360596562642');" style=""> 253          mDragInfo = null;                                                                                         </span>
<span class="-1899017350007489645" onmouseenter="enter('-1899017350007489645');" onmouseout="out('-1899017350007489645');" style=""> 254          mLauncher.getWorkspace().enableAccessibleDrag(false);                                                     </span>










<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 255      }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 256 +                                                                                                                  </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 257 +    /**                                                                                                           </span>
<span class="1495145993480841942" onmouseenter="enter('1495145993480841942');" onmouseout="out('1495145993480841942');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 258 +     * Find empty space on the workspace and returns the screenId.                                                </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 259 +     */                                                                                                           </span>
<span class="-8449688355135333212" onmouseenter="enter('-8449688355135333212');" onmouseout="out('-8449688355135333212');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 260 +    private long findSpaceOnWorkspace(ItemInfo info, int[] outCoordinates) {                                      </span>
<span class="-8898517476178795631" onmouseenter="enter('-8898517476178795631');" onmouseout="out('-8898517476178795631');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 261 +        Workspace workspace = mLauncher.getWorkspace();                                                           </span>
<span class="6169180196845895454" onmouseenter="enter('6169180196845895454');" onmouseout="out('6169180196845895454');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 262 +        ArrayList&lt;Long&gt; workspaceScreens = workspace.getScreenOrder();                                            </span>
<span class="-4989071319680909609" onmouseenter="enter('-4989071319680909609');" onmouseout="out('-4989071319680909609');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 263 +        long screenId;                                                                                            </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 264 +                                                                                                                  </span>
<span class="130449504410014259" onmouseenter="enter('130449504410014259');" onmouseout="out('130449504410014259');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 265 +        // First check if there is space on the current screen.                                                   </span>
<span class="-8555489554884006467" onmouseenter="enter('-8555489554884006467');" onmouseout="out('-8555489554884006467');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 266 +        int screenIndex = workspace.getCurrentPage();                                                             </span>
<span class="-8788546963715178191" onmouseenter="enter('-8788546963715178191');" onmouseout="out('-8788546963715178191');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 267 +        screenId = workspaceScreens.get(screenIndex);                                                             </span>
<span class="-7555813705215921025" onmouseenter="enter('-7555813705215921025');" onmouseout="out('-7555813705215921025');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 268 +        CellLayout layout = (CellLayout) workspace.getPageAt(screenIndex);                                        </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 269 +                                                                                                                  </span>
<span class="9171918301514123154" onmouseenter="enter('9171918301514123154');" onmouseout="out('9171918301514123154');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 270 +        boolean found = layout.findCellForSpan(outCoordinates, info.spanX, info.spanY);                           </span>
<span class="-5373004249118909904" onmouseenter="enter('-5373004249118909904');" onmouseout="out('-5373004249118909904');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 271 +        screenIndex = workspace.hasCustomContent() ? 1 : 0;                                                       </span>
<span class="3330737112868039910" onmouseenter="enter('3330737112868039910');" onmouseout="out('3330737112868039910');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 272 +        while (!found &amp;&amp; screenIndex &lt; workspaceScreens.size()) {                                                 </span>
<span class="-8788546963715178191" onmouseenter="enter('-8788546963715178191');" onmouseout="out('-8788546963715178191');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 273 +            screenId = workspaceScreens.get(screenIndex);                                                         </span>
<span class="-9142153871789250127" onmouseenter="enter('-9142153871789250127');" onmouseout="out('-9142153871789250127');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 274 +            layout = (CellLayout) workspace.getPageAt(screenIndex);                                               </span>
<span class="-665556803182872133" onmouseenter="enter('-665556803182872133');" onmouseout="out('-665556803182872133');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 275 +            found = layout.findCellForSpan(outCoordinates, info.spanX, info.spanY);                               </span>
<span class="-5540441054643006703" onmouseenter="enter('-5540441054643006703');" onmouseout="out('-5540441054643006703');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 276 +            screenIndex++;                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 277 +        }                                                                                                         </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 278 +                                                                                                                  </span>
<span class="7376901212312568013" onmouseenter="enter('7376901212312568013');" onmouseout="out('7376901212312568013');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 279 +        if (found) {                                                                                              </span>
<span class="-5251553830701359394" onmouseenter="enter('-5251553830701359394');" onmouseout="out('-5251553830701359394');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 280 +            return screenId;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 281 +        }                                                                                                         </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 282 +                                                                                                                  </span>
<span class="8292819949706702167" onmouseenter="enter('8292819949706702167');" onmouseout="out('8292819949706702167');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 283 +        workspace.addExtraEmptyScreen();                                                                          </span>
<span class="6254629974422523980" onmouseenter="enter('6254629974422523980');" onmouseout="out('6254629974422523980');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 284 +        screenId = workspace.commitExtraEmptyScreen();                                                            </span>
<span class="-7669745941744532955" onmouseenter="enter('-7669745941744532955');" onmouseout="out('-7669745941744532955');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 285 +        layout = workspace.getScreenWithId(screenId);                                                             </span>
<span class="-665556803182872133" onmouseenter="enter('-665556803182872133');" onmouseout="out('-665556803182872133');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 286 +        found = layout.findCellForSpan(outCoordinates, info.spanX, info.spanY);                                   </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 287 +                                                                                                                  </span>
<span class="8259597404101134668" onmouseenter="enter('8259597404101134668');" onmouseout="out('8259597404101134668');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 288 +        if (!found) {                                                                                             </span>
<span class="8444769247492975449" onmouseenter="enter('8444769247492975449');" onmouseout="out('8444769247492975449');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 289 +            Log.wtf(TAG, &quot;Not enough space on an empty screen&quot;);                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 290 +        }                                                                                                         </span>
<span class="-5251553830701359394" onmouseenter="enter('-5251553830701359394');" onmouseout="out('-5251553830701359394');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 291 +        return screenId;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 292 +    }                                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 293  }                                                                                                                 </span></pre></td>
                            <td><pre><span class="5824586583419512860" onmouseenter="enter('5824586583419512860');" onmouseout="out('5824586583419512860');" style="">   1  package com.android.launcher3;                                                                                    </span>
<span  style="">   2                                                                                                                    </span>
<span class="-6548293536248798364" onmouseenter="enter('-6548293536248798364');" onmouseout="out('-6548293536248798364');" style="">   3  import android.annotation.TargetApi;                                                                              </span>
<span class="2207333516549486115" onmouseenter="enter('2207333516549486115');" onmouseout="out('2207333516549486115');" style="">   4  import android.graphics.Rect;                                                                                     </span>
<span class="-4549785658871057260" onmouseenter="enter('-4549785658871057260');" onmouseout="out('-4549785658871057260');" style="">   5  import android.os.Build;                                                                                          </span>
<span class="8096531590004379472" onmouseenter="enter('8096531590004379472');" onmouseout="out('8096531590004379472');" style="">   6  import android.os.Bundle;                                                                                         </span>
<span class="3727887607099278716" onmouseenter="enter('3727887607099278716');" onmouseout="out('3727887607099278716');" style="">   7  import android.text.TextUtils;                                                                                    </span>

<span class="-1076320969941752510" onmouseenter="enter('-1076320969941752510');" onmouseout="out('-1076320969941752510');" style="">   8  import android.util.SparseArray;                                                                                  </span>
<span class="-8980485571216513882" onmouseenter="enter('-8980485571216513882');" onmouseout="out('-8980485571216513882');" style="">   9  import android.view.View;                                                                                         </span>
<span class="-8756648299805587161" onmouseenter="enter('-8756648299805587161');" onmouseout="out('-8756648299805587161');" style="">  10  import android.view.View.AccessibilityDelegate;                                                                   </span>
<span class="-9138089611195246418" onmouseenter="enter('-9138089611195246418');" onmouseout="out('-9138089611195246418');" style="">  11  import android.view.accessibility.AccessibilityNodeInfo;                                                          </span>
<span class="6586281964506875986" onmouseenter="enter('6586281964506875986');" onmouseout="out('6586281964506875986');" style="">  12  import android.view.accessibility.AccessibilityNodeInfo.AccessibilityAction;                                      </span>
<span  style="">  13                                                                                                                    </span>
<span class="-1713087098650106505" onmouseenter="enter('-1713087098650106505');" onmouseout="out('-1713087098650106505');" style="">  14  import com.android.launcher3.LauncherModel.ScreenPosProvider;                                                     </span>
<span class="-1058861693464722738" onmouseenter="enter('-1058861693464722738');" onmouseout="out('-1058861693464722738');" style="">  15  import com.android.launcher3.util.Thunk;                                                                          </span>
<span  style="">  16                                                                                                                    </span>
<span class="9191247685397773893" onmouseenter="enter('9191247685397773893');" onmouseout="out('9191247685397773893');" style="">  17  import java.util.ArrayList;                                                                                       </span>
<span  style="">  18                                                                                                                    </span>
<span class="-6039390701678024163" onmouseenter="enter('-6039390701678024163');" onmouseout="out('-6039390701678024163');" style="">  19  @TargetApi(Build.VERSION_CODES.LOLLIPOP)                                                                          </span>
<span class="-8878560747020984701" onmouseenter="enter('-8878560747020984701');" onmouseout="out('-8878560747020984701');" style="">  20  public class LauncherAccessibilityDelegate extends AccessibilityDelegate {                                        </span>
<span  style="">  21                                                                                                                    </span>
<span class="-8291270054422931715" onmouseenter="enter('-8291270054422931715');" onmouseout="out('-8291270054422931715');" style="">  22      public static final int REMOVE = R.id.action_remove;                                                          </span>
<span class="-4240579085397333593" onmouseenter="enter('-4240579085397333593');" onmouseout="out('-4240579085397333593');" style="">  23      public static final int INFO = R.id.action_info;                                                              </span>
<span class="4082251591049698107" onmouseenter="enter('4082251591049698107');" onmouseout="out('4082251591049698107');" style="">  24      public static final int UNINSTALL = R.id.action_uninstall;                                                    </span>
<span class="-3154820604586895804" onmouseenter="enter('-3154820604586895804');" onmouseout="out('-3154820604586895804');" style="">  25      public static final int ADD_TO_WORKSPACE = R.id.action_add_to_workspace;                                      </span>
<span class="4315824411399435275" onmouseenter="enter('4315824411399435275');" onmouseout="out('4315824411399435275');" style="">  26      public static final int MOVE = R.id.action_move;                                                              </span>







<span  style="">  27                                                                                                                    </span>
<span class="980920831342426459" onmouseenter="enter('980920831342426459');" onmouseout="out('980920831342426459');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  28 -    enum DragType {                                                                                               </span>
<span class="7673266412363792703" onmouseenter="enter('7673266412363792703');" onmouseout="out('7673266412363792703');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  29 +    public enum DragType {                                                                                        </span>
<span class="6599392380188461557" onmouseenter="enter('6599392380188461557');" onmouseout="out('6599392380188461557');" style="">  30          ICON,                                                                                                     </span>
<span class="4141185414388590054" onmouseenter="enter('4141185414388590054');" onmouseout="out('4141185414388590054');" style="">  31          FOLDER,                                                                                                   </span>
<span class="2776364218855094894" onmouseenter="enter('2776364218855094894');" onmouseout="out('2776364218855094894');" style="">  32          WIDGET                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  33      }                                                                                                             </span>
<span  style="">  34                                                                                                                    </span>
<span class="-5747080031433568185" onmouseenter="enter('-5747080031433568185');" onmouseout="out('-5747080031433568185');" style="">  35      public static class DragInfo {                                                                                </span>
<span class="-168576182162282777" onmouseenter="enter('-168576182162282777');" onmouseout="out('-168576182162282777');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  36 -        DragType dragType;                                                                                        </span>
<span class="-6986563059414353768" onmouseenter="enter('-6986563059414353768');" onmouseout="out('-6986563059414353768');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  37 -        ItemInfo info;                                                                                            </span>
<span class="3895935870653362158" onmouseenter="enter('3895935870653362158');" onmouseout="out('3895935870653362158');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  38 -        View item;                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  39 -    }                                                                                                             </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  40 -                                                                                                                  </span>
<span class="1250277373004768756" onmouseenter="enter('1250277373004768756');" onmouseout="out('1250277373004768756');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  41 -    private DragInfo mDragInfo = null;                                                                            </span>
<span class="5667865761898587461" onmouseenter="enter('5667865761898587461');" onmouseout="out('5667865761898587461');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  42 +        public DragType dragType;                                                                                 </span>
<span class="-55573915964491385" onmouseenter="enter('-55573915964491385');" onmouseout="out('-55573915964491385');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  43 +        public ItemInfo info;                                                                                     </span>
<span class="-3306033691746941643" onmouseenter="enter('-3306033691746941643');" onmouseout="out('-3306033691746941643');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  44 +        public View item;                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  45 +    }                                                                                                             </span>
<span  style="">  46                                                                                                                    </span>
<span class="5640146400903499996" onmouseenter="enter('5640146400903499996');" onmouseout="out('5640146400903499996');" style="">  47      private final SparseArray&lt;AccessibilityAction&gt; mActions =                                                     </span>
<span class="3149191939623373676" onmouseenter="enter('3149191939623373676');" onmouseout="out('3149191939623373676');" style="">  48              new SparseArray&lt;AccessibilityAction&gt;();                                                               </span>

<span class="-2157599464619833381" onmouseenter="enter('-2157599464619833381');" onmouseout="out('-2157599464619833381');" style="">  49      @Thunk final Launcher mLauncher;                                                                              </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  50 +                                                                                                                  </span>
<span class="1250277373004768756" onmouseenter="enter('1250277373004768756');" onmouseout="out('1250277373004768756');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  51 +    private DragInfo mDragInfo = null;                                                                            </span>
<span class="-7500595780647369513" onmouseenter="enter('-7500595780647369513');" onmouseout="out('-7500595780647369513');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  52 +    private AccessibilityDragSource mDragSource = null;                                                           </span>
<span  style="">  53                                                                                                                    </span>
<span class="9167446891045078982" onmouseenter="enter('9167446891045078982');" onmouseout="out('9167446891045078982');" style="">  54      public LauncherAccessibilityDelegate(Launcher launcher) {                                                     </span>
<span class="2298492052814421644" onmouseenter="enter('2298492052814421644');" onmouseout="out('2298492052814421644');" style="">  55          mLauncher = launcher;                                                                                     </span>
<span  style="">  56                                                                                                                    </span>
<span class="7477697817356762684" onmouseenter="enter('7477697817356762684');" onmouseout="out('7477697817356762684');" style="">  57          mActions.put(REMOVE, new AccessibilityAction(REMOVE,                                                      </span>
<span class="-8677850870044205181" onmouseenter="enter('-8677850870044205181');" onmouseout="out('-8677850870044205181');" style="">  58                  launcher.getText(R.string.delete_target_label)));                                                 </span>
<span class="-7538644546822342693" onmouseenter="enter('-7538644546822342693');" onmouseout="out('-7538644546822342693');" style="">  59          mActions.put(INFO, new AccessibilityAction(INFO,                                                          </span>
<span class="8147791143155311993" onmouseenter="enter('8147791143155311993');" onmouseout="out('8147791143155311993');" style="">  60                  launcher.getText(R.string.info_target_label)));                                                   </span>
<span class="1420094022479585644" onmouseenter="enter('1420094022479585644');" onmouseout="out('1420094022479585644');" style="">  61          mActions.put(UNINSTALL, new AccessibilityAction(UNINSTALL,                                                </span>
<span class="2043043809479027256" onmouseenter="enter('2043043809479027256');" onmouseout="out('2043043809479027256');" style="">  62                  launcher.getText(R.string.delete_target_uninstall_label)));                                       </span>
<span class="-1819373127340936143" onmouseenter="enter('-1819373127340936143');" onmouseout="out('-1819373127340936143');" style="">  63          mActions.put(ADD_TO_WORKSPACE, new AccessibilityAction(ADD_TO_WORKSPACE,                                  </span>
<span class="4615291248298489067" onmouseenter="enter('4615291248298489067');" onmouseout="out('4615291248298489067');" style="">  64                  launcher.getText(R.string.action_add_to_workspace)));                                             </span>
<span class="4170488603958962915" onmouseenter="enter('4170488603958962915');" onmouseout="out('4170488603958962915');" style="">  65          mActions.put(MOVE, new AccessibilityAction(MOVE,                                                          </span>
<span class="3813665405157640687" onmouseenter="enter('3813665405157640687');" onmouseout="out('3813665405157640687');" style="">  66                  launcher.getText(R.string.action_move)));                                                         </span>
<span  style="">  67                                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  68      }                                                                                                             </span>
<span  style="">  69                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  70      @Override                                                                                                     </span>
<span class="-7273033023326048347" onmouseenter="enter('-7273033023326048347');" onmouseout="out('-7273033023326048347');" style="">  71      public void onInitializeAccessibilityNodeInfo(View host, AccessibilityNodeInfo info) {                        </span>
<span class="139648597076357650" onmouseenter="enter('139648597076357650');" onmouseout="out('139648597076357650');" style="">  72          super.onInitializeAccessibilityNodeInfo(host, info);                                                      </span>
<span class="-3962068915073104146" onmouseenter="enter('-3962068915073104146');" onmouseout="out('-3962068915073104146');" style="">  73          if (!(host.getTag() instanceof ItemInfo)) return;                                                         </span>
<span class="-8132236601557406692" onmouseenter="enter('-8132236601557406692');" onmouseout="out('-8132236601557406692');" style="">  74          ItemInfo item = (ItemInfo) host.getTag();                                                                 </span>
<span  style="">  75                                                                                                                    </span>
<span class="332367922318480470" onmouseenter="enter('332367922318480470');" onmouseout="out('332367922318480470');" style="">  76          if (DeleteDropTarget.supportsDrop(item)) {                                                                </span>
<span class="-5050217148988535939" onmouseenter="enter('-5050217148988535939');" onmouseout="out('-5050217148988535939');" style="">  77              info.addAction(mActions.get(REMOVE));                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  78          }                                                                                                         </span>
<span class="5211990641771115404" onmouseenter="enter('5211990641771115404');" onmouseout="out('5211990641771115404');" style="">  79          if (UninstallDropTarget.supportsDrop(host.getContext(), item)) {                                          </span>
<span class="-5511839775750584533" onmouseenter="enter('-5511839775750584533');" onmouseout="out('-5511839775750584533');" style="">  80              info.addAction(mActions.get(UNINSTALL));                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  81          }                                                                                                         </span>
<span class="-6135045490709819928" onmouseenter="enter('-6135045490709819928');" onmouseout="out('-6135045490709819928');" style="">  82          if (InfoDropTarget.supportsDrop(host.getContext(), item)) {                                               </span>
<span class="-8451771459039353306" onmouseenter="enter('-8451771459039353306');" onmouseout="out('-8451771459039353306');" style="">  83              info.addAction(mActions.get(INFO));                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  84          }                                                                                                         </span>
<span  style="">  85                                                                                                                    </span>
<span class="-4176726828244621568" onmouseenter="enter('-4176726828244621568');" onmouseout="out('-4176726828244621568');" style="">  86          if ((item instanceof ShortcutInfo)                                                                        </span>
<span class="92381045715047075" onmouseenter="enter('92381045715047075');" onmouseout="out('92381045715047075');" style="">  87                  || (item instanceof LauncherAppWidgetInfo)                                                        </span>
<span class="6290010966115970084" onmouseenter="enter('6290010966115970084');" onmouseout="out('6290010966115970084');" style="">  88                  || (item instanceof FolderInfo)) {                                                                </span>
<span class="1504829505568936375" onmouseenter="enter('1504829505568936375');" onmouseout="out('1504829505568936375');" style="">  89              info.addAction(mActions.get(MOVE));                                                                   </span>
<span class="2792177059488094606" onmouseenter="enter('2792177059488094606');" onmouseout="out('2792177059488094606');" style="">  90          } if ((item instanceof AppInfo) || (item instanceof PendingAddItemInfo)) {                                </span>
<span class="8430941158622436374" onmouseenter="enter('8430941158622436374');" onmouseout="out('8430941158622436374');" style="">  91              info.addAction(mActions.get(ADD_TO_WORKSPACE));                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  92          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  93      }                                                                                                             </span>
<span  style="">  94                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  95      @Override                                                                                                     </span>
<span class="7722350901789687268" onmouseenter="enter('7722350901789687268');" onmouseout="out('7722350901789687268');" style="">  96      public boolean performAccessibilityAction(View host, int action, Bundle args) {                               </span>
<span class="4006206445105729116" onmouseenter="enter('4006206445105729116');" onmouseout="out('4006206445105729116');" style="">  97          if ((host.getTag() instanceof ItemInfo)                                                                   </span>
<span class="-4171950458181942960" onmouseenter="enter('-4171950458181942960');" onmouseout="out('-4171950458181942960');" style="">  98                  &amp;&amp; performAction(host, (ItemInfo) host.getTag(), action)) {                                       </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">  99              return true;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 100          }                                                                                                         </span>
<span class="8021458927511539515" onmouseenter="enter('8021458927511539515');" onmouseout="out('8021458927511539515');" style=""> 101          return super.performAccessibilityAction(host, action, args);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 102      }                                                                                                             </span>
<span  style=""> 103                                                                                                                    </span>
<span class="4069932620502534029" onmouseenter="enter('4069932620502534029');" onmouseout="out('4069932620502534029');" style=""> 104      public boolean performAction(View host, ItemInfo item, int action) {                                          </span>

<span class="4393566890332071869" onmouseenter="enter('4393566890332071869');" onmouseout="out('4393566890332071869');" style=""> 105          if (action == REMOVE) {                                                                                   </span>
<span class="-2199579448516118049" onmouseenter="enter('-2199579448516118049');" onmouseout="out('-2199579448516118049');" style=""> 106              if (DeleteDropTarget.removeWorkspaceOrFolderItem(mLauncher, item, host)) {                            </span>
<span class="7360804705563363776" onmouseenter="enter('7360804705563363776');" onmouseout="out('7360804705563363776');" style=""> 107                  announceConfirmation(R.string.item_removed);                                                      </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 108                  return true;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 109              }                                                                                                     </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 110              return false;                                                                                         </span>
<span class="-8596930384082519137" onmouseenter="enter('-8596930384082519137');" onmouseout="out('-8596930384082519137');" style=""> 111          } else if (action == INFO) {                                                                              </span>
<span class="-6081668339733927507" onmouseenter="enter('-6081668339733927507');" onmouseout="out('-6081668339733927507');" style=""> 112              InfoDropTarget.startDetailsActivityForInfo(item, mLauncher);                                          </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 113              return true;                                                                                          </span>
<span class="7336454124525502566" onmouseenter="enter('7336454124525502566');" onmouseout="out('7336454124525502566');" style=""> 114          } else if (action == UNINSTALL) {                                                                         </span>
<span class="8153265809648871958" onmouseenter="enter('8153265809648871958');" onmouseout="out('8153265809648871958');" style=""> 115              return UninstallDropTarget.startUninstallActivity(mLauncher, item);                                   </span>
<span class="8708031208236508741" onmouseenter="enter('8708031208236508741');" onmouseout="out('8708031208236508741');" style=""> 116          } else if (action == MOVE) {                                                                              </span>
<span class="-4333501895976180099" onmouseenter="enter('-4333501895976180099');" onmouseout="out('-4333501895976180099');" style=""> 117              beginAccessibleDrag(host, item);                                                                      </span>
<span class="-7625017878828137005" onmouseenter="enter('-7625017878828137005');" onmouseout="out('-7625017878828137005');" style=""> 118          } else if (action == ADD_TO_WORKSPACE) {                                                                  </span>
<span class="7840247695439077580" onmouseenter="enter('7840247695439077580');" onmouseout="out('7840247695439077580');" style=""> 119              final int preferredPage = mLauncher.getWorkspace().getCurrentPage();                                  </span>
<span class="-7503040317112429082" onmouseenter="enter('-7503040317112429082');" onmouseout="out('-7503040317112429082');" style=""> 120              final ScreenPosProvider screenProvider = new ScreenPosProvider() {                                    </span>



<span  style=""> 121                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 122                  @Override                                                                                         </span>
<span class="6504896003238256083" onmouseenter="enter('6504896003238256083');" onmouseout="out('6504896003238256083');" style=""> 123                  public int getScreenIndex(ArrayList&lt;Long&gt; screenIDs) {                                            </span>
<span class="264877725477182703" onmouseenter="enter('264877725477182703');" onmouseout="out('264877725477182703');" style=""> 124                      return preferredPage;                                                                         </span>


















<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 125                  }                                                                                                 </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 126              };                                                                                                    </span>
<span class="3087153248308218904" onmouseenter="enter('3087153248308218904');" onmouseout="out('3087153248308218904');" style=""> 127              if (item instanceof AppInfo) {                                                                        </span>
<span class="668495607649231711" onmouseenter="enter('668495607649231711');" onmouseout="out('668495607649231711');" style=""> 128                  final ArrayList&lt;ItemInfo&gt; addShortcuts = new ArrayList&lt;ItemInfo&gt;();                               </span>
<span class="5718879838322604717" onmouseenter="enter('5718879838322604717');" onmouseout="out('5718879838322604717');" style=""> 129                  addShortcuts.add(((AppInfo) item).makeShortcut());                                                </span>
<span class="-3207864149400801965" onmouseenter="enter('-3207864149400801965');" onmouseout="out('-3207864149400801965');" style=""> 130                  mLauncher.showWorkspace(true, new Runnable() {                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 131                      @Override                                                                                     </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 132                      public void run() {                                                                           </span>
<span class="-1987035550833938362" onmouseenter="enter('-1987035550833938362');" onmouseout="out('-1987035550833938362');" style=""> 133                          mLauncher.getModel().addAndBindAddedWorkspaceItems(                                       </span>
<span class="9122088915268304484" onmouseenter="enter('9122088915268304484');" onmouseout="out('9122088915268304484');" style=""> 134                                  mLauncher, addShortcuts, screenProvider, 0, true);                                </span>
<span class="8777719083063569498" onmouseenter="enter('8777719083063569498');" onmouseout="out('8777719083063569498');" style=""> 135                          announceConfirmation(R.string.item_added_to_workspace);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 136                      }                                                                                             </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 137                  });                                                                                               </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 138                  return true;                                                                                      </span>
<span class="3786527025674276993" onmouseenter="enter('3786527025674276993');" onmouseout="out('3786527025674276993');" style=""> 139              } else if (item instanceof PendingAddItemInfo) {                                                      </span>
<span class="-6407787993250996896" onmouseenter="enter('-6407787993250996896');" onmouseout="out('-6407787993250996896');" style=""> 140                  mLauncher.getModel().addAndBindPendingItem(                                                       </span>
<span class="-6769649078985764469" onmouseenter="enter('-6769649078985764469');" onmouseout="out('-6769649078985764469');" style=""> 141                          mLauncher, (PendingAddItemInfo) item, screenProvider, 0);                                 </span>
<span class="8777719083063569498" onmouseenter="enter('8777719083063569498');" onmouseout="out('8777719083063569498');" style=""> 142                  announceConfirmation(R.string.item_added_to_workspace);                                           </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 143                  return true;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 144              }                                                                                                     </span>


<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 145          }                                                                                                         </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 146          return false;                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 147      }                                                                                                             </span>
<span  style=""> 148                                                                                                                    </span>
<span class="5530528132112250436" onmouseenter="enter('5530528132112250436');" onmouseout="out('5530528132112250436');" style=""> 149      @Thunk void announceConfirmation(int resId) {                                                                 </span>
<span class="1966081519457104996" onmouseenter="enter('1966081519457104996');" onmouseout="out('1966081519457104996');" style=""> 150          announceConfirmation(mLauncher.getResources().getString(resId));                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 151      }                                                                                                             </span>
<span  style=""> 152                                                                                                                    </span>
<span class="-2504099072851321365" onmouseenter="enter('-2504099072851321365');" onmouseout="out('-2504099072851321365');" style=""> 153      @Thunk void announceConfirmation(String confirmation) {                                                       </span>
<span class="-3898733617684276650" onmouseenter="enter('-3898733617684276650');" onmouseout="out('-3898733617684276650');" style=""> 154          mLauncher.getDragLayer().announceForAccessibility(confirmation);                                          </span>
<span  style=""> 155                                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 156      }                                                                                                             </span>
<span  style=""> 157                                                                                                                    </span>
<span class="1849019295951939912" onmouseenter="enter('1849019295951939912');" onmouseout="out('1849019295951939912');" style=""> 158      public boolean isInAccessibleDrag() {                                                                         </span>
<span class="-385827363585866013" onmouseenter="enter('-385827363585866013');" onmouseout="out('-385827363585866013');" style=""> 159          return mDragInfo != null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 160      }                                                                                                             </span>
<span  style=""> 161                                                                                                                    </span>
<span class="-3994168187945610006" onmouseenter="enter('-3994168187945610006');" onmouseout="out('-3994168187945610006');" style=""> 162      public DragInfo getDragInfo() {                                                                               </span>
<span class="8960892273585302890" onmouseenter="enter('8960892273585302890');" onmouseout="out('8960892273585302890');" style=""> 163          return mDragInfo;                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 164      }                                                                                                             </span>
<span  style=""> 165                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 166      /**                                                                                                           </span>
<span class="236839442839260132" onmouseenter="enter('236839442839260132');" onmouseout="out('236839442839260132');" style=""> 167       * @param clickedTarget the actual view that was clicked                                                      </span>
<span class="-1732490391256382509" onmouseenter="enter('-1732490391256382509');" onmouseout="out('-1732490391256382509');" style=""> 168       * @param dropLocation relative to {@param clickedTarget}. If provided, its center is used                    </span>
<span class="6001468343441999873" onmouseenter="enter('6001468343441999873');" onmouseout="out('6001468343441999873');" style=""> 169       * as the actual drop location otherwise the views center is used.                                            </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 170       */                                                                                                           </span>
<span class="-4302569842498638066" onmouseenter="enter('-4302569842498638066');" onmouseout="out('-4302569842498638066');" style=""> 171      public void handleAccessibleDrop(View clickedTarget, Rect dropLocation,                                       </span>
<span class="4238978318551738396" onmouseenter="enter('4238978318551738396');" onmouseout="out('4238978318551738396');" style=""> 172              String confirmation) {                                                                                </span>
<span class="6617133783142233290" onmouseenter="enter('6617133783142233290');" onmouseout="out('6617133783142233290');" style=""> 173          if (!isInAccessibleDrag()) return;                                                                        </span>
<span  style=""> 174                                                                                                                    </span>
<span class="6057327878379417898" onmouseenter="enter('6057327878379417898');" onmouseout="out('6057327878379417898');" style=""> 175          int[] loc = new int[2];                                                                                   </span>
<span class="5019373280508910104" onmouseenter="enter('5019373280508910104');" onmouseout="out('5019373280508910104');" style=""> 176          if (dropLocation == null) {                                                                               </span>
<span class="3648597410899046252" onmouseenter="enter('3648597410899046252');" onmouseout="out('3648597410899046252');" style=""> 177              loc[0] = clickedTarget.getWidth() / 2;                                                                </span>
<span class="5878598182157774358" onmouseenter="enter('5878598182157774358');" onmouseout="out('5878598182157774358');" style=""> 178              loc[1] = clickedTarget.getHeight() / 2;                                                               </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 179          } else {                                                                                                  </span>
<span class="9008860610152082395" onmouseenter="enter('9008860610152082395');" onmouseout="out('9008860610152082395');" style=""> 180              loc[0] = dropLocation.centerX();                                                                      </span>
<span class="638045140581511737" onmouseenter="enter('638045140581511737');" onmouseout="out('638045140581511737');" style=""> 181              loc[1] = dropLocation.centerY();                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 182          }                                                                                                         </span>
<span  style=""> 183                                                                                                                    </span>
<span class="8787232624983691433" onmouseenter="enter('8787232624983691433');" onmouseout="out('8787232624983691433');" style=""> 184          mLauncher.getDragLayer().getDescendantCoordRelativeToSelf(clickedTarget, loc);                            </span>
<span class="2381924639895412070" onmouseenter="enter('2381924639895412070');" onmouseout="out('2381924639895412070');" style=""> 185          mLauncher.getDragController().completeAccessibleDrag(loc);                                                </span>
<span  style=""> 186                                                                                                                    </span>
<span class="-6860671001461264020" onmouseenter="enter('-6860671001461264020');" onmouseout="out('-6860671001461264020');" style=""> 187          endAccessibleDrag();                                                                                      </span>
<span class="1428041471467928452" onmouseenter="enter('1428041471467928452');" onmouseout="out('1428041471467928452');" style=""> 188          if (!TextUtils.isEmpty(confirmation)) {                                                                   </span>
<span class="-6572664765542834602" onmouseenter="enter('-6572664765542834602');" onmouseout="out('-6572664765542834602');" style=""> 189              announceConfirmation(confirmation);                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 190          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 191      }                                                                                                             </span>
<span  style=""> 192                                                                                                                    </span>
<span class="-1129993023030719923" onmouseenter="enter('-1129993023030719923');" onmouseout="out('-1129993023030719923');" style=""> 193      public void beginAccessibleDrag(View item, ItemInfo info) {                                                   </span>
<span class="-5250932433146430574" onmouseenter="enter('-5250932433146430574');" onmouseout="out('-5250932433146430574');" style=""> 194          mDragInfo = new DragInfo();                                                                               </span>
<span class="-5461126991672881398" onmouseenter="enter('-5461126991672881398');" onmouseout="out('-5461126991672881398');" style=""> 195          mDragInfo.info = info;                                                                                    </span>
<span class="86699917550025500" onmouseenter="enter('86699917550025500');" onmouseout="out('86699917550025500');" style=""> 196          mDragInfo.item = item;                                                                                    </span>
<span class="8897282540165502383" onmouseenter="enter('8897282540165502383');" onmouseout="out('8897282540165502383');" style=""> 197          mDragInfo.dragType = DragType.ICON;                                                                       </span>
<span class="3055082266956930818" onmouseenter="enter('3055082266956930818');" onmouseout="out('3055082266956930818');" style=""> 198          if (info instanceof FolderInfo) {                                                                         </span>
<span class="-305189524123954978" onmouseenter="enter('-305189524123954978');" onmouseout="out('-305189524123954978');" style=""> 199              mDragInfo.dragType = DragType.FOLDER;                                                                 </span>
<span class="-1966513537137476875" onmouseenter="enter('-1966513537137476875');" onmouseout="out('-1966513537137476875');" style=""> 200          } else if (info instanceof LauncherAppWidgetInfo) {                                                       </span>
<span class="3169679808344239028" onmouseenter="enter('3169679808344239028');" onmouseout="out('3169679808344239028');" style=""> 201              mDragInfo.dragType = DragType.WIDGET;                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 202          }                                                                                                         </span>
<span  style=""> 203                                                                                                                    </span>
<span class="-2983481679605606769" onmouseenter="enter('-2983481679605606769');" onmouseout="out('-2983481679605606769');" style=""> 204          CellLayout.CellInfo cellInfo = new CellLayout.CellInfo(item, info);                                       </span>
<span  style=""> 205                                                                                                                    </span>
<span class="6896707850216920608" onmouseenter="enter('6896707850216920608');" onmouseout="out('6896707850216920608');" style=""> 206          Rect pos = new Rect();                                                                                    </span>
<span class="8980401198763381287" onmouseenter="enter('8980401198763381287');" onmouseout="out('8980401198763381287');" style=""> 207          mLauncher.getDragLayer().getDescendantRectRelativeToSelf(item, pos);                                      </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 208 -                                                                                                                  </span>
<span class="2681535486778051939" onmouseenter="enter('2681535486778051939');" onmouseout="out('2681535486778051939');" style=""> 209          mLauncher.getDragController().prepareAccessibleDrag(pos.centerX(), pos.centerY());                        </span>
<span class="-8617534026514829889" onmouseenter="enter('-8617534026514829889');" onmouseout="out('-8617534026514829889');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 210 -        mLauncher.getWorkspace().enableAccessibleDrag(true);                                                      </span>
<span class="1952351581193865747" onmouseenter="enter('1952351581193865747');" onmouseout="out('1952351581193865747');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 211 -        mLauncher.getWorkspace().startDrag(cellInfo, true);                                                       </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 212 +                                                                                                                  </span>
<span class="-8898517476178795631" onmouseenter="enter('-8898517476178795631');" onmouseout="out('-8898517476178795631');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 213 +        Workspace workspace = mLauncher.getWorkspace();                                                           </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 214 +                                                                                                                  </span>
<span class="-2168812538654575513" onmouseenter="enter('-2168812538654575513');" onmouseout="out('-2168812538654575513');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 215 +        Folder folder = workspace.getOpenFolder();                                                                </span>
<span class="4345920871391947850" onmouseenter="enter('4345920871391947850');" onmouseout="out('4345920871391947850');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 216 +        if (folder != null) {                                                                                     </span>
<span class="6561950418490654513" onmouseenter="enter('6561950418490654513');" onmouseout="out('6561950418490654513');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 217 +            if (folder.getItemsInReadingOrder().contains(item)) {                                                 </span>
<span class="-1482898424830990869" onmouseenter="enter('-1482898424830990869');" onmouseout="out('-1482898424830990869');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 218 +                mDragSource = folder;                                                                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 219 +            } else {                                                                                              </span>
<span class="1433268111386643131" onmouseenter="enter('1433268111386643131');" onmouseout="out('1433268111386643131');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 220 +                mLauncher.closeFolder();                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 221 +            }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 222 +        }                                                                                                         </span>
<span class="7846629690045505805" onmouseenter="enter('7846629690045505805');" onmouseout="out('7846629690045505805');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 223 +        if (mDragSource == null) {                                                                                </span>
<span class="413100008976257409" onmouseenter="enter('413100008976257409');" onmouseout="out('413100008976257409');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 224 +            mDragSource = workspace;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 225 +        }                                                                                                         </span>
<span class="5859894574795283871" onmouseenter="enter('5859894574795283871');" onmouseout="out('5859894574795283871');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 226 +        mDragSource.enableAccessibleDrag(true);                                                                   </span>
<span class="-5926162775184360800" onmouseenter="enter('-5926162775184360800');" onmouseout="out('-5926162775184360800');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 227 +        mDragSource.startDrag(cellInfo, true);                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 228      }                                                                                                             </span>
<span  style=""> 229                                                                                                                    </span>
<span class="3535599141602360082" onmouseenter="enter('3535599141602360082');" onmouseout="out('3535599141602360082');" style=""> 230      public boolean onBackPressed() {                                                                              </span>
<span class="3564218924313773086" onmouseenter="enter('3564218924313773086');" onmouseout="out('3564218924313773086');" style=""> 231          if (isInAccessibleDrag()) {                                                                               </span>
<span class="-5227244728485293050" onmouseenter="enter('-5227244728485293050');" onmouseout="out('-5227244728485293050');" style=""> 232              cancelAccessibleDrag();                                                                               </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 233              return true;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 234          }                                                                                                         </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 235          return false;                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 236      }                                                                                                             </span>
<span  style=""> 237                                                                                                                    </span>
<span class="-4872468334895712870" onmouseenter="enter('-4872468334895712870');" onmouseout="out('-4872468334895712870');" style=""> 238      private void cancelAccessibleDrag() {                                                                         </span>
<span class="-9047723378342617919" onmouseenter="enter('-9047723378342617919');" onmouseout="out('-9047723378342617919');" style=""> 239          mLauncher.getDragController().cancelDrag();                                                               </span>
<span class="-6860671001461264020" onmouseenter="enter('-6860671001461264020');" onmouseout="out('-6860671001461264020');" style=""> 240          endAccessibleDrag();                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 241      }                                                                                                             </span>
<span  style=""> 242                                                                                                                    </span>
<span class="-9052858256904418219" onmouseenter="enter('-9052858256904418219');" onmouseout="out('-9052858256904418219');" style=""> 243      private void endAccessibleDrag() {                                                                            </span>
<span class="127949360596562642" onmouseenter="enter('127949360596562642');" onmouseout="out('127949360596562642');" style=""> 244          mDragInfo = null;                                                                                         </span>
<span class="-1899017350007489645" onmouseenter="enter('-1899017350007489645');" onmouseout="out('-1899017350007489645');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 245 -        mLauncher.getWorkspace().enableAccessibleDrag(false);                                                     </span>
<span class="-3750607280547723055" onmouseenter="enter('-3750607280547723055');" onmouseout="out('-3750607280547723055');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 246 +        if (mDragSource != null) {                                                                                </span>
<span class="-7650855280373105515" onmouseenter="enter('-7650855280373105515');" onmouseout="out('-7650855280373105515');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 247 +            mDragSource.enableAccessibleDrag(false);                                                              </span>
<span class="653995248213737484" onmouseenter="enter('653995248213737484');" onmouseout="out('653995248213737484');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 248 +            mDragSource = null;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 249 +        }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 250 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 251 +                                                                                                                  </span>
<span class="5577863383748596079" onmouseenter="enter('5577863383748596079');" onmouseout="out('5577863383748596079');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 252 +    public static interface AccessibilityDragSource {                                                             </span>
<span class="-4071568384152274162" onmouseenter="enter('-4071568384152274162');" onmouseout="out('-4071568384152274162');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 253 +        void startDrag(CellLayout.CellInfo cellInfo, boolean accessible);                                         </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 254 +                                                                                                                  </span>
<span class="4842957631066629898" onmouseenter="enter('4842957631066629898');" onmouseout="out('4842957631066629898');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 255 +        void enableAccessibleDrag(boolean enable);                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 256      }                                                                                                             </span>





































<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 257  }                                                                                                                 </span></pre></td>
                        </tr>
                    </table>
                </div>
              </body>
            </html>
            