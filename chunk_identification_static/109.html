<!DOCTYPE html>
    <html lang="en">
              <head>
                <meta charset="utf-8">
                <title>109</title>
                    <style>
                        #top {
                            height: 48vh;
                            overflow-y: auto;
                        }
                        #bottom {
                            height: 48vh;
                            overflow-y: auto;
                        }
                        abbr {
                          /* Here is the delay */
                          transition-delay:0s;
                        }
                    </style>
              </head>
              <body>
                <span style="height: 4vh">
                    109
                    <a href="108.html">prev</a>
                    <a href="110.html">next</a>
                    <a href="109_chunks.html">chunks</a>
                    <a href="index.html">index</a>
                    Automattic/simplenote-android_bf91e2e871733901b88c2e683a05b8541155b979_Simplenote/src/main/java/com/automattic/simplenote/InfoBottomSheetDialog.java
                    <textarea rows=1 onclick='navigator.clipboard.writeText(this.value)'>cd C:\studies\se\mega\git-analyzer-plus\notebooks\debug
del /Q *
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\Automattic\simplenote-android show &quot;bf91e2e871733901b88c2e683a05b8541155b979:Simplenote/src/main/java/com/automattic/simplenote/InfoBottomSheetDialog.java&quot; &gt; committed.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\Automattic\simplenote-android show &quot;bf91e2e871733901b88c2e683a05b8541155b979^1:Simplenote/src/main/java/com/automattic/simplenote/InfoBottomSheetDialog.java&quot; &gt; ours.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\Automattic\simplenote-android show &quot;bf91e2e871733901b88c2e683a05b8541155b979^2:Simplenote/src/main/java/com/automattic/simplenote/InfoBottomSheetDialog.java&quot; &gt; theirs.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\Automattic\simplenote-android show &quot;bce2c5b2464ab5d4ad545aee68f20a0d389d312c:Simplenote/src/main/java/com/automattic/simplenote/InfoBottomSheetDialog.java&quot; &gt; base.java
copy ours.java 1ours.java
copy ours.java 2ours.java
copy theirs.java 1theirs.java
copy theirs.java 2theirs.java
copy base.java 1base.java
copy base.java 2base.java
&quot;C:\Program Files\Java\jdk1.8.0_241\bin\java.exe&quot; -Dfile.encoding=UTF-8 -jar &quot;C:\studies\se\jFSTMerge\build\libs\jFSTMerge-all.jar&quot; C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1ours.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1base.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1theirs.java -o C:\studies\se\mega\git-analyzer-plus\notebooks\debug\jfstmerge.java --show-base
&quot;C:\Program Files\Eclipse Adoptium\jdk-17.0.11.9-hotspot\bin\java.exe&quot; -Dfile.encoding=UTF-8 -jar &quot;C:\studies\se\spork\target\spork-0.5.0-SNAPSHOT.jar&quot; C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2ours.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2base.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2theirs.java -o C:\studies\se\mega\git-analyzer-plus\notebooks\debug\spork.java
del /Q 1*.java
del /Q 2*.java
del /Q jfstmerge.java.merge
</textarea>
                    {strict: [[b], [b], [sbj]], subset: [[b], [b], [sbj]]}
                </span>
                <div id="top">

                    <table>
                        <tr>
                            <th>line based (standard git)</th>
                            <th>jfstmerge</th>
                            <th>spork</th>
                        </tr>
                        <tr>
                            <td><pre>   1 package com.automattic.simplenote;
   2 
   3 import android.os.Bundle;
   4 import android.view.LayoutInflater;
   5 import android.view.View;
   6 import android.view.ViewGroup;
   7 &lt;&lt;&lt;&lt;&lt;&lt;&lt; GitAnalyzerPlus_ours
   8 ||||||| GitAnalyzerPlus_base
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">   9 import android.view.LayoutInflater;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  10 import android.view.View;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  11 import android.view.ViewGroup;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  12 import android.widget.CompoundButton;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  13 import android.widget.ImageButton;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  14 import android.widget.TextView;</span>
  15 =======
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  16 import android.widget.CompoundButton;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  17 import android.widget.FrameLayout;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  18 import android.widget.ImageButton;</span>
  19 &gt;&gt;&gt;&gt;&gt;&gt;&gt; GitAnalyzerPlus_theirs
  20 import android.widget.TextView;
  21 
  22 import androidx.annotation.NonNull;
  23 import androidx.annotation.Nullable;
  24 import androidx.fragment.app.Fragment;
  25 import androidx.fragment.app.FragmentManager;
  26 
  27 import com.automattic.simplenote.models.Note;
  28 import com.automattic.simplenote.utils.DateTimeUtils;
  29 &lt;&lt;&lt;&lt;&lt;&lt;&lt; GitAnalyzerPlus_ours
  30 ||||||| GitAnalyzerPlus_base
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  31 import androidx.annotation.Nullable;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  32 import androidx.appcompat.widget.SwitchCompat;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  33 import androidx.fragment.app.Fragment;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  34 import androidx.fragment.app.FragmentManager;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  35 import androidx.preference.PreferenceManager;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  36 </span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  37 import com.automattic.simplenote.models.Note;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  38 import com.automattic.simplenote.utils.DateTimeUtils;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  39 import com.automattic.simplenote.utils.PrefUtils;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  40 </span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  41 import java.text.NumberFormat;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  42 </span>
  43 =======
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  44 import com.automattic.simplenote.utils.PrefUtils;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  45 import com.google.android.material.bottomsheet.BottomSheetBehavior;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  46 import com.google.android.material.bottomsheet.BottomSheetDialog;</span>
  47 &gt;&gt;&gt;&gt;&gt;&gt;&gt; GitAnalyzerPlus_theirs
  48 
  49 import java.text.NumberFormat;
  50 
  51 public class InfoBottomSheetDialog extends BottomSheetDialogBase {
  52     private static final String TAG = InfoBottomSheetDialog.class.getSimpleName();
  53 
  54     private Fragment mFragment;
  55     private TextView mCountCharacters;
  56     private TextView mCountWords;
  57     private TextView mDateTimeCreated;
  58     private TextView mDateTimeModified;
  59 
  60     public InfoBottomSheetDialog(@NonNull Fragment fragment) {
  61         mFragment = fragment;
  62     }
  63 
  64     @Nullable
  65     @Override
<abbr title="  66     public View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {">  66     public View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup container, @Nullable BðŸ”µ</abbr>
  67         View infoView = inflater.inflate(R.layout.bottom_sheet_info, null, false);
  68         mCountCharacters = infoView.findViewById(R.id.count_characters);
  69         mCountWords = infoView.findViewById(R.id.count_words);
  70         mDateTimeCreated = infoView.findViewById(R.id.date_time_created);
  71         mDateTimeModified = infoView.findViewById(R.id.date_time_modified);
  72 
  73         if (getDialog() != null) {
  74 &lt;&lt;&lt;&lt;&lt;&lt;&lt; GitAnalyzerPlus_ours
  75 ||||||| GitAnalyzerPlus_base
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"><abbr title="  76     public InfoBottomSheetDialog(@NonNull Fragment fragment, @NonNull final InfoSheetListener infoSheetListener) {">  76     public InfoBottomSheetDialog(@NonNull Fragment fragment, @NonNull final InfoSheetListener infoSheetLiðŸ”µ</abbr></span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  77         mFragment = fragment;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  78         mListener = infoSheetListener;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  79     }</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  80 </span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  81     @Nullable</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  82     @Override</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"><abbr title="  83     public View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {">  83     public View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup container, @Nullable BðŸ”µ</abbr></span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  84         View infoView = inflater.inflate(R.layout.bottom_sheet_info, null, false);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  85         mInfoModifiedDate = infoView.findViewById(R.id.info_modified_date_text);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  86         mInfoWords = infoView.findViewById(R.id.info_words_text);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  87         mInfoLinkUrl = infoView.findViewById(R.id.info_public_link_url);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  88         mInfoLinkTitle = infoView.findViewById(R.id.info_public_link_title);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  89 </span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  90         mInfoPinSwitch = infoView.findViewById(R.id.info_pin_switch);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  91         mInfoPinSwitch.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  92             @Override</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  93             public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  94                 mListener.onInfoPinSwitchChanged(isChecked);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  95             }</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  96         });</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  97 </span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  98         mInfoMarkdownSwitch = infoView.findViewById(R.id.info_markdown_switch);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  99         mInfoMarkdownSwitch.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 100             @Override</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 101             public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 102                 if (!mFragment.isAdded()){</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 103                     return;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 104                 }</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 105 </span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 106                 mListener.onInfoMarkdownSwitchChanged(isChecked);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 107 </span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 108                 // Set preference so that next new note will have markdown enabled</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"><abbr title=" 109                 SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(mFragment.getActivity());"> 109                 SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(mFragment.getActiðŸ”µ</abbr></span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 110                 SharedPreferences.Editor editor = prefs.edit();</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 111                 editor.putBoolean(PrefUtils.PREF_MARKDOWN_ENABLED, isChecked);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 112                 editor.apply();</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 113             }</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 114         });</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 115 </span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 116         mCopyButton = infoView.findViewById(R.id.info_copy_link_button);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 117         mCopyButton.setOnClickListener(new View.OnClickListener() {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 118             @Override</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 119             public void onClick(View v) {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 120                 mListener.onInfoCopyLinkClicked();</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 121             }</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 122         });</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 123         mCopyButton.setOnLongClickListener(new View.OnLongClickListener() {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 124             @Override</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 125             public boolean onLongClick(View v) {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 126                 if (v.isHapticFeedbackEnabled()) {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 127                     v.performHapticFeedback(HapticFeedbackConstants.LONG_PRESS);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 128                 }</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 129 </span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"><abbr title=" 130                 Toast.makeText(getContext(), requireContext().getString(R.string.copy), Toast.LENGTH_SHORT).show();"> 130                 Toast.makeText(getContext(), requireContext().getString(R.string.copy), Toast.LENGTH_SHORðŸ”µ</abbr></span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 131                 return false;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 132             }</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 133         });</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 134 </span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 135         mShareButton = infoView.findViewById(R.id.info_share_button);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 136         mShareButton.setOnClickListener(new View.OnClickListener() {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 137             @Override</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 138             public void onClick(View v) {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 139                 mListener.onInfoShareLinkClicked();</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 140             }</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 141         });</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 142         mShareButton.setOnLongClickListener(new View.OnLongClickListener() {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 143             @Override</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 144             public boolean onLongClick(View v) {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 145                 if (v.isHapticFeedbackEnabled()) {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 146                     v.performHapticFeedback(HapticFeedbackConstants.LONG_PRESS);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 147                 }</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 148 </span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"><abbr title=" 149                 Toast.makeText(getContext(), requireContext().getString(R.string.share), Toast.LENGTH_SHORT).show();"> 149                 Toast.makeText(getContext(), requireContext().getString(R.string.share), Toast.LENGTH_SHOðŸ”µ</abbr></span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 150                 return false;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 151             }</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 152         });</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 153 </span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 154         if (getDialog() != null) {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 155             getDialog().setOnDismissListener(new DialogInterface.OnDismissListener() {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 156                 @Override</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 157                 public void onDismiss(DialogInterface dialog) {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 158                     mListener.onInfoDismissed();</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 159                 }</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 160             });</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 161 </span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 162             getDialog().setContentView(infoView);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 163         }</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 164 </span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 165         return super.onCreateView(inflater, container, savedInstanceState);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 166     }</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 167 </span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 168     public void show(FragmentManager manager, Note note) {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 169         if (mFragment.isAdded()) {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 170             showNow(manager, TAG);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 171 </span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 172             String date = DateTimeUtils.getDateText(requireContext(), note.getModificationDate());</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 173             mInfoModifiedDate.setText(String.format(mFragment.getString(R.string.modified_time), date));</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 174             mInfoPinSwitch.setChecked(note.isPinned());</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 175             mInfoMarkdownSwitch.setChecked(note.isMarkdownEnabled());</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 176             mInfoWords.setText(getCombinedCount(note.getContent()));</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 177 </span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 178             if (note.isPublished()) {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 179                 mInfoLinkTitle.setText(mFragment.getString(R.string.public_link));</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 180                 mInfoLinkUrl.setText(note.getPublishedUrl());</span>
 181 =======
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 182             getDialog().setOnDismissListener(new DialogInterface.OnDismissListener() {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 183                 @Override</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 184                 public void onDismiss(DialogInterface dialog) {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 185                     mListener.onInfoDismissed();</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 186                 }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 187             });</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 188 </span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 189             // Set peek height to full height of view (i.e. set STATE_EXPANDED) to avoid buttons</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 190             // being off screen when bottom sheet is shown.</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 191             getDialog().setOnShowListener(new DialogInterface.OnShowListener() {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 192                 @Override</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 193                 public void onShow(DialogInterface dialogInterface) {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 194                     BottomSheetDialog bottomSheetDialog = (BottomSheetDialog) dialogInterface;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"><abbr title=" 195                     FrameLayout bottomSheet = bottomSheetDialog.findViewById(com.google.android.material.R.id.design_bottom_sheet);"> 195                     FrameLayout bottomSheet = bottomSheetDialog.findViewById(com.google.android.material.ðŸ”µ</abbr></span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 196 </span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 197                     if (bottomSheet != null) {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 198                         BottomSheetBehavior behavior = BottomSheetBehavior.from(bottomSheet);</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 199                         behavior.setState(BottomSheetBehavior.STATE_EXPANDED);</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 200                         behavior.setSkipCollapsed(true);</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 201                     }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 202                 }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 203             });</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 204 </span>
 205 &gt;&gt;&gt;&gt;&gt;&gt;&gt; GitAnalyzerPlus_theirs
 206             getDialog().setContentView(infoView);
 207         }
 208 
 209         return super.onCreateView(inflater, container, savedInstanceState);
 210     }
 211 
 212     public void show(FragmentManager manager, Note note) {
 213         if (mFragment.isAdded()) {
 214             showNow(manager, TAG);
 215             mCountCharacters.setText(getCharactersCount(note.getContent()));
 216             mCountWords.setText(getWordCount(note.getContent()));
<abbr title=" 217             mDateTimeCreated.setText(DateTimeUtils.getDateTextString(requireContext(), note.getCreationDate()));"> 217             mDateTimeCreated.setText(DateTimeUtils.getDateTextString(requireContext(), note.getCreationDaðŸ”µ</abbr>
<abbr title=" 218             mDateTimeModified.setText(DateTimeUtils.getDateTextString(requireContext(), note.getModificationDate()));"> 218             mDateTimeModified.setText(DateTimeUtils.getDateTextString(requireContext(), note.getModificatðŸ”µ</abbr>
 219         }
 220     }
 221 
 222     private String getWordCount(String content) {
 223         int words = (content.trim().length() == 0) ? 0 : content.trim().split(&quot;([\\W]+)&quot;).length;
 224         return NumberFormat.getInstance().format(words);
 225     }
 226 
 227     private String getCharactersCount(String content) {
 228         return NumberFormat.getInstance().format(content.length());
 229     }
 230 }</pre></td>
                            <td><pre>   1 package com.automattic.simplenote;
   2 
   3 import android.os.Bundle;
   4 import android.view.LayoutInflater;
   5 import android.view.View;
   6 import android.view.ViewGroup;
   7 import android.widget.FrameLayout;
   8 import android.widget.TextView;
   9 
  10 import androidx.annotation.NonNull;
  11 import androidx.annotation.Nullable;
  12 import androidx.fragment.app.Fragment;
  13 import androidx.fragment.app.FragmentManager;
  14 
  15 import com.automattic.simplenote.models.Note;
  16 import com.automattic.simplenote.utils.DateTimeUtils;
  17 import com.google.android.material.bottomsheet.BottomSheetBehavior;
  18 import com.google.android.material.bottomsheet.BottomSheetDialog;
  19 
  20 import java.text.NumberFormat;
  21 
  22 public class InfoBottomSheetDialog extends BottomSheetDialogBase {
  23     private static final String TAG = InfoBottomSheetDialog.class.getSimpleName();
  24 
  25     private Fragment mFragment;
  26     private TextView mCountCharacters;
  27     private TextView mCountWords;
  28     private TextView mDateTimeCreated;
  29     private TextView mDateTimeModified;
  30 
  31     public InfoBottomSheetDialog(@NonNull Fragment fragment) {
  32         mFragment = fragment;
  33     }
  34 
  35     @Nullable
  36     @Override
<abbr title="  37     public View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {">  37     public View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup container, @Nullable BðŸ”µ</abbr>
  38         View infoView = inflater.inflate(R.layout.bottom_sheet_info, null, false);
  39         mCountCharacters = infoView.findViewById(R.id.count_characters);
  40         mCountWords = infoView.findViewById(R.id.count_words);
  41         mDateTimeCreated = infoView.findViewById(R.id.date_time_created);
  42         mDateTimeModified = infoView.findViewById(R.id.date_time_modified);
  43 
  44         if (getDialog() != null) {
  45 &lt;&lt;&lt;&lt;&lt;&lt;&lt; MINE
  46 ||||||| BASE
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  47         mInfoPinSwitch.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  48             @Override</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  49             public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  50                 mListener.onInfoPinSwitchChanged(isChecked);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  51             }</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  52         });</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  53 </span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  54         mInfoMarkdownSwitch = infoView.findViewById(R.id.info_markdown_switch);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  55         mInfoMarkdownSwitch.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  56             @Override</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  57             public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  58                 if (!mFragment.isAdded()){</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  59                     return;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  60                 }</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  61 </span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  62                 mListener.onInfoMarkdownSwitchChanged(isChecked);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  63 </span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  64                 // Set preference so that next new note will have markdown enabled</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"><abbr title="  65                 SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(mFragment.getActivity());">  65                 SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(mFragment.getActiðŸ”µ</abbr></span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  66                 SharedPreferences.Editor editor = prefs.edit();</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  67                 editor.putBoolean(PrefUtils.PREF_MARKDOWN_ENABLED, isChecked);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  68                 editor.apply();</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  69             }</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  70         });</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  71 </span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  72         mCopyButton = infoView.findViewById(R.id.info_copy_link_button);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  73         mCopyButton.setOnClickListener(new View.OnClickListener() {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  74             @Override</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  75             public void onClick(View v) {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  76                 mListener.onInfoCopyLinkClicked();</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  77             }</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  78         });</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  79         mCopyButton.setOnLongClickListener(new View.OnLongClickListener() {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  80             @Override</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  81             public boolean onLongClick(View v) {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  82                 if (v.isHapticFeedbackEnabled()) {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  83                     v.performHapticFeedback(HapticFeedbackConstants.LONG_PRESS);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  84                 }</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  85 </span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"><abbr title="  86                 Toast.makeText(getContext(), requireContext().getString(R.string.copy), Toast.LENGTH_SHORT).show();">  86                 Toast.makeText(getContext(), requireContext().getString(R.string.copy), Toast.LENGTH_SHORðŸ”µ</abbr></span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  87                 return false;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  88             }</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  89         });</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  90 </span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  91         mShareButton = infoView.findViewById(R.id.info_share_button);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  92         mShareButton.setOnClickListener(new View.OnClickListener() {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  93             @Override</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  94             public void onClick(View v) {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  95                 mListener.onInfoShareLinkClicked();</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  96             }</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  97         });</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  98         mShareButton.setOnLongClickListener(new View.OnLongClickListener() {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  99             @Override</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 100             public boolean onLongClick(View v) {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 101                 if (v.isHapticFeedbackEnabled()) {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 102                     v.performHapticFeedback(HapticFeedbackConstants.LONG_PRESS);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 103                 }</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 104 </span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"><abbr title=" 105                 Toast.makeText(getContext(), requireContext().getString(R.string.share), Toast.LENGTH_SHORT).show();"> 105                 Toast.makeText(getContext(), requireContext().getString(R.string.share), Toast.LENGTH_SHOðŸ”µ</abbr></span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 106                 return false;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 107             }</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 108         });</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 109 </span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 110         if (getDialog() != null) {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 111             getDialog().setOnDismissListener(new DialogInterface.OnDismissListener() {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 112                 @Override</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 113                 public void onDismiss(DialogInterface dialog) {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 114                     mListener.onInfoDismissed();</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 115                 }</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 116             });</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 117 </span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 118             getDialog().setContentView(infoView);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 119         }</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 120 </span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 121         return super.onCreateView(inflater, container, savedInstanceState);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 122     }</span>
 123 =======
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 124             getDialog().setOnDismissListener(new DialogInterface.OnDismissListener() {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 125                 @Override</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 126                 public void onDismiss(DialogInterface dialog) {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 127                     mListener.onInfoDismissed();</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 128                 }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 129             });</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 130 </span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 131             // Set peek height to full height of view (i.e. set STATE_EXPANDED) to avoid buttons</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 132             // being off screen when bottom sheet is shown.</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 133             getDialog().setOnShowListener(new DialogInterface.OnShowListener() {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 134                 @Override</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 135                 public void onShow(DialogInterface dialogInterface) {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 136                     BottomSheetDialog bottomSheetDialog = (BottomSheetDialog) dialogInterface;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"><abbr title=" 137                     FrameLayout bottomSheet = bottomSheetDialog.findViewById(com.google.android.material.R.id.design_bottom_sheet);"> 137                     FrameLayout bottomSheet = bottomSheetDialog.findViewById(com.google.android.material.ðŸ”µ</abbr></span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 138 </span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 139                     if (bottomSheet != null) {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 140                         BottomSheetBehavior behavior = BottomSheetBehavior.from(bottomSheet);</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 141                         behavior.setState(BottomSheetBehavior.STATE_EXPANDED);</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 142                         behavior.setSkipCollapsed(true);</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 143                     }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 144                 }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 145             });</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 146 </span>
 147 &gt;&gt;&gt;&gt;&gt;&gt;&gt; YOURS
 148             getDialog().setContentView(infoView);
 149         }
 150 
 151         return super.onCreateView(inflater, container, savedInstanceState);
 152     }
 153 
 154     public void show(FragmentManager manager, Note note) {
 155         if (mFragment.isAdded()) {
 156             showNow(manager, TAG);
 157             mCountCharacters.setText(getCharactersCount(note.getContent()));
 158             mCountWords.setText(getWordCount(note.getContent()));
<abbr title=" 159             mDateTimeCreated.setText(DateTimeUtils.getDateTextString(requireContext(), note.getCreationDate()));"> 159             mDateTimeCreated.setText(DateTimeUtils.getDateTextString(requireContext(), note.getCreationDaðŸ”µ</abbr>
<abbr title=" 160             mDateTimeModified.setText(DateTimeUtils.getDateTextString(requireContext(), note.getModificationDate()));"> 160             mDateTimeModified.setText(DateTimeUtils.getDateTextString(requireContext(), note.getModificatðŸ”µ</abbr>
 161         }
 162     }
 163 
 164     private String getWordCount(String content) {
 165         int words = (content.trim().length() == 0) ? 0 : content.trim().split(&quot;([\\W]+)&quot;).length;
 166         return NumberFormat.getInstance().format(words);
 167     }
 168 
 169     private String getCharactersCount(String content) {
 170         return NumberFormat.getInstance().format(content.length());
 171     }
 172 }
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 </pre></td>
                            <td><pre>   1 package com.automattic.simplenote;
   2 
   3 import android.os.Bundle;
   4 import android.view.LayoutInflater;
   5 import android.view.View;
   6 import android.view.ViewGroup;
   7 import android.widget.FrameLayout;
   8 import android.widget.TextView;
   9 import androidx.annotation.NonNull;
  10 import androidx.annotation.Nullable;
  11 import androidx.fragment.app.Fragment;
  12 import androidx.fragment.app.FragmentManager;
  13 import com.automattic.simplenote.models.Note;
  14 import com.automattic.simplenote.utils.DateTimeUtils;
  15 import com.google.android.material.bottomsheet.BottomSheetBehavior;
  16 import com.google.android.material.bottomsheet.BottomSheetDialog;
  17 import java.text.NumberFormat;
  18 
  19 
  20 public class InfoBottomSheetDialog extends BottomSheetDialogBase {
  21     private static final String TAG = InfoBottomSheetDialog.class.getSimpleName();
  22 
  23     private Fragment mFragment;
  24 
  25     private TextView mCountCharacters;
  26 
  27     private TextView mCountWords;
  28 
  29     private TextView mDateTimeCreated;
  30 
  31     private TextView mDateTimeModified;
  32 
  33     public InfoBottomSheetDialog(@NonNull
  34     Fragment fragment) {
  35         mFragment = fragment;
  36     }
  37 
  38     @Nullable
  39     @Override
  40     public View onCreateView(@NonNull
  41     LayoutInflater inflater, @Nullable
  42     ViewGroup container, @Nullable
  43     Bundle savedInstanceState) {
  44         View infoView = inflater.inflate(R.layout.bottom_sheet_info, null, false);
  45         mCountCharacters = infoView.findViewById(R.id.count_characters);
  46         mCountWords = infoView.findViewById(R.id.count_words);
  47         mDateTimeCreated = infoView.findViewById(R.id.date_time_created);
  48         mDateTimeModified = infoView.findViewById(R.id.date_time_modified);
  49 
  50         if (getDialog() != null) {
  51 
  52 &lt;&lt;&lt;&lt;&lt;&lt;&lt; LEFT
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  53 </span>
  54 ||||||| BASE
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"><abbr title="  55 /*d94z9sk0k4hf9j3ijd - note the base isn&#x27;t actually empty, spork simply doesn&#x27;t generate a base - gd930kwohrp23k5b6vdk93d3r*/">  55 /*d94z9sk0k4hf9j3ijd - note the base isn&#x27;t actually empty, spork simply doesn&#x27;t generate a base - gd930kwðŸ”µ</abbr></span>
  56 =======
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  57 </span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  58             getDialog().setOnDismissListener(new DialogInterface.OnDismissListener() {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  59                 @Override</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  60                 public void onDismiss(DialogInterface dialog) {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  61                     mListener.onInfoDismissed();</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  62                 }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  63             });</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  64 </span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  65             // Set peek height to full height of view (i.e. set STATE_EXPANDED) to avoid buttons</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  66             // being off screen when bottom sheet is shown.</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  67             getDialog().setOnShowListener(new DialogInterface.OnShowListener() {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  68                 @Override</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  69                 public void onShow(DialogInterface dialogInterface) {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  70                     BottomSheetDialog bottomSheetDialog = (BottomSheetDialog) dialogInterface;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"><abbr title="  71                     FrameLayout bottomSheet = bottomSheetDialog.findViewById(com.google.android.material.R.id.design_bottom_sheet);">  71                     FrameLayout bottomSheet = bottomSheetDialog.findViewById(com.google.android.material.ðŸ”µ</abbr></span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  72 </span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  73                     if (bottomSheet != null) {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  74                         BottomSheetBehavior behavior = BottomSheetBehavior.from(bottomSheet);</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  75                         behavior.setState(BottomSheetBehavior.STATE_EXPANDED);</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  76                         behavior.setSkipCollapsed(true);</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  77                     }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  78                 }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  79             });</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  80 </span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  81 </span>
  82 &gt;&gt;&gt;&gt;&gt;&gt;&gt; RIGHT
  83             getDialog().setContentView(infoView);
  84         }
  85 
  86         return super.onCreateView(inflater, container, savedInstanceState);
  87     }
  88 
  89     public void show(FragmentManager manager, Note note) {
  90         if (mFragment.isAdded()) {
  91             showNow(manager, TAG);
  92             mCountCharacters.setText(getCharactersCount(note.getContent()));
  93             mCountWords.setText(getWordCount(note.getContent()));
<abbr title="  94             mDateTimeCreated.setText(DateTimeUtils.getDateTextString(requireContext(), note.getCreationDate()));">  94             mDateTimeCreated.setText(DateTimeUtils.getDateTextString(requireContext(), note.getCreationDaðŸ”µ</abbr>
<abbr title="  95             mDateTimeModified.setText(DateTimeUtils.getDateTextString(requireContext(), note.getModificationDate()));">  95             mDateTimeModified.setText(DateTimeUtils.getDateTextString(requireContext(), note.getModificatðŸ”µ</abbr>
  96         }
  97     }
  98 
  99     private String getWordCount(String content) {
 100         int words = (content.trim().length() == 0) ? 0 : content.trim().split(&quot;([\\W]+)&quot;).length;
 101         return NumberFormat.getInstance().format(words);
 102     }
 103 
 104     private String getCharactersCount(String content) {
 105         return NumberFormat.getInstance().format(content.length());
 106     }
 107 }
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 </pre></td>
                        </tr>
                    </table>
                </div>
                <div id="bottom">
                    <table style="margin:auto">
                        <tr>
                            <th>ours vs. base</th>
                            <th>theirs vs. base</th>
                        </tr>
                        <tr>
                            <td><pre>   1  package com.automattic.simplenote;
   2  
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">   3 -import android.content.DialogInterface;</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">   4 -import android.content.SharedPreferences;</span>
   5  import android.os.Bundle;
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">   6 -import android.view.HapticFeedbackConstants;</span>
   7  import android.view.LayoutInflater;
   8  import android.view.View;
   9  import android.view.ViewGroup;
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  10 -import android.widget.CompoundButton;</span>

<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  11 -import android.widget.ImageButton;</span>
  12  import android.widget.TextView;
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  13 -import android.widget.Toast;</span>
  14  
  15  import androidx.annotation.NonNull;
  16  import androidx.annotation.Nullable;
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  17 -import androidx.appcompat.widget.SwitchCompat;</span>
  18  import androidx.fragment.app.Fragment;
  19  import androidx.fragment.app.FragmentManager;
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  20 -import androidx.preference.PreferenceManager;</span>
  21  
  22  import com.automattic.simplenote.models.Note;
  23  import com.automattic.simplenote.utils.DateTimeUtils;
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  24 -import com.automattic.simplenote.utils.PrefUtils;</span>


  25  
  26  import java.text.NumberFormat;
  27  
  28  public class InfoBottomSheetDialog extends BottomSheetDialogBase {
  29      private static final String TAG = InfoBottomSheetDialog.class.getSimpleName();
  30  
  31      private Fragment mFragment;
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  32 -    private ImageButton mCopyButton;</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  33 -    private ImageButton mShareButton;</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  34 -    private InfoSheetListener mListener;</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  35 -    private TextView mInfoLinkTitle;</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  36 -    private TextView mInfoLinkUrl;</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  37 -    private TextView mInfoModifiedDate;</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  38 -    private TextView mInfoWords;</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  39 -    private SwitchCompat mInfoMarkdownSwitch;</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  40 -    private SwitchCompat mInfoPinSwitch;</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  41 +    private TextView mCountCharacters;</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  42 +    private TextView mCountWords;</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  43 +    private TextView mDateTimeCreated;</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  44 +    private TextView mDateTimeModified;</span>
  45  
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  46 -    public InfoBottomSheetDialog(@NonNull Fragment fragment, @NonNull final InfoSheetListener infoSheetListener) {</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  47 +    public InfoBottomSheetDialog(@NonNull Fragment fragment) {</span>
  48          mFragment = fragment;
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  49 -        mListener = infoSheetListener;</span>
  50      }
  51  
  52      @Nullable
  53      @Override
<abbr title="  54      public View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {">  54      public View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savðŸ”µ</abbr>
  55          View infoView = inflater.inflate(R.layout.bottom_sheet_info, null, false);
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  56 -        mInfoModifiedDate = infoView.findViewById(R.id.info_modified_date_text);</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  57 -        mInfoWords = infoView.findViewById(R.id.info_words_text);</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  58 -        mInfoLinkUrl = infoView.findViewById(R.id.info_public_link_url);</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  59 -        mInfoLinkTitle = infoView.findViewById(R.id.info_public_link_title);</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  60 -</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  61 -        mInfoPinSwitch = infoView.findViewById(R.id.info_pin_switch);</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  62 -        mInfoPinSwitch.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  63 -            @Override</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  64 -            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  65 -                mListener.onInfoPinSwitchChanged(isChecked);</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  66 -            }</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  67 -        });</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  68 -</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  69 -        mInfoMarkdownSwitch = infoView.findViewById(R.id.info_markdown_switch);</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  70 -        mInfoMarkdownSwitch.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  71 -            @Override</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  72 -            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  73 -                if (!mFragment.isAdded()){</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  74 -                    return;</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  75 -                }</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  76 -</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  77 -                mListener.onInfoMarkdownSwitchChanged(isChecked);</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  78 -</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  79 -                // Set preference so that next new note will have markdown enabled</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  80 -                SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(mFragment.getActivity());</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  81 -                SharedPreferences.Editor editor = prefs.edit();</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  82 -                editor.putBoolean(PrefUtils.PREF_MARKDOWN_ENABLED, isChecked);</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  83 -                editor.apply();</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  84 -            }</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  85 -        });</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  86 -</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  87 -        mCopyButton = infoView.findViewById(R.id.info_copy_link_button);</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  88 -        mCopyButton.setOnClickListener(new View.OnClickListener() {</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  89 -            @Override</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  90 -            public void onClick(View v) {</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  91 -                mListener.onInfoCopyLinkClicked();</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  92 -            }</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  93 -        });</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  94 -        mCopyButton.setOnLongClickListener(new View.OnLongClickListener() {</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  95 -            @Override</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  96 -            public boolean onLongClick(View v) {</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  97 -                if (v.isHapticFeedbackEnabled()) {</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  98 -                    v.performHapticFeedback(HapticFeedbackConstants.LONG_PRESS);</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  99 -                }</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 100 -</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"><abbr title=" 101 -                Toast.makeText(getContext(), requireContext().getString(R.string.copy), Toast.LENGTH_SHORT).show();"> 101 -                Toast.makeText(getContext(), requireContext().getString(R.string.copy), Toast.LENGTH_SHORT).show()ðŸ”µ</abbr></span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 102 -                return false;</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 103 -            }</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 104 -        });</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 105 -</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 106 -        mShareButton = infoView.findViewById(R.id.info_share_button);</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 107 -        mShareButton.setOnClickListener(new View.OnClickListener() {</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 108 -            @Override</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 109 -            public void onClick(View v) {</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 110 -                mListener.onInfoShareLinkClicked();</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 111 -            }</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 112 -        });</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 113 -        mShareButton.setOnLongClickListener(new View.OnLongClickListener() {</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 114 -            @Override</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 115 -            public boolean onLongClick(View v) {</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 116 -                if (v.isHapticFeedbackEnabled()) {</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 117 -                    v.performHapticFeedback(HapticFeedbackConstants.LONG_PRESS);</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 118 -                }</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 119 -</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"><abbr title=" 120 -                Toast.makeText(getContext(), requireContext().getString(R.string.share), Toast.LENGTH_SHORT).show();"> 120 -                Toast.makeText(getContext(), requireContext().getString(R.string.share), Toast.LENGTH_SHORT).show(ðŸ”µ</abbr></span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 121 -                return false;</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 122 -            }</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 123 -        });</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 124 +        mCountCharacters = infoView.findViewById(R.id.count_characters);</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 125 +        mCountWords = infoView.findViewById(R.id.count_words);</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 126 +        mDateTimeCreated = infoView.findViewById(R.id.date_time_created);</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 127 +        mDateTimeModified = infoView.findViewById(R.id.date_time_modified);</span>
 128  
 129          if (getDialog() != null) {
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 130 -            getDialog().setOnDismissListener(new DialogInterface.OnDismissListener() {</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 131 -                @Override</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 132 -                public void onDismiss(DialogInterface dialog) {</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 133 -                    mListener.onInfoDismissed();</span>
















<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 134 -                }</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 135 -            });</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 136 -</span>
 137              getDialog().setContentView(infoView);
 138          }
 139  
 140          return super.onCreateView(inflater, container, savedInstanceState);
 141      }
 142  
 143      public void show(FragmentManager manager, Note note) {
 144          if (mFragment.isAdded()) {
 145              showNow(manager, TAG);
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 146 -</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 147 -            String date = DateTimeUtils.getDateText(requireContext(), note.getModificationDate());</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 148 -            mInfoModifiedDate.setText(String.format(mFragment.getString(R.string.modified_time), date));</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 149 -            mInfoPinSwitch.setChecked(note.isPinned());</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 150 -            mInfoMarkdownSwitch.setChecked(note.isMarkdownEnabled());</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 151 -            mInfoWords.setText(getCombinedCount(note.getContent()));</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 152 -</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 153 -            if (note.isPublished()) {</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 154 -                mInfoLinkTitle.setText(mFragment.getString(R.string.public_link));</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 155 -                mInfoLinkUrl.setText(note.getPublishedUrl());</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 156 -                mInfoLinkUrl.setVisibility(View.VISIBLE);</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 157 -                mCopyButton.setVisibility(View.VISIBLE);</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 158 -                mShareButton.setVisibility(View.GONE);</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 159 -            } else {</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 160 -                mInfoLinkTitle.setText(mFragment.getString(R.string.note_not_published));</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 161 -                mInfoLinkUrl.setVisibility(View.GONE);</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 162 -                mCopyButton.setVisibility(View.GONE);</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 163 -                mShareButton.setVisibility(View.VISIBLE);</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 164 -            }</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 165 +            mCountCharacters.setText(getCharactersCount(note.getContent()));</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 166 +            mCountWords.setText(getWordCount(note.getContent()));</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 167 +            mDateTimeCreated.setText(DateTimeUtils.getDateTextString(requireContext(), note.getCreationDate()));</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"><abbr title=" 168 +            mDateTimeModified.setText(DateTimeUtils.getDateTextString(requireContext(), note.getModificationDate()));"> 168 +            mDateTimeModified.setText(DateTimeUtils.getDateTextString(requireContext(), note.getModificationDate()ðŸ”µ</abbr></span>
 169          }
 170      }
 171  
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 172 -    private String getCombinedCount(String content) {</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 173 -        return String.format(&quot;%s\n%s&quot;, getWordCount(content), getCharactersCount(content));</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 174 -    }</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 175 -</span>
 176      private String getWordCount(String content) {
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 177 -        int numWords = (content.trim().length() == 0) ? 0 : content.trim().split(&quot;([\\W]+)&quot;).length;</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 178 -        String wordCountString = mFragment.getResources().getQuantityString(R.plurals.word_count, numWords);</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 179 -        String formattedWordCount = NumberFormat.getInstance().format(numWords);</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 180 -        return String.format(&quot;%s %s&quot;, formattedWordCount, wordCountString);</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 181 +        int words = (content.trim().length() == 0) ? 0 : content.trim().split(&quot;([\\W]+)&quot;).length;</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 182 +        return NumberFormat.getInstance().format(words);</span>
 183      }
 184  
 185      private String getCharactersCount(String content) {
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 186 -        int numChars = content.length();</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 187 -        String charCount = NumberFormat.getInstance().format(numChars);</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 188 -        String charCountString = mFragment.getResources().getQuantityString(R.plurals.char_count, numChars);</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 189 -        return String.format(&quot;%s %s&quot;, charCount, charCountString);</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 190 -    }</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 191 -</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 192 -    public interface InfoSheetListener {</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 193 -        void onInfoCopyLinkClicked();</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 194 -        void onInfoDismissed();</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 195 -        void onInfoMarkdownSwitchChanged(boolean isSwitchedOn);</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 196 -        void onInfoPinSwitchChanged(boolean isSwitchedOn);</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 197 -        void onInfoShareLinkClicked();</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 198 +        return NumberFormat.getInstance().format(content.length());</span>
 199      }
 200  }</pre></td>
                            <td><pre>   1  package com.automattic.simplenote;
   2  
   3  import android.content.DialogInterface;
   4  import android.content.SharedPreferences;
   5  import android.os.Bundle;
   6  import android.view.HapticFeedbackConstants;
   7  import android.view.LayoutInflater;
   8  import android.view.View;
   9  import android.view.ViewGroup;
  10  import android.widget.CompoundButton;
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  11 +import android.widget.FrameLayout;</span>
  12  import android.widget.ImageButton;
  13  import android.widget.TextView;
  14  import android.widget.Toast;
  15  
  16  import androidx.annotation.NonNull;
  17  import androidx.annotation.Nullable;
  18  import androidx.appcompat.widget.SwitchCompat;
  19  import androidx.fragment.app.Fragment;
  20  import androidx.fragment.app.FragmentManager;
  21  import androidx.preference.PreferenceManager;
  22  
  23  import com.automattic.simplenote.models.Note;
  24  import com.automattic.simplenote.utils.DateTimeUtils;
  25  import com.automattic.simplenote.utils.PrefUtils;
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  26 +import com.google.android.material.bottomsheet.BottomSheetBehavior;</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  27 +import com.google.android.material.bottomsheet.BottomSheetDialog;</span>
  28  
  29  import java.text.NumberFormat;
  30  
  31  public class InfoBottomSheetDialog extends BottomSheetDialogBase {
  32      private static final String TAG = InfoBottomSheetDialog.class.getSimpleName();
  33  
  34      private Fragment mFragment;
  35      private ImageButton mCopyButton;
  36      private ImageButton mShareButton;
  37      private InfoSheetListener mListener;
  38      private TextView mInfoLinkTitle;
  39      private TextView mInfoLinkUrl;
  40      private TextView mInfoModifiedDate;
  41      private TextView mInfoWords;
  42      private SwitchCompat mInfoMarkdownSwitch;
  43      private SwitchCompat mInfoPinSwitch;




  44  
  45      public InfoBottomSheetDialog(@NonNull Fragment fragment, @NonNull final InfoSheetListener infoSheetListener) {

  46          mFragment = fragment;
  47          mListener = infoSheetListener;
  48      }
  49  
  50      @Nullable
  51      @Override
<abbr title="  52      public View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {">  52      public View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savðŸ”µ</abbr>
  53          View infoView = inflater.inflate(R.layout.bottom_sheet_info, null, false);
  54          mInfoModifiedDate = infoView.findViewById(R.id.info_modified_date_text);
  55          mInfoWords = infoView.findViewById(R.id.info_words_text);
  56          mInfoLinkUrl = infoView.findViewById(R.id.info_public_link_url);
  57          mInfoLinkTitle = infoView.findViewById(R.id.info_public_link_title);
  58  
  59          mInfoPinSwitch = infoView.findViewById(R.id.info_pin_switch);
  60          mInfoPinSwitch.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {
  61              @Override
  62              public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
  63                  mListener.onInfoPinSwitchChanged(isChecked);
  64              }
  65          });
  66  
  67          mInfoMarkdownSwitch = infoView.findViewById(R.id.info_markdown_switch);
  68          mInfoMarkdownSwitch.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {
  69              @Override
  70              public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
  71                  if (!mFragment.isAdded()){
  72                      return;
  73                  }
  74  
  75                  mListener.onInfoMarkdownSwitchChanged(isChecked);
  76  
  77                  // Set preference so that next new note will have markdown enabled
  78                  SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(mFragment.getActivity());
  79                  SharedPreferences.Editor editor = prefs.edit();
  80                  editor.putBoolean(PrefUtils.PREF_MARKDOWN_ENABLED, isChecked);
  81                  editor.apply();
  82              }
  83          });
  84  
  85          mCopyButton = infoView.findViewById(R.id.info_copy_link_button);
  86          mCopyButton.setOnClickListener(new View.OnClickListener() {
  87              @Override
  88              public void onClick(View v) {
  89                  mListener.onInfoCopyLinkClicked();
  90              }
  91          });
  92          mCopyButton.setOnLongClickListener(new View.OnLongClickListener() {
  93              @Override
  94              public boolean onLongClick(View v) {
  95                  if (v.isHapticFeedbackEnabled()) {
  96                      v.performHapticFeedback(HapticFeedbackConstants.LONG_PRESS);
  97                  }
  98  
<abbr title="  99                  Toast.makeText(getContext(), requireContext().getString(R.string.copy), Toast.LENGTH_SHORT).show();">  99                  Toast.makeText(getContext(), requireContext().getString(R.string.copy), Toast.LENGTH_SHORT).show()ðŸ”µ</abbr>
 100                  return false;
 101              }
 102          });
 103  
 104          mShareButton = infoView.findViewById(R.id.info_share_button);
 105          mShareButton.setOnClickListener(new View.OnClickListener() {
 106              @Override
 107              public void onClick(View v) {
 108                  mListener.onInfoShareLinkClicked();
 109              }
 110          });
 111          mShareButton.setOnLongClickListener(new View.OnLongClickListener() {
 112              @Override
 113              public boolean onLongClick(View v) {
 114                  if (v.isHapticFeedbackEnabled()) {
 115                      v.performHapticFeedback(HapticFeedbackConstants.LONG_PRESS);
 116                  }
 117  
<abbr title=" 118                  Toast.makeText(getContext(), requireContext().getString(R.string.share), Toast.LENGTH_SHORT).show();"> 118                  Toast.makeText(getContext(), requireContext().getString(R.string.share), Toast.LENGTH_SHORT).show(ðŸ”µ</abbr>
 119                  return false;
 120              }
 121          });




 122  
 123          if (getDialog() != null) {
 124              getDialog().setOnDismissListener(new DialogInterface.OnDismissListener() {
 125                  @Override
 126                  public void onDismiss(DialogInterface dialog) {
 127                      mListener.onInfoDismissed();
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 128 +                }</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 129 +            });</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 130 +</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 131 +            // Set peek height to full height of view (i.e. set STATE_EXPANDED) to avoid buttons</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 132 +            // being off screen when bottom sheet is shown.</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 133 +            getDialog().setOnShowListener(new DialogInterface.OnShowListener() {</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 134 +                @Override</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 135 +                public void onShow(DialogInterface dialogInterface) {</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 136 +                    BottomSheetDialog bottomSheetDialog = (BottomSheetDialog) dialogInterface;</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"><abbr title=" 137 +                    FrameLayout bottomSheet = bottomSheetDialog.findViewById(com.google.android.material.R.id.design_bottom_sheet);"> 137 +                    FrameLayout bottomSheet = bottomSheetDialog.findViewById(com.google.android.material.R.id.desiðŸ”µ</abbr></span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 138 +</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 139 +                    if (bottomSheet != null) {</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 140 +                        BottomSheetBehavior behavior = BottomSheetBehavior.from(bottomSheet);</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 141 +                        behavior.setState(BottomSheetBehavior.STATE_EXPANDED);</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 142 +                        behavior.setSkipCollapsed(true);</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 143 +                    }</span>
 144                  }
 145              });
 146  
 147              getDialog().setContentView(infoView);
 148          }
 149  
 150          return super.onCreateView(inflater, container, savedInstanceState);
 151      }
 152  
 153      public void show(FragmentManager manager, Note note) {
 154          if (mFragment.isAdded()) {
 155              showNow(manager, TAG);
 156  
 157              String date = DateTimeUtils.getDateText(requireContext(), note.getModificationDate());
 158              mInfoModifiedDate.setText(String.format(mFragment.getString(R.string.modified_time), date));
 159              mInfoPinSwitch.setChecked(note.isPinned());
 160              mInfoMarkdownSwitch.setChecked(note.isMarkdownEnabled());
 161              mInfoWords.setText(getCombinedCount(note.getContent()));
 162  
 163              if (note.isPublished()) {
 164                  mInfoLinkTitle.setText(mFragment.getString(R.string.public_link));
 165                  mInfoLinkUrl.setText(note.getPublishedUrl());
 166                  mInfoLinkUrl.setVisibility(View.VISIBLE);
 167                  mCopyButton.setVisibility(View.VISIBLE);
 168                  mShareButton.setVisibility(View.GONE);
 169              } else {
 170                  mInfoLinkTitle.setText(mFragment.getString(R.string.note_not_published));
 171                  mInfoLinkUrl.setVisibility(View.GONE);
 172                  mCopyButton.setVisibility(View.GONE);
 173                  mShareButton.setVisibility(View.VISIBLE);
 174              }




 175          }
 176      }
 177  
 178      private String getCombinedCount(String content) {
 179          return String.format(&quot;%s\n%s&quot;, getWordCount(content), getCharactersCount(content));
 180      }
 181  
 182      private String getWordCount(String content) {
 183          int numWords = (content.trim().length() == 0) ? 0 : content.trim().split(&quot;([\\W]+)&quot;).length;
 184          String wordCountString = mFragment.getResources().getQuantityString(R.plurals.word_count, numWords);
 185          String formattedWordCount = NumberFormat.getInstance().format(numWords);
 186          return String.format(&quot;%s %s&quot;, formattedWordCount, wordCountString);


 187      }
 188  
 189      private String getCharactersCount(String content) {
 190          int numChars = content.length();
 191          String charCount = NumberFormat.getInstance().format(numChars);
 192          String charCountString = mFragment.getResources().getQuantityString(R.plurals.char_count, numChars);
 193          return String.format(&quot;%s %s&quot;, charCount, charCountString);
 194      }
 195  
 196      public interface InfoSheetListener {
 197          void onInfoCopyLinkClicked();
 198          void onInfoDismissed();
 199          void onInfoMarkdownSwitchChanged(boolean isSwitchedOn);
 200          void onInfoPinSwitchChanged(boolean isSwitchedOn);
 201          void onInfoShareLinkClicked();

 202      }
 203  }</pre></td>
                        </tr>
                    </table>
                </div>
              </body>
            </html>
            