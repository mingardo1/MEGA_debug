<!DOCTYPE html>
    <html lang="en">
              <head>
                <meta charset="utf-8">
                <title>572</title>
                    <style>
                        #top {
                            height: 48vh;
                            overflow-y: auto;
                        }
                        #bottom {
                            height: 48vh;
                            overflow-y: auto;
                        }
                        .highlighted {
                            background-color: rgba(177, 82, 227, 0.85) !important;
                        }
                    </style>
                    <script>
                        function enter(c) {
                            const lines = document.getElementsByClassName(c);
                            for (let i = 0; i < lines.length; i++) {
                               lines.item(i).classList.add('highlighted');
                            }
                        }
                        function out(c) {
                            const lines = document.getElementsByClassName(c);
                            for (let i = 0; i < lines.length; i++) {
                               lines.item(i).classList.remove('highlighted');
                            }
                        }
                    </script>
              </head>
              <body>
                <span style="height: 4vh">
                    572
                    <a href="571.html">prev</a>
                    <a href="573.html">next</a>
                    <a href="572_chunks.html">chunks</a>
                    <a href="index.html">index</a>
                    Freeyourgadget/Gadgetbridge_3751273cd0567feed2025fcf58b245cd6c508b6a_app/src/main/java/nodomain/freeyourgadget/gadgetbridge/service/devices/hplus/HPlusSupport.java
                    <textarea rows=1 onclick='navigator.clipboard.writeText(this.value)'>cd C:\studies\se\mega\git-analyzer-plus\notebooks\debug
del /Q *
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\Freeyourgadget\Gadgetbridge show &quot;3751273cd0567feed2025fcf58b245cd6c508b6a:app/src/main/java/nodomain/freeyourgadget/gadgetbridge/service/devices/hplus/HPlusSupport.java&quot; &gt; committed.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\Freeyourgadget\Gadgetbridge show &quot;3751273cd0567feed2025fcf58b245cd6c508b6a^1:app/src/main/java/nodomain/freeyourgadget/gadgetbridge/service/devices/hplus/HPlusSupport.java&quot; &gt; ours.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\Freeyourgadget\Gadgetbridge show &quot;3751273cd0567feed2025fcf58b245cd6c508b6a^2:app/src/main/java/nodomain/freeyourgadget/gadgetbridge/service/devices/hplus/HPlusSupport.java&quot; &gt; theirs.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\Freeyourgadget\Gadgetbridge show &quot;5717379aec22de8d22135ad9863e7abee2dc1bb2:app/src/main/java/nodomain/freeyourgadget/gadgetbridge/service/devices/hplus/HPlusSupport.java&quot; &gt; base.java
copy ours.java 1ours.java
copy ours.java 2ours.java
copy theirs.java 1theirs.java
copy theirs.java 2theirs.java
copy base.java 1base.java
copy base.java 2base.java
&quot;C:\Program Files\Java\jdk1.8.0_241\bin\java.exe&quot; -Dfile.encoding=UTF-8 -jar &quot;C:\studies\se\jFSTMerge\build\libs\jFSTMerge-all.jar&quot; C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1ours.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1base.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1theirs.java -o C:\studies\se\mega\git-analyzer-plus\notebooks\debug\jfstmerge.java --show-base
&quot;C:\Program Files\Eclipse Adoptium\jdk-17.0.11.9-hotspot\bin\java.exe&quot; -Dfile.encoding=UTF-8 -jar &quot;C:\studies\se\spork\target\spork-0.5.0-SNAPSHOT.jar&quot; C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2ours.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2base.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2theirs.java -o C:\studies\se\mega\git-analyzer-plus\notebooks\debug\spork.java
del /Q 1*.java
del /Q 2*.java
del /Q jfstmerge.java.merge
</textarea>
                    {strict: [[b], [b]], subset: [[b], [b]]}
                </span>
                <div id="top">

                    <table>
                        <tr>
                            <th>line based (standard git)</th>
                            <th>jfstmerge</th>
                            <th>spork</th>
                        </tr>
                        <tr>
                            <td><pre><span class="-6087748460489311696" onmouseenter="enter('-6087748460489311696');" onmouseout="out('-6087748460489311696');" style="">   1 /*  Copyright (C) 2016-2017 Alberto, Andreas Shimokawa, Carsten Pfeiffer,                                </span>
<span class="4602200970174176129" onmouseenter="enter('4602200970174176129');" onmouseout="out('4602200970174176129');" style="">   2     ivanovlev, JoaÌƒo Paulo Barraca                                                                       </span>
<span  style="">   3                                                                                                          </span>
<span class="-7759499394858783956" onmouseenter="enter('-7759499394858783956');" onmouseout="out('-7759499394858783956');" style="">   4     This file is part of Gadgetbridge.                                                                   </span>
<span  style="">   5                                                                                                          </span>
<span class="-2647557636279629478" onmouseenter="enter('-2647557636279629478');" onmouseout="out('-2647557636279629478');" style="">   6     Gadgetbridge is free software: you can redistribute it and/or modify                                 </span>
<span class="4878736751218581391" onmouseenter="enter('4878736751218581391');" onmouseout="out('4878736751218581391');" style="">   7     it under the terms of the GNU Affero General Public License as published                             </span>
<span class="-5160078368722358920" onmouseenter="enter('-5160078368722358920');" onmouseout="out('-5160078368722358920');" style="">   8     by the Free Software Foundation, either version 3 of the License, or                                 </span>
<span class="6661789815760177463" onmouseenter="enter('6661789815760177463');" onmouseout="out('6661789815760177463');" style="">   9     (at your option) any later version.                                                                  </span>
<span  style="">  10                                                                                                          </span>
<span class="-6828199977528779968" onmouseenter="enter('-6828199977528779968');" onmouseout="out('-6828199977528779968');" style="">  11     Gadgetbridge is distributed in the hope that it will be useful,                                      </span>
<span class="4883593508173597945" onmouseenter="enter('4883593508173597945');" onmouseout="out('4883593508173597945');" style="">  12     but WITHOUT ANY WARRANTY; without even the implied warranty of                                       </span>
<span class="2300657568347926527" onmouseenter="enter('2300657568347926527');" onmouseout="out('2300657568347926527');" style="">  13     MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the                                        </span>
<span class="4681049817175334681" onmouseenter="enter('4681049817175334681');" onmouseout="out('4681049817175334681');" style="">  14     GNU Affero General Public License for more details.                                                  </span>
<span  style="">  15                                                                                                          </span>
<span class="-3235531360569947201" onmouseenter="enter('-3235531360569947201');" onmouseout="out('-3235531360569947201');" style="">  16     You should have received a copy of the GNU Affero General Public License                             </span>
<span class="-3088444562895398794" onmouseenter="enter('-3088444562895398794');" onmouseout="out('-3088444562895398794');" style="">  17     along with this program.  If not, see &lt;http://www.gnu.org/licenses/&gt;. */                             </span>
<span class="-5217643761314834314" onmouseenter="enter('-5217643761314834314');" onmouseout="out('-5217643761314834314');" style="">  18 package nodomain.freeyourgadget.gadgetbridge.service.devices.hplus;                                      </span>
<span  style="">  19                                                                                                          </span>
<span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style="">  20 /*                                                                                                       </span>
<span class="5416857039449935643" onmouseenter="enter('5416857039449935643');" onmouseout="out('5416857039449935643');" style="">  21 * @author JoÃ£o Paulo Barraca &amp;lt;jpbarraca@gmail.com&amp;gt;                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  22 */                                                                                                       </span>
<span  style="">  23                                                                                                          </span>
<span class="2440823415412133066" onmouseenter="enter('2440823415412133066');" onmouseout="out('2440823415412133066');" style="">  24 import android.bluetooth.BluetoothGatt;                                                                  </span>
<span class="4736969144974683041" onmouseenter="enter('4736969144974683041');" onmouseout="out('4736969144974683041');" style="">  25 import android.bluetooth.BluetoothGattCharacteristic;                                                    </span>
<span class="-489389385851058391" onmouseenter="enter('-489389385851058391');" onmouseout="out('-489389385851058391');" style="">  26 import android.content.BroadcastReceiver;                                                                </span>
<span class="5922045460006936195" onmouseenter="enter('5922045460006936195');" onmouseout="out('5922045460006936195');" style="">  27 import android.content.Context;                                                                          </span>
<span class="6568903789857736568" onmouseenter="enter('6568903789857736568');" onmouseout="out('6568903789857736568');" style="">  28 import android.content.Intent;                                                                           </span>
<span class="8697221465021235869" onmouseenter="enter('8697221465021235869');" onmouseout="out('8697221465021235869');" style="">  29 import android.content.IntentFilter;                                                                     </span>
<span class="-8750621697125156872" onmouseenter="enter('-8750621697125156872');" onmouseout="out('-8750621697125156872');" style="">  30 import android.net.Uri;                                                                                  </span>
<span class="2517521963771876570" onmouseenter="enter('2517521963771876570');" onmouseout="out('2517521963771876570');" style="">  31 import android.support.v4.content.LocalBroadcastManager;                                                 </span>
<span class="-4373317539211938720" onmouseenter="enter('-4373317539211938720');" onmouseout="out('-4373317539211938720');" style="">  32 import android.widget.Toast;                                                                             </span>
<span  style="">  33                                                                                                          </span>
<span class="2359514128542055982" onmouseenter="enter('2359514128542055982');" onmouseout="out('2359514128542055982');" style="">  34 import org.apache.commons.lang3.ArrayUtils;                                                              </span>
<span class="9072327285961251154" onmouseenter="enter('9072327285961251154');" onmouseout="out('9072327285961251154');" style="">  35 import org.slf4j.Logger;                                                                                 </span>
<span class="697043352225962606" onmouseenter="enter('697043352225962606');" onmouseout="out('697043352225962606');" style="">  36 import org.slf4j.LoggerFactory;                                                                          </span>
<span  style="">  37                                                                                                          </span>
<span class="103340661636203254" onmouseenter="enter('103340661636203254');" onmouseout="out('103340661636203254');" style="">  38 import java.io.IOException;                                                                              </span>
<span class="8256805395213692609" onmouseenter="enter('8256805395213692609');" onmouseout="out('8256805395213692609');" style="">  39 import java.io.UnsupportedEncodingException;                                                             </span>
<span class="9191247685397773893" onmouseenter="enter('9191247685397773893');" onmouseout="out('9191247685397773893');" style="">  40 import java.util.ArrayList;                                                                              </span>
<span class="-28465676010609596" onmouseenter="enter('-28465676010609596');" onmouseout="out('-28465676010609596');" style="">  41 import java.util.Arrays;                                                                                 </span>
<span class="1562735530241225598" onmouseenter="enter('1562735530241225598');" onmouseout="out('1562735530241225598');" style="">  42 import java.util.Calendar;                                                                               </span>
<span class="-4685965902094386510" onmouseenter="enter('-4685965902094386510');" onmouseout="out('-4685965902094386510');" style="">  43 import java.util.GregorianCalendar;                                                                      </span>
<span class="-1786020958497218848" onmouseenter="enter('-1786020958497218848');" onmouseout="out('-1786020958497218848');" style="">  44 import java.util.List;                                                                                   </span>
<span class="2390503830490498598" onmouseenter="enter('2390503830490498598');" onmouseout="out('2390503830490498598');" style="">  45 import java.util.UUID;                                                                                   </span>
<span  style="">  46                                                                                                          </span>
<span class="-7198279398549834921" onmouseenter="enter('-7198279398549834921');" onmouseout="out('-7198279398549834921');" style="">  47 import nodomain.freeyourgadget.gadgetbridge.R;                                                           </span>
<span class="-3005335786085073829" onmouseenter="enter('-3005335786085073829');" onmouseout="out('-3005335786085073829');" style="">  48 import nodomain.freeyourgadget.gadgetbridge.deviceevents.GBDeviceEventBatteryInfo;                       </span>
<span class="5042091401088979472" onmouseenter="enter('5042091401088979472');" onmouseout="out('5042091401088979472');" style="">  49 import nodomain.freeyourgadget.gadgetbridge.devices.hplus.HPlusConstants;                                </span>
<span class="-4973236722115174269" onmouseenter="enter('-4973236722115174269');" onmouseout="out('-4973236722115174269');" style="">  50 import nodomain.freeyourgadget.gadgetbridge.devices.hplus.HPlusCoordinator;                              </span>
<span class="4836892992022606579" onmouseenter="enter('4836892992022606579');" onmouseout="out('4836892992022606579');" style="">  51 import nodomain.freeyourgadget.gadgetbridge.impl.GBDevice;                                               </span>
<span class="-8766238562391910018" onmouseenter="enter('-8766238562391910018');" onmouseout="out('-8766238562391910018');" style="">  52 import nodomain.freeyourgadget.gadgetbridge.model.Alarm;                                                 </span>
<span class="-3899388208810973608" onmouseenter="enter('-3899388208810973608');" onmouseout="out('-3899388208810973608');" style="">  53 import nodomain.freeyourgadget.gadgetbridge.model.CalendarEventSpec;                                     </span>
<span class="-9074570965792323186" onmouseenter="enter('-9074570965792323186');" onmouseout="out('-9074570965792323186');" style="">  54 import nodomain.freeyourgadget.gadgetbridge.model.CallSpec;                                              </span>
<span class="-7415926539738049206" onmouseenter="enter('-7415926539738049206');" onmouseout="out('-7415926539738049206');" style="">  55 import nodomain.freeyourgadget.gadgetbridge.model.CannedMessagesSpec;                                    </span>
<span class="1593353296711823731" onmouseenter="enter('1593353296711823731');" onmouseout="out('1593353296711823731');" style="">  56 import nodomain.freeyourgadget.gadgetbridge.model.DeviceType;                                            </span>
<span class="7672535166545256161" onmouseenter="enter('7672535166545256161');" onmouseout="out('7672535166545256161');" style="">  57 import nodomain.freeyourgadget.gadgetbridge.model.GenericItem;                                           </span>
<span class="-4068239021838445503" onmouseenter="enter('-4068239021838445503');" onmouseout="out('-4068239021838445503');" style="">  58 import nodomain.freeyourgadget.gadgetbridge.model.MusicSpec;                                             </span>
<span class="7536481506851862405" onmouseenter="enter('7536481506851862405');" onmouseout="out('7536481506851862405');" style="">  59 import nodomain.freeyourgadget.gadgetbridge.model.MusicStateSpec;                                        </span>
<span class="8239808916005009388" onmouseenter="enter('8239808916005009388');" onmouseout="out('8239808916005009388');" style="">  60 import nodomain.freeyourgadget.gadgetbridge.model.NotificationSpec;                                      </span>
<span class="-40839721936664146" onmouseenter="enter('-40839721936664146');" onmouseout="out('-40839721936664146');" style="">  61 import nodomain.freeyourgadget.gadgetbridge.model.WeatherSpec;                                           </span>
<span class="4344228987867394358" onmouseenter="enter('4344228987867394358');" onmouseout="out('4344228987867394358');" style="">  62 import nodomain.freeyourgadget.gadgetbridge.service.btle.AbstractBTLEDeviceSupport;                      </span>
<span class="3410519392510510669" onmouseenter="enter('3410519392510510669');" onmouseout="out('3410519392510510669');" style="">  63 import nodomain.freeyourgadget.gadgetbridge.service.btle.TransactionBuilder;                             </span>
<span class="-2373314641424532722" onmouseenter="enter('-2373314641424532722');" onmouseout="out('-2373314641424532722');" style="">  64 import nodomain.freeyourgadget.gadgetbridge.service.btle.profiles.deviceinfo.DeviceInfo;                 </span>
<span class="5990042019621381740" onmouseenter="enter('5990042019621381740');" onmouseout="out('5990042019621381740');" style="">  65 import nodomain.freeyourgadget.gadgetbridge.service.btle.profiles.deviceinfo.DeviceInfoProfile;          </span>
<span class="-3798970344596478499" onmouseenter="enter('-3798970344596478499');" onmouseout="out('-3798970344596478499');" style="">  66 import nodomain.freeyourgadget.gadgetbridge.util.GB;                                                     </span>
<span class="1710555602396666834" onmouseenter="enter('1710555602396666834');" onmouseout="out('1710555602396666834');" style="">  67 import nodomain.freeyourgadget.gadgetbridge.util.StringUtils;                                            </span>
<span  style="">  68                                                                                                          </span>
<span  style="">  69                                                                                                          </span>
<span class="-4082404187206109090" onmouseenter="enter('-4082404187206109090');" onmouseout="out('-4082404187206109090');" style="">  70 public class HPlusSupport extends AbstractBTLEDeviceSupport {                                            </span>
<span class="-3586142179549744071" onmouseenter="enter('-3586142179549744071');" onmouseout="out('-3586142179549744071');" style="">  71     private static final Logger LOG = LoggerFactory.getLogger(HPlusSupport.class);                       </span>
<span  style="">  72                                                                                                          </span>
<span class="-5014208032763947659" onmouseenter="enter('-5014208032763947659');" onmouseout="out('-5014208032763947659');" style="">  73     public BluetoothGattCharacteristic ctrlCharacteristic = null;                                        </span>
<span class="-1389691261480921757" onmouseenter="enter('-1389691261480921757');" onmouseout="out('-1389691261480921757');" style="">  74     public BluetoothGattCharacteristic measureCharacteristic = null;                                     </span>
<span  style="">  75                                                                                                          </span>
<span class="7253442996403887798" onmouseenter="enter('7253442996403887798');" onmouseout="out('7253442996403887798');" style="">  76     private final GBDeviceEventBatteryInfo batteryCmd = new GBDeviceEventBatteryInfo();                  </span>
<span  style="">  77                                                                                                          </span>
<span class="-2647742433589439535" onmouseenter="enter('-2647742433589439535');" onmouseout="out('-2647742433589439535');" style="">  78     private HPlusHandlerThread syncHelper;                                                               </span>
<span class="7122708288156354523" onmouseenter="enter('7122708288156354523');" onmouseout="out('7122708288156354523');" style="">  79     private DeviceType deviceType = DeviceType.UNKNOWN;                                                  </span>
<span  style="">  80                                                                                                          </span>
<span class="4625474178666977899" onmouseenter="enter('4625474178666977899');" onmouseout="out('4625474178666977899');" style="">  81     private final BroadcastReceiver mReceiver = new BroadcastReceiver() {                                </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  82         @Override                                                                                        </span>
<span class="-1520739091809898546" onmouseenter="enter('-1520739091809898546');" onmouseout="out('-1520739091809898546');" style="">  83         public void onReceive(Context context, Intent intent) {                                          </span>
<span class="-4530039192824031" onmouseenter="enter('-4530039192824031');" onmouseout="out('-4530039192824031');" style="">  84             String s = intent.getAction();                                                               </span>
<span class="-431805254143538347" onmouseenter="enter('-431805254143538347');" onmouseout="out('-431805254143538347');" style="">  85             if (s.equals(DeviceInfoProfile.ACTION_DEVICE_INFO)) {                                        </span>
<span class="2870344340685632275" onmouseenter="enter('2870344340685632275');" onmouseout="out('2870344340685632275');" style=""><abbr title="  86                 handleDeviceInfo((nodomain.freeyourgadget.gadgetbridge.service.btle.profiles.deviceinfo.DeviceInfo) intent.getParcelableExtra(DeviceInfoProfile.EXTRA_DEVICE_INFO));">  86                 handleDeviceInfo((nodomain.freeyourgadget.gadgetbridge.service.btle.profiles.deviceinfo.DðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  87             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  88         }                                                                                                </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">  89     };                                                                                                   </span>
<span  style="">  90                                                                                                          </span>
<span class="-6599573096376092321" onmouseenter="enter('-6599573096376092321');" onmouseout="out('-6599573096376092321');" style="">  91     public HPlusSupport(DeviceType type) {                                                               </span>
<span class="4463652287758102089" onmouseenter="enter('4463652287758102089');" onmouseout="out('4463652287758102089');" style="">  92         super(LOG);                                                                                      </span>
<span class="-911614436014638875" onmouseenter="enter('-911614436014638875');" onmouseout="out('-911614436014638875');" style="">  93         LOG.info(&quot;HPlusSupport Instance Created&quot;);                                                       </span>
<span class="3299229106905835199" onmouseenter="enter('3299229106905835199');" onmouseout="out('3299229106905835199');" style="">  94         deviceType = type;                                                                               </span>
<span  style="">  95                                                                                                          </span>
<span class="377067810786142420" onmouseenter="enter('377067810786142420');" onmouseout="out('377067810786142420');" style="">  96         addSupportedService(HPlusConstants.UUID_SERVICE_HP);                                             </span>
<span  style="">  97                                                                                                          </span>
<span class="5948400278394960963" onmouseenter="enter('5948400278394960963');" onmouseout="out('5948400278394960963');" style="">  98         LocalBroadcastManager broadcastManager = LocalBroadcastManager.getInstance(getContext());        </span>
<span class="-6475340056070675924" onmouseenter="enter('-6475340056070675924');" onmouseout="out('-6475340056070675924');" style="">  99         IntentFilter intentFilter = new IntentFilter();                                                  </span>
<span  style=""> 100                                                                                                          </span>
<span class="-9031778988080615533" onmouseenter="enter('-9031778988080615533');" onmouseout="out('-9031778988080615533');" style=""> 101         broadcastManager.registerReceiver(mReceiver, intentFilter);                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 102     }                                                                                                    </span>
<span  style=""> 103                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 104     @Override                                                                                            </span>
<span class="-4657406736363487113" onmouseenter="enter('-4657406736363487113');" onmouseout="out('-4657406736363487113');" style=""> 105     public void dispose() {                                                                              </span>
<span class="-1145329300786377991" onmouseenter="enter('-1145329300786377991');" onmouseout="out('-1145329300786377991');" style=""> 106         LOG.info(&quot;Dispose&quot;);                                                                             </span>
<span class="5948400278394960963" onmouseenter="enter('5948400278394960963');" onmouseout="out('5948400278394960963');" style=""> 107         LocalBroadcastManager broadcastManager = LocalBroadcastManager.getInstance(getContext());        </span>
<span class="-2591797645219758220" onmouseenter="enter('-2591797645219758220');" onmouseout="out('-2591797645219758220');" style=""> 108         broadcastManager.unregisterReceiver(mReceiver);                                                  </span>
<span  style=""> 109                                                                                                          </span>
<span class="-2251371211449821101" onmouseenter="enter('-2251371211449821101');" onmouseout="out('-2251371211449821101');" style=""> 110         close();                                                                                         </span>
<span  style=""> 111                                                                                                          </span>
<span class="4250596422636225835" onmouseenter="enter('4250596422636225835');" onmouseout="out('4250596422636225835');" style=""> 112         super.dispose();                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 113     }                                                                                                    </span>
<span  style=""> 114                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 115     @Override                                                                                            </span>
<span class="624595386859969795" onmouseenter="enter('624595386859969795');" onmouseout="out('624595386859969795');" style=""> 116     protected TransactionBuilder initializeDevice(TransactionBuilder builder) {                          </span>
<span class="6943102306574884764" onmouseenter="enter('6943102306574884764');" onmouseout="out('6943102306574884764');" style=""> 117         LOG.info(&quot;Initializing&quot;);                                                                        </span>
<span  style=""> 118                                                                                                          </span>
<span class="-5776342764121597122" onmouseenter="enter('-5776342764121597122');" onmouseout="out('-5776342764121597122');" style=""> 119         gbDevice.setState(GBDevice.State.INITIALIZING);                                                  </span>
<span class="-6083303279196581322" onmouseenter="enter('-6083303279196581322');" onmouseout="out('-6083303279196581322');" style=""> 120         gbDevice.sendDeviceUpdateIntent(getContext());                                                   </span>
<span  style=""> 121                                                                                                          </span>
<span class="-2070300686094273817" onmouseenter="enter('-2070300686094273817');" onmouseout="out('-2070300686094273817');" style=""> 122         measureCharacteristic = getCharacteristic(HPlusConstants.UUID_CHARACTERISTIC_MEASURE);           </span>
<span class="-3114635167656687851" onmouseenter="enter('-3114635167656687851');" onmouseout="out('-3114635167656687851');" style=""> 123         ctrlCharacteristic = getCharacteristic(HPlusConstants.UUID_CHARACTERISTIC_CONTROL);              </span>
<span  style=""> 124                                                                                                          </span>
<span  style=""> 125                                                                                                          </span>
<span class="3645364997644532552" onmouseenter="enter('3645364997644532552');" onmouseout="out('3645364997644532552');" style=""> 126         builder.notify(getCharacteristic(HPlusConstants.UUID_CHARACTERISTIC_MEASURE), true);             </span>
<span class="8787860057533172177" onmouseenter="enter('8787860057533172177');" onmouseout="out('8787860057533172177');" style=""> 127         builder.setGattCallback(this);                                                                   </span>
<span class="7940646096517618441" onmouseenter="enter('7940646096517618441');" onmouseout="out('7940646096517618441');" style=""> 128         builder.notify(measureCharacteristic, true);                                                     </span>
<span class="7604618378927278958" onmouseenter="enter('7604618378927278958');" onmouseout="out('7604618378927278958');" style=""> 129         //Initialize device                                                                              </span>
<span class="-504446867221575653" onmouseenter="enter('-504446867221575653');" onmouseout="out('-504446867221575653');" style=""> 130         sendUserInfo(builder); //Sync preferences                                                        </span>
<span  style=""> 131                                                                                                          </span>
<span class="6586859092027978564" onmouseenter="enter('6586859092027978564');" onmouseout="out('6586859092027978564');" style=""> 132         gbDevice.setState(GBDevice.State.INITIALIZED);                                                   </span>
<span class="-6083303279196581322" onmouseenter="enter('-6083303279196581322');" onmouseout="out('-6083303279196581322');" style=""> 133         gbDevice.sendDeviceUpdateIntent(getContext());                                                   </span>
<span  style=""> 134                                                                                                          </span>
<span class="-2848575222108196544" onmouseenter="enter('-2848575222108196544');" onmouseout="out('-2848575222108196544');" style=""> 135         if(syncHelper == null) {                                                                         </span>
<span class="-1983961118622982915" onmouseenter="enter('-1983961118622982915');" onmouseout="out('-1983961118622982915');" style=""> 136             syncHelper = new HPlusHandlerThread(getDevice(), getContext(), this);                        </span>
<span class="-1903424543284802769" onmouseenter="enter('-1903424543284802769');" onmouseout="out('-1903424543284802769');" style=""> 137             syncHelper.start();                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 138         }                                                                                                </span>
<span class="-1977462876553727609" onmouseenter="enter('-1977462876553727609');" onmouseout="out('-1977462876553727609');" style=""> 139         syncHelper.sync();                                                                               </span>
<span  style=""> 140                                                                                                          </span>
<span class="-3832688778173104110" onmouseenter="enter('-3832688778173104110');" onmouseout="out('-3832688778173104110');" style=""> 141         getDevice().setFirmwareVersion(&quot;N/A&quot;);                                                           </span>
<span class="-4069256094451065143" onmouseenter="enter('-4069256094451065143');" onmouseout="out('-4069256094451065143');" style=""> 142         getDevice().setFirmwareVersion2(&quot;N/A&quot;);                                                          </span>
<span  style=""> 143                                                                                                          </span>
<span class="2384486382001682171" onmouseenter="enter('2384486382001682171');" onmouseout="out('2384486382001682171');" style=""> 144         requestDeviceInfo(builder);                                                                      </span>
<span  style=""> 145                                                                                                          </span>
<span class="8801197429786363323" onmouseenter="enter('8801197429786363323');" onmouseout="out('8801197429786363323');" style=""> 146         LOG.info(&quot;Initialization Done&quot;);                                                                 </span>
<span  style=""> 147                                                                                                          </span>
<span class="4801455624621135639" onmouseenter="enter('4801455624621135639');" onmouseout="out('4801455624621135639');" style=""> 148         return builder;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 149     }                                                                                                    </span>
<span  style=""> 150                                                                                                          </span>
<span class="464313160346579114" onmouseenter="enter('464313160346579114');" onmouseout="out('464313160346579114');" style=""> 151     private HPlusSupport sendUserInfo(TransactionBuilder builder) {                                      </span>
<span class="8659711009772068062" onmouseenter="enter('8659711009772068062');" onmouseout="out('8659711009772068062');" style=""> 152         builder.write(ctrlCharacteristic, HPlusConstants.CMD_SET_PREF_START);                            </span>
<span class="-4601813669746665290" onmouseenter="enter('-4601813669746665290');" onmouseout="out('-4601813669746665290');" style=""> 153         builder.write(ctrlCharacteristic, HPlusConstants.CMD_SET_PREF_START1);                           </span>
<span  style=""> 154                                                                                                          </span>
<span class="5354677973902937208" onmouseenter="enter('5354677973902937208');" onmouseout="out('5354677973902937208');" style=""> 155         syncPreferences(builder);                                                                        </span>
<span  style=""> 156                                                                                                          </span>
<span class="3647312381509313349" onmouseenter="enter('3647312381509313349');" onmouseout="out('3647312381509313349');" style=""> 157         builder.write(ctrlCharacteristic, new byte[]{HPlusConstants.CMD_SET_CONF_END});                  </span>
<span class="2297715846939503398" onmouseenter="enter('2297715846939503398');" onmouseout="out('2297715846939503398');" style=""> 158         return this;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 159     }                                                                                                    </span>
<span  style=""> 160                                                                                                          </span>
<span class="-3630452951846679004" onmouseenter="enter('-3630452951846679004');" onmouseout="out('-3630452951846679004');" style=""> 161     private HPlusSupport syncPreferences(TransactionBuilder transaction) {                               </span>
<span  style=""> 162                                                                                                          </span>
<span class="9200456031894264068" onmouseenter="enter('9200456031894264068');" onmouseout="out('9200456031894264068');" style=""> 163         if (deviceType == DeviceType.HPLUS) {                                                            </span>
<span class="-9160949721391368870" onmouseenter="enter('-9160949721391368870');" onmouseout="out('-9160949721391368870');" style=""> 164             setSIT(transaction);          //Sync SIT Interval                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 165         }                                                                                                </span>
<span  style=""> 166                                                                                                          </span>
<span class="8565886816545297578" onmouseenter="enter('8565886816545297578');" onmouseout="out('8565886816545297578');" style=""> 167         setCurrentDate(transaction);                                                                     </span>
<span class="-8398887245102710885" onmouseenter="enter('-8398887245102710885');" onmouseout="out('-8398887245102710885');" style=""> 168         setCurrentTime(transaction);                                                                     </span>
<span class="1698876699275306022" onmouseenter="enter('1698876699275306022');" onmouseout="out('1698876699275306022');" style=""> 169         setDayOfWeek(transaction);                                                                       </span>
<span class="-2226089159439282115" onmouseenter="enter('-2226089159439282115');" onmouseout="out('-2226089159439282115');" style=""> 170         setTimeMode(transaction);                                                                        </span>
<span  style=""> 171                                                                                                          </span>
<span class="-3967043804590944959" onmouseenter="enter('-3967043804590944959');" onmouseout="out('-3967043804590944959');" style=""> 172         setGender(transaction);                                                                          </span>
<span class="1849231822188363425" onmouseenter="enter('1849231822188363425');" onmouseout="out('1849231822188363425');" style=""> 173         setAge(transaction);                                                                             </span>
<span class="8409976551582741350" onmouseenter="enter('8409976551582741350');" onmouseout="out('8409976551582741350');" style=""> 174         setWeight(transaction);                                                                          </span>
<span class="2177249264940965323" onmouseenter="enter('2177249264940965323');" onmouseout="out('2177249264940965323');" style=""> 175         setHeight(transaction);                                                                          </span>
<span  style=""> 176                                                                                                          </span>
<span class="-7350523131149809385" onmouseenter="enter('-7350523131149809385');" onmouseout="out('-7350523131149809385');" style=""> 177         setGoal(transaction);                                                                            </span>
<span class="4493614030159792560" onmouseenter="enter('4493614030159792560');" onmouseout="out('4493614030159792560');" style=""> 178         setLanguage(transaction);                                                                        </span>
<span class="-7293987064571039169" onmouseenter="enter('-7293987064571039169');" onmouseout="out('-7293987064571039169');" style=""> 179         setScreenTime(transaction);                                                                      </span>
<span class="8577063610004227384" onmouseenter="enter('8577063610004227384');" onmouseout="out('8577063610004227384');" style=""> 180         setUnit(transaction);                                                                            </span>
<span class="-4090002420283598619" onmouseenter="enter('-4090002420283598619');" onmouseout="out('-4090002420283598619');" style=""> 181         setAllDayHeart(transaction);                                                                     </span>
<span  style=""> 182                                                                                                          </span>
<span class="2297715846939503398" onmouseenter="enter('2297715846939503398');" onmouseout="out('2297715846939503398');" style=""> 183         return this;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 184     }                                                                                                    </span>
<span  style=""> 185                                                                                                          </span>
<span class="2971063439380410916" onmouseenter="enter('2971063439380410916');" onmouseout="out('2971063439380410916');" style=""> 186     private HPlusSupport setLanguage(TransactionBuilder transaction) {                                   </span>
<span class="2849983908429827334" onmouseenter="enter('2849983908429827334');" onmouseout="out('2849983908429827334');" style=""> 187         byte value = HPlusCoordinator.getLanguage(getDevice().getAddress());                             </span>
<span class="3291452160875082121" onmouseenter="enter('3291452160875082121');" onmouseout="out('3291452160875082121');" style=""> 188         transaction.write(ctrlCharacteristic, new byte[]{                                                </span>
<span class="-2720480633878408025" onmouseenter="enter('-2720480633878408025');" onmouseout="out('-2720480633878408025');" style=""> 189                 HPlusConstants.CMD_SET_LANGUAGE,                                                         </span>
<span class="1200713371940080677" onmouseenter="enter('1200713371940080677');" onmouseout="out('1200713371940080677');" style=""> 190                 value                                                                                    </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 191         });                                                                                              </span>
<span class="2297715846939503398" onmouseenter="enter('2297715846939503398');" onmouseout="out('2297715846939503398');" style=""> 192         return this;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 193     }                                                                                                    </span>
<span  style=""> 194                                                                                                          </span>
<span  style=""> 195                                                                                                          </span>
<span class="4317151267263402448" onmouseenter="enter('4317151267263402448');" onmouseout="out('4317151267263402448');" style=""> 196     private HPlusSupport setTimeMode(TransactionBuilder transaction) {                                   </span>
<span class="218359786857846408" onmouseenter="enter('218359786857846408');" onmouseout="out('218359786857846408');" style=""> 197         byte value = HPlusCoordinator.getTimeMode(getDevice().getAddress());                             </span>
<span  style=""> 198                                                                                                          </span>
<span class="3291452160875082121" onmouseenter="enter('3291452160875082121');" onmouseout="out('3291452160875082121');" style=""> 199         transaction.write(ctrlCharacteristic, new byte[]{                                                </span>
<span class="4263534606018086323" onmouseenter="enter('4263534606018086323');" onmouseout="out('4263534606018086323');" style=""> 200                 HPlusConstants.CMD_SET_TIMEMODE,                                                         </span>
<span class="1200713371940080677" onmouseenter="enter('1200713371940080677');" onmouseout="out('1200713371940080677');" style=""> 201                 value                                                                                    </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 202         });                                                                                              </span>
<span class="2297715846939503398" onmouseenter="enter('2297715846939503398');" onmouseout="out('2297715846939503398');" style=""> 203         return this;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 204     }                                                                                                    </span>
<span  style=""> 205                                                                                                          </span>
<span class="1527802699814540214" onmouseenter="enter('1527802699814540214');" onmouseout="out('1527802699814540214');" style=""> 206     private HPlusSupport setUnit(TransactionBuilder transaction) {                                       </span>
<span class="-8211628829141498614" onmouseenter="enter('-8211628829141498614');" onmouseout="out('-8211628829141498614');" style=""> 207         byte value = HPlusCoordinator.getUnit(getDevice().getAddress());                                 </span>
<span class="3291452160875082121" onmouseenter="enter('3291452160875082121');" onmouseout="out('3291452160875082121');" style=""> 208         transaction.write(ctrlCharacteristic, new byte[]{                                                </span>
<span class="330508883912365904" onmouseenter="enter('330508883912365904');" onmouseout="out('330508883912365904');" style=""> 209                 HPlusConstants.CMD_SET_UNITS,                                                            </span>
<span class="1200713371940080677" onmouseenter="enter('1200713371940080677');" onmouseout="out('1200713371940080677');" style=""> 210                 value                                                                                    </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 211         });                                                                                              </span>
<span class="2297715846939503398" onmouseenter="enter('2297715846939503398');" onmouseout="out('2297715846939503398');" style=""> 212         return this;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 213     }                                                                                                    </span>
<span  style=""> 214                                                                                                          </span>
<span class="-7617350710418441488" onmouseenter="enter('-7617350710418441488');" onmouseout="out('-7617350710418441488');" style=""> 215     private HPlusSupport setCurrentDate(TransactionBuilder transaction) {                                </span>
<span class="2531610087543829790" onmouseenter="enter('2531610087543829790');" onmouseout="out('2531610087543829790');" style=""> 216         Calendar c = GregorianCalendar.getInstance();                                                    </span>
<span class="-2923391553220974433" onmouseenter="enter('-2923391553220974433');" onmouseout="out('-2923391553220974433');" style=""> 217         int year = c.get(Calendar.YEAR);                                                                 </span>
<span class="8379254238395309807" onmouseenter="enter('8379254238395309807');" onmouseout="out('8379254238395309807');" style=""> 218         int month = c.get(Calendar.MONTH);                                                               </span>
<span class="-1537240887202619533" onmouseenter="enter('-1537240887202619533');" onmouseout="out('-1537240887202619533');" style=""> 219         int day = c.get(Calendar.DAY_OF_MONTH);                                                          </span>
<span  style=""> 220                                                                                                          </span>
<span class="3291452160875082121" onmouseenter="enter('3291452160875082121');" onmouseout="out('3291452160875082121');" style=""> 221         transaction.write(ctrlCharacteristic, new byte[]{                                                </span>
<span class="-5419256561338282975" onmouseenter="enter('-5419256561338282975');" onmouseout="out('-5419256561338282975');" style=""> 222                 HPlusConstants.CMD_SET_DATE,                                                             </span>
<span class="596156045428080737" onmouseenter="enter('596156045428080737');" onmouseout="out('596156045428080737');" style=""> 223                 (byte) ((year / 256) &amp; 0xff),                                                            </span>
<span class="-274510278877719166" onmouseenter="enter('-274510278877719166');" onmouseout="out('-274510278877719166');" style=""> 224                 (byte) (year % 256),                                                                     </span>
<span class="2509221540333605786" onmouseenter="enter('2509221540333605786');" onmouseout="out('2509221540333605786');" style=""> 225                 (byte) (month + 1),                                                                      </span>
<span class="154836591265012146" onmouseenter="enter('154836591265012146');" onmouseout="out('154836591265012146');" style=""> 226                 (byte) (day)                                                                             </span>
<span  style=""> 227                                                                                                          </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 228         });                                                                                              </span>
<span class="2297715846939503398" onmouseenter="enter('2297715846939503398');" onmouseout="out('2297715846939503398');" style=""> 229         return this;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 230     }                                                                                                    </span>
<span  style=""> 231                                                                                                          </span>
<span class="-5177509192006647721" onmouseenter="enter('-5177509192006647721');" onmouseout="out('-5177509192006647721');" style=""> 232     private HPlusSupport setCurrentTime(TransactionBuilder transaction) {                                </span>
<span class="2531610087543829790" onmouseenter="enter('2531610087543829790');" onmouseout="out('2531610087543829790');" style=""> 233         Calendar c = GregorianCalendar.getInstance();                                                    </span>
<span  style=""> 234                                                                                                          </span>
<span class="3291452160875082121" onmouseenter="enter('3291452160875082121');" onmouseout="out('3291452160875082121');" style=""> 235         transaction.write(ctrlCharacteristic, new byte[]{                                                </span>
<span class="-3810178960282507440" onmouseenter="enter('-3810178960282507440');" onmouseout="out('-3810178960282507440');" style=""> 236                 HPlusConstants.CMD_SET_TIME,                                                             </span>
<span class="4175240225145224534" onmouseenter="enter('4175240225145224534');" onmouseout="out('4175240225145224534');" style=""> 237                 (byte) c.get(Calendar.HOUR_OF_DAY),                                                      </span>
<span class="-8029568718198783140" onmouseenter="enter('-8029568718198783140');" onmouseout="out('-8029568718198783140');" style=""> 238                 (byte) c.get(Calendar.MINUTE),                                                           </span>
<span class="-2353745633236339443" onmouseenter="enter('-2353745633236339443');" onmouseout="out('-2353745633236339443');" style=""> 239                 (byte) c.get(Calendar.SECOND)                                                            </span>
<span  style=""> 240                                                                                                          </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 241         });                                                                                              </span>
<span class="2297715846939503398" onmouseenter="enter('2297715846939503398');" onmouseout="out('2297715846939503398');" style=""> 242         return this;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 243     }                                                                                                    </span>
<span  style=""> 244                                                                                                          </span>
<span  style=""> 245                                                                                                          </span>
<span class="-4421580834062212270" onmouseenter="enter('-4421580834062212270');" onmouseout="out('-4421580834062212270');" style=""> 246     private HPlusSupport setDayOfWeek(TransactionBuilder transaction) {                                  </span>
<span class="2531610087543829790" onmouseenter="enter('2531610087543829790');" onmouseout="out('2531610087543829790');" style=""> 247         Calendar c = GregorianCalendar.getInstance();                                                    </span>
<span  style=""> 248                                                                                                          </span>
<span class="3291452160875082121" onmouseenter="enter('3291452160875082121');" onmouseout="out('3291452160875082121');" style=""> 249         transaction.write(ctrlCharacteristic, new byte[]{                                                </span>
<span class="7969665857025838608" onmouseenter="enter('7969665857025838608');" onmouseout="out('7969665857025838608');" style=""> 250                 HPlusConstants.CMD_SET_WEEK,                                                             </span>
<span class="2107609500554215585" onmouseenter="enter('2107609500554215585');" onmouseout="out('2107609500554215585');" style=""> 251                 (byte) (c.get(Calendar.DAY_OF_WEEK) - 1)                                                 </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 252         });                                                                                              </span>
<span class="2297715846939503398" onmouseenter="enter('2297715846939503398');" onmouseout="out('2297715846939503398');" style=""> 253         return this;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 254     }                                                                                                    </span>
<span  style=""> 255                                                                                                          </span>
<span  style=""> 256                                                                                                          </span>
<span class="1777874725720523294" onmouseenter="enter('1777874725720523294');" onmouseout="out('1777874725720523294');" style=""> 257     private HPlusSupport setSIT(TransactionBuilder transaction) {                                        </span>
<span  style=""> 258                                                                                                          </span>
<span class="-1710515092546508137" onmouseenter="enter('-1710515092546508137');" onmouseout="out('-1710515092546508137');" style=""> 259         //Makibes F68 doesn&#x27;t like this command.                                                         </span>
<span class="4585394865152052123" onmouseenter="enter('4585394865152052123');" onmouseout="out('4585394865152052123');" style=""> 260         //Just ignore.                                                                                   </span>
<span class="8010717523561516322" onmouseenter="enter('8010717523561516322');" onmouseout="out('8010717523561516322');" style=""> 261         if (deviceType == DeviceType.MAKIBESF68) {                                                       </span>
<span class="2297715846939503398" onmouseenter="enter('2297715846939503398');" onmouseout="out('2297715846939503398');" style=""> 262             return this;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 263         }                                                                                                </span>
<span  style=""> 264                                                                                                          </span>
<span class="7782781853756800720" onmouseenter="enter('7782781853756800720');" onmouseout="out('7782781853756800720');" style=""> 265         int startTime = HPlusCoordinator.getSITStartTime(getDevice().getAddress());                      </span>
<span class="8209842661687801925" onmouseenter="enter('8209842661687801925');" onmouseout="out('8209842661687801925');" style=""> 266         int endTime = HPlusCoordinator.getSITEndTime(getDevice().getAddress());                          </span>
<span  style=""> 267                                                                                                          </span>
<span class="5882708480576637773" onmouseenter="enter('5882708480576637773');" onmouseout="out('5882708480576637773');" style=""> 268         Calendar now = GregorianCalendar.getInstance();                                                  </span>
<span  style=""> 269                                                                                                          </span>
<span class="3291452160875082121" onmouseenter="enter('3291452160875082121');" onmouseout="out('3291452160875082121');" style=""> 270         transaction.write(ctrlCharacteristic, new byte[]{                                                </span>
<span class="-6329136660964193391" onmouseenter="enter('-6329136660964193391');" onmouseout="out('-6329136660964193391');" style=""> 271                 HPlusConstants.CMD_SET_SIT_INTERVAL,                                                     </span>
<span class="-7172094393246648903" onmouseenter="enter('-7172094393246648903');" onmouseout="out('-7172094393246648903');" style=""> 272                 (byte) ((startTime / 256) &amp; 0xff),                                                       </span>
<span class="-3674522560837142583" onmouseenter="enter('-3674522560837142583');" onmouseout="out('-3674522560837142583');" style=""> 273                 (byte) (startTime % 256),                                                                </span>
<span class="9123983034732908067" onmouseenter="enter('9123983034732908067');" onmouseout="out('9123983034732908067');" style=""> 274                 (byte) ((endTime / 256) &amp; 0xff),                                                         </span>
<span class="5594695527343368846" onmouseenter="enter('5594695527343368846');" onmouseout="out('5594695527343368846');" style=""> 275                 (byte) (endTime % 256),                                                                  </span>
<span class="-6076240376861215679" onmouseenter="enter('-6076240376861215679');" onmouseout="out('-6076240376861215679');" style=""> 276                 0,                                                                                       </span>
<span class="-6076240376861215679" onmouseenter="enter('-6076240376861215679');" onmouseout="out('-6076240376861215679');" style=""> 277                 0,                                                                                       </span>
<span class="-1881944630562092789" onmouseenter="enter('-1881944630562092789');" onmouseout="out('-1881944630562092789');" style=""> 278                 (byte) ((now.get(Calendar.YEAR) / 256) &amp; 0xff),                                          </span>
<span class="808961206931151347" onmouseenter="enter('808961206931151347');" onmouseout="out('808961206931151347');" style=""> 279                 (byte) (now.get(Calendar.YEAR) % 256),                                                   </span>
<span class="-3929811106245983954" onmouseenter="enter('-3929811106245983954');" onmouseout="out('-3929811106245983954');" style=""> 280                 (byte) (now.get(Calendar.MONTH) + 1),                                                    </span>
<span class="-6608497570264303352" onmouseenter="enter('-6608497570264303352');" onmouseout="out('-6608497570264303352');" style=""> 281                 (byte) (now.get(Calendar.DAY_OF_MONTH)),                                                 </span>
<span class="-4838072097318336683" onmouseenter="enter('-4838072097318336683');" onmouseout="out('-4838072097318336683');" style=""> 282                 (byte) (now.get(Calendar.HOUR_OF_DAY)),                                                  </span>
<span class="-3604343412851664994" onmouseenter="enter('-3604343412851664994');" onmouseout="out('-3604343412851664994');" style=""> 283                 (byte) (now.get(Calendar.MINUTE)),                                                       </span>
<span class="8073077880938975334" onmouseenter="enter('8073077880938975334');" onmouseout="out('8073077880938975334');" style=""> 284                 (byte) (now.get(Calendar.SECOND)),                                                       </span>
<span class="-6076240376861215679" onmouseenter="enter('-6076240376861215679');" onmouseout="out('-6076240376861215679');" style=""> 285                 0,                                                                                       </span>
<span class="-6076240376861215679" onmouseenter="enter('-6076240376861215679');" onmouseout="out('-6076240376861215679');" style=""> 286                 0,                                                                                       </span>
<span class="-6076240376861215679" onmouseenter="enter('-6076240376861215679');" onmouseout="out('-6076240376861215679');" style=""> 287                 0,                                                                                       </span>
<span class="2218992417378941058" onmouseenter="enter('2218992417378941058');" onmouseout="out('2218992417378941058');" style=""> 288                 0                                                                                        </span>
<span  style=""> 289                                                                                                          </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 290         });                                                                                              </span>
<span class="2297715846939503398" onmouseenter="enter('2297715846939503398');" onmouseout="out('2297715846939503398');" style=""> 291         return this;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 292     }                                                                                                    </span>
<span  style=""> 293                                                                                                          </span>
<span class="7972248273337413684" onmouseenter="enter('7972248273337413684');" onmouseout="out('7972248273337413684');" style=""> 294     private HPlusSupport setWeight(TransactionBuilder transaction) {                                     </span>
<span class="8150192687820779212" onmouseenter="enter('8150192687820779212');" onmouseout="out('8150192687820779212');" style=""> 295         byte value = HPlusCoordinator.getUserWeight();                                                   </span>
<span class="3291452160875082121" onmouseenter="enter('3291452160875082121');" onmouseout="out('3291452160875082121');" style=""> 296         transaction.write(ctrlCharacteristic, new byte[]{                                                </span>
<span class="-3989010006227608454" onmouseenter="enter('-3989010006227608454');" onmouseout="out('-3989010006227608454');" style=""> 297                 HPlusConstants.CMD_SET_WEIGHT,                                                           </span>
<span class="1200713371940080677" onmouseenter="enter('1200713371940080677');" onmouseout="out('1200713371940080677');" style=""> 298                 value                                                                                    </span>
<span  style=""> 299                                                                                                          </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 300         });                                                                                              </span>
<span class="2297715846939503398" onmouseenter="enter('2297715846939503398');" onmouseout="out('2297715846939503398');" style=""> 301         return this;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 302     }                                                                                                    </span>
<span  style=""> 303                                                                                                          </span>
<span class="-7347510196780789476" onmouseenter="enter('-7347510196780789476');" onmouseout="out('-7347510196780789476');" style=""> 304     private HPlusSupport setHeight(TransactionBuilder transaction) {                                     </span>
<span class="-6343281459862929187" onmouseenter="enter('-6343281459862929187');" onmouseout="out('-6343281459862929187');" style=""> 305         byte value = HPlusCoordinator.getUserHeight();                                                   </span>
<span class="3291452160875082121" onmouseenter="enter('3291452160875082121');" onmouseout="out('3291452160875082121');" style=""> 306         transaction.write(ctrlCharacteristic, new byte[]{                                                </span>
<span class="-2073946156144479840" onmouseenter="enter('-2073946156144479840');" onmouseout="out('-2073946156144479840');" style=""> 307                 HPlusConstants.CMD_HEIGHT,                                                               </span>
<span class="1200713371940080677" onmouseenter="enter('1200713371940080677');" onmouseout="out('1200713371940080677');" style=""> 308                 value                                                                                    </span>
<span  style=""> 309                                                                                                          </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 310         });                                                                                              </span>
<span class="2297715846939503398" onmouseenter="enter('2297715846939503398');" onmouseout="out('2297715846939503398');" style=""> 311         return this;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 312     }                                                                                                    </span>
<span  style=""> 313                                                                                                          </span>
<span  style=""> 314                                                                                                          </span>
<span class="5947324092747227570" onmouseenter="enter('5947324092747227570');" onmouseout="out('5947324092747227570');" style=""> 315     private HPlusSupport setAge(TransactionBuilder transaction) {                                        </span>
<span class="2934823474304180885" onmouseenter="enter('2934823474304180885');" onmouseout="out('2934823474304180885');" style=""> 316         byte value = HPlusCoordinator.getUserAge();                                                      </span>
<span class="3291452160875082121" onmouseenter="enter('3291452160875082121');" onmouseout="out('3291452160875082121');" style=""> 317         transaction.write(ctrlCharacteristic, new byte[]{                                                </span>
<span class="5713181507603331000" onmouseenter="enter('5713181507603331000');" onmouseout="out('5713181507603331000');" style=""> 318                 HPlusConstants.CMD_SET_AGE,                                                              </span>
<span class="1200713371940080677" onmouseenter="enter('1200713371940080677');" onmouseout="out('1200713371940080677');" style=""> 319                 value                                                                                    </span>
<span  style=""> 320                                                                                                          </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 321         });                                                                                              </span>
<span class="2297715846939503398" onmouseenter="enter('2297715846939503398');" onmouseout="out('2297715846939503398');" style=""> 322         return this;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 323     }                                                                                                    </span>
<span  style=""> 324                                                                                                          </span>
<span class="7012632444102522477" onmouseenter="enter('7012632444102522477');" onmouseout="out('7012632444102522477');" style=""> 325     private HPlusSupport setGender(TransactionBuilder transaction) {                                     </span>
<span class="851277153814698" onmouseenter="enter('851277153814698');" onmouseout="out('851277153814698');" style=""> 326         byte value = HPlusCoordinator.getUserGender();                                                   </span>
<span class="3291452160875082121" onmouseenter="enter('3291452160875082121');" onmouseout="out('3291452160875082121');" style=""> 327         transaction.write(ctrlCharacteristic, new byte[]{                                                </span>
<span class="3680299272630460864" onmouseenter="enter('3680299272630460864');" onmouseout="out('3680299272630460864');" style=""> 328                 HPlusConstants.CMD_SET_GENDER,                                                           </span>
<span class="1200713371940080677" onmouseenter="enter('1200713371940080677');" onmouseout="out('1200713371940080677');" style=""> 329                 value                                                                                    </span>
<span  style=""> 330                                                                                                          </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 331         });                                                                                              </span>
<span class="2297715846939503398" onmouseenter="enter('2297715846939503398');" onmouseout="out('2297715846939503398');" style=""> 332         return this;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 333     }                                                                                                    </span>
<span  style=""> 334                                                                                                          </span>
<span  style=""> 335                                                                                                          </span>
<span class="1941288733470282948" onmouseenter="enter('1941288733470282948');" onmouseout="out('1941288733470282948');" style=""> 336     private HPlusSupport setGoal(TransactionBuilder transaction) {                                       </span>
<span class="7904327141242761065" onmouseenter="enter('7904327141242761065');" onmouseout="out('7904327141242761065');" style=""> 337         int value = HPlusCoordinator.getGoal();                                                          </span>
<span class="3291452160875082121" onmouseenter="enter('3291452160875082121');" onmouseout="out('3291452160875082121');" style=""> 338         transaction.write(ctrlCharacteristic, new byte[]{                                                </span>
<span class="-4101300033431726292" onmouseenter="enter('-4101300033431726292');" onmouseout="out('-4101300033431726292');" style=""> 339                 HPlusConstants.CMD_SET_GOAL,                                                             </span>
<span class="-2916442659377879431" onmouseenter="enter('-2916442659377879431');" onmouseout="out('-2916442659377879431');" style=""> 340                 (byte) ((value / 256) &amp; 0xff),                                                           </span>
<span class="-1647377881209297723" onmouseenter="enter('-1647377881209297723');" onmouseout="out('-1647377881209297723');" style=""> 341                 (byte) (value % 256)                                                                     </span>
<span  style=""> 342                                                                                                          </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 343         });                                                                                              </span>
<span class="2297715846939503398" onmouseenter="enter('2297715846939503398');" onmouseout="out('2297715846939503398');" style=""> 344         return this;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 345     }                                                                                                    </span>
<span  style=""> 346                                                                                                          </span>
<span  style=""> 347                                                                                                          </span>
<span class="-1254834888773037917" onmouseenter="enter('-1254834888773037917');" onmouseout="out('-1254834888773037917');" style=""> 348     private HPlusSupport setScreenTime(TransactionBuilder transaction) {                                 </span>
<span class="4315045256729533150" onmouseenter="enter('4315045256729533150');" onmouseout="out('4315045256729533150');" style=""> 349         byte value = HPlusCoordinator.getScreenTime(getDevice().getAddress());                           </span>
<span class="3291452160875082121" onmouseenter="enter('3291452160875082121');" onmouseout="out('3291452160875082121');" style=""> 350         transaction.write(ctrlCharacteristic, new byte[]{                                                </span>
<span class="-6949628958147360848" onmouseenter="enter('-6949628958147360848');" onmouseout="out('-6949628958147360848');" style=""> 351                 HPlusConstants.CMD_SET_SCREENTIME,                                                       </span>
<span class="1200713371940080677" onmouseenter="enter('1200713371940080677');" onmouseout="out('1200713371940080677');" style=""> 352                 value                                                                                    </span>
<span  style=""> 353                                                                                                          </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 354         });                                                                                              </span>
<span class="2297715846939503398" onmouseenter="enter('2297715846939503398');" onmouseout="out('2297715846939503398');" style=""> 355         return this;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 356     }                                                                                                    </span>
<span  style=""> 357                                                                                                          </span>
<span class="-5197767512792012744" onmouseenter="enter('-5197767512792012744');" onmouseout="out('-5197767512792012744');" style=""> 358     private HPlusSupport setAllDayHeart(TransactionBuilder transaction) {                                </span>
<span  style=""> 359                                                                                                          </span>
<span class="-7482590365127471239" onmouseenter="enter('-7482590365127471239');" onmouseout="out('-7482590365127471239');" style=""> 360         byte value = HPlusCoordinator.getAllDayHR(getDevice().getAddress());                             </span>
<span  style=""> 361                                                                                                          </span>
<span class="3291452160875082121" onmouseenter="enter('3291452160875082121');" onmouseout="out('3291452160875082121');" style=""> 362         transaction.write(ctrlCharacteristic, new byte[]{                                                </span>
<span class="8318401178566544878" onmouseenter="enter('8318401178566544878');" onmouseout="out('8318401178566544878');" style=""> 363                 HPlusConstants.CMD_SET_ALLDAY_HRM,                                                       </span>
<span class="1200713371940080677" onmouseenter="enter('1200713371940080677');" onmouseout="out('1200713371940080677');" style=""> 364                 value                                                                                    </span>
<span  style=""> 365                                                                                                          </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 366         });                                                                                              </span>
<span  style=""> 367                                                                                                          </span>
<span class="2297715846939503398" onmouseenter="enter('2297715846939503398');" onmouseout="out('2297715846939503398');" style=""> 368         return this;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 369     }                                                                                                    </span>
<span  style=""> 370                                                                                                          </span>
<span  style=""> 371                                                                                                          </span>
<span class="-1399038394034113320" onmouseenter="enter('-1399038394034113320');" onmouseout="out('-1399038394034113320');" style=""> 372     private HPlusSupport setAlarm(TransactionBuilder transaction, Calendar t) {                          </span>
<span  style=""> 373                                                                                                          </span>
<span class="6467402380305076865" onmouseenter="enter('6467402380305076865');" onmouseout="out('6467402380305076865');" style=""> 374         byte hour = HPlusConstants.ARG_ALARM_DISABLE;                                                    </span>
<span class="-3281384072436167776" onmouseenter="enter('-3281384072436167776');" onmouseout="out('-3281384072436167776');" style=""> 375         byte minute = HPlusConstants.ARG_ALARM_DISABLE;                                                  </span>
<span  style=""> 376                                                                                                          </span>
<span class="-7115571877868547666" onmouseenter="enter('-7115571877868547666');" onmouseout="out('-7115571877868547666');" style=""> 377         if (t != null) {                                                                                 </span>
<span class="5339525172321764938" onmouseenter="enter('5339525172321764938');" onmouseout="out('5339525172321764938');" style=""> 378             hour = (byte) t.get(Calendar.HOUR_OF_DAY);                                                   </span>
<span class="5337471965635534220" onmouseenter="enter('5337471965635534220');" onmouseout="out('5337471965635534220');" style=""> 379             minute = (byte) t.get(Calendar.MINUTE);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 380         }                                                                                                </span>
<span  style=""> 381                                                                                                          </span>
<span class="-3840280779505156671" onmouseenter="enter('-3840280779505156671');" onmouseout="out('-3840280779505156671');" style=""> 382         transaction.write(ctrlCharacteristic, new byte[]{HPlusConstants.CMD_SET_ALARM,                   </span>
<span class="-5045918625335939481" onmouseenter="enter('-5045918625335939481');" onmouseout="out('-5045918625335939481');" style=""> 383                 hour,                                                                                    </span>
<span class="-2395728393329392091" onmouseenter="enter('-2395728393329392091');" onmouseout="out('-2395728393329392091');" style=""> 384                 minute});                                                                                </span>
<span  style=""> 385                                                                                                          </span>
<span class="2297715846939503398" onmouseenter="enter('2297715846939503398');" onmouseout="out('2297715846939503398');" style=""> 386         return this;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 387     }                                                                                                    </span>
<span  style=""> 388                                                                                                          </span>
<span class="-791908888061445625" onmouseenter="enter('-791908888061445625');" onmouseout="out('-791908888061445625');" style=""> 389     private HPlusSupport setFindMe(TransactionBuilder transaction, boolean state) {                      </span>
<span class="7282700573083723681" onmouseenter="enter('7282700573083723681');" onmouseout="out('7282700573083723681');" style=""> 390         //TODO: Find how this works                                                                      </span>
<span  style=""> 391                                                                                                          </span>
<span class="-2705361656414002162" onmouseenter="enter('-2705361656414002162');" onmouseout="out('-2705361656414002162');" style=""> 392         byte[] msg = new byte[2];                                                                        </span>
<span class="5997450077450443173" onmouseenter="enter('5997450077450443173');" onmouseout="out('5997450077450443173');" style=""> 393         msg[0] = HPlusConstants.CMD_SET_FINDME;                                                          </span>
<span  style=""> 394                                                                                                          </span>
<span class="7403209030499211268" onmouseenter="enter('7403209030499211268');" onmouseout="out('7403209030499211268');" style=""> 395         if (state)                                                                                       </span>
<span class="3636634837394653002" onmouseenter="enter('3636634837394653002');" onmouseout="out('3636634837394653002');" style=""> 396             msg[1] = HPlusConstants.ARG_FINDME_ON;                                                       </span>
<span class="-7436048164614400339" onmouseenter="enter('-7436048164614400339');" onmouseout="out('-7436048164614400339');" style=""> 397         else                                                                                             </span>
<span class="8074200006318753451" onmouseenter="enter('8074200006318753451');" onmouseout="out('8074200006318753451');" style=""> 398             msg[1] = HPlusConstants.ARG_FINDME_OFF;                                                      </span>
<span  style=""> 399                                                                                                          </span>
<span class="-7204010731863731309" onmouseenter="enter('-7204010731863731309');" onmouseout="out('-7204010731863731309');" style=""> 400         transaction.write(ctrlCharacteristic, msg);                                                      </span>
<span class="2297715846939503398" onmouseenter="enter('2297715846939503398');" onmouseout="out('2297715846939503398');" style=""> 401         return this;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 402     }                                                                                                    </span>
<span  style=""> 403                                                                                                          </span>
<span class="-5684646578701203654" onmouseenter="enter('-5684646578701203654');" onmouseout="out('-5684646578701203654');" style=""> 404     private HPlusSupport requestDeviceInfo(TransactionBuilder builder) {                                 </span>
<span class="3573392645117931820" onmouseenter="enter('3573392645117931820');" onmouseout="out('3573392645117931820');" style=""> 405         // HPlus devices seem to report some information in an alternative manner                        </span>
<span class="-8697440581090313181" onmouseenter="enter('-8697440581090313181');" onmouseout="out('-8697440581090313181');" style=""> 406         builder.write(ctrlCharacteristic, new byte[]{HPlusConstants.CMD_GET_DEVICE_ID});                 </span>
<span class="485503605876832302" onmouseenter="enter('485503605876832302');" onmouseout="out('485503605876832302');" style=""> 407         builder.write(ctrlCharacteristic, new byte[]{HPlusConstants.CMD_GET_VERSION});                   </span>
<span  style=""> 408                                                                                                          </span>
<span class="2297715846939503398" onmouseenter="enter('2297715846939503398');" onmouseout="out('2297715846939503398');" style=""> 409         return this;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 410     }                                                                                                    </span>
<span  style=""> 411                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 412     @Override                                                                                            </span>
<span class="-5141762163842231173" onmouseenter="enter('-5141762163842231173');" onmouseout="out('-5141762163842231173');" style=""> 413     public boolean useAutoConnect() {                                                                    </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 414         return true;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 415     }                                                                                                    </span>
<span  style=""> 416                                                                                                          </span>
<span class="4975694330800448779" onmouseenter="enter('4975694330800448779');" onmouseout="out('4975694330800448779');" style=""> 417     private void handleDeviceInfo(DeviceInfo info) {                                                     </span>
<span class="370366693446993512" onmouseenter="enter('370366693446993512');" onmouseout="out('370366693446993512');" style=""> 418         LOG.warn(&quot;Device info: &quot; + info);                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 419     }                                                                                                    </span>
<span  style=""> 420                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 421     @Override                                                                                            </span>
<span class="-116609517646424186" onmouseenter="enter('-116609517646424186');" onmouseout="out('-116609517646424186');" style=""> 422     public void onNotification(NotificationSpec notificationSpec) {                                      </span>
<span class="-2323011847991818474" onmouseenter="enter('-2323011847991818474');" onmouseout="out('-2323011847991818474');" style=""> 423         //TODO: Show different notifications according to source as Band supports this                   </span>
<span class="6488462260965955164" onmouseenter="enter('6488462260965955164');" onmouseout="out('6488462260965955164');" style=""><abbr title=" 424         //LOG.info(&quot;OnNotification: Title: &quot;+notificationSpec.title+&quot; Body: &quot;+notificationSpec.body+&quot; Source: &quot;+notificationSpec.sourceName+&quot; Sender: &quot;+notificationSpec.sender+&quot; Subject: &quot;+notificationSpec.subject);"> 424         //LOG.info(&quot;OnNotification: Title: &quot;+notificationSpec.title+&quot; Body: &quot;+notificationSpec.body+&quot; SouðŸ”µ</abbr></span>
<span class="-2578227233159539388" onmouseenter="enter('-2578227233159539388');" onmouseout="out('-2578227233159539388');" style=""> 425         showText(notificationSpec.title, notificationSpec.body);                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 426     }                                                                                                    </span>
<span  style=""> 427                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 428     @Override                                                                                            </span>
<span class="-1102873404195143085" onmouseenter="enter('-1102873404195143085');" onmouseout="out('-1102873404195143085');" style=""> 429     public void onDeleteNotification(int id) {                                                           </span>
<span  style=""> 430                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 431     }                                                                                                    </span>
<span  style=""> 432                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 433     @Override                                                                                            </span>
<span class="7164248173527032001" onmouseenter="enter('7164248173527032001');" onmouseout="out('7164248173527032001');" style=""> 434     public void onSetTime() {                                                                            </span>
<span  style=""> 435                                                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 436         try {                                                                                            </span>
<span class="8378030939534756566" onmouseenter="enter('8378030939534756566');" onmouseout="out('8378030939534756566');" style=""> 437             TransactionBuilder builder = performInitialized(&quot;time&quot;);                                     </span>
<span  style=""> 438                                                                                                          </span>
<span class="-244233841179675239" onmouseenter="enter('-244233841179675239');" onmouseout="out('-244233841179675239');" style=""> 439             setCurrentDate(builder);                                                                     </span>
<span class="7377265401852080297" onmouseenter="enter('7377265401852080297');" onmouseout="out('7377265401852080297');" style=""> 440             setCurrentTime(builder);                                                                     </span>
<span class="-4667942192763773056" onmouseenter="enter('-4667942192763773056');" onmouseout="out('-4667942192763773056');" style=""> 441 &lt;&lt;&lt;&lt;&lt;&lt;&lt; GitAnalyzerPlus_ours                                                                             </span>
<span  style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 442                                                                                                          </span>
<span class="-5534937907083456817" onmouseenter="enter('-5534937907083456817');" onmouseout="out('-5534937907083456817');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 443             builder.queue(getQueue());                                                                   </span>
<span class="7080241092423381085" onmouseenter="enter('7080241092423381085');" onmouseout="out('7080241092423381085');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 444         } catch (IOException e) {                                                                        </span>
<span class="6741223626729319096" onmouseenter="enter('6741223626729319096');" onmouseout="out('6741223626729319096');" style=""> 445 ||||||| GitAnalyzerPlus_base                                                                             </span>
<span class="7377265401852080297" onmouseenter="enter('7377265401852080297');" onmouseout="out('7377265401852080297');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 446             setCurrentTime(builder);                                                                     </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 447                                                                                                          </span>
<span class="-5534937907083456817" onmouseenter="enter('-5534937907083456817');" onmouseout="out('-5534937907083456817');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 448             builder.queue(getQueue());                                                                   </span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style=""> 449 =======                                                                                                  </span>
<span class="3761800854751581723" onmouseenter="enter('3761800854751581723');" onmouseout="out('3761800854751581723');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 450             performConnected(builder.getTransaction());                                                  </span>
<span class="2183742815887262996" onmouseenter="enter('2183742815887262996');" onmouseout="out('2183742815887262996');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 451         }catch(IOException e){                                                                           </span>
<span class="-1382546150375666264" onmouseenter="enter('-1382546150375666264');" onmouseout="out('-1382546150375666264');" style=""> 452 &gt;&gt;&gt;&gt;&gt;&gt;&gt; GitAnalyzerPlus_theirs                                                                           </span>
<span  style=""> 453                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 454         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 455     }                                                                                                    </span>
<span  style=""> 456                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 457     @Override                                                                                            </span>
<span class="-6473317888357330260" onmouseenter="enter('-6473317888357330260');" onmouseout="out('-6473317888357330260');" style=""> 458     public void onSetAlarms(ArrayList&lt;? extends Alarm&gt; alarms) {                                         </span>
<span  style=""> 459                                                                                                          </span>
<span  style=""> 460                                                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 461         try {                                                                                            </span>
<span class="-1278421083116070762" onmouseenter="enter('-1278421083116070762');" onmouseout="out('-1278421083116070762');" style=""> 462             TransactionBuilder builder = performInitialized(&quot;alarm&quot;);                                    </span>
<span  style=""> 463                                                                                                          </span>
<span class="-7996805109404385335" onmouseenter="enter('-7996805109404385335');" onmouseout="out('-7996805109404385335');" style=""> 464             for (Alarm alarm : alarms) {                                                                 </span>
<span  style=""> 465                                                                                                          </span>
<span class="-403059878991992441" onmouseenter="enter('-403059878991992441');" onmouseout="out('-403059878991992441');" style=""> 466                 if (!alarm.isEnabled())                                                                  </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style=""> 467                     continue;                                                                            </span>
<span  style=""> 468                                                                                                          </span>
<span class="-448638904182363762" onmouseenter="enter('-448638904182363762');" onmouseout="out('-448638904182363762');" style=""> 469                 if (alarm.isSmartWakeup()) //Not available                                               </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style=""> 470                     continue;                                                                            </span>
<span  style=""> 471                                                                                                          </span>
<span class="-2323525561533640256" onmouseenter="enter('-2323525561533640256');" onmouseout="out('-2323525561533640256');" style=""> 472                 Calendar t = alarm.getAlarmCal();                                                        </span>
<span class="-1264397343868138084" onmouseenter="enter('-1264397343868138084');" onmouseout="out('-1264397343868138084');" style=""> 473                 setAlarm(builder, t);                                                                    </span>
<span class="-5534937907083456817" onmouseenter="enter('-5534937907083456817');" onmouseout="out('-5534937907083456817');" style=""> 474                 builder.queue(getQueue());                                                               </span>
<span  style=""> 475                                                                                                          </span>
<span class="8097986474420678749" onmouseenter="enter('8097986474420678749');" onmouseout="out('8097986474420678749');" style=""><abbr title=" 476                 GB.toast(getContext(), getContext().getString(R.string.user_feedback_miband_set_alarms_ok), Toast.LENGTH_SHORT, GB.INFO);"> 476                 GB.toast(getContext(), getContext().getString(R.string.user_feedback_miband_set_alarms_okðŸ”µ</abbr></span>
<span  style=""> 477                                                                                                          </span>
<span class="-6545552544705045608" onmouseenter="enter('-6545552544705045608');" onmouseout="out('-6545552544705045608');" style=""> 478                 return; //Only first alarm                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 479             }                                                                                            </span>
<span  style=""> 480                                                                                                          </span>
<span class="3975187194000728744" onmouseenter="enter('3975187194000728744');" onmouseout="out('3975187194000728744');" style=""> 481             setAlarm(builder, null);                                                                     </span>
<span class="3761800854751581723" onmouseenter="enter('3761800854751581723');" onmouseout="out('3761800854751581723');" style=""> 482             performConnected(builder.getTransaction());                                                  </span>
<span  style=""> 483                                                                                                          </span>
<span class="-2313180102689307633" onmouseenter="enter('-2313180102689307633');" onmouseout="out('-2313180102689307633');" style=""><abbr title=" 484             GB.toast(getContext(), getContext().getString(R.string.user_feedback_all_alarms_disabled), Toast.LENGTH_SHORT, GB.INFO);"> 484             GB.toast(getContext(), getContext().getString(R.string.user_feedback_all_alarms_disabled), ToðŸ”µ</abbr></span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 485         } catch (Exception e) {                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 486         }                                                                                                </span>
<span  style=""> 487                                                                                                          </span>
<span  style=""> 488                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 489     }                                                                                                    </span>
<span  style=""> 490                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 491     @Override                                                                                            </span>
<span class="8502851833159229707" onmouseenter="enter('8502851833159229707');" onmouseout="out('8502851833159229707');" style=""> 492     public void onSetCallState(CallSpec callSpec) {                                                      </span>
<span class="4226096810368966115" onmouseenter="enter('4226096810368966115');" onmouseout="out('4226096810368966115');" style=""> 493         switch (callSpec.command) {                                                                      </span>
<span class="4765207307001745691" onmouseenter="enter('4765207307001745691');" onmouseout="out('4765207307001745691');" style=""> 494             case CallSpec.CALL_INCOMING: {                                                               </span>
<span class="-8067308976018849552" onmouseenter="enter('-8067308976018849552');" onmouseout="out('-8067308976018849552');" style=""> 495                 showIncomingCall(callSpec.name, callSpec.number);                                        </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 496                 break;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 497             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 498         }                                                                                                </span>
<span  style=""> 499                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 500     }                                                                                                    </span>
<span  style=""> 501                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 502     @Override                                                                                            </span>
<span class="8238257195410140286" onmouseenter="enter('8238257195410140286');" onmouseout="out('8238257195410140286');" style=""> 503     public void onSetCannedMessages(CannedMessagesSpec cannedMessagesSpec) {                             </span>
<span class="-2981468772764664347" onmouseenter="enter('-2981468772764664347');" onmouseout="out('-2981468772764664347');" style=""> 504         LOG.info(&quot;Canned Messages: &quot; + cannedMessagesSpec);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 505     }                                                                                                    </span>
<span  style=""> 506                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 507     @Override                                                                                            </span>
<span class="8228188929931998548" onmouseenter="enter('8228188929931998548');" onmouseout="out('8228188929931998548');" style=""> 508     public void onSetMusicState(MusicStateSpec stateSpec) {                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 509     }                                                                                                    </span>
<span  style=""> 510                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 511     @Override                                                                                            </span>
<span class="-4182706906721092498" onmouseenter="enter('-4182706906721092498');" onmouseout="out('-4182706906721092498');" style=""> 512     public void onSetMusicInfo(MusicSpec musicSpec) {                                                    </span>
<span  style=""> 513                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 514     }                                                                                                    </span>
<span  style=""> 515                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 516     @Override                                                                                            </span>
<span class="-8425797677863799500" onmouseenter="enter('-8425797677863799500');" onmouseout="out('-8425797677863799500');" style=""> 517     public void onEnableRealtimeSteps(boolean enable) {                                                  </span>
<span class="7623304499723183910" onmouseenter="enter('7623304499723183910');" onmouseout="out('7623304499723183910');" style=""> 518         onEnableRealtimeHeartRateMeasurement(enable);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 519     }                                                                                                    </span>
<span  style=""> 520                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 521     @Override                                                                                            </span>
<span class="-4135655620136168708" onmouseenter="enter('-4135655620136168708');" onmouseout="out('-4135655620136168708');" style=""> 522     public void onInstallApp(Uri uri) {                                                                  </span>
<span  style=""> 523                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 524     }                                                                                                    </span>
<span  style=""> 525                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 526     @Override                                                                                            </span>
<span class="-3322711972275217450" onmouseenter="enter('-3322711972275217450');" onmouseout="out('-3322711972275217450');" style=""> 527     public void onAppInfoReq() {                                                                         </span>
<span  style=""> 528                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 529     }                                                                                                    </span>
<span  style=""> 530                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 531     @Override                                                                                            </span>
<span class="1692097554900603024" onmouseenter="enter('1692097554900603024');" onmouseout="out('1692097554900603024');" style=""> 532     public void onAppStart(UUID uuid, boolean start) {                                                   </span>
<span  style=""> 533                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 534     }                                                                                                    </span>
<span  style=""> 535                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 536     @Override                                                                                            </span>
<span class="7633110766708892729" onmouseenter="enter('7633110766708892729');" onmouseout="out('7633110766708892729');" style=""> 537     public void onAppDelete(UUID uuid) {                                                                 </span>
<span  style=""> 538                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 539     }                                                                                                    </span>
<span  style=""> 540                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 541     @Override                                                                                            </span>
<span class="-862897393933438838" onmouseenter="enter('-862897393933438838');" onmouseout="out('-862897393933438838');" style=""> 542     public void onAppConfiguration(UUID appUuid, String config) {                                        </span>
<span  style=""> 543                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 544     }                                                                                                    </span>
<span  style=""> 545                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 546     @Override                                                                                            </span>
<span class="-2513514137107402976" onmouseenter="enter('-2513514137107402976');" onmouseout="out('-2513514137107402976');" style=""> 547     public void onAppReorder(UUID[] uuids) {                                                             </span>
<span  style=""> 548                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 549     }                                                                                                    </span>
<span  style=""> 550                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 551     @Override                                                                                            </span>
<span class="-3215171005460530491" onmouseenter="enter('-3215171005460530491');" onmouseout="out('-3215171005460530491');" style=""> 552     public void onFetchActivityData() {                                                                  </span>
<span  style=""> 553                                                                                                          </span>
<span class="6320050851961209117" onmouseenter="enter('6320050851961209117');" onmouseout="out('6320050851961209117');" style=""> 554         if (syncHelper == null){                                                                         </span>
<span class="-7391178071599224830" onmouseenter="enter('-7391178071599224830');" onmouseout="out('-7391178071599224830');" style=""> 555             syncHelper = new HPlusHandlerThread(gbDevice, getContext(), this);                           </span>
<span class="-1903424543284802769" onmouseenter="enter('-1903424543284802769');" onmouseout="out('-1903424543284802769');" style=""> 556             syncHelper.start();                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 557         }                                                                                                </span>
<span  style=""> 558                                                                                                          </span>
<span class="-1977462876553727609" onmouseenter="enter('-1977462876553727609');" onmouseout="out('-1977462876553727609');" style=""> 559         syncHelper.sync();                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 560     }                                                                                                    </span>
<span  style=""> 561                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 562     @Override                                                                                            </span>
<span class="-3494298342935464482" onmouseenter="enter('-3494298342935464482');" onmouseout="out('-3494298342935464482');" style=""> 563     public void onReboot() {                                                                             </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 564         try {                                                                                            </span>
<span class="867466265491236176" onmouseenter="enter('867466265491236176');" onmouseout="out('867466265491236176');" style=""> 565             getQueue().clear();                                                                          </span>
<span  style=""> 566                                                                                                          </span>
<span class="2354100081541725399" onmouseenter="enter('2354100081541725399');" onmouseout="out('2354100081541725399');" style=""> 567             TransactionBuilder builder = performInitialized(&quot;Shutdown&quot;);                                 </span>
<span class="2903890927038400619" onmouseenter="enter('2903890927038400619');" onmouseout="out('2903890927038400619');" style=""><abbr title=" 568             builder.write(ctrlCharacteristic, new byte[]{HPlusConstants.CMD_SHUTDOWN, HPlusConstants.ARG_SHUTDOWN_EN});"> 568             builder.write(ctrlCharacteristic, new byte[]{HPlusConstants.CMD_SHUTDOWN, HPlusConstants.ARG_ðŸ”µ</abbr></span>
<span class="-4667942192763773056" onmouseenter="enter('-4667942192763773056');" onmouseout="out('-4667942192763773056');" style=""> 569 &lt;&lt;&lt;&lt;&lt;&lt;&lt; GitAnalyzerPlus_ours                                                                             </span>
<span class="-5534937907083456817" onmouseenter="enter('-5534937907083456817');" onmouseout="out('-5534937907083456817');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 570             builder.queue(getQueue());                                                                   </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 571         } catch (Exception e) {                                                                          </span>
<span class="6741223626729319096" onmouseenter="enter('6741223626729319096');" onmouseout="out('6741223626729319096');" style=""> 572 ||||||| GitAnalyzerPlus_base                                                                             </span>
<span class="-5534937907083456817" onmouseenter="enter('-5534937907083456817');" onmouseout="out('-5534937907083456817');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 573             builder.queue(getQueue());                                                                   </span>
<span class="-757793854272623252" onmouseenter="enter('-757793854272623252');" onmouseout="out('-757793854272623252');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 574         }catch(Exception e){                                                                             </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 575                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 576         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 577     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 578                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 579     @Override                                                                                            </span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style=""> 580 =======                                                                                                  </span>
<span class="3761800854751581723" onmouseenter="enter('3761800854751581723');" onmouseout="out('3761800854751581723');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 581             performConnected(builder.getTransaction());                                                  </span>
<span class="-757793854272623252" onmouseenter="enter('-757793854272623252');" onmouseout="out('-757793854272623252');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 582         }catch(Exception e){                                                                             </span>
<span class="-1382546150375666264" onmouseenter="enter('-1382546150375666264');" onmouseout="out('-1382546150375666264');" style=""> 583 &gt;&gt;&gt;&gt;&gt;&gt;&gt; GitAnalyzerPlus_theirs                                                                           </span>
<span  style=""> 584                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 585         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 586     }                                                                                                    </span>
<span  style=""> 587                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 588     @Override                                                                                            </span>
<span class="-9008385526233139735" onmouseenter="enter('-9008385526233139735');" onmouseout="out('-9008385526233139735');" style=""> 589     public void onHeartRateTest() {                                                                      </span>
<span class="867466265491236176" onmouseenter="enter('867466265491236176');" onmouseout="out('867466265491236176');" style=""> 590         getQueue().clear();                                                                              </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 591         try {                                                                                            </span>
<span class="6333941902014570384" onmouseenter="enter('6333941902014570384');" onmouseout="out('6333941902014570384');" style=""> 592             TransactionBuilder builder = performInitialized(&quot;HeartRateTest&quot;);                            </span>
<span  style=""> 593                                                                                                          </span>
<span class="-4037030148406438927" onmouseenter="enter('-4037030148406438927');" onmouseout="out('-4037030148406438927');" style=""><abbr title=" 594             builder.write(ctrlCharacteristic, new byte[]{HPlusConstants.CMD_SET_HEARTRATE_STATE, HPlusConstants.ARG_HEARTRATE_MEASURE_ON}); //Set Real Time... ?"> 594             builder.write(ctrlCharacteristic, new byte[]{HPlusConstants.CMD_SET_HEARTRATE_STATE, HPlusConðŸ”µ</abbr></span>
<span class="-4667942192763773056" onmouseenter="enter('-4667942192763773056');" onmouseout="out('-4667942192763773056');" style=""> 595 &lt;&lt;&lt;&lt;&lt;&lt;&lt; GitAnalyzerPlus_ours                                                                             </span>
<span class="-5534937907083456817" onmouseenter="enter('-5534937907083456817');" onmouseout="out('-5534937907083456817');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 596             builder.queue(getQueue());                                                                   </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 597         } catch (Exception e) {                                                                          </span>
<span class="6741223626729319096" onmouseenter="enter('6741223626729319096');" onmouseout="out('6741223626729319096');" style=""> 598 ||||||| GitAnalyzerPlus_base                                                                             </span>
<span class="-5534937907083456817" onmouseenter="enter('-5534937907083456817');" onmouseout="out('-5534937907083456817');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 599             builder.queue(getQueue());                                                                   </span>
<span class="-757793854272623252" onmouseenter="enter('-757793854272623252');" onmouseout="out('-757793854272623252');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 600         }catch(Exception e){                                                                             </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 601                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 602         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 603     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 604                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 605     @Override                                                                                            </span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style=""> 606 =======                                                                                                  </span>
<span class="3761800854751581723" onmouseenter="enter('3761800854751581723');" onmouseout="out('3761800854751581723');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 607             performConnected(builder.getTransaction());                                                  </span>
<span class="-757793854272623252" onmouseenter="enter('-757793854272623252');" onmouseout="out('-757793854272623252');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 608         }catch(Exception e){                                                                             </span>
<span class="-1382546150375666264" onmouseenter="enter('-1382546150375666264');" onmouseout="out('-1382546150375666264');" style=""> 609 &gt;&gt;&gt;&gt;&gt;&gt;&gt; GitAnalyzerPlus_theirs                                                                           </span>
<span  style=""> 610                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 611         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 612     }                                                                                                    </span>
<span  style=""> 613                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 614     @Override                                                                                            </span>
<span class="2383065190612615413" onmouseenter="enter('2383065190612615413');" onmouseout="out('2383065190612615413');" style=""> 615     public void onEnableRealtimeHeartRateMeasurement(boolean enable) {                                   </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 616         try {                                                                                            </span>
<span class="5747251758811020424" onmouseenter="enter('5747251758811020424');" onmouseout="out('5747251758811020424');" style=""> 617             TransactionBuilder builder = performInitialized(&quot;realTimeHeartMeasurement&quot;);                 </span>
<span class="-3134908621992881846" onmouseenter="enter('-3134908621992881846');" onmouseout="out('-3134908621992881846');" style=""> 618             byte state;                                                                                  </span>
<span  style=""> 619                                                                                                          </span>
<span class="-2063204857297382402" onmouseenter="enter('-2063204857297382402');" onmouseout="out('-2063204857297382402');" style=""> 620             if (enable)                                                                                  </span>
<span class="4459610917207481324" onmouseenter="enter('4459610917207481324');" onmouseout="out('4459610917207481324');" style=""> 621                 state = HPlusConstants.ARG_HEARTRATE_ALLDAY_ON;                                          </span>
<span class="-7436048164614400339" onmouseenter="enter('-7436048164614400339');" onmouseout="out('-7436048164614400339');" style=""> 622             else                                                                                         </span>
<span class="237470636204788169" onmouseenter="enter('237470636204788169');" onmouseout="out('237470636204788169');" style=""> 623                 state = HPlusConstants.ARG_HEARTRATE_ALLDAY_OFF;                                         </span>
<span  style=""> 624                                                                                                          </span>
<span class="-8856770227184248316" onmouseenter="enter('-8856770227184248316');" onmouseout="out('-8856770227184248316');" style=""> 625             builder.write(ctrlCharacteristic, new byte[]{HPlusConstants.CMD_SET_ALLDAY_HRM, state});     </span>
<span class="-4667942192763773056" onmouseenter="enter('-4667942192763773056');" onmouseout="out('-4667942192763773056');" style=""> 626 &lt;&lt;&lt;&lt;&lt;&lt;&lt; GitAnalyzerPlus_ours                                                                             </span>
<span class="-5534937907083456817" onmouseenter="enter('-5534937907083456817');" onmouseout="out('-5534937907083456817');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 627             builder.queue(getQueue());                                                                   </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 628         } catch (Exception e) {                                                                          </span>
<span class="6741223626729319096" onmouseenter="enter('6741223626729319096');" onmouseout="out('6741223626729319096');" style=""> 629 ||||||| GitAnalyzerPlus_base                                                                             </span>
<span class="-5534937907083456817" onmouseenter="enter('-5534937907083456817');" onmouseout="out('-5534937907083456817');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 630             builder.queue(getQueue());                                                                   </span>
<span class="-757793854272623252" onmouseenter="enter('-757793854272623252');" onmouseout="out('-757793854272623252');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 631         }catch(Exception e){                                                                             </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 632                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 633         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 634     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 635                                                                                                          </span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style=""> 636 =======                                                                                                  </span>
<span class="3761800854751581723" onmouseenter="enter('3761800854751581723');" onmouseout="out('3761800854751581723');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 637             performConnected(builder.getTransaction());                                                  </span>
<span class="-757793854272623252" onmouseenter="enter('-757793854272623252');" onmouseout="out('-757793854272623252');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 638         }catch(Exception e){                                                                             </span>
<span class="-1382546150375666264" onmouseenter="enter('-1382546150375666264');" onmouseout="out('-1382546150375666264');" style=""> 639 &gt;&gt;&gt;&gt;&gt;&gt;&gt; GitAnalyzerPlus_theirs                                                                           </span>
<span  style=""> 640                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 641         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 642     }                                                                                                    </span>
<span  style=""> 643                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 644     @Override                                                                                            </span>
<span class="-3287587973518064190" onmouseenter="enter('-3287587973518064190');" onmouseout="out('-3287587973518064190');" style=""> 645     public void onFindDevice(boolean start) {                                                            </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 646         try {                                                                                            </span>
<span class="175553782406953484" onmouseenter="enter('175553782406953484');" onmouseout="out('175553782406953484');" style=""> 647             TransactionBuilder builder = performInitialized(&quot;findMe&quot;);                                   </span>
<span  style=""> 648                                                                                                          </span>
<span class="3618522043245605826" onmouseenter="enter('3618522043245605826');" onmouseout="out('3618522043245605826');" style=""> 649             setFindMe(builder, start);                                                                   </span>
<span class="3761800854751581723" onmouseenter="enter('3761800854751581723');" onmouseout="out('3761800854751581723');" style=""> 650             performConnected(builder.getTransaction());                                                  </span>
<span class="7080241092423381085" onmouseenter="enter('7080241092423381085');" onmouseout="out('7080241092423381085');" style=""> 651         } catch (IOException e) {                                                                        </span>
<span class="6289081880581889152" onmouseenter="enter('6289081880581889152');" onmouseout="out('6289081880581889152');" style=""><abbr title=" 652             GB.toast(getContext(), &quot;Error toggling Find Me: &quot; + e.getLocalizedMessage(), Toast.LENGTH_LONG, GB.ERROR);"> 652             GB.toast(getContext(), &quot;Error toggling Find Me: &quot; + e.getLocalizedMessage(), Toast.LENGTH_LONðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 653         }                                                                                                </span>
<span  style=""> 654                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 655     }                                                                                                    </span>
<span  style=""> 656                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 657     @Override                                                                                            </span>
<span class="6065808185552597400" onmouseenter="enter('6065808185552597400');" onmouseout="out('6065808185552597400');" style=""> 658     public void onSetConstantVibration(int intensity) {                                                  </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 659         try {                                                                                            </span>
<span class="-1189139726584538540" onmouseenter="enter('-1189139726584538540');" onmouseout="out('-1189139726584538540');" style=""> 660             TransactionBuilder builder = performInitialized(&quot;vibration&quot;);                                </span>
<span  style=""> 661                                                                                                          </span>
<span class="3266802087250163024" onmouseenter="enter('3266802087250163024');" onmouseout="out('3266802087250163024');" style=""> 662             byte[] msg = new byte[15];                                                                   </span>
<span class="6154219539807733297" onmouseenter="enter('6154219539807733297');" onmouseout="out('6154219539807733297');" style=""> 663             msg[0] = HPlusConstants.CMD_SET_INCOMING_CALL_NUMBER;                                        </span>
<span  style=""> 664                                                                                                          </span>
<span class="-3757743872034498506" onmouseenter="enter('-3757743872034498506');" onmouseout="out('-3757743872034498506');" style=""> 665             for (int i = 0; i &lt; msg.length - 1; i++)                                                     </span>
<span class="-6825376348023798015" onmouseenter="enter('-6825376348023798015');" onmouseout="out('-6825376348023798015');" style=""> 666                 msg[i + 1] = (byte) &quot;GadgetBridge&quot;.charAt(i);                                            </span>
<span  style=""> 667                                                                                                          </span>
<span class="-6541237243628611070" onmouseenter="enter('-6541237243628611070');" onmouseout="out('-6541237243628611070');" style=""> 668             builder.write(ctrlCharacteristic, msg);                                                      </span>
<span class="3761800854751581723" onmouseenter="enter('3761800854751581723');" onmouseout="out('3761800854751581723');" style=""> 669             performConnected(builder.getTransaction());                                                  </span>
<span class="7080241092423381085" onmouseenter="enter('7080241092423381085');" onmouseout="out('7080241092423381085');" style=""> 670         } catch (IOException e) {                                                                        </span>
<span class="-8668891040554562167" onmouseenter="enter('-8668891040554562167');" onmouseout="out('-8668891040554562167');" style=""><abbr title=" 671             GB.toast(getContext(), &quot;Error setting Vibration: &quot; + e.getLocalizedMessage(), Toast.LENGTH_LONG, GB.ERROR);"> 671             GB.toast(getContext(), &quot;Error setting Vibration: &quot; + e.getLocalizedMessage(), Toast.LENGTH_LOðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 672         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 673     }                                                                                                    </span>
<span  style=""> 674                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 675     @Override                                                                                            </span>
<span class="-3293819866797459784" onmouseenter="enter('-3293819866797459784');" onmouseout="out('-3293819866797459784');" style=""> 676     public void onScreenshotReq() {                                                                      </span>
<span  style=""> 677                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 678     }                                                                                                    </span>
<span  style=""> 679                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 680     @Override                                                                                            </span>
<span class="-2597044235576493624" onmouseenter="enter('-2597044235576493624');" onmouseout="out('-2597044235576493624');" style=""> 681     public void onEnableHeartRateSleepSupport(boolean enable) {                                          </span>
<span class="7623304499723183910" onmouseenter="enter('7623304499723183910');" onmouseout="out('7623304499723183910');" style=""> 682         onEnableRealtimeHeartRateMeasurement(enable);                                                    </span>
<span  style=""> 683                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 684     }                                                                                                    </span>
<span  style=""> 685                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 686     @Override                                                                                            </span>
<span class="-7200644583722212481" onmouseenter="enter('-7200644583722212481');" onmouseout="out('-7200644583722212481');" style=""> 687     public void onAddCalendarEvent(CalendarEventSpec calendarEventSpec) {                                </span>
<span  style=""> 688                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 689     }                                                                                                    </span>
<span  style=""> 690                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 691     @Override                                                                                            </span>
<span class="2890386202777848228" onmouseenter="enter('2890386202777848228');" onmouseout="out('2890386202777848228');" style=""> 692     public void onDeleteCalendarEvent(byte type, long id) {                                              </span>
<span  style=""> 693                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 694     }                                                                                                    </span>
<span  style=""> 695                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 696     @Override                                                                                            </span>
<span class="349159621018699769" onmouseenter="enter('349159621018699769');" onmouseout="out('349159621018699769');" style=""> 697     public void onSendConfiguration(String config) {                                                     </span>
<span class="-7846666641684196127" onmouseenter="enter('-7846666641684196127');" onmouseout="out('-7846666641684196127');" style=""> 698         LOG.info(&quot;Send Configuration: &quot; + config);                                                       </span>
<span  style=""> 699                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 700     }                                                                                                    </span>
<span  style=""> 701                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 702     @Override                                                                                            </span>
<span class="-1180224994468071186" onmouseenter="enter('-1180224994468071186');" onmouseout="out('-1180224994468071186');" style=""> 703     public void onTestNewFunction() {                                                                    </span>
<span class="5914733006117960203" onmouseenter="enter('5914733006117960203');" onmouseout="out('5914733006117960203');" style=""> 704         LOG.info(&quot;Test New Function&quot;);                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 705     }                                                                                                    </span>
<span  style=""> 706                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 707     @Override                                                                                            </span>
<span class="-6167041048283935417" onmouseenter="enter('-6167041048283935417');" onmouseout="out('-6167041048283935417');" style=""> 708     public void onSendWeather(WeatherSpec weatherSpec) {                                                 </span>
<span  style=""> 709                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 710     }                                                                                                    </span>
<span  style=""> 711                                                                                                          </span>
<span class="5880921854020880068" onmouseenter="enter('5880921854020880068');" onmouseout="out('5880921854020880068');" style=""> 712     public void setUnicodeSupport(boolean support){                                                      </span>
<span class="6042074506485087881" onmouseenter="enter('6042074506485087881');" onmouseout="out('6042074506485087881');" style=""> 713         HPlusCoordinator.setUnicodeSupport(gbDevice.getAddress(), support);                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 714     }                                                                                                    </span>
<span  style=""> 715                                                                                                          </span>
<span  style=""> 716                                                                                                          </span>
<span class="-4706054677770626804" onmouseenter="enter('-4706054677770626804');" onmouseout="out('-4706054677770626804');" style=""> 717     private void showIncomingCall(String name, String rawNumber) {                                       </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 718         try {                                                                                            </span>
<span  style=""> 719                                                                                                          </span>
<span class="-8981057032029232134" onmouseenter="enter('-8981057032029232134');" onmouseout="out('-8981057032029232134');" style=""> 720             TransactionBuilder builder = performInitialized(&quot;incomingCall&quot;);                             </span>
<span  style=""> 721                                                                                                          </span>
<span class="-470559072641579707" onmouseenter="enter('-470559072641579707');" onmouseout="out('-470559072641579707');" style=""> 722             //Enable call notifications                                                                  </span>
<span class="-2018055458770536330" onmouseenter="enter('-2018055458770536330');" onmouseout="out('-2018055458770536330');" style=""> 723             builder.write(ctrlCharacteristic, new byte[]{HPlusConstants.CMD_ACTION_INCOMING_CALL, 1});   </span>
<span  style=""> 724                                                                                                          </span>
<span class="2257971100060063202" onmouseenter="enter('2257971100060063202');" onmouseout="out('2257971100060063202');" style=""> 725             //Show Call Icon                                                                             </span>
<span class="431202743276395661" onmouseenter="enter('431202743276395661');" onmouseout="out('431202743276395661');" style=""><abbr title=" 726             builder.write(ctrlCharacteristic, new byte[]{HPlusConstants.CMD_SET_INCOMING_CALL, HPlusConstants.ARG_INCOMING_CALL});"> 726             builder.write(ctrlCharacteristic, new byte[]{HPlusConstants.CMD_SET_INCOMING_CALL, HPlusConstðŸ”µ</abbr></span>
<span  style=""> 727                                                                                                          </span>
<span class="2424056063165640280" onmouseenter="enter('2424056063165640280');" onmouseout="out('2424056063165640280');" style=""> 728             if(name != null) {                                                                           </span>
<span class="-1463217213013643309" onmouseenter="enter('-1463217213013643309');" onmouseout="out('-1463217213013643309');" style=""> 729                 byte[] msg = new byte[13];                                                               </span>
<span  style=""> 730                                                                                                          </span>
<span class="4148550063034252717" onmouseenter="enter('4148550063034252717');" onmouseout="out('4148550063034252717');" style=""> 731                 //Show call name                                                                         </span>
<span class="-7993208990588136145" onmouseenter="enter('-7993208990588136145');" onmouseout="out('-7993208990588136145');" style=""> 732                 for (int i = 0; i &lt; msg.length; i++)                                                     </span>
<span class="-452829507499965658" onmouseenter="enter('-452829507499965658');" onmouseout="out('-452829507499965658');" style=""> 733                     msg[i] = &#x27; &#x27;;                                                                        </span>
<span  style=""> 734                                                                                                          </span>
<span class="3205766085188191830" onmouseenter="enter('3205766085188191830');" onmouseout="out('3205766085188191830');" style=""> 735                 byte[] nameBytes = encodeStringToDevice(name);                                           </span>
<span class="-783531191089635895" onmouseenter="enter('-783531191089635895');" onmouseout="out('-783531191089635895');" style=""> 736                 for (int i = 0; i &lt; nameBytes.length &amp;&amp; i &lt; (msg.length - 1); i++)                       </span>
<span class="6765965112598420400" onmouseenter="enter('6765965112598420400');" onmouseout="out('6765965112598420400');" style=""> 737                     msg[i + 1] = nameBytes[i];                                                           </span>
<span  style=""> 738                                                                                                          </span>
<span class="-8475803122541257030" onmouseenter="enter('-8475803122541257030');" onmouseout="out('-8475803122541257030');" style=""> 739                 msg[0] = HPlusConstants.CMD_ACTION_DISPLAY_TEXT_NAME;                                    </span>
<span class="-6541237243628611070" onmouseenter="enter('-6541237243628611070');" onmouseout="out('-6541237243628611070');" style=""> 740                 builder.write(ctrlCharacteristic, msg);                                                  </span>
<span  style=""> 741                                                                                                          </span>
<span class="-2032388462516825457" onmouseenter="enter('-2032388462516825457');" onmouseout="out('-2032388462516825457');" style=""> 742                 msg[0] = HPlusConstants.CMD_ACTION_DISPLAY_TEXT_NAME_CN;                                 </span>
<span class="-6541237243628611070" onmouseenter="enter('-6541237243628611070');" onmouseout="out('-6541237243628611070');" style=""> 743                 builder.write(ctrlCharacteristic, msg);                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 744             }                                                                                            </span>
<span  style=""> 745                                                                                                          </span>
<span class="-6077600590360942190" onmouseenter="enter('-6077600590360942190');" onmouseout="out('-6077600590360942190');" style=""> 746             if(rawNumber != null) {                                                                      </span>
<span class="3592618537022379156" onmouseenter="enter('3592618537022379156');" onmouseout="out('3592618537022379156');" style=""> 747                 StringBuilder number = new StringBuilder();                                              </span>
<span  style=""> 748                                                                                                          </span>
<span class="8350107368880842067" onmouseenter="enter('8350107368880842067');" onmouseout="out('8350107368880842067');" style=""> 749                 //Clean up number as the device only accepts digits                                      </span>
<span class="9010108090093925813" onmouseenter="enter('9010108090093925813');" onmouseout="out('9010108090093925813');" style=""> 750                 for (char c : rawNumber.toCharArray()) {                                                 </span>
<span class="-3606938168735497741" onmouseenter="enter('-3606938168735497741');" onmouseout="out('-3606938168735497741');" style=""> 751                     if (Character.isDigit(c)) {                                                          </span>
<span class="-1236668618857566487" onmouseenter="enter('-1236668618857566487');" onmouseout="out('-1236668618857566487');" style=""> 752                         number.append(c);                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 753                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 754                 }                                                                                        </span>
<span  style=""> 755                                                                                                          </span>
<span class="-1463217213013643309" onmouseenter="enter('-1463217213013643309');" onmouseout="out('-1463217213013643309');" style=""> 756                 byte[] msg = new byte[13];                                                               </span>
<span  style=""> 757                                                                                                          </span>
<span class="7410242265141315458" onmouseenter="enter('7410242265141315458');" onmouseout="out('7410242265141315458');" style=""> 758                 //Show call number                                                                       </span>
<span class="-7993208990588136145" onmouseenter="enter('-7993208990588136145');" onmouseout="out('-7993208990588136145');" style=""> 759                 for (int i = 0; i &lt; msg.length; i++)                                                     </span>
<span class="-452829507499965658" onmouseenter="enter('-452829507499965658');" onmouseout="out('-452829507499965658');" style=""> 760                     msg[i] = &#x27; &#x27;;                                                                        </span>
<span  style=""> 761                                                                                                          </span>
<span class="-3492043630386970598" onmouseenter="enter('-3492043630386970598');" onmouseout="out('-3492043630386970598');" style=""> 762                 for (int i = 0; i &lt; number.length() &amp;&amp; i &lt; (msg.length - 1); i++)                        </span>
<span class="1716636883153338951" onmouseenter="enter('1716636883153338951');" onmouseout="out('1716636883153338951');" style=""> 763                     msg[i + 1] = (byte) number.charAt(i);                                                </span>
<span  style=""> 764                                                                                                          </span>
<span class="6154219539807733297" onmouseenter="enter('6154219539807733297');" onmouseout="out('6154219539807733297');" style=""> 765                 msg[0] = HPlusConstants.CMD_SET_INCOMING_CALL_NUMBER;                                    </span>
<span  style=""> 766                                                                                                          </span>
<span class="2195247688369690659" onmouseenter="enter('2195247688369690659');" onmouseout="out('2195247688369690659');" style=""> 767                 builder.wait(200);                                                                       </span>
<span class="-6541237243628611070" onmouseenter="enter('-6541237243628611070');" onmouseout="out('-6541237243628611070');" style=""> 768                 builder.write(ctrlCharacteristic, msg);                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 769             }                                                                                            </span>
<span  style=""> 770                                                                                                          </span>
<span class="3761800854751581723" onmouseenter="enter('3761800854751581723');" onmouseout="out('3761800854751581723');" style=""> 771             performConnected(builder.getTransaction());                                                  </span>
<span class="7080241092423381085" onmouseenter="enter('7080241092423381085');" onmouseout="out('7080241092423381085');" style=""> 772         } catch (IOException e) {                                                                        </span>
<span class="5607211826758247973" onmouseenter="enter('5607211826758247973');" onmouseout="out('5607211826758247973');" style=""><abbr title=" 773             GB.toast(getContext(), &quot;Error showing incoming call: &quot; + e.getLocalizedMessage(), Toast.LENGTH_LONG, GB.ERROR);"> 773             GB.toast(getContext(), &quot;Error showing incoming call: &quot; + e.getLocalizedMessage(), Toast.LENGTðŸ”µ</abbr></span>
<span  style=""> 774                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 775         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 776     }                                                                                                    </span>
<span  style=""> 777                                                                                                          </span>
<span class="2669430369160917091" onmouseenter="enter('2669430369160917091');" onmouseout="out('2669430369160917091');" style=""> 778     private void showText(String title, String body) {                                                   </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 779         try {                                                                                            </span>
<span class="8575811470010308677" onmouseenter="enter('8575811470010308677');" onmouseout="out('8575811470010308677');" style=""> 780             TransactionBuilder builder = performInitialized(&quot;notification&quot;);                             </span>
<span  style=""> 781                                                                                                          </span>
<span class="-5183659842430019699" onmouseenter="enter('-5183659842430019699');" onmouseout="out('-5183659842430019699');" style=""> 782             String message = &quot;&quot;;                                                                         </span>
<span  style=""> 783                                                                                                          </span>
<span class="4468139034893619423" onmouseenter="enter('4468139034893619423');" onmouseout="out('4468139034893619423');" style=""> 784             if (title != null &amp;&amp; title.length() &gt; 0) {                                                   </span>
<span class="7795018544496104410" onmouseenter="enter('7795018544496104410');" onmouseout="out('7795018544496104410');" style=""> 785                 message = StringUtils.pad(StringUtils.truncate(title, 16), 16); //Limit title to top row </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 786             }                                                                                            </span>
<span  style=""> 787                                                                                                          </span>
<span class="4413763009831532288" onmouseenter="enter('4413763009831532288');" onmouseout="out('4413763009831532288');" style=""> 788             if (body != null) {                                                                          </span>
<span class="-4827052322101785234" onmouseenter="enter('-4827052322101785234');" onmouseout="out('-4827052322101785234');" style=""> 789                 message += body;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 790             }                                                                                            </span>
<span  style=""> 791                                                                                                          </span>
<span class="-7267330840062528164" onmouseenter="enter('-7267330840062528164');" onmouseout="out('-7267330840062528164');" style=""> 792             byte[] messageBytes = encodeStringToDevice(message);                                         </span>
<span  style=""> 793                                                                                                          </span>
<span class="-6947936872233705603" onmouseenter="enter('-6947936872233705603');" onmouseout="out('-6947936872233705603');" style=""> 794             int length = messageBytes.length / 17;                                                       </span>
<span  style=""> 795                                                                                                          </span>
<span class="7436007129343658037" onmouseenter="enter('7436007129343658037');" onmouseout="out('7436007129343658037');" style=""> 796             length = length &gt; 5 ? 5 : length;                                                            </span>
<span  style=""> 797                                                                                                          </span>
<span class="-2276016464983488813" onmouseenter="enter('-2276016464983488813');" onmouseout="out('-2276016464983488813');" style=""><abbr title=" 798             builder.write(ctrlCharacteristic, new byte[]{HPlusConstants.CMD_SET_INCOMING_MESSAGE, HPlusConstants.ARG_INCOMING_MESSAGE});"> 798             builder.write(ctrlCharacteristic, new byte[]{HPlusConstants.CMD_SET_INCOMING_MESSAGE, HPlusCoðŸ”µ</abbr></span>
<span  style=""> 799                                                                                                          </span>
<span class="8693578117273483378" onmouseenter="enter('8693578117273483378');" onmouseout="out('8693578117273483378');" style=""> 800             int remaining = Math.min(255, (messageBytes.length % 17 &gt; 0) ? length + 1 : length);         </span>
<span  style=""> 801                                                                                                          </span>
<span class="-6938126668542148541" onmouseenter="enter('-6938126668542148541');" onmouseout="out('-6938126668542148541');" style=""> 802             byte[] msg = new byte[20];                                                                   </span>
<span class="6283182582673736786" onmouseenter="enter('6283182582673736786');" onmouseout="out('6283182582673736786');" style=""> 803             msg[0] = HPlusConstants.CMD_ACTION_DISPLAY_TEXT;                                             </span>
<span class="2374339912776851777" onmouseenter="enter('2374339912776851777');" onmouseout="out('2374339912776851777');" style=""> 804             msg[1] = (byte) remaining;                                                                   </span>
<span  style=""> 805                                                                                                          </span>
<span class="7174897306012108535" onmouseenter="enter('7174897306012108535');" onmouseout="out('7174897306012108535');" style=""> 806             for (int i = 2; i &lt; msg.length; i++)                                                         </span>
<span class="-452829507499965658" onmouseenter="enter('-452829507499965658');" onmouseout="out('-452829507499965658');" style=""> 807                 msg[i] = &#x27; &#x27;;                                                                            </span>
<span  style=""> 808                                                                                                          </span>
<span class="3830575522721686257" onmouseenter="enter('3830575522721686257');" onmouseout="out('3830575522721686257');" style=""> 809             int message_index = 0;                                                                       </span>
<span class="-2034332425768882561" onmouseenter="enter('-2034332425768882561');" onmouseout="out('-2034332425768882561');" style=""> 810             int i = 3;                                                                                   </span>
<span  style=""> 811                                                                                                          </span>
<span class="-1190413858175663168" onmouseenter="enter('-1190413858175663168');" onmouseout="out('-1190413858175663168');" style=""> 812             for (int j = 0; j &lt; messageBytes.length; j++) {                                              </span>
<span class="7313274589245642051" onmouseenter="enter('7313274589245642051');" onmouseout="out('7313274589245642051');" style=""> 813                 msg[i++] = messageBytes[j];                                                              </span>
<span  style=""> 814                                                                                                          </span>
<span class="2532902930176219444" onmouseenter="enter('2532902930176219444');" onmouseout="out('2532902930176219444');" style=""> 815                 if (i == msg.length) {                                                                   </span>
<span class="3910183690266069869" onmouseenter="enter('3910183690266069869');" onmouseout="out('3910183690266069869');" style=""> 816                     message_index++;                                                                     </span>
<span class="245661942964386200" onmouseenter="enter('245661942964386200');" onmouseout="out('245661942964386200');" style=""> 817                     msg[2] = (byte) message_index;                                                       </span>
<span class="-6541237243628611070" onmouseenter="enter('-6541237243628611070');" onmouseout="out('-6541237243628611070');" style=""> 818                     builder.write(ctrlCharacteristic, msg);                                              </span>
<span  style=""> 819                                                                                                          </span>
<span class="-2713623245355191357" onmouseenter="enter('-2713623245355191357');" onmouseout="out('-2713623245355191357');" style=""> 820                     msg = msg.clone();                                                                   </span>
<span class="-167106871940501653" onmouseenter="enter('-167106871940501653');" onmouseout="out('-167106871940501653');" style=""> 821                     for (i = 3; i &lt; msg.length; i++)                                                     </span>
<span class="-452829507499965658" onmouseenter="enter('-452829507499965658');" onmouseout="out('-452829507499965658');" style=""> 822                         msg[i] = &#x27; &#x27;;                                                                    </span>
<span  style=""> 823                                                                                                          </span>
<span class="6801923363408854922" onmouseenter="enter('6801923363408854922');" onmouseout="out('6801923363408854922');" style=""> 824                     if (message_index &lt; remaining)                                                       </span>
<span class="-1159031305874409210" onmouseenter="enter('-1159031305874409210');" onmouseout="out('-1159031305874409210');" style=""> 825                         i = 3;                                                                           </span>
<span class="-7436048164614400339" onmouseenter="enter('-7436048164614400339');" onmouseout="out('-7436048164614400339');" style=""> 826                     else                                                                                 </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 827                         break;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 828                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 829             }                                                                                            </span>
<span  style=""> 830                                                                                                          </span>
<span class="-4555485809374867291" onmouseenter="enter('-4555485809374867291');" onmouseout="out('-4555485809374867291');" style=""> 831             msg[2] = (byte) remaining;                                                                   </span>
<span  style=""> 832                                                                                                          </span>
<span class="-6541237243628611070" onmouseenter="enter('-6541237243628611070');" onmouseout="out('-6541237243628611070');" style=""> 833             builder.write(ctrlCharacteristic, msg);                                                      </span>
<span class="3761800854751581723" onmouseenter="enter('3761800854751581723');" onmouseout="out('3761800854751581723');" style=""> 834             performConnected(builder.getTransaction());                                                  </span>
<span class="7080241092423381085" onmouseenter="enter('7080241092423381085');" onmouseout="out('7080241092423381085');" style=""> 835         } catch (IOException e) {                                                                        </span>
<span class="-3005578110211581534" onmouseenter="enter('-3005578110211581534');" onmouseout="out('-3005578110211581534');" style=""><abbr title=" 836             GB.toast(getContext(), &quot;Error showing device Notification: &quot; + e.getLocalizedMessage(), Toast.LENGTH_LONG, GB.ERROR);"> 836             GB.toast(getContext(), &quot;Error showing device Notification: &quot; + e.getLocalizedMessage(), ToastðŸ”µ</abbr></span>
<span  style=""> 837                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 838         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 839     }                                                                                                    </span>
<span  style=""> 840                                                                                                          </span>
<span class="2374016947018039193" onmouseenter="enter('2374016947018039193');" onmouseout="out('2374016947018039193');" style=""> 841     private void close() {                                                                               </span>
<span class="-7083324746063369835" onmouseenter="enter('-7083324746063369835');" onmouseout="out('-7083324746063369835');" style=""> 842         if (syncHelper != null) {                                                                        </span>
<span class="-7896063751358438536" onmouseenter="enter('-7896063751358438536');" onmouseout="out('-7896063751358438536');" style=""> 843             syncHelper.quit();                                                                           </span>
<span class="-2471739938777085601" onmouseenter="enter('-2471739938777085601');" onmouseout="out('-2471739938777085601');" style=""> 844             syncHelper.interrupt();                                                                      </span>
<span class="-9199515530023964212" onmouseenter="enter('-9199515530023964212');" onmouseout="out('-9199515530023964212');" style=""> 845             syncHelper = null;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 846         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 847     }                                                                                                    </span>
<span  style=""> 848                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 849     /**                                                                                                  </span>
<span class="-2663499463451487171" onmouseenter="enter('-2663499463451487171');" onmouseout="out('-2663499463451487171');" style=""> 850      * HPlus devices accept a subset of GB2312 with some modifications.                                  </span>
<span class="-5296208177179093503" onmouseenter="enter('-5296208177179093503');" onmouseout="out('-5296208177179093503');" style=""> 851      * This function will apply a custom transliteration.                                                </span>
<span class="-3958616819795834315" onmouseenter="enter('-3958616819795834315');" onmouseout="out('-3958616819795834315');" style=""> 852      * While related to the methods implemented in LanguageUtils. These are specific for HPLUS           </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 853      *                                                                                                   </span>
<span class="-1743400565649069450" onmouseenter="enter('-1743400565649069450');" onmouseout="out('-1743400565649069450');" style=""> 854      * @param s The String to transliterate                                                              </span>
<span class="2025757942853076636" onmouseenter="enter('2025757942853076636');" onmouseout="out('2025757942853076636');" style=""> 855      * @return An array of bytes ready to be sent to the device                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 856      */                                                                                                  </span>
<span class="-8823649745364399870" onmouseenter="enter('-8823649745364399870');" onmouseout="out('-8823649745364399870');" style=""> 857     private byte[] encodeStringToDevice(String s) {                                                      </span>
<span  style=""> 858                                                                                                          </span>
<span class="9112578812581115095" onmouseenter="enter('9112578812581115095');" onmouseout="out('9112578812581115095');" style=""> 859         List&lt;Byte&gt; outBytes = new ArrayList&lt;Byte&gt;();                                                     </span>
<span  style=""> 860                                                                                                          </span>
<span class="-2173296205160994735" onmouseenter="enter('-2173296205160994735');" onmouseout="out('-2173296205160994735');" style=""> 861         for (int i = 0; i &lt; s.length(); i++) {                                                           </span>
<span class="-425988238491649263" onmouseenter="enter('-425988238491649263');" onmouseout="out('-425988238491649263');" style=""> 862             Character c = s.charAt(i);                                                                   </span>
<span class="-6710548613110177700" onmouseenter="enter('-6710548613110177700');" onmouseout="out('-6710548613110177700');" style=""> 863             byte[] cs;                                                                                   </span>
<span  style=""> 864                                                                                                          </span>
<span class="-7646558473377848105" onmouseenter="enter('-7646558473377848105');" onmouseout="out('-7646558473377848105');" style=""> 865             if (HPlusConstants.transliterateMap.containsKey(c)) {                                        </span>
<span class="-6827180778581783411" onmouseenter="enter('-6827180778581783411');" onmouseout="out('-6827180778581783411');" style=""> 866                 cs = HPlusConstants.transliterateMap.get(c);                                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 867             } else {                                                                                     </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 868                 try {                                                                                    </span>
<span class="-3264772470522099445" onmouseenter="enter('-3264772470522099445');" onmouseout="out('-3264772470522099445');" style=""> 869                     if(HPlusCoordinator.getUnicodeSupport(this.gbDevice.getAddress()))                   </span>
<span class="4466778639974351027" onmouseenter="enter('4466778639974351027');" onmouseout="out('4466778639974351027');" style=""> 870                         cs = c.toString().getBytes(&quot;Unicode&quot;);                                           </span>
<span class="-7436048164614400339" onmouseenter="enter('-7436048164614400339');" onmouseout="out('-7436048164614400339');" style=""> 871                     else                                                                                 </span>
<span class="637174697753777176" onmouseenter="enter('637174697753777176');" onmouseout="out('637174697753777176');" style=""> 872                         cs = c.toString().getBytes(&quot;GB2312&quot;);                                            </span>
<span class="2368993151256970390" onmouseenter="enter('2368993151256970390');" onmouseout="out('2368993151256970390');" style=""> 873                 } catch (UnsupportedEncodingException e) {                                               </span>
<span class="-3354683485831733476" onmouseenter="enter('-3354683485831733476');" onmouseout="out('-3354683485831733476');" style=""> 874                     //Fallback. Result string may be strange, but better than nothing                    </span>
<span class="8503633407937514815" onmouseenter="enter('8503633407937514815');" onmouseout="out('8503633407937514815');" style=""> 875                     cs = c.toString().getBytes();                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 876                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 877             }                                                                                            </span>
<span class="-6641336920880003910" onmouseenter="enter('-6641336920880003910');" onmouseout="out('-6641336920880003910');" style=""> 878             for (int j = 0; j &lt; cs.length; j++)                                                          </span>
<span class="-3202096665861785787" onmouseenter="enter('-3202096665861785787');" onmouseout="out('-3202096665861785787');" style=""> 879                 outBytes.add(cs[j]);                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 880         }                                                                                                </span>
<span  style=""> 881                                                                                                          </span>
<span class="-3374475540404730530" onmouseenter="enter('-3374475540404730530');" onmouseout="out('-3374475540404730530');" style=""> 882         return ArrayUtils.toPrimitive(outBytes.toArray(new Byte[outBytes.size()]));                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 883     }                                                                                                    </span>
<span  style=""> 884                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 885     @Override                                                                                            </span>
<span class="5766835775206074860" onmouseenter="enter('5766835775206074860');" onmouseout="out('5766835775206074860');" style=""> 886     public boolean onCharacteristicChanged(BluetoothGatt gatt,                                           </span>
<span class="-4605279869462858246" onmouseenter="enter('-4605279869462858246');" onmouseout="out('-4605279869462858246');" style=""> 887                                            BluetoothGattCharacteristic characteristic) {                 </span>
<span class="3568353468682512593" onmouseenter="enter('3568353468682512593');" onmouseout="out('3568353468682512593');" style=""> 888         if (super.onCharacteristicChanged(gatt, characteristic)) {                                       </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 889             return true;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 890         }                                                                                                </span>
<span  style=""> 891                                                                                                          </span>
<span class="-554497628129246365" onmouseenter="enter('-554497628129246365');" onmouseout="out('-554497628129246365');" style=""> 892         UUID characteristicUUID = characteristic.getUuid();                                              </span>
<span class="-6511473927788972997" onmouseenter="enter('-6511473927788972997');" onmouseout="out('-6511473927788972997');" style=""> 893         byte[] data = characteristic.getValue();                                                         </span>
<span class="-9068394225512782226" onmouseenter="enter('-9068394225512782226');" onmouseout="out('-9068394225512782226');" style=""> 894         if (data.length == 0)                                                                            </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 895             return true;                                                                                 </span>
<span  style=""> 896                                                                                                          </span>
<span class="-6174724810667438225" onmouseenter="enter('-6174724810667438225');" onmouseout="out('-6174724810667438225');" style=""> 897         switch (data[0]) {                                                                               </span>
<span class="-7471367524105316507" onmouseenter="enter('-7471367524105316507');" onmouseout="out('-7471367524105316507');" style=""> 898             case HPlusConstants.DATA_VERSION:                                                            </span>
<span class="5912373299298352154" onmouseenter="enter('5912373299298352154');" onmouseout="out('5912373299298352154');" style=""> 899             case HPlusConstants.DATA_VERSION1:                                                           </span>
<span class="834208567599674439" onmouseenter="enter('834208567599674439');" onmouseout="out('834208567599674439');" style=""> 900                 return syncHelper.processVersion(data);                                                  </span>
<span  style=""> 901                                                                                                          </span>
<span class="1169399726781128730" onmouseenter="enter('1169399726781128730');" onmouseout="out('1169399726781128730');" style=""> 902             case HPlusConstants.DATA_STATS:                                                              </span>
<span class="6350511806657397549" onmouseenter="enter('6350511806657397549');" onmouseout="out('6350511806657397549');" style=""> 903                 boolean result = syncHelper.processRealtimeStats(data, HPlusCoordinator.getUserAge());   </span>
<span class="-275963108691733288" onmouseenter="enter('-275963108691733288');" onmouseout="out('-275963108691733288');" style=""> 904                 if (result) {                                                                            </span>
<span class="8166670735037070350" onmouseenter="enter('8166670735037070350');" onmouseout="out('8166670735037070350');" style=""> 905                     processExtraInfo (data);                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 906                 }                                                                                        </span>
<span class="-6419540350677864751" onmouseenter="enter('-6419540350677864751');" onmouseout="out('-6419540350677864751');" style=""> 907                 return result;                                                                           </span>
<span  style=""> 908                                                                                                          </span>
<span class="-4210542885090051053" onmouseenter="enter('-4210542885090051053');" onmouseout="out('-4210542885090051053');" style=""> 909             case HPlusConstants.DATA_SLEEP:                                                              </span>
<span class="518826808593425602" onmouseenter="enter('518826808593425602');" onmouseout="out('518826808593425602');" style=""> 910                 return syncHelper.processIncomingSleepData(data);                                        </span>
<span  style=""> 911                                                                                                          </span>
<span class="-1422636218963608963" onmouseenter="enter('-1422636218963608963');" onmouseout="out('-1422636218963608963');" style=""> 912             case HPlusConstants.DATA_STEPS:                                                              </span>
<span class="8674745804491038360" onmouseenter="enter('8674745804491038360');" onmouseout="out('8674745804491038360');" style=""> 913                 return syncHelper.processDaySummary(data);                                               </span>
<span  style=""> 914                                                                                                          </span>
<span class="-5989439275286926467" onmouseenter="enter('-5989439275286926467');" onmouseout="out('-5989439275286926467');" style=""> 915             case HPlusConstants.DATA_DAY_SUMMARY:                                                        </span>
<span class="7331785174258232326" onmouseenter="enter('7331785174258232326');" onmouseout="out('7331785174258232326');" style=""> 916             case HPlusConstants.DATA_DAY_SUMMARY_ALT:                                                    </span>
<span class="3311111969863762619" onmouseenter="enter('3311111969863762619');" onmouseout="out('3311111969863762619');" style=""> 917                 return syncHelper.processIncomingDaySlotData(data, HPlusCoordinator.getUserAge());       </span>
<span class="2453515299835836072" onmouseenter="enter('2453515299835836072');" onmouseout="out('2453515299835836072');" style=""> 918             case HPlusConstants.DATA_UNKNOWN:                                                            </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 919                 return true;                                                                             </span>
<span class="-8178136317704390296" onmouseenter="enter('-8178136317704390296');" onmouseout="out('-8178136317704390296');" style=""> 920             default:                                                                                     </span>
<span  style=""> 921                                                                                                          </span>
<span class="2463317396092645965" onmouseenter="enter('2463317396092645965');" onmouseout="out('2463317396092645965');" style=""><abbr title=" 922                 LOG.info(&quot;Unhandled characteristic change: &quot; + characteristicUUID + &quot; code: &quot; + Arrays.toString(data));"> 922                 LOG.info(&quot;Unhandled characteristic change: &quot; + characteristicUUID + &quot; code: &quot; + Arrays.toðŸ”µ</abbr></span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 923                 return true;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 924         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 925     }                                                                                                    </span>
<span  style=""> 926                                                                                                          </span>
<span class="7849365739445821006" onmouseenter="enter('7849365739445821006');" onmouseout="out('7849365739445821006');" style=""> 927     private void  processExtraInfo (byte[] data) {                                                       </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 928         try {                                                                                            </span>
<span class="3335414119067454274" onmouseenter="enter('3335414119067454274');" onmouseout="out('3335414119067454274');" style=""><abbr title=" 929             HPlusDataRecordRealtime record = new HPlusDataRecordRealtime(data, HPlusCoordinator.getUserAge());"> 929             HPlusDataRecordRealtime record = new HPlusDataRecordRealtime(data, HPlusCoordinator.getUserAgðŸ”µ</abbr></span>
<span  style=""> 930                                                                                                          </span>
<span class="-6654310698308599937" onmouseenter="enter('-6654310698308599937');" onmouseout="out('-6654310698308599937');" style=""> 931             handleBatteryInfo(record.battery);                                                           </span>
<span  style=""> 932                                                                                                          </span>
<span class="957024650015159745" onmouseenter="enter('957024650015159745');" onmouseout="out('957024650015159745');" style=""> 933             String DEVINFO_STEP = getContext().getString(R.string.chart_steps) + &quot;: &quot;;                   </span>
<span class="6721786647083530834" onmouseenter="enter('6721786647083530834');" onmouseout="out('6721786647083530834');" style=""> 934             String DEVINFO_DISTANCE = getContext().getString(R.string.distance) + &quot;: &quot;;                  </span>
<span class="-5544509155513691581" onmouseenter="enter('-5544509155513691581');" onmouseout="out('-5544509155513691581');" style=""> 935             String DEVINFO_CALORY = getContext().getString(R.string.calories) + &quot;: &quot;;                    </span>
<span class="-1747100185926561303" onmouseenter="enter('-1747100185926561303');" onmouseout="out('-1747100185926561303');" style=""> 936             String DEVINFO_HEART = getContext().getString(R.string.charts_legend_heartrate);             </span>
<span  style=""> 937                                                                                                          </span>
<span class="4539674976293838945" onmouseenter="enter('4539674976293838945');" onmouseout="out('4539674976293838945');" style=""> 938             String info = &quot;&quot;;                                                                            </span>
<span class="603487404869738075" onmouseenter="enter('603487404869738075');" onmouseout="out('603487404869738075');" style=""> 939             if (record.steps &gt; 0) {                                                                      </span>
<span class="-2978506504361701541" onmouseenter="enter('-2978506504361701541');" onmouseout="out('-2978506504361701541');" style=""> 940                 info += DEVINFO_STEP + String.valueOf(record.steps) + &quot;   &quot;;                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 941             }                                                                                            </span>
<span class="-7382416609460855139" onmouseenter="enter('-7382416609460855139');" onmouseout="out('-7382416609460855139');" style=""> 942             if (record.distance &gt; 0) {                                                                   </span>
<span class="-2048257966317820482" onmouseenter="enter('-2048257966317820482');" onmouseout="out('-2048257966317820482');" style=""> 943                 info += DEVINFO_DISTANCE + String.valueOf(record.distance) + &quot;   &quot;;                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 944             }                                                                                            </span>
<span class="4712868732205106298" onmouseenter="enter('4712868732205106298');" onmouseout="out('4712868732205106298');" style=""> 945             if (record.calories &gt; 0) {                                                                   </span>
<span class="2384981866748506593" onmouseenter="enter('2384981866748506593');" onmouseout="out('2384981866748506593');" style=""> 946                 info += DEVINFO_CALORY + String.valueOf(record.calories) + &quot;   &quot;;                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 947             }                                                                                            </span>
<span class="6107108997806163588" onmouseenter="enter('6107108997806163588');" onmouseout="out('6107108997806163588');" style=""> 948             if (record.heartRate &gt; 0) {                                                                  </span>
<span class="-1812003693369079048" onmouseenter="enter('-1812003693369079048');" onmouseout="out('-1812003693369079048');" style=""> 949                 info += DEVINFO_HEART + String.valueOf(record.heartRate) + &quot;   &quot;;                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 950             }                                                                                            </span>
<span  style=""> 951                                                                                                          </span>
<span class="8504830605092703085" onmouseenter="enter('8504830605092703085');" onmouseout="out('8504830605092703085');" style=""> 952             if (!info.equals(&quot;&quot;)) {                                                                      </span>
<span class="6111723630993110344" onmouseenter="enter('6111723630993110344');" onmouseout="out('6111723630993110344');" style=""> 953                 getDevice().addDeviceInfo(new GenericItem(&quot;&quot;, info));                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 954             }                                                                                            </span>
<span class="-1471183022667940231" onmouseenter="enter('-1471183022667940231');" onmouseout="out('-1471183022667940231');" style=""> 955         } catch (IllegalArgumentException e) {                                                           </span>
<span class="6834133445830742921" onmouseenter="enter('6834133445830742921');" onmouseout="out('6834133445830742921');" style=""> 956             LOG.info((e.getMessage()));                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 957         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 958     }                                                                                                    </span>
<span  style=""> 959                                                                                                          </span>
<span class="4996395825247791604" onmouseenter="enter('4996395825247791604');" onmouseout="out('4996395825247791604');" style=""> 960     private void handleBatteryInfo(byte data) {                                                          </span>
<span class="-7378539640920011500" onmouseenter="enter('-7378539640920011500');" onmouseout="out('-7378539640920011500');" style=""> 961             if (batteryCmd.level != (short) data) {                                                      </span>
<span class="-854799830555733473" onmouseenter="enter('-854799830555733473');" onmouseout="out('-854799830555733473');" style=""> 962                 batteryCmd.level = (short) data;                                                         </span>
<span class="-2053668973544639303" onmouseenter="enter('-2053668973544639303');" onmouseout="out('-2053668973544639303');" style=""> 963                 handleGBDeviceEvent(batteryCmd);                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 964             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 965     }                                                                                                    </span>
<span  style=""> 966                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 967 }                                                                                                        </span></pre></td>
                            <td><pre><span class="8479584664325737777" onmouseenter="enter('8479584664325737777');" onmouseout="out('8479584664325737777');" style="">   1 /*  Copyright (C) 2016-2017 Alberto, Andreas Shimokawa, ivanovlev, JoaÌƒo                                 </span>
<span class="9160074651943959828" onmouseenter="enter('9160074651943959828');" onmouseout="out('9160074651943959828');" style="">   2     Paulo Barraca                                                                                        </span>
<span  style="">   3                                                                                                          </span>
<span class="-7759499394858783956" onmouseenter="enter('-7759499394858783956');" onmouseout="out('-7759499394858783956');" style="">   4     This file is part of Gadgetbridge.                                                                   </span>
<span  style="">   5                                                                                                          </span>
<span class="-2647557636279629478" onmouseenter="enter('-2647557636279629478');" onmouseout="out('-2647557636279629478');" style="">   6     Gadgetbridge is free software: you can redistribute it and/or modify                                 </span>
<span class="4878736751218581391" onmouseenter="enter('4878736751218581391');" onmouseout="out('4878736751218581391');" style="">   7     it under the terms of the GNU Affero General Public License as published                             </span>
<span class="-5160078368722358920" onmouseenter="enter('-5160078368722358920');" onmouseout="out('-5160078368722358920');" style="">   8     by the Free Software Foundation, either version 3 of the License, or                                 </span>
<span class="6661789815760177463" onmouseenter="enter('6661789815760177463');" onmouseout="out('6661789815760177463');" style="">   9     (at your option) any later version.                                                                  </span>
<span  style="">  10                                                                                                          </span>
<span class="-6828199977528779968" onmouseenter="enter('-6828199977528779968');" onmouseout="out('-6828199977528779968');" style="">  11     Gadgetbridge is distributed in the hope that it will be useful,                                      </span>
<span class="4883593508173597945" onmouseenter="enter('4883593508173597945');" onmouseout="out('4883593508173597945');" style="">  12     but WITHOUT ANY WARRANTY; without even the implied warranty of                                       </span>
<span class="2300657568347926527" onmouseenter="enter('2300657568347926527');" onmouseout="out('2300657568347926527');" style="">  13     MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the                                        </span>
<span class="4681049817175334681" onmouseenter="enter('4681049817175334681');" onmouseout="out('4681049817175334681');" style="">  14     GNU Affero General Public License for more details.                                                  </span>
<span  style="">  15                                                                                                          </span>
<span class="-3235531360569947201" onmouseenter="enter('-3235531360569947201');" onmouseout="out('-3235531360569947201');" style="">  16     You should have received a copy of the GNU Affero General Public License                             </span>
<span class="-3088444562895398794" onmouseenter="enter('-3088444562895398794');" onmouseout="out('-3088444562895398794');" style="">  17     along with this program.  If not, see &lt;http://www.gnu.org/licenses/&gt;. */                             </span>
<span class="-5217643761314834314" onmouseenter="enter('-5217643761314834314');" onmouseout="out('-5217643761314834314');" style="">  18 package nodomain.freeyourgadget.gadgetbridge.service.devices.hplus;                                      </span>
<span  style="">  19                                                                                                          </span>
<span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style="">  20 /*                                                                                                       </span>
<span class="5416857039449935643" onmouseenter="enter('5416857039449935643');" onmouseout="out('5416857039449935643');" style="">  21 * @author JoÃ£o Paulo Barraca &amp;lt;jpbarraca@gmail.com&amp;gt;                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  22 */                                                                                                       </span>
<span  style="">  23                                                                                                          </span>
<span class="2440823415412133066" onmouseenter="enter('2440823415412133066');" onmouseout="out('2440823415412133066');" style="">  24 import android.bluetooth.BluetoothGatt;                                                                  </span>
<span class="4736969144974683041" onmouseenter="enter('4736969144974683041');" onmouseout="out('4736969144974683041');" style="">  25 import android.bluetooth.BluetoothGattCharacteristic;                                                    </span>
<span class="-489389385851058391" onmouseenter="enter('-489389385851058391');" onmouseout="out('-489389385851058391');" style="">  26 import android.content.BroadcastReceiver;                                                                </span>
<span class="5922045460006936195" onmouseenter="enter('5922045460006936195');" onmouseout="out('5922045460006936195');" style="">  27 import android.content.Context;                                                                          </span>
<span class="6568903789857736568" onmouseenter="enter('6568903789857736568');" onmouseout="out('6568903789857736568');" style="">  28 import android.content.Intent;                                                                           </span>
<span class="8697221465021235869" onmouseenter="enter('8697221465021235869');" onmouseout="out('8697221465021235869');" style="">  29 import android.content.IntentFilter;                                                                     </span>
<span class="-8750621697125156872" onmouseenter="enter('-8750621697125156872');" onmouseout="out('-8750621697125156872');" style="">  30 import android.net.Uri;                                                                                  </span>
<span class="2517521963771876570" onmouseenter="enter('2517521963771876570');" onmouseout="out('2517521963771876570');" style="">  31 import android.support.v4.content.LocalBroadcastManager;                                                 </span>
<span class="-4373317539211938720" onmouseenter="enter('-4373317539211938720');" onmouseout="out('-4373317539211938720');" style="">  32 import android.widget.Toast;                                                                             </span>
<span  style="">  33                                                                                                          </span>
<span class="2359514128542055982" onmouseenter="enter('2359514128542055982');" onmouseout="out('2359514128542055982');" style="">  34 import org.apache.commons.lang3.ArrayUtils;                                                              </span>
<span class="9072327285961251154" onmouseenter="enter('9072327285961251154');" onmouseout="out('9072327285961251154');" style="">  35 import org.slf4j.Logger;                                                                                 </span>
<span class="697043352225962606" onmouseenter="enter('697043352225962606');" onmouseout="out('697043352225962606');" style="">  36 import org.slf4j.LoggerFactory;                                                                          </span>
<span  style="">  37                                                                                                          </span>
<span class="103340661636203254" onmouseenter="enter('103340661636203254');" onmouseout="out('103340661636203254');" style="">  38 import java.io.IOException;                                                                              </span>
<span class="8256805395213692609" onmouseenter="enter('8256805395213692609');" onmouseout="out('8256805395213692609');" style="">  39 import java.io.UnsupportedEncodingException;                                                             </span>
<span class="9191247685397773893" onmouseenter="enter('9191247685397773893');" onmouseout="out('9191247685397773893');" style="">  40 import java.util.ArrayList;                                                                              </span>
<span class="-28465676010609596" onmouseenter="enter('-28465676010609596');" onmouseout="out('-28465676010609596');" style="">  41 import java.util.Arrays;                                                                                 </span>
<span class="1562735530241225598" onmouseenter="enter('1562735530241225598');" onmouseout="out('1562735530241225598');" style="">  42 import java.util.Calendar;                                                                               </span>
<span class="-4685965902094386510" onmouseenter="enter('-4685965902094386510');" onmouseout="out('-4685965902094386510');" style="">  43 import java.util.GregorianCalendar;                                                                      </span>
<span class="-1786020958497218848" onmouseenter="enter('-1786020958497218848');" onmouseout="out('-1786020958497218848');" style="">  44 import java.util.List;                                                                                   </span>
<span class="2390503830490498598" onmouseenter="enter('2390503830490498598');" onmouseout="out('2390503830490498598');" style="">  45 import java.util.UUID;                                                                                   </span>
<span  style="">  46                                                                                                          </span>
<span class="-7198279398549834921" onmouseenter="enter('-7198279398549834921');" onmouseout="out('-7198279398549834921');" style="">  47 import nodomain.freeyourgadget.gadgetbridge.R;                                                           </span>
<span class="-3005335786085073829" onmouseenter="enter('-3005335786085073829');" onmouseout="out('-3005335786085073829');" style="">  48 import nodomain.freeyourgadget.gadgetbridge.deviceevents.GBDeviceEventBatteryInfo;                       </span>
<span class="5042091401088979472" onmouseenter="enter('5042091401088979472');" onmouseout="out('5042091401088979472');" style="">  49 import nodomain.freeyourgadget.gadgetbridge.devices.hplus.HPlusConstants;                                </span>
<span class="-4973236722115174269" onmouseenter="enter('-4973236722115174269');" onmouseout="out('-4973236722115174269');" style="">  50 import nodomain.freeyourgadget.gadgetbridge.devices.hplus.HPlusCoordinator;                              </span>
<span class="4836892992022606579" onmouseenter="enter('4836892992022606579');" onmouseout="out('4836892992022606579');" style="">  51 import nodomain.freeyourgadget.gadgetbridge.impl.GBDevice;                                               </span>
<span class="-8766238562391910018" onmouseenter="enter('-8766238562391910018');" onmouseout="out('-8766238562391910018');" style="">  52 import nodomain.freeyourgadget.gadgetbridge.model.Alarm;                                                 </span>
<span class="-3899388208810973608" onmouseenter="enter('-3899388208810973608');" onmouseout="out('-3899388208810973608');" style="">  53 import nodomain.freeyourgadget.gadgetbridge.model.CalendarEventSpec;                                     </span>
<span class="-9074570965792323186" onmouseenter="enter('-9074570965792323186');" onmouseout="out('-9074570965792323186');" style="">  54 import nodomain.freeyourgadget.gadgetbridge.model.CallSpec;                                              </span>
<span class="-7415926539738049206" onmouseenter="enter('-7415926539738049206');" onmouseout="out('-7415926539738049206');" style="">  55 import nodomain.freeyourgadget.gadgetbridge.model.CannedMessagesSpec;                                    </span>
<span class="1593353296711823731" onmouseenter="enter('1593353296711823731');" onmouseout="out('1593353296711823731');" style="">  56 import nodomain.freeyourgadget.gadgetbridge.model.DeviceType;                                            </span>
<span class="7672535166545256161" onmouseenter="enter('7672535166545256161');" onmouseout="out('7672535166545256161');" style="">  57 import nodomain.freeyourgadget.gadgetbridge.model.GenericItem;                                           </span>
<span class="-4068239021838445503" onmouseenter="enter('-4068239021838445503');" onmouseout="out('-4068239021838445503');" style="">  58 import nodomain.freeyourgadget.gadgetbridge.model.MusicSpec;                                             </span>
<span class="7536481506851862405" onmouseenter="enter('7536481506851862405');" onmouseout="out('7536481506851862405');" style="">  59 import nodomain.freeyourgadget.gadgetbridge.model.MusicStateSpec;                                        </span>
<span class="8239808916005009388" onmouseenter="enter('8239808916005009388');" onmouseout="out('8239808916005009388');" style="">  60 import nodomain.freeyourgadget.gadgetbridge.model.NotificationSpec;                                      </span>
<span class="-40839721936664146" onmouseenter="enter('-40839721936664146');" onmouseout="out('-40839721936664146');" style="">  61 import nodomain.freeyourgadget.gadgetbridge.model.WeatherSpec;                                           </span>
<span class="4344228987867394358" onmouseenter="enter('4344228987867394358');" onmouseout="out('4344228987867394358');" style="">  62 import nodomain.freeyourgadget.gadgetbridge.service.btle.AbstractBTLEDeviceSupport;                      </span>
<span class="3410519392510510669" onmouseenter="enter('3410519392510510669');" onmouseout="out('3410519392510510669');" style="">  63 import nodomain.freeyourgadget.gadgetbridge.service.btle.TransactionBuilder;                             </span>
<span class="-2373314641424532722" onmouseenter="enter('-2373314641424532722');" onmouseout="out('-2373314641424532722');" style="">  64 import nodomain.freeyourgadget.gadgetbridge.service.btle.profiles.deviceinfo.DeviceInfo;                 </span>
<span class="5990042019621381740" onmouseenter="enter('5990042019621381740');" onmouseout="out('5990042019621381740');" style="">  65 import nodomain.freeyourgadget.gadgetbridge.service.btle.profiles.deviceinfo.DeviceInfoProfile;          </span>
<span class="-3798970344596478499" onmouseenter="enter('-3798970344596478499');" onmouseout="out('-3798970344596478499');" style="">  66 import nodomain.freeyourgadget.gadgetbridge.util.GB;                                                     </span>
<span class="1710555602396666834" onmouseenter="enter('1710555602396666834');" onmouseout="out('1710555602396666834');" style="">  67 import nodomain.freeyourgadget.gadgetbridge.util.StringUtils;                                            </span>
<span  style="">  68                                                                                                          </span>
<span  style="">  69                                                                                                          </span>
<span class="-4082404187206109090" onmouseenter="enter('-4082404187206109090');" onmouseout="out('-4082404187206109090');" style="">  70 public class HPlusSupport extends AbstractBTLEDeviceSupport {                                            </span>
<span class="-3586142179549744071" onmouseenter="enter('-3586142179549744071');" onmouseout="out('-3586142179549744071');" style="">  71     private static final Logger LOG = LoggerFactory.getLogger(HPlusSupport.class);                       </span>
<span  style="">  72                                                                                                          </span>
<span class="-5014208032763947659" onmouseenter="enter('-5014208032763947659');" onmouseout="out('-5014208032763947659');" style="">  73     public BluetoothGattCharacteristic ctrlCharacteristic = null;                                        </span>
<span class="-1389691261480921757" onmouseenter="enter('-1389691261480921757');" onmouseout="out('-1389691261480921757');" style="">  74     public BluetoothGattCharacteristic measureCharacteristic = null;                                     </span>
<span  style="">  75                                                                                                          </span>
<span class="7253442996403887798" onmouseenter="enter('7253442996403887798');" onmouseout="out('7253442996403887798');" style="">  76     private final GBDeviceEventBatteryInfo batteryCmd = new GBDeviceEventBatteryInfo();                  </span>
<span  style="">  77                                                                                                          </span>
<span class="-2647742433589439535" onmouseenter="enter('-2647742433589439535');" onmouseout="out('-2647742433589439535');" style="">  78     private HPlusHandlerThread syncHelper;                                                               </span>
<span class="7122708288156354523" onmouseenter="enter('7122708288156354523');" onmouseout="out('7122708288156354523');" style="">  79     private DeviceType deviceType = DeviceType.UNKNOWN;                                                  </span>
<span  style="">  80                                                                                                          </span>
<span class="4625474178666977899" onmouseenter="enter('4625474178666977899');" onmouseout="out('4625474178666977899');" style="">  81     private final BroadcastReceiver mReceiver = new BroadcastReceiver() {                                </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  82         @Override                                                                                        </span>
<span class="-1520739091809898546" onmouseenter="enter('-1520739091809898546');" onmouseout="out('-1520739091809898546');" style="">  83         public void onReceive(Context context, Intent intent) {                                          </span>
<span class="-4530039192824031" onmouseenter="enter('-4530039192824031');" onmouseout="out('-4530039192824031');" style="">  84             String s = intent.getAction();                                                               </span>
<span class="-431805254143538347" onmouseenter="enter('-431805254143538347');" onmouseout="out('-431805254143538347');" style="">  85             if (s.equals(DeviceInfoProfile.ACTION_DEVICE_INFO)) {                                        </span>
<span class="2870344340685632275" onmouseenter="enter('2870344340685632275');" onmouseout="out('2870344340685632275');" style=""><abbr title="  86                 handleDeviceInfo((nodomain.freeyourgadget.gadgetbridge.service.btle.profiles.deviceinfo.DeviceInfo) intent.getParcelableExtra(DeviceInfoProfile.EXTRA_DEVICE_INFO));">  86                 handleDeviceInfo((nodomain.freeyourgadget.gadgetbridge.service.btle.profiles.deviceinfo.DðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  87             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  88         }                                                                                                </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">  89     };                                                                                                   </span>
<span  style="">  90                                                                                                          </span>
<span class="-6599573096376092321" onmouseenter="enter('-6599573096376092321');" onmouseout="out('-6599573096376092321');" style="">  91     public HPlusSupport(DeviceType type) {                                                               </span>
<span class="4463652287758102089" onmouseenter="enter('4463652287758102089');" onmouseout="out('4463652287758102089');" style="">  92         super(LOG);                                                                                      </span>
<span class="-911614436014638875" onmouseenter="enter('-911614436014638875');" onmouseout="out('-911614436014638875');" style="">  93         LOG.info(&quot;HPlusSupport Instance Created&quot;);                                                       </span>
<span class="3299229106905835199" onmouseenter="enter('3299229106905835199');" onmouseout="out('3299229106905835199');" style="">  94         deviceType = type;                                                                               </span>
<span  style="">  95                                                                                                          </span>
<span class="377067810786142420" onmouseenter="enter('377067810786142420');" onmouseout="out('377067810786142420');" style="">  96         addSupportedService(HPlusConstants.UUID_SERVICE_HP);                                             </span>
<span  style="">  97                                                                                                          </span>
<span class="5948400278394960963" onmouseenter="enter('5948400278394960963');" onmouseout="out('5948400278394960963');" style="">  98         LocalBroadcastManager broadcastManager = LocalBroadcastManager.getInstance(getContext());        </span>
<span class="-6475340056070675924" onmouseenter="enter('-6475340056070675924');" onmouseout="out('-6475340056070675924');" style="">  99         IntentFilter intentFilter = new IntentFilter();                                                  </span>
<span  style=""> 100                                                                                                          </span>
<span class="-9031778988080615533" onmouseenter="enter('-9031778988080615533');" onmouseout="out('-9031778988080615533');" style=""> 101         broadcastManager.registerReceiver(mReceiver, intentFilter);                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 102     }                                                                                                    </span>
<span  style=""> 103                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 104     @Override                                                                                            </span>
<span class="-4657406736363487113" onmouseenter="enter('-4657406736363487113');" onmouseout="out('-4657406736363487113');" style=""> 105     public void dispose() {                                                                              </span>
<span class="-1145329300786377991" onmouseenter="enter('-1145329300786377991');" onmouseout="out('-1145329300786377991');" style=""> 106         LOG.info(&quot;Dispose&quot;);                                                                             </span>
<span class="5948400278394960963" onmouseenter="enter('5948400278394960963');" onmouseout="out('5948400278394960963');" style=""> 107         LocalBroadcastManager broadcastManager = LocalBroadcastManager.getInstance(getContext());        </span>
<span class="-2591797645219758220" onmouseenter="enter('-2591797645219758220');" onmouseout="out('-2591797645219758220');" style=""> 108         broadcastManager.unregisterReceiver(mReceiver);                                                  </span>
<span  style=""> 109                                                                                                          </span>
<span class="-2251371211449821101" onmouseenter="enter('-2251371211449821101');" onmouseout="out('-2251371211449821101');" style=""> 110         close();                                                                                         </span>
<span  style=""> 111                                                                                                          </span>
<span class="4250596422636225835" onmouseenter="enter('4250596422636225835');" onmouseout="out('4250596422636225835');" style=""> 112         super.dispose();                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 113     }                                                                                                    </span>
<span  style=""> 114                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 115     @Override                                                                                            </span>
<span class="624595386859969795" onmouseenter="enter('624595386859969795');" onmouseout="out('624595386859969795');" style=""> 116     protected TransactionBuilder initializeDevice(TransactionBuilder builder) {                          </span>
<span class="6943102306574884764" onmouseenter="enter('6943102306574884764');" onmouseout="out('6943102306574884764');" style=""> 117         LOG.info(&quot;Initializing&quot;);                                                                        </span>
<span  style=""> 118                                                                                                          </span>
<span class="-5776342764121597122" onmouseenter="enter('-5776342764121597122');" onmouseout="out('-5776342764121597122');" style=""> 119         gbDevice.setState(GBDevice.State.INITIALIZING);                                                  </span>
<span class="-6083303279196581322" onmouseenter="enter('-6083303279196581322');" onmouseout="out('-6083303279196581322');" style=""> 120         gbDevice.sendDeviceUpdateIntent(getContext());                                                   </span>
<span  style=""> 121                                                                                                          </span>
<span class="-2070300686094273817" onmouseenter="enter('-2070300686094273817');" onmouseout="out('-2070300686094273817');" style=""> 122         measureCharacteristic = getCharacteristic(HPlusConstants.UUID_CHARACTERISTIC_MEASURE);           </span>
<span class="-3114635167656687851" onmouseenter="enter('-3114635167656687851');" onmouseout="out('-3114635167656687851');" style=""> 123         ctrlCharacteristic = getCharacteristic(HPlusConstants.UUID_CHARACTERISTIC_CONTROL);              </span>
<span  style=""> 124                                                                                                          </span>
<span  style=""> 125                                                                                                          </span>
<span class="3645364997644532552" onmouseenter="enter('3645364997644532552');" onmouseout="out('3645364997644532552');" style=""> 126         builder.notify(getCharacteristic(HPlusConstants.UUID_CHARACTERISTIC_MEASURE), true);             </span>
<span class="8787860057533172177" onmouseenter="enter('8787860057533172177');" onmouseout="out('8787860057533172177');" style=""> 127         builder.setGattCallback(this);                                                                   </span>
<span class="7940646096517618441" onmouseenter="enter('7940646096517618441');" onmouseout="out('7940646096517618441');" style=""> 128         builder.notify(measureCharacteristic, true);                                                     </span>
<span class="7604618378927278958" onmouseenter="enter('7604618378927278958');" onmouseout="out('7604618378927278958');" style=""> 129         //Initialize device                                                                              </span>
<span class="-504446867221575653" onmouseenter="enter('-504446867221575653');" onmouseout="out('-504446867221575653');" style=""> 130         sendUserInfo(builder); //Sync preferences                                                        </span>
<span  style=""> 131                                                                                                          </span>
<span class="6586859092027978564" onmouseenter="enter('6586859092027978564');" onmouseout="out('6586859092027978564');" style=""> 132         gbDevice.setState(GBDevice.State.INITIALIZED);                                                   </span>
<span class="-6083303279196581322" onmouseenter="enter('-6083303279196581322');" onmouseout="out('-6083303279196581322');" style=""> 133         gbDevice.sendDeviceUpdateIntent(getContext());                                                   </span>
<span  style=""> 134                                                                                                          </span>
<span class="-2848575222108196544" onmouseenter="enter('-2848575222108196544');" onmouseout="out('-2848575222108196544');" style=""> 135         if(syncHelper == null) {                                                                         </span>
<span class="-1983961118622982915" onmouseenter="enter('-1983961118622982915');" onmouseout="out('-1983961118622982915');" style=""> 136             syncHelper = new HPlusHandlerThread(getDevice(), getContext(), this);                        </span>
<span class="-1903424543284802769" onmouseenter="enter('-1903424543284802769');" onmouseout="out('-1903424543284802769');" style=""> 137             syncHelper.start();                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 138         }                                                                                                </span>
<span class="-1977462876553727609" onmouseenter="enter('-1977462876553727609');" onmouseout="out('-1977462876553727609');" style=""> 139         syncHelper.sync();                                                                               </span>
<span  style=""> 140                                                                                                          </span>
<span class="-3832688778173104110" onmouseenter="enter('-3832688778173104110');" onmouseout="out('-3832688778173104110');" style=""> 141         getDevice().setFirmwareVersion(&quot;N/A&quot;);                                                           </span>
<span class="-4069256094451065143" onmouseenter="enter('-4069256094451065143');" onmouseout="out('-4069256094451065143');" style=""> 142         getDevice().setFirmwareVersion2(&quot;N/A&quot;);                                                          </span>
<span  style=""> 143                                                                                                          </span>
<span class="2384486382001682171" onmouseenter="enter('2384486382001682171');" onmouseout="out('2384486382001682171');" style=""> 144         requestDeviceInfo(builder);                                                                      </span>
<span  style=""> 145                                                                                                          </span>
<span class="8801197429786363323" onmouseenter="enter('8801197429786363323');" onmouseout="out('8801197429786363323');" style=""> 146         LOG.info(&quot;Initialization Done&quot;);                                                                 </span>
<span  style=""> 147                                                                                                          </span>
<span class="4801455624621135639" onmouseenter="enter('4801455624621135639');" onmouseout="out('4801455624621135639');" style=""> 148         return builder;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 149     }                                                                                                    </span>
<span  style=""> 150                                                                                                          </span>
<span class="464313160346579114" onmouseenter="enter('464313160346579114');" onmouseout="out('464313160346579114');" style=""> 151     private HPlusSupport sendUserInfo(TransactionBuilder builder) {                                      </span>
<span class="8659711009772068062" onmouseenter="enter('8659711009772068062');" onmouseout="out('8659711009772068062');" style=""> 152         builder.write(ctrlCharacteristic, HPlusConstants.CMD_SET_PREF_START);                            </span>
<span class="-4601813669746665290" onmouseenter="enter('-4601813669746665290');" onmouseout="out('-4601813669746665290');" style=""> 153         builder.write(ctrlCharacteristic, HPlusConstants.CMD_SET_PREF_START1);                           </span>
<span  style=""> 154                                                                                                          </span>
<span class="5354677973902937208" onmouseenter="enter('5354677973902937208');" onmouseout="out('5354677973902937208');" style=""> 155         syncPreferences(builder);                                                                        </span>
<span  style=""> 156                                                                                                          </span>
<span class="3647312381509313349" onmouseenter="enter('3647312381509313349');" onmouseout="out('3647312381509313349');" style=""> 157         builder.write(ctrlCharacteristic, new byte[]{HPlusConstants.CMD_SET_CONF_END});                  </span>
<span class="2297715846939503398" onmouseenter="enter('2297715846939503398');" onmouseout="out('2297715846939503398');" style=""> 158         return this;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 159     }                                                                                                    </span>
<span  style=""> 160                                                                                                          </span>
<span class="-3630452951846679004" onmouseenter="enter('-3630452951846679004');" onmouseout="out('-3630452951846679004');" style=""> 161     private HPlusSupport syncPreferences(TransactionBuilder transaction) {                               </span>
<span  style=""> 162                                                                                                          </span>
<span class="9200456031894264068" onmouseenter="enter('9200456031894264068');" onmouseout="out('9200456031894264068');" style=""> 163         if (deviceType == DeviceType.HPLUS) {                                                            </span>
<span class="-9160949721391368870" onmouseenter="enter('-9160949721391368870');" onmouseout="out('-9160949721391368870');" style=""> 164             setSIT(transaction);          //Sync SIT Interval                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 165         }                                                                                                </span>
<span  style=""> 166                                                                                                          </span>
<span class="8565886816545297578" onmouseenter="enter('8565886816545297578');" onmouseout="out('8565886816545297578');" style=""> 167         setCurrentDate(transaction);                                                                     </span>
<span class="-8398887245102710885" onmouseenter="enter('-8398887245102710885');" onmouseout="out('-8398887245102710885');" style=""> 168         setCurrentTime(transaction);                                                                     </span>
<span class="1698876699275306022" onmouseenter="enter('1698876699275306022');" onmouseout="out('1698876699275306022');" style=""> 169         setDayOfWeek(transaction);                                                                       </span>
<span class="-2226089159439282115" onmouseenter="enter('-2226089159439282115');" onmouseout="out('-2226089159439282115');" style=""> 170         setTimeMode(transaction);                                                                        </span>
<span  style=""> 171                                                                                                          </span>
<span class="-3967043804590944959" onmouseenter="enter('-3967043804590944959');" onmouseout="out('-3967043804590944959');" style=""> 172         setGender(transaction);                                                                          </span>
<span class="1849231822188363425" onmouseenter="enter('1849231822188363425');" onmouseout="out('1849231822188363425');" style=""> 173         setAge(transaction);                                                                             </span>
<span class="8409976551582741350" onmouseenter="enter('8409976551582741350');" onmouseout="out('8409976551582741350');" style=""> 174         setWeight(transaction);                                                                          </span>
<span class="2177249264940965323" onmouseenter="enter('2177249264940965323');" onmouseout="out('2177249264940965323');" style=""> 175         setHeight(transaction);                                                                          </span>
<span  style=""> 176                                                                                                          </span>
<span class="-7350523131149809385" onmouseenter="enter('-7350523131149809385');" onmouseout="out('-7350523131149809385');" style=""> 177         setGoal(transaction);                                                                            </span>
<span class="4493614030159792560" onmouseenter="enter('4493614030159792560');" onmouseout="out('4493614030159792560');" style=""> 178         setLanguage(transaction);                                                                        </span>
<span class="-7293987064571039169" onmouseenter="enter('-7293987064571039169');" onmouseout="out('-7293987064571039169');" style=""> 179         setScreenTime(transaction);                                                                      </span>
<span class="8577063610004227384" onmouseenter="enter('8577063610004227384');" onmouseout="out('8577063610004227384');" style=""> 180         setUnit(transaction);                                                                            </span>
<span class="-4090002420283598619" onmouseenter="enter('-4090002420283598619');" onmouseout="out('-4090002420283598619');" style=""> 181         setAllDayHeart(transaction);                                                                     </span>
<span  style=""> 182                                                                                                          </span>
<span class="2297715846939503398" onmouseenter="enter('2297715846939503398');" onmouseout="out('2297715846939503398');" style=""> 183         return this;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 184     }                                                                                                    </span>
<span  style=""> 185                                                                                                          </span>
<span class="2971063439380410916" onmouseenter="enter('2971063439380410916');" onmouseout="out('2971063439380410916');" style=""> 186     private HPlusSupport setLanguage(TransactionBuilder transaction) {                                   </span>
<span class="2849983908429827334" onmouseenter="enter('2849983908429827334');" onmouseout="out('2849983908429827334');" style=""> 187         byte value = HPlusCoordinator.getLanguage(getDevice().getAddress());                             </span>
<span class="3291452160875082121" onmouseenter="enter('3291452160875082121');" onmouseout="out('3291452160875082121');" style=""> 188         transaction.write(ctrlCharacteristic, new byte[]{                                                </span>
<span class="-2720480633878408025" onmouseenter="enter('-2720480633878408025');" onmouseout="out('-2720480633878408025');" style=""> 189                 HPlusConstants.CMD_SET_LANGUAGE,                                                         </span>
<span class="1200713371940080677" onmouseenter="enter('1200713371940080677');" onmouseout="out('1200713371940080677');" style=""> 190                 value                                                                                    </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 191         });                                                                                              </span>
<span class="2297715846939503398" onmouseenter="enter('2297715846939503398');" onmouseout="out('2297715846939503398');" style=""> 192         return this;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 193     }                                                                                                    </span>
<span  style=""> 194                                                                                                          </span>
<span  style=""> 195                                                                                                          </span>
<span class="4317151267263402448" onmouseenter="enter('4317151267263402448');" onmouseout="out('4317151267263402448');" style=""> 196     private HPlusSupport setTimeMode(TransactionBuilder transaction) {                                   </span>
<span class="218359786857846408" onmouseenter="enter('218359786857846408');" onmouseout="out('218359786857846408');" style=""> 197         byte value = HPlusCoordinator.getTimeMode(getDevice().getAddress());                             </span>
<span  style=""> 198                                                                                                          </span>
<span class="3291452160875082121" onmouseenter="enter('3291452160875082121');" onmouseout="out('3291452160875082121');" style=""> 199         transaction.write(ctrlCharacteristic, new byte[]{                                                </span>
<span class="4263534606018086323" onmouseenter="enter('4263534606018086323');" onmouseout="out('4263534606018086323');" style=""> 200                 HPlusConstants.CMD_SET_TIMEMODE,                                                         </span>
<span class="1200713371940080677" onmouseenter="enter('1200713371940080677');" onmouseout="out('1200713371940080677');" style=""> 201                 value                                                                                    </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 202         });                                                                                              </span>
<span class="2297715846939503398" onmouseenter="enter('2297715846939503398');" onmouseout="out('2297715846939503398');" style=""> 203         return this;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 204     }                                                                                                    </span>
<span  style=""> 205                                                                                                          </span>
<span class="1527802699814540214" onmouseenter="enter('1527802699814540214');" onmouseout="out('1527802699814540214');" style=""> 206     private HPlusSupport setUnit(TransactionBuilder transaction) {                                       </span>
<span class="-8211628829141498614" onmouseenter="enter('-8211628829141498614');" onmouseout="out('-8211628829141498614');" style=""> 207         byte value = HPlusCoordinator.getUnit(getDevice().getAddress());                                 </span>
<span class="3291452160875082121" onmouseenter="enter('3291452160875082121');" onmouseout="out('3291452160875082121');" style=""> 208         transaction.write(ctrlCharacteristic, new byte[]{                                                </span>
<span class="330508883912365904" onmouseenter="enter('330508883912365904');" onmouseout="out('330508883912365904');" style=""> 209                 HPlusConstants.CMD_SET_UNITS,                                                            </span>
<span class="1200713371940080677" onmouseenter="enter('1200713371940080677');" onmouseout="out('1200713371940080677');" style=""> 210                 value                                                                                    </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 211         });                                                                                              </span>
<span class="2297715846939503398" onmouseenter="enter('2297715846939503398');" onmouseout="out('2297715846939503398');" style=""> 212         return this;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 213     }                                                                                                    </span>
<span  style=""> 214                                                                                                          </span>
<span class="-7617350710418441488" onmouseenter="enter('-7617350710418441488');" onmouseout="out('-7617350710418441488');" style=""> 215     private HPlusSupport setCurrentDate(TransactionBuilder transaction) {                                </span>
<span class="2531610087543829790" onmouseenter="enter('2531610087543829790');" onmouseout="out('2531610087543829790');" style=""> 216         Calendar c = GregorianCalendar.getInstance();                                                    </span>
<span class="-2923391553220974433" onmouseenter="enter('-2923391553220974433');" onmouseout="out('-2923391553220974433');" style=""> 217         int year = c.get(Calendar.YEAR);                                                                 </span>
<span class="8379254238395309807" onmouseenter="enter('8379254238395309807');" onmouseout="out('8379254238395309807');" style=""> 218         int month = c.get(Calendar.MONTH);                                                               </span>
<span class="-1537240887202619533" onmouseenter="enter('-1537240887202619533');" onmouseout="out('-1537240887202619533');" style=""> 219         int day = c.get(Calendar.DAY_OF_MONTH);                                                          </span>
<span  style=""> 220                                                                                                          </span>
<span class="3291452160875082121" onmouseenter="enter('3291452160875082121');" onmouseout="out('3291452160875082121');" style=""> 221         transaction.write(ctrlCharacteristic, new byte[]{                                                </span>
<span class="-5419256561338282975" onmouseenter="enter('-5419256561338282975');" onmouseout="out('-5419256561338282975');" style=""> 222                 HPlusConstants.CMD_SET_DATE,                                                             </span>
<span class="596156045428080737" onmouseenter="enter('596156045428080737');" onmouseout="out('596156045428080737');" style=""> 223                 (byte) ((year / 256) &amp; 0xff),                                                            </span>
<span class="-274510278877719166" onmouseenter="enter('-274510278877719166');" onmouseout="out('-274510278877719166');" style=""> 224                 (byte) (year % 256),                                                                     </span>
<span class="2509221540333605786" onmouseenter="enter('2509221540333605786');" onmouseout="out('2509221540333605786');" style=""> 225                 (byte) (month + 1),                                                                      </span>
<span class="154836591265012146" onmouseenter="enter('154836591265012146');" onmouseout="out('154836591265012146');" style=""> 226                 (byte) (day)                                                                             </span>
<span  style=""> 227                                                                                                          </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 228         });                                                                                              </span>
<span class="2297715846939503398" onmouseenter="enter('2297715846939503398');" onmouseout="out('2297715846939503398');" style=""> 229         return this;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 230     }                                                                                                    </span>
<span  style=""> 231                                                                                                          </span>
<span class="-5177509192006647721" onmouseenter="enter('-5177509192006647721');" onmouseout="out('-5177509192006647721');" style=""> 232     private HPlusSupport setCurrentTime(TransactionBuilder transaction) {                                </span>
<span class="2531610087543829790" onmouseenter="enter('2531610087543829790');" onmouseout="out('2531610087543829790');" style=""> 233         Calendar c = GregorianCalendar.getInstance();                                                    </span>
<span  style=""> 234                                                                                                          </span>
<span class="3291452160875082121" onmouseenter="enter('3291452160875082121');" onmouseout="out('3291452160875082121');" style=""> 235         transaction.write(ctrlCharacteristic, new byte[]{                                                </span>
<span class="-3810178960282507440" onmouseenter="enter('-3810178960282507440');" onmouseout="out('-3810178960282507440');" style=""> 236                 HPlusConstants.CMD_SET_TIME,                                                             </span>
<span class="4175240225145224534" onmouseenter="enter('4175240225145224534');" onmouseout="out('4175240225145224534');" style=""> 237                 (byte) c.get(Calendar.HOUR_OF_DAY),                                                      </span>
<span class="-8029568718198783140" onmouseenter="enter('-8029568718198783140');" onmouseout="out('-8029568718198783140');" style=""> 238                 (byte) c.get(Calendar.MINUTE),                                                           </span>
<span class="-2353745633236339443" onmouseenter="enter('-2353745633236339443');" onmouseout="out('-2353745633236339443');" style=""> 239                 (byte) c.get(Calendar.SECOND)                                                            </span>
<span  style=""> 240                                                                                                          </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 241         });                                                                                              </span>
<span class="2297715846939503398" onmouseenter="enter('2297715846939503398');" onmouseout="out('2297715846939503398');" style=""> 242         return this;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 243     }                                                                                                    </span>
<span  style=""> 244                                                                                                          </span>
<span  style=""> 245                                                                                                          </span>
<span class="-4421580834062212270" onmouseenter="enter('-4421580834062212270');" onmouseout="out('-4421580834062212270');" style=""> 246     private HPlusSupport setDayOfWeek(TransactionBuilder transaction) {                                  </span>
<span class="2531610087543829790" onmouseenter="enter('2531610087543829790');" onmouseout="out('2531610087543829790');" style=""> 247         Calendar c = GregorianCalendar.getInstance();                                                    </span>
<span  style=""> 248                                                                                                          </span>
<span class="3291452160875082121" onmouseenter="enter('3291452160875082121');" onmouseout="out('3291452160875082121');" style=""> 249         transaction.write(ctrlCharacteristic, new byte[]{                                                </span>
<span class="7969665857025838608" onmouseenter="enter('7969665857025838608');" onmouseout="out('7969665857025838608');" style=""> 250                 HPlusConstants.CMD_SET_WEEK,                                                             </span>
<span class="2107609500554215585" onmouseenter="enter('2107609500554215585');" onmouseout="out('2107609500554215585');" style=""> 251                 (byte) (c.get(Calendar.DAY_OF_WEEK) - 1)                                                 </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 252         });                                                                                              </span>
<span class="2297715846939503398" onmouseenter="enter('2297715846939503398');" onmouseout="out('2297715846939503398');" style=""> 253         return this;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 254     }                                                                                                    </span>
<span  style=""> 255                                                                                                          </span>
<span  style=""> 256                                                                                                          </span>
<span class="1777874725720523294" onmouseenter="enter('1777874725720523294');" onmouseout="out('1777874725720523294');" style=""> 257     private HPlusSupport setSIT(TransactionBuilder transaction) {                                        </span>
<span  style=""> 258                                                                                                          </span>
<span class="-1710515092546508137" onmouseenter="enter('-1710515092546508137');" onmouseout="out('-1710515092546508137');" style=""> 259         //Makibes F68 doesn&#x27;t like this command.                                                         </span>
<span class="4585394865152052123" onmouseenter="enter('4585394865152052123');" onmouseout="out('4585394865152052123');" style=""> 260         //Just ignore.                                                                                   </span>
<span class="8010717523561516322" onmouseenter="enter('8010717523561516322');" onmouseout="out('8010717523561516322');" style=""> 261         if (deviceType == DeviceType.MAKIBESF68) {                                                       </span>
<span class="2297715846939503398" onmouseenter="enter('2297715846939503398');" onmouseout="out('2297715846939503398');" style=""> 262             return this;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 263         }                                                                                                </span>
<span  style=""> 264                                                                                                          </span>
<span class="7782781853756800720" onmouseenter="enter('7782781853756800720');" onmouseout="out('7782781853756800720');" style=""> 265         int startTime = HPlusCoordinator.getSITStartTime(getDevice().getAddress());                      </span>
<span class="8209842661687801925" onmouseenter="enter('8209842661687801925');" onmouseout="out('8209842661687801925');" style=""> 266         int endTime = HPlusCoordinator.getSITEndTime(getDevice().getAddress());                          </span>
<span  style=""> 267                                                                                                          </span>
<span class="5882708480576637773" onmouseenter="enter('5882708480576637773');" onmouseout="out('5882708480576637773');" style=""> 268         Calendar now = GregorianCalendar.getInstance();                                                  </span>
<span  style=""> 269                                                                                                          </span>
<span class="3291452160875082121" onmouseenter="enter('3291452160875082121');" onmouseout="out('3291452160875082121');" style=""> 270         transaction.write(ctrlCharacteristic, new byte[]{                                                </span>
<span class="-6329136660964193391" onmouseenter="enter('-6329136660964193391');" onmouseout="out('-6329136660964193391');" style=""> 271                 HPlusConstants.CMD_SET_SIT_INTERVAL,                                                     </span>
<span class="-7172094393246648903" onmouseenter="enter('-7172094393246648903');" onmouseout="out('-7172094393246648903');" style=""> 272                 (byte) ((startTime / 256) &amp; 0xff),                                                       </span>
<span class="-3674522560837142583" onmouseenter="enter('-3674522560837142583');" onmouseout="out('-3674522560837142583');" style=""> 273                 (byte) (startTime % 256),                                                                </span>
<span class="9123983034732908067" onmouseenter="enter('9123983034732908067');" onmouseout="out('9123983034732908067');" style=""> 274                 (byte) ((endTime / 256) &amp; 0xff),                                                         </span>
<span class="5594695527343368846" onmouseenter="enter('5594695527343368846');" onmouseout="out('5594695527343368846');" style=""> 275                 (byte) (endTime % 256),                                                                  </span>
<span class="-6076240376861215679" onmouseenter="enter('-6076240376861215679');" onmouseout="out('-6076240376861215679');" style=""> 276                 0,                                                                                       </span>
<span class="-6076240376861215679" onmouseenter="enter('-6076240376861215679');" onmouseout="out('-6076240376861215679');" style=""> 277                 0,                                                                                       </span>
<span class="-1881944630562092789" onmouseenter="enter('-1881944630562092789');" onmouseout="out('-1881944630562092789');" style=""> 278                 (byte) ((now.get(Calendar.YEAR) / 256) &amp; 0xff),                                          </span>
<span class="808961206931151347" onmouseenter="enter('808961206931151347');" onmouseout="out('808961206931151347');" style=""> 279                 (byte) (now.get(Calendar.YEAR) % 256),                                                   </span>
<span class="-3929811106245983954" onmouseenter="enter('-3929811106245983954');" onmouseout="out('-3929811106245983954');" style=""> 280                 (byte) (now.get(Calendar.MONTH) + 1),                                                    </span>
<span class="-6608497570264303352" onmouseenter="enter('-6608497570264303352');" onmouseout="out('-6608497570264303352');" style=""> 281                 (byte) (now.get(Calendar.DAY_OF_MONTH)),                                                 </span>
<span class="-4838072097318336683" onmouseenter="enter('-4838072097318336683');" onmouseout="out('-4838072097318336683');" style=""> 282                 (byte) (now.get(Calendar.HOUR_OF_DAY)),                                                  </span>
<span class="-3604343412851664994" onmouseenter="enter('-3604343412851664994');" onmouseout="out('-3604343412851664994');" style=""> 283                 (byte) (now.get(Calendar.MINUTE)),                                                       </span>
<span class="8073077880938975334" onmouseenter="enter('8073077880938975334');" onmouseout="out('8073077880938975334');" style=""> 284                 (byte) (now.get(Calendar.SECOND)),                                                       </span>
<span class="-6076240376861215679" onmouseenter="enter('-6076240376861215679');" onmouseout="out('-6076240376861215679');" style=""> 285                 0,                                                                                       </span>
<span class="-6076240376861215679" onmouseenter="enter('-6076240376861215679');" onmouseout="out('-6076240376861215679');" style=""> 286                 0,                                                                                       </span>
<span class="-6076240376861215679" onmouseenter="enter('-6076240376861215679');" onmouseout="out('-6076240376861215679');" style=""> 287                 0,                                                                                       </span>
<span class="2218992417378941058" onmouseenter="enter('2218992417378941058');" onmouseout="out('2218992417378941058');" style=""> 288                 0                                                                                        </span>
<span  style=""> 289                                                                                                          </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 290         });                                                                                              </span>
<span class="2297715846939503398" onmouseenter="enter('2297715846939503398');" onmouseout="out('2297715846939503398');" style=""> 291         return this;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 292     }                                                                                                    </span>
<span  style=""> 293                                                                                                          </span>
<span class="7972248273337413684" onmouseenter="enter('7972248273337413684');" onmouseout="out('7972248273337413684');" style=""> 294     private HPlusSupport setWeight(TransactionBuilder transaction) {                                     </span>
<span class="8150192687820779212" onmouseenter="enter('8150192687820779212');" onmouseout="out('8150192687820779212');" style=""> 295         byte value = HPlusCoordinator.getUserWeight();                                                   </span>
<span class="3291452160875082121" onmouseenter="enter('3291452160875082121');" onmouseout="out('3291452160875082121');" style=""> 296         transaction.write(ctrlCharacteristic, new byte[]{                                                </span>
<span class="-3989010006227608454" onmouseenter="enter('-3989010006227608454');" onmouseout="out('-3989010006227608454');" style=""> 297                 HPlusConstants.CMD_SET_WEIGHT,                                                           </span>
<span class="1200713371940080677" onmouseenter="enter('1200713371940080677');" onmouseout="out('1200713371940080677');" style=""> 298                 value                                                                                    </span>
<span  style=""> 299                                                                                                          </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 300         });                                                                                              </span>
<span class="2297715846939503398" onmouseenter="enter('2297715846939503398');" onmouseout="out('2297715846939503398');" style=""> 301         return this;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 302     }                                                                                                    </span>
<span  style=""> 303                                                                                                          </span>
<span class="-7347510196780789476" onmouseenter="enter('-7347510196780789476');" onmouseout="out('-7347510196780789476');" style=""> 304     private HPlusSupport setHeight(TransactionBuilder transaction) {                                     </span>
<span class="-6343281459862929187" onmouseenter="enter('-6343281459862929187');" onmouseout="out('-6343281459862929187');" style=""> 305         byte value = HPlusCoordinator.getUserHeight();                                                   </span>
<span class="3291452160875082121" onmouseenter="enter('3291452160875082121');" onmouseout="out('3291452160875082121');" style=""> 306         transaction.write(ctrlCharacteristic, new byte[]{                                                </span>
<span class="-2073946156144479840" onmouseenter="enter('-2073946156144479840');" onmouseout="out('-2073946156144479840');" style=""> 307                 HPlusConstants.CMD_HEIGHT,                                                               </span>
<span class="1200713371940080677" onmouseenter="enter('1200713371940080677');" onmouseout="out('1200713371940080677');" style=""> 308                 value                                                                                    </span>
<span  style=""> 309                                                                                                          </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 310         });                                                                                              </span>
<span class="2297715846939503398" onmouseenter="enter('2297715846939503398');" onmouseout="out('2297715846939503398');" style=""> 311         return this;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 312     }                                                                                                    </span>
<span  style=""> 313                                                                                                          </span>
<span  style=""> 314                                                                                                          </span>
<span class="5947324092747227570" onmouseenter="enter('5947324092747227570');" onmouseout="out('5947324092747227570');" style=""> 315     private HPlusSupport setAge(TransactionBuilder transaction) {                                        </span>
<span class="2934823474304180885" onmouseenter="enter('2934823474304180885');" onmouseout="out('2934823474304180885');" style=""> 316         byte value = HPlusCoordinator.getUserAge();                                                      </span>
<span class="3291452160875082121" onmouseenter="enter('3291452160875082121');" onmouseout="out('3291452160875082121');" style=""> 317         transaction.write(ctrlCharacteristic, new byte[]{                                                </span>
<span class="5713181507603331000" onmouseenter="enter('5713181507603331000');" onmouseout="out('5713181507603331000');" style=""> 318                 HPlusConstants.CMD_SET_AGE,                                                              </span>
<span class="1200713371940080677" onmouseenter="enter('1200713371940080677');" onmouseout="out('1200713371940080677');" style=""> 319                 value                                                                                    </span>
<span  style=""> 320                                                                                                          </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 321         });                                                                                              </span>
<span class="2297715846939503398" onmouseenter="enter('2297715846939503398');" onmouseout="out('2297715846939503398');" style=""> 322         return this;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 323     }                                                                                                    </span>
<span  style=""> 324                                                                                                          </span>
<span class="7012632444102522477" onmouseenter="enter('7012632444102522477');" onmouseout="out('7012632444102522477');" style=""> 325     private HPlusSupport setGender(TransactionBuilder transaction) {                                     </span>
<span class="851277153814698" onmouseenter="enter('851277153814698');" onmouseout="out('851277153814698');" style=""> 326         byte value = HPlusCoordinator.getUserGender();                                                   </span>
<span class="3291452160875082121" onmouseenter="enter('3291452160875082121');" onmouseout="out('3291452160875082121');" style=""> 327         transaction.write(ctrlCharacteristic, new byte[]{                                                </span>
<span class="3680299272630460864" onmouseenter="enter('3680299272630460864');" onmouseout="out('3680299272630460864');" style=""> 328                 HPlusConstants.CMD_SET_GENDER,                                                           </span>
<span class="1200713371940080677" onmouseenter="enter('1200713371940080677');" onmouseout="out('1200713371940080677');" style=""> 329                 value                                                                                    </span>
<span  style=""> 330                                                                                                          </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 331         });                                                                                              </span>
<span class="2297715846939503398" onmouseenter="enter('2297715846939503398');" onmouseout="out('2297715846939503398');" style=""> 332         return this;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 333     }                                                                                                    </span>
<span  style=""> 334                                                                                                          </span>
<span  style=""> 335                                                                                                          </span>
<span class="1941288733470282948" onmouseenter="enter('1941288733470282948');" onmouseout="out('1941288733470282948');" style=""> 336     private HPlusSupport setGoal(TransactionBuilder transaction) {                                       </span>
<span class="7904327141242761065" onmouseenter="enter('7904327141242761065');" onmouseout="out('7904327141242761065');" style=""> 337         int value = HPlusCoordinator.getGoal();                                                          </span>
<span class="3291452160875082121" onmouseenter="enter('3291452160875082121');" onmouseout="out('3291452160875082121');" style=""> 338         transaction.write(ctrlCharacteristic, new byte[]{                                                </span>
<span class="-4101300033431726292" onmouseenter="enter('-4101300033431726292');" onmouseout="out('-4101300033431726292');" style=""> 339                 HPlusConstants.CMD_SET_GOAL,                                                             </span>
<span class="-2916442659377879431" onmouseenter="enter('-2916442659377879431');" onmouseout="out('-2916442659377879431');" style=""> 340                 (byte) ((value / 256) &amp; 0xff),                                                           </span>
<span class="-1647377881209297723" onmouseenter="enter('-1647377881209297723');" onmouseout="out('-1647377881209297723');" style=""> 341                 (byte) (value % 256)                                                                     </span>
<span  style=""> 342                                                                                                          </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 343         });                                                                                              </span>
<span class="2297715846939503398" onmouseenter="enter('2297715846939503398');" onmouseout="out('2297715846939503398');" style=""> 344         return this;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 345     }                                                                                                    </span>
<span  style=""> 346                                                                                                          </span>
<span  style=""> 347                                                                                                          </span>
<span class="-1254834888773037917" onmouseenter="enter('-1254834888773037917');" onmouseout="out('-1254834888773037917');" style=""> 348     private HPlusSupport setScreenTime(TransactionBuilder transaction) {                                 </span>
<span class="4315045256729533150" onmouseenter="enter('4315045256729533150');" onmouseout="out('4315045256729533150');" style=""> 349         byte value = HPlusCoordinator.getScreenTime(getDevice().getAddress());                           </span>
<span class="3291452160875082121" onmouseenter="enter('3291452160875082121');" onmouseout="out('3291452160875082121');" style=""> 350         transaction.write(ctrlCharacteristic, new byte[]{                                                </span>
<span class="-6949628958147360848" onmouseenter="enter('-6949628958147360848');" onmouseout="out('-6949628958147360848');" style=""> 351                 HPlusConstants.CMD_SET_SCREENTIME,                                                       </span>
<span class="1200713371940080677" onmouseenter="enter('1200713371940080677');" onmouseout="out('1200713371940080677');" style=""> 352                 value                                                                                    </span>
<span  style=""> 353                                                                                                          </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 354         });                                                                                              </span>
<span class="2297715846939503398" onmouseenter="enter('2297715846939503398');" onmouseout="out('2297715846939503398');" style=""> 355         return this;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 356     }                                                                                                    </span>
<span  style=""> 357                                                                                                          </span>
<span class="-5197767512792012744" onmouseenter="enter('-5197767512792012744');" onmouseout="out('-5197767512792012744');" style=""> 358     private HPlusSupport setAllDayHeart(TransactionBuilder transaction) {                                </span>
<span  style=""> 359                                                                                                          </span>
<span class="-7482590365127471239" onmouseenter="enter('-7482590365127471239');" onmouseout="out('-7482590365127471239');" style=""> 360         byte value = HPlusCoordinator.getAllDayHR(getDevice().getAddress());                             </span>
<span  style=""> 361                                                                                                          </span>
<span class="3291452160875082121" onmouseenter="enter('3291452160875082121');" onmouseout="out('3291452160875082121');" style=""> 362         transaction.write(ctrlCharacteristic, new byte[]{                                                </span>
<span class="8318401178566544878" onmouseenter="enter('8318401178566544878');" onmouseout="out('8318401178566544878');" style=""> 363                 HPlusConstants.CMD_SET_ALLDAY_HRM,                                                       </span>
<span class="1200713371940080677" onmouseenter="enter('1200713371940080677');" onmouseout="out('1200713371940080677');" style=""> 364                 value                                                                                    </span>
<span  style=""> 365                                                                                                          </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 366         });                                                                                              </span>
<span  style=""> 367                                                                                                          </span>
<span class="2297715846939503398" onmouseenter="enter('2297715846939503398');" onmouseout="out('2297715846939503398');" style=""> 368         return this;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 369     }                                                                                                    </span>
<span  style=""> 370                                                                                                          </span>
<span  style=""> 371                                                                                                          </span>
<span class="-1399038394034113320" onmouseenter="enter('-1399038394034113320');" onmouseout="out('-1399038394034113320');" style=""> 372     private HPlusSupport setAlarm(TransactionBuilder transaction, Calendar t) {                          </span>
<span  style=""> 373                                                                                                          </span>
<span class="6467402380305076865" onmouseenter="enter('6467402380305076865');" onmouseout="out('6467402380305076865');" style=""> 374         byte hour = HPlusConstants.ARG_ALARM_DISABLE;                                                    </span>
<span class="-3281384072436167776" onmouseenter="enter('-3281384072436167776');" onmouseout="out('-3281384072436167776');" style=""> 375         byte minute = HPlusConstants.ARG_ALARM_DISABLE;                                                  </span>
<span  style=""> 376                                                                                                          </span>
<span class="-7115571877868547666" onmouseenter="enter('-7115571877868547666');" onmouseout="out('-7115571877868547666');" style=""> 377         if (t != null) {                                                                                 </span>
<span class="5339525172321764938" onmouseenter="enter('5339525172321764938');" onmouseout="out('5339525172321764938');" style=""> 378             hour = (byte) t.get(Calendar.HOUR_OF_DAY);                                                   </span>
<span class="5337471965635534220" onmouseenter="enter('5337471965635534220');" onmouseout="out('5337471965635534220');" style=""> 379             minute = (byte) t.get(Calendar.MINUTE);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 380         }                                                                                                </span>
<span  style=""> 381                                                                                                          </span>
<span class="-3840280779505156671" onmouseenter="enter('-3840280779505156671');" onmouseout="out('-3840280779505156671');" style=""> 382         transaction.write(ctrlCharacteristic, new byte[]{HPlusConstants.CMD_SET_ALARM,                   </span>
<span class="-5045918625335939481" onmouseenter="enter('-5045918625335939481');" onmouseout="out('-5045918625335939481');" style=""> 383                 hour,                                                                                    </span>
<span class="-2395728393329392091" onmouseenter="enter('-2395728393329392091');" onmouseout="out('-2395728393329392091');" style=""> 384                 minute});                                                                                </span>
<span  style=""> 385                                                                                                          </span>
<span class="2297715846939503398" onmouseenter="enter('2297715846939503398');" onmouseout="out('2297715846939503398');" style=""> 386         return this;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 387     }                                                                                                    </span>
<span  style=""> 388                                                                                                          </span>
<span class="-791908888061445625" onmouseenter="enter('-791908888061445625');" onmouseout="out('-791908888061445625');" style=""> 389     private HPlusSupport setFindMe(TransactionBuilder transaction, boolean state) {                      </span>
<span class="7282700573083723681" onmouseenter="enter('7282700573083723681');" onmouseout="out('7282700573083723681');" style=""> 390         //TODO: Find how this works                                                                      </span>
<span  style=""> 391                                                                                                          </span>
<span class="-2705361656414002162" onmouseenter="enter('-2705361656414002162');" onmouseout="out('-2705361656414002162');" style=""> 392         byte[] msg = new byte[2];                                                                        </span>
<span class="5997450077450443173" onmouseenter="enter('5997450077450443173');" onmouseout="out('5997450077450443173');" style=""> 393         msg[0] = HPlusConstants.CMD_SET_FINDME;                                                          </span>
<span  style=""> 394                                                                                                          </span>
<span class="7403209030499211268" onmouseenter="enter('7403209030499211268');" onmouseout="out('7403209030499211268');" style=""> 395         if (state)                                                                                       </span>
<span class="3636634837394653002" onmouseenter="enter('3636634837394653002');" onmouseout="out('3636634837394653002');" style=""> 396             msg[1] = HPlusConstants.ARG_FINDME_ON;                                                       </span>
<span class="-7436048164614400339" onmouseenter="enter('-7436048164614400339');" onmouseout="out('-7436048164614400339');" style=""> 397         else                                                                                             </span>
<span class="8074200006318753451" onmouseenter="enter('8074200006318753451');" onmouseout="out('8074200006318753451');" style=""> 398             msg[1] = HPlusConstants.ARG_FINDME_OFF;                                                      </span>
<span  style=""> 399                                                                                                          </span>
<span class="-7204010731863731309" onmouseenter="enter('-7204010731863731309');" onmouseout="out('-7204010731863731309');" style=""> 400         transaction.write(ctrlCharacteristic, msg);                                                      </span>
<span class="2297715846939503398" onmouseenter="enter('2297715846939503398');" onmouseout="out('2297715846939503398');" style=""> 401         return this;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 402     }                                                                                                    </span>
<span  style=""> 403                                                                                                          </span>
<span class="-5684646578701203654" onmouseenter="enter('-5684646578701203654');" onmouseout="out('-5684646578701203654');" style=""> 404     private HPlusSupport requestDeviceInfo(TransactionBuilder builder) {                                 </span>
<span class="3573392645117931820" onmouseenter="enter('3573392645117931820');" onmouseout="out('3573392645117931820');" style=""> 405         // HPlus devices seem to report some information in an alternative manner                        </span>
<span class="-8697440581090313181" onmouseenter="enter('-8697440581090313181');" onmouseout="out('-8697440581090313181');" style=""> 406         builder.write(ctrlCharacteristic, new byte[]{HPlusConstants.CMD_GET_DEVICE_ID});                 </span>
<span class="485503605876832302" onmouseenter="enter('485503605876832302');" onmouseout="out('485503605876832302');" style=""> 407         builder.write(ctrlCharacteristic, new byte[]{HPlusConstants.CMD_GET_VERSION});                   </span>
<span  style=""> 408                                                                                                          </span>
<span class="2297715846939503398" onmouseenter="enter('2297715846939503398');" onmouseout="out('2297715846939503398');" style=""> 409         return this;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 410     }                                                                                                    </span>
<span  style=""> 411                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 412     @Override                                                                                            </span>
<span class="-5141762163842231173" onmouseenter="enter('-5141762163842231173');" onmouseout="out('-5141762163842231173');" style=""> 413     public boolean useAutoConnect() {                                                                    </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 414         return true;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 415     }                                                                                                    </span>
<span  style=""> 416                                                                                                          </span>
<span class="4975694330800448779" onmouseenter="enter('4975694330800448779');" onmouseout="out('4975694330800448779');" style=""> 417     private void handleDeviceInfo(DeviceInfo info) {                                                     </span>
<span class="370366693446993512" onmouseenter="enter('370366693446993512');" onmouseout="out('370366693446993512');" style=""> 418         LOG.warn(&quot;Device info: &quot; + info);                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 419     }                                                                                                    </span>
<span  style=""> 420                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 421     @Override                                                                                            </span>
<span class="-116609517646424186" onmouseenter="enter('-116609517646424186');" onmouseout="out('-116609517646424186');" style=""> 422     public void onNotification(NotificationSpec notificationSpec) {                                      </span>
<span class="-2323011847991818474" onmouseenter="enter('-2323011847991818474');" onmouseout="out('-2323011847991818474');" style=""> 423         //TODO: Show different notifications according to source as Band supports this                   </span>
<span class="6488462260965955164" onmouseenter="enter('6488462260965955164');" onmouseout="out('6488462260965955164');" style=""><abbr title=" 424         //LOG.info(&quot;OnNotification: Title: &quot;+notificationSpec.title+&quot; Body: &quot;+notificationSpec.body+&quot; Source: &quot;+notificationSpec.sourceName+&quot; Sender: &quot;+notificationSpec.sender+&quot; Subject: &quot;+notificationSpec.subject);"> 424         //LOG.info(&quot;OnNotification: Title: &quot;+notificationSpec.title+&quot; Body: &quot;+notificationSpec.body+&quot; SouðŸ”µ</abbr></span>
<span class="-2578227233159539388" onmouseenter="enter('-2578227233159539388');" onmouseout="out('-2578227233159539388');" style=""> 425         showText(notificationSpec.title, notificationSpec.body);                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 426     }                                                                                                    </span>
<span  style=""> 427                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 428     @Override                                                                                            </span>
<span class="-1102873404195143085" onmouseenter="enter('-1102873404195143085');" onmouseout="out('-1102873404195143085');" style=""> 429     public void onDeleteNotification(int id) {                                                           </span>
<span  style=""> 430                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 431     }                                                                                                    </span>
<span  style=""> 432                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 433     @Override                                                                                            </span>
<span class="7164248173527032001" onmouseenter="enter('7164248173527032001');" onmouseout="out('7164248173527032001');" style=""> 434     public void onSetTime() {                                                                            </span>
<span  style=""> 435                                                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 436         try {                                                                                            </span>
<span class="8378030939534756566" onmouseenter="enter('8378030939534756566');" onmouseout="out('8378030939534756566');" style=""> 437             TransactionBuilder builder = performInitialized(&quot;time&quot;);                                     </span>
<span  style=""> 438                                                                                                          </span>
<span class="-244233841179675239" onmouseenter="enter('-244233841179675239');" onmouseout="out('-244233841179675239');" style=""> 439             setCurrentDate(builder);                                                                     </span>
<span class="7377265401852080297" onmouseenter="enter('7377265401852080297');" onmouseout="out('7377265401852080297');" style=""> 440             setCurrentTime(builder);                                                                     </span>
<span class="3761800854751581723" onmouseenter="enter('3761800854751581723');" onmouseout="out('3761800854751581723');" style=""> 441             performConnected(builder.getTransaction());                                                  </span>
<span class="2183742815887262996" onmouseenter="enter('2183742815887262996');" onmouseout="out('2183742815887262996');" style=""> 442         }catch(IOException e){                                                                           </span>
<span  style=""> 443                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 444         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 445     }                                                                                                    </span>
<span  style=""> 446                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 447     @Override                                                                                            </span>
<span class="-6473317888357330260" onmouseenter="enter('-6473317888357330260');" onmouseout="out('-6473317888357330260');" style=""> 448     public void onSetAlarms(ArrayList&lt;? extends Alarm&gt; alarms) {                                         </span>
<span  style=""> 449                                                                                                          </span>
<span  style=""> 450                                                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 451         try {                                                                                            </span>
<span class="-1278421083116070762" onmouseenter="enter('-1278421083116070762');" onmouseout="out('-1278421083116070762');" style=""> 452             TransactionBuilder builder = performInitialized(&quot;alarm&quot;);                                    </span>
<span  style=""> 453                                                                                                          </span>
<span class="-7996805109404385335" onmouseenter="enter('-7996805109404385335');" onmouseout="out('-7996805109404385335');" style=""> 454             for (Alarm alarm : alarms) {                                                                 </span>
<span  style=""> 455                                                                                                          </span>
<span class="-403059878991992441" onmouseenter="enter('-403059878991992441');" onmouseout="out('-403059878991992441');" style=""> 456                 if (!alarm.isEnabled())                                                                  </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style=""> 457                     continue;                                                                            </span>
<span  style=""> 458                                                                                                          </span>
<span class="-448638904182363762" onmouseenter="enter('-448638904182363762');" onmouseout="out('-448638904182363762');" style=""> 459                 if (alarm.isSmartWakeup()) //Not available                                               </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style=""> 460                     continue;                                                                            </span>
<span  style=""> 461                                                                                                          </span>
<span class="-2323525561533640256" onmouseenter="enter('-2323525561533640256');" onmouseout="out('-2323525561533640256');" style=""> 462                 Calendar t = alarm.getAlarmCal();                                                        </span>
<span class="-1264397343868138084" onmouseenter="enter('-1264397343868138084');" onmouseout="out('-1264397343868138084');" style=""> 463                 setAlarm(builder, t);                                                                    </span>
<span class="-5534937907083456817" onmouseenter="enter('-5534937907083456817');" onmouseout="out('-5534937907083456817');" style=""> 464                 builder.queue(getQueue());                                                               </span>
<span  style=""> 465                                                                                                          </span>
<span class="8097986474420678749" onmouseenter="enter('8097986474420678749');" onmouseout="out('8097986474420678749');" style=""><abbr title=" 466                 GB.toast(getContext(), getContext().getString(R.string.user_feedback_miband_set_alarms_ok), Toast.LENGTH_SHORT, GB.INFO);"> 466                 GB.toast(getContext(), getContext().getString(R.string.user_feedback_miband_set_alarms_okðŸ”µ</abbr></span>
<span  style=""> 467                                                                                                          </span>
<span class="-6545552544705045608" onmouseenter="enter('-6545552544705045608');" onmouseout="out('-6545552544705045608');" style=""> 468                 return; //Only first alarm                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 469             }                                                                                            </span>
<span  style=""> 470                                                                                                          </span>
<span class="3975187194000728744" onmouseenter="enter('3975187194000728744');" onmouseout="out('3975187194000728744');" style=""> 471             setAlarm(builder, null);                                                                     </span>
<span class="3761800854751581723" onmouseenter="enter('3761800854751581723');" onmouseout="out('3761800854751581723');" style=""> 472             performConnected(builder.getTransaction());                                                  </span>
<span  style=""> 473                                                                                                          </span>
<span class="-2313180102689307633" onmouseenter="enter('-2313180102689307633');" onmouseout="out('-2313180102689307633');" style=""><abbr title=" 474             GB.toast(getContext(), getContext().getString(R.string.user_feedback_all_alarms_disabled), Toast.LENGTH_SHORT, GB.INFO);"> 474             GB.toast(getContext(), getContext().getString(R.string.user_feedback_all_alarms_disabled), ToðŸ”µ</abbr></span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 475         } catch (Exception e) {                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 476         }                                                                                                </span>
<span  style=""> 477                                                                                                          </span>
<span  style=""> 478                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 479     }                                                                                                    </span>
<span  style=""> 480                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 481     @Override                                                                                            </span>
<span class="8502851833159229707" onmouseenter="enter('8502851833159229707');" onmouseout="out('8502851833159229707');" style=""> 482     public void onSetCallState(CallSpec callSpec) {                                                      </span>
<span class="4226096810368966115" onmouseenter="enter('4226096810368966115');" onmouseout="out('4226096810368966115');" style=""> 483         switch (callSpec.command) {                                                                      </span>
<span class="4765207307001745691" onmouseenter="enter('4765207307001745691');" onmouseout="out('4765207307001745691');" style=""> 484             case CallSpec.CALL_INCOMING: {                                                               </span>
<span class="-8067308976018849552" onmouseenter="enter('-8067308976018849552');" onmouseout="out('-8067308976018849552');" style=""> 485                 showIncomingCall(callSpec.name, callSpec.number);                                        </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 486                 break;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 487             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 488         }                                                                                                </span>
<span  style=""> 489                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 490     }                                                                                                    </span>
<span  style=""> 491                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 492     @Override                                                                                            </span>
<span class="8238257195410140286" onmouseenter="enter('8238257195410140286');" onmouseout="out('8238257195410140286');" style=""> 493     public void onSetCannedMessages(CannedMessagesSpec cannedMessagesSpec) {                             </span>
<span class="-2981468772764664347" onmouseenter="enter('-2981468772764664347');" onmouseout="out('-2981468772764664347');" style=""> 494         LOG.info(&quot;Canned Messages: &quot; + cannedMessagesSpec);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 495     }                                                                                                    </span>
<span  style=""> 496                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 497     @Override                                                                                            </span>
<span class="8228188929931998548" onmouseenter="enter('8228188929931998548');" onmouseout="out('8228188929931998548');" style=""> 498     public void onSetMusicState(MusicStateSpec stateSpec) {                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 499     }                                                                                                    </span>
<span  style=""> 500                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 501     @Override                                                                                            </span>
<span class="-4182706906721092498" onmouseenter="enter('-4182706906721092498');" onmouseout="out('-4182706906721092498');" style=""> 502     public void onSetMusicInfo(MusicSpec musicSpec) {                                                    </span>
<span  style=""> 503                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 504     }                                                                                                    </span>
<span  style=""> 505                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 506     @Override                                                                                            </span>
<span class="-8425797677863799500" onmouseenter="enter('-8425797677863799500');" onmouseout="out('-8425797677863799500');" style=""> 507     public void onEnableRealtimeSteps(boolean enable) {                                                  </span>
<span class="7623304499723183910" onmouseenter="enter('7623304499723183910');" onmouseout="out('7623304499723183910');" style=""> 508         onEnableRealtimeHeartRateMeasurement(enable);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 509     }                                                                                                    </span>
<span  style=""> 510                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 511     @Override                                                                                            </span>
<span class="-4135655620136168708" onmouseenter="enter('-4135655620136168708');" onmouseout="out('-4135655620136168708');" style=""> 512     public void onInstallApp(Uri uri) {                                                                  </span>
<span  style=""> 513                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 514     }                                                                                                    </span>
<span  style=""> 515                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 516     @Override                                                                                            </span>
<span class="-3322711972275217450" onmouseenter="enter('-3322711972275217450');" onmouseout="out('-3322711972275217450');" style=""> 517     public void onAppInfoReq() {                                                                         </span>
<span  style=""> 518                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 519     }                                                                                                    </span>
<span  style=""> 520                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 521     @Override                                                                                            </span>
<span class="1692097554900603024" onmouseenter="enter('1692097554900603024');" onmouseout="out('1692097554900603024');" style=""> 522     public void onAppStart(UUID uuid, boolean start) {                                                   </span>
<span  style=""> 523                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 524     }                                                                                                    </span>
<span  style=""> 525                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 526     @Override                                                                                            </span>
<span class="7633110766708892729" onmouseenter="enter('7633110766708892729');" onmouseout="out('7633110766708892729');" style=""> 527     public void onAppDelete(UUID uuid) {                                                                 </span>
<span  style=""> 528                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 529     }                                                                                                    </span>
<span  style=""> 530                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 531     @Override                                                                                            </span>
<span class="-862897393933438838" onmouseenter="enter('-862897393933438838');" onmouseout="out('-862897393933438838');" style=""> 532     public void onAppConfiguration(UUID appUuid, String config) {                                        </span>
<span  style=""> 533                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 534     }                                                                                                    </span>
<span  style=""> 535                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 536     @Override                                                                                            </span>
<span class="-2513514137107402976" onmouseenter="enter('-2513514137107402976');" onmouseout="out('-2513514137107402976');" style=""> 537     public void onAppReorder(UUID[] uuids) {                                                             </span>
<span  style=""> 538                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 539     }                                                                                                    </span>
<span  style=""> 540                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 541     @Override                                                                                            </span>
<span class="-3215171005460530491" onmouseenter="enter('-3215171005460530491');" onmouseout="out('-3215171005460530491');" style=""> 542     public void onFetchActivityData() {                                                                  </span>
<span  style=""> 543                                                                                                          </span>
<span class="6320050851961209117" onmouseenter="enter('6320050851961209117');" onmouseout="out('6320050851961209117');" style=""> 544         if (syncHelper == null){                                                                         </span>
<span class="-7391178071599224830" onmouseenter="enter('-7391178071599224830');" onmouseout="out('-7391178071599224830');" style=""> 545             syncHelper = new HPlusHandlerThread(gbDevice, getContext(), this);                           </span>
<span class="-1903424543284802769" onmouseenter="enter('-1903424543284802769');" onmouseout="out('-1903424543284802769');" style=""> 546             syncHelper.start();                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 547         }                                                                                                </span>
<span  style=""> 548                                                                                                          </span>
<span class="-1977462876553727609" onmouseenter="enter('-1977462876553727609');" onmouseout="out('-1977462876553727609');" style=""> 549             syncHelper.sync();                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 550     }                                                                                                    </span>
<span  style=""> 551                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 552     @Override                                                                                            </span>
<span class="-3494298342935464482" onmouseenter="enter('-3494298342935464482');" onmouseout="out('-3494298342935464482');" style=""> 553     public void onReboot() {                                                                             </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 554         try {                                                                                            </span>
<span class="867466265491236176" onmouseenter="enter('867466265491236176');" onmouseout="out('867466265491236176');" style=""> 555             getQueue().clear();                                                                          </span>
<span  style=""> 556                                                                                                          </span>
<span class="2354100081541725399" onmouseenter="enter('2354100081541725399');" onmouseout="out('2354100081541725399');" style=""> 557             TransactionBuilder builder = performInitialized(&quot;Shutdown&quot;);                                 </span>
<span class="2903890927038400619" onmouseenter="enter('2903890927038400619');" onmouseout="out('2903890927038400619');" style=""><abbr title=" 558             builder.write(ctrlCharacteristic, new byte[]{HPlusConstants.CMD_SHUTDOWN, HPlusConstants.ARG_SHUTDOWN_EN});"> 558             builder.write(ctrlCharacteristic, new byte[]{HPlusConstants.CMD_SHUTDOWN, HPlusConstants.ARG_ðŸ”µ</abbr></span>
<span class="3761800854751581723" onmouseenter="enter('3761800854751581723');" onmouseout="out('3761800854751581723');" style=""> 559             performConnected(builder.getTransaction());                                                  </span>
<span class="-757793854272623252" onmouseenter="enter('-757793854272623252');" onmouseout="out('-757793854272623252');" style=""> 560         }catch(Exception e){                                                                             </span>
<span  style=""> 561                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 562         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 563     }                                                                                                    </span>
<span  style=""> 564                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 565     @Override                                                                                            </span>
<span class="-9008385526233139735" onmouseenter="enter('-9008385526233139735');" onmouseout="out('-9008385526233139735');" style=""> 566     public void onHeartRateTest() {                                                                      </span>
<span class="867466265491236176" onmouseenter="enter('867466265491236176');" onmouseout="out('867466265491236176');" style=""> 567         getQueue().clear();                                                                              </span>
<span class="-1891643383856272179" onmouseenter="enter('-1891643383856272179');" onmouseout="out('-1891643383856272179');" style=""> 568         try{                                                                                             </span>
<span class="6333941902014570384" onmouseenter="enter('6333941902014570384');" onmouseout="out('6333941902014570384');" style=""> 569             TransactionBuilder builder = performInitialized(&quot;HeartRateTest&quot;);                            </span>
<span  style=""> 570                                                                                                          </span>
<span class="-4037030148406438927" onmouseenter="enter('-4037030148406438927');" onmouseout="out('-4037030148406438927');" style=""><abbr title=" 571             builder.write(ctrlCharacteristic, new byte[]{HPlusConstants.CMD_SET_HEARTRATE_STATE, HPlusConstants.ARG_HEARTRATE_MEASURE_ON}); //Set Real Time... ?"> 571             builder.write(ctrlCharacteristic, new byte[]{HPlusConstants.CMD_SET_HEARTRATE_STATE, HPlusConðŸ”µ</abbr></span>
<span class="3761800854751581723" onmouseenter="enter('3761800854751581723');" onmouseout="out('3761800854751581723');" style=""> 572             performConnected(builder.getTransaction());                                                  </span>
<span class="-757793854272623252" onmouseenter="enter('-757793854272623252');" onmouseout="out('-757793854272623252');" style=""> 573         }catch(Exception e){                                                                             </span>
<span  style=""> 574                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 575         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 576     }                                                                                                    </span>
<span  style=""> 577                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 578     @Override                                                                                            </span>
<span class="2383065190612615413" onmouseenter="enter('2383065190612615413');" onmouseout="out('2383065190612615413');" style=""> 579     public void onEnableRealtimeHeartRateMeasurement(boolean enable) {                                   </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 580         try {                                                                                            </span>
<span class="5747251758811020424" onmouseenter="enter('5747251758811020424');" onmouseout="out('5747251758811020424');" style=""> 581             TransactionBuilder builder = performInitialized(&quot;realTimeHeartMeasurement&quot;);                 </span>
<span class="-3134908621992881846" onmouseenter="enter('-3134908621992881846');" onmouseout="out('-3134908621992881846');" style=""> 582             byte state;                                                                                  </span>
<span  style=""> 583                                                                                                          </span>
<span class="-2063204857297382402" onmouseenter="enter('-2063204857297382402');" onmouseout="out('-2063204857297382402');" style=""> 584             if (enable)                                                                                  </span>
<span class="4459610917207481324" onmouseenter="enter('4459610917207481324');" onmouseout="out('4459610917207481324');" style=""> 585                 state = HPlusConstants.ARG_HEARTRATE_ALLDAY_ON;                                          </span>
<span class="-7436048164614400339" onmouseenter="enter('-7436048164614400339');" onmouseout="out('-7436048164614400339');" style=""> 586             else                                                                                         </span>
<span class="237470636204788169" onmouseenter="enter('237470636204788169');" onmouseout="out('237470636204788169');" style=""> 587                 state = HPlusConstants.ARG_HEARTRATE_ALLDAY_OFF;                                         </span>
<span  style=""> 588                                                                                                          </span>
<span class="-8856770227184248316" onmouseenter="enter('-8856770227184248316');" onmouseout="out('-8856770227184248316');" style=""> 589             builder.write(ctrlCharacteristic, new byte[]{HPlusConstants.CMD_SET_ALLDAY_HRM, state});     </span>
<span class="3761800854751581723" onmouseenter="enter('3761800854751581723');" onmouseout="out('3761800854751581723');" style=""> 590             performConnected(builder.getTransaction());                                                  </span>
<span class="-757793854272623252" onmouseenter="enter('-757793854272623252');" onmouseout="out('-757793854272623252');" style=""> 591         }catch(Exception e){                                                                             </span>
<span  style=""> 592                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 593         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 594     }                                                                                                    </span>
<span  style=""> 595                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 596     @Override                                                                                            </span>
<span class="-3287587973518064190" onmouseenter="enter('-3287587973518064190');" onmouseout="out('-3287587973518064190');" style=""> 597     public void onFindDevice(boolean start) {                                                            </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 598         try {                                                                                            </span>
<span class="175553782406953484" onmouseenter="enter('175553782406953484');" onmouseout="out('175553782406953484');" style=""> 599             TransactionBuilder builder = performInitialized(&quot;findMe&quot;);                                   </span>
<span  style=""> 600                                                                                                          </span>
<span class="3618522043245605826" onmouseenter="enter('3618522043245605826');" onmouseout="out('3618522043245605826');" style=""> 601             setFindMe(builder, start);                                                                   </span>
<span class="3761800854751581723" onmouseenter="enter('3761800854751581723');" onmouseout="out('3761800854751581723');" style=""> 602             performConnected(builder.getTransaction());                                                  </span>
<span class="7080241092423381085" onmouseenter="enter('7080241092423381085');" onmouseout="out('7080241092423381085');" style=""> 603         } catch (IOException e) {                                                                        </span>
<span class="6289081880581889152" onmouseenter="enter('6289081880581889152');" onmouseout="out('6289081880581889152');" style=""><abbr title=" 604             GB.toast(getContext(), &quot;Error toggling Find Me: &quot; + e.getLocalizedMessage(), Toast.LENGTH_LONG, GB.ERROR);"> 604             GB.toast(getContext(), &quot;Error toggling Find Me: &quot; + e.getLocalizedMessage(), Toast.LENGTH_LONðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 605         }                                                                                                </span>
<span  style=""> 606                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 607     }                                                                                                    </span>
<span  style=""> 608                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 609     @Override                                                                                            </span>
<span class="6065808185552597400" onmouseenter="enter('6065808185552597400');" onmouseout="out('6065808185552597400');" style=""> 610     public void onSetConstantVibration(int intensity) {                                                  </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 611         try {                                                                                            </span>
<span class="-1189139726584538540" onmouseenter="enter('-1189139726584538540');" onmouseout="out('-1189139726584538540');" style=""> 612             TransactionBuilder builder = performInitialized(&quot;vibration&quot;);                                </span>
<span  style=""> 613                                                                                                          </span>
<span class="3266802087250163024" onmouseenter="enter('3266802087250163024');" onmouseout="out('3266802087250163024');" style=""> 614             byte[] msg = new byte[15];                                                                   </span>
<span class="6154219539807733297" onmouseenter="enter('6154219539807733297');" onmouseout="out('6154219539807733297');" style=""> 615             msg[0] = HPlusConstants.CMD_SET_INCOMING_CALL_NUMBER;                                        </span>
<span  style=""> 616                                                                                                          </span>
<span class="-3757743872034498506" onmouseenter="enter('-3757743872034498506');" onmouseout="out('-3757743872034498506');" style=""> 617             for (int i = 0; i &lt; msg.length - 1; i++)                                                     </span>
<span class="-6825376348023798015" onmouseenter="enter('-6825376348023798015');" onmouseout="out('-6825376348023798015');" style=""> 618                 msg[i + 1] = (byte) &quot;GadgetBridge&quot;.charAt(i);                                            </span>
<span  style=""> 619                                                                                                          </span>
<span class="-6541237243628611070" onmouseenter="enter('-6541237243628611070');" onmouseout="out('-6541237243628611070');" style=""> 620             builder.write(ctrlCharacteristic, msg);                                                      </span>
<span class="3761800854751581723" onmouseenter="enter('3761800854751581723');" onmouseout="out('3761800854751581723');" style=""> 621             performConnected(builder.getTransaction());                                                  </span>
<span class="7080241092423381085" onmouseenter="enter('7080241092423381085');" onmouseout="out('7080241092423381085');" style=""> 622         } catch (IOException e) {                                                                        </span>
<span class="-8668891040554562167" onmouseenter="enter('-8668891040554562167');" onmouseout="out('-8668891040554562167');" style=""><abbr title=" 623             GB.toast(getContext(), &quot;Error setting Vibration: &quot; + e.getLocalizedMessage(), Toast.LENGTH_LONG, GB.ERROR);"> 623             GB.toast(getContext(), &quot;Error setting Vibration: &quot; + e.getLocalizedMessage(), Toast.LENGTH_LOðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 624         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 625     }                                                                                                    </span>
<span  style=""> 626                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 627     @Override                                                                                            </span>
<span class="-3293819866797459784" onmouseenter="enter('-3293819866797459784');" onmouseout="out('-3293819866797459784');" style=""> 628     public void onScreenshotReq() {                                                                      </span>
<span  style=""> 629                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 630     }                                                                                                    </span>
<span  style=""> 631                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 632     @Override                                                                                            </span>
<span class="-2597044235576493624" onmouseenter="enter('-2597044235576493624');" onmouseout="out('-2597044235576493624');" style=""> 633     public void onEnableHeartRateSleepSupport(boolean enable) {                                          </span>
<span class="7623304499723183910" onmouseenter="enter('7623304499723183910');" onmouseout="out('7623304499723183910');" style=""> 634         onEnableRealtimeHeartRateMeasurement(enable);                                                    </span>
<span  style=""> 635                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 636     }                                                                                                    </span>
<span  style=""> 637                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 638     @Override                                                                                            </span>
<span class="-7200644583722212481" onmouseenter="enter('-7200644583722212481');" onmouseout="out('-7200644583722212481');" style=""> 639     public void onAddCalendarEvent(CalendarEventSpec calendarEventSpec) {                                </span>
<span  style=""> 640                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 641     }                                                                                                    </span>
<span  style=""> 642                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 643     @Override                                                                                            </span>
<span class="2890386202777848228" onmouseenter="enter('2890386202777848228');" onmouseout="out('2890386202777848228');" style=""> 644     public void onDeleteCalendarEvent(byte type, long id) {                                              </span>
<span  style=""> 645                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 646     }                                                                                                    </span>
<span  style=""> 647                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 648     @Override                                                                                            </span>
<span class="349159621018699769" onmouseenter="enter('349159621018699769');" onmouseout="out('349159621018699769');" style=""> 649     public void onSendConfiguration(String config) {                                                     </span>
<span class="-7846666641684196127" onmouseenter="enter('-7846666641684196127');" onmouseout="out('-7846666641684196127');" style=""> 650         LOG.info(&quot;Send Configuration: &quot; + config);                                                       </span>
<span  style=""> 651                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 652     }                                                                                                    </span>
<span  style=""> 653                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 654     @Override                                                                                            </span>
<span class="-1180224994468071186" onmouseenter="enter('-1180224994468071186');" onmouseout="out('-1180224994468071186');" style=""> 655     public void onTestNewFunction() {                                                                    </span>
<span class="5914733006117960203" onmouseenter="enter('5914733006117960203');" onmouseout="out('5914733006117960203');" style=""> 656         LOG.info(&quot;Test New Function&quot;);                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 657     }                                                                                                    </span>
<span  style=""> 658                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 659     @Override                                                                                            </span>
<span class="-6167041048283935417" onmouseenter="enter('-6167041048283935417');" onmouseout="out('-6167041048283935417');" style=""> 660     public void onSendWeather(WeatherSpec weatherSpec) {                                                 </span>
<span  style=""> 661                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 662     }                                                                                                    </span>
<span  style=""> 663                                                                                                          </span>
<span class="5880921854020880068" onmouseenter="enter('5880921854020880068');" onmouseout="out('5880921854020880068');" style=""> 664     public void setUnicodeSupport(boolean support){                                                      </span>
<span class="6042074506485087881" onmouseenter="enter('6042074506485087881');" onmouseout="out('6042074506485087881');" style=""> 665         HPlusCoordinator.setUnicodeSupport(gbDevice.getAddress(), support);                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 666     }                                                                                                    </span>
<span  style=""> 667                                                                                                          </span>
<span  style=""> 668                                                                                                          </span>
<span class="-4706054677770626804" onmouseenter="enter('-4706054677770626804');" onmouseout="out('-4706054677770626804');" style=""> 669     private void showIncomingCall(String name, String rawNumber) {                                       </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 670         try {                                                                                            </span>
<span  style=""> 671                                                                                                          </span>
<span class="-8981057032029232134" onmouseenter="enter('-8981057032029232134');" onmouseout="out('-8981057032029232134');" style=""> 672             TransactionBuilder builder = performInitialized(&quot;incomingCall&quot;);                             </span>
<span  style=""> 673                                                                                                          </span>
<span class="-470559072641579707" onmouseenter="enter('-470559072641579707');" onmouseout="out('-470559072641579707');" style=""> 674             //Enable call notifications                                                                  </span>
<span class="-2018055458770536330" onmouseenter="enter('-2018055458770536330');" onmouseout="out('-2018055458770536330');" style=""> 675             builder.write(ctrlCharacteristic, new byte[]{HPlusConstants.CMD_ACTION_INCOMING_CALL, 1});   </span>
<span  style=""> 676                                                                                                          </span>
<span class="2257971100060063202" onmouseenter="enter('2257971100060063202');" onmouseout="out('2257971100060063202');" style=""> 677             //Show Call Icon                                                                             </span>
<span class="431202743276395661" onmouseenter="enter('431202743276395661');" onmouseout="out('431202743276395661');" style=""><abbr title=" 678             builder.write(ctrlCharacteristic, new byte[]{HPlusConstants.CMD_SET_INCOMING_CALL, HPlusConstants.ARG_INCOMING_CALL});"> 678             builder.write(ctrlCharacteristic, new byte[]{HPlusConstants.CMD_SET_INCOMING_CALL, HPlusConstðŸ”µ</abbr></span>
<span  style=""> 679                                                                                                          </span>
<span class="2424056063165640280" onmouseenter="enter('2424056063165640280');" onmouseout="out('2424056063165640280');" style=""> 680             if(name != null) {                                                                           </span>
<span class="-1463217213013643309" onmouseenter="enter('-1463217213013643309');" onmouseout="out('-1463217213013643309');" style=""> 681             byte[] msg = new byte[13];                                                                   </span>
<span  style=""> 682                                                                                                          </span>
<span class="4148550063034252717" onmouseenter="enter('4148550063034252717');" onmouseout="out('4148550063034252717');" style=""> 683             //Show call name                                                                             </span>
<span class="-7993208990588136145" onmouseenter="enter('-7993208990588136145');" onmouseout="out('-7993208990588136145');" style=""> 684             for (int i = 0; i &lt; msg.length; i++)                                                         </span>
<span class="-452829507499965658" onmouseenter="enter('-452829507499965658');" onmouseout="out('-452829507499965658');" style=""> 685                 msg[i] = &#x27; &#x27;;                                                                            </span>
<span  style=""> 686                                                                                                          </span>
<span class="3205766085188191830" onmouseenter="enter('3205766085188191830');" onmouseout="out('3205766085188191830');" style=""> 687             byte[] nameBytes = encodeStringToDevice(name);                                               </span>
<span class="-783531191089635895" onmouseenter="enter('-783531191089635895');" onmouseout="out('-783531191089635895');" style=""> 688             for (int i = 0; i &lt; nameBytes.length &amp;&amp; i &lt; (msg.length - 1); i++)                           </span>
<span class="6765965112598420400" onmouseenter="enter('6765965112598420400');" onmouseout="out('6765965112598420400');" style=""> 689                 msg[i + 1] = nameBytes[i];                                                               </span>
<span  style=""> 690                                                                                                          </span>
<span class="-8475803122541257030" onmouseenter="enter('-8475803122541257030');" onmouseout="out('-8475803122541257030');" style=""> 691             msg[0] = HPlusConstants.CMD_ACTION_DISPLAY_TEXT_NAME;                                        </span>
<span class="-6541237243628611070" onmouseenter="enter('-6541237243628611070');" onmouseout="out('-6541237243628611070');" style=""> 692             builder.write(ctrlCharacteristic, msg);                                                      </span>
<span  style=""> 693                                                                                                          </span>
<span class="-2032388462516825457" onmouseenter="enter('-2032388462516825457');" onmouseout="out('-2032388462516825457');" style=""> 694             msg[0] = HPlusConstants.CMD_ACTION_DISPLAY_TEXT_NAME_CN;                                     </span>
<span class="-6541237243628611070" onmouseenter="enter('-6541237243628611070');" onmouseout="out('-6541237243628611070');" style=""> 695             builder.write(ctrlCharacteristic, msg);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 696             }                                                                                            </span>
<span  style=""> 697                                                                                                          </span>
<span class="-6077600590360942190" onmouseenter="enter('-6077600590360942190');" onmouseout="out('-6077600590360942190');" style=""> 698             if(rawNumber != null) {                                                                      </span>
<span class="3592618537022379156" onmouseenter="enter('3592618537022379156');" onmouseout="out('3592618537022379156');" style=""> 699                 StringBuilder number = new StringBuilder();                                              </span>
<span  style=""> 700                                                                                                          </span>
<span class="8350107368880842067" onmouseenter="enter('8350107368880842067');" onmouseout="out('8350107368880842067');" style=""> 701                 //Clean up number as the device only accepts digits                                      </span>
<span class="9010108090093925813" onmouseenter="enter('9010108090093925813');" onmouseout="out('9010108090093925813');" style=""> 702                 for (char c : rawNumber.toCharArray()) {                                                 </span>
<span class="-3606938168735497741" onmouseenter="enter('-3606938168735497741');" onmouseout="out('-3606938168735497741');" style=""> 703                     if (Character.isDigit(c)) {                                                          </span>
<span class="-1236668618857566487" onmouseenter="enter('-1236668618857566487');" onmouseout="out('-1236668618857566487');" style=""> 704                         number.append(c);                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 705                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 706                 }                                                                                        </span>
<span  style=""> 707                                                                                                          </span>
<span class="-1463217213013643309" onmouseenter="enter('-1463217213013643309');" onmouseout="out('-1463217213013643309');" style=""> 708                 byte[] msg = new byte[13];                                                               </span>
<span  style=""> 709                                                                                                          </span>
<span class="7410242265141315458" onmouseenter="enter('7410242265141315458');" onmouseout="out('7410242265141315458');" style=""> 710             //Show call number                                                                           </span>
<span class="-7993208990588136145" onmouseenter="enter('-7993208990588136145');" onmouseout="out('-7993208990588136145');" style=""> 711             for (int i = 0; i &lt; msg.length; i++)                                                         </span>
<span class="-452829507499965658" onmouseenter="enter('-452829507499965658');" onmouseout="out('-452829507499965658');" style=""> 712                 msg[i] = &#x27; &#x27;;                                                                            </span>
<span  style=""> 713                                                                                                          </span>
<span class="-3492043630386970598" onmouseenter="enter('-3492043630386970598');" onmouseout="out('-3492043630386970598');" style=""> 714             for (int i = 0; i &lt; number.length() &amp;&amp; i &lt; (msg.length - 1); i++)                            </span>
<span class="1716636883153338951" onmouseenter="enter('1716636883153338951');" onmouseout="out('1716636883153338951');" style=""> 715                 msg[i + 1] = (byte) number.charAt(i);                                                    </span>
<span  style=""> 716                                                                                                          </span>
<span class="6154219539807733297" onmouseenter="enter('6154219539807733297');" onmouseout="out('6154219539807733297');" style=""> 717             msg[0] = HPlusConstants.CMD_SET_INCOMING_CALL_NUMBER;                                        </span>
<span  style=""> 718                                                                                                          </span>
<span class="2195247688369690659" onmouseenter="enter('2195247688369690659');" onmouseout="out('2195247688369690659');" style=""> 719                 builder.wait(200);                                                                       </span>
<span class="-6541237243628611070" onmouseenter="enter('-6541237243628611070');" onmouseout="out('-6541237243628611070');" style=""> 720             builder.write(ctrlCharacteristic, msg);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 721             }                                                                                            </span>
<span  style=""> 722                                                                                                          </span>
<span class="3761800854751581723" onmouseenter="enter('3761800854751581723');" onmouseout="out('3761800854751581723');" style=""> 723             performConnected(builder.getTransaction());                                                  </span>
<span class="7080241092423381085" onmouseenter="enter('7080241092423381085');" onmouseout="out('7080241092423381085');" style=""> 724         } catch (IOException e) {                                                                        </span>
<span class="5607211826758247973" onmouseenter="enter('5607211826758247973');" onmouseout="out('5607211826758247973');" style=""><abbr title=" 725             GB.toast(getContext(), &quot;Error showing incoming call: &quot; + e.getLocalizedMessage(), Toast.LENGTH_LONG, GB.ERROR);"> 725             GB.toast(getContext(), &quot;Error showing incoming call: &quot; + e.getLocalizedMessage(), Toast.LENGTðŸ”µ</abbr></span>
<span  style=""> 726                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 727         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 728     }                                                                                                    </span>
<span  style=""> 729                                                                                                          </span>
<span class="2669430369160917091" onmouseenter="enter('2669430369160917091');" onmouseout="out('2669430369160917091');" style=""> 730     private void showText(String title, String body) {                                                   </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 731         try {                                                                                            </span>
<span class="8575811470010308677" onmouseenter="enter('8575811470010308677');" onmouseout="out('8575811470010308677');" style=""> 732             TransactionBuilder builder = performInitialized(&quot;notification&quot;);                             </span>
<span  style=""> 733                                                                                                          </span>
<span class="-5183659842430019699" onmouseenter="enter('-5183659842430019699');" onmouseout="out('-5183659842430019699');" style=""> 734             String message = &quot;&quot;;                                                                         </span>
<span  style=""> 735                                                                                                          </span>
<span class="4468139034893619423" onmouseenter="enter('4468139034893619423');" onmouseout="out('4468139034893619423');" style=""> 736             if (title != null &amp;&amp; title.length() &gt; 0) {                                                   </span>
<span class="7795018544496104410" onmouseenter="enter('7795018544496104410');" onmouseout="out('7795018544496104410');" style=""> 737                 message = StringUtils.pad(StringUtils.truncate(title, 16), 16); //Limit title to top row </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 738             }                                                                                            </span>
<span  style=""> 739                                                                                                          </span>
<span class="4413763009831532288" onmouseenter="enter('4413763009831532288');" onmouseout="out('4413763009831532288');" style=""> 740             if (body != null) {                                                                          </span>
<span class="-4827052322101785234" onmouseenter="enter('-4827052322101785234');" onmouseout="out('-4827052322101785234');" style=""> 741                 message += body;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 742             }                                                                                            </span>
<span  style=""> 743                                                                                                          </span>
<span class="-7267330840062528164" onmouseenter="enter('-7267330840062528164');" onmouseout="out('-7267330840062528164');" style=""> 744             byte[] messageBytes = encodeStringToDevice(message);                                         </span>
<span  style=""> 745                                                                                                          </span>
<span class="-6947936872233705603" onmouseenter="enter('-6947936872233705603');" onmouseout="out('-6947936872233705603');" style=""> 746             int length = messageBytes.length / 17;                                                       </span>
<span  style=""> 747                                                                                                          </span>
<span class="7436007129343658037" onmouseenter="enter('7436007129343658037');" onmouseout="out('7436007129343658037');" style=""> 748             length = length &gt; 5 ? 5 : length;                                                            </span>
<span  style=""> 749                                                                                                          </span>
<span class="-2276016464983488813" onmouseenter="enter('-2276016464983488813');" onmouseout="out('-2276016464983488813');" style=""><abbr title=" 750             builder.write(ctrlCharacteristic, new byte[]{HPlusConstants.CMD_SET_INCOMING_MESSAGE, HPlusConstants.ARG_INCOMING_MESSAGE});"> 750             builder.write(ctrlCharacteristic, new byte[]{HPlusConstants.CMD_SET_INCOMING_MESSAGE, HPlusCoðŸ”µ</abbr></span>
<span  style=""> 751                                                                                                          </span>
<span class="8693578117273483378" onmouseenter="enter('8693578117273483378');" onmouseout="out('8693578117273483378');" style=""> 752             int remaining = Math.min(255, (messageBytes.length % 17 &gt; 0) ? length + 1 : length);         </span>
<span  style=""> 753                                                                                                          </span>
<span class="-6938126668542148541" onmouseenter="enter('-6938126668542148541');" onmouseout="out('-6938126668542148541');" style=""> 754             byte[] msg = new byte[20];                                                                   </span>
<span class="6283182582673736786" onmouseenter="enter('6283182582673736786');" onmouseout="out('6283182582673736786');" style=""> 755             msg[0] = HPlusConstants.CMD_ACTION_DISPLAY_TEXT;                                             </span>
<span class="2374339912776851777" onmouseenter="enter('2374339912776851777');" onmouseout="out('2374339912776851777');" style=""> 756             msg[1] = (byte) remaining;                                                                   </span>
<span  style=""> 757                                                                                                          </span>
<span class="7174897306012108535" onmouseenter="enter('7174897306012108535');" onmouseout="out('7174897306012108535');" style=""> 758             for (int i = 2; i &lt; msg.length; i++)                                                         </span>
<span class="-452829507499965658" onmouseenter="enter('-452829507499965658');" onmouseout="out('-452829507499965658');" style=""> 759                 msg[i] = &#x27; &#x27;;                                                                            </span>
<span  style=""> 760                                                                                                          </span>
<span class="3830575522721686257" onmouseenter="enter('3830575522721686257');" onmouseout="out('3830575522721686257');" style=""> 761             int message_index = 0;                                                                       </span>
<span class="-2034332425768882561" onmouseenter="enter('-2034332425768882561');" onmouseout="out('-2034332425768882561');" style=""> 762             int i = 3;                                                                                   </span>
<span  style=""> 763                                                                                                          </span>
<span class="-1190413858175663168" onmouseenter="enter('-1190413858175663168');" onmouseout="out('-1190413858175663168');" style=""> 764             for (int j = 0; j &lt; messageBytes.length; j++) {                                              </span>
<span class="7313274589245642051" onmouseenter="enter('7313274589245642051');" onmouseout="out('7313274589245642051');" style=""> 765                 msg[i++] = messageBytes[j];                                                              </span>
<span  style=""> 766                                                                                                          </span>
<span class="2532902930176219444" onmouseenter="enter('2532902930176219444');" onmouseout="out('2532902930176219444');" style=""> 767                 if (i == msg.length) {                                                                   </span>
<span class="3910183690266069869" onmouseenter="enter('3910183690266069869');" onmouseout="out('3910183690266069869');" style=""> 768                     message_index++;                                                                     </span>
<span class="245661942964386200" onmouseenter="enter('245661942964386200');" onmouseout="out('245661942964386200');" style=""> 769                     msg[2] = (byte) message_index;                                                       </span>
<span class="-6541237243628611070" onmouseenter="enter('-6541237243628611070');" onmouseout="out('-6541237243628611070');" style=""> 770                     builder.write(ctrlCharacteristic, msg);                                              </span>
<span  style=""> 771                                                                                                          </span>
<span class="-2713623245355191357" onmouseenter="enter('-2713623245355191357');" onmouseout="out('-2713623245355191357');" style=""> 772                     msg = msg.clone();                                                                   </span>
<span class="-167106871940501653" onmouseenter="enter('-167106871940501653');" onmouseout="out('-167106871940501653');" style=""> 773                     for (i = 3; i &lt; msg.length; i++)                                                     </span>
<span class="-452829507499965658" onmouseenter="enter('-452829507499965658');" onmouseout="out('-452829507499965658');" style=""> 774                         msg[i] = &#x27; &#x27;;                                                                    </span>
<span  style=""> 775                                                                                                          </span>
<span class="6801923363408854922" onmouseenter="enter('6801923363408854922');" onmouseout="out('6801923363408854922');" style=""> 776                     if (message_index &lt; remaining)                                                       </span>
<span class="-1159031305874409210" onmouseenter="enter('-1159031305874409210');" onmouseout="out('-1159031305874409210');" style=""> 777                         i = 3;                                                                           </span>
<span class="-7436048164614400339" onmouseenter="enter('-7436048164614400339');" onmouseout="out('-7436048164614400339');" style=""> 778                     else                                                                                 </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 779                         break;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 780                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 781             }                                                                                            </span>
<span  style=""> 782                                                                                                          </span>
<span class="-4555485809374867291" onmouseenter="enter('-4555485809374867291');" onmouseout="out('-4555485809374867291');" style=""> 783             msg[2] = (byte) remaining;                                                                   </span>
<span  style=""> 784                                                                                                          </span>
<span class="-6541237243628611070" onmouseenter="enter('-6541237243628611070');" onmouseout="out('-6541237243628611070');" style=""> 785             builder.write(ctrlCharacteristic, msg);                                                      </span>
<span class="3761800854751581723" onmouseenter="enter('3761800854751581723');" onmouseout="out('3761800854751581723');" style=""> 786             performConnected(builder.getTransaction());                                                  </span>
<span class="7080241092423381085" onmouseenter="enter('7080241092423381085');" onmouseout="out('7080241092423381085');" style=""> 787         } catch (IOException e) {                                                                        </span>
<span class="-3005578110211581534" onmouseenter="enter('-3005578110211581534');" onmouseout="out('-3005578110211581534');" style=""><abbr title=" 788             GB.toast(getContext(), &quot;Error showing device Notification: &quot; + e.getLocalizedMessage(), Toast.LENGTH_LONG, GB.ERROR);"> 788             GB.toast(getContext(), &quot;Error showing device Notification: &quot; + e.getLocalizedMessage(), ToastðŸ”µ</abbr></span>
<span  style=""> 789                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 790         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 791     }                                                                                                    </span>
<span  style=""> 792                                                                                                          </span>
<span class="2374016947018039193" onmouseenter="enter('2374016947018039193');" onmouseout="out('2374016947018039193');" style=""> 793     private void close() {                                                                               </span>
<span class="-7083324746063369835" onmouseenter="enter('-7083324746063369835');" onmouseout="out('-7083324746063369835');" style=""> 794         if (syncHelper != null) {                                                                        </span>
<span class="-7896063751358438536" onmouseenter="enter('-7896063751358438536');" onmouseout="out('-7896063751358438536');" style=""> 795             syncHelper.quit();                                                                           </span>
<span class="-2471739938777085601" onmouseenter="enter('-2471739938777085601');" onmouseout="out('-2471739938777085601');" style=""> 796             syncHelper.interrupt();                                                                      </span>
<span class="-9199515530023964212" onmouseenter="enter('-9199515530023964212');" onmouseout="out('-9199515530023964212');" style=""> 797             syncHelper = null;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 798         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 799     }                                                                                                    </span>
<span  style=""> 800                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 801     /**                                                                                                  </span>
<span class="-2663499463451487171" onmouseenter="enter('-2663499463451487171');" onmouseout="out('-2663499463451487171');" style=""> 802      * HPlus devices accept a subset of GB2312 with some modifications.                                  </span>
<span class="-5296208177179093503" onmouseenter="enter('-5296208177179093503');" onmouseout="out('-5296208177179093503');" style=""> 803      * This function will apply a custom transliteration.                                                </span>
<span class="-3958616819795834315" onmouseenter="enter('-3958616819795834315');" onmouseout="out('-3958616819795834315');" style=""> 804      * While related to the methods implemented in LanguageUtils. These are specific for HPLUS           </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 805      *                                                                                                   </span>
<span class="-1743400565649069450" onmouseenter="enter('-1743400565649069450');" onmouseout="out('-1743400565649069450');" style=""> 806      * @param s The String to transliterate                                                              </span>
<span class="2025757942853076636" onmouseenter="enter('2025757942853076636');" onmouseout="out('2025757942853076636');" style=""> 807      * @return An array of bytes ready to be sent to the device                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 808      */                                                                                                  </span>
<span class="-8823649745364399870" onmouseenter="enter('-8823649745364399870');" onmouseout="out('-8823649745364399870');" style=""> 809     private byte[] encodeStringToDevice(String s) {                                                      </span>
<span  style=""> 810                                                                                                          </span>
<span class="9112578812581115095" onmouseenter="enter('9112578812581115095');" onmouseout="out('9112578812581115095');" style=""> 811         List&lt;Byte&gt; outBytes = new ArrayList&lt;Byte&gt;();                                                     </span>
<span  style=""> 812                                                                                                          </span>
<span class="-2173296205160994735" onmouseenter="enter('-2173296205160994735');" onmouseout="out('-2173296205160994735');" style=""> 813         for (int i = 0; i &lt; s.length(); i++) {                                                           </span>
<span class="-425988238491649263" onmouseenter="enter('-425988238491649263');" onmouseout="out('-425988238491649263');" style=""> 814             Character c = s.charAt(i);                                                                   </span>
<span class="-6710548613110177700" onmouseenter="enter('-6710548613110177700');" onmouseout="out('-6710548613110177700');" style=""> 815             byte[] cs;                                                                                   </span>
<span  style=""> 816                                                                                                          </span>
<span class="-7646558473377848105" onmouseenter="enter('-7646558473377848105');" onmouseout="out('-7646558473377848105');" style=""> 817             if (HPlusConstants.transliterateMap.containsKey(c)) {                                        </span>
<span class="-6827180778581783411" onmouseenter="enter('-6827180778581783411');" onmouseout="out('-6827180778581783411');" style=""> 818                 cs = HPlusConstants.transliterateMap.get(c);                                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 819             } else {                                                                                     </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 820                 try {                                                                                    </span>
<span class="-3264772470522099445" onmouseenter="enter('-3264772470522099445');" onmouseout="out('-3264772470522099445');" style=""> 821                     if(HPlusCoordinator.getUnicodeSupport(this.gbDevice.getAddress()))                   </span>
<span class="4466778639974351027" onmouseenter="enter('4466778639974351027');" onmouseout="out('4466778639974351027');" style=""> 822                         cs = c.toString().getBytes(&quot;Unicode&quot;);                                           </span>
<span class="-7436048164614400339" onmouseenter="enter('-7436048164614400339');" onmouseout="out('-7436048164614400339');" style=""> 823                     else                                                                                 </span>
<span class="637174697753777176" onmouseenter="enter('637174697753777176');" onmouseout="out('637174697753777176');" style=""> 824                         cs = c.toString().getBytes(&quot;GB2312&quot;);                                            </span>
<span class="2368993151256970390" onmouseenter="enter('2368993151256970390');" onmouseout="out('2368993151256970390');" style=""> 825                 } catch (UnsupportedEncodingException e) {                                               </span>
<span class="-3354683485831733476" onmouseenter="enter('-3354683485831733476');" onmouseout="out('-3354683485831733476');" style=""> 826                     //Fallback. Result string may be strange, but better than nothing                    </span>
<span class="8503633407937514815" onmouseenter="enter('8503633407937514815');" onmouseout="out('8503633407937514815');" style=""> 827                     cs = c.toString().getBytes();                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 828                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 829             }                                                                                            </span>
<span class="-6641336920880003910" onmouseenter="enter('-6641336920880003910');" onmouseout="out('-6641336920880003910');" style=""> 830             for (int j = 0; j &lt; cs.length; j++)                                                          </span>
<span class="-3202096665861785787" onmouseenter="enter('-3202096665861785787');" onmouseout="out('-3202096665861785787');" style=""> 831                 outBytes.add(cs[j]);                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 832         }                                                                                                </span>
<span  style=""> 833                                                                                                          </span>
<span class="-3374475540404730530" onmouseenter="enter('-3374475540404730530');" onmouseout="out('-3374475540404730530');" style=""> 834         return ArrayUtils.toPrimitive(outBytes.toArray(new Byte[outBytes.size()]));                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 835     }                                                                                                    </span>
<span  style=""> 836                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 837     @Override                                                                                            </span>
<span class="5766835775206074860" onmouseenter="enter('5766835775206074860');" onmouseout="out('5766835775206074860');" style=""> 838     public boolean onCharacteristicChanged(BluetoothGatt gatt,                                           </span>
<span class="-4605279869462858246" onmouseenter="enter('-4605279869462858246');" onmouseout="out('-4605279869462858246');" style=""> 839                                            BluetoothGattCharacteristic characteristic) {                 </span>
<span class="3568353468682512593" onmouseenter="enter('3568353468682512593');" onmouseout="out('3568353468682512593');" style=""> 840         if (super.onCharacteristicChanged(gatt, characteristic)) {                                       </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 841             return true;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 842         }                                                                                                </span>
<span  style=""> 843                                                                                                          </span>
<span class="-554497628129246365" onmouseenter="enter('-554497628129246365');" onmouseout="out('-554497628129246365');" style=""> 844         UUID characteristicUUID = characteristic.getUuid();                                              </span>
<span class="-6511473927788972997" onmouseenter="enter('-6511473927788972997');" onmouseout="out('-6511473927788972997');" style=""> 845         byte[] data = characteristic.getValue();                                                         </span>
<span class="-9068394225512782226" onmouseenter="enter('-9068394225512782226');" onmouseout="out('-9068394225512782226');" style=""> 846         if (data.length == 0)                                                                            </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 847             return true;                                                                                 </span>
<span  style=""> 848                                                                                                          </span>
<span class="-6174724810667438225" onmouseenter="enter('-6174724810667438225');" onmouseout="out('-6174724810667438225');" style=""> 849         switch (data[0]) {                                                                               </span>
<span class="-7471367524105316507" onmouseenter="enter('-7471367524105316507');" onmouseout="out('-7471367524105316507');" style=""> 850             case HPlusConstants.DATA_VERSION:                                                            </span>
<span class="5912373299298352154" onmouseenter="enter('5912373299298352154');" onmouseout="out('5912373299298352154');" style=""> 851             case HPlusConstants.DATA_VERSION1:                                                           </span>
<span class="834208567599674439" onmouseenter="enter('834208567599674439');" onmouseout="out('834208567599674439');" style=""> 852                 return syncHelper.processVersion(data);                                                  </span>
<span  style=""> 853                                                                                                          </span>
<span class="1169399726781128730" onmouseenter="enter('1169399726781128730');" onmouseout="out('1169399726781128730');" style=""> 854             case HPlusConstants.DATA_STATS:                                                              </span>
<span class="6350511806657397549" onmouseenter="enter('6350511806657397549');" onmouseout="out('6350511806657397549');" style=""> 855                 boolean result = syncHelper.processRealtimeStats(data, HPlusCoordinator.getUserAge());   </span>
<span class="-275963108691733288" onmouseenter="enter('-275963108691733288');" onmouseout="out('-275963108691733288');" style=""> 856                 if (result) {                                                                            </span>
<span class="8166670735037070350" onmouseenter="enter('8166670735037070350');" onmouseout="out('8166670735037070350');" style=""> 857                     processExtraInfo (data);                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 858                 }                                                                                        </span>
<span class="-6419540350677864751" onmouseenter="enter('-6419540350677864751');" onmouseout="out('-6419540350677864751');" style=""> 859                 return result;                                                                           </span>
<span  style=""> 860                                                                                                          </span>
<span class="-4210542885090051053" onmouseenter="enter('-4210542885090051053');" onmouseout="out('-4210542885090051053');" style=""> 861             case HPlusConstants.DATA_SLEEP:                                                              </span>
<span class="518826808593425602" onmouseenter="enter('518826808593425602');" onmouseout="out('518826808593425602');" style=""> 862                 return syncHelper.processIncomingSleepData(data);                                        </span>
<span  style=""> 863                                                                                                          </span>
<span class="-1422636218963608963" onmouseenter="enter('-1422636218963608963');" onmouseout="out('-1422636218963608963');" style=""> 864             case HPlusConstants.DATA_STEPS:                                                              </span>
<span class="8674745804491038360" onmouseenter="enter('8674745804491038360');" onmouseout="out('8674745804491038360');" style=""> 865                 return syncHelper.processDaySummary(data);                                               </span>
<span  style=""> 866                                                                                                          </span>
<span class="-5989439275286926467" onmouseenter="enter('-5989439275286926467');" onmouseout="out('-5989439275286926467');" style=""> 867             case HPlusConstants.DATA_DAY_SUMMARY:                                                        </span>
<span class="7331785174258232326" onmouseenter="enter('7331785174258232326');" onmouseout="out('7331785174258232326');" style=""> 868             case HPlusConstants.DATA_DAY_SUMMARY_ALT:                                                    </span>
<span class="3311111969863762619" onmouseenter="enter('3311111969863762619');" onmouseout="out('3311111969863762619');" style=""> 869                 return syncHelper.processIncomingDaySlotData(data, HPlusCoordinator.getUserAge());       </span>
<span class="2453515299835836072" onmouseenter="enter('2453515299835836072');" onmouseout="out('2453515299835836072');" style=""> 870             case HPlusConstants.DATA_UNKNOWN:                                                            </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 871                 return true;                                                                             </span>
<span class="-8178136317704390296" onmouseenter="enter('-8178136317704390296');" onmouseout="out('-8178136317704390296');" style=""> 872             default:                                                                                     </span>
<span  style=""> 873                                                                                                          </span>
<span class="2463317396092645965" onmouseenter="enter('2463317396092645965');" onmouseout="out('2463317396092645965');" style=""><abbr title=" 874                 LOG.info(&quot;Unhandled characteristic change: &quot; + characteristicUUID + &quot; code: &quot; + Arrays.toString(data));"> 874                 LOG.info(&quot;Unhandled characteristic change: &quot; + characteristicUUID + &quot; code: &quot; + Arrays.toðŸ”µ</abbr></span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 875                 return true;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 876         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 877     }                                                                                                    </span>
<span  style=""> 878                                                                                                          </span>
<span class="7849365739445821006" onmouseenter="enter('7849365739445821006');" onmouseout="out('7849365739445821006');" style=""> 879     private void  processExtraInfo (byte[] data) {                                                       </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 880         try {                                                                                            </span>
<span class="3335414119067454274" onmouseenter="enter('3335414119067454274');" onmouseout="out('3335414119067454274');" style=""><abbr title=" 881             HPlusDataRecordRealtime record = new HPlusDataRecordRealtime(data, HPlusCoordinator.getUserAge());"> 881             HPlusDataRecordRealtime record = new HPlusDataRecordRealtime(data, HPlusCoordinator.getUserAgðŸ”µ</abbr></span>
<span  style=""> 882                                                                                                          </span>
<span class="-6654310698308599937" onmouseenter="enter('-6654310698308599937');" onmouseout="out('-6654310698308599937');" style=""> 883             handleBatteryInfo(record.battery);                                                           </span>
<span  style=""> 884                                                                                                          </span>
<span class="957024650015159745" onmouseenter="enter('957024650015159745');" onmouseout="out('957024650015159745');" style=""> 885             String DEVINFO_STEP = getContext().getString(R.string.chart_steps) + &quot;: &quot;;                   </span>
<span class="6721786647083530834" onmouseenter="enter('6721786647083530834');" onmouseout="out('6721786647083530834');" style=""> 886             String DEVINFO_DISTANCE = getContext().getString(R.string.distance) + &quot;: &quot;;                  </span>
<span class="-5544509155513691581" onmouseenter="enter('-5544509155513691581');" onmouseout="out('-5544509155513691581');" style=""> 887             String DEVINFO_CALORY = getContext().getString(R.string.calories) + &quot;: &quot;;                    </span>
<span class="-1747100185926561303" onmouseenter="enter('-1747100185926561303');" onmouseout="out('-1747100185926561303');" style=""> 888             String DEVINFO_HEART = getContext().getString(R.string.charts_legend_heartrate);             </span>
<span  style=""> 889                                                                                                          </span>
<span class="4539674976293838945" onmouseenter="enter('4539674976293838945');" onmouseout="out('4539674976293838945');" style=""> 890             String info = &quot;&quot;;                                                                            </span>
<span class="603487404869738075" onmouseenter="enter('603487404869738075');" onmouseout="out('603487404869738075');" style=""> 891             if (record.steps &gt; 0) {                                                                      </span>
<span class="-2978506504361701541" onmouseenter="enter('-2978506504361701541');" onmouseout="out('-2978506504361701541');" style=""> 892                 info += DEVINFO_STEP + String.valueOf(record.steps) + &quot;   &quot;;                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 893             }                                                                                            </span>
<span class="-7382416609460855139" onmouseenter="enter('-7382416609460855139');" onmouseout="out('-7382416609460855139');" style=""> 894             if (record.distance &gt; 0) {                                                                   </span>
<span class="-2048257966317820482" onmouseenter="enter('-2048257966317820482');" onmouseout="out('-2048257966317820482');" style=""> 895                 info += DEVINFO_DISTANCE + String.valueOf(record.distance) + &quot;   &quot;;                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 896             }                                                                                            </span>
<span class="4712868732205106298" onmouseenter="enter('4712868732205106298');" onmouseout="out('4712868732205106298');" style=""> 897             if (record.calories &gt; 0) {                                                                   </span>
<span class="2384981866748506593" onmouseenter="enter('2384981866748506593');" onmouseout="out('2384981866748506593');" style=""> 898                 info += DEVINFO_CALORY + String.valueOf(record.calories) + &quot;   &quot;;                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 899             }                                                                                            </span>
<span class="6107108997806163588" onmouseenter="enter('6107108997806163588');" onmouseout="out('6107108997806163588');" style=""> 900             if (record.heartRate &gt; 0) {                                                                  </span>
<span class="-1812003693369079048" onmouseenter="enter('-1812003693369079048');" onmouseout="out('-1812003693369079048');" style=""> 901                 info += DEVINFO_HEART + String.valueOf(record.heartRate) + &quot;   &quot;;                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 902             }                                                                                            </span>
<span  style=""> 903                                                                                                          </span>
<span class="8504830605092703085" onmouseenter="enter('8504830605092703085');" onmouseout="out('8504830605092703085');" style=""> 904             if (!info.equals(&quot;&quot;)) {                                                                      </span>
<span class="6111723630993110344" onmouseenter="enter('6111723630993110344');" onmouseout="out('6111723630993110344');" style=""> 905                 getDevice().addDeviceInfo(new GenericItem(&quot;&quot;, info));                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 906             }                                                                                            </span>
<span class="-1471183022667940231" onmouseenter="enter('-1471183022667940231');" onmouseout="out('-1471183022667940231');" style=""> 907         } catch (IllegalArgumentException e) {                                                           </span>
<span class="6834133445830742921" onmouseenter="enter('6834133445830742921');" onmouseout="out('6834133445830742921');" style=""> 908             LOG.info((e.getMessage()));                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 909         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 910     }                                                                                                    </span>
<span  style=""> 911                                                                                                          </span>
<span class="4996395825247791604" onmouseenter="enter('4996395825247791604');" onmouseout="out('4996395825247791604');" style=""> 912     private void handleBatteryInfo(byte data) {                                                          </span>
<span class="-7378539640920011500" onmouseenter="enter('-7378539640920011500');" onmouseout="out('-7378539640920011500');" style=""> 913             if (batteryCmd.level != (short) data) {                                                      </span>
<span class="-854799830555733473" onmouseenter="enter('-854799830555733473');" onmouseout="out('-854799830555733473');" style=""> 914                 batteryCmd.level = (short) data;                                                         </span>
<span class="-2053668973544639303" onmouseenter="enter('-2053668973544639303');" onmouseout="out('-2053668973544639303');" style=""> 915                 handleGBDeviceEvent(batteryCmd);                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 916             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 917     }                                                                                                    </span>
<span  style=""> 918                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 919 }                                                                                                        </span>














































</pre></td>
                            <td><pre><span class="-6087748460489311696" onmouseenter="enter('-6087748460489311696');" onmouseout="out('-6087748460489311696');" style="">   1 /*  Copyright (C) 2016-2017 Alberto, Andreas Shimokawa, Carsten Pfeiffer,                                </span>
<span class="4602200970174176129" onmouseenter="enter('4602200970174176129');" onmouseout="out('4602200970174176129');" style="">   2     ivanovlev, JoaÌƒo Paulo Barraca                                                                       </span>
<span  style="">   3                                                                                                          </span>
<span class="-7759499394858783956" onmouseenter="enter('-7759499394858783956');" onmouseout="out('-7759499394858783956');" style="">   4     This file is part of Gadgetbridge.                                                                   </span>
<span  style="">   5                                                                                                          </span>
<span class="-2647557636279629478" onmouseenter="enter('-2647557636279629478');" onmouseout="out('-2647557636279629478');" style="">   6     Gadgetbridge is free software: you can redistribute it and/or modify                                 </span>
<span class="4878736751218581391" onmouseenter="enter('4878736751218581391');" onmouseout="out('4878736751218581391');" style="">   7     it under the terms of the GNU Affero General Public License as published                             </span>
<span class="-5160078368722358920" onmouseenter="enter('-5160078368722358920');" onmouseout="out('-5160078368722358920');" style="">   8     by the Free Software Foundation, either version 3 of the License, or                                 </span>
<span class="6661789815760177463" onmouseenter="enter('6661789815760177463');" onmouseout="out('6661789815760177463');" style="">   9     (at your option) any later version.                                                                  </span>
<span  style="">  10                                                                                                          </span>
<span class="-6828199977528779968" onmouseenter="enter('-6828199977528779968');" onmouseout="out('-6828199977528779968');" style="">  11     Gadgetbridge is distributed in the hope that it will be useful,                                      </span>
<span class="4883593508173597945" onmouseenter="enter('4883593508173597945');" onmouseout="out('4883593508173597945');" style="">  12     but WITHOUT ANY WARRANTY; without even the implied warranty of                                       </span>
<span class="2300657568347926527" onmouseenter="enter('2300657568347926527');" onmouseout="out('2300657568347926527');" style="">  13     MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the                                        </span>
<span class="4681049817175334681" onmouseenter="enter('4681049817175334681');" onmouseout="out('4681049817175334681');" style="">  14     GNU Affero General Public License for more details.                                                  </span>
<span  style="">  15                                                                                                          </span>
<span class="-3235531360569947201" onmouseenter="enter('-3235531360569947201');" onmouseout="out('-3235531360569947201');" style="">  16     You should have received a copy of the GNU Affero General Public License                             </span>
<span class="-3088444562895398794" onmouseenter="enter('-3088444562895398794');" onmouseout="out('-3088444562895398794');" style="">  17     along with this program.  If not, see &lt;http://www.gnu.org/licenses/&gt;. */                             </span>
<span class="-5217643761314834314" onmouseenter="enter('-5217643761314834314');" onmouseout="out('-5217643761314834314');" style="">  18 package nodomain.freeyourgadget.gadgetbridge.service.devices.hplus;                                      </span>
<span  style="">  19                                                                                                          </span>
<span class="2440823415412133066" onmouseenter="enter('2440823415412133066');" onmouseout="out('2440823415412133066');" style="">  20 import android.bluetooth.BluetoothGatt;                                                                  </span>
<span class="4736969144974683041" onmouseenter="enter('4736969144974683041');" onmouseout="out('4736969144974683041');" style="">  21 import android.bluetooth.BluetoothGattCharacteristic;                                                    </span>
<span class="-489389385851058391" onmouseenter="enter('-489389385851058391');" onmouseout="out('-489389385851058391');" style="">  22 import android.content.BroadcastReceiver;                                                                </span>
<span class="5922045460006936195" onmouseenter="enter('5922045460006936195');" onmouseout="out('5922045460006936195');" style="">  23 import android.content.Context;                                                                          </span>
<span class="6568903789857736568" onmouseenter="enter('6568903789857736568');" onmouseout="out('6568903789857736568');" style="">  24 import android.content.Intent;                                                                           </span>
<span class="8697221465021235869" onmouseenter="enter('8697221465021235869');" onmouseout="out('8697221465021235869');" style="">  25 import android.content.IntentFilter;                                                                     </span>
<span class="-8750621697125156872" onmouseenter="enter('-8750621697125156872');" onmouseout="out('-8750621697125156872');" style="">  26 import android.net.Uri;                                                                                  </span>
<span class="2517521963771876570" onmouseenter="enter('2517521963771876570');" onmouseout="out('2517521963771876570');" style="">  27 import android.support.v4.content.LocalBroadcastManager;                                                 </span>
<span class="-4373317539211938720" onmouseenter="enter('-4373317539211938720');" onmouseout="out('-4373317539211938720');" style="">  28 import android.widget.Toast;                                                                             </span>
<span class="103340661636203254" onmouseenter="enter('103340661636203254');" onmouseout="out('103340661636203254');" style="">  29 import java.io.IOException;                                                                              </span>
<span class="8256805395213692609" onmouseenter="enter('8256805395213692609');" onmouseout="out('8256805395213692609');" style="">  30 import java.io.UnsupportedEncodingException;                                                             </span>
<span class="9191247685397773893" onmouseenter="enter('9191247685397773893');" onmouseout="out('9191247685397773893');" style="">  31 import java.util.ArrayList;                                                                              </span>
<span class="-28465676010609596" onmouseenter="enter('-28465676010609596');" onmouseout="out('-28465676010609596');" style="">  32 import java.util.Arrays;                                                                                 </span>
<span class="1562735530241225598" onmouseenter="enter('1562735530241225598');" onmouseout="out('1562735530241225598');" style="">  33 import java.util.Calendar;                                                                               </span>
<span class="-4685965902094386510" onmouseenter="enter('-4685965902094386510');" onmouseout="out('-4685965902094386510');" style="">  34 import java.util.GregorianCalendar;                                                                      </span>
<span class="-1786020958497218848" onmouseenter="enter('-1786020958497218848');" onmouseout="out('-1786020958497218848');" style="">  35 import java.util.List;                                                                                   </span>
<span class="2390503830490498598" onmouseenter="enter('2390503830490498598');" onmouseout="out('2390503830490498598');" style="">  36 import java.util.UUID;                                                                                   </span>
<span class="-7198279398549834921" onmouseenter="enter('-7198279398549834921');" onmouseout="out('-7198279398549834921');" style="">  37 import nodomain.freeyourgadget.gadgetbridge.R;                                                           </span>
<span class="-3005335786085073829" onmouseenter="enter('-3005335786085073829');" onmouseout="out('-3005335786085073829');" style="">  38 import nodomain.freeyourgadget.gadgetbridge.deviceevents.GBDeviceEventBatteryInfo;                       </span>
<span class="5042091401088979472" onmouseenter="enter('5042091401088979472');" onmouseout="out('5042091401088979472');" style="">  39 import nodomain.freeyourgadget.gadgetbridge.devices.hplus.HPlusConstants;                                </span>
<span class="-4973236722115174269" onmouseenter="enter('-4973236722115174269');" onmouseout="out('-4973236722115174269');" style="">  40 import nodomain.freeyourgadget.gadgetbridge.devices.hplus.HPlusCoordinator;                              </span>
<span class="4836892992022606579" onmouseenter="enter('4836892992022606579');" onmouseout="out('4836892992022606579');" style="">  41 import nodomain.freeyourgadget.gadgetbridge.impl.GBDevice;                                               </span>
<span class="-8766238562391910018" onmouseenter="enter('-8766238562391910018');" onmouseout="out('-8766238562391910018');" style="">  42 import nodomain.freeyourgadget.gadgetbridge.model.Alarm;                                                 </span>
<span class="-3899388208810973608" onmouseenter="enter('-3899388208810973608');" onmouseout="out('-3899388208810973608');" style="">  43 import nodomain.freeyourgadget.gadgetbridge.model.CalendarEventSpec;                                     </span>
<span class="-9074570965792323186" onmouseenter="enter('-9074570965792323186');" onmouseout="out('-9074570965792323186');" style="">  44 import nodomain.freeyourgadget.gadgetbridge.model.CallSpec;                                              </span>
<span class="-7415926539738049206" onmouseenter="enter('-7415926539738049206');" onmouseout="out('-7415926539738049206');" style="">  45 import nodomain.freeyourgadget.gadgetbridge.model.CannedMessagesSpec;                                    </span>
<span class="1593353296711823731" onmouseenter="enter('1593353296711823731');" onmouseout="out('1593353296711823731');" style="">  46 import nodomain.freeyourgadget.gadgetbridge.model.DeviceType;                                            </span>
<span class="7672535166545256161" onmouseenter="enter('7672535166545256161');" onmouseout="out('7672535166545256161');" style="">  47 import nodomain.freeyourgadget.gadgetbridge.model.GenericItem;                                           </span>
<span class="-4068239021838445503" onmouseenter="enter('-4068239021838445503');" onmouseout="out('-4068239021838445503');" style="">  48 import nodomain.freeyourgadget.gadgetbridge.model.MusicSpec;                                             </span>
<span class="7536481506851862405" onmouseenter="enter('7536481506851862405');" onmouseout="out('7536481506851862405');" style="">  49 import nodomain.freeyourgadget.gadgetbridge.model.MusicStateSpec;                                        </span>
<span class="8239808916005009388" onmouseenter="enter('8239808916005009388');" onmouseout="out('8239808916005009388');" style="">  50 import nodomain.freeyourgadget.gadgetbridge.model.NotificationSpec;                                      </span>
<span class="-40839721936664146" onmouseenter="enter('-40839721936664146');" onmouseout="out('-40839721936664146');" style="">  51 import nodomain.freeyourgadget.gadgetbridge.model.WeatherSpec;                                           </span>
<span class="4344228987867394358" onmouseenter="enter('4344228987867394358');" onmouseout="out('4344228987867394358');" style="">  52 import nodomain.freeyourgadget.gadgetbridge.service.btle.AbstractBTLEDeviceSupport;                      </span>
<span class="3410519392510510669" onmouseenter="enter('3410519392510510669');" onmouseout="out('3410519392510510669');" style="">  53 import nodomain.freeyourgadget.gadgetbridge.service.btle.TransactionBuilder;                             </span>
<span class="-2373314641424532722" onmouseenter="enter('-2373314641424532722');" onmouseout="out('-2373314641424532722');" style="">  54 import nodomain.freeyourgadget.gadgetbridge.service.btle.profiles.deviceinfo.DeviceInfo;                 </span>
<span class="5990042019621381740" onmouseenter="enter('5990042019621381740');" onmouseout="out('5990042019621381740');" style="">  55 import nodomain.freeyourgadget.gadgetbridge.service.btle.profiles.deviceinfo.DeviceInfoProfile;          </span>
<span class="-3798970344596478499" onmouseenter="enter('-3798970344596478499');" onmouseout="out('-3798970344596478499');" style="">  56 import nodomain.freeyourgadget.gadgetbridge.util.GB;                                                     </span>
<span class="1710555602396666834" onmouseenter="enter('1710555602396666834');" onmouseout="out('1710555602396666834');" style="">  57 import nodomain.freeyourgadget.gadgetbridge.util.StringUtils;                                            </span>
<span class="2359514128542055982" onmouseenter="enter('2359514128542055982');" onmouseout="out('2359514128542055982');" style="">  58 import org.apache.commons.lang3.ArrayUtils;                                                              </span>
<span class="9072327285961251154" onmouseenter="enter('9072327285961251154');" onmouseout="out('9072327285961251154');" style="">  59 import org.slf4j.Logger;                                                                                 </span>
<span class="697043352225962606" onmouseenter="enter('697043352225962606');" onmouseout="out('697043352225962606');" style="">  60 import org.slf4j.LoggerFactory;                                                                          </span>
<span  style="">  61                                                                                                          </span>
<span  style="">  62                                                                                                          </span>
<span class="-4082404187206109090" onmouseenter="enter('-4082404187206109090');" onmouseout="out('-4082404187206109090');" style="">  63 public class HPlusSupport extends AbstractBTLEDeviceSupport {                                            </span>
<span class="-3586142179549744071" onmouseenter="enter('-3586142179549744071');" onmouseout="out('-3586142179549744071');" style="">  64     private static final Logger LOG = LoggerFactory.getLogger(HPlusSupport.class);                       </span>
<span  style="">  65                                                                                                          </span>
<span class="-5014208032763947659" onmouseenter="enter('-5014208032763947659');" onmouseout="out('-5014208032763947659');" style="">  66     public BluetoothGattCharacteristic ctrlCharacteristic = null;                                        </span>
<span  style="">  67                                                                                                          </span>
<span class="-1389691261480921757" onmouseenter="enter('-1389691261480921757');" onmouseout="out('-1389691261480921757');" style="">  68     public BluetoothGattCharacteristic measureCharacteristic = null;                                     </span>
<span  style="">  69                                                                                                          </span>
<span class="7253442996403887798" onmouseenter="enter('7253442996403887798');" onmouseout="out('7253442996403887798');" style="">  70     private final GBDeviceEventBatteryInfo batteryCmd = new GBDeviceEventBatteryInfo();                  </span>
<span  style="">  71                                                                                                          </span>
<span class="-2647742433589439535" onmouseenter="enter('-2647742433589439535');" onmouseout="out('-2647742433589439535');" style="">  72     private HPlusHandlerThread syncHelper;                                                               </span>
<span  style="">  73                                                                                                          </span>
<span class="7122708288156354523" onmouseenter="enter('7122708288156354523');" onmouseout="out('7122708288156354523');" style="">  74     private DeviceType deviceType = DeviceType.UNKNOWN;                                                  </span>
<span  style="">  75                                                                                                          </span>
<span class="4625474178666977899" onmouseenter="enter('4625474178666977899');" onmouseout="out('4625474178666977899');" style="">  76     private final BroadcastReceiver mReceiver = new BroadcastReceiver() {                                </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  77         @Override                                                                                        </span>
<span class="-1520739091809898546" onmouseenter="enter('-1520739091809898546');" onmouseout="out('-1520739091809898546');" style="">  78         public void onReceive(Context context, Intent intent) {                                          </span>
<span class="-4530039192824031" onmouseenter="enter('-4530039192824031');" onmouseout="out('-4530039192824031');" style="">  79             String s = intent.getAction();                                                               </span>
<span class="-431805254143538347" onmouseenter="enter('-431805254143538347');" onmouseout="out('-431805254143538347');" style="">  80             if (s.equals(DeviceInfoProfile.ACTION_DEVICE_INFO)) {                                        </span>
<span class="-5899475146654064322" onmouseenter="enter('-5899475146654064322');" onmouseout="out('-5899475146654064322');" style=""><abbr title="  81                 handleDeviceInfo(((DeviceInfo) (intent.getParcelableExtra(DeviceInfoProfile.EXTRA_DEVICE_INFO))));">  81                 handleDeviceInfo(((DeviceInfo) (intent.getParcelableExtra(DeviceInfoProfile.EXTRA_DEVICE_ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  82             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  83         }                                                                                                </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">  84     };                                                                                                   </span>
<span  style="">  85                                                                                                          </span>
<span class="-6599573096376092321" onmouseenter="enter('-6599573096376092321');" onmouseout="out('-6599573096376092321');" style="">  86     public HPlusSupport(DeviceType type) {                                                               </span>
<span class="4463652287758102089" onmouseenter="enter('4463652287758102089');" onmouseout="out('4463652287758102089');" style="">  87         super(LOG);                                                                                      </span>
<span class="-911614436014638875" onmouseenter="enter('-911614436014638875');" onmouseout="out('-911614436014638875');" style="">  88         LOG.info(&quot;HPlusSupport Instance Created&quot;);                                                       </span>
<span class="3299229106905835199" onmouseenter="enter('3299229106905835199');" onmouseout="out('3299229106905835199');" style="">  89         deviceType = type;                                                                               </span>
<span class="377067810786142420" onmouseenter="enter('377067810786142420');" onmouseout="out('377067810786142420');" style="">  90         addSupportedService(HPlusConstants.UUID_SERVICE_HP);                                             </span>
<span class="5948400278394960963" onmouseenter="enter('5948400278394960963');" onmouseout="out('5948400278394960963');" style="">  91         LocalBroadcastManager broadcastManager = LocalBroadcastManager.getInstance(getContext());        </span>
<span class="-6475340056070675924" onmouseenter="enter('-6475340056070675924');" onmouseout="out('-6475340056070675924');" style="">  92         IntentFilter intentFilter = new IntentFilter();                                                  </span>
<span class="-9031778988080615533" onmouseenter="enter('-9031778988080615533');" onmouseout="out('-9031778988080615533');" style="">  93         broadcastManager.registerReceiver(mReceiver, intentFilter);                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  94     }                                                                                                    </span>
<span  style="">  95                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  96     @Override                                                                                            </span>
<span class="-4657406736363487113" onmouseenter="enter('-4657406736363487113');" onmouseout="out('-4657406736363487113');" style="">  97     public void dispose() {                                                                              </span>
<span class="-1145329300786377991" onmouseenter="enter('-1145329300786377991');" onmouseout="out('-1145329300786377991');" style="">  98         LOG.info(&quot;Dispose&quot;);                                                                             </span>
<span class="5948400278394960963" onmouseenter="enter('5948400278394960963');" onmouseout="out('5948400278394960963');" style="">  99         LocalBroadcastManager broadcastManager = LocalBroadcastManager.getInstance(getContext());        </span>
<span class="-2591797645219758220" onmouseenter="enter('-2591797645219758220');" onmouseout="out('-2591797645219758220');" style=""> 100         broadcastManager.unregisterReceiver(mReceiver);                                                  </span>
<span  style=""> 101                                                                                                          </span>
<span class="-2251371211449821101" onmouseenter="enter('-2251371211449821101');" onmouseout="out('-2251371211449821101');" style=""> 102         close();                                                                                         </span>
<span  style=""> 103                                                                                                          </span>
<span class="4250596422636225835" onmouseenter="enter('4250596422636225835');" onmouseout="out('4250596422636225835');" style=""> 104         super.dispose();                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 105     }                                                                                                    </span>
<span  style=""> 106                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 107     @Override                                                                                            </span>
<span class="624595386859969795" onmouseenter="enter('624595386859969795');" onmouseout="out('624595386859969795');" style=""> 108     protected TransactionBuilder initializeDevice(TransactionBuilder builder) {                          </span>
<span class="6943102306574884764" onmouseenter="enter('6943102306574884764');" onmouseout="out('6943102306574884764');" style=""> 109         LOG.info(&quot;Initializing&quot;);                                                                        </span>
<span class="-5776342764121597122" onmouseenter="enter('-5776342764121597122');" onmouseout="out('-5776342764121597122');" style=""> 110         gbDevice.setState(GBDevice.State.INITIALIZING);                                                  </span>
<span class="-6083303279196581322" onmouseenter="enter('-6083303279196581322');" onmouseout="out('-6083303279196581322');" style=""> 111         gbDevice.sendDeviceUpdateIntent(getContext());                                                   </span>
<span class="-2070300686094273817" onmouseenter="enter('-2070300686094273817');" onmouseout="out('-2070300686094273817');" style=""> 112         measureCharacteristic = getCharacteristic(HPlusConstants.UUID_CHARACTERISTIC_MEASURE);           </span>
<span class="-3114635167656687851" onmouseenter="enter('-3114635167656687851');" onmouseout="out('-3114635167656687851');" style=""> 113         ctrlCharacteristic = getCharacteristic(HPlusConstants.UUID_CHARACTERISTIC_CONTROL);              </span>
<span class="3645364997644532552" onmouseenter="enter('3645364997644532552');" onmouseout="out('3645364997644532552');" style=""> 114         builder.notify(getCharacteristic(HPlusConstants.UUID_CHARACTERISTIC_MEASURE), true);             </span>
<span class="8787860057533172177" onmouseenter="enter('8787860057533172177');" onmouseout="out('8787860057533172177');" style=""> 115         builder.setGattCallback(this);                                                                   </span>
<span class="7940646096517618441" onmouseenter="enter('7940646096517618441');" onmouseout="out('7940646096517618441');" style=""> 116         builder.notify(measureCharacteristic, true);                                                     </span>
<span class="-5569714819526292644" onmouseenter="enter('-5569714819526292644');" onmouseout="out('-5569714819526292644');" style=""> 117         // Initialize device                                                                             </span>
<span class="-3489030166655840571" onmouseenter="enter('-3489030166655840571');" onmouseout="out('-3489030166655840571');" style=""> 118         sendUserInfo(builder);// Sync preferences                                                        </span>
<span  style=""> 119                                                                                                          </span>
<span class="6586859092027978564" onmouseenter="enter('6586859092027978564');" onmouseout="out('6586859092027978564');" style=""> 120         gbDevice.setState(GBDevice.State.INITIALIZED);                                                   </span>
<span class="-6083303279196581322" onmouseenter="enter('-6083303279196581322');" onmouseout="out('-6083303279196581322');" style=""> 121         gbDevice.sendDeviceUpdateIntent(getContext());                                                   </span>
<span class="-7862635836636974806" onmouseenter="enter('-7862635836636974806');" onmouseout="out('-7862635836636974806');" style=""> 122         if (syncHelper == null) {                                                                        </span>
<span class="-1983961118622982915" onmouseenter="enter('-1983961118622982915');" onmouseout="out('-1983961118622982915');" style=""> 123             syncHelper = new HPlusHandlerThread(getDevice(), getContext(), this);                        </span>
<span class="-1903424543284802769" onmouseenter="enter('-1903424543284802769');" onmouseout="out('-1903424543284802769');" style=""> 124             syncHelper.start();                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 125         }                                                                                                </span>
<span class="-1977462876553727609" onmouseenter="enter('-1977462876553727609');" onmouseout="out('-1977462876553727609');" style=""> 126         syncHelper.sync();                                                                               </span>
<span class="-3832688778173104110" onmouseenter="enter('-3832688778173104110');" onmouseout="out('-3832688778173104110');" style=""> 127         getDevice().setFirmwareVersion(&quot;N/A&quot;);                                                           </span>
<span class="-4069256094451065143" onmouseenter="enter('-4069256094451065143');" onmouseout="out('-4069256094451065143');" style=""> 128         getDevice().setFirmwareVersion2(&quot;N/A&quot;);                                                          </span>
<span class="2384486382001682171" onmouseenter="enter('2384486382001682171');" onmouseout="out('2384486382001682171');" style=""> 129         requestDeviceInfo(builder);                                                                      </span>
<span class="8801197429786363323" onmouseenter="enter('8801197429786363323');" onmouseout="out('8801197429786363323');" style=""> 130         LOG.info(&quot;Initialization Done&quot;);                                                                 </span>
<span class="4801455624621135639" onmouseenter="enter('4801455624621135639');" onmouseout="out('4801455624621135639');" style=""> 131         return builder;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 132     }                                                                                                    </span>
<span  style=""> 133                                                                                                          </span>
<span class="464313160346579114" onmouseenter="enter('464313160346579114');" onmouseout="out('464313160346579114');" style=""> 134     private HPlusSupport sendUserInfo(TransactionBuilder builder) {                                      </span>
<span class="8659711009772068062" onmouseenter="enter('8659711009772068062');" onmouseout="out('8659711009772068062');" style=""> 135         builder.write(ctrlCharacteristic, HPlusConstants.CMD_SET_PREF_START);                            </span>
<span class="-4601813669746665290" onmouseenter="enter('-4601813669746665290');" onmouseout="out('-4601813669746665290');" style=""> 136         builder.write(ctrlCharacteristic, HPlusConstants.CMD_SET_PREF_START1);                           </span>
<span  style=""> 137                                                                                                          </span>
<span class="5354677973902937208" onmouseenter="enter('5354677973902937208');" onmouseout="out('5354677973902937208');" style=""> 138         syncPreferences(builder);                                                                        </span>
<span  style=""> 139                                                                                                          </span>
<span class="3647312381509313349" onmouseenter="enter('3647312381509313349');" onmouseout="out('3647312381509313349');" style=""> 140         builder.write(ctrlCharacteristic, new byte[]{HPlusConstants.CMD_SET_CONF_END});                  </span>
<span class="2297715846939503398" onmouseenter="enter('2297715846939503398');" onmouseout="out('2297715846939503398');" style=""> 141         return this;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 142     }                                                                                                    </span>
<span  style=""> 143                                                                                                          </span>
<span class="-3630452951846679004" onmouseenter="enter('-3630452951846679004');" onmouseout="out('-3630452951846679004');" style=""> 144     private HPlusSupport syncPreferences(TransactionBuilder transaction) {                               </span>
<span  style=""> 145                                                                                                          </span>
<span class="9200456031894264068" onmouseenter="enter('9200456031894264068');" onmouseout="out('9200456031894264068');" style=""> 146         if (deviceType == DeviceType.HPLUS) {                                                            </span>
<span class="-9160949721391368870" onmouseenter="enter('-9160949721391368870');" onmouseout="out('-9160949721391368870');" style=""> 147             setSIT(transaction);          //Sync SIT Interval                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 148         }                                                                                                </span>
<span  style=""> 149                                                                                                          </span>
<span class="8565886816545297578" onmouseenter="enter('8565886816545297578');" onmouseout="out('8565886816545297578');" style=""> 150         setCurrentDate(transaction);                                                                     </span>
<span class="-8398887245102710885" onmouseenter="enter('-8398887245102710885');" onmouseout="out('-8398887245102710885');" style=""> 151         setCurrentTime(transaction);                                                                     </span>
<span class="1698876699275306022" onmouseenter="enter('1698876699275306022');" onmouseout="out('1698876699275306022');" style=""> 152         setDayOfWeek(transaction);                                                                       </span>
<span class="-2226089159439282115" onmouseenter="enter('-2226089159439282115');" onmouseout="out('-2226089159439282115');" style=""> 153         setTimeMode(transaction);                                                                        </span>
<span  style=""> 154                                                                                                          </span>
<span class="-3967043804590944959" onmouseenter="enter('-3967043804590944959');" onmouseout="out('-3967043804590944959');" style=""> 155         setGender(transaction);                                                                          </span>
<span class="1849231822188363425" onmouseenter="enter('1849231822188363425');" onmouseout="out('1849231822188363425');" style=""> 156         setAge(transaction);                                                                             </span>
<span class="8409976551582741350" onmouseenter="enter('8409976551582741350');" onmouseout="out('8409976551582741350');" style=""> 157         setWeight(transaction);                                                                          </span>
<span class="2177249264940965323" onmouseenter="enter('2177249264940965323');" onmouseout="out('2177249264940965323');" style=""> 158         setHeight(transaction);                                                                          </span>
<span  style=""> 159                                                                                                          </span>
<span class="-7350523131149809385" onmouseenter="enter('-7350523131149809385');" onmouseout="out('-7350523131149809385');" style=""> 160         setGoal(transaction);                                                                            </span>
<span class="4493614030159792560" onmouseenter="enter('4493614030159792560');" onmouseout="out('4493614030159792560');" style=""> 161         setLanguage(transaction);                                                                        </span>
<span class="-7293987064571039169" onmouseenter="enter('-7293987064571039169');" onmouseout="out('-7293987064571039169');" style=""> 162         setScreenTime(transaction);                                                                      </span>
<span class="8577063610004227384" onmouseenter="enter('8577063610004227384');" onmouseout="out('8577063610004227384');" style=""> 163         setUnit(transaction);                                                                            </span>
<span class="-4090002420283598619" onmouseenter="enter('-4090002420283598619');" onmouseout="out('-4090002420283598619');" style=""> 164         setAllDayHeart(transaction);                                                                     </span>
<span  style=""> 165                                                                                                          </span>
<span class="2297715846939503398" onmouseenter="enter('2297715846939503398');" onmouseout="out('2297715846939503398');" style=""> 166         return this;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 167     }                                                                                                    </span>
<span  style=""> 168                                                                                                          </span>
<span class="2971063439380410916" onmouseenter="enter('2971063439380410916');" onmouseout="out('2971063439380410916');" style=""> 169     private HPlusSupport setLanguage(TransactionBuilder transaction) {                                   </span>
<span class="2849983908429827334" onmouseenter="enter('2849983908429827334');" onmouseout="out('2849983908429827334');" style=""> 170         byte value = HPlusCoordinator.getLanguage(getDevice().getAddress());                             </span>
<span class="3291452160875082121" onmouseenter="enter('3291452160875082121');" onmouseout="out('3291452160875082121');" style=""> 171         transaction.write(ctrlCharacteristic, new byte[]{                                                </span>
<span class="-2720480633878408025" onmouseenter="enter('-2720480633878408025');" onmouseout="out('-2720480633878408025');" style=""> 172                 HPlusConstants.CMD_SET_LANGUAGE,                                                         </span>
<span class="1200713371940080677" onmouseenter="enter('1200713371940080677');" onmouseout="out('1200713371940080677');" style=""> 173                 value                                                                                    </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 174         });                                                                                              </span>
<span class="2297715846939503398" onmouseenter="enter('2297715846939503398');" onmouseout="out('2297715846939503398');" style=""> 175         return this;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 176     }                                                                                                    </span>
<span  style=""> 177                                                                                                          </span>
<span class="4317151267263402448" onmouseenter="enter('4317151267263402448');" onmouseout="out('4317151267263402448');" style=""> 178     private HPlusSupport setTimeMode(TransactionBuilder transaction) {                                   </span>
<span class="218359786857846408" onmouseenter="enter('218359786857846408');" onmouseout="out('218359786857846408');" style=""> 179         byte value = HPlusCoordinator.getTimeMode(getDevice().getAddress());                             </span>
<span  style=""> 180                                                                                                          </span>
<span class="3291452160875082121" onmouseenter="enter('3291452160875082121');" onmouseout="out('3291452160875082121');" style=""> 181         transaction.write(ctrlCharacteristic, new byte[]{                                                </span>
<span class="4263534606018086323" onmouseenter="enter('4263534606018086323');" onmouseout="out('4263534606018086323');" style=""> 182                 HPlusConstants.CMD_SET_TIMEMODE,                                                         </span>
<span class="1200713371940080677" onmouseenter="enter('1200713371940080677');" onmouseout="out('1200713371940080677');" style=""> 183                 value                                                                                    </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 184         });                                                                                              </span>
<span class="2297715846939503398" onmouseenter="enter('2297715846939503398');" onmouseout="out('2297715846939503398');" style=""> 185         return this;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 186     }                                                                                                    </span>
<span  style=""> 187                                                                                                          </span>
<span class="1527802699814540214" onmouseenter="enter('1527802699814540214');" onmouseout="out('1527802699814540214');" style=""> 188     private HPlusSupport setUnit(TransactionBuilder transaction) {                                       </span>
<span class="-8211628829141498614" onmouseenter="enter('-8211628829141498614');" onmouseout="out('-8211628829141498614');" style=""> 189         byte value = HPlusCoordinator.getUnit(getDevice().getAddress());                                 </span>
<span class="3291452160875082121" onmouseenter="enter('3291452160875082121');" onmouseout="out('3291452160875082121');" style=""> 190         transaction.write(ctrlCharacteristic, new byte[]{                                                </span>
<span class="330508883912365904" onmouseenter="enter('330508883912365904');" onmouseout="out('330508883912365904');" style=""> 191                 HPlusConstants.CMD_SET_UNITS,                                                            </span>
<span class="1200713371940080677" onmouseenter="enter('1200713371940080677');" onmouseout="out('1200713371940080677');" style=""> 192                 value                                                                                    </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 193         });                                                                                              </span>
<span class="2297715846939503398" onmouseenter="enter('2297715846939503398');" onmouseout="out('2297715846939503398');" style=""> 194         return this;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 195     }                                                                                                    </span>
<span  style=""> 196                                                                                                          </span>
<span class="-7617350710418441488" onmouseenter="enter('-7617350710418441488');" onmouseout="out('-7617350710418441488');" style=""> 197     private HPlusSupport setCurrentDate(TransactionBuilder transaction) {                                </span>
<span class="2531610087543829790" onmouseenter="enter('2531610087543829790');" onmouseout="out('2531610087543829790');" style=""> 198         Calendar c = GregorianCalendar.getInstance();                                                    </span>
<span class="-2923391553220974433" onmouseenter="enter('-2923391553220974433');" onmouseout="out('-2923391553220974433');" style=""> 199         int year = c.get(Calendar.YEAR);                                                                 </span>
<span class="8379254238395309807" onmouseenter="enter('8379254238395309807');" onmouseout="out('8379254238395309807');" style=""> 200         int month = c.get(Calendar.MONTH);                                                               </span>
<span class="-1537240887202619533" onmouseenter="enter('-1537240887202619533');" onmouseout="out('-1537240887202619533');" style=""> 201         int day = c.get(Calendar.DAY_OF_MONTH);                                                          </span>
<span  style=""> 202                                                                                                          </span>
<span class="3291452160875082121" onmouseenter="enter('3291452160875082121');" onmouseout="out('3291452160875082121');" style=""> 203         transaction.write(ctrlCharacteristic, new byte[]{                                                </span>
<span class="-5419256561338282975" onmouseenter="enter('-5419256561338282975');" onmouseout="out('-5419256561338282975');" style=""> 204                 HPlusConstants.CMD_SET_DATE,                                                             </span>
<span class="596156045428080737" onmouseenter="enter('596156045428080737');" onmouseout="out('596156045428080737');" style=""> 205                 (byte) ((year / 256) &amp; 0xff),                                                            </span>
<span class="-274510278877719166" onmouseenter="enter('-274510278877719166');" onmouseout="out('-274510278877719166');" style=""> 206                 (byte) (year % 256),                                                                     </span>
<span class="2509221540333605786" onmouseenter="enter('2509221540333605786');" onmouseout="out('2509221540333605786');" style=""> 207                 (byte) (month + 1),                                                                      </span>
<span class="154836591265012146" onmouseenter="enter('154836591265012146');" onmouseout="out('154836591265012146');" style=""> 208                 (byte) (day)                                                                             </span>
<span  style=""> 209                                                                                                          </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 210         });                                                                                              </span>
<span class="2297715846939503398" onmouseenter="enter('2297715846939503398');" onmouseout="out('2297715846939503398');" style=""> 211         return this;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 212     }                                                                                                    </span>
<span  style=""> 213                                                                                                          </span>
<span class="-5177509192006647721" onmouseenter="enter('-5177509192006647721');" onmouseout="out('-5177509192006647721');" style=""> 214     private HPlusSupport setCurrentTime(TransactionBuilder transaction) {                                </span>
<span class="2531610087543829790" onmouseenter="enter('2531610087543829790');" onmouseout="out('2531610087543829790');" style=""> 215         Calendar c = GregorianCalendar.getInstance();                                                    </span>
<span  style=""> 216                                                                                                          </span>
<span class="3291452160875082121" onmouseenter="enter('3291452160875082121');" onmouseout="out('3291452160875082121');" style=""> 217         transaction.write(ctrlCharacteristic, new byte[]{                                                </span>
<span class="-3810178960282507440" onmouseenter="enter('-3810178960282507440');" onmouseout="out('-3810178960282507440');" style=""> 218                 HPlusConstants.CMD_SET_TIME,                                                             </span>
<span class="4175240225145224534" onmouseenter="enter('4175240225145224534');" onmouseout="out('4175240225145224534');" style=""> 219                 (byte) c.get(Calendar.HOUR_OF_DAY),                                                      </span>
<span class="-8029568718198783140" onmouseenter="enter('-8029568718198783140');" onmouseout="out('-8029568718198783140');" style=""> 220                 (byte) c.get(Calendar.MINUTE),                                                           </span>
<span class="-2353745633236339443" onmouseenter="enter('-2353745633236339443');" onmouseout="out('-2353745633236339443');" style=""> 221                 (byte) c.get(Calendar.SECOND)                                                            </span>
<span  style=""> 222                                                                                                          </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 223         });                                                                                              </span>
<span class="2297715846939503398" onmouseenter="enter('2297715846939503398');" onmouseout="out('2297715846939503398');" style=""> 224         return this;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 225     }                                                                                                    </span>
<span  style=""> 226                                                                                                          </span>
<span class="-4421580834062212270" onmouseenter="enter('-4421580834062212270');" onmouseout="out('-4421580834062212270');" style=""> 227     private HPlusSupport setDayOfWeek(TransactionBuilder transaction) {                                  </span>
<span class="2531610087543829790" onmouseenter="enter('2531610087543829790');" onmouseout="out('2531610087543829790');" style=""> 228         Calendar c = GregorianCalendar.getInstance();                                                    </span>
<span  style=""> 229                                                                                                          </span>
<span class="3291452160875082121" onmouseenter="enter('3291452160875082121');" onmouseout="out('3291452160875082121');" style=""> 230         transaction.write(ctrlCharacteristic, new byte[]{                                                </span>
<span class="7969665857025838608" onmouseenter="enter('7969665857025838608');" onmouseout="out('7969665857025838608');" style=""> 231                 HPlusConstants.CMD_SET_WEEK,                                                             </span>
<span class="2107609500554215585" onmouseenter="enter('2107609500554215585');" onmouseout="out('2107609500554215585');" style=""> 232                 (byte) (c.get(Calendar.DAY_OF_WEEK) - 1)                                                 </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 233         });                                                                                              </span>
<span class="2297715846939503398" onmouseenter="enter('2297715846939503398');" onmouseout="out('2297715846939503398');" style=""> 234         return this;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 235     }                                                                                                    </span>
<span  style=""> 236                                                                                                          </span>
<span class="1777874725720523294" onmouseenter="enter('1777874725720523294');" onmouseout="out('1777874725720523294');" style=""> 237     private HPlusSupport setSIT(TransactionBuilder transaction) {                                        </span>
<span  style=""> 238                                                                                                          </span>
<span class="-1710515092546508137" onmouseenter="enter('-1710515092546508137');" onmouseout="out('-1710515092546508137');" style=""> 239         //Makibes F68 doesn&#x27;t like this command.                                                         </span>
<span class="4585394865152052123" onmouseenter="enter('4585394865152052123');" onmouseout="out('4585394865152052123');" style=""> 240         //Just ignore.                                                                                   </span>
<span class="8010717523561516322" onmouseenter="enter('8010717523561516322');" onmouseout="out('8010717523561516322');" style=""> 241         if (deviceType == DeviceType.MAKIBESF68) {                                                       </span>
<span class="2297715846939503398" onmouseenter="enter('2297715846939503398');" onmouseout="out('2297715846939503398');" style=""> 242             return this;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 243         }                                                                                                </span>
<span  style=""> 244                                                                                                          </span>
<span class="7782781853756800720" onmouseenter="enter('7782781853756800720');" onmouseout="out('7782781853756800720');" style=""> 245         int startTime = HPlusCoordinator.getSITStartTime(getDevice().getAddress());                      </span>
<span class="8209842661687801925" onmouseenter="enter('8209842661687801925');" onmouseout="out('8209842661687801925');" style=""> 246         int endTime = HPlusCoordinator.getSITEndTime(getDevice().getAddress());                          </span>
<span  style=""> 247                                                                                                          </span>
<span class="5882708480576637773" onmouseenter="enter('5882708480576637773');" onmouseout="out('5882708480576637773');" style=""> 248         Calendar now = GregorianCalendar.getInstance();                                                  </span>
<span  style=""> 249                                                                                                          </span>
<span class="3291452160875082121" onmouseenter="enter('3291452160875082121');" onmouseout="out('3291452160875082121');" style=""> 250         transaction.write(ctrlCharacteristic, new byte[]{                                                </span>
<span class="-6329136660964193391" onmouseenter="enter('-6329136660964193391');" onmouseout="out('-6329136660964193391');" style=""> 251                 HPlusConstants.CMD_SET_SIT_INTERVAL,                                                     </span>
<span class="-7172094393246648903" onmouseenter="enter('-7172094393246648903');" onmouseout="out('-7172094393246648903');" style=""> 252                 (byte) ((startTime / 256) &amp; 0xff),                                                       </span>
<span class="-3674522560837142583" onmouseenter="enter('-3674522560837142583');" onmouseout="out('-3674522560837142583');" style=""> 253                 (byte) (startTime % 256),                                                                </span>
<span class="9123983034732908067" onmouseenter="enter('9123983034732908067');" onmouseout="out('9123983034732908067');" style=""> 254                 (byte) ((endTime / 256) &amp; 0xff),                                                         </span>
<span class="5594695527343368846" onmouseenter="enter('5594695527343368846');" onmouseout="out('5594695527343368846');" style=""> 255                 (byte) (endTime % 256),                                                                  </span>
<span class="-6076240376861215679" onmouseenter="enter('-6076240376861215679');" onmouseout="out('-6076240376861215679');" style=""> 256                 0,                                                                                       </span>
<span class="-6076240376861215679" onmouseenter="enter('-6076240376861215679');" onmouseout="out('-6076240376861215679');" style=""> 257                 0,                                                                                       </span>
<span class="-1881944630562092789" onmouseenter="enter('-1881944630562092789');" onmouseout="out('-1881944630562092789');" style=""> 258                 (byte) ((now.get(Calendar.YEAR) / 256) &amp; 0xff),                                          </span>
<span class="808961206931151347" onmouseenter="enter('808961206931151347');" onmouseout="out('808961206931151347');" style=""> 259                 (byte) (now.get(Calendar.YEAR) % 256),                                                   </span>
<span class="-3929811106245983954" onmouseenter="enter('-3929811106245983954');" onmouseout="out('-3929811106245983954');" style=""> 260                 (byte) (now.get(Calendar.MONTH) + 1),                                                    </span>
<span class="-6608497570264303352" onmouseenter="enter('-6608497570264303352');" onmouseout="out('-6608497570264303352');" style=""> 261                 (byte) (now.get(Calendar.DAY_OF_MONTH)),                                                 </span>
<span class="-4838072097318336683" onmouseenter="enter('-4838072097318336683');" onmouseout="out('-4838072097318336683');" style=""> 262                 (byte) (now.get(Calendar.HOUR_OF_DAY)),                                                  </span>
<span class="-3604343412851664994" onmouseenter="enter('-3604343412851664994');" onmouseout="out('-3604343412851664994');" style=""> 263                 (byte) (now.get(Calendar.MINUTE)),                                                       </span>
<span class="8073077880938975334" onmouseenter="enter('8073077880938975334');" onmouseout="out('8073077880938975334');" style=""> 264                 (byte) (now.get(Calendar.SECOND)),                                                       </span>
<span class="-6076240376861215679" onmouseenter="enter('-6076240376861215679');" onmouseout="out('-6076240376861215679');" style=""> 265                 0,                                                                                       </span>
<span class="-6076240376861215679" onmouseenter="enter('-6076240376861215679');" onmouseout="out('-6076240376861215679');" style=""> 266                 0,                                                                                       </span>
<span class="-6076240376861215679" onmouseenter="enter('-6076240376861215679');" onmouseout="out('-6076240376861215679');" style=""> 267                 0,                                                                                       </span>
<span class="2218992417378941058" onmouseenter="enter('2218992417378941058');" onmouseout="out('2218992417378941058');" style=""> 268                 0                                                                                        </span>
<span  style=""> 269                                                                                                          </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 270         });                                                                                              </span>
<span class="2297715846939503398" onmouseenter="enter('2297715846939503398');" onmouseout="out('2297715846939503398');" style=""> 271         return this;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 272     }                                                                                                    </span>
<span  style=""> 273                                                                                                          </span>
<span class="7972248273337413684" onmouseenter="enter('7972248273337413684');" onmouseout="out('7972248273337413684');" style=""> 274     private HPlusSupport setWeight(TransactionBuilder transaction) {                                     </span>
<span class="8150192687820779212" onmouseenter="enter('8150192687820779212');" onmouseout="out('8150192687820779212');" style=""> 275         byte value = HPlusCoordinator.getUserWeight();                                                   </span>
<span class="-6826293681348130947" onmouseenter="enter('-6826293681348130947');" onmouseout="out('-6826293681348130947');" style=""> 276         transaction.write(ctrlCharacteristic, new byte[]{ HPlusConstants.CMD_SET_WEIGHT, value });       </span>
<span class="2297715846939503398" onmouseenter="enter('2297715846939503398');" onmouseout="out('2297715846939503398');" style=""> 277         return this;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 278     }                                                                                                    </span>
<span  style=""> 279                                                                                                          </span>
<span class="-7347510196780789476" onmouseenter="enter('-7347510196780789476');" onmouseout="out('-7347510196780789476');" style=""> 280     private HPlusSupport setHeight(TransactionBuilder transaction) {                                     </span>
<span class="-6343281459862929187" onmouseenter="enter('-6343281459862929187');" onmouseout="out('-6343281459862929187');" style=""> 281         byte value = HPlusCoordinator.getUserHeight();                                                   </span>
<span class="5986327255587012688" onmouseenter="enter('5986327255587012688');" onmouseout="out('5986327255587012688');" style=""> 282         transaction.write(ctrlCharacteristic, new byte[]{ HPlusConstants.CMD_HEIGHT, value });           </span>
<span class="2297715846939503398" onmouseenter="enter('2297715846939503398');" onmouseout="out('2297715846939503398');" style=""> 283         return this;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 284     }                                                                                                    </span>
<span  style=""> 285                                                                                                          </span>
<span class="5947324092747227570" onmouseenter="enter('5947324092747227570');" onmouseout="out('5947324092747227570');" style=""> 286     private HPlusSupport setAge(TransactionBuilder transaction) {                                        </span>
<span class="2934823474304180885" onmouseenter="enter('2934823474304180885');" onmouseout="out('2934823474304180885');" style=""> 287         byte value = HPlusCoordinator.getUserAge();                                                      </span>
<span class="-5477552204252412624" onmouseenter="enter('-5477552204252412624');" onmouseout="out('-5477552204252412624');" style=""> 288         transaction.write(ctrlCharacteristic, new byte[]{ HPlusConstants.CMD_SET_AGE, value });          </span>
<span class="2297715846939503398" onmouseenter="enter('2297715846939503398');" onmouseout="out('2297715846939503398');" style=""> 289         return this;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 290     }                                                                                                    </span>
<span  style=""> 291                                                                                                          </span>
<span class="7012632444102522477" onmouseenter="enter('7012632444102522477');" onmouseout="out('7012632444102522477');" style=""> 292     private HPlusSupport setGender(TransactionBuilder transaction) {                                     </span>
<span class="851277153814698" onmouseenter="enter('851277153814698');" onmouseout="out('851277153814698');" style=""> 293         byte value = HPlusCoordinator.getUserGender();                                                   </span>
<span class="-3152685991717414598" onmouseenter="enter('-3152685991717414598');" onmouseout="out('-3152685991717414598');" style=""> 294         transaction.write(ctrlCharacteristic, new byte[]{ HPlusConstants.CMD_SET_GENDER, value });       </span>
<span class="2297715846939503398" onmouseenter="enter('2297715846939503398');" onmouseout="out('2297715846939503398');" style=""> 295         return this;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 296     }                                                                                                    </span>
<span  style=""> 297                                                                                                          </span>
<span class="1941288733470282948" onmouseenter="enter('1941288733470282948');" onmouseout="out('1941288733470282948');" style=""> 298     private HPlusSupport setGoal(TransactionBuilder transaction) {                                       </span>
<span class="7904327141242761065" onmouseenter="enter('7904327141242761065');" onmouseout="out('7904327141242761065');" style=""> 299         int value = HPlusCoordinator.getGoal();                                                          </span>
<span class="1997193364979838465" onmouseenter="enter('1997193364979838465');" onmouseout="out('1997193364979838465');" style=""><abbr title=" 300         transaction.write(ctrlCharacteristic, new byte[]{ HPlusConstants.CMD_SET_GOAL, ((byte) ((value / 256) &amp; 0xff)), ((byte) (value % 256)) });"> 300         transaction.write(ctrlCharacteristic, new byte[]{ HPlusConstants.CMD_SET_GOAL, ((byte) ((value / ðŸ”µ</abbr></span>
<span class="2297715846939503398" onmouseenter="enter('2297715846939503398');" onmouseout="out('2297715846939503398');" style=""> 301         return this;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 302     }                                                                                                    </span>
<span  style=""> 303                                                                                                          </span>
<span class="-1254834888773037917" onmouseenter="enter('-1254834888773037917');" onmouseout="out('-1254834888773037917');" style=""> 304     private HPlusSupport setScreenTime(TransactionBuilder transaction) {                                 </span>
<span class="4315045256729533150" onmouseenter="enter('4315045256729533150');" onmouseout="out('4315045256729533150');" style=""> 305         byte value = HPlusCoordinator.getScreenTime(getDevice().getAddress());                           </span>
<span class="3291452160875082121" onmouseenter="enter('3291452160875082121');" onmouseout="out('3291452160875082121');" style=""> 306         transaction.write(ctrlCharacteristic, new byte[]{                                                </span>
<span class="-6949628958147360848" onmouseenter="enter('-6949628958147360848');" onmouseout="out('-6949628958147360848');" style=""> 307                 HPlusConstants.CMD_SET_SCREENTIME,                                                       </span>
<span class="1200713371940080677" onmouseenter="enter('1200713371940080677');" onmouseout="out('1200713371940080677');" style=""> 308                 value                                                                                    </span>
<span  style=""> 309                                                                                                          </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 310         });                                                                                              </span>
<span class="2297715846939503398" onmouseenter="enter('2297715846939503398');" onmouseout="out('2297715846939503398');" style=""> 311         return this;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 312     }                                                                                                    </span>
<span  style=""> 313                                                                                                          </span>
<span class="-5197767512792012744" onmouseenter="enter('-5197767512792012744');" onmouseout="out('-5197767512792012744');" style=""> 314     private HPlusSupport setAllDayHeart(TransactionBuilder transaction) {                                </span>
<span  style=""> 315                                                                                                          </span>
<span class="-7482590365127471239" onmouseenter="enter('-7482590365127471239');" onmouseout="out('-7482590365127471239');" style=""> 316         byte value = HPlusCoordinator.getAllDayHR(getDevice().getAddress());                             </span>
<span  style=""> 317                                                                                                          </span>
<span class="3291452160875082121" onmouseenter="enter('3291452160875082121');" onmouseout="out('3291452160875082121');" style=""> 318         transaction.write(ctrlCharacteristic, new byte[]{                                                </span>
<span class="8318401178566544878" onmouseenter="enter('8318401178566544878');" onmouseout="out('8318401178566544878');" style=""> 319                 HPlusConstants.CMD_SET_ALLDAY_HRM,                                                       </span>
<span class="1200713371940080677" onmouseenter="enter('1200713371940080677');" onmouseout="out('1200713371940080677');" style=""> 320                 value                                                                                    </span>
<span  style=""> 321                                                                                                          </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 322         });                                                                                              </span>
<span  style=""> 323                                                                                                          </span>
<span class="2297715846939503398" onmouseenter="enter('2297715846939503398');" onmouseout="out('2297715846939503398');" style=""> 324         return this;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 325     }                                                                                                    </span>
<span  style=""> 326                                                                                                          </span>
<span class="-1399038394034113320" onmouseenter="enter('-1399038394034113320');" onmouseout="out('-1399038394034113320');" style=""> 327     private HPlusSupport setAlarm(TransactionBuilder transaction, Calendar t) {                          </span>
<span  style=""> 328                                                                                                          </span>
<span class="6467402380305076865" onmouseenter="enter('6467402380305076865');" onmouseout="out('6467402380305076865');" style=""> 329         byte hour = HPlusConstants.ARG_ALARM_DISABLE;                                                    </span>
<span class="-3281384072436167776" onmouseenter="enter('-3281384072436167776');" onmouseout="out('-3281384072436167776');" style=""> 330         byte minute = HPlusConstants.ARG_ALARM_DISABLE;                                                  </span>
<span  style=""> 331                                                                                                          </span>
<span class="-7115571877868547666" onmouseenter="enter('-7115571877868547666');" onmouseout="out('-7115571877868547666');" style=""> 332         if (t != null) {                                                                                 </span>
<span class="5339525172321764938" onmouseenter="enter('5339525172321764938');" onmouseout="out('5339525172321764938');" style=""> 333             hour = (byte) t.get(Calendar.HOUR_OF_DAY);                                                   </span>
<span class="5337471965635534220" onmouseenter="enter('5337471965635534220');" onmouseout="out('5337471965635534220');" style=""> 334             minute = (byte) t.get(Calendar.MINUTE);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 335         }                                                                                                </span>
<span  style=""> 336                                                                                                          </span>
<span class="-3840280779505156671" onmouseenter="enter('-3840280779505156671');" onmouseout="out('-3840280779505156671');" style=""> 337         transaction.write(ctrlCharacteristic, new byte[]{HPlusConstants.CMD_SET_ALARM,                   </span>
<span class="-5045918625335939481" onmouseenter="enter('-5045918625335939481');" onmouseout="out('-5045918625335939481');" style=""> 338                 hour,                                                                                    </span>
<span class="-2395728393329392091" onmouseenter="enter('-2395728393329392091');" onmouseout="out('-2395728393329392091');" style=""> 339                 minute});                                                                                </span>
<span  style=""> 340                                                                                                          </span>
<span class="2297715846939503398" onmouseenter="enter('2297715846939503398');" onmouseout="out('2297715846939503398');" style=""> 341         return this;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 342     }                                                                                                    </span>
<span  style=""> 343                                                                                                          </span>
<span class="-791908888061445625" onmouseenter="enter('-791908888061445625');" onmouseout="out('-791908888061445625');" style=""> 344     private HPlusSupport setFindMe(TransactionBuilder transaction, boolean state) {                      </span>
<span class="7282700573083723681" onmouseenter="enter('7282700573083723681');" onmouseout="out('7282700573083723681');" style=""> 345         //TODO: Find how this works                                                                      </span>
<span  style=""> 346                                                                                                          </span>
<span class="-2705361656414002162" onmouseenter="enter('-2705361656414002162');" onmouseout="out('-2705361656414002162');" style=""> 347         byte[] msg = new byte[2];                                                                        </span>
<span class="5997450077450443173" onmouseenter="enter('5997450077450443173');" onmouseout="out('5997450077450443173');" style=""> 348         msg[0] = HPlusConstants.CMD_SET_FINDME;                                                          </span>
<span  style=""> 349                                                                                                          </span>
<span class="7403209030499211268" onmouseenter="enter('7403209030499211268');" onmouseout="out('7403209030499211268');" style=""> 350         if (state)                                                                                       </span>
<span class="3636634837394653002" onmouseenter="enter('3636634837394653002');" onmouseout="out('3636634837394653002');" style=""> 351             msg[1] = HPlusConstants.ARG_FINDME_ON;                                                       </span>
<span class="-7436048164614400339" onmouseenter="enter('-7436048164614400339');" onmouseout="out('-7436048164614400339');" style=""> 352         else                                                                                             </span>
<span class="8074200006318753451" onmouseenter="enter('8074200006318753451');" onmouseout="out('8074200006318753451');" style=""> 353             msg[1] = HPlusConstants.ARG_FINDME_OFF;                                                      </span>
<span  style=""> 354                                                                                                          </span>
<span class="-7204010731863731309" onmouseenter="enter('-7204010731863731309');" onmouseout="out('-7204010731863731309');" style=""> 355         transaction.write(ctrlCharacteristic, msg);                                                      </span>
<span class="2297715846939503398" onmouseenter="enter('2297715846939503398');" onmouseout="out('2297715846939503398');" style=""> 356         return this;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 357     }                                                                                                    </span>
<span  style=""> 358                                                                                                          </span>
<span class="-5684646578701203654" onmouseenter="enter('-5684646578701203654');" onmouseout="out('-5684646578701203654');" style=""> 359     private HPlusSupport requestDeviceInfo(TransactionBuilder builder) {                                 </span>
<span class="3573392645117931820" onmouseenter="enter('3573392645117931820');" onmouseout="out('3573392645117931820');" style=""> 360         // HPlus devices seem to report some information in an alternative manner                        </span>
<span class="-8697440581090313181" onmouseenter="enter('-8697440581090313181');" onmouseout="out('-8697440581090313181');" style=""> 361         builder.write(ctrlCharacteristic, new byte[]{HPlusConstants.CMD_GET_DEVICE_ID});                 </span>
<span class="485503605876832302" onmouseenter="enter('485503605876832302');" onmouseout="out('485503605876832302');" style=""> 362         builder.write(ctrlCharacteristic, new byte[]{HPlusConstants.CMD_GET_VERSION});                   </span>
<span  style=""> 363                                                                                                          </span>
<span class="2297715846939503398" onmouseenter="enter('2297715846939503398');" onmouseout="out('2297715846939503398');" style=""> 364         return this;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 365     }                                                                                                    </span>
<span  style=""> 366                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 367     @Override                                                                                            </span>
<span class="-5141762163842231173" onmouseenter="enter('-5141762163842231173');" onmouseout="out('-5141762163842231173');" style=""> 368     public boolean useAutoConnect() {                                                                    </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 369         return true;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 370     }                                                                                                    </span>
<span  style=""> 371                                                                                                          </span>
<span class="4975694330800448779" onmouseenter="enter('4975694330800448779');" onmouseout="out('4975694330800448779');" style=""> 372     private void handleDeviceInfo(DeviceInfo info) {                                                     </span>
<span class="370366693446993512" onmouseenter="enter('370366693446993512');" onmouseout="out('370366693446993512');" style=""> 373         LOG.warn(&quot;Device info: &quot; + info);                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 374     }                                                                                                    </span>
<span  style=""> 375                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 376     @Override                                                                                            </span>
<span class="-116609517646424186" onmouseenter="enter('-116609517646424186');" onmouseout="out('-116609517646424186');" style=""> 377     public void onNotification(NotificationSpec notificationSpec) {                                      </span>
<span class="-2323011847991818474" onmouseenter="enter('-2323011847991818474');" onmouseout="out('-2323011847991818474');" style=""> 378         //TODO: Show different notifications according to source as Band supports this                   </span>
<span class="6488462260965955164" onmouseenter="enter('6488462260965955164');" onmouseout="out('6488462260965955164');" style=""><abbr title=" 379         //LOG.info(&quot;OnNotification: Title: &quot;+notificationSpec.title+&quot; Body: &quot;+notificationSpec.body+&quot; Source: &quot;+notificationSpec.sourceName+&quot; Sender: &quot;+notificationSpec.sender+&quot; Subject: &quot;+notificationSpec.subject);"> 379         //LOG.info(&quot;OnNotification: Title: &quot;+notificationSpec.title+&quot; Body: &quot;+notificationSpec.body+&quot; SouðŸ”µ</abbr></span>
<span class="-2578227233159539388" onmouseenter="enter('-2578227233159539388');" onmouseout="out('-2578227233159539388');" style=""> 380         showText(notificationSpec.title, notificationSpec.body);                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 381     }                                                                                                    </span>
<span  style=""> 382                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 383     @Override                                                                                            </span>
<span class="-1102873404195143085" onmouseenter="enter('-1102873404195143085');" onmouseout="out('-1102873404195143085');" style=""> 384     public void onDeleteNotification(int id) {                                                           </span>
<span  style=""> 385                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 386     }                                                                                                    </span>
<span  style=""> 387                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 388     @Override                                                                                            </span>
<span class="7164248173527032001" onmouseenter="enter('7164248173527032001');" onmouseout="out('7164248173527032001');" style=""> 389     public void onSetTime() {                                                                            </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 390         try {                                                                                            </span>
<span class="8378030939534756566" onmouseenter="enter('8378030939534756566');" onmouseout="out('8378030939534756566');" style=""> 391             TransactionBuilder builder = performInitialized(&quot;time&quot;);                                     </span>
<span class="-244233841179675239" onmouseenter="enter('-244233841179675239');" onmouseout="out('-244233841179675239');" style=""> 392             setCurrentDate(builder);                                                                     </span>
<span class="7377265401852080297" onmouseenter="enter('7377265401852080297');" onmouseout="out('7377265401852080297');" style=""> 393             setCurrentTime(builder);                                                                     </span>
<span class="3761800854751581723" onmouseenter="enter('3761800854751581723');" onmouseout="out('3761800854751581723');" style=""> 394             performConnected(builder.getTransaction());                                                  </span>
<span class="7080241092423381085" onmouseenter="enter('7080241092423381085');" onmouseout="out('7080241092423381085');" style=""> 395         } catch (IOException e) {                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 396         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 397     }                                                                                                    </span>
<span  style=""> 398                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 399     @Override                                                                                            </span>
<span class="-6473317888357330260" onmouseenter="enter('-6473317888357330260');" onmouseout="out('-6473317888357330260');" style=""> 400     public void onSetAlarms(ArrayList&lt;? extends Alarm&gt; alarms) {                                         </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 401         try {                                                                                            </span>
<span class="-1278421083116070762" onmouseenter="enter('-1278421083116070762');" onmouseout="out('-1278421083116070762');" style=""> 402             TransactionBuilder builder = performInitialized(&quot;alarm&quot;);                                    </span>
<span class="-7996805109404385335" onmouseenter="enter('-7996805109404385335');" onmouseout="out('-7996805109404385335');" style=""> 403             for (Alarm alarm : alarms) {                                                                 </span>
<span class="8402788731508072907" onmouseenter="enter('8402788731508072907');" onmouseout="out('8402788731508072907');" style=""> 404                 if (!alarm.isEnabled()) {                                                                </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style=""> 405                     continue;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 406                 }                                                                                        </span>
<span class="7969578938958146935" onmouseenter="enter('7969578938958146935');" onmouseout="out('7969578938958146935');" style=""> 407                 // Not available                                                                         </span>
<span class="1282001233972079875" onmouseenter="enter('1282001233972079875');" onmouseout="out('1282001233972079875');" style=""> 408                 if (alarm.isSmartWakeup()) {                                                             </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style=""> 409                     continue;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 410                 }                                                                                        </span>
<span class="-2323525561533640256" onmouseenter="enter('-2323525561533640256');" onmouseout="out('-2323525561533640256');" style=""> 411                 Calendar t = alarm.getAlarmCal();                                                        </span>
<span class="-1264397343868138084" onmouseenter="enter('-1264397343868138084');" onmouseout="out('-1264397343868138084');" style=""> 412                 setAlarm(builder, t);                                                                    </span>
<span class="-5534937907083456817" onmouseenter="enter('-5534937907083456817');" onmouseout="out('-5534937907083456817');" style=""> 413                 builder.queue(getQueue());                                                               </span>
<span class="8097986474420678749" onmouseenter="enter('8097986474420678749');" onmouseout="out('8097986474420678749');" style=""><abbr title=" 414                 GB.toast(getContext(), getContext().getString(R.string.user_feedback_miband_set_alarms_ok), Toast.LENGTH_SHORT, GB.INFO);"> 414                 GB.toast(getContext(), getContext().getString(R.string.user_feedback_miband_set_alarms_okðŸ”µ</abbr></span>
<span class="-61361200311866959" onmouseenter="enter('-61361200311866959');" onmouseout="out('-61361200311866959');" style=""> 415                 return;// Only first alarm                                                               </span>
<span  style=""> 416                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 417             }                                                                                            </span>
<span class="3975187194000728744" onmouseenter="enter('3975187194000728744');" onmouseout="out('3975187194000728744');" style=""> 418             setAlarm(builder, null);                                                                     </span>
<span class="3761800854751581723" onmouseenter="enter('3761800854751581723');" onmouseout="out('3761800854751581723');" style=""> 419             performConnected(builder.getTransaction());                                                  </span>
<span class="-2313180102689307633" onmouseenter="enter('-2313180102689307633');" onmouseout="out('-2313180102689307633');" style=""><abbr title=" 420             GB.toast(getContext(), getContext().getString(R.string.user_feedback_all_alarms_disabled), Toast.LENGTH_SHORT, GB.INFO);"> 420             GB.toast(getContext(), getContext().getString(R.string.user_feedback_all_alarms_disabled), ToðŸ”µ</abbr></span>
<span class="-3589222456918676513" onmouseenter="enter('-3589222456918676513');" onmouseout="out('-3589222456918676513');" style=""> 421         } catch (java.lang.Exception e) {                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 422         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 423     }                                                                                                    </span>
<span  style=""> 424                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 425     @Override                                                                                            </span>
<span class="8502851833159229707" onmouseenter="enter('8502851833159229707');" onmouseout="out('8502851833159229707');" style=""> 426     public void onSetCallState(CallSpec callSpec) {                                                      </span>
<span class="4226096810368966115" onmouseenter="enter('4226096810368966115');" onmouseout="out('4226096810368966115');" style=""> 427         switch (callSpec.command) {                                                                      </span>
<span class="4765207307001745691" onmouseenter="enter('4765207307001745691');" onmouseout="out('4765207307001745691');" style=""> 428             case CallSpec.CALL_INCOMING: {                                                               </span>
<span class="-8067308976018849552" onmouseenter="enter('-8067308976018849552');" onmouseout="out('-8067308976018849552');" style=""> 429                 showIncomingCall(callSpec.name, callSpec.number);                                        </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 430                 break;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 431             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 432         }                                                                                                </span>
<span  style=""> 433                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 434     }                                                                                                    </span>
<span  style=""> 435                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 436     @Override                                                                                            </span>
<span class="8238257195410140286" onmouseenter="enter('8238257195410140286');" onmouseout="out('8238257195410140286');" style=""> 437     public void onSetCannedMessages(CannedMessagesSpec cannedMessagesSpec) {                             </span>
<span class="-2981468772764664347" onmouseenter="enter('-2981468772764664347');" onmouseout="out('-2981468772764664347');" style=""> 438         LOG.info(&quot;Canned Messages: &quot; + cannedMessagesSpec);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 439     }                                                                                                    </span>
<span  style=""> 440                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 441     @Override                                                                                            </span>
<span class="8228188929931998548" onmouseenter="enter('8228188929931998548');" onmouseout="out('8228188929931998548');" style=""> 442     public void onSetMusicState(MusicStateSpec stateSpec) {                                              </span>
<span  style=""> 443                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 444     }                                                                                                    </span>
<span  style=""> 445                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 446     @Override                                                                                            </span>
<span class="-4182706906721092498" onmouseenter="enter('-4182706906721092498');" onmouseout="out('-4182706906721092498');" style=""> 447     public void onSetMusicInfo(MusicSpec musicSpec) {                                                    </span>
<span  style=""> 448                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 449     }                                                                                                    </span>
<span  style=""> 450                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 451     @Override                                                                                            </span>
<span class="-8425797677863799500" onmouseenter="enter('-8425797677863799500');" onmouseout="out('-8425797677863799500');" style=""> 452     public void onEnableRealtimeSteps(boolean enable) {                                                  </span>
<span class="7623304499723183910" onmouseenter="enter('7623304499723183910');" onmouseout="out('7623304499723183910');" style=""> 453         onEnableRealtimeHeartRateMeasurement(enable);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 454     }                                                                                                    </span>
<span  style=""> 455                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 456     @Override                                                                                            </span>
<span class="-4135655620136168708" onmouseenter="enter('-4135655620136168708');" onmouseout="out('-4135655620136168708');" style=""> 457     public void onInstallApp(Uri uri) {                                                                  </span>
<span  style=""> 458                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 459     }                                                                                                    </span>
<span  style=""> 460                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 461     @Override                                                                                            </span>
<span class="-3322711972275217450" onmouseenter="enter('-3322711972275217450');" onmouseout="out('-3322711972275217450');" style=""> 462     public void onAppInfoReq() {                                                                         </span>
<span  style=""> 463                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 464     }                                                                                                    </span>
<span  style=""> 465                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 466     @Override                                                                                            </span>
<span class="1692097554900603024" onmouseenter="enter('1692097554900603024');" onmouseout="out('1692097554900603024');" style=""> 467     public void onAppStart(UUID uuid, boolean start) {                                                   </span>
<span  style=""> 468                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 469     }                                                                                                    </span>
<span  style=""> 470                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 471     @Override                                                                                            </span>
<span class="7633110766708892729" onmouseenter="enter('7633110766708892729');" onmouseout="out('7633110766708892729');" style=""> 472     public void onAppDelete(UUID uuid) {                                                                 </span>
<span  style=""> 473                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 474     }                                                                                                    </span>
<span  style=""> 475                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 476     @Override                                                                                            </span>
<span class="-862897393933438838" onmouseenter="enter('-862897393933438838');" onmouseout="out('-862897393933438838');" style=""> 477     public void onAppConfiguration(UUID appUuid, String config) {                                        </span>
<span  style=""> 478                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 479     }                                                                                                    </span>
<span  style=""> 480                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 481     @Override                                                                                            </span>
<span class="-2513514137107402976" onmouseenter="enter('-2513514137107402976');" onmouseout="out('-2513514137107402976');" style=""> 482     public void onAppReorder(UUID[] uuids) {                                                             </span>
<span  style=""> 483                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 484     }                                                                                                    </span>
<span  style=""> 485                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 486     @Override                                                                                            </span>
<span class="-3215171005460530491" onmouseenter="enter('-3215171005460530491');" onmouseout="out('-3215171005460530491');" style=""> 487     public void onFetchActivityData() {                                                                  </span>
<span class="-7862635836636974806" onmouseenter="enter('-7862635836636974806');" onmouseout="out('-7862635836636974806');" style=""> 488         if (syncHelper == null) {                                                                        </span>
<span class="-7391178071599224830" onmouseenter="enter('-7391178071599224830');" onmouseout="out('-7391178071599224830');" style=""> 489             syncHelper = new HPlusHandlerThread(gbDevice, getContext(), this);                           </span>
<span class="-1903424543284802769" onmouseenter="enter('-1903424543284802769');" onmouseout="out('-1903424543284802769');" style=""> 490             syncHelper.start();                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 491         }                                                                                                </span>
<span class="-1977462876553727609" onmouseenter="enter('-1977462876553727609');" onmouseout="out('-1977462876553727609');" style=""> 492         syncHelper.sync();                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 493     }                                                                                                    </span>
<span  style=""> 494                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 495     @Override                                                                                            </span>
<span class="-3494298342935464482" onmouseenter="enter('-3494298342935464482');" onmouseout="out('-3494298342935464482');" style=""> 496     public void onReboot() {                                                                             </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 497         try {                                                                                            </span>
<span class="867466265491236176" onmouseenter="enter('867466265491236176');" onmouseout="out('867466265491236176');" style=""> 498             getQueue().clear();                                                                          </span>
<span class="2354100081541725399" onmouseenter="enter('2354100081541725399');" onmouseout="out('2354100081541725399');" style=""> 499             TransactionBuilder builder = performInitialized(&quot;Shutdown&quot;);                                 </span>
<span class="1055397431528422053" onmouseenter="enter('1055397431528422053');" onmouseout="out('1055397431528422053');" style=""><abbr title=" 500             builder.write(ctrlCharacteristic, new byte[]{ HPlusConstants.CMD_SHUTDOWN, HPlusConstants.ARG_SHUTDOWN_EN });"> 500             builder.write(ctrlCharacteristic, new byte[]{ HPlusConstants.CMD_SHUTDOWN, HPlusConstants.ARGðŸ”µ</abbr></span>
<span class="3761800854751581723" onmouseenter="enter('3761800854751581723');" onmouseout="out('3761800854751581723');" style=""> 501             performConnected(builder.getTransaction());                                                  </span>
<span class="-3589222456918676513" onmouseenter="enter('-3589222456918676513');" onmouseout="out('-3589222456918676513');" style=""> 502         } catch (java.lang.Exception e) {                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 503         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 504     }                                                                                                    </span>
<span  style=""> 505                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 506     @Override                                                                                            </span>
<span class="-9008385526233139735" onmouseenter="enter('-9008385526233139735');" onmouseout="out('-9008385526233139735');" style=""> 507     public void onHeartRateTest() {                                                                      </span>
<span class="867466265491236176" onmouseenter="enter('867466265491236176');" onmouseout="out('867466265491236176');" style=""> 508         getQueue().clear();                                                                              </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 509         try {                                                                                            </span>
<span class="6333941902014570384" onmouseenter="enter('6333941902014570384');" onmouseout="out('6333941902014570384');" style=""> 510             TransactionBuilder builder = performInitialized(&quot;HeartRateTest&quot;);                            </span>
<span class="-6691459402683389910" onmouseenter="enter('-6691459402683389910');" onmouseout="out('-6691459402683389910');" style=""><abbr title=" 511             builder.write(ctrlCharacteristic, new byte[]{ HPlusConstants.CMD_SET_HEARTRATE_STATE, HPlusConstants.ARG_HEARTRATE_MEASURE_ON });// Set Real Time... ?"> 511             builder.write(ctrlCharacteristic, new byte[]{ HPlusConstants.CMD_SET_HEARTRATE_STATE, HPlusCoðŸ”µ</abbr></span>
<span  style=""> 512                                                                                                          </span>
<span class="3761800854751581723" onmouseenter="enter('3761800854751581723');" onmouseout="out('3761800854751581723');" style=""> 513             performConnected(builder.getTransaction());                                                  </span>
<span class="-3589222456918676513" onmouseenter="enter('-3589222456918676513');" onmouseout="out('-3589222456918676513');" style=""> 514         } catch (java.lang.Exception e) {                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 515         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 516     }                                                                                                    </span>
<span  style=""> 517                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 518     @Override                                                                                            </span>
<span class="2383065190612615413" onmouseenter="enter('2383065190612615413');" onmouseout="out('2383065190612615413');" style=""> 519     public void onEnableRealtimeHeartRateMeasurement(boolean enable) {                                   </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 520         try {                                                                                            </span>
<span class="5747251758811020424" onmouseenter="enter('5747251758811020424');" onmouseout="out('5747251758811020424');" style=""> 521             TransactionBuilder builder = performInitialized(&quot;realTimeHeartMeasurement&quot;);                 </span>
<span class="-3134908621992881846" onmouseenter="enter('-3134908621992881846');" onmouseout="out('-3134908621992881846');" style=""> 522             byte state;                                                                                  </span>
<span class="-2074635852143506608" onmouseenter="enter('-2074635852143506608');" onmouseout="out('-2074635852143506608');" style=""> 523             if (enable) {                                                                                </span>
<span class="4459610917207481324" onmouseenter="enter('4459610917207481324');" onmouseout="out('4459610917207481324');" style=""> 524                 state = HPlusConstants.ARG_HEARTRATE_ALLDAY_ON;                                          </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 525             } else {                                                                                     </span>
<span class="237470636204788169" onmouseenter="enter('237470636204788169');" onmouseout="out('237470636204788169');" style=""> 526                 state = HPlusConstants.ARG_HEARTRATE_ALLDAY_OFF;                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 527             }                                                                                            </span>
<span class="6393016765421003821" onmouseenter="enter('6393016765421003821');" onmouseout="out('6393016765421003821');" style=""> 528             builder.write(ctrlCharacteristic, new byte[]{ HPlusConstants.CMD_SET_ALLDAY_HRM, state });   </span>
<span class="3761800854751581723" onmouseenter="enter('3761800854751581723');" onmouseout="out('3761800854751581723');" style=""> 529             performConnected(builder.getTransaction());                                                  </span>
<span class="-3589222456918676513" onmouseenter="enter('-3589222456918676513');" onmouseout="out('-3589222456918676513');" style=""> 530         } catch (java.lang.Exception e) {                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 531         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 532     }                                                                                                    </span>
<span  style=""> 533                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 534     @Override                                                                                            </span>
<span class="-3287587973518064190" onmouseenter="enter('-3287587973518064190');" onmouseout="out('-3287587973518064190');" style=""> 535     public void onFindDevice(boolean start) {                                                            </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 536         try {                                                                                            </span>
<span class="175553782406953484" onmouseenter="enter('175553782406953484');" onmouseout="out('175553782406953484');" style=""> 537             TransactionBuilder builder = performInitialized(&quot;findMe&quot;);                                   </span>
<span class="3618522043245605826" onmouseenter="enter('3618522043245605826');" onmouseout="out('3618522043245605826');" style=""> 538             setFindMe(builder, start);                                                                   </span>
<span class="3761800854751581723" onmouseenter="enter('3761800854751581723');" onmouseout="out('3761800854751581723');" style=""> 539             performConnected(builder.getTransaction());                                                  </span>
<span class="7080241092423381085" onmouseenter="enter('7080241092423381085');" onmouseout="out('7080241092423381085');" style=""> 540         } catch (IOException e) {                                                                        </span>
<span class="6289081880581889152" onmouseenter="enter('6289081880581889152');" onmouseout="out('6289081880581889152');" style=""><abbr title=" 541             GB.toast(getContext(), &quot;Error toggling Find Me: &quot; + e.getLocalizedMessage(), Toast.LENGTH_LONG, GB.ERROR);"> 541             GB.toast(getContext(), &quot;Error toggling Find Me: &quot; + e.getLocalizedMessage(), Toast.LENGTH_LONðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 542         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 543     }                                                                                                    </span>
<span  style=""> 544                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 545     @Override                                                                                            </span>
<span class="6065808185552597400" onmouseenter="enter('6065808185552597400');" onmouseout="out('6065808185552597400');" style=""> 546     public void onSetConstantVibration(int intensity) {                                                  </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 547         try {                                                                                            </span>
<span class="-1189139726584538540" onmouseenter="enter('-1189139726584538540');" onmouseout="out('-1189139726584538540');" style=""> 548             TransactionBuilder builder = performInitialized(&quot;vibration&quot;);                                </span>
<span class="3266802087250163024" onmouseenter="enter('3266802087250163024');" onmouseout="out('3266802087250163024');" style=""> 549             byte[] msg = new byte[15];                                                                   </span>
<span class="6154219539807733297" onmouseenter="enter('6154219539807733297');" onmouseout="out('6154219539807733297');" style=""> 550             msg[0] = HPlusConstants.CMD_SET_INCOMING_CALL_NUMBER;                                        </span>
<span class="679374076965666421" onmouseenter="enter('679374076965666421');" onmouseout="out('679374076965666421');" style=""> 551             for (int i = 0; i &lt; (msg.length - 1); i++) {                                                 </span>
<span class="-2739572983456933242" onmouseenter="enter('-2739572983456933242');" onmouseout="out('-2739572983456933242');" style=""> 552                 msg[i + 1] = ((byte) (&quot;GadgetBridge&quot;.charAt(i)));                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 553             }                                                                                            </span>
<span class="-6541237243628611070" onmouseenter="enter('-6541237243628611070');" onmouseout="out('-6541237243628611070');" style=""> 554             builder.write(ctrlCharacteristic, msg);                                                      </span>
<span class="3761800854751581723" onmouseenter="enter('3761800854751581723');" onmouseout="out('3761800854751581723');" style=""> 555             performConnected(builder.getTransaction());                                                  </span>
<span class="7080241092423381085" onmouseenter="enter('7080241092423381085');" onmouseout="out('7080241092423381085');" style=""> 556         } catch (IOException e) {                                                                        </span>
<span class="-8668891040554562167" onmouseenter="enter('-8668891040554562167');" onmouseout="out('-8668891040554562167');" style=""><abbr title=" 557             GB.toast(getContext(), &quot;Error setting Vibration: &quot; + e.getLocalizedMessage(), Toast.LENGTH_LONG, GB.ERROR);"> 557             GB.toast(getContext(), &quot;Error setting Vibration: &quot; + e.getLocalizedMessage(), Toast.LENGTH_LOðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 558         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 559     }                                                                                                    </span>
<span  style=""> 560                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 561     @Override                                                                                            </span>
<span class="-3293819866797459784" onmouseenter="enter('-3293819866797459784');" onmouseout="out('-3293819866797459784');" style=""> 562     public void onScreenshotReq() {                                                                      </span>
<span  style=""> 563                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 564     }                                                                                                    </span>
<span  style=""> 565                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 566     @Override                                                                                            </span>
<span class="-2597044235576493624" onmouseenter="enter('-2597044235576493624');" onmouseout="out('-2597044235576493624');" style=""> 567     public void onEnableHeartRateSleepSupport(boolean enable) {                                          </span>
<span class="7623304499723183910" onmouseenter="enter('7623304499723183910');" onmouseout="out('7623304499723183910');" style=""> 568         onEnableRealtimeHeartRateMeasurement(enable);                                                    </span>
<span  style=""> 569                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 570     }                                                                                                    </span>
<span  style=""> 571                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 572     @Override                                                                                            </span>
<span class="-7200644583722212481" onmouseenter="enter('-7200644583722212481');" onmouseout="out('-7200644583722212481');" style=""> 573     public void onAddCalendarEvent(CalendarEventSpec calendarEventSpec) {                                </span>
<span  style=""> 574                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 575     }                                                                                                    </span>
<span  style=""> 576                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 577     @Override                                                                                            </span>
<span class="2890386202777848228" onmouseenter="enter('2890386202777848228');" onmouseout="out('2890386202777848228');" style=""> 578     public void onDeleteCalendarEvent(byte type, long id) {                                              </span>
<span  style=""> 579                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 580     }                                                                                                    </span>
<span  style=""> 581                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 582     @Override                                                                                            </span>
<span class="349159621018699769" onmouseenter="enter('349159621018699769');" onmouseout="out('349159621018699769');" style=""> 583     public void onSendConfiguration(String config) {                                                     </span>
<span class="-7846666641684196127" onmouseenter="enter('-7846666641684196127');" onmouseout="out('-7846666641684196127');" style=""> 584         LOG.info(&quot;Send Configuration: &quot; + config);                                                       </span>
<span  style=""> 585                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 586     }                                                                                                    </span>
<span  style=""> 587                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 588     @Override                                                                                            </span>
<span class="-1180224994468071186" onmouseenter="enter('-1180224994468071186');" onmouseout="out('-1180224994468071186');" style=""> 589     public void onTestNewFunction() {                                                                    </span>
<span class="5914733006117960203" onmouseenter="enter('5914733006117960203');" onmouseout="out('5914733006117960203');" style=""> 590         LOG.info(&quot;Test New Function&quot;);                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 591     }                                                                                                    </span>
<span  style=""> 592                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 593     @Override                                                                                            </span>
<span class="-6167041048283935417" onmouseenter="enter('-6167041048283935417');" onmouseout="out('-6167041048283935417');" style=""> 594     public void onSendWeather(WeatherSpec weatherSpec) {                                                 </span>
<span  style=""> 595                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 596     }                                                                                                    </span>
<span  style=""> 597                                                                                                          </span>
<span class="5880921854020880068" onmouseenter="enter('5880921854020880068');" onmouseout="out('5880921854020880068');" style=""> 598     public void setUnicodeSupport(boolean support){                                                      </span>
<span class="6042074506485087881" onmouseenter="enter('6042074506485087881');" onmouseout="out('6042074506485087881');" style=""> 599         HPlusCoordinator.setUnicodeSupport(gbDevice.getAddress(), support);                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 600     }                                                                                                    </span>
<span  style=""> 601                                                                                                          </span>
<span class="-4706054677770626804" onmouseenter="enter('-4706054677770626804');" onmouseout="out('-4706054677770626804');" style=""> 602     private void showIncomingCall(String name, String rawNumber) {                                       </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 603         try {                                                                                            </span>
<span class="-8981057032029232134" onmouseenter="enter('-8981057032029232134');" onmouseout="out('-8981057032029232134');" style=""> 604             TransactionBuilder builder = performInitialized(&quot;incomingCall&quot;);                             </span>
<span class="-5197299561161313254" onmouseenter="enter('-5197299561161313254');" onmouseout="out('-5197299561161313254');" style=""> 605             // Enable call notifications                                                                 </span>
<span class="6085380443009919645" onmouseenter="enter('6085380443009919645');" onmouseout="out('6085380443009919645');" style=""> 606             builder.write(ctrlCharacteristic, new byte[]{ HPlusConstants.CMD_ACTION_INCOMING_CALL, 1 }); </span>
<span class="1720008812912980480" onmouseenter="enter('1720008812912980480');" onmouseout="out('1720008812912980480');" style=""> 607             // Show Call Icon                                                                            </span>
<span class="2146277211247345413" onmouseenter="enter('2146277211247345413');" onmouseout="out('2146277211247345413');" style=""><abbr title=" 608             builder.write(ctrlCharacteristic, new byte[]{ HPlusConstants.CMD_SET_INCOMING_CALL, HPlusConstants.ARG_INCOMING_CALL });"> 608             builder.write(ctrlCharacteristic, new byte[]{ HPlusConstants.CMD_SET_INCOMING_CALL, HPlusConsðŸ”µ</abbr></span>
<span class="8801601261434726216" onmouseenter="enter('8801601261434726216');" onmouseout="out('8801601261434726216');" style=""> 609             if (name != null) {                                                                          </span>
<span class="-1463217213013643309" onmouseenter="enter('-1463217213013643309');" onmouseout="out('-1463217213013643309');" style=""> 610                 byte[] msg = new byte[13];                                                               </span>
<span class="6946411005339922981" onmouseenter="enter('6946411005339922981');" onmouseout="out('6946411005339922981');" style=""> 611                 // Show call name                                                                        </span>
<span class="-8683355449631413963" onmouseenter="enter('-8683355449631413963');" onmouseout="out('-8683355449631413963');" style=""> 612                 for (int i = 0; i &lt; msg.length; i++) {                                                   </span>
<span class="-452829507499965658" onmouseenter="enter('-452829507499965658');" onmouseout="out('-452829507499965658');" style=""> 613                     msg[i] = &#x27; &#x27;;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 614                 }                                                                                        </span>
<span class="3205766085188191830" onmouseenter="enter('3205766085188191830');" onmouseout="out('3205766085188191830');" style=""> 615                 byte[] nameBytes = encodeStringToDevice(name);                                           </span>
<span class="9115750204504917300" onmouseenter="enter('9115750204504917300');" onmouseout="out('9115750204504917300');" style=""> 616                 for (int i = 0; (i &lt; nameBytes.length) &amp;&amp; (i &lt; (msg.length - 1)); i++) {                 </span>
<span class="6765965112598420400" onmouseenter="enter('6765965112598420400');" onmouseout="out('6765965112598420400');" style=""> 617                     msg[i + 1] = nameBytes[i];                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 618                 }                                                                                        </span>
<span class="-8475803122541257030" onmouseenter="enter('-8475803122541257030');" onmouseout="out('-8475803122541257030');" style=""> 619                 msg[0] = HPlusConstants.CMD_ACTION_DISPLAY_TEXT_NAME;                                    </span>
<span class="-6541237243628611070" onmouseenter="enter('-6541237243628611070');" onmouseout="out('-6541237243628611070');" style=""> 620                 builder.write(ctrlCharacteristic, msg);                                                  </span>
<span class="-2032388462516825457" onmouseenter="enter('-2032388462516825457');" onmouseout="out('-2032388462516825457');" style=""> 621                 msg[0] = HPlusConstants.CMD_ACTION_DISPLAY_TEXT_NAME_CN;                                 </span>
<span class="-6541237243628611070" onmouseenter="enter('-6541237243628611070');" onmouseout="out('-6541237243628611070');" style=""> 622                 builder.write(ctrlCharacteristic, msg);                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 623             }                                                                                            </span>
<span class="-9047047808323846100" onmouseenter="enter('-9047047808323846100');" onmouseout="out('-9047047808323846100');" style=""> 624             if (rawNumber != null) {                                                                     </span>
<span class="3592618537022379156" onmouseenter="enter('3592618537022379156');" onmouseout="out('3592618537022379156');" style=""> 625                 StringBuilder number = new StringBuilder();                                              </span>
<span class="6074809121305974863" onmouseenter="enter('6074809121305974863');" onmouseout="out('6074809121305974863');" style=""> 626                 // Clean up number as the device only accepts digits                                     </span>
<span class="9010108090093925813" onmouseenter="enter('9010108090093925813');" onmouseout="out('9010108090093925813');" style=""> 627                 for (char c : rawNumber.toCharArray()) {                                                 </span>
<span class="-3606938168735497741" onmouseenter="enter('-3606938168735497741');" onmouseout="out('-3606938168735497741');" style=""> 628                     if (Character.isDigit(c)) {                                                          </span>
<span class="-1236668618857566487" onmouseenter="enter('-1236668618857566487');" onmouseout="out('-1236668618857566487');" style=""> 629                         number.append(c);                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 630                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 631                 }                                                                                        </span>
<span class="-1463217213013643309" onmouseenter="enter('-1463217213013643309');" onmouseout="out('-1463217213013643309');" style=""> 632                 byte[] msg = new byte[13];                                                               </span>
<span class="2522188220422285815" onmouseenter="enter('2522188220422285815');" onmouseout="out('2522188220422285815');" style=""> 633                 // Show call number                                                                      </span>
<span class="-8683355449631413963" onmouseenter="enter('-8683355449631413963');" onmouseout="out('-8683355449631413963');" style=""> 634                 for (int i = 0; i &lt; msg.length; i++) {                                                   </span>
<span class="-452829507499965658" onmouseenter="enter('-452829507499965658');" onmouseout="out('-452829507499965658');" style=""> 635                     msg[i] = &#x27; &#x27;;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 636                 }                                                                                        </span>
<span class="4528804464429702635" onmouseenter="enter('4528804464429702635');" onmouseout="out('4528804464429702635');" style=""> 637                 for (int i = 0; (i &lt; number.length()) &amp;&amp; (i &lt; (msg.length - 1)); i++) {                  </span>
<span class="-2840805363122778361" onmouseenter="enter('-2840805363122778361');" onmouseout="out('-2840805363122778361');" style=""> 638                     msg[i + 1] = ((byte) (number.charAt(i)));                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 639                 }                                                                                        </span>
<span class="6154219539807733297" onmouseenter="enter('6154219539807733297');" onmouseout="out('6154219539807733297');" style=""> 640                 msg[0] = HPlusConstants.CMD_SET_INCOMING_CALL_NUMBER;                                    </span>
<span class="2195247688369690659" onmouseenter="enter('2195247688369690659');" onmouseout="out('2195247688369690659');" style=""> 641                 builder.wait(200);                                                                       </span>
<span class="-6541237243628611070" onmouseenter="enter('-6541237243628611070');" onmouseout="out('-6541237243628611070');" style=""> 642                 builder.write(ctrlCharacteristic, msg);                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 643             }                                                                                            </span>
<span class="3761800854751581723" onmouseenter="enter('3761800854751581723');" onmouseout="out('3761800854751581723');" style=""> 644             performConnected(builder.getTransaction());                                                  </span>
<span class="7080241092423381085" onmouseenter="enter('7080241092423381085');" onmouseout="out('7080241092423381085');" style=""> 645         } catch (IOException e) {                                                                        </span>
<span class="5607211826758247973" onmouseenter="enter('5607211826758247973');" onmouseout="out('5607211826758247973');" style=""><abbr title=" 646             GB.toast(getContext(), &quot;Error showing incoming call: &quot; + e.getLocalizedMessage(), Toast.LENGTH_LONG, GB.ERROR);"> 646             GB.toast(getContext(), &quot;Error showing incoming call: &quot; + e.getLocalizedMessage(), Toast.LENGTðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 647         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 648     }                                                                                                    </span>
<span  style=""> 649                                                                                                          </span>
<span class="2669430369160917091" onmouseenter="enter('2669430369160917091');" onmouseout="out('2669430369160917091');" style=""> 650     private void showText(String title, String body) {                                                   </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 651         try {                                                                                            </span>
<span class="8575811470010308677" onmouseenter="enter('8575811470010308677');" onmouseout="out('8575811470010308677');" style=""> 652             TransactionBuilder builder = performInitialized(&quot;notification&quot;);                             </span>
<span class="-5183659842430019699" onmouseenter="enter('-5183659842430019699');" onmouseout="out('-5183659842430019699');" style=""> 653             String message = &quot;&quot;;                                                                         </span>
<span class="-9055177896589632337" onmouseenter="enter('-9055177896589632337');" onmouseout="out('-9055177896589632337');" style=""> 654             if ((title != null) &amp;&amp; (title.length() &gt; 0)) {                                               </span>
<span class="-4567420344255546671" onmouseenter="enter('-4567420344255546671');" onmouseout="out('-4567420344255546671');" style=""> 655                 message = StringUtils.pad(StringUtils.truncate(title, 16), 16);// Limit title to top row </span>
<span  style=""> 656                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 657             }                                                                                            </span>
<span class="4413763009831532288" onmouseenter="enter('4413763009831532288');" onmouseout="out('4413763009831532288');" style=""> 658             if (body != null) {                                                                          </span>
<span class="-4827052322101785234" onmouseenter="enter('-4827052322101785234');" onmouseout="out('-4827052322101785234');" style=""> 659                 message += body;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 660             }                                                                                            </span>
<span class="-7267330840062528164" onmouseenter="enter('-7267330840062528164');" onmouseout="out('-7267330840062528164');" style=""> 661             byte[] messageBytes = encodeStringToDevice(message);                                         </span>
<span class="-6947936872233705603" onmouseenter="enter('-6947936872233705603');" onmouseout="out('-6947936872233705603');" style=""> 662             int length = messageBytes.length / 17;                                                       </span>
<span class="-5551337766943930400" onmouseenter="enter('-5551337766943930400');" onmouseout="out('-5551337766943930400');" style=""> 663             length = (length &gt; 5) ? 5 : length;                                                          </span>
<span class="-7160373298062172440" onmouseenter="enter('-7160373298062172440');" onmouseout="out('-7160373298062172440');" style=""><abbr title=" 664             builder.write(ctrlCharacteristic, new byte[]{ HPlusConstants.CMD_SET_INCOMING_MESSAGE, HPlusConstants.ARG_INCOMING_MESSAGE });"> 664             builder.write(ctrlCharacteristic, new byte[]{ HPlusConstants.CMD_SET_INCOMING_MESSAGE, HPlusCðŸ”µ</abbr></span>
<span class="5137813216632948730" onmouseenter="enter('5137813216632948730');" onmouseout="out('5137813216632948730');" style=""> 665             int remaining = Math.min(255, (messageBytes.length % 17) &gt; 0 ? length + 1 : length);         </span>
<span class="-6938126668542148541" onmouseenter="enter('-6938126668542148541');" onmouseout="out('-6938126668542148541');" style=""> 666             byte[] msg = new byte[20];                                                                   </span>
<span class="6283182582673736786" onmouseenter="enter('6283182582673736786');" onmouseout="out('6283182582673736786');" style=""> 667             msg[0] = HPlusConstants.CMD_ACTION_DISPLAY_TEXT;                                             </span>
<span class="7674180921650843090" onmouseenter="enter('7674180921650843090');" onmouseout="out('7674180921650843090');" style=""> 668             msg[1] = ((byte) (remaining));                                                               </span>
<span class="-4144994377075598776" onmouseenter="enter('-4144994377075598776');" onmouseout="out('-4144994377075598776');" style=""> 669             for (int i = 2; i &lt; msg.length; i++) {                                                       </span>
<span class="-452829507499965658" onmouseenter="enter('-452829507499965658');" onmouseout="out('-452829507499965658');" style=""> 670                 msg[i] = &#x27; &#x27;;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 671             }                                                                                            </span>
<span class="3830575522721686257" onmouseenter="enter('3830575522721686257');" onmouseout="out('3830575522721686257');" style=""> 672             int message_index = 0;                                                                       </span>
<span class="-2034332425768882561" onmouseenter="enter('-2034332425768882561');" onmouseout="out('-2034332425768882561');" style=""> 673             int i = 3;                                                                                   </span>
<span class="-1190413858175663168" onmouseenter="enter('-1190413858175663168');" onmouseout="out('-1190413858175663168');" style=""> 674             for (int j = 0; j &lt; messageBytes.length; j++) {                                              </span>
<span class="7313274589245642051" onmouseenter="enter('7313274589245642051');" onmouseout="out('7313274589245642051');" style=""> 675                 msg[i++] = messageBytes[j];                                                              </span>
<span class="2532902930176219444" onmouseenter="enter('2532902930176219444');" onmouseout="out('2532902930176219444');" style=""> 676                 if (i == msg.length) {                                                                   </span>
<span class="3910183690266069869" onmouseenter="enter('3910183690266069869');" onmouseout="out('3910183690266069869');" style=""> 677                     message_index++;                                                                     </span>
<span class="811557074344473929" onmouseenter="enter('811557074344473929');" onmouseout="out('811557074344473929');" style=""> 678                     msg[2] = ((byte) (message_index));                                                   </span>
<span class="-6541237243628611070" onmouseenter="enter('-6541237243628611070');" onmouseout="out('-6541237243628611070');" style=""> 679                     builder.write(ctrlCharacteristic, msg);                                              </span>
<span class="-2713623245355191357" onmouseenter="enter('-2713623245355191357');" onmouseout="out('-2713623245355191357');" style=""> 680                     msg = msg.clone();                                                                   </span>
<span class="-8562374652348615783" onmouseenter="enter('-8562374652348615783');" onmouseout="out('-8562374652348615783');" style=""> 681                     for (i = 3; i &lt; msg.length; i++) {                                                   </span>
<span class="-452829507499965658" onmouseenter="enter('-452829507499965658');" onmouseout="out('-452829507499965658');" style=""> 682                         msg[i] = &#x27; &#x27;;                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 683                     }                                                                                    </span>
<span class="8466516957618432289" onmouseenter="enter('8466516957618432289');" onmouseout="out('8466516957618432289');" style=""> 684                     if (message_index &lt; remaining) {                                                     </span>
<span class="-1159031305874409210" onmouseenter="enter('-1159031305874409210');" onmouseout="out('-1159031305874409210');" style=""> 685                         i = 3;                                                                           </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 686                     } else {                                                                             </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 687                         break;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 688                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 689                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 690             }                                                                                            </span>
<span class="-295800662826849942" onmouseenter="enter('-295800662826849942');" onmouseout="out('-295800662826849942');" style=""> 691             msg[2] = ((byte) (remaining));                                                               </span>
<span class="-6541237243628611070" onmouseenter="enter('-6541237243628611070');" onmouseout="out('-6541237243628611070');" style=""> 692             builder.write(ctrlCharacteristic, msg);                                                      </span>
<span class="3761800854751581723" onmouseenter="enter('3761800854751581723');" onmouseout="out('3761800854751581723');" style=""> 693             performConnected(builder.getTransaction());                                                  </span>
<span class="7080241092423381085" onmouseenter="enter('7080241092423381085');" onmouseout="out('7080241092423381085');" style=""> 694         } catch (IOException e) {                                                                        </span>
<span class="-3005578110211581534" onmouseenter="enter('-3005578110211581534');" onmouseout="out('-3005578110211581534');" style=""><abbr title=" 695             GB.toast(getContext(), &quot;Error showing device Notification: &quot; + e.getLocalizedMessage(), Toast.LENGTH_LONG, GB.ERROR);"> 695             GB.toast(getContext(), &quot;Error showing device Notification: &quot; + e.getLocalizedMessage(), ToastðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 696         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 697     }                                                                                                    </span>
<span  style=""> 698                                                                                                          </span>
<span class="2374016947018039193" onmouseenter="enter('2374016947018039193');" onmouseout="out('2374016947018039193');" style=""> 699     private void close() {                                                                               </span>
<span class="-7083324746063369835" onmouseenter="enter('-7083324746063369835');" onmouseout="out('-7083324746063369835');" style=""> 700         if (syncHelper != null) {                                                                        </span>
<span class="-7896063751358438536" onmouseenter="enter('-7896063751358438536');" onmouseout="out('-7896063751358438536');" style=""> 701             syncHelper.quit();                                                                           </span>
<span class="-2471739938777085601" onmouseenter="enter('-2471739938777085601');" onmouseout="out('-2471739938777085601');" style=""> 702             syncHelper.interrupt();                                                                      </span>
<span class="-9199515530023964212" onmouseenter="enter('-9199515530023964212');" onmouseout="out('-9199515530023964212');" style=""> 703             syncHelper = null;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 704         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 705     }                                                                                                    </span>
<span  style=""> 706                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 707     /**                                                                                                  </span>
<span class="-2663499463451487171" onmouseenter="enter('-2663499463451487171');" onmouseout="out('-2663499463451487171');" style=""> 708      * HPlus devices accept a subset of GB2312 with some modifications.                                  </span>
<span class="-5296208177179093503" onmouseenter="enter('-5296208177179093503');" onmouseout="out('-5296208177179093503');" style=""> 709      * This function will apply a custom transliteration.                                                </span>
<span class="-3958616819795834315" onmouseenter="enter('-3958616819795834315');" onmouseout="out('-3958616819795834315');" style=""> 710      * While related to the methods implemented in LanguageUtils. These are specific for HPLUS           </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 711      *                                                                                                   </span>
<span class="-1743400565649069450" onmouseenter="enter('-1743400565649069450');" onmouseout="out('-1743400565649069450');" style=""> 712      * @param s The String to transliterate                                                              </span>
<span class="2025757942853076636" onmouseenter="enter('2025757942853076636');" onmouseout="out('2025757942853076636');" style=""> 713      * @return An array of bytes ready to be sent to the device                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 714      */                                                                                                  </span>
<span class="-8823649745364399870" onmouseenter="enter('-8823649745364399870');" onmouseout="out('-8823649745364399870');" style=""> 715     private byte[] encodeStringToDevice(String s) {                                                      </span>
<span class="9112578812581115095" onmouseenter="enter('9112578812581115095');" onmouseout="out('9112578812581115095');" style=""> 716         List&lt;Byte&gt; outBytes = new ArrayList&lt;Byte&gt;();                                                     </span>
<span class="-2173296205160994735" onmouseenter="enter('-2173296205160994735');" onmouseout="out('-2173296205160994735');" style=""> 717         for (int i = 0; i &lt; s.length(); i++) {                                                           </span>
<span class="-425988238491649263" onmouseenter="enter('-425988238491649263');" onmouseout="out('-425988238491649263');" style=""> 718             Character c = s.charAt(i);                                                                   </span>
<span class="-6710548613110177700" onmouseenter="enter('-6710548613110177700');" onmouseout="out('-6710548613110177700');" style=""> 719             byte[] cs;                                                                                   </span>
<span class="-7646558473377848105" onmouseenter="enter('-7646558473377848105');" onmouseout="out('-7646558473377848105');" style=""> 720             if (HPlusConstants.transliterateMap.containsKey(c)) {                                        </span>
<span class="-6827180778581783411" onmouseenter="enter('-6827180778581783411');" onmouseout="out('-6827180778581783411');" style=""> 721                 cs = HPlusConstants.transliterateMap.get(c);                                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 722             } else {                                                                                     </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 723                 try {                                                                                    </span>
<span class="8636733370402938861" onmouseenter="enter('8636733370402938861');" onmouseout="out('8636733370402938861');" style=""> 724                     if (HPlusCoordinator.getUnicodeSupport(this.gbDevice.getAddress())) {                </span>
<span class="4466778639974351027" onmouseenter="enter('4466778639974351027');" onmouseout="out('4466778639974351027');" style=""> 725                         cs = c.toString().getBytes(&quot;Unicode&quot;);                                           </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 726                     } else {                                                                             </span>
<span class="637174697753777176" onmouseenter="enter('637174697753777176');" onmouseout="out('637174697753777176');" style=""> 727                         cs = c.toString().getBytes(&quot;GB2312&quot;);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 728                     }                                                                                    </span>
<span class="2368993151256970390" onmouseenter="enter('2368993151256970390');" onmouseout="out('2368993151256970390');" style=""> 729                 } catch (UnsupportedEncodingException e) {                                               </span>
<span class="-1977256116699816141" onmouseenter="enter('-1977256116699816141');" onmouseout="out('-1977256116699816141');" style=""> 730                     // Fallback. Result string may be strange, but better than nothing                   </span>
<span class="8503633407937514815" onmouseenter="enter('8503633407937514815');" onmouseout="out('8503633407937514815');" style=""> 731                     cs = c.toString().getBytes();                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 732                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 733             }                                                                                            </span>
<span class="2475597442728154655" onmouseenter="enter('2475597442728154655');" onmouseout="out('2475597442728154655');" style=""> 734             for (int j = 0; j &lt; cs.length; j++) {                                                        </span>
<span class="-3202096665861785787" onmouseenter="enter('-3202096665861785787');" onmouseout="out('-3202096665861785787');" style=""> 735                 outBytes.add(cs[j]);                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 736             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 737         }                                                                                                </span>
<span class="-3374475540404730530" onmouseenter="enter('-3374475540404730530');" onmouseout="out('-3374475540404730530');" style=""> 738         return ArrayUtils.toPrimitive(outBytes.toArray(new Byte[outBytes.size()]));                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 739     }                                                                                                    </span>
<span  style=""> 740                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 741     @Override                                                                                            </span>
<span class="-5661496586383940029" onmouseenter="enter('-5661496586383940029');" onmouseout="out('-5661496586383940029');" style=""><abbr title=" 742     public boolean onCharacteristicChanged(BluetoothGatt gatt, BluetoothGattCharacteristic characteristic) {"> 742     public boolean onCharacteristicChanged(BluetoothGatt gatt, BluetoothGattCharacteristic characteristicðŸ”µ</abbr></span>
<span class="3568353468682512593" onmouseenter="enter('3568353468682512593');" onmouseout="out('3568353468682512593');" style=""> 743         if (super.onCharacteristicChanged(gatt, characteristic)) {                                       </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 744             return true;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 745         }                                                                                                </span>
<span class="-554497628129246365" onmouseenter="enter('-554497628129246365');" onmouseout="out('-554497628129246365');" style=""> 746         UUID characteristicUUID = characteristic.getUuid();                                              </span>
<span class="-6511473927788972997" onmouseenter="enter('-6511473927788972997');" onmouseout="out('-6511473927788972997');" style=""> 747         byte[] data = characteristic.getValue();                                                         </span>
<span class="6185186103536267702" onmouseenter="enter('6185186103536267702');" onmouseout="out('6185186103536267702');" style=""> 748         if (data.length == 0) {                                                                          </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 749             return true;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 750         }                                                                                                </span>
<span class="-6174724810667438225" onmouseenter="enter('-6174724810667438225');" onmouseout="out('-6174724810667438225');" style=""> 751         switch (data[0]) {                                                                               </span>
<span class="773189393569293491" onmouseenter="enter('773189393569293491');" onmouseout="out('773189393569293491');" style=""> 752             case HPlusConstants.DATA_VERSION :                                                           </span>
<span class="8768314149750442676" onmouseenter="enter('8768314149750442676');" onmouseout="out('8768314149750442676');" style=""> 753             case HPlusConstants.DATA_VERSION1 :                                                          </span>
<span class="834208567599674439" onmouseenter="enter('834208567599674439');" onmouseout="out('834208567599674439');" style=""> 754                 return syncHelper.processVersion(data);                                                  </span>
<span class="8870628984334652836" onmouseenter="enter('8870628984334652836');" onmouseout="out('8870628984334652836');" style=""> 755             case HPlusConstants.DATA_STATS :                                                             </span>
<span class="6350511806657397549" onmouseenter="enter('6350511806657397549');" onmouseout="out('6350511806657397549');" style=""> 756                 boolean result = syncHelper.processRealtimeStats(data, HPlusCoordinator.getUserAge());   </span>
<span class="-275963108691733288" onmouseenter="enter('-275963108691733288');" onmouseout="out('-275963108691733288');" style=""> 757                 if (result) {                                                                            </span>
<span class="8289454395550276296" onmouseenter="enter('8289454395550276296');" onmouseout="out('8289454395550276296');" style=""> 758                     processExtraInfo(data);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 759                 }                                                                                        </span>
<span class="-6419540350677864751" onmouseenter="enter('-6419540350677864751');" onmouseout="out('-6419540350677864751');" style=""> 760                 return result;                                                                           </span>
<span class="472403134913289447" onmouseenter="enter('472403134913289447');" onmouseout="out('472403134913289447');" style=""> 761             case HPlusConstants.DATA_SLEEP :                                                             </span>
<span class="518826808593425602" onmouseenter="enter('518826808593425602');" onmouseout="out('518826808593425602');" style=""> 762                 return syncHelper.processIncomingSleepData(data);                                        </span>
<span class="1962531221608662737" onmouseenter="enter('1962531221608662737');" onmouseout="out('1962531221608662737');" style=""> 763             case HPlusConstants.DATA_STEPS :                                                             </span>
<span class="8674745804491038360" onmouseenter="enter('8674745804491038360');" onmouseout="out('8674745804491038360');" style=""> 764                 return syncHelper.processDaySummary(data);                                               </span>
<span class="-4153889573589768918" onmouseenter="enter('-4153889573589768918');" onmouseout="out('-4153889573589768918');" style=""> 765             case HPlusConstants.DATA_DAY_SUMMARY :                                                       </span>
<span class="3039348354009785860" onmouseenter="enter('3039348354009785860');" onmouseout="out('3039348354009785860');" style=""> 766             case HPlusConstants.DATA_DAY_SUMMARY_ALT :                                                   </span>
<span class="3311111969863762619" onmouseenter="enter('3311111969863762619');" onmouseout="out('3311111969863762619');" style=""> 767                 return syncHelper.processIncomingDaySlotData(data, HPlusCoordinator.getUserAge());       </span>
<span class="-9070997549099010602" onmouseenter="enter('-9070997549099010602');" onmouseout="out('-9070997549099010602');" style=""> 768             case HPlusConstants.DATA_UNKNOWN :                                                           </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 769                 return true;                                                                             </span>
<span class="3050734735710613783" onmouseenter="enter('3050734735710613783');" onmouseout="out('3050734735710613783');" style=""> 770             default :                                                                                    </span>
<span class="3966647212389508914" onmouseenter="enter('3966647212389508914');" onmouseout="out('3966647212389508914');" style=""><abbr title=" 771                 LOG.info(((&quot;Unhandled characteristic change: &quot; + characteristicUUID) + &quot; code: &quot;) + Arrays.toString(data));"> 771                 LOG.info(((&quot;Unhandled characteristic change: &quot; + characteristicUUID) + &quot; code: &quot;) + ArrayðŸ”µ</abbr></span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 772                 return true;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 773         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 774     }                                                                                                    </span>
<span  style=""> 775                                                                                                          </span>
<span class="747476474161797434" onmouseenter="enter('747476474161797434');" onmouseout="out('747476474161797434');" style=""> 776     private void processExtraInfo(byte[] data) {                                                         </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 777         try {                                                                                            </span>
<span class="3335414119067454274" onmouseenter="enter('3335414119067454274');" onmouseout="out('3335414119067454274');" style=""><abbr title=" 778             HPlusDataRecordRealtime record = new HPlusDataRecordRealtime(data, HPlusCoordinator.getUserAge());"> 778             HPlusDataRecordRealtime record = new HPlusDataRecordRealtime(data, HPlusCoordinator.getUserAgðŸ”µ</abbr></span>
<span class="-6654310698308599937" onmouseenter="enter('-6654310698308599937');" onmouseout="out('-6654310698308599937');" style=""> 779             handleBatteryInfo(record.battery);                                                           </span>
<span class="957024650015159745" onmouseenter="enter('957024650015159745');" onmouseout="out('957024650015159745');" style=""> 780             String DEVINFO_STEP = getContext().getString(R.string.chart_steps) + &quot;: &quot;;                   </span>
<span class="6721786647083530834" onmouseenter="enter('6721786647083530834');" onmouseout="out('6721786647083530834');" style=""> 781             String DEVINFO_DISTANCE = getContext().getString(R.string.distance) + &quot;: &quot;;                  </span>
<span class="-5544509155513691581" onmouseenter="enter('-5544509155513691581');" onmouseout="out('-5544509155513691581');" style=""> 782             String DEVINFO_CALORY = getContext().getString(R.string.calories) + &quot;: &quot;;                    </span>
<span class="-1747100185926561303" onmouseenter="enter('-1747100185926561303');" onmouseout="out('-1747100185926561303');" style=""> 783             String DEVINFO_HEART = getContext().getString(R.string.charts_legend_heartrate);             </span>
<span class="4539674976293838945" onmouseenter="enter('4539674976293838945');" onmouseout="out('4539674976293838945');" style=""> 784             String info = &quot;&quot;;                                                                            </span>
<span class="603487404869738075" onmouseenter="enter('603487404869738075');" onmouseout="out('603487404869738075');" style=""> 785             if (record.steps &gt; 0) {                                                                      </span>
<span class="2413964461192131335" onmouseenter="enter('2413964461192131335');" onmouseout="out('2413964461192131335');" style=""> 786                 info += (DEVINFO_STEP + String.valueOf(record.steps)) + &quot;   &quot;;                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 787             }                                                                                            </span>
<span class="-7382416609460855139" onmouseenter="enter('-7382416609460855139');" onmouseout="out('-7382416609460855139');" style=""> 788             if (record.distance &gt; 0) {                                                                   </span>
<span class="-6358655108845529856" onmouseenter="enter('-6358655108845529856');" onmouseout="out('-6358655108845529856');" style=""> 789                 info += (DEVINFO_DISTANCE + String.valueOf(record.distance)) + &quot;   &quot;;                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 790             }                                                                                            </span>
<span class="4712868732205106298" onmouseenter="enter('4712868732205106298');" onmouseout="out('4712868732205106298');" style=""> 791             if (record.calories &gt; 0) {                                                                   </span>
<span class="-9045542180122689491" onmouseenter="enter('-9045542180122689491');" onmouseout="out('-9045542180122689491');" style=""> 792                 info += (DEVINFO_CALORY + String.valueOf(record.calories)) + &quot;   &quot;;                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 793             }                                                                                            </span>
<span class="6107108997806163588" onmouseenter="enter('6107108997806163588');" onmouseout="out('6107108997806163588');" style=""> 794             if (record.heartRate &gt; 0) {                                                                  </span>
<span class="8073938969195305325" onmouseenter="enter('8073938969195305325');" onmouseout="out('8073938969195305325');" style=""> 795                 info += (DEVINFO_HEART + String.valueOf(record.heartRate)) + &quot;   &quot;;                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 796             }                                                                                            </span>
<span class="8504830605092703085" onmouseenter="enter('8504830605092703085');" onmouseout="out('8504830605092703085');" style=""> 797             if (!info.equals(&quot;&quot;)) {                                                                      </span>
<span class="6111723630993110344" onmouseenter="enter('6111723630993110344');" onmouseout="out('6111723630993110344');" style=""> 798                 getDevice().addDeviceInfo(new GenericItem(&quot;&quot;, info));                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 799             }                                                                                            </span>
<span class="7040782648503474034" onmouseenter="enter('7040782648503474034');" onmouseout="out('7040782648503474034');" style=""> 800         } catch (java.lang.IllegalArgumentException e) {                                                 </span>
<span class="3941064908834146545" onmouseenter="enter('3941064908834146545');" onmouseout="out('3941064908834146545');" style=""> 801             LOG.info(e.getMessage());                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 802         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 803     }                                                                                                    </span>
<span  style=""> 804                                                                                                          </span>
<span class="4996395825247791604" onmouseenter="enter('4996395825247791604');" onmouseout="out('4996395825247791604');" style=""> 805     private void handleBatteryInfo(byte data) {                                                          </span>
<span class="-7378539640920011500" onmouseenter="enter('-7378539640920011500');" onmouseout="out('-7378539640920011500');" style=""> 806             if (batteryCmd.level != (short) data) {                                                      </span>
<span class="-854799830555733473" onmouseenter="enter('-854799830555733473');" onmouseout="out('-854799830555733473');" style=""> 807                 batteryCmd.level = (short) data;                                                         </span>
<span class="-2053668973544639303" onmouseenter="enter('-2053668973544639303');" onmouseout="out('-2053668973544639303');" style=""> 808                 handleGBDeviceEvent(batteryCmd);                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 809             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 810     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 811 }                                                                                                        </span>


























































































































































</pre></td>
                        </tr>
                    </table>
                </div>
                <div id="bottom">
                    <table style="margin:auto">
                        <tr>
                            <th>ours vs. base</th>
                            <th>theirs vs. base</th>
                        </tr>
                        <tr>
                            <td><pre><span class="8479584664325737777" onmouseenter="enter('8479584664325737777');" onmouseout="out('8479584664325737777');" style="">   1  /*  Copyright (C) 2016-2017 Alberto, Andreas Shimokawa, ivanovlev, JoaÌƒo                                          </span>
<span class="9160074651943959828" onmouseenter="enter('9160074651943959828');" onmouseout="out('9160074651943959828');" style="">   2      Paulo Barraca                                                                                                 </span>


<span  style="">   3                                                                                                                    </span>
<span class="-7759499394858783956" onmouseenter="enter('-7759499394858783956');" onmouseout="out('-7759499394858783956');" style="">   4      This file is part of Gadgetbridge.                                                                            </span>
<span  style="">   5                                                                                                                    </span>
<span class="-2647557636279629478" onmouseenter="enter('-2647557636279629478');" onmouseout="out('-2647557636279629478');" style="">   6      Gadgetbridge is free software: you can redistribute it and/or modify                                          </span>
<span class="4878736751218581391" onmouseenter="enter('4878736751218581391');" onmouseout="out('4878736751218581391');" style="">   7      it under the terms of the GNU Affero General Public License as published                                      </span>
<span class="-5160078368722358920" onmouseenter="enter('-5160078368722358920');" onmouseout="out('-5160078368722358920');" style="">   8      by the Free Software Foundation, either version 3 of the License, or                                          </span>
<span class="6661789815760177463" onmouseenter="enter('6661789815760177463');" onmouseout="out('6661789815760177463');" style="">   9      (at your option) any later version.                                                                           </span>
<span  style="">  10                                                                                                                    </span>
<span class="-6828199977528779968" onmouseenter="enter('-6828199977528779968');" onmouseout="out('-6828199977528779968');" style="">  11      Gadgetbridge is distributed in the hope that it will be useful,                                               </span>
<span class="4883593508173597945" onmouseenter="enter('4883593508173597945');" onmouseout="out('4883593508173597945');" style="">  12      but WITHOUT ANY WARRANTY; without even the implied warranty of                                                </span>
<span class="2300657568347926527" onmouseenter="enter('2300657568347926527');" onmouseout="out('2300657568347926527');" style="">  13      MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the                                                 </span>
<span class="4681049817175334681" onmouseenter="enter('4681049817175334681');" onmouseout="out('4681049817175334681');" style="">  14      GNU Affero General Public License for more details.                                                           </span>
<span  style="">  15                                                                                                                    </span>
<span class="-3235531360569947201" onmouseenter="enter('-3235531360569947201');" onmouseout="out('-3235531360569947201');" style="">  16      You should have received a copy of the GNU Affero General Public License                                      </span>
<span class="-3088444562895398794" onmouseenter="enter('-3088444562895398794');" onmouseout="out('-3088444562895398794');" style="">  17      along with this program.  If not, see &lt;http://www.gnu.org/licenses/&gt;. */                                      </span>
<span class="-5217643761314834314" onmouseenter="enter('-5217643761314834314');" onmouseout="out('-5217643761314834314');" style="">  18  package nodomain.freeyourgadget.gadgetbridge.service.devices.hplus;                                               </span>
<span  style="">  19                                                                                                                    </span>
<span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style="">  20  /*                                                                                                                </span>
<span class="5416857039449935643" onmouseenter="enter('5416857039449935643');" onmouseout="out('5416857039449935643');" style="">  21  * @author JoÃ£o Paulo Barraca &amp;lt;jpbarraca@gmail.com&amp;gt;                                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  22  */                                                                                                                </span>
<span  style="">  23                                                                                                                    </span>
<span class="2440823415412133066" onmouseenter="enter('2440823415412133066');" onmouseout="out('2440823415412133066');" style="">  24  import android.bluetooth.BluetoothGatt;                                                                           </span>
<span class="4736969144974683041" onmouseenter="enter('4736969144974683041');" onmouseout="out('4736969144974683041');" style="">  25  import android.bluetooth.BluetoothGattCharacteristic;                                                             </span>
<span class="-489389385851058391" onmouseenter="enter('-489389385851058391');" onmouseout="out('-489389385851058391');" style="">  26  import android.content.BroadcastReceiver;                                                                         </span>
<span class="5922045460006936195" onmouseenter="enter('5922045460006936195');" onmouseout="out('5922045460006936195');" style="">  27  import android.content.Context;                                                                                   </span>
<span class="6568903789857736568" onmouseenter="enter('6568903789857736568');" onmouseout="out('6568903789857736568');" style="">  28  import android.content.Intent;                                                                                    </span>
<span class="8697221465021235869" onmouseenter="enter('8697221465021235869');" onmouseout="out('8697221465021235869');" style="">  29  import android.content.IntentFilter;                                                                              </span>
<span class="-8750621697125156872" onmouseenter="enter('-8750621697125156872');" onmouseout="out('-8750621697125156872');" style="">  30  import android.net.Uri;                                                                                           </span>
<span class="2517521963771876570" onmouseenter="enter('2517521963771876570');" onmouseout="out('2517521963771876570');" style="">  31  import android.support.v4.content.LocalBroadcastManager;                                                          </span>
<span class="-4373317539211938720" onmouseenter="enter('-4373317539211938720');" onmouseout="out('-4373317539211938720');" style="">  32  import android.widget.Toast;                                                                                      </span>
<span  style="">  33                                                                                                                    </span>
<span class="2359514128542055982" onmouseenter="enter('2359514128542055982');" onmouseout="out('2359514128542055982');" style="">  34  import org.apache.commons.lang3.ArrayUtils;                                                                       </span>
<span class="9072327285961251154" onmouseenter="enter('9072327285961251154');" onmouseout="out('9072327285961251154');" style="">  35  import org.slf4j.Logger;                                                                                          </span>
<span class="697043352225962606" onmouseenter="enter('697043352225962606');" onmouseout="out('697043352225962606');" style="">  36  import org.slf4j.LoggerFactory;                                                                                   </span>
<span  style="">  37                                                                                                                    </span>
<span class="103340661636203254" onmouseenter="enter('103340661636203254');" onmouseout="out('103340661636203254');" style="">  38  import java.io.IOException;                                                                                       </span>
<span class="8256805395213692609" onmouseenter="enter('8256805395213692609');" onmouseout="out('8256805395213692609');" style="">  39  import java.io.UnsupportedEncodingException;                                                                      </span>
<span class="9191247685397773893" onmouseenter="enter('9191247685397773893');" onmouseout="out('9191247685397773893');" style="">  40  import java.util.ArrayList;                                                                                       </span>

<span class="1562735530241225598" onmouseenter="enter('1562735530241225598');" onmouseout="out('1562735530241225598');" style="">  41  import java.util.Calendar;                                                                                        </span>
<span class="-4685965902094386510" onmouseenter="enter('-4685965902094386510');" onmouseout="out('-4685965902094386510');" style="">  42  import java.util.GregorianCalendar;                                                                               </span>
<span class="-1786020958497218848" onmouseenter="enter('-1786020958497218848');" onmouseout="out('-1786020958497218848');" style="">  43  import java.util.List;                                                                                            </span>
<span class="2390503830490498598" onmouseenter="enter('2390503830490498598');" onmouseout="out('2390503830490498598');" style="">  44  import java.util.UUID;                                                                                            </span>
<span  style="">  45                                                                                                                    </span>
<span class="-7198279398549834921" onmouseenter="enter('-7198279398549834921');" onmouseout="out('-7198279398549834921');" style="">  46  import nodomain.freeyourgadget.gadgetbridge.R;                                                                    </span>
<span class="-3005335786085073829" onmouseenter="enter('-3005335786085073829');" onmouseout="out('-3005335786085073829');" style="">  47  import nodomain.freeyourgadget.gadgetbridge.deviceevents.GBDeviceEventBatteryInfo;                                </span>
<span class="5042091401088979472" onmouseenter="enter('5042091401088979472');" onmouseout="out('5042091401088979472');" style="">  48  import nodomain.freeyourgadget.gadgetbridge.devices.hplus.HPlusConstants;                                         </span>
<span class="-4973236722115174269" onmouseenter="enter('-4973236722115174269');" onmouseout="out('-4973236722115174269');" style="">  49  import nodomain.freeyourgadget.gadgetbridge.devices.hplus.HPlusCoordinator;                                       </span>
<span class="4836892992022606579" onmouseenter="enter('4836892992022606579');" onmouseout="out('4836892992022606579');" style="">  50  import nodomain.freeyourgadget.gadgetbridge.impl.GBDevice;                                                        </span>
<span class="-8766238562391910018" onmouseenter="enter('-8766238562391910018');" onmouseout="out('-8766238562391910018');" style="">  51  import nodomain.freeyourgadget.gadgetbridge.model.Alarm;                                                          </span>
<span class="-3899388208810973608" onmouseenter="enter('-3899388208810973608');" onmouseout="out('-3899388208810973608');" style="">  52  import nodomain.freeyourgadget.gadgetbridge.model.CalendarEventSpec;                                              </span>
<span class="-9074570965792323186" onmouseenter="enter('-9074570965792323186');" onmouseout="out('-9074570965792323186');" style="">  53  import nodomain.freeyourgadget.gadgetbridge.model.CallSpec;                                                       </span>
<span class="-7415926539738049206" onmouseenter="enter('-7415926539738049206');" onmouseout="out('-7415926539738049206');" style="">  54  import nodomain.freeyourgadget.gadgetbridge.model.CannedMessagesSpec;                                             </span>
<span class="1593353296711823731" onmouseenter="enter('1593353296711823731');" onmouseout="out('1593353296711823731');" style="">  55  import nodomain.freeyourgadget.gadgetbridge.model.DeviceType;                                                     </span>
<span class="7672535166545256161" onmouseenter="enter('7672535166545256161');" onmouseout="out('7672535166545256161');" style="">  56  import nodomain.freeyourgadget.gadgetbridge.model.GenericItem;                                                    </span>
<span class="-4068239021838445503" onmouseenter="enter('-4068239021838445503');" onmouseout="out('-4068239021838445503');" style="">  57  import nodomain.freeyourgadget.gadgetbridge.model.MusicSpec;                                                      </span>
<span class="7536481506851862405" onmouseenter="enter('7536481506851862405');" onmouseout="out('7536481506851862405');" style="">  58  import nodomain.freeyourgadget.gadgetbridge.model.MusicStateSpec;                                                 </span>
<span class="8239808916005009388" onmouseenter="enter('8239808916005009388');" onmouseout="out('8239808916005009388');" style="">  59  import nodomain.freeyourgadget.gadgetbridge.model.NotificationSpec;                                               </span>
<span class="-40839721936664146" onmouseenter="enter('-40839721936664146');" onmouseout="out('-40839721936664146');" style="">  60  import nodomain.freeyourgadget.gadgetbridge.model.WeatherSpec;                                                    </span>
<span class="4344228987867394358" onmouseenter="enter('4344228987867394358');" onmouseout="out('4344228987867394358');" style="">  61  import nodomain.freeyourgadget.gadgetbridge.service.btle.AbstractBTLEDeviceSupport;                               </span>
<span class="5014349364961188522" onmouseenter="enter('5014349364961188522');" onmouseout="out('5014349364961188522');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  62 -import nodomain.freeyourgadget.gadgetbridge.service.btle.GattService;                                             </span>
<span class="3410519392510510669" onmouseenter="enter('3410519392510510669');" onmouseout="out('3410519392510510669');" style="">  63  import nodomain.freeyourgadget.gadgetbridge.service.btle.TransactionBuilder;                                      </span>
<span class="245401146070313948" onmouseenter="enter('245401146070313948');" onmouseout="out('245401146070313948');" style="">  64  import nodomain.freeyourgadget.gadgetbridge.service.btle.actions.SetDeviceStateAction;                            </span>
<span class="-2373314641424532722" onmouseenter="enter('-2373314641424532722');" onmouseout="out('-2373314641424532722');" style="">  65  import nodomain.freeyourgadget.gadgetbridge.service.btle.profiles.deviceinfo.DeviceInfo;                          </span>
<span class="5990042019621381740" onmouseenter="enter('5990042019621381740');" onmouseout="out('5990042019621381740');" style="">  66  import nodomain.freeyourgadget.gadgetbridge.service.btle.profiles.deviceinfo.DeviceInfoProfile;                   </span>
<span class="-3798970344596478499" onmouseenter="enter('-3798970344596478499');" onmouseout="out('-3798970344596478499');" style="">  67  import nodomain.freeyourgadget.gadgetbridge.util.GB;                                                              </span>
<span class="1710555602396666834" onmouseenter="enter('1710555602396666834');" onmouseout="out('1710555602396666834');" style="">  68  import nodomain.freeyourgadget.gadgetbridge.util.StringUtils;                                                     </span>
<span  style="">  69                                                                                                                    </span>
<span  style="">  70                                                                                                                    </span>
<span class="-4082404187206109090" onmouseenter="enter('-4082404187206109090');" onmouseout="out('-4082404187206109090');" style="">  71  public class HPlusSupport extends AbstractBTLEDeviceSupport {                                                     </span>
<span class="-3586142179549744071" onmouseenter="enter('-3586142179549744071');" onmouseout="out('-3586142179549744071');" style="">  72      private static final Logger LOG = LoggerFactory.getLogger(HPlusSupport.class);                                </span>
<span  style="">  73                                                                                                                    </span>
<span class="-5014208032763947659" onmouseenter="enter('-5014208032763947659');" onmouseout="out('-5014208032763947659');" style="">  74      public BluetoothGattCharacteristic ctrlCharacteristic = null;                                                 </span>
<span class="-1389691261480921757" onmouseenter="enter('-1389691261480921757');" onmouseout="out('-1389691261480921757');" style="">  75      public BluetoothGattCharacteristic measureCharacteristic = null;                                              </span>
<span  style="">  76                                                                                                                    </span>
<span class="7253442996403887798" onmouseenter="enter('7253442996403887798');" onmouseout="out('7253442996403887798');" style="">  77      private final GBDeviceEventBatteryInfo batteryCmd = new GBDeviceEventBatteryInfo();                           </span>
<span  style="">  78                                                                                                                    </span>
<span class="-2647742433589439535" onmouseenter="enter('-2647742433589439535');" onmouseout="out('-2647742433589439535');" style="">  79      private HPlusHandlerThread syncHelper;                                                                        </span>
<span class="7122708288156354523" onmouseenter="enter('7122708288156354523');" onmouseout="out('7122708288156354523');" style="">  80      private DeviceType deviceType = DeviceType.UNKNOWN;                                                           </span>
<span  style="">  81                                                                                                                    </span>
<span class="4625474178666977899" onmouseenter="enter('4625474178666977899');" onmouseout="out('4625474178666977899');" style="">  82      private final BroadcastReceiver mReceiver = new BroadcastReceiver() {                                         </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  83          @Override                                                                                                 </span>
<span class="-1520739091809898546" onmouseenter="enter('-1520739091809898546');" onmouseout="out('-1520739091809898546');" style="">  84          public void onReceive(Context context, Intent intent) {                                                   </span>
<span class="-4530039192824031" onmouseenter="enter('-4530039192824031');" onmouseout="out('-4530039192824031');" style="">  85              String s = intent.getAction();                                                                        </span>
<span class="-431805254143538347" onmouseenter="enter('-431805254143538347');" onmouseout="out('-431805254143538347');" style="">  86              if (s.equals(DeviceInfoProfile.ACTION_DEVICE_INFO)) {                                                 </span>
<span class="2870344340685632275" onmouseenter="enter('2870344340685632275');" onmouseout="out('2870344340685632275');" style=""><abbr title="  87                  handleDeviceInfo((nodomain.freeyourgadget.gadgetbridge.service.btle.profiles.deviceinfo.DeviceInfo) intent.getParcelableExtra(DeviceInfoProfile.EXTRA_DEVICE_INFO));">  87                  handleDeviceInfo((nodomain.freeyourgadget.gadgetbridge.service.btle.profiles.deviceinfo.DeviceInfoðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  88              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  89          }                                                                                                         </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">  90      };                                                                                                            </span>
<span  style="">  91                                                                                                                    </span>
<span class="-6599573096376092321" onmouseenter="enter('-6599573096376092321');" onmouseout="out('-6599573096376092321');" style="">  92      public HPlusSupport(DeviceType type) {                                                                        </span>
<span class="4463652287758102089" onmouseenter="enter('4463652287758102089');" onmouseout="out('4463652287758102089');" style="">  93          super(LOG);                                                                                               </span>
<span  style="">  94                                                                                                                    </span>

<span class="3299229106905835199" onmouseenter="enter('3299229106905835199');" onmouseout="out('3299229106905835199');" style="">  95          deviceType = type;                                                                                        </span>
<span  style="">  96                                                                                                                    </span>
<span class="377067810786142420" onmouseenter="enter('377067810786142420');" onmouseout="out('377067810786142420');" style="">  97          addSupportedService(HPlusConstants.UUID_SERVICE_HP);                                                      </span>
<span  style="">  98                                                                                                                    </span>
<span class="5948400278394960963" onmouseenter="enter('5948400278394960963');" onmouseout="out('5948400278394960963');" style="">  99          LocalBroadcastManager broadcastManager = LocalBroadcastManager.getInstance(getContext());                 </span>
<span class="-6475340056070675924" onmouseenter="enter('-6475340056070675924');" onmouseout="out('-6475340056070675924');" style=""> 100          IntentFilter intentFilter = new IntentFilter();                                                           </span>
<span  style=""> 101                                                                                                                    </span>
<span class="-9031778988080615533" onmouseenter="enter('-9031778988080615533');" onmouseout="out('-9031778988080615533');" style=""> 102          broadcastManager.registerReceiver(mReceiver, intentFilter);                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 103      }                                                                                                             </span>
<span  style=""> 104                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 105      @Override                                                                                                     </span>
<span class="-4657406736363487113" onmouseenter="enter('-4657406736363487113');" onmouseout="out('-4657406736363487113');" style=""> 106      public void dispose() {                                                                                       </span>
<span class="-1145329300786377991" onmouseenter="enter('-1145329300786377991');" onmouseout="out('-1145329300786377991');" style=""> 107          LOG.info(&quot;Dispose&quot;);                                                                                      </span>
<span class="5948400278394960963" onmouseenter="enter('5948400278394960963');" onmouseout="out('5948400278394960963');" style=""> 108          LocalBroadcastManager broadcastManager = LocalBroadcastManager.getInstance(getContext());                 </span>
<span class="-2591797645219758220" onmouseenter="enter('-2591797645219758220');" onmouseout="out('-2591797645219758220');" style=""> 109          broadcastManager.unregisterReceiver(mReceiver);                                                           </span>
<span  style=""> 110                                                                                                                    </span>
<span class="-2251371211449821101" onmouseenter="enter('-2251371211449821101');" onmouseout="out('-2251371211449821101');" style=""> 111          close();                                                                                                  </span>
<span  style=""> 112                                                                                                                    </span>
<span class="4250596422636225835" onmouseenter="enter('4250596422636225835');" onmouseout="out('4250596422636225835');" style=""> 113          super.dispose();                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 114      }                                                                                                             </span>
<span  style=""> 115                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 116      @Override                                                                                                     </span>
<span class="624595386859969795" onmouseenter="enter('624595386859969795');" onmouseout="out('624595386859969795');" style=""> 117      protected TransactionBuilder initializeDevice(TransactionBuilder builder) {                                   </span>
<span class="6943102306574884764" onmouseenter="enter('6943102306574884764');" onmouseout="out('6943102306574884764');" style=""> 118          LOG.info(&quot;Initializing&quot;);                                                                                 </span>
<span  style=""> 119                                                                                                                    </span>
<span class="-132260743307911133" onmouseenter="enter('-132260743307911133');" onmouseout="out('-132260743307911133');" style=""> 120          builder.add(new SetDeviceStateAction(getDevice(), GBDevice.State.INITIALIZING, getContext()));            </span>


<span  style=""> 121                                                                                                                    </span>
<span class="-2070300686094273817" onmouseenter="enter('-2070300686094273817');" onmouseout="out('-2070300686094273817');" style=""> 122          measureCharacteristic = getCharacteristic(HPlusConstants.UUID_CHARACTERISTIC_MEASURE);                    </span>
<span class="-3114635167656687851" onmouseenter="enter('-3114635167656687851');" onmouseout="out('-3114635167656687851');" style=""> 123          ctrlCharacteristic = getCharacteristic(HPlusConstants.UUID_CHARACTERISTIC_CONTROL);                       </span>
<span  style=""> 124                                                                                                                    </span>
<span class="-3832688778173104110" onmouseenter="enter('-3832688778173104110');" onmouseout="out('-3832688778173104110');" style=""> 125          getDevice().setFirmwareVersion(&quot;N/A&quot;);                                                                    </span>
<span class="-4069256094451065143" onmouseenter="enter('-4069256094451065143');" onmouseout="out('-4069256094451065143');" style=""> 126          getDevice().setFirmwareVersion2(&quot;N/A&quot;);                                                                   </span>
<span  style=""> 127                                                                                                                    </span>
<span class="-1983961118622982915" onmouseenter="enter('-1983961118622982915');" onmouseout="out('-1983961118622982915');" style=""> 128          syncHelper = new HPlusHandlerThread(getDevice(), getContext(), this);                                     </span>
<span  style=""> 129                                                                                                                    </span>
<span class="7604618378927278958" onmouseenter="enter('7604618378927278958');" onmouseout="out('7604618378927278958');" style=""> 130          //Initialize device                                                                                       </span>
<span class="-504446867221575653" onmouseenter="enter('-504446867221575653');" onmouseout="out('-504446867221575653');" style=""> 131          sendUserInfo(builder); //Sync preferences                                                                 </span>
<span  style=""> 132                                                                                                                    </span>
<span  style=""> 133                                                                                                                    </span>
<span class="2384486382001682171" onmouseenter="enter('2384486382001682171');" onmouseout="out('2384486382001682171');" style=""> 134          requestDeviceInfo(builder);                                                                               </span>
<span  style=""> 135                                                                                                                    </span>
<span class="-3454584244340176965" onmouseenter="enter('-3454584244340176965');" onmouseout="out('-3454584244340176965');" style=""> 136          setInitialized(builder);                                                                                  </span>
<span  style=""> 137                                                                                                                    </span>
<span class="-1903424543284802769" onmouseenter="enter('-1903424543284802769');" onmouseout="out('-1903424543284802769');" style=""> 138          syncHelper.start();                                                                                       </span>
<span  style=""> 139                                                                                                                    </span>
<span class="3645364997644532552" onmouseenter="enter('3645364997644532552');" onmouseout="out('3645364997644532552');" style=""> 140          builder.notify(getCharacteristic(HPlusConstants.UUID_CHARACTERISTIC_MEASURE), true);                      </span>
<span class="8787860057533172177" onmouseenter="enter('8787860057533172177');" onmouseout="out('8787860057533172177');" style=""> 141          builder.setGattCallback(this);                                                                            </span>
<span class="7940646096517618441" onmouseenter="enter('7940646096517618441');" onmouseout="out('7940646096517618441');" style=""> 142          builder.notify(measureCharacteristic, true);                                                              </span>


















<span  style=""> 143                                                                                                                    </span>
<span class="4801455624621135639" onmouseenter="enter('4801455624621135639');" onmouseout="out('4801455624621135639');" style=""> 144          return builder;                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 145      }                                                                                                             </span>
<span  style=""> 146                                                                                                                    </span>
<span class="464313160346579114" onmouseenter="enter('464313160346579114');" onmouseout="out('464313160346579114');" style=""> 147      private HPlusSupport sendUserInfo(TransactionBuilder builder) {                                               </span>
<span class="8659711009772068062" onmouseenter="enter('8659711009772068062');" onmouseout="out('8659711009772068062');" style=""> 148          builder.write(ctrlCharacteristic, HPlusConstants.CMD_SET_PREF_START);                                     </span>
<span class="-4601813669746665290" onmouseenter="enter('-4601813669746665290');" onmouseout="out('-4601813669746665290');" style=""> 149          builder.write(ctrlCharacteristic, HPlusConstants.CMD_SET_PREF_START1);                                    </span>
<span  style=""> 150                                                                                                                    </span>
<span class="5354677973902937208" onmouseenter="enter('5354677973902937208');" onmouseout="out('5354677973902937208');" style=""> 151          syncPreferences(builder);                                                                                 </span>
<span  style=""> 152                                                                                                                    </span>
<span class="3647312381509313349" onmouseenter="enter('3647312381509313349');" onmouseout="out('3647312381509313349');" style=""> 153          builder.write(ctrlCharacteristic, new byte[]{HPlusConstants.CMD_SET_CONF_END});                           </span>
<span class="2297715846939503398" onmouseenter="enter('2297715846939503398');" onmouseout="out('2297715846939503398');" style=""> 154          return this;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 155      }                                                                                                             </span>
<span  style=""> 156                                                                                                                    </span>
<span class="-3630452951846679004" onmouseenter="enter('-3630452951846679004');" onmouseout="out('-3630452951846679004');" style=""> 157      private HPlusSupport syncPreferences(TransactionBuilder transaction) {                                        </span>
<span  style=""> 158                                                                                                                    </span>
<span class="9200456031894264068" onmouseenter="enter('9200456031894264068');" onmouseout="out('9200456031894264068');" style=""> 159          if (deviceType == DeviceType.HPLUS) {                                                                     </span>
<span class="-9160949721391368870" onmouseenter="enter('-9160949721391368870');" onmouseout="out('-9160949721391368870');" style=""> 160              setSIT(transaction);          //Sync SIT Interval                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 161          }                                                                                                         </span>
<span  style=""> 162                                                                                                                    </span>
<span class="8565886816545297578" onmouseenter="enter('8565886816545297578');" onmouseout="out('8565886816545297578');" style=""> 163          setCurrentDate(transaction);                                                                              </span>
<span class="-8398887245102710885" onmouseenter="enter('-8398887245102710885');" onmouseout="out('-8398887245102710885');" style=""> 164          setCurrentTime(transaction);                                                                              </span>
<span class="1698876699275306022" onmouseenter="enter('1698876699275306022');" onmouseout="out('1698876699275306022');" style=""> 165          setDayOfWeek(transaction);                                                                                </span>
<span class="-2226089159439282115" onmouseenter="enter('-2226089159439282115');" onmouseout="out('-2226089159439282115');" style=""> 166          setTimeMode(transaction);                                                                                 </span>
<span  style=""> 167                                                                                                                    </span>
<span class="-3967043804590944959" onmouseenter="enter('-3967043804590944959');" onmouseout="out('-3967043804590944959');" style=""> 168          setGender(transaction);                                                                                   </span>
<span class="1849231822188363425" onmouseenter="enter('1849231822188363425');" onmouseout="out('1849231822188363425');" style=""> 169          setAge(transaction);                                                                                      </span>
<span class="8409976551582741350" onmouseenter="enter('8409976551582741350');" onmouseout="out('8409976551582741350');" style=""> 170          setWeight(transaction);                                                                                   </span>
<span class="2177249264940965323" onmouseenter="enter('2177249264940965323');" onmouseout="out('2177249264940965323');" style=""> 171          setHeight(transaction);                                                                                   </span>
<span  style=""> 172                                                                                                                    </span>
<span class="-7350523131149809385" onmouseenter="enter('-7350523131149809385');" onmouseout="out('-7350523131149809385');" style=""> 173          setGoal(transaction);                                                                                     </span>
<span class="4493614030159792560" onmouseenter="enter('4493614030159792560');" onmouseout="out('4493614030159792560');" style=""> 174          setLanguage(transaction);                                                                                 </span>
<span class="-7293987064571039169" onmouseenter="enter('-7293987064571039169');" onmouseout="out('-7293987064571039169');" style=""> 175          setScreenTime(transaction);                                                                               </span>
<span class="8577063610004227384" onmouseenter="enter('8577063610004227384');" onmouseout="out('8577063610004227384');" style=""> 176          setUnit(transaction);                                                                                     </span>
<span class="-4090002420283598619" onmouseenter="enter('-4090002420283598619');" onmouseout="out('-4090002420283598619');" style=""> 177          setAllDayHeart(transaction);                                                                              </span>
<span  style=""> 178                                                                                                                    </span>
<span class="2297715846939503398" onmouseenter="enter('2297715846939503398');" onmouseout="out('2297715846939503398');" style=""> 179          return this;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 180      }                                                                                                             </span>
<span  style=""> 181                                                                                                                    </span>
<span class="2971063439380410916" onmouseenter="enter('2971063439380410916');" onmouseout="out('2971063439380410916');" style=""> 182      private HPlusSupport setLanguage(TransactionBuilder transaction) {                                            </span>
<span class="2849983908429827334" onmouseenter="enter('2849983908429827334');" onmouseout="out('2849983908429827334');" style=""> 183          byte value = HPlusCoordinator.getLanguage(getDevice().getAddress());                                      </span>
<span class="3291452160875082121" onmouseenter="enter('3291452160875082121');" onmouseout="out('3291452160875082121');" style=""> 184          transaction.write(ctrlCharacteristic, new byte[]{                                                         </span>
<span class="-2720480633878408025" onmouseenter="enter('-2720480633878408025');" onmouseout="out('-2720480633878408025');" style=""> 185                  HPlusConstants.CMD_SET_LANGUAGE,                                                                  </span>
<span class="1200713371940080677" onmouseenter="enter('1200713371940080677');" onmouseout="out('1200713371940080677');" style=""> 186                  value                                                                                             </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 187          });                                                                                                       </span>
<span class="2297715846939503398" onmouseenter="enter('2297715846939503398');" onmouseout="out('2297715846939503398');" style=""> 188          return this;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 189      }                                                                                                             </span>
<span  style=""> 190                                                                                                                    </span>
<span  style=""> 191                                                                                                                    </span>
<span class="4317151267263402448" onmouseenter="enter('4317151267263402448');" onmouseout="out('4317151267263402448');" style=""> 192      private HPlusSupport setTimeMode(TransactionBuilder transaction) {                                            </span>
<span class="218359786857846408" onmouseenter="enter('218359786857846408');" onmouseout="out('218359786857846408');" style=""> 193          byte value = HPlusCoordinator.getTimeMode(getDevice().getAddress());                                      </span>
<span  style=""> 194                                                                                                                    </span>
<span class="3291452160875082121" onmouseenter="enter('3291452160875082121');" onmouseout="out('3291452160875082121');" style=""> 195          transaction.write(ctrlCharacteristic, new byte[]{                                                         </span>
<span class="4263534606018086323" onmouseenter="enter('4263534606018086323');" onmouseout="out('4263534606018086323');" style=""> 196                  HPlusConstants.CMD_SET_TIMEMODE,                                                                  </span>
<span class="1200713371940080677" onmouseenter="enter('1200713371940080677');" onmouseout="out('1200713371940080677');" style=""> 197                  value                                                                                             </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 198          });                                                                                                       </span>
<span class="2297715846939503398" onmouseenter="enter('2297715846939503398');" onmouseout="out('2297715846939503398');" style=""> 199          return this;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 200      }                                                                                                             </span>
<span  style=""> 201                                                                                                                    </span>
<span class="1527802699814540214" onmouseenter="enter('1527802699814540214');" onmouseout="out('1527802699814540214');" style=""> 202      private HPlusSupport setUnit(TransactionBuilder transaction) {                                                </span>
<span class="-8211628829141498614" onmouseenter="enter('-8211628829141498614');" onmouseout="out('-8211628829141498614');" style=""> 203          byte value = HPlusCoordinator.getUnit(getDevice().getAddress());                                          </span>
<span class="3291452160875082121" onmouseenter="enter('3291452160875082121');" onmouseout="out('3291452160875082121');" style=""> 204          transaction.write(ctrlCharacteristic, new byte[]{                                                         </span>
<span class="330508883912365904" onmouseenter="enter('330508883912365904');" onmouseout="out('330508883912365904');" style=""> 205                  HPlusConstants.CMD_SET_UNITS,                                                                     </span>
<span class="1200713371940080677" onmouseenter="enter('1200713371940080677');" onmouseout="out('1200713371940080677');" style=""> 206                  value                                                                                             </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 207          });                                                                                                       </span>
<span class="2297715846939503398" onmouseenter="enter('2297715846939503398');" onmouseout="out('2297715846939503398');" style=""> 208          return this;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 209      }                                                                                                             </span>
<span  style=""> 210                                                                                                                    </span>
<span class="-7617350710418441488" onmouseenter="enter('-7617350710418441488');" onmouseout="out('-7617350710418441488');" style=""> 211      private HPlusSupport setCurrentDate(TransactionBuilder transaction) {                                         </span>
<span class="2531610087543829790" onmouseenter="enter('2531610087543829790');" onmouseout="out('2531610087543829790');" style=""> 212          Calendar c = GregorianCalendar.getInstance();                                                             </span>
<span class="-2923391553220974433" onmouseenter="enter('-2923391553220974433');" onmouseout="out('-2923391553220974433');" style=""> 213          int year = c.get(Calendar.YEAR);                                                                          </span>
<span class="8379254238395309807" onmouseenter="enter('8379254238395309807');" onmouseout="out('8379254238395309807');" style=""> 214          int month = c.get(Calendar.MONTH);                                                                        </span>
<span class="-1537240887202619533" onmouseenter="enter('-1537240887202619533');" onmouseout="out('-1537240887202619533');" style=""> 215          int day = c.get(Calendar.DAY_OF_MONTH);                                                                   </span>
<span  style=""> 216                                                                                                                    </span>
<span class="3291452160875082121" onmouseenter="enter('3291452160875082121');" onmouseout="out('3291452160875082121');" style=""> 217          transaction.write(ctrlCharacteristic, new byte[]{                                                         </span>
<span class="-5419256561338282975" onmouseenter="enter('-5419256561338282975');" onmouseout="out('-5419256561338282975');" style=""> 218                  HPlusConstants.CMD_SET_DATE,                                                                      </span>
<span class="596156045428080737" onmouseenter="enter('596156045428080737');" onmouseout="out('596156045428080737');" style=""> 219                  (byte) ((year / 256) &amp; 0xff),                                                                     </span>
<span class="-274510278877719166" onmouseenter="enter('-274510278877719166');" onmouseout="out('-274510278877719166');" style=""> 220                  (byte) (year % 256),                                                                              </span>
<span class="2509221540333605786" onmouseenter="enter('2509221540333605786');" onmouseout="out('2509221540333605786');" style=""> 221                  (byte) (month + 1),                                                                               </span>
<span class="154836591265012146" onmouseenter="enter('154836591265012146');" onmouseout="out('154836591265012146');" style=""> 222                  (byte) (day)                                                                                      </span>
<span  style=""> 223                                                                                                                    </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 224          });                                                                                                       </span>
<span class="2297715846939503398" onmouseenter="enter('2297715846939503398');" onmouseout="out('2297715846939503398');" style=""> 225          return this;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 226      }                                                                                                             </span>
<span  style=""> 227                                                                                                                    </span>
<span class="-5177509192006647721" onmouseenter="enter('-5177509192006647721');" onmouseout="out('-5177509192006647721');" style=""> 228      private HPlusSupport setCurrentTime(TransactionBuilder transaction) {                                         </span>
<span class="2531610087543829790" onmouseenter="enter('2531610087543829790');" onmouseout="out('2531610087543829790');" style=""> 229          Calendar c = GregorianCalendar.getInstance();                                                             </span>
<span  style=""> 230                                                                                                                    </span>
<span class="3291452160875082121" onmouseenter="enter('3291452160875082121');" onmouseout="out('3291452160875082121');" style=""> 231          transaction.write(ctrlCharacteristic, new byte[]{                                                         </span>
<span class="-3810178960282507440" onmouseenter="enter('-3810178960282507440');" onmouseout="out('-3810178960282507440');" style=""> 232                  HPlusConstants.CMD_SET_TIME,                                                                      </span>
<span class="4175240225145224534" onmouseenter="enter('4175240225145224534');" onmouseout="out('4175240225145224534');" style=""> 233                  (byte) c.get(Calendar.HOUR_OF_DAY),                                                               </span>
<span class="-8029568718198783140" onmouseenter="enter('-8029568718198783140');" onmouseout="out('-8029568718198783140');" style=""> 234                  (byte) c.get(Calendar.MINUTE),                                                                    </span>
<span class="-2353745633236339443" onmouseenter="enter('-2353745633236339443');" onmouseout="out('-2353745633236339443');" style=""> 235                  (byte) c.get(Calendar.SECOND)                                                                     </span>
<span  style=""> 236                                                                                                                    </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 237          });                                                                                                       </span>
<span class="2297715846939503398" onmouseenter="enter('2297715846939503398');" onmouseout="out('2297715846939503398');" style=""> 238          return this;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 239      }                                                                                                             </span>
<span  style=""> 240                                                                                                                    </span>
<span  style=""> 241                                                                                                                    </span>
<span class="-4421580834062212270" onmouseenter="enter('-4421580834062212270');" onmouseout="out('-4421580834062212270');" style=""> 242      private HPlusSupport setDayOfWeek(TransactionBuilder transaction) {                                           </span>
<span class="2531610087543829790" onmouseenter="enter('2531610087543829790');" onmouseout="out('2531610087543829790');" style=""> 243          Calendar c = GregorianCalendar.getInstance();                                                             </span>
<span  style=""> 244                                                                                                                    </span>
<span class="3291452160875082121" onmouseenter="enter('3291452160875082121');" onmouseout="out('3291452160875082121');" style=""> 245          transaction.write(ctrlCharacteristic, new byte[]{                                                         </span>
<span class="7969665857025838608" onmouseenter="enter('7969665857025838608');" onmouseout="out('7969665857025838608');" style=""> 246                  HPlusConstants.CMD_SET_WEEK,                                                                      </span>
<span class="2107609500554215585" onmouseenter="enter('2107609500554215585');" onmouseout="out('2107609500554215585');" style=""> 247                  (byte) (c.get(Calendar.DAY_OF_WEEK) - 1)                                                          </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 248          });                                                                                                       </span>
<span class="2297715846939503398" onmouseenter="enter('2297715846939503398');" onmouseout="out('2297715846939503398');" style=""> 249          return this;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 250      }                                                                                                             </span>
<span  style=""> 251                                                                                                                    </span>
<span  style=""> 252                                                                                                                    </span>
<span class="1777874725720523294" onmouseenter="enter('1777874725720523294');" onmouseout="out('1777874725720523294');" style=""> 253      private HPlusSupport setSIT(TransactionBuilder transaction) {                                                 </span>
<span  style=""> 254                                                                                                                    </span>
<span class="-1710515092546508137" onmouseenter="enter('-1710515092546508137');" onmouseout="out('-1710515092546508137');" style=""> 255          //Makibes F68 doesn&#x27;t like this command.                                                                  </span>
<span class="4585394865152052123" onmouseenter="enter('4585394865152052123');" onmouseout="out('4585394865152052123');" style=""> 256          //Just ignore.                                                                                            </span>
<span class="8010717523561516322" onmouseenter="enter('8010717523561516322');" onmouseout="out('8010717523561516322');" style=""> 257          if (deviceType == DeviceType.MAKIBESF68) {                                                                </span>
<span class="2297715846939503398" onmouseenter="enter('2297715846939503398');" onmouseout="out('2297715846939503398');" style=""> 258              return this;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 259          }                                                                                                         </span>
<span  style=""> 260                                                                                                                    </span>
<span class="7782781853756800720" onmouseenter="enter('7782781853756800720');" onmouseout="out('7782781853756800720');" style=""> 261          int startTime = HPlusCoordinator.getSITStartTime(getDevice().getAddress());                               </span>
<span class="8209842661687801925" onmouseenter="enter('8209842661687801925');" onmouseout="out('8209842661687801925');" style=""> 262          int endTime = HPlusCoordinator.getSITEndTime(getDevice().getAddress());                                   </span>
<span  style=""> 263                                                                                                                    </span>
<span class="5882708480576637773" onmouseenter="enter('5882708480576637773');" onmouseout="out('5882708480576637773');" style=""> 264          Calendar now = GregorianCalendar.getInstance();                                                           </span>
<span  style=""> 265                                                                                                                    </span>
<span class="3291452160875082121" onmouseenter="enter('3291452160875082121');" onmouseout="out('3291452160875082121');" style=""> 266          transaction.write(ctrlCharacteristic, new byte[]{                                                         </span>
<span class="-6329136660964193391" onmouseenter="enter('-6329136660964193391');" onmouseout="out('-6329136660964193391');" style=""> 267                  HPlusConstants.CMD_SET_SIT_INTERVAL,                                                              </span>
<span class="-7172094393246648903" onmouseenter="enter('-7172094393246648903');" onmouseout="out('-7172094393246648903');" style=""> 268                  (byte) ((startTime / 256) &amp; 0xff),                                                                </span>
<span class="-3674522560837142583" onmouseenter="enter('-3674522560837142583');" onmouseout="out('-3674522560837142583');" style=""> 269                  (byte) (startTime % 256),                                                                         </span>
<span class="9123983034732908067" onmouseenter="enter('9123983034732908067');" onmouseout="out('9123983034732908067');" style=""> 270                  (byte) ((endTime / 256) &amp; 0xff),                                                                  </span>
<span class="5594695527343368846" onmouseenter="enter('5594695527343368846');" onmouseout="out('5594695527343368846');" style=""> 271                  (byte) (endTime % 256),                                                                           </span>
<span class="-6076240376861215679" onmouseenter="enter('-6076240376861215679');" onmouseout="out('-6076240376861215679');" style=""> 272                  0,                                                                                                </span>
<span class="-6076240376861215679" onmouseenter="enter('-6076240376861215679');" onmouseout="out('-6076240376861215679');" style=""> 273                  0,                                                                                                </span>
<span class="-1881944630562092789" onmouseenter="enter('-1881944630562092789');" onmouseout="out('-1881944630562092789');" style=""> 274                  (byte) ((now.get(Calendar.YEAR) / 256) &amp; 0xff),                                                   </span>
<span class="808961206931151347" onmouseenter="enter('808961206931151347');" onmouseout="out('808961206931151347');" style=""> 275                  (byte) (now.get(Calendar.YEAR) % 256),                                                            </span>
<span class="-3929811106245983954" onmouseenter="enter('-3929811106245983954');" onmouseout="out('-3929811106245983954');" style=""> 276                  (byte) (now.get(Calendar.MONTH) + 1),                                                             </span>
<span class="-6608497570264303352" onmouseenter="enter('-6608497570264303352');" onmouseout="out('-6608497570264303352');" style=""> 277                  (byte) (now.get(Calendar.DAY_OF_MONTH)),                                                          </span>
<span class="-4838072097318336683" onmouseenter="enter('-4838072097318336683');" onmouseout="out('-4838072097318336683');" style=""> 278                  (byte) (now.get(Calendar.HOUR_OF_DAY)),                                                           </span>
<span class="-3604343412851664994" onmouseenter="enter('-3604343412851664994');" onmouseout="out('-3604343412851664994');" style=""> 279                  (byte) (now.get(Calendar.MINUTE)),                                                                </span>
<span class="8073077880938975334" onmouseenter="enter('8073077880938975334');" onmouseout="out('8073077880938975334');" style=""> 280                  (byte) (now.get(Calendar.SECOND)),                                                                </span>
<span class="-6076240376861215679" onmouseenter="enter('-6076240376861215679');" onmouseout="out('-6076240376861215679');" style=""> 281                  0,                                                                                                </span>
<span class="-6076240376861215679" onmouseenter="enter('-6076240376861215679');" onmouseout="out('-6076240376861215679');" style=""> 282                  0,                                                                                                </span>
<span class="-6076240376861215679" onmouseenter="enter('-6076240376861215679');" onmouseout="out('-6076240376861215679');" style=""> 283                  0,                                                                                                </span>
<span class="2218992417378941058" onmouseenter="enter('2218992417378941058');" onmouseout="out('2218992417378941058');" style=""> 284                  0                                                                                                 </span>
<span  style=""> 285                                                                                                                    </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 286          });                                                                                                       </span>
<span class="2297715846939503398" onmouseenter="enter('2297715846939503398');" onmouseout="out('2297715846939503398');" style=""> 287          return this;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 288      }                                                                                                             </span>
<span  style=""> 289                                                                                                                    </span>
<span class="7972248273337413684" onmouseenter="enter('7972248273337413684');" onmouseout="out('7972248273337413684');" style=""> 290      private HPlusSupport setWeight(TransactionBuilder transaction) {                                              </span>
<span class="-6942480616743564353" onmouseenter="enter('-6942480616743564353');" onmouseout="out('-6942480616743564353');" style=""> 291          byte value = HPlusCoordinator.getUserWeight(getDevice().getAddress());                                    </span>

<span class="3291452160875082121" onmouseenter="enter('3291452160875082121');" onmouseout="out('3291452160875082121');" style=""> 292          transaction.write(ctrlCharacteristic, new byte[]{                                                         </span>
<span class="-3989010006227608454" onmouseenter="enter('-3989010006227608454');" onmouseout="out('-3989010006227608454');" style=""> 293                  HPlusConstants.CMD_SET_WEIGHT,                                                                    </span>
<span class="1200713371940080677" onmouseenter="enter('1200713371940080677');" onmouseout="out('1200713371940080677');" style=""> 294                  value                                                                                             </span>
<span  style=""> 295                                                                                                                    </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 296          });                                                                                                       </span>
<span class="2297715846939503398" onmouseenter="enter('2297715846939503398');" onmouseout="out('2297715846939503398');" style=""> 297          return this;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 298      }                                                                                                             </span>
<span  style=""> 299                                                                                                                    </span>
<span class="-7347510196780789476" onmouseenter="enter('-7347510196780789476');" onmouseout="out('-7347510196780789476');" style=""> 300      private HPlusSupport setHeight(TransactionBuilder transaction) {                                              </span>
<span class="-8295836255860464295" onmouseenter="enter('-8295836255860464295');" onmouseout="out('-8295836255860464295');" style=""> 301          byte value = HPlusCoordinator.getUserHeight(getDevice().getAddress());                                    </span>

<span class="3291452160875082121" onmouseenter="enter('3291452160875082121');" onmouseout="out('3291452160875082121');" style=""> 302          transaction.write(ctrlCharacteristic, new byte[]{                                                         </span>
<span class="-2073946156144479840" onmouseenter="enter('-2073946156144479840');" onmouseout="out('-2073946156144479840');" style=""> 303                  HPlusConstants.CMD_HEIGHT,                                                                        </span>
<span class="1200713371940080677" onmouseenter="enter('1200713371940080677');" onmouseout="out('1200713371940080677');" style=""> 304                  value                                                                                             </span>
<span  style=""> 305                                                                                                                    </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 306          });                                                                                                       </span>
<span class="2297715846939503398" onmouseenter="enter('2297715846939503398');" onmouseout="out('2297715846939503398');" style=""> 307          return this;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 308      }                                                                                                             </span>
<span  style=""> 309                                                                                                                    </span>
<span  style=""> 310                                                                                                                    </span>
<span class="5947324092747227570" onmouseenter="enter('5947324092747227570');" onmouseout="out('5947324092747227570');" style=""> 311      private HPlusSupport setAge(TransactionBuilder transaction) {                                                 </span>
<span class="-4934307680841720446" onmouseenter="enter('-4934307680841720446');" onmouseout="out('-4934307680841720446');" style=""> 312          byte value = HPlusCoordinator.getUserAge(getDevice().getAddress());                                       </span>

<span class="3291452160875082121" onmouseenter="enter('3291452160875082121');" onmouseout="out('3291452160875082121');" style=""> 313          transaction.write(ctrlCharacteristic, new byte[]{                                                         </span>
<span class="5713181507603331000" onmouseenter="enter('5713181507603331000');" onmouseout="out('5713181507603331000');" style=""> 314                  HPlusConstants.CMD_SET_AGE,                                                                       </span>
<span class="1200713371940080677" onmouseenter="enter('1200713371940080677');" onmouseout="out('1200713371940080677');" style=""> 315                  value                                                                                             </span>
<span  style=""> 316                                                                                                                    </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 317          });                                                                                                       </span>
<span class="2297715846939503398" onmouseenter="enter('2297715846939503398');" onmouseout="out('2297715846939503398');" style=""> 318          return this;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 319      }                                                                                                             </span>
<span  style=""> 320                                                                                                                    </span>
<span class="7012632444102522477" onmouseenter="enter('7012632444102522477');" onmouseout="out('7012632444102522477');" style=""> 321      private HPlusSupport setGender(TransactionBuilder transaction) {                                              </span>
<span class="672569075871737807" onmouseenter="enter('672569075871737807');" onmouseout="out('672569075871737807');" style=""> 322          byte value = HPlusCoordinator.getUserGender(getDevice().getAddress());                                    </span>

<span class="3291452160875082121" onmouseenter="enter('3291452160875082121');" onmouseout="out('3291452160875082121');" style=""> 323          transaction.write(ctrlCharacteristic, new byte[]{                                                         </span>
<span class="3680299272630460864" onmouseenter="enter('3680299272630460864');" onmouseout="out('3680299272630460864');" style=""> 324                  HPlusConstants.CMD_SET_GENDER,                                                                    </span>
<span class="1200713371940080677" onmouseenter="enter('1200713371940080677');" onmouseout="out('1200713371940080677');" style=""> 325                  value                                                                                             </span>
<span  style=""> 326                                                                                                                    </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 327          });                                                                                                       </span>
<span class="2297715846939503398" onmouseenter="enter('2297715846939503398');" onmouseout="out('2297715846939503398');" style=""> 328          return this;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 329      }                                                                                                             </span>
<span  style=""> 330                                                                                                                    </span>
<span  style=""> 331                                                                                                                    </span>
<span class="1941288733470282948" onmouseenter="enter('1941288733470282948');" onmouseout="out('1941288733470282948');" style=""> 332      private HPlusSupport setGoal(TransactionBuilder transaction) {                                                </span>
<span class="3942498952201655186" onmouseenter="enter('3942498952201655186');" onmouseout="out('3942498952201655186');" style=""> 333          int value = HPlusCoordinator.getGoal(getDevice().getAddress());                                           </span>

<span class="3291452160875082121" onmouseenter="enter('3291452160875082121');" onmouseout="out('3291452160875082121');" style=""> 334          transaction.write(ctrlCharacteristic, new byte[]{                                                         </span>
<span class="-4101300033431726292" onmouseenter="enter('-4101300033431726292');" onmouseout="out('-4101300033431726292');" style=""> 335                  HPlusConstants.CMD_SET_GOAL,                                                                      </span>
<span class="-2916442659377879431" onmouseenter="enter('-2916442659377879431');" onmouseout="out('-2916442659377879431');" style=""> 336                  (byte) ((value / 256) &amp; 0xff),                                                                    </span>
<span class="-1647377881209297723" onmouseenter="enter('-1647377881209297723');" onmouseout="out('-1647377881209297723');" style=""> 337                  (byte) (value % 256)                                                                              </span>
<span  style=""> 338                                                                                                                    </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 339          });                                                                                                       </span>
<span class="2297715846939503398" onmouseenter="enter('2297715846939503398');" onmouseout="out('2297715846939503398');" style=""> 340          return this;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 341      }                                                                                                             </span>
<span  style=""> 342                                                                                                                    </span>
<span  style=""> 343                                                                                                                    </span>
<span class="-1254834888773037917" onmouseenter="enter('-1254834888773037917');" onmouseout="out('-1254834888773037917');" style=""> 344      private HPlusSupport setScreenTime(TransactionBuilder transaction) {                                          </span>
<span class="4315045256729533150" onmouseenter="enter('4315045256729533150');" onmouseout="out('4315045256729533150');" style=""> 345          byte value = HPlusCoordinator.getScreenTime(getDevice().getAddress());                                    </span>
<span class="3291452160875082121" onmouseenter="enter('3291452160875082121');" onmouseout="out('3291452160875082121');" style=""> 346          transaction.write(ctrlCharacteristic, new byte[]{                                                         </span>
<span class="-6949628958147360848" onmouseenter="enter('-6949628958147360848');" onmouseout="out('-6949628958147360848');" style=""> 347                  HPlusConstants.CMD_SET_SCREENTIME,                                                                </span>
<span class="1200713371940080677" onmouseenter="enter('1200713371940080677');" onmouseout="out('1200713371940080677');" style=""> 348                  value                                                                                             </span>
<span  style=""> 349                                                                                                                    </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 350          });                                                                                                       </span>
<span class="2297715846939503398" onmouseenter="enter('2297715846939503398');" onmouseout="out('2297715846939503398');" style=""> 351          return this;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 352      }                                                                                                             </span>
<span  style=""> 353                                                                                                                    </span>
<span class="-5197767512792012744" onmouseenter="enter('-5197767512792012744');" onmouseout="out('-5197767512792012744');" style=""> 354      private HPlusSupport setAllDayHeart(TransactionBuilder transaction) {                                         </span>
<span  style=""> 355                                                                                                                    </span>
<span class="-7482590365127471239" onmouseenter="enter('-7482590365127471239');" onmouseout="out('-7482590365127471239');" style=""> 356          byte value = HPlusCoordinator.getAllDayHR(getDevice().getAddress());                                      </span>
<span  style=""> 357                                                                                                                    </span>
<span class="3291452160875082121" onmouseenter="enter('3291452160875082121');" onmouseout="out('3291452160875082121');" style=""> 358          transaction.write(ctrlCharacteristic, new byte[]{                                                         </span>
<span class="8318401178566544878" onmouseenter="enter('8318401178566544878');" onmouseout="out('8318401178566544878');" style=""> 359                  HPlusConstants.CMD_SET_ALLDAY_HRM,                                                                </span>
<span class="1200713371940080677" onmouseenter="enter('1200713371940080677');" onmouseout="out('1200713371940080677');" style=""> 360                  value                                                                                             </span>
<span  style=""> 361                                                                                                                    </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 362          });                                                                                                       </span>
<span  style=""> 363                                                                                                                    </span>
<span class="2297715846939503398" onmouseenter="enter('2297715846939503398');" onmouseout="out('2297715846939503398');" style=""> 364          return this;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 365      }                                                                                                             </span>
<span  style=""> 366                                                                                                                    </span>
<span  style=""> 367                                                                                                                    </span>
<span class="-1399038394034113320" onmouseenter="enter('-1399038394034113320');" onmouseout="out('-1399038394034113320');" style=""> 368      private HPlusSupport setAlarm(TransactionBuilder transaction, Calendar t) {                                   </span>
<span  style=""> 369                                                                                                                    </span>
<span class="6467402380305076865" onmouseenter="enter('6467402380305076865');" onmouseout="out('6467402380305076865');" style=""> 370          byte hour = HPlusConstants.ARG_ALARM_DISABLE;                                                             </span>
<span class="-3281384072436167776" onmouseenter="enter('-3281384072436167776');" onmouseout="out('-3281384072436167776');" style=""> 371          byte minute = HPlusConstants.ARG_ALARM_DISABLE;                                                           </span>
<span  style=""> 372                                                                                                                    </span>
<span class="-7115571877868547666" onmouseenter="enter('-7115571877868547666');" onmouseout="out('-7115571877868547666');" style=""> 373          if (t != null) {                                                                                          </span>
<span class="5339525172321764938" onmouseenter="enter('5339525172321764938');" onmouseout="out('5339525172321764938');" style=""> 374              hour = (byte) t.get(Calendar.HOUR_OF_DAY);                                                            </span>
<span class="5337471965635534220" onmouseenter="enter('5337471965635534220');" onmouseout="out('5337471965635534220');" style=""> 375              minute = (byte) t.get(Calendar.MINUTE);                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 376          }                                                                                                         </span>
<span  style=""> 377                                                                                                                    </span>
<span class="-3840280779505156671" onmouseenter="enter('-3840280779505156671');" onmouseout="out('-3840280779505156671');" style=""> 378          transaction.write(ctrlCharacteristic, new byte[]{HPlusConstants.CMD_SET_ALARM,                            </span>
<span class="-5045918625335939481" onmouseenter="enter('-5045918625335939481');" onmouseout="out('-5045918625335939481');" style=""> 379                  hour,                                                                                             </span>
<span class="-2395728393329392091" onmouseenter="enter('-2395728393329392091');" onmouseout="out('-2395728393329392091');" style=""> 380                  minute});                                                                                         </span>
<span  style=""> 381                                                                                                                    </span>
<span class="2297715846939503398" onmouseenter="enter('2297715846939503398');" onmouseout="out('2297715846939503398');" style=""> 382          return this;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 383      }                                                                                                             </span>
<span  style=""> 384                                                                                                                    </span>
<span class="-791908888061445625" onmouseenter="enter('-791908888061445625');" onmouseout="out('-791908888061445625');" style=""> 385      private HPlusSupport setFindMe(TransactionBuilder transaction, boolean state) {                               </span>
<span class="7282700573083723681" onmouseenter="enter('7282700573083723681');" onmouseout="out('7282700573083723681');" style=""> 386          //TODO: Find how this works                                                                               </span>
<span  style=""> 387                                                                                                                    </span>
<span class="-2705361656414002162" onmouseenter="enter('-2705361656414002162');" onmouseout="out('-2705361656414002162');" style=""> 388          byte[] msg = new byte[2];                                                                                 </span>
<span class="5997450077450443173" onmouseenter="enter('5997450077450443173');" onmouseout="out('5997450077450443173');" style=""> 389          msg[0] = HPlusConstants.CMD_SET_FINDME;                                                                   </span>
<span  style=""> 390                                                                                                                    </span>
<span class="7403209030499211268" onmouseenter="enter('7403209030499211268');" onmouseout="out('7403209030499211268');" style=""> 391          if (state)                                                                                                </span>
<span class="3636634837394653002" onmouseenter="enter('3636634837394653002');" onmouseout="out('3636634837394653002');" style=""> 392              msg[1] = HPlusConstants.ARG_FINDME_ON;                                                                </span>
<span class="-7436048164614400339" onmouseenter="enter('-7436048164614400339');" onmouseout="out('-7436048164614400339');" style=""> 393          else                                                                                                      </span>
<span class="8074200006318753451" onmouseenter="enter('8074200006318753451');" onmouseout="out('8074200006318753451');" style=""> 394              msg[1] = HPlusConstants.ARG_FINDME_OFF;                                                               </span>
<span  style=""> 395                                                                                                                    </span>
<span class="-7204010731863731309" onmouseenter="enter('-7204010731863731309');" onmouseout="out('-7204010731863731309');" style=""> 396          transaction.write(ctrlCharacteristic, msg);                                                               </span>
<span class="2297715846939503398" onmouseenter="enter('2297715846939503398');" onmouseout="out('2297715846939503398');" style=""> 397          return this;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 398      }                                                                                                             </span>
<span  style=""> 399                                                                                                                    </span>
<span class="-5684646578701203654" onmouseenter="enter('-5684646578701203654');" onmouseout="out('-5684646578701203654');" style=""> 400      private HPlusSupport requestDeviceInfo(TransactionBuilder builder) {                                          </span>
<span class="3573392645117931820" onmouseenter="enter('3573392645117931820');" onmouseout="out('3573392645117931820');" style=""> 401          // HPlus devices seem to report some information in an alternative manner                                 </span>
<span class="-8697440581090313181" onmouseenter="enter('-8697440581090313181');" onmouseout="out('-8697440581090313181');" style=""> 402          builder.write(ctrlCharacteristic, new byte[]{HPlusConstants.CMD_GET_DEVICE_ID});                          </span>
<span class="485503605876832302" onmouseenter="enter('485503605876832302');" onmouseout="out('485503605876832302');" style=""> 403          builder.write(ctrlCharacteristic, new byte[]{HPlusConstants.CMD_GET_VERSION});                            </span>
<span  style=""> 404                                                                                                                    </span>
<span class="2297715846939503398" onmouseenter="enter('2297715846939503398');" onmouseout="out('2297715846939503398');" style=""> 405          return this;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 406      }                                                                                                             </span>
<span  style=""> 407                                                                                                                    </span>
<span class="-271393146621985805" onmouseenter="enter('-271393146621985805');" onmouseout="out('-271393146621985805');" style=""> 408      private void setInitialized(TransactionBuilder builder) {                                                     </span>
<span class="-1705102314731758746" onmouseenter="enter('-1705102314731758746');" onmouseout="out('-1705102314731758746');" style=""> 409          builder.add(new SetDeviceStateAction(getDevice(), GBDevice.State.INITIALIZED, getContext()));             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 410      }                                                                                                             </span>
<span  style=""> 411                                                                                                                    </span>
<span  style=""> 412                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 413      @Override                                                                                                     </span>
<span class="-5141762163842231173" onmouseenter="enter('-5141762163842231173');" onmouseout="out('-5141762163842231173');" style=""> 414      public boolean useAutoConnect() {                                                                             </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 415          return true;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 416      }                                                                                                             </span>
<span  style=""> 417                                                                                                                    </span>
<span class="4975694330800448779" onmouseenter="enter('4975694330800448779');" onmouseout="out('4975694330800448779');" style=""> 418      private void handleDeviceInfo(DeviceInfo info) {                                                              </span>
<span class="370366693446993512" onmouseenter="enter('370366693446993512');" onmouseout="out('370366693446993512');" style=""> 419          LOG.warn(&quot;Device info: &quot; + info);                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 420      }                                                                                                             </span>
<span  style=""> 421                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 422      @Override                                                                                                     </span>
<span class="-116609517646424186" onmouseenter="enter('-116609517646424186');" onmouseout="out('-116609517646424186');" style=""> 423      public void onNotification(NotificationSpec notificationSpec) {                                               </span>
<span class="-2323011847991818474" onmouseenter="enter('-2323011847991818474');" onmouseout="out('-2323011847991818474');" style=""> 424          //TODO: Show different notifications according to source as Band supports this                            </span>
<span class="6488462260965955164" onmouseenter="enter('6488462260965955164');" onmouseout="out('6488462260965955164');" style=""><abbr title=" 425          //LOG.info(&quot;OnNotification: Title: &quot;+notificationSpec.title+&quot; Body: &quot;+notificationSpec.body+&quot; Source: &quot;+notificationSpec.sourceName+&quot; Sender: &quot;+notificationSpec.sender+&quot; Subject: &quot;+notificationSpec.subject);"> 425          //LOG.info(&quot;OnNotification: Title: &quot;+notificationSpec.title+&quot; Body: &quot;+notificationSpec.body+&quot; Source: &quot;+noðŸ”µ</abbr></span>
<span class="-2578227233159539388" onmouseenter="enter('-2578227233159539388');" onmouseout="out('-2578227233159539388');" style=""> 426          showText(notificationSpec.title, notificationSpec.body);                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 427      }                                                                                                             </span>
<span  style=""> 428                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 429      @Override                                                                                                     </span>
<span class="-1102873404195143085" onmouseenter="enter('-1102873404195143085');" onmouseout="out('-1102873404195143085');" style=""> 430      public void onDeleteNotification(int id) {                                                                    </span>
<span  style=""> 431                                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 432      }                                                                                                             </span>
<span  style=""> 433                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 434      @Override                                                                                                     </span>
<span class="7164248173527032001" onmouseenter="enter('7164248173527032001');" onmouseout="out('7164248173527032001');" style=""> 435      public void onSetTime() {                                                                                     </span>

<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 436          try {                                                                                                     </span>
<span class="8378030939534756566" onmouseenter="enter('8378030939534756566');" onmouseout="out('8378030939534756566');" style=""> 437              TransactionBuilder builder = performInitialized(&quot;time&quot;);                                              </span>
<span  style=""> 438                                                                                                                    </span>
<span class="-244233841179675239" onmouseenter="enter('-244233841179675239');" onmouseout="out('-244233841179675239');" style=""> 439              setCurrentDate(builder);                                                                              </span>
<span class="7377265401852080297" onmouseenter="enter('7377265401852080297');" onmouseout="out('7377265401852080297');" style=""> 440              setCurrentTime(builder);                                                                              </span>
<span  style=""> 441                                                                                                                    </span>
<span class="-5534937907083456817" onmouseenter="enter('-5534937907083456817');" onmouseout="out('-5534937907083456817');" style=""> 442              builder.queue(getQueue());                                                                            </span>

<span class="2183742815887262996" onmouseenter="enter('2183742815887262996');" onmouseout="out('2183742815887262996');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 443 -        }catch(IOException e){                                                                                    </span>
<span class="7080241092423381085" onmouseenter="enter('7080241092423381085');" onmouseout="out('7080241092423381085');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 444 +        } catch (IOException e) {                                                                                 </span>
<span  style=""> 445                                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 446          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 447      }                                                                                                             </span>
<span  style=""> 448                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 449      @Override                                                                                                     </span>
<span class="-6473317888357330260" onmouseenter="enter('-6473317888357330260');" onmouseout="out('-6473317888357330260');" style=""> 450      public void onSetAlarms(ArrayList&lt;? extends Alarm&gt; alarms) {                                                  </span>


<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 451          try {                                                                                                     </span>
<span class="-1278421083116070762" onmouseenter="enter('-1278421083116070762');" onmouseout="out('-1278421083116070762');" style=""> 452              TransactionBuilder builder = performInitialized(&quot;alarm&quot;);                                             </span>
<span  style=""> 453                                                                                                                    </span>
<span class="-7996805109404385335" onmouseenter="enter('-7996805109404385335');" onmouseout="out('-7996805109404385335');" style=""> 454              for (Alarm alarm : alarms) {                                                                          </span>
<span  style=""> 455                                                                                                                    </span>
<span class="-403059878991992441" onmouseenter="enter('-403059878991992441');" onmouseout="out('-403059878991992441');" style=""> 456                  if (!alarm.isEnabled())                                                                           </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style=""> 457                      continue;                                                                                     </span>
<span  style=""> 458                                                                                                                    </span>
<span class="-448638904182363762" onmouseenter="enter('-448638904182363762');" onmouseout="out('-448638904182363762');" style=""> 459                  if (alarm.isSmartWakeup()) //Not available                                                        </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style=""> 460                      continue;                                                                                     </span>
<span  style=""> 461                                                                                                                    </span>
<span class="-2323525561533640256" onmouseenter="enter('-2323525561533640256');" onmouseout="out('-2323525561533640256');" style=""> 462                  Calendar t = alarm.getAlarmCal();                                                                 </span>
<span class="-1264397343868138084" onmouseenter="enter('-1264397343868138084');" onmouseout="out('-1264397343868138084');" style=""> 463                  setAlarm(builder, t);                                                                             </span>
<span class="-5534937907083456817" onmouseenter="enter('-5534937907083456817');" onmouseout="out('-5534937907083456817');" style=""> 464                  builder.queue(getQueue());                                                                        </span>
<span  style=""> 465                                                                                                                    </span>
<span class="8097986474420678749" onmouseenter="enter('8097986474420678749');" onmouseout="out('8097986474420678749');" style=""><abbr title=" 466                  GB.toast(getContext(), getContext().getString(R.string.user_feedback_miband_set_alarms_ok), Toast.LENGTH_SHORT, GB.INFO);"> 466                  GB.toast(getContext(), getContext().getString(R.string.user_feedback_miband_set_alarms_ok), Toast.ðŸ”µ</abbr></span>
<span  style=""> 467                                                                                                                    </span>
<span class="-6545552544705045608" onmouseenter="enter('-6545552544705045608');" onmouseout="out('-6545552544705045608');" style=""> 468                  return; //Only first alarm                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 469              }                                                                                                     </span>
<span  style=""> 470                                                                                                                    </span>
<span class="3975187194000728744" onmouseenter="enter('3975187194000728744');" onmouseout="out('3975187194000728744');" style=""> 471              setAlarm(builder, null);                                                                              </span>
<span class="-5534937907083456817" onmouseenter="enter('-5534937907083456817');" onmouseout="out('-5534937907083456817');" style=""> 472              builder.queue(getQueue());                                                                            </span>

<span  style=""> 473                                                                                                                    </span>
<span class="-2313180102689307633" onmouseenter="enter('-2313180102689307633');" onmouseout="out('-2313180102689307633');" style=""><abbr title=" 474              GB.toast(getContext(), getContext().getString(R.string.user_feedback_all_alarms_disabled), Toast.LENGTH_SHORT, GB.INFO);"> 474              GB.toast(getContext(), getContext().getString(R.string.user_feedback_all_alarms_disabled), Toast.LENGTðŸ”µ</abbr></span>
<span class="-3124216345305540272" onmouseenter="enter('-3124216345305540272');" onmouseout="out('-3124216345305540272');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 475 -        }catch(Exception e){}                                                                                     </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 476 +        } catch (Exception e) {                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 477 +        }                                                                                                         </span>
<span  style=""> 478                                                                                                                    </span>
<span  style=""> 479                                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 480      }                                                                                                             </span>
<span  style=""> 481                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 482      @Override                                                                                                     </span>
<span class="8502851833159229707" onmouseenter="enter('8502851833159229707');" onmouseout="out('8502851833159229707');" style=""> 483      public void onSetCallState(CallSpec callSpec) {                                                               </span>
<span class="4226096810368966115" onmouseenter="enter('4226096810368966115');" onmouseout="out('4226096810368966115');" style=""> 484          switch (callSpec.command) {                                                                               </span>
<span class="4765207307001745691" onmouseenter="enter('4765207307001745691');" onmouseout="out('4765207307001745691');" style=""> 485              case CallSpec.CALL_INCOMING: {                                                                        </span>
<span class="-8067308976018849552" onmouseenter="enter('-8067308976018849552');" onmouseout="out('-8067308976018849552');" style=""> 486                  showIncomingCall(callSpec.name, callSpec.number);                                                 </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 487                  break;                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 488              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 489          }                                                                                                         </span>
<span  style=""> 490                                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 491      }                                                                                                             </span>
<span  style=""> 492                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 493      @Override                                                                                                     </span>
<span class="8238257195410140286" onmouseenter="enter('8238257195410140286');" onmouseout="out('8238257195410140286');" style=""> 494      public void onSetCannedMessages(CannedMessagesSpec cannedMessagesSpec) {                                      </span>
<span class="-2981468772764664347" onmouseenter="enter('-2981468772764664347');" onmouseout="out('-2981468772764664347');" style=""> 495          LOG.info(&quot;Canned Messages: &quot; + cannedMessagesSpec);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 496      }                                                                                                             </span>
<span  style=""> 497                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 498      @Override                                                                                                     </span>
<span class="8228188929931998548" onmouseenter="enter('8228188929931998548');" onmouseout="out('8228188929931998548');" style=""> 499      public void onSetMusicState(MusicStateSpec stateSpec) {                                                       </span>
<span  style=""> 500                                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 501      }                                                                                                             </span>
<span  style=""> 502                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 503      @Override                                                                                                     </span>
<span class="-4182706906721092498" onmouseenter="enter('-4182706906721092498');" onmouseout="out('-4182706906721092498');" style=""> 504      public void onSetMusicInfo(MusicSpec musicSpec) {                                                             </span>
<span  style=""> 505                                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 506      }                                                                                                             </span>
<span  style=""> 507                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 508      @Override                                                                                                     </span>
<span class="-8425797677863799500" onmouseenter="enter('-8425797677863799500');" onmouseout="out('-8425797677863799500');" style=""> 509      public void onEnableRealtimeSteps(boolean enable) {                                                           </span>
<span class="7623304499723183910" onmouseenter="enter('7623304499723183910');" onmouseout="out('7623304499723183910');" style=""> 510          onEnableRealtimeHeartRateMeasurement(enable);                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 511      }                                                                                                             </span>
<span  style=""> 512                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 513      @Override                                                                                                     </span>
<span class="-4135655620136168708" onmouseenter="enter('-4135655620136168708');" onmouseout="out('-4135655620136168708');" style=""> 514      public void onInstallApp(Uri uri) {                                                                           </span>
<span  style=""> 515                                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 516      }                                                                                                             </span>
<span  style=""> 517                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 518      @Override                                                                                                     </span>
<span class="-3322711972275217450" onmouseenter="enter('-3322711972275217450');" onmouseout="out('-3322711972275217450');" style=""> 519      public void onAppInfoReq() {                                                                                  </span>
<span  style=""> 520                                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 521      }                                                                                                             </span>
<span  style=""> 522                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 523      @Override                                                                                                     </span>
<span class="1692097554900603024" onmouseenter="enter('1692097554900603024');" onmouseout="out('1692097554900603024');" style=""> 524      public void onAppStart(UUID uuid, boolean start) {                                                            </span>
<span  style=""> 525                                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 526      }                                                                                                             </span>
<span  style=""> 527                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 528      @Override                                                                                                     </span>
<span class="7633110766708892729" onmouseenter="enter('7633110766708892729');" onmouseout="out('7633110766708892729');" style=""> 529      public void onAppDelete(UUID uuid) {                                                                          </span>
<span  style=""> 530                                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 531      }                                                                                                             </span>
<span  style=""> 532                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 533      @Override                                                                                                     </span>
<span class="-862897393933438838" onmouseenter="enter('-862897393933438838');" onmouseout="out('-862897393933438838');" style=""> 534      public void onAppConfiguration(UUID appUuid, String config) {                                                 </span>
<span  style=""> 535                                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 536      }                                                                                                             </span>
<span  style=""> 537                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 538      @Override                                                                                                     </span>
<span class="-2513514137107402976" onmouseenter="enter('-2513514137107402976');" onmouseout="out('-2513514137107402976');" style=""> 539      public void onAppReorder(UUID[] uuids) {                                                                      </span>
<span  style=""> 540                                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 541      }                                                                                                             </span>
<span  style=""> 542                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 543      @Override                                                                                                     </span>
<span class="-3215171005460530491" onmouseenter="enter('-3215171005460530491');" onmouseout="out('-3215171005460530491');" style=""> 544      public void onFetchActivityData() {                                                                           </span>
<span class="7173294136222469130" onmouseenter="enter('7173294136222469130');" onmouseout="out('7173294136222469130');" style=""> 545          if (syncHelper != null)                                                                                   </span>
<span class="-1977462876553727609" onmouseenter="enter('-1977462876553727609');" onmouseout="out('-1977462876553727609');" style=""> 546              syncHelper.sync();                                                                                    </span>







<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 547      }                                                                                                             </span>
<span  style=""> 548                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 549      @Override                                                                                                     </span>
<span class="-3494298342935464482" onmouseenter="enter('-3494298342935464482');" onmouseout="out('-3494298342935464482');" style=""> 550      public void onReboot() {                                                                                      </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 551          try {                                                                                                     </span>
<span class="867466265491236176" onmouseenter="enter('867466265491236176');" onmouseout="out('867466265491236176');" style=""> 552              getQueue().clear();                                                                                   </span>
<span  style=""> 553                                                                                                                    </span>
<span class="2354100081541725399" onmouseenter="enter('2354100081541725399');" onmouseout="out('2354100081541725399');" style=""> 554              TransactionBuilder builder = performInitialized(&quot;Shutdown&quot;);                                          </span>
<span class="2903890927038400619" onmouseenter="enter('2903890927038400619');" onmouseout="out('2903890927038400619');" style=""><abbr title=" 555              builder.write(ctrlCharacteristic, new byte[]{HPlusConstants.CMD_SHUTDOWN, HPlusConstants.ARG_SHUTDOWN_EN});"> 555              builder.write(ctrlCharacteristic, new byte[]{HPlusConstants.CMD_SHUTDOWN, HPlusConstants.ARG_SHUTDOWN_ðŸ”µ</abbr></span>
<span class="-5534937907083456817" onmouseenter="enter('-5534937907083456817');" onmouseout="out('-5534937907083456817');" style=""> 556              builder.queue(getQueue());                                                                            </span>

<span class="-757793854272623252" onmouseenter="enter('-757793854272623252');" onmouseout="out('-757793854272623252');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 557 -        }catch(Exception e){                                                                                      </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 558 +        } catch (Exception e) {                                                                                   </span>
<span  style=""> 559                                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 560          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 561      }                                                                                                             </span>
<span  style=""> 562                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 563      @Override                                                                                                     </span>
<span class="-9008385526233139735" onmouseenter="enter('-9008385526233139735');" onmouseout="out('-9008385526233139735');" style=""> 564      public void onHeartRateTest() {                                                                               </span>
<span class="867466265491236176" onmouseenter="enter('867466265491236176');" onmouseout="out('867466265491236176');" style=""> 565          getQueue().clear();                                                                                       </span>
<span class="-1891643383856272179" onmouseenter="enter('-1891643383856272179');" onmouseout="out('-1891643383856272179');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 566 -        try{                                                                                                      </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 567 +        try {                                                                                                     </span>
<span class="6333941902014570384" onmouseenter="enter('6333941902014570384');" onmouseout="out('6333941902014570384');" style=""> 568              TransactionBuilder builder = performInitialized(&quot;HeartRateTest&quot;);                                     </span>
<span  style=""> 569                                                                                                                    </span>
<span class="-4037030148406438927" onmouseenter="enter('-4037030148406438927');" onmouseout="out('-4037030148406438927');" style=""><abbr title=" 570              builder.write(ctrlCharacteristic, new byte[]{HPlusConstants.CMD_SET_HEARTRATE_STATE, HPlusConstants.ARG_HEARTRATE_MEASURE_ON}); //Set Real Time... ?"> 570              builder.write(ctrlCharacteristic, new byte[]{HPlusConstants.CMD_SET_HEARTRATE_STATE, HPlusConstants.ARðŸ”µ</abbr></span>
<span class="-5534937907083456817" onmouseenter="enter('-5534937907083456817');" onmouseout="out('-5534937907083456817');" style=""> 571              builder.queue(getQueue());                                                                            </span>

<span class="-757793854272623252" onmouseenter="enter('-757793854272623252');" onmouseout="out('-757793854272623252');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 572 -        }catch(Exception e){                                                                                      </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 573 +        } catch (Exception e) {                                                                                   </span>
<span  style=""> 574                                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 575          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 576      }                                                                                                             </span>
<span  style=""> 577                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 578      @Override                                                                                                     </span>
<span class="2383065190612615413" onmouseenter="enter('2383065190612615413');" onmouseout="out('2383065190612615413');" style=""> 579      public void onEnableRealtimeHeartRateMeasurement(boolean enable) {                                            </span>
<span class="867466265491236176" onmouseenter="enter('867466265491236176');" onmouseout="out('867466265491236176');" style=""> 580          getQueue().clear();                                                                                       </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 581          try {                                                                                                     </span>
<span class="5747251758811020424" onmouseenter="enter('5747251758811020424');" onmouseout="out('5747251758811020424');" style=""> 582              TransactionBuilder builder = performInitialized(&quot;realTimeHeartMeasurement&quot;);                          </span>
<span class="-3134908621992881846" onmouseenter="enter('-3134908621992881846');" onmouseout="out('-3134908621992881846');" style=""> 583              byte state;                                                                                           </span>
<span  style=""> 584                                                                                                                    </span>
<span class="-2063204857297382402" onmouseenter="enter('-2063204857297382402');" onmouseout="out('-2063204857297382402');" style=""> 585              if (enable)                                                                                           </span>
<span class="4459610917207481324" onmouseenter="enter('4459610917207481324');" onmouseout="out('4459610917207481324');" style=""> 586                  state = HPlusConstants.ARG_HEARTRATE_ALLDAY_ON;                                                   </span>
<span class="-7436048164614400339" onmouseenter="enter('-7436048164614400339');" onmouseout="out('-7436048164614400339');" style=""> 587              else                                                                                                  </span>
<span class="237470636204788169" onmouseenter="enter('237470636204788169');" onmouseout="out('237470636204788169');" style=""> 588                  state = HPlusConstants.ARG_HEARTRATE_ALLDAY_OFF;                                                  </span>
<span  style=""> 589                                                                                                                    </span>
<span class="-8856770227184248316" onmouseenter="enter('-8856770227184248316');" onmouseout="out('-8856770227184248316');" style=""> 590              builder.write(ctrlCharacteristic, new byte[]{HPlusConstants.CMD_SET_ALLDAY_HRM, state});              </span>
<span class="-5534937907083456817" onmouseenter="enter('-5534937907083456817');" onmouseout="out('-5534937907083456817');" style=""> 591              builder.queue(getQueue());                                                                            </span>

<span class="-757793854272623252" onmouseenter="enter('-757793854272623252');" onmouseout="out('-757793854272623252');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 592 -        }catch(Exception e){                                                                                      </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 593 +        } catch (Exception e) {                                                                                   </span>
<span  style=""> 594                                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 595          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 596      }                                                                                                             </span>
<span  style=""> 597                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 598      @Override                                                                                                     </span>
<span class="-3287587973518064190" onmouseenter="enter('-3287587973518064190');" onmouseout="out('-3287587973518064190');" style=""> 599      public void onFindDevice(boolean start) {                                                                     </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 600          try {                                                                                                     </span>
<span class="175553782406953484" onmouseenter="enter('175553782406953484');" onmouseout="out('175553782406953484');" style=""> 601              TransactionBuilder builder = performInitialized(&quot;findMe&quot;);                                            </span>
<span  style=""> 602                                                                                                                    </span>
<span class="3618522043245605826" onmouseenter="enter('3618522043245605826');" onmouseout="out('3618522043245605826');" style=""> 603              setFindMe(builder, start);                                                                            </span>
<span class="-5534937907083456817" onmouseenter="enter('-5534937907083456817');" onmouseout="out('-5534937907083456817');" style=""> 604              builder.queue(getQueue());                                                                            </span>

<span class="7080241092423381085" onmouseenter="enter('7080241092423381085');" onmouseout="out('7080241092423381085');" style=""> 605          } catch (IOException e) {                                                                                 </span>
<span class="6289081880581889152" onmouseenter="enter('6289081880581889152');" onmouseout="out('6289081880581889152');" style=""><abbr title=" 606              GB.toast(getContext(), &quot;Error toggling Find Me: &quot; + e.getLocalizedMessage(), Toast.LENGTH_LONG, GB.ERROR);"> 606              GB.toast(getContext(), &quot;Error toggling Find Me: &quot; + e.getLocalizedMessage(), Toast.LENGTH_LONG, GB.ERRðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 607          }                                                                                                         </span>
<span  style=""> 608                                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 609      }                                                                                                             </span>
<span  style=""> 610                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 611      @Override                                                                                                     </span>
<span class="6065808185552597400" onmouseenter="enter('6065808185552597400');" onmouseout="out('6065808185552597400');" style=""> 612      public void onSetConstantVibration(int intensity) {                                                           </span>
<span class="867466265491236176" onmouseenter="enter('867466265491236176');" onmouseout="out('867466265491236176');" style=""> 613          getQueue().clear();                                                                                       </span>
<span  style=""> 614                                                                                                                    </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 615          try {                                                                                                     </span>
<span class="-1189139726584538540" onmouseenter="enter('-1189139726584538540');" onmouseout="out('-1189139726584538540');" style=""> 616              TransactionBuilder builder = performInitialized(&quot;vibration&quot;);                                         </span>
<span  style=""> 617                                                                                                                    </span>
<span class="3266802087250163024" onmouseenter="enter('3266802087250163024');" onmouseout="out('3266802087250163024');" style=""> 618              byte[] msg = new byte[15];                                                                            </span>
<span class="6154219539807733297" onmouseenter="enter('6154219539807733297');" onmouseout="out('6154219539807733297');" style=""> 619              msg[0] = HPlusConstants.CMD_SET_INCOMING_CALL_NUMBER;                                                 </span>
<span  style=""> 620                                                                                                                    </span>
<span class="-3757743872034498506" onmouseenter="enter('-3757743872034498506');" onmouseout="out('-3757743872034498506');" style=""> 621              for (int i = 0; i &lt; msg.length - 1; i++)                                                              </span>
<span class="-6825376348023798015" onmouseenter="enter('-6825376348023798015');" onmouseout="out('-6825376348023798015');" style=""> 622                  msg[i + 1] = (byte) &quot;GadgetBridge&quot;.charAt(i);                                                     </span>
<span  style=""> 623                                                                                                                    </span>
<span class="-6541237243628611070" onmouseenter="enter('-6541237243628611070');" onmouseout="out('-6541237243628611070');" style=""> 624              builder.write(ctrlCharacteristic, msg);                                                               </span>
<span class="-5534937907083456817" onmouseenter="enter('-5534937907083456817');" onmouseout="out('-5534937907083456817');" style=""> 625              builder.queue(getQueue());                                                                            </span>

<span class="7080241092423381085" onmouseenter="enter('7080241092423381085');" onmouseout="out('7080241092423381085');" style=""> 626          } catch (IOException e) {                                                                                 </span>
<span class="-8668891040554562167" onmouseenter="enter('-8668891040554562167');" onmouseout="out('-8668891040554562167');" style=""><abbr title=" 627              GB.toast(getContext(), &quot;Error setting Vibration: &quot; + e.getLocalizedMessage(), Toast.LENGTH_LONG, GB.ERROR);"> 627              GB.toast(getContext(), &quot;Error setting Vibration: &quot; + e.getLocalizedMessage(), Toast.LENGTH_LONG, GB.ERðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 628          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 629      }                                                                                                             </span>
<span  style=""> 630                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 631      @Override                                                                                                     </span>
<span class="-3293819866797459784" onmouseenter="enter('-3293819866797459784');" onmouseout="out('-3293819866797459784');" style=""> 632      public void onScreenshotReq() {                                                                               </span>
<span  style=""> 633                                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 634      }                                                                                                             </span>
<span  style=""> 635                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 636      @Override                                                                                                     </span>
<span class="-2597044235576493624" onmouseenter="enter('-2597044235576493624');" onmouseout="out('-2597044235576493624');" style=""> 637      public void onEnableHeartRateSleepSupport(boolean enable) {                                                   </span>
<span class="7623304499723183910" onmouseenter="enter('7623304499723183910');" onmouseout="out('7623304499723183910');" style=""> 638          onEnableRealtimeHeartRateMeasurement(enable);                                                             </span>
<span  style=""> 639                                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 640      }                                                                                                             </span>
<span  style=""> 641                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 642      @Override                                                                                                     </span>
<span class="-7200644583722212481" onmouseenter="enter('-7200644583722212481');" onmouseout="out('-7200644583722212481');" style=""> 643      public void onAddCalendarEvent(CalendarEventSpec calendarEventSpec) {                                         </span>
<span  style=""> 644                                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 645      }                                                                                                             </span>
<span  style=""> 646                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 647      @Override                                                                                                     </span>
<span class="2890386202777848228" onmouseenter="enter('2890386202777848228');" onmouseout="out('2890386202777848228');" style=""> 648      public void onDeleteCalendarEvent(byte type, long id) {                                                       </span>
<span  style=""> 649                                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 650      }                                                                                                             </span>
<span  style=""> 651                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 652      @Override                                                                                                     </span>
<span class="349159621018699769" onmouseenter="enter('349159621018699769');" onmouseout="out('349159621018699769');" style=""> 653      public void onSendConfiguration(String config) {                                                              </span>
<span class="-7846666641684196127" onmouseenter="enter('-7846666641684196127');" onmouseout="out('-7846666641684196127');" style=""> 654          LOG.info(&quot;Send Configuration: &quot; + config);                                                                </span>
<span  style=""> 655                                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 656      }                                                                                                             </span>
<span  style=""> 657                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 658      @Override                                                                                                     </span>
<span class="-1180224994468071186" onmouseenter="enter('-1180224994468071186');" onmouseout="out('-1180224994468071186');" style=""> 659      public void onTestNewFunction() {                                                                             </span>
<span class="5914733006117960203" onmouseenter="enter('5914733006117960203');" onmouseout="out('5914733006117960203');" style=""> 660          LOG.info(&quot;Test New Function&quot;);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 661      }                                                                                                             </span>
<span  style=""> 662                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 663      @Override                                                                                                     </span>
<span class="-6167041048283935417" onmouseenter="enter('-6167041048283935417');" onmouseout="out('-6167041048283935417');" style=""> 664      public void onSendWeather(WeatherSpec weatherSpec) {                                                          </span>
<span  style=""> 665                                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 666      }                                                                                                             </span>
<span  style=""> 667                                                                                                                    </span>




<span  style=""> 668                                                                                                                    </span>
<span class="-4706054677770626804" onmouseenter="enter('-4706054677770626804');" onmouseout="out('-4706054677770626804');" style=""> 669      private void showIncomingCall(String name, String rawNumber) {                                                </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 670          try {                                                                                                     </span>
<span class="3592618537022379156" onmouseenter="enter('3592618537022379156');" onmouseout="out('3592618537022379156');" style=""> 671              StringBuilder number = new StringBuilder();                                                           </span>
<span  style=""> 672                                                                                                                    </span>
<span class="8350107368880842067" onmouseenter="enter('8350107368880842067');" onmouseout="out('8350107368880842067');" style=""> 673              //Clean up number as the device only accepts digits                                                   </span>
<span class="9010108090093925813" onmouseenter="enter('9010108090093925813');" onmouseout="out('9010108090093925813');" style=""> 674              for (char c : rawNumber.toCharArray()) {                                                              </span>
<span class="-3606938168735497741" onmouseenter="enter('-3606938168735497741');" onmouseout="out('-3606938168735497741');" style=""> 675                  if (Character.isDigit(c)) {                                                                       </span>
<span class="-1236668618857566487" onmouseenter="enter('-1236668618857566487');" onmouseout="out('-1236668618857566487');" style=""> 676                      number.append(c);                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 677                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 678              }                                                                                                     </span>
<span  style=""> 679                                                                                                                    </span>
<span class="-8981057032029232134" onmouseenter="enter('-8981057032029232134');" onmouseout="out('-8981057032029232134');" style=""> 680              TransactionBuilder builder = performInitialized(&quot;incomingCall&quot;);                                      </span>
<span  style=""> 681                                                                                                                    </span>
<span class="-470559072641579707" onmouseenter="enter('-470559072641579707');" onmouseout="out('-470559072641579707');" style=""> 682              //Enable call notifications                                                                           </span>
<span class="-2018055458770536330" onmouseenter="enter('-2018055458770536330');" onmouseout="out('-2018055458770536330');" style=""> 683              builder.write(ctrlCharacteristic, new byte[]{HPlusConstants.CMD_ACTION_INCOMING_CALL, 1});            </span>
<span  style=""> 684                                                                                                                    </span>
<span class="2257971100060063202" onmouseenter="enter('2257971100060063202');" onmouseout="out('2257971100060063202');" style=""> 685              //Show Call Icon                                                                                      </span>
<span class="431202743276395661" onmouseenter="enter('431202743276395661');" onmouseout="out('431202743276395661');" style=""><abbr title=" 686              builder.write(ctrlCharacteristic, new byte[]{HPlusConstants.CMD_SET_INCOMING_CALL, HPlusConstants.ARG_INCOMING_CALL});"> 686              builder.write(ctrlCharacteristic, new byte[]{HPlusConstants.CMD_SET_INCOMING_CALL, HPlusConstants.ARG_ðŸ”µ</abbr></span>
<span  style=""> 687                                                                                                                    </span>
<span class="-1463217213013643309" onmouseenter="enter('-1463217213013643309');" onmouseout="out('-1463217213013643309');" style=""> 688              byte[] msg = new byte[13];                                                                            </span>
<span  style=""> 689                                                                                                                    </span>
<span  style=""> 690                                                                                                                    </span>
<span class="4148550063034252717" onmouseenter="enter('4148550063034252717');" onmouseout="out('4148550063034252717');" style=""> 691              //Show call name                                                                                      </span>
<span  style=""> 692                                                                                                                    </span>
<span class="-7993208990588136145" onmouseenter="enter('-7993208990588136145');" onmouseout="out('-7993208990588136145');" style=""> 693              for (int i = 0; i &lt; msg.length; i++)                                                                  </span>
<span class="-452829507499965658" onmouseenter="enter('-452829507499965658');" onmouseout="out('-452829507499965658');" style=""> 694                  msg[i] = &#x27; &#x27;;                                                                                     </span>
<span  style=""> 695                                                                                                                    </span>
<span class="3205766085188191830" onmouseenter="enter('3205766085188191830');" onmouseout="out('3205766085188191830');" style=""> 696              byte[] nameBytes = encodeStringToDevice(name);                                                        </span>
<span class="-783531191089635895" onmouseenter="enter('-783531191089635895');" onmouseout="out('-783531191089635895');" style=""> 697              for (int i = 0; i &lt; nameBytes.length &amp;&amp; i &lt; (msg.length - 1); i++)                                    </span>
<span class="6765965112598420400" onmouseenter="enter('6765965112598420400');" onmouseout="out('6765965112598420400');" style=""> 698                  msg[i + 1] = nameBytes[i];                                                                        </span>
<span  style=""> 699                                                                                                                    </span>
<span class="-8475803122541257030" onmouseenter="enter('-8475803122541257030');" onmouseout="out('-8475803122541257030');" style=""> 700              msg[0] = HPlusConstants.CMD_ACTION_DISPLAY_TEXT_NAME;                                                 </span>
<span class="-6541237243628611070" onmouseenter="enter('-6541237243628611070');" onmouseout="out('-6541237243628611070');" style=""> 701              builder.write(ctrlCharacteristic, msg);                                                               </span>
<span  style=""> 702                                                                                                                    </span>
<span class="-2032388462516825457" onmouseenter="enter('-2032388462516825457');" onmouseout="out('-2032388462516825457');" style=""> 703              msg[0] = HPlusConstants.CMD_ACTION_DISPLAY_TEXT_NAME_CN;                                              </span>
<span class="-6541237243628611070" onmouseenter="enter('-6541237243628611070');" onmouseout="out('-6541237243628611070');" style=""> 704              builder.write(ctrlCharacteristic, msg);                                                               </span>
<span  style=""> 705                                                                                                                    </span>
<span class="2195247688369690659" onmouseenter="enter('2195247688369690659');" onmouseout="out('2195247688369690659');" style=""> 706              builder.wait(200);                                                                                    </span>
<span class="-2713623245355191357" onmouseenter="enter('-2713623245355191357');" onmouseout="out('-2713623245355191357');" style=""> 707              msg = msg.clone();                                                                                    </span>
<span  style=""> 708                                                                                                                    </span>
<span class="7410242265141315458" onmouseenter="enter('7410242265141315458');" onmouseout="out('7410242265141315458');" style=""> 709              //Show call number                                                                                    </span>
<span class="-7993208990588136145" onmouseenter="enter('-7993208990588136145');" onmouseout="out('-7993208990588136145');" style=""> 710              for (int i = 0; i &lt; msg.length; i++)                                                                  </span>
<span class="-452829507499965658" onmouseenter="enter('-452829507499965658');" onmouseout="out('-452829507499965658');" style=""> 711                  msg[i] = &#x27; &#x27;;                                                                                     </span>
<span  style=""> 712                                                                                                                    </span>
<span class="-3492043630386970598" onmouseenter="enter('-3492043630386970598');" onmouseout="out('-3492043630386970598');" style=""> 713              for (int i = 0; i &lt; number.length() &amp;&amp; i &lt; (msg.length - 1); i++)                                     </span>
<span class="1716636883153338951" onmouseenter="enter('1716636883153338951');" onmouseout="out('1716636883153338951');" style=""> 714                  msg[i + 1] = (byte) number.charAt(i);                                                             </span>
<span  style=""> 715                                                                                                                    </span>
<span class="6154219539807733297" onmouseenter="enter('6154219539807733297');" onmouseout="out('6154219539807733297');" style=""> 716              msg[0] = HPlusConstants.CMD_SET_INCOMING_CALL_NUMBER;                                                 </span>
<span  style=""> 717                                                                                                                    </span>
<span class="-6541237243628611070" onmouseenter="enter('-6541237243628611070');" onmouseout="out('-6541237243628611070');" style=""> 718              builder.write(ctrlCharacteristic, msg);                                                               </span>
<span  style=""> 719                                                                                                                    </span>
<span class="-5534937907083456817" onmouseenter="enter('-5534937907083456817');" onmouseout="out('-5534937907083456817');" style=""> 720              builder.queue(getQueue());                                                                            </span>












































<span class="7080241092423381085" onmouseenter="enter('7080241092423381085');" onmouseout="out('7080241092423381085');" style=""> 721          } catch (IOException e) {                                                                                 </span>
<span class="5607211826758247973" onmouseenter="enter('5607211826758247973');" onmouseout="out('5607211826758247973');" style=""><abbr title=" 722              GB.toast(getContext(), &quot;Error showing incoming call: &quot; + e.getLocalizedMessage(), Toast.LENGTH_LONG, GB.ERROR);"> 722              GB.toast(getContext(), &quot;Error showing incoming call: &quot; + e.getLocalizedMessage(), Toast.LENGTH_LONG, GðŸ”µ</abbr></span>
<span  style=""> 723                                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 724          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 725      }                                                                                                             </span>
<span  style=""> 726                                                                                                                    </span>
<span class="2669430369160917091" onmouseenter="enter('2669430369160917091');" onmouseout="out('2669430369160917091');" style=""> 727      private void showText(String title, String body) {                                                            </span>
<span  style=""> 728                                                                                                                    </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 729          try {                                                                                                     </span>
<span class="8575811470010308677" onmouseenter="enter('8575811470010308677');" onmouseout="out('8575811470010308677');" style=""> 730              TransactionBuilder builder = performInitialized(&quot;notification&quot;);                                      </span>
<span  style=""> 731                                                                                                                    </span>
<span class="-5183659842430019699" onmouseenter="enter('-5183659842430019699');" onmouseout="out('-5183659842430019699');" style=""> 732              String message = &quot;&quot;;                                                                                  </span>
<span  style=""> 733                                                                                                                    </span>
<span class="4468139034893619423" onmouseenter="enter('4468139034893619423');" onmouseout="out('4468139034893619423');" style=""> 734              if (title != null &amp;&amp; title.length() &gt; 0) {                                                            </span>
<span class="7795018544496104410" onmouseenter="enter('7795018544496104410');" onmouseout="out('7795018544496104410');" style=""> 735                  message = StringUtils.pad(StringUtils.truncate(title, 16), 16); //Limit title to top row          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 736              }                                                                                                     </span>
<span  style=""> 737                                                                                                                    </span>
<span class="4413763009831532288" onmouseenter="enter('4413763009831532288');" onmouseout="out('4413763009831532288');" style=""> 738              if (body != null) {                                                                                   </span>
<span class="-4827052322101785234" onmouseenter="enter('-4827052322101785234');" onmouseout="out('-4827052322101785234');" style=""> 739                  message += body;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 740              }                                                                                                     </span>
<span  style=""> 741                                                                                                                    </span>
<span class="-7267330840062528164" onmouseenter="enter('-7267330840062528164');" onmouseout="out('-7267330840062528164');" style=""> 742              byte[] messageBytes = encodeStringToDevice(message);                                                  </span>
<span  style=""> 743                                                                                                                    </span>
<span class="-6947936872233705603" onmouseenter="enter('-6947936872233705603');" onmouseout="out('-6947936872233705603');" style=""> 744              int length = messageBytes.length / 17;                                                                </span>


<span  style=""> 745                                                                                                                    </span>
<span class="-2276016464983488813" onmouseenter="enter('-2276016464983488813');" onmouseout="out('-2276016464983488813');" style=""><abbr title=" 746              builder.write(ctrlCharacteristic, new byte[]{HPlusConstants.CMD_SET_INCOMING_MESSAGE, HPlusConstants.ARG_INCOMING_MESSAGE});"> 746              builder.write(ctrlCharacteristic, new byte[]{HPlusConstants.CMD_SET_INCOMING_MESSAGE, HPlusConstants.AðŸ”µ</abbr></span>
<span  style=""> 747                                                                                                                    </span>
<span class="8693578117273483378" onmouseenter="enter('8693578117273483378');" onmouseout="out('8693578117273483378');" style=""> 748              int remaining = Math.min(255, (messageBytes.length % 17 &gt; 0) ? length + 1 : length);                  </span>
<span  style=""> 749                                                                                                                    </span>
<span class="-6938126668542148541" onmouseenter="enter('-6938126668542148541');" onmouseout="out('-6938126668542148541');" style=""> 750              byte[] msg = new byte[20];                                                                            </span>
<span class="6283182582673736786" onmouseenter="enter('6283182582673736786');" onmouseout="out('6283182582673736786');" style=""> 751              msg[0] = HPlusConstants.CMD_ACTION_DISPLAY_TEXT;                                                      </span>
<span class="2374339912776851777" onmouseenter="enter('2374339912776851777');" onmouseout="out('2374339912776851777');" style=""> 752              msg[1] = (byte) remaining;                                                                            </span>
<span  style=""> 753                                                                                                                    </span>
<span class="7174897306012108535" onmouseenter="enter('7174897306012108535');" onmouseout="out('7174897306012108535');" style=""> 754              for (int i = 2; i &lt; msg.length; i++)                                                                  </span>
<span class="-452829507499965658" onmouseenter="enter('-452829507499965658');" onmouseout="out('-452829507499965658');" style=""> 755                  msg[i] = &#x27; &#x27;;                                                                                     </span>
<span  style=""> 756                                                                                                                    </span>
<span class="3830575522721686257" onmouseenter="enter('3830575522721686257');" onmouseout="out('3830575522721686257');" style=""> 757              int message_index = 0;                                                                                </span>
<span class="-2034332425768882561" onmouseenter="enter('-2034332425768882561');" onmouseout="out('-2034332425768882561');" style=""> 758              int i = 3;                                                                                            </span>
<span  style=""> 759                                                                                                                    </span>
<span class="-1190413858175663168" onmouseenter="enter('-1190413858175663168');" onmouseout="out('-1190413858175663168');" style=""> 760              for (int j = 0; j &lt; messageBytes.length; j++) {                                                       </span>
<span class="7313274589245642051" onmouseenter="enter('7313274589245642051');" onmouseout="out('7313274589245642051');" style=""> 761                  msg[i++] = messageBytes[j];                                                                       </span>
<span  style=""> 762                                                                                                                    </span>
<span class="2532902930176219444" onmouseenter="enter('2532902930176219444');" onmouseout="out('2532902930176219444');" style=""> 763                  if (i == msg.length) {                                                                            </span>
<span class="3910183690266069869" onmouseenter="enter('3910183690266069869');" onmouseout="out('3910183690266069869');" style=""> 764                      message_index++;                                                                              </span>
<span class="245661942964386200" onmouseenter="enter('245661942964386200');" onmouseout="out('245661942964386200');" style=""> 765                      msg[2] = (byte) message_index;                                                                </span>
<span class="-6541237243628611070" onmouseenter="enter('-6541237243628611070');" onmouseout="out('-6541237243628611070');" style=""> 766                      builder.write(ctrlCharacteristic, msg);                                                       </span>
<span  style=""> 767                                                                                                                    </span>
<span class="-2713623245355191357" onmouseenter="enter('-2713623245355191357');" onmouseout="out('-2713623245355191357');" style=""> 768                      msg = msg.clone();                                                                            </span>
<span class="-167106871940501653" onmouseenter="enter('-167106871940501653');" onmouseout="out('-167106871940501653');" style=""> 769                      for (i = 3; i &lt; msg.length; i++)                                                              </span>
<span class="-452829507499965658" onmouseenter="enter('-452829507499965658');" onmouseout="out('-452829507499965658');" style=""> 770                          msg[i] = &#x27; &#x27;;                                                                             </span>
<span  style=""> 771                                                                                                                    </span>
<span class="6801923363408854922" onmouseenter="enter('6801923363408854922');" onmouseout="out('6801923363408854922');" style=""> 772                      if (message_index &lt; remaining)                                                                </span>
<span class="-1159031305874409210" onmouseenter="enter('-1159031305874409210');" onmouseout="out('-1159031305874409210');" style=""> 773                          i = 3;                                                                                    </span>
<span class="-7436048164614400339" onmouseenter="enter('-7436048164614400339');" onmouseout="out('-7436048164614400339');" style=""> 774                      else                                                                                          </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 775                          break;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 776                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 777              }                                                                                                     </span>
<span  style=""> 778                                                                                                                    </span>
<span class="-4555485809374867291" onmouseenter="enter('-4555485809374867291');" onmouseout="out('-4555485809374867291');" style=""> 779              msg[2] = (byte) remaining;                                                                            </span>
<span  style=""> 780                                                                                                                    </span>
<span class="-6541237243628611070" onmouseenter="enter('-6541237243628611070');" onmouseout="out('-6541237243628611070');" style=""> 781              builder.write(ctrlCharacteristic, msg);                                                               </span>
<span class="-5534937907083456817" onmouseenter="enter('-5534937907083456817');" onmouseout="out('-5534937907083456817');" style=""> 782              builder.queue(getQueue());                                                                            </span>

<span class="7080241092423381085" onmouseenter="enter('7080241092423381085');" onmouseout="out('7080241092423381085');" style=""> 783          } catch (IOException e) {                                                                                 </span>
<span class="-3005578110211581534" onmouseenter="enter('-3005578110211581534');" onmouseout="out('-3005578110211581534');" style=""><abbr title=" 784              GB.toast(getContext(), &quot;Error showing device Notification: &quot; + e.getLocalizedMessage(), Toast.LENGTH_LONG, GB.ERROR);"> 784              GB.toast(getContext(), &quot;Error showing device Notification: &quot; + e.getLocalizedMessage(), Toast.LENGTH_LðŸ”µ</abbr></span>
<span  style=""> 785                                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 786          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 787      }                                                                                                             </span>
<span  style=""> 788                                                                                                                    </span>
<span class="2374016947018039193" onmouseenter="enter('2374016947018039193');" onmouseout="out('2374016947018039193');" style=""> 789      private void close() {                                                                                        </span>
<span class="-7083324746063369835" onmouseenter="enter('-7083324746063369835');" onmouseout="out('-7083324746063369835');" style=""> 790          if (syncHelper != null) {                                                                                 </span>
<span class="-7896063751358438536" onmouseenter="enter('-7896063751358438536');" onmouseout="out('-7896063751358438536');" style=""> 791              syncHelper.quit();                                                                                    </span>

<span class="-9199515530023964212" onmouseenter="enter('-9199515530023964212');" onmouseout="out('-9199515530023964212');" style=""> 792              syncHelper = null;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 793          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 794      }                                                                                                             </span>
<span  style=""> 795                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 796      /**                                                                                                           </span>
<span class="-2663499463451487171" onmouseenter="enter('-2663499463451487171');" onmouseout="out('-2663499463451487171');" style=""> 797       * HPlus devices accept a subset of GB2312 with some modifications.                                           </span>
<span class="-5296208177179093503" onmouseenter="enter('-5296208177179093503');" onmouseout="out('-5296208177179093503');" style=""> 798       * This function will apply a custom transliteration.                                                         </span>
<span class="-3958616819795834315" onmouseenter="enter('-3958616819795834315');" onmouseout="out('-3958616819795834315');" style=""> 799       * While related to the methods implemented in LanguageUtils. These are specific for HPLUS                    </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 800       *                                                                                                            </span>
<span class="-1743400565649069450" onmouseenter="enter('-1743400565649069450');" onmouseout="out('-1743400565649069450');" style=""> 801       * @param s The String to transliterate                                                                       </span>
<span class="2025757942853076636" onmouseenter="enter('2025757942853076636');" onmouseout="out('2025757942853076636');" style=""> 802       * @return An array of bytes ready to be sent to the device                                                   </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 803       */                                                                                                           </span>
<span class="-8823649745364399870" onmouseenter="enter('-8823649745364399870');" onmouseout="out('-8823649745364399870');" style=""> 804      private byte[] encodeStringToDevice(String s) {                                                               </span>
<span  style=""> 805                                                                                                                    </span>
<span class="9112578812581115095" onmouseenter="enter('9112578812581115095');" onmouseout="out('9112578812581115095');" style=""> 806          List&lt;Byte&gt; outBytes = new ArrayList&lt;Byte&gt;();                                                              </span>
<span  style=""> 807                                                                                                                    </span>
<span class="-2173296205160994735" onmouseenter="enter('-2173296205160994735');" onmouseout="out('-2173296205160994735');" style=""> 808          for (int i = 0; i &lt; s.length(); i++) {                                                                    </span>
<span class="-425988238491649263" onmouseenter="enter('-425988238491649263');" onmouseout="out('-425988238491649263');" style=""> 809              Character c = s.charAt(i);                                                                            </span>
<span class="-6710548613110177700" onmouseenter="enter('-6710548613110177700');" onmouseout="out('-6710548613110177700');" style=""> 810              byte[] cs;                                                                                            </span>
<span  style=""> 811                                                                                                                    </span>
<span class="-7646558473377848105" onmouseenter="enter('-7646558473377848105');" onmouseout="out('-7646558473377848105');" style=""> 812              if (HPlusConstants.transliterateMap.containsKey(c)) {                                                 </span>
<span class="-6146107856909202732" onmouseenter="enter('-6146107856909202732');" onmouseout="out('-6146107856909202732');" style=""> 813                  cs = new byte[]{HPlusConstants.transliterateMap.get(c)};                                          </span>

<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 814              } else {                                                                                              </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 815                  try {                                                                                             </span>
<span class="4261488925756856253" onmouseenter="enter('4261488925756856253');" onmouseout="out('4261488925756856253');" style=""><abbr title=" 816                      if (HPlusCoordinator.getLanguage(this.gbDevice.getAddress()) == HPlusConstants.ARG_LANGUAGE_CN)"> 816                      if (HPlusCoordinator.getLanguage(this.gbDevice.getAddress()) == HPlusConstants.ARG_LANGUAGE_CNðŸ”µ</abbr></span>



<span class="637174697753777176" onmouseenter="enter('637174697753777176');" onmouseout="out('637174697753777176');" style=""> 817                          cs = c.toString().getBytes(&quot;GB2312&quot;);                                                     </span>
<span class="-7436048164614400339" onmouseenter="enter('-7436048164614400339');" onmouseout="out('-7436048164614400339');" style=""> 818                      else                                                                                          </span>
<span class="2017863147194107834" onmouseenter="enter('2017863147194107834');" onmouseout="out('2017863147194107834');" style=""> 819                          cs = c.toString().getBytes(&quot;UTF-8&quot;);                                                      </span>
<span class="2368993151256970390" onmouseenter="enter('2368993151256970390');" onmouseout="out('2368993151256970390');" style=""> 820                  } catch (UnsupportedEncodingException e) {                                                        </span>
<span class="-3354683485831733476" onmouseenter="enter('-3354683485831733476');" onmouseout="out('-3354683485831733476');" style=""> 821                      //Fallback. Result string may be strange, but better than nothing                             </span>
<span class="8503633407937514815" onmouseenter="enter('8503633407937514815');" onmouseout="out('8503633407937514815');" style=""> 822                      cs = c.toString().getBytes();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 823                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 824              }                                                                                                     </span>
<span class="-6641336920880003910" onmouseenter="enter('-6641336920880003910');" onmouseout="out('-6641336920880003910');" style=""> 825              for (int j = 0; j &lt; cs.length; j++)                                                                   </span>
<span class="-3202096665861785787" onmouseenter="enter('-3202096665861785787');" onmouseout="out('-3202096665861785787');" style=""> 826                  outBytes.add(cs[j]);                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 827          }                                                                                                         </span>
<span  style=""> 828                                                                                                                    </span>
<span class="-3374475540404730530" onmouseenter="enter('-3374475540404730530');" onmouseout="out('-3374475540404730530');" style=""> 829          return ArrayUtils.toPrimitive(outBytes.toArray(new Byte[outBytes.size()]));                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 830      }                                                                                                             </span>
<span  style=""> 831                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 832      @Override                                                                                                     </span>
<span class="5766835775206074860" onmouseenter="enter('5766835775206074860');" onmouseout="out('5766835775206074860');" style=""> 833      public boolean onCharacteristicChanged(BluetoothGatt gatt,                                                    </span>
<span class="-4605279869462858246" onmouseenter="enter('-4605279869462858246');" onmouseout="out('-4605279869462858246');" style=""> 834                                             BluetoothGattCharacteristic characteristic) {                          </span>
<span class="3568353468682512593" onmouseenter="enter('3568353468682512593');" onmouseout="out('3568353468682512593');" style=""> 835          if (super.onCharacteristicChanged(gatt, characteristic)) {                                                </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 836              return true;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 837          }                                                                                                         </span>
<span  style=""> 838                                                                                                                    </span>
<span class="-554497628129246365" onmouseenter="enter('-554497628129246365');" onmouseout="out('-554497628129246365');" style=""> 839          UUID characteristicUUID = characteristic.getUuid();                                                       </span>
<span class="-6511473927788972997" onmouseenter="enter('-6511473927788972997');" onmouseout="out('-6511473927788972997');" style=""> 840          byte[] data = characteristic.getValue();                                                                  </span>
<span class="-9068394225512782226" onmouseenter="enter('-9068394225512782226');" onmouseout="out('-9068394225512782226');" style=""> 841          if (data.length == 0)                                                                                     </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 842              return true;                                                                                          </span>
<span  style=""> 843                                                                                                                    </span>
<span class="-6174724810667438225" onmouseenter="enter('-6174724810667438225');" onmouseout="out('-6174724810667438225');" style=""> 844          switch (data[0]) {                                                                                        </span>
<span class="-7471367524105316507" onmouseenter="enter('-7471367524105316507');" onmouseout="out('-7471367524105316507');" style=""> 845              case HPlusConstants.DATA_VERSION:                                                                     </span>

<span class="834208567599674439" onmouseenter="enter('834208567599674439');" onmouseout="out('834208567599674439');" style=""> 846                  return syncHelper.processVersion(data);                                                           </span>
<span  style=""> 847                                                                                                                    </span>
<span class="1169399726781128730" onmouseenter="enter('1169399726781128730');" onmouseout="out('1169399726781128730');" style=""> 848              case HPlusConstants.DATA_STATS:                                                                       </span>
<span class="5585642239306136594" onmouseenter="enter('5585642239306136594');" onmouseout="out('5585642239306136594');" style=""> 849                  boolean result = syncHelper.processRealtimeStats(data);                                           </span>

<span class="-275963108691733288" onmouseenter="enter('-275963108691733288');" onmouseout="out('-275963108691733288');" style=""> 850                  if (result) {                                                                                     </span>
<span class="8166670735037070350" onmouseenter="enter('8166670735037070350');" onmouseout="out('8166670735037070350');" style=""> 851                      processExtraInfo (data);                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 852                  }                                                                                                 </span>
<span class="-6419540350677864751" onmouseenter="enter('-6419540350677864751');" onmouseout="out('-6419540350677864751');" style=""> 853                  return result;                                                                                    </span>
<span  style=""> 854                                                                                                                    </span>
<span class="-4210542885090051053" onmouseenter="enter('-4210542885090051053');" onmouseout="out('-4210542885090051053');" style=""> 855              case HPlusConstants.DATA_SLEEP:                                                                       </span>
<span class="518826808593425602" onmouseenter="enter('518826808593425602');" onmouseout="out('518826808593425602');" style=""> 856                  return syncHelper.processIncomingSleepData(data);                                                 </span>
<span  style=""> 857                                                                                                                    </span>
<span class="-1422636218963608963" onmouseenter="enter('-1422636218963608963');" onmouseout="out('-1422636218963608963');" style=""> 858              case HPlusConstants.DATA_STEPS:                                                                       </span>
<span class="8674745804491038360" onmouseenter="enter('8674745804491038360');" onmouseout="out('8674745804491038360');" style=""> 859                  return syncHelper.processDaySummary(data);                                                        </span>
<span  style=""> 860                                                                                                                    </span>
<span class="-5989439275286926467" onmouseenter="enter('-5989439275286926467');" onmouseout="out('-5989439275286926467');" style=""> 861              case HPlusConstants.DATA_DAY_SUMMARY:                                                                 </span>
<span class="7331785174258232326" onmouseenter="enter('7331785174258232326');" onmouseout="out('7331785174258232326');" style=""> 862              case HPlusConstants.DATA_DAY_SUMMARY_ALT:                                                             </span>
<span class="30657702577029265" onmouseenter="enter('30657702577029265');" onmouseout="out('30657702577029265');" style=""> 863                  return syncHelper.processIncomingDaySlotData(data);                                               </span>
<span  style=""> 864                                                                                                                    </span>



<span class="-8178136317704390296" onmouseenter="enter('-8178136317704390296');" onmouseout="out('-8178136317704390296');" style=""> 865              default:                                                                                              </span>
<span class="1420750839019347937" onmouseenter="enter('1420750839019347937');" onmouseout="out('1420750839019347937');" style=""> 866                  LOG.info(&quot;Unhandled characteristic change: &quot; + characteristicUUID + &quot; code: &quot; + data[0]);         </span>


<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 867                  return true;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 868          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 869      }                                                                                                             </span>
<span  style=""> 870                                                                                                                    </span>
<span class="7849365739445821006" onmouseenter="enter('7849365739445821006');" onmouseout="out('7849365739445821006');" style=""> 871      private void  processExtraInfo (byte[] data) {                                                                </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 872          try {                                                                                                     </span>
<span class="1301421367666227040" onmouseenter="enter('1301421367666227040');" onmouseout="out('1301421367666227040');" style=""> 873              HPlusDataRecordRealtime record = new HPlusDataRecordRealtime(data);                                   </span>

<span  style=""> 874                                                                                                                    </span>
<span class="-6654310698308599937" onmouseenter="enter('-6654310698308599937');" onmouseout="out('-6654310698308599937');" style=""> 875              handleBatteryInfo(record.battery);                                                                    </span>
<span  style=""> 876                                                                                                                    </span>
<span class="957024650015159745" onmouseenter="enter('957024650015159745');" onmouseout="out('957024650015159745');" style=""> 877              String DEVINFO_STEP = getContext().getString(R.string.chart_steps) + &quot;: &quot;;                            </span>
<span class="6721786647083530834" onmouseenter="enter('6721786647083530834');" onmouseout="out('6721786647083530834');" style=""> 878              String DEVINFO_DISTANCE = getContext().getString(R.string.distance) + &quot;: &quot;;                           </span>
<span class="-5544509155513691581" onmouseenter="enter('-5544509155513691581');" onmouseout="out('-5544509155513691581');" style=""> 879              String DEVINFO_CALORY = getContext().getString(R.string.calories) + &quot;: &quot;;                             </span>
<span class="-1747100185926561303" onmouseenter="enter('-1747100185926561303');" onmouseout="out('-1747100185926561303');" style=""> 880              String DEVINFO_HEART = getContext().getString(R.string.charts_legend_heartrate);                      </span>
<span  style=""> 881                                                                                                                    </span>
<span class="4539674976293838945" onmouseenter="enter('4539674976293838945');" onmouseout="out('4539674976293838945');" style=""> 882              String info = &quot;&quot;;                                                                                     </span>
<span class="603487404869738075" onmouseenter="enter('603487404869738075');" onmouseout="out('603487404869738075');" style=""> 883              if (record.steps &gt; 0) {                                                                               </span>
<span class="-2978506504361701541" onmouseenter="enter('-2978506504361701541');" onmouseout="out('-2978506504361701541');" style=""> 884                  info += DEVINFO_STEP + String.valueOf(record.steps) + &quot;   &quot;;                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 885              }                                                                                                     </span>
<span class="-7382416609460855139" onmouseenter="enter('-7382416609460855139');" onmouseout="out('-7382416609460855139');" style=""> 886              if (record.distance &gt; 0) {                                                                            </span>
<span class="-2048257966317820482" onmouseenter="enter('-2048257966317820482');" onmouseout="out('-2048257966317820482');" style=""> 887                  info += DEVINFO_DISTANCE + String.valueOf(record.distance) + &quot;   &quot;;                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 888              }                                                                                                     </span>
<span class="4712868732205106298" onmouseenter="enter('4712868732205106298');" onmouseout="out('4712868732205106298');" style=""> 889              if (record.calories &gt; 0) {                                                                            </span>
<span class="2384981866748506593" onmouseenter="enter('2384981866748506593');" onmouseout="out('2384981866748506593');" style=""> 890                  info += DEVINFO_CALORY + String.valueOf(record.calories) + &quot;   &quot;;                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 891              }                                                                                                     </span>
<span class="6107108997806163588" onmouseenter="enter('6107108997806163588');" onmouseout="out('6107108997806163588');" style=""> 892              if (record.heartRate &gt; 0) {                                                                           </span>
<span class="-1812003693369079048" onmouseenter="enter('-1812003693369079048');" onmouseout="out('-1812003693369079048');" style=""> 893                  info += DEVINFO_HEART + String.valueOf(record.heartRate) + &quot;   &quot;;                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 894              }                                                                                                     </span>
<span  style=""> 895                                                                                                                    </span>
<span class="8504830605092703085" onmouseenter="enter('8504830605092703085');" onmouseout="out('8504830605092703085');" style=""> 896              if (!info.equals(&quot;&quot;)) {                                                                               </span>
<span class="6111723630993110344" onmouseenter="enter('6111723630993110344');" onmouseout="out('6111723630993110344');" style=""> 897                  getDevice().addDeviceInfo(new GenericItem(&quot;&quot;, info));                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 898              }                                                                                                     </span>
<span class="-1471183022667940231" onmouseenter="enter('-1471183022667940231');" onmouseout="out('-1471183022667940231');" style=""> 899          } catch (IllegalArgumentException e) {                                                                    </span>
<span class="6834133445830742921" onmouseenter="enter('6834133445830742921');" onmouseout="out('6834133445830742921');" style=""> 900              LOG.info((e.getMessage()));                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 901          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 902      }                                                                                                             </span>
<span  style=""> 903                                                                                                                    </span>
<span class="4996395825247791604" onmouseenter="enter('4996395825247791604');" onmouseout="out('4996395825247791604');" style=""> 904      private void handleBatteryInfo(byte data) {                                                                   </span>
<span class="-7378539640920011500" onmouseenter="enter('-7378539640920011500');" onmouseout="out('-7378539640920011500');" style=""> 905              if (batteryCmd.level != (short) data) {                                                               </span>
<span class="-854799830555733473" onmouseenter="enter('-854799830555733473');" onmouseout="out('-854799830555733473');" style=""> 906                  batteryCmd.level = (short) data;                                                                  </span>
<span class="-2053668973544639303" onmouseenter="enter('-2053668973544639303');" onmouseout="out('-2053668973544639303');" style=""> 907                  handleGBDeviceEvent(batteryCmd);                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 908              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 909      }                                                                                                             </span>
<span  style=""> 910                                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 911  }                                                                                                                 </span></pre></td>
                            <td><pre><span class="8479584664325737777" onmouseenter="enter('8479584664325737777');" onmouseout="out('8479584664325737777');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">   1 -/*  Copyright (C) 2016-2017 Alberto, Andreas Shimokawa, ivanovlev, JoaÌƒo                                          </span>
<span class="9160074651943959828" onmouseenter="enter('9160074651943959828');" onmouseout="out('9160074651943959828');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">   2 -    Paulo Barraca                                                                                                 </span>
<span class="-6087748460489311696" onmouseenter="enter('-6087748460489311696');" onmouseout="out('-6087748460489311696');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">   3 +/*  Copyright (C) 2016-2017 Alberto, Andreas Shimokawa, Carsten Pfeiffer,                                         </span>
<span class="4602200970174176129" onmouseenter="enter('4602200970174176129');" onmouseout="out('4602200970174176129');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">   4 +    ivanovlev, JoaÌƒo Paulo Barraca                                                                                </span>
<span  style="">   5                                                                                                                    </span>
<span class="-7759499394858783956" onmouseenter="enter('-7759499394858783956');" onmouseout="out('-7759499394858783956');" style="">   6      This file is part of Gadgetbridge.                                                                            </span>
<span  style="">   7                                                                                                                    </span>
<span class="-2647557636279629478" onmouseenter="enter('-2647557636279629478');" onmouseout="out('-2647557636279629478');" style="">   8      Gadgetbridge is free software: you can redistribute it and/or modify                                          </span>
<span class="4878736751218581391" onmouseenter="enter('4878736751218581391');" onmouseout="out('4878736751218581391');" style="">   9      it under the terms of the GNU Affero General Public License as published                                      </span>
<span class="-5160078368722358920" onmouseenter="enter('-5160078368722358920');" onmouseout="out('-5160078368722358920');" style="">  10      by the Free Software Foundation, either version 3 of the License, or                                          </span>
<span class="6661789815760177463" onmouseenter="enter('6661789815760177463');" onmouseout="out('6661789815760177463');" style="">  11      (at your option) any later version.                                                                           </span>
<span  style="">  12                                                                                                                    </span>
<span class="-6828199977528779968" onmouseenter="enter('-6828199977528779968');" onmouseout="out('-6828199977528779968');" style="">  13      Gadgetbridge is distributed in the hope that it will be useful,                                               </span>
<span class="4883593508173597945" onmouseenter="enter('4883593508173597945');" onmouseout="out('4883593508173597945');" style="">  14      but WITHOUT ANY WARRANTY; without even the implied warranty of                                                </span>
<span class="2300657568347926527" onmouseenter="enter('2300657568347926527');" onmouseout="out('2300657568347926527');" style="">  15      MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the                                                 </span>
<span class="4681049817175334681" onmouseenter="enter('4681049817175334681');" onmouseout="out('4681049817175334681');" style="">  16      GNU Affero General Public License for more details.                                                           </span>
<span  style="">  17                                                                                                                    </span>
<span class="-3235531360569947201" onmouseenter="enter('-3235531360569947201');" onmouseout="out('-3235531360569947201');" style="">  18      You should have received a copy of the GNU Affero General Public License                                      </span>
<span class="-3088444562895398794" onmouseenter="enter('-3088444562895398794');" onmouseout="out('-3088444562895398794');" style="">  19      along with this program.  If not, see &lt;http://www.gnu.org/licenses/&gt;. */                                      </span>
<span class="-5217643761314834314" onmouseenter="enter('-5217643761314834314');" onmouseout="out('-5217643761314834314');" style="">  20  package nodomain.freeyourgadget.gadgetbridge.service.devices.hplus;                                               </span>
<span  style="">  21                                                                                                                    </span>
<span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style="">  22  /*                                                                                                                </span>
<span class="5416857039449935643" onmouseenter="enter('5416857039449935643');" onmouseout="out('5416857039449935643');" style="">  23  * @author JoÃ£o Paulo Barraca &amp;lt;jpbarraca@gmail.com&amp;gt;                                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  24  */                                                                                                                </span>
<span  style="">  25                                                                                                                    </span>
<span class="2440823415412133066" onmouseenter="enter('2440823415412133066');" onmouseout="out('2440823415412133066');" style="">  26  import android.bluetooth.BluetoothGatt;                                                                           </span>
<span class="4736969144974683041" onmouseenter="enter('4736969144974683041');" onmouseout="out('4736969144974683041');" style="">  27  import android.bluetooth.BluetoothGattCharacteristic;                                                             </span>
<span class="-489389385851058391" onmouseenter="enter('-489389385851058391');" onmouseout="out('-489389385851058391');" style="">  28  import android.content.BroadcastReceiver;                                                                         </span>
<span class="5922045460006936195" onmouseenter="enter('5922045460006936195');" onmouseout="out('5922045460006936195');" style="">  29  import android.content.Context;                                                                                   </span>
<span class="6568903789857736568" onmouseenter="enter('6568903789857736568');" onmouseout="out('6568903789857736568');" style="">  30  import android.content.Intent;                                                                                    </span>
<span class="8697221465021235869" onmouseenter="enter('8697221465021235869');" onmouseout="out('8697221465021235869');" style="">  31  import android.content.IntentFilter;                                                                              </span>
<span class="-8750621697125156872" onmouseenter="enter('-8750621697125156872');" onmouseout="out('-8750621697125156872');" style="">  32  import android.net.Uri;                                                                                           </span>
<span class="2517521963771876570" onmouseenter="enter('2517521963771876570');" onmouseout="out('2517521963771876570');" style="">  33  import android.support.v4.content.LocalBroadcastManager;                                                          </span>
<span class="-4373317539211938720" onmouseenter="enter('-4373317539211938720');" onmouseout="out('-4373317539211938720');" style="">  34  import android.widget.Toast;                                                                                      </span>
<span  style="">  35                                                                                                                    </span>
<span class="2359514128542055982" onmouseenter="enter('2359514128542055982');" onmouseout="out('2359514128542055982');" style="">  36  import org.apache.commons.lang3.ArrayUtils;                                                                       </span>
<span class="9072327285961251154" onmouseenter="enter('9072327285961251154');" onmouseout="out('9072327285961251154');" style="">  37  import org.slf4j.Logger;                                                                                          </span>
<span class="697043352225962606" onmouseenter="enter('697043352225962606');" onmouseout="out('697043352225962606');" style="">  38  import org.slf4j.LoggerFactory;                                                                                   </span>
<span  style="">  39                                                                                                                    </span>
<span class="103340661636203254" onmouseenter="enter('103340661636203254');" onmouseout="out('103340661636203254');" style="">  40  import java.io.IOException;                                                                                       </span>
<span class="8256805395213692609" onmouseenter="enter('8256805395213692609');" onmouseout="out('8256805395213692609');" style="">  41  import java.io.UnsupportedEncodingException;                                                                      </span>
<span class="9191247685397773893" onmouseenter="enter('9191247685397773893');" onmouseout="out('9191247685397773893');" style="">  42  import java.util.ArrayList;                                                                                       </span>
<span class="-28465676010609596" onmouseenter="enter('-28465676010609596');" onmouseout="out('-28465676010609596');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  43 +import java.util.Arrays;                                                                                          </span>
<span class="1562735530241225598" onmouseenter="enter('1562735530241225598');" onmouseout="out('1562735530241225598');" style="">  44  import java.util.Calendar;                                                                                        </span>
<span class="-4685965902094386510" onmouseenter="enter('-4685965902094386510');" onmouseout="out('-4685965902094386510');" style="">  45  import java.util.GregorianCalendar;                                                                               </span>
<span class="-1786020958497218848" onmouseenter="enter('-1786020958497218848');" onmouseout="out('-1786020958497218848');" style="">  46  import java.util.List;                                                                                            </span>
<span class="2390503830490498598" onmouseenter="enter('2390503830490498598');" onmouseout="out('2390503830490498598');" style="">  47  import java.util.UUID;                                                                                            </span>
<span  style="">  48                                                                                                                    </span>
<span class="-7198279398549834921" onmouseenter="enter('-7198279398549834921');" onmouseout="out('-7198279398549834921');" style="">  49  import nodomain.freeyourgadget.gadgetbridge.R;                                                                    </span>
<span class="-3005335786085073829" onmouseenter="enter('-3005335786085073829');" onmouseout="out('-3005335786085073829');" style="">  50  import nodomain.freeyourgadget.gadgetbridge.deviceevents.GBDeviceEventBatteryInfo;                                </span>
<span class="5042091401088979472" onmouseenter="enter('5042091401088979472');" onmouseout="out('5042091401088979472');" style="">  51  import nodomain.freeyourgadget.gadgetbridge.devices.hplus.HPlusConstants;                                         </span>
<span class="-4973236722115174269" onmouseenter="enter('-4973236722115174269');" onmouseout="out('-4973236722115174269');" style="">  52  import nodomain.freeyourgadget.gadgetbridge.devices.hplus.HPlusCoordinator;                                       </span>
<span class="4836892992022606579" onmouseenter="enter('4836892992022606579');" onmouseout="out('4836892992022606579');" style="">  53  import nodomain.freeyourgadget.gadgetbridge.impl.GBDevice;                                                        </span>
<span class="-8766238562391910018" onmouseenter="enter('-8766238562391910018');" onmouseout="out('-8766238562391910018');" style="">  54  import nodomain.freeyourgadget.gadgetbridge.model.Alarm;                                                          </span>
<span class="-3899388208810973608" onmouseenter="enter('-3899388208810973608');" onmouseout="out('-3899388208810973608');" style="">  55  import nodomain.freeyourgadget.gadgetbridge.model.CalendarEventSpec;                                              </span>
<span class="-9074570965792323186" onmouseenter="enter('-9074570965792323186');" onmouseout="out('-9074570965792323186');" style="">  56  import nodomain.freeyourgadget.gadgetbridge.model.CallSpec;                                                       </span>
<span class="-7415926539738049206" onmouseenter="enter('-7415926539738049206');" onmouseout="out('-7415926539738049206');" style="">  57  import nodomain.freeyourgadget.gadgetbridge.model.CannedMessagesSpec;                                             </span>
<span class="1593353296711823731" onmouseenter="enter('1593353296711823731');" onmouseout="out('1593353296711823731');" style="">  58  import nodomain.freeyourgadget.gadgetbridge.model.DeviceType;                                                     </span>
<span class="7672535166545256161" onmouseenter="enter('7672535166545256161');" onmouseout="out('7672535166545256161');" style="">  59  import nodomain.freeyourgadget.gadgetbridge.model.GenericItem;                                                    </span>
<span class="-4068239021838445503" onmouseenter="enter('-4068239021838445503');" onmouseout="out('-4068239021838445503');" style="">  60  import nodomain.freeyourgadget.gadgetbridge.model.MusicSpec;                                                      </span>
<span class="7536481506851862405" onmouseenter="enter('7536481506851862405');" onmouseout="out('7536481506851862405');" style="">  61  import nodomain.freeyourgadget.gadgetbridge.model.MusicStateSpec;                                                 </span>
<span class="8239808916005009388" onmouseenter="enter('8239808916005009388');" onmouseout="out('8239808916005009388');" style="">  62  import nodomain.freeyourgadget.gadgetbridge.model.NotificationSpec;                                               </span>
<span class="-40839721936664146" onmouseenter="enter('-40839721936664146');" onmouseout="out('-40839721936664146');" style="">  63  import nodomain.freeyourgadget.gadgetbridge.model.WeatherSpec;                                                    </span>
<span class="4344228987867394358" onmouseenter="enter('4344228987867394358');" onmouseout="out('4344228987867394358');" style="">  64  import nodomain.freeyourgadget.gadgetbridge.service.btle.AbstractBTLEDeviceSupport;                               </span>
<span class="5014349364961188522" onmouseenter="enter('5014349364961188522');" onmouseout="out('5014349364961188522');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  65 -import nodomain.freeyourgadget.gadgetbridge.service.btle.GattService;                                             </span>
<span class="3410519392510510669" onmouseenter="enter('3410519392510510669');" onmouseout="out('3410519392510510669');" style="">  66  import nodomain.freeyourgadget.gadgetbridge.service.btle.TransactionBuilder;                                      </span>
<span class="245401146070313948" onmouseenter="enter('245401146070313948');" onmouseout="out('245401146070313948');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  67 -import nodomain.freeyourgadget.gadgetbridge.service.btle.actions.SetDeviceStateAction;                            </span>
<span class="-2373314641424532722" onmouseenter="enter('-2373314641424532722');" onmouseout="out('-2373314641424532722');" style="">  68  import nodomain.freeyourgadget.gadgetbridge.service.btle.profiles.deviceinfo.DeviceInfo;                          </span>
<span class="5990042019621381740" onmouseenter="enter('5990042019621381740');" onmouseout="out('5990042019621381740');" style="">  69  import nodomain.freeyourgadget.gadgetbridge.service.btle.profiles.deviceinfo.DeviceInfoProfile;                   </span>
<span class="-3798970344596478499" onmouseenter="enter('-3798970344596478499');" onmouseout="out('-3798970344596478499');" style="">  70  import nodomain.freeyourgadget.gadgetbridge.util.GB;                                                              </span>
<span class="1710555602396666834" onmouseenter="enter('1710555602396666834');" onmouseout="out('1710555602396666834');" style="">  71  import nodomain.freeyourgadget.gadgetbridge.util.StringUtils;                                                     </span>
<span  style="">  72                                                                                                                    </span>
<span  style="">  73                                                                                                                    </span>
<span class="-4082404187206109090" onmouseenter="enter('-4082404187206109090');" onmouseout="out('-4082404187206109090');" style="">  74  public class HPlusSupport extends AbstractBTLEDeviceSupport {                                                     </span>
<span class="-3586142179549744071" onmouseenter="enter('-3586142179549744071');" onmouseout="out('-3586142179549744071');" style="">  75      private static final Logger LOG = LoggerFactory.getLogger(HPlusSupport.class);                                </span>
<span  style="">  76                                                                                                                    </span>
<span class="-5014208032763947659" onmouseenter="enter('-5014208032763947659');" onmouseout="out('-5014208032763947659');" style="">  77      public BluetoothGattCharacteristic ctrlCharacteristic = null;                                                 </span>
<span class="-1389691261480921757" onmouseenter="enter('-1389691261480921757');" onmouseout="out('-1389691261480921757');" style="">  78      public BluetoothGattCharacteristic measureCharacteristic = null;                                              </span>
<span  style="">  79                                                                                                                    </span>
<span class="7253442996403887798" onmouseenter="enter('7253442996403887798');" onmouseout="out('7253442996403887798');" style="">  80      private final GBDeviceEventBatteryInfo batteryCmd = new GBDeviceEventBatteryInfo();                           </span>
<span  style="">  81                                                                                                                    </span>
<span class="-2647742433589439535" onmouseenter="enter('-2647742433589439535');" onmouseout="out('-2647742433589439535');" style="">  82      private HPlusHandlerThread syncHelper;                                                                        </span>
<span class="7122708288156354523" onmouseenter="enter('7122708288156354523');" onmouseout="out('7122708288156354523');" style="">  83      private DeviceType deviceType = DeviceType.UNKNOWN;                                                           </span>
<span  style="">  84                                                                                                                    </span>
<span class="4625474178666977899" onmouseenter="enter('4625474178666977899');" onmouseout="out('4625474178666977899');" style="">  85      private final BroadcastReceiver mReceiver = new BroadcastReceiver() {                                         </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  86          @Override                                                                                                 </span>
<span class="-1520739091809898546" onmouseenter="enter('-1520739091809898546');" onmouseout="out('-1520739091809898546');" style="">  87          public void onReceive(Context context, Intent intent) {                                                   </span>
<span class="-4530039192824031" onmouseenter="enter('-4530039192824031');" onmouseout="out('-4530039192824031');" style="">  88              String s = intent.getAction();                                                                        </span>
<span class="-431805254143538347" onmouseenter="enter('-431805254143538347');" onmouseout="out('-431805254143538347');" style="">  89              if (s.equals(DeviceInfoProfile.ACTION_DEVICE_INFO)) {                                                 </span>
<span class="2870344340685632275" onmouseenter="enter('2870344340685632275');" onmouseout="out('2870344340685632275');" style=""><abbr title="  90                  handleDeviceInfo((nodomain.freeyourgadget.gadgetbridge.service.btle.profiles.deviceinfo.DeviceInfo) intent.getParcelableExtra(DeviceInfoProfile.EXTRA_DEVICE_INFO));">  90                  handleDeviceInfo((nodomain.freeyourgadget.gadgetbridge.service.btle.profiles.deviceinfo.DeviceInfoðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  91              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  92          }                                                                                                         </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">  93      };                                                                                                            </span>
<span  style="">  94                                                                                                                    </span>
<span class="-6599573096376092321" onmouseenter="enter('-6599573096376092321');" onmouseout="out('-6599573096376092321');" style="">  95      public HPlusSupport(DeviceType type) {                                                                        </span>
<span class="4463652287758102089" onmouseenter="enter('4463652287758102089');" onmouseout="out('4463652287758102089');" style="">  96          super(LOG);                                                                                               </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  97 -                                                                                                                  </span>
<span class="-911614436014638875" onmouseenter="enter('-911614436014638875');" onmouseout="out('-911614436014638875');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  98 +        LOG.info(&quot;HPlusSupport Instance Created&quot;);                                                                </span>
<span class="3299229106905835199" onmouseenter="enter('3299229106905835199');" onmouseout="out('3299229106905835199');" style="">  99          deviceType = type;                                                                                        </span>
<span  style=""> 100                                                                                                                    </span>
<span class="377067810786142420" onmouseenter="enter('377067810786142420');" onmouseout="out('377067810786142420');" style=""> 101          addSupportedService(HPlusConstants.UUID_SERVICE_HP);                                                      </span>
<span  style=""> 102                                                                                                                    </span>
<span class="5948400278394960963" onmouseenter="enter('5948400278394960963');" onmouseout="out('5948400278394960963');" style=""> 103          LocalBroadcastManager broadcastManager = LocalBroadcastManager.getInstance(getContext());                 </span>
<span class="-6475340056070675924" onmouseenter="enter('-6475340056070675924');" onmouseout="out('-6475340056070675924');" style=""> 104          IntentFilter intentFilter = new IntentFilter();                                                           </span>
<span  style=""> 105                                                                                                                    </span>
<span class="-9031778988080615533" onmouseenter="enter('-9031778988080615533');" onmouseout="out('-9031778988080615533');" style=""> 106          broadcastManager.registerReceiver(mReceiver, intentFilter);                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 107      }                                                                                                             </span>
<span  style=""> 108                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 109      @Override                                                                                                     </span>
<span class="-4657406736363487113" onmouseenter="enter('-4657406736363487113');" onmouseout="out('-4657406736363487113');" style=""> 110      public void dispose() {                                                                                       </span>
<span class="-1145329300786377991" onmouseenter="enter('-1145329300786377991');" onmouseout="out('-1145329300786377991');" style=""> 111          LOG.info(&quot;Dispose&quot;);                                                                                      </span>
<span class="5948400278394960963" onmouseenter="enter('5948400278394960963');" onmouseout="out('5948400278394960963');" style=""> 112          LocalBroadcastManager broadcastManager = LocalBroadcastManager.getInstance(getContext());                 </span>
<span class="-2591797645219758220" onmouseenter="enter('-2591797645219758220');" onmouseout="out('-2591797645219758220');" style=""> 113          broadcastManager.unregisterReceiver(mReceiver);                                                           </span>
<span  style=""> 114                                                                                                                    </span>
<span class="-2251371211449821101" onmouseenter="enter('-2251371211449821101');" onmouseout="out('-2251371211449821101');" style=""> 115          close();                                                                                                  </span>
<span  style=""> 116                                                                                                                    </span>
<span class="4250596422636225835" onmouseenter="enter('4250596422636225835');" onmouseout="out('4250596422636225835');" style=""> 117          super.dispose();                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 118      }                                                                                                             </span>
<span  style=""> 119                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 120      @Override                                                                                                     </span>
<span class="624595386859969795" onmouseenter="enter('624595386859969795');" onmouseout="out('624595386859969795');" style=""> 121      protected TransactionBuilder initializeDevice(TransactionBuilder builder) {                                   </span>
<span class="6943102306574884764" onmouseenter="enter('6943102306574884764');" onmouseout="out('6943102306574884764');" style=""> 122          LOG.info(&quot;Initializing&quot;);                                                                                 </span>
<span  style=""> 123                                                                                                                    </span>
<span class="-132260743307911133" onmouseenter="enter('-132260743307911133');" onmouseout="out('-132260743307911133');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 124 -        builder.add(new SetDeviceStateAction(getDevice(), GBDevice.State.INITIALIZING, getContext()));            </span>
<span class="-5776342764121597122" onmouseenter="enter('-5776342764121597122');" onmouseout="out('-5776342764121597122');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 125 +        gbDevice.setState(GBDevice.State.INITIALIZING);                                                           </span>
<span class="-6083303279196581322" onmouseenter="enter('-6083303279196581322');" onmouseout="out('-6083303279196581322');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 126 +        gbDevice.sendDeviceUpdateIntent(getContext());                                                            </span>
<span  style=""> 127                                                                                                                    </span>
<span class="-2070300686094273817" onmouseenter="enter('-2070300686094273817');" onmouseout="out('-2070300686094273817');" style=""> 128          measureCharacteristic = getCharacteristic(HPlusConstants.UUID_CHARACTERISTIC_MEASURE);                    </span>
<span class="-3114635167656687851" onmouseenter="enter('-3114635167656687851');" onmouseout="out('-3114635167656687851');" style=""> 129          ctrlCharacteristic = getCharacteristic(HPlusConstants.UUID_CHARACTERISTIC_CONTROL);                       </span>
<span  style=""> 130                                                                                                                    </span>
<span class="-3832688778173104110" onmouseenter="enter('-3832688778173104110');" onmouseout="out('-3832688778173104110');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 131 -        getDevice().setFirmwareVersion(&quot;N/A&quot;);                                                                    </span>
<span class="-4069256094451065143" onmouseenter="enter('-4069256094451065143');" onmouseout="out('-4069256094451065143');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 132 -        getDevice().setFirmwareVersion2(&quot;N/A&quot;);                                                                   </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 133 -                                                                                                                  </span>
<span class="-1983961118622982915" onmouseenter="enter('-1983961118622982915');" onmouseout="out('-1983961118622982915');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 134 -        syncHelper = new HPlusHandlerThread(getDevice(), getContext(), this);                                     </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 135 -                                                                                                                  </span>
<span class="7604618378927278958" onmouseenter="enter('7604618378927278958');" onmouseout="out('7604618378927278958');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 136 -        //Initialize device                                                                                       </span>
<span class="-504446867221575653" onmouseenter="enter('-504446867221575653');" onmouseout="out('-504446867221575653');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 137 -        sendUserInfo(builder); //Sync preferences                                                                 </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 138 -                                                                                                                  </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 139 -                                                                                                                  </span>
<span class="2384486382001682171" onmouseenter="enter('2384486382001682171');" onmouseout="out('2384486382001682171');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 140 -        requestDeviceInfo(builder);                                                                               </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 141 -                                                                                                                  </span>
<span class="-3454584244340176965" onmouseenter="enter('-3454584244340176965');" onmouseout="out('-3454584244340176965');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 142 -        setInitialized(builder);                                                                                  </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 143 -                                                                                                                  </span>
<span class="-1903424543284802769" onmouseenter="enter('-1903424543284802769');" onmouseout="out('-1903424543284802769');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 144 -        syncHelper.start();                                                                                       </span>
<span  style=""> 145                                                                                                                    </span>
<span class="3645364997644532552" onmouseenter="enter('3645364997644532552');" onmouseout="out('3645364997644532552');" style=""> 146          builder.notify(getCharacteristic(HPlusConstants.UUID_CHARACTERISTIC_MEASURE), true);                      </span>
<span class="8787860057533172177" onmouseenter="enter('8787860057533172177');" onmouseout="out('8787860057533172177');" style=""> 147          builder.setGattCallback(this);                                                                            </span>
<span class="7940646096517618441" onmouseenter="enter('7940646096517618441');" onmouseout="out('7940646096517618441');" style=""> 148          builder.notify(measureCharacteristic, true);                                                              </span>
<span class="7604618378927278958" onmouseenter="enter('7604618378927278958');" onmouseout="out('7604618378927278958');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 149 +        //Initialize device                                                                                       </span>
<span class="-504446867221575653" onmouseenter="enter('-504446867221575653');" onmouseout="out('-504446867221575653');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 150 +        sendUserInfo(builder); //Sync preferences                                                                 </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 151 +                                                                                                                  </span>
<span class="6586859092027978564" onmouseenter="enter('6586859092027978564');" onmouseout="out('6586859092027978564');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 152 +        gbDevice.setState(GBDevice.State.INITIALIZED);                                                            </span>
<span class="-6083303279196581322" onmouseenter="enter('-6083303279196581322');" onmouseout="out('-6083303279196581322');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 153 +        gbDevice.sendDeviceUpdateIntent(getContext());                                                            </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 154 +                                                                                                                  </span>
<span class="-2848575222108196544" onmouseenter="enter('-2848575222108196544');" onmouseout="out('-2848575222108196544');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 155 +        if(syncHelper == null) {                                                                                  </span>
<span class="-1983961118622982915" onmouseenter="enter('-1983961118622982915');" onmouseout="out('-1983961118622982915');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 156 +            syncHelper = new HPlusHandlerThread(getDevice(), getContext(), this);                                 </span>
<span class="-1903424543284802769" onmouseenter="enter('-1903424543284802769');" onmouseout="out('-1903424543284802769');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 157 +            syncHelper.start();                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 158 +        }                                                                                                         </span>
<span class="-1977462876553727609" onmouseenter="enter('-1977462876553727609');" onmouseout="out('-1977462876553727609');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 159 +        syncHelper.sync();                                                                                        </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 160 +                                                                                                                  </span>
<span class="-3832688778173104110" onmouseenter="enter('-3832688778173104110');" onmouseout="out('-3832688778173104110');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 161 +        getDevice().setFirmwareVersion(&quot;N/A&quot;);                                                                    </span>
<span class="-4069256094451065143" onmouseenter="enter('-4069256094451065143');" onmouseout="out('-4069256094451065143');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 162 +        getDevice().setFirmwareVersion2(&quot;N/A&quot;);                                                                   </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 163 +                                                                                                                  </span>
<span class="2384486382001682171" onmouseenter="enter('2384486382001682171');" onmouseout="out('2384486382001682171');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 164 +        requestDeviceInfo(builder);                                                                               </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 165 +                                                                                                                  </span>
<span class="8801197429786363323" onmouseenter="enter('8801197429786363323');" onmouseout="out('8801197429786363323');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 166 +        LOG.info(&quot;Initialization Done&quot;);                                                                          </span>
<span  style=""> 167                                                                                                                    </span>
<span class="4801455624621135639" onmouseenter="enter('4801455624621135639');" onmouseout="out('4801455624621135639');" style=""> 168          return builder;                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 169      }                                                                                                             </span>
<span  style=""> 170                                                                                                                    </span>
<span class="464313160346579114" onmouseenter="enter('464313160346579114');" onmouseout="out('464313160346579114');" style=""> 171      private HPlusSupport sendUserInfo(TransactionBuilder builder) {                                               </span>
<span class="8659711009772068062" onmouseenter="enter('8659711009772068062');" onmouseout="out('8659711009772068062');" style=""> 172          builder.write(ctrlCharacteristic, HPlusConstants.CMD_SET_PREF_START);                                     </span>
<span class="-4601813669746665290" onmouseenter="enter('-4601813669746665290');" onmouseout="out('-4601813669746665290');" style=""> 173          builder.write(ctrlCharacteristic, HPlusConstants.CMD_SET_PREF_START1);                                    </span>
<span  style=""> 174                                                                                                                    </span>
<span class="5354677973902937208" onmouseenter="enter('5354677973902937208');" onmouseout="out('5354677973902937208');" style=""> 175          syncPreferences(builder);                                                                                 </span>
<span  style=""> 176                                                                                                                    </span>
<span class="3647312381509313349" onmouseenter="enter('3647312381509313349');" onmouseout="out('3647312381509313349');" style=""> 177          builder.write(ctrlCharacteristic, new byte[]{HPlusConstants.CMD_SET_CONF_END});                           </span>
<span class="2297715846939503398" onmouseenter="enter('2297715846939503398');" onmouseout="out('2297715846939503398');" style=""> 178          return this;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 179      }                                                                                                             </span>
<span  style=""> 180                                                                                                                    </span>
<span class="-3630452951846679004" onmouseenter="enter('-3630452951846679004');" onmouseout="out('-3630452951846679004');" style=""> 181      private HPlusSupport syncPreferences(TransactionBuilder transaction) {                                        </span>
<span  style=""> 182                                                                                                                    </span>
<span class="9200456031894264068" onmouseenter="enter('9200456031894264068');" onmouseout="out('9200456031894264068');" style=""> 183          if (deviceType == DeviceType.HPLUS) {                                                                     </span>
<span class="-9160949721391368870" onmouseenter="enter('-9160949721391368870');" onmouseout="out('-9160949721391368870');" style=""> 184              setSIT(transaction);          //Sync SIT Interval                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 185          }                                                                                                         </span>
<span  style=""> 186                                                                                                                    </span>
<span class="8565886816545297578" onmouseenter="enter('8565886816545297578');" onmouseout="out('8565886816545297578');" style=""> 187          setCurrentDate(transaction);                                                                              </span>
<span class="-8398887245102710885" onmouseenter="enter('-8398887245102710885');" onmouseout="out('-8398887245102710885');" style=""> 188          setCurrentTime(transaction);                                                                              </span>
<span class="1698876699275306022" onmouseenter="enter('1698876699275306022');" onmouseout="out('1698876699275306022');" style=""> 189          setDayOfWeek(transaction);                                                                                </span>
<span class="-2226089159439282115" onmouseenter="enter('-2226089159439282115');" onmouseout="out('-2226089159439282115');" style=""> 190          setTimeMode(transaction);                                                                                 </span>
<span  style=""> 191                                                                                                                    </span>
<span class="-3967043804590944959" onmouseenter="enter('-3967043804590944959');" onmouseout="out('-3967043804590944959');" style=""> 192          setGender(transaction);                                                                                   </span>
<span class="1849231822188363425" onmouseenter="enter('1849231822188363425');" onmouseout="out('1849231822188363425');" style=""> 193          setAge(transaction);                                                                                      </span>
<span class="8409976551582741350" onmouseenter="enter('8409976551582741350');" onmouseout="out('8409976551582741350');" style=""> 194          setWeight(transaction);                                                                                   </span>
<span class="2177249264940965323" onmouseenter="enter('2177249264940965323');" onmouseout="out('2177249264940965323');" style=""> 195          setHeight(transaction);                                                                                   </span>
<span  style=""> 196                                                                                                                    </span>
<span class="-7350523131149809385" onmouseenter="enter('-7350523131149809385');" onmouseout="out('-7350523131149809385');" style=""> 197          setGoal(transaction);                                                                                     </span>
<span class="4493614030159792560" onmouseenter="enter('4493614030159792560');" onmouseout="out('4493614030159792560');" style=""> 198          setLanguage(transaction);                                                                                 </span>
<span class="-7293987064571039169" onmouseenter="enter('-7293987064571039169');" onmouseout="out('-7293987064571039169');" style=""> 199          setScreenTime(transaction);                                                                               </span>
<span class="8577063610004227384" onmouseenter="enter('8577063610004227384');" onmouseout="out('8577063610004227384');" style=""> 200          setUnit(transaction);                                                                                     </span>
<span class="-4090002420283598619" onmouseenter="enter('-4090002420283598619');" onmouseout="out('-4090002420283598619');" style=""> 201          setAllDayHeart(transaction);                                                                              </span>
<span  style=""> 202                                                                                                                    </span>
<span class="2297715846939503398" onmouseenter="enter('2297715846939503398');" onmouseout="out('2297715846939503398');" style=""> 203          return this;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 204      }                                                                                                             </span>
<span  style=""> 205                                                                                                                    </span>
<span class="2971063439380410916" onmouseenter="enter('2971063439380410916');" onmouseout="out('2971063439380410916');" style=""> 206      private HPlusSupport setLanguage(TransactionBuilder transaction) {                                            </span>
<span class="2849983908429827334" onmouseenter="enter('2849983908429827334');" onmouseout="out('2849983908429827334');" style=""> 207          byte value = HPlusCoordinator.getLanguage(getDevice().getAddress());                                      </span>
<span class="3291452160875082121" onmouseenter="enter('3291452160875082121');" onmouseout="out('3291452160875082121');" style=""> 208          transaction.write(ctrlCharacteristic, new byte[]{                                                         </span>
<span class="-2720480633878408025" onmouseenter="enter('-2720480633878408025');" onmouseout="out('-2720480633878408025');" style=""> 209                  HPlusConstants.CMD_SET_LANGUAGE,                                                                  </span>
<span class="1200713371940080677" onmouseenter="enter('1200713371940080677');" onmouseout="out('1200713371940080677');" style=""> 210                  value                                                                                             </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 211          });                                                                                                       </span>
<span class="2297715846939503398" onmouseenter="enter('2297715846939503398');" onmouseout="out('2297715846939503398');" style=""> 212          return this;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 213      }                                                                                                             </span>
<span  style=""> 214                                                                                                                    </span>
<span  style=""> 215                                                                                                                    </span>
<span class="4317151267263402448" onmouseenter="enter('4317151267263402448');" onmouseout="out('4317151267263402448');" style=""> 216      private HPlusSupport setTimeMode(TransactionBuilder transaction) {                                            </span>
<span class="218359786857846408" onmouseenter="enter('218359786857846408');" onmouseout="out('218359786857846408');" style=""> 217          byte value = HPlusCoordinator.getTimeMode(getDevice().getAddress());                                      </span>
<span  style=""> 218                                                                                                                    </span>
<span class="3291452160875082121" onmouseenter="enter('3291452160875082121');" onmouseout="out('3291452160875082121');" style=""> 219          transaction.write(ctrlCharacteristic, new byte[]{                                                         </span>
<span class="4263534606018086323" onmouseenter="enter('4263534606018086323');" onmouseout="out('4263534606018086323');" style=""> 220                  HPlusConstants.CMD_SET_TIMEMODE,                                                                  </span>
<span class="1200713371940080677" onmouseenter="enter('1200713371940080677');" onmouseout="out('1200713371940080677');" style=""> 221                  value                                                                                             </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 222          });                                                                                                       </span>
<span class="2297715846939503398" onmouseenter="enter('2297715846939503398');" onmouseout="out('2297715846939503398');" style=""> 223          return this;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 224      }                                                                                                             </span>
<span  style=""> 225                                                                                                                    </span>
<span class="1527802699814540214" onmouseenter="enter('1527802699814540214');" onmouseout="out('1527802699814540214');" style=""> 226      private HPlusSupport setUnit(TransactionBuilder transaction) {                                                </span>
<span class="-8211628829141498614" onmouseenter="enter('-8211628829141498614');" onmouseout="out('-8211628829141498614');" style=""> 227          byte value = HPlusCoordinator.getUnit(getDevice().getAddress());                                          </span>
<span class="3291452160875082121" onmouseenter="enter('3291452160875082121');" onmouseout="out('3291452160875082121');" style=""> 228          transaction.write(ctrlCharacteristic, new byte[]{                                                         </span>
<span class="330508883912365904" onmouseenter="enter('330508883912365904');" onmouseout="out('330508883912365904');" style=""> 229                  HPlusConstants.CMD_SET_UNITS,                                                                     </span>
<span class="1200713371940080677" onmouseenter="enter('1200713371940080677');" onmouseout="out('1200713371940080677');" style=""> 230                  value                                                                                             </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 231          });                                                                                                       </span>
<span class="2297715846939503398" onmouseenter="enter('2297715846939503398');" onmouseout="out('2297715846939503398');" style=""> 232          return this;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 233      }                                                                                                             </span>
<span  style=""> 234                                                                                                                    </span>
<span class="-7617350710418441488" onmouseenter="enter('-7617350710418441488');" onmouseout="out('-7617350710418441488');" style=""> 235      private HPlusSupport setCurrentDate(TransactionBuilder transaction) {                                         </span>
<span class="2531610087543829790" onmouseenter="enter('2531610087543829790');" onmouseout="out('2531610087543829790');" style=""> 236          Calendar c = GregorianCalendar.getInstance();                                                             </span>
<span class="-2923391553220974433" onmouseenter="enter('-2923391553220974433');" onmouseout="out('-2923391553220974433');" style=""> 237          int year = c.get(Calendar.YEAR);                                                                          </span>
<span class="8379254238395309807" onmouseenter="enter('8379254238395309807');" onmouseout="out('8379254238395309807');" style=""> 238          int month = c.get(Calendar.MONTH);                                                                        </span>
<span class="-1537240887202619533" onmouseenter="enter('-1537240887202619533');" onmouseout="out('-1537240887202619533');" style=""> 239          int day = c.get(Calendar.DAY_OF_MONTH);                                                                   </span>
<span  style=""> 240                                                                                                                    </span>
<span class="3291452160875082121" onmouseenter="enter('3291452160875082121');" onmouseout="out('3291452160875082121');" style=""> 241          transaction.write(ctrlCharacteristic, new byte[]{                                                         </span>
<span class="-5419256561338282975" onmouseenter="enter('-5419256561338282975');" onmouseout="out('-5419256561338282975');" style=""> 242                  HPlusConstants.CMD_SET_DATE,                                                                      </span>
<span class="596156045428080737" onmouseenter="enter('596156045428080737');" onmouseout="out('596156045428080737');" style=""> 243                  (byte) ((year / 256) &amp; 0xff),                                                                     </span>
<span class="-274510278877719166" onmouseenter="enter('-274510278877719166');" onmouseout="out('-274510278877719166');" style=""> 244                  (byte) (year % 256),                                                                              </span>
<span class="2509221540333605786" onmouseenter="enter('2509221540333605786');" onmouseout="out('2509221540333605786');" style=""> 245                  (byte) (month + 1),                                                                               </span>
<span class="154836591265012146" onmouseenter="enter('154836591265012146');" onmouseout="out('154836591265012146');" style=""> 246                  (byte) (day)                                                                                      </span>
<span  style=""> 247                                                                                                                    </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 248          });                                                                                                       </span>
<span class="2297715846939503398" onmouseenter="enter('2297715846939503398');" onmouseout="out('2297715846939503398');" style=""> 249          return this;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 250      }                                                                                                             </span>
<span  style=""> 251                                                                                                                    </span>
<span class="-5177509192006647721" onmouseenter="enter('-5177509192006647721');" onmouseout="out('-5177509192006647721');" style=""> 252      private HPlusSupport setCurrentTime(TransactionBuilder transaction) {                                         </span>
<span class="2531610087543829790" onmouseenter="enter('2531610087543829790');" onmouseout="out('2531610087543829790');" style=""> 253          Calendar c = GregorianCalendar.getInstance();                                                             </span>
<span  style=""> 254                                                                                                                    </span>
<span class="3291452160875082121" onmouseenter="enter('3291452160875082121');" onmouseout="out('3291452160875082121');" style=""> 255          transaction.write(ctrlCharacteristic, new byte[]{                                                         </span>
<span class="-3810178960282507440" onmouseenter="enter('-3810178960282507440');" onmouseout="out('-3810178960282507440');" style=""> 256                  HPlusConstants.CMD_SET_TIME,                                                                      </span>
<span class="4175240225145224534" onmouseenter="enter('4175240225145224534');" onmouseout="out('4175240225145224534');" style=""> 257                  (byte) c.get(Calendar.HOUR_OF_DAY),                                                               </span>
<span class="-8029568718198783140" onmouseenter="enter('-8029568718198783140');" onmouseout="out('-8029568718198783140');" style=""> 258                  (byte) c.get(Calendar.MINUTE),                                                                    </span>
<span class="-2353745633236339443" onmouseenter="enter('-2353745633236339443');" onmouseout="out('-2353745633236339443');" style=""> 259                  (byte) c.get(Calendar.SECOND)                                                                     </span>
<span  style=""> 260                                                                                                                    </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 261          });                                                                                                       </span>
<span class="2297715846939503398" onmouseenter="enter('2297715846939503398');" onmouseout="out('2297715846939503398');" style=""> 262          return this;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 263      }                                                                                                             </span>
<span  style=""> 264                                                                                                                    </span>
<span  style=""> 265                                                                                                                    </span>
<span class="-4421580834062212270" onmouseenter="enter('-4421580834062212270');" onmouseout="out('-4421580834062212270');" style=""> 266      private HPlusSupport setDayOfWeek(TransactionBuilder transaction) {                                           </span>
<span class="2531610087543829790" onmouseenter="enter('2531610087543829790');" onmouseout="out('2531610087543829790');" style=""> 267          Calendar c = GregorianCalendar.getInstance();                                                             </span>
<span  style=""> 268                                                                                                                    </span>
<span class="3291452160875082121" onmouseenter="enter('3291452160875082121');" onmouseout="out('3291452160875082121');" style=""> 269          transaction.write(ctrlCharacteristic, new byte[]{                                                         </span>
<span class="7969665857025838608" onmouseenter="enter('7969665857025838608');" onmouseout="out('7969665857025838608');" style=""> 270                  HPlusConstants.CMD_SET_WEEK,                                                                      </span>
<span class="2107609500554215585" onmouseenter="enter('2107609500554215585');" onmouseout="out('2107609500554215585');" style=""> 271                  (byte) (c.get(Calendar.DAY_OF_WEEK) - 1)                                                          </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 272          });                                                                                                       </span>
<span class="2297715846939503398" onmouseenter="enter('2297715846939503398');" onmouseout="out('2297715846939503398');" style=""> 273          return this;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 274      }                                                                                                             </span>
<span  style=""> 275                                                                                                                    </span>
<span  style=""> 276                                                                                                                    </span>
<span class="1777874725720523294" onmouseenter="enter('1777874725720523294');" onmouseout="out('1777874725720523294');" style=""> 277      private HPlusSupport setSIT(TransactionBuilder transaction) {                                                 </span>
<span  style=""> 278                                                                                                                    </span>
<span class="-1710515092546508137" onmouseenter="enter('-1710515092546508137');" onmouseout="out('-1710515092546508137');" style=""> 279          //Makibes F68 doesn&#x27;t like this command.                                                                  </span>
<span class="4585394865152052123" onmouseenter="enter('4585394865152052123');" onmouseout="out('4585394865152052123');" style=""> 280          //Just ignore.                                                                                            </span>
<span class="8010717523561516322" onmouseenter="enter('8010717523561516322');" onmouseout="out('8010717523561516322');" style=""> 281          if (deviceType == DeviceType.MAKIBESF68) {                                                                </span>
<span class="2297715846939503398" onmouseenter="enter('2297715846939503398');" onmouseout="out('2297715846939503398');" style=""> 282              return this;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 283          }                                                                                                         </span>
<span  style=""> 284                                                                                                                    </span>
<span class="7782781853756800720" onmouseenter="enter('7782781853756800720');" onmouseout="out('7782781853756800720');" style=""> 285          int startTime = HPlusCoordinator.getSITStartTime(getDevice().getAddress());                               </span>
<span class="8209842661687801925" onmouseenter="enter('8209842661687801925');" onmouseout="out('8209842661687801925');" style=""> 286          int endTime = HPlusCoordinator.getSITEndTime(getDevice().getAddress());                                   </span>
<span  style=""> 287                                                                                                                    </span>
<span class="5882708480576637773" onmouseenter="enter('5882708480576637773');" onmouseout="out('5882708480576637773');" style=""> 288          Calendar now = GregorianCalendar.getInstance();                                                           </span>
<span  style=""> 289                                                                                                                    </span>
<span class="3291452160875082121" onmouseenter="enter('3291452160875082121');" onmouseout="out('3291452160875082121');" style=""> 290          transaction.write(ctrlCharacteristic, new byte[]{                                                         </span>
<span class="-6329136660964193391" onmouseenter="enter('-6329136660964193391');" onmouseout="out('-6329136660964193391');" style=""> 291                  HPlusConstants.CMD_SET_SIT_INTERVAL,                                                              </span>
<span class="-7172094393246648903" onmouseenter="enter('-7172094393246648903');" onmouseout="out('-7172094393246648903');" style=""> 292                  (byte) ((startTime / 256) &amp; 0xff),                                                                </span>
<span class="-3674522560837142583" onmouseenter="enter('-3674522560837142583');" onmouseout="out('-3674522560837142583');" style=""> 293                  (byte) (startTime % 256),                                                                         </span>
<span class="9123983034732908067" onmouseenter="enter('9123983034732908067');" onmouseout="out('9123983034732908067');" style=""> 294                  (byte) ((endTime / 256) &amp; 0xff),                                                                  </span>
<span class="5594695527343368846" onmouseenter="enter('5594695527343368846');" onmouseout="out('5594695527343368846');" style=""> 295                  (byte) (endTime % 256),                                                                           </span>
<span class="-6076240376861215679" onmouseenter="enter('-6076240376861215679');" onmouseout="out('-6076240376861215679');" style=""> 296                  0,                                                                                                </span>
<span class="-6076240376861215679" onmouseenter="enter('-6076240376861215679');" onmouseout="out('-6076240376861215679');" style=""> 297                  0,                                                                                                </span>
<span class="-1881944630562092789" onmouseenter="enter('-1881944630562092789');" onmouseout="out('-1881944630562092789');" style=""> 298                  (byte) ((now.get(Calendar.YEAR) / 256) &amp; 0xff),                                                   </span>
<span class="808961206931151347" onmouseenter="enter('808961206931151347');" onmouseout="out('808961206931151347');" style=""> 299                  (byte) (now.get(Calendar.YEAR) % 256),                                                            </span>
<span class="-3929811106245983954" onmouseenter="enter('-3929811106245983954');" onmouseout="out('-3929811106245983954');" style=""> 300                  (byte) (now.get(Calendar.MONTH) + 1),                                                             </span>
<span class="-6608497570264303352" onmouseenter="enter('-6608497570264303352');" onmouseout="out('-6608497570264303352');" style=""> 301                  (byte) (now.get(Calendar.DAY_OF_MONTH)),                                                          </span>
<span class="-4838072097318336683" onmouseenter="enter('-4838072097318336683');" onmouseout="out('-4838072097318336683');" style=""> 302                  (byte) (now.get(Calendar.HOUR_OF_DAY)),                                                           </span>
<span class="-3604343412851664994" onmouseenter="enter('-3604343412851664994');" onmouseout="out('-3604343412851664994');" style=""> 303                  (byte) (now.get(Calendar.MINUTE)),                                                                </span>
<span class="8073077880938975334" onmouseenter="enter('8073077880938975334');" onmouseout="out('8073077880938975334');" style=""> 304                  (byte) (now.get(Calendar.SECOND)),                                                                </span>
<span class="-6076240376861215679" onmouseenter="enter('-6076240376861215679');" onmouseout="out('-6076240376861215679');" style=""> 305                  0,                                                                                                </span>
<span class="-6076240376861215679" onmouseenter="enter('-6076240376861215679');" onmouseout="out('-6076240376861215679');" style=""> 306                  0,                                                                                                </span>
<span class="-6076240376861215679" onmouseenter="enter('-6076240376861215679');" onmouseout="out('-6076240376861215679');" style=""> 307                  0,                                                                                                </span>
<span class="2218992417378941058" onmouseenter="enter('2218992417378941058');" onmouseout="out('2218992417378941058');" style=""> 308                  0                                                                                                 </span>
<span  style=""> 309                                                                                                                    </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 310          });                                                                                                       </span>
<span class="2297715846939503398" onmouseenter="enter('2297715846939503398');" onmouseout="out('2297715846939503398');" style=""> 311          return this;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 312      }                                                                                                             </span>
<span  style=""> 313                                                                                                                    </span>
<span class="7972248273337413684" onmouseenter="enter('7972248273337413684');" onmouseout="out('7972248273337413684');" style=""> 314      private HPlusSupport setWeight(TransactionBuilder transaction) {                                              </span>
<span class="-6942480616743564353" onmouseenter="enter('-6942480616743564353');" onmouseout="out('-6942480616743564353');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 315 -        byte value = HPlusCoordinator.getUserWeight(getDevice().getAddress());                                    </span>
<span class="8150192687820779212" onmouseenter="enter('8150192687820779212');" onmouseout="out('8150192687820779212');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 316 +        byte value = HPlusCoordinator.getUserWeight();                                                            </span>
<span class="3291452160875082121" onmouseenter="enter('3291452160875082121');" onmouseout="out('3291452160875082121');" style=""> 317          transaction.write(ctrlCharacteristic, new byte[]{                                                         </span>
<span class="-3989010006227608454" onmouseenter="enter('-3989010006227608454');" onmouseout="out('-3989010006227608454');" style=""> 318                  HPlusConstants.CMD_SET_WEIGHT,                                                                    </span>
<span class="1200713371940080677" onmouseenter="enter('1200713371940080677');" onmouseout="out('1200713371940080677');" style=""> 319                  value                                                                                             </span>
<span  style=""> 320                                                                                                                    </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 321          });                                                                                                       </span>
<span class="2297715846939503398" onmouseenter="enter('2297715846939503398');" onmouseout="out('2297715846939503398');" style=""> 322          return this;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 323      }                                                                                                             </span>
<span  style=""> 324                                                                                                                    </span>
<span class="-7347510196780789476" onmouseenter="enter('-7347510196780789476');" onmouseout="out('-7347510196780789476');" style=""> 325      private HPlusSupport setHeight(TransactionBuilder transaction) {                                              </span>
<span class="-8295836255860464295" onmouseenter="enter('-8295836255860464295');" onmouseout="out('-8295836255860464295');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 326 -        byte value = HPlusCoordinator.getUserHeight(getDevice().getAddress());                                    </span>
<span class="-6343281459862929187" onmouseenter="enter('-6343281459862929187');" onmouseout="out('-6343281459862929187');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 327 +        byte value = HPlusCoordinator.getUserHeight();                                                            </span>
<span class="3291452160875082121" onmouseenter="enter('3291452160875082121');" onmouseout="out('3291452160875082121');" style=""> 328          transaction.write(ctrlCharacteristic, new byte[]{                                                         </span>
<span class="-2073946156144479840" onmouseenter="enter('-2073946156144479840');" onmouseout="out('-2073946156144479840');" style=""> 329                  HPlusConstants.CMD_HEIGHT,                                                                        </span>
<span class="1200713371940080677" onmouseenter="enter('1200713371940080677');" onmouseout="out('1200713371940080677');" style=""> 330                  value                                                                                             </span>
<span  style=""> 331                                                                                                                    </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 332          });                                                                                                       </span>
<span class="2297715846939503398" onmouseenter="enter('2297715846939503398');" onmouseout="out('2297715846939503398');" style=""> 333          return this;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 334      }                                                                                                             </span>
<span  style=""> 335                                                                                                                    </span>
<span  style=""> 336                                                                                                                    </span>
<span class="5947324092747227570" onmouseenter="enter('5947324092747227570');" onmouseout="out('5947324092747227570');" style=""> 337      private HPlusSupport setAge(TransactionBuilder transaction) {                                                 </span>
<span class="-4934307680841720446" onmouseenter="enter('-4934307680841720446');" onmouseout="out('-4934307680841720446');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 338 -        byte value = HPlusCoordinator.getUserAge(getDevice().getAddress());                                       </span>
<span class="2934823474304180885" onmouseenter="enter('2934823474304180885');" onmouseout="out('2934823474304180885');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 339 +        byte value = HPlusCoordinator.getUserAge();                                                               </span>
<span class="3291452160875082121" onmouseenter="enter('3291452160875082121');" onmouseout="out('3291452160875082121');" style=""> 340          transaction.write(ctrlCharacteristic, new byte[]{                                                         </span>
<span class="5713181507603331000" onmouseenter="enter('5713181507603331000');" onmouseout="out('5713181507603331000');" style=""> 341                  HPlusConstants.CMD_SET_AGE,                                                                       </span>
<span class="1200713371940080677" onmouseenter="enter('1200713371940080677');" onmouseout="out('1200713371940080677');" style=""> 342                  value                                                                                             </span>
<span  style=""> 343                                                                                                                    </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 344          });                                                                                                       </span>
<span class="2297715846939503398" onmouseenter="enter('2297715846939503398');" onmouseout="out('2297715846939503398');" style=""> 345          return this;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 346      }                                                                                                             </span>
<span  style=""> 347                                                                                                                    </span>
<span class="7012632444102522477" onmouseenter="enter('7012632444102522477');" onmouseout="out('7012632444102522477');" style=""> 348      private HPlusSupport setGender(TransactionBuilder transaction) {                                              </span>
<span class="672569075871737807" onmouseenter="enter('672569075871737807');" onmouseout="out('672569075871737807');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 349 -        byte value = HPlusCoordinator.getUserGender(getDevice().getAddress());                                    </span>
<span class="851277153814698" onmouseenter="enter('851277153814698');" onmouseout="out('851277153814698');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 350 +        byte value = HPlusCoordinator.getUserGender();                                                            </span>
<span class="3291452160875082121" onmouseenter="enter('3291452160875082121');" onmouseout="out('3291452160875082121');" style=""> 351          transaction.write(ctrlCharacteristic, new byte[]{                                                         </span>
<span class="3680299272630460864" onmouseenter="enter('3680299272630460864');" onmouseout="out('3680299272630460864');" style=""> 352                  HPlusConstants.CMD_SET_GENDER,                                                                    </span>
<span class="1200713371940080677" onmouseenter="enter('1200713371940080677');" onmouseout="out('1200713371940080677');" style=""> 353                  value                                                                                             </span>
<span  style=""> 354                                                                                                                    </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 355          });                                                                                                       </span>
<span class="2297715846939503398" onmouseenter="enter('2297715846939503398');" onmouseout="out('2297715846939503398');" style=""> 356          return this;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 357      }                                                                                                             </span>
<span  style=""> 358                                                                                                                    </span>
<span  style=""> 359                                                                                                                    </span>
<span class="1941288733470282948" onmouseenter="enter('1941288733470282948');" onmouseout="out('1941288733470282948');" style=""> 360      private HPlusSupport setGoal(TransactionBuilder transaction) {                                                </span>
<span class="3942498952201655186" onmouseenter="enter('3942498952201655186');" onmouseout="out('3942498952201655186');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 361 -        int value = HPlusCoordinator.getGoal(getDevice().getAddress());                                           </span>
<span class="7904327141242761065" onmouseenter="enter('7904327141242761065');" onmouseout="out('7904327141242761065');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 362 +        int value = HPlusCoordinator.getGoal();                                                                   </span>
<span class="3291452160875082121" onmouseenter="enter('3291452160875082121');" onmouseout="out('3291452160875082121');" style=""> 363          transaction.write(ctrlCharacteristic, new byte[]{                                                         </span>
<span class="-4101300033431726292" onmouseenter="enter('-4101300033431726292');" onmouseout="out('-4101300033431726292');" style=""> 364                  HPlusConstants.CMD_SET_GOAL,                                                                      </span>
<span class="-2916442659377879431" onmouseenter="enter('-2916442659377879431');" onmouseout="out('-2916442659377879431');" style=""> 365                  (byte) ((value / 256) &amp; 0xff),                                                                    </span>
<span class="-1647377881209297723" onmouseenter="enter('-1647377881209297723');" onmouseout="out('-1647377881209297723');" style=""> 366                  (byte) (value % 256)                                                                              </span>
<span  style=""> 367                                                                                                                    </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 368          });                                                                                                       </span>
<span class="2297715846939503398" onmouseenter="enter('2297715846939503398');" onmouseout="out('2297715846939503398');" style=""> 369          return this;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 370      }                                                                                                             </span>
<span  style=""> 371                                                                                                                    </span>
<span  style=""> 372                                                                                                                    </span>
<span class="-1254834888773037917" onmouseenter="enter('-1254834888773037917');" onmouseout="out('-1254834888773037917');" style=""> 373      private HPlusSupport setScreenTime(TransactionBuilder transaction) {                                          </span>
<span class="4315045256729533150" onmouseenter="enter('4315045256729533150');" onmouseout="out('4315045256729533150');" style=""> 374          byte value = HPlusCoordinator.getScreenTime(getDevice().getAddress());                                    </span>
<span class="3291452160875082121" onmouseenter="enter('3291452160875082121');" onmouseout="out('3291452160875082121');" style=""> 375          transaction.write(ctrlCharacteristic, new byte[]{                                                         </span>
<span class="-6949628958147360848" onmouseenter="enter('-6949628958147360848');" onmouseout="out('-6949628958147360848');" style=""> 376                  HPlusConstants.CMD_SET_SCREENTIME,                                                                </span>
<span class="1200713371940080677" onmouseenter="enter('1200713371940080677');" onmouseout="out('1200713371940080677');" style=""> 377                  value                                                                                             </span>
<span  style=""> 378                                                                                                                    </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 379          });                                                                                                       </span>
<span class="2297715846939503398" onmouseenter="enter('2297715846939503398');" onmouseout="out('2297715846939503398');" style=""> 380          return this;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 381      }                                                                                                             </span>
<span  style=""> 382                                                                                                                    </span>
<span class="-5197767512792012744" onmouseenter="enter('-5197767512792012744');" onmouseout="out('-5197767512792012744');" style=""> 383      private HPlusSupport setAllDayHeart(TransactionBuilder transaction) {                                         </span>
<span  style=""> 384                                                                                                                    </span>
<span class="-7482590365127471239" onmouseenter="enter('-7482590365127471239');" onmouseout="out('-7482590365127471239');" style=""> 385          byte value = HPlusCoordinator.getAllDayHR(getDevice().getAddress());                                      </span>
<span  style=""> 386                                                                                                                    </span>
<span class="3291452160875082121" onmouseenter="enter('3291452160875082121');" onmouseout="out('3291452160875082121');" style=""> 387          transaction.write(ctrlCharacteristic, new byte[]{                                                         </span>
<span class="8318401178566544878" onmouseenter="enter('8318401178566544878');" onmouseout="out('8318401178566544878');" style=""> 388                  HPlusConstants.CMD_SET_ALLDAY_HRM,                                                                </span>
<span class="1200713371940080677" onmouseenter="enter('1200713371940080677');" onmouseout="out('1200713371940080677');" style=""> 389                  value                                                                                             </span>
<span  style=""> 390                                                                                                                    </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 391          });                                                                                                       </span>
<span  style=""> 392                                                                                                                    </span>
<span class="2297715846939503398" onmouseenter="enter('2297715846939503398');" onmouseout="out('2297715846939503398');" style=""> 393          return this;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 394      }                                                                                                             </span>
<span  style=""> 395                                                                                                                    </span>
<span  style=""> 396                                                                                                                    </span>
<span class="-1399038394034113320" onmouseenter="enter('-1399038394034113320');" onmouseout="out('-1399038394034113320');" style=""> 397      private HPlusSupport setAlarm(TransactionBuilder transaction, Calendar t) {                                   </span>
<span  style=""> 398                                                                                                                    </span>
<span class="6467402380305076865" onmouseenter="enter('6467402380305076865');" onmouseout="out('6467402380305076865');" style=""> 399          byte hour = HPlusConstants.ARG_ALARM_DISABLE;                                                             </span>
<span class="-3281384072436167776" onmouseenter="enter('-3281384072436167776');" onmouseout="out('-3281384072436167776');" style=""> 400          byte minute = HPlusConstants.ARG_ALARM_DISABLE;                                                           </span>
<span  style=""> 401                                                                                                                    </span>
<span class="-7115571877868547666" onmouseenter="enter('-7115571877868547666');" onmouseout="out('-7115571877868547666');" style=""> 402          if (t != null) {                                                                                          </span>
<span class="5339525172321764938" onmouseenter="enter('5339525172321764938');" onmouseout="out('5339525172321764938');" style=""> 403              hour = (byte) t.get(Calendar.HOUR_OF_DAY);                                                            </span>
<span class="5337471965635534220" onmouseenter="enter('5337471965635534220');" onmouseout="out('5337471965635534220');" style=""> 404              minute = (byte) t.get(Calendar.MINUTE);                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 405          }                                                                                                         </span>
<span  style=""> 406                                                                                                                    </span>
<span class="-3840280779505156671" onmouseenter="enter('-3840280779505156671');" onmouseout="out('-3840280779505156671');" style=""> 407          transaction.write(ctrlCharacteristic, new byte[]{HPlusConstants.CMD_SET_ALARM,                            </span>
<span class="-5045918625335939481" onmouseenter="enter('-5045918625335939481');" onmouseout="out('-5045918625335939481');" style=""> 408                  hour,                                                                                             </span>
<span class="-2395728393329392091" onmouseenter="enter('-2395728393329392091');" onmouseout="out('-2395728393329392091');" style=""> 409                  minute});                                                                                         </span>
<span  style=""> 410                                                                                                                    </span>
<span class="2297715846939503398" onmouseenter="enter('2297715846939503398');" onmouseout="out('2297715846939503398');" style=""> 411          return this;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 412      }                                                                                                             </span>
<span  style=""> 413                                                                                                                    </span>
<span class="-791908888061445625" onmouseenter="enter('-791908888061445625');" onmouseout="out('-791908888061445625');" style=""> 414      private HPlusSupport setFindMe(TransactionBuilder transaction, boolean state) {                               </span>
<span class="7282700573083723681" onmouseenter="enter('7282700573083723681');" onmouseout="out('7282700573083723681');" style=""> 415          //TODO: Find how this works                                                                               </span>
<span  style=""> 416                                                                                                                    </span>
<span class="-2705361656414002162" onmouseenter="enter('-2705361656414002162');" onmouseout="out('-2705361656414002162');" style=""> 417          byte[] msg = new byte[2];                                                                                 </span>
<span class="5997450077450443173" onmouseenter="enter('5997450077450443173');" onmouseout="out('5997450077450443173');" style=""> 418          msg[0] = HPlusConstants.CMD_SET_FINDME;                                                                   </span>
<span  style=""> 419                                                                                                                    </span>
<span class="7403209030499211268" onmouseenter="enter('7403209030499211268');" onmouseout="out('7403209030499211268');" style=""> 420          if (state)                                                                                                </span>
<span class="3636634837394653002" onmouseenter="enter('3636634837394653002');" onmouseout="out('3636634837394653002');" style=""> 421              msg[1] = HPlusConstants.ARG_FINDME_ON;                                                                </span>
<span class="-7436048164614400339" onmouseenter="enter('-7436048164614400339');" onmouseout="out('-7436048164614400339');" style=""> 422          else                                                                                                      </span>
<span class="8074200006318753451" onmouseenter="enter('8074200006318753451');" onmouseout="out('8074200006318753451');" style=""> 423              msg[1] = HPlusConstants.ARG_FINDME_OFF;                                                               </span>
<span  style=""> 424                                                                                                                    </span>
<span class="-7204010731863731309" onmouseenter="enter('-7204010731863731309');" onmouseout="out('-7204010731863731309');" style=""> 425          transaction.write(ctrlCharacteristic, msg);                                                               </span>
<span class="2297715846939503398" onmouseenter="enter('2297715846939503398');" onmouseout="out('2297715846939503398');" style=""> 426          return this;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 427      }                                                                                                             </span>
<span  style=""> 428                                                                                                                    </span>
<span class="-5684646578701203654" onmouseenter="enter('-5684646578701203654');" onmouseout="out('-5684646578701203654');" style=""> 429      private HPlusSupport requestDeviceInfo(TransactionBuilder builder) {                                          </span>
<span class="3573392645117931820" onmouseenter="enter('3573392645117931820');" onmouseout="out('3573392645117931820');" style=""> 430          // HPlus devices seem to report some information in an alternative manner                                 </span>
<span class="-8697440581090313181" onmouseenter="enter('-8697440581090313181');" onmouseout="out('-8697440581090313181');" style=""> 431          builder.write(ctrlCharacteristic, new byte[]{HPlusConstants.CMD_GET_DEVICE_ID});                          </span>
<span class="485503605876832302" onmouseenter="enter('485503605876832302');" onmouseout="out('485503605876832302');" style=""> 432          builder.write(ctrlCharacteristic, new byte[]{HPlusConstants.CMD_GET_VERSION});                            </span>
<span  style=""> 433                                                                                                                    </span>
<span class="2297715846939503398" onmouseenter="enter('2297715846939503398');" onmouseout="out('2297715846939503398');" style=""> 434          return this;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 435      }                                                                                                             </span>
<span  style=""> 436                                                                                                                    </span>
<span class="-271393146621985805" onmouseenter="enter('-271393146621985805');" onmouseout="out('-271393146621985805');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 437 -    private void setInitialized(TransactionBuilder builder) {                                                     </span>
<span class="-1705102314731758746" onmouseenter="enter('-1705102314731758746');" onmouseout="out('-1705102314731758746');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 438 -        builder.add(new SetDeviceStateAction(getDevice(), GBDevice.State.INITIALIZED, getContext()));             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 439 -    }                                                                                                             </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 440 -                                                                                                                  </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 441 -                                                                                                                  </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 442      @Override                                                                                                     </span>
<span class="-5141762163842231173" onmouseenter="enter('-5141762163842231173');" onmouseout="out('-5141762163842231173');" style=""> 443      public boolean useAutoConnect() {                                                                             </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 444          return true;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 445      }                                                                                                             </span>
<span  style=""> 446                                                                                                                    </span>
<span class="4975694330800448779" onmouseenter="enter('4975694330800448779');" onmouseout="out('4975694330800448779');" style=""> 447      private void handleDeviceInfo(DeviceInfo info) {                                                              </span>
<span class="370366693446993512" onmouseenter="enter('370366693446993512');" onmouseout="out('370366693446993512');" style=""> 448          LOG.warn(&quot;Device info: &quot; + info);                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 449      }                                                                                                             </span>
<span  style=""> 450                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 451      @Override                                                                                                     </span>
<span class="-116609517646424186" onmouseenter="enter('-116609517646424186');" onmouseout="out('-116609517646424186');" style=""> 452      public void onNotification(NotificationSpec notificationSpec) {                                               </span>
<span class="-2323011847991818474" onmouseenter="enter('-2323011847991818474');" onmouseout="out('-2323011847991818474');" style=""> 453          //TODO: Show different notifications according to source as Band supports this                            </span>
<span class="6488462260965955164" onmouseenter="enter('6488462260965955164');" onmouseout="out('6488462260965955164');" style=""><abbr title=" 454          //LOG.info(&quot;OnNotification: Title: &quot;+notificationSpec.title+&quot; Body: &quot;+notificationSpec.body+&quot; Source: &quot;+notificationSpec.sourceName+&quot; Sender: &quot;+notificationSpec.sender+&quot; Subject: &quot;+notificationSpec.subject);"> 454          //LOG.info(&quot;OnNotification: Title: &quot;+notificationSpec.title+&quot; Body: &quot;+notificationSpec.body+&quot; Source: &quot;+noðŸ”µ</abbr></span>
<span class="-2578227233159539388" onmouseenter="enter('-2578227233159539388');" onmouseout="out('-2578227233159539388');" style=""> 455          showText(notificationSpec.title, notificationSpec.body);                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 456      }                                                                                                             </span>
<span  style=""> 457                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 458      @Override                                                                                                     </span>
<span class="-1102873404195143085" onmouseenter="enter('-1102873404195143085');" onmouseout="out('-1102873404195143085');" style=""> 459      public void onDeleteNotification(int id) {                                                                    </span>
<span  style=""> 460                                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 461      }                                                                                                             </span>
<span  style=""> 462                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 463      @Override                                                                                                     </span>
<span class="7164248173527032001" onmouseenter="enter('7164248173527032001');" onmouseout="out('7164248173527032001');" style=""> 464      public void onSetTime() {                                                                                     </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 465 +                                                                                                                  </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 466          try {                                                                                                     </span>
<span class="8378030939534756566" onmouseenter="enter('8378030939534756566');" onmouseout="out('8378030939534756566');" style=""> 467              TransactionBuilder builder = performInitialized(&quot;time&quot;);                                              </span>
<span  style=""> 468                                                                                                                    </span>
<span class="-244233841179675239" onmouseenter="enter('-244233841179675239');" onmouseout="out('-244233841179675239');" style=""> 469              setCurrentDate(builder);                                                                              </span>
<span class="7377265401852080297" onmouseenter="enter('7377265401852080297');" onmouseout="out('7377265401852080297');" style=""> 470              setCurrentTime(builder);                                                                              </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 471 -                                                                                                                  </span>
<span class="-5534937907083456817" onmouseenter="enter('-5534937907083456817');" onmouseout="out('-5534937907083456817');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 472 -            builder.queue(getQueue());                                                                            </span>
<span class="3761800854751581723" onmouseenter="enter('3761800854751581723');" onmouseout="out('3761800854751581723');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 473 +            performConnected(builder.getTransaction());                                                           </span>
<span class="2183742815887262996" onmouseenter="enter('2183742815887262996');" onmouseout="out('2183742815887262996');" style=""> 474          }catch(IOException e){                                                                                    </span>

<span  style=""> 475                                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 476          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 477      }                                                                                                             </span>
<span  style=""> 478                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 479      @Override                                                                                                     </span>
<span class="-6473317888357330260" onmouseenter="enter('-6473317888357330260');" onmouseout="out('-6473317888357330260');" style=""> 480      public void onSetAlarms(ArrayList&lt;? extends Alarm&gt; alarms) {                                                  </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 481 +                                                                                                                  </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 482 +                                                                                                                  </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 483          try {                                                                                                     </span>
<span class="-1278421083116070762" onmouseenter="enter('-1278421083116070762');" onmouseout="out('-1278421083116070762');" style=""> 484              TransactionBuilder builder = performInitialized(&quot;alarm&quot;);                                             </span>
<span  style=""> 485                                                                                                                    </span>
<span class="-7996805109404385335" onmouseenter="enter('-7996805109404385335');" onmouseout="out('-7996805109404385335');" style=""> 486              for (Alarm alarm : alarms) {                                                                          </span>
<span  style=""> 487                                                                                                                    </span>
<span class="-403059878991992441" onmouseenter="enter('-403059878991992441');" onmouseout="out('-403059878991992441');" style=""> 488                  if (!alarm.isEnabled())                                                                           </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style=""> 489                      continue;                                                                                     </span>
<span  style=""> 490                                                                                                                    </span>
<span class="-448638904182363762" onmouseenter="enter('-448638904182363762');" onmouseout="out('-448638904182363762');" style=""> 491                  if (alarm.isSmartWakeup()) //Not available                                                        </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style=""> 492                      continue;                                                                                     </span>
<span  style=""> 493                                                                                                                    </span>
<span class="-2323525561533640256" onmouseenter="enter('-2323525561533640256');" onmouseout="out('-2323525561533640256');" style=""> 494                  Calendar t = alarm.getAlarmCal();                                                                 </span>
<span class="-1264397343868138084" onmouseenter="enter('-1264397343868138084');" onmouseout="out('-1264397343868138084');" style=""> 495                  setAlarm(builder, t);                                                                             </span>
<span class="-5534937907083456817" onmouseenter="enter('-5534937907083456817');" onmouseout="out('-5534937907083456817');" style=""> 496                  builder.queue(getQueue());                                                                        </span>
<span  style=""> 497                                                                                                                    </span>
<span class="8097986474420678749" onmouseenter="enter('8097986474420678749');" onmouseout="out('8097986474420678749');" style=""><abbr title=" 498                  GB.toast(getContext(), getContext().getString(R.string.user_feedback_miband_set_alarms_ok), Toast.LENGTH_SHORT, GB.INFO);"> 498                  GB.toast(getContext(), getContext().getString(R.string.user_feedback_miband_set_alarms_ok), Toast.ðŸ”µ</abbr></span>
<span  style=""> 499                                                                                                                    </span>
<span class="-6545552544705045608" onmouseenter="enter('-6545552544705045608');" onmouseout="out('-6545552544705045608');" style=""> 500                  return; //Only first alarm                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 501              }                                                                                                     </span>
<span  style=""> 502                                                                                                                    </span>
<span class="3975187194000728744" onmouseenter="enter('3975187194000728744');" onmouseout="out('3975187194000728744');" style=""> 503              setAlarm(builder, null);                                                                              </span>
<span class="-5534937907083456817" onmouseenter="enter('-5534937907083456817');" onmouseout="out('-5534937907083456817');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 504 -            builder.queue(getQueue());                                                                            </span>
<span class="3761800854751581723" onmouseenter="enter('3761800854751581723');" onmouseout="out('3761800854751581723');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 505 +            performConnected(builder.getTransaction());                                                           </span>
<span  style=""> 506                                                                                                                    </span>
<span class="-2313180102689307633" onmouseenter="enter('-2313180102689307633');" onmouseout="out('-2313180102689307633');" style=""><abbr title=" 507              GB.toast(getContext(), getContext().getString(R.string.user_feedback_all_alarms_disabled), Toast.LENGTH_SHORT, GB.INFO);"> 507              GB.toast(getContext(), getContext().getString(R.string.user_feedback_all_alarms_disabled), Toast.LENGTðŸ”µ</abbr></span>
<span class="-3124216345305540272" onmouseenter="enter('-3124216345305540272');" onmouseout="out('-3124216345305540272');" style=""> 508          }catch(Exception e){}                                                                                     </span>


<span  style=""> 509                                                                                                                    </span>
<span  style=""> 510                                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 511      }                                                                                                             </span>
<span  style=""> 512                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 513      @Override                                                                                                     </span>
<span class="8502851833159229707" onmouseenter="enter('8502851833159229707');" onmouseout="out('8502851833159229707');" style=""> 514      public void onSetCallState(CallSpec callSpec) {                                                               </span>
<span class="4226096810368966115" onmouseenter="enter('4226096810368966115');" onmouseout="out('4226096810368966115');" style=""> 515          switch (callSpec.command) {                                                                               </span>
<span class="4765207307001745691" onmouseenter="enter('4765207307001745691');" onmouseout="out('4765207307001745691');" style=""> 516              case CallSpec.CALL_INCOMING: {                                                                        </span>
<span class="-8067308976018849552" onmouseenter="enter('-8067308976018849552');" onmouseout="out('-8067308976018849552');" style=""> 517                  showIncomingCall(callSpec.name, callSpec.number);                                                 </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 518                  break;                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 519              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 520          }                                                                                                         </span>
<span  style=""> 521                                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 522      }                                                                                                             </span>
<span  style=""> 523                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 524      @Override                                                                                                     </span>
<span class="8238257195410140286" onmouseenter="enter('8238257195410140286');" onmouseout="out('8238257195410140286');" style=""> 525      public void onSetCannedMessages(CannedMessagesSpec cannedMessagesSpec) {                                      </span>
<span class="-2981468772764664347" onmouseenter="enter('-2981468772764664347');" onmouseout="out('-2981468772764664347');" style=""> 526          LOG.info(&quot;Canned Messages: &quot; + cannedMessagesSpec);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 527      }                                                                                                             </span>
<span  style=""> 528                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 529      @Override                                                                                                     </span>
<span class="8228188929931998548" onmouseenter="enter('8228188929931998548');" onmouseout="out('8228188929931998548');" style=""> 530      public void onSetMusicState(MusicStateSpec stateSpec) {                                                       </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 531 -                                                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 532      }                                                                                                             </span>
<span  style=""> 533                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 534      @Override                                                                                                     </span>
<span class="-4182706906721092498" onmouseenter="enter('-4182706906721092498');" onmouseout="out('-4182706906721092498');" style=""> 535      public void onSetMusicInfo(MusicSpec musicSpec) {                                                             </span>
<span  style=""> 536                                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 537      }                                                                                                             </span>
<span  style=""> 538                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 539      @Override                                                                                                     </span>
<span class="-8425797677863799500" onmouseenter="enter('-8425797677863799500');" onmouseout="out('-8425797677863799500');" style=""> 540      public void onEnableRealtimeSteps(boolean enable) {                                                           </span>
<span class="7623304499723183910" onmouseenter="enter('7623304499723183910');" onmouseout="out('7623304499723183910');" style=""> 541          onEnableRealtimeHeartRateMeasurement(enable);                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 542      }                                                                                                             </span>
<span  style=""> 543                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 544      @Override                                                                                                     </span>
<span class="-4135655620136168708" onmouseenter="enter('-4135655620136168708');" onmouseout="out('-4135655620136168708');" style=""> 545      public void onInstallApp(Uri uri) {                                                                           </span>
<span  style=""> 546                                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 547      }                                                                                                             </span>
<span  style=""> 548                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 549      @Override                                                                                                     </span>
<span class="-3322711972275217450" onmouseenter="enter('-3322711972275217450');" onmouseout="out('-3322711972275217450');" style=""> 550      public void onAppInfoReq() {                                                                                  </span>
<span  style=""> 551                                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 552      }                                                                                                             </span>
<span  style=""> 553                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 554      @Override                                                                                                     </span>
<span class="1692097554900603024" onmouseenter="enter('1692097554900603024');" onmouseout="out('1692097554900603024');" style=""> 555      public void onAppStart(UUID uuid, boolean start) {                                                            </span>
<span  style=""> 556                                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 557      }                                                                                                             </span>
<span  style=""> 558                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 559      @Override                                                                                                     </span>
<span class="7633110766708892729" onmouseenter="enter('7633110766708892729');" onmouseout="out('7633110766708892729');" style=""> 560      public void onAppDelete(UUID uuid) {                                                                          </span>
<span  style=""> 561                                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 562      }                                                                                                             </span>
<span  style=""> 563                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 564      @Override                                                                                                     </span>
<span class="-862897393933438838" onmouseenter="enter('-862897393933438838');" onmouseout="out('-862897393933438838');" style=""> 565      public void onAppConfiguration(UUID appUuid, String config) {                                                 </span>
<span  style=""> 566                                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 567      }                                                                                                             </span>
<span  style=""> 568                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 569      @Override                                                                                                     </span>
<span class="-2513514137107402976" onmouseenter="enter('-2513514137107402976');" onmouseout="out('-2513514137107402976');" style=""> 570      public void onAppReorder(UUID[] uuids) {                                                                      </span>
<span  style=""> 571                                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 572      }                                                                                                             </span>
<span  style=""> 573                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 574      @Override                                                                                                     </span>
<span class="-3215171005460530491" onmouseenter="enter('-3215171005460530491');" onmouseout="out('-3215171005460530491');" style=""> 575      public void onFetchActivityData() {                                                                           </span>
<span class="7173294136222469130" onmouseenter="enter('7173294136222469130');" onmouseout="out('7173294136222469130');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 576 -        if (syncHelper != null)                                                                                   </span>
<span class="-1977462876553727609" onmouseenter="enter('-1977462876553727609');" onmouseout="out('-1977462876553727609');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 577 -            syncHelper.sync();                                                                                    </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 578 +                                                                                                                  </span>
<span class="6320050851961209117" onmouseenter="enter('6320050851961209117');" onmouseout="out('6320050851961209117');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 579 +        if (syncHelper == null){                                                                                  </span>
<span class="-7391178071599224830" onmouseenter="enter('-7391178071599224830');" onmouseout="out('-7391178071599224830');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 580 +            syncHelper = new HPlusHandlerThread(gbDevice, getContext(), this);                                    </span>
<span class="-1903424543284802769" onmouseenter="enter('-1903424543284802769');" onmouseout="out('-1903424543284802769');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 581 +            syncHelper.start();                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 582 +        }                                                                                                         </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 583 +                                                                                                                  </span>
<span class="-1977462876553727609" onmouseenter="enter('-1977462876553727609');" onmouseout="out('-1977462876553727609');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 584 +        syncHelper.sync();                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 585      }                                                                                                             </span>
<span  style=""> 586                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 587      @Override                                                                                                     </span>
<span class="-3494298342935464482" onmouseenter="enter('-3494298342935464482');" onmouseout="out('-3494298342935464482');" style=""> 588      public void onReboot() {                                                                                      </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 589          try {                                                                                                     </span>
<span class="867466265491236176" onmouseenter="enter('867466265491236176');" onmouseout="out('867466265491236176');" style=""> 590              getQueue().clear();                                                                                   </span>
<span  style=""> 591                                                                                                                    </span>
<span class="2354100081541725399" onmouseenter="enter('2354100081541725399');" onmouseout="out('2354100081541725399');" style=""> 592              TransactionBuilder builder = performInitialized(&quot;Shutdown&quot;);                                          </span>
<span class="2903890927038400619" onmouseenter="enter('2903890927038400619');" onmouseout="out('2903890927038400619');" style=""><abbr title=" 593              builder.write(ctrlCharacteristic, new byte[]{HPlusConstants.CMD_SHUTDOWN, HPlusConstants.ARG_SHUTDOWN_EN});"> 593              builder.write(ctrlCharacteristic, new byte[]{HPlusConstants.CMD_SHUTDOWN, HPlusConstants.ARG_SHUTDOWN_ðŸ”µ</abbr></span>
<span class="-5534937907083456817" onmouseenter="enter('-5534937907083456817');" onmouseout="out('-5534937907083456817');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 594 -            builder.queue(getQueue());                                                                            </span>
<span class="3761800854751581723" onmouseenter="enter('3761800854751581723');" onmouseout="out('3761800854751581723');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 595 +            performConnected(builder.getTransaction());                                                           </span>
<span class="-757793854272623252" onmouseenter="enter('-757793854272623252');" onmouseout="out('-757793854272623252');" style=""> 596          }catch(Exception e){                                                                                      </span>

<span  style=""> 597                                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 598          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 599      }                                                                                                             </span>
<span  style=""> 600                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 601      @Override                                                                                                     </span>
<span class="-9008385526233139735" onmouseenter="enter('-9008385526233139735');" onmouseout="out('-9008385526233139735');" style=""> 602      public void onHeartRateTest() {                                                                               </span>
<span class="867466265491236176" onmouseenter="enter('867466265491236176');" onmouseout="out('867466265491236176');" style=""> 603          getQueue().clear();                                                                                       </span>
<span class="-1891643383856272179" onmouseenter="enter('-1891643383856272179');" onmouseout="out('-1891643383856272179');" style=""> 604          try{                                                                                                      </span>

<span class="6333941902014570384" onmouseenter="enter('6333941902014570384');" onmouseout="out('6333941902014570384');" style=""> 605              TransactionBuilder builder = performInitialized(&quot;HeartRateTest&quot;);                                     </span>
<span  style=""> 606                                                                                                                    </span>
<span class="-4037030148406438927" onmouseenter="enter('-4037030148406438927');" onmouseout="out('-4037030148406438927');" style=""><abbr title=" 607              builder.write(ctrlCharacteristic, new byte[]{HPlusConstants.CMD_SET_HEARTRATE_STATE, HPlusConstants.ARG_HEARTRATE_MEASURE_ON}); //Set Real Time... ?"> 607              builder.write(ctrlCharacteristic, new byte[]{HPlusConstants.CMD_SET_HEARTRATE_STATE, HPlusConstants.ARðŸ”µ</abbr></span>
<span class="-5534937907083456817" onmouseenter="enter('-5534937907083456817');" onmouseout="out('-5534937907083456817');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 608 -            builder.queue(getQueue());                                                                            </span>
<span class="3761800854751581723" onmouseenter="enter('3761800854751581723');" onmouseout="out('3761800854751581723');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 609 +            performConnected(builder.getTransaction());                                                           </span>
<span class="-757793854272623252" onmouseenter="enter('-757793854272623252');" onmouseout="out('-757793854272623252');" style=""> 610          }catch(Exception e){                                                                                      </span>

<span  style=""> 611                                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 612          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 613      }                                                                                                             </span>
<span  style=""> 614                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 615      @Override                                                                                                     </span>
<span class="2383065190612615413" onmouseenter="enter('2383065190612615413');" onmouseout="out('2383065190612615413');" style=""> 616      public void onEnableRealtimeHeartRateMeasurement(boolean enable) {                                            </span>
<span class="867466265491236176" onmouseenter="enter('867466265491236176');" onmouseout="out('867466265491236176');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 617 -        getQueue().clear();                                                                                       </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 618          try {                                                                                                     </span>
<span class="5747251758811020424" onmouseenter="enter('5747251758811020424');" onmouseout="out('5747251758811020424');" style=""> 619              TransactionBuilder builder = performInitialized(&quot;realTimeHeartMeasurement&quot;);                          </span>
<span class="-3134908621992881846" onmouseenter="enter('-3134908621992881846');" onmouseout="out('-3134908621992881846');" style=""> 620              byte state;                                                                                           </span>
<span  style=""> 621                                                                                                                    </span>
<span class="-2063204857297382402" onmouseenter="enter('-2063204857297382402');" onmouseout="out('-2063204857297382402');" style=""> 622              if (enable)                                                                                           </span>
<span class="4459610917207481324" onmouseenter="enter('4459610917207481324');" onmouseout="out('4459610917207481324');" style=""> 623                  state = HPlusConstants.ARG_HEARTRATE_ALLDAY_ON;                                                   </span>
<span class="-7436048164614400339" onmouseenter="enter('-7436048164614400339');" onmouseout="out('-7436048164614400339');" style=""> 624              else                                                                                                  </span>
<span class="237470636204788169" onmouseenter="enter('237470636204788169');" onmouseout="out('237470636204788169');" style=""> 625                  state = HPlusConstants.ARG_HEARTRATE_ALLDAY_OFF;                                                  </span>
<span  style=""> 626                                                                                                                    </span>
<span class="-8856770227184248316" onmouseenter="enter('-8856770227184248316');" onmouseout="out('-8856770227184248316');" style=""> 627              builder.write(ctrlCharacteristic, new byte[]{HPlusConstants.CMD_SET_ALLDAY_HRM, state});              </span>
<span class="-5534937907083456817" onmouseenter="enter('-5534937907083456817');" onmouseout="out('-5534937907083456817');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 628 -            builder.queue(getQueue());                                                                            </span>
<span class="3761800854751581723" onmouseenter="enter('3761800854751581723');" onmouseout="out('3761800854751581723');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 629 +            performConnected(builder.getTransaction());                                                           </span>
<span class="-757793854272623252" onmouseenter="enter('-757793854272623252');" onmouseout="out('-757793854272623252');" style=""> 630          }catch(Exception e){                                                                                      </span>

<span  style=""> 631                                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 632          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 633      }                                                                                                             </span>
<span  style=""> 634                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 635      @Override                                                                                                     </span>
<span class="-3287587973518064190" onmouseenter="enter('-3287587973518064190');" onmouseout="out('-3287587973518064190');" style=""> 636      public void onFindDevice(boolean start) {                                                                     </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 637          try {                                                                                                     </span>
<span class="175553782406953484" onmouseenter="enter('175553782406953484');" onmouseout="out('175553782406953484');" style=""> 638              TransactionBuilder builder = performInitialized(&quot;findMe&quot;);                                            </span>
<span  style=""> 639                                                                                                                    </span>
<span class="3618522043245605826" onmouseenter="enter('3618522043245605826');" onmouseout="out('3618522043245605826');" style=""> 640              setFindMe(builder, start);                                                                            </span>
<span class="-5534937907083456817" onmouseenter="enter('-5534937907083456817');" onmouseout="out('-5534937907083456817');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 641 -            builder.queue(getQueue());                                                                            </span>
<span class="3761800854751581723" onmouseenter="enter('3761800854751581723');" onmouseout="out('3761800854751581723');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 642 +            performConnected(builder.getTransaction());                                                           </span>
<span class="7080241092423381085" onmouseenter="enter('7080241092423381085');" onmouseout="out('7080241092423381085');" style=""> 643          } catch (IOException e) {                                                                                 </span>
<span class="6289081880581889152" onmouseenter="enter('6289081880581889152');" onmouseout="out('6289081880581889152');" style=""><abbr title=" 644              GB.toast(getContext(), &quot;Error toggling Find Me: &quot; + e.getLocalizedMessage(), Toast.LENGTH_LONG, GB.ERROR);"> 644              GB.toast(getContext(), &quot;Error toggling Find Me: &quot; + e.getLocalizedMessage(), Toast.LENGTH_LONG, GB.ERRðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 645          }                                                                                                         </span>
<span  style=""> 646                                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 647      }                                                                                                             </span>
<span  style=""> 648                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 649      @Override                                                                                                     </span>
<span class="6065808185552597400" onmouseenter="enter('6065808185552597400');" onmouseout="out('6065808185552597400');" style=""> 650      public void onSetConstantVibration(int intensity) {                                                           </span>
<span class="867466265491236176" onmouseenter="enter('867466265491236176');" onmouseout="out('867466265491236176');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 651 -        getQueue().clear();                                                                                       </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 652 -                                                                                                                  </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 653          try {                                                                                                     </span>
<span class="-1189139726584538540" onmouseenter="enter('-1189139726584538540');" onmouseout="out('-1189139726584538540');" style=""> 654              TransactionBuilder builder = performInitialized(&quot;vibration&quot;);                                         </span>
<span  style=""> 655                                                                                                                    </span>
<span class="3266802087250163024" onmouseenter="enter('3266802087250163024');" onmouseout="out('3266802087250163024');" style=""> 656              byte[] msg = new byte[15];                                                                            </span>
<span class="6154219539807733297" onmouseenter="enter('6154219539807733297');" onmouseout="out('6154219539807733297');" style=""> 657              msg[0] = HPlusConstants.CMD_SET_INCOMING_CALL_NUMBER;                                                 </span>
<span  style=""> 658                                                                                                                    </span>
<span class="-3757743872034498506" onmouseenter="enter('-3757743872034498506');" onmouseout="out('-3757743872034498506');" style=""> 659              for (int i = 0; i &lt; msg.length - 1; i++)                                                              </span>
<span class="-6825376348023798015" onmouseenter="enter('-6825376348023798015');" onmouseout="out('-6825376348023798015');" style=""> 660                  msg[i + 1] = (byte) &quot;GadgetBridge&quot;.charAt(i);                                                     </span>
<span  style=""> 661                                                                                                                    </span>
<span class="-6541237243628611070" onmouseenter="enter('-6541237243628611070');" onmouseout="out('-6541237243628611070');" style=""> 662              builder.write(ctrlCharacteristic, msg);                                                               </span>
<span class="-5534937907083456817" onmouseenter="enter('-5534937907083456817');" onmouseout="out('-5534937907083456817');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 663 -            builder.queue(getQueue());                                                                            </span>
<span class="3761800854751581723" onmouseenter="enter('3761800854751581723');" onmouseout="out('3761800854751581723');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 664 +            performConnected(builder.getTransaction());                                                           </span>
<span class="7080241092423381085" onmouseenter="enter('7080241092423381085');" onmouseout="out('7080241092423381085');" style=""> 665          } catch (IOException e) {                                                                                 </span>
<span class="-8668891040554562167" onmouseenter="enter('-8668891040554562167');" onmouseout="out('-8668891040554562167');" style=""><abbr title=" 666              GB.toast(getContext(), &quot;Error setting Vibration: &quot; + e.getLocalizedMessage(), Toast.LENGTH_LONG, GB.ERROR);"> 666              GB.toast(getContext(), &quot;Error setting Vibration: &quot; + e.getLocalizedMessage(), Toast.LENGTH_LONG, GB.ERðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 667          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 668      }                                                                                                             </span>
<span  style=""> 669                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 670      @Override                                                                                                     </span>
<span class="-3293819866797459784" onmouseenter="enter('-3293819866797459784');" onmouseout="out('-3293819866797459784');" style=""> 671      public void onScreenshotReq() {                                                                               </span>
<span  style=""> 672                                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 673      }                                                                                                             </span>
<span  style=""> 674                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 675      @Override                                                                                                     </span>
<span class="-2597044235576493624" onmouseenter="enter('-2597044235576493624');" onmouseout="out('-2597044235576493624');" style=""> 676      public void onEnableHeartRateSleepSupport(boolean enable) {                                                   </span>
<span class="7623304499723183910" onmouseenter="enter('7623304499723183910');" onmouseout="out('7623304499723183910');" style=""> 677          onEnableRealtimeHeartRateMeasurement(enable);                                                             </span>
<span  style=""> 678                                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 679      }                                                                                                             </span>
<span  style=""> 680                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 681      @Override                                                                                                     </span>
<span class="-7200644583722212481" onmouseenter="enter('-7200644583722212481');" onmouseout="out('-7200644583722212481');" style=""> 682      public void onAddCalendarEvent(CalendarEventSpec calendarEventSpec) {                                         </span>
<span  style=""> 683                                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 684      }                                                                                                             </span>
<span  style=""> 685                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 686      @Override                                                                                                     </span>
<span class="2890386202777848228" onmouseenter="enter('2890386202777848228');" onmouseout="out('2890386202777848228');" style=""> 687      public void onDeleteCalendarEvent(byte type, long id) {                                                       </span>
<span  style=""> 688                                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 689      }                                                                                                             </span>
<span  style=""> 690                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 691      @Override                                                                                                     </span>
<span class="349159621018699769" onmouseenter="enter('349159621018699769');" onmouseout="out('349159621018699769');" style=""> 692      public void onSendConfiguration(String config) {                                                              </span>
<span class="-7846666641684196127" onmouseenter="enter('-7846666641684196127');" onmouseout="out('-7846666641684196127');" style=""> 693          LOG.info(&quot;Send Configuration: &quot; + config);                                                                </span>
<span  style=""> 694                                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 695      }                                                                                                             </span>
<span  style=""> 696                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 697      @Override                                                                                                     </span>
<span class="-1180224994468071186" onmouseenter="enter('-1180224994468071186');" onmouseout="out('-1180224994468071186');" style=""> 698      public void onTestNewFunction() {                                                                             </span>
<span class="5914733006117960203" onmouseenter="enter('5914733006117960203');" onmouseout="out('5914733006117960203');" style=""> 699          LOG.info(&quot;Test New Function&quot;);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 700      }                                                                                                             </span>
<span  style=""> 701                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 702      @Override                                                                                                     </span>
<span class="-6167041048283935417" onmouseenter="enter('-6167041048283935417');" onmouseout="out('-6167041048283935417');" style=""> 703      public void onSendWeather(WeatherSpec weatherSpec) {                                                          </span>
<span  style=""> 704                                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 705      }                                                                                                             </span>
<span  style=""> 706                                                                                                                    </span>
<span class="5880921854020880068" onmouseenter="enter('5880921854020880068');" onmouseout="out('5880921854020880068');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 707 +    public void setUnicodeSupport(boolean support){                                                               </span>
<span class="6042074506485087881" onmouseenter="enter('6042074506485087881');" onmouseout="out('6042074506485087881');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 708 +        HPlusCoordinator.setUnicodeSupport(gbDevice.getAddress(), support);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 709 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 710 +                                                                                                                  </span>
<span  style=""> 711                                                                                                                    </span>
<span class="-4706054677770626804" onmouseenter="enter('-4706054677770626804');" onmouseout="out('-4706054677770626804');" style=""> 712      private void showIncomingCall(String name, String rawNumber) {                                                </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 713          try {                                                                                                     </span>
<span class="3592618537022379156" onmouseenter="enter('3592618537022379156');" onmouseout="out('3592618537022379156');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 714 -            StringBuilder number = new StringBuilder();                                                           </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 715 -                                                                                                                  </span>
<span class="8350107368880842067" onmouseenter="enter('8350107368880842067');" onmouseout="out('8350107368880842067');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 716 -            //Clean up number as the device only accepts digits                                                   </span>
<span class="9010108090093925813" onmouseenter="enter('9010108090093925813');" onmouseout="out('9010108090093925813');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 717 -            for (char c : rawNumber.toCharArray()) {                                                              </span>
<span class="-3606938168735497741" onmouseenter="enter('-3606938168735497741');" onmouseout="out('-3606938168735497741');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 718 -                if (Character.isDigit(c)) {                                                                       </span>
<span class="-1236668618857566487" onmouseenter="enter('-1236668618857566487');" onmouseout="out('-1236668618857566487');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 719 -                    number.append(c);                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 720 -                }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 721 -            }                                                                                                     </span>
<span  style=""> 722                                                                                                                    </span>
<span class="-8981057032029232134" onmouseenter="enter('-8981057032029232134');" onmouseout="out('-8981057032029232134');" style=""> 723              TransactionBuilder builder = performInitialized(&quot;incomingCall&quot;);                                      </span>
<span  style=""> 724                                                                                                                    </span>
<span class="-470559072641579707" onmouseenter="enter('-470559072641579707');" onmouseout="out('-470559072641579707');" style=""> 725              //Enable call notifications                                                                           </span>
<span class="-2018055458770536330" onmouseenter="enter('-2018055458770536330');" onmouseout="out('-2018055458770536330');" style=""> 726              builder.write(ctrlCharacteristic, new byte[]{HPlusConstants.CMD_ACTION_INCOMING_CALL, 1});            </span>
<span  style=""> 727                                                                                                                    </span>
<span class="2257971100060063202" onmouseenter="enter('2257971100060063202');" onmouseout="out('2257971100060063202');" style=""> 728              //Show Call Icon                                                                                      </span>
<span class="431202743276395661" onmouseenter="enter('431202743276395661');" onmouseout="out('431202743276395661');" style=""><abbr title=" 729              builder.write(ctrlCharacteristic, new byte[]{HPlusConstants.CMD_SET_INCOMING_CALL, HPlusConstants.ARG_INCOMING_CALL});"> 729              builder.write(ctrlCharacteristic, new byte[]{HPlusConstants.CMD_SET_INCOMING_CALL, HPlusConstants.ARG_ðŸ”µ</abbr></span>
<span  style=""> 730                                                                                                                    </span>
<span class="-1463217213013643309" onmouseenter="enter('-1463217213013643309');" onmouseout="out('-1463217213013643309');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 731 -            byte[] msg = new byte[13];                                                                            </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 732 -                                                                                                                  </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 733 -                                                                                                                  </span>
<span class="4148550063034252717" onmouseenter="enter('4148550063034252717');" onmouseout="out('4148550063034252717');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 734 -            //Show call name                                                                                      </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 735 -                                                                                                                  </span>
<span class="-7993208990588136145" onmouseenter="enter('-7993208990588136145');" onmouseout="out('-7993208990588136145');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 736 -            for (int i = 0; i &lt; msg.length; i++)                                                                  </span>
<span class="-452829507499965658" onmouseenter="enter('-452829507499965658');" onmouseout="out('-452829507499965658');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 737 -                msg[i] = &#x27; &#x27;;                                                                                     </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 738 -                                                                                                                  </span>
<span class="3205766085188191830" onmouseenter="enter('3205766085188191830');" onmouseout="out('3205766085188191830');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 739 -            byte[] nameBytes = encodeStringToDevice(name);                                                        </span>
<span class="-783531191089635895" onmouseenter="enter('-783531191089635895');" onmouseout="out('-783531191089635895');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 740 -            for (int i = 0; i &lt; nameBytes.length &amp;&amp; i &lt; (msg.length - 1); i++)                                    </span>
<span class="6765965112598420400" onmouseenter="enter('6765965112598420400');" onmouseout="out('6765965112598420400');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 741 -                msg[i + 1] = nameBytes[i];                                                                        </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 742 -                                                                                                                  </span>
<span class="-8475803122541257030" onmouseenter="enter('-8475803122541257030');" onmouseout="out('-8475803122541257030');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 743 -            msg[0] = HPlusConstants.CMD_ACTION_DISPLAY_TEXT_NAME;                                                 </span>
<span class="-6541237243628611070" onmouseenter="enter('-6541237243628611070');" onmouseout="out('-6541237243628611070');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 744 -            builder.write(ctrlCharacteristic, msg);                                                               </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 745 -                                                                                                                  </span>
<span class="-2032388462516825457" onmouseenter="enter('-2032388462516825457');" onmouseout="out('-2032388462516825457');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 746 -            msg[0] = HPlusConstants.CMD_ACTION_DISPLAY_TEXT_NAME_CN;                                              </span>
<span class="-6541237243628611070" onmouseenter="enter('-6541237243628611070');" onmouseout="out('-6541237243628611070');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 747 -            builder.write(ctrlCharacteristic, msg);                                                               </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 748 -                                                                                                                  </span>
<span class="2195247688369690659" onmouseenter="enter('2195247688369690659');" onmouseout="out('2195247688369690659');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 749 -            builder.wait(200);                                                                                    </span>
<span class="-2713623245355191357" onmouseenter="enter('-2713623245355191357');" onmouseout="out('-2713623245355191357');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 750 -            msg = msg.clone();                                                                                    </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 751 -                                                                                                                  </span>
<span class="7410242265141315458" onmouseenter="enter('7410242265141315458');" onmouseout="out('7410242265141315458');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 752 -            //Show call number                                                                                    </span>
<span class="-7993208990588136145" onmouseenter="enter('-7993208990588136145');" onmouseout="out('-7993208990588136145');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 753 -            for (int i = 0; i &lt; msg.length; i++)                                                                  </span>
<span class="-452829507499965658" onmouseenter="enter('-452829507499965658');" onmouseout="out('-452829507499965658');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 754 -                msg[i] = &#x27; &#x27;;                                                                                     </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 755 -                                                                                                                  </span>
<span class="-3492043630386970598" onmouseenter="enter('-3492043630386970598');" onmouseout="out('-3492043630386970598');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 756 -            for (int i = 0; i &lt; number.length() &amp;&amp; i &lt; (msg.length - 1); i++)                                     </span>
<span class="1716636883153338951" onmouseenter="enter('1716636883153338951');" onmouseout="out('1716636883153338951');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 757 -                msg[i + 1] = (byte) number.charAt(i);                                                             </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 758 -                                                                                                                  </span>
<span class="6154219539807733297" onmouseenter="enter('6154219539807733297');" onmouseout="out('6154219539807733297');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 759 -            msg[0] = HPlusConstants.CMD_SET_INCOMING_CALL_NUMBER;                                                 </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 760 -                                                                                                                  </span>
<span class="-6541237243628611070" onmouseenter="enter('-6541237243628611070');" onmouseout="out('-6541237243628611070');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 761 -            builder.write(ctrlCharacteristic, msg);                                                               </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 762 -                                                                                                                  </span>
<span class="-5534937907083456817" onmouseenter="enter('-5534937907083456817');" onmouseout="out('-5534937907083456817');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 763 -            builder.queue(getQueue());                                                                            </span>
<span class="2424056063165640280" onmouseenter="enter('2424056063165640280');" onmouseout="out('2424056063165640280');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 764 +            if(name != null) {                                                                                    </span>
<span class="-1463217213013643309" onmouseenter="enter('-1463217213013643309');" onmouseout="out('-1463217213013643309');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 765 +                byte[] msg = new byte[13];                                                                        </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 766 +                                                                                                                  </span>
<span class="4148550063034252717" onmouseenter="enter('4148550063034252717');" onmouseout="out('4148550063034252717');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 767 +                //Show call name                                                                                  </span>
<span class="-7993208990588136145" onmouseenter="enter('-7993208990588136145');" onmouseout="out('-7993208990588136145');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 768 +                for (int i = 0; i &lt; msg.length; i++)                                                              </span>
<span class="-452829507499965658" onmouseenter="enter('-452829507499965658');" onmouseout="out('-452829507499965658');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 769 +                    msg[i] = &#x27; &#x27;;                                                                                 </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 770 +                                                                                                                  </span>
<span class="3205766085188191830" onmouseenter="enter('3205766085188191830');" onmouseout="out('3205766085188191830');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 771 +                byte[] nameBytes = encodeStringToDevice(name);                                                    </span>
<span class="-783531191089635895" onmouseenter="enter('-783531191089635895');" onmouseout="out('-783531191089635895');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 772 +                for (int i = 0; i &lt; nameBytes.length &amp;&amp; i &lt; (msg.length - 1); i++)                                </span>
<span class="6765965112598420400" onmouseenter="enter('6765965112598420400');" onmouseout="out('6765965112598420400');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 773 +                    msg[i + 1] = nameBytes[i];                                                                    </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 774 +                                                                                                                  </span>
<span class="-8475803122541257030" onmouseenter="enter('-8475803122541257030');" onmouseout="out('-8475803122541257030');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 775 +                msg[0] = HPlusConstants.CMD_ACTION_DISPLAY_TEXT_NAME;                                             </span>
<span class="-6541237243628611070" onmouseenter="enter('-6541237243628611070');" onmouseout="out('-6541237243628611070');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 776 +                builder.write(ctrlCharacteristic, msg);                                                           </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 777 +                                                                                                                  </span>
<span class="-2032388462516825457" onmouseenter="enter('-2032388462516825457');" onmouseout="out('-2032388462516825457');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 778 +                msg[0] = HPlusConstants.CMD_ACTION_DISPLAY_TEXT_NAME_CN;                                          </span>
<span class="-6541237243628611070" onmouseenter="enter('-6541237243628611070');" onmouseout="out('-6541237243628611070');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 779 +                builder.write(ctrlCharacteristic, msg);                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 780 +            }                                                                                                     </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 781 +                                                                                                                  </span>
<span class="-6077600590360942190" onmouseenter="enter('-6077600590360942190');" onmouseout="out('-6077600590360942190');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 782 +            if(rawNumber != null) {                                                                               </span>
<span class="3592618537022379156" onmouseenter="enter('3592618537022379156');" onmouseout="out('3592618537022379156');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 783 +                StringBuilder number = new StringBuilder();                                                       </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 784 +                                                                                                                  </span>
<span class="8350107368880842067" onmouseenter="enter('8350107368880842067');" onmouseout="out('8350107368880842067');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 785 +                //Clean up number as the device only accepts digits                                               </span>
<span class="9010108090093925813" onmouseenter="enter('9010108090093925813');" onmouseout="out('9010108090093925813');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 786 +                for (char c : rawNumber.toCharArray()) {                                                          </span>
<span class="-3606938168735497741" onmouseenter="enter('-3606938168735497741');" onmouseout="out('-3606938168735497741');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 787 +                    if (Character.isDigit(c)) {                                                                   </span>
<span class="-1236668618857566487" onmouseenter="enter('-1236668618857566487');" onmouseout="out('-1236668618857566487');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 788 +                        number.append(c);                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 789 +                    }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 790 +                }                                                                                                 </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 791 +                                                                                                                  </span>
<span class="-1463217213013643309" onmouseenter="enter('-1463217213013643309');" onmouseout="out('-1463217213013643309');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 792 +                byte[] msg = new byte[13];                                                                        </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 793 +                                                                                                                  </span>
<span class="7410242265141315458" onmouseenter="enter('7410242265141315458');" onmouseout="out('7410242265141315458');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 794 +                //Show call number                                                                                </span>
<span class="-7993208990588136145" onmouseenter="enter('-7993208990588136145');" onmouseout="out('-7993208990588136145');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 795 +                for (int i = 0; i &lt; msg.length; i++)                                                              </span>
<span class="-452829507499965658" onmouseenter="enter('-452829507499965658');" onmouseout="out('-452829507499965658');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 796 +                    msg[i] = &#x27; &#x27;;                                                                                 </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 797 +                                                                                                                  </span>
<span class="-3492043630386970598" onmouseenter="enter('-3492043630386970598');" onmouseout="out('-3492043630386970598');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 798 +                for (int i = 0; i &lt; number.length() &amp;&amp; i &lt; (msg.length - 1); i++)                                 </span>
<span class="1716636883153338951" onmouseenter="enter('1716636883153338951');" onmouseout="out('1716636883153338951');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 799 +                    msg[i + 1] = (byte) number.charAt(i);                                                         </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 800 +                                                                                                                  </span>
<span class="6154219539807733297" onmouseenter="enter('6154219539807733297');" onmouseout="out('6154219539807733297');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 801 +                msg[0] = HPlusConstants.CMD_SET_INCOMING_CALL_NUMBER;                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 802 +                                                                                                                  </span>
<span class="2195247688369690659" onmouseenter="enter('2195247688369690659');" onmouseout="out('2195247688369690659');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 803 +                builder.wait(200);                                                                                </span>
<span class="-6541237243628611070" onmouseenter="enter('-6541237243628611070');" onmouseout="out('-6541237243628611070');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 804 +                builder.write(ctrlCharacteristic, msg);                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 805 +            }                                                                                                     </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 806 +                                                                                                                  </span>
<span class="3761800854751581723" onmouseenter="enter('3761800854751581723');" onmouseout="out('3761800854751581723');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 807 +            performConnected(builder.getTransaction());                                                           </span>
<span class="7080241092423381085" onmouseenter="enter('7080241092423381085');" onmouseout="out('7080241092423381085');" style=""> 808          } catch (IOException e) {                                                                                 </span>
<span class="5607211826758247973" onmouseenter="enter('5607211826758247973');" onmouseout="out('5607211826758247973');" style=""><abbr title=" 809              GB.toast(getContext(), &quot;Error showing incoming call: &quot; + e.getLocalizedMessage(), Toast.LENGTH_LONG, GB.ERROR);"> 809              GB.toast(getContext(), &quot;Error showing incoming call: &quot; + e.getLocalizedMessage(), Toast.LENGTH_LONG, GðŸ”µ</abbr></span>
<span  style=""> 810                                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 811          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 812      }                                                                                                             </span>
<span  style=""> 813                                                                                                                    </span>
<span class="2669430369160917091" onmouseenter="enter('2669430369160917091');" onmouseout="out('2669430369160917091');" style=""> 814      private void showText(String title, String body) {                                                            </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 815 -                                                                                                                  </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 816          try {                                                                                                     </span>
<span class="8575811470010308677" onmouseenter="enter('8575811470010308677');" onmouseout="out('8575811470010308677');" style=""> 817              TransactionBuilder builder = performInitialized(&quot;notification&quot;);                                      </span>
<span  style=""> 818                                                                                                                    </span>
<span class="-5183659842430019699" onmouseenter="enter('-5183659842430019699');" onmouseout="out('-5183659842430019699');" style=""> 819              String message = &quot;&quot;;                                                                                  </span>
<span  style=""> 820                                                                                                                    </span>
<span class="4468139034893619423" onmouseenter="enter('4468139034893619423');" onmouseout="out('4468139034893619423');" style=""> 821              if (title != null &amp;&amp; title.length() &gt; 0) {                                                            </span>
<span class="7795018544496104410" onmouseenter="enter('7795018544496104410');" onmouseout="out('7795018544496104410');" style=""> 822                  message = StringUtils.pad(StringUtils.truncate(title, 16), 16); //Limit title to top row          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 823              }                                                                                                     </span>
<span  style=""> 824                                                                                                                    </span>
<span class="4413763009831532288" onmouseenter="enter('4413763009831532288');" onmouseout="out('4413763009831532288');" style=""> 825              if (body != null) {                                                                                   </span>
<span class="-4827052322101785234" onmouseenter="enter('-4827052322101785234');" onmouseout="out('-4827052322101785234');" style=""> 826                  message += body;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 827              }                                                                                                     </span>
<span  style=""> 828                                                                                                                    </span>
<span class="-7267330840062528164" onmouseenter="enter('-7267330840062528164');" onmouseout="out('-7267330840062528164');" style=""> 829              byte[] messageBytes = encodeStringToDevice(message);                                                  </span>
<span  style=""> 830                                                                                                                    </span>
<span class="-6947936872233705603" onmouseenter="enter('-6947936872233705603');" onmouseout="out('-6947936872233705603');" style=""> 831              int length = messageBytes.length / 17;                                                                </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 832 +                                                                                                                  </span>
<span class="7436007129343658037" onmouseenter="enter('7436007129343658037');" onmouseout="out('7436007129343658037');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 833 +            length = length &gt; 5 ? 5 : length;                                                                     </span>
<span  style=""> 834                                                                                                                    </span>
<span class="-2276016464983488813" onmouseenter="enter('-2276016464983488813');" onmouseout="out('-2276016464983488813');" style=""><abbr title=" 835              builder.write(ctrlCharacteristic, new byte[]{HPlusConstants.CMD_SET_INCOMING_MESSAGE, HPlusConstants.ARG_INCOMING_MESSAGE});"> 835              builder.write(ctrlCharacteristic, new byte[]{HPlusConstants.CMD_SET_INCOMING_MESSAGE, HPlusConstants.AðŸ”µ</abbr></span>
<span  style=""> 836                                                                                                                    </span>
<span class="8693578117273483378" onmouseenter="enter('8693578117273483378');" onmouseout="out('8693578117273483378');" style=""> 837              int remaining = Math.min(255, (messageBytes.length % 17 &gt; 0) ? length + 1 : length);                  </span>
<span  style=""> 838                                                                                                                    </span>
<span class="-6938126668542148541" onmouseenter="enter('-6938126668542148541');" onmouseout="out('-6938126668542148541');" style=""> 839              byte[] msg = new byte[20];                                                                            </span>
<span class="6283182582673736786" onmouseenter="enter('6283182582673736786');" onmouseout="out('6283182582673736786');" style=""> 840              msg[0] = HPlusConstants.CMD_ACTION_DISPLAY_TEXT;                                                      </span>
<span class="2374339912776851777" onmouseenter="enter('2374339912776851777');" onmouseout="out('2374339912776851777');" style=""> 841              msg[1] = (byte) remaining;                                                                            </span>
<span  style=""> 842                                                                                                                    </span>
<span class="7174897306012108535" onmouseenter="enter('7174897306012108535');" onmouseout="out('7174897306012108535');" style=""> 843              for (int i = 2; i &lt; msg.length; i++)                                                                  </span>
<span class="-452829507499965658" onmouseenter="enter('-452829507499965658');" onmouseout="out('-452829507499965658');" style=""> 844                  msg[i] = &#x27; &#x27;;                                                                                     </span>
<span  style=""> 845                                                                                                                    </span>
<span class="3830575522721686257" onmouseenter="enter('3830575522721686257');" onmouseout="out('3830575522721686257');" style=""> 846              int message_index = 0;                                                                                </span>
<span class="-2034332425768882561" onmouseenter="enter('-2034332425768882561');" onmouseout="out('-2034332425768882561');" style=""> 847              int i = 3;                                                                                            </span>
<span  style=""> 848                                                                                                                    </span>
<span class="-1190413858175663168" onmouseenter="enter('-1190413858175663168');" onmouseout="out('-1190413858175663168');" style=""> 849              for (int j = 0; j &lt; messageBytes.length; j++) {                                                       </span>
<span class="7313274589245642051" onmouseenter="enter('7313274589245642051');" onmouseout="out('7313274589245642051');" style=""> 850                  msg[i++] = messageBytes[j];                                                                       </span>
<span  style=""> 851                                                                                                                    </span>
<span class="2532902930176219444" onmouseenter="enter('2532902930176219444');" onmouseout="out('2532902930176219444');" style=""> 852                  if (i == msg.length) {                                                                            </span>
<span class="3910183690266069869" onmouseenter="enter('3910183690266069869');" onmouseout="out('3910183690266069869');" style=""> 853                      message_index++;                                                                              </span>
<span class="245661942964386200" onmouseenter="enter('245661942964386200');" onmouseout="out('245661942964386200');" style=""> 854                      msg[2] = (byte) message_index;                                                                </span>
<span class="-6541237243628611070" onmouseenter="enter('-6541237243628611070');" onmouseout="out('-6541237243628611070');" style=""> 855                      builder.write(ctrlCharacteristic, msg);                                                       </span>
<span  style=""> 856                                                                                                                    </span>
<span class="-2713623245355191357" onmouseenter="enter('-2713623245355191357');" onmouseout="out('-2713623245355191357');" style=""> 857                      msg = msg.clone();                                                                            </span>
<span class="-167106871940501653" onmouseenter="enter('-167106871940501653');" onmouseout="out('-167106871940501653');" style=""> 858                      for (i = 3; i &lt; msg.length; i++)                                                              </span>
<span class="-452829507499965658" onmouseenter="enter('-452829507499965658');" onmouseout="out('-452829507499965658');" style=""> 859                          msg[i] = &#x27; &#x27;;                                                                             </span>
<span  style=""> 860                                                                                                                    </span>
<span class="6801923363408854922" onmouseenter="enter('6801923363408854922');" onmouseout="out('6801923363408854922');" style=""> 861                      if (message_index &lt; remaining)                                                                </span>
<span class="-1159031305874409210" onmouseenter="enter('-1159031305874409210');" onmouseout="out('-1159031305874409210');" style=""> 862                          i = 3;                                                                                    </span>
<span class="-7436048164614400339" onmouseenter="enter('-7436048164614400339');" onmouseout="out('-7436048164614400339');" style=""> 863                      else                                                                                          </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 864                          break;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 865                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 866              }                                                                                                     </span>
<span  style=""> 867                                                                                                                    </span>
<span class="-4555485809374867291" onmouseenter="enter('-4555485809374867291');" onmouseout="out('-4555485809374867291');" style=""> 868              msg[2] = (byte) remaining;                                                                            </span>
<span  style=""> 869                                                                                                                    </span>
<span class="-6541237243628611070" onmouseenter="enter('-6541237243628611070');" onmouseout="out('-6541237243628611070');" style=""> 870              builder.write(ctrlCharacteristic, msg);                                                               </span>
<span class="-5534937907083456817" onmouseenter="enter('-5534937907083456817');" onmouseout="out('-5534937907083456817');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 871 -            builder.queue(getQueue());                                                                            </span>
<span class="3761800854751581723" onmouseenter="enter('3761800854751581723');" onmouseout="out('3761800854751581723');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 872 +            performConnected(builder.getTransaction());                                                           </span>
<span class="7080241092423381085" onmouseenter="enter('7080241092423381085');" onmouseout="out('7080241092423381085');" style=""> 873          } catch (IOException e) {                                                                                 </span>
<span class="-3005578110211581534" onmouseenter="enter('-3005578110211581534');" onmouseout="out('-3005578110211581534');" style=""><abbr title=" 874              GB.toast(getContext(), &quot;Error showing device Notification: &quot; + e.getLocalizedMessage(), Toast.LENGTH_LONG, GB.ERROR);"> 874              GB.toast(getContext(), &quot;Error showing device Notification: &quot; + e.getLocalizedMessage(), Toast.LENGTH_LðŸ”µ</abbr></span>
<span  style=""> 875                                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 876          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 877      }                                                                                                             </span>
<span  style=""> 878                                                                                                                    </span>
<span class="2374016947018039193" onmouseenter="enter('2374016947018039193');" onmouseout="out('2374016947018039193');" style=""> 879      private void close() {                                                                                        </span>
<span class="-7083324746063369835" onmouseenter="enter('-7083324746063369835');" onmouseout="out('-7083324746063369835');" style=""> 880          if (syncHelper != null) {                                                                                 </span>
<span class="-7896063751358438536" onmouseenter="enter('-7896063751358438536');" onmouseout="out('-7896063751358438536');" style=""> 881              syncHelper.quit();                                                                                    </span>
<span class="-2471739938777085601" onmouseenter="enter('-2471739938777085601');" onmouseout="out('-2471739938777085601');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 882 +            syncHelper.interrupt();                                                                               </span>
<span class="-9199515530023964212" onmouseenter="enter('-9199515530023964212');" onmouseout="out('-9199515530023964212');" style=""> 883              syncHelper = null;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 884          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 885      }                                                                                                             </span>
<span  style=""> 886                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 887      /**                                                                                                           </span>
<span class="-2663499463451487171" onmouseenter="enter('-2663499463451487171');" onmouseout="out('-2663499463451487171');" style=""> 888       * HPlus devices accept a subset of GB2312 with some modifications.                                           </span>
<span class="-5296208177179093503" onmouseenter="enter('-5296208177179093503');" onmouseout="out('-5296208177179093503');" style=""> 889       * This function will apply a custom transliteration.                                                         </span>
<span class="-3958616819795834315" onmouseenter="enter('-3958616819795834315');" onmouseout="out('-3958616819795834315');" style=""> 890       * While related to the methods implemented in LanguageUtils. These are specific for HPLUS                    </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 891       *                                                                                                            </span>
<span class="-1743400565649069450" onmouseenter="enter('-1743400565649069450');" onmouseout="out('-1743400565649069450');" style=""> 892       * @param s The String to transliterate                                                                       </span>
<span class="2025757942853076636" onmouseenter="enter('2025757942853076636');" onmouseout="out('2025757942853076636');" style=""> 893       * @return An array of bytes ready to be sent to the device                                                   </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 894       */                                                                                                           </span>
<span class="-8823649745364399870" onmouseenter="enter('-8823649745364399870');" onmouseout="out('-8823649745364399870');" style=""> 895      private byte[] encodeStringToDevice(String s) {                                                               </span>
<span  style=""> 896                                                                                                                    </span>
<span class="9112578812581115095" onmouseenter="enter('9112578812581115095');" onmouseout="out('9112578812581115095');" style=""> 897          List&lt;Byte&gt; outBytes = new ArrayList&lt;Byte&gt;();                                                              </span>
<span  style=""> 898                                                                                                                    </span>
<span class="-2173296205160994735" onmouseenter="enter('-2173296205160994735');" onmouseout="out('-2173296205160994735');" style=""> 899          for (int i = 0; i &lt; s.length(); i++) {                                                                    </span>
<span class="-425988238491649263" onmouseenter="enter('-425988238491649263');" onmouseout="out('-425988238491649263');" style=""> 900              Character c = s.charAt(i);                                                                            </span>
<span class="-6710548613110177700" onmouseenter="enter('-6710548613110177700');" onmouseout="out('-6710548613110177700');" style=""> 901              byte[] cs;                                                                                            </span>
<span  style=""> 902                                                                                                                    </span>
<span class="-7646558473377848105" onmouseenter="enter('-7646558473377848105');" onmouseout="out('-7646558473377848105');" style=""> 903              if (HPlusConstants.transliterateMap.containsKey(c)) {                                                 </span>
<span class="-6146107856909202732" onmouseenter="enter('-6146107856909202732');" onmouseout="out('-6146107856909202732');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 904 -                cs = new byte[]{HPlusConstants.transliterateMap.get(c)};                                          </span>
<span class="-6827180778581783411" onmouseenter="enter('-6827180778581783411');" onmouseout="out('-6827180778581783411');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 905 +                cs = HPlusConstants.transliterateMap.get(c);                                                      </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 906              } else {                                                                                              </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 907                  try {                                                                                             </span>
<span class="4261488925756856253" onmouseenter="enter('4261488925756856253');" onmouseout="out('4261488925756856253');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"><abbr title=" 908 -                    if (HPlusCoordinator.getLanguage(this.gbDevice.getAddress()) == HPlusConstants.ARG_LANGUAGE_CN)"> 908 -                    if (HPlusCoordinator.getLanguage(this.gbDevice.getAddress()) == HPlusConstants.ARG_LANGUAGE_CNðŸ”µ</abbr></span>
<span class="-3264772470522099445" onmouseenter="enter('-3264772470522099445');" onmouseout="out('-3264772470522099445');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 909 +                    if(HPlusCoordinator.getUnicodeSupport(this.gbDevice.getAddress()))                            </span>
<span class="4466778639974351027" onmouseenter="enter('4466778639974351027');" onmouseout="out('4466778639974351027');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 910 +                        cs = c.toString().getBytes(&quot;Unicode&quot;);                                                    </span>
<span class="-7436048164614400339" onmouseenter="enter('-7436048164614400339');" onmouseout="out('-7436048164614400339');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 911 +                    else                                                                                          </span>
<span class="637174697753777176" onmouseenter="enter('637174697753777176');" onmouseout="out('637174697753777176');" style=""> 912                          cs = c.toString().getBytes(&quot;GB2312&quot;);                                                     </span>
<span class="-7436048164614400339" onmouseenter="enter('-7436048164614400339');" onmouseout="out('-7436048164614400339');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 913 -                    else                                                                                          </span>
<span class="2017863147194107834" onmouseenter="enter('2017863147194107834');" onmouseout="out('2017863147194107834');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 914 -                        cs = c.toString().getBytes(&quot;UTF-8&quot;);                                                      </span>
<span class="2368993151256970390" onmouseenter="enter('2368993151256970390');" onmouseout="out('2368993151256970390');" style=""> 915                  } catch (UnsupportedEncodingException e) {                                                        </span>
<span class="-3354683485831733476" onmouseenter="enter('-3354683485831733476');" onmouseout="out('-3354683485831733476');" style=""> 916                      //Fallback. Result string may be strange, but better than nothing                             </span>
<span class="8503633407937514815" onmouseenter="enter('8503633407937514815');" onmouseout="out('8503633407937514815');" style=""> 917                      cs = c.toString().getBytes();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 918                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 919              }                                                                                                     </span>
<span class="-6641336920880003910" onmouseenter="enter('-6641336920880003910');" onmouseout="out('-6641336920880003910');" style=""> 920              for (int j = 0; j &lt; cs.length; j++)                                                                   </span>
<span class="-3202096665861785787" onmouseenter="enter('-3202096665861785787');" onmouseout="out('-3202096665861785787');" style=""> 921                  outBytes.add(cs[j]);                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 922          }                                                                                                         </span>
<span  style=""> 923                                                                                                                    </span>
<span class="-3374475540404730530" onmouseenter="enter('-3374475540404730530');" onmouseout="out('-3374475540404730530');" style=""> 924          return ArrayUtils.toPrimitive(outBytes.toArray(new Byte[outBytes.size()]));                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 925      }                                                                                                             </span>
<span  style=""> 926                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 927      @Override                                                                                                     </span>
<span class="5766835775206074860" onmouseenter="enter('5766835775206074860');" onmouseout="out('5766835775206074860');" style=""> 928      public boolean onCharacteristicChanged(BluetoothGatt gatt,                                                    </span>
<span class="-4605279869462858246" onmouseenter="enter('-4605279869462858246');" onmouseout="out('-4605279869462858246');" style=""> 929                                             BluetoothGattCharacteristic characteristic) {                          </span>
<span class="3568353468682512593" onmouseenter="enter('3568353468682512593');" onmouseout="out('3568353468682512593');" style=""> 930          if (super.onCharacteristicChanged(gatt, characteristic)) {                                                </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 931              return true;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 932          }                                                                                                         </span>
<span  style=""> 933                                                                                                                    </span>
<span class="-554497628129246365" onmouseenter="enter('-554497628129246365');" onmouseout="out('-554497628129246365');" style=""> 934          UUID characteristicUUID = characteristic.getUuid();                                                       </span>
<span class="-6511473927788972997" onmouseenter="enter('-6511473927788972997');" onmouseout="out('-6511473927788972997');" style=""> 935          byte[] data = characteristic.getValue();                                                                  </span>
<span class="-9068394225512782226" onmouseenter="enter('-9068394225512782226');" onmouseout="out('-9068394225512782226');" style=""> 936          if (data.length == 0)                                                                                     </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 937              return true;                                                                                          </span>
<span  style=""> 938                                                                                                                    </span>
<span class="-6174724810667438225" onmouseenter="enter('-6174724810667438225');" onmouseout="out('-6174724810667438225');" style=""> 939          switch (data[0]) {                                                                                        </span>
<span class="-7471367524105316507" onmouseenter="enter('-7471367524105316507');" onmouseout="out('-7471367524105316507');" style=""> 940              case HPlusConstants.DATA_VERSION:                                                                     </span>
<span class="5912373299298352154" onmouseenter="enter('5912373299298352154');" onmouseout="out('5912373299298352154');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 941 +            case HPlusConstants.DATA_VERSION1:                                                                    </span>
<span class="834208567599674439" onmouseenter="enter('834208567599674439');" onmouseout="out('834208567599674439');" style=""> 942                  return syncHelper.processVersion(data);                                                           </span>
<span  style=""> 943                                                                                                                    </span>
<span class="1169399726781128730" onmouseenter="enter('1169399726781128730');" onmouseout="out('1169399726781128730');" style=""> 944              case HPlusConstants.DATA_STATS:                                                                       </span>
<span class="5585642239306136594" onmouseenter="enter('5585642239306136594');" onmouseout="out('5585642239306136594');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 945 -                boolean result = syncHelper.processRealtimeStats(data);                                           </span>
<span class="6350511806657397549" onmouseenter="enter('6350511806657397549');" onmouseout="out('6350511806657397549');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 946 +                boolean result = syncHelper.processRealtimeStats(data, HPlusCoordinator.getUserAge());            </span>
<span class="-275963108691733288" onmouseenter="enter('-275963108691733288');" onmouseout="out('-275963108691733288');" style=""> 947                  if (result) {                                                                                     </span>
<span class="8166670735037070350" onmouseenter="enter('8166670735037070350');" onmouseout="out('8166670735037070350');" style=""> 948                      processExtraInfo (data);                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 949                  }                                                                                                 </span>
<span class="-6419540350677864751" onmouseenter="enter('-6419540350677864751');" onmouseout="out('-6419540350677864751');" style=""> 950                  return result;                                                                                    </span>
<span  style=""> 951                                                                                                                    </span>
<span class="-4210542885090051053" onmouseenter="enter('-4210542885090051053');" onmouseout="out('-4210542885090051053');" style=""> 952              case HPlusConstants.DATA_SLEEP:                                                                       </span>
<span class="518826808593425602" onmouseenter="enter('518826808593425602');" onmouseout="out('518826808593425602');" style=""> 953                  return syncHelper.processIncomingSleepData(data);                                                 </span>
<span  style=""> 954                                                                                                                    </span>
<span class="-1422636218963608963" onmouseenter="enter('-1422636218963608963');" onmouseout="out('-1422636218963608963');" style=""> 955              case HPlusConstants.DATA_STEPS:                                                                       </span>
<span class="8674745804491038360" onmouseenter="enter('8674745804491038360');" onmouseout="out('8674745804491038360');" style=""> 956                  return syncHelper.processDaySummary(data);                                                        </span>
<span  style=""> 957                                                                                                                    </span>
<span class="-5989439275286926467" onmouseenter="enter('-5989439275286926467');" onmouseout="out('-5989439275286926467');" style=""> 958              case HPlusConstants.DATA_DAY_SUMMARY:                                                                 </span>
<span class="7331785174258232326" onmouseenter="enter('7331785174258232326');" onmouseout="out('7331785174258232326');" style=""> 959              case HPlusConstants.DATA_DAY_SUMMARY_ALT:                                                             </span>
<span class="30657702577029265" onmouseenter="enter('30657702577029265');" onmouseout="out('30657702577029265');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 960 -                return syncHelper.processIncomingDaySlotData(data);                                               </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 961 -                                                                                                                  </span>
<span class="3311111969863762619" onmouseenter="enter('3311111969863762619');" onmouseout="out('3311111969863762619');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 962 +                return syncHelper.processIncomingDaySlotData(data, HPlusCoordinator.getUserAge());                </span>
<span class="2453515299835836072" onmouseenter="enter('2453515299835836072');" onmouseout="out('2453515299835836072');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 963 +            case HPlusConstants.DATA_UNKNOWN:                                                                     </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 964 +                return true;                                                                                      </span>
<span class="-8178136317704390296" onmouseenter="enter('-8178136317704390296');" onmouseout="out('-8178136317704390296');" style=""> 965              default:                                                                                              </span>
<span class="1420750839019347937" onmouseenter="enter('1420750839019347937');" onmouseout="out('1420750839019347937');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 966 -                LOG.info(&quot;Unhandled characteristic change: &quot; + characteristicUUID + &quot; code: &quot; + data[0]);         </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 967 +                                                                                                                  </span>
<span class="2463317396092645965" onmouseenter="enter('2463317396092645965');" onmouseout="out('2463317396092645965');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"><abbr title=" 968 +                LOG.info(&quot;Unhandled characteristic change: &quot; + characteristicUUID + &quot; code: &quot; + Arrays.toString(data));"> 968 +                LOG.info(&quot;Unhandled characteristic change: &quot; + characteristicUUID + &quot; code: &quot; + Arrays.toString(daðŸ”µ</abbr></span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 969                  return true;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 970          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 971      }                                                                                                             </span>
<span  style=""> 972                                                                                                                    </span>
<span class="7849365739445821006" onmouseenter="enter('7849365739445821006');" onmouseout="out('7849365739445821006');" style=""> 973      private void  processExtraInfo (byte[] data) {                                                                </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 974          try {                                                                                                     </span>
<span class="1301421367666227040" onmouseenter="enter('1301421367666227040');" onmouseout="out('1301421367666227040');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 975 -            HPlusDataRecordRealtime record = new HPlusDataRecordRealtime(data);                                   </span>
<span class="3335414119067454274" onmouseenter="enter('3335414119067454274');" onmouseout="out('3335414119067454274');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 976 +            HPlusDataRecordRealtime record = new HPlusDataRecordRealtime(data, HPlusCoordinator.getUserAge());    </span>
<span  style=""> 977                                                                                                                    </span>
<span class="-6654310698308599937" onmouseenter="enter('-6654310698308599937');" onmouseout="out('-6654310698308599937');" style=""> 978              handleBatteryInfo(record.battery);                                                                    </span>
<span  style=""> 979                                                                                                                    </span>
<span class="957024650015159745" onmouseenter="enter('957024650015159745');" onmouseout="out('957024650015159745');" style=""> 980              String DEVINFO_STEP = getContext().getString(R.string.chart_steps) + &quot;: &quot;;                            </span>
<span class="6721786647083530834" onmouseenter="enter('6721786647083530834');" onmouseout="out('6721786647083530834');" style=""> 981              String DEVINFO_DISTANCE = getContext().getString(R.string.distance) + &quot;: &quot;;                           </span>
<span class="-5544509155513691581" onmouseenter="enter('-5544509155513691581');" onmouseout="out('-5544509155513691581');" style=""> 982              String DEVINFO_CALORY = getContext().getString(R.string.calories) + &quot;: &quot;;                             </span>
<span class="-1747100185926561303" onmouseenter="enter('-1747100185926561303');" onmouseout="out('-1747100185926561303');" style=""> 983              String DEVINFO_HEART = getContext().getString(R.string.charts_legend_heartrate);                      </span>
<span  style=""> 984                                                                                                                    </span>
<span class="4539674976293838945" onmouseenter="enter('4539674976293838945');" onmouseout="out('4539674976293838945');" style=""> 985              String info = &quot;&quot;;                                                                                     </span>
<span class="603487404869738075" onmouseenter="enter('603487404869738075');" onmouseout="out('603487404869738075');" style=""> 986              if (record.steps &gt; 0) {                                                                               </span>
<span class="-2978506504361701541" onmouseenter="enter('-2978506504361701541');" onmouseout="out('-2978506504361701541');" style=""> 987                  info += DEVINFO_STEP + String.valueOf(record.steps) + &quot;   &quot;;                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 988              }                                                                                                     </span>
<span class="-7382416609460855139" onmouseenter="enter('-7382416609460855139');" onmouseout="out('-7382416609460855139');" style=""> 989              if (record.distance &gt; 0) {                                                                            </span>
<span class="-2048257966317820482" onmouseenter="enter('-2048257966317820482');" onmouseout="out('-2048257966317820482');" style=""> 990                  info += DEVINFO_DISTANCE + String.valueOf(record.distance) + &quot;   &quot;;                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 991              }                                                                                                     </span>
<span class="4712868732205106298" onmouseenter="enter('4712868732205106298');" onmouseout="out('4712868732205106298');" style=""> 992              if (record.calories &gt; 0) {                                                                            </span>
<span class="2384981866748506593" onmouseenter="enter('2384981866748506593');" onmouseout="out('2384981866748506593');" style=""> 993                  info += DEVINFO_CALORY + String.valueOf(record.calories) + &quot;   &quot;;                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 994              }                                                                                                     </span>
<span class="6107108997806163588" onmouseenter="enter('6107108997806163588');" onmouseout="out('6107108997806163588');" style=""> 995              if (record.heartRate &gt; 0) {                                                                           </span>
<span class="-1812003693369079048" onmouseenter="enter('-1812003693369079048');" onmouseout="out('-1812003693369079048');" style=""> 996                  info += DEVINFO_HEART + String.valueOf(record.heartRate) + &quot;   &quot;;                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 997              }                                                                                                     </span>
<span  style=""> 998                                                                                                                    </span>
<span class="8504830605092703085" onmouseenter="enter('8504830605092703085');" onmouseout="out('8504830605092703085');" style=""> 999              if (!info.equals(&quot;&quot;)) {                                                                               </span>
<span class="6111723630993110344" onmouseenter="enter('6111723630993110344');" onmouseout="out('6111723630993110344');" style="">1000                  getDevice().addDeviceInfo(new GenericItem(&quot;&quot;, info));                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1001              }                                                                                                     </span>
<span class="-1471183022667940231" onmouseenter="enter('-1471183022667940231');" onmouseout="out('-1471183022667940231');" style="">1002          } catch (IllegalArgumentException e) {                                                                    </span>
<span class="6834133445830742921" onmouseenter="enter('6834133445830742921');" onmouseout="out('6834133445830742921');" style="">1003              LOG.info((e.getMessage()));                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1004          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1005      }                                                                                                             </span>
<span  style="">1006                                                                                                                    </span>
<span class="4996395825247791604" onmouseenter="enter('4996395825247791604');" onmouseout="out('4996395825247791604');" style="">1007      private void handleBatteryInfo(byte data) {                                                                   </span>
<span class="-7378539640920011500" onmouseenter="enter('-7378539640920011500');" onmouseout="out('-7378539640920011500');" style="">1008              if (batteryCmd.level != (short) data) {                                                               </span>
<span class="-854799830555733473" onmouseenter="enter('-854799830555733473');" onmouseout="out('-854799830555733473');" style="">1009                  batteryCmd.level = (short) data;                                                                  </span>
<span class="-2053668973544639303" onmouseenter="enter('-2053668973544639303');" onmouseout="out('-2053668973544639303');" style="">1010                  handleGBDeviceEvent(batteryCmd);                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1011              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1012      }                                                                                                             </span>
<span  style="">1013                                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1014  }                                                                                                                 </span></pre></td>
                        </tr>
                    </table>
                </div>
              </body>
            </html>
            