<!DOCTYPE html>
    <html lang="en">
              <head>
                <meta charset="utf-8">
                <title>534</title>
                    <style>
                        #top {
                            height: 48vh;
                            overflow-y: auto;
                        }
                        #bottom {
                            height: 48vh;
                            overflow-y: auto;
                        }
                        .highlighted {
                            background-color: rgba(177, 82, 227, 0.85) !important;
                        }
                    </style>
                    <script>
                        function enter(c) {
                            const lines = document.getElementsByClassName(c);
                            for (let i = 0; i < lines.length; i++) {
                               lines.item(i).classList.add('highlighted');
                            }
                        }
                        function out(c) {
                            const lines = document.getElementsByClassName(c);
                            for (let i = 0; i < lines.length; i++) {
                               lines.item(i).classList.remove('highlighted');
                            }
                        }
                    </script>
              </head>
              <body>
                <span style="height: 4vh">
                    534
                    <a href="533.html">prev</a>
                    <a href="535.html">next</a>
                    <a href="534_chunks.html">chunks</a>
                    <a href="index.html">index</a>
                    Evernote/android-job_990c47ba5da81fba1ec423479b571f44f504d473_library/src/test/java/com/evernote/android/job/BaseJobManagerTest.java
                    <textarea rows=1 onclick='navigator.clipboard.writeText(this.value)'>cd C:\studies\se\mega\git-analyzer-plus\notebooks\debug
del /Q *
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\Evernote\android-job show &quot;990c47ba5da81fba1ec423479b571f44f504d473:library/src/test/java/com/evernote/android/job/BaseJobManagerTest.java&quot; &gt; committed.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\Evernote\android-job show &quot;990c47ba5da81fba1ec423479b571f44f504d473^1:library/src/test/java/com/evernote/android/job/BaseJobManagerTest.java&quot; &gt; ours.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\Evernote\android-job show &quot;990c47ba5da81fba1ec423479b571f44f504d473^2:library/src/test/java/com/evernote/android/job/BaseJobManagerTest.java&quot; &gt; theirs.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\Evernote\android-job show &quot;796bfe5f3ba9fe53d163919757b3d93d45df0089:library/src/test/java/com/evernote/android/job/BaseJobManagerTest.java&quot; &gt; base.java
copy ours.java 1ours.java
copy ours.java 2ours.java
copy theirs.java 1theirs.java
copy theirs.java 2theirs.java
copy base.java 1base.java
copy base.java 2base.java
&quot;C:\Program Files\Java\jdk1.8.0_241\bin\java.exe&quot; -Dfile.encoding=UTF-8 -jar &quot;C:\studies\se\jFSTMerge\build\libs\jFSTMerge-all.jar&quot; C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1ours.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1base.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1theirs.java -o C:\studies\se\mega\git-analyzer-plus\notebooks\debug\jfstmerge.java --show-base
&quot;C:\Program Files\Eclipse Adoptium\jdk-17.0.11.9-hotspot\bin\java.exe&quot; -Dfile.encoding=UTF-8 -jar &quot;C:\studies\se\spork\target\spork-0.5.0-SNAPSHOT.jar&quot; C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2ours.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2base.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2theirs.java -o C:\studies\se\mega\git-analyzer-plus\notebooks\debug\spork.java
del /Q 1*.java
del /Q 2*.java
del /Q jfstmerge.java.merge
</textarea>
                    {strict: [[bj]], subset: [[bj]]}
                </span>
                <div id="top">

                    <table>
                        <tr>
                            <th>line based (standard git)</th>
                            <th>jfstmerge</th>
                            <th>spork</th>
                        </tr>
                        <tr>
                            <td><pre><span class="4675552543740820910" onmouseenter="enter('4675552543740820910');" onmouseout="out('4675552543740820910');" style="">   1 package com.evernote.android.job;                                                                        </span>
<span  style="">   2                                                                                                          </span>
<span class="5922045460006936195" onmouseenter="enter('5922045460006936195');" onmouseout="out('5922045460006936195');" style="">   3 import android.content.Context;                                                                          </span>
<span class="-2370850629707943459" onmouseenter="enter('-2370850629707943459');" onmouseout="out('-2370850629707943459');" style="">   4 import android.support.annotation.NonNull;                                                               </span>
<span  style="">   5                                                                                                          </span>
<span class="8206801124109979883" onmouseenter="enter('8206801124109979883');" onmouseout="out('8206801124109979883');" style="">   6 import com.evernote.android.job.test.DummyJobs;                                                          </span>
<span class="-684547314634733644" onmouseenter="enter('-684547314634733644');" onmouseout="out('-684547314634733644');" style="">   7 import com.evernote.android.job.test.TestCat;                                                            </span>
<span  style="">   8                                                                                                          </span>
<span class="-6532678185149257397" onmouseenter="enter('-6532678185149257397');" onmouseout="out('-6532678185149257397');" style="">   9 import org.junit.Rule;                                                                                   </span>
<span class="-1744873477108319775" onmouseenter="enter('-1744873477108319775');" onmouseout="out('-1744873477108319775');" style="">  10 import org.robolectric.RuntimeEnvironment;                                                               </span>
<span  style="">  11                                                                                                          </span>
<span class="5756358326409676048" onmouseenter="enter('5756358326409676048');" onmouseout="out('5756358326409676048');" style="">  12 import java.util.concurrent.Callable;                                                                    </span>
<span class="6937050046386248317" onmouseenter="enter('6937050046386248317');" onmouseout="out('6937050046386248317');" style="">  13 import java.util.concurrent.CountDownLatch;                                                              </span>
<span class="-5549638946827519456" onmouseenter="enter('-5549638946827519456');" onmouseout="out('-5549638946827519456');" style="">  14 import java.util.concurrent.ExecutorService;                                                             </span>
<span class="-3492814532060861089" onmouseenter="enter('-3492814532060861089');" onmouseout="out('-3492814532060861089');" style="">  15 import java.util.concurrent.Executors;                                                                   </span>
<span class="-331778695229620376" onmouseenter="enter('-331778695229620376');" onmouseout="out('-331778695229620376');" style="">  16 import java.util.concurrent.Future;                                                                      </span>
<span class="-6356287537734540725" onmouseenter="enter('-6356287537734540725');" onmouseout="out('-6356287537734540725');" style="">  17 import java.util.concurrent.TimeUnit;                                                                    </span>
<span  style="">  18                                                                                                          </span>
<span class="6917176970756584306" onmouseenter="enter('6917176970756584306');" onmouseout="out('6917176970756584306');" style="">  19 import static org.assertj.core.api.Java6Assertions.assertThat;                                           </span>
<span class="-4107578940953900427" onmouseenter="enter('-4107578940953900427');" onmouseout="out('-4107578940953900427');" style="">  20 import static org.mockito.Mockito.doReturn;                                                              </span>
<span  style="">  21                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  22 /**                                                                                                      </span>
<span class="-2541210092808878866" onmouseenter="enter('-2541210092808878866');" onmouseout="out('-2541210092808878866');" style="">  23  * @author rwondratschek                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  24  */                                                                                                      </span>
<span class="-5429987873611314699" onmouseenter="enter('-5429987873611314699');" onmouseout="out('-5429987873611314699');" style="">  25 @SuppressWarnings(&quot;WeakerAccess&quot;)                                                                        </span>
<span class="2822289096070786615" onmouseenter="enter('2822289096070786615');" onmouseout="out('2822289096070786615');" style="">  26 public abstract class BaseJobManagerTest {                                                               </span>
<span  style="">  27                                                                                                          </span>
<span class="8135638064131899359" onmouseenter="enter('8135638064131899359');" onmouseout="out('8135638064131899359');" style="">  28     @Rule                                                                                                </span>
<span class="-7620099840259404872" onmouseenter="enter('-7620099840259404872');" onmouseout="out('-7620099840259404872');" style="">  29     public final JobManagerRule mJobManagerRule = new JobManagerRule(provideJobCreator());               </span>
<span  style="">  30                                                                                                          </span>
<span class="5154748246392482767" onmouseenter="enter('5154748246392482767');" onmouseout="out('5154748246392482767');" style="">  31     @NonNull                                                                                             </span>
<span class="-3481073358792849306" onmouseenter="enter('-3481073358792849306');" onmouseout="out('-3481073358792849306');" style="">  32     protected JobCreator provideJobCreator() {                                                           </span>
<span class="2090639221351224620" onmouseenter="enter('2090639221351224620');" onmouseout="out('2090639221351224620');" style="">  33         return new DummyJobs.SpyableJobCreator(DummyJobs.TEST_JOB_CREATOR);                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  34     }                                                                                                    </span>
<span  style="">  35                                                                                                          </span>
<span class="5154748246392482767" onmouseenter="enter('5154748246392482767');" onmouseout="out('5154748246392482767');" style="">  36     @NonNull                                                                                             </span>
<span class="-8461498423334805377" onmouseenter="enter('-8461498423334805377');" onmouseout="out('-8461498423334805377');" style="">  37     protected final JobManager manager() {                                                               </span>
<span class="-4934591934771713765" onmouseenter="enter('-4934591934771713765');" onmouseout="out('-4934591934771713765');" style="">  38         return mJobManagerRule.getJobManager();                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  39     }                                                                                                    </span>
<span  style="">  40                                                                                                          </span>
<span class="5154748246392482767" onmouseenter="enter('5154748246392482767');" onmouseout="out('5154748246392482767');" style="">  41     @NonNull                                                                                             </span>
<span class="4705076756609404016" onmouseenter="enter('4705076756609404016');" onmouseout="out('4705076756609404016');" style="">  42     protected final Context context() {                                                                  </span>
<span class="-5151332642589857265" onmouseenter="enter('-5151332642589857265');" onmouseout="out('-5151332642589857265');" style="">  43         return RuntimeEnvironment.application;                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  44     }                                                                                                    </span>
<span  style="">  45                                                                                                          </span>
<span class="-3751297365101898096" onmouseenter="enter('-3751297365101898096');" onmouseout="out('-3751297365101898096');" style="">  46     protected void executeJob(int jobId, @NonNull Job.Result expected) {                                 </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">  47         try {                                                                                            </span>
<span class="-8412679080941427347" onmouseenter="enter('-8412679080941427347');" onmouseout="out('-8412679080941427347');" style="">  48             executeJobAsync(jobId, expected).get(3, TimeUnit.SECONDS);                                   </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">  49         } catch (Exception e) {                                                                          </span>
<span class="5419707581571941542" onmouseenter="enter('5419707581571941542');" onmouseout="out('5419707581571941542');" style="">  50             throw new AssertionError(&quot;Job timeout&quot;);                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  51         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  52     }                                                                                                    </span>
<span  style="">  53                                                                                                          </span>
<span class="5356786187885894695" onmouseenter="enter('5356786187885894695');" onmouseout="out('5356786187885894695');" style=""><abbr title="  54     protected Future&lt;Job.Result&gt; executeJobAsync(int jobId, @NonNull final Job.Result expected) throws InterruptedException {">  54     protected Future&lt;Job.Result&gt; executeJobAsync(int jobId, @NonNull final Job.Result expected) throws InðŸ”µ</abbr></span>
<span class="-4531912195970062533" onmouseenter="enter('-4531912195970062533');" onmouseout="out('-4531912195970062533');" style=""><abbr title="  55         final JobProxy.Common common = new JobProxy.Common(RuntimeEnvironment.application, TestCat.INSTANCE, jobId);">  55         final JobProxy.Common common = new JobProxy.Common(RuntimeEnvironment.application, TestCat.INSTANðŸ”µ</abbr></span>
<span  style="">  56                                                                                                          </span>
<span class="-4627548847837977961" onmouseenter="enter('-4627548847837977961');" onmouseout="out('-4627548847837977961');" style="">  57         final JobRequest pendingRequest = common.getPendingRequest(true, true);                          </span>
<span class="7202510908598887575" onmouseenter="enter('7202510908598887575');" onmouseout="out('7202510908598887575');" style="">  58         assertThat(pendingRequest).isNotNull();                                                          </span>
<span  style="">  59                                                                                                          </span>
<span class="5042951423647804645" onmouseenter="enter('5042951423647804645');" onmouseout="out('5042951423647804645');" style="">  60         final CountDownLatch latch = new CountDownLatch(1);                                              </span>
<span  style="">  61                                                                                                          </span>
<span class="2635305753175794172" onmouseenter="enter('2635305753175794172');" onmouseout="out('2635305753175794172');" style="">  62         ExecutorService executor = Executors.newSingleThreadExecutor();                                  </span>
<span class="-8461972367310688562" onmouseenter="enter('-8461972367310688562');" onmouseout="out('-8461972367310688562');" style="">  63         Future&lt;Job.Result&gt; future = executor.submit(new Callable&lt;Job.Result&gt;() {                         </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  64             @Override                                                                                    </span>
<span class="6323418417803688808" onmouseenter="enter('6323418417803688808');" onmouseout="out('6323418417803688808');" style="">  65             public Job.Result call() throws Exception {                                                  </span>
<span class="-4667942192763773056" onmouseenter="enter('-4667942192763773056');" onmouseout="out('-4667942192763773056');" style="">  66 &lt;&lt;&lt;&lt;&lt;&lt;&lt; GitAnalyzerPlus_ours                                                                             </span>
<span class="-8640965941368400338" onmouseenter="enter('-8640965941368400338');" onmouseout="out('-8640965941368400338');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  67                 Job.Result result = common.executeJobRequest(pendingRequest, null);                      </span>
<span class="6741223626729319096" onmouseenter="enter('6741223626729319096');" onmouseout="out('6741223626729319096');" style="">  68 ||||||| GitAnalyzerPlus_base                                                                             </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  69                                                                                                          </span>
<span class="-6419540350677864751" onmouseenter="enter('-6419540350677864751');" onmouseout="out('-6419540350677864751');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  70                 return result;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  71             }                                                                                            </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  72         });                                                                                              </span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style="">  73 =======                                                                                                  </span>
<span class="3183550661158816211" onmouseenter="enter('3183550661158816211');" onmouseout="out('3183550661158816211');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  74                 latch.countDown();                                                                       </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  75                                                                                                          </span>
<span class="8335659116118205379" onmouseenter="enter('8335659116118205379');" onmouseout="out('8335659116118205379');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  76                 Job.Result result = common.executeJobRequest(pendingRequest);                            </span>
<span class="-1382546150375666264" onmouseenter="enter('-1382546150375666264');" onmouseout="out('-1382546150375666264');" style="">  77 &gt;&gt;&gt;&gt;&gt;&gt;&gt; GitAnalyzerPlus_theirs                                                                           </span>
<span class="3211550930969970322" onmouseenter="enter('3211550930969970322');" onmouseout="out('3211550930969970322');" style="">  78                 assertThat(result).isEqualTo(expected);                                                  </span>
<span class="-3489276174814696792" onmouseenter="enter('-3489276174814696792');" onmouseout="out('-3489276174814696792');" style="">  79                 assertThat(common.getPendingRequest(true, false)).isNull();                              </span>
<span  style="">  80                                                                                                          </span>
<span class="-6419540350677864751" onmouseenter="enter('-6419540350677864751');" onmouseout="out('-6419540350677864751');" style="">  81                 return result;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  82             }                                                                                            </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">  83         });                                                                                              </span>
<span  style="">  84                                                                                                          </span>
<span class="-8684416340857652984" onmouseenter="enter('-8684416340857652984');" onmouseout="out('-8684416340857652984');" style="">  85         // wait until the thread actually started                                                        </span>
<span class="-8285602508687969800" onmouseenter="enter('-8285602508687969800');" onmouseout="out('-8285602508687969800');" style="">  86         assertThat(latch.await(3, TimeUnit.SECONDS)).isTrue();                                           </span>
<span  style="">  87                                                                                                          </span>
<span class="6269622546247724580" onmouseenter="enter('6269622546247724580');" onmouseout="out('6269622546247724580');" style="">  88         executor.shutdown();                                                                             </span>
<span class="-3727521503813029761" onmouseenter="enter('-3727521503813029761');" onmouseout="out('-3727521503813029761');" style="">  89         return future;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  90     }                                                                                                    </span>
<span  style="">  91                                                                                                          </span>
<span class="-7862009256706509546" onmouseenter="enter('-7862009256706509546');" onmouseout="out('-7862009256706509546');" style="">  92     @SuppressWarnings(&quot;ResultOfMethodCallIgnored&quot;)                                                       </span>
<span class="-8422843367418453148" onmouseenter="enter('-8422843367418453148');" onmouseout="out('-8422843367418453148');" style="">  93     protected void resetJob(int jobId) {                                                                 </span>
<span class="379010517580817724" onmouseenter="enter('379010517580817724');" onmouseout="out('379010517580817724');" style="">  94         Job job = manager().getJob(jobId);                                                               </span>
<span class="6519543964694909858" onmouseenter="enter('6519543964694909858');" onmouseout="out('6519543964694909858');" style="">  95         if (job != null) {                                                                               </span>
<span class="-3131778183610600974" onmouseenter="enter('-3131778183610600974');" onmouseout="out('-3131778183610600974');" style="">  96             doReturn(-1L).when(job).getFinishedTimeStamp();                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  97         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  98     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  99 }                                                                                                        </span></pre></td>
                            <td><pre><span class="4675552543740820910" onmouseenter="enter('4675552543740820910');" onmouseout="out('4675552543740820910');" style="">   1 package com.evernote.android.job;                                                                        </span>
<span  style="">   2                                                                                                          </span>
<span class="5922045460006936195" onmouseenter="enter('5922045460006936195');" onmouseout="out('5922045460006936195');" style="">   3 import android.content.Context;                                                                          </span>
<span class="-2370850629707943459" onmouseenter="enter('-2370850629707943459');" onmouseout="out('-2370850629707943459');" style="">   4 import android.support.annotation.NonNull;                                                               </span>
<span  style="">   5                                                                                                          </span>
<span class="8206801124109979883" onmouseenter="enter('8206801124109979883');" onmouseout="out('8206801124109979883');" style="">   6 import com.evernote.android.job.test.DummyJobs;                                                          </span>
<span class="-684547314634733644" onmouseenter="enter('-684547314634733644');" onmouseout="out('-684547314634733644');" style="">   7 import com.evernote.android.job.test.TestCat;                                                            </span>
<span  style="">   8                                                                                                          </span>
<span class="-6532678185149257397" onmouseenter="enter('-6532678185149257397');" onmouseout="out('-6532678185149257397');" style="">   9 import org.junit.Rule;                                                                                   </span>
<span class="-1744873477108319775" onmouseenter="enter('-1744873477108319775');" onmouseout="out('-1744873477108319775');" style="">  10 import org.robolectric.RuntimeEnvironment;                                                               </span>
<span  style="">  11                                                                                                          </span>
<span class="5756358326409676048" onmouseenter="enter('5756358326409676048');" onmouseout="out('5756358326409676048');" style="">  12 import java.util.concurrent.Callable;                                                                    </span>
<span class="6937050046386248317" onmouseenter="enter('6937050046386248317');" onmouseout="out('6937050046386248317');" style="">  13 import java.util.concurrent.CountDownLatch;                                                              </span>
<span class="-5549638946827519456" onmouseenter="enter('-5549638946827519456');" onmouseout="out('-5549638946827519456');" style="">  14 import java.util.concurrent.ExecutorService;                                                             </span>
<span class="-3492814532060861089" onmouseenter="enter('-3492814532060861089');" onmouseout="out('-3492814532060861089');" style="">  15 import java.util.concurrent.Executors;                                                                   </span>
<span class="-331778695229620376" onmouseenter="enter('-331778695229620376');" onmouseout="out('-331778695229620376');" style="">  16 import java.util.concurrent.Future;                                                                      </span>
<span class="-6356287537734540725" onmouseenter="enter('-6356287537734540725');" onmouseout="out('-6356287537734540725');" style="">  17 import java.util.concurrent.TimeUnit;                                                                    </span>
<span  style="">  18                                                                                                          </span>
<span class="6917176970756584306" onmouseenter="enter('6917176970756584306');" onmouseout="out('6917176970756584306');" style="">  19 import static org.assertj.core.api.Java6Assertions.assertThat;                                           </span>
<span class="-4107578940953900427" onmouseenter="enter('-4107578940953900427');" onmouseout="out('-4107578940953900427');" style="">  20 import static org.mockito.Mockito.doReturn;                                                              </span>
<span  style="">  21                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  22 /**                                                                                                      </span>
<span class="-2541210092808878866" onmouseenter="enter('-2541210092808878866');" onmouseout="out('-2541210092808878866');" style="">  23  * @author rwondratschek                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  24  */                                                                                                      </span>
<span class="-5429987873611314699" onmouseenter="enter('-5429987873611314699');" onmouseout="out('-5429987873611314699');" style="">  25 @SuppressWarnings(&quot;WeakerAccess&quot;)                                                                        </span>
<span class="2822289096070786615" onmouseenter="enter('2822289096070786615');" onmouseout="out('2822289096070786615');" style="">  26 public abstract class BaseJobManagerTest {                                                               </span>
<span  style="">  27                                                                                                          </span>
<span class="8135638064131899359" onmouseenter="enter('8135638064131899359');" onmouseout="out('8135638064131899359');" style="">  28     @Rule                                                                                                </span>
<span class="-7620099840259404872" onmouseenter="enter('-7620099840259404872');" onmouseout="out('-7620099840259404872');" style="">  29     public final JobManagerRule mJobManagerRule = new JobManagerRule(provideJobCreator());               </span>
<span  style="">  30                                                                                                          </span>
<span class="5154748246392482767" onmouseenter="enter('5154748246392482767');" onmouseout="out('5154748246392482767');" style="">  31     @NonNull                                                                                             </span>
<span class="-3481073358792849306" onmouseenter="enter('-3481073358792849306');" onmouseout="out('-3481073358792849306');" style="">  32     protected JobCreator provideJobCreator() {                                                           </span>
<span class="2090639221351224620" onmouseenter="enter('2090639221351224620');" onmouseout="out('2090639221351224620');" style="">  33         return new DummyJobs.SpyableJobCreator(DummyJobs.TEST_JOB_CREATOR);                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  34     }                                                                                                    </span>
<span  style="">  35                                                                                                          </span>
<span class="5154748246392482767" onmouseenter="enter('5154748246392482767');" onmouseout="out('5154748246392482767');" style="">  36     @NonNull                                                                                             </span>
<span class="-8461498423334805377" onmouseenter="enter('-8461498423334805377');" onmouseout="out('-8461498423334805377');" style="">  37     protected final JobManager manager() {                                                               </span>
<span class="-4934591934771713765" onmouseenter="enter('-4934591934771713765');" onmouseout="out('-4934591934771713765');" style="">  38         return mJobManagerRule.getJobManager();                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  39     }                                                                                                    </span>
<span  style="">  40                                                                                                          </span>
<span class="5154748246392482767" onmouseenter="enter('5154748246392482767');" onmouseout="out('5154748246392482767');" style="">  41     @NonNull                                                                                             </span>
<span class="4705076756609404016" onmouseenter="enter('4705076756609404016');" onmouseout="out('4705076756609404016');" style="">  42     protected final Context context() {                                                                  </span>
<span class="-5151332642589857265" onmouseenter="enter('-5151332642589857265');" onmouseout="out('-5151332642589857265');" style="">  43         return RuntimeEnvironment.application;                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  44     }                                                                                                    </span>
<span  style="">  45                                                                                                          </span>
<span class="-3751297365101898096" onmouseenter="enter('-3751297365101898096');" onmouseout="out('-3751297365101898096');" style="">  46         protected void executeJob(int jobId, @NonNull Job.Result expected) {                             </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">  47         try {                                                                                            </span>
<span class="-8412679080941427347" onmouseenter="enter('-8412679080941427347');" onmouseout="out('-8412679080941427347');" style="">  48             executeJobAsync(jobId, expected).get(3, TimeUnit.SECONDS);                                   </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">  49         } catch (Exception e) {                                                                          </span>
<span class="5419707581571941542" onmouseenter="enter('5419707581571941542');" onmouseout="out('5419707581571941542');" style="">  50             throw new AssertionError(&quot;Job timeout&quot;);                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  51         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  52     }                                                                                                    </span>
<span  style="">  53                                                                                                          </span>
<span class="5356786187885894695" onmouseenter="enter('5356786187885894695');" onmouseout="out('5356786187885894695');" style=""><abbr title="  54     protected Future&lt;Job.Result&gt; executeJobAsync(int jobId, @NonNull final Job.Result expected) throws InterruptedException {">  54     protected Future&lt;Job.Result&gt; executeJobAsync(int jobId, @NonNull final Job.Result expected) throws InðŸ”µ</abbr></span>
<span class="-4531912195970062533" onmouseenter="enter('-4531912195970062533');" onmouseout="out('-4531912195970062533');" style=""><abbr title="  55         final JobProxy.Common common = new JobProxy.Common(RuntimeEnvironment.application, TestCat.INSTANCE, jobId);">  55         final JobProxy.Common common = new JobProxy.Common(RuntimeEnvironment.application, TestCat.INSTANðŸ”µ</abbr></span>
<span  style="">  56                                                                                                          </span>
<span class="-4627548847837977961" onmouseenter="enter('-4627548847837977961');" onmouseout="out('-4627548847837977961');" style="">  57         final JobRequest pendingRequest = common.getPendingRequest(true, true);                          </span>
<span class="7202510908598887575" onmouseenter="enter('7202510908598887575');" onmouseout="out('7202510908598887575');" style="">  58         assertThat(pendingRequest).isNotNull();                                                          </span>
<span  style="">  59                                                                                                          </span>
<span class="5042951423647804645" onmouseenter="enter('5042951423647804645');" onmouseout="out('5042951423647804645');" style="">  60         final CountDownLatch latch = new CountDownLatch(1);                                              </span>
<span  style="">  61                                                                                                          </span>
<span class="2635305753175794172" onmouseenter="enter('2635305753175794172');" onmouseout="out('2635305753175794172');" style="">  62         ExecutorService executor = Executors.newSingleThreadExecutor();                                  </span>
<span class="-8461972367310688562" onmouseenter="enter('-8461972367310688562');" onmouseout="out('-8461972367310688562');" style="">  63         Future&lt;Job.Result&gt; future = executor.submit(new Callable&lt;Job.Result&gt;() {                         </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  64             @Override                                                                                    </span>
<span class="6323418417803688808" onmouseenter="enter('6323418417803688808');" onmouseout="out('6323418417803688808');" style="">  65             public Job.Result call() throws Exception {                                                  </span>
<span class="7598536375028459133" onmouseenter="enter('7598536375028459133');" onmouseout="out('7598536375028459133');" style="">  66 &lt;&lt;&lt;&lt;&lt;&lt;&lt; MINE                                                                                             </span>
<span class="-8640965941368400338" onmouseenter="enter('-8640965941368400338');" onmouseout="out('-8640965941368400338');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  67                 Job.Result result = common.executeJobRequest(pendingRequest, null);                      </span>
<span class="7991106586064342212" onmouseenter="enter('7991106586064342212');" onmouseout="out('7991106586064342212');" style="">  68 ||||||| BASE                                                                                             </span>
<span class="8335659116118205379" onmouseenter="enter('8335659116118205379');" onmouseout="out('8335659116118205379');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  69                 Job.Result result = common.executeJobRequest(pendingRequest);                            </span>
<span class="3211550930969970322" onmouseenter="enter('3211550930969970322');" onmouseout="out('3211550930969970322');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  70                 assertThat(result).isEqualTo(expected);                                                  </span>
<span class="-7832489766031398507" onmouseenter="enter('-7832489766031398507');" onmouseout="out('-7832489766031398507');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  71                 assertThat(common.getPendingRequest(true)).isNull();                                     </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  72                                                                                                          </span>
<span class="-6419540350677864751" onmouseenter="enter('-6419540350677864751');" onmouseout="out('-6419540350677864751');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  73                 return result;                                                                           </span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style="">  74 =======                                                                                                  </span>
<span class="3183550661158816211" onmouseenter="enter('3183550661158816211');" onmouseout="out('3183550661158816211');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  75                 latch.countDown();                                                                       </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  76                                                                                                          </span>
<span class="8335659116118205379" onmouseenter="enter('8335659116118205379');" onmouseout="out('8335659116118205379');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  77                 Job.Result result = common.executeJobRequest(pendingRequest);                            </span>
<span class="-5027112130205478640" onmouseenter="enter('-5027112130205478640');" onmouseout="out('-5027112130205478640');" style="">  78 &gt;&gt;&gt;&gt;&gt;&gt;&gt; YOURS                                                                                            </span>
<span class="3211550930969970322" onmouseenter="enter('3211550930969970322');" onmouseout="out('3211550930969970322');" style="">  79                 assertThat(result).isEqualTo(expected);                                                  </span>
<span class="-3489276174814696792" onmouseenter="enter('-3489276174814696792');" onmouseout="out('-3489276174814696792');" style="">  80                 assertThat(common.getPendingRequest(true, false)).isNull();                              </span>
<span  style="">  81                                                                                                          </span>
<span class="-6419540350677864751" onmouseenter="enter('-6419540350677864751');" onmouseout="out('-6419540350677864751');" style="">  82                 return result;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  83             }                                                                                            </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">  84         });                                                                                              </span>
<span  style="">  85                                                                                                          </span>
<span class="-8684416340857652984" onmouseenter="enter('-8684416340857652984');" onmouseout="out('-8684416340857652984');" style="">  86         // wait until the thread actually started                                                        </span>
<span class="-8285602508687969800" onmouseenter="enter('-8285602508687969800');" onmouseout="out('-8285602508687969800');" style="">  87         assertThat(latch.await(3, TimeUnit.SECONDS)).isTrue();                                           </span>
<span  style="">  88                                                                                                          </span>
<span class="6269622546247724580" onmouseenter="enter('6269622546247724580');" onmouseout="out('6269622546247724580');" style="">  89         executor.shutdown();                                                                             </span>
<span class="-3727521503813029761" onmouseenter="enter('-3727521503813029761');" onmouseout="out('-3727521503813029761');" style="">  90         return future;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  91     }                                                                                                    </span>
<span  style="">  92                                                                                                          </span>
<span class="-7862009256706509546" onmouseenter="enter('-7862009256706509546');" onmouseout="out('-7862009256706509546');" style="">  93     @SuppressWarnings(&quot;ResultOfMethodCallIgnored&quot;)                                                       </span>
<span class="-8422843367418453148" onmouseenter="enter('-8422843367418453148');" onmouseout="out('-8422843367418453148');" style="">  94     protected void resetJob(int jobId) {                                                                 </span>
<span class="379010517580817724" onmouseenter="enter('379010517580817724');" onmouseout="out('379010517580817724');" style="">  95         Job job = manager().getJob(jobId);                                                               </span>
<span class="6519543964694909858" onmouseenter="enter('6519543964694909858');" onmouseout="out('6519543964694909858');" style="">  96         if (job != null) {                                                                               </span>
<span class="-3131778183610600974" onmouseenter="enter('-3131778183610600974');" onmouseout="out('-3131778183610600974');" style="">  97             doReturn(-1L).when(job).getFinishedTimeStamp();                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  98         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  99     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 100 }                                                                                                        </span></pre></td>
                            <td><pre><span class="4675552543740820910" onmouseenter="enter('4675552543740820910');" onmouseout="out('4675552543740820910');" style="">   1 package com.evernote.android.job;                                                                        </span>
<span  style="">   2                                                                                                          </span>
<span class="5922045460006936195" onmouseenter="enter('5922045460006936195');" onmouseout="out('5922045460006936195');" style="">   3 import android.content.Context;                                                                          </span>
<span class="-2370850629707943459" onmouseenter="enter('-2370850629707943459');" onmouseout="out('-2370850629707943459');" style="">   4 import android.support.annotation.NonNull;                                                               </span>
<span class="8206801124109979883" onmouseenter="enter('8206801124109979883');" onmouseout="out('8206801124109979883');" style="">   5 import com.evernote.android.job.test.DummyJobs;                                                          </span>
<span class="-684547314634733644" onmouseenter="enter('-684547314634733644');" onmouseout="out('-684547314634733644');" style="">   6 import com.evernote.android.job.test.TestCat;                                                            </span>
<span class="5756358326409676048" onmouseenter="enter('5756358326409676048');" onmouseout="out('5756358326409676048');" style="">   7 import java.util.concurrent.Callable;                                                                    </span>
<span class="6937050046386248317" onmouseenter="enter('6937050046386248317');" onmouseout="out('6937050046386248317');" style="">   8 import java.util.concurrent.CountDownLatch;                                                              </span>
<span class="-5549638946827519456" onmouseenter="enter('-5549638946827519456');" onmouseout="out('-5549638946827519456');" style="">   9 import java.util.concurrent.ExecutorService;                                                             </span>
<span class="-3492814532060861089" onmouseenter="enter('-3492814532060861089');" onmouseout="out('-3492814532060861089');" style="">  10 import java.util.concurrent.Executors;                                                                   </span>
<span class="-331778695229620376" onmouseenter="enter('-331778695229620376');" onmouseout="out('-331778695229620376');" style="">  11 import java.util.concurrent.Future;                                                                      </span>
<span class="-6356287537734540725" onmouseenter="enter('-6356287537734540725');" onmouseout="out('-6356287537734540725');" style="">  12 import java.util.concurrent.TimeUnit;                                                                    </span>
<span class="-6532678185149257397" onmouseenter="enter('-6532678185149257397');" onmouseout="out('-6532678185149257397');" style="">  13 import org.junit.Rule;                                                                                   </span>
<span class="-1744873477108319775" onmouseenter="enter('-1744873477108319775');" onmouseout="out('-1744873477108319775');" style="">  14 import org.robolectric.RuntimeEnvironment;                                                               </span>
<span class="6917176970756584306" onmouseenter="enter('6917176970756584306');" onmouseout="out('6917176970756584306');" style="">  15 import static org.assertj.core.api.Java6Assertions.assertThat;                                           </span>
<span class="-4107578940953900427" onmouseenter="enter('-4107578940953900427');" onmouseout="out('-4107578940953900427');" style="">  16 import static org.mockito.Mockito.doReturn;                                                              </span>
<span  style="">  17                                                                                                          </span>
<span  style="">  18                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  19 /**                                                                                                      </span>
<span class="-2541210092808878866" onmouseenter="enter('-2541210092808878866');" onmouseout="out('-2541210092808878866');" style="">  20  * @author rwondratschek                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  21  */                                                                                                      </span>
<span class="-5429987873611314699" onmouseenter="enter('-5429987873611314699');" onmouseout="out('-5429987873611314699');" style="">  22 @SuppressWarnings(&quot;WeakerAccess&quot;)                                                                        </span>
<span class="2822289096070786615" onmouseenter="enter('2822289096070786615');" onmouseout="out('2822289096070786615');" style="">  23 public abstract class BaseJobManagerTest {                                                               </span>
<span class="8135638064131899359" onmouseenter="enter('8135638064131899359');" onmouseout="out('8135638064131899359');" style="">  24     @Rule                                                                                                </span>
<span class="-7620099840259404872" onmouseenter="enter('-7620099840259404872');" onmouseout="out('-7620099840259404872');" style="">  25     public final JobManagerRule mJobManagerRule = new JobManagerRule(provideJobCreator());               </span>
<span  style="">  26                                                                                                          </span>
<span class="5154748246392482767" onmouseenter="enter('5154748246392482767');" onmouseout="out('5154748246392482767');" style="">  27     @NonNull                                                                                             </span>
<span class="-3481073358792849306" onmouseenter="enter('-3481073358792849306');" onmouseout="out('-3481073358792849306');" style="">  28     protected JobCreator provideJobCreator() {                                                           </span>
<span class="2090639221351224620" onmouseenter="enter('2090639221351224620');" onmouseout="out('2090639221351224620');" style="">  29         return new DummyJobs.SpyableJobCreator(DummyJobs.TEST_JOB_CREATOR);                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  30     }                                                                                                    </span>
<span  style="">  31                                                                                                          </span>
<span class="5154748246392482767" onmouseenter="enter('5154748246392482767');" onmouseout="out('5154748246392482767');" style="">  32     @NonNull                                                                                             </span>
<span class="-8461498423334805377" onmouseenter="enter('-8461498423334805377');" onmouseout="out('-8461498423334805377');" style="">  33     protected final JobManager manager() {                                                               </span>
<span class="-4934591934771713765" onmouseenter="enter('-4934591934771713765');" onmouseout="out('-4934591934771713765');" style="">  34         return mJobManagerRule.getJobManager();                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  35     }                                                                                                    </span>
<span  style="">  36                                                                                                          </span>
<span class="5154748246392482767" onmouseenter="enter('5154748246392482767');" onmouseout="out('5154748246392482767');" style="">  37     @NonNull                                                                                             </span>
<span class="4705076756609404016" onmouseenter="enter('4705076756609404016');" onmouseout="out('4705076756609404016');" style="">  38     protected final Context context() {                                                                  </span>
<span class="-5151332642589857265" onmouseenter="enter('-5151332642589857265');" onmouseout="out('-5151332642589857265');" style="">  39         return RuntimeEnvironment.application;                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  40     }                                                                                                    </span>
<span  style="">  41                                                                                                          </span>
<span class="-8629963459932111198" onmouseenter="enter('-8629963459932111198');" onmouseout="out('-8629963459932111198');" style="">  42     protected void executeJob(int jobId, @NonNull                                                        </span>
<span class="8712707970796331211" onmouseenter="enter('8712707970796331211');" onmouseout="out('8712707970796331211');" style="">  43     Job.Result expected) {                                                                               </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">  44         try {                                                                                            </span>
<span class="-8412679080941427347" onmouseenter="enter('-8412679080941427347');" onmouseout="out('-8412679080941427347');" style="">  45             executeJobAsync(jobId, expected).get(3, TimeUnit.SECONDS);                                   </span>
<span class="-3589222456918676513" onmouseenter="enter('-3589222456918676513');" onmouseout="out('-3589222456918676513');" style="">  46         } catch (java.lang.Exception e) {                                                                </span>
<span class="5419707581571941542" onmouseenter="enter('5419707581571941542');" onmouseout="out('5419707581571941542');" style="">  47             throw new AssertionError(&quot;Job timeout&quot;);                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  48         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  49     }                                                                                                    </span>
<span  style="">  50                                                                                                          </span>
<span class="3677591053594626582" onmouseenter="enter('3677591053594626582');" onmouseout="out('3677591053594626582');" style="">  51     protected Future&lt;Job.Result&gt; executeJobAsync(int jobId, @NonNull                                     </span>
<span class="-5607610371732265339" onmouseenter="enter('-5607610371732265339');" onmouseout="out('-5607610371732265339');" style="">  52     final Job.Result expected) throws InterruptedException {                                             </span>
<span class="-4531912195970062533" onmouseenter="enter('-4531912195970062533');" onmouseout="out('-4531912195970062533');" style=""><abbr title="  53         final JobProxy.Common common = new JobProxy.Common(RuntimeEnvironment.application, TestCat.INSTANCE, jobId);">  53         final JobProxy.Common common = new JobProxy.Common(RuntimeEnvironment.application, TestCat.INSTANðŸ”µ</abbr></span>
<span class="-4627548847837977961" onmouseenter="enter('-4627548847837977961');" onmouseout="out('-4627548847837977961');" style="">  54         final JobRequest pendingRequest = common.getPendingRequest(true, true);                          </span>
<span class="7202510908598887575" onmouseenter="enter('7202510908598887575');" onmouseout="out('7202510908598887575');" style="">  55         assertThat(pendingRequest).isNotNull();                                                          </span>
<span class="5042951423647804645" onmouseenter="enter('5042951423647804645');" onmouseout="out('5042951423647804645');" style="">  56         final CountDownLatch latch = new CountDownLatch(1);                                              </span>
<span class="2635305753175794172" onmouseenter="enter('2635305753175794172');" onmouseout="out('2635305753175794172');" style="">  57         ExecutorService executor = Executors.newSingleThreadExecutor();                                  </span>
<span class="-8461972367310688562" onmouseenter="enter('-8461972367310688562');" onmouseout="out('-8461972367310688562');" style="">  58         Future&lt;Job.Result&gt; future = executor.submit(new Callable&lt;Job.Result&gt;() {                         </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  59             @Override                                                                                    </span>
<span class="6323418417803688808" onmouseenter="enter('6323418417803688808');" onmouseout="out('6323418417803688808');" style="">  60             public Job.Result call() throws Exception {                                                  </span>
<span class="3183550661158816211" onmouseenter="enter('3183550661158816211');" onmouseout="out('3183550661158816211');" style="">  61                 latch.countDown();                                                                       </span>
<span class="-8640965941368400338" onmouseenter="enter('-8640965941368400338');" onmouseout="out('-8640965941368400338');" style="">  62                 Job.Result result = common.executeJobRequest(pendingRequest, null);                      </span>
<span class="3211550930969970322" onmouseenter="enter('3211550930969970322');" onmouseout="out('3211550930969970322');" style="">  63                 assertThat(result).isEqualTo(expected);                                                  </span>
<span class="-3489276174814696792" onmouseenter="enter('-3489276174814696792');" onmouseout="out('-3489276174814696792');" style="">  64                 assertThat(common.getPendingRequest(true, false)).isNull();                              </span>
<span class="-6419540350677864751" onmouseenter="enter('-6419540350677864751');" onmouseout="out('-6419540350677864751');" style="">  65                 return result;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  66             }                                                                                            </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">  67         });                                                                                              </span>
<span class="-8684416340857652984" onmouseenter="enter('-8684416340857652984');" onmouseout="out('-8684416340857652984');" style="">  68         // wait until the thread actually started                                                        </span>
<span class="-8285602508687969800" onmouseenter="enter('-8285602508687969800');" onmouseout="out('-8285602508687969800');" style="">  69         assertThat(latch.await(3, TimeUnit.SECONDS)).isTrue();                                           </span>
<span class="6269622546247724580" onmouseenter="enter('6269622546247724580');" onmouseout="out('6269622546247724580');" style="">  70         executor.shutdown();                                                                             </span>
<span class="-3727521503813029761" onmouseenter="enter('-3727521503813029761');" onmouseout="out('-3727521503813029761');" style="">  71         return future;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  72     }                                                                                                    </span>
<span  style="">  73                                                                                                          </span>
<span class="-7862009256706509546" onmouseenter="enter('-7862009256706509546');" onmouseout="out('-7862009256706509546');" style="">  74     @SuppressWarnings(&quot;ResultOfMethodCallIgnored&quot;)                                                       </span>
<span class="-8422843367418453148" onmouseenter="enter('-8422843367418453148');" onmouseout="out('-8422843367418453148');" style="">  75     protected void resetJob(int jobId) {                                                                 </span>
<span class="379010517580817724" onmouseenter="enter('379010517580817724');" onmouseout="out('379010517580817724');" style="">  76         Job job = manager().getJob(jobId);                                                               </span>
<span class="6519543964694909858" onmouseenter="enter('6519543964694909858');" onmouseout="out('6519543964694909858');" style="">  77         if (job != null) {                                                                               </span>
<span class="-3131778183610600974" onmouseenter="enter('-3131778183610600974');" onmouseout="out('-3131778183610600974');" style="">  78             doReturn(-1L).when(job).getFinishedTimeStamp();                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  79         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  80     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  81 }                                                                                                        </span>

















</pre></td>
                        </tr>
                    </table>
                </div>
                <div id="bottom">
                    <table style="margin:auto">
                        <tr>
                            <th>ours vs. base</th>
                            <th>theirs vs. base</th>
                        </tr>
                        <tr>
                            <td><pre><span class="4675552543740820910" onmouseenter="enter('4675552543740820910');" onmouseout="out('4675552543740820910');" style="">   1  package com.evernote.android.job;                                                                                 </span>
<span  style="">   2                                                                                                                    </span>
<span class="5922045460006936195" onmouseenter="enter('5922045460006936195');" onmouseout="out('5922045460006936195');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">   3 +import android.content.Context;                                                                                   </span>
<span class="-2370850629707943459" onmouseenter="enter('-2370850629707943459');" onmouseout="out('-2370850629707943459');" style="">   4  import android.support.annotation.NonNull;                                                                        </span>
<span  style="">   5                                                                                                                    </span>
<span class="8206801124109979883" onmouseenter="enter('8206801124109979883');" onmouseout="out('8206801124109979883');" style="">   6  import com.evernote.android.job.test.DummyJobs;                                                                   </span>
<span class="-684547314634733644" onmouseenter="enter('-684547314634733644');" onmouseout="out('-684547314634733644');" style="">   7  import com.evernote.android.job.test.TestCat;                                                                     </span>
<span  style="">   8                                                                                                                    </span>
<span class="-6532678185149257397" onmouseenter="enter('-6532678185149257397');" onmouseout="out('-6532678185149257397');" style="">   9  import org.junit.Rule;                                                                                            </span>
<span class="-1744873477108319775" onmouseenter="enter('-1744873477108319775');" onmouseout="out('-1744873477108319775');" style="">  10  import org.robolectric.RuntimeEnvironment;                                                                        </span>
<span  style="">  11                                                                                                                    </span>
<span class="5756358326409676048" onmouseenter="enter('5756358326409676048');" onmouseout="out('5756358326409676048');" style="">  12  import java.util.concurrent.Callable;                                                                             </span>

<span class="-5549638946827519456" onmouseenter="enter('-5549638946827519456');" onmouseout="out('-5549638946827519456');" style="">  13  import java.util.concurrent.ExecutorService;                                                                      </span>
<span class="-3492814532060861089" onmouseenter="enter('-3492814532060861089');" onmouseout="out('-3492814532060861089');" style="">  14  import java.util.concurrent.Executors;                                                                            </span>
<span class="-331778695229620376" onmouseenter="enter('-331778695229620376');" onmouseout="out('-331778695229620376');" style="">  15  import java.util.concurrent.Future;                                                                               </span>
<span class="-6356287537734540725" onmouseenter="enter('-6356287537734540725');" onmouseout="out('-6356287537734540725');" style="">  16  import java.util.concurrent.TimeUnit;                                                                             </span>
<span  style="">  17                                                                                                                    </span>
<span class="6917176970756584306" onmouseenter="enter('6917176970756584306');" onmouseout="out('6917176970756584306');" style="">  18  import static org.assertj.core.api.Java6Assertions.assertThat;                                                    </span>
<span class="-4107578940953900427" onmouseenter="enter('-4107578940953900427');" onmouseout="out('-4107578940953900427');" style="">  19  import static org.mockito.Mockito.doReturn;                                                                       </span>
<span  style="">  20                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  21  /**                                                                                                               </span>
<span class="-2541210092808878866" onmouseenter="enter('-2541210092808878866');" onmouseout="out('-2541210092808878866');" style="">  22   * @author rwondratschek                                                                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  23   */                                                                                                               </span>
<span class="-5429987873611314699" onmouseenter="enter('-5429987873611314699');" onmouseout="out('-5429987873611314699');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  24 +@SuppressWarnings(&quot;WeakerAccess&quot;)                                                                                 </span>
<span class="2822289096070786615" onmouseenter="enter('2822289096070786615');" onmouseout="out('2822289096070786615');" style="">  25  public abstract class BaseJobManagerTest {                                                                        </span>
<span  style="">  26                                                                                                                    </span>
<span class="8135638064131899359" onmouseenter="enter('8135638064131899359');" onmouseout="out('8135638064131899359');" style="">  27      @Rule                                                                                                         </span>
<span class="-7620099840259404872" onmouseenter="enter('-7620099840259404872');" onmouseout="out('-7620099840259404872');" style="">  28      public final JobManagerRule mJobManagerRule = new JobManagerRule(provideJobCreator());                        </span>
<span  style="">  29                                                                                                                    </span>
<span class="5154748246392482767" onmouseenter="enter('5154748246392482767');" onmouseout="out('5154748246392482767');" style="">  30      @NonNull                                                                                                      </span>
<span class="-3481073358792849306" onmouseenter="enter('-3481073358792849306');" onmouseout="out('-3481073358792849306');" style="">  31      protected JobCreator provideJobCreator() {                                                                    </span>
<span class="2090639221351224620" onmouseenter="enter('2090639221351224620');" onmouseout="out('2090639221351224620');" style="">  32          return new DummyJobs.SpyableJobCreator(DummyJobs.TEST_JOB_CREATOR);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  33      }                                                                                                             </span>
<span  style="">  34                                                                                                                    </span>
<span class="5154748246392482767" onmouseenter="enter('5154748246392482767');" onmouseout="out('5154748246392482767');" style="">  35      @NonNull                                                                                                      </span>
<span class="-8461498423334805377" onmouseenter="enter('-8461498423334805377');" onmouseout="out('-8461498423334805377');" style="">  36      protected final JobManager manager() {                                                                        </span>
<span class="-4934591934771713765" onmouseenter="enter('-4934591934771713765');" onmouseout="out('-4934591934771713765');" style="">  37          return mJobManagerRule.getJobManager();                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  38      }                                                                                                             </span>
<span  style="">  39                                                                                                                    </span>
<span class="5154748246392482767" onmouseenter="enter('5154748246392482767');" onmouseout="out('5154748246392482767');" style="">  40      @NonNull                                                                                                      </span>
<span class="4705076756609404016" onmouseenter="enter('4705076756609404016');" onmouseout="out('4705076756609404016');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  41 +    protected final Context context() {                                                                           </span>
<span class="-5151332642589857265" onmouseenter="enter('-5151332642589857265');" onmouseout="out('-5151332642589857265');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  42 +        return RuntimeEnvironment.application;                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  43 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  44 +                                                                                                                  </span>
<span class="-3751297365101898096" onmouseenter="enter('-3751297365101898096');" onmouseout="out('-3751297365101898096');" style="">  45      protected void executeJob(int jobId, @NonNull Job.Result expected) {                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">  46          try {                                                                                                     </span>
<span class="-8412679080941427347" onmouseenter="enter('-8412679080941427347');" onmouseout="out('-8412679080941427347');" style="">  47              executeJobAsync(jobId, expected).get(3, TimeUnit.SECONDS);                                            </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">  48          } catch (Exception e) {                                                                                   </span>
<span class="5419707581571941542" onmouseenter="enter('5419707581571941542');" onmouseout="out('5419707581571941542');" style="">  49              throw new AssertionError(&quot;Job timeout&quot;);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  50          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  51      }                                                                                                             </span>
<span  style="">  52                                                                                                                    </span>
<span class="2304412785554196693" onmouseenter="enter('2304412785554196693');" onmouseout="out('2304412785554196693');" style="">  53      protected Future&lt;Job.Result&gt; executeJobAsync(int jobId, @NonNull final Job.Result expected) {                 </span>

<span class="-4531912195970062533" onmouseenter="enter('-4531912195970062533');" onmouseout="out('-4531912195970062533');" style=""><abbr title="  54          final JobProxy.Common common = new JobProxy.Common(RuntimeEnvironment.application, TestCat.INSTANCE, jobId);">  54          final JobProxy.Common common = new JobProxy.Common(RuntimeEnvironment.application, TestCat.INSTANCE, jobIdðŸ”µ</abbr></span>
<span  style="">  55                                                                                                                    </span>
<span class="986730286289344647" onmouseenter="enter('986730286289344647');" onmouseout="out('986730286289344647');" style="">  56          final JobRequest pendingRequest = common.getPendingRequest(true);                                         </span>

<span class="7202510908598887575" onmouseenter="enter('7202510908598887575');" onmouseout="out('7202510908598887575');" style="">  57          assertThat(pendingRequest).isNotNull();                                                                   </span>


<span  style="">  58                                                                                                                    </span>
<span class="2635305753175794172" onmouseenter="enter('2635305753175794172');" onmouseout="out('2635305753175794172');" style="">  59          ExecutorService executor = Executors.newSingleThreadExecutor();                                           </span>
<span class="-8461972367310688562" onmouseenter="enter('-8461972367310688562');" onmouseout="out('-8461972367310688562');" style="">  60          Future&lt;Job.Result&gt; future = executor.submit(new Callable&lt;Job.Result&gt;() {                                  </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  61              @Override                                                                                             </span>
<span class="6323418417803688808" onmouseenter="enter('6323418417803688808');" onmouseout="out('6323418417803688808');" style="">  62              public Job.Result call() throws Exception {                                                           </span>


<span class="8335659116118205379" onmouseenter="enter('8335659116118205379');" onmouseout="out('8335659116118205379');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  63 -                Job.Result result = common.executeJobRequest(pendingRequest);                                     </span>
<span class="-8640965941368400338" onmouseenter="enter('-8640965941368400338');" onmouseout="out('-8640965941368400338');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  64 +                Job.Result result = common.executeJobRequest(pendingRequest, null);                               </span>
<span class="3211550930969970322" onmouseenter="enter('3211550930969970322');" onmouseout="out('3211550930969970322');" style="">  65                  assertThat(result).isEqualTo(expected);                                                           </span>
<span class="-7832489766031398507" onmouseenter="enter('-7832489766031398507');" onmouseout="out('-7832489766031398507');" style="">  66                  assertThat(common.getPendingRequest(true)).isNull();                                              </span>

<span  style="">  67                                                                                                                    </span>
<span class="-6419540350677864751" onmouseenter="enter('-6419540350677864751');" onmouseout="out('-6419540350677864751');" style="">  68                  return result;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  69              }                                                                                                     </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">  70          });                                                                                                       </span>



<span  style="">  71                                                                                                                    </span>
<span class="6269622546247724580" onmouseenter="enter('6269622546247724580');" onmouseout="out('6269622546247724580');" style="">  72          executor.shutdown();                                                                                      </span>
<span class="-3727521503813029761" onmouseenter="enter('-3727521503813029761');" onmouseout="out('-3727521503813029761');" style="">  73          return future;                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  74      }                                                                                                             </span>
<span  style="">  75                                                                                                                    </span>
<span class="-7862009256706509546" onmouseenter="enter('-7862009256706509546');" onmouseout="out('-7862009256706509546');" style="">  76      @SuppressWarnings(&quot;ResultOfMethodCallIgnored&quot;)                                                                </span>
<span class="-8422843367418453148" onmouseenter="enter('-8422843367418453148');" onmouseout="out('-8422843367418453148');" style="">  77      protected void resetJob(int jobId) {                                                                          </span>
<span class="379010517580817724" onmouseenter="enter('379010517580817724');" onmouseout="out('379010517580817724');" style="">  78          Job job = manager().getJob(jobId);                                                                        </span>
<span class="6519543964694909858" onmouseenter="enter('6519543964694909858');" onmouseout="out('6519543964694909858');" style="">  79          if (job != null) {                                                                                        </span>
<span class="-3131778183610600974" onmouseenter="enter('-3131778183610600974');" onmouseout="out('-3131778183610600974');" style="">  80              doReturn(-1L).when(job).getFinishedTimeStamp();                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  81          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  82      }                                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  83  }                                                                                                                 </span></pre></td>
                            <td><pre><span class="4675552543740820910" onmouseenter="enter('4675552543740820910');" onmouseout="out('4675552543740820910');" style="">   1  package com.evernote.android.job;                                                                                 </span>
<span  style="">   2                                                                                                                    </span>

<span class="-2370850629707943459" onmouseenter="enter('-2370850629707943459');" onmouseout="out('-2370850629707943459');" style="">   3  import android.support.annotation.NonNull;                                                                        </span>
<span  style="">   4                                                                                                                    </span>
<span class="8206801124109979883" onmouseenter="enter('8206801124109979883');" onmouseout="out('8206801124109979883');" style="">   5  import com.evernote.android.job.test.DummyJobs;                                                                   </span>
<span class="-684547314634733644" onmouseenter="enter('-684547314634733644');" onmouseout="out('-684547314634733644');" style="">   6  import com.evernote.android.job.test.TestCat;                                                                     </span>
<span  style="">   7                                                                                                                    </span>
<span class="-6532678185149257397" onmouseenter="enter('-6532678185149257397');" onmouseout="out('-6532678185149257397');" style="">   8  import org.junit.Rule;                                                                                            </span>
<span class="-1744873477108319775" onmouseenter="enter('-1744873477108319775');" onmouseout="out('-1744873477108319775');" style="">   9  import org.robolectric.RuntimeEnvironment;                                                                        </span>
<span  style="">  10                                                                                                                    </span>
<span class="5756358326409676048" onmouseenter="enter('5756358326409676048');" onmouseout="out('5756358326409676048');" style="">  11  import java.util.concurrent.Callable;                                                                             </span>
<span class="6937050046386248317" onmouseenter="enter('6937050046386248317');" onmouseout="out('6937050046386248317');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  12 +import java.util.concurrent.CountDownLatch;                                                                       </span>
<span class="-5549638946827519456" onmouseenter="enter('-5549638946827519456');" onmouseout="out('-5549638946827519456');" style="">  13  import java.util.concurrent.ExecutorService;                                                                      </span>
<span class="-3492814532060861089" onmouseenter="enter('-3492814532060861089');" onmouseout="out('-3492814532060861089');" style="">  14  import java.util.concurrent.Executors;                                                                            </span>
<span class="-331778695229620376" onmouseenter="enter('-331778695229620376');" onmouseout="out('-331778695229620376');" style="">  15  import java.util.concurrent.Future;                                                                               </span>
<span class="-6356287537734540725" onmouseenter="enter('-6356287537734540725');" onmouseout="out('-6356287537734540725');" style="">  16  import java.util.concurrent.TimeUnit;                                                                             </span>
<span  style="">  17                                                                                                                    </span>
<span class="6917176970756584306" onmouseenter="enter('6917176970756584306');" onmouseout="out('6917176970756584306');" style="">  18  import static org.assertj.core.api.Java6Assertions.assertThat;                                                    </span>
<span class="-4107578940953900427" onmouseenter="enter('-4107578940953900427');" onmouseout="out('-4107578940953900427');" style="">  19  import static org.mockito.Mockito.doReturn;                                                                       </span>
<span  style="">  20                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  21  /**                                                                                                               </span>
<span class="-2541210092808878866" onmouseenter="enter('-2541210092808878866');" onmouseout="out('-2541210092808878866');" style="">  22   * @author rwondratschek                                                                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  23   */                                                                                                               </span>

<span class="2822289096070786615" onmouseenter="enter('2822289096070786615');" onmouseout="out('2822289096070786615');" style="">  24  public abstract class BaseJobManagerTest {                                                                        </span>
<span  style="">  25                                                                                                                    </span>
<span class="8135638064131899359" onmouseenter="enter('8135638064131899359');" onmouseout="out('8135638064131899359');" style="">  26      @Rule                                                                                                         </span>
<span class="-7620099840259404872" onmouseenter="enter('-7620099840259404872');" onmouseout="out('-7620099840259404872');" style="">  27      public final JobManagerRule mJobManagerRule = new JobManagerRule(provideJobCreator());                        </span>
<span  style="">  28                                                                                                                    </span>
<span class="5154748246392482767" onmouseenter="enter('5154748246392482767');" onmouseout="out('5154748246392482767');" style="">  29      @NonNull                                                                                                      </span>
<span class="-3481073358792849306" onmouseenter="enter('-3481073358792849306');" onmouseout="out('-3481073358792849306');" style="">  30      protected JobCreator provideJobCreator() {                                                                    </span>
<span class="2090639221351224620" onmouseenter="enter('2090639221351224620');" onmouseout="out('2090639221351224620');" style="">  31          return new DummyJobs.SpyableJobCreator(DummyJobs.TEST_JOB_CREATOR);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  32      }                                                                                                             </span>
<span  style="">  33                                                                                                                    </span>
<span class="5154748246392482767" onmouseenter="enter('5154748246392482767');" onmouseout="out('5154748246392482767');" style="">  34      @NonNull                                                                                                      </span>
<span class="-8461498423334805377" onmouseenter="enter('-8461498423334805377');" onmouseout="out('-8461498423334805377');" style="">  35      protected final JobManager manager() {                                                                        </span>
<span class="-4934591934771713765" onmouseenter="enter('-4934591934771713765');" onmouseout="out('-4934591934771713765');" style="">  36          return mJobManagerRule.getJobManager();                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  37      }                                                                                                             </span>
<span  style="">  38                                                                                                                    </span>
<span class="5154748246392482767" onmouseenter="enter('5154748246392482767');" onmouseout="out('5154748246392482767');" style="">  39      @NonNull                                                                                                      </span>




<span class="-3751297365101898096" onmouseenter="enter('-3751297365101898096');" onmouseout="out('-3751297365101898096');" style="">  40      protected void executeJob(int jobId, @NonNull Job.Result expected) {                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">  41          try {                                                                                                     </span>
<span class="-8412679080941427347" onmouseenter="enter('-8412679080941427347');" onmouseout="out('-8412679080941427347');" style="">  42              executeJobAsync(jobId, expected).get(3, TimeUnit.SECONDS);                                            </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">  43          } catch (Exception e) {                                                                                   </span>
<span class="5419707581571941542" onmouseenter="enter('5419707581571941542');" onmouseout="out('5419707581571941542');" style="">  44              throw new AssertionError(&quot;Job timeout&quot;);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  45          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  46      }                                                                                                             </span>
<span  style="">  47                                                                                                                    </span>
<span class="2304412785554196693" onmouseenter="enter('2304412785554196693');" onmouseout="out('2304412785554196693');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  48 -    protected Future&lt;Job.Result&gt; executeJobAsync(int jobId, @NonNull final Job.Result expected) {                 </span>
<span class="5356786187885894695" onmouseenter="enter('5356786187885894695');" onmouseout="out('5356786187885894695');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"><abbr title="  49 +    protected Future&lt;Job.Result&gt; executeJobAsync(int jobId, @NonNull final Job.Result expected) throws InterruptedException {">  49 +    protected Future&lt;Job.Result&gt; executeJobAsync(int jobId, @NonNull final Job.Result expected) throws InterruptedðŸ”µ</abbr></span>
<span class="-4531912195970062533" onmouseenter="enter('-4531912195970062533');" onmouseout="out('-4531912195970062533');" style=""><abbr title="  50          final JobProxy.Common common = new JobProxy.Common(RuntimeEnvironment.application, TestCat.INSTANCE, jobId);">  50          final JobProxy.Common common = new JobProxy.Common(RuntimeEnvironment.application, TestCat.INSTANCE, jobIdðŸ”µ</abbr></span>
<span  style="">  51                                                                                                                    </span>
<span class="986730286289344647" onmouseenter="enter('986730286289344647');" onmouseout="out('986730286289344647');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  52 -        final JobRequest pendingRequest = common.getPendingRequest(true);                                         </span>
<span class="-4627548847837977961" onmouseenter="enter('-4627548847837977961');" onmouseout="out('-4627548847837977961');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  53 +        final JobRequest pendingRequest = common.getPendingRequest(true, true);                                   </span>
<span class="7202510908598887575" onmouseenter="enter('7202510908598887575');" onmouseout="out('7202510908598887575');" style="">  54          assertThat(pendingRequest).isNotNull();                                                                   </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  55 +                                                                                                                  </span>
<span class="5042951423647804645" onmouseenter="enter('5042951423647804645');" onmouseout="out('5042951423647804645');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  56 +        final CountDownLatch latch = new CountDownLatch(1);                                                       </span>
<span  style="">  57                                                                                                                    </span>
<span class="2635305753175794172" onmouseenter="enter('2635305753175794172');" onmouseout="out('2635305753175794172');" style="">  58          ExecutorService executor = Executors.newSingleThreadExecutor();                                           </span>
<span class="-8461972367310688562" onmouseenter="enter('-8461972367310688562');" onmouseout="out('-8461972367310688562');" style="">  59          Future&lt;Job.Result&gt; future = executor.submit(new Callable&lt;Job.Result&gt;() {                                  </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  60              @Override                                                                                             </span>
<span class="6323418417803688808" onmouseenter="enter('6323418417803688808');" onmouseout="out('6323418417803688808');" style="">  61              public Job.Result call() throws Exception {                                                           </span>
<span class="3183550661158816211" onmouseenter="enter('3183550661158816211');" onmouseout="out('3183550661158816211');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  62 +                latch.countDown();                                                                                </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  63 +                                                                                                                  </span>
<span class="8335659116118205379" onmouseenter="enter('8335659116118205379');" onmouseout="out('8335659116118205379');" style="">  64                  Job.Result result = common.executeJobRequest(pendingRequest);                                     </span>

<span class="3211550930969970322" onmouseenter="enter('3211550930969970322');" onmouseout="out('3211550930969970322');" style="">  65                  assertThat(result).isEqualTo(expected);                                                           </span>
<span class="-7832489766031398507" onmouseenter="enter('-7832489766031398507');" onmouseout="out('-7832489766031398507');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  66 -                assertThat(common.getPendingRequest(true)).isNull();                                              </span>
<span class="-3489276174814696792" onmouseenter="enter('-3489276174814696792');" onmouseout="out('-3489276174814696792');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  67 +                assertThat(common.getPendingRequest(true, false)).isNull();                                       </span>
<span  style="">  68                                                                                                                    </span>
<span class="-6419540350677864751" onmouseenter="enter('-6419540350677864751');" onmouseout="out('-6419540350677864751');" style="">  69                  return result;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  70              }                                                                                                     </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">  71          });                                                                                                       </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  72 +                                                                                                                  </span>
<span class="-8684416340857652984" onmouseenter="enter('-8684416340857652984');" onmouseout="out('-8684416340857652984');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  73 +        // wait until the thread actually started                                                                 </span>
<span class="-8285602508687969800" onmouseenter="enter('-8285602508687969800');" onmouseout="out('-8285602508687969800');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  74 +        assertThat(latch.await(3, TimeUnit.SECONDS)).isTrue();                                                    </span>
<span  style="">  75                                                                                                                    </span>
<span class="6269622546247724580" onmouseenter="enter('6269622546247724580');" onmouseout="out('6269622546247724580');" style="">  76          executor.shutdown();                                                                                      </span>
<span class="-3727521503813029761" onmouseenter="enter('-3727521503813029761');" onmouseout="out('-3727521503813029761');" style="">  77          return future;                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  78      }                                                                                                             </span>
<span  style="">  79                                                                                                                    </span>
<span class="-7862009256706509546" onmouseenter="enter('-7862009256706509546');" onmouseout="out('-7862009256706509546');" style="">  80      @SuppressWarnings(&quot;ResultOfMethodCallIgnored&quot;)                                                                </span>
<span class="-8422843367418453148" onmouseenter="enter('-8422843367418453148');" onmouseout="out('-8422843367418453148');" style="">  81      protected void resetJob(int jobId) {                                                                          </span>
<span class="379010517580817724" onmouseenter="enter('379010517580817724');" onmouseout="out('379010517580817724');" style="">  82          Job job = manager().getJob(jobId);                                                                        </span>
<span class="6519543964694909858" onmouseenter="enter('6519543964694909858');" onmouseout="out('6519543964694909858');" style="">  83          if (job != null) {                                                                                        </span>
<span class="-3131778183610600974" onmouseenter="enter('-3131778183610600974');" onmouseout="out('-3131778183610600974');" style="">  84              doReturn(-1L).when(job).getFinishedTimeStamp();                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  85          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  86      }                                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  87  }                                                                                                                 </span></pre></td>
                        </tr>
                    </table>
                </div>
              </body>
            </html>
            