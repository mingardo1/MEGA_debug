<!DOCTYPE html>
<html lang="en">
          <head>
            <meta charset="utf-8">
            <title>41 chunks</title>
                <style>
                    #top {
                        height: 48vh;
                        overflow-y: auto;
                    }
                    #bottom {
                        height: 48vh;
                        overflow-y: auto;
                    }
                </style>
          </head>
          <body>
            <pre>[[{&#x27;eq&#x27;: [{&#x27;CHUNK_OURS&#x27;: &#x27;&#x27;,
           &#x27;CHUNK_THEIRS&#x27;: &#x27;package au.com.ds.ef;\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;import au.com.ds.ef.call.EventHandler;\n&#x27;
                           &#x27;import au.com.ds.ef.err.DefinitionError;\n&#x27;
                           &#x27;import au.com.ds.ef.err.ExecutionError;\n&#x27;
                           &#x27;import au.com.ds.ef.err.LogicViolationError;\n&#x27;
                           &#x27;import org.slf4j.Logger;\n&#x27;
                           &#x27;import org.slf4j.LoggerFactory;\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;import java.util.HashMap;\n&#x27;
                           &#x27;import java.util.Map;\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;public class Event&lt;C extends StatefulContext&gt; {\n&#x27;
                           &#x27;\tprivate static long idCounter = 1;\n&#x27;
                           &#x27;\tprivate static Logger log = &#x27;
                           &#x27;LoggerFactory.getLogger(Event.class);\n&#x27;
                           &#x27;\t\n&#x27;
                           &#x27;\tprivate String id;\n&#x27;
                           &#x27;    private Map&lt;State&lt;C&gt;, State&lt;C&gt;&gt; transitions = &#x27;
                           &#x27;new HashMap&lt;State&lt;C&gt;, State&lt;C&gt;&gt;();\n&#x27;
                           &#x27;\tprivate EasyFlow&lt;C&gt; runner;\n&#x27;
                           &#x27;    private boolean ignoreOutOfState = false;\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;\tprivate EventHandler&lt;C&gt; onTriggeredHandler;\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;\tpublic Event() {\n&#x27;
                           &#x27;\t\tthis.id = &quot;Event_&quot; + (idCounter++);\n&#x27;
                           &#x27;\t}\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;\tpublic Event(String id) {\n&#x27;
                           &#x27;\t\tthis.id = id;\n&#x27;
                           &#x27;\t}\n&#x27;
                           &#x27;\t\n&#x27;
                           &#x27;\tpublic TransitionBuilder&lt;C&gt; to(State&lt;C&gt; stateTo) &#x27;
                           &#x27;{\n&#x27;
                           &#x27;\t\treturn new TransitionBuilder&lt;C&gt;(this, &#x27;
                           &#x27;stateTo);\n&#x27;
                           &#x27;\t}\n&#x27;
                           &#x27;\t\n&#x27;
                           &#x27;\tpublic TransitionBuilder&lt;C&gt; finish(State&lt;C&gt; &#x27;
                           &#x27;stateTo) {\n&#x27;
                           &#x27;\t\tstateTo.setFinal(true);\n&#x27;
                           &#x27;\t\treturn new TransitionBuilder&lt;C&gt;(this, &#x27;
                           &#x27;stateTo);\n&#x27;
                           &#x27;\t}\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;\tpublic Event&lt;C&gt; whenTriggered(EventHandler&lt;C&gt; &#x27;
                           &#x27;onTriggered) {\n&#x27;
                           &#x27;        onTriggeredHandler = onTriggered;\n&#x27;
                           &#x27;\t\treturn this;\n&#x27;
                           &#x27;\t}\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    public Event&lt;C&gt; ignoreOutOfState() {\n&#x27;
                           &#x27;        ignoreOutOfState = true;\n&#x27;
                           &#x27;        return this;\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    public void trigger(final C context) {\n&#x27;
                           &#x27;        if (runner.isTrace())\n&#x27;
                           &#x27;\t\t    log.debug(&quot;trigger {} for {}&quot;, this, &#x27;
                           &#x27;context);\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;\t\tif (context.isTerminated()) {\n&#x27;
                           &#x27;\t\t\treturn;\n&#x27;
                           &#x27;\t\t}\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;\t\trunner.execute(new Runnable() {\n&#x27;
                           &#x27;\t\t\t@Override\n&#x27;
                           &#x27;\t\t\tpublic void run() {\n&#x27;
                           &#x27;                State&lt;C&gt; stateFrom = &#x27;
                           &#x27;context.getState();\n&#x27;
                           &#x27;                State&lt;C&gt; stateTo = &#x27;
                           &#x27;transitions.get(stateFrom);\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;\t\t\t\ttry {\n&#x27;
                           &#x27;                    if (stateTo == null) {\n&#x27;
                           &#x27;                        if (!ignoreOutOfState)\n&#x27;
                           &#x27;                            throw new &#x27;
                           &#x27;LogicViolationError(&quot;Invalid Event: &quot; + &#x27;
                           &#x27;Event.this.toString() +\n&#x27;
                           &#x27;                                &quot; triggered while &#x27;
                           &#x27;in State: &quot; + context.getState() + &quot; for &quot; + &#x27;
                           &#x27;context);\n&#x27;
                           &#x27;                    } else {\n&#x27;
                           &#x27;                        callOnTriggered(context, &#x27;
                           &#x27;stateFrom, stateTo);\n&#x27;
                           &#x27;                        &#x27;
                           &#x27;runner.callOnEventTriggered(Event.this, stateFrom, &#x27;
                           &#x27;stateTo, context);\n&#x27;
                           &#x27;                        &#x27;
                           &#x27;runner.setCurrentState(stateTo, context);\n&#x27;
                           &#x27;                    }\n&#x27;
                           &#x27;\t\t\t\t} catch (Exception e) {\n&#x27;
                           &#x27;\t\t\t\t\trunner.callOnError(new &#x27;
                           &#x27;ExecutionError(stateFrom, Event.this, e,\n&#x27;
                           &#x27;\t\t\t\t\t\t\t&quot;Execution Error in &#x27;
                           &#x27;[Event.trigger]&quot;, context));\t\t\t\t\t\n&#x27;
                           &#x27;\t\t\t\t}\n&#x27;
                           &#x27;\t\t\t}\n&#x27;
                           &#x27;\t\t});\n&#x27;
                           &#x27;\t}\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    protected void addTransition(State&lt;C&gt; from, &#x27;
                           &#x27;State&lt;C&gt; to) {\n&#x27;
                           &#x27;        State&lt;C&gt; existingTransitionState = &#x27;
                           &#x27;transitions.get(from);\n&#x27;
                           &#x27;        if (existingTransitionState != null) {\n&#x27;
                           &#x27;            if (existingTransitionState == to) {\n&#x27;
                           &#x27;                throw new &#x27;
                           &#x27;DefinitionError(&quot;Duplicate transition[&quot; + this + &#x27;
                           &#x27;&quot;] from &quot; + from + &quot; to &quot; + to);\n&#x27;
                           &#x27;            } else {\n&#x27;
                           &#x27;                throw new &#x27;
                           &#x27;DefinitionError(&quot;Ambiguous transition[&quot; + this + &#x27;
                           &#x27;&quot;] from &quot; + from + &quot; to &quot; + to + &quot; and &quot; +\n&#x27;
                           &#x27;                    existingTransitionState);\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;            }\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;        transitions.put(from, to);\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;\tprotected void setFlowRunner(EasyFlow&lt;C&gt; runner) &#x27;
                           &#x27;{\n&#x27;
                           &#x27;\t\tthis.runner = runner;\n&#x27;
                           &#x27;\t}\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    private void callOnTriggered(C context, &#x27;
                           &#x27;State&lt;C&gt; from, State&lt;C&gt; to) throws Exception {\n&#x27;
                           &#x27;        if (onTriggeredHandler != null) {\n&#x27;
                           &#x27;            onTriggeredHandler.call(Event.this, &#x27;
                           &#x27;from, to, context);\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;\t@Override\n&#x27;
                           &#x27;\tpublic String toString() {\n&#x27;
                           &#x27;\t\treturn id;\n&#x27;
                           &#x27;\t}\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;\t@Override\n&#x27;
                           &#x27;\tpublic int hashCode() {\n&#x27;
                           &#x27;\t\tfinal int prime = 31;\n&#x27;
                           &#x27;\t\tint result = 1;\n&#x27;
                           &#x27;\t\tresult = prime * result + ((id == null) ? 0 : &#x27;
                           &#x27;id.hashCode());\n&#x27;
                           &#x27;\t\treturn result;\n&#x27;
                           &#x27;\t}\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;\t@SuppressWarnings(&quot;unchecked&quot;)\n&#x27;
                           &#x27;\t@Override\n&#x27;
                           &#x27;\tpublic boolean equals(Object obj) {\n&#x27;
                           &#x27;\t\tif (this == obj)\n&#x27;
                           &#x27;\t\t\treturn true;\n&#x27;
                           &#x27;\t\tif (obj == null)\n&#x27;
                           &#x27;\t\t\treturn false;\n&#x27;
                           &#x27;\t\tif (getClass() != obj.getClass())\n&#x27;
                           &#x27;\t\t\treturn false;\n&#x27;
                           &#x27;\t\tEvent&lt;C&gt; other = (Event&lt;C&gt;) obj;\n&#x27;
                           &#x27;\t\tif (id == null) {\n&#x27;
                           &#x27;\t\t\tif (other.id != null)\n&#x27;
                           &#x27;\t\t\t\treturn false;\n&#x27;
                           &#x27;\t\t} else if (!id.equals(other.id))\n&#x27;
                           &#x27;\t\t\treturn false;\n&#x27;
                           &#x27;\t\treturn true;\n&#x27;
                           &#x27;\t}\n&#x27;
                           &#x27;}\n&#x27;},
          {&#x27;CHUNK_OURS&#x27;: &#x27;&#x27;,
           &#x27;CHUNK_THEIRS&#x27;: &#x27;package au.com.ds.ef;\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;import au.com.ds.ef.call.EventHandler;\n&#x27;
                           &#x27;import au.com.ds.ef.err.DefinitionError;\n&#x27;
                           &#x27;import au.com.ds.ef.err.ExecutionError;\n&#x27;
                           &#x27;import au.com.ds.ef.err.LogicViolationError;\n&#x27;
                           &#x27;import org.slf4j.Logger;\n&#x27;
                           &#x27;import org.slf4j.LoggerFactory;\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;import java.util.HashMap;\n&#x27;
                           &#x27;import java.util.Map;\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;public class Event&lt;C extends StatefulContext&gt; {\n&#x27;
                           &#x27;\tprivate static long idCounter = 1;\n&#x27;
                           &#x27;\tprivate static Logger log = &#x27;
                           &#x27;LoggerFactory.getLogger(Event.class);\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;\tprivate String id;\n&#x27;
                           &#x27;    private Map&lt;State&lt;C&gt;, State&lt;C&gt;&gt; transitions = &#x27;
                           &#x27;new HashMap&lt;State&lt;C&gt;, State&lt;C&gt;&gt;();\n&#x27;
                           &#x27;\tprivate EasyFlow&lt;C&gt; runner;\n&#x27;
                           &#x27;    private boolean ignoreOutOfState = false;\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;\tprivate EventHandler&lt;C&gt; onTriggeredHandler;\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;\tpublic Event() {\n&#x27;
                           &#x27;\t\tthis.id = &quot;Event_&quot; + (idCounter++);\n&#x27;
                           &#x27;\t}\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;\tpublic Event(String id) {\n&#x27;
                           &#x27;\t\tthis.id = id;\n&#x27;
                           &#x27;\t}\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;\tpublic TransitionBuilder&lt;C&gt; to(State&lt;C&gt; stateTo) &#x27;
                           &#x27;{\n&#x27;
                           &#x27;\t\treturn new TransitionBuilder&lt;C&gt;(this, &#x27;
                           &#x27;stateTo);\n&#x27;
                           &#x27;\t}\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;\tpublic TransitionBuilder&lt;C&gt; finish(State&lt;C&gt; &#x27;
                           &#x27;stateTo) {\n&#x27;
                           &#x27;\t\tstateTo.setFinal(true);\n&#x27;
                           &#x27;\t\treturn new TransitionBuilder&lt;C&gt;(this, &#x27;
                           &#x27;stateTo);\n&#x27;
                           &#x27;\t}\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;\tpublic Event&lt;C&gt; whenTriggered(EventHandler&lt;C&gt; &#x27;
                           &#x27;onTriggered) {\n&#x27;
                           &#x27;        onTriggeredHandler = onTriggered;\n&#x27;
                           &#x27;\t\treturn this;\n&#x27;
                           &#x27;\t}\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    public Event&lt;C&gt; ignoreOutOfState() {\n&#x27;
                           &#x27;        ignoreOutOfState = true;\n&#x27;
                           &#x27;        return this;\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    public void trigger(final C context) {\n&#x27;
                           &#x27;        if (runner.isTrace())\n&#x27;
                           &#x27;\t\t    log.debug(&quot;trigger {} for {}&quot;, this, &#x27;
                           &#x27;context);\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;\t\tif (context.isTerminated()) {\n&#x27;
                           &#x27;\t\t\treturn;\n&#x27;
                           &#x27;\t\t}\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;\t\trunner.execute(new Runnable() {\n&#x27;
                           &#x27;\t\t\t@Override\n&#x27;
                           &#x27;\t\t\tpublic void run() {\n&#x27;
                           &#x27;                State&lt;C&gt; stateFrom = &#x27;
                           &#x27;context.getState();\n&#x27;
                           &#x27;                State&lt;C&gt; stateTo = &#x27;
                           &#x27;transitions.get(stateFrom);\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;\t\t\t\ttry {\n&#x27;
                           &#x27;                    if (stateTo == null) {\n&#x27;
                           &#x27;                        if (!ignoreOutOfState)\n&#x27;
                           &#x27;                            throw new &#x27;
                           &#x27;LogicViolationError(&quot;Invalid Event: &quot; + &#x27;
                           &#x27;Event.this.toString() +\n&#x27;
                           &#x27;                                &quot; triggered while &#x27;
                           &#x27;in State: &quot; + context.getState() + &quot; for &quot; + &#x27;
                           &#x27;context);\n&#x27;
                           &#x27;                    } else {\n&#x27;
                           &#x27;                        callOnTriggered(context, &#x27;
                           &#x27;stateFrom, stateTo);\n&#x27;
                           &#x27;                        &#x27;
                           &#x27;runner.callOnEventTriggered(Event.this, stateFrom, &#x27;
                           &#x27;stateTo, context);\n&#x27;
                           &#x27;                        &#x27;
                           &#x27;runner.setCurrentState(stateTo, context);\n&#x27;
                           &#x27;                    }\n&#x27;
                           &#x27;\t\t\t\t} catch (Exception e) {\n&#x27;
                           &#x27;\t\t\t\t\trunner.callOnError(new &#x27;
                           &#x27;ExecutionError(stateFrom, Event.this, e,\n&#x27;
                           &#x27;\t\t\t\t\t\t\t&quot;Execution Error in &#x27;
                           &#x27;[Event.trigger]&quot;, context));\n&#x27;
                           &#x27;\t\t\t\t}\n&#x27;
                           &#x27;\t\t\t}\n&#x27;
                           &#x27;\t\t});\n&#x27;
                           &#x27;\t}\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    protected void addTransition(State&lt;C&gt; from, &#x27;
                           &#x27;State&lt;C&gt; to) {\n&#x27;
                           &#x27;        State&lt;C&gt; existingTransitionState = &#x27;
                           &#x27;transitions.get(from);\n&#x27;
                           &#x27;        if (existingTransitionState != null) {\n&#x27;
                           &#x27;            if (existingTransitionState == to) {\n&#x27;
                           &#x27;                throw new &#x27;
                           &#x27;DefinitionError(&quot;Duplicate transition[&quot; + this + &#x27;
                           &#x27;&quot;] from &quot; + from + &quot; to &quot; + to);\n&#x27;
                           &#x27;            } else {\n&#x27;
                           &#x27;                throw new &#x27;
                           &#x27;DefinitionError(&quot;Ambiguous transition[&quot; + this + &#x27;
                           &#x27;&quot;] from &quot; + from + &quot; to &quot; + to + &quot; and &quot; +\n&#x27;
                           &#x27;                    existingTransitionState);\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;            }\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;        transitions.put(from, to);\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;\tprotected void setFlowRunner(EasyFlow&lt;C&gt; runner) &#x27;
                           &#x27;{\n&#x27;
                           &#x27;\t\tthis.runner = runner;\n&#x27;
                           &#x27;\t}\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    private void callOnTriggered(C context, &#x27;
                           &#x27;State&lt;C&gt; from, State&lt;C&gt; to) throws Exception {\n&#x27;
                           &#x27;        if (onTriggeredHandler != null) {\n&#x27;
                           &#x27;            onTriggeredHandler.call(Event.this, &#x27;
                           &#x27;from, to, context);\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;\t@Override\n&#x27;
                           &#x27;\tpublic String toString() {\n&#x27;
                           &#x27;\t\treturn id;\n&#x27;
                           &#x27;\t}\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;\t@Override\n&#x27;
                           &#x27;\tpublic int hashCode() {\n&#x27;
                           &#x27;\t\tfinal int prime = 31;\n&#x27;
                           &#x27;\t\tint result = 1;\n&#x27;
                           &#x27;\t\tresult = prime * result + ((id == null) ? 0 : &#x27;
                           &#x27;id.hashCode());\n&#x27;
                           &#x27;\t\treturn result;\n&#x27;
                           &#x27;\t}\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;\t@SuppressWarnings(&quot;unchecked&quot;)\n&#x27;
                           &#x27;\t@Override\n&#x27;
                           &#x27;\tpublic boolean equals(Object obj) {\n&#x27;
                           &#x27;\t\tif (this == obj)\n&#x27;
                           &#x27;\t\t\treturn true;\n&#x27;
                           &#x27;\t\tif (obj == null)\n&#x27;
                           &#x27;\t\t\treturn false;\n&#x27;
                           &#x27;\t\tif (getClass() != obj.getClass())\n&#x27;
                           &#x27;\t\t\treturn false;\n&#x27;
                           &#x27;\t\tEvent&lt;C&gt; other = (Event&lt;C&gt;) obj;\n&#x27;
                           &#x27;\t\tif (id == null) {\n&#x27;
                           &#x27;\t\t\tif (other.id != null)\n&#x27;
                           &#x27;\t\t\t\treturn false;\n&#x27;
                           &#x27;\t\t} else if (!id.equals(other.id))\n&#x27;
                           &#x27;\t\t\treturn false;\n&#x27;
                           &#x27;\t\treturn true;\n&#x27;
                           &#x27;\t}\n&#x27;
                           &#x27;}\n&#x27;},
          {&#x27;CHUNK_OURS&#x27;: &#x27;&#x27;,
           &#x27;CHUNK_THEIRS&#x27;: &#x27;\n&#x27;
                           &#x27;package au.com.ds.ef;\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;import au.com.ds.ef.call.EventHandler;\n&#x27;
                           &#x27;import au.com.ds.ef.err.DefinitionError;\n&#x27;
                           &#x27;import au.com.ds.ef.err.ExecutionError;\n&#x27;
                           &#x27;import au.com.ds.ef.err.LogicViolationError;\n&#x27;
                           &#x27;import org.slf4j.Logger;\n&#x27;
                           &#x27;import org.slf4j.LoggerFactory;\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;import java.util.HashMap;\n&#x27;
                           &#x27;import java.util.Map;\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;public class Event&lt;C extends StatefulContext&gt; {\n&#x27;
                           &#x27;\tprivate static long idCounter = 1;\n&#x27;
                           &#x27;\tprivate static Logger log = &#x27;
                           &#x27;LoggerFactory.getLogger(Event.class);\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;\tprivate String id;\n&#x27;
                           &#x27;    private Map&lt;State&lt;C&gt;, State&lt;C&gt;&gt; transitions = &#x27;
                           &#x27;new HashMap&lt;State&lt;C&gt;, State&lt;C&gt;&gt;();\n&#x27;
                           &#x27;\tprivate EasyFlow&lt;C&gt; runner;\n&#x27;
                           &#x27;    private boolean ignoreOutOfState = false;\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;\tprivate EventHandler&lt;C&gt; onTriggeredHandler;\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;\tpublic Event() {\n&#x27;
                           &#x27;\t\tthis.id = &quot;Event_&quot; + (idCounter++);\n&#x27;
                           &#x27;\t}\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;\tpublic Event(String id) {\n&#x27;
                           &#x27;\t\tthis.id = id;\n&#x27;
                           &#x27;\t}\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;\tpublic TransitionBuilder&lt;C&gt; to(State&lt;C&gt; stateTo) &#x27;
                           &#x27;{\n&#x27;
                           &#x27;\t\treturn new TransitionBuilder&lt;C&gt;(this, &#x27;
                           &#x27;stateTo);\n&#x27;
                           &#x27;\t}\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;\tpublic TransitionBuilder&lt;C&gt; finish(State&lt;C&gt; &#x27;
                           &#x27;stateTo) {\n&#x27;
                           &#x27;\t\tstateTo.setFinal(true);\n&#x27;
                           &#x27;\t\treturn new TransitionBuilder&lt;C&gt;(this, &#x27;
                           &#x27;stateTo);\n&#x27;
                           &#x27;\t}\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;\tpublic Event&lt;C&gt; whenTriggered(EventHandler&lt;C&gt; &#x27;
                           &#x27;onTriggered) {\n&#x27;
                           &#x27;        onTriggeredHandler = onTriggered;\n&#x27;
                           &#x27;\t\treturn this;\n&#x27;
                           &#x27;\t}\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    public Event&lt;C&gt; ignoreOutOfState() {\n&#x27;
                           &#x27;        ignoreOutOfState = true;\n&#x27;
                           &#x27;        return this;\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    public void trigger(final C context) {\n&#x27;
                           &#x27;        if (runner.isTrace())\n&#x27;
                           &#x27;\t\t    log.debug(&quot;trigger {} for {}&quot;, this, &#x27;
                           &#x27;context);\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;\t\tif (context.isTerminated()) {\n&#x27;
                           &#x27;\t\t\treturn;\n&#x27;
                           &#x27;\t\t}\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;\t\trunner.execute(new Runnable() {\n&#x27;
                           &#x27;\t\t\t@Override\n&#x27;
                           &#x27;\t\t\tpublic void run() {\n&#x27;
                           &#x27;                State&lt;C&gt; stateFrom = &#x27;
                           &#x27;context.getState();\n&#x27;
                           &#x27;                State&lt;C&gt; stateTo = &#x27;
                           &#x27;transitions.get(stateFrom);\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;\t\t\t\ttry {\n&#x27;
                           &#x27;                    if (stateTo == null) {\n&#x27;
                           &#x27;                        if (!ignoreOutOfState)\n&#x27;
                           &#x27;                            throw new &#x27;
                           &#x27;LogicViolationError(&quot;Invalid Event: &quot; + &#x27;
                           &#x27;Event.this.toString() +\n&#x27;
                           &#x27;                                &quot; triggered while &#x27;
                           &#x27;in State: &quot; + context.getState() + &quot; for &quot; + &#x27;
                           &#x27;context);\n&#x27;
                           &#x27;                    } else {\n&#x27;
                           &#x27;                        callOnTriggered(context, &#x27;
                           &#x27;stateFrom, stateTo);\n&#x27;
                           &#x27;                        &#x27;
                           &#x27;runner.callOnEventTriggered(Event.this, stateFrom, &#x27;
                           &#x27;stateTo, context);\n&#x27;
                           &#x27;                        &#x27;
                           &#x27;runner.setCurrentState(stateTo, context);\n&#x27;
                           &#x27;                    }\n&#x27;
                           &#x27;\t\t\t\t} catch (Exception e) {\n&#x27;
                           &#x27;\t\t\t\t\trunner.callOnError(new &#x27;
                           &#x27;ExecutionError(stateFrom, Event.this, e,\n&#x27;
                           &#x27;\t\t\t\t\t\t\t&quot;Execution Error in &#x27;
                           &#x27;[Event.trigger]&quot;, context));\n&#x27;
                           &#x27;\t\t\t\t}\n&#x27;
                           &#x27;\t\t\t}\n&#x27;
                           &#x27;\t\t});\n&#x27;
                           &#x27;\t}\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    protected void addTransition(State&lt;C&gt; from, &#x27;
                           &#x27;State&lt;C&gt; to) {\n&#x27;
                           &#x27;        State&lt;C&gt; existingTransitionState = &#x27;
                           &#x27;transitions.get(from);\n&#x27;
                           &#x27;        if (existingTransitionState != null) {\n&#x27;
                           &#x27;            if (existingTransitionState == to) {\n&#x27;
                           &#x27;                throw new &#x27;
                           &#x27;DefinitionError(&quot;Duplicate transition[&quot; + this + &#x27;
                           &#x27;&quot;] from &quot; + from + &quot; to &quot; + to);\n&#x27;
                           &#x27;            } else {\n&#x27;
                           &#x27;                throw new &#x27;
                           &#x27;DefinitionError(&quot;Ambiguous transition[&quot; + this + &#x27;
                           &#x27;&quot;] from &quot; + from + &quot; to &quot; + to + &quot; and &quot; +\n&#x27;
                           &#x27;                    existingTransitionState);\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;            }\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;        transitions.put(from, to);\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;\tprotected void setFlowRunner(EasyFlow&lt;C&gt; runner) &#x27;
                           &#x27;{\n&#x27;
                           &#x27;\t\tthis.runner = runner;\n&#x27;
                           &#x27;\t}\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    private void callOnTriggered(C context, &#x27;
                           &#x27;State&lt;C&gt; from, State&lt;C&gt; to) throws Exception {\n&#x27;
                           &#x27;        if (onTriggeredHandler != null) {\n&#x27;
                           &#x27;            onTriggeredHandler.call(Event.this, &#x27;
                           &#x27;from, to, context);\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;\t@Override\n&#x27;
                           &#x27;\tpublic String toString() {\n&#x27;
                           &#x27;\t\treturn id;\n&#x27;
                           &#x27;\t}\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;\t@Override\n&#x27;
                           &#x27;\tpublic int hashCode() {\n&#x27;
                           &#x27;\t\tfinal int prime = 31;\n&#x27;
                           &#x27;\t\tint result = 1;\n&#x27;
                           &#x27;\t\tresult = prime * result + ((id == null) ? 0 : &#x27;
                           &#x27;id.hashCode());\n&#x27;
                           &#x27;\t\treturn result;\n&#x27;
                           &#x27;\t}\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;\t@SuppressWarnings(&quot;unchecked&quot;)\n&#x27;
                           &#x27;\t@Override\n&#x27;
                           &#x27;\tpublic boolean equals(Object obj) {\n&#x27;
                           &#x27;\t\tif (this == obj)\n&#x27;
                           &#x27;\t\t\treturn true;\n&#x27;
                           &#x27;\t\tif (obj == null)\n&#x27;
                           &#x27;\t\t\treturn false;\n&#x27;
                           &#x27;\t\tif (getClass() != obj.getClass())\n&#x27;
                           &#x27;\t\t\treturn false;\n&#x27;
                           &#x27;\t\tEvent&lt;C&gt; other = (Event&lt;C&gt;) obj;\n&#x27;
                           &#x27;\t\tif (id == null) {\n&#x27;
                           &#x27;\t\t\tif (other.id != null)\n&#x27;
                           &#x27;\t\t\t\treturn false;\n&#x27;
                           &#x27;\t\t} else if (!id.equals(other.id))\n&#x27;
                           &#x27;\t\t\treturn false;\n&#x27;
                           &#x27;\t\treturn true;\n&#x27;
                           &#x27;\t}\n&#x27;
                           &#x27;}\n&#x27;}],
   &#x27;mergers&#x27;: {&#x27;spork&#x27;, &#x27;baseline&#x27;, &#x27;jfstmerge&#x27;}}],
 [{&#x27;eq&#x27;: [{&#x27;CHUNK_OURS&#x27;: &#x27;&#x27;,
           &#x27;CHUNK_THEIRS&#x27;: &#x27;package au.com.ds.ef;\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;import au.com.ds.ef.call.EventHandler;\n&#x27;
                           &#x27;import au.com.ds.ef.err.DefinitionError;\n&#x27;
                           &#x27;import au.com.ds.ef.err.ExecutionError;\n&#x27;
                           &#x27;import au.com.ds.ef.err.LogicViolationError;\n&#x27;
                           &#x27;import org.slf4j.Logger;\n&#x27;
                           &#x27;import org.slf4j.LoggerFactory;\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;import java.util.HashMap;\n&#x27;
                           &#x27;import java.util.Map;\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;public class Event&lt;C extends StatefulContext&gt; {\n&#x27;
                           &#x27;\tprivate static long idCounter = 1;\n&#x27;
                           &#x27;\tprivate static Logger log = &#x27;
                           &#x27;LoggerFactory.getLogger(Event.class);\n&#x27;
                           &#x27;\t\n&#x27;
                           &#x27;\tprivate String id;\n&#x27;
                           &#x27;    private Map&lt;State&lt;C&gt;, State&lt;C&gt;&gt; transitions = &#x27;
                           &#x27;new HashMap&lt;State&lt;C&gt;, State&lt;C&gt;&gt;();\n&#x27;
                           &#x27;\tprivate EasyFlow&lt;C&gt; runner;\n&#x27;
                           &#x27;    private boolean ignoreOutOfState = false;\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;\tprivate EventHandler&lt;C&gt; onTriggeredHandler;\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;\tpublic Event() {\n&#x27;
                           &#x27;\t\tthis.id = &quot;Event_&quot; + (idCounter++);\n&#x27;
                           &#x27;\t}\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;\tpublic Event(String id) {\n&#x27;
                           &#x27;\t\tthis.id = id;\n&#x27;
                           &#x27;\t}\n&#x27;
                           &#x27;\t\n&#x27;
                           &#x27;\tpublic TransitionBuilder&lt;C&gt; to(State&lt;C&gt; stateTo) &#x27;
                           &#x27;{\n&#x27;
                           &#x27;\t\treturn new TransitionBuilder&lt;C&gt;(this, &#x27;
                           &#x27;stateTo);\n&#x27;
                           &#x27;\t}\n&#x27;
                           &#x27;\t\n&#x27;
                           &#x27;\tpublic TransitionBuilder&lt;C&gt; finish(State&lt;C&gt; &#x27;
                           &#x27;stateTo) {\n&#x27;
                           &#x27;\t\tstateTo.setFinal(true);\n&#x27;
                           &#x27;\t\treturn new TransitionBuilder&lt;C&gt;(this, &#x27;
                           &#x27;stateTo);\n&#x27;
                           &#x27;\t}\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;\tpublic Event&lt;C&gt; whenTriggered(EventHandler&lt;C&gt; &#x27;
                           &#x27;onTriggered) {\n&#x27;
                           &#x27;        onTriggeredHandler = onTriggered;\n&#x27;
                           &#x27;\t\treturn this;\n&#x27;
                           &#x27;\t}\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    public Event&lt;C&gt; ignoreOutOfState() {\n&#x27;
                           &#x27;        ignoreOutOfState = true;\n&#x27;
                           &#x27;        return this;\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    public void trigger(final C context) {\n&#x27;
                           &#x27;        if (runner.isTrace())\n&#x27;
                           &#x27;\t\t    log.debug(&quot;trigger {} for {}&quot;, this, &#x27;
                           &#x27;context);\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;\t\tif (context.isTerminated()) {\n&#x27;
                           &#x27;\t\t\treturn;\n&#x27;
                           &#x27;\t\t}\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;\t\trunner.execute(new Runnable() {\n&#x27;
                           &#x27;\t\t\t@Override\n&#x27;
                           &#x27;\t\t\tpublic void run() {\n&#x27;
                           &#x27;                State&lt;C&gt; stateFrom = &#x27;
                           &#x27;context.getState();\n&#x27;
                           &#x27;                State&lt;C&gt; stateTo = &#x27;
                           &#x27;transitions.get(stateFrom);\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;\t\t\t\ttry {\n&#x27;
                           &#x27;                    if (stateTo == null) {\n&#x27;
                           &#x27;                        if (!ignoreOutOfState)\n&#x27;
                           &#x27;                            throw new &#x27;
                           &#x27;LogicViolationError(&quot;Invalid Event: &quot; + &#x27;
                           &#x27;Event.this.toString() +\n&#x27;
                           &#x27;                                &quot; triggered while &#x27;
                           &#x27;in State: &quot; + context.getState() + &quot; for &quot; + &#x27;
                           &#x27;context);\n&#x27;
                           &#x27;                    } else {\n&#x27;
                           &#x27;                        callOnTriggered(context, &#x27;
                           &#x27;stateFrom, stateTo);\n&#x27;
                           &#x27;                        &#x27;
                           &#x27;runner.callOnEventTriggered(Event.this, stateFrom, &#x27;
                           &#x27;stateTo, context);\n&#x27;
                           &#x27;                        &#x27;
                           &#x27;runner.setCurrentState(stateTo, context);\n&#x27;
                           &#x27;                    }\n&#x27;
                           &#x27;\t\t\t\t} catch (Exception e) {\n&#x27;
                           &#x27;\t\t\t\t\trunner.callOnError(new &#x27;
                           &#x27;ExecutionError(stateFrom, Event.this, e,\n&#x27;
                           &#x27;\t\t\t\t\t\t\t&quot;Execution Error in &#x27;
                           &#x27;[Event.trigger]&quot;, context));\t\t\t\t\t\n&#x27;
                           &#x27;\t\t\t\t}\n&#x27;
                           &#x27;\t\t\t}\n&#x27;
                           &#x27;\t\t});\n&#x27;
                           &#x27;\t}\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    protected void addTransition(State&lt;C&gt; from, &#x27;
                           &#x27;State&lt;C&gt; to) {\n&#x27;
                           &#x27;        State&lt;C&gt; existingTransitionState = &#x27;
                           &#x27;transitions.get(from);\n&#x27;
                           &#x27;        if (existingTransitionState != null) {\n&#x27;
                           &#x27;            if (existingTransitionState == to) {\n&#x27;
                           &#x27;                throw new &#x27;
                           &#x27;DefinitionError(&quot;Duplicate transition[&quot; + this + &#x27;
                           &#x27;&quot;] from &quot; + from + &quot; to &quot; + to);\n&#x27;
                           &#x27;            } else {\n&#x27;
                           &#x27;                throw new &#x27;
                           &#x27;DefinitionError(&quot;Ambiguous transition[&quot; + this + &#x27;
                           &#x27;&quot;] from &quot; + from + &quot; to &quot; + to + &quot; and &quot; +\n&#x27;
                           &#x27;                    existingTransitionState);\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;            }\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;        transitions.put(from, to);\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;\tprotected void setFlowRunner(EasyFlow&lt;C&gt; runner) &#x27;
                           &#x27;{\n&#x27;
                           &#x27;\t\tthis.runner = runner;\n&#x27;
                           &#x27;\t}\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    private void callOnTriggered(C context, &#x27;
                           &#x27;State&lt;C&gt; from, State&lt;C&gt; to) throws Exception {\n&#x27;
                           &#x27;        if (onTriggeredHandler != null) {\n&#x27;
                           &#x27;            onTriggeredHandler.call(Event.this, &#x27;
                           &#x27;from, to, context);\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;\t@Override\n&#x27;
                           &#x27;\tpublic String toString() {\n&#x27;
                           &#x27;\t\treturn id;\n&#x27;
                           &#x27;\t}\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;\t@Override\n&#x27;
                           &#x27;\tpublic int hashCode() {\n&#x27;
                           &#x27;\t\tfinal int prime = 31;\n&#x27;
                           &#x27;\t\tint result = 1;\n&#x27;
                           &#x27;\t\tresult = prime * result + ((id == null) ? 0 : &#x27;
                           &#x27;id.hashCode());\n&#x27;
                           &#x27;\t\treturn result;\n&#x27;
                           &#x27;\t}\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;\t@SuppressWarnings(&quot;unchecked&quot;)\n&#x27;
                           &#x27;\t@Override\n&#x27;
                           &#x27;\tpublic boolean equals(Object obj) {\n&#x27;
                           &#x27;\t\tif (this == obj)\n&#x27;
                           &#x27;\t\t\treturn true;\n&#x27;
                           &#x27;\t\tif (obj == null)\n&#x27;
                           &#x27;\t\t\treturn false;\n&#x27;
                           &#x27;\t\tif (getClass() != obj.getClass())\n&#x27;
                           &#x27;\t\t\treturn false;\n&#x27;
                           &#x27;\t\tEvent&lt;C&gt; other = (Event&lt;C&gt;) obj;\n&#x27;
                           &#x27;\t\tif (id == null) {\n&#x27;
                           &#x27;\t\t\tif (other.id != null)\n&#x27;
                           &#x27;\t\t\t\treturn false;\n&#x27;
                           &#x27;\t\t} else if (!id.equals(other.id))\n&#x27;
                           &#x27;\t\t\treturn false;\n&#x27;
                           &#x27;\t\treturn true;\n&#x27;
                           &#x27;\t}\n&#x27;
                           &#x27;}\n&#x27;},
          {&#x27;CHUNK_OURS&#x27;: &#x27;&#x27;,
           &#x27;CHUNK_THEIRS&#x27;: &#x27;package au.com.ds.ef;\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;import au.com.ds.ef.call.EventHandler;\n&#x27;
                           &#x27;import au.com.ds.ef.err.DefinitionError;\n&#x27;
                           &#x27;import au.com.ds.ef.err.ExecutionError;\n&#x27;
                           &#x27;import au.com.ds.ef.err.LogicViolationError;\n&#x27;
                           &#x27;import org.slf4j.Logger;\n&#x27;
                           &#x27;import org.slf4j.LoggerFactory;\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;import java.util.HashMap;\n&#x27;
                           &#x27;import java.util.Map;\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;public class Event&lt;C extends StatefulContext&gt; {\n&#x27;
                           &#x27;\tprivate static long idCounter = 1;\n&#x27;
                           &#x27;\tprivate static Logger log = &#x27;
                           &#x27;LoggerFactory.getLogger(Event.class);\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;\tprivate String id;\n&#x27;
                           &#x27;    private Map&lt;State&lt;C&gt;, State&lt;C&gt;&gt; transitions = &#x27;
                           &#x27;new HashMap&lt;State&lt;C&gt;, State&lt;C&gt;&gt;();\n&#x27;
                           &#x27;\tprivate EasyFlow&lt;C&gt; runner;\n&#x27;
                           &#x27;    private boolean ignoreOutOfState = false;\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;\tprivate EventHandler&lt;C&gt; onTriggeredHandler;\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;\tpublic Event() {\n&#x27;
                           &#x27;\t\tthis.id = &quot;Event_&quot; + (idCounter++);\n&#x27;
                           &#x27;\t}\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;\tpublic Event(String id) {\n&#x27;
                           &#x27;\t\tthis.id = id;\n&#x27;
                           &#x27;\t}\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;\tpublic TransitionBuilder&lt;C&gt; to(State&lt;C&gt; stateTo) &#x27;
                           &#x27;{\n&#x27;
                           &#x27;\t\treturn new TransitionBuilder&lt;C&gt;(this, &#x27;
                           &#x27;stateTo);\n&#x27;
                           &#x27;\t}\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;\tpublic TransitionBuilder&lt;C&gt; finish(State&lt;C&gt; &#x27;
                           &#x27;stateTo) {\n&#x27;
                           &#x27;\t\tstateTo.setFinal(true);\n&#x27;
                           &#x27;\t\treturn new TransitionBuilder&lt;C&gt;(this, &#x27;
                           &#x27;stateTo);\n&#x27;
                           &#x27;\t}\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;\tpublic Event&lt;C&gt; whenTriggered(EventHandler&lt;C&gt; &#x27;
                           &#x27;onTriggered) {\n&#x27;
                           &#x27;        onTriggeredHandler = onTriggered;\n&#x27;
                           &#x27;\t\treturn this;\n&#x27;
                           &#x27;\t}\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    public Event&lt;C&gt; ignoreOutOfState() {\n&#x27;
                           &#x27;        ignoreOutOfState = true;\n&#x27;
                           &#x27;        return this;\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    public void trigger(final C context) {\n&#x27;
                           &#x27;        if (runner.isTrace())\n&#x27;
                           &#x27;\t\t    log.debug(&quot;trigger {} for {}&quot;, this, &#x27;
                           &#x27;context);\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;\t\tif (context.isTerminated()) {\n&#x27;
                           &#x27;\t\t\treturn;\n&#x27;
                           &#x27;\t\t}\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;\t\trunner.execute(new Runnable() {\n&#x27;
                           &#x27;\t\t\t@Override\n&#x27;
                           &#x27;\t\t\tpublic void run() {\n&#x27;
                           &#x27;                State&lt;C&gt; stateFrom = &#x27;
                           &#x27;context.getState();\n&#x27;
                           &#x27;                State&lt;C&gt; stateTo = &#x27;
                           &#x27;transitions.get(stateFrom);\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;\t\t\t\ttry {\n&#x27;
                           &#x27;                    if (stateTo == null) {\n&#x27;
                           &#x27;                        if (!ignoreOutOfState)\n&#x27;
                           &#x27;                            throw new &#x27;
                           &#x27;LogicViolationError(&quot;Invalid Event: &quot; + &#x27;
                           &#x27;Event.this.toString() +\n&#x27;
                           &#x27;                                &quot; triggered while &#x27;
                           &#x27;in State: &quot; + context.getState() + &quot; for &quot; + &#x27;
                           &#x27;context);\n&#x27;
                           &#x27;                    } else {\n&#x27;
                           &#x27;                        callOnTriggered(context, &#x27;
                           &#x27;stateFrom, stateTo);\n&#x27;
                           &#x27;                        &#x27;
                           &#x27;runner.callOnEventTriggered(Event.this, stateFrom, &#x27;
                           &#x27;stateTo, context);\n&#x27;
                           &#x27;                        &#x27;
                           &#x27;runner.setCurrentState(stateTo, context);\n&#x27;
                           &#x27;                    }\n&#x27;
                           &#x27;\t\t\t\t} catch (Exception e) {\n&#x27;
                           &#x27;\t\t\t\t\trunner.callOnError(new &#x27;
                           &#x27;ExecutionError(stateFrom, Event.this, e,\n&#x27;
                           &#x27;\t\t\t\t\t\t\t&quot;Execution Error in &#x27;
                           &#x27;[Event.trigger]&quot;, context));\n&#x27;
                           &#x27;\t\t\t\t}\n&#x27;
                           &#x27;\t\t\t}\n&#x27;
                           &#x27;\t\t});\n&#x27;
                           &#x27;\t}\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    protected void addTransition(State&lt;C&gt; from, &#x27;
                           &#x27;State&lt;C&gt; to) {\n&#x27;
                           &#x27;        State&lt;C&gt; existingTransitionState = &#x27;
                           &#x27;transitions.get(from);\n&#x27;
                           &#x27;        if (existingTransitionState != null) {\n&#x27;
                           &#x27;            if (existingTransitionState == to) {\n&#x27;
                           &#x27;                throw new &#x27;
                           &#x27;DefinitionError(&quot;Duplicate transition[&quot; + this + &#x27;
                           &#x27;&quot;] from &quot; + from + &quot; to &quot; + to);\n&#x27;
                           &#x27;            } else {\n&#x27;
                           &#x27;                throw new &#x27;
                           &#x27;DefinitionError(&quot;Ambiguous transition[&quot; + this + &#x27;
                           &#x27;&quot;] from &quot; + from + &quot; to &quot; + to + &quot; and &quot; +\n&#x27;
                           &#x27;                    existingTransitionState);\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;            }\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;        transitions.put(from, to);\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;\tprotected void setFlowRunner(EasyFlow&lt;C&gt; runner) &#x27;
                           &#x27;{\n&#x27;
                           &#x27;\t\tthis.runner = runner;\n&#x27;
                           &#x27;\t}\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    private void callOnTriggered(C context, &#x27;
                           &#x27;State&lt;C&gt; from, State&lt;C&gt; to) throws Exception {\n&#x27;
                           &#x27;        if (onTriggeredHandler != null) {\n&#x27;
                           &#x27;            onTriggeredHandler.call(Event.this, &#x27;
                           &#x27;from, to, context);\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;\t@Override\n&#x27;
                           &#x27;\tpublic String toString() {\n&#x27;
                           &#x27;\t\treturn id;\n&#x27;
                           &#x27;\t}\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;\t@Override\n&#x27;
                           &#x27;\tpublic int hashCode() {\n&#x27;
                           &#x27;\t\tfinal int prime = 31;\n&#x27;
                           &#x27;\t\tint result = 1;\n&#x27;
                           &#x27;\t\tresult = prime * result + ((id == null) ? 0 : &#x27;
                           &#x27;id.hashCode());\n&#x27;
                           &#x27;\t\treturn result;\n&#x27;
                           &#x27;\t}\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;\t@SuppressWarnings(&quot;unchecked&quot;)\n&#x27;
                           &#x27;\t@Override\n&#x27;
                           &#x27;\tpublic boolean equals(Object obj) {\n&#x27;
                           &#x27;\t\tif (this == obj)\n&#x27;
                           &#x27;\t\t\treturn true;\n&#x27;
                           &#x27;\t\tif (obj == null)\n&#x27;
                           &#x27;\t\t\treturn false;\n&#x27;
                           &#x27;\t\tif (getClass() != obj.getClass())\n&#x27;
                           &#x27;\t\t\treturn false;\n&#x27;
                           &#x27;\t\tEvent&lt;C&gt; other = (Event&lt;C&gt;) obj;\n&#x27;
                           &#x27;\t\tif (id == null) {\n&#x27;
                           &#x27;\t\t\tif (other.id != null)\n&#x27;
                           &#x27;\t\t\t\treturn false;\n&#x27;
                           &#x27;\t\t} else if (!id.equals(other.id))\n&#x27;
                           &#x27;\t\t\treturn false;\n&#x27;
                           &#x27;\t\treturn true;\n&#x27;
                           &#x27;\t}\n&#x27;
                           &#x27;}\n&#x27;},
          {&#x27;CHUNK_OURS&#x27;: &#x27;&#x27;,
           &#x27;CHUNK_THEIRS&#x27;: &#x27;\n&#x27;
                           &#x27;package au.com.ds.ef;\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;import au.com.ds.ef.call.EventHandler;\n&#x27;
                           &#x27;import au.com.ds.ef.err.DefinitionError;\n&#x27;
                           &#x27;import au.com.ds.ef.err.ExecutionError;\n&#x27;
                           &#x27;import au.com.ds.ef.err.LogicViolationError;\n&#x27;
                           &#x27;import org.slf4j.Logger;\n&#x27;
                           &#x27;import org.slf4j.LoggerFactory;\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;import java.util.HashMap;\n&#x27;
                           &#x27;import java.util.Map;\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;public class Event&lt;C extends StatefulContext&gt; {\n&#x27;
                           &#x27;\tprivate static long idCounter = 1;\n&#x27;
                           &#x27;\tprivate static Logger log = &#x27;
                           &#x27;LoggerFactory.getLogger(Event.class);\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;\tprivate String id;\n&#x27;
                           &#x27;    private Map&lt;State&lt;C&gt;, State&lt;C&gt;&gt; transitions = &#x27;
                           &#x27;new HashMap&lt;State&lt;C&gt;, State&lt;C&gt;&gt;();\n&#x27;
                           &#x27;\tprivate EasyFlow&lt;C&gt; runner;\n&#x27;
                           &#x27;    private boolean ignoreOutOfState = false;\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;\tprivate EventHandler&lt;C&gt; onTriggeredHandler;\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;\tpublic Event() {\n&#x27;
                           &#x27;\t\tthis.id = &quot;Event_&quot; + (idCounter++);\n&#x27;
                           &#x27;\t}\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;\tpublic Event(String id) {\n&#x27;
                           &#x27;\t\tthis.id = id;\n&#x27;
                           &#x27;\t}\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;\tpublic TransitionBuilder&lt;C&gt; to(State&lt;C&gt; stateTo) &#x27;
                           &#x27;{\n&#x27;
                           &#x27;\t\treturn new TransitionBuilder&lt;C&gt;(this, &#x27;
                           &#x27;stateTo);\n&#x27;
                           &#x27;\t}\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;\tpublic TransitionBuilder&lt;C&gt; finish(State&lt;C&gt; &#x27;
                           &#x27;stateTo) {\n&#x27;
                           &#x27;\t\tstateTo.setFinal(true);\n&#x27;
                           &#x27;\t\treturn new TransitionBuilder&lt;C&gt;(this, &#x27;
                           &#x27;stateTo);\n&#x27;
                           &#x27;\t}\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;\tpublic Event&lt;C&gt; whenTriggered(EventHandler&lt;C&gt; &#x27;
                           &#x27;onTriggered) {\n&#x27;
                           &#x27;        onTriggeredHandler = onTriggered;\n&#x27;
                           &#x27;\t\treturn this;\n&#x27;
                           &#x27;\t}\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    public Event&lt;C&gt; ignoreOutOfState() {\n&#x27;
                           &#x27;        ignoreOutOfState = true;\n&#x27;
                           &#x27;        return this;\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    public void trigger(final C context) {\n&#x27;
                           &#x27;        if (runner.isTrace())\n&#x27;
                           &#x27;\t\t    log.debug(&quot;trigger {} for {}&quot;, this, &#x27;
                           &#x27;context);\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;\t\tif (context.isTerminated()) {\n&#x27;
                           &#x27;\t\t\treturn;\n&#x27;
                           &#x27;\t\t}\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;\t\trunner.execute(new Runnable() {\n&#x27;
                           &#x27;\t\t\t@Override\n&#x27;
                           &#x27;\t\t\tpublic void run() {\n&#x27;
                           &#x27;                State&lt;C&gt; stateFrom = &#x27;
                           &#x27;context.getState();\n&#x27;
                           &#x27;                State&lt;C&gt; stateTo = &#x27;
                           &#x27;transitions.get(stateFrom);\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;\t\t\t\ttry {\n&#x27;
                           &#x27;                    if (stateTo == null) {\n&#x27;
                           &#x27;                        if (!ignoreOutOfState)\n&#x27;
                           &#x27;                            throw new &#x27;
                           &#x27;LogicViolationError(&quot;Invalid Event: &quot; + &#x27;
                           &#x27;Event.this.toString() +\n&#x27;
                           &#x27;                                &quot; triggered while &#x27;
                           &#x27;in State: &quot; + context.getState() + &quot; for &quot; + &#x27;
                           &#x27;context);\n&#x27;
                           &#x27;                    } else {\n&#x27;
                           &#x27;                        callOnTriggered(context, &#x27;
                           &#x27;stateFrom, stateTo);\n&#x27;
                           &#x27;                        &#x27;
                           &#x27;runner.callOnEventTriggered(Event.this, stateFrom, &#x27;
                           &#x27;stateTo, context);\n&#x27;
                           &#x27;                        &#x27;
                           &#x27;runner.setCurrentState(stateTo, context);\n&#x27;
                           &#x27;                    }\n&#x27;
                           &#x27;\t\t\t\t} catch (Exception e) {\n&#x27;
                           &#x27;\t\t\t\t\trunner.callOnError(new &#x27;
                           &#x27;ExecutionError(stateFrom, Event.this, e,\n&#x27;
                           &#x27;\t\t\t\t\t\t\t&quot;Execution Error in &#x27;
                           &#x27;[Event.trigger]&quot;, context));\n&#x27;
                           &#x27;\t\t\t\t}\n&#x27;
                           &#x27;\t\t\t}\n&#x27;
                           &#x27;\t\t});\n&#x27;
                           &#x27;\t}\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    protected void addTransition(State&lt;C&gt; from, &#x27;
                           &#x27;State&lt;C&gt; to) {\n&#x27;
                           &#x27;        State&lt;C&gt; existingTransitionState = &#x27;
                           &#x27;transitions.get(from);\n&#x27;
                           &#x27;        if (existingTransitionState != null) {\n&#x27;
                           &#x27;            if (existingTransitionState == to) {\n&#x27;
                           &#x27;                throw new &#x27;
                           &#x27;DefinitionError(&quot;Duplicate transition[&quot; + this + &#x27;
                           &#x27;&quot;] from &quot; + from + &quot; to &quot; + to);\n&#x27;
                           &#x27;            } else {\n&#x27;
                           &#x27;                throw new &#x27;
                           &#x27;DefinitionError(&quot;Ambiguous transition[&quot; + this + &#x27;
                           &#x27;&quot;] from &quot; + from + &quot; to &quot; + to + &quot; and &quot; +\n&#x27;
                           &#x27;                    existingTransitionState);\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;            }\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;        transitions.put(from, to);\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;\tprotected void setFlowRunner(EasyFlow&lt;C&gt; runner) &#x27;
                           &#x27;{\n&#x27;
                           &#x27;\t\tthis.runner = runner;\n&#x27;
                           &#x27;\t}\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    private void callOnTriggered(C context, &#x27;
                           &#x27;State&lt;C&gt; from, State&lt;C&gt; to) throws Exception {\n&#x27;
                           &#x27;        if (onTriggeredHandler != null) {\n&#x27;
                           &#x27;            onTriggeredHandler.call(Event.this, &#x27;
                           &#x27;from, to, context);\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;\t@Override\n&#x27;
                           &#x27;\tpublic String toString() {\n&#x27;
                           &#x27;\t\treturn id;\n&#x27;
                           &#x27;\t}\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;\t@Override\n&#x27;
                           &#x27;\tpublic int hashCode() {\n&#x27;
                           &#x27;\t\tfinal int prime = 31;\n&#x27;
                           &#x27;\t\tint result = 1;\n&#x27;
                           &#x27;\t\tresult = prime * result + ((id == null) ? 0 : &#x27;
                           &#x27;id.hashCode());\n&#x27;
                           &#x27;\t\treturn result;\n&#x27;
                           &#x27;\t}\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;\t@SuppressWarnings(&quot;unchecked&quot;)\n&#x27;
                           &#x27;\t@Override\n&#x27;
                           &#x27;\tpublic boolean equals(Object obj) {\n&#x27;
                           &#x27;\t\tif (this == obj)\n&#x27;
                           &#x27;\t\t\treturn true;\n&#x27;
                           &#x27;\t\tif (obj == null)\n&#x27;
                           &#x27;\t\t\treturn false;\n&#x27;
                           &#x27;\t\tif (getClass() != obj.getClass())\n&#x27;
                           &#x27;\t\t\treturn false;\n&#x27;
                           &#x27;\t\tEvent&lt;C&gt; other = (Event&lt;C&gt;) obj;\n&#x27;
                           &#x27;\t\tif (id == null) {\n&#x27;
                           &#x27;\t\t\tif (other.id != null)\n&#x27;
                           &#x27;\t\t\t\treturn false;\n&#x27;
                           &#x27;\t\t} else if (!id.equals(other.id))\n&#x27;
                           &#x27;\t\t\treturn false;\n&#x27;
                           &#x27;\t\treturn true;\n&#x27;
                           &#x27;\t}\n&#x27;
                           &#x27;}\n&#x27;}],
   &#x27;mergers&#x27;: {&#x27;spork&#x27;, &#x27;baseline&#x27;, &#x27;jfstmerge&#x27;}}]]</pre>
          </body>
        </html>
        