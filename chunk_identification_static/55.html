<!DOCTYPE html>
    <html lang="en">
              <head>
                <meta charset="utf-8">
                <title>55</title>
                    <style>
                        #top {
                            height: 48vh;
                            overflow-y: auto;
                        }
                        #bottom {
                            height: 48vh;
                            overflow-y: auto;
                        }
                        .highlighted {
                            background-color: rgba(177, 82, 227, 0.85) !important;
                        }
                    </style>
                    <script>
                        function enter(c) {
                            const lines = document.getElementsByClassName(c);
                            for (let i = 0; i < lines.length; i++) {
                               lines.item(i).classList.add('highlighted');
                            }
                        }
                        function out(c) {
                            const lines = document.getElementsByClassName(c);
                            for (let i = 0; i < lines.length; i++) {
                               lines.item(i).classList.remove('highlighted');
                            }
                        }
                    </script>
              </head>
              <body>
                <span style="height: 4vh">
                    55
                    <a href="54.html">prev</a>
                    <a href="56.html">next</a>
                    <a href="55_chunks.html">chunks</a>
                    <a href="index.html">index</a>
                    Automattic/simplenote-android_d5627551b8cb2c3f35852c56d01ad64d7bac1ab9_Simplenote/src/main/java/com/automattic/simplenote/widgets/SimplenoteEditText.java
                    <textarea rows=1 onclick='navigator.clipboard.writeText(this.value)'>cd C:\studies\se\mega\git-analyzer-plus\notebooks\debug
del /Q *
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\Automattic\simplenote-android show &quot;d5627551b8cb2c3f35852c56d01ad64d7bac1ab9:Simplenote/src/main/java/com/automattic/simplenote/widgets/SimplenoteEditText.java&quot; &gt; committed.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\Automattic\simplenote-android show &quot;d5627551b8cb2c3f35852c56d01ad64d7bac1ab9^1:Simplenote/src/main/java/com/automattic/simplenote/widgets/SimplenoteEditText.java&quot; &gt; ours.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\Automattic\simplenote-android show &quot;d5627551b8cb2c3f35852c56d01ad64d7bac1ab9^2:Simplenote/src/main/java/com/automattic/simplenote/widgets/SimplenoteEditText.java&quot; &gt; theirs.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\Automattic\simplenote-android show &quot;7bd4900c1a395918947a695f3621c2c6c01a3c87:Simplenote/src/main/java/com/automattic/simplenote/widgets/SimplenoteEditText.java&quot; &gt; base.java
copy ours.java 1ours.java
copy ours.java 2ours.java
copy theirs.java 1theirs.java
copy theirs.java 2theirs.java
copy base.java 1base.java
copy base.java 2base.java
&quot;C:\Program Files\Java\jdk1.8.0_241\bin\java.exe&quot; -Dfile.encoding=UTF-8 -jar &quot;C:\studies\se\jFSTMerge\build\libs\jFSTMerge-all.jar&quot; C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1ours.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1base.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1theirs.java -o C:\studies\se\mega\git-analyzer-plus\notebooks\debug\jfstmerge.java --show-base
&quot;C:\Program Files\Eclipse Adoptium\jdk-17.0.11.9-hotspot\bin\java.exe&quot; -Dfile.encoding=UTF-8 -jar &quot;C:\studies\se\spork\target\spork-0.5.0-SNAPSHOT.jar&quot; C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2ours.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2base.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2theirs.java -o C:\studies\se\mega\git-analyzer-plus\notebooks\debug\spork.java
del /Q 1*.java
del /Q 2*.java
del /Q jfstmerge.java.merge
</textarea>
                    {strict: [[bsj]], subset: [[bsj]]}
                </span>
                <div id="top">

                    <table>
                        <tr>
                            <th>line based (standard git)</th>
                            <th>jfstmerge</th>
                            <th>spork</th>
                        </tr>
                        <tr>
                            <td><pre><span class="2121239535603548975" onmouseenter="enter('2121239535603548975');" onmouseout="out('2121239535603548975');" style="">   1 package com.automattic.simplenote.widgets;                                                               </span>
<span  style="">   2                                                                                                          </span>
<span class="5922045460006936195" onmouseenter="enter('5922045460006936195');" onmouseout="out('5922045460006936195');" style="">   3 import android.content.Context;                                                                          </span>
<span class="2207333516549486115" onmouseenter="enter('2207333516549486115');" onmouseout="out('2207333516549486115');" style="">   4 import android.graphics.Rect;                                                                            </span>
<span class="-1737226814075322931" onmouseenter="enter('-1737226814075322931');" onmouseout="out('-1737226814075322931');" style="">   5 import android.graphics.drawable.Drawable;                                                               </span>
<span class="-1086316590722027623" onmouseenter="enter('-1086316590722027623');" onmouseout="out('-1086316590722027623');" style="">   6 import android.os.Handler;                                                                               </span>
<span class="4177373235046048356" onmouseenter="enter('4177373235046048356');" onmouseout="out('4177373235046048356');" style="">   7 import android.text.Editable;                                                                            </span>
<span class="-578015270574978569" onmouseenter="enter('-578015270574978569');" onmouseout="out('-578015270574978569');" style="">   8 import android.text.Layout;                                                                              </span>
<span class="7007167342609832330" onmouseenter="enter('7007167342609832330');" onmouseout="out('7007167342609832330');" style="">   9 import android.text.SpannableStringBuilder;                                                              </span>
<span class="7731806713123176572" onmouseenter="enter('7731806713123176572');" onmouseout="out('7731806713123176572');" style="">  10 import android.text.Spanned;                                                                             </span>
<span class="8961068409863998468" onmouseenter="enter('8961068409863998468');" onmouseout="out('8961068409863998468');" style="">  11 import android.text.style.ImageSpan;                                                                     </span>
<span class="-4218724752779269131" onmouseenter="enter('-4218724752779269131');" onmouseout="out('-4218724752779269131');" style="">  12 import android.util.AttributeSet;                                                                        </span>
<span class="959108076239844050" onmouseenter="enter('959108076239844050');" onmouseout="out('959108076239844050');" style="">  13 import android.view.KeyEvent;                                                                            </span>
<span class="-8980485571216513882" onmouseenter="enter('-8980485571216513882');" onmouseout="out('-8980485571216513882');" style="">  14 import android.view.View;                                                                                </span>
<span class="-3898686145228074474" onmouseenter="enter('-3898686145228074474');" onmouseout="out('-3898686145228074474');" style="">  15 import android.widget.AdapterView;                                                                       </span>
<span  style="">  16                                                                                                          </span>
<span class="-8037490851538345990" onmouseenter="enter('-8037490851538345990');" onmouseout="out('-8037490851538345990');" style="">  17 import androidx.appcompat.widget.AppCompatMultiAutoCompleteTextView;                                     </span>
<span class="5842151950717757009" onmouseenter="enter('5842151950717757009');" onmouseout="out('5842151950717757009');" style="">  18 import androidx.core.content.ContextCompat;                                                              </span>
<span  style="">  19                                                                                                          </span>
<span class="-6092371777820512633" onmouseenter="enter('-6092371777820512633');" onmouseout="out('-6092371777820512633');" style="">  20 import com.automattic.simplenote.R;                                                                      </span>
<span class="9061368408436996655" onmouseenter="enter('9061368408436996655');" onmouseout="out('9061368408436996655');" style="">  21 import com.automattic.simplenote.models.Note;                                                            </span>
<span class="1987879750509178857" onmouseenter="enter('1987879750509178857');" onmouseout="out('1987879750509178857');" style="">  22 import com.automattic.simplenote.utils.ChecklistUtils;                                                   </span>
<span class="8577850632926167445" onmouseenter="enter('8577850632926167445');" onmouseout="out('8577850632926167445');" style="">  23 import com.automattic.simplenote.utils.DisplayUtils;                                                     </span>
<span class="930019215389101465" onmouseenter="enter('930019215389101465');" onmouseout="out('930019215389101465');" style="">  24 import com.automattic.simplenote.utils.DrawableUtils;                                                    </span>
<span class="-5948624663998670139" onmouseenter="enter('-5948624663998670139');" onmouseout="out('-5948624663998670139');" style="">  25 import com.automattic.simplenote.utils.LinkTokenizer;                                                    </span>
<span class="2537926396801226048" onmouseenter="enter('2537926396801226048');" onmouseout="out('2537926396801226048');" style="">  26 import com.automattic.simplenote.utils.SimplenoteLinkify;                                                </span>
<span class="-8170925370861558125" onmouseenter="enter('-8170925370861558125');" onmouseout="out('-8170925370861558125');" style="">  27 import com.simperium.client.Bucket;                                                                      </span>
<span  style="">  28                                                                                                          </span>
<span class="9191247685397773893" onmouseenter="enter('9191247685397773893');" onmouseout="out('9191247685397773893');" style="">  29 import java.util.ArrayList;                                                                              </span>
<span class="-1786020958497218848" onmouseenter="enter('-1786020958497218848');" onmouseout="out('-1786020958497218848');" style="">  30 import java.util.List;                                                                                   </span>
<span class="2159928926335330273" onmouseenter="enter('2159928926335330273');" onmouseout="out('2159928926335330273');" style="">  31 import java.util.regex.Matcher;                                                                          </span>
<span class="1513108047920599059" onmouseenter="enter('1513108047920599059');" onmouseout="out('1513108047920599059');" style="">  32 import java.util.regex.Pattern;                                                                          </span>
<span  style="">  33                                                                                                          </span>
<span class="1948737371075708279" onmouseenter="enter('1948737371075708279');" onmouseout="out('1948737371075708279');" style="">  34 import static com.automattic.simplenote.utils.SimplenoteLinkify.SIMPLENOTE_LINK_ID;                      </span>
<span class="-4405840676582391526" onmouseenter="enter('-4405840676582391526');" onmouseout="out('-4405840676582391526');" style="">  35 import static com.automattic.simplenote.utils.SimplenoteLinkify.SIMPLENOTE_LINK_PREFIX;                  </span>
<span  style="">  36                                                                                                          </span>
<span class="-117003403243561872" onmouseenter="enter('-117003403243561872');" onmouseout="out('-117003403243561872');" style=""><abbr title="  37 public class SimplenoteEditText extends AppCompatMultiAutoCompleteTextView implements AdapterView.OnItemClickListener {">  37 public class SimplenoteEditText extends AppCompatMultiAutoCompleteTextView implements AdapterView.OnItemC🔵</abbr></span>
<span class="4400513732356126489" onmouseenter="enter('4400513732356126489');" onmouseout="out('4400513732356126489');" style=""><abbr title="  38     private static final Pattern INTERNOTE_LINK_PATTERN_EDIT = Pattern.compile(&quot;([^]]*)(]\\(&quot; + SIMPLENOTE_LINK_PREFIX + SIMPLENOTE_LINK_ID + &quot;\\))&quot;);">  38     private static final Pattern INTERNOTE_LINK_PATTERN_EDIT = Pattern.compile(&quot;([^]]*)(]\\(&quot; + SIMPLENOT🔵</abbr></span>
<span class="-875162683766216906" onmouseenter="enter('-875162683766216906');" onmouseout="out('-875162683766216906');" style=""><abbr title="  39     private static final Pattern INTERNOTE_LINK_PATTERN_FULL = Pattern.compile(&quot;(?s)(.)*(\\[)&quot; + INTERNOTE_LINK_PATTERN_EDIT);">  39     private static final Pattern INTERNOTE_LINK_PATTERN_FULL = Pattern.compile(&quot;(?s)(.)*(\\[)&quot; + INTERNOT🔵</abbr></span>
<span class="-9094162731040816051" onmouseenter="enter('-9094162731040816051');" onmouseout="out('-9094162731040816051');" style="">  40     private static final int CHECKBOX_LENGTH = 2; // one ClickableSpan character + one space character   </span>
<span  style="">  41                                                                                                          </span>
<span class="1196031820703007842" onmouseenter="enter('1196031820703007842');" onmouseout="out('1196031820703007842');" style="">  42     private LinkTokenizer mTokenizer;                                                                    </span>
<span class="1190896655347967160" onmouseenter="enter('1190896655347967160');" onmouseout="out('1190896655347967160');" style="">  43     private List&lt;OnSelectionChangedListener&gt; listeners;                                                  </span>
<span class="-5202758860929245202" onmouseenter="enter('-5202758860929245202');" onmouseout="out('-5202758860929245202');" style="">  44     private OnCheckboxToggledListener mOnCheckboxToggledListener;                                        </span>
<span  style="">  45                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  46     @Override                                                                                            </span>
<span class="-4725396128083470659" onmouseenter="enter('-4725396128083470659');" onmouseout="out('-4725396128083470659');" style="">  47     public boolean enoughToFilter() {                                                                    </span>
<span class="-408752473959783546" onmouseenter="enter('-408752473959783546');" onmouseout="out('-408752473959783546');" style="">  48         String substringCursor = getText().toString().substring(getSelectionEnd());                      </span>
<span class="-9172431867047830396" onmouseenter="enter('-9172431867047830396');" onmouseout="out('-9172431867047830396');" style="">  49         Matcher matcherEdit = INTERNOTE_LINK_PATTERN_EDIT.matcher(substringCursor);                      </span>
<span  style="">  50                                                                                                          </span>
<span class="2663075153106693403" onmouseenter="enter('2663075153106693403');" onmouseout="out('2663075153106693403');" style="">  51         // When an internote link title is being edited, don&#x27;t show an autocomplete popup.               </span>
<span class="3648956898641204215" onmouseenter="enter('3648956898641204215');" onmouseout="out('3648956898641204215');" style="">  52         if (matcherEdit.lookingAt()) {                                                                   </span>
<span class="2950221330115688931" onmouseenter="enter('2950221330115688931');" onmouseout="out('2950221330115688931');" style="">  53             String substringEdit = substringCursor.substring(0, matcherEdit.end());                      </span>
<span class="1311569057139673901" onmouseenter="enter('1311569057139673901');" onmouseout="out('1311569057139673901');" style="">  54             Matcher matcherFull = INTERNOTE_LINK_PATTERN_FULL.matcher(substringEdit);                    </span>
<span  style="">  55                                                                                                          </span>
<span class="4323098233182236709" onmouseenter="enter('4323098233182236709');" onmouseout="out('4323098233182236709');" style="">  56             if (!matcherFull.lookingAt()) {                                                              </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">  57                 return false;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  58             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  59         }                                                                                                </span>
<span  style="">  60                                                                                                          </span>
<span class="8648892168213198446" onmouseenter="enter('8648892168213198446');" onmouseout="out('8648892168213198446');" style="">  61         Editable text = getText();                                                                       </span>
<span class="-5347114162693005051" onmouseenter="enter('-5347114162693005051');" onmouseout="out('-5347114162693005051');" style="">  62         int end = getSelectionEnd();                                                                     </span>
<span  style="">  63                                                                                                          </span>
<span class="-2364642465072686278" onmouseenter="enter('-2364642465072686278');" onmouseout="out('-2364642465072686278');" style="">  64         if (end &lt; 0) {                                                                                   </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">  65             return false;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  66         }                                                                                                </span>
<span  style="">  67                                                                                                          </span>
<span class="-6730134198157735680" onmouseenter="enter('-6730134198157735680');" onmouseout="out('-6730134198157735680');" style="">  68         int start = mTokenizer.findTokenStart(text, end);                                                </span>
<span class="3206229991437838506" onmouseenter="enter('3206229991437838506');" onmouseout="out('3206229991437838506');" style="">  69         return start &gt; 0 &amp;&amp; end - start &gt;= 1;                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  70     }                                                                                                    </span>
<span  style="">  71                                                                                                          </span>
<span class="7419298585035749039" onmouseenter="enter('7419298585035749039');" onmouseout="out('7419298585035749039');" style="">  72     public interface OnCheckboxToggledListener {                                                         </span>
<span class="-7775623224861892729" onmouseenter="enter('-7775623224861892729');" onmouseout="out('-7775623224861892729');" style="">  73         void onCheckboxToggled();                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  74     }                                                                                                    </span>
<span  style="">  75                                                                                                          </span>
<span class="9083968033793714051" onmouseenter="enter('9083968033793714051');" onmouseout="out('9083968033793714051');" style="">  76     public SimplenoteEditText(Context context) {                                                         </span>
<span class="-8232648159726954046" onmouseenter="enter('-8232648159726954046');" onmouseout="out('-8232648159726954046');" style="">  77         super(context);                                                                                  </span>
<span class="4798086328679447282" onmouseenter="enter('4798086328679447282');" onmouseout="out('4798086328679447282');" style="">  78         listeners = new ArrayList&lt;&gt;();                                                                   </span>
<span class="-4667942192763773056" onmouseenter="enter('-4667942192763773056');" onmouseout="out('-4667942192763773056');" style="">  79 &lt;&lt;&lt;&lt;&lt;&lt;&lt; GitAnalyzerPlus_ours                                                                             </span>
<span class="6741223626729319096" onmouseenter="enter('6741223626729319096');" onmouseout="out('6741223626729319096');" style="">  80 ||||||| GitAnalyzerPlus_base                                                                             </span>
<span class="8285102428439000867" onmouseenter="enter('8285102428439000867');" onmouseout="out('8285102428439000867');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  81         setTypeface(TypefaceCache.getTypeface(context, TypefaceCache.TYPEFACE_NAME_ROBOTO_REGULAR));     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  82     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  83                                                                                                          </span>
<span class="-5191028644893669048" onmouseenter="enter('-5191028644893669048');" onmouseout="out('-5191028644893669048');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  84     public SimplenoteEditText(Context context, AttributeSet attrs) {                                     </span>
<span class="6666522707728770706" onmouseenter="enter('6666522707728770706');" onmouseout="out('6666522707728770706');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  85         super(context, attrs);                                                                           </span>
<span class="4798086328679447282" onmouseenter="enter('4798086328679447282');" onmouseout="out('4798086328679447282');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  86         listeners = new ArrayList&lt;&gt;();                                                                   </span>
<span class="8285102428439000867" onmouseenter="enter('8285102428439000867');" onmouseout="out('8285102428439000867');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  87         setTypeface(TypefaceCache.getTypeface(context, TypefaceCache.TYPEFACE_NAME_ROBOTO_REGULAR));     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  88     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  89                                                                                                          </span>
<span class="-5033151626525601752" onmouseenter="enter('-5033151626525601752');" onmouseout="out('-5033151626525601752');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  90     public SimplenoteEditText(Context context, AttributeSet attrs, int defStyle) {                       </span>
<span class="1281987604327041578" onmouseenter="enter('1281987604327041578');" onmouseout="out('1281987604327041578');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  91         super(context, attrs, defStyle);                                                                 </span>
<span class="4798086328679447282" onmouseenter="enter('4798086328679447282');" onmouseout="out('4798086328679447282');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  92         listeners = new ArrayList&lt;&gt;();                                                                   </span>
<span class="8285102428439000867" onmouseenter="enter('8285102428439000867');" onmouseout="out('8285102428439000867');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  93         setTypeface(TypefaceCache.getTypeface(context, TypefaceCache.TYPEFACE_NAME_ROBOTO_REGULAR));     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  94     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  95                                                                                                          </span>
<span class="-59477443811309488" onmouseenter="enter('-59477443811309488');" onmouseout="out('-59477443811309488');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  96     public void addOnSelectionChangedListener(OnSelectionChangedListener o) {                            </span>
<span class="-2100774570383242241" onmouseenter="enter('-2100774570383242241');" onmouseout="out('-2100774570383242241');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  97         listeners.add(o);                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  98     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  99                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 100     @Override                                                                                            </span>
<span class="9204734548608604374" onmouseenter="enter('9204734548608604374');" onmouseout="out('9204734548608604374');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 101     protected void onSelectionChanged(int selStart, int selEnd) {                                        </span>
<span class="9084036534089177006" onmouseenter="enter('9084036534089177006');" onmouseout="out('9084036534089177006');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 102         super.onSelectionChanged(selStart, selEnd);                                                      </span>
<span class="1091766479730821238" onmouseenter="enter('1091766479730821238');" onmouseout="out('1091766479730821238');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 103         if (listeners != null) {                                                                         </span>
<span class="2531271156481149344" onmouseenter="enter('2531271156481149344');" onmouseout="out('2531271156481149344');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 104             for (OnSelectionChangedListener l : listeners)                                               </span>
<span class="-7270494200827421729" onmouseenter="enter('-7270494200827421729');" onmouseout="out('-7270494200827421729');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 105                 l.onSelectionChanged(selStart, selEnd);                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 106         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 107     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 108                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 109     @Override                                                                                            </span>
<span class="-8866382987303008115" onmouseenter="enter('-8866382987303008115');" onmouseout="out('-8866382987303008115');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 110     public boolean onKeyPreIme(int keyCode, KeyEvent event) {                                            </span>
<span class="-7860565181348615145" onmouseenter="enter('-7860565181348615145');" onmouseout="out('-7860565181348615145');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 111         if (event.getKeyCode() == KeyEvent.KEYCODE_BACK) {                                               </span>
<span class="351273221058910218" onmouseenter="enter('351273221058910218');" onmouseout="out('351273221058910218');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 112             clearFocus();                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 113         }                                                                                                </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 114                                                                                                          </span>
<span class="-1286123639299516067" onmouseenter="enter('-1286123639299516067');" onmouseout="out('-1286123639299516067');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 115         return super.onKeyPreIme(keyCode, event);                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 116     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 117                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 118     @Override                                                                                            </span>
<span class="-6350469524661550536" onmouseenter="enter('-6350469524661550536');" onmouseout="out('-6350469524661550536');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 119     protected void onFocusChanged(boolean focused, int direction, Rect previouslyFocusedRect) {          </span>
<span class="-3879914196590028915" onmouseenter="enter('-3879914196590028915');" onmouseout="out('-3879914196590028915');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 120         if (focused) {                                                                                   </span>
<span class="-5153257938979319281" onmouseenter="enter('-5153257938979319281');" onmouseout="out('-5153257938979319281');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 121             setCursorVisible(true);                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 122         }                                                                                                </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 123                                                                                                          </span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style=""> 124 =======                                                                                                  </span>
<span class="8285102428439000867" onmouseenter="enter('8285102428439000867');" onmouseout="out('8285102428439000867');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 125         setTypeface(TypefaceCache.getTypeface(context, TypefaceCache.TYPEFACE_NAME_ROBOTO_REGULAR));     </span>
<span class="-4364621221695153856" onmouseenter="enter('-4364621221695153856');" onmouseout="out('-4364621221695153856');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 126         setLinkTokenizer();                                                                              </span>
<span class="-1382546150375666264" onmouseenter="enter('-1382546150375666264');" onmouseout="out('-1382546150375666264');" style=""> 127 &gt;&gt;&gt;&gt;&gt;&gt;&gt; GitAnalyzerPlus_theirs                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 128     }                                                                                                    </span>
<span  style=""> 129                                                                                                          </span>
<span class="-5191028644893669048" onmouseenter="enter('-5191028644893669048');" onmouseout="out('-5191028644893669048');" style=""> 130     public SimplenoteEditText(Context context, AttributeSet attrs) {                                     </span>
<span class="6666522707728770706" onmouseenter="enter('6666522707728770706');" onmouseout="out('6666522707728770706');" style=""> 131         super(context, attrs);                                                                           </span>
<span class="4798086328679447282" onmouseenter="enter('4798086328679447282');" onmouseout="out('4798086328679447282');" style=""> 132         listeners = new ArrayList&lt;&gt;();                                                                   </span>
<span class="-4667942192763773056" onmouseenter="enter('-4667942192763773056');" onmouseout="out('-4667942192763773056');" style=""> 133 &lt;&lt;&lt;&lt;&lt;&lt;&lt; GitAnalyzerPlus_ours                                                                             </span>
<span class="6741223626729319096" onmouseenter="enter('6741223626729319096');" onmouseout="out('6741223626729319096');" style=""> 134 ||||||| GitAnalyzerPlus_base                                                                             </span>
<span class="4798086328679447282" onmouseenter="enter('4798086328679447282');" onmouseout="out('4798086328679447282');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 135         listeners = new ArrayList&lt;&gt;();                                                                   </span>
<span class="8285102428439000867" onmouseenter="enter('8285102428439000867');" onmouseout="out('8285102428439000867');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 136         setTypeface(TypefaceCache.getTypeface(context, TypefaceCache.TYPEFACE_NAME_ROBOTO_REGULAR));     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 137     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 138                                                                                                          </span>
<span class="-5033151626525601752" onmouseenter="enter('-5033151626525601752');" onmouseout="out('-5033151626525601752');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 139     public SimplenoteEditText(Context context, AttributeSet attrs, int defStyle) {                       </span>
<span class="1281987604327041578" onmouseenter="enter('1281987604327041578');" onmouseout="out('1281987604327041578');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 140         super(context, attrs, defStyle);                                                                 </span>
<span class="4798086328679447282" onmouseenter="enter('4798086328679447282');" onmouseout="out('4798086328679447282');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 141         listeners = new ArrayList&lt;&gt;();                                                                   </span>
<span class="8285102428439000867" onmouseenter="enter('8285102428439000867');" onmouseout="out('8285102428439000867');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 142         setTypeface(TypefaceCache.getTypeface(context, TypefaceCache.TYPEFACE_NAME_ROBOTO_REGULAR));     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 143     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 144                                                                                                          </span>
<span class="-59477443811309488" onmouseenter="enter('-59477443811309488');" onmouseout="out('-59477443811309488');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 145     public void addOnSelectionChangedListener(OnSelectionChangedListener o) {                            </span>
<span class="-2100774570383242241" onmouseenter="enter('-2100774570383242241');" onmouseout="out('-2100774570383242241');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 146         listeners.add(o);                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 147     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 148                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 149     @Override                                                                                            </span>
<span class="9204734548608604374" onmouseenter="enter('9204734548608604374');" onmouseout="out('9204734548608604374');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 150     protected void onSelectionChanged(int selStart, int selEnd) {                                        </span>
<span class="9084036534089177006" onmouseenter="enter('9084036534089177006');" onmouseout="out('9084036534089177006');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 151         super.onSelectionChanged(selStart, selEnd);                                                      </span>
<span class="1091766479730821238" onmouseenter="enter('1091766479730821238');" onmouseout="out('1091766479730821238');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 152         if (listeners != null) {                                                                         </span>
<span class="2531271156481149344" onmouseenter="enter('2531271156481149344');" onmouseout="out('2531271156481149344');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 153             for (OnSelectionChangedListener l : listeners)                                               </span>
<span class="-7270494200827421729" onmouseenter="enter('-7270494200827421729');" onmouseout="out('-7270494200827421729');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 154                 l.onSelectionChanged(selStart, selEnd);                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 155         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 156     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 157                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 158     @Override                                                                                            </span>
<span class="-8866382987303008115" onmouseenter="enter('-8866382987303008115');" onmouseout="out('-8866382987303008115');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 159     public boolean onKeyPreIme(int keyCode, KeyEvent event) {                                            </span>
<span class="-7860565181348615145" onmouseenter="enter('-7860565181348615145');" onmouseout="out('-7860565181348615145');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 160         if (event.getKeyCode() == KeyEvent.KEYCODE_BACK) {                                               </span>
<span class="351273221058910218" onmouseenter="enter('351273221058910218');" onmouseout="out('351273221058910218');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 161             clearFocus();                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 162         }                                                                                                </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 163                                                                                                          </span>
<span class="-1286123639299516067" onmouseenter="enter('-1286123639299516067');" onmouseout="out('-1286123639299516067');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 164         return super.onKeyPreIme(keyCode, event);                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 165     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 166                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 167     @Override                                                                                            </span>
<span class="-6350469524661550536" onmouseenter="enter('-6350469524661550536');" onmouseout="out('-6350469524661550536');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 168     protected void onFocusChanged(boolean focused, int direction, Rect previouslyFocusedRect) {          </span>
<span class="-3879914196590028915" onmouseenter="enter('-3879914196590028915');" onmouseout="out('-3879914196590028915');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 169         if (focused) {                                                                                   </span>
<span class="-5153257938979319281" onmouseenter="enter('-5153257938979319281');" onmouseout="out('-5153257938979319281');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 170             setCursorVisible(true);                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 171         }                                                                                                </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 172                                                                                                          </span>
<span class="-3061316988982909646" onmouseenter="enter('-3061316988982909646');" onmouseout="out('-3061316988982909646');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 173         super.onFocusChanged(focused, direction, previouslyFocusedRect);                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 174     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 175                                                                                                          </span>
<span class="4904364548788344608" onmouseenter="enter('4904364548788344608');" onmouseout="out('4904364548788344608');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 176     // Updates the ImageSpan drawable to the new checked state                                           </span>
<span class="1702464047281652539" onmouseenter="enter('1702464047281652539');" onmouseout="out('1702464047281652539');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 177     public void toggleCheckbox(final CheckableSpan checkableSpan) {                                      </span>
<span class="6590259663964917636" onmouseenter="enter('6590259663964917636');" onmouseout="out('6590259663964917636');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 178         setCursorVisible(false);                                                                         </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 179                                                                                                          </span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style=""> 180 =======                                                                                                  </span>
<span class="8285102428439000867" onmouseenter="enter('8285102428439000867');" onmouseout="out('8285102428439000867');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 181         setTypeface(TypefaceCache.getTypeface(context, TypefaceCache.TYPEFACE_NAME_ROBOTO_REGULAR));     </span>
<span class="-4364621221695153856" onmouseenter="enter('-4364621221695153856');" onmouseout="out('-4364621221695153856');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 182         setLinkTokenizer();                                                                              </span>
<span class="-1382546150375666264" onmouseenter="enter('-1382546150375666264');" onmouseout="out('-1382546150375666264');" style=""> 183 &gt;&gt;&gt;&gt;&gt;&gt;&gt; GitAnalyzerPlus_theirs                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 184     }                                                                                                    </span>
<span  style=""> 185                                                                                                          </span>
<span class="-5033151626525601752" onmouseenter="enter('-5033151626525601752');" onmouseout="out('-5033151626525601752');" style=""> 186     public SimplenoteEditText(Context context, AttributeSet attrs, int defStyle) {                       </span>
<span class="1281987604327041578" onmouseenter="enter('1281987604327041578');" onmouseout="out('1281987604327041578');" style=""> 187         super(context, attrs, defStyle);                                                                 </span>
<span class="4798086328679447282" onmouseenter="enter('4798086328679447282');" onmouseout="out('4798086328679447282');" style=""> 188         listeners = new ArrayList&lt;&gt;();                                                                   </span>
<span class="-4667942192763773056" onmouseenter="enter('-4667942192763773056');" onmouseout="out('-4667942192763773056');" style=""> 189 &lt;&lt;&lt;&lt;&lt;&lt;&lt; GitAnalyzerPlus_ours                                                                             </span>
<span class="6741223626729319096" onmouseenter="enter('6741223626729319096');" onmouseout="out('6741223626729319096');" style=""> 190 ||||||| GitAnalyzerPlus_base                                                                             </span>
<span class="1281987604327041578" onmouseenter="enter('1281987604327041578');" onmouseout="out('1281987604327041578');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 191         super(context, attrs, defStyle);                                                                 </span>
<span class="4798086328679447282" onmouseenter="enter('4798086328679447282');" onmouseout="out('4798086328679447282');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 192         listeners = new ArrayList&lt;&gt;();                                                                   </span>
<span class="8285102428439000867" onmouseenter="enter('8285102428439000867');" onmouseout="out('8285102428439000867');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 193         setTypeface(TypefaceCache.getTypeface(context, TypefaceCache.TYPEFACE_NAME_ROBOTO_REGULAR));     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 194     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 195                                                                                                          </span>
<span class="-59477443811309488" onmouseenter="enter('-59477443811309488');" onmouseout="out('-59477443811309488');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 196     public void addOnSelectionChangedListener(OnSelectionChangedListener o) {                            </span>
<span class="-2100774570383242241" onmouseenter="enter('-2100774570383242241');" onmouseout="out('-2100774570383242241');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 197         listeners.add(o);                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 198     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 199                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 200     @Override                                                                                            </span>
<span class="9204734548608604374" onmouseenter="enter('9204734548608604374');" onmouseout="out('9204734548608604374');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 201     protected void onSelectionChanged(int selStart, int selEnd) {                                        </span>
<span class="9084036534089177006" onmouseenter="enter('9084036534089177006');" onmouseout="out('9084036534089177006');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 202         super.onSelectionChanged(selStart, selEnd);                                                      </span>
<span class="1091766479730821238" onmouseenter="enter('1091766479730821238');" onmouseout="out('1091766479730821238');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 203         if (listeners != null) {                                                                         </span>
<span class="2531271156481149344" onmouseenter="enter('2531271156481149344');" onmouseout="out('2531271156481149344');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 204             for (OnSelectionChangedListener l : listeners)                                               </span>
<span class="-7270494200827421729" onmouseenter="enter('-7270494200827421729');" onmouseout="out('-7270494200827421729');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 205                 l.onSelectionChanged(selStart, selEnd);                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 206         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 207     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 208                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 209     @Override                                                                                            </span>
<span class="-8866382987303008115" onmouseenter="enter('-8866382987303008115');" onmouseout="out('-8866382987303008115');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 210     public boolean onKeyPreIme(int keyCode, KeyEvent event) {                                            </span>
<span class="-7860565181348615145" onmouseenter="enter('-7860565181348615145');" onmouseout="out('-7860565181348615145');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 211         if (event.getKeyCode() == KeyEvent.KEYCODE_BACK) {                                               </span>
<span class="351273221058910218" onmouseenter="enter('351273221058910218');" onmouseout="out('351273221058910218');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 212             clearFocus();                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 213         }                                                                                                </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 214                                                                                                          </span>
<span class="-1286123639299516067" onmouseenter="enter('-1286123639299516067');" onmouseout="out('-1286123639299516067');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 215         return super.onKeyPreIme(keyCode, event);                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 216     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 217                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 218     @Override                                                                                            </span>
<span class="-6350469524661550536" onmouseenter="enter('-6350469524661550536');" onmouseout="out('-6350469524661550536');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 219     protected void onFocusChanged(boolean focused, int direction, Rect previouslyFocusedRect) {          </span>
<span class="-3879914196590028915" onmouseenter="enter('-3879914196590028915');" onmouseout="out('-3879914196590028915');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 220         if (focused) {                                                                                   </span>
<span class="-5153257938979319281" onmouseenter="enter('-5153257938979319281');" onmouseout="out('-5153257938979319281');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 221             setCursorVisible(true);                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 222         }                                                                                                </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 223                                                                                                          </span>
<span class="-3061316988982909646" onmouseenter="enter('-3061316988982909646');" onmouseout="out('-3061316988982909646');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 224         super.onFocusChanged(focused, direction, previouslyFocusedRect);                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 225     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 226                                                                                                          </span>
<span class="4904364548788344608" onmouseenter="enter('4904364548788344608');" onmouseout="out('4904364548788344608');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 227     // Updates the ImageSpan drawable to the new checked state                                           </span>
<span class="1702464047281652539" onmouseenter="enter('1702464047281652539');" onmouseout="out('1702464047281652539');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 228     public void toggleCheckbox(final CheckableSpan checkableSpan) {                                      </span>
<span class="6590259663964917636" onmouseenter="enter('6590259663964917636');" onmouseout="out('6590259663964917636');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 229         setCursorVisible(false);                                                                         </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 230                                                                                                          </span>
<span class="-1090656868967804943" onmouseenter="enter('-1090656868967804943');" onmouseout="out('-1090656868967804943');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 231         final Editable editable = getText();                                                             </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 232                                                                                                          </span>
<span class="2794490867551519784" onmouseenter="enter('2794490867551519784');" onmouseout="out('2794490867551519784');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 233         final int checkboxStart = editable.getSpanStart(checkableSpan);                                  </span>
<span class="-5528412093877694659" onmouseenter="enter('-5528412093877694659');" onmouseout="out('-5528412093877694659');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 234         final int checkboxEnd = editable.getSpanEnd(checkableSpan);                                      </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 235                                                                                                          </span>
<span class="-6572749467453395280" onmouseenter="enter('-6572749467453395280');" onmouseout="out('-6572749467453395280');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 236         final int selectionStart = getSelectionStart();                                                  </span>
<span class="5061259277362521056" onmouseenter="enter('5061259277362521056');" onmouseout="out('5061259277362521056');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 237         final int selectionEnd = getSelectionEnd();                                                      </span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style=""> 238 =======                                                                                                  </span>
<span class="8285102428439000867" onmouseenter="enter('8285102428439000867');" onmouseout="out('8285102428439000867');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 239         setTypeface(TypefaceCache.getTypeface(context, TypefaceCache.TYPEFACE_NAME_ROBOTO_REGULAR));     </span>
<span class="-4364621221695153856" onmouseenter="enter('-4364621221695153856');" onmouseout="out('-4364621221695153856');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 240         setLinkTokenizer();                                                                              </span>
<span class="-1382546150375666264" onmouseenter="enter('-1382546150375666264');" onmouseout="out('-1382546150375666264');" style=""> 241 &gt;&gt;&gt;&gt;&gt;&gt;&gt; GitAnalyzerPlus_theirs                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 242     }                                                                                                    </span>
<span  style=""> 243                                                                                                          </span>
<span class="-59477443811309488" onmouseenter="enter('-59477443811309488');" onmouseout="out('-59477443811309488');" style=""> 244     public void addOnSelectionChangedListener(OnSelectionChangedListener o) {                            </span>
<span class="-2100774570383242241" onmouseenter="enter('-2100774570383242241');" onmouseout="out('-2100774570383242241');" style=""> 245         listeners.add(o);                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 246     }                                                                                                    </span>
<span  style=""> 247                                                                                                          </span>
<span class="7118550889075315064" onmouseenter="enter('7118550889075315064');" onmouseout="out('7118550889075315064');" style=""> 248     private void setLinkTokenizer() {                                                                    </span>
<span class="540804409753221409" onmouseenter="enter('540804409753221409');" onmouseout="out('540804409753221409');" style=""> 249         mTokenizer = new LinkTokenizer();                                                                </span>
<span class="-5685679569396619722" onmouseenter="enter('-5685679569396619722');" onmouseout="out('-5685679569396619722');" style=""> 250         setOnItemClickListener(this);                                                                    </span>
<span class="5188042449406366660" onmouseenter="enter('5188042449406366660');" onmouseout="out('5188042449406366660');" style=""> 251         setTokenizer(mTokenizer);                                                                        </span>
<span class="6747402731313982960" onmouseenter="enter('6747402731313982960');" onmouseout="out('6747402731313982960');" style=""> 252         setThreshold(1);                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 253     }                                                                                                    </span>
<span  style=""> 254                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 255     @Override                                                                                            </span>
<span class="-6307048688277996884" onmouseenter="enter('-6307048688277996884');" onmouseout="out('-6307048688277996884');" style=""> 256     public void onItemClick(AdapterView&lt;?&gt; parent, View view, int position, long id) {                   </span>
<span class="7948482626287429940" onmouseenter="enter('7948482626287429940');" onmouseout="out('7948482626287429940');" style=""> 257         @SuppressWarnings(&quot;unchecked&quot;)                                                                   </span>
<span class="-2430703696117484912" onmouseenter="enter('-2430703696117484912');" onmouseout="out('-2430703696117484912');" style=""><abbr title=" 258         Bucket.ObjectCursor&lt;Note&gt; cursor = (Bucket.ObjectCursor&lt;Note&gt;) parent.getAdapter().getItem(position);"> 258         Bucket.ObjectCursor&lt;Note&gt; cursor = (Bucket.ObjectCursor&lt;Note&gt;) parent.getAdapter().getItem(positi🔵</abbr></span>
<span class="-1339731364416604074" onmouseenter="enter('-1339731364416604074');" onmouseout="out('-1339731364416604074');" style=""> 259         String key = cursor.getString(cursor.getColumnIndex(Note.KEY_PROPERTY)).replace(&quot;note&quot;, &quot;&quot;);     </span>
<span class="-5413912739011752532" onmouseenter="enter('-5413912739011752532');" onmouseout="out('-5413912739011752532');" style=""> 260         String text = SimplenoteLinkify.getNoteLink(key);                                                </span>
<span class="-6283161434129042153" onmouseenter="enter('-6283161434129042153');" onmouseout="out('-6283161434129042153');" style=""> 261         int start = Math.max(getSelectionStart(), 0);                                                    </span>
<span class="-5812761034589287295" onmouseenter="enter('-5812761034589287295');" onmouseout="out('-5812761034589287295');" style=""> 262         int end = Math.max(getSelectionEnd(), 0);                                                        </span>
<span class="-5970569984167246213" onmouseenter="enter('-5970569984167246213');" onmouseout="out('-5970569984167246213');" style=""> 263         getEditableText().replace(Math.min(start, end), Math.max(start, end), text, 0, text.length());   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 264     }                                                                                                    </span>
<span  style=""> 265                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 266     @Override                                                                                            </span>
<span class="9204734548608604374" onmouseenter="enter('9204734548608604374');" onmouseout="out('9204734548608604374');" style=""> 267     protected void onSelectionChanged(int selStart, int selEnd) {                                        </span>
<span class="9084036534089177006" onmouseenter="enter('9084036534089177006');" onmouseout="out('9084036534089177006');" style=""> 268         super.onSelectionChanged(selStart, selEnd);                                                      </span>
<span class="1091766479730821238" onmouseenter="enter('1091766479730821238');" onmouseout="out('1091766479730821238');" style=""> 269         if (listeners != null) {                                                                         </span>
<span class="2531271156481149344" onmouseenter="enter('2531271156481149344');" onmouseout="out('2531271156481149344');" style=""> 270             for (OnSelectionChangedListener l : listeners)                                               </span>
<span class="-7270494200827421729" onmouseenter="enter('-7270494200827421729');" onmouseout="out('-7270494200827421729');" style=""> 271                 l.onSelectionChanged(selStart, selEnd);                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 272         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 273     }                                                                                                    </span>
<span  style=""> 274                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 275     @Override                                                                                            </span>
<span class="-8866382987303008115" onmouseenter="enter('-8866382987303008115');" onmouseout="out('-8866382987303008115');" style=""> 276     public boolean onKeyPreIme(int keyCode, KeyEvent event) {                                            </span>
<span class="-7860565181348615145" onmouseenter="enter('-7860565181348615145');" onmouseout="out('-7860565181348615145');" style=""> 277         if (event.getKeyCode() == KeyEvent.KEYCODE_BACK) {                                               </span>
<span class="351273221058910218" onmouseenter="enter('351273221058910218');" onmouseout="out('351273221058910218');" style=""> 278             clearFocus();                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 279         }                                                                                                </span>
<span  style=""> 280                                                                                                          </span>
<span class="-1286123639299516067" onmouseenter="enter('-1286123639299516067');" onmouseout="out('-1286123639299516067');" style=""> 281         return super.onKeyPreIme(keyCode, event);                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 282     }                                                                                                    </span>
<span  style=""> 283                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 284     @Override                                                                                            </span>
<span class="-6350469524661550536" onmouseenter="enter('-6350469524661550536');" onmouseout="out('-6350469524661550536');" style=""> 285     protected void onFocusChanged(boolean focused, int direction, Rect previouslyFocusedRect) {          </span>
<span class="-3879914196590028915" onmouseenter="enter('-3879914196590028915');" onmouseout="out('-3879914196590028915');" style=""> 286         if (focused) {                                                                                   </span>
<span class="-5153257938979319281" onmouseenter="enter('-5153257938979319281');" onmouseout="out('-5153257938979319281');" style=""> 287             setCursorVisible(true);                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 288         }                                                                                                </span>
<span  style=""> 289                                                                                                          </span>
<span class="-3061316988982909646" onmouseenter="enter('-3061316988982909646');" onmouseout="out('-3061316988982909646');" style=""> 290         super.onFocusChanged(focused, direction, previouslyFocusedRect);                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 291     }                                                                                                    </span>
<span  style=""> 292                                                                                                          </span>
<span class="4904364548788344608" onmouseenter="enter('4904364548788344608');" onmouseout="out('4904364548788344608');" style=""> 293     // Updates the ImageSpan drawable to the new checked state                                           </span>
<span class="1702464047281652539" onmouseenter="enter('1702464047281652539');" onmouseout="out('1702464047281652539');" style=""> 294     public void toggleCheckbox(final CheckableSpan checkableSpan) {                                      </span>
<span class="6590259663964917636" onmouseenter="enter('6590259663964917636');" onmouseout="out('6590259663964917636');" style=""> 295         setCursorVisible(false);                                                                         </span>
<span  style=""> 296                                                                                                          </span>
<span class="-1090656868967804943" onmouseenter="enter('-1090656868967804943');" onmouseout="out('-1090656868967804943');" style=""> 297         final Editable editable = getText();                                                             </span>
<span  style=""> 298                                                                                                          </span>
<span class="2794490867551519784" onmouseenter="enter('2794490867551519784');" onmouseout="out('2794490867551519784');" style=""> 299         final int checkboxStart = editable.getSpanStart(checkableSpan);                                  </span>
<span class="-5528412093877694659" onmouseenter="enter('-5528412093877694659');" onmouseout="out('-5528412093877694659');" style=""> 300         final int checkboxEnd = editable.getSpanEnd(checkableSpan);                                      </span>
<span  style=""> 301                                                                                                          </span>
<span class="-6572749467453395280" onmouseenter="enter('-6572749467453395280');" onmouseout="out('-6572749467453395280');" style=""> 302         final int selectionStart = getSelectionStart();                                                  </span>
<span class="5061259277362521056" onmouseenter="enter('5061259277362521056');" onmouseout="out('5061259277362521056');" style=""> 303         final int selectionEnd = getSelectionEnd();                                                      </span>
<span  style=""> 304                                                                                                          </span>
<span class="2426952674624776126" onmouseenter="enter('2426952674624776126');" onmouseout="out('2426952674624776126');" style=""> 305         final ImageSpan[] imageSpans = editable.getSpans(checkboxStart, checkboxEnd, ImageSpan.class);   </span>
<span class="3424137973787154724" onmouseenter="enter('3424137973787154724');" onmouseout="out('3424137973787154724');" style=""> 306         if (imageSpans.length &gt; 0) {                                                                     </span>
<span class="-650120241318912925" onmouseenter="enter('-650120241318912925');" onmouseout="out('-650120241318912925');" style=""> 307             // ImageSpans are static, so we need to remove the old one and replace :|                    </span>
<span class="3096208024950867570" onmouseenter="enter('3096208024950867570');" onmouseout="out('3096208024950867570');" style=""> 308             Drawable iconDrawable = ContextCompat.getDrawable(getContext(),                              </span>
<span class="6549537428500511361" onmouseenter="enter('6549537428500511361');" onmouseout="out('6549537428500511361');" style=""> 309                     checkableSpan.isChecked()                                                            </span>
<span class="1475528954993506852" onmouseenter="enter('1475528954993506852');" onmouseout="out('1475528954993506852');" style=""> 310                             ? R.drawable.ic_checkbox_checked_24px                                        </span>
<span class="919975553509049414" onmouseenter="enter('919975553509049414');" onmouseout="out('919975553509049414');" style=""> 311                             : R.drawable.ic_checkbox_unchecked_24px);                                    </span>
<span class="-4575840480157011089" onmouseenter="enter('-4575840480157011089');" onmouseout="out('-4575840480157011089');" style=""><abbr title=" 312             iconDrawable = DrawableUtils.tintDrawableWithResource(getContext(), iconDrawable, R.color.text_title_disabled);"> 312             iconDrawable = DrawableUtils.tintDrawableWithResource(getContext(), iconDrawable, R.color.tex🔵</abbr></span>
<span class="350955667428051936" onmouseenter="enter('350955667428051936');" onmouseout="out('350955667428051936');" style=""> 313             int iconSize = DisplayUtils.getChecklistIconSize(getContext());                              </span>
<span class="2517609942364691225" onmouseenter="enter('2517609942364691225');" onmouseout="out('2517609942364691225');" style=""> 314             iconDrawable.setBounds(0, 0, iconSize, iconSize);                                            </span>
<span class="1660574638142231511" onmouseenter="enter('1660574638142231511');" onmouseout="out('1660574638142231511');" style=""> 315             final CenteredImageSpan newImageSpan = new CenteredImageSpan(getContext(), iconDrawable);    </span>
<span class="5002906591139078644" onmouseenter="enter('5002906591139078644');" onmouseout="out('5002906591139078644');" style=""> 316             new Handler().post(new Runnable() {                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 317                 @Override                                                                                </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 318                 public void run() {                                                                      </span>
<span class="8105183574639194653" onmouseenter="enter('8105183574639194653');" onmouseout="out('8105183574639194653');" style=""><abbr title=" 319                     editable.setSpan(newImageSpan, checkboxStart, checkboxEnd, Spanned.SPAN_EXCLUSIVE_EXCLUSIVE);"> 319                     editable.setSpan(newImageSpan, checkboxStart, checkboxEnd, Spanned.SPAN_EXCLUSIVE_EXC🔵</abbr></span>
<span class="7563639754547712576" onmouseenter="enter('7563639754547712576');" onmouseout="out('7563639754547712576');" style=""> 320                     editable.removeSpan(imageSpans[0]);                                                  </span>
<span class="-1772473758449618286" onmouseenter="enter('-1772473758449618286');" onmouseout="out('-1772473758449618286');" style=""> 321                     fixLineSpacing();                                                                    </span>
<span  style=""> 322                                                                                                          </span>
<span class="-3445748522530054247" onmouseenter="enter('-3445748522530054247');" onmouseout="out('-3445748522530054247');" style=""> 323                     // Restore the selection                                                             </span>
<span class="530073190084792975" onmouseenter="enter('530073190084792975');" onmouseout="out('530073190084792975');" style=""> 324                     if (selectionStart &gt;= 0                                                              </span>
<span class="-405023996198629042" onmouseenter="enter('-405023996198629042');" onmouseout="out('-405023996198629042');" style=""> 325                             &amp;&amp; selectionStart &lt;= editable.length()                                       </span>
<span class="229632755727724018" onmouseenter="enter('229632755727724018');" onmouseout="out('229632755727724018');" style=""> 326                             &amp;&amp; selectionEnd &lt;= editable.length() &amp;&amp; hasFocus()) {                        </span>
<span class="-5633353852558776206" onmouseenter="enter('-5633353852558776206');" onmouseout="out('-5633353852558776206');" style=""> 327                         setSelection(selectionStart, selectionEnd);                                      </span>
<span class="-5153257938979319281" onmouseenter="enter('-5153257938979319281');" onmouseout="out('-5153257938979319281');" style=""> 328                         setCursorVisible(true);                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 329                     }                                                                                    </span>
<span  style=""> 330                                                                                                          </span>
<span class="1425396247006298539" onmouseenter="enter('1425396247006298539');" onmouseout="out('1425396247006298539');" style=""> 331                     if (mOnCheckboxToggledListener != null) {                                            </span>
<span class="-2776571883490751786" onmouseenter="enter('-2776571883490751786');" onmouseout="out('-2776571883490751786');" style=""> 332                         mOnCheckboxToggledListener.onCheckboxToggled();                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 333                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 334                 }                                                                                        </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 335             });                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 336         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 337     }                                                                                                    </span>
<span  style=""> 338                                                                                                          </span>
<span class="-5129075646964696371" onmouseenter="enter('-5129075646964696371');" onmouseout="out('-5129075646964696371');" style=""> 339     // Returns the line position of the text cursor                                                      </span>
<span class="-4790209518368575529" onmouseenter="enter('-4790209518368575529');" onmouseout="out('-4790209518368575529');" style=""> 340     private int getCurrentCursorLine() {                                                                 </span>
<span class="-8708010820158817009" onmouseenter="enter('-8708010820158817009');" onmouseout="out('-8708010820158817009');" style=""> 341         int selectionStart = getSelectionStart();                                                        </span>
<span class="-9041693021121574938" onmouseenter="enter('-9041693021121574938');" onmouseout="out('-9041693021121574938');" style=""> 342         Layout layout = getLayout();                                                                     </span>
<span  style=""> 343                                                                                                          </span>
<span class="-3402438836469275129" onmouseenter="enter('-3402438836469275129');" onmouseout="out('-3402438836469275129');" style=""> 344         if (!(selectionStart == -1)) {                                                                   </span>
<span class="-5607640624285366578" onmouseenter="enter('-5607640624285366578');" onmouseout="out('-5607640624285366578');" style=""> 345             return layout.getLineForOffset(selectionStart);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 346         }                                                                                                </span>
<span  style=""> 347                                                                                                          </span>
<span class="-8269198090232257590" onmouseenter="enter('-8269198090232257590');" onmouseout="out('-8269198090232257590');" style=""> 348         return 0;                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 349     }                                                                                                    </span>
<span  style=""> 350                                                                                                          </span>
<span class="-2056093237925143337" onmouseenter="enter('-2056093237925143337');" onmouseout="out('-2056093237925143337');" style=""> 351     public void insertChecklist() {                                                                      </span>
<span class="4507197880212123913" onmouseenter="enter('4507197880212123913');" onmouseout="out('4507197880212123913');" style=""> 352         int start, end;                                                                                  </span>
<span class="-47193053300540183" onmouseenter="enter('-47193053300540183');" onmouseout="out('-47193053300540183');" style=""> 353         int lineNumber = getCurrentCursorLine();                                                         </span>
<span class="5931814074513814524" onmouseenter="enter('5931814074513814524');" onmouseout="out('5931814074513814524');" style=""> 354         start = getLayout().getLineStart(lineNumber);                                                    </span>
<span  style=""> 355                                                                                                          </span>
<span class="4849153140254661183" onmouseenter="enter('4849153140254661183');" onmouseout="out('4849153140254661183');" style=""> 356         if (getSelectionEnd() &gt; getSelectionStart() &amp;&amp; !selectionIsOnSameLine()) {                       </span>
<span class="-2157237143863252877" onmouseenter="enter('-2157237143863252877');" onmouseout="out('-2157237143863252877');" style=""> 357             end = getSelectionEnd();                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 358         } else {                                                                                         </span>
<span class="2502740913562218300" onmouseenter="enter('2502740913562218300');" onmouseout="out('2502740913562218300');" style=""> 359             end = getLayout().getLineEnd(lineNumber);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 360         }                                                                                                </span>
<span  style=""> 361                                                                                                          </span>
<span class="2155198360249988636" onmouseenter="enter('2155198360249988636');" onmouseout="out('2155198360249988636');" style=""><abbr title=" 362         SpannableStringBuilder workingString = new SpannableStringBuilder(getText().subSequence(start, end));"> 362         SpannableStringBuilder workingString = new SpannableStringBuilder(getText().subSequence(start, en🔵</abbr></span>
<span class="-3429280970080248112" onmouseenter="enter('-3429280970080248112');" onmouseout="out('-3429280970080248112');" style=""> 363         Editable editable = getText();                                                                   </span>
<span class="-1786745955335503454" onmouseenter="enter('-1786745955335503454');" onmouseout="out('-1786745955335503454');" style=""> 364         if (editable.length() &lt; start || editable.length() &lt; end) {                                      </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 365             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 366         }                                                                                                </span>
<span  style=""> 367                                                                                                          </span>
<span class="-4021007956188151859" onmouseenter="enter('-4021007956188151859');" onmouseout="out('-4021007956188151859');" style=""> 368         int previousSelection = getSelectionStart();                                                     </span>
<span class="-7401262641884842036" onmouseenter="enter('-7401262641884842036');" onmouseout="out('-7401262641884842036');" style=""><abbr title=" 369         CheckableSpan[] checkableSpans = workingString.getSpans(0, workingString.length(), CheckableSpan.class);"> 369         CheckableSpan[] checkableSpans = workingString.getSpans(0, workingString.length(), CheckableSpan.🔵</abbr></span>
<span class="-3983435901659757897" onmouseenter="enter('-3983435901659757897');" onmouseout="out('-3983435901659757897');" style=""> 370         if (checkableSpans.length &gt; 0) {                                                                 </span>
<span class="-1723631309680670098" onmouseenter="enter('-1723631309680670098');" onmouseout="out('-1723631309680670098');" style=""> 371             // Remove any CheckableSpans found                                                           </span>
<span class="8606250068555850418" onmouseenter="enter('8606250068555850418');" onmouseout="out('8606250068555850418');" style=""> 372             for (CheckableSpan span: checkableSpans) {                                                   </span>
<span class="-8209396112528216299" onmouseenter="enter('-8209396112528216299');" onmouseout="out('-8209396112528216299');" style=""> 373                 workingString.replace(                                                                   </span>
<span class="7365374273051143475" onmouseenter="enter('7365374273051143475');" onmouseout="out('7365374273051143475');" style=""> 374                         workingString.getSpanStart(span),                                                </span>
<span class="5673880950278913259" onmouseenter="enter('5673880950278913259');" onmouseout="out('5673880950278913259');" style=""> 375                         workingString.getSpanEnd(span) + 1,                                              </span>
<span class="7887690425633568697" onmouseenter="enter('7887690425633568697');" onmouseout="out('7887690425633568697');" style=""> 376                         &quot;&quot;                                                                               </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 377                 );                                                                                       </span>
<span class="-7905663944685048412" onmouseenter="enter('-7905663944685048412');" onmouseout="out('-7905663944685048412');" style=""> 378                 workingString.removeSpan(span);                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 379             }                                                                                            </span>
<span  style=""> 380                                                                                                          </span>
<span class="1818093574225738447" onmouseenter="enter('1818093574225738447');" onmouseout="out('1818093574225738447');" style=""> 381             editable.replace(start, end, workingString);                                                 </span>
<span  style=""> 382                                                                                                          </span>
<span class="559052113481581758" onmouseenter="enter('559052113481581758');" onmouseout="out('559052113481581758');" style=""> 383             if (checkableSpans.length == 1) {                                                            </span>
<span class="-811974177834571960" onmouseenter="enter('-811974177834571960');" onmouseout="out('-811974177834571960');" style=""> 384                 int newSelection = Math.max(previousSelection - CHECKBOX_LENGTH, 0);                     </span>
<span class="1548041209841422053" onmouseenter="enter('1548041209841422053');" onmouseout="out('1548041209841422053');" style=""> 385                 if (editable.length() &gt;= newSelection) {                                                 </span>
<span class="-1551928067227182439" onmouseenter="enter('-1551928067227182439');" onmouseout="out('-1551928067227182439');" style=""> 386                     setSelection(newSelection);                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 387                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 388             }                                                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 389         } else {                                                                                         </span>
<span class="7908237664339315590" onmouseenter="enter('7908237664339315590');" onmouseout="out('7908237664339315590');" style=""> 390             // Insert a checklist for each line                                                          </span>
<span class="9092008481531189309" onmouseenter="enter('9092008481531189309');" onmouseout="out('9092008481531189309');" style=""> 391             String[] lines = workingString.toString().split(&quot;(?&lt;=\n)&quot;);                                  </span>
<span class="-2021014457160624880" onmouseenter="enter('-2021014457160624880');" onmouseout="out('-2021014457160624880');" style=""> 392             StringBuilder resultString = new StringBuilder();                                            </span>
<span  style=""> 393                                                                                                          </span>
<span class="1824047840691841029" onmouseenter="enter('1824047840691841029');" onmouseout="out('1824047840691841029');" style=""> 394             for (String lineString: lines) {                                                             </span>
<span class="2358811559308129106" onmouseenter="enter('2358811559308129106');" onmouseout="out('2358811559308129106');" style=""> 395                 // Preserve the spaces before the text                                                   </span>
<span class="-976435609607935349" onmouseenter="enter('-976435609607935349');" onmouseout="out('-976435609607935349');" style=""> 396                 int leadingSpaceCount;                                                                   </span>
<span class="-2007073157338218983" onmouseenter="enter('-2007073157338218983');" onmouseout="out('-2007073157338218983');" style=""> 397                 if (lineString.trim().length() == 0) {                                                   </span>
<span class="1650658955318262016" onmouseenter="enter('1650658955318262016');" onmouseout="out('1650658955318262016');" style=""> 398                     // Only whitespace content, get count of spaces                                      </span>
<span class="2598856147688027045" onmouseenter="enter('2598856147688027045');" onmouseout="out('2598856147688027045');" style=""> 399                     leadingSpaceCount = lineString.length() - lineString.replaceAll(&quot; &quot;, &quot;&quot;).length();   </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 400                 } else {                                                                                 </span>
<span class="3037156392896338412" onmouseenter="enter('3037156392896338412');" onmouseout="out('3037156392896338412');" style=""> 401                     // Get count of spaces up to first non-whitespace character                          </span>
<span class="-2037575593720791721" onmouseenter="enter('-2037575593720791721');" onmouseout="out('-2037575593720791721');" style=""> 402                     leadingSpaceCount = lineString.indexOf(lineString.trim());                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 403                 }                                                                                        </span>
<span  style=""> 404                                                                                                          </span>
<span class="1113723887572128376" onmouseenter="enter('1113723887572128376');" onmouseout="out('1113723887572128376');" style=""> 405                 if (leadingSpaceCount &gt; 0) {                                                             </span>
<span class="-4607277845227497529" onmouseenter="enter('-4607277845227497529');" onmouseout="out('-4607277845227497529');" style=""> 406                     resultString.append(new String(new char[leadingSpaceCount]).replace(&#x27;\0&#x27;, &#x27; &#x27;));     </span>
<span class="1014609549743804890" onmouseenter="enter('1014609549743804890');" onmouseout="out('1014609549743804890');" style=""> 407                     lineString = lineString.substring(leadingSpaceCount);                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 408                 }                                                                                        </span>
<span  style=""> 409                                                                                                          </span>
<span class="-4759602698755112129" onmouseenter="enter('-4759602698755112129');" onmouseout="out('-4759602698755112129');" style=""> 410                 resultString                                                                             </span>
<span class="-6300937305952313219" onmouseenter="enter('-6300937305952313219');" onmouseout="out('-6300937305952313219');" style=""> 411                         .append(ChecklistUtils.UNCHECKED_MARKDOWN)                                       </span>
<span class="-7012949866063989115" onmouseenter="enter('-7012949866063989115');" onmouseout="out('-7012949866063989115');" style=""> 412                         .append(&quot; &quot;)                                                                     </span>
<span class="-2140099013154536267" onmouseenter="enter('-2140099013154536267');" onmouseout="out('-2140099013154536267');" style=""> 413                         .append(lineString);                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 414             }                                                                                            </span>
<span  style=""> 415                                                                                                          </span>
<span class="327663848358659642" onmouseenter="enter('327663848358659642');" onmouseout="out('327663848358659642');" style=""> 416             editable.replace(start, end, resultString);                                                  </span>
<span  style=""> 417                                                                                                          </span>
<span class="-7244042633242525084" onmouseenter="enter('-7244042633242525084');" onmouseout="out('-7244042633242525084');" style=""> 418             int newSelection = Math.max(previousSelection, 0) + (lines.length * CHECKBOX_LENGTH);        </span>
<span class="1548041209841422053" onmouseenter="enter('1548041209841422053');" onmouseout="out('1548041209841422053');" style=""> 419             if (editable.length() &gt;= newSelection) {                                                     </span>
<span class="-1551928067227182439" onmouseenter="enter('-1551928067227182439');" onmouseout="out('-1551928067227182439');" style=""> 420                 setSelection(newSelection);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 421             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 422         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 423     }                                                                                                    </span>
<span  style=""> 424                                                                                                          </span>
<span class="-1068085743919359847" onmouseenter="enter('-1068085743919359847');" onmouseout="out('-1068085743919359847');" style=""> 425     // Returns true if the current editor selection is on the same line                                  </span>
<span class="-1322680323963324573" onmouseenter="enter('-1322680323963324573');" onmouseout="out('-1322680323963324573');" style=""> 426     private boolean selectionIsOnSameLine() {                                                            </span>
<span class="-8708010820158817009" onmouseenter="enter('-8708010820158817009');" onmouseout="out('-8708010820158817009');" style=""> 427         int selectionStart = getSelectionStart();                                                        </span>
<span class="-8399501927910381124" onmouseenter="enter('-8399501927910381124');" onmouseout="out('-8399501927910381124');" style=""> 428         int selectionEnd = getSelectionEnd();                                                            </span>
<span class="-9041693021121574938" onmouseenter="enter('-9041693021121574938');" onmouseout="out('-9041693021121574938');" style=""> 429         Layout layout = getLayout();                                                                     </span>
<span  style=""> 430                                                                                                          </span>
<span class="-5006678790845707461" onmouseenter="enter('-5006678790845707461');" onmouseout="out('-5006678790845707461');" style=""> 431         if (selectionStart &gt;= 0 &amp;&amp; selectionEnd &gt;= 0) {                                                  </span>
<span class="7452975995927250930" onmouseenter="enter('7452975995927250930');" onmouseout="out('7452975995927250930');" style=""> 432             return layout.getLineForOffset(selectionStart) == layout.getLineForOffset(selectionEnd);     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 433         }                                                                                                </span>
<span  style=""> 434                                                                                                          </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 435         return false;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 436     }                                                                                                    </span>
<span  style=""> 437                                                                                                          </span>
<span class="2245519181968029694" onmouseenter="enter('2245519181968029694');" onmouseout="out('2245519181968029694');" style=""> 438     public void fixLineSpacing() {                                                                       </span>
<span class="3739656730239017857" onmouseenter="enter('3739656730239017857');" onmouseout="out('3739656730239017857');" style=""> 439         // Prevents line heights from compacting                                                         </span>
<span class="-2883030315986006038" onmouseenter="enter('-2883030315986006038');" onmouseout="out('-2883030315986006038');" style=""> 440         // https://issuetracker.google.com/issues/37009353                                               </span>
<span class="593486953485328476" onmouseenter="enter('593486953485328476');" onmouseout="out('593486953485328476');" style=""> 441         float lineSpacingExtra = getLineSpacingExtra();                                                  </span>
<span class="-8024412754689478694" onmouseenter="enter('-8024412754689478694');" onmouseout="out('-8024412754689478694');" style=""> 442         float lineSpacingMultiplier = getLineSpacingMultiplier();                                        </span>
<span class="8227210311807072313" onmouseenter="enter('8227210311807072313');" onmouseout="out('8227210311807072313');" style=""> 443         setLineSpacing(0.0f, 1.0f);                                                                      </span>
<span class="-9061865158009916868" onmouseenter="enter('-9061865158009916868');" onmouseout="out('-9061865158009916868');" style=""> 444         setLineSpacing(lineSpacingExtra, lineSpacingMultiplier);                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 445     }                                                                                                    </span>
<span  style=""> 446                                                                                                          </span>
<span class="-7557861489858202648" onmouseenter="enter('-7557861489858202648');" onmouseout="out('-7557861489858202648');" style=""> 447     public interface OnSelectionChangedListener {                                                        </span>
<span class="-2603544447302104250" onmouseenter="enter('-2603544447302104250');" onmouseout="out('-2603544447302104250');" style=""> 448         void onSelectionChanged(int selStart, int selEnd);                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 449     }                                                                                                    </span>
<span  style=""> 450                                                                                                          </span>
<span class="-2496270541861205859" onmouseenter="enter('-2496270541861205859');" onmouseout="out('-2496270541861205859');" style=""> 451     // Replaces any CheckableSpans with their markdown counterpart (e.g. &#x27;- [ ]&#x27;)                        </span>
<span class="-3349734715224755384" onmouseenter="enter('-3349734715224755384');" onmouseout="out('-3349734715224755384');" style=""> 452     public String getPlainTextContent() {                                                                </span>
<span class="-1769659359974524880" onmouseenter="enter('-1769659359974524880');" onmouseout="out('-1769659359974524880');" style=""> 453         if (getText() == null) {                                                                         </span>
<span class="-8289946804601166879" onmouseenter="enter('-8289946804601166879');" onmouseout="out('-8289946804601166879');" style=""> 454             return &quot;&quot;;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 455         }                                                                                                </span>
<span  style=""> 456                                                                                                          </span>
<span class="-5774176688206725478" onmouseenter="enter('-5774176688206725478');" onmouseout="out('-5774176688206725478');" style=""> 457         SpannableStringBuilder content = new SpannableStringBuilder(getText());                          </span>
<span class="3967945012021671393" onmouseenter="enter('3967945012021671393');" onmouseout="out('3967945012021671393');" style=""> 458         CheckableSpan[] spans = content.getSpans(0, content.length(), CheckableSpan.class);              </span>
<span class="3321734155540722629" onmouseenter="enter('3321734155540722629');" onmouseout="out('3321734155540722629');" style=""> 459         for(CheckableSpan span: spans) {                                                                 </span>
<span class="9048125924196956410" onmouseenter="enter('9048125924196956410');" onmouseout="out('9048125924196956410');" style=""> 460             int start = content.getSpanStart(span);                                                      </span>
<span class="7525585125635328254" onmouseenter="enter('7525585125635328254');" onmouseout="out('7525585125635328254');" style=""> 461             int end = content.getSpanEnd(span);                                                          </span>
<span class="7328134583038878217" onmouseenter="enter('7328134583038878217');" onmouseout="out('7328134583038878217');" style=""> 462             ((Editable) content).replace(                                                                </span>
<span class="96671177266943526" onmouseenter="enter('96671177266943526');" onmouseout="out('96671177266943526');" style=""> 463                     start,                                                                               </span>
<span class="-8378543162701826190" onmouseenter="enter('-8378543162701826190');" onmouseout="out('-8378543162701826190');" style=""> 464                     end,                                                                                 </span>
<span class="3531746424024935349" onmouseenter="enter('3531746424024935349');" onmouseout="out('3531746424024935349');" style=""><abbr title=" 465                     span.isChecked() ? ChecklistUtils.CHECKED_MARKDOWN : ChecklistUtils.UNCHECKED_MARKDOWN);"> 465                     span.isChecked() ? ChecklistUtils.CHECKED_MARKDOWN : ChecklistUtils.UNCHECKED_MARKDOW🔵</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 466         }                                                                                                </span>
<span  style=""> 467                                                                                                          </span>
<span class="-5768072572856737542" onmouseenter="enter('-5768072572856737542');" onmouseout="out('-5768072572856737542');" style=""> 468         return content.toString();                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 469     }                                                                                                    </span>
<span  style=""> 470                                                                                                          </span>
<span class="-4058542168993639710" onmouseenter="enter('-4058542168993639710');" onmouseout="out('-4058542168993639710');" style=""> 471     // Replaces any CheckableSpans with their markdown preview counterpart (e.g. &#x27;- [\u2a2f]&#x27;)           </span>
<span class="-4279713333663092916" onmouseenter="enter('-4279713333663092916');" onmouseout="out('-4279713333663092916');" style=""> 472     public String getPreviewTextContent() {                                                              </span>
<span class="-1769659359974524880" onmouseenter="enter('-1769659359974524880');" onmouseout="out('-1769659359974524880');" style=""> 473         if (getText() == null) {                                                                         </span>
<span class="-8289946804601166879" onmouseenter="enter('-8289946804601166879');" onmouseout="out('-8289946804601166879');" style=""> 474             return &quot;&quot;;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 475         }                                                                                                </span>
<span  style=""> 476                                                                                                          </span>
<span class="-5774176688206725478" onmouseenter="enter('-5774176688206725478');" onmouseout="out('-5774176688206725478');" style=""> 477         SpannableStringBuilder content = new SpannableStringBuilder(getText());                          </span>
<span class="3967945012021671393" onmouseenter="enter('3967945012021671393');" onmouseout="out('3967945012021671393');" style=""> 478         CheckableSpan[] spans = content.getSpans(0, content.length(), CheckableSpan.class);              </span>
<span class="3321734155540722629" onmouseenter="enter('3321734155540722629');" onmouseout="out('3321734155540722629');" style=""> 479         for(CheckableSpan span: spans) {                                                                 </span>
<span class="9048125924196956410" onmouseenter="enter('9048125924196956410');" onmouseout="out('9048125924196956410');" style=""> 480             int start = content.getSpanStart(span);                                                      </span>
<span class="7525585125635328254" onmouseenter="enter('7525585125635328254');" onmouseout="out('7525585125635328254');" style=""> 481             int end = content.getSpanEnd(span);                                                          </span>
<span class="7328134583038878217" onmouseenter="enter('7328134583038878217');" onmouseout="out('7328134583038878217');" style=""> 482             ((Editable) content).replace(                                                                </span>
<span class="96671177266943526" onmouseenter="enter('96671177266943526');" onmouseout="out('96671177266943526');" style=""> 483                     start,                                                                               </span>
<span class="-8378543162701826190" onmouseenter="enter('-8378543162701826190');" onmouseout="out('-8378543162701826190');" style=""> 484                     end,                                                                                 </span>
<span class="-8440602794388940209" onmouseenter="enter('-8440602794388940209');" onmouseout="out('-8440602794388940209');" style=""><abbr title=" 485                     span.isChecked() ? ChecklistUtils.CHECKED_MARKDOWN_PREVIEW : ChecklistUtils.UNCHECKED_MARKDOWN);"> 485                     span.isChecked() ? ChecklistUtils.CHECKED_MARKDOWN_PREVIEW : ChecklistUtils.UNCHECKED🔵</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 486         }                                                                                                </span>
<span  style=""> 487                                                                                                          </span>
<span class="-5768072572856737542" onmouseenter="enter('-5768072572856737542');" onmouseout="out('-5768072572856737542');" style=""> 488         return content.toString();                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 489     }                                                                                                    </span>
<span  style=""> 490                                                                                                          </span>
<span  style=""> 491                                                                                                          </span>
<span class="-8793607864180089375" onmouseenter="enter('-8793607864180089375');" onmouseout="out('-8793607864180089375');" style=""> 492     public void processChecklists() {                                                                    </span>
<span class="-822567654445480874" onmouseenter="enter('-822567654445480874');" onmouseout="out('-822567654445480874');" style=""> 493         if (getText().length() == 0 || getContext() == null) {                                           </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 494             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 495         }                                                                                                </span>
<span  style=""> 496                                                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 497         try {                                                                                            </span>
<span class="-2879977185755091274" onmouseenter="enter('-2879977185755091274');" onmouseout="out('-2879977185755091274');" style=""> 498             ChecklistUtils.addChecklistSpansForRegexAndColor(                                            </span>
<span class="4777936721428774843" onmouseenter="enter('4777936721428774843');" onmouseout="out('4777936721428774843');" style=""> 499                     getContext(),                                                                        </span>
<span class="6494562836495618397" onmouseenter="enter('6494562836495618397');" onmouseout="out('6494562836495618397');" style=""> 500                     getText(),                                                                           </span>
<span class="-5190158693774204825" onmouseenter="enter('-5190158693774204825');" onmouseout="out('-5190158693774204825');" style=""> 501                     ChecklistUtils.CHECKLIST_REGEX_LINES,                                                </span>
<span class="-183067455432259027" onmouseenter="enter('-183067455432259027');" onmouseout="out('-183067455432259027');" style=""> 502                     R.color.text_title_disabled);                                                        </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 503         } catch (Exception e) {                                                                          </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 504             e.printStackTrace();                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 505         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 506     }                                                                                                    </span>
<span  style=""> 507                                                                                                          </span>
<span class="-7678796331074634227" onmouseenter="enter('-7678796331074634227');" onmouseout="out('-7678796331074634227');" style=""> 508     public void setOnCheckboxToggledListener(OnCheckboxToggledListener listener) {                       </span>
<span class="3565913960515795124" onmouseenter="enter('3565913960515795124');" onmouseout="out('3565913960515795124');" style=""> 509         mOnCheckboxToggledListener = listener;                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 510     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 511 }                                                                                                        </span></pre></td>
                            <td><pre><span class="2121239535603548975" onmouseenter="enter('2121239535603548975');" onmouseout="out('2121239535603548975');" style="">   1 package com.automattic.simplenote.widgets;                                                               </span>
<span  style="">   2                                                                                                          </span>
<span class="5922045460006936195" onmouseenter="enter('5922045460006936195');" onmouseout="out('5922045460006936195');" style="">   3 import android.content.Context;                                                                          </span>
<span class="2207333516549486115" onmouseenter="enter('2207333516549486115');" onmouseout="out('2207333516549486115');" style="">   4 import android.graphics.Rect;                                                                            </span>
<span class="-1737226814075322931" onmouseenter="enter('-1737226814075322931');" onmouseout="out('-1737226814075322931');" style="">   5 import android.graphics.drawable.Drawable;                                                               </span>
<span class="-1086316590722027623" onmouseenter="enter('-1086316590722027623');" onmouseout="out('-1086316590722027623');" style="">   6 import android.os.Handler;                                                                               </span>
<span class="4177373235046048356" onmouseenter="enter('4177373235046048356');" onmouseout="out('4177373235046048356');" style="">   7 import android.text.Editable;                                                                            </span>
<span class="-578015270574978569" onmouseenter="enter('-578015270574978569');" onmouseout="out('-578015270574978569');" style="">   8 import android.text.Layout;                                                                              </span>
<span class="7007167342609832330" onmouseenter="enter('7007167342609832330');" onmouseout="out('7007167342609832330');" style="">   9 import android.text.SpannableStringBuilder;                                                              </span>
<span class="7731806713123176572" onmouseenter="enter('7731806713123176572');" onmouseout="out('7731806713123176572');" style="">  10 import android.text.Spanned;                                                                             </span>
<span class="8961068409863998468" onmouseenter="enter('8961068409863998468');" onmouseout="out('8961068409863998468');" style="">  11 import android.text.style.ImageSpan;                                                                     </span>
<span class="-4218724752779269131" onmouseenter="enter('-4218724752779269131');" onmouseout="out('-4218724752779269131');" style="">  12 import android.util.AttributeSet;                                                                        </span>
<span class="959108076239844050" onmouseenter="enter('959108076239844050');" onmouseout="out('959108076239844050');" style="">  13 import android.view.KeyEvent;                                                                            </span>
<span class="-8980485571216513882" onmouseenter="enter('-8980485571216513882');" onmouseout="out('-8980485571216513882');" style="">  14 import android.view.View;                                                                                </span>
<span class="-3898686145228074474" onmouseenter="enter('-3898686145228074474');" onmouseout="out('-3898686145228074474');" style="">  15 import android.widget.AdapterView;                                                                       </span>
<span  style="">  16                                                                                                          </span>
<span class="-8037490851538345990" onmouseenter="enter('-8037490851538345990');" onmouseout="out('-8037490851538345990');" style="">  17 import androidx.appcompat.widget.AppCompatMultiAutoCompleteTextView;                                     </span>
<span class="5842151950717757009" onmouseenter="enter('5842151950717757009');" onmouseout="out('5842151950717757009');" style="">  18 import androidx.core.content.ContextCompat;                                                              </span>
<span  style="">  19                                                                                                          </span>
<span class="-6092371777820512633" onmouseenter="enter('-6092371777820512633');" onmouseout="out('-6092371777820512633');" style="">  20 import com.automattic.simplenote.R;                                                                      </span>
<span class="9061368408436996655" onmouseenter="enter('9061368408436996655');" onmouseout="out('9061368408436996655');" style="">  21 import com.automattic.simplenote.models.Note;                                                            </span>
<span class="1987879750509178857" onmouseenter="enter('1987879750509178857');" onmouseout="out('1987879750509178857');" style="">  22 import com.automattic.simplenote.utils.ChecklistUtils;                                                   </span>
<span class="8577850632926167445" onmouseenter="enter('8577850632926167445');" onmouseout="out('8577850632926167445');" style="">  23 import com.automattic.simplenote.utils.DisplayUtils;                                                     </span>
<span class="930019215389101465" onmouseenter="enter('930019215389101465');" onmouseout="out('930019215389101465');" style="">  24 import com.automattic.simplenote.utils.DrawableUtils;                                                    </span>
<span class="-5948624663998670139" onmouseenter="enter('-5948624663998670139');" onmouseout="out('-5948624663998670139');" style="">  25 import com.automattic.simplenote.utils.LinkTokenizer;                                                    </span>
<span class="2537926396801226048" onmouseenter="enter('2537926396801226048');" onmouseout="out('2537926396801226048');" style="">  26 import com.automattic.simplenote.utils.SimplenoteLinkify;                                                </span>
<span class="-8170925370861558125" onmouseenter="enter('-8170925370861558125');" onmouseout="out('-8170925370861558125');" style="">  27 import com.simperium.client.Bucket;                                                                      </span>
<span  style="">  28                                                                                                          </span>
<span class="9191247685397773893" onmouseenter="enter('9191247685397773893');" onmouseout="out('9191247685397773893');" style="">  29 import java.util.ArrayList;                                                                              </span>
<span class="-1786020958497218848" onmouseenter="enter('-1786020958497218848');" onmouseout="out('-1786020958497218848');" style="">  30 import java.util.List;                                                                                   </span>
<span class="2159928926335330273" onmouseenter="enter('2159928926335330273');" onmouseout="out('2159928926335330273');" style="">  31 import java.util.regex.Matcher;                                                                          </span>
<span class="1513108047920599059" onmouseenter="enter('1513108047920599059');" onmouseout="out('1513108047920599059');" style="">  32 import java.util.regex.Pattern;                                                                          </span>
<span  style="">  33                                                                                                          </span>
<span class="1948737371075708279" onmouseenter="enter('1948737371075708279');" onmouseout="out('1948737371075708279');" style="">  34 import static com.automattic.simplenote.utils.SimplenoteLinkify.SIMPLENOTE_LINK_ID;                      </span>
<span class="-4405840676582391526" onmouseenter="enter('-4405840676582391526');" onmouseout="out('-4405840676582391526');" style="">  35 import static com.automattic.simplenote.utils.SimplenoteLinkify.SIMPLENOTE_LINK_PREFIX;                  </span>
<span  style="">  36                                                                                                          </span>
<span class="-117003403243561872" onmouseenter="enter('-117003403243561872');" onmouseout="out('-117003403243561872');" style=""><abbr title="  37 public class SimplenoteEditText extends AppCompatMultiAutoCompleteTextView implements AdapterView.OnItemClickListener {">  37 public class SimplenoteEditText extends AppCompatMultiAutoCompleteTextView implements AdapterView.OnItemC🔵</abbr></span>
<span class="4400513732356126489" onmouseenter="enter('4400513732356126489');" onmouseout="out('4400513732356126489');" style=""><abbr title="  38     private static final Pattern INTERNOTE_LINK_PATTERN_EDIT = Pattern.compile(&quot;([^]]*)(]\\(&quot; + SIMPLENOTE_LINK_PREFIX + SIMPLENOTE_LINK_ID + &quot;\\))&quot;);">  38     private static final Pattern INTERNOTE_LINK_PATTERN_EDIT = Pattern.compile(&quot;([^]]*)(]\\(&quot; + SIMPLENOT🔵</abbr></span>
<span class="-875162683766216906" onmouseenter="enter('-875162683766216906');" onmouseout="out('-875162683766216906');" style=""><abbr title="  39     private static final Pattern INTERNOTE_LINK_PATTERN_FULL = Pattern.compile(&quot;(?s)(.)*(\\[)&quot; + INTERNOTE_LINK_PATTERN_EDIT);">  39     private static final Pattern INTERNOTE_LINK_PATTERN_FULL = Pattern.compile(&quot;(?s)(.)*(\\[)&quot; + INTERNOT🔵</abbr></span>
<span class="-9094162731040816051" onmouseenter="enter('-9094162731040816051');" onmouseout="out('-9094162731040816051');" style="">  40     private static final int CHECKBOX_LENGTH = 2; // one ClickableSpan character + one space character   </span>
<span  style="">  41                                                                                                          </span>
<span class="1196031820703007842" onmouseenter="enter('1196031820703007842');" onmouseout="out('1196031820703007842');" style="">  42     private LinkTokenizer mTokenizer;                                                                    </span>
<span class="1190896655347967160" onmouseenter="enter('1190896655347967160');" onmouseout="out('1190896655347967160');" style="">  43     private List&lt;OnSelectionChangedListener&gt; listeners;                                                  </span>
<span class="-5202758860929245202" onmouseenter="enter('-5202758860929245202');" onmouseout="out('-5202758860929245202');" style="">  44     private OnCheckboxToggledListener mOnCheckboxToggledListener;                                        </span>
<span  style="">  45                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  46     @Override                                                                                            </span>
<span class="-4725396128083470659" onmouseenter="enter('-4725396128083470659');" onmouseout="out('-4725396128083470659');" style="">  47     public boolean enoughToFilter() {                                                                    </span>
<span class="-408752473959783546" onmouseenter="enter('-408752473959783546');" onmouseout="out('-408752473959783546');" style="">  48         String substringCursor = getText().toString().substring(getSelectionEnd());                      </span>
<span class="-9172431867047830396" onmouseenter="enter('-9172431867047830396');" onmouseout="out('-9172431867047830396');" style="">  49         Matcher matcherEdit = INTERNOTE_LINK_PATTERN_EDIT.matcher(substringCursor);                      </span>
<span  style="">  50                                                                                                          </span>
<span class="2663075153106693403" onmouseenter="enter('2663075153106693403');" onmouseout="out('2663075153106693403');" style="">  51         // When an internote link title is being edited, don&#x27;t show an autocomplete popup.               </span>
<span class="3648956898641204215" onmouseenter="enter('3648956898641204215');" onmouseout="out('3648956898641204215');" style="">  52         if (matcherEdit.lookingAt()) {                                                                   </span>
<span class="2950221330115688931" onmouseenter="enter('2950221330115688931');" onmouseout="out('2950221330115688931');" style="">  53             String substringEdit = substringCursor.substring(0, matcherEdit.end());                      </span>
<span class="1311569057139673901" onmouseenter="enter('1311569057139673901');" onmouseout="out('1311569057139673901');" style="">  54             Matcher matcherFull = INTERNOTE_LINK_PATTERN_FULL.matcher(substringEdit);                    </span>
<span  style="">  55                                                                                                          </span>
<span class="4323098233182236709" onmouseenter="enter('4323098233182236709');" onmouseout="out('4323098233182236709');" style="">  56             if (!matcherFull.lookingAt()) {                                                              </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">  57                 return false;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  58             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  59         }                                                                                                </span>
<span  style="">  60                                                                                                          </span>
<span class="8648892168213198446" onmouseenter="enter('8648892168213198446');" onmouseout="out('8648892168213198446');" style="">  61         Editable text = getText();                                                                       </span>
<span class="-5347114162693005051" onmouseenter="enter('-5347114162693005051');" onmouseout="out('-5347114162693005051');" style="">  62         int end = getSelectionEnd();                                                                     </span>
<span  style="">  63                                                                                                          </span>
<span class="-2364642465072686278" onmouseenter="enter('-2364642465072686278');" onmouseout="out('-2364642465072686278');" style="">  64         if (end &lt; 0) {                                                                                   </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">  65             return false;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  66         }                                                                                                </span>
<span  style="">  67                                                                                                          </span>
<span class="-6730134198157735680" onmouseenter="enter('-6730134198157735680');" onmouseout="out('-6730134198157735680');" style="">  68         int start = mTokenizer.findTokenStart(text, end);                                                </span>
<span class="3206229991437838506" onmouseenter="enter('3206229991437838506');" onmouseout="out('3206229991437838506');" style="">  69         return start &gt; 0 &amp;&amp; end - start &gt;= 1;                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  70     }                                                                                                    </span>
<span  style="">  71                                                                                                          </span>
<span class="7419298585035749039" onmouseenter="enter('7419298585035749039');" onmouseout="out('7419298585035749039');" style="">  72     public interface OnCheckboxToggledListener {                                                         </span>
<span class="-7775623224861892729" onmouseenter="enter('-7775623224861892729');" onmouseout="out('-7775623224861892729');" style="">  73         void onCheckboxToggled();                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  74     }                                                                                                    </span>
<span  style="">  75                                                                                                          </span>
<span class="9083968033793714051" onmouseenter="enter('9083968033793714051');" onmouseout="out('9083968033793714051');" style="">  76     public SimplenoteEditText(Context context) {                                                         </span>
<span class="-8232648159726954046" onmouseenter="enter('-8232648159726954046');" onmouseout="out('-8232648159726954046');" style="">  77         super(context);                                                                                  </span>
<span class="4798086328679447282" onmouseenter="enter('4798086328679447282');" onmouseout="out('4798086328679447282');" style="">  78         listeners = new ArrayList&lt;&gt;();                                                                   </span>
<span class="7598536375028459133" onmouseenter="enter('7598536375028459133');" onmouseout="out('7598536375028459133');" style="">  79 &lt;&lt;&lt;&lt;&lt;&lt;&lt; MINE                                                                                             </span>
<span class="7991106586064342212" onmouseenter="enter('7991106586064342212');" onmouseout="out('7991106586064342212');" style="">  80 ||||||| BASE                                                                                             </span>
<span class="8285102428439000867" onmouseenter="enter('8285102428439000867');" onmouseout="out('8285102428439000867');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  81         setTypeface(TypefaceCache.getTypeface(context, TypefaceCache.TYPEFACE_NAME_ROBOTO_REGULAR));     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  82     }                                                                                                    </span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style="">  83 =======                                                                                                  </span>
<span class="8285102428439000867" onmouseenter="enter('8285102428439000867');" onmouseout="out('8285102428439000867');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  84         setTypeface(TypefaceCache.getTypeface(context, TypefaceCache.TYPEFACE_NAME_ROBOTO_REGULAR));     </span>
<span class="-4364621221695153856" onmouseenter="enter('-4364621221695153856');" onmouseout="out('-4364621221695153856');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  85         setLinkTokenizer();                                                                              </span>
<span class="-5027112130205478640" onmouseenter="enter('-5027112130205478640');" onmouseout="out('-5027112130205478640');" style="">  86 &gt;&gt;&gt;&gt;&gt;&gt;&gt; YOURS                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  87     }                                                                                                    </span>
<span  style="">  88                                                                                                          </span>
<span class="-5191028644893669048" onmouseenter="enter('-5191028644893669048');" onmouseout="out('-5191028644893669048');" style="">  89     public SimplenoteEditText(Context context, AttributeSet attrs) {                                     </span>
<span class="6666522707728770706" onmouseenter="enter('6666522707728770706');" onmouseout="out('6666522707728770706');" style="">  90         super(context, attrs);                                                                           </span>
<span class="4798086328679447282" onmouseenter="enter('4798086328679447282');" onmouseout="out('4798086328679447282');" style="">  91         listeners = new ArrayList&lt;&gt;();                                                                   </span>
<span class="7598536375028459133" onmouseenter="enter('7598536375028459133');" onmouseout="out('7598536375028459133');" style="">  92 &lt;&lt;&lt;&lt;&lt;&lt;&lt; MINE                                                                                             </span>
<span class="7991106586064342212" onmouseenter="enter('7991106586064342212');" onmouseout="out('7991106586064342212');" style="">  93 ||||||| BASE                                                                                             </span>
<span class="8285102428439000867" onmouseenter="enter('8285102428439000867');" onmouseout="out('8285102428439000867');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  94         setTypeface(TypefaceCache.getTypeface(context, TypefaceCache.TYPEFACE_NAME_ROBOTO_REGULAR));     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  95     }                                                                                                    </span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style="">  96 =======                                                                                                  </span>
<span class="8285102428439000867" onmouseenter="enter('8285102428439000867');" onmouseout="out('8285102428439000867');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  97         setTypeface(TypefaceCache.getTypeface(context, TypefaceCache.TYPEFACE_NAME_ROBOTO_REGULAR));     </span>
<span class="-4364621221695153856" onmouseenter="enter('-4364621221695153856');" onmouseout="out('-4364621221695153856');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  98         setLinkTokenizer();                                                                              </span>
<span class="-5027112130205478640" onmouseenter="enter('-5027112130205478640');" onmouseout="out('-5027112130205478640');" style="">  99 &gt;&gt;&gt;&gt;&gt;&gt;&gt; YOURS                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 100     }                                                                                                    </span>
<span  style=""> 101                                                                                                          </span>
<span class="-5033151626525601752" onmouseenter="enter('-5033151626525601752');" onmouseout="out('-5033151626525601752');" style=""> 102     public SimplenoteEditText(Context context, AttributeSet attrs, int defStyle) {                       </span>
<span class="1281987604327041578" onmouseenter="enter('1281987604327041578');" onmouseout="out('1281987604327041578');" style=""> 103         super(context, attrs, defStyle);                                                                 </span>
<span class="4798086328679447282" onmouseenter="enter('4798086328679447282');" onmouseout="out('4798086328679447282');" style=""> 104         listeners = new ArrayList&lt;&gt;();                                                                   </span>
<span class="7598536375028459133" onmouseenter="enter('7598536375028459133');" onmouseout="out('7598536375028459133');" style=""> 105 &lt;&lt;&lt;&lt;&lt;&lt;&lt; MINE                                                                                             </span>
<span class="7991106586064342212" onmouseenter="enter('7991106586064342212');" onmouseout="out('7991106586064342212');" style=""> 106 ||||||| BASE                                                                                             </span>
<span class="8285102428439000867" onmouseenter="enter('8285102428439000867');" onmouseout="out('8285102428439000867');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 107         setTypeface(TypefaceCache.getTypeface(context, TypefaceCache.TYPEFACE_NAME_ROBOTO_REGULAR));     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 108     }                                                                                                    </span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style=""> 109 =======                                                                                                  </span>
<span class="8285102428439000867" onmouseenter="enter('8285102428439000867');" onmouseout="out('8285102428439000867');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 110         setTypeface(TypefaceCache.getTypeface(context, TypefaceCache.TYPEFACE_NAME_ROBOTO_REGULAR));     </span>
<span class="-4364621221695153856" onmouseenter="enter('-4364621221695153856');" onmouseout="out('-4364621221695153856');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 111         setLinkTokenizer();                                                                              </span>
<span class="-5027112130205478640" onmouseenter="enter('-5027112130205478640');" onmouseout="out('-5027112130205478640');" style=""> 112 &gt;&gt;&gt;&gt;&gt;&gt;&gt; YOURS                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 113     }                                                                                                    </span>
<span  style=""> 114                                                                                                          </span>
<span class="-59477443811309488" onmouseenter="enter('-59477443811309488');" onmouseout="out('-59477443811309488');" style=""> 115     public void addOnSelectionChangedListener(OnSelectionChangedListener o) {                            </span>
<span class="-2100774570383242241" onmouseenter="enter('-2100774570383242241');" onmouseout="out('-2100774570383242241');" style=""> 116         listeners.add(o);                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 117     }                                                                                                    </span>
<span  style=""> 118                                                                                                          </span>
<span class="7118550889075315064" onmouseenter="enter('7118550889075315064');" onmouseout="out('7118550889075315064');" style=""> 119     private void setLinkTokenizer() {                                                                    </span>
<span class="540804409753221409" onmouseenter="enter('540804409753221409');" onmouseout="out('540804409753221409');" style=""> 120         mTokenizer = new LinkTokenizer();                                                                </span>
<span class="-5685679569396619722" onmouseenter="enter('-5685679569396619722');" onmouseout="out('-5685679569396619722');" style=""> 121         setOnItemClickListener(this);                                                                    </span>
<span class="5188042449406366660" onmouseenter="enter('5188042449406366660');" onmouseout="out('5188042449406366660');" style=""> 122         setTokenizer(mTokenizer);                                                                        </span>
<span class="6747402731313982960" onmouseenter="enter('6747402731313982960');" onmouseout="out('6747402731313982960');" style=""> 123         setThreshold(1);                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 124     }                                                                                                    </span>
<span  style=""> 125                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 126     @Override                                                                                            </span>
<span class="-6307048688277996884" onmouseenter="enter('-6307048688277996884');" onmouseout="out('-6307048688277996884');" style=""> 127     public void onItemClick(AdapterView&lt;?&gt; parent, View view, int position, long id) {                   </span>
<span class="7948482626287429940" onmouseenter="enter('7948482626287429940');" onmouseout="out('7948482626287429940');" style=""> 128         @SuppressWarnings(&quot;unchecked&quot;)                                                                   </span>
<span class="-2430703696117484912" onmouseenter="enter('-2430703696117484912');" onmouseout="out('-2430703696117484912');" style=""><abbr title=" 129         Bucket.ObjectCursor&lt;Note&gt; cursor = (Bucket.ObjectCursor&lt;Note&gt;) parent.getAdapter().getItem(position);"> 129         Bucket.ObjectCursor&lt;Note&gt; cursor = (Bucket.ObjectCursor&lt;Note&gt;) parent.getAdapter().getItem(positi🔵</abbr></span>
<span class="-1339731364416604074" onmouseenter="enter('-1339731364416604074');" onmouseout="out('-1339731364416604074');" style=""> 130         String key = cursor.getString(cursor.getColumnIndex(Note.KEY_PROPERTY)).replace(&quot;note&quot;, &quot;&quot;);     </span>
<span class="-5413912739011752532" onmouseenter="enter('-5413912739011752532');" onmouseout="out('-5413912739011752532');" style=""> 131         String text = SimplenoteLinkify.getNoteLink(key);                                                </span>
<span class="-6283161434129042153" onmouseenter="enter('-6283161434129042153');" onmouseout="out('-6283161434129042153');" style=""> 132         int start = Math.max(getSelectionStart(), 0);                                                    </span>
<span class="-5812761034589287295" onmouseenter="enter('-5812761034589287295');" onmouseout="out('-5812761034589287295');" style=""> 133         int end = Math.max(getSelectionEnd(), 0);                                                        </span>
<span class="-5970569984167246213" onmouseenter="enter('-5970569984167246213');" onmouseout="out('-5970569984167246213');" style=""> 134         getEditableText().replace(Math.min(start, end), Math.max(start, end), text, 0, text.length());   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 135     }                                                                                                    </span>
<span  style=""> 136                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 137     @Override                                                                                            </span>
<span class="9204734548608604374" onmouseenter="enter('9204734548608604374');" onmouseout="out('9204734548608604374');" style=""> 138     protected void onSelectionChanged(int selStart, int selEnd) {                                        </span>
<span class="9084036534089177006" onmouseenter="enter('9084036534089177006');" onmouseout="out('9084036534089177006');" style=""> 139         super.onSelectionChanged(selStart, selEnd);                                                      </span>
<span class="1091766479730821238" onmouseenter="enter('1091766479730821238');" onmouseout="out('1091766479730821238');" style=""> 140         if (listeners != null) {                                                                         </span>
<span class="2531271156481149344" onmouseenter="enter('2531271156481149344');" onmouseout="out('2531271156481149344');" style=""> 141             for (OnSelectionChangedListener l : listeners)                                               </span>
<span class="-7270494200827421729" onmouseenter="enter('-7270494200827421729');" onmouseout="out('-7270494200827421729');" style=""> 142                 l.onSelectionChanged(selStart, selEnd);                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 143         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 144     }                                                                                                    </span>
<span  style=""> 145                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 146     @Override                                                                                            </span>
<span class="-8866382987303008115" onmouseenter="enter('-8866382987303008115');" onmouseout="out('-8866382987303008115');" style=""> 147     public boolean onKeyPreIme(int keyCode, KeyEvent event) {                                            </span>
<span class="-7860565181348615145" onmouseenter="enter('-7860565181348615145');" onmouseout="out('-7860565181348615145');" style=""> 148         if (event.getKeyCode() == KeyEvent.KEYCODE_BACK) {                                               </span>
<span class="351273221058910218" onmouseenter="enter('351273221058910218');" onmouseout="out('351273221058910218');" style=""> 149             clearFocus();                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 150         }                                                                                                </span>
<span  style=""> 151                                                                                                          </span>
<span class="-1286123639299516067" onmouseenter="enter('-1286123639299516067');" onmouseout="out('-1286123639299516067');" style=""> 152         return super.onKeyPreIme(keyCode, event);                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 153     }                                                                                                    </span>
<span  style=""> 154                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 155     @Override                                                                                            </span>
<span class="-6350469524661550536" onmouseenter="enter('-6350469524661550536');" onmouseout="out('-6350469524661550536');" style=""> 156     protected void onFocusChanged(boolean focused, int direction, Rect previouslyFocusedRect) {          </span>
<span class="-3879914196590028915" onmouseenter="enter('-3879914196590028915');" onmouseout="out('-3879914196590028915');" style=""> 157         if (focused) {                                                                                   </span>
<span class="-5153257938979319281" onmouseenter="enter('-5153257938979319281');" onmouseout="out('-5153257938979319281');" style=""> 158             setCursorVisible(true);                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 159         }                                                                                                </span>
<span  style=""> 160                                                                                                          </span>
<span class="-3061316988982909646" onmouseenter="enter('-3061316988982909646');" onmouseout="out('-3061316988982909646');" style=""> 161         super.onFocusChanged(focused, direction, previouslyFocusedRect);                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 162     }                                                                                                    </span>
<span  style=""> 163                                                                                                          </span>
<span class="4904364548788344608" onmouseenter="enter('4904364548788344608');" onmouseout="out('4904364548788344608');" style=""> 164     // Updates the ImageSpan drawable to the new checked state                                           </span>
<span class="1702464047281652539" onmouseenter="enter('1702464047281652539');" onmouseout="out('1702464047281652539');" style=""> 165     public void toggleCheckbox(final CheckableSpan checkableSpan) {                                      </span>
<span class="6590259663964917636" onmouseenter="enter('6590259663964917636');" onmouseout="out('6590259663964917636');" style=""> 166         setCursorVisible(false);                                                                         </span>
<span  style=""> 167                                                                                                          </span>
<span class="-1090656868967804943" onmouseenter="enter('-1090656868967804943');" onmouseout="out('-1090656868967804943');" style=""> 168         final Editable editable = getText();                                                             </span>
<span  style=""> 169                                                                                                          </span>
<span class="2794490867551519784" onmouseenter="enter('2794490867551519784');" onmouseout="out('2794490867551519784');" style=""> 170         final int checkboxStart = editable.getSpanStart(checkableSpan);                                  </span>
<span class="-5528412093877694659" onmouseenter="enter('-5528412093877694659');" onmouseout="out('-5528412093877694659');" style=""> 171         final int checkboxEnd = editable.getSpanEnd(checkableSpan);                                      </span>
<span  style=""> 172                                                                                                          </span>
<span class="-6572749467453395280" onmouseenter="enter('-6572749467453395280');" onmouseout="out('-6572749467453395280');" style=""> 173         final int selectionStart = getSelectionStart();                                                  </span>
<span class="5061259277362521056" onmouseenter="enter('5061259277362521056');" onmouseout="out('5061259277362521056');" style=""> 174         final int selectionEnd = getSelectionEnd();                                                      </span>
<span  style=""> 175                                                                                                          </span>
<span class="2426952674624776126" onmouseenter="enter('2426952674624776126');" onmouseout="out('2426952674624776126');" style=""> 176         final ImageSpan[] imageSpans = editable.getSpans(checkboxStart, checkboxEnd, ImageSpan.class);   </span>
<span class="3424137973787154724" onmouseenter="enter('3424137973787154724');" onmouseout="out('3424137973787154724');" style=""> 177         if (imageSpans.length &gt; 0) {                                                                     </span>
<span class="-650120241318912925" onmouseenter="enter('-650120241318912925');" onmouseout="out('-650120241318912925');" style=""> 178             // ImageSpans are static, so we need to remove the old one and replace :|                    </span>
<span class="3096208024950867570" onmouseenter="enter('3096208024950867570');" onmouseout="out('3096208024950867570');" style=""> 179             Drawable iconDrawable = ContextCompat.getDrawable(getContext(),                              </span>
<span class="6549537428500511361" onmouseenter="enter('6549537428500511361');" onmouseout="out('6549537428500511361');" style=""> 180                     checkableSpan.isChecked()                                                            </span>
<span class="1475528954993506852" onmouseenter="enter('1475528954993506852');" onmouseout="out('1475528954993506852');" style=""> 181                             ? R.drawable.ic_checkbox_checked_24px                                        </span>
<span class="919975553509049414" onmouseenter="enter('919975553509049414');" onmouseout="out('919975553509049414');" style=""> 182                             : R.drawable.ic_checkbox_unchecked_24px);                                    </span>
<span class="-4575840480157011089" onmouseenter="enter('-4575840480157011089');" onmouseout="out('-4575840480157011089');" style=""><abbr title=" 183             iconDrawable = DrawableUtils.tintDrawableWithResource(getContext(), iconDrawable, R.color.text_title_disabled);"> 183             iconDrawable = DrawableUtils.tintDrawableWithResource(getContext(), iconDrawable, R.color.tex🔵</abbr></span>
<span class="350955667428051936" onmouseenter="enter('350955667428051936');" onmouseout="out('350955667428051936');" style=""> 184             int iconSize = DisplayUtils.getChecklistIconSize(getContext());                              </span>
<span class="2517609942364691225" onmouseenter="enter('2517609942364691225');" onmouseout="out('2517609942364691225');" style=""> 185             iconDrawable.setBounds(0, 0, iconSize, iconSize);                                            </span>
<span class="1660574638142231511" onmouseenter="enter('1660574638142231511');" onmouseout="out('1660574638142231511');" style=""> 186             final CenteredImageSpan newImageSpan = new CenteredImageSpan(getContext(), iconDrawable);    </span>
<span class="5002906591139078644" onmouseenter="enter('5002906591139078644');" onmouseout="out('5002906591139078644');" style=""> 187             new Handler().post(new Runnable() {                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 188                 @Override                                                                                </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 189                 public void run() {                                                                      </span>
<span class="8105183574639194653" onmouseenter="enter('8105183574639194653');" onmouseout="out('8105183574639194653');" style=""><abbr title=" 190                     editable.setSpan(newImageSpan, checkboxStart, checkboxEnd, Spanned.SPAN_EXCLUSIVE_EXCLUSIVE);"> 190                     editable.setSpan(newImageSpan, checkboxStart, checkboxEnd, Spanned.SPAN_EXCLUSIVE_EXC🔵</abbr></span>
<span class="7563639754547712576" onmouseenter="enter('7563639754547712576');" onmouseout="out('7563639754547712576');" style=""> 191                     editable.removeSpan(imageSpans[0]);                                                  </span>
<span class="-1772473758449618286" onmouseenter="enter('-1772473758449618286');" onmouseout="out('-1772473758449618286');" style=""> 192                     fixLineSpacing();                                                                    </span>
<span  style=""> 193                                                                                                          </span>
<span class="-3445748522530054247" onmouseenter="enter('-3445748522530054247');" onmouseout="out('-3445748522530054247');" style=""> 194                     // Restore the selection                                                             </span>
<span class="530073190084792975" onmouseenter="enter('530073190084792975');" onmouseout="out('530073190084792975');" style=""> 195                     if (selectionStart &gt;= 0                                                              </span>
<span class="-405023996198629042" onmouseenter="enter('-405023996198629042');" onmouseout="out('-405023996198629042');" style=""> 196                             &amp;&amp; selectionStart &lt;= editable.length()                                       </span>
<span class="229632755727724018" onmouseenter="enter('229632755727724018');" onmouseout="out('229632755727724018');" style=""> 197                             &amp;&amp; selectionEnd &lt;= editable.length() &amp;&amp; hasFocus()) {                        </span>
<span class="-5633353852558776206" onmouseenter="enter('-5633353852558776206');" onmouseout="out('-5633353852558776206');" style=""> 198                         setSelection(selectionStart, selectionEnd);                                      </span>
<span class="-5153257938979319281" onmouseenter="enter('-5153257938979319281');" onmouseout="out('-5153257938979319281');" style=""> 199                         setCursorVisible(true);                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 200                     }                                                                                    </span>
<span  style=""> 201                                                                                                          </span>
<span class="1425396247006298539" onmouseenter="enter('1425396247006298539');" onmouseout="out('1425396247006298539');" style=""> 202                     if (mOnCheckboxToggledListener != null) {                                            </span>
<span class="-2776571883490751786" onmouseenter="enter('-2776571883490751786');" onmouseout="out('-2776571883490751786');" style=""> 203                         mOnCheckboxToggledListener.onCheckboxToggled();                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 204                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 205                 }                                                                                        </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 206             });                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 207         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 208     }                                                                                                    </span>
<span  style=""> 209                                                                                                          </span>
<span class="-5129075646964696371" onmouseenter="enter('-5129075646964696371');" onmouseout="out('-5129075646964696371');" style=""> 210     // Returns the line position of the text cursor                                                      </span>
<span class="-4790209518368575529" onmouseenter="enter('-4790209518368575529');" onmouseout="out('-4790209518368575529');" style=""> 211     private int getCurrentCursorLine() {                                                                 </span>
<span class="-8708010820158817009" onmouseenter="enter('-8708010820158817009');" onmouseout="out('-8708010820158817009');" style=""> 212         int selectionStart = getSelectionStart();                                                        </span>
<span class="-9041693021121574938" onmouseenter="enter('-9041693021121574938');" onmouseout="out('-9041693021121574938');" style=""> 213         Layout layout = getLayout();                                                                     </span>
<span  style=""> 214                                                                                                          </span>
<span class="-3402438836469275129" onmouseenter="enter('-3402438836469275129');" onmouseout="out('-3402438836469275129');" style=""> 215         if (!(selectionStart == -1)) {                                                                   </span>
<span class="-5607640624285366578" onmouseenter="enter('-5607640624285366578');" onmouseout="out('-5607640624285366578');" style=""> 216             return layout.getLineForOffset(selectionStart);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 217         }                                                                                                </span>
<span  style=""> 218                                                                                                          </span>
<span class="-8269198090232257590" onmouseenter="enter('-8269198090232257590');" onmouseout="out('-8269198090232257590');" style=""> 219         return 0;                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 220     }                                                                                                    </span>
<span  style=""> 221                                                                                                          </span>
<span class="-2056093237925143337" onmouseenter="enter('-2056093237925143337');" onmouseout="out('-2056093237925143337');" style=""> 222     public void insertChecklist() {                                                                      </span>
<span class="4507197880212123913" onmouseenter="enter('4507197880212123913');" onmouseout="out('4507197880212123913');" style=""> 223         int start, end;                                                                                  </span>
<span class="-47193053300540183" onmouseenter="enter('-47193053300540183');" onmouseout="out('-47193053300540183');" style=""> 224         int lineNumber = getCurrentCursorLine();                                                         </span>
<span class="5931814074513814524" onmouseenter="enter('5931814074513814524');" onmouseout="out('5931814074513814524');" style=""> 225         start = getLayout().getLineStart(lineNumber);                                                    </span>
<span  style=""> 226                                                                                                          </span>
<span class="4849153140254661183" onmouseenter="enter('4849153140254661183');" onmouseout="out('4849153140254661183');" style=""> 227         if (getSelectionEnd() &gt; getSelectionStart() &amp;&amp; !selectionIsOnSameLine()) {                       </span>
<span class="-2157237143863252877" onmouseenter="enter('-2157237143863252877');" onmouseout="out('-2157237143863252877');" style=""> 228             end = getSelectionEnd();                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 229         } else {                                                                                         </span>
<span class="2502740913562218300" onmouseenter="enter('2502740913562218300');" onmouseout="out('2502740913562218300');" style=""> 230             end = getLayout().getLineEnd(lineNumber);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 231         }                                                                                                </span>
<span  style=""> 232                                                                                                          </span>
<span class="2155198360249988636" onmouseenter="enter('2155198360249988636');" onmouseout="out('2155198360249988636');" style=""><abbr title=" 233         SpannableStringBuilder workingString = new SpannableStringBuilder(getText().subSequence(start, end));"> 233         SpannableStringBuilder workingString = new SpannableStringBuilder(getText().subSequence(start, en🔵</abbr></span>
<span class="-3429280970080248112" onmouseenter="enter('-3429280970080248112');" onmouseout="out('-3429280970080248112');" style=""> 234         Editable editable = getText();                                                                   </span>
<span class="-1786745955335503454" onmouseenter="enter('-1786745955335503454');" onmouseout="out('-1786745955335503454');" style=""> 235         if (editable.length() &lt; start || editable.length() &lt; end) {                                      </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 236             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 237         }                                                                                                </span>
<span  style=""> 238                                                                                                          </span>
<span class="-4021007956188151859" onmouseenter="enter('-4021007956188151859');" onmouseout="out('-4021007956188151859');" style=""> 239         int previousSelection = getSelectionStart();                                                     </span>
<span class="-7401262641884842036" onmouseenter="enter('-7401262641884842036');" onmouseout="out('-7401262641884842036');" style=""><abbr title=" 240         CheckableSpan[] checkableSpans = workingString.getSpans(0, workingString.length(), CheckableSpan.class);"> 240         CheckableSpan[] checkableSpans = workingString.getSpans(0, workingString.length(), CheckableSpan.🔵</abbr></span>
<span class="-3983435901659757897" onmouseenter="enter('-3983435901659757897');" onmouseout="out('-3983435901659757897');" style=""> 241         if (checkableSpans.length &gt; 0) {                                                                 </span>
<span class="-1723631309680670098" onmouseenter="enter('-1723631309680670098');" onmouseout="out('-1723631309680670098');" style=""> 242             // Remove any CheckableSpans found                                                           </span>
<span class="8606250068555850418" onmouseenter="enter('8606250068555850418');" onmouseout="out('8606250068555850418');" style=""> 243             for (CheckableSpan span: checkableSpans) {                                                   </span>
<span class="-8209396112528216299" onmouseenter="enter('-8209396112528216299');" onmouseout="out('-8209396112528216299');" style=""> 244                 workingString.replace(                                                                   </span>
<span class="7365374273051143475" onmouseenter="enter('7365374273051143475');" onmouseout="out('7365374273051143475');" style=""> 245                         workingString.getSpanStart(span),                                                </span>
<span class="5673880950278913259" onmouseenter="enter('5673880950278913259');" onmouseout="out('5673880950278913259');" style=""> 246                         workingString.getSpanEnd(span) + 1,                                              </span>
<span class="7887690425633568697" onmouseenter="enter('7887690425633568697');" onmouseout="out('7887690425633568697');" style=""> 247                         &quot;&quot;                                                                               </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 248                 );                                                                                       </span>
<span class="-7905663944685048412" onmouseenter="enter('-7905663944685048412');" onmouseout="out('-7905663944685048412');" style=""> 249                 workingString.removeSpan(span);                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 250             }                                                                                            </span>
<span  style=""> 251                                                                                                          </span>
<span class="1818093574225738447" onmouseenter="enter('1818093574225738447');" onmouseout="out('1818093574225738447');" style=""> 252             editable.replace(start, end, workingString);                                                 </span>
<span  style=""> 253                                                                                                          </span>
<span class="559052113481581758" onmouseenter="enter('559052113481581758');" onmouseout="out('559052113481581758');" style=""> 254             if (checkableSpans.length == 1) {                                                            </span>
<span class="-811974177834571960" onmouseenter="enter('-811974177834571960');" onmouseout="out('-811974177834571960');" style=""> 255                 int newSelection = Math.max(previousSelection - CHECKBOX_LENGTH, 0);                     </span>
<span class="1548041209841422053" onmouseenter="enter('1548041209841422053');" onmouseout="out('1548041209841422053');" style=""> 256                 if (editable.length() &gt;= newSelection) {                                                 </span>
<span class="-1551928067227182439" onmouseenter="enter('-1551928067227182439');" onmouseout="out('-1551928067227182439');" style=""> 257                     setSelection(newSelection);                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 258                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 259             }                                                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 260         } else {                                                                                         </span>
<span class="7908237664339315590" onmouseenter="enter('7908237664339315590');" onmouseout="out('7908237664339315590');" style=""> 261             // Insert a checklist for each line                                                          </span>
<span class="9092008481531189309" onmouseenter="enter('9092008481531189309');" onmouseout="out('9092008481531189309');" style=""> 262             String[] lines = workingString.toString().split(&quot;(?&lt;=\n)&quot;);                                  </span>
<span class="-2021014457160624880" onmouseenter="enter('-2021014457160624880');" onmouseout="out('-2021014457160624880');" style=""> 263             StringBuilder resultString = new StringBuilder();                                            </span>
<span  style=""> 264                                                                                                          </span>
<span class="1824047840691841029" onmouseenter="enter('1824047840691841029');" onmouseout="out('1824047840691841029');" style=""> 265             for (String lineString: lines) {                                                             </span>
<span class="2358811559308129106" onmouseenter="enter('2358811559308129106');" onmouseout="out('2358811559308129106');" style=""> 266                 // Preserve the spaces before the text                                                   </span>
<span class="-976435609607935349" onmouseenter="enter('-976435609607935349');" onmouseout="out('-976435609607935349');" style=""> 267                 int leadingSpaceCount;                                                                   </span>
<span class="-2007073157338218983" onmouseenter="enter('-2007073157338218983');" onmouseout="out('-2007073157338218983');" style=""> 268                 if (lineString.trim().length() == 0) {                                                   </span>
<span class="1650658955318262016" onmouseenter="enter('1650658955318262016');" onmouseout="out('1650658955318262016');" style=""> 269                     // Only whitespace content, get count of spaces                                      </span>
<span class="2598856147688027045" onmouseenter="enter('2598856147688027045');" onmouseout="out('2598856147688027045');" style=""> 270                     leadingSpaceCount = lineString.length() - lineString.replaceAll(&quot; &quot;, &quot;&quot;).length();   </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 271                 } else {                                                                                 </span>
<span class="3037156392896338412" onmouseenter="enter('3037156392896338412');" onmouseout="out('3037156392896338412');" style=""> 272                     // Get count of spaces up to first non-whitespace character                          </span>
<span class="-2037575593720791721" onmouseenter="enter('-2037575593720791721');" onmouseout="out('-2037575593720791721');" style=""> 273                     leadingSpaceCount = lineString.indexOf(lineString.trim());                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 274                 }                                                                                        </span>
<span  style=""> 275                                                                                                          </span>
<span class="1113723887572128376" onmouseenter="enter('1113723887572128376');" onmouseout="out('1113723887572128376');" style=""> 276                 if (leadingSpaceCount &gt; 0) {                                                             </span>
<span class="-4607277845227497529" onmouseenter="enter('-4607277845227497529');" onmouseout="out('-4607277845227497529');" style=""> 277                     resultString.append(new String(new char[leadingSpaceCount]).replace(&#x27;\0&#x27;, &#x27; &#x27;));     </span>
<span class="1014609549743804890" onmouseenter="enter('1014609549743804890');" onmouseout="out('1014609549743804890');" style=""> 278                     lineString = lineString.substring(leadingSpaceCount);                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 279                 }                                                                                        </span>
<span  style=""> 280                                                                                                          </span>
<span class="-4759602698755112129" onmouseenter="enter('-4759602698755112129');" onmouseout="out('-4759602698755112129');" style=""> 281                 resultString                                                                             </span>
<span class="-6300937305952313219" onmouseenter="enter('-6300937305952313219');" onmouseout="out('-6300937305952313219');" style=""> 282                         .append(ChecklistUtils.UNCHECKED_MARKDOWN)                                       </span>
<span class="-7012949866063989115" onmouseenter="enter('-7012949866063989115');" onmouseout="out('-7012949866063989115');" style=""> 283                         .append(&quot; &quot;)                                                                     </span>
<span class="-2140099013154536267" onmouseenter="enter('-2140099013154536267');" onmouseout="out('-2140099013154536267');" style=""> 284                         .append(lineString);                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 285             }                                                                                            </span>
<span  style=""> 286                                                                                                          </span>
<span class="327663848358659642" onmouseenter="enter('327663848358659642');" onmouseout="out('327663848358659642');" style=""> 287             editable.replace(start, end, resultString);                                                  </span>
<span  style=""> 288                                                                                                          </span>
<span class="-7244042633242525084" onmouseenter="enter('-7244042633242525084');" onmouseout="out('-7244042633242525084');" style=""> 289             int newSelection = Math.max(previousSelection, 0) + (lines.length * CHECKBOX_LENGTH);        </span>
<span class="1548041209841422053" onmouseenter="enter('1548041209841422053');" onmouseout="out('1548041209841422053');" style=""> 290             if (editable.length() &gt;= newSelection) {                                                     </span>
<span class="-1551928067227182439" onmouseenter="enter('-1551928067227182439');" onmouseout="out('-1551928067227182439');" style=""> 291                 setSelection(newSelection);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 292             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 293         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 294     }                                                                                                    </span>
<span  style=""> 295                                                                                                          </span>
<span class="-1068085743919359847" onmouseenter="enter('-1068085743919359847');" onmouseout="out('-1068085743919359847');" style=""> 296     // Returns true if the current editor selection is on the same line                                  </span>
<span class="-1322680323963324573" onmouseenter="enter('-1322680323963324573');" onmouseout="out('-1322680323963324573');" style=""> 297     private boolean selectionIsOnSameLine() {                                                            </span>
<span class="-8708010820158817009" onmouseenter="enter('-8708010820158817009');" onmouseout="out('-8708010820158817009');" style=""> 298         int selectionStart = getSelectionStart();                                                        </span>
<span class="-8399501927910381124" onmouseenter="enter('-8399501927910381124');" onmouseout="out('-8399501927910381124');" style=""> 299         int selectionEnd = getSelectionEnd();                                                            </span>
<span class="-9041693021121574938" onmouseenter="enter('-9041693021121574938');" onmouseout="out('-9041693021121574938');" style=""> 300         Layout layout = getLayout();                                                                     </span>
<span  style=""> 301                                                                                                          </span>
<span class="-5006678790845707461" onmouseenter="enter('-5006678790845707461');" onmouseout="out('-5006678790845707461');" style=""> 302         if (selectionStart &gt;= 0 &amp;&amp; selectionEnd &gt;= 0) {                                                  </span>
<span class="7452975995927250930" onmouseenter="enter('7452975995927250930');" onmouseout="out('7452975995927250930');" style=""> 303             return layout.getLineForOffset(selectionStart) == layout.getLineForOffset(selectionEnd);     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 304         }                                                                                                </span>
<span  style=""> 305                                                                                                          </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 306         return false;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 307     }                                                                                                    </span>
<span  style=""> 308                                                                                                          </span>
<span class="2245519181968029694" onmouseenter="enter('2245519181968029694');" onmouseout="out('2245519181968029694');" style=""> 309     public void fixLineSpacing() {                                                                       </span>
<span class="3739656730239017857" onmouseenter="enter('3739656730239017857');" onmouseout="out('3739656730239017857');" style=""> 310         // Prevents line heights from compacting                                                         </span>
<span class="-2883030315986006038" onmouseenter="enter('-2883030315986006038');" onmouseout="out('-2883030315986006038');" style=""> 311         // https://issuetracker.google.com/issues/37009353                                               </span>
<span class="593486953485328476" onmouseenter="enter('593486953485328476');" onmouseout="out('593486953485328476');" style=""> 312         float lineSpacingExtra = getLineSpacingExtra();                                                  </span>
<span class="-8024412754689478694" onmouseenter="enter('-8024412754689478694');" onmouseout="out('-8024412754689478694');" style=""> 313         float lineSpacingMultiplier = getLineSpacingMultiplier();                                        </span>
<span class="8227210311807072313" onmouseenter="enter('8227210311807072313');" onmouseout="out('8227210311807072313');" style=""> 314         setLineSpacing(0.0f, 1.0f);                                                                      </span>
<span class="-9061865158009916868" onmouseenter="enter('-9061865158009916868');" onmouseout="out('-9061865158009916868');" style=""> 315         setLineSpacing(lineSpacingExtra, lineSpacingMultiplier);                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 316     }                                                                                                    </span>
<span  style=""> 317                                                                                                          </span>
<span class="-7557861489858202648" onmouseenter="enter('-7557861489858202648');" onmouseout="out('-7557861489858202648');" style=""> 318     public interface OnSelectionChangedListener {                                                        </span>
<span class="-2603544447302104250" onmouseenter="enter('-2603544447302104250');" onmouseout="out('-2603544447302104250');" style=""> 319         void onSelectionChanged(int selStart, int selEnd);                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 320     }                                                                                                    </span>
<span  style=""> 321                                                                                                          </span>
<span class="-2496270541861205859" onmouseenter="enter('-2496270541861205859');" onmouseout="out('-2496270541861205859');" style=""> 322     // Replaces any CheckableSpans with their markdown counterpart (e.g. &#x27;- [ ]&#x27;)                        </span>
<span class="-3349734715224755384" onmouseenter="enter('-3349734715224755384');" onmouseout="out('-3349734715224755384');" style=""> 323     public String getPlainTextContent() {                                                                </span>
<span class="-1769659359974524880" onmouseenter="enter('-1769659359974524880');" onmouseout="out('-1769659359974524880');" style=""> 324         if (getText() == null) {                                                                         </span>
<span class="-8289946804601166879" onmouseenter="enter('-8289946804601166879');" onmouseout="out('-8289946804601166879');" style=""> 325             return &quot;&quot;;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 326         }                                                                                                </span>
<span  style=""> 327                                                                                                          </span>
<span class="-5774176688206725478" onmouseenter="enter('-5774176688206725478');" onmouseout="out('-5774176688206725478');" style=""> 328         SpannableStringBuilder content = new SpannableStringBuilder(getText());                          </span>
<span class="3967945012021671393" onmouseenter="enter('3967945012021671393');" onmouseout="out('3967945012021671393');" style=""> 329         CheckableSpan[] spans = content.getSpans(0, content.length(), CheckableSpan.class);              </span>
<span class="3321734155540722629" onmouseenter="enter('3321734155540722629');" onmouseout="out('3321734155540722629');" style=""> 330         for(CheckableSpan span: spans) {                                                                 </span>
<span class="9048125924196956410" onmouseenter="enter('9048125924196956410');" onmouseout="out('9048125924196956410');" style=""> 331             int start = content.getSpanStart(span);                                                      </span>
<span class="7525585125635328254" onmouseenter="enter('7525585125635328254');" onmouseout="out('7525585125635328254');" style=""> 332             int end = content.getSpanEnd(span);                                                          </span>
<span class="7328134583038878217" onmouseenter="enter('7328134583038878217');" onmouseout="out('7328134583038878217');" style=""> 333             ((Editable) content).replace(                                                                </span>
<span class="96671177266943526" onmouseenter="enter('96671177266943526');" onmouseout="out('96671177266943526');" style=""> 334                     start,                                                                               </span>
<span class="-8378543162701826190" onmouseenter="enter('-8378543162701826190');" onmouseout="out('-8378543162701826190');" style=""> 335                     end,                                                                                 </span>
<span class="3531746424024935349" onmouseenter="enter('3531746424024935349');" onmouseout="out('3531746424024935349');" style=""><abbr title=" 336                     span.isChecked() ? ChecklistUtils.CHECKED_MARKDOWN : ChecklistUtils.UNCHECKED_MARKDOWN);"> 336                     span.isChecked() ? ChecklistUtils.CHECKED_MARKDOWN : ChecklistUtils.UNCHECKED_MARKDOW🔵</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 337         }                                                                                                </span>
<span  style=""> 338                                                                                                          </span>
<span class="-5768072572856737542" onmouseenter="enter('-5768072572856737542');" onmouseout="out('-5768072572856737542');" style=""> 339         return content.toString();                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 340     }                                                                                                    </span>
<span  style=""> 341                                                                                                          </span>
<span class="-4058542168993639710" onmouseenter="enter('-4058542168993639710');" onmouseout="out('-4058542168993639710');" style=""> 342     // Replaces any CheckableSpans with their markdown preview counterpart (e.g. &#x27;- [\u2a2f]&#x27;)           </span>
<span class="-4279713333663092916" onmouseenter="enter('-4279713333663092916');" onmouseout="out('-4279713333663092916');" style=""> 343     public String getPreviewTextContent() {                                                              </span>
<span class="-1769659359974524880" onmouseenter="enter('-1769659359974524880');" onmouseout="out('-1769659359974524880');" style=""> 344         if (getText() == null) {                                                                         </span>
<span class="-8289946804601166879" onmouseenter="enter('-8289946804601166879');" onmouseout="out('-8289946804601166879');" style=""> 345             return &quot;&quot;;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 346         }                                                                                                </span>
<span  style=""> 347                                                                                                          </span>
<span class="-5774176688206725478" onmouseenter="enter('-5774176688206725478');" onmouseout="out('-5774176688206725478');" style=""> 348         SpannableStringBuilder content = new SpannableStringBuilder(getText());                          </span>
<span class="3967945012021671393" onmouseenter="enter('3967945012021671393');" onmouseout="out('3967945012021671393');" style=""> 349         CheckableSpan[] spans = content.getSpans(0, content.length(), CheckableSpan.class);              </span>
<span class="3321734155540722629" onmouseenter="enter('3321734155540722629');" onmouseout="out('3321734155540722629');" style=""> 350         for(CheckableSpan span: spans) {                                                                 </span>
<span class="9048125924196956410" onmouseenter="enter('9048125924196956410');" onmouseout="out('9048125924196956410');" style=""> 351             int start = content.getSpanStart(span);                                                      </span>
<span class="7525585125635328254" onmouseenter="enter('7525585125635328254');" onmouseout="out('7525585125635328254');" style=""> 352             int end = content.getSpanEnd(span);                                                          </span>
<span class="7328134583038878217" onmouseenter="enter('7328134583038878217');" onmouseout="out('7328134583038878217');" style=""> 353             ((Editable) content).replace(                                                                </span>
<span class="96671177266943526" onmouseenter="enter('96671177266943526');" onmouseout="out('96671177266943526');" style=""> 354                     start,                                                                               </span>
<span class="-8378543162701826190" onmouseenter="enter('-8378543162701826190');" onmouseout="out('-8378543162701826190');" style=""> 355                     end,                                                                                 </span>
<span class="-8440602794388940209" onmouseenter="enter('-8440602794388940209');" onmouseout="out('-8440602794388940209');" style=""><abbr title=" 356                     span.isChecked() ? ChecklistUtils.CHECKED_MARKDOWN_PREVIEW : ChecklistUtils.UNCHECKED_MARKDOWN);"> 356                     span.isChecked() ? ChecklistUtils.CHECKED_MARKDOWN_PREVIEW : ChecklistUtils.UNCHECKED🔵</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 357         }                                                                                                </span>
<span  style=""> 358                                                                                                          </span>
<span class="-5768072572856737542" onmouseenter="enter('-5768072572856737542');" onmouseout="out('-5768072572856737542');" style=""> 359         return content.toString();                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 360     }                                                                                                    </span>
<span  style=""> 361                                                                                                          </span>
<span  style=""> 362                                                                                                          </span>
<span class="-8793607864180089375" onmouseenter="enter('-8793607864180089375');" onmouseout="out('-8793607864180089375');" style=""> 363     public void processChecklists() {                                                                    </span>
<span class="-822567654445480874" onmouseenter="enter('-822567654445480874');" onmouseout="out('-822567654445480874');" style=""> 364         if (getText().length() == 0 || getContext() == null) {                                           </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 365             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 366         }                                                                                                </span>
<span  style=""> 367                                                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 368         try {                                                                                            </span>
<span class="-2879977185755091274" onmouseenter="enter('-2879977185755091274');" onmouseout="out('-2879977185755091274');" style=""> 369             ChecklistUtils.addChecklistSpansForRegexAndColor(                                            </span>
<span class="4777936721428774843" onmouseenter="enter('4777936721428774843');" onmouseout="out('4777936721428774843');" style=""> 370                     getContext(),                                                                        </span>
<span class="6494562836495618397" onmouseenter="enter('6494562836495618397');" onmouseout="out('6494562836495618397');" style=""> 371                     getText(),                                                                           </span>
<span class="-5190158693774204825" onmouseenter="enter('-5190158693774204825');" onmouseout="out('-5190158693774204825');" style=""> 372                     ChecklistUtils.CHECKLIST_REGEX_LINES,                                                </span>
<span class="-183067455432259027" onmouseenter="enter('-183067455432259027');" onmouseout="out('-183067455432259027');" style=""> 373                     R.color.text_title_disabled);                                                        </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 374         } catch (Exception e) {                                                                          </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 375             e.printStackTrace();                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 376         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 377     }                                                                                                    </span>
<span  style=""> 378                                                                                                          </span>
<span class="-7678796331074634227" onmouseenter="enter('-7678796331074634227');" onmouseout="out('-7678796331074634227');" style=""> 379     public void setOnCheckboxToggledListener(OnCheckboxToggledListener listener) {                       </span>
<span class="3565913960515795124" onmouseenter="enter('3565913960515795124');" onmouseout="out('3565913960515795124');" style=""> 380         mOnCheckboxToggledListener = listener;                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 381     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 382 }                                                                                                        </span>































































































































</pre></td>
                            <td><pre><span class="2121239535603548975" onmouseenter="enter('2121239535603548975');" onmouseout="out('2121239535603548975');" style="">   1 package com.automattic.simplenote.widgets;                                                               </span>
<span  style="">   2                                                                                                          </span>
<span class="5922045460006936195" onmouseenter="enter('5922045460006936195');" onmouseout="out('5922045460006936195');" style="">   3 import android.content.Context;                                                                          </span>
<span class="2207333516549486115" onmouseenter="enter('2207333516549486115');" onmouseout="out('2207333516549486115');" style="">   4 import android.graphics.Rect;                                                                            </span>
<span class="-1737226814075322931" onmouseenter="enter('-1737226814075322931');" onmouseout="out('-1737226814075322931');" style="">   5 import android.graphics.drawable.Drawable;                                                               </span>
<span class="-1086316590722027623" onmouseenter="enter('-1086316590722027623');" onmouseout="out('-1086316590722027623');" style="">   6 import android.os.Handler;                                                                               </span>
<span class="4177373235046048356" onmouseenter="enter('4177373235046048356');" onmouseout="out('4177373235046048356');" style="">   7 import android.text.Editable;                                                                            </span>
<span class="-578015270574978569" onmouseenter="enter('-578015270574978569');" onmouseout="out('-578015270574978569');" style="">   8 import android.text.Layout;                                                                              </span>
<span class="7007167342609832330" onmouseenter="enter('7007167342609832330');" onmouseout="out('7007167342609832330');" style="">   9 import android.text.SpannableStringBuilder;                                                              </span>
<span class="7731806713123176572" onmouseenter="enter('7731806713123176572');" onmouseout="out('7731806713123176572');" style="">  10 import android.text.Spanned;                                                                             </span>
<span class="8961068409863998468" onmouseenter="enter('8961068409863998468');" onmouseout="out('8961068409863998468');" style="">  11 import android.text.style.ImageSpan;                                                                     </span>
<span class="-4218724752779269131" onmouseenter="enter('-4218724752779269131');" onmouseout="out('-4218724752779269131');" style="">  12 import android.util.AttributeSet;                                                                        </span>
<span class="959108076239844050" onmouseenter="enter('959108076239844050');" onmouseout="out('959108076239844050');" style="">  13 import android.view.KeyEvent;                                                                            </span>
<span class="-8980485571216513882" onmouseenter="enter('-8980485571216513882');" onmouseout="out('-8980485571216513882');" style="">  14 import android.view.View;                                                                                </span>
<span class="-3898686145228074474" onmouseenter="enter('-3898686145228074474');" onmouseout="out('-3898686145228074474');" style="">  15 import android.widget.AdapterView;                                                                       </span>
<span class="-8037490851538345990" onmouseenter="enter('-8037490851538345990');" onmouseout="out('-8037490851538345990');" style="">  16 import androidx.appcompat.widget.AppCompatMultiAutoCompleteTextView;                                     </span>
<span class="5842151950717757009" onmouseenter="enter('5842151950717757009');" onmouseout="out('5842151950717757009');" style="">  17 import androidx.core.content.ContextCompat;                                                              </span>
<span class="-6092371777820512633" onmouseenter="enter('-6092371777820512633');" onmouseout="out('-6092371777820512633');" style="">  18 import com.automattic.simplenote.R;                                                                      </span>
<span class="9061368408436996655" onmouseenter="enter('9061368408436996655');" onmouseout="out('9061368408436996655');" style="">  19 import com.automattic.simplenote.models.Note;                                                            </span>
<span class="1987879750509178857" onmouseenter="enter('1987879750509178857');" onmouseout="out('1987879750509178857');" style="">  20 import com.automattic.simplenote.utils.ChecklistUtils;                                                   </span>
<span class="8577850632926167445" onmouseenter="enter('8577850632926167445');" onmouseout="out('8577850632926167445');" style="">  21 import com.automattic.simplenote.utils.DisplayUtils;                                                     </span>
<span class="930019215389101465" onmouseenter="enter('930019215389101465');" onmouseout="out('930019215389101465');" style="">  22 import com.automattic.simplenote.utils.DrawableUtils;                                                    </span>
<span class="-5948624663998670139" onmouseenter="enter('-5948624663998670139');" onmouseout="out('-5948624663998670139');" style="">  23 import com.automattic.simplenote.utils.LinkTokenizer;                                                    </span>
<span class="2537926396801226048" onmouseenter="enter('2537926396801226048');" onmouseout="out('2537926396801226048');" style="">  24 import com.automattic.simplenote.utils.SimplenoteLinkify;                                                </span>
<span class="-8170925370861558125" onmouseenter="enter('-8170925370861558125');" onmouseout="out('-8170925370861558125');" style="">  25 import com.simperium.client.Bucket;                                                                      </span>
<span class="9191247685397773893" onmouseenter="enter('9191247685397773893');" onmouseout="out('9191247685397773893');" style="">  26 import java.util.ArrayList;                                                                              </span>
<span class="-1786020958497218848" onmouseenter="enter('-1786020958497218848');" onmouseout="out('-1786020958497218848');" style="">  27 import java.util.List;                                                                                   </span>
<span class="2159928926335330273" onmouseenter="enter('2159928926335330273');" onmouseout="out('2159928926335330273');" style="">  28 import java.util.regex.Matcher;                                                                          </span>
<span class="1513108047920599059" onmouseenter="enter('1513108047920599059');" onmouseout="out('1513108047920599059');" style="">  29 import java.util.regex.Pattern;                                                                          </span>
<span class="1948737371075708279" onmouseenter="enter('1948737371075708279');" onmouseout="out('1948737371075708279');" style="">  30 import static com.automattic.simplenote.utils.SimplenoteLinkify.SIMPLENOTE_LINK_ID;                      </span>
<span class="-4405840676582391526" onmouseenter="enter('-4405840676582391526');" onmouseout="out('-4405840676582391526');" style="">  31 import static com.automattic.simplenote.utils.SimplenoteLinkify.SIMPLENOTE_LINK_PREFIX;                  </span>
<span  style="">  32                                                                                                          </span>
<span  style="">  33                                                                                                          </span>
<span class="-117003403243561872" onmouseenter="enter('-117003403243561872');" onmouseout="out('-117003403243561872');" style=""><abbr title="  34 public class SimplenoteEditText extends AppCompatMultiAutoCompleteTextView implements AdapterView.OnItemClickListener {">  34 public class SimplenoteEditText extends AppCompatMultiAutoCompleteTextView implements AdapterView.OnItemC🔵</abbr></span>
<span class="4400513732356126489" onmouseenter="enter('4400513732356126489');" onmouseout="out('4400513732356126489');" style=""><abbr title="  35     private static final Pattern INTERNOTE_LINK_PATTERN_EDIT = Pattern.compile(&quot;([^]]*)(]\\(&quot; + SIMPLENOTE_LINK_PREFIX + SIMPLENOTE_LINK_ID + &quot;\\))&quot;);">  35     private static final Pattern INTERNOTE_LINK_PATTERN_EDIT = Pattern.compile(&quot;([^]]*)(]\\(&quot; + SIMPLENOT🔵</abbr></span>
<span  style="">  36                                                                                                          </span>
<span class="-875162683766216906" onmouseenter="enter('-875162683766216906');" onmouseout="out('-875162683766216906');" style=""><abbr title="  37     private static final Pattern INTERNOTE_LINK_PATTERN_FULL = Pattern.compile(&quot;(?s)(.)*(\\[)&quot; + INTERNOTE_LINK_PATTERN_EDIT);">  37     private static final Pattern INTERNOTE_LINK_PATTERN_FULL = Pattern.compile(&quot;(?s)(.)*(\\[)&quot; + INTERNOT🔵</abbr></span>
<span  style="">  38                                                                                                          </span>
<span class="6331543881928719061" onmouseenter="enter('6331543881928719061');" onmouseout="out('6331543881928719061');" style="">  39     // one ClickableSpan character + one space character                                                 </span>
<span class="-2213529913395771110" onmouseenter="enter('-2213529913395771110');" onmouseout="out('-2213529913395771110');" style="">  40     private static final int CHECKBOX_LENGTH = 2;                                                        </span>
<span  style="">  41                                                                                                          </span>
<span class="1196031820703007842" onmouseenter="enter('1196031820703007842');" onmouseout="out('1196031820703007842');" style="">  42     private LinkTokenizer mTokenizer;                                                                    </span>
<span  style="">  43                                                                                                          </span>
<span class="1190896655347967160" onmouseenter="enter('1190896655347967160');" onmouseout="out('1190896655347967160');" style="">  44     private List&lt;OnSelectionChangedListener&gt; listeners;                                                  </span>
<span  style="">  45                                                                                                          </span>
<span class="-5202758860929245202" onmouseenter="enter('-5202758860929245202');" onmouseout="out('-5202758860929245202');" style="">  46     private OnCheckboxToggledListener mOnCheckboxToggledListener;                                        </span>
<span  style="">  47                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  48     @Override                                                                                            </span>
<span class="-4725396128083470659" onmouseenter="enter('-4725396128083470659');" onmouseout="out('-4725396128083470659');" style="">  49     public boolean enoughToFilter() {                                                                    </span>
<span class="-408752473959783546" onmouseenter="enter('-408752473959783546');" onmouseout="out('-408752473959783546');" style="">  50         String substringCursor = getText().toString().substring(getSelectionEnd());                      </span>
<span class="-9172431867047830396" onmouseenter="enter('-9172431867047830396');" onmouseout="out('-9172431867047830396');" style="">  51         Matcher matcherEdit = INTERNOTE_LINK_PATTERN_EDIT.matcher(substringCursor);                      </span>
<span  style="">  52                                                                                                          </span>
<span class="2663075153106693403" onmouseenter="enter('2663075153106693403');" onmouseout="out('2663075153106693403');" style="">  53         // When an internote link title is being edited, don&#x27;t show an autocomplete popup.               </span>
<span class="3648956898641204215" onmouseenter="enter('3648956898641204215');" onmouseout="out('3648956898641204215');" style="">  54         if (matcherEdit.lookingAt()) {                                                                   </span>
<span class="2950221330115688931" onmouseenter="enter('2950221330115688931');" onmouseout="out('2950221330115688931');" style="">  55             String substringEdit = substringCursor.substring(0, matcherEdit.end());                      </span>
<span class="1311569057139673901" onmouseenter="enter('1311569057139673901');" onmouseout="out('1311569057139673901');" style="">  56             Matcher matcherFull = INTERNOTE_LINK_PATTERN_FULL.matcher(substringEdit);                    </span>
<span  style="">  57                                                                                                          </span>
<span class="4323098233182236709" onmouseenter="enter('4323098233182236709');" onmouseout="out('4323098233182236709');" style="">  58             if (!matcherFull.lookingAt()) {                                                              </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">  59                 return false;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  60             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  61         }                                                                                                </span>
<span  style="">  62                                                                                                          </span>
<span class="8648892168213198446" onmouseenter="enter('8648892168213198446');" onmouseout="out('8648892168213198446');" style="">  63         Editable text = getText();                                                                       </span>
<span class="-5347114162693005051" onmouseenter="enter('-5347114162693005051');" onmouseout="out('-5347114162693005051');" style="">  64         int end = getSelectionEnd();                                                                     </span>
<span  style="">  65                                                                                                          </span>
<span class="-2364642465072686278" onmouseenter="enter('-2364642465072686278');" onmouseout="out('-2364642465072686278');" style="">  66         if (end &lt; 0) {                                                                                   </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">  67             return false;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  68         }                                                                                                </span>
<span  style="">  69                                                                                                          </span>
<span class="-6730134198157735680" onmouseenter="enter('-6730134198157735680');" onmouseout="out('-6730134198157735680');" style="">  70         int start = mTokenizer.findTokenStart(text, end);                                                </span>
<span class="3206229991437838506" onmouseenter="enter('3206229991437838506');" onmouseout="out('3206229991437838506');" style="">  71         return start &gt; 0 &amp;&amp; end - start &gt;= 1;                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  72     }                                                                                                    </span>
<span  style="">  73                                                                                                          </span>
<span class="7419298585035749039" onmouseenter="enter('7419298585035749039');" onmouseout="out('7419298585035749039');" style="">  74     public interface OnCheckboxToggledListener {                                                         </span>
<span class="-57980219314657044" onmouseenter="enter('-57980219314657044');" onmouseout="out('-57980219314657044');" style="">  75         public abstract void onCheckboxToggled();                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  76     }                                                                                                    </span>
<span  style="">  77                                                                                                          </span>
<span class="9083968033793714051" onmouseenter="enter('9083968033793714051');" onmouseout="out('9083968033793714051');" style="">  78     public SimplenoteEditText(Context context) {                                                         </span>
<span class="-8232648159726954046" onmouseenter="enter('-8232648159726954046');" onmouseout="out('-8232648159726954046');" style="">  79         super(context);                                                                                  </span>
<span class="4798086328679447282" onmouseenter="enter('4798086328679447282');" onmouseout="out('4798086328679447282');" style="">  80         listeners = new ArrayList&lt;&gt;();                                                                   </span>
<span  style="">  81                                                                                                          </span>
<span class="-6681681893462133916" onmouseenter="enter('-6681681893462133916');" onmouseout="out('-6681681893462133916');" style="">  82 &lt;&lt;&lt;&lt;&lt;&lt;&lt; LEFT                                                                                             </span>
<span  style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  83                                                                                                          </span>
<span class="7991106586064342212" onmouseenter="enter('7991106586064342212');" onmouseout="out('7991106586064342212');" style="">  84 ||||||| BASE                                                                                             </span>
<span class="-3639349873877828882" onmouseenter="enter('-3639349873877828882');" onmouseout="out('-3639349873877828882');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"><abbr title="  85 /*d94z9sk0k4hf9j3ijd - note the base isn&#x27;t actually empty, spork simply doesn&#x27;t generate a base - gd930kwohrp23k5b6vdk93d3r*/">  85 /*d94z9sk0k4hf9j3ijd - note the base isn&#x27;t actually empty, spork simply doesn&#x27;t generate a base - gd930kw🔵</abbr></span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style="">  86 =======                                                                                                  </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  87                                                                                                          </span>
<span class="8285102428439000867" onmouseenter="enter('8285102428439000867');" onmouseout="out('8285102428439000867');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  88         setTypeface(TypefaceCache.getTypeface(context, TypefaceCache.TYPEFACE_NAME_ROBOTO_REGULAR));     </span>
<span class="-4364621221695153856" onmouseenter="enter('-4364621221695153856');" onmouseout="out('-4364621221695153856');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  89         setLinkTokenizer();                                                                              </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  90                                                                                                          </span>
<span class="-1814092468913316143" onmouseenter="enter('-1814092468913316143');" onmouseout="out('-1814092468913316143');" style="">  91 &gt;&gt;&gt;&gt;&gt;&gt;&gt; RIGHT                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  92     }                                                                                                    </span>
<span  style="">  93                                                                                                          </span>
<span class="-5191028644893669048" onmouseenter="enter('-5191028644893669048');" onmouseout="out('-5191028644893669048');" style="">  94     public SimplenoteEditText(Context context, AttributeSet attrs) {                                     </span>
<span class="6666522707728770706" onmouseenter="enter('6666522707728770706');" onmouseout="out('6666522707728770706');" style="">  95         super(context, attrs);                                                                           </span>
<span class="4798086328679447282" onmouseenter="enter('4798086328679447282');" onmouseout="out('4798086328679447282');" style="">  96         listeners = new ArrayList&lt;&gt;();                                                                   </span>
<span  style="">  97                                                                                                          </span>
<span class="-6681681893462133916" onmouseenter="enter('-6681681893462133916');" onmouseout="out('-6681681893462133916');" style="">  98 &lt;&lt;&lt;&lt;&lt;&lt;&lt; LEFT                                                                                             </span>
<span  style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  99                                                                                                          </span>
<span class="7991106586064342212" onmouseenter="enter('7991106586064342212');" onmouseout="out('7991106586064342212');" style=""> 100 ||||||| BASE                                                                                             </span>
<span class="-3639349873877828882" onmouseenter="enter('-3639349873877828882');" onmouseout="out('-3639349873877828882');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"><abbr title=" 101 /*d94z9sk0k4hf9j3ijd - note the base isn&#x27;t actually empty, spork simply doesn&#x27;t generate a base - gd930kwohrp23k5b6vdk93d3r*/"> 101 /*d94z9sk0k4hf9j3ijd - note the base isn&#x27;t actually empty, spork simply doesn&#x27;t generate a base - gd930kw🔵</abbr></span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style=""> 102 =======                                                                                                  </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 103                                                                                                          </span>
<span class="8285102428439000867" onmouseenter="enter('8285102428439000867');" onmouseout="out('8285102428439000867');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 104         setTypeface(TypefaceCache.getTypeface(context, TypefaceCache.TYPEFACE_NAME_ROBOTO_REGULAR));     </span>
<span class="-4364621221695153856" onmouseenter="enter('-4364621221695153856');" onmouseout="out('-4364621221695153856');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 105         setLinkTokenizer();                                                                              </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 106                                                                                                          </span>
<span class="-1814092468913316143" onmouseenter="enter('-1814092468913316143');" onmouseout="out('-1814092468913316143');" style=""> 107 &gt;&gt;&gt;&gt;&gt;&gt;&gt; RIGHT                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 108     }                                                                                                    </span>
<span  style=""> 109                                                                                                          </span>
<span class="-5033151626525601752" onmouseenter="enter('-5033151626525601752');" onmouseout="out('-5033151626525601752');" style=""> 110     public SimplenoteEditText(Context context, AttributeSet attrs, int defStyle) {                       </span>
<span class="1281987604327041578" onmouseenter="enter('1281987604327041578');" onmouseout="out('1281987604327041578');" style=""> 111         super(context, attrs, defStyle);                                                                 </span>
<span class="4798086328679447282" onmouseenter="enter('4798086328679447282');" onmouseout="out('4798086328679447282');" style=""> 112         listeners = new ArrayList&lt;&gt;();                                                                   </span>
<span  style=""> 113                                                                                                          </span>
<span class="-6681681893462133916" onmouseenter="enter('-6681681893462133916');" onmouseout="out('-6681681893462133916');" style=""> 114 &lt;&lt;&lt;&lt;&lt;&lt;&lt; LEFT                                                                                             </span>
<span  style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 115                                                                                                          </span>
<span class="7991106586064342212" onmouseenter="enter('7991106586064342212');" onmouseout="out('7991106586064342212');" style=""> 116 ||||||| BASE                                                                                             </span>
<span class="-3639349873877828882" onmouseenter="enter('-3639349873877828882');" onmouseout="out('-3639349873877828882');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"><abbr title=" 117 /*d94z9sk0k4hf9j3ijd - note the base isn&#x27;t actually empty, spork simply doesn&#x27;t generate a base - gd930kwohrp23k5b6vdk93d3r*/"> 117 /*d94z9sk0k4hf9j3ijd - note the base isn&#x27;t actually empty, spork simply doesn&#x27;t generate a base - gd930kw🔵</abbr></span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style=""> 118 =======                                                                                                  </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 119                                                                                                          </span>
<span class="8285102428439000867" onmouseenter="enter('8285102428439000867');" onmouseout="out('8285102428439000867');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 120         setTypeface(TypefaceCache.getTypeface(context, TypefaceCache.TYPEFACE_NAME_ROBOTO_REGULAR));     </span>
<span class="-4364621221695153856" onmouseenter="enter('-4364621221695153856');" onmouseout="out('-4364621221695153856');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 121         setLinkTokenizer();                                                                              </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 122                                                                                                          </span>
<span class="-1814092468913316143" onmouseenter="enter('-1814092468913316143');" onmouseout="out('-1814092468913316143');" style=""> 123 &gt;&gt;&gt;&gt;&gt;&gt;&gt; RIGHT                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 124     }                                                                                                    </span>
<span  style=""> 125                                                                                                          </span>
<span class="-59477443811309488" onmouseenter="enter('-59477443811309488');" onmouseout="out('-59477443811309488');" style=""> 126     public void addOnSelectionChangedListener(OnSelectionChangedListener o) {                            </span>
<span class="-2100774570383242241" onmouseenter="enter('-2100774570383242241');" onmouseout="out('-2100774570383242241');" style=""> 127         listeners.add(o);                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 128     }                                                                                                    </span>
<span  style=""> 129                                                                                                          </span>
<span class="7118550889075315064" onmouseenter="enter('7118550889075315064');" onmouseout="out('7118550889075315064');" style=""> 130     private void setLinkTokenizer() {                                                                    </span>
<span class="540804409753221409" onmouseenter="enter('540804409753221409');" onmouseout="out('540804409753221409');" style=""> 131         mTokenizer = new LinkTokenizer();                                                                </span>
<span class="-5685679569396619722" onmouseenter="enter('-5685679569396619722');" onmouseout="out('-5685679569396619722');" style=""> 132         setOnItemClickListener(this);                                                                    </span>
<span class="5188042449406366660" onmouseenter="enter('5188042449406366660');" onmouseout="out('5188042449406366660');" style=""> 133         setTokenizer(mTokenizer);                                                                        </span>
<span class="6747402731313982960" onmouseenter="enter('6747402731313982960');" onmouseout="out('6747402731313982960');" style=""> 134         setThreshold(1);                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 135     }                                                                                                    </span>
<span  style=""> 136                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 137     @Override                                                                                            </span>
<span class="-6307048688277996884" onmouseenter="enter('-6307048688277996884');" onmouseout="out('-6307048688277996884');" style=""> 138     public void onItemClick(AdapterView&lt;?&gt; parent, View view, int position, long id) {                   </span>
<span class="7948482626287429940" onmouseenter="enter('7948482626287429940');" onmouseout="out('7948482626287429940');" style=""> 139         @SuppressWarnings(&quot;unchecked&quot;)                                                                   </span>
<span class="-2430703696117484912" onmouseenter="enter('-2430703696117484912');" onmouseout="out('-2430703696117484912');" style=""><abbr title=" 140         Bucket.ObjectCursor&lt;Note&gt; cursor = (Bucket.ObjectCursor&lt;Note&gt;) parent.getAdapter().getItem(position);"> 140         Bucket.ObjectCursor&lt;Note&gt; cursor = (Bucket.ObjectCursor&lt;Note&gt;) parent.getAdapter().getItem(positi🔵</abbr></span>
<span class="-1339731364416604074" onmouseenter="enter('-1339731364416604074');" onmouseout="out('-1339731364416604074');" style=""> 141         String key = cursor.getString(cursor.getColumnIndex(Note.KEY_PROPERTY)).replace(&quot;note&quot;, &quot;&quot;);     </span>
<span class="-5413912739011752532" onmouseenter="enter('-5413912739011752532');" onmouseout="out('-5413912739011752532');" style=""> 142         String text = SimplenoteLinkify.getNoteLink(key);                                                </span>
<span class="-6283161434129042153" onmouseenter="enter('-6283161434129042153');" onmouseout="out('-6283161434129042153');" style=""> 143         int start = Math.max(getSelectionStart(), 0);                                                    </span>
<span class="-5812761034589287295" onmouseenter="enter('-5812761034589287295');" onmouseout="out('-5812761034589287295');" style=""> 144         int end = Math.max(getSelectionEnd(), 0);                                                        </span>
<span class="-5970569984167246213" onmouseenter="enter('-5970569984167246213');" onmouseout="out('-5970569984167246213');" style=""> 145         getEditableText().replace(Math.min(start, end), Math.max(start, end), text, 0, text.length());   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 146     }                                                                                                    </span>
<span  style=""> 147                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 148     @Override                                                                                            </span>
<span class="9204734548608604374" onmouseenter="enter('9204734548608604374');" onmouseout="out('9204734548608604374');" style=""> 149     protected void onSelectionChanged(int selStart, int selEnd) {                                        </span>
<span class="9084036534089177006" onmouseenter="enter('9084036534089177006');" onmouseout="out('9084036534089177006');" style=""> 150         super.onSelectionChanged(selStart, selEnd);                                                      </span>
<span class="1091766479730821238" onmouseenter="enter('1091766479730821238');" onmouseout="out('1091766479730821238');" style=""> 151         if (listeners != null) {                                                                         </span>
<span class="9187651135136560593" onmouseenter="enter('9187651135136560593');" onmouseout="out('9187651135136560593');" style=""> 152             for (OnSelectionChangedListener l : listeners) {                                             </span>
<span class="-7270494200827421729" onmouseenter="enter('-7270494200827421729');" onmouseout="out('-7270494200827421729');" style=""> 153                 l.onSelectionChanged(selStart, selEnd);                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 154             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 155         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 156     }                                                                                                    </span>
<span  style=""> 157                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 158     @Override                                                                                            </span>
<span class="-8866382987303008115" onmouseenter="enter('-8866382987303008115');" onmouseout="out('-8866382987303008115');" style=""> 159     public boolean onKeyPreIme(int keyCode, KeyEvent event) {                                            </span>
<span class="-7860565181348615145" onmouseenter="enter('-7860565181348615145');" onmouseout="out('-7860565181348615145');" style=""> 160         if (event.getKeyCode() == KeyEvent.KEYCODE_BACK) {                                               </span>
<span class="351273221058910218" onmouseenter="enter('351273221058910218');" onmouseout="out('351273221058910218');" style=""> 161             clearFocus();                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 162         }                                                                                                </span>
<span class="-1286123639299516067" onmouseenter="enter('-1286123639299516067');" onmouseout="out('-1286123639299516067');" style=""> 163         return super.onKeyPreIme(keyCode, event);                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 164     }                                                                                                    </span>
<span  style=""> 165                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 166     @Override                                                                                            </span>
<span class="-6350469524661550536" onmouseenter="enter('-6350469524661550536');" onmouseout="out('-6350469524661550536');" style=""> 167     protected void onFocusChanged(boolean focused, int direction, Rect previouslyFocusedRect) {          </span>
<span class="-3879914196590028915" onmouseenter="enter('-3879914196590028915');" onmouseout="out('-3879914196590028915');" style=""> 168         if (focused) {                                                                                   </span>
<span class="-5153257938979319281" onmouseenter="enter('-5153257938979319281');" onmouseout="out('-5153257938979319281');" style=""> 169             setCursorVisible(true);                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 170         }                                                                                                </span>
<span class="-3061316988982909646" onmouseenter="enter('-3061316988982909646');" onmouseout="out('-3061316988982909646');" style=""> 171         super.onFocusChanged(focused, direction, previouslyFocusedRect);                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 172     }                                                                                                    </span>
<span  style=""> 173                                                                                                          </span>
<span class="4904364548788344608" onmouseenter="enter('4904364548788344608');" onmouseout="out('4904364548788344608');" style=""> 174     // Updates the ImageSpan drawable to the new checked state                                           </span>
<span class="1702464047281652539" onmouseenter="enter('1702464047281652539');" onmouseout="out('1702464047281652539');" style=""> 175     public void toggleCheckbox(final CheckableSpan checkableSpan) {                                      </span>
<span class="6590259663964917636" onmouseenter="enter('6590259663964917636');" onmouseout="out('6590259663964917636');" style=""> 176         setCursorVisible(false);                                                                         </span>
<span  style=""> 177                                                                                                          </span>
<span class="-1090656868967804943" onmouseenter="enter('-1090656868967804943');" onmouseout="out('-1090656868967804943');" style=""> 178         final Editable editable = getText();                                                             </span>
<span  style=""> 179                                                                                                          </span>
<span class="2794490867551519784" onmouseenter="enter('2794490867551519784');" onmouseout="out('2794490867551519784');" style=""> 180         final int checkboxStart = editable.getSpanStart(checkableSpan);                                  </span>
<span class="-5528412093877694659" onmouseenter="enter('-5528412093877694659');" onmouseout="out('-5528412093877694659');" style=""> 181         final int checkboxEnd = editable.getSpanEnd(checkableSpan);                                      </span>
<span  style=""> 182                                                                                                          </span>
<span class="-6572749467453395280" onmouseenter="enter('-6572749467453395280');" onmouseout="out('-6572749467453395280');" style=""> 183         final int selectionStart = getSelectionStart();                                                  </span>
<span class="5061259277362521056" onmouseenter="enter('5061259277362521056');" onmouseout="out('5061259277362521056');" style=""> 184         final int selectionEnd = getSelectionEnd();                                                      </span>
<span  style=""> 185                                                                                                          </span>
<span class="2426952674624776126" onmouseenter="enter('2426952674624776126');" onmouseout="out('2426952674624776126');" style=""> 186         final ImageSpan[] imageSpans = editable.getSpans(checkboxStart, checkboxEnd, ImageSpan.class);   </span>
<span class="3424137973787154724" onmouseenter="enter('3424137973787154724');" onmouseout="out('3424137973787154724');" style=""> 187         if (imageSpans.length &gt; 0) {                                                                     </span>
<span class="-650120241318912925" onmouseenter="enter('-650120241318912925');" onmouseout="out('-650120241318912925');" style=""> 188             // ImageSpans are static, so we need to remove the old one and replace :|                    </span>
<span class="3096208024950867570" onmouseenter="enter('3096208024950867570');" onmouseout="out('3096208024950867570');" style=""> 189             Drawable iconDrawable = ContextCompat.getDrawable(getContext(),                              </span>
<span class="6549537428500511361" onmouseenter="enter('6549537428500511361');" onmouseout="out('6549537428500511361');" style=""> 190                     checkableSpan.isChecked()                                                            </span>
<span class="1475528954993506852" onmouseenter="enter('1475528954993506852');" onmouseout="out('1475528954993506852');" style=""> 191                             ? R.drawable.ic_checkbox_checked_24px                                        </span>
<span class="919975553509049414" onmouseenter="enter('919975553509049414');" onmouseout="out('919975553509049414');" style=""> 192                             : R.drawable.ic_checkbox_unchecked_24px);                                    </span>
<span class="-4575840480157011089" onmouseenter="enter('-4575840480157011089');" onmouseout="out('-4575840480157011089');" style=""><abbr title=" 193             iconDrawable = DrawableUtils.tintDrawableWithResource(getContext(), iconDrawable, R.color.text_title_disabled);"> 193             iconDrawable = DrawableUtils.tintDrawableWithResource(getContext(), iconDrawable, R.color.tex🔵</abbr></span>
<span class="350955667428051936" onmouseenter="enter('350955667428051936');" onmouseout="out('350955667428051936');" style=""> 194             int iconSize = DisplayUtils.getChecklistIconSize(getContext());                              </span>
<span class="2517609942364691225" onmouseenter="enter('2517609942364691225');" onmouseout="out('2517609942364691225');" style=""> 195             iconDrawable.setBounds(0, 0, iconSize, iconSize);                                            </span>
<span class="1660574638142231511" onmouseenter="enter('1660574638142231511');" onmouseout="out('1660574638142231511');" style=""> 196             final CenteredImageSpan newImageSpan = new CenteredImageSpan(getContext(), iconDrawable);    </span>
<span class="5002906591139078644" onmouseenter="enter('5002906591139078644');" onmouseout="out('5002906591139078644');" style=""> 197             new Handler().post(new Runnable() {                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 198                 @Override                                                                                </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 199                 public void run() {                                                                      </span>
<span class="8105183574639194653" onmouseenter="enter('8105183574639194653');" onmouseout="out('8105183574639194653');" style=""><abbr title=" 200                     editable.setSpan(newImageSpan, checkboxStart, checkboxEnd, Spanned.SPAN_EXCLUSIVE_EXCLUSIVE);"> 200                     editable.setSpan(newImageSpan, checkboxStart, checkboxEnd, Spanned.SPAN_EXCLUSIVE_EXC🔵</abbr></span>
<span class="7563639754547712576" onmouseenter="enter('7563639754547712576');" onmouseout="out('7563639754547712576');" style=""> 201                     editable.removeSpan(imageSpans[0]);                                                  </span>
<span class="-1772473758449618286" onmouseenter="enter('-1772473758449618286');" onmouseout="out('-1772473758449618286');" style=""> 202                     fixLineSpacing();                                                                    </span>
<span  style=""> 203                                                                                                          </span>
<span class="-3445748522530054247" onmouseenter="enter('-3445748522530054247');" onmouseout="out('-3445748522530054247');" style=""> 204                     // Restore the selection                                                             </span>
<span class="530073190084792975" onmouseenter="enter('530073190084792975');" onmouseout="out('530073190084792975');" style=""> 205                     if (selectionStart &gt;= 0                                                              </span>
<span class="-405023996198629042" onmouseenter="enter('-405023996198629042');" onmouseout="out('-405023996198629042');" style=""> 206                             &amp;&amp; selectionStart &lt;= editable.length()                                       </span>
<span class="229632755727724018" onmouseenter="enter('229632755727724018');" onmouseout="out('229632755727724018');" style=""> 207                             &amp;&amp; selectionEnd &lt;= editable.length() &amp;&amp; hasFocus()) {                        </span>
<span class="-5633353852558776206" onmouseenter="enter('-5633353852558776206');" onmouseout="out('-5633353852558776206');" style=""> 208                         setSelection(selectionStart, selectionEnd);                                      </span>
<span class="-5153257938979319281" onmouseenter="enter('-5153257938979319281');" onmouseout="out('-5153257938979319281');" style=""> 209                         setCursorVisible(true);                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 210                     }                                                                                    </span>
<span  style=""> 211                                                                                                          </span>
<span class="1425396247006298539" onmouseenter="enter('1425396247006298539');" onmouseout="out('1425396247006298539');" style=""> 212                     if (mOnCheckboxToggledListener != null) {                                            </span>
<span class="-2776571883490751786" onmouseenter="enter('-2776571883490751786');" onmouseout="out('-2776571883490751786');" style=""> 213                         mOnCheckboxToggledListener.onCheckboxToggled();                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 214                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 215                 }                                                                                        </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 216             });                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 217         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 218     }                                                                                                    </span>
<span  style=""> 219                                                                                                          </span>
<span class="-5129075646964696371" onmouseenter="enter('-5129075646964696371');" onmouseout="out('-5129075646964696371');" style=""> 220     // Returns the line position of the text cursor                                                      </span>
<span class="-4790209518368575529" onmouseenter="enter('-4790209518368575529');" onmouseout="out('-4790209518368575529');" style=""> 221     private int getCurrentCursorLine() {                                                                 </span>
<span class="-8708010820158817009" onmouseenter="enter('-8708010820158817009');" onmouseout="out('-8708010820158817009');" style=""> 222         int selectionStart = getSelectionStart();                                                        </span>
<span class="-9041693021121574938" onmouseenter="enter('-9041693021121574938');" onmouseout="out('-9041693021121574938');" style=""> 223         Layout layout = getLayout();                                                                     </span>
<span  style=""> 224                                                                                                          </span>
<span class="-3402438836469275129" onmouseenter="enter('-3402438836469275129');" onmouseout="out('-3402438836469275129');" style=""> 225         if (!(selectionStart == -1)) {                                                                   </span>
<span class="-5607640624285366578" onmouseenter="enter('-5607640624285366578');" onmouseout="out('-5607640624285366578');" style=""> 226             return layout.getLineForOffset(selectionStart);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 227         }                                                                                                </span>
<span  style=""> 228                                                                                                          </span>
<span class="-8269198090232257590" onmouseenter="enter('-8269198090232257590');" onmouseout="out('-8269198090232257590');" style=""> 229         return 0;                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 230     }                                                                                                    </span>
<span  style=""> 231                                                                                                          </span>
<span class="-2056093237925143337" onmouseenter="enter('-2056093237925143337');" onmouseout="out('-2056093237925143337');" style=""> 232     public void insertChecklist() {                                                                      </span>
<span class="8784361192064883758" onmouseenter="enter('8784361192064883758');" onmouseout="out('8784361192064883758');" style=""> 233         int start;                                                                                       </span>
<span class="5483129720820058584" onmouseenter="enter('5483129720820058584');" onmouseout="out('5483129720820058584');" style=""> 234         int end;                                                                                         </span>
<span class="-47193053300540183" onmouseenter="enter('-47193053300540183');" onmouseout="out('-47193053300540183');" style=""> 235         int lineNumber = getCurrentCursorLine();                                                         </span>
<span class="5931814074513814524" onmouseenter="enter('5931814074513814524');" onmouseout="out('5931814074513814524');" style=""> 236         start = getLayout().getLineStart(lineNumber);                                                    </span>
<span class="-4341173532151514040" onmouseenter="enter('-4341173532151514040');" onmouseout="out('-4341173532151514040');" style=""> 237         if ((getSelectionEnd() &gt; getSelectionStart()) &amp;&amp; (!selectionIsOnSameLine())) {                   </span>
<span class="-2157237143863252877" onmouseenter="enter('-2157237143863252877');" onmouseout="out('-2157237143863252877');" style=""> 238             end = getSelectionEnd();                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 239         } else {                                                                                         </span>
<span class="2502740913562218300" onmouseenter="enter('2502740913562218300');" onmouseout="out('2502740913562218300');" style=""> 240             end = getLayout().getLineEnd(lineNumber);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 241         }                                                                                                </span>
<span class="2155198360249988636" onmouseenter="enter('2155198360249988636');" onmouseout="out('2155198360249988636');" style=""><abbr title=" 242         SpannableStringBuilder workingString = new SpannableStringBuilder(getText().subSequence(start, end));"> 242         SpannableStringBuilder workingString = new SpannableStringBuilder(getText().subSequence(start, en🔵</abbr></span>
<span class="-3429280970080248112" onmouseenter="enter('-3429280970080248112');" onmouseout="out('-3429280970080248112');" style=""> 243         Editable editable = getText();                                                                   </span>
<span class="1014830956406750243" onmouseenter="enter('1014830956406750243');" onmouseout="out('1014830956406750243');" style=""> 244         if ((editable.length() &lt; start) || (editable.length() &lt; end)) {                                  </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 245             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 246         }                                                                                                </span>
<span class="-4021007956188151859" onmouseenter="enter('-4021007956188151859');" onmouseout="out('-4021007956188151859');" style=""> 247         int previousSelection = getSelectionStart();                                                     </span>
<span class="-7401262641884842036" onmouseenter="enter('-7401262641884842036');" onmouseout="out('-7401262641884842036');" style=""><abbr title=" 248         CheckableSpan[] checkableSpans = workingString.getSpans(0, workingString.length(), CheckableSpan.class);"> 248         CheckableSpan[] checkableSpans = workingString.getSpans(0, workingString.length(), CheckableSpan.🔵</abbr></span>
<span class="-3983435901659757897" onmouseenter="enter('-3983435901659757897');" onmouseout="out('-3983435901659757897');" style=""> 249         if (checkableSpans.length &gt; 0) {                                                                 </span>
<span class="-1723631309680670098" onmouseenter="enter('-1723631309680670098');" onmouseout="out('-1723631309680670098');" style=""> 250             // Remove any CheckableSpans found                                                           </span>
<span class="6974876188101817361" onmouseenter="enter('6974876188101817361');" onmouseout="out('6974876188101817361');" style=""> 251             for (CheckableSpan span : checkableSpans) {                                                  </span>
<span class="6929044692932906963" onmouseenter="enter('6929044692932906963');" onmouseout="out('6929044692932906963');" style=""><abbr title=" 252                 workingString.replace(workingString.getSpanStart(span), workingString.getSpanEnd(span) + 1, &quot;&quot;);"> 252                 workingString.replace(workingString.getSpanStart(span), workingString.getSpanEnd(span) + 🔵</abbr></span>
<span class="-7905663944685048412" onmouseenter="enter('-7905663944685048412');" onmouseout="out('-7905663944685048412');" style=""> 253                 workingString.removeSpan(span);                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 254             }                                                                                            </span>
<span class="1818093574225738447" onmouseenter="enter('1818093574225738447');" onmouseout="out('1818093574225738447');" style=""> 255             editable.replace(start, end, workingString);                                                 </span>
<span class="559052113481581758" onmouseenter="enter('559052113481581758');" onmouseout="out('559052113481581758');" style=""> 256             if (checkableSpans.length == 1) {                                                            </span>
<span class="-811974177834571960" onmouseenter="enter('-811974177834571960');" onmouseout="out('-811974177834571960');" style=""> 257                 int newSelection = Math.max(previousSelection - CHECKBOX_LENGTH, 0);                     </span>
<span class="1548041209841422053" onmouseenter="enter('1548041209841422053');" onmouseout="out('1548041209841422053');" style=""> 258                 if (editable.length() &gt;= newSelection) {                                                 </span>
<span class="-1551928067227182439" onmouseenter="enter('-1551928067227182439');" onmouseout="out('-1551928067227182439');" style=""> 259                     setSelection(newSelection);                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 260                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 261             }                                                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 262         } else {                                                                                         </span>
<span class="7908237664339315590" onmouseenter="enter('7908237664339315590');" onmouseout="out('7908237664339315590');" style=""> 263             // Insert a checklist for each line                                                          </span>
<span class="9092008481531189309" onmouseenter="enter('9092008481531189309');" onmouseout="out('9092008481531189309');" style=""> 264             String[] lines = workingString.toString().split(&quot;(?&lt;=\n)&quot;);                                  </span>
<span class="-2021014457160624880" onmouseenter="enter('-2021014457160624880');" onmouseout="out('-2021014457160624880');" style=""> 265             StringBuilder resultString = new StringBuilder();                                            </span>
<span class="-9074732061602120647" onmouseenter="enter('-9074732061602120647');" onmouseout="out('-9074732061602120647');" style=""> 266             for (String lineString : lines) {                                                            </span>
<span class="2358811559308129106" onmouseenter="enter('2358811559308129106');" onmouseout="out('2358811559308129106');" style=""> 267                 // Preserve the spaces before the text                                                   </span>
<span class="-976435609607935349" onmouseenter="enter('-976435609607935349');" onmouseout="out('-976435609607935349');" style=""> 268                 int leadingSpaceCount;                                                                   </span>
<span class="-2007073157338218983" onmouseenter="enter('-2007073157338218983');" onmouseout="out('-2007073157338218983');" style=""> 269                 if (lineString.trim().length() == 0) {                                                   </span>
<span class="1650658955318262016" onmouseenter="enter('1650658955318262016');" onmouseout="out('1650658955318262016');" style=""> 270                     // Only whitespace content, get count of spaces                                      </span>
<span class="2598856147688027045" onmouseenter="enter('2598856147688027045');" onmouseout="out('2598856147688027045');" style=""> 271                     leadingSpaceCount = lineString.length() - lineString.replaceAll(&quot; &quot;, &quot;&quot;).length();   </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 272                 } else {                                                                                 </span>
<span class="3037156392896338412" onmouseenter="enter('3037156392896338412');" onmouseout="out('3037156392896338412');" style=""> 273                     // Get count of spaces up to first non-whitespace character                          </span>
<span class="-2037575593720791721" onmouseenter="enter('-2037575593720791721');" onmouseout="out('-2037575593720791721');" style=""> 274                     leadingSpaceCount = lineString.indexOf(lineString.trim());                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 275                 }                                                                                        </span>
<span class="1113723887572128376" onmouseenter="enter('1113723887572128376');" onmouseout="out('1113723887572128376');" style=""> 276                 if (leadingSpaceCount &gt; 0) {                                                             </span>
<span class="892783864373163101" onmouseenter="enter('892783864373163101');" onmouseout="out('892783864373163101');" style=""> 277                     resultString.append(new String(new char[leadingSpaceCount]).replace(&#x27;\u0000&#x27;, &#x27; &#x27;)); </span>
<span class="1014609549743804890" onmouseenter="enter('1014609549743804890');" onmouseout="out('1014609549743804890');" style=""> 278                     lineString = lineString.substring(leadingSpaceCount);                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 279                 }                                                                                        </span>
<span class="866498663044995767" onmouseenter="enter('866498663044995767');" onmouseout="out('866498663044995767');" style=""> 280                 resultString.append(ChecklistUtils.UNCHECKED_MARKDOWN).append(&quot; &quot;).append(lineString);   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 281             }                                                                                            </span>
<span class="327663848358659642" onmouseenter="enter('327663848358659642');" onmouseout="out('327663848358659642');" style=""> 282             editable.replace(start, end, resultString);                                                  </span>
<span class="-7244042633242525084" onmouseenter="enter('-7244042633242525084');" onmouseout="out('-7244042633242525084');" style=""> 283             int newSelection = Math.max(previousSelection, 0) + (lines.length * CHECKBOX_LENGTH);        </span>
<span class="1548041209841422053" onmouseenter="enter('1548041209841422053');" onmouseout="out('1548041209841422053');" style=""> 284             if (editable.length() &gt;= newSelection) {                                                     </span>
<span class="-1551928067227182439" onmouseenter="enter('-1551928067227182439');" onmouseout="out('-1551928067227182439');" style=""> 285                 setSelection(newSelection);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 286             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 287         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 288     }                                                                                                    </span>
<span  style=""> 289                                                                                                          </span>
<span class="-1068085743919359847" onmouseenter="enter('-1068085743919359847');" onmouseout="out('-1068085743919359847');" style=""> 290     // Returns true if the current editor selection is on the same line                                  </span>
<span class="-1322680323963324573" onmouseenter="enter('-1322680323963324573');" onmouseout="out('-1322680323963324573');" style=""> 291     private boolean selectionIsOnSameLine() {                                                            </span>
<span class="-8708010820158817009" onmouseenter="enter('-8708010820158817009');" onmouseout="out('-8708010820158817009');" style=""> 292         int selectionStart = getSelectionStart();                                                        </span>
<span class="-8399501927910381124" onmouseenter="enter('-8399501927910381124');" onmouseout="out('-8399501927910381124');" style=""> 293         int selectionEnd = getSelectionEnd();                                                            </span>
<span class="-9041693021121574938" onmouseenter="enter('-9041693021121574938');" onmouseout="out('-9041693021121574938');" style=""> 294         Layout layout = getLayout();                                                                     </span>
<span  style=""> 295                                                                                                          </span>
<span class="-5006678790845707461" onmouseenter="enter('-5006678790845707461');" onmouseout="out('-5006678790845707461');" style=""> 296         if (selectionStart &gt;= 0 &amp;&amp; selectionEnd &gt;= 0) {                                                  </span>
<span class="7452975995927250930" onmouseenter="enter('7452975995927250930');" onmouseout="out('7452975995927250930');" style=""> 297             return layout.getLineForOffset(selectionStart) == layout.getLineForOffset(selectionEnd);     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 298         }                                                                                                </span>
<span  style=""> 299                                                                                                          </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 300         return false;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 301     }                                                                                                    </span>
<span  style=""> 302                                                                                                          </span>
<span class="2245519181968029694" onmouseenter="enter('2245519181968029694');" onmouseout="out('2245519181968029694');" style=""> 303     public void fixLineSpacing() {                                                                       </span>
<span class="3739656730239017857" onmouseenter="enter('3739656730239017857');" onmouseout="out('3739656730239017857');" style=""> 304         // Prevents line heights from compacting                                                         </span>
<span class="-2883030315986006038" onmouseenter="enter('-2883030315986006038');" onmouseout="out('-2883030315986006038');" style=""> 305         // https://issuetracker.google.com/issues/37009353                                               </span>
<span class="593486953485328476" onmouseenter="enter('593486953485328476');" onmouseout="out('593486953485328476');" style=""> 306         float lineSpacingExtra = getLineSpacingExtra();                                                  </span>
<span class="-8024412754689478694" onmouseenter="enter('-8024412754689478694');" onmouseout="out('-8024412754689478694');" style=""> 307         float lineSpacingMultiplier = getLineSpacingMultiplier();                                        </span>
<span class="8227210311807072313" onmouseenter="enter('8227210311807072313');" onmouseout="out('8227210311807072313');" style=""> 308         setLineSpacing(0.0f, 1.0f);                                                                      </span>
<span class="-9061865158009916868" onmouseenter="enter('-9061865158009916868');" onmouseout="out('-9061865158009916868');" style=""> 309         setLineSpacing(lineSpacingExtra, lineSpacingMultiplier);                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 310     }                                                                                                    </span>
<span  style=""> 311                                                                                                          </span>
<span class="-7557861489858202648" onmouseenter="enter('-7557861489858202648');" onmouseout="out('-7557861489858202648');" style=""> 312     public interface OnSelectionChangedListener {                                                        </span>
<span class="-6002063781438092531" onmouseenter="enter('-6002063781438092531');" onmouseout="out('-6002063781438092531');" style=""> 313         public abstract void onSelectionChanged(int selStart, int selEnd);                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 314     }                                                                                                    </span>
<span  style=""> 315                                                                                                          </span>
<span class="-2496270541861205859" onmouseenter="enter('-2496270541861205859');" onmouseout="out('-2496270541861205859');" style=""> 316     // Replaces any CheckableSpans with their markdown counterpart (e.g. &#x27;- [ ]&#x27;)                        </span>
<span class="-3349734715224755384" onmouseenter="enter('-3349734715224755384');" onmouseout="out('-3349734715224755384');" style=""> 317     public String getPlainTextContent() {                                                                </span>
<span class="-1769659359974524880" onmouseenter="enter('-1769659359974524880');" onmouseout="out('-1769659359974524880');" style=""> 318         if (getText() == null) {                                                                         </span>
<span class="-8289946804601166879" onmouseenter="enter('-8289946804601166879');" onmouseout="out('-8289946804601166879');" style=""> 319             return &quot;&quot;;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 320         }                                                                                                </span>
<span  style=""> 321                                                                                                          </span>
<span class="-5774176688206725478" onmouseenter="enter('-5774176688206725478');" onmouseout="out('-5774176688206725478');" style=""> 322         SpannableStringBuilder content = new SpannableStringBuilder(getText());                          </span>
<span class="3967945012021671393" onmouseenter="enter('3967945012021671393');" onmouseout="out('3967945012021671393');" style=""> 323         CheckableSpan[] spans = content.getSpans(0, content.length(), CheckableSpan.class);              </span>
<span class="3321734155540722629" onmouseenter="enter('3321734155540722629');" onmouseout="out('3321734155540722629');" style=""> 324         for(CheckableSpan span: spans) {                                                                 </span>
<span class="9048125924196956410" onmouseenter="enter('9048125924196956410');" onmouseout="out('9048125924196956410');" style=""> 325             int start = content.getSpanStart(span);                                                      </span>
<span class="7525585125635328254" onmouseenter="enter('7525585125635328254');" onmouseout="out('7525585125635328254');" style=""> 326             int end = content.getSpanEnd(span);                                                          </span>
<span class="7328134583038878217" onmouseenter="enter('7328134583038878217');" onmouseout="out('7328134583038878217');" style=""> 327             ((Editable) content).replace(                                                                </span>
<span class="96671177266943526" onmouseenter="enter('96671177266943526');" onmouseout="out('96671177266943526');" style=""> 328                     start,                                                                               </span>
<span class="-8378543162701826190" onmouseenter="enter('-8378543162701826190');" onmouseout="out('-8378543162701826190');" style=""> 329                     end,                                                                                 </span>
<span class="3531746424024935349" onmouseenter="enter('3531746424024935349');" onmouseout="out('3531746424024935349');" style=""><abbr title=" 330                     span.isChecked() ? ChecklistUtils.CHECKED_MARKDOWN : ChecklistUtils.UNCHECKED_MARKDOWN);"> 330                     span.isChecked() ? ChecklistUtils.CHECKED_MARKDOWN : ChecklistUtils.UNCHECKED_MARKDOW🔵</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 331         }                                                                                                </span>
<span  style=""> 332                                                                                                          </span>
<span class="-5768072572856737542" onmouseenter="enter('-5768072572856737542');" onmouseout="out('-5768072572856737542');" style=""> 333         return content.toString();                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 334     }                                                                                                    </span>
<span  style=""> 335                                                                                                          </span>
<span class="-4058542168993639710" onmouseenter="enter('-4058542168993639710');" onmouseout="out('-4058542168993639710');" style=""> 336     // Replaces any CheckableSpans with their markdown preview counterpart (e.g. &#x27;- [\u2a2f]&#x27;)           </span>
<span class="-4279713333663092916" onmouseenter="enter('-4279713333663092916');" onmouseout="out('-4279713333663092916');" style=""> 337     public String getPreviewTextContent() {                                                              </span>
<span class="-1769659359974524880" onmouseenter="enter('-1769659359974524880');" onmouseout="out('-1769659359974524880');" style=""> 338         if (getText() == null) {                                                                         </span>
<span class="-8289946804601166879" onmouseenter="enter('-8289946804601166879');" onmouseout="out('-8289946804601166879');" style=""> 339             return &quot;&quot;;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 340         }                                                                                                </span>
<span  style=""> 341                                                                                                          </span>
<span class="-5774176688206725478" onmouseenter="enter('-5774176688206725478');" onmouseout="out('-5774176688206725478');" style=""> 342         SpannableStringBuilder content = new SpannableStringBuilder(getText());                          </span>
<span class="3967945012021671393" onmouseenter="enter('3967945012021671393');" onmouseout="out('3967945012021671393');" style=""> 343         CheckableSpan[] spans = content.getSpans(0, content.length(), CheckableSpan.class);              </span>
<span class="3321734155540722629" onmouseenter="enter('3321734155540722629');" onmouseout="out('3321734155540722629');" style=""> 344         for(CheckableSpan span: spans) {                                                                 </span>
<span class="9048125924196956410" onmouseenter="enter('9048125924196956410');" onmouseout="out('9048125924196956410');" style=""> 345             int start = content.getSpanStart(span);                                                      </span>
<span class="7525585125635328254" onmouseenter="enter('7525585125635328254');" onmouseout="out('7525585125635328254');" style=""> 346             int end = content.getSpanEnd(span);                                                          </span>
<span class="7328134583038878217" onmouseenter="enter('7328134583038878217');" onmouseout="out('7328134583038878217');" style=""> 347             ((Editable) content).replace(                                                                </span>
<span class="96671177266943526" onmouseenter="enter('96671177266943526');" onmouseout="out('96671177266943526');" style=""> 348                     start,                                                                               </span>
<span class="-8378543162701826190" onmouseenter="enter('-8378543162701826190');" onmouseout="out('-8378543162701826190');" style=""> 349                     end,                                                                                 </span>
<span class="-8440602794388940209" onmouseenter="enter('-8440602794388940209');" onmouseout="out('-8440602794388940209');" style=""><abbr title=" 350                     span.isChecked() ? ChecklistUtils.CHECKED_MARKDOWN_PREVIEW : ChecklistUtils.UNCHECKED_MARKDOWN);"> 350                     span.isChecked() ? ChecklistUtils.CHECKED_MARKDOWN_PREVIEW : ChecklistUtils.UNCHECKED🔵</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 351         }                                                                                                </span>
<span  style=""> 352                                                                                                          </span>
<span class="-5768072572856737542" onmouseenter="enter('-5768072572856737542');" onmouseout="out('-5768072572856737542');" style=""> 353         return content.toString();                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 354     }                                                                                                    </span>
<span  style=""> 355                                                                                                          </span>
<span class="-8793607864180089375" onmouseenter="enter('-8793607864180089375');" onmouseout="out('-8793607864180089375');" style=""> 356     public void processChecklists() {                                                                    </span>
<span class="-822567654445480874" onmouseenter="enter('-822567654445480874');" onmouseout="out('-822567654445480874');" style=""> 357         if (getText().length() == 0 || getContext() == null) {                                           </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 358             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 359         }                                                                                                </span>
<span  style=""> 360                                                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 361         try {                                                                                            </span>
<span class="-2879977185755091274" onmouseenter="enter('-2879977185755091274');" onmouseout="out('-2879977185755091274');" style=""> 362             ChecklistUtils.addChecklistSpansForRegexAndColor(                                            </span>
<span class="4777936721428774843" onmouseenter="enter('4777936721428774843');" onmouseout="out('4777936721428774843');" style=""> 363                     getContext(),                                                                        </span>
<span class="6494562836495618397" onmouseenter="enter('6494562836495618397');" onmouseout="out('6494562836495618397');" style=""> 364                     getText(),                                                                           </span>
<span class="-5190158693774204825" onmouseenter="enter('-5190158693774204825');" onmouseout="out('-5190158693774204825');" style=""> 365                     ChecklistUtils.CHECKLIST_REGEX_LINES,                                                </span>
<span class="-183067455432259027" onmouseenter="enter('-183067455432259027');" onmouseout="out('-183067455432259027');" style=""> 366                     R.color.text_title_disabled);                                                        </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 367         } catch (Exception e) {                                                                          </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 368             e.printStackTrace();                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 369         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 370     }                                                                                                    </span>
<span  style=""> 371                                                                                                          </span>
<span class="-7678796331074634227" onmouseenter="enter('-7678796331074634227');" onmouseout="out('-7678796331074634227');" style=""> 372     public void setOnCheckboxToggledListener(OnCheckboxToggledListener listener) {                       </span>
<span class="3565913960515795124" onmouseenter="enter('3565913960515795124');" onmouseout="out('3565913960515795124');" style=""> 373         mOnCheckboxToggledListener = listener;                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 374     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 375 }                                                                                                        </span>






































































































































</pre></td>
                        </tr>
                    </table>
                </div>
                <div id="bottom">
                    <table style="margin:auto">
                        <tr>
                            <th>ours vs. base</th>
                            <th>theirs vs. base</th>
                        </tr>
                        <tr>
                            <td><pre><span class="2121239535603548975" onmouseenter="enter('2121239535603548975');" onmouseout="out('2121239535603548975');" style="">   1  package com.automattic.simplenote.widgets;                                                                        </span>
<span  style="">   2                                                                                                                    </span>
<span class="5922045460006936195" onmouseenter="enter('5922045460006936195');" onmouseout="out('5922045460006936195');" style="">   3  import android.content.Context;                                                                                   </span>
<span class="2207333516549486115" onmouseenter="enter('2207333516549486115');" onmouseout="out('2207333516549486115');" style="">   4  import android.graphics.Rect;                                                                                     </span>
<span class="-1737226814075322931" onmouseenter="enter('-1737226814075322931');" onmouseout="out('-1737226814075322931');" style="">   5  import android.graphics.drawable.Drawable;                                                                        </span>
<span class="-1086316590722027623" onmouseenter="enter('-1086316590722027623');" onmouseout="out('-1086316590722027623');" style="">   6  import android.os.Handler;                                                                                        </span>
<span class="4177373235046048356" onmouseenter="enter('4177373235046048356');" onmouseout="out('4177373235046048356');" style="">   7  import android.text.Editable;                                                                                     </span>
<span class="-578015270574978569" onmouseenter="enter('-578015270574978569');" onmouseout="out('-578015270574978569');" style="">   8  import android.text.Layout;                                                                                       </span>
<span class="7007167342609832330" onmouseenter="enter('7007167342609832330');" onmouseout="out('7007167342609832330');" style="">   9  import android.text.SpannableStringBuilder;                                                                       </span>
<span class="7731806713123176572" onmouseenter="enter('7731806713123176572');" onmouseout="out('7731806713123176572');" style="">  10  import android.text.Spanned;                                                                                      </span>
<span class="8961068409863998468" onmouseenter="enter('8961068409863998468');" onmouseout="out('8961068409863998468');" style="">  11  import android.text.style.ImageSpan;                                                                              </span>
<span class="-4218724752779269131" onmouseenter="enter('-4218724752779269131');" onmouseout="out('-4218724752779269131');" style="">  12  import android.util.AttributeSet;                                                                                 </span>
<span class="959108076239844050" onmouseenter="enter('959108076239844050');" onmouseout="out('959108076239844050');" style="">  13  import android.view.KeyEvent;                                                                                     </span>
<span  style="">  14                                                                                                                    </span>
<span class="4989327779724079972" onmouseenter="enter('4989327779724079972');" onmouseout="out('4989327779724079972');" style="">  15  import androidx.appcompat.widget.AppCompatEditText;                                                               </span>




<span class="5842151950717757009" onmouseenter="enter('5842151950717757009');" onmouseout="out('5842151950717757009');" style="">  16  import androidx.core.content.ContextCompat;                                                                       </span>
<span  style="">  17                                                                                                                    </span>
<span class="-6092371777820512633" onmouseenter="enter('-6092371777820512633');" onmouseout="out('-6092371777820512633');" style="">  18  import com.automattic.simplenote.R;                                                                               </span>

<span class="1987879750509178857" onmouseenter="enter('1987879750509178857');" onmouseout="out('1987879750509178857');" style="">  19  import com.automattic.simplenote.utils.ChecklistUtils;                                                            </span>
<span class="8577850632926167445" onmouseenter="enter('8577850632926167445');" onmouseout="out('8577850632926167445');" style="">  20  import com.automattic.simplenote.utils.DisplayUtils;                                                              </span>
<span class="930019215389101465" onmouseenter="enter('930019215389101465');" onmouseout="out('930019215389101465');" style="">  21  import com.automattic.simplenote.utils.DrawableUtils;                                                             </span>



<span  style="">  22                                                                                                                    </span>
<span class="9191247685397773893" onmouseenter="enter('9191247685397773893');" onmouseout="out('9191247685397773893');" style="">  23  import java.util.ArrayList;                                                                                       </span>
<span class="-1786020958497218848" onmouseenter="enter('-1786020958497218848');" onmouseout="out('-1786020958497218848');" style="">  24  import java.util.List;                                                                                            </span>
<span  style="">  25                                                                                                                    </span>
<span class="-806136105050866371" onmouseenter="enter('-806136105050866371');" onmouseout="out('-806136105050866371');" style="">  26  public class SimplenoteEditText extends AppCompatEditText {                                                       </span>












<span class="1190896655347967160" onmouseenter="enter('1190896655347967160');" onmouseout="out('1190896655347967160');" style="">  27      private List&lt;OnSelectionChangedListener&gt; listeners;                                                           </span>
<span class="-5202758860929245202" onmouseenter="enter('-5202758860929245202');" onmouseout="out('-5202758860929245202');" style="">  28      private OnCheckboxToggledListener mOnCheckboxToggledListener;                                                 </span>
<span class="-3811158646430090426" onmouseenter="enter('-3811158646430090426');" onmouseout="out('-3811158646430090426');" style="">  29      private final int CHECKBOX_LENGTH = 2; // One CheckableSpan + a space character                               </span>


























<span  style="">  30                                                                                                                    </span>
<span class="7419298585035749039" onmouseenter="enter('7419298585035749039');" onmouseout="out('7419298585035749039');" style="">  31      public interface OnCheckboxToggledListener {                                                                  </span>
<span class="-7775623224861892729" onmouseenter="enter('-7775623224861892729');" onmouseout="out('-7775623224861892729');" style="">  32          void onCheckboxToggled();                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  33      }                                                                                                             </span>
<span  style="">  34                                                                                                                    </span>
<span class="9083968033793714051" onmouseenter="enter('9083968033793714051');" onmouseout="out('9083968033793714051');" style="">  35      public SimplenoteEditText(Context context) {                                                                  </span>
<span class="-8232648159726954046" onmouseenter="enter('-8232648159726954046');" onmouseout="out('-8232648159726954046');" style="">  36          super(context);                                                                                           </span>
<span class="4798086328679447282" onmouseenter="enter('4798086328679447282');" onmouseout="out('4798086328679447282');" style="">  37          listeners = new ArrayList&lt;&gt;();                                                                            </span>
<span class="8285102428439000867" onmouseenter="enter('8285102428439000867');" onmouseout="out('8285102428439000867');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  38 -        setTypeface(TypefaceCache.getTypeface(context, TypefaceCache.TYPEFACE_NAME_ROBOTO_REGULAR));              </span>

<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  39      }                                                                                                             </span>
<span  style="">  40                                                                                                                    </span>
<span class="-5191028644893669048" onmouseenter="enter('-5191028644893669048');" onmouseout="out('-5191028644893669048');" style="">  41      public SimplenoteEditText(Context context, AttributeSet attrs) {                                              </span>
<span class="6666522707728770706" onmouseenter="enter('6666522707728770706');" onmouseout="out('6666522707728770706');" style="">  42          super(context, attrs);                                                                                    </span>
<span class="4798086328679447282" onmouseenter="enter('4798086328679447282');" onmouseout="out('4798086328679447282');" style="">  43          listeners = new ArrayList&lt;&gt;();                                                                            </span>
<span class="8285102428439000867" onmouseenter="enter('8285102428439000867');" onmouseout="out('8285102428439000867');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  44 -        setTypeface(TypefaceCache.getTypeface(context, TypefaceCache.TYPEFACE_NAME_ROBOTO_REGULAR));              </span>

<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  45      }                                                                                                             </span>
<span  style="">  46                                                                                                                    </span>
<span class="-5033151626525601752" onmouseenter="enter('-5033151626525601752');" onmouseout="out('-5033151626525601752');" style="">  47      public SimplenoteEditText(Context context, AttributeSet attrs, int defStyle) {                                </span>
<span class="1281987604327041578" onmouseenter="enter('1281987604327041578');" onmouseout="out('1281987604327041578');" style="">  48          super(context, attrs, defStyle);                                                                          </span>
<span class="4798086328679447282" onmouseenter="enter('4798086328679447282');" onmouseout="out('4798086328679447282');" style="">  49          listeners = new ArrayList&lt;&gt;();                                                                            </span>
<span class="8285102428439000867" onmouseenter="enter('8285102428439000867');" onmouseout="out('8285102428439000867');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  50 -        setTypeface(TypefaceCache.getTypeface(context, TypefaceCache.TYPEFACE_NAME_ROBOTO_REGULAR));              </span>

<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  51      }                                                                                                             </span>
<span  style="">  52                                                                                                                    </span>
<span class="-59477443811309488" onmouseenter="enter('-59477443811309488');" onmouseout="out('-59477443811309488');" style="">  53      public void addOnSelectionChangedListener(OnSelectionChangedListener o) {                                     </span>
<span class="-2100774570383242241" onmouseenter="enter('-2100774570383242241');" onmouseout="out('-2100774570383242241');" style="">  54          listeners.add(o);                                                                                         </span>


















<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  55      }                                                                                                             </span>
<span  style="">  56                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  57      @Override                                                                                                     </span>
<span class="9204734548608604374" onmouseenter="enter('9204734548608604374');" onmouseout="out('9204734548608604374');" style="">  58      protected void onSelectionChanged(int selStart, int selEnd) {                                                 </span>
<span class="9084036534089177006" onmouseenter="enter('9084036534089177006');" onmouseout="out('9084036534089177006');" style="">  59          super.onSelectionChanged(selStart, selEnd);                                                               </span>
<span class="1091766479730821238" onmouseenter="enter('1091766479730821238');" onmouseout="out('1091766479730821238');" style="">  60          if (listeners != null) {                                                                                  </span>
<span class="2531271156481149344" onmouseenter="enter('2531271156481149344');" onmouseout="out('2531271156481149344');" style="">  61              for (OnSelectionChangedListener l : listeners)                                                        </span>
<span class="-7270494200827421729" onmouseenter="enter('-7270494200827421729');" onmouseout="out('-7270494200827421729');" style="">  62                  l.onSelectionChanged(selStart, selEnd);                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  63          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  64      }                                                                                                             </span>
<span  style="">  65                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  66      @Override                                                                                                     </span>
<span class="-8866382987303008115" onmouseenter="enter('-8866382987303008115');" onmouseout="out('-8866382987303008115');" style="">  67      public boolean onKeyPreIme(int keyCode, KeyEvent event) {                                                     </span>
<span class="-7860565181348615145" onmouseenter="enter('-7860565181348615145');" onmouseout="out('-7860565181348615145');" style="">  68          if (event.getKeyCode() == KeyEvent.KEYCODE_BACK) {                                                        </span>
<span class="351273221058910218" onmouseenter="enter('351273221058910218');" onmouseout="out('351273221058910218');" style="">  69              clearFocus();                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  70          }                                                                                                         </span>
<span  style="">  71                                                                                                                    </span>
<span class="-1286123639299516067" onmouseenter="enter('-1286123639299516067');" onmouseout="out('-1286123639299516067');" style="">  72          return super.onKeyPreIme(keyCode, event);                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  73      }                                                                                                             </span>
<span  style="">  74                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  75      @Override                                                                                                     </span>
<span class="-6350469524661550536" onmouseenter="enter('-6350469524661550536');" onmouseout="out('-6350469524661550536');" style="">  76      protected void onFocusChanged(boolean focused, int direction, Rect previouslyFocusedRect) {                   </span>
<span class="-3879914196590028915" onmouseenter="enter('-3879914196590028915');" onmouseout="out('-3879914196590028915');" style="">  77          if (focused) {                                                                                            </span>
<span class="-5153257938979319281" onmouseenter="enter('-5153257938979319281');" onmouseout="out('-5153257938979319281');" style="">  78              setCursorVisible(true);                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  79          }                                                                                                         </span>
<span  style="">  80                                                                                                                    </span>
<span class="-3061316988982909646" onmouseenter="enter('-3061316988982909646');" onmouseout="out('-3061316988982909646');" style="">  81          super.onFocusChanged(focused, direction, previouslyFocusedRect);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  82      }                                                                                                             </span>
<span  style="">  83                                                                                                                    </span>
<span class="4904364548788344608" onmouseenter="enter('4904364548788344608');" onmouseout="out('4904364548788344608');" style="">  84      // Updates the ImageSpan drawable to the new checked state                                                    </span>
<span class="1702464047281652539" onmouseenter="enter('1702464047281652539');" onmouseout="out('1702464047281652539');" style="">  85      public void toggleCheckbox(final CheckableSpan checkableSpan) {                                               </span>
<span class="6590259663964917636" onmouseenter="enter('6590259663964917636');" onmouseout="out('6590259663964917636');" style="">  86          setCursorVisible(false);                                                                                  </span>
<span  style="">  87                                                                                                                    </span>
<span class="-1090656868967804943" onmouseenter="enter('-1090656868967804943');" onmouseout="out('-1090656868967804943');" style="">  88          final Editable editable = getText();                                                                      </span>
<span  style="">  89                                                                                                                    </span>
<span class="2794490867551519784" onmouseenter="enter('2794490867551519784');" onmouseout="out('2794490867551519784');" style="">  90          final int checkboxStart = editable.getSpanStart(checkableSpan);                                           </span>
<span class="-5528412093877694659" onmouseenter="enter('-5528412093877694659');" onmouseout="out('-5528412093877694659');" style="">  91          final int checkboxEnd = editable.getSpanEnd(checkableSpan);                                               </span>
<span  style="">  92                                                                                                                    </span>
<span class="-6572749467453395280" onmouseenter="enter('-6572749467453395280');" onmouseout="out('-6572749467453395280');" style="">  93          final int selectionStart = getSelectionStart();                                                           </span>
<span class="5061259277362521056" onmouseenter="enter('5061259277362521056');" onmouseout="out('5061259277362521056');" style="">  94          final int selectionEnd = getSelectionEnd();                                                               </span>
<span  style="">  95                                                                                                                    </span>
<span class="2426952674624776126" onmouseenter="enter('2426952674624776126');" onmouseout="out('2426952674624776126');" style="">  96          final ImageSpan[] imageSpans = editable.getSpans(checkboxStart, checkboxEnd, ImageSpan.class);            </span>
<span class="3424137973787154724" onmouseenter="enter('3424137973787154724');" onmouseout="out('3424137973787154724');" style="">  97          if (imageSpans.length &gt; 0) {                                                                              </span>
<span class="-650120241318912925" onmouseenter="enter('-650120241318912925');" onmouseout="out('-650120241318912925');" style="">  98              // ImageSpans are static, so we need to remove the old one and replace :|                             </span>
<span class="3096208024950867570" onmouseenter="enter('3096208024950867570');" onmouseout="out('3096208024950867570');" style="">  99              Drawable iconDrawable = ContextCompat.getDrawable(getContext(),                                       </span>
<span class="6549537428500511361" onmouseenter="enter('6549537428500511361');" onmouseout="out('6549537428500511361');" style=""> 100                      checkableSpan.isChecked()                                                                     </span>
<span class="1475528954993506852" onmouseenter="enter('1475528954993506852');" onmouseout="out('1475528954993506852');" style=""> 101                              ? R.drawable.ic_checkbox_checked_24px                                                 </span>
<span class="919975553509049414" onmouseenter="enter('919975553509049414');" onmouseout="out('919975553509049414');" style=""> 102                              : R.drawable.ic_checkbox_unchecked_24px);                                             </span>
<span class="-4575840480157011089" onmouseenter="enter('-4575840480157011089');" onmouseout="out('-4575840480157011089');" style=""><abbr title=" 103              iconDrawable = DrawableUtils.tintDrawableWithResource(getContext(), iconDrawable, R.color.text_title_disabled);"> 103              iconDrawable = DrawableUtils.tintDrawableWithResource(getContext(), iconDrawable, R.color.text_title_d🔵</abbr></span>
<span class="350955667428051936" onmouseenter="enter('350955667428051936');" onmouseout="out('350955667428051936');" style=""> 104              int iconSize = DisplayUtils.getChecklistIconSize(getContext());                                       </span>
<span class="2517609942364691225" onmouseenter="enter('2517609942364691225');" onmouseout="out('2517609942364691225');" style=""> 105              iconDrawable.setBounds(0, 0, iconSize, iconSize);                                                     </span>
<span class="1660574638142231511" onmouseenter="enter('1660574638142231511');" onmouseout="out('1660574638142231511');" style=""> 106              final CenteredImageSpan newImageSpan = new CenteredImageSpan(getContext(), iconDrawable);             </span>
<span class="5002906591139078644" onmouseenter="enter('5002906591139078644');" onmouseout="out('5002906591139078644');" style=""> 107              new Handler().post(new Runnable() {                                                                   </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 108                  @Override                                                                                         </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 109                  public void run() {                                                                               </span>
<span class="8105183574639194653" onmouseenter="enter('8105183574639194653');" onmouseout="out('8105183574639194653');" style=""> 110                      editable.setSpan(newImageSpan, checkboxStart, checkboxEnd, Spanned.SPAN_EXCLUSIVE_EXCLUSIVE); </span>
<span class="7563639754547712576" onmouseenter="enter('7563639754547712576');" onmouseout="out('7563639754547712576');" style=""> 111                      editable.removeSpan(imageSpans[0]);                                                           </span>
<span class="-1772473758449618286" onmouseenter="enter('-1772473758449618286');" onmouseout="out('-1772473758449618286');" style=""> 112                      fixLineSpacing();                                                                             </span>
<span  style=""> 113                                                                                                                    </span>
<span class="-3445748522530054247" onmouseenter="enter('-3445748522530054247');" onmouseout="out('-3445748522530054247');" style=""> 114                      // Restore the selection                                                                      </span>
<span class="530073190084792975" onmouseenter="enter('530073190084792975');" onmouseout="out('530073190084792975');" style=""> 115                      if (selectionStart &gt;= 0                                                                       </span>
<span class="-405023996198629042" onmouseenter="enter('-405023996198629042');" onmouseout="out('-405023996198629042');" style=""> 116                              &amp;&amp; selectionStart &lt;= editable.length()                                                </span>
<span class="229632755727724018" onmouseenter="enter('229632755727724018');" onmouseout="out('229632755727724018');" style=""> 117                              &amp;&amp; selectionEnd &lt;= editable.length() &amp;&amp; hasFocus()) {                                 </span>
<span class="-5633353852558776206" onmouseenter="enter('-5633353852558776206');" onmouseout="out('-5633353852558776206');" style=""> 118                          setSelection(selectionStart, selectionEnd);                                               </span>
<span class="-5153257938979319281" onmouseenter="enter('-5153257938979319281');" onmouseout="out('-5153257938979319281');" style=""> 119                          setCursorVisible(true);                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 120                      }                                                                                             </span>
<span  style=""> 121                                                                                                                    </span>
<span class="1425396247006298539" onmouseenter="enter('1425396247006298539');" onmouseout="out('1425396247006298539');" style=""> 122                      if (mOnCheckboxToggledListener != null) {                                                     </span>
<span class="-2776571883490751786" onmouseenter="enter('-2776571883490751786');" onmouseout="out('-2776571883490751786');" style=""> 123                          mOnCheckboxToggledListener.onCheckboxToggled();                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 124                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 125                  }                                                                                                 </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 126              });                                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 127          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 128      }                                                                                                             </span>
<span  style=""> 129                                                                                                                    </span>
<span class="-5129075646964696371" onmouseenter="enter('-5129075646964696371');" onmouseout="out('-5129075646964696371');" style=""> 130      // Returns the line position of the text cursor                                                               </span>
<span class="-4790209518368575529" onmouseenter="enter('-4790209518368575529');" onmouseout="out('-4790209518368575529');" style=""> 131      private int getCurrentCursorLine() {                                                                          </span>
<span class="-8708010820158817009" onmouseenter="enter('-8708010820158817009');" onmouseout="out('-8708010820158817009');" style=""> 132          int selectionStart = getSelectionStart();                                                                 </span>
<span class="-9041693021121574938" onmouseenter="enter('-9041693021121574938');" onmouseout="out('-9041693021121574938');" style=""> 133          Layout layout = getLayout();                                                                              </span>
<span  style=""> 134                                                                                                                    </span>
<span class="-3402438836469275129" onmouseenter="enter('-3402438836469275129');" onmouseout="out('-3402438836469275129');" style=""> 135          if (!(selectionStart == -1)) {                                                                            </span>
<span class="-5607640624285366578" onmouseenter="enter('-5607640624285366578');" onmouseout="out('-5607640624285366578');" style=""> 136              return layout.getLineForOffset(selectionStart);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 137          }                                                                                                         </span>
<span  style=""> 138                                                                                                                    </span>
<span class="-8269198090232257590" onmouseenter="enter('-8269198090232257590');" onmouseout="out('-8269198090232257590');" style=""> 139          return 0;                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 140      }                                                                                                             </span>
<span  style=""> 141                                                                                                                    </span>
<span class="-2056093237925143337" onmouseenter="enter('-2056093237925143337');" onmouseout="out('-2056093237925143337');" style=""> 142      public void insertChecklist() {                                                                               </span>
<span class="4507197880212123913" onmouseenter="enter('4507197880212123913');" onmouseout="out('4507197880212123913');" style=""> 143          int start, end;                                                                                           </span>
<span class="-47193053300540183" onmouseenter="enter('-47193053300540183');" onmouseout="out('-47193053300540183');" style=""> 144          int lineNumber = getCurrentCursorLine();                                                                  </span>
<span class="5931814074513814524" onmouseenter="enter('5931814074513814524');" onmouseout="out('5931814074513814524');" style=""> 145          start = getLayout().getLineStart(lineNumber);                                                             </span>
<span  style=""> 146                                                                                                                    </span>
<span class="4849153140254661183" onmouseenter="enter('4849153140254661183');" onmouseout="out('4849153140254661183');" style=""> 147          if (getSelectionEnd() &gt; getSelectionStart() &amp;&amp; !selectionIsOnSameLine()) {                                </span>
<span class="-2157237143863252877" onmouseenter="enter('-2157237143863252877');" onmouseout="out('-2157237143863252877');" style=""> 148              end = getSelectionEnd();                                                                              </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 149          } else {                                                                                                  </span>
<span class="2502740913562218300" onmouseenter="enter('2502740913562218300');" onmouseout="out('2502740913562218300');" style=""> 150              end = getLayout().getLineEnd(lineNumber);                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 151          }                                                                                                         </span>
<span  style=""> 152                                                                                                                    </span>
<span class="2155198360249988636" onmouseenter="enter('2155198360249988636');" onmouseout="out('2155198360249988636');" style=""> 153          SpannableStringBuilder workingString = new SpannableStringBuilder(getText().subSequence(start, end));     </span>
<span class="-3429280970080248112" onmouseenter="enter('-3429280970080248112');" onmouseout="out('-3429280970080248112');" style=""> 154          Editable editable = getText();                                                                            </span>
<span class="-1786745955335503454" onmouseenter="enter('-1786745955335503454');" onmouseout="out('-1786745955335503454');" style=""> 155          if (editable.length() &lt; start || editable.length() &lt; end) {                                               </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 156              return;                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 157          }                                                                                                         </span>
<span  style=""> 158                                                                                                                    </span>
<span class="-4021007956188151859" onmouseenter="enter('-4021007956188151859');" onmouseout="out('-4021007956188151859');" style=""> 159          int previousSelection = getSelectionStart();                                                              </span>
<span class="-7401262641884842036" onmouseenter="enter('-7401262641884842036');" onmouseout="out('-7401262641884842036');" style=""> 160          CheckableSpan[] checkableSpans = workingString.getSpans(0, workingString.length(), CheckableSpan.class);  </span>
<span class="-3983435901659757897" onmouseenter="enter('-3983435901659757897');" onmouseout="out('-3983435901659757897');" style=""> 161          if (checkableSpans.length &gt; 0) {                                                                          </span>
<span class="-1723631309680670098" onmouseenter="enter('-1723631309680670098');" onmouseout="out('-1723631309680670098');" style=""> 162              // Remove any CheckableSpans found                                                                    </span>
<span class="8606250068555850418" onmouseenter="enter('8606250068555850418');" onmouseout="out('8606250068555850418');" style=""> 163              for (CheckableSpan span: checkableSpans) {                                                            </span>
<span class="-8209396112528216299" onmouseenter="enter('-8209396112528216299');" onmouseout="out('-8209396112528216299');" style=""> 164                  workingString.replace(                                                                            </span>
<span class="7365374273051143475" onmouseenter="enter('7365374273051143475');" onmouseout="out('7365374273051143475');" style=""> 165                          workingString.getSpanStart(span),                                                         </span>
<span class="5673880950278913259" onmouseenter="enter('5673880950278913259');" onmouseout="out('5673880950278913259');" style=""> 166                          workingString.getSpanEnd(span) + 1,                                                       </span>
<span class="7887690425633568697" onmouseenter="enter('7887690425633568697');" onmouseout="out('7887690425633568697');" style=""> 167                          &quot;&quot;                                                                                        </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 168                  );                                                                                                </span>
<span class="-7905663944685048412" onmouseenter="enter('-7905663944685048412');" onmouseout="out('-7905663944685048412');" style=""> 169                  workingString.removeSpan(span);                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 170              }                                                                                                     </span>
<span  style=""> 171                                                                                                                    </span>
<span class="1818093574225738447" onmouseenter="enter('1818093574225738447');" onmouseout="out('1818093574225738447');" style=""> 172              editable.replace(start, end, workingString);                                                          </span>
<span  style=""> 173                                                                                                                    </span>
<span class="559052113481581758" onmouseenter="enter('559052113481581758');" onmouseout="out('559052113481581758');" style=""> 174              if (checkableSpans.length == 1) {                                                                     </span>
<span class="-811974177834571960" onmouseenter="enter('-811974177834571960');" onmouseout="out('-811974177834571960');" style=""> 175                  int newSelection = Math.max(previousSelection - CHECKBOX_LENGTH, 0);                              </span>
<span class="1548041209841422053" onmouseenter="enter('1548041209841422053');" onmouseout="out('1548041209841422053');" style=""> 176                  if (editable.length() &gt;= newSelection) {                                                          </span>
<span class="-1551928067227182439" onmouseenter="enter('-1551928067227182439');" onmouseout="out('-1551928067227182439');" style=""> 177                      setSelection(newSelection);                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 178                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 179              }                                                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 180          } else {                                                                                                  </span>
<span class="7908237664339315590" onmouseenter="enter('7908237664339315590');" onmouseout="out('7908237664339315590');" style=""> 181              // Insert a checklist for each line                                                                   </span>
<span class="9092008481531189309" onmouseenter="enter('9092008481531189309');" onmouseout="out('9092008481531189309');" style=""> 182              String[] lines = workingString.toString().split(&quot;(?&lt;=\n)&quot;);                                           </span>
<span class="-2021014457160624880" onmouseenter="enter('-2021014457160624880');" onmouseout="out('-2021014457160624880');" style=""> 183              StringBuilder resultString = new StringBuilder();                                                     </span>
<span  style=""> 184                                                                                                                    </span>
<span class="1824047840691841029" onmouseenter="enter('1824047840691841029');" onmouseout="out('1824047840691841029');" style=""> 185              for (String lineString: lines) {                                                                      </span>
<span class="2358811559308129106" onmouseenter="enter('2358811559308129106');" onmouseout="out('2358811559308129106');" style=""> 186                  // Preserve the spaces before the text                                                            </span>
<span class="-976435609607935349" onmouseenter="enter('-976435609607935349');" onmouseout="out('-976435609607935349');" style=""> 187                  int leadingSpaceCount;                                                                            </span>
<span class="-2007073157338218983" onmouseenter="enter('-2007073157338218983');" onmouseout="out('-2007073157338218983');" style=""> 188                  if (lineString.trim().length() == 0) {                                                            </span>
<span class="1650658955318262016" onmouseenter="enter('1650658955318262016');" onmouseout="out('1650658955318262016');" style=""> 189                      // Only whitespace content, get count of spaces                                               </span>
<span class="2598856147688027045" onmouseenter="enter('2598856147688027045');" onmouseout="out('2598856147688027045');" style=""> 190                      leadingSpaceCount = lineString.length() - lineString.replaceAll(&quot; &quot;, &quot;&quot;).length();            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 191                  } else {                                                                                          </span>
<span class="3037156392896338412" onmouseenter="enter('3037156392896338412');" onmouseout="out('3037156392896338412');" style=""> 192                      // Get count of spaces up to first non-whitespace character                                   </span>
<span class="-2037575593720791721" onmouseenter="enter('-2037575593720791721');" onmouseout="out('-2037575593720791721');" style=""> 193                      leadingSpaceCount = lineString.indexOf(lineString.trim());                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 194                  }                                                                                                 </span>
<span  style=""> 195                                                                                                                    </span>
<span class="1113723887572128376" onmouseenter="enter('1113723887572128376');" onmouseout="out('1113723887572128376');" style=""> 196                  if (leadingSpaceCount &gt; 0) {                                                                      </span>
<span class="-4607277845227497529" onmouseenter="enter('-4607277845227497529');" onmouseout="out('-4607277845227497529');" style=""> 197                      resultString.append(new String(new char[leadingSpaceCount]).replace(&#x27;\0&#x27;, &#x27; &#x27;));              </span>
<span class="1014609549743804890" onmouseenter="enter('1014609549743804890');" onmouseout="out('1014609549743804890');" style=""> 198                      lineString = lineString.substring(leadingSpaceCount);                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 199                  }                                                                                                 </span>
<span  style=""> 200                                                                                                                    </span>
<span class="-4759602698755112129" onmouseenter="enter('-4759602698755112129');" onmouseout="out('-4759602698755112129');" style=""> 201                  resultString                                                                                      </span>
<span class="-6300937305952313219" onmouseenter="enter('-6300937305952313219');" onmouseout="out('-6300937305952313219');" style=""> 202                          .append(ChecklistUtils.UNCHECKED_MARKDOWN)                                                </span>
<span class="-7012949866063989115" onmouseenter="enter('-7012949866063989115');" onmouseout="out('-7012949866063989115');" style=""> 203                          .append(&quot; &quot;)                                                                              </span>
<span class="-2140099013154536267" onmouseenter="enter('-2140099013154536267');" onmouseout="out('-2140099013154536267');" style=""> 204                          .append(lineString);                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 205              }                                                                                                     </span>
<span  style=""> 206                                                                                                                    </span>
<span class="327663848358659642" onmouseenter="enter('327663848358659642');" onmouseout="out('327663848358659642');" style=""> 207              editable.replace(start, end, resultString);                                                           </span>
<span  style=""> 208                                                                                                                    </span>
<span class="-7244042633242525084" onmouseenter="enter('-7244042633242525084');" onmouseout="out('-7244042633242525084');" style=""> 209              int newSelection = Math.max(previousSelection, 0) + (lines.length * CHECKBOX_LENGTH);                 </span>
<span class="1548041209841422053" onmouseenter="enter('1548041209841422053');" onmouseout="out('1548041209841422053');" style=""> 210              if (editable.length() &gt;= newSelection) {                                                              </span>
<span class="-1551928067227182439" onmouseenter="enter('-1551928067227182439');" onmouseout="out('-1551928067227182439');" style=""> 211                  setSelection(newSelection);                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 212              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 213          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 214      }                                                                                                             </span>
<span  style=""> 215                                                                                                                    </span>
<span class="-1068085743919359847" onmouseenter="enter('-1068085743919359847');" onmouseout="out('-1068085743919359847');" style=""> 216      // Returns true if the current editor selection is on the same line                                           </span>
<span class="-1322680323963324573" onmouseenter="enter('-1322680323963324573');" onmouseout="out('-1322680323963324573');" style=""> 217      private boolean selectionIsOnSameLine() {                                                                     </span>
<span class="-8708010820158817009" onmouseenter="enter('-8708010820158817009');" onmouseout="out('-8708010820158817009');" style=""> 218          int selectionStart = getSelectionStart();                                                                 </span>
<span class="-8399501927910381124" onmouseenter="enter('-8399501927910381124');" onmouseout="out('-8399501927910381124');" style=""> 219          int selectionEnd = getSelectionEnd();                                                                     </span>
<span class="-9041693021121574938" onmouseenter="enter('-9041693021121574938');" onmouseout="out('-9041693021121574938');" style=""> 220          Layout layout = getLayout();                                                                              </span>
<span  style=""> 221                                                                                                                    </span>
<span class="-5006678790845707461" onmouseenter="enter('-5006678790845707461');" onmouseout="out('-5006678790845707461');" style=""> 222          if (selectionStart &gt;= 0 &amp;&amp; selectionEnd &gt;= 0) {                                                           </span>
<span class="7452975995927250930" onmouseenter="enter('7452975995927250930');" onmouseout="out('7452975995927250930');" style=""> 223              return layout.getLineForOffset(selectionStart) == layout.getLineForOffset(selectionEnd);              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 224          }                                                                                                         </span>
<span  style=""> 225                                                                                                                    </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 226          return false;                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 227      }                                                                                                             </span>
<span  style=""> 228                                                                                                                    </span>
<span class="2245519181968029694" onmouseenter="enter('2245519181968029694');" onmouseout="out('2245519181968029694');" style=""> 229      public void fixLineSpacing() {                                                                                </span>
<span class="3739656730239017857" onmouseenter="enter('3739656730239017857');" onmouseout="out('3739656730239017857');" style=""> 230          // Prevents line heights from compacting                                                                  </span>
<span class="-2883030315986006038" onmouseenter="enter('-2883030315986006038');" onmouseout="out('-2883030315986006038');" style=""> 231          // https://issuetracker.google.com/issues/37009353                                                        </span>
<span class="593486953485328476" onmouseenter="enter('593486953485328476');" onmouseout="out('593486953485328476');" style=""> 232          float lineSpacingExtra = getLineSpacingExtra();                                                           </span>
<span class="-8024412754689478694" onmouseenter="enter('-8024412754689478694');" onmouseout="out('-8024412754689478694');" style=""> 233          float lineSpacingMultiplier = getLineSpacingMultiplier();                                                 </span>
<span class="8227210311807072313" onmouseenter="enter('8227210311807072313');" onmouseout="out('8227210311807072313');" style=""> 234          setLineSpacing(0.0f, 1.0f);                                                                               </span>
<span class="-9061865158009916868" onmouseenter="enter('-9061865158009916868');" onmouseout="out('-9061865158009916868');" style=""> 235          setLineSpacing(lineSpacingExtra, lineSpacingMultiplier);                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 236      }                                                                                                             </span>
<span  style=""> 237                                                                                                                    </span>
<span class="-7557861489858202648" onmouseenter="enter('-7557861489858202648');" onmouseout="out('-7557861489858202648');" style=""> 238      public interface OnSelectionChangedListener {                                                                 </span>
<span class="-2603544447302104250" onmouseenter="enter('-2603544447302104250');" onmouseout="out('-2603544447302104250');" style=""> 239          void onSelectionChanged(int selStart, int selEnd);                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 240      }                                                                                                             </span>
<span  style=""> 241                                                                                                                    </span>
<span class="-2496270541861205859" onmouseenter="enter('-2496270541861205859');" onmouseout="out('-2496270541861205859');" style=""> 242      // Replaces any CheckableSpans with their markdown counterpart (e.g. &#x27;- [ ]&#x27;)                                 </span>
<span class="-3349734715224755384" onmouseenter="enter('-3349734715224755384');" onmouseout="out('-3349734715224755384');" style=""> 243      public String getPlainTextContent() {                                                                         </span>
<span class="-1769659359974524880" onmouseenter="enter('-1769659359974524880');" onmouseout="out('-1769659359974524880');" style=""> 244          if (getText() == null) {                                                                                  </span>
<span class="-8289946804601166879" onmouseenter="enter('-8289946804601166879');" onmouseout="out('-8289946804601166879');" style=""> 245              return &quot;&quot;;                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 246          }                                                                                                         </span>
<span  style=""> 247                                                                                                                    </span>
<span class="-5774176688206725478" onmouseenter="enter('-5774176688206725478');" onmouseout="out('-5774176688206725478');" style=""> 248          SpannableStringBuilder content = new SpannableStringBuilder(getText());                                   </span>
<span class="3967945012021671393" onmouseenter="enter('3967945012021671393');" onmouseout="out('3967945012021671393');" style=""> 249          CheckableSpan[] spans = content.getSpans(0, content.length(), CheckableSpan.class);                       </span>
<span class="3321734155540722629" onmouseenter="enter('3321734155540722629');" onmouseout="out('3321734155540722629');" style=""> 250          for(CheckableSpan span: spans) {                                                                          </span>
<span class="9048125924196956410" onmouseenter="enter('9048125924196956410');" onmouseout="out('9048125924196956410');" style=""> 251              int start = content.getSpanStart(span);                                                               </span>
<span class="7525585125635328254" onmouseenter="enter('7525585125635328254');" onmouseout="out('7525585125635328254');" style=""> 252              int end = content.getSpanEnd(span);                                                                   </span>
<span class="7328134583038878217" onmouseenter="enter('7328134583038878217');" onmouseout="out('7328134583038878217');" style=""> 253              ((Editable) content).replace(                                                                         </span>
<span class="96671177266943526" onmouseenter="enter('96671177266943526');" onmouseout="out('96671177266943526');" style=""> 254                      start,                                                                                        </span>
<span class="-8378543162701826190" onmouseenter="enter('-8378543162701826190');" onmouseout="out('-8378543162701826190');" style=""> 255                      end,                                                                                          </span>
<span class="3531746424024935349" onmouseenter="enter('3531746424024935349');" onmouseout="out('3531746424024935349');" style=""> 256                      span.isChecked() ? ChecklistUtils.CHECKED_MARKDOWN : ChecklistUtils.UNCHECKED_MARKDOWN);      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 257          }                                                                                                         </span>
<span  style=""> 258                                                                                                                    </span>
<span class="-5768072572856737542" onmouseenter="enter('-5768072572856737542');" onmouseout="out('-5768072572856737542');" style=""> 259          return content.toString();                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 260      }                                                                                                             </span>
<span  style=""> 261                                                                                                                    </span>
<span class="-4058542168993639710" onmouseenter="enter('-4058542168993639710');" onmouseout="out('-4058542168993639710');" style=""> 262      // Replaces any CheckableSpans with their markdown preview counterpart (e.g. &#x27;- [\u2a2f]&#x27;)                    </span>
<span class="-4279713333663092916" onmouseenter="enter('-4279713333663092916');" onmouseout="out('-4279713333663092916');" style=""> 263      public String getPreviewTextContent() {                                                                       </span>
<span class="-1769659359974524880" onmouseenter="enter('-1769659359974524880');" onmouseout="out('-1769659359974524880');" style=""> 264          if (getText() == null) {                                                                                  </span>
<span class="-8289946804601166879" onmouseenter="enter('-8289946804601166879');" onmouseout="out('-8289946804601166879');" style=""> 265              return &quot;&quot;;                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 266          }                                                                                                         </span>
<span  style=""> 267                                                                                                                    </span>
<span class="-5774176688206725478" onmouseenter="enter('-5774176688206725478');" onmouseout="out('-5774176688206725478');" style=""> 268          SpannableStringBuilder content = new SpannableStringBuilder(getText());                                   </span>
<span class="3967945012021671393" onmouseenter="enter('3967945012021671393');" onmouseout="out('3967945012021671393');" style=""> 269          CheckableSpan[] spans = content.getSpans(0, content.length(), CheckableSpan.class);                       </span>
<span class="3321734155540722629" onmouseenter="enter('3321734155540722629');" onmouseout="out('3321734155540722629');" style=""> 270          for(CheckableSpan span: spans) {                                                                          </span>
<span class="9048125924196956410" onmouseenter="enter('9048125924196956410');" onmouseout="out('9048125924196956410');" style=""> 271              int start = content.getSpanStart(span);                                                               </span>
<span class="7525585125635328254" onmouseenter="enter('7525585125635328254');" onmouseout="out('7525585125635328254');" style=""> 272              int end = content.getSpanEnd(span);                                                                   </span>
<span class="7328134583038878217" onmouseenter="enter('7328134583038878217');" onmouseout="out('7328134583038878217');" style=""> 273              ((Editable) content).replace(                                                                         </span>
<span class="96671177266943526" onmouseenter="enter('96671177266943526');" onmouseout="out('96671177266943526');" style=""> 274                      start,                                                                                        </span>
<span class="-8378543162701826190" onmouseenter="enter('-8378543162701826190');" onmouseout="out('-8378543162701826190');" style=""> 275                      end,                                                                                          </span>
<span class="-8440602794388940209" onmouseenter="enter('-8440602794388940209');" onmouseout="out('-8440602794388940209');" style=""><abbr title=" 276                      span.isChecked() ? ChecklistUtils.CHECKED_MARKDOWN_PREVIEW : ChecklistUtils.UNCHECKED_MARKDOWN);"> 276                      span.isChecked() ? ChecklistUtils.CHECKED_MARKDOWN_PREVIEW : ChecklistUtils.UNCHECKED_MARKDOWN🔵</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 277          }                                                                                                         </span>
<span  style=""> 278                                                                                                                    </span>
<span class="-5768072572856737542" onmouseenter="enter('-5768072572856737542');" onmouseout="out('-5768072572856737542');" style=""> 279          return content.toString();                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 280      }                                                                                                             </span>
<span  style=""> 281                                                                                                                    </span>
<span  style=""> 282                                                                                                                    </span>
<span class="-8793607864180089375" onmouseenter="enter('-8793607864180089375');" onmouseout="out('-8793607864180089375');" style=""> 283      public void processChecklists() {                                                                             </span>
<span class="-822567654445480874" onmouseenter="enter('-822567654445480874');" onmouseout="out('-822567654445480874');" style=""> 284          if (getText().length() == 0 || getContext() == null) {                                                    </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 285              return;                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 286          }                                                                                                         </span>
<span  style=""> 287                                                                                                                    </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 288          try {                                                                                                     </span>
<span class="-2879977185755091274" onmouseenter="enter('-2879977185755091274');" onmouseout="out('-2879977185755091274');" style=""> 289              ChecklistUtils.addChecklistSpansForRegexAndColor(                                                     </span>
<span class="4777936721428774843" onmouseenter="enter('4777936721428774843');" onmouseout="out('4777936721428774843');" style=""> 290                      getContext(),                                                                                 </span>
<span class="6494562836495618397" onmouseenter="enter('6494562836495618397');" onmouseout="out('6494562836495618397');" style=""> 291                      getText(),                                                                                    </span>
<span class="-5190158693774204825" onmouseenter="enter('-5190158693774204825');" onmouseout="out('-5190158693774204825');" style=""> 292                      ChecklistUtils.CHECKLIST_REGEX_LINES,                                                         </span>
<span class="-183067455432259027" onmouseenter="enter('-183067455432259027');" onmouseout="out('-183067455432259027');" style=""> 293                      R.color.text_title_disabled);                                                                 </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 294          } catch (Exception e) {                                                                                   </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 295              e.printStackTrace();                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 296          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 297      }                                                                                                             </span>
<span  style=""> 298                                                                                                                    </span>
<span class="-7678796331074634227" onmouseenter="enter('-7678796331074634227');" onmouseout="out('-7678796331074634227');" style=""> 299      public void setOnCheckboxToggledListener(OnCheckboxToggledListener listener) {                                </span>
<span class="3565913960515795124" onmouseenter="enter('3565913960515795124');" onmouseout="out('3565913960515795124');" style=""> 300          mOnCheckboxToggledListener = listener;                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 301      }                                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 302  }                                                                                                                 </span></pre></td>
                            <td><pre><span class="2121239535603548975" onmouseenter="enter('2121239535603548975');" onmouseout="out('2121239535603548975');" style="">   1  package com.automattic.simplenote.widgets;                                                                        </span>
<span  style="">   2                                                                                                                    </span>
<span class="5922045460006936195" onmouseenter="enter('5922045460006936195');" onmouseout="out('5922045460006936195');" style="">   3  import android.content.Context;                                                                                   </span>
<span class="2207333516549486115" onmouseenter="enter('2207333516549486115');" onmouseout="out('2207333516549486115');" style="">   4  import android.graphics.Rect;                                                                                     </span>
<span class="-1737226814075322931" onmouseenter="enter('-1737226814075322931');" onmouseout="out('-1737226814075322931');" style="">   5  import android.graphics.drawable.Drawable;                                                                        </span>
<span class="-1086316590722027623" onmouseenter="enter('-1086316590722027623');" onmouseout="out('-1086316590722027623');" style="">   6  import android.os.Handler;                                                                                        </span>
<span class="4177373235046048356" onmouseenter="enter('4177373235046048356');" onmouseout="out('4177373235046048356');" style="">   7  import android.text.Editable;                                                                                     </span>
<span class="-578015270574978569" onmouseenter="enter('-578015270574978569');" onmouseout="out('-578015270574978569');" style="">   8  import android.text.Layout;                                                                                       </span>
<span class="7007167342609832330" onmouseenter="enter('7007167342609832330');" onmouseout="out('7007167342609832330');" style="">   9  import android.text.SpannableStringBuilder;                                                                       </span>
<span class="7731806713123176572" onmouseenter="enter('7731806713123176572');" onmouseout="out('7731806713123176572');" style="">  10  import android.text.Spanned;                                                                                      </span>
<span class="8961068409863998468" onmouseenter="enter('8961068409863998468');" onmouseout="out('8961068409863998468');" style="">  11  import android.text.style.ImageSpan;                                                                              </span>
<span class="-4218724752779269131" onmouseenter="enter('-4218724752779269131');" onmouseout="out('-4218724752779269131');" style="">  12  import android.util.AttributeSet;                                                                                 </span>
<span class="959108076239844050" onmouseenter="enter('959108076239844050');" onmouseout="out('959108076239844050');" style="">  13  import android.view.KeyEvent;                                                                                     </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  14 -                                                                                                                  </span>
<span class="4989327779724079972" onmouseenter="enter('4989327779724079972');" onmouseout="out('4989327779724079972');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  15 -import androidx.appcompat.widget.AppCompatEditText;                                                               </span>
<span class="-8980485571216513882" onmouseenter="enter('-8980485571216513882');" onmouseout="out('-8980485571216513882');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  16 +import android.view.View;                                                                                         </span>
<span class="-3898686145228074474" onmouseenter="enter('-3898686145228074474');" onmouseout="out('-3898686145228074474');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  17 +import android.widget.AdapterView;                                                                                </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  18 +                                                                                                                  </span>
<span class="-8037490851538345990" onmouseenter="enter('-8037490851538345990');" onmouseout="out('-8037490851538345990');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  19 +import androidx.appcompat.widget.AppCompatMultiAutoCompleteTextView;                                              </span>
<span class="5842151950717757009" onmouseenter="enter('5842151950717757009');" onmouseout="out('5842151950717757009');" style="">  20  import androidx.core.content.ContextCompat;                                                                       </span>
<span  style="">  21                                                                                                                    </span>
<span class="-6092371777820512633" onmouseenter="enter('-6092371777820512633');" onmouseout="out('-6092371777820512633');" style="">  22  import com.automattic.simplenote.R;                                                                               </span>
<span class="9061368408436996655" onmouseenter="enter('9061368408436996655');" onmouseout="out('9061368408436996655');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  23 +import com.automattic.simplenote.models.Note;                                                                     </span>
<span class="1987879750509178857" onmouseenter="enter('1987879750509178857');" onmouseout="out('1987879750509178857');" style="">  24  import com.automattic.simplenote.utils.ChecklistUtils;                                                            </span>
<span class="8577850632926167445" onmouseenter="enter('8577850632926167445');" onmouseout="out('8577850632926167445');" style="">  25  import com.automattic.simplenote.utils.DisplayUtils;                                                              </span>
<span class="930019215389101465" onmouseenter="enter('930019215389101465');" onmouseout="out('930019215389101465');" style="">  26  import com.automattic.simplenote.utils.DrawableUtils;                                                             </span>
<span class="-5948624663998670139" onmouseenter="enter('-5948624663998670139');" onmouseout="out('-5948624663998670139');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  27 +import com.automattic.simplenote.utils.LinkTokenizer;                                                             </span>
<span class="2537926396801226048" onmouseenter="enter('2537926396801226048');" onmouseout="out('2537926396801226048');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  28 +import com.automattic.simplenote.utils.SimplenoteLinkify;                                                         </span>
<span class="-8170925370861558125" onmouseenter="enter('-8170925370861558125');" onmouseout="out('-8170925370861558125');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  29 +import com.simperium.client.Bucket;                                                                               </span>
<span  style="">  30                                                                                                                    </span>
<span class="9191247685397773893" onmouseenter="enter('9191247685397773893');" onmouseout="out('9191247685397773893');" style="">  31  import java.util.ArrayList;                                                                                       </span>
<span class="-1786020958497218848" onmouseenter="enter('-1786020958497218848');" onmouseout="out('-1786020958497218848');" style="">  32  import java.util.List;                                                                                            </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  33 -                                                                                                                  </span>
<span class="-806136105050866371" onmouseenter="enter('-806136105050866371');" onmouseout="out('-806136105050866371');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  34 -public class SimplenoteEditText extends AppCompatEditText {                                                       </span>
<span class="2159928926335330273" onmouseenter="enter('2159928926335330273');" onmouseout="out('2159928926335330273');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  35 +import java.util.regex.Matcher;                                                                                   </span>
<span class="1513108047920599059" onmouseenter="enter('1513108047920599059');" onmouseout="out('1513108047920599059');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  36 +import java.util.regex.Pattern;                                                                                   </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  37 +                                                                                                                  </span>
<span class="1948737371075708279" onmouseenter="enter('1948737371075708279');" onmouseout="out('1948737371075708279');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  38 +import static com.automattic.simplenote.utils.SimplenoteLinkify.SIMPLENOTE_LINK_ID;                               </span>
<span class="-4405840676582391526" onmouseenter="enter('-4405840676582391526');" onmouseout="out('-4405840676582391526');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  39 +import static com.automattic.simplenote.utils.SimplenoteLinkify.SIMPLENOTE_LINK_PREFIX;                           </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  40 +                                                                                                                  </span>
<span class="-117003403243561872" onmouseenter="enter('-117003403243561872');" onmouseout="out('-117003403243561872');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"><abbr title="  41 +public class SimplenoteEditText extends AppCompatMultiAutoCompleteTextView implements AdapterView.OnItemClickListener {">  41 +public class SimplenoteEditText extends AppCompatMultiAutoCompleteTextView implements AdapterView.OnItemClickListe🔵</abbr></span>
<span class="4400513732356126489" onmouseenter="enter('4400513732356126489');" onmouseout="out('4400513732356126489');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"><abbr title="  42 +    private static final Pattern INTERNOTE_LINK_PATTERN_EDIT = Pattern.compile(&quot;([^]]*)(]\\(&quot; + SIMPLENOTE_LINK_PREFIX + SIMPLENOTE_LINK_ID + &quot;\\))&quot;);">  42 +    private static final Pattern INTERNOTE_LINK_PATTERN_EDIT = Pattern.compile(&quot;([^]]*)(]\\(&quot; + SIMPLENOTE_LINK_PR🔵</abbr></span>
<span class="-875162683766216906" onmouseenter="enter('-875162683766216906');" onmouseout="out('-875162683766216906');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"><abbr title="  43 +    private static final Pattern INTERNOTE_LINK_PATTERN_FULL = Pattern.compile(&quot;(?s)(.)*(\\[)&quot; + INTERNOTE_LINK_PATTERN_EDIT);">  43 +    private static final Pattern INTERNOTE_LINK_PATTERN_FULL = Pattern.compile(&quot;(?s)(.)*(\\[)&quot; + INTERNOTE_LINK_PA🔵</abbr></span>
<span class="-9094162731040816051" onmouseenter="enter('-9094162731040816051');" onmouseout="out('-9094162731040816051');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  44 +    private static final int CHECKBOX_LENGTH = 2; // one ClickableSpan character + one space character            </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  45 +                                                                                                                  </span>
<span class="1196031820703007842" onmouseenter="enter('1196031820703007842');" onmouseout="out('1196031820703007842');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  46 +    private LinkTokenizer mTokenizer;                                                                             </span>
<span class="1190896655347967160" onmouseenter="enter('1190896655347967160');" onmouseout="out('1190896655347967160');" style="">  47      private List&lt;OnSelectionChangedListener&gt; listeners;                                                           </span>
<span class="-5202758860929245202" onmouseenter="enter('-5202758860929245202');" onmouseout="out('-5202758860929245202');" style="">  48      private OnCheckboxToggledListener mOnCheckboxToggledListener;                                                 </span>
<span class="-3811158646430090426" onmouseenter="enter('-3811158646430090426');" onmouseout="out('-3811158646430090426');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  49 -    private final int CHECKBOX_LENGTH = 2; // One CheckableSpan + a space character                               </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  50 +                                                                                                                  </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  51 +    @Override                                                                                                     </span>
<span class="-4725396128083470659" onmouseenter="enter('-4725396128083470659');" onmouseout="out('-4725396128083470659');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  52 +    public boolean enoughToFilter() {                                                                             </span>
<span class="-408752473959783546" onmouseenter="enter('-408752473959783546');" onmouseout="out('-408752473959783546');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  53 +        String substringCursor = getText().toString().substring(getSelectionEnd());                               </span>
<span class="-9172431867047830396" onmouseenter="enter('-9172431867047830396');" onmouseout="out('-9172431867047830396');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  54 +        Matcher matcherEdit = INTERNOTE_LINK_PATTERN_EDIT.matcher(substringCursor);                               </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  55 +                                                                                                                  </span>
<span class="2663075153106693403" onmouseenter="enter('2663075153106693403');" onmouseout="out('2663075153106693403');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  56 +        // When an internote link title is being edited, don&#x27;t show an autocomplete popup.                        </span>
<span class="3648956898641204215" onmouseenter="enter('3648956898641204215');" onmouseout="out('3648956898641204215');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  57 +        if (matcherEdit.lookingAt()) {                                                                            </span>
<span class="2950221330115688931" onmouseenter="enter('2950221330115688931');" onmouseout="out('2950221330115688931');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  58 +            String substringEdit = substringCursor.substring(0, matcherEdit.end());                               </span>
<span class="1311569057139673901" onmouseenter="enter('1311569057139673901');" onmouseout="out('1311569057139673901');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  59 +            Matcher matcherFull = INTERNOTE_LINK_PATTERN_FULL.matcher(substringEdit);                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  60 +                                                                                                                  </span>
<span class="4323098233182236709" onmouseenter="enter('4323098233182236709');" onmouseout="out('4323098233182236709');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  61 +            if (!matcherFull.lookingAt()) {                                                                       </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  62 +                return false;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  63 +            }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  64 +        }                                                                                                         </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  65 +                                                                                                                  </span>
<span class="8648892168213198446" onmouseenter="enter('8648892168213198446');" onmouseout="out('8648892168213198446');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  66 +        Editable text = getText();                                                                                </span>
<span class="-5347114162693005051" onmouseenter="enter('-5347114162693005051');" onmouseout="out('-5347114162693005051');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  67 +        int end = getSelectionEnd();                                                                              </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  68 +                                                                                                                  </span>
<span class="-2364642465072686278" onmouseenter="enter('-2364642465072686278');" onmouseout="out('-2364642465072686278');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  69 +        if (end &lt; 0) {                                                                                            </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  70 +            return false;                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  71 +        }                                                                                                         </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  72 +                                                                                                                  </span>
<span class="-6730134198157735680" onmouseenter="enter('-6730134198157735680');" onmouseout="out('-6730134198157735680');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  73 +        int start = mTokenizer.findTokenStart(text, end);                                                         </span>
<span class="3206229991437838506" onmouseenter="enter('3206229991437838506');" onmouseout="out('3206229991437838506');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  74 +        return start &gt; 0 &amp;&amp; end - start &gt;= 1;                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  75 +    }                                                                                                             </span>
<span  style="">  76                                                                                                                    </span>
<span class="7419298585035749039" onmouseenter="enter('7419298585035749039');" onmouseout="out('7419298585035749039');" style="">  77      public interface OnCheckboxToggledListener {                                                                  </span>
<span class="-7775623224861892729" onmouseenter="enter('-7775623224861892729');" onmouseout="out('-7775623224861892729');" style="">  78          void onCheckboxToggled();                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  79      }                                                                                                             </span>
<span  style="">  80                                                                                                                    </span>
<span class="9083968033793714051" onmouseenter="enter('9083968033793714051');" onmouseout="out('9083968033793714051');" style="">  81      public SimplenoteEditText(Context context) {                                                                  </span>
<span class="-8232648159726954046" onmouseenter="enter('-8232648159726954046');" onmouseout="out('-8232648159726954046');" style="">  82          super(context);                                                                                           </span>
<span class="4798086328679447282" onmouseenter="enter('4798086328679447282');" onmouseout="out('4798086328679447282');" style="">  83          listeners = new ArrayList&lt;&gt;();                                                                            </span>
<span class="8285102428439000867" onmouseenter="enter('8285102428439000867');" onmouseout="out('8285102428439000867');" style="">  84          setTypeface(TypefaceCache.getTypeface(context, TypefaceCache.TYPEFACE_NAME_ROBOTO_REGULAR));              </span>
<span class="-4364621221695153856" onmouseenter="enter('-4364621221695153856');" onmouseout="out('-4364621221695153856');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  85 +        setLinkTokenizer();                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  86      }                                                                                                             </span>
<span  style="">  87                                                                                                                    </span>
<span class="-5191028644893669048" onmouseenter="enter('-5191028644893669048');" onmouseout="out('-5191028644893669048');" style="">  88      public SimplenoteEditText(Context context, AttributeSet attrs) {                                              </span>
<span class="6666522707728770706" onmouseenter="enter('6666522707728770706');" onmouseout="out('6666522707728770706');" style="">  89          super(context, attrs);                                                                                    </span>
<span class="4798086328679447282" onmouseenter="enter('4798086328679447282');" onmouseout="out('4798086328679447282');" style="">  90          listeners = new ArrayList&lt;&gt;();                                                                            </span>
<span class="8285102428439000867" onmouseenter="enter('8285102428439000867');" onmouseout="out('8285102428439000867');" style="">  91          setTypeface(TypefaceCache.getTypeface(context, TypefaceCache.TYPEFACE_NAME_ROBOTO_REGULAR));              </span>
<span class="-4364621221695153856" onmouseenter="enter('-4364621221695153856');" onmouseout="out('-4364621221695153856');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  92 +        setLinkTokenizer();                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  93      }                                                                                                             </span>
<span  style="">  94                                                                                                                    </span>
<span class="-5033151626525601752" onmouseenter="enter('-5033151626525601752');" onmouseout="out('-5033151626525601752');" style="">  95      public SimplenoteEditText(Context context, AttributeSet attrs, int defStyle) {                                </span>
<span class="1281987604327041578" onmouseenter="enter('1281987604327041578');" onmouseout="out('1281987604327041578');" style="">  96          super(context, attrs, defStyle);                                                                          </span>
<span class="4798086328679447282" onmouseenter="enter('4798086328679447282');" onmouseout="out('4798086328679447282');" style="">  97          listeners = new ArrayList&lt;&gt;();                                                                            </span>
<span class="8285102428439000867" onmouseenter="enter('8285102428439000867');" onmouseout="out('8285102428439000867');" style="">  98          setTypeface(TypefaceCache.getTypeface(context, TypefaceCache.TYPEFACE_NAME_ROBOTO_REGULAR));              </span>
<span class="-4364621221695153856" onmouseenter="enter('-4364621221695153856');" onmouseout="out('-4364621221695153856');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  99 +        setLinkTokenizer();                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 100      }                                                                                                             </span>
<span  style=""> 101                                                                                                                    </span>
<span class="-59477443811309488" onmouseenter="enter('-59477443811309488');" onmouseout="out('-59477443811309488');" style=""> 102      public void addOnSelectionChangedListener(OnSelectionChangedListener o) {                                     </span>
<span class="-2100774570383242241" onmouseenter="enter('-2100774570383242241');" onmouseout="out('-2100774570383242241');" style=""> 103          listeners.add(o);                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 104 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 105 +                                                                                                                  </span>
<span class="7118550889075315064" onmouseenter="enter('7118550889075315064');" onmouseout="out('7118550889075315064');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 106 +    private void setLinkTokenizer() {                                                                             </span>
<span class="540804409753221409" onmouseenter="enter('540804409753221409');" onmouseout="out('540804409753221409');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 107 +        mTokenizer = new LinkTokenizer();                                                                         </span>
<span class="-5685679569396619722" onmouseenter="enter('-5685679569396619722');" onmouseout="out('-5685679569396619722');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 108 +        setOnItemClickListener(this);                                                                             </span>
<span class="5188042449406366660" onmouseenter="enter('5188042449406366660');" onmouseout="out('5188042449406366660');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 109 +        setTokenizer(mTokenizer);                                                                                 </span>
<span class="6747402731313982960" onmouseenter="enter('6747402731313982960');" onmouseout="out('6747402731313982960');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 110 +        setThreshold(1);                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 111 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 112 +                                                                                                                  </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 113 +    @Override                                                                                                     </span>
<span class="-6307048688277996884" onmouseenter="enter('-6307048688277996884');" onmouseout="out('-6307048688277996884');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 114 +    public void onItemClick(AdapterView&lt;?&gt; parent, View view, int position, long id) {                            </span>
<span class="7948482626287429940" onmouseenter="enter('7948482626287429940');" onmouseout="out('7948482626287429940');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 115 +        @SuppressWarnings(&quot;unchecked&quot;)                                                                            </span>
<span class="-2430703696117484912" onmouseenter="enter('-2430703696117484912');" onmouseout="out('-2430703696117484912');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 116 +        Bucket.ObjectCursor&lt;Note&gt; cursor = (Bucket.ObjectCursor&lt;Note&gt;) parent.getAdapter().getItem(position);     </span>
<span class="-1339731364416604074" onmouseenter="enter('-1339731364416604074');" onmouseout="out('-1339731364416604074');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 117 +        String key = cursor.getString(cursor.getColumnIndex(Note.KEY_PROPERTY)).replace(&quot;note&quot;, &quot;&quot;);              </span>
<span class="-5413912739011752532" onmouseenter="enter('-5413912739011752532');" onmouseout="out('-5413912739011752532');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 118 +        String text = SimplenoteLinkify.getNoteLink(key);                                                         </span>
<span class="-6283161434129042153" onmouseenter="enter('-6283161434129042153');" onmouseout="out('-6283161434129042153');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 119 +        int start = Math.max(getSelectionStart(), 0);                                                             </span>
<span class="-5812761034589287295" onmouseenter="enter('-5812761034589287295');" onmouseout="out('-5812761034589287295');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 120 +        int end = Math.max(getSelectionEnd(), 0);                                                                 </span>
<span class="-5970569984167246213" onmouseenter="enter('-5970569984167246213');" onmouseout="out('-5970569984167246213');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 121 +        getEditableText().replace(Math.min(start, end), Math.max(start, end), text, 0, text.length());            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 122      }                                                                                                             </span>
<span  style=""> 123                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 124      @Override                                                                                                     </span>
<span class="9204734548608604374" onmouseenter="enter('9204734548608604374');" onmouseout="out('9204734548608604374');" style=""> 125      protected void onSelectionChanged(int selStart, int selEnd) {                                                 </span>
<span class="9084036534089177006" onmouseenter="enter('9084036534089177006');" onmouseout="out('9084036534089177006');" style=""> 126          super.onSelectionChanged(selStart, selEnd);                                                               </span>
<span class="1091766479730821238" onmouseenter="enter('1091766479730821238');" onmouseout="out('1091766479730821238');" style=""> 127          if (listeners != null) {                                                                                  </span>
<span class="2531271156481149344" onmouseenter="enter('2531271156481149344');" onmouseout="out('2531271156481149344');" style=""> 128              for (OnSelectionChangedListener l : listeners)                                                        </span>
<span class="-7270494200827421729" onmouseenter="enter('-7270494200827421729');" onmouseout="out('-7270494200827421729');" style=""> 129                  l.onSelectionChanged(selStart, selEnd);                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 130          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 131      }                                                                                                             </span>
<span  style=""> 132                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 133      @Override                                                                                                     </span>
<span class="-8866382987303008115" onmouseenter="enter('-8866382987303008115');" onmouseout="out('-8866382987303008115');" style=""> 134      public boolean onKeyPreIme(int keyCode, KeyEvent event) {                                                     </span>
<span class="-7860565181348615145" onmouseenter="enter('-7860565181348615145');" onmouseout="out('-7860565181348615145');" style=""> 135          if (event.getKeyCode() == KeyEvent.KEYCODE_BACK) {                                                        </span>
<span class="351273221058910218" onmouseenter="enter('351273221058910218');" onmouseout="out('351273221058910218');" style=""> 136              clearFocus();                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 137          }                                                                                                         </span>
<span  style=""> 138                                                                                                                    </span>
<span class="-1286123639299516067" onmouseenter="enter('-1286123639299516067');" onmouseout="out('-1286123639299516067');" style=""> 139          return super.onKeyPreIme(keyCode, event);                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 140      }                                                                                                             </span>
<span  style=""> 141                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 142      @Override                                                                                                     </span>
<span class="-6350469524661550536" onmouseenter="enter('-6350469524661550536');" onmouseout="out('-6350469524661550536');" style=""> 143      protected void onFocusChanged(boolean focused, int direction, Rect previouslyFocusedRect) {                   </span>
<span class="-3879914196590028915" onmouseenter="enter('-3879914196590028915');" onmouseout="out('-3879914196590028915');" style=""> 144          if (focused) {                                                                                            </span>
<span class="-5153257938979319281" onmouseenter="enter('-5153257938979319281');" onmouseout="out('-5153257938979319281');" style=""> 145              setCursorVisible(true);                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 146          }                                                                                                         </span>
<span  style=""> 147                                                                                                                    </span>
<span class="-3061316988982909646" onmouseenter="enter('-3061316988982909646');" onmouseout="out('-3061316988982909646');" style=""> 148          super.onFocusChanged(focused, direction, previouslyFocusedRect);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 149      }                                                                                                             </span>
<span  style=""> 150                                                                                                                    </span>
<span class="4904364548788344608" onmouseenter="enter('4904364548788344608');" onmouseout="out('4904364548788344608');" style=""> 151      // Updates the ImageSpan drawable to the new checked state                                                    </span>
<span class="1702464047281652539" onmouseenter="enter('1702464047281652539');" onmouseout="out('1702464047281652539');" style=""> 152      public void toggleCheckbox(final CheckableSpan checkableSpan) {                                               </span>
<span class="6590259663964917636" onmouseenter="enter('6590259663964917636');" onmouseout="out('6590259663964917636');" style=""> 153          setCursorVisible(false);                                                                                  </span>
<span  style=""> 154                                                                                                                    </span>
<span class="-1090656868967804943" onmouseenter="enter('-1090656868967804943');" onmouseout="out('-1090656868967804943');" style=""> 155          final Editable editable = getText();                                                                      </span>
<span  style=""> 156                                                                                                                    </span>
<span class="2794490867551519784" onmouseenter="enter('2794490867551519784');" onmouseout="out('2794490867551519784');" style=""> 157          final int checkboxStart = editable.getSpanStart(checkableSpan);                                           </span>
<span class="-5528412093877694659" onmouseenter="enter('-5528412093877694659');" onmouseout="out('-5528412093877694659');" style=""> 158          final int checkboxEnd = editable.getSpanEnd(checkableSpan);                                               </span>
<span  style=""> 159                                                                                                                    </span>
<span class="-6572749467453395280" onmouseenter="enter('-6572749467453395280');" onmouseout="out('-6572749467453395280');" style=""> 160          final int selectionStart = getSelectionStart();                                                           </span>
<span class="5061259277362521056" onmouseenter="enter('5061259277362521056');" onmouseout="out('5061259277362521056');" style=""> 161          final int selectionEnd = getSelectionEnd();                                                               </span>
<span  style=""> 162                                                                                                                    </span>
<span class="2426952674624776126" onmouseenter="enter('2426952674624776126');" onmouseout="out('2426952674624776126');" style=""> 163          final ImageSpan[] imageSpans = editable.getSpans(checkboxStart, checkboxEnd, ImageSpan.class);            </span>
<span class="3424137973787154724" onmouseenter="enter('3424137973787154724');" onmouseout="out('3424137973787154724');" style=""> 164          if (imageSpans.length &gt; 0) {                                                                              </span>
<span class="-650120241318912925" onmouseenter="enter('-650120241318912925');" onmouseout="out('-650120241318912925');" style=""> 165              // ImageSpans are static, so we need to remove the old one and replace :|                             </span>
<span class="3096208024950867570" onmouseenter="enter('3096208024950867570');" onmouseout="out('3096208024950867570');" style=""> 166              Drawable iconDrawable = ContextCompat.getDrawable(getContext(),                                       </span>
<span class="6549537428500511361" onmouseenter="enter('6549537428500511361');" onmouseout="out('6549537428500511361');" style=""> 167                      checkableSpan.isChecked()                                                                     </span>
<span class="1475528954993506852" onmouseenter="enter('1475528954993506852');" onmouseout="out('1475528954993506852');" style=""> 168                              ? R.drawable.ic_checkbox_checked_24px                                                 </span>
<span class="919975553509049414" onmouseenter="enter('919975553509049414');" onmouseout="out('919975553509049414');" style=""> 169                              : R.drawable.ic_checkbox_unchecked_24px);                                             </span>
<span class="-4575840480157011089" onmouseenter="enter('-4575840480157011089');" onmouseout="out('-4575840480157011089');" style=""><abbr title=" 170              iconDrawable = DrawableUtils.tintDrawableWithResource(getContext(), iconDrawable, R.color.text_title_disabled);"> 170              iconDrawable = DrawableUtils.tintDrawableWithResource(getContext(), iconDrawable, R.color.text_title_d🔵</abbr></span>
<span class="350955667428051936" onmouseenter="enter('350955667428051936');" onmouseout="out('350955667428051936');" style=""> 171              int iconSize = DisplayUtils.getChecklistIconSize(getContext());                                       </span>
<span class="2517609942364691225" onmouseenter="enter('2517609942364691225');" onmouseout="out('2517609942364691225');" style=""> 172              iconDrawable.setBounds(0, 0, iconSize, iconSize);                                                     </span>
<span class="1660574638142231511" onmouseenter="enter('1660574638142231511');" onmouseout="out('1660574638142231511');" style=""> 173              final CenteredImageSpan newImageSpan = new CenteredImageSpan(getContext(), iconDrawable);             </span>
<span class="5002906591139078644" onmouseenter="enter('5002906591139078644');" onmouseout="out('5002906591139078644');" style=""> 174              new Handler().post(new Runnable() {                                                                   </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 175                  @Override                                                                                         </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 176                  public void run() {                                                                               </span>
<span class="8105183574639194653" onmouseenter="enter('8105183574639194653');" onmouseout="out('8105183574639194653');" style=""> 177                      editable.setSpan(newImageSpan, checkboxStart, checkboxEnd, Spanned.SPAN_EXCLUSIVE_EXCLUSIVE); </span>
<span class="7563639754547712576" onmouseenter="enter('7563639754547712576');" onmouseout="out('7563639754547712576');" style=""> 178                      editable.removeSpan(imageSpans[0]);                                                           </span>
<span class="-1772473758449618286" onmouseenter="enter('-1772473758449618286');" onmouseout="out('-1772473758449618286');" style=""> 179                      fixLineSpacing();                                                                             </span>
<span  style=""> 180                                                                                                                    </span>
<span class="-3445748522530054247" onmouseenter="enter('-3445748522530054247');" onmouseout="out('-3445748522530054247');" style=""> 181                      // Restore the selection                                                                      </span>
<span class="530073190084792975" onmouseenter="enter('530073190084792975');" onmouseout="out('530073190084792975');" style=""> 182                      if (selectionStart &gt;= 0                                                                       </span>
<span class="-405023996198629042" onmouseenter="enter('-405023996198629042');" onmouseout="out('-405023996198629042');" style=""> 183                              &amp;&amp; selectionStart &lt;= editable.length()                                                </span>
<span class="229632755727724018" onmouseenter="enter('229632755727724018');" onmouseout="out('229632755727724018');" style=""> 184                              &amp;&amp; selectionEnd &lt;= editable.length() &amp;&amp; hasFocus()) {                                 </span>
<span class="-5633353852558776206" onmouseenter="enter('-5633353852558776206');" onmouseout="out('-5633353852558776206');" style=""> 185                          setSelection(selectionStart, selectionEnd);                                               </span>
<span class="-5153257938979319281" onmouseenter="enter('-5153257938979319281');" onmouseout="out('-5153257938979319281');" style=""> 186                          setCursorVisible(true);                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 187                      }                                                                                             </span>
<span  style=""> 188                                                                                                                    </span>
<span class="1425396247006298539" onmouseenter="enter('1425396247006298539');" onmouseout="out('1425396247006298539');" style=""> 189                      if (mOnCheckboxToggledListener != null) {                                                     </span>
<span class="-2776571883490751786" onmouseenter="enter('-2776571883490751786');" onmouseout="out('-2776571883490751786');" style=""> 190                          mOnCheckboxToggledListener.onCheckboxToggled();                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 191                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 192                  }                                                                                                 </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 193              });                                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 194          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 195      }                                                                                                             </span>
<span  style=""> 196                                                                                                                    </span>
<span class="-5129075646964696371" onmouseenter="enter('-5129075646964696371');" onmouseout="out('-5129075646964696371');" style=""> 197      // Returns the line position of the text cursor                                                               </span>
<span class="-4790209518368575529" onmouseenter="enter('-4790209518368575529');" onmouseout="out('-4790209518368575529');" style=""> 198      private int getCurrentCursorLine() {                                                                          </span>
<span class="-8708010820158817009" onmouseenter="enter('-8708010820158817009');" onmouseout="out('-8708010820158817009');" style=""> 199          int selectionStart = getSelectionStart();                                                                 </span>
<span class="-9041693021121574938" onmouseenter="enter('-9041693021121574938');" onmouseout="out('-9041693021121574938');" style=""> 200          Layout layout = getLayout();                                                                              </span>
<span  style=""> 201                                                                                                                    </span>
<span class="-3402438836469275129" onmouseenter="enter('-3402438836469275129');" onmouseout="out('-3402438836469275129');" style=""> 202          if (!(selectionStart == -1)) {                                                                            </span>
<span class="-5607640624285366578" onmouseenter="enter('-5607640624285366578');" onmouseout="out('-5607640624285366578');" style=""> 203              return layout.getLineForOffset(selectionStart);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 204          }                                                                                                         </span>
<span  style=""> 205                                                                                                                    </span>
<span class="-8269198090232257590" onmouseenter="enter('-8269198090232257590');" onmouseout="out('-8269198090232257590');" style=""> 206          return 0;                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 207      }                                                                                                             </span>
<span  style=""> 208                                                                                                                    </span>
<span class="-2056093237925143337" onmouseenter="enter('-2056093237925143337');" onmouseout="out('-2056093237925143337');" style=""> 209      public void insertChecklist() {                                                                               </span>
<span class="4507197880212123913" onmouseenter="enter('4507197880212123913');" onmouseout="out('4507197880212123913');" style=""> 210          int start, end;                                                                                           </span>
<span class="-47193053300540183" onmouseenter="enter('-47193053300540183');" onmouseout="out('-47193053300540183');" style=""> 211          int lineNumber = getCurrentCursorLine();                                                                  </span>
<span class="5931814074513814524" onmouseenter="enter('5931814074513814524');" onmouseout="out('5931814074513814524');" style=""> 212          start = getLayout().getLineStart(lineNumber);                                                             </span>
<span  style=""> 213                                                                                                                    </span>
<span class="4849153140254661183" onmouseenter="enter('4849153140254661183');" onmouseout="out('4849153140254661183');" style=""> 214          if (getSelectionEnd() &gt; getSelectionStart() &amp;&amp; !selectionIsOnSameLine()) {                                </span>
<span class="-2157237143863252877" onmouseenter="enter('-2157237143863252877');" onmouseout="out('-2157237143863252877');" style=""> 215              end = getSelectionEnd();                                                                              </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 216          } else {                                                                                                  </span>
<span class="2502740913562218300" onmouseenter="enter('2502740913562218300');" onmouseout="out('2502740913562218300');" style=""> 217              end = getLayout().getLineEnd(lineNumber);                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 218          }                                                                                                         </span>
<span  style=""> 219                                                                                                                    </span>
<span class="2155198360249988636" onmouseenter="enter('2155198360249988636');" onmouseout="out('2155198360249988636');" style=""> 220          SpannableStringBuilder workingString = new SpannableStringBuilder(getText().subSequence(start, end));     </span>
<span class="-3429280970080248112" onmouseenter="enter('-3429280970080248112');" onmouseout="out('-3429280970080248112');" style=""> 221          Editable editable = getText();                                                                            </span>
<span class="-1786745955335503454" onmouseenter="enter('-1786745955335503454');" onmouseout="out('-1786745955335503454');" style=""> 222          if (editable.length() &lt; start || editable.length() &lt; end) {                                               </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 223              return;                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 224          }                                                                                                         </span>
<span  style=""> 225                                                                                                                    </span>
<span class="-4021007956188151859" onmouseenter="enter('-4021007956188151859');" onmouseout="out('-4021007956188151859');" style=""> 226          int previousSelection = getSelectionStart();                                                              </span>
<span class="-7401262641884842036" onmouseenter="enter('-7401262641884842036');" onmouseout="out('-7401262641884842036');" style=""> 227          CheckableSpan[] checkableSpans = workingString.getSpans(0, workingString.length(), CheckableSpan.class);  </span>
<span class="-3983435901659757897" onmouseenter="enter('-3983435901659757897');" onmouseout="out('-3983435901659757897');" style=""> 228          if (checkableSpans.length &gt; 0) {                                                                          </span>
<span class="-1723631309680670098" onmouseenter="enter('-1723631309680670098');" onmouseout="out('-1723631309680670098');" style=""> 229              // Remove any CheckableSpans found                                                                    </span>
<span class="8606250068555850418" onmouseenter="enter('8606250068555850418');" onmouseout="out('8606250068555850418');" style=""> 230              for (CheckableSpan span: checkableSpans) {                                                            </span>
<span class="-8209396112528216299" onmouseenter="enter('-8209396112528216299');" onmouseout="out('-8209396112528216299');" style=""> 231                  workingString.replace(                                                                            </span>
<span class="7365374273051143475" onmouseenter="enter('7365374273051143475');" onmouseout="out('7365374273051143475');" style=""> 232                          workingString.getSpanStart(span),                                                         </span>
<span class="5673880950278913259" onmouseenter="enter('5673880950278913259');" onmouseout="out('5673880950278913259');" style=""> 233                          workingString.getSpanEnd(span) + 1,                                                       </span>
<span class="7887690425633568697" onmouseenter="enter('7887690425633568697');" onmouseout="out('7887690425633568697');" style=""> 234                          &quot;&quot;                                                                                        </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 235                  );                                                                                                </span>
<span class="-7905663944685048412" onmouseenter="enter('-7905663944685048412');" onmouseout="out('-7905663944685048412');" style=""> 236                  workingString.removeSpan(span);                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 237              }                                                                                                     </span>
<span  style=""> 238                                                                                                                    </span>
<span class="1818093574225738447" onmouseenter="enter('1818093574225738447');" onmouseout="out('1818093574225738447');" style=""> 239              editable.replace(start, end, workingString);                                                          </span>
<span  style=""> 240                                                                                                                    </span>
<span class="559052113481581758" onmouseenter="enter('559052113481581758');" onmouseout="out('559052113481581758');" style=""> 241              if (checkableSpans.length == 1) {                                                                     </span>
<span class="-811974177834571960" onmouseenter="enter('-811974177834571960');" onmouseout="out('-811974177834571960');" style=""> 242                  int newSelection = Math.max(previousSelection - CHECKBOX_LENGTH, 0);                              </span>
<span class="1548041209841422053" onmouseenter="enter('1548041209841422053');" onmouseout="out('1548041209841422053');" style=""> 243                  if (editable.length() &gt;= newSelection) {                                                          </span>
<span class="-1551928067227182439" onmouseenter="enter('-1551928067227182439');" onmouseout="out('-1551928067227182439');" style=""> 244                      setSelection(newSelection);                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 245                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 246              }                                                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 247          } else {                                                                                                  </span>
<span class="7908237664339315590" onmouseenter="enter('7908237664339315590');" onmouseout="out('7908237664339315590');" style=""> 248              // Insert a checklist for each line                                                                   </span>
<span class="9092008481531189309" onmouseenter="enter('9092008481531189309');" onmouseout="out('9092008481531189309');" style=""> 249              String[] lines = workingString.toString().split(&quot;(?&lt;=\n)&quot;);                                           </span>
<span class="-2021014457160624880" onmouseenter="enter('-2021014457160624880');" onmouseout="out('-2021014457160624880');" style=""> 250              StringBuilder resultString = new StringBuilder();                                                     </span>
<span  style=""> 251                                                                                                                    </span>
<span class="1824047840691841029" onmouseenter="enter('1824047840691841029');" onmouseout="out('1824047840691841029');" style=""> 252              for (String lineString: lines) {                                                                      </span>
<span class="2358811559308129106" onmouseenter="enter('2358811559308129106');" onmouseout="out('2358811559308129106');" style=""> 253                  // Preserve the spaces before the text                                                            </span>
<span class="-976435609607935349" onmouseenter="enter('-976435609607935349');" onmouseout="out('-976435609607935349');" style=""> 254                  int leadingSpaceCount;                                                                            </span>
<span class="-2007073157338218983" onmouseenter="enter('-2007073157338218983');" onmouseout="out('-2007073157338218983');" style=""> 255                  if (lineString.trim().length() == 0) {                                                            </span>
<span class="1650658955318262016" onmouseenter="enter('1650658955318262016');" onmouseout="out('1650658955318262016');" style=""> 256                      // Only whitespace content, get count of spaces                                               </span>
<span class="2598856147688027045" onmouseenter="enter('2598856147688027045');" onmouseout="out('2598856147688027045');" style=""> 257                      leadingSpaceCount = lineString.length() - lineString.replaceAll(&quot; &quot;, &quot;&quot;).length();            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 258                  } else {                                                                                          </span>
<span class="3037156392896338412" onmouseenter="enter('3037156392896338412');" onmouseout="out('3037156392896338412');" style=""> 259                      // Get count of spaces up to first non-whitespace character                                   </span>
<span class="-2037575593720791721" onmouseenter="enter('-2037575593720791721');" onmouseout="out('-2037575593720791721');" style=""> 260                      leadingSpaceCount = lineString.indexOf(lineString.trim());                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 261                  }                                                                                                 </span>
<span  style=""> 262                                                                                                                    </span>
<span class="1113723887572128376" onmouseenter="enter('1113723887572128376');" onmouseout="out('1113723887572128376');" style=""> 263                  if (leadingSpaceCount &gt; 0) {                                                                      </span>
<span class="-4607277845227497529" onmouseenter="enter('-4607277845227497529');" onmouseout="out('-4607277845227497529');" style=""> 264                      resultString.append(new String(new char[leadingSpaceCount]).replace(&#x27;\0&#x27;, &#x27; &#x27;));              </span>
<span class="1014609549743804890" onmouseenter="enter('1014609549743804890');" onmouseout="out('1014609549743804890');" style=""> 265                      lineString = lineString.substring(leadingSpaceCount);                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 266                  }                                                                                                 </span>
<span  style=""> 267                                                                                                                    </span>
<span class="-4759602698755112129" onmouseenter="enter('-4759602698755112129');" onmouseout="out('-4759602698755112129');" style=""> 268                  resultString                                                                                      </span>
<span class="-6300937305952313219" onmouseenter="enter('-6300937305952313219');" onmouseout="out('-6300937305952313219');" style=""> 269                          .append(ChecklistUtils.UNCHECKED_MARKDOWN)                                                </span>
<span class="-7012949866063989115" onmouseenter="enter('-7012949866063989115');" onmouseout="out('-7012949866063989115');" style=""> 270                          .append(&quot; &quot;)                                                                              </span>
<span class="-2140099013154536267" onmouseenter="enter('-2140099013154536267');" onmouseout="out('-2140099013154536267');" style=""> 271                          .append(lineString);                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 272              }                                                                                                     </span>
<span  style=""> 273                                                                                                                    </span>
<span class="327663848358659642" onmouseenter="enter('327663848358659642');" onmouseout="out('327663848358659642');" style=""> 274              editable.replace(start, end, resultString);                                                           </span>
<span  style=""> 275                                                                                                                    </span>
<span class="-7244042633242525084" onmouseenter="enter('-7244042633242525084');" onmouseout="out('-7244042633242525084');" style=""> 276              int newSelection = Math.max(previousSelection, 0) + (lines.length * CHECKBOX_LENGTH);                 </span>
<span class="1548041209841422053" onmouseenter="enter('1548041209841422053');" onmouseout="out('1548041209841422053');" style=""> 277              if (editable.length() &gt;= newSelection) {                                                              </span>
<span class="-1551928067227182439" onmouseenter="enter('-1551928067227182439');" onmouseout="out('-1551928067227182439');" style=""> 278                  setSelection(newSelection);                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 279              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 280          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 281      }                                                                                                             </span>
<span  style=""> 282                                                                                                                    </span>
<span class="-1068085743919359847" onmouseenter="enter('-1068085743919359847');" onmouseout="out('-1068085743919359847');" style=""> 283      // Returns true if the current editor selection is on the same line                                           </span>
<span class="-1322680323963324573" onmouseenter="enter('-1322680323963324573');" onmouseout="out('-1322680323963324573');" style=""> 284      private boolean selectionIsOnSameLine() {                                                                     </span>
<span class="-8708010820158817009" onmouseenter="enter('-8708010820158817009');" onmouseout="out('-8708010820158817009');" style=""> 285          int selectionStart = getSelectionStart();                                                                 </span>
<span class="-8399501927910381124" onmouseenter="enter('-8399501927910381124');" onmouseout="out('-8399501927910381124');" style=""> 286          int selectionEnd = getSelectionEnd();                                                                     </span>
<span class="-9041693021121574938" onmouseenter="enter('-9041693021121574938');" onmouseout="out('-9041693021121574938');" style=""> 287          Layout layout = getLayout();                                                                              </span>
<span  style=""> 288                                                                                                                    </span>
<span class="-5006678790845707461" onmouseenter="enter('-5006678790845707461');" onmouseout="out('-5006678790845707461');" style=""> 289          if (selectionStart &gt;= 0 &amp;&amp; selectionEnd &gt;= 0) {                                                           </span>
<span class="7452975995927250930" onmouseenter="enter('7452975995927250930');" onmouseout="out('7452975995927250930');" style=""> 290              return layout.getLineForOffset(selectionStart) == layout.getLineForOffset(selectionEnd);              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 291          }                                                                                                         </span>
<span  style=""> 292                                                                                                                    </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 293          return false;                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 294      }                                                                                                             </span>
<span  style=""> 295                                                                                                                    </span>
<span class="2245519181968029694" onmouseenter="enter('2245519181968029694');" onmouseout="out('2245519181968029694');" style=""> 296      public void fixLineSpacing() {                                                                                </span>
<span class="3739656730239017857" onmouseenter="enter('3739656730239017857');" onmouseout="out('3739656730239017857');" style=""> 297          // Prevents line heights from compacting                                                                  </span>
<span class="-2883030315986006038" onmouseenter="enter('-2883030315986006038');" onmouseout="out('-2883030315986006038');" style=""> 298          // https://issuetracker.google.com/issues/37009353                                                        </span>
<span class="593486953485328476" onmouseenter="enter('593486953485328476');" onmouseout="out('593486953485328476');" style=""> 299          float lineSpacingExtra = getLineSpacingExtra();                                                           </span>
<span class="-8024412754689478694" onmouseenter="enter('-8024412754689478694');" onmouseout="out('-8024412754689478694');" style=""> 300          float lineSpacingMultiplier = getLineSpacingMultiplier();                                                 </span>
<span class="8227210311807072313" onmouseenter="enter('8227210311807072313');" onmouseout="out('8227210311807072313');" style=""> 301          setLineSpacing(0.0f, 1.0f);                                                                               </span>
<span class="-9061865158009916868" onmouseenter="enter('-9061865158009916868');" onmouseout="out('-9061865158009916868');" style=""> 302          setLineSpacing(lineSpacingExtra, lineSpacingMultiplier);                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 303      }                                                                                                             </span>
<span  style=""> 304                                                                                                                    </span>
<span class="-7557861489858202648" onmouseenter="enter('-7557861489858202648');" onmouseout="out('-7557861489858202648');" style=""> 305      public interface OnSelectionChangedListener {                                                                 </span>
<span class="-2603544447302104250" onmouseenter="enter('-2603544447302104250');" onmouseout="out('-2603544447302104250');" style=""> 306          void onSelectionChanged(int selStart, int selEnd);                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 307      }                                                                                                             </span>
<span  style=""> 308                                                                                                                    </span>
<span class="-2496270541861205859" onmouseenter="enter('-2496270541861205859');" onmouseout="out('-2496270541861205859');" style=""> 309      // Replaces any CheckableSpans with their markdown counterpart (e.g. &#x27;- [ ]&#x27;)                                 </span>
<span class="-3349734715224755384" onmouseenter="enter('-3349734715224755384');" onmouseout="out('-3349734715224755384');" style=""> 310      public String getPlainTextContent() {                                                                         </span>
<span class="-1769659359974524880" onmouseenter="enter('-1769659359974524880');" onmouseout="out('-1769659359974524880');" style=""> 311          if (getText() == null) {                                                                                  </span>
<span class="-8289946804601166879" onmouseenter="enter('-8289946804601166879');" onmouseout="out('-8289946804601166879');" style=""> 312              return &quot;&quot;;                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 313          }                                                                                                         </span>
<span  style=""> 314                                                                                                                    </span>
<span class="-5774176688206725478" onmouseenter="enter('-5774176688206725478');" onmouseout="out('-5774176688206725478');" style=""> 315          SpannableStringBuilder content = new SpannableStringBuilder(getText());                                   </span>
<span class="3967945012021671393" onmouseenter="enter('3967945012021671393');" onmouseout="out('3967945012021671393');" style=""> 316          CheckableSpan[] spans = content.getSpans(0, content.length(), CheckableSpan.class);                       </span>
<span class="3321734155540722629" onmouseenter="enter('3321734155540722629');" onmouseout="out('3321734155540722629');" style=""> 317          for(CheckableSpan span: spans) {                                                                          </span>
<span class="9048125924196956410" onmouseenter="enter('9048125924196956410');" onmouseout="out('9048125924196956410');" style=""> 318              int start = content.getSpanStart(span);                                                               </span>
<span class="7525585125635328254" onmouseenter="enter('7525585125635328254');" onmouseout="out('7525585125635328254');" style=""> 319              int end = content.getSpanEnd(span);                                                                   </span>
<span class="7328134583038878217" onmouseenter="enter('7328134583038878217');" onmouseout="out('7328134583038878217');" style=""> 320              ((Editable) content).replace(                                                                         </span>
<span class="96671177266943526" onmouseenter="enter('96671177266943526');" onmouseout="out('96671177266943526');" style=""> 321                      start,                                                                                        </span>
<span class="-8378543162701826190" onmouseenter="enter('-8378543162701826190');" onmouseout="out('-8378543162701826190');" style=""> 322                      end,                                                                                          </span>
<span class="3531746424024935349" onmouseenter="enter('3531746424024935349');" onmouseout="out('3531746424024935349');" style=""> 323                      span.isChecked() ? ChecklistUtils.CHECKED_MARKDOWN : ChecklistUtils.UNCHECKED_MARKDOWN);      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 324          }                                                                                                         </span>
<span  style=""> 325                                                                                                                    </span>
<span class="-5768072572856737542" onmouseenter="enter('-5768072572856737542');" onmouseout="out('-5768072572856737542');" style=""> 326          return content.toString();                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 327      }                                                                                                             </span>
<span  style=""> 328                                                                                                                    </span>
<span class="-4058542168993639710" onmouseenter="enter('-4058542168993639710');" onmouseout="out('-4058542168993639710');" style=""> 329      // Replaces any CheckableSpans with their markdown preview counterpart (e.g. &#x27;- [\u2a2f]&#x27;)                    </span>
<span class="-4279713333663092916" onmouseenter="enter('-4279713333663092916');" onmouseout="out('-4279713333663092916');" style=""> 330      public String getPreviewTextContent() {                                                                       </span>
<span class="-1769659359974524880" onmouseenter="enter('-1769659359974524880');" onmouseout="out('-1769659359974524880');" style=""> 331          if (getText() == null) {                                                                                  </span>
<span class="-8289946804601166879" onmouseenter="enter('-8289946804601166879');" onmouseout="out('-8289946804601166879');" style=""> 332              return &quot;&quot;;                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 333          }                                                                                                         </span>
<span  style=""> 334                                                                                                                    </span>
<span class="-5774176688206725478" onmouseenter="enter('-5774176688206725478');" onmouseout="out('-5774176688206725478');" style=""> 335          SpannableStringBuilder content = new SpannableStringBuilder(getText());                                   </span>
<span class="3967945012021671393" onmouseenter="enter('3967945012021671393');" onmouseout="out('3967945012021671393');" style=""> 336          CheckableSpan[] spans = content.getSpans(0, content.length(), CheckableSpan.class);                       </span>
<span class="3321734155540722629" onmouseenter="enter('3321734155540722629');" onmouseout="out('3321734155540722629');" style=""> 337          for(CheckableSpan span: spans) {                                                                          </span>
<span class="9048125924196956410" onmouseenter="enter('9048125924196956410');" onmouseout="out('9048125924196956410');" style=""> 338              int start = content.getSpanStart(span);                                                               </span>
<span class="7525585125635328254" onmouseenter="enter('7525585125635328254');" onmouseout="out('7525585125635328254');" style=""> 339              int end = content.getSpanEnd(span);                                                                   </span>
<span class="7328134583038878217" onmouseenter="enter('7328134583038878217');" onmouseout="out('7328134583038878217');" style=""> 340              ((Editable) content).replace(                                                                         </span>
<span class="96671177266943526" onmouseenter="enter('96671177266943526');" onmouseout="out('96671177266943526');" style=""> 341                      start,                                                                                        </span>
<span class="-8378543162701826190" onmouseenter="enter('-8378543162701826190');" onmouseout="out('-8378543162701826190');" style=""> 342                      end,                                                                                          </span>
<span class="-8440602794388940209" onmouseenter="enter('-8440602794388940209');" onmouseout="out('-8440602794388940209');" style=""><abbr title=" 343                      span.isChecked() ? ChecklistUtils.CHECKED_MARKDOWN_PREVIEW : ChecklistUtils.UNCHECKED_MARKDOWN);"> 343                      span.isChecked() ? ChecklistUtils.CHECKED_MARKDOWN_PREVIEW : ChecklistUtils.UNCHECKED_MARKDOWN🔵</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 344          }                                                                                                         </span>
<span  style=""> 345                                                                                                                    </span>
<span class="-5768072572856737542" onmouseenter="enter('-5768072572856737542');" onmouseout="out('-5768072572856737542');" style=""> 346          return content.toString();                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 347      }                                                                                                             </span>
<span  style=""> 348                                                                                                                    </span>
<span  style=""> 349                                                                                                                    </span>
<span class="-8793607864180089375" onmouseenter="enter('-8793607864180089375');" onmouseout="out('-8793607864180089375');" style=""> 350      public void processChecklists() {                                                                             </span>
<span class="-822567654445480874" onmouseenter="enter('-822567654445480874');" onmouseout="out('-822567654445480874');" style=""> 351          if (getText().length() == 0 || getContext() == null) {                                                    </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 352              return;                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 353          }                                                                                                         </span>
<span  style=""> 354                                                                                                                    </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 355          try {                                                                                                     </span>
<span class="-2879977185755091274" onmouseenter="enter('-2879977185755091274');" onmouseout="out('-2879977185755091274');" style=""> 356              ChecklistUtils.addChecklistSpansForRegexAndColor(                                                     </span>
<span class="4777936721428774843" onmouseenter="enter('4777936721428774843');" onmouseout="out('4777936721428774843');" style=""> 357                      getContext(),                                                                                 </span>
<span class="6494562836495618397" onmouseenter="enter('6494562836495618397');" onmouseout="out('6494562836495618397');" style=""> 358                      getText(),                                                                                    </span>
<span class="-5190158693774204825" onmouseenter="enter('-5190158693774204825');" onmouseout="out('-5190158693774204825');" style=""> 359                      ChecklistUtils.CHECKLIST_REGEX_LINES,                                                         </span>
<span class="-183067455432259027" onmouseenter="enter('-183067455432259027');" onmouseout="out('-183067455432259027');" style=""> 360                      R.color.text_title_disabled);                                                                 </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 361          } catch (Exception e) {                                                                                   </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 362              e.printStackTrace();                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 363          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 364      }                                                                                                             </span>
<span  style=""> 365                                                                                                                    </span>
<span class="-7678796331074634227" onmouseenter="enter('-7678796331074634227');" onmouseout="out('-7678796331074634227');" style=""> 366      public void setOnCheckboxToggledListener(OnCheckboxToggledListener listener) {                                </span>
<span class="3565913960515795124" onmouseenter="enter('3565913960515795124');" onmouseout="out('3565913960515795124');" style=""> 367          mOnCheckboxToggledListener = listener;                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 368      }                                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 369  }                                                                                                                 </span></pre></td>
                        </tr>
                    </table>
                </div>
              </body>
            </html>
            