<!DOCTYPE html>
    <html lang="en">
              <head>
                <meta charset="utf-8">
                <title>571</title>
                    <style>
                        #top {
                            height: 48vh;
                            overflow-y: auto;
                        }
                        #bottom {
                            height: 48vh;
                            overflow-y: auto;
                        }
                        .highlighted {
                            background-color: rgba(177, 82, 227, 0.85) !important;
                        }
                    </style>
                    <script>
                        function enter(c) {
                            const lines = document.getElementsByClassName(c);
                            for (let i = 0; i < lines.length; i++) {
                               lines.item(i).classList.add('highlighted');
                            }
                        }
                        function out(c) {
                            const lines = document.getElementsByClassName(c);
                            for (let i = 0; i < lines.length; i++) {
                               lines.item(i).classList.remove('highlighted');
                            }
                        }
                    </script>
              </head>
              <body>
                <span style="height: 4vh">
                    571
                    <a href="570.html">prev</a>
                    <a href="572.html">next</a>
                    <a href="571_chunks.html">chunks</a>
                    <a href="index.html">index</a>
                    Freeyourgadget/Gadgetbridge_377e999067403e44607da42acad81830d090a876_app/src/main/java/nodomain/freeyourgadget/gadgetbridge/devices/miband/MiBand2Coordinator.java
                    <textarea rows=1 onclick='navigator.clipboard.writeText(this.value)'>cd C:\studies\se\mega\git-analyzer-plus\notebooks\debug
del /Q *
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\Freeyourgadget\Gadgetbridge show &quot;377e999067403e44607da42acad81830d090a876:app/src/main/java/nodomain/freeyourgadget/gadgetbridge/devices/miband/MiBand2Coordinator.java&quot; &gt; committed.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\Freeyourgadget\Gadgetbridge show &quot;377e999067403e44607da42acad81830d090a876^1:app/src/main/java/nodomain/freeyourgadget/gadgetbridge/devices/miband/MiBand2Coordinator.java&quot; &gt; ours.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\Freeyourgadget\Gadgetbridge show &quot;377e999067403e44607da42acad81830d090a876^2:app/src/main/java/nodomain/freeyourgadget/gadgetbridge/devices/miband/MiBand2Coordinator.java&quot; &gt; theirs.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\Freeyourgadget\Gadgetbridge show &quot;23c6219cefd54b3322bef63b644c7c2a21272234:app/src/main/java/nodomain/freeyourgadget/gadgetbridge/devices/miband/MiBand2Coordinator.java&quot; &gt; base.java
copy ours.java 1ours.java
copy ours.java 2ours.java
copy theirs.java 1theirs.java
copy theirs.java 2theirs.java
copy base.java 1base.java
copy base.java 2base.java
&quot;C:\Program Files\Java\jdk1.8.0_241\bin\java.exe&quot; -Dfile.encoding=UTF-8 -jar &quot;C:\studies\se\jFSTMerge\build\libs\jFSTMerge-all.jar&quot; C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1ours.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1base.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1theirs.java -o C:\studies\se\mega\git-analyzer-plus\notebooks\debug\jfstmerge.java --show-base
&quot;C:\Program Files\Eclipse Adoptium\jdk-17.0.11.9-hotspot\bin\java.exe&quot; -Dfile.encoding=UTF-8 -jar &quot;C:\studies\se\spork\target\spork-0.5.0-SNAPSHOT.jar&quot; C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2ours.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2base.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2theirs.java -o C:\studies\se\mega\git-analyzer-plus\notebooks\debug\spork.java
del /Q 1*.java
del /Q 2*.java
del /Q jfstmerge.java.merge
</textarea>
                    {strict: [[b]], subset: [[b]]}
                </span>
                <div id="top">

                    <table>
                        <tr>
                            <th>line based (standard git)</th>
                            <th>jfstmerge</th>
                            <th>spork</th>
                        </tr>
                        <tr>
                            <td><pre><span class="6048715529334536325" onmouseenter="enter('6048715529334536325');" onmouseout="out('6048715529334536325');" style="">   1 /*  Copyright (C) 2016-2017 Carsten Pfeiffer                                                             </span>
<span  style="">   2                                                                                                          </span>
<span class="-7759499394858783956" onmouseenter="enter('-7759499394858783956');" onmouseout="out('-7759499394858783956');" style="">   3     This file is part of Gadgetbridge.                                                                   </span>
<span  style="">   4                                                                                                          </span>
<span class="-2647557636279629478" onmouseenter="enter('-2647557636279629478');" onmouseout="out('-2647557636279629478');" style="">   5     Gadgetbridge is free software: you can redistribute it and/or modify                                 </span>
<span class="4878736751218581391" onmouseenter="enter('4878736751218581391');" onmouseout="out('4878736751218581391');" style="">   6     it under the terms of the GNU Affero General Public License as published                             </span>
<span class="-5160078368722358920" onmouseenter="enter('-5160078368722358920');" onmouseout="out('-5160078368722358920');" style="">   7     by the Free Software Foundation, either version 3 of the License, or                                 </span>
<span class="6661789815760177463" onmouseenter="enter('6661789815760177463');" onmouseout="out('6661789815760177463');" style="">   8     (at your option) any later version.                                                                  </span>
<span  style="">   9                                                                                                          </span>
<span class="-6828199977528779968" onmouseenter="enter('-6828199977528779968');" onmouseout="out('-6828199977528779968');" style="">  10     Gadgetbridge is distributed in the hope that it will be useful,                                      </span>
<span class="4883593508173597945" onmouseenter="enter('4883593508173597945');" onmouseout="out('4883593508173597945');" style="">  11     but WITHOUT ANY WARRANTY; without even the implied warranty of                                       </span>
<span class="2300657568347926527" onmouseenter="enter('2300657568347926527');" onmouseout="out('2300657568347926527');" style="">  12     MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the                                        </span>
<span class="4681049817175334681" onmouseenter="enter('4681049817175334681');" onmouseout="out('4681049817175334681');" style="">  13     GNU Affero General Public License for more details.                                                  </span>
<span  style="">  14                                                                                                          </span>
<span class="-3235531360569947201" onmouseenter="enter('-3235531360569947201');" onmouseout="out('-3235531360569947201');" style="">  15     You should have received a copy of the GNU Affero General Public License                             </span>
<span class="-3088444562895398794" onmouseenter="enter('-3088444562895398794');" onmouseout="out('-3088444562895398794');" style="">  16     along with this program.  If not, see &lt;http://www.gnu.org/licenses/&gt;. */                             </span>
<span class="-943603793420973679" onmouseenter="enter('-943603793420973679');" onmouseout="out('-943603793420973679');" style="">  17 package nodomain.freeyourgadget.gadgetbridge.devices.miband;                                             </span>
<span  style="">  18                                                                                                          </span>
<span class="-6548293536248798364" onmouseenter="enter('-6548293536248798364');" onmouseout="out('-6548293536248798364');" style="">  19 import android.annotation.TargetApi;                                                                     </span>
<span class="2859895893394018468" onmouseenter="enter('2859895893394018468');" onmouseout="out('2859895893394018468');" style="">  20 import android.bluetooth.BluetoothDevice;                                                                </span>
<span class="4786958806676392792" onmouseenter="enter('4786958806676392792');" onmouseout="out('4786958806676392792');" style="">  21 import android.bluetooth.le.ScanFilter;                                                                  </span>
<span class="5922045460006936195" onmouseenter="enter('5922045460006936195');" onmouseout="out('5922045460006936195');" style="">  22 import android.content.Context;                                                                          </span>
<span class="-8750621697125156872" onmouseenter="enter('-8750621697125156872');" onmouseout="out('-8750621697125156872');" style="">  23 import android.net.Uri;                                                                                  </span>
<span class="-4549785658871057260" onmouseenter="enter('-4549785658871057260');" onmouseout="out('-4549785658871057260');" style="">  24 import android.os.Build;                                                                                 </span>
<span class="8301908088148850736" onmouseenter="enter('8301908088148850736');" onmouseout="out('8301908088148850736');" style="">  25 import android.os.ParcelUuid;                                                                            </span>
<span class="-2370850629707943459" onmouseenter="enter('-2370850629707943459');" onmouseout="out('-2370850629707943459');" style="">  26 import android.support.annotation.NonNull;                                                               </span>
<span  style="">  27                                                                                                          </span>
<span class="9072327285961251154" onmouseenter="enter('9072327285961251154');" onmouseout="out('9072327285961251154');" style="">  28 import org.slf4j.Logger;                                                                                 </span>
<span class="697043352225962606" onmouseenter="enter('697043352225962606');" onmouseout="out('697043352225962606');" style="">  29 import org.slf4j.LoggerFactory;                                                                          </span>
<span  style="">  30                                                                                                          </span>
<span class="-112105277767313938" onmouseenter="enter('-112105277767313938');" onmouseout="out('-112105277767313938');" style="">  31 import java.util.Collection;                                                                             </span>
<span class="2187055016371707860" onmouseenter="enter('2187055016371707860');" onmouseout="out('2187055016371707860');" style="">  32 import java.util.Collections;                                                                            </span>
<span class="3384353015976675773" onmouseenter="enter('3384353015976675773');" onmouseout="out('3384353015976675773');" style="">  33 import java.util.Set;                                                                                    </span>
<span  style="">  34                                                                                                          </span>
<span class="-8113221927992302576" onmouseenter="enter('-8113221927992302576');" onmouseout="out('-8113221927992302576');" style="">  35 import nodomain.freeyourgadget.gadgetbridge.GBApplication;                                               </span>
<span class="-7198279398549834921" onmouseenter="enter('-7198279398549834921');" onmouseout="out('-7198279398549834921');" style="">  36 import nodomain.freeyourgadget.gadgetbridge.R;                                                           </span>
<span class="3777396069160084413" onmouseenter="enter('3777396069160084413');" onmouseout="out('3777396069160084413');" style="">  37 import nodomain.freeyourgadget.gadgetbridge.devices.InstallHandler;                                      </span>
<span class="-4858662006453759829" onmouseenter="enter('-4858662006453759829');" onmouseout="out('-4858662006453759829');" style="">  38 import nodomain.freeyourgadget.gadgetbridge.devices.SampleProvider;                                      </span>
<span class="3833266035366718204" onmouseenter="enter('3833266035366718204');" onmouseout="out('3833266035366718204');" style="">  39 import nodomain.freeyourgadget.gadgetbridge.devices.miband2.MiBand2FWInstallHandler;                     </span>
<span class="6164643418103516215" onmouseenter="enter('6164643418103516215');" onmouseout="out('6164643418103516215');" style="">  40 import nodomain.freeyourgadget.gadgetbridge.entities.AbstractActivitySample;                             </span>
<span class="804944882642105225" onmouseenter="enter('804944882642105225');" onmouseout="out('804944882642105225');" style="">  41 import nodomain.freeyourgadget.gadgetbridge.entities.DaoSession;                                         </span>
<span class="4836892992022606579" onmouseenter="enter('4836892992022606579');" onmouseout="out('4836892992022606579');" style="">  42 import nodomain.freeyourgadget.gadgetbridge.impl.GBDevice;                                               </span>
<span class="-1351120908834620909" onmouseenter="enter('-1351120908834620909');" onmouseout="out('-1351120908834620909');" style="">  43 import nodomain.freeyourgadget.gadgetbridge.impl.GBDeviceCandidate;                                      </span>
<span class="1593353296711823731" onmouseenter="enter('1593353296711823731');" onmouseout="out('1593353296711823731');" style="">  44 import nodomain.freeyourgadget.gadgetbridge.model.DeviceType;                                            </span>
<span class="-600862318521663319" onmouseenter="enter('-600862318521663319');" onmouseout="out('-600862318521663319');" style="">  45 import nodomain.freeyourgadget.gadgetbridge.util.Prefs;                                                  </span>
<span  style="">  46                                                                                                          </span>
<span class="6355525354884508922" onmouseenter="enter('6355525354884508922');" onmouseout="out('6355525354884508922');" style="">  47 public class MiBand2Coordinator extends MiBandCoordinator {                                              </span>
<span class="8691622485005719178" onmouseenter="enter('8691622485005719178');" onmouseout="out('8691622485005719178');" style="">  48     private static final Logger LOG = LoggerFactory.getLogger(MiBand2Coordinator.class);                 </span>
<span  style="">  49                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  50     @Override                                                                                            </span>
<span class="8140947852819565399" onmouseenter="enter('8140947852819565399');" onmouseout="out('8140947852819565399');" style="">  51     public DeviceType getDeviceType() {                                                                  </span>
<span class="4044714187384175403" onmouseenter="enter('4044714187384175403');" onmouseout="out('4044714187384175403');" style="">  52         return DeviceType.MIBAND2;                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  53     }                                                                                                    </span>
<span  style="">  54                                                                                                          </span>
<span class="5154748246392482767" onmouseenter="enter('5154748246392482767');" onmouseout="out('5154748246392482767');" style="">  55     @NonNull                                                                                             </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  56     @Override                                                                                            </span>
<span class="-6039390701678024163" onmouseenter="enter('-6039390701678024163');" onmouseout="out('-6039390701678024163');" style="">  57     @TargetApi(Build.VERSION_CODES.LOLLIPOP)                                                             </span>
<span class="1062073963528652044" onmouseenter="enter('1062073963528652044');" onmouseout="out('1062073963528652044');" style="">  58     public Collection&lt;? extends ScanFilter&gt; createBLEScanFilters() {                                     </span>
<span class="3472321620147933113" onmouseenter="enter('3472321620147933113');" onmouseout="out('3472321620147933113');" style="">  59         ParcelUuid mi2Service = new ParcelUuid(MiBandService.UUID_SERVICE_MIBAND2_SERVICE);              </span>
<span class="614125468348224145" onmouseenter="enter('614125468348224145');" onmouseout="out('614125468348224145');" style="">  60         ScanFilter filter = new ScanFilter.Builder().setServiceUuid(mi2Service).build();                 </span>
<span class="3209388754744013536" onmouseenter="enter('3209388754744013536');" onmouseout="out('3209388754744013536');" style="">  61         return Collections.singletonList(filter);                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  62     }                                                                                                    </span>
<span  style="">  63                                                                                                          </span>
<span class="5154748246392482767" onmouseenter="enter('5154748246392482767');" onmouseout="out('5154748246392482767');" style="">  64     @NonNull                                                                                             </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  65     @Override                                                                                            </span>
<span class="311137942692300687" onmouseenter="enter('311137942692300687');" onmouseout="out('311137942692300687');" style="">  66     public DeviceType getSupportedType(GBDeviceCandidate candidate) {                                    </span>
<span class="5120059449065770861" onmouseenter="enter('5120059449065770861');" onmouseout="out('5120059449065770861');" style="">  67         if (candidate.supportsService(MiBand2Service.UUID_SERVICE_MIBAND2_SERVICE)) {                    </span>
<span class="4044714187384175403" onmouseenter="enter('4044714187384175403');" onmouseout="out('4044714187384175403');" style="">  68             return DeviceType.MIBAND2;                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  69         }                                                                                                </span>
<span  style="">  70                                                                                                          </span>
<span class="8752124683498057440" onmouseenter="enter('8752124683498057440');" onmouseout="out('8752124683498057440');" style="">  71         // and a heuristic for now                                                                       </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">  72         try {                                                                                            </span>
<span class="4412840096827679545" onmouseenter="enter('4412840096827679545');" onmouseout="out('4412840096827679545');" style="">  73             BluetoothDevice device = candidate.getDevice();                                              </span>
<span class="8985855808024070407" onmouseenter="enter('8985855808024070407');" onmouseout="out('8985855808024070407');" style="">  74 //            if (isHealthWearable(device)) {                                                            </span>
<span class="-276642680779247200" onmouseenter="enter('-276642680779247200');" onmouseout="out('-276642680779247200');" style="">  75                 String name = device.getName();                                                          </span>
<span class="986746676450568173" onmouseenter="enter('986746676450568173');" onmouseout="out('986746676450568173');" style="">  76                 if (name != null &amp;&amp; name.equalsIgnoreCase(MiBandConst.MI_BAND2_NAME)) {                  </span>
<span class="4044714187384175403" onmouseenter="enter('4044714187384175403');" onmouseout="out('4044714187384175403');" style="">  77                     return DeviceType.MIBAND2;                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  78                 }                                                                                        </span>
<span class="1818990376901269570" onmouseenter="enter('1818990376901269570');" onmouseout="out('1818990376901269570');" style="">  79 //            }                                                                                          </span>
<span class="2273034781883266774" onmouseenter="enter('2273034781883266774');" onmouseout="out('2273034781883266774');" style="">  80         } catch (Exception ex) {                                                                         </span>
<span class="8101729304130935458" onmouseenter="enter('8101729304130935458');" onmouseout="out('8101729304130935458');" style="">  81             LOG.error(&quot;unable to check device support&quot;, ex);                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  82         }                                                                                                </span>
<span class="2733059175620106263" onmouseenter="enter('2733059175620106263');" onmouseout="out('2733059175620106263');" style="">  83         return DeviceType.UNKNOWN;                                                                       </span>
<span  style="">  84                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  85     }                                                                                                    </span>
<span  style="">  86                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  87     @Override                                                                                            </span>
<span class="-2665941594348225828" onmouseenter="enter('-2665941594348225828');" onmouseout="out('-2665941594348225828');" style="">  88     public boolean supportsHeartRateMeasurement(GBDevice device) {                                       </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">  89         return true;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  90     }                                                                                                    </span>
<span  style="">  91                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  92     @Override                                                                                            </span>
<span class="-3239484548915931264" onmouseenter="enter('-3239484548915931264');" onmouseout="out('-3239484548915931264');" style="">  93     public boolean supportsAlarmConfiguration() {                                                        </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">  94         return true;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  95     }                                                                                                    </span>
<span  style="">  96                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  97     @Override                                                                                            </span>
<span class="-4700729772201748614" onmouseenter="enter('-4700729772201748614');" onmouseout="out('-4700729772201748614');" style="">  98     public boolean supportsActivityDataFetching() {                                                      </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">  99         return true;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 100     }                                                                                                    </span>
<span  style=""> 101                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 102     @Override                                                                                            </span>
<span class="370222890247546480" onmouseenter="enter('370222890247546480');" onmouseout="out('370222890247546480');" style=""><abbr title=" 103     public SampleProvider&lt;? extends AbstractActivitySample&gt; getSampleProvider(GBDevice device, DaoSession session) {"> 103     public SampleProvider&lt;? extends AbstractActivitySample&gt; getSampleProvider(GBDevice device, DaoSession🔵</abbr></span>
<span class="4933711155334593387" onmouseenter="enter('4933711155334593387');" onmouseout="out('4933711155334593387');" style=""> 104         return new MiBand2SampleProvider(device, session);                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 105     }                                                                                                    </span>
<span  style=""> 106                                                                                                          </span>
<span class="-8632607901807438765" onmouseenter="enter('-8632607901807438765');" onmouseout="out('-8632607901807438765');" style=""> 107     public static DateTimeDisplay getDateDisplay(Context context) throws IllegalArgumentException {      </span>
<span class="7576815700871527587" onmouseenter="enter('7576815700871527587');" onmouseout="out('7576815700871527587');" style=""> 108         Prefs prefs = GBApplication.getPrefs();                                                          </span>
<span class="6514876670292154071" onmouseenter="enter('6514876670292154071');" onmouseout="out('6514876670292154071');" style=""> 109         String dateFormatTime = context.getString(R.string.p_dateformat_time);                           </span>
<span class="-5321922516023131309" onmouseenter="enter('-5321922516023131309');" onmouseout="out('-5321922516023131309');" style=""> 110         if (dateFormatTime.equals(prefs.getString(MiBandConst.PREF_MI2_DATEFORMAT, dateFormatTime))) {   </span>
<span class="7167046866858259360" onmouseenter="enter('7167046866858259360');" onmouseout="out('7167046866858259360');" style=""> 111             return DateTimeDisplay.TIME;                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 112         }                                                                                                </span>
<span class="-6433196943226128018" onmouseenter="enter('-6433196943226128018');" onmouseout="out('-6433196943226128018');" style=""> 113         return DateTimeDisplay.DATE_TIME;                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 114     }                                                                                                    </span>
<span  style=""> 115                                                                                                          </span>
<span class="-1845883012642522582" onmouseenter="enter('-1845883012642522582');" onmouseout="out('-1845883012642522582');" style=""> 116     public static boolean getActivateDisplayOnLiftWrist() {                                              </span>
<span class="7576815700871527587" onmouseenter="enter('7576815700871527587');" onmouseout="out('7576815700871527587');" style=""> 117         Prefs prefs = GBApplication.getPrefs();                                                          </span>
<span class="2690807457904438786" onmouseenter="enter('2690807457904438786');" onmouseout="out('2690807457904438786');" style=""> 118         return prefs.getBoolean(MiBandConst.PREF_MI2_ACTIVATE_DISPLAY_ON_LIFT, true);                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 119     }                                                                                                    </span>
<span  style=""> 120                                                                                                          </span>
<span class="-4667942192763773056" onmouseenter="enter('-4667942192763773056');" onmouseout="out('-4667942192763773056');" style=""> 121 &lt;&lt;&lt;&lt;&lt;&lt;&lt; GitAnalyzerPlus_ours                                                                             </span>
<span class="6077770071851493642" onmouseenter="enter('6077770071851493642');" onmouseout="out('6077770071851493642');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 122     public static Set&lt;String&gt; getDisplayItems() {                                                        </span>
<span class="7576815700871527587" onmouseenter="enter('7576815700871527587');" onmouseout="out('7576815700871527587');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 123         Prefs prefs = GBApplication.getPrefs();                                                          </span>
<span class="-1229941541205968221" onmouseenter="enter('-1229941541205968221');" onmouseout="out('-1229941541205968221');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 124         return prefs.getStringSet(MiBandConst.PREF_MI2_DISPLAY_ITEMS, null);                             </span>
<span class="6741223626729319096" onmouseenter="enter('6741223626729319096');" onmouseout="out('6741223626729319096');" style=""> 125 ||||||| GitAnalyzerPlus_base                                                                             </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 126     @Override                                                                                            </span>
<span class="186159943511755526" onmouseenter="enter('186159943511755526');" onmouseout="out('186159943511755526');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 127     public InstallHandler findInstallHandler(Uri uri, Context context) {                                 </span>
<span class="-7718979645570897162" onmouseenter="enter('-7718979645570897162');" onmouseout="out('-7718979645570897162');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 128         MiBand2FWInstallHandler handler = new MiBand2FWInstallHandler(uri, context);                     </span>
<span class="1169416982466888744" onmouseenter="enter('1169416982466888744');" onmouseout="out('1169416982466888744');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 129         return handler.isValid() ? handler : null;                                                       </span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style=""> 130 =======                                                                                                  </span>
<span class="5843437346679186542" onmouseenter="enter('5843437346679186542');" onmouseout="out('5843437346679186542');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 131     public static boolean getRotateWristToSwitchInfo() {                                                 </span>
<span class="7576815700871527587" onmouseenter="enter('7576815700871527587');" onmouseout="out('7576815700871527587');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 132         Prefs prefs = GBApplication.getPrefs();                                                          </span>
<span class="-5591112544710653237" onmouseenter="enter('-5591112544710653237');" onmouseout="out('-5591112544710653237');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 133         return prefs.getBoolean(MiBandConst.PREF_MI2_ROTATE_WRIST_TO_SWITCH_INFO, false);                </span>
<span class="-1382546150375666264" onmouseenter="enter('-1382546150375666264');" onmouseout="out('-1382546150375666264');" style=""> 134 &gt;&gt;&gt;&gt;&gt;&gt;&gt; GitAnalyzerPlus_theirs                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 135     }                                                                                                    </span>
<span  style=""> 136                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 137     @Override                                                                                            </span>
<span class="186159943511755526" onmouseenter="enter('186159943511755526');" onmouseout="out('186159943511755526');" style=""> 138     public InstallHandler findInstallHandler(Uri uri, Context context) {                                 </span>
<span class="-7718979645570897162" onmouseenter="enter('-7718979645570897162');" onmouseout="out('-7718979645570897162');" style=""> 139         MiBand2FWInstallHandler handler = new MiBand2FWInstallHandler(uri, context);                     </span>
<span class="1169416982466888744" onmouseenter="enter('1169416982466888744');" onmouseout="out('1169416982466888744');" style=""> 140         return handler.isValid() ? handler : null;                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 141     }                                                                                                    </span>
<span  style=""> 142                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 143     @Override                                                                                            </span>
<span class="-6262334845378107929" onmouseenter="enter('-6262334845378107929');" onmouseout="out('-6262334845378107929');" style=""> 144     public boolean supportsSmartWakeup(GBDevice device) {                                                </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 145         return false;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 146     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 147 }                                                                                                        </span></pre></td>
                            <td><pre><span class="6048715529334536325" onmouseenter="enter('6048715529334536325');" onmouseout="out('6048715529334536325');" style="">   1 /*  Copyright (C) 2016-2017 Carsten Pfeiffer                                                             </span>
<span  style="">   2                                                                                                          </span>
<span class="-7759499394858783956" onmouseenter="enter('-7759499394858783956');" onmouseout="out('-7759499394858783956');" style="">   3     This file is part of Gadgetbridge.                                                                   </span>
<span  style="">   4                                                                                                          </span>
<span class="-2647557636279629478" onmouseenter="enter('-2647557636279629478');" onmouseout="out('-2647557636279629478');" style="">   5     Gadgetbridge is free software: you can redistribute it and/or modify                                 </span>
<span class="4878736751218581391" onmouseenter="enter('4878736751218581391');" onmouseout="out('4878736751218581391');" style="">   6     it under the terms of the GNU Affero General Public License as published                             </span>
<span class="-5160078368722358920" onmouseenter="enter('-5160078368722358920');" onmouseout="out('-5160078368722358920');" style="">   7     by the Free Software Foundation, either version 3 of the License, or                                 </span>
<span class="6661789815760177463" onmouseenter="enter('6661789815760177463');" onmouseout="out('6661789815760177463');" style="">   8     (at your option) any later version.                                                                  </span>
<span  style="">   9                                                                                                          </span>
<span class="-6828199977528779968" onmouseenter="enter('-6828199977528779968');" onmouseout="out('-6828199977528779968');" style="">  10     Gadgetbridge is distributed in the hope that it will be useful,                                      </span>
<span class="4883593508173597945" onmouseenter="enter('4883593508173597945');" onmouseout="out('4883593508173597945');" style="">  11     but WITHOUT ANY WARRANTY; without even the implied warranty of                                       </span>
<span class="2300657568347926527" onmouseenter="enter('2300657568347926527');" onmouseout="out('2300657568347926527');" style="">  12     MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the                                        </span>
<span class="4681049817175334681" onmouseenter="enter('4681049817175334681');" onmouseout="out('4681049817175334681');" style="">  13     GNU Affero General Public License for more details.                                                  </span>
<span  style="">  14                                                                                                          </span>
<span class="-3235531360569947201" onmouseenter="enter('-3235531360569947201');" onmouseout="out('-3235531360569947201');" style="">  15     You should have received a copy of the GNU Affero General Public License                             </span>
<span class="-3088444562895398794" onmouseenter="enter('-3088444562895398794');" onmouseout="out('-3088444562895398794');" style="">  16     along with this program.  If not, see &lt;http://www.gnu.org/licenses/&gt;. */                             </span>
<span class="-943603793420973679" onmouseenter="enter('-943603793420973679');" onmouseout="out('-943603793420973679');" style="">  17 package nodomain.freeyourgadget.gadgetbridge.devices.miband;                                             </span>
<span  style="">  18                                                                                                          </span>
<span class="-6548293536248798364" onmouseenter="enter('-6548293536248798364');" onmouseout="out('-6548293536248798364');" style="">  19 import android.annotation.TargetApi;                                                                     </span>
<span class="2859895893394018468" onmouseenter="enter('2859895893394018468');" onmouseout="out('2859895893394018468');" style="">  20 import android.bluetooth.BluetoothDevice;                                                                </span>
<span class="4786958806676392792" onmouseenter="enter('4786958806676392792');" onmouseout="out('4786958806676392792');" style="">  21 import android.bluetooth.le.ScanFilter;                                                                  </span>
<span class="5922045460006936195" onmouseenter="enter('5922045460006936195');" onmouseout="out('5922045460006936195');" style="">  22 import android.content.Context;                                                                          </span>
<span class="-8750621697125156872" onmouseenter="enter('-8750621697125156872');" onmouseout="out('-8750621697125156872');" style="">  23 import android.net.Uri;                                                                                  </span>
<span class="-4549785658871057260" onmouseenter="enter('-4549785658871057260');" onmouseout="out('-4549785658871057260');" style="">  24 import android.os.Build;                                                                                 </span>
<span class="8301908088148850736" onmouseenter="enter('8301908088148850736');" onmouseout="out('8301908088148850736');" style="">  25 import android.os.ParcelUuid;                                                                            </span>
<span class="-2370850629707943459" onmouseenter="enter('-2370850629707943459');" onmouseout="out('-2370850629707943459');" style="">  26 import android.support.annotation.NonNull;                                                               </span>
<span  style="">  27                                                                                                          </span>
<span class="9072327285961251154" onmouseenter="enter('9072327285961251154');" onmouseout="out('9072327285961251154');" style="">  28 import org.slf4j.Logger;                                                                                 </span>
<span class="697043352225962606" onmouseenter="enter('697043352225962606');" onmouseout="out('697043352225962606');" style="">  29 import org.slf4j.LoggerFactory;                                                                          </span>
<span  style="">  30                                                                                                          </span>
<span class="-112105277767313938" onmouseenter="enter('-112105277767313938');" onmouseout="out('-112105277767313938');" style="">  31 import java.util.Collection;                                                                             </span>
<span class="2187055016371707860" onmouseenter="enter('2187055016371707860');" onmouseout="out('2187055016371707860');" style="">  32 import java.util.Collections;                                                                            </span>
<span class="3384353015976675773" onmouseenter="enter('3384353015976675773');" onmouseout="out('3384353015976675773');" style="">  33 import java.util.Set;                                                                                    </span>
<span  style="">  34                                                                                                          </span>
<span class="-8113221927992302576" onmouseenter="enter('-8113221927992302576');" onmouseout="out('-8113221927992302576');" style="">  35 import nodomain.freeyourgadget.gadgetbridge.GBApplication;                                               </span>
<span class="-7198279398549834921" onmouseenter="enter('-7198279398549834921');" onmouseout="out('-7198279398549834921');" style="">  36 import nodomain.freeyourgadget.gadgetbridge.R;                                                           </span>
<span class="3777396069160084413" onmouseenter="enter('3777396069160084413');" onmouseout="out('3777396069160084413');" style="">  37 import nodomain.freeyourgadget.gadgetbridge.devices.InstallHandler;                                      </span>
<span class="-4858662006453759829" onmouseenter="enter('-4858662006453759829');" onmouseout="out('-4858662006453759829');" style="">  38 import nodomain.freeyourgadget.gadgetbridge.devices.SampleProvider;                                      </span>
<span class="3833266035366718204" onmouseenter="enter('3833266035366718204');" onmouseout="out('3833266035366718204');" style="">  39 import nodomain.freeyourgadget.gadgetbridge.devices.miband2.MiBand2FWInstallHandler;                     </span>
<span class="6164643418103516215" onmouseenter="enter('6164643418103516215');" onmouseout="out('6164643418103516215');" style="">  40 import nodomain.freeyourgadget.gadgetbridge.entities.AbstractActivitySample;                             </span>
<span class="804944882642105225" onmouseenter="enter('804944882642105225');" onmouseout="out('804944882642105225');" style="">  41 import nodomain.freeyourgadget.gadgetbridge.entities.DaoSession;                                         </span>
<span class="4836892992022606579" onmouseenter="enter('4836892992022606579');" onmouseout="out('4836892992022606579');" style="">  42 import nodomain.freeyourgadget.gadgetbridge.impl.GBDevice;                                               </span>
<span class="-1351120908834620909" onmouseenter="enter('-1351120908834620909');" onmouseout="out('-1351120908834620909');" style="">  43 import nodomain.freeyourgadget.gadgetbridge.impl.GBDeviceCandidate;                                      </span>
<span class="1593353296711823731" onmouseenter="enter('1593353296711823731');" onmouseout="out('1593353296711823731');" style="">  44 import nodomain.freeyourgadget.gadgetbridge.model.DeviceType;                                            </span>
<span class="-600862318521663319" onmouseenter="enter('-600862318521663319');" onmouseout="out('-600862318521663319');" style="">  45 import nodomain.freeyourgadget.gadgetbridge.util.Prefs;                                                  </span>
<span  style="">  46                                                                                                          </span>
<span class="6355525354884508922" onmouseenter="enter('6355525354884508922');" onmouseout="out('6355525354884508922');" style="">  47 public class MiBand2Coordinator extends MiBandCoordinator {                                              </span>
<span class="8691622485005719178" onmouseenter="enter('8691622485005719178');" onmouseout="out('8691622485005719178');" style="">  48     private static final Logger LOG = LoggerFactory.getLogger(MiBand2Coordinator.class);                 </span>
<span  style="">  49                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  50     @Override                                                                                            </span>
<span class="8140947852819565399" onmouseenter="enter('8140947852819565399');" onmouseout="out('8140947852819565399');" style="">  51     public DeviceType getDeviceType() {                                                                  </span>
<span class="4044714187384175403" onmouseenter="enter('4044714187384175403');" onmouseout="out('4044714187384175403');" style="">  52         return DeviceType.MIBAND2;                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  53     }                                                                                                    </span>
<span  style="">  54                                                                                                          </span>
<span class="5154748246392482767" onmouseenter="enter('5154748246392482767');" onmouseout="out('5154748246392482767');" style="">  55     @NonNull                                                                                             </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  56     @Override                                                                                            </span>
<span class="-6039390701678024163" onmouseenter="enter('-6039390701678024163');" onmouseout="out('-6039390701678024163');" style="">  57     @TargetApi(Build.VERSION_CODES.LOLLIPOP)                                                             </span>
<span class="1062073963528652044" onmouseenter="enter('1062073963528652044');" onmouseout="out('1062073963528652044');" style="">  58     public Collection&lt;? extends ScanFilter&gt; createBLEScanFilters() {                                     </span>
<span class="3472321620147933113" onmouseenter="enter('3472321620147933113');" onmouseout="out('3472321620147933113');" style="">  59         ParcelUuid mi2Service = new ParcelUuid(MiBandService.UUID_SERVICE_MIBAND2_SERVICE);              </span>
<span class="614125468348224145" onmouseenter="enter('614125468348224145');" onmouseout="out('614125468348224145');" style="">  60         ScanFilter filter = new ScanFilter.Builder().setServiceUuid(mi2Service).build();                 </span>
<span class="3209388754744013536" onmouseenter="enter('3209388754744013536');" onmouseout="out('3209388754744013536');" style="">  61         return Collections.singletonList(filter);                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  62     }                                                                                                    </span>
<span  style="">  63                                                                                                          </span>
<span class="5154748246392482767" onmouseenter="enter('5154748246392482767');" onmouseout="out('5154748246392482767');" style="">  64     @NonNull                                                                                             </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  65     @Override                                                                                            </span>
<span class="311137942692300687" onmouseenter="enter('311137942692300687');" onmouseout="out('311137942692300687');" style="">  66     public DeviceType getSupportedType(GBDeviceCandidate candidate) {                                    </span>
<span class="5120059449065770861" onmouseenter="enter('5120059449065770861');" onmouseout="out('5120059449065770861');" style="">  67         if (candidate.supportsService(MiBand2Service.UUID_SERVICE_MIBAND2_SERVICE)) {                    </span>
<span class="4044714187384175403" onmouseenter="enter('4044714187384175403');" onmouseout="out('4044714187384175403');" style="">  68             return DeviceType.MIBAND2;                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  69         }                                                                                                </span>
<span  style="">  70                                                                                                          </span>
<span class="8752124683498057440" onmouseenter="enter('8752124683498057440');" onmouseout="out('8752124683498057440');" style="">  71         // and a heuristic for now                                                                       </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">  72         try {                                                                                            </span>
<span class="4412840096827679545" onmouseenter="enter('4412840096827679545');" onmouseout="out('4412840096827679545');" style="">  73             BluetoothDevice device = candidate.getDevice();                                              </span>
<span class="8985855808024070407" onmouseenter="enter('8985855808024070407');" onmouseout="out('8985855808024070407');" style="">  74 //            if (isHealthWearable(device)) {                                                            </span>
<span class="-276642680779247200" onmouseenter="enter('-276642680779247200');" onmouseout="out('-276642680779247200');" style="">  75                 String name = device.getName();                                                          </span>
<span class="986746676450568173" onmouseenter="enter('986746676450568173');" onmouseout="out('986746676450568173');" style="">  76                 if (name != null &amp;&amp; name.equalsIgnoreCase(MiBandConst.MI_BAND2_NAME)) {                  </span>
<span class="4044714187384175403" onmouseenter="enter('4044714187384175403');" onmouseout="out('4044714187384175403');" style="">  77                     return DeviceType.MIBAND2;                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  78                 }                                                                                        </span>
<span class="1818990376901269570" onmouseenter="enter('1818990376901269570');" onmouseout="out('1818990376901269570');" style="">  79 //            }                                                                                          </span>
<span class="2273034781883266774" onmouseenter="enter('2273034781883266774');" onmouseout="out('2273034781883266774');" style="">  80         } catch (Exception ex) {                                                                         </span>
<span class="8101729304130935458" onmouseenter="enter('8101729304130935458');" onmouseout="out('8101729304130935458');" style="">  81             LOG.error(&quot;unable to check device support&quot;, ex);                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  82         }                                                                                                </span>
<span class="2733059175620106263" onmouseenter="enter('2733059175620106263');" onmouseout="out('2733059175620106263');" style="">  83         return DeviceType.UNKNOWN;                                                                       </span>
<span  style="">  84                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  85     }                                                                                                    </span>
<span  style="">  86                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  87     @Override                                                                                            </span>
<span class="-2665941594348225828" onmouseenter="enter('-2665941594348225828');" onmouseout="out('-2665941594348225828');" style="">  88     public boolean supportsHeartRateMeasurement(GBDevice device) {                                       </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">  89         return true;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  90     }                                                                                                    </span>
<span  style="">  91                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  92     @Override                                                                                            </span>
<span class="-3239484548915931264" onmouseenter="enter('-3239484548915931264');" onmouseout="out('-3239484548915931264');" style="">  93     public boolean supportsAlarmConfiguration() {                                                        </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">  94         return true;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  95     }                                                                                                    </span>
<span  style="">  96                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  97     @Override                                                                                            </span>
<span class="-4700729772201748614" onmouseenter="enter('-4700729772201748614');" onmouseout="out('-4700729772201748614');" style="">  98     public boolean supportsActivityDataFetching() {                                                      </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">  99         return true;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 100     }                                                                                                    </span>
<span  style=""> 101                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 102     @Override                                                                                            </span>
<span class="370222890247546480" onmouseenter="enter('370222890247546480');" onmouseout="out('370222890247546480');" style=""><abbr title=" 103     public SampleProvider&lt;? extends AbstractActivitySample&gt; getSampleProvider(GBDevice device, DaoSession session) {"> 103     public SampleProvider&lt;? extends AbstractActivitySample&gt; getSampleProvider(GBDevice device, DaoSession🔵</abbr></span>
<span class="4933711155334593387" onmouseenter="enter('4933711155334593387');" onmouseout="out('4933711155334593387');" style=""> 104         return new MiBand2SampleProvider(device, session);                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 105     }                                                                                                    </span>
<span  style=""> 106                                                                                                          </span>
<span class="-8632607901807438765" onmouseenter="enter('-8632607901807438765');" onmouseout="out('-8632607901807438765');" style=""> 107     public static DateTimeDisplay getDateDisplay(Context context) throws IllegalArgumentException {      </span>
<span class="7576815700871527587" onmouseenter="enter('7576815700871527587');" onmouseout="out('7576815700871527587');" style=""> 108         Prefs prefs = GBApplication.getPrefs();                                                          </span>
<span class="6514876670292154071" onmouseenter="enter('6514876670292154071');" onmouseout="out('6514876670292154071');" style=""> 109         String dateFormatTime = context.getString(R.string.p_dateformat_time);                           </span>
<span class="-5321922516023131309" onmouseenter="enter('-5321922516023131309');" onmouseout="out('-5321922516023131309');" style=""> 110         if (dateFormatTime.equals(prefs.getString(MiBandConst.PREF_MI2_DATEFORMAT, dateFormatTime))) {   </span>
<span class="7167046866858259360" onmouseenter="enter('7167046866858259360');" onmouseout="out('7167046866858259360');" style=""> 111             return DateTimeDisplay.TIME;                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 112         }                                                                                                </span>
<span class="-6433196943226128018" onmouseenter="enter('-6433196943226128018');" onmouseout="out('-6433196943226128018');" style=""> 113         return DateTimeDisplay.DATE_TIME;                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 114     }                                                                                                    </span>
<span  style=""> 115                                                                                                          </span>
<span class="-1845883012642522582" onmouseenter="enter('-1845883012642522582');" onmouseout="out('-1845883012642522582');" style=""> 116     public static boolean getActivateDisplayOnLiftWrist() {                                              </span>
<span class="7576815700871527587" onmouseenter="enter('7576815700871527587');" onmouseout="out('7576815700871527587');" style=""> 117         Prefs prefs = GBApplication.getPrefs();                                                          </span>
<span class="2690807457904438786" onmouseenter="enter('2690807457904438786');" onmouseout="out('2690807457904438786');" style=""> 118         return prefs.getBoolean(MiBandConst.PREF_MI2_ACTIVATE_DISPLAY_ON_LIFT, true);                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 119     }                                                                                                    </span>
<span  style=""> 120                                                                                                          </span>
<span class="6077770071851493642" onmouseenter="enter('6077770071851493642');" onmouseout="out('6077770071851493642');" style=""> 121     public static Set&lt;String&gt; getDisplayItems() {                                                        </span>
<span class="7576815700871527587" onmouseenter="enter('7576815700871527587');" onmouseout="out('7576815700871527587');" style=""> 122         Prefs prefs = GBApplication.getPrefs();                                                          </span>
<span class="-1229941541205968221" onmouseenter="enter('-1229941541205968221');" onmouseout="out('-1229941541205968221');" style=""> 123         return prefs.getStringSet(MiBandConst.PREF_MI2_DISPLAY_ITEMS, null);                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 124     }                                                                                                    </span>
<span  style=""> 125                                                                                                          </span>
<span class="5843437346679186542" onmouseenter="enter('5843437346679186542');" onmouseout="out('5843437346679186542');" style=""> 126     public static boolean getRotateWristToSwitchInfo() {                                                 </span>
<span class="7576815700871527587" onmouseenter="enter('7576815700871527587');" onmouseout="out('7576815700871527587');" style=""> 127         Prefs prefs = GBApplication.getPrefs();                                                          </span>
<span class="-5591112544710653237" onmouseenter="enter('-5591112544710653237');" onmouseout="out('-5591112544710653237');" style=""> 128         return prefs.getBoolean(MiBandConst.PREF_MI2_ROTATE_WRIST_TO_SWITCH_INFO, false);                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 129     }                                                                                                    </span>
<span  style=""> 130                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 131     @Override                                                                                            </span>
<span class="186159943511755526" onmouseenter="enter('186159943511755526');" onmouseout="out('186159943511755526');" style=""> 132     public InstallHandler findInstallHandler(Uri uri, Context context) {                                 </span>
<span class="-7718979645570897162" onmouseenter="enter('-7718979645570897162');" onmouseout="out('-7718979645570897162');" style=""> 133         MiBand2FWInstallHandler handler = new MiBand2FWInstallHandler(uri, context);                     </span>
<span class="1169416982466888744" onmouseenter="enter('1169416982466888744');" onmouseout="out('1169416982466888744');" style=""> 134         return handler.isValid() ? handler : null;                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 135     }                                                                                                    </span>
<span  style=""> 136                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 137     @Override                                                                                            </span>
<span class="-6262334845378107929" onmouseenter="enter('-6262334845378107929');" onmouseout="out('-6262334845378107929');" style=""> 138     public boolean supportsSmartWakeup(GBDevice device) {                                                </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 139         return false;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 140     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 141 }                                                                                                        </span>




</pre></td>
                            <td><pre><span class="6048715529334536325" onmouseenter="enter('6048715529334536325');" onmouseout="out('6048715529334536325');" style="">   1 /*  Copyright (C) 2016-2017 Carsten Pfeiffer                                                             </span>
<span  style="">   2                                                                                                          </span>
<span class="-7759499394858783956" onmouseenter="enter('-7759499394858783956');" onmouseout="out('-7759499394858783956');" style="">   3     This file is part of Gadgetbridge.                                                                   </span>
<span  style="">   4                                                                                                          </span>
<span class="-2647557636279629478" onmouseenter="enter('-2647557636279629478');" onmouseout="out('-2647557636279629478');" style="">   5     Gadgetbridge is free software: you can redistribute it and/or modify                                 </span>
<span class="4878736751218581391" onmouseenter="enter('4878736751218581391');" onmouseout="out('4878736751218581391');" style="">   6     it under the terms of the GNU Affero General Public License as published                             </span>
<span class="-5160078368722358920" onmouseenter="enter('-5160078368722358920');" onmouseout="out('-5160078368722358920');" style="">   7     by the Free Software Foundation, either version 3 of the License, or                                 </span>
<span class="6661789815760177463" onmouseenter="enter('6661789815760177463');" onmouseout="out('6661789815760177463');" style="">   8     (at your option) any later version.                                                                  </span>
<span  style="">   9                                                                                                          </span>
<span class="-6828199977528779968" onmouseenter="enter('-6828199977528779968');" onmouseout="out('-6828199977528779968');" style="">  10     Gadgetbridge is distributed in the hope that it will be useful,                                      </span>
<span class="4883593508173597945" onmouseenter="enter('4883593508173597945');" onmouseout="out('4883593508173597945');" style="">  11     but WITHOUT ANY WARRANTY; without even the implied warranty of                                       </span>
<span class="2300657568347926527" onmouseenter="enter('2300657568347926527');" onmouseout="out('2300657568347926527');" style="">  12     MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the                                        </span>
<span class="4681049817175334681" onmouseenter="enter('4681049817175334681');" onmouseout="out('4681049817175334681');" style="">  13     GNU Affero General Public License for more details.                                                  </span>
<span  style="">  14                                                                                                          </span>
<span class="-3235531360569947201" onmouseenter="enter('-3235531360569947201');" onmouseout="out('-3235531360569947201');" style="">  15     You should have received a copy of the GNU Affero General Public License                             </span>
<span class="-3088444562895398794" onmouseenter="enter('-3088444562895398794');" onmouseout="out('-3088444562895398794');" style="">  16     along with this program.  If not, see &lt;http://www.gnu.org/licenses/&gt;. */                             </span>
<span class="-943603793420973679" onmouseenter="enter('-943603793420973679');" onmouseout="out('-943603793420973679');" style="">  17 package nodomain.freeyourgadget.gadgetbridge.devices.miband;                                             </span>
<span  style="">  18                                                                                                          </span>
<span class="-6548293536248798364" onmouseenter="enter('-6548293536248798364');" onmouseout="out('-6548293536248798364');" style="">  19 import android.annotation.TargetApi;                                                                     </span>
<span class="2859895893394018468" onmouseenter="enter('2859895893394018468');" onmouseout="out('2859895893394018468');" style="">  20 import android.bluetooth.BluetoothDevice;                                                                </span>
<span class="4786958806676392792" onmouseenter="enter('4786958806676392792');" onmouseout="out('4786958806676392792');" style="">  21 import android.bluetooth.le.ScanFilter;                                                                  </span>
<span class="5922045460006936195" onmouseenter="enter('5922045460006936195');" onmouseout="out('5922045460006936195');" style="">  22 import android.content.Context;                                                                          </span>
<span class="-8750621697125156872" onmouseenter="enter('-8750621697125156872');" onmouseout="out('-8750621697125156872');" style="">  23 import android.net.Uri;                                                                                  </span>
<span class="-4549785658871057260" onmouseenter="enter('-4549785658871057260');" onmouseout="out('-4549785658871057260');" style="">  24 import android.os.Build;                                                                                 </span>
<span class="8301908088148850736" onmouseenter="enter('8301908088148850736');" onmouseout="out('8301908088148850736');" style="">  25 import android.os.ParcelUuid;                                                                            </span>
<span class="-2370850629707943459" onmouseenter="enter('-2370850629707943459');" onmouseout="out('-2370850629707943459');" style="">  26 import android.support.annotation.NonNull;                                                               </span>
<span class="-112105277767313938" onmouseenter="enter('-112105277767313938');" onmouseout="out('-112105277767313938');" style="">  27 import java.util.Collection;                                                                             </span>
<span class="2187055016371707860" onmouseenter="enter('2187055016371707860');" onmouseout="out('2187055016371707860');" style="">  28 import java.util.Collections;                                                                            </span>
<span class="3384353015976675773" onmouseenter="enter('3384353015976675773');" onmouseout="out('3384353015976675773');" style="">  29 import java.util.Set;                                                                                    </span>
<span class="-8113221927992302576" onmouseenter="enter('-8113221927992302576');" onmouseout="out('-8113221927992302576');" style="">  30 import nodomain.freeyourgadget.gadgetbridge.GBApplication;                                               </span>
<span class="-7198279398549834921" onmouseenter="enter('-7198279398549834921');" onmouseout="out('-7198279398549834921');" style="">  31 import nodomain.freeyourgadget.gadgetbridge.R;                                                           </span>
<span class="3777396069160084413" onmouseenter="enter('3777396069160084413');" onmouseout="out('3777396069160084413');" style="">  32 import nodomain.freeyourgadget.gadgetbridge.devices.InstallHandler;                                      </span>
<span class="-4858662006453759829" onmouseenter="enter('-4858662006453759829');" onmouseout="out('-4858662006453759829');" style="">  33 import nodomain.freeyourgadget.gadgetbridge.devices.SampleProvider;                                      </span>
<span class="3833266035366718204" onmouseenter="enter('3833266035366718204');" onmouseout="out('3833266035366718204');" style="">  34 import nodomain.freeyourgadget.gadgetbridge.devices.miband2.MiBand2FWInstallHandler;                     </span>
<span class="6164643418103516215" onmouseenter="enter('6164643418103516215');" onmouseout="out('6164643418103516215');" style="">  35 import nodomain.freeyourgadget.gadgetbridge.entities.AbstractActivitySample;                             </span>
<span class="804944882642105225" onmouseenter="enter('804944882642105225');" onmouseout="out('804944882642105225');" style="">  36 import nodomain.freeyourgadget.gadgetbridge.entities.DaoSession;                                         </span>
<span class="4836892992022606579" onmouseenter="enter('4836892992022606579');" onmouseout="out('4836892992022606579');" style="">  37 import nodomain.freeyourgadget.gadgetbridge.impl.GBDevice;                                               </span>
<span class="-1351120908834620909" onmouseenter="enter('-1351120908834620909');" onmouseout="out('-1351120908834620909');" style="">  38 import nodomain.freeyourgadget.gadgetbridge.impl.GBDeviceCandidate;                                      </span>
<span class="1593353296711823731" onmouseenter="enter('1593353296711823731');" onmouseout="out('1593353296711823731');" style="">  39 import nodomain.freeyourgadget.gadgetbridge.model.DeviceType;                                            </span>
<span class="-600862318521663319" onmouseenter="enter('-600862318521663319');" onmouseout="out('-600862318521663319');" style="">  40 import nodomain.freeyourgadget.gadgetbridge.util.Prefs;                                                  </span>
<span class="9072327285961251154" onmouseenter="enter('9072327285961251154');" onmouseout="out('9072327285961251154');" style="">  41 import org.slf4j.Logger;                                                                                 </span>
<span class="697043352225962606" onmouseenter="enter('697043352225962606');" onmouseout="out('697043352225962606');" style="">  42 import org.slf4j.LoggerFactory;                                                                          </span>
<span  style="">  43                                                                                                          </span>
<span  style="">  44                                                                                                          </span>
<span class="6355525354884508922" onmouseenter="enter('6355525354884508922');" onmouseout="out('6355525354884508922');" style="">  45 public class MiBand2Coordinator extends MiBandCoordinator {                                              </span>
<span class="8691622485005719178" onmouseenter="enter('8691622485005719178');" onmouseout="out('8691622485005719178');" style="">  46     private static final Logger LOG = LoggerFactory.getLogger(MiBand2Coordinator.class);                 </span>
<span  style="">  47                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  48     @Override                                                                                            </span>
<span class="8140947852819565399" onmouseenter="enter('8140947852819565399');" onmouseout="out('8140947852819565399');" style="">  49     public DeviceType getDeviceType() {                                                                  </span>
<span class="4044714187384175403" onmouseenter="enter('4044714187384175403');" onmouseout="out('4044714187384175403');" style="">  50         return DeviceType.MIBAND2;                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  51     }                                                                                                    </span>
<span  style="">  52                                                                                                          </span>
<span class="5154748246392482767" onmouseenter="enter('5154748246392482767');" onmouseout="out('5154748246392482767');" style="">  53     @NonNull                                                                                             </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  54     @Override                                                                                            </span>
<span class="-6039390701678024163" onmouseenter="enter('-6039390701678024163');" onmouseout="out('-6039390701678024163');" style="">  55     @TargetApi(Build.VERSION_CODES.LOLLIPOP)                                                             </span>
<span class="1062073963528652044" onmouseenter="enter('1062073963528652044');" onmouseout="out('1062073963528652044');" style="">  56     public Collection&lt;? extends ScanFilter&gt; createBLEScanFilters() {                                     </span>
<span class="3472321620147933113" onmouseenter="enter('3472321620147933113');" onmouseout="out('3472321620147933113');" style="">  57         ParcelUuid mi2Service = new ParcelUuid(MiBandService.UUID_SERVICE_MIBAND2_SERVICE);              </span>
<span class="614125468348224145" onmouseenter="enter('614125468348224145');" onmouseout="out('614125468348224145');" style="">  58         ScanFilter filter = new ScanFilter.Builder().setServiceUuid(mi2Service).build();                 </span>
<span class="3209388754744013536" onmouseenter="enter('3209388754744013536');" onmouseout="out('3209388754744013536');" style="">  59         return Collections.singletonList(filter);                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  60     }                                                                                                    </span>
<span  style="">  61                                                                                                          </span>
<span class="5154748246392482767" onmouseenter="enter('5154748246392482767');" onmouseout="out('5154748246392482767');" style="">  62     @NonNull                                                                                             </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  63     @Override                                                                                            </span>
<span class="311137942692300687" onmouseenter="enter('311137942692300687');" onmouseout="out('311137942692300687');" style="">  64     public DeviceType getSupportedType(GBDeviceCandidate candidate) {                                    </span>
<span class="5120059449065770861" onmouseenter="enter('5120059449065770861');" onmouseout="out('5120059449065770861');" style="">  65         if (candidate.supportsService(MiBand2Service.UUID_SERVICE_MIBAND2_SERVICE)) {                    </span>
<span class="4044714187384175403" onmouseenter="enter('4044714187384175403');" onmouseout="out('4044714187384175403');" style="">  66             return DeviceType.MIBAND2;                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  67         }                                                                                                </span>
<span  style="">  68                                                                                                          </span>
<span class="8752124683498057440" onmouseenter="enter('8752124683498057440');" onmouseout="out('8752124683498057440');" style="">  69         // and a heuristic for now                                                                       </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">  70         try {                                                                                            </span>
<span class="4412840096827679545" onmouseenter="enter('4412840096827679545');" onmouseout="out('4412840096827679545');" style="">  71             BluetoothDevice device = candidate.getDevice();                                              </span>
<span class="8985855808024070407" onmouseenter="enter('8985855808024070407');" onmouseout="out('8985855808024070407');" style="">  72     //            if (isHealthWearable(device)) {                                                        </span>
<span class="-276642680779247200" onmouseenter="enter('-276642680779247200');" onmouseout="out('-276642680779247200');" style="">  73                 String name = device.getName();                                                          </span>
<span class="986746676450568173" onmouseenter="enter('986746676450568173');" onmouseout="out('986746676450568173');" style="">  74                 if (name != null &amp;&amp; name.equalsIgnoreCase(MiBandConst.MI_BAND2_NAME)) {                  </span>
<span class="4044714187384175403" onmouseenter="enter('4044714187384175403');" onmouseout="out('4044714187384175403');" style="">  75                     return DeviceType.MIBAND2;                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  76                 }                                                                                        </span>
<span class="1818990376901269570" onmouseenter="enter('1818990376901269570');" onmouseout="out('1818990376901269570');" style="">  77     //            }                                                                                      </span>
<span class="2273034781883266774" onmouseenter="enter('2273034781883266774');" onmouseout="out('2273034781883266774');" style="">  78         } catch (Exception ex) {                                                                         </span>
<span class="8101729304130935458" onmouseenter="enter('8101729304130935458');" onmouseout="out('8101729304130935458');" style="">  79             LOG.error(&quot;unable to check device support&quot;, ex);                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  80         }                                                                                                </span>
<span class="2733059175620106263" onmouseenter="enter('2733059175620106263');" onmouseout="out('2733059175620106263');" style="">  81         return DeviceType.UNKNOWN;                                                                       </span>
<span  style="">  82                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  83     }                                                                                                    </span>
<span  style="">  84                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  85     @Override                                                                                            </span>
<span class="-2665941594348225828" onmouseenter="enter('-2665941594348225828');" onmouseout="out('-2665941594348225828');" style="">  86     public boolean supportsHeartRateMeasurement(GBDevice device) {                                       </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">  87         return true;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  88     }                                                                                                    </span>
<span  style="">  89                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  90     @Override                                                                                            </span>
<span class="-3239484548915931264" onmouseenter="enter('-3239484548915931264');" onmouseout="out('-3239484548915931264');" style="">  91     public boolean supportsAlarmConfiguration() {                                                        </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">  92         return true;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  93     }                                                                                                    </span>
<span  style="">  94                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  95     @Override                                                                                            </span>
<span class="-4700729772201748614" onmouseenter="enter('-4700729772201748614');" onmouseout="out('-4700729772201748614');" style="">  96     public boolean supportsActivityDataFetching() {                                                      </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">  97         return true;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  98     }                                                                                                    </span>
<span  style="">  99                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 100     @Override                                                                                            </span>
<span class="370222890247546480" onmouseenter="enter('370222890247546480');" onmouseout="out('370222890247546480');" style=""><abbr title=" 101     public SampleProvider&lt;? extends AbstractActivitySample&gt; getSampleProvider(GBDevice device, DaoSession session) {"> 101     public SampleProvider&lt;? extends AbstractActivitySample&gt; getSampleProvider(GBDevice device, DaoSession🔵</abbr></span>
<span class="4933711155334593387" onmouseenter="enter('4933711155334593387');" onmouseout="out('4933711155334593387');" style=""> 102         return new MiBand2SampleProvider(device, session);                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 103     }                                                                                                    </span>
<span  style=""> 104                                                                                                          </span>
<span class="-8632607901807438765" onmouseenter="enter('-8632607901807438765');" onmouseout="out('-8632607901807438765');" style=""> 105     public static DateTimeDisplay getDateDisplay(Context context) throws IllegalArgumentException {      </span>
<span class="7576815700871527587" onmouseenter="enter('7576815700871527587');" onmouseout="out('7576815700871527587');" style=""> 106         Prefs prefs = GBApplication.getPrefs();                                                          </span>
<span class="6514876670292154071" onmouseenter="enter('6514876670292154071');" onmouseout="out('6514876670292154071');" style=""> 107         String dateFormatTime = context.getString(R.string.p_dateformat_time);                           </span>
<span class="-5321922516023131309" onmouseenter="enter('-5321922516023131309');" onmouseout="out('-5321922516023131309');" style=""> 108         if (dateFormatTime.equals(prefs.getString(MiBandConst.PREF_MI2_DATEFORMAT, dateFormatTime))) {   </span>
<span class="7167046866858259360" onmouseenter="enter('7167046866858259360');" onmouseout="out('7167046866858259360');" style=""> 109             return DateTimeDisplay.TIME;                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 110         }                                                                                                </span>
<span class="-6433196943226128018" onmouseenter="enter('-6433196943226128018');" onmouseout="out('-6433196943226128018');" style=""> 111         return DateTimeDisplay.DATE_TIME;                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 112     }                                                                                                    </span>
<span  style=""> 113                                                                                                          </span>
<span class="-1845883012642522582" onmouseenter="enter('-1845883012642522582');" onmouseout="out('-1845883012642522582');" style=""> 114     public static boolean getActivateDisplayOnLiftWrist() {                                              </span>
<span class="7576815700871527587" onmouseenter="enter('7576815700871527587');" onmouseout="out('7576815700871527587');" style=""> 115         Prefs prefs = GBApplication.getPrefs();                                                          </span>
<span class="2690807457904438786" onmouseenter="enter('2690807457904438786');" onmouseout="out('2690807457904438786');" style=""> 116         return prefs.getBoolean(MiBandConst.PREF_MI2_ACTIVATE_DISPLAY_ON_LIFT, true);                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 117     }                                                                                                    </span>
<span  style=""> 118                                                                                                          </span>
<span class="6077770071851493642" onmouseenter="enter('6077770071851493642');" onmouseout="out('6077770071851493642');" style=""> 119     public static Set&lt;String&gt; getDisplayItems() {                                                        </span>
<span class="7576815700871527587" onmouseenter="enter('7576815700871527587');" onmouseout="out('7576815700871527587');" style=""> 120         Prefs prefs = GBApplication.getPrefs();                                                          </span>
<span class="-1229941541205968221" onmouseenter="enter('-1229941541205968221');" onmouseout="out('-1229941541205968221');" style=""> 121         return prefs.getStringSet(MiBandConst.PREF_MI2_DISPLAY_ITEMS, null);                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 122     }                                                                                                    </span>
<span  style=""> 123                                                                                                          </span>
<span class="5843437346679186542" onmouseenter="enter('5843437346679186542');" onmouseout="out('5843437346679186542');" style=""> 124     public static boolean getRotateWristToSwitchInfo() {                                                 </span>
<span class="7576815700871527587" onmouseenter="enter('7576815700871527587');" onmouseout="out('7576815700871527587');" style=""> 125         Prefs prefs = GBApplication.getPrefs();                                                          </span>
<span class="-5591112544710653237" onmouseenter="enter('-5591112544710653237');" onmouseout="out('-5591112544710653237');" style=""> 126         return prefs.getBoolean(MiBandConst.PREF_MI2_ROTATE_WRIST_TO_SWITCH_INFO, false);                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 127     }                                                                                                    </span>
<span  style=""> 128                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 129     @Override                                                                                            </span>
<span class="186159943511755526" onmouseenter="enter('186159943511755526');" onmouseout="out('186159943511755526');" style=""> 130     public InstallHandler findInstallHandler(Uri uri, Context context) {                                 </span>
<span class="-7718979645570897162" onmouseenter="enter('-7718979645570897162');" onmouseout="out('-7718979645570897162');" style=""> 131         MiBand2FWInstallHandler handler = new MiBand2FWInstallHandler(uri, context);                     </span>
<span class="1169416982466888744" onmouseenter="enter('1169416982466888744');" onmouseout="out('1169416982466888744');" style=""> 132         return handler.isValid() ? handler : null;                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 133     }                                                                                                    </span>
<span  style=""> 134                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 135     @Override                                                                                            </span>
<span class="-6262334845378107929" onmouseenter="enter('-6262334845378107929');" onmouseout="out('-6262334845378107929');" style=""> 136     public boolean supportsSmartWakeup(GBDevice device) {                                                </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 137         return false;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 138     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 139 }                                                                                                        </span>






</pre></td>
                        </tr>
                    </table>
                </div>
                <div id="bottom">
                    <table style="margin:auto">
                        <tr>
                            <th>ours vs. base</th>
                            <th>theirs vs. base</th>
                        </tr>
                        <tr>
                            <td><pre><span class="6048715529334536325" onmouseenter="enter('6048715529334536325');" onmouseout="out('6048715529334536325');" style="">   1  /*  Copyright (C) 2016-2017 Carsten Pfeiffer                                                                      </span>
<span  style="">   2                                                                                                                    </span>
<span class="-7759499394858783956" onmouseenter="enter('-7759499394858783956');" onmouseout="out('-7759499394858783956');" style="">   3      This file is part of Gadgetbridge.                                                                            </span>
<span  style="">   4                                                                                                                    </span>
<span class="-2647557636279629478" onmouseenter="enter('-2647557636279629478');" onmouseout="out('-2647557636279629478');" style="">   5      Gadgetbridge is free software: you can redistribute it and/or modify                                          </span>
<span class="4878736751218581391" onmouseenter="enter('4878736751218581391');" onmouseout="out('4878736751218581391');" style="">   6      it under the terms of the GNU Affero General Public License as published                                      </span>
<span class="-5160078368722358920" onmouseenter="enter('-5160078368722358920');" onmouseout="out('-5160078368722358920');" style="">   7      by the Free Software Foundation, either version 3 of the License, or                                          </span>
<span class="6661789815760177463" onmouseenter="enter('6661789815760177463');" onmouseout="out('6661789815760177463');" style="">   8      (at your option) any later version.                                                                           </span>
<span  style="">   9                                                                                                                    </span>
<span class="-6828199977528779968" onmouseenter="enter('-6828199977528779968');" onmouseout="out('-6828199977528779968');" style="">  10      Gadgetbridge is distributed in the hope that it will be useful,                                               </span>
<span class="4883593508173597945" onmouseenter="enter('4883593508173597945');" onmouseout="out('4883593508173597945');" style="">  11      but WITHOUT ANY WARRANTY; without even the implied warranty of                                                </span>
<span class="2300657568347926527" onmouseenter="enter('2300657568347926527');" onmouseout="out('2300657568347926527');" style="">  12      MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the                                                 </span>
<span class="4681049817175334681" onmouseenter="enter('4681049817175334681');" onmouseout="out('4681049817175334681');" style="">  13      GNU Affero General Public License for more details.                                                           </span>
<span  style="">  14                                                                                                                    </span>
<span class="-3235531360569947201" onmouseenter="enter('-3235531360569947201');" onmouseout="out('-3235531360569947201');" style="">  15      You should have received a copy of the GNU Affero General Public License                                      </span>
<span class="-3088444562895398794" onmouseenter="enter('-3088444562895398794');" onmouseout="out('-3088444562895398794');" style="">  16      along with this program.  If not, see &lt;http://www.gnu.org/licenses/&gt;. */                                      </span>
<span class="-943603793420973679" onmouseenter="enter('-943603793420973679');" onmouseout="out('-943603793420973679');" style="">  17  package nodomain.freeyourgadget.gadgetbridge.devices.miband;                                                      </span>
<span  style="">  18                                                                                                                    </span>
<span class="-6548293536248798364" onmouseenter="enter('-6548293536248798364');" onmouseout="out('-6548293536248798364');" style="">  19  import android.annotation.TargetApi;                                                                              </span>
<span class="2859895893394018468" onmouseenter="enter('2859895893394018468');" onmouseout="out('2859895893394018468');" style="">  20  import android.bluetooth.BluetoothDevice;                                                                         </span>
<span class="4786958806676392792" onmouseenter="enter('4786958806676392792');" onmouseout="out('4786958806676392792');" style="">  21  import android.bluetooth.le.ScanFilter;                                                                           </span>
<span class="5922045460006936195" onmouseenter="enter('5922045460006936195');" onmouseout="out('5922045460006936195');" style="">  22  import android.content.Context;                                                                                   </span>
<span class="-8750621697125156872" onmouseenter="enter('-8750621697125156872');" onmouseout="out('-8750621697125156872');" style="">  23  import android.net.Uri;                                                                                           </span>
<span class="-4549785658871057260" onmouseenter="enter('-4549785658871057260');" onmouseout="out('-4549785658871057260');" style="">  24  import android.os.Build;                                                                                          </span>
<span class="8301908088148850736" onmouseenter="enter('8301908088148850736');" onmouseout="out('8301908088148850736');" style="">  25  import android.os.ParcelUuid;                                                                                     </span>
<span class="-2370850629707943459" onmouseenter="enter('-2370850629707943459');" onmouseout="out('-2370850629707943459');" style="">  26  import android.support.annotation.NonNull;                                                                        </span>
<span  style="">  27                                                                                                                    </span>
<span class="9072327285961251154" onmouseenter="enter('9072327285961251154');" onmouseout="out('9072327285961251154');" style="">  28  import org.slf4j.Logger;                                                                                          </span>
<span class="697043352225962606" onmouseenter="enter('697043352225962606');" onmouseout="out('697043352225962606');" style="">  29  import org.slf4j.LoggerFactory;                                                                                   </span>
<span  style="">  30                                                                                                                    </span>
<span class="-112105277767313938" onmouseenter="enter('-112105277767313938');" onmouseout="out('-112105277767313938');" style="">  31  import java.util.Collection;                                                                                      </span>
<span class="2187055016371707860" onmouseenter="enter('2187055016371707860');" onmouseout="out('2187055016371707860');" style="">  32  import java.util.Collections;                                                                                     </span>
<span class="3384353015976675773" onmouseenter="enter('3384353015976675773');" onmouseout="out('3384353015976675773');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  33 +import java.util.Set;                                                                                             </span>
<span  style="">  34                                                                                                                    </span>
<span class="-8113221927992302576" onmouseenter="enter('-8113221927992302576');" onmouseout="out('-8113221927992302576');" style="">  35  import nodomain.freeyourgadget.gadgetbridge.GBApplication;                                                        </span>
<span class="-7198279398549834921" onmouseenter="enter('-7198279398549834921');" onmouseout="out('-7198279398549834921');" style="">  36  import nodomain.freeyourgadget.gadgetbridge.R;                                                                    </span>
<span class="3777396069160084413" onmouseenter="enter('3777396069160084413');" onmouseout="out('3777396069160084413');" style="">  37  import nodomain.freeyourgadget.gadgetbridge.devices.InstallHandler;                                               </span>
<span class="-4858662006453759829" onmouseenter="enter('-4858662006453759829');" onmouseout="out('-4858662006453759829');" style="">  38  import nodomain.freeyourgadget.gadgetbridge.devices.SampleProvider;                                               </span>
<span class="3833266035366718204" onmouseenter="enter('3833266035366718204');" onmouseout="out('3833266035366718204');" style="">  39  import nodomain.freeyourgadget.gadgetbridge.devices.miband2.MiBand2FWInstallHandler;                              </span>
<span class="6164643418103516215" onmouseenter="enter('6164643418103516215');" onmouseout="out('6164643418103516215');" style="">  40  import nodomain.freeyourgadget.gadgetbridge.entities.AbstractActivitySample;                                      </span>
<span class="804944882642105225" onmouseenter="enter('804944882642105225');" onmouseout="out('804944882642105225');" style="">  41  import nodomain.freeyourgadget.gadgetbridge.entities.DaoSession;                                                  </span>
<span class="4836892992022606579" onmouseenter="enter('4836892992022606579');" onmouseout="out('4836892992022606579');" style="">  42  import nodomain.freeyourgadget.gadgetbridge.impl.GBDevice;                                                        </span>
<span class="-1351120908834620909" onmouseenter="enter('-1351120908834620909');" onmouseout="out('-1351120908834620909');" style="">  43  import nodomain.freeyourgadget.gadgetbridge.impl.GBDeviceCandidate;                                               </span>
<span class="1593353296711823731" onmouseenter="enter('1593353296711823731');" onmouseout="out('1593353296711823731');" style="">  44  import nodomain.freeyourgadget.gadgetbridge.model.DeviceType;                                                     </span>
<span class="-600862318521663319" onmouseenter="enter('-600862318521663319');" onmouseout="out('-600862318521663319');" style="">  45  import nodomain.freeyourgadget.gadgetbridge.util.Prefs;                                                           </span>
<span  style="">  46                                                                                                                    </span>
<span class="6355525354884508922" onmouseenter="enter('6355525354884508922');" onmouseout="out('6355525354884508922');" style="">  47  public class MiBand2Coordinator extends MiBandCoordinator {                                                       </span>
<span class="8691622485005719178" onmouseenter="enter('8691622485005719178');" onmouseout="out('8691622485005719178');" style="">  48      private static final Logger LOG = LoggerFactory.getLogger(MiBand2Coordinator.class);                          </span>
<span  style="">  49                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  50      @Override                                                                                                     </span>
<span class="8140947852819565399" onmouseenter="enter('8140947852819565399');" onmouseout="out('8140947852819565399');" style="">  51      public DeviceType getDeviceType() {                                                                           </span>
<span class="4044714187384175403" onmouseenter="enter('4044714187384175403');" onmouseout="out('4044714187384175403');" style="">  52          return DeviceType.MIBAND2;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  53      }                                                                                                             </span>
<span  style="">  54                                                                                                                    </span>
<span class="5154748246392482767" onmouseenter="enter('5154748246392482767');" onmouseout="out('5154748246392482767');" style="">  55      @NonNull                                                                                                      </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  56      @Override                                                                                                     </span>
<span class="-6039390701678024163" onmouseenter="enter('-6039390701678024163');" onmouseout="out('-6039390701678024163');" style="">  57      @TargetApi(Build.VERSION_CODES.LOLLIPOP)                                                                      </span>
<span class="1062073963528652044" onmouseenter="enter('1062073963528652044');" onmouseout="out('1062073963528652044');" style="">  58      public Collection&lt;? extends ScanFilter&gt; createBLEScanFilters() {                                              </span>
<span class="3472321620147933113" onmouseenter="enter('3472321620147933113');" onmouseout="out('3472321620147933113');" style="">  59          ParcelUuid mi2Service = new ParcelUuid(MiBandService.UUID_SERVICE_MIBAND2_SERVICE);                       </span>
<span class="614125468348224145" onmouseenter="enter('614125468348224145');" onmouseout="out('614125468348224145');" style="">  60          ScanFilter filter = new ScanFilter.Builder().setServiceUuid(mi2Service).build();                          </span>
<span class="3209388754744013536" onmouseenter="enter('3209388754744013536');" onmouseout="out('3209388754744013536');" style="">  61          return Collections.singletonList(filter);                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  62      }                                                                                                             </span>
<span  style="">  63                                                                                                                    </span>
<span class="5154748246392482767" onmouseenter="enter('5154748246392482767');" onmouseout="out('5154748246392482767');" style="">  64      @NonNull                                                                                                      </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  65      @Override                                                                                                     </span>
<span class="311137942692300687" onmouseenter="enter('311137942692300687');" onmouseout="out('311137942692300687');" style="">  66      public DeviceType getSupportedType(GBDeviceCandidate candidate) {                                             </span>
<span class="5120059449065770861" onmouseenter="enter('5120059449065770861');" onmouseout="out('5120059449065770861');" style="">  67          if (candidate.supportsService(MiBand2Service.UUID_SERVICE_MIBAND2_SERVICE)) {                             </span>
<span class="4044714187384175403" onmouseenter="enter('4044714187384175403');" onmouseout="out('4044714187384175403');" style="">  68              return DeviceType.MIBAND2;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  69          }                                                                                                         </span>
<span  style="">  70                                                                                                                    </span>
<span class="8752124683498057440" onmouseenter="enter('8752124683498057440');" onmouseout="out('8752124683498057440');" style="">  71          // and a heuristic for now                                                                                </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">  72          try {                                                                                                     </span>
<span class="4412840096827679545" onmouseenter="enter('4412840096827679545');" onmouseout="out('4412840096827679545');" style="">  73              BluetoothDevice device = candidate.getDevice();                                                       </span>
<span class="8985855808024070407" onmouseenter="enter('8985855808024070407');" onmouseout="out('8985855808024070407');" style="">  74  //            if (isHealthWearable(device)) {                                                                     </span>
<span class="-276642680779247200" onmouseenter="enter('-276642680779247200');" onmouseout="out('-276642680779247200');" style="">  75                  String name = device.getName();                                                                   </span>
<span class="986746676450568173" onmouseenter="enter('986746676450568173');" onmouseout="out('986746676450568173');" style="">  76                  if (name != null &amp;&amp; name.equalsIgnoreCase(MiBandConst.MI_BAND2_NAME)) {                           </span>
<span class="4044714187384175403" onmouseenter="enter('4044714187384175403');" onmouseout="out('4044714187384175403');" style="">  77                      return DeviceType.MIBAND2;                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  78                  }                                                                                                 </span>
<span class="1818990376901269570" onmouseenter="enter('1818990376901269570');" onmouseout="out('1818990376901269570');" style="">  79  //            }                                                                                                   </span>
<span class="2273034781883266774" onmouseenter="enter('2273034781883266774');" onmouseout="out('2273034781883266774');" style="">  80          } catch (Exception ex) {                                                                                  </span>
<span class="8101729304130935458" onmouseenter="enter('8101729304130935458');" onmouseout="out('8101729304130935458');" style="">  81              LOG.error(&quot;unable to check device support&quot;, ex);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  82          }                                                                                                         </span>
<span class="2733059175620106263" onmouseenter="enter('2733059175620106263');" onmouseout="out('2733059175620106263');" style="">  83          return DeviceType.UNKNOWN;                                                                                </span>
<span  style="">  84                                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  85      }                                                                                                             </span>
<span  style="">  86                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  87      @Override                                                                                                     </span>
<span class="-2665941594348225828" onmouseenter="enter('-2665941594348225828');" onmouseout="out('-2665941594348225828');" style="">  88      public boolean supportsHeartRateMeasurement(GBDevice device) {                                                </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">  89          return true;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  90      }                                                                                                             </span>
<span  style="">  91                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  92      @Override                                                                                                     </span>
<span class="-3239484548915931264" onmouseenter="enter('-3239484548915931264');" onmouseout="out('-3239484548915931264');" style="">  93      public boolean supportsAlarmConfiguration() {                                                                 </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">  94          return true;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  95      }                                                                                                             </span>
<span  style="">  96                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  97      @Override                                                                                                     </span>
<span class="-4700729772201748614" onmouseenter="enter('-4700729772201748614');" onmouseout="out('-4700729772201748614');" style="">  98      public boolean supportsActivityDataFetching() {                                                               </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">  99          return true;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 100      }                                                                                                             </span>
<span  style=""> 101                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 102      @Override                                                                                                     </span>
<span class="370222890247546480" onmouseenter="enter('370222890247546480');" onmouseout="out('370222890247546480');" style=""><abbr title=" 103      public SampleProvider&lt;? extends AbstractActivitySample&gt; getSampleProvider(GBDevice device, DaoSession session) {"> 103      public SampleProvider&lt;? extends AbstractActivitySample&gt; getSampleProvider(GBDevice device, DaoSession session)🔵</abbr></span>
<span class="4933711155334593387" onmouseenter="enter('4933711155334593387');" onmouseout="out('4933711155334593387');" style=""> 104          return new MiBand2SampleProvider(device, session);                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 105      }                                                                                                             </span>
<span  style=""> 106                                                                                                                    </span>
<span class="-8632607901807438765" onmouseenter="enter('-8632607901807438765');" onmouseout="out('-8632607901807438765');" style=""> 107      public static DateTimeDisplay getDateDisplay(Context context) throws IllegalArgumentException {               </span>
<span class="7576815700871527587" onmouseenter="enter('7576815700871527587');" onmouseout="out('7576815700871527587');" style=""> 108          Prefs prefs = GBApplication.getPrefs();                                                                   </span>
<span class="6514876670292154071" onmouseenter="enter('6514876670292154071');" onmouseout="out('6514876670292154071');" style=""> 109          String dateFormatTime = context.getString(R.string.p_dateformat_time);                                    </span>
<span class="-5321922516023131309" onmouseenter="enter('-5321922516023131309');" onmouseout="out('-5321922516023131309');" style=""> 110          if (dateFormatTime.equals(prefs.getString(MiBandConst.PREF_MI2_DATEFORMAT, dateFormatTime))) {            </span>
<span class="7167046866858259360" onmouseenter="enter('7167046866858259360');" onmouseout="out('7167046866858259360');" style=""> 111              return DateTimeDisplay.TIME;                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 112          }                                                                                                         </span>
<span class="-6433196943226128018" onmouseenter="enter('-6433196943226128018');" onmouseout="out('-6433196943226128018');" style=""> 113          return DateTimeDisplay.DATE_TIME;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 114      }                                                                                                             </span>
<span  style=""> 115                                                                                                                    </span>
<span class="-1845883012642522582" onmouseenter="enter('-1845883012642522582');" onmouseout="out('-1845883012642522582');" style=""> 116      public static boolean getActivateDisplayOnLiftWrist() {                                                       </span>
<span class="7576815700871527587" onmouseenter="enter('7576815700871527587');" onmouseout="out('7576815700871527587');" style=""> 117          Prefs prefs = GBApplication.getPrefs();                                                                   </span>
<span class="2690807457904438786" onmouseenter="enter('2690807457904438786');" onmouseout="out('2690807457904438786');" style=""> 118          return prefs.getBoolean(MiBandConst.PREF_MI2_ACTIVATE_DISPLAY_ON_LIFT, true);                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 119      }                                                                                                             </span>
<span  style=""> 120                                                                                                                    </span>
<span class="6077770071851493642" onmouseenter="enter('6077770071851493642');" onmouseout="out('6077770071851493642');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 121 +    public static Set&lt;String&gt; getDisplayItems() {                                                                 </span>
<span class="7576815700871527587" onmouseenter="enter('7576815700871527587');" onmouseout="out('7576815700871527587');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 122 +        Prefs prefs = GBApplication.getPrefs();                                                                   </span>
<span class="-1229941541205968221" onmouseenter="enter('-1229941541205968221');" onmouseout="out('-1229941541205968221');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 123 +        return prefs.getStringSet(MiBandConst.PREF_MI2_DISPLAY_ITEMS, null);                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 124 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 125 +                                                                                                                  </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 126      @Override                                                                                                     </span>
<span class="186159943511755526" onmouseenter="enter('186159943511755526');" onmouseout="out('186159943511755526');" style=""> 127      public InstallHandler findInstallHandler(Uri uri, Context context) {                                          </span>
<span class="-7718979645570897162" onmouseenter="enter('-7718979645570897162');" onmouseout="out('-7718979645570897162');" style=""> 128          MiBand2FWInstallHandler handler = new MiBand2FWInstallHandler(uri, context);                              </span>
<span class="1169416982466888744" onmouseenter="enter('1169416982466888744');" onmouseout="out('1169416982466888744');" style=""> 129          return handler.isValid() ? handler : null;                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 130      }                                                                                                             </span>
<span  style=""> 131                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 132      @Override                                                                                                     </span>
<span class="-6262334845378107929" onmouseenter="enter('-6262334845378107929');" onmouseout="out('-6262334845378107929');" style=""> 133      public boolean supportsSmartWakeup(GBDevice device) {                                                         </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 134          return false;                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 135      }                                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 136  }                                                                                                                 </span></pre></td>
                            <td><pre><span class="6048715529334536325" onmouseenter="enter('6048715529334536325');" onmouseout="out('6048715529334536325');" style="">   1  /*  Copyright (C) 2016-2017 Carsten Pfeiffer                                                                      </span>
<span  style="">   2                                                                                                                    </span>
<span class="-7759499394858783956" onmouseenter="enter('-7759499394858783956');" onmouseout="out('-7759499394858783956');" style="">   3      This file is part of Gadgetbridge.                                                                            </span>
<span  style="">   4                                                                                                                    </span>
<span class="-2647557636279629478" onmouseenter="enter('-2647557636279629478');" onmouseout="out('-2647557636279629478');" style="">   5      Gadgetbridge is free software: you can redistribute it and/or modify                                          </span>
<span class="4878736751218581391" onmouseenter="enter('4878736751218581391');" onmouseout="out('4878736751218581391');" style="">   6      it under the terms of the GNU Affero General Public License as published                                      </span>
<span class="-5160078368722358920" onmouseenter="enter('-5160078368722358920');" onmouseout="out('-5160078368722358920');" style="">   7      by the Free Software Foundation, either version 3 of the License, or                                          </span>
<span class="6661789815760177463" onmouseenter="enter('6661789815760177463');" onmouseout="out('6661789815760177463');" style="">   8      (at your option) any later version.                                                                           </span>
<span  style="">   9                                                                                                                    </span>
<span class="-6828199977528779968" onmouseenter="enter('-6828199977528779968');" onmouseout="out('-6828199977528779968');" style="">  10      Gadgetbridge is distributed in the hope that it will be useful,                                               </span>
<span class="4883593508173597945" onmouseenter="enter('4883593508173597945');" onmouseout="out('4883593508173597945');" style="">  11      but WITHOUT ANY WARRANTY; without even the implied warranty of                                                </span>
<span class="2300657568347926527" onmouseenter="enter('2300657568347926527');" onmouseout="out('2300657568347926527');" style="">  12      MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the                                                 </span>
<span class="4681049817175334681" onmouseenter="enter('4681049817175334681');" onmouseout="out('4681049817175334681');" style="">  13      GNU Affero General Public License for more details.                                                           </span>
<span  style="">  14                                                                                                                    </span>
<span class="-3235531360569947201" onmouseenter="enter('-3235531360569947201');" onmouseout="out('-3235531360569947201');" style="">  15      You should have received a copy of the GNU Affero General Public License                                      </span>
<span class="-3088444562895398794" onmouseenter="enter('-3088444562895398794');" onmouseout="out('-3088444562895398794');" style="">  16      along with this program.  If not, see &lt;http://www.gnu.org/licenses/&gt;. */                                      </span>
<span class="-943603793420973679" onmouseenter="enter('-943603793420973679');" onmouseout="out('-943603793420973679');" style="">  17  package nodomain.freeyourgadget.gadgetbridge.devices.miband;                                                      </span>
<span  style="">  18                                                                                                                    </span>
<span class="-6548293536248798364" onmouseenter="enter('-6548293536248798364');" onmouseout="out('-6548293536248798364');" style="">  19  import android.annotation.TargetApi;                                                                              </span>
<span class="2859895893394018468" onmouseenter="enter('2859895893394018468');" onmouseout="out('2859895893394018468');" style="">  20  import android.bluetooth.BluetoothDevice;                                                                         </span>
<span class="4786958806676392792" onmouseenter="enter('4786958806676392792');" onmouseout="out('4786958806676392792');" style="">  21  import android.bluetooth.le.ScanFilter;                                                                           </span>
<span class="5922045460006936195" onmouseenter="enter('5922045460006936195');" onmouseout="out('5922045460006936195');" style="">  22  import android.content.Context;                                                                                   </span>
<span class="-8750621697125156872" onmouseenter="enter('-8750621697125156872');" onmouseout="out('-8750621697125156872');" style="">  23  import android.net.Uri;                                                                                           </span>
<span class="-4549785658871057260" onmouseenter="enter('-4549785658871057260');" onmouseout="out('-4549785658871057260');" style="">  24  import android.os.Build;                                                                                          </span>
<span class="8301908088148850736" onmouseenter="enter('8301908088148850736');" onmouseout="out('8301908088148850736');" style="">  25  import android.os.ParcelUuid;                                                                                     </span>
<span class="-2370850629707943459" onmouseenter="enter('-2370850629707943459');" onmouseout="out('-2370850629707943459');" style="">  26  import android.support.annotation.NonNull;                                                                        </span>
<span  style="">  27                                                                                                                    </span>
<span class="9072327285961251154" onmouseenter="enter('9072327285961251154');" onmouseout="out('9072327285961251154');" style="">  28  import org.slf4j.Logger;                                                                                          </span>
<span class="697043352225962606" onmouseenter="enter('697043352225962606');" onmouseout="out('697043352225962606');" style="">  29  import org.slf4j.LoggerFactory;                                                                                   </span>
<span  style="">  30                                                                                                                    </span>
<span class="-112105277767313938" onmouseenter="enter('-112105277767313938');" onmouseout="out('-112105277767313938');" style="">  31  import java.util.Collection;                                                                                      </span>
<span class="2187055016371707860" onmouseenter="enter('2187055016371707860');" onmouseout="out('2187055016371707860');" style="">  32  import java.util.Collections;                                                                                     </span>

<span  style="">  33                                                                                                                    </span>
<span class="-8113221927992302576" onmouseenter="enter('-8113221927992302576');" onmouseout="out('-8113221927992302576');" style="">  34  import nodomain.freeyourgadget.gadgetbridge.GBApplication;                                                        </span>
<span class="-7198279398549834921" onmouseenter="enter('-7198279398549834921');" onmouseout="out('-7198279398549834921');" style="">  35  import nodomain.freeyourgadget.gadgetbridge.R;                                                                    </span>
<span class="3777396069160084413" onmouseenter="enter('3777396069160084413');" onmouseout="out('3777396069160084413');" style="">  36  import nodomain.freeyourgadget.gadgetbridge.devices.InstallHandler;                                               </span>
<span class="-4858662006453759829" onmouseenter="enter('-4858662006453759829');" onmouseout="out('-4858662006453759829');" style="">  37  import nodomain.freeyourgadget.gadgetbridge.devices.SampleProvider;                                               </span>
<span class="3833266035366718204" onmouseenter="enter('3833266035366718204');" onmouseout="out('3833266035366718204');" style="">  38  import nodomain.freeyourgadget.gadgetbridge.devices.miband2.MiBand2FWInstallHandler;                              </span>
<span class="6164643418103516215" onmouseenter="enter('6164643418103516215');" onmouseout="out('6164643418103516215');" style="">  39  import nodomain.freeyourgadget.gadgetbridge.entities.AbstractActivitySample;                                      </span>
<span class="804944882642105225" onmouseenter="enter('804944882642105225');" onmouseout="out('804944882642105225');" style="">  40  import nodomain.freeyourgadget.gadgetbridge.entities.DaoSession;                                                  </span>
<span class="4836892992022606579" onmouseenter="enter('4836892992022606579');" onmouseout="out('4836892992022606579');" style="">  41  import nodomain.freeyourgadget.gadgetbridge.impl.GBDevice;                                                        </span>
<span class="-1351120908834620909" onmouseenter="enter('-1351120908834620909');" onmouseout="out('-1351120908834620909');" style="">  42  import nodomain.freeyourgadget.gadgetbridge.impl.GBDeviceCandidate;                                               </span>
<span class="1593353296711823731" onmouseenter="enter('1593353296711823731');" onmouseout="out('1593353296711823731');" style="">  43  import nodomain.freeyourgadget.gadgetbridge.model.DeviceType;                                                     </span>
<span class="-600862318521663319" onmouseenter="enter('-600862318521663319');" onmouseout="out('-600862318521663319');" style="">  44  import nodomain.freeyourgadget.gadgetbridge.util.Prefs;                                                           </span>
<span  style="">  45                                                                                                                    </span>
<span class="6355525354884508922" onmouseenter="enter('6355525354884508922');" onmouseout="out('6355525354884508922');" style="">  46  public class MiBand2Coordinator extends MiBandCoordinator {                                                       </span>
<span class="8691622485005719178" onmouseenter="enter('8691622485005719178');" onmouseout="out('8691622485005719178');" style="">  47      private static final Logger LOG = LoggerFactory.getLogger(MiBand2Coordinator.class);                          </span>
<span  style="">  48                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  49      @Override                                                                                                     </span>
<span class="8140947852819565399" onmouseenter="enter('8140947852819565399');" onmouseout="out('8140947852819565399');" style="">  50      public DeviceType getDeviceType() {                                                                           </span>
<span class="4044714187384175403" onmouseenter="enter('4044714187384175403');" onmouseout="out('4044714187384175403');" style="">  51          return DeviceType.MIBAND2;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  52      }                                                                                                             </span>
<span  style="">  53                                                                                                                    </span>
<span class="5154748246392482767" onmouseenter="enter('5154748246392482767');" onmouseout="out('5154748246392482767');" style="">  54      @NonNull                                                                                                      </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  55      @Override                                                                                                     </span>
<span class="-6039390701678024163" onmouseenter="enter('-6039390701678024163');" onmouseout="out('-6039390701678024163');" style="">  56      @TargetApi(Build.VERSION_CODES.LOLLIPOP)                                                                      </span>
<span class="1062073963528652044" onmouseenter="enter('1062073963528652044');" onmouseout="out('1062073963528652044');" style="">  57      public Collection&lt;? extends ScanFilter&gt; createBLEScanFilters() {                                              </span>
<span class="3472321620147933113" onmouseenter="enter('3472321620147933113');" onmouseout="out('3472321620147933113');" style="">  58          ParcelUuid mi2Service = new ParcelUuid(MiBandService.UUID_SERVICE_MIBAND2_SERVICE);                       </span>
<span class="614125468348224145" onmouseenter="enter('614125468348224145');" onmouseout="out('614125468348224145');" style="">  59          ScanFilter filter = new ScanFilter.Builder().setServiceUuid(mi2Service).build();                          </span>
<span class="3209388754744013536" onmouseenter="enter('3209388754744013536');" onmouseout="out('3209388754744013536');" style="">  60          return Collections.singletonList(filter);                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  61      }                                                                                                             </span>
<span  style="">  62                                                                                                                    </span>
<span class="5154748246392482767" onmouseenter="enter('5154748246392482767');" onmouseout="out('5154748246392482767');" style="">  63      @NonNull                                                                                                      </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  64      @Override                                                                                                     </span>
<span class="311137942692300687" onmouseenter="enter('311137942692300687');" onmouseout="out('311137942692300687');" style="">  65      public DeviceType getSupportedType(GBDeviceCandidate candidate) {                                             </span>
<span class="5120059449065770861" onmouseenter="enter('5120059449065770861');" onmouseout="out('5120059449065770861');" style="">  66          if (candidate.supportsService(MiBand2Service.UUID_SERVICE_MIBAND2_SERVICE)) {                             </span>
<span class="4044714187384175403" onmouseenter="enter('4044714187384175403');" onmouseout="out('4044714187384175403');" style="">  67              return DeviceType.MIBAND2;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  68          }                                                                                                         </span>
<span  style="">  69                                                                                                                    </span>
<span class="8752124683498057440" onmouseenter="enter('8752124683498057440');" onmouseout="out('8752124683498057440');" style="">  70          // and a heuristic for now                                                                                </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">  71          try {                                                                                                     </span>
<span class="4412840096827679545" onmouseenter="enter('4412840096827679545');" onmouseout="out('4412840096827679545');" style="">  72              BluetoothDevice device = candidate.getDevice();                                                       </span>
<span class="8985855808024070407" onmouseenter="enter('8985855808024070407');" onmouseout="out('8985855808024070407');" style="">  73  //            if (isHealthWearable(device)) {                                                                     </span>
<span class="-276642680779247200" onmouseenter="enter('-276642680779247200');" onmouseout="out('-276642680779247200');" style="">  74                  String name = device.getName();                                                                   </span>
<span class="986746676450568173" onmouseenter="enter('986746676450568173');" onmouseout="out('986746676450568173');" style="">  75                  if (name != null &amp;&amp; name.equalsIgnoreCase(MiBandConst.MI_BAND2_NAME)) {                           </span>
<span class="4044714187384175403" onmouseenter="enter('4044714187384175403');" onmouseout="out('4044714187384175403');" style="">  76                      return DeviceType.MIBAND2;                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  77                  }                                                                                                 </span>
<span class="1818990376901269570" onmouseenter="enter('1818990376901269570');" onmouseout="out('1818990376901269570');" style="">  78  //            }                                                                                                   </span>
<span class="2273034781883266774" onmouseenter="enter('2273034781883266774');" onmouseout="out('2273034781883266774');" style="">  79          } catch (Exception ex) {                                                                                  </span>
<span class="8101729304130935458" onmouseenter="enter('8101729304130935458');" onmouseout="out('8101729304130935458');" style="">  80              LOG.error(&quot;unable to check device support&quot;, ex);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  81          }                                                                                                         </span>
<span class="2733059175620106263" onmouseenter="enter('2733059175620106263');" onmouseout="out('2733059175620106263');" style="">  82          return DeviceType.UNKNOWN;                                                                                </span>
<span  style="">  83                                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  84      }                                                                                                             </span>
<span  style="">  85                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  86      @Override                                                                                                     </span>
<span class="-2665941594348225828" onmouseenter="enter('-2665941594348225828');" onmouseout="out('-2665941594348225828');" style="">  87      public boolean supportsHeartRateMeasurement(GBDevice device) {                                                </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">  88          return true;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  89      }                                                                                                             </span>
<span  style="">  90                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  91      @Override                                                                                                     </span>
<span class="-3239484548915931264" onmouseenter="enter('-3239484548915931264');" onmouseout="out('-3239484548915931264');" style="">  92      public boolean supportsAlarmConfiguration() {                                                                 </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">  93          return true;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  94      }                                                                                                             </span>
<span  style="">  95                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  96      @Override                                                                                                     </span>
<span class="-4700729772201748614" onmouseenter="enter('-4700729772201748614');" onmouseout="out('-4700729772201748614');" style="">  97      public boolean supportsActivityDataFetching() {                                                               </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="">  98          return true;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  99      }                                                                                                             </span>
<span  style=""> 100                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 101      @Override                                                                                                     </span>
<span class="370222890247546480" onmouseenter="enter('370222890247546480');" onmouseout="out('370222890247546480');" style=""><abbr title=" 102      public SampleProvider&lt;? extends AbstractActivitySample&gt; getSampleProvider(GBDevice device, DaoSession session) {"> 102      public SampleProvider&lt;? extends AbstractActivitySample&gt; getSampleProvider(GBDevice device, DaoSession session)🔵</abbr></span>
<span class="4933711155334593387" onmouseenter="enter('4933711155334593387');" onmouseout="out('4933711155334593387');" style=""> 103          return new MiBand2SampleProvider(device, session);                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 104      }                                                                                                             </span>
<span  style=""> 105                                                                                                                    </span>
<span class="-8632607901807438765" onmouseenter="enter('-8632607901807438765');" onmouseout="out('-8632607901807438765');" style=""> 106      public static DateTimeDisplay getDateDisplay(Context context) throws IllegalArgumentException {               </span>
<span class="7576815700871527587" onmouseenter="enter('7576815700871527587');" onmouseout="out('7576815700871527587');" style=""> 107          Prefs prefs = GBApplication.getPrefs();                                                                   </span>
<span class="6514876670292154071" onmouseenter="enter('6514876670292154071');" onmouseout="out('6514876670292154071');" style=""> 108          String dateFormatTime = context.getString(R.string.p_dateformat_time);                                    </span>
<span class="-5321922516023131309" onmouseenter="enter('-5321922516023131309');" onmouseout="out('-5321922516023131309');" style=""> 109          if (dateFormatTime.equals(prefs.getString(MiBandConst.PREF_MI2_DATEFORMAT, dateFormatTime))) {            </span>
<span class="7167046866858259360" onmouseenter="enter('7167046866858259360');" onmouseout="out('7167046866858259360');" style=""> 110              return DateTimeDisplay.TIME;                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 111          }                                                                                                         </span>
<span class="-6433196943226128018" onmouseenter="enter('-6433196943226128018');" onmouseout="out('-6433196943226128018');" style=""> 112          return DateTimeDisplay.DATE_TIME;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 113      }                                                                                                             </span>
<span  style=""> 114                                                                                                                    </span>
<span class="-1845883012642522582" onmouseenter="enter('-1845883012642522582');" onmouseout="out('-1845883012642522582');" style=""> 115      public static boolean getActivateDisplayOnLiftWrist() {                                                       </span>
<span class="7576815700871527587" onmouseenter="enter('7576815700871527587');" onmouseout="out('7576815700871527587');" style=""> 116          Prefs prefs = GBApplication.getPrefs();                                                                   </span>
<span class="2690807457904438786" onmouseenter="enter('2690807457904438786');" onmouseout="out('2690807457904438786');" style=""> 117          return prefs.getBoolean(MiBandConst.PREF_MI2_ACTIVATE_DISPLAY_ON_LIFT, true);                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 118      }                                                                                                             </span>
<span  style=""> 119                                                                                                                    </span>
<span class="5843437346679186542" onmouseenter="enter('5843437346679186542');" onmouseout="out('5843437346679186542');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 120 +    public static boolean getRotateWristToSwitchInfo() {                                                          </span>
<span class="7576815700871527587" onmouseenter="enter('7576815700871527587');" onmouseout="out('7576815700871527587');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 121 +        Prefs prefs = GBApplication.getPrefs();                                                                   </span>
<span class="-5591112544710653237" onmouseenter="enter('-5591112544710653237');" onmouseout="out('-5591112544710653237');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 122 +        return prefs.getBoolean(MiBandConst.PREF_MI2_ROTATE_WRIST_TO_SWITCH_INFO, false);                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 123 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 124 +                                                                                                                  </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 125      @Override                                                                                                     </span>
<span class="186159943511755526" onmouseenter="enter('186159943511755526');" onmouseout="out('186159943511755526');" style=""> 126      public InstallHandler findInstallHandler(Uri uri, Context context) {                                          </span>
<span class="-7718979645570897162" onmouseenter="enter('-7718979645570897162');" onmouseout="out('-7718979645570897162');" style=""> 127          MiBand2FWInstallHandler handler = new MiBand2FWInstallHandler(uri, context);                              </span>
<span class="1169416982466888744" onmouseenter="enter('1169416982466888744');" onmouseout="out('1169416982466888744');" style=""> 128          return handler.isValid() ? handler : null;                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 129      }                                                                                                             </span>
<span  style=""> 130                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 131      @Override                                                                                                     </span>
<span class="-6262334845378107929" onmouseenter="enter('-6262334845378107929');" onmouseout="out('-6262334845378107929');" style=""> 132      public boolean supportsSmartWakeup(GBDevice device) {                                                         </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 133          return false;                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 134      }                                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 135  }                                                                                                                 </span></pre></td>
                        </tr>
                    </table>
                </div>
              </body>
            </html>
            