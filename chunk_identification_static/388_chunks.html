<!DOCTYPE html>
<html lang="en">
          <head>
            <meta charset="utf-8">
            <title>388 chunks</title>
                <style>
                    #top {
                        height: 48vh;
                        overflow-y: auto;
                    }
                    #bottom {
                        height: 48vh;
                        overflow-y: auto;
                    }
                </style>
          </head>
          <body>
            <pre>[[{&#x27;eq&#x27;: [{&#x27;CHUNK_OURS&#x27;: &#x27;&#x27;,
           &#x27;CHUNK_THEIRS&#x27;: &#x27;    /** Returns whether the folder cling is &#x27;
                           &#x27;visible. */\n&#x27;
                           &#x27;    public boolean isFolderClingVisible() {\n&#x27;
                           &#x27;        Cling cling = (Cling) &#x27;
                           &#x27;mLauncher.findViewById(R.id.folder_cling);\n&#x27;
                           &#x27;        if (cling != null) {\n&#x27;
                           &#x27;            return cling.getVisibility() == &#x27;
                           &#x27;View.VISIBLE;\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;        return false;\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    private boolean skipCustomClingIfNoAccounts() &#x27;
                           &#x27;{\n&#x27;
                           &#x27;        Cling cling = (Cling) &#x27;
                           &#x27;mLauncher.findViewById(R.id.workspace_cling);\n&#x27;
                           &#x27;        boolean customCling = &#x27;
                           &#x27;cling.getDrawIdentifier().equals(&quot;workspace_custom&quot;);\n&#x27;
                           &#x27;        if (customCling) {\n&#x27;
                           &#x27;            AccountManager am = &#x27;
                           &#x27;AccountManager.get(mLauncher);\n&#x27;
                           &#x27;            if (am == null) return false;\n&#x27;
                           &#x27;            Account[] accounts = &#x27;
                           &#x27;am.getAccountsByType(&quot;com.google&quot;);\n&#x27;
                           &#x27;            return accounts.length == 0;\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;        return false;\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    /** Updates the first run cling custom content &#x27;
                           &#x27;hint */\n&#x27;
                           &#x27;    private void &#x27;
                           &#x27;setCustomContentHintVisibility(Cling cling, String &#x27;
                           &#x27;ccHintStr, boolean visible,\n&#x27;
                           &#x27;                                                &#x27;
                           &#x27;boolean animate) {\n&#x27;
                           &#x27;        final TextView ccHint = (TextView) &#x27;
                           &#x27;cling.findViewById(R.id.custom_content_hint);\n&#x27;
                           &#x27;        if (ccHint != null) {\n&#x27;
                           &#x27;            if (visible &amp;&amp; !ccHintStr.isEmpty()) &#x27;
                           &#x27;{\n&#x27;
                           &#x27;                ccHint.setText(ccHintStr);\n&#x27;
                           &#x27;                &#x27;
                           &#x27;ccHint.setVisibility(View.VISIBLE);\n&#x27;
                           &#x27;                if (animate) {\n&#x27;
                           &#x27;                    ccHint.setAlpha(0f);\n&#x27;
                           &#x27;                    ccHint.animate().alpha(1f)\n&#x27;
                           &#x27;                            &#x27;
                           &#x27;.setDuration(SHOW_CLING_DURATION)\n&#x27;
                           &#x27;                            .start();\n&#x27;
                           &#x27;                } else {\n&#x27;
                           &#x27;                    ccHint.setAlpha(1f);\n&#x27;
                           &#x27;                }\n&#x27;
                           &#x27;            } else {\n&#x27;
                           &#x27;                if (animate) {\n&#x27;
                           &#x27;                    ccHint.animate().alpha(0f)\n&#x27;
                           &#x27;                            &#x27;
                           &#x27;.setDuration(SHOW_CLING_DURATION)\n&#x27;
                           &#x27;                            .setListener(new &#x27;
                           &#x27;AnimatorListenerAdapter() {\n&#x27;
                           &#x27;                                @Override\n&#x27;
                           &#x27;                                public void &#x27;
                           &#x27;onAnimationEnd(Animator animation) {\n&#x27;
                           &#x27;                                    &#x27;
                           &#x27;ccHint.setVisibility(View.GONE);\n&#x27;
                           &#x27;                                }\n&#x27;
                           &#x27;                            })\n&#x27;
                           &#x27;                            .start();\n&#x27;
                           &#x27;                } else {\n&#x27;
                           &#x27;                    ccHint.setAlpha(0f);\n&#x27;
                           &#x27;                    &#x27;
                           &#x27;ccHint.setVisibility(View.GONE);\n&#x27;
                           &#x27;                }\n&#x27;
                           &#x27;            }\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    /** Updates the first run cling custom content &#x27;
                           &#x27;hint */\n&#x27;
                           &#x27;    public void &#x27;
                           &#x27;updateCustomContentHintVisibility() {\n&#x27;
                           &#x27;        Cling cling = (Cling) &#x27;
                           &#x27;mLauncher.findViewById(R.id.first_run_cling);\n&#x27;
                           &#x27;        String ccHintStr = &#x27;
                           &#x27;mLauncher.getFirstRunCustomContentHint();\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;        if &#x27;
                           &#x27;(mLauncher.getWorkspace().hasCustomContent()) {\n&#x27;
                           &#x27;            // Show the custom content hint if &#x27;
                           &#x27;ccHintStr is not empty\n&#x27;
                           &#x27;            if (cling != null) {\n&#x27;
                           &#x27;                &#x27;
                           &#x27;setCustomContentHintVisibility(cling, ccHintStr, &#x27;
                           &#x27;true, true);\n&#x27;
                           &#x27;            }\n&#x27;
                           &#x27;        } else {\n&#x27;
                           &#x27;            // Hide the custom content hint\n&#x27;
                           &#x27;            if (cling != null) {\n&#x27;
                           &#x27;                &#x27;
                           &#x27;setCustomContentHintVisibility(cling, ccHintStr, &#x27;
                           &#x27;false, true);\n&#x27;
                           &#x27;            }\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    /** Updates the first run cling search bar &#x27;
                           &#x27;hint. */\n&#x27;
                           &#x27;    public void updateSearchBarHint(String hint) &#x27;
                           &#x27;{\n&#x27;
                           &#x27;        Cling cling = (Cling) &#x27;
                           &#x27;mLauncher.findViewById(R.id.first_run_cling);\n&#x27;
                           &#x27;        if (cling != null &amp;&amp; cling.getVisibility() &#x27;
                           &#x27;== View.VISIBLE &amp;&amp; !hint.isEmpty()) {\n&#x27;
                           &#x27;            TextView sbHint = (TextView) &#x27;
                           &#x27;cling.findViewById(R.id.search_bar_hint);\n&#x27;
                           &#x27;            sbHint.setText(hint);\n&#x27;
                           &#x27;            sbHint.setVisibility(View.VISIBLE);\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;}],
   &#x27;mergers&#x27;: {&#x27;baseline&#x27;}},
  {&#x27;eq&#x27;: [{&#x27;CHUNK_OURS&#x27;: &#x27;        return areClingsEnabled() &amp;&amp;\n&#x27;
                         &#x27;            &#x27;
                         &#x27;!sharedPrefs.getBoolean(WORKSPACE_CLING_DISMISSED_KEY, &#x27;
                         &#x27;false) &amp;&amp;\n&#x27;
                         &#x27;            &#x27;
                         &#x27;!sharedPrefs.getBoolean(MIGRATION_CLING_DISMISSED_KEY, &#x27;
                         &#x27;false);\n&#x27;,
           &#x27;CHUNK_THEIRS&#x27;: &#x27;        return isClingsEnabled() &amp;&amp;\n&#x27;
                           &#x27;            &#x27;
                           &#x27;!sharedPrefs.getBoolean(FIRST_RUN_CLING_DISMISSED_KEY, &#x27;
                           &#x27;false) &amp;&amp;\n&#x27;
                           &#x27;            &#x27;
                           &#x27;!sharedPrefs.getBoolean(MIGRATION_CLING_DISMISSED_KEY, &#x27;
                           &#x27;false);\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    public void removeFirstRunAndMigrationClings() &#x27;
                           &#x27;{\n&#x27;
                           &#x27;        removeCling(R.id.first_run_cling);\n&#x27;
                           &#x27;        removeCling(R.id.migration_cling);\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    /**\n&#x27;
                           &#x27;     * Shows the first run cling.\n&#x27;
                           &#x27;     *\n&#x27;
                           &#x27;     * This flow is mutually exclusive with &#x27;
                           &#x27;showMigrationCling, and only runs if this &#x27;
                           &#x27;Launcher\n&#x27;
                           &#x27;     * package was preinstalled or there is no db &#x27;
                           &#x27;to migrate from.\n&#x27;
                           &#x27;     */\n&#x27;
                           &#x27;    public void showFirstRunCling() {\n&#x27;
                           &#x27;        if (!skipCustomClingIfNoAccounts()) {\n&#x27;
                           &#x27;            SharedPreferences sharedPrefs = &#x27;
                           &#x27;mLauncher.getSharedPrefs();\n&#x27;
                           &quot;            // If we&#x27;re not using the default &quot;
                           &#x27;workspace layout, replace workspace cling\n&#x27;
                           &#x27;            // with a custom workspace cling &#x27;
                           &#x27;(usually specified in an overlay)\n&#x27;
                           &#x27;            // For now, only do this on tablets\n&#x27;
                           &#x27;            if (!DISABLE_CUSTOM_CLINGS) {\n&#x27;
                           &#x27;                if &#x27;
                           &#x27;(sharedPrefs.getInt(LauncherProvider.DEFAULT_WORKSPACE_RESOURCE_ID, &#x27;
                           &#x27;0) != 0 &amp;&amp;\n&#x27;
                           &#x27;                        &#x27;
                           &#x27;mLauncher.getResources().getBoolean(R.bool.config_useCustomClings)) &#x27;
                           &#x27;{\n&#x27;
                           &#x27;                    // Use a custom cling\n&#x27;
                           &#x27;                    View cling = &#x27;
                           &#x27;mLauncher.findViewById(R.id.workspace_cling);\n&#x27;
                           &#x27;                    ViewGroup clingParent = &#x27;
                           &#x27;(ViewGroup) cling.getParent();\n&#x27;
                           &#x27;                    int clingIndex = &#x27;
                           &#x27;clingParent.indexOfChild(cling);\n&#x27;
                           &#x27;                    &#x27;
                           &#x27;clingParent.removeViewAt(clingIndex);\n&#x27;
                           &#x27;                    View customCling = &#x27;
                           &#x27;mInflater.inflate(R.layout.custom_workspace_cling,\n&#x27;
                           &#x27;                            clingParent, false);\n&#x27;
                           &#x27;                    &#x27;
                           &#x27;clingParent.addView(customCling, clingIndex);\n&#x27;
                           &#x27;                    &#x27;
                           &#x27;customCling.setId(R.id.workspace_cling);\n&#x27;
                           &#x27;                }\n&#x27;
                           &#x27;            }\n&#x27;
                           &#x27;            Cling cling = (Cling) &#x27;
                           &#x27;mLauncher.findViewById(R.id.first_run_cling);\n&#x27;
                           &#x27;            if (cling != null) {\n&#x27;
                           &#x27;                String sbHintStr = &#x27;
                           &#x27;mLauncher.getFirstRunClingSearchBarHint();\n&#x27;
                           &#x27;                String ccHintStr = &#x27;
                           &#x27;mLauncher.getFirstRunCustomContentHint();\n&#x27;
                           &#x27;                if (!sbHintStr.isEmpty()) {\n&#x27;
                           &#x27;                    TextView sbHint = (TextView) &#x27;
                           &#x27;cling.findViewById(R.id.search_bar_hint);\n&#x27;
                           &#x27;                    sbHint.setText(sbHintStr);\n&#x27;
                           &#x27;                    &#x27;
                           &#x27;sbHint.setVisibility(View.VISIBLE);\n&#x27;
                           &#x27;                }\n&#x27;
                           &#x27;                &#x27;
                           &#x27;setCustomContentHintVisibility(cling, ccHintStr, &#x27;
                           &#x27;true, false);\n&#x27;
                           &#x27;            }\n&#x27;
                           &#x27;            initCling(R.id.first_run_cling, 0, &#x27;
                           &#x27;false, true);\n&#x27;
                           &#x27;        } else {\n&#x27;
                           &#x27;            removeFirstRunAndMigrationClings();\n&#x27;
                           &#x27;        }\n&#x27;}],
   &#x27;mergers&#x27;: {&#x27;baseline&#x27;}},
  {&#x27;eq&#x27;: [{&#x27;CHUNK_OURS&#x27;: &#x27;    public static void &#x27;
                         &#x27;synchonouslyMarkFirstRunClingDismissed(Context ctx) &#x27;
                         &#x27;{\n&#x27;
                         &#x27;        SharedPreferences prefs = &#x27;
                         &#x27;ctx.getSharedPreferences(\n&#x27;
                         &#x27;                &#x27;
                         &#x27;LauncherAppState.getSharedPreferencesKey(), &#x27;
                         &#x27;Context.MODE_PRIVATE);\n&#x27;
                         &#x27;        SharedPreferences.Editor editor = &#x27;
                         &#x27;prefs.edit();\n&#x27;
                         &#x27;        &#x27;
                         &#x27;editor.putBoolean(WORKSPACE_CLING_DISMISSED_KEY, &#x27;
                         &#x27;true);\n&#x27;
                         &#x27;        editor.commit();\n&#x27;,
           &#x27;CHUNK_THEIRS&#x27;: &#x27;    /**\n&#x27;
                           &#x27;     * Shows the migration cling.\n&#x27;
                           &#x27;     *\n&#x27;
                           &#x27;     * This flow is mutually exclusive with &#x27;
                           &#x27;showFirstRunCling, and only runs if this Launcher\n&#x27;
                           &#x27;     * package was not preinstalled and there &#x27;
                           &#x27;exists a db to migrate from.\n&#x27;
                           &#x27;     */\n&#x27;
                           &#x27;    public void showMigrationCling() {\n&#x27;
                           &#x27;        &#x27;
                           &#x27;mLauncher.hideWorkspaceSearchAndHotseat();\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;        Cling c = initCling(R.id.migration_cling, &#x27;
                           &#x27;0, false, true);\n&#x27;
                           &#x27;        c.bringScrimToFront();\n&#x27;
                           &#x27;        c.bringToFront();\n&#x27;}],
   &#x27;mergers&#x27;: {&#x27;baseline&#x27;}},
  {&#x27;eq&#x27;: [{&#x27;CHUNK_OURS&#x27;: &#x27;&#x27;,
           &#x27;CHUNK_THEIRS&#x27;: &#x27;\n&#x27;
                           &#x27;    public void showMigrationWorkspaceCling() {\n&#x27;
                           &#x27;        // Enable the clings only if they have not &#x27;
                           &#x27;been dismissed before\n&#x27;
                           &#x27;        if (isClingsEnabled() &amp;&amp; &#x27;
                           &#x27;!mLauncher.getSharedPrefs().getBoolean(\n&#x27;
                           &#x27;                &#x27;
                           &#x27;MIGRATION_WORKSPACE_CLING_DISMISSED_KEY, false)) &#x27;
                           &#x27;{\n&#x27;
                           &#x27;            Cling c = &#x27;
                           &#x27;initCling(R.id.migration_workspace_cling, 0, &#x27;
                           &#x27;false, true);\n&#x27;
                           &#x27;            &#x27;
                           &#x27;c.updateMigrationWorkspaceBubblePosition();\n&#x27;
                           &#x27;            c.bringScrimToFront();\n&#x27;
                           &#x27;            c.bringToFront();\n&#x27;
                           &#x27;        } else {\n&#x27;
                           &#x27;            &#x27;
                           &#x27;removeCling(R.id.migration_workspace_cling);\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    public void showWorkspaceCling() {\n&#x27;
                           &#x27;        // Enable the clings only if they have not &#x27;
                           &#x27;been dismissed before\n&#x27;
                           &#x27;        if (isClingsEnabled() &amp;&amp; &#x27;
                           &#x27;!mLauncher.getSharedPrefs().getBoolean(\n&#x27;
                           &#x27;                WORKSPACE_CLING_DISMISSED_KEY, &#x27;
                           &#x27;false)) {\n&#x27;
                           &#x27;            Cling c = &#x27;
                           &#x27;initCling(R.id.workspace_cling, 0, false, true);\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;            // Set the focused hotseat app if &#x27;
                           &#x27;there is one\n&#x27;
                           &#x27;            &#x27;
                           &#x27;c.setFocusedHotseatApp(mLauncher.getFirstRunFocusedHotseatAppDrawableId(),\n&#x27;
                           &#x27;                    &#x27;
                           &#x27;mLauncher.getFirstRunFocusedHotseatAppRank(),\n&#x27;
                           &#x27;                    &#x27;
                           &#x27;mLauncher.getFirstRunFocusedHotseatAppComponentName(),\n&#x27;
                           &#x27;                    &#x27;
                           &#x27;mLauncher.getFirstRunFocusedHotseatAppBubbleTitle(),\n&#x27;
                           &#x27;                    &#x27;
                           &#x27;mLauncher.getFirstRunFocusedHotseatAppBubbleDescription());\n&#x27;
                           &#x27;        } else {\n&#x27;
                           &#x27;            removeCling(R.id.workspace_cling);\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;    public Cling showFoldersCling() {\n&#x27;
                           &#x27;        SharedPreferences sharedPrefs = &#x27;
                           &#x27;mLauncher.getSharedPrefs();\n&#x27;
                           &#x27;        // Enable the clings only if they have not &#x27;
                           &#x27;been dismissed before\n&#x27;
                           &#x27;        if (isClingsEnabled() &amp;&amp;\n&#x27;
                           &#x27;                &#x27;
                           &#x27;!sharedPrefs.getBoolean(FOLDER_CLING_DISMISSED_KEY, &#x27;
                           &#x27;false) &amp;&amp;\n&#x27;
                           &#x27;                &#x27;
                           &#x27;!sharedPrefs.getBoolean(Launcher.USER_HAS_MIGRATED, &#x27;
                           &#x27;false)) {\n&#x27;
                           &#x27;            Cling cling = &#x27;
                           &#x27;initCling(R.id.folder_cling, R.id.cling_scrim,\n&#x27;
                           &#x27;                    true, true);\n&#x27;
                           &#x27;            return cling;\n&#x27;
                           &#x27;        } else {\n&#x27;
                           &#x27;            removeCling(R.id.folder_cling);\n&#x27;
                           &#x27;            return null;\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    /** Removes the cling outright from the &#x27;
                           &#x27;DragLayer */\n&#x27;
                           &#x27;    private void removeCling(int id) {\n&#x27;
                           &#x27;        final View cling = &#x27;
                           &#x27;mLauncher.findViewById(id);\n&#x27;
                           &#x27;        if (cling != null) {\n&#x27;
                           &#x27;            final ViewGroup parent = (ViewGroup) &#x27;
                           &#x27;cling.getParent();\n&#x27;
                           &#x27;            parent.post(new Runnable() {\n&#x27;
                           &#x27;                @Override\n&#x27;
                           &#x27;                public void run() {\n&#x27;
                           &#x27;                    parent.removeView(cling);\n&#x27;
                           &#x27;                }\n&#x27;
                           &#x27;            });\n&#x27;
                           &#x27;            &#x27;
                           &#x27;mHideFromAccessibilityHelper.restoreImportantForAccessibility(mLauncher.getDragLayer());\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    /** Hides the specified Cling */\n&#x27;
                           &#x27;    private void dismissCling(final Cling cling, &#x27;
                           &#x27;final Runnable postAnimationCb,\n&#x27;
                           &#x27;                              final String flag, &#x27;
                           &#x27;int duration, boolean restoreNavBarVisibilty) {\n&#x27;
                           &#x27;        // To catch cases where siblings of &#x27;
                           &#x27;top-level views are made invisible, just check &#x27;
                           &#x27;whether\n&#x27;
                           &#x27;        // the cling is directly set to GONE &#x27;
                           &#x27;before dismissing it.\n&#x27;
                           &#x27;        if (cling != null &amp;&amp; cling.getVisibility() &#x27;
                           &#x27;!= View.GONE) {\n&#x27;
                           &#x27;            final Runnable cleanUpClingCb = new &#x27;
                           &#x27;Runnable() {\n&#x27;
                           &#x27;                public void run() {\n&#x27;
                           &#x27;                    cling.cleanup();\n&#x27;
                           &#x27;                    SharedPreferences.Editor &#x27;
                           &#x27;editor = mLauncher.getSharedPrefs().edit();\n&#x27;
                           &#x27;                    editor.putBoolean(flag, &#x27;
                           &#x27;true);\n&#x27;
                           &#x27;                    editor.apply();\n&#x27;
                           &#x27;                    if (postAnimationCb != null) &#x27;
                           &#x27;{\n&#x27;
                           &#x27;                        postAnimationCb.run();\n&#x27;
                           &#x27;                    }\n&#x27;
                           &#x27;                }\n&#x27;
                           &#x27;            };\n&#x27;
                           &#x27;            if (duration &lt;= 0) {\n&#x27;
                           &#x27;                cleanUpClingCb.run();\n&#x27;
                           &#x27;            } else {\n&#x27;
                           &#x27;                cling.hide(duration, &#x27;
                           &#x27;cleanUpClingCb);\n&#x27;
                           &#x27;            }\n&#x27;
                           &#x27;            &#x27;
                           &#x27;mHideFromAccessibilityHelper.restoreImportantForAccessibility(mLauncher.getDragLayer());\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;            if (restoreNavBarVisibilty) {\n&#x27;
                           &#x27;                &#x27;
                           &#x27;cling.setSystemUiVisibility(cling.getSystemUiVisibility() &#x27;
                           &#x27;&amp;\n&#x27;
                           &#x27;                        &#x27;
                           &#x27;~View.SYSTEM_UI_FLAG_LOW_PROFILE);\n&#x27;
                           &#x27;            }\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    public void dismissFirstRunCling(View v) {\n&#x27;
                           &#x27;        Cling cling = (Cling) &#x27;
                           &#x27;mLauncher.findViewById(R.id.first_run_cling);\n&#x27;
                           &#x27;        Runnable cb = new Runnable() {\n&#x27;
                           &#x27;            public void run() {\n&#x27;
                           &#x27;                // Show the workspace cling next\n&#x27;
                           &#x27;                showWorkspaceCling();\n&#x27;
                           &#x27;            }\n&#x27;
                           &#x27;        };\n&#x27;
                           &#x27;        dismissCling(cling, cb, &#x27;
                           &#x27;FIRST_RUN_CLING_DISMISSED_KEY,\n&#x27;
                           &#x27;                DISMISS_CLING_DURATION, false);\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;        // Fade out the search bar for the &#x27;
                           &#x27;workspace cling coming up\n&#x27;
                           &#x27;        &#x27;
                           &#x27;mLauncher.getSearchBar().hideSearchBar(true);\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    private void dismissMigrationCling() {\n&#x27;
                           &#x27;        &#x27;
                           &#x27;mLauncher.showWorkspaceSearchAndHotseat();\n&#x27;
                           &#x27;        Runnable dismissCb = new Runnable() {\n&#x27;
                           &#x27;            public void run() {\n&#x27;
                           &#x27;                Cling cling = (Cling) &#x27;
                           &#x27;mLauncher.findViewById(R.id.migration_cling);\n&#x27;
                           &#x27;                Runnable cb = new Runnable() {\n&#x27;
                           &#x27;                    public void run() {\n&#x27;
                           &#x27;                        // Show the migration &#x27;
                           &#x27;workspace cling next\n&#x27;
                           &#x27;                        &#x27;
                           &#x27;showMigrationWorkspaceCling();\n&#x27;
                           &#x27;                    }\n&#x27;
                           &#x27;                };\n&#x27;
                           &#x27;                dismissCling(cling, cb, &#x27;
                           &#x27;WORKSPACE_CLING_DISMISSED_KEY,\n&#x27;
                           &#x27;                        DISMISS_CLING_DURATION, &#x27;
                           &#x27;true);\n&#x27;
                           &#x27;            }\n&#x27;
                           &#x27;        };\n&#x27;
                           &#x27;        mLauncher.getWorkspace().post(dismissCb);\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    private void dismissAnyWorkspaceCling(Cling &#x27;
                           &#x27;cling, View v) {\n&#x27;
                           &#x27;        Runnable cb = null;\n&#x27;
                           &#x27;        if (v == null) {\n&#x27;
                           &#x27;            cb = new Runnable() {\n&#x27;
                           &#x27;                public void run() {\n&#x27;
                           &#x27;                    &#x27;
                           &#x27;mLauncher.getWorkspace().enterOverviewMode();\n&#x27;
                           &#x27;                }\n&#x27;
                           &#x27;            };\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;        dismissCling(cling, cb, &#x27;
                           &#x27;WORKSPACE_CLING_DISMISSED_KEY,\n&#x27;
                           &#x27;                DISMISS_CLING_DURATION, true);\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;        // Fade in the search bar\n&#x27;
                           &#x27;        &#x27;
                           &#x27;mLauncher.getSearchBar().showSearchBar(true);\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    public void dismissMigrationClingCopyApps(View &#x27;
                           &#x27;v) {\n&#x27;
                           &#x27;        // Copy the shortcuts from the old &#x27;
                           &#x27;database\n&#x27;
                           &#x27;        LauncherModel model = &#x27;
                           &#x27;mLauncher.getModel();\n&#x27;
                           &#x27;        model.resetLoadedState(false, true);\n&#x27;
                           &#x27;        model.startLoader(false, &#x27;
                           &#x27;PagedView.INVALID_RESTORE_PAGE,\n&#x27;
                           &#x27;                &#x27;
                           &#x27;LauncherModel.LOADER_FLAG_CLEAR_WORKSPACE\n&#x27;
                           &#x27;                        | &#x27;
                           &#x27;LauncherModel.LOADER_FLAG_MIGRATE_SHORTCUTS);\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;        // Set the flag to skip the folder cling\n&#x27;
                           &#x27;        String spKey = &#x27;
                           &#x27;LauncherAppState.getSharedPreferencesKey();\n&#x27;
                           &#x27;        SharedPreferences sp = &#x27;
                           &#x27;mLauncher.getSharedPreferences(spKey, &#x27;
                           &#x27;Context.MODE_PRIVATE);\n&#x27;
                           &#x27;        SharedPreferences.Editor editor = &#x27;
                           &#x27;sp.edit();\n&#x27;
                           &#x27;        &#x27;
                           &#x27;editor.putBoolean(Launcher.USER_HAS_MIGRATED, &#x27;
                           &#x27;true);\n&#x27;
                           &#x27;        editor.apply();\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;        // Disable the migration cling\n&#x27;
                           &#x27;        dismissMigrationCling();\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    public void &#x27;
                           &#x27;dismissMigrationClingUseDefault(View v) {\n&#x27;
                           &#x27;        // Clear the workspace\n&#x27;
                           &#x27;        LauncherModel model = &#x27;
                           &#x27;mLauncher.getModel();\n&#x27;
                           &#x27;        model.resetLoadedState(false, true);\n&#x27;
                           &#x27;        model.startLoader(false, &#x27;
                           &#x27;PagedView.INVALID_RESTORE_PAGE,\n&#x27;
                           &#x27;                &#x27;
                           &#x27;LauncherModel.LOADER_FLAG_CLEAR_WORKSPACE);\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;        // Disable the migration cling\n&#x27;
                           &#x27;        dismissMigrationCling();\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    public void &#x27;
                           &#x27;dismissMigrationWorkspaceCling(View v) {\n&#x27;
                           &#x27;        Cling cling = (Cling) &#x27;
                           &#x27;mLauncher.findViewById(R.id.migration_workspace_cling);\n&#x27;
                           &#x27;        dismissAnyWorkspaceCling(cling, v);\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    public void dismissWorkspaceCling(View v) {\n&#x27;
                           &#x27;        Cling cling = (Cling) &#x27;
                           &#x27;mLauncher.findViewById(R.id.workspace_cling);\n&#x27;
                           &#x27;        dismissAnyWorkspaceCling(cling, v);\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    public void dismissFolderCling(View v) {\n&#x27;
                           &#x27;        Cling cling = (Cling) &#x27;
                           &#x27;mLauncher.findViewById(R.id.folder_cling);\n&#x27;
                           &#x27;        dismissCling(cling, null, &#x27;
                           &#x27;FOLDER_CLING_DISMISSED_KEY,\n&#x27;
                           &#x27;                DISMISS_CLING_DURATION, true);\n&#x27;
                           &#x27;    }\n&#x27;}],
   &#x27;mergers&#x27;: {&#x27;baseline&#x27;}},
  {&#x27;eq&#x27;: [{&#x27;CHUNK_OURS&#x27;: &#x27;import android.animation.ObjectAnimator;\n&#x27;
                         &#x27;import android.animation.PropertyValuesHolder;\n&#x27;
                         &#x27;import android.app.ActivityManager;\n&#x27;
                         &#x27;import android.content.Context;\n&#x27;
                         &#x27;import android.content.SharedPreferences;\n&#x27;
                         &#x27;import android.graphics.drawable.Drawable;\n&#x27;
                         &#x27;import android.os.Bundle;\n&#x27;
                         &#x27;import android.os.UserManager;\n&#x27;
                         &#x27;import android.provider.Settings;\n&#x27;
                         &#x27;import android.view.ContextThemeWrapper;\n&#x27;
                         &#x27;import android.view.LayoutInflater;\n&#x27;
                         &#x27;import android.view.View;\n&#x27;
                         &#x27;import android.view.View.OnClickListener;\n&#x27;
                         &#x27;import android.view.View.OnLongClickListener;\n&#x27;
                         &#x27;import android.view.ViewGroup;\n&#x27;
                         &#x27;import &#x27;
                         &#x27;android.view.ViewTreeObserver.OnGlobalLayoutListener;\n&#x27;
                         &#x27;import &#x27;
                         &#x27;android.view.accessibility.AccessibilityManager;\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;class LauncherClings implements OnClickListener {\n&#x27;
                         &#x27;    private static final String &#x27;
                         &#x27;MIGRATION_CLING_DISMISSED_KEY = &#x27;
                         &#x27;&quot;cling_gel.migration.dismissed&quot;;\n&#x27;
                         &#x27;    private static final String &#x27;
                         &#x27;WORKSPACE_CLING_DISMISSED_KEY = &#x27;
                         &#x27;&quot;cling_gel.workspace.dismissed&quot;;\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;    private static final String &#x27;
                         &#x27;TAG_CROP_TOP_AND_SIDES = &quot;crop_bg_top_and_sides&quot;;\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;    private static final boolean DISABLE_CLINGS = &#x27;
                         &#x27;false;\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;    private static final int SHOW_CLING_DURATION = &#x27;
                         &#x27;250;\n&#x27;
                         &#x27;    private static final int DISMISS_CLING_DURATION &#x27;
                         &#x27;= 200;\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;    // New Secure Setting in L\n&#x27;
                         &#x27;    private static final String SKIP_FIRST_USE_HINTS &#x27;
                         &#x27;= &quot;skip_first_use_hints&quot;;\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;    private Launcher mLauncher;\n&#x27;
                         &#x27;    private LayoutInflater mInflater;\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;    /** Ctor */\n&#x27;
                         &#x27;    public LauncherClings(Launcher launcher) {\n&#x27;
                         &#x27;        mLauncher = launcher;\n&#x27;
                         &#x27;        mInflater = LayoutInflater.from(new\n&#x27;
                         &#x27;                ContextThemeWrapper(mLauncher, &#x27;
                         &#x27;android.R.style.Theme_DeviceDefault));\n&#x27;
                         &#x27;    }\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;    @Override\n&#x27;
                         &#x27;    public void onClick(View v) {\n&#x27;
                         &#x27;        int id = v.getId();\n&#x27;
                         &#x27;        if (id == &#x27;
                         &#x27;R.id.cling_dismiss_migration_use_default) {\n&#x27;
                         &#x27;            // Disable the migration cling\n&#x27;
                         &#x27;            dismissMigrationCling();\n&#x27;
                         &#x27;        } else if (id == &#x27;
                         &#x27;R.id.cling_dismiss_migration_copy_apps) {\n&#x27;
                         &#x27;            // Copy the shortcuts from the old &#x27;
                         &#x27;database\n&#x27;
                         &#x27;            LauncherModel model = &#x27;
                         &#x27;mLauncher.getModel();\n&#x27;
                         &#x27;            model.resetLoadedState(false, true);\n&#x27;
                         &#x27;            model.startLoader(false, &#x27;
                         &#x27;PagedView.INVALID_RESTORE_PAGE,\n&#x27;
                         &#x27;                    &#x27;
                         &#x27;LauncherModel.LOADER_FLAG_CLEAR_WORKSPACE\n&#x27;
                         &#x27;                            | &#x27;
                         &#x27;LauncherModel.LOADER_FLAG_MIGRATE_SHORTCUTS);\n&#x27;
                         &#x27;            // Set the flag to skip the folder &#x27;
                         &#x27;cling\n&#x27;
                         &#x27;            String spKey = &#x27;
                         &#x27;LauncherAppState.getSharedPreferencesKey();\n&#x27;
                         &#x27;            SharedPreferences sp = &#x27;
                         &#x27;mLauncher.getSharedPreferences(spKey, &#x27;
                         &#x27;Context.MODE_PRIVATE);\n&#x27;
                         &#x27;            SharedPreferences.Editor editor = &#x27;
                         &#x27;sp.edit();\n&#x27;
                         &#x27;            &#x27;
                         &#x27;editor.putBoolean(Launcher.USER_HAS_MIGRATED, &#x27;
                         &#x27;true);\n&#x27;
                         &#x27;            editor.apply();\n&#x27;
                         &#x27;            // Disable the migration cling\n&#x27;
                         &#x27;            dismissMigrationCling();\n&#x27;
                         &#x27;        } else if (id == &#x27;
                         &#x27;R.id.cling_dismiss_longpress_info) {\n&#x27;
                         &#x27;            dismissLongPressCling();\n&#x27;
                         &#x27;        }\n&#x27;
                         &#x27;    }\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;    /**\n&#x27;
                         &#x27;     * Shows the migration cling.\n&#x27;
                         &#x27;     *\n&#x27;
                         &#x27;     * This flow is mutually exclusive with &#x27;
                         &#x27;showFirstRunCling, and only runs if this Launcher\n&#x27;
                         &#x27;     * package was not preinstalled and there exists &#x27;
                         &#x27;a db to migrate from.\n&#x27;
                         &#x27;     */\n&#x27;
                         &#x27;    public void showMigrationCling() {\n&#x27;
                         &#x27;        mLauncher.hideWorkspaceSearchAndHotseat();\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;        ViewGroup root = (ViewGroup) &#x27;
                         &#x27;mLauncher.findViewById(R.id.launcher);\n&#x27;
                         &#x27;        View inflated = &#x27;
                         &#x27;mInflater.inflate(R.layout.migration_cling, root);\n&#x27;
                         &#x27;        &#x27;
                         &#x27;inflated.findViewById(R.id.cling_dismiss_migration_copy_apps).setOnClickListener(this);\n&#x27;
                         &#x27;        &#x27;
                         &#x27;inflated.findViewById(R.id.cling_dismiss_migration_use_default).setOnClickListener(this);\n&#x27;
                         &#x27;    }\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;    private void dismissMigrationCling() {\n&#x27;
                         &#x27;        mLauncher.showWorkspaceSearchAndHotseat();\n&#x27;
                         &#x27;        Runnable dismissCb = new Runnable() {\n&#x27;
                         &#x27;            public void run() {\n&#x27;
                         &#x27;                Runnable cb = new Runnable() {\n&#x27;
                         &#x27;                    public void run() {\n&#x27;
                         &#x27;                        // Show the longpress cling &#x27;
                         &#x27;next\n&#x27;
                         &#x27;                        showLongPressCling(false);\n&#x27;
                         &#x27;                    }\n&#x27;
                         &#x27;                };\n&#x27;
                         &#x27;                &#x27;
                         &#x27;dismissCling(mLauncher.findViewById(R.id.migration_cling), &#x27;
                         &#x27;cb,\n&#x27;
                         &#x27;                        &#x27;
                         &#x27;MIGRATION_CLING_DISMISSED_KEY, &#x27;
                         &#x27;DISMISS_CLING_DURATION);\n&#x27;
                         &#x27;            }\n&#x27;
                         &#x27;        };\n&#x27;
                         &#x27;        mLauncher.getWorkspace().post(dismissCb);\n&#x27;
                         &#x27;    }\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;    public void showLongPressCling(boolean &#x27;
                         &#x27;showWelcome) {\n&#x27;
                         &#x27;        ViewGroup root = (ViewGroup) &#x27;
                         &#x27;mLauncher.findViewById(R.id.launcher);\n&#x27;
                         &#x27;        View cling = &#x27;
                         &#x27;mInflater.inflate(R.layout.longpress_cling, root, &#x27;
                         &#x27;false);\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;        cling.setOnLongClickListener(new &#x27;
                         &#x27;OnLongClickListener() {\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;            @Override\n&#x27;
                         &#x27;            public boolean onLongClick(View v) {\n&#x27;
                         &#x27;                &#x27;
                         &#x27;mLauncher.getWorkspace().enterOverviewMode();\n&#x27;
                         &#x27;                dismissLongPressCling();\n&#x27;
                         &#x27;                return true;\n&#x27;
                         &#x27;            }\n&#x27;
                         &#x27;        });\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;        final ViewGroup content = (ViewGroup) &#x27;
                         &#x27;cling.findViewById(R.id.cling_content);\n&#x27;
                         &#x27;        mInflater.inflate(showWelcome ? &#x27;
                         &#x27;R.layout.longpress_cling_welcome_content\n&#x27;
                         &#x27;                : R.layout.longpress_cling_content, &#x27;
                         &#x27;content);\n&#x27;
                         &#x27;        &#x27;
                         &#x27;content.findViewById(R.id.cling_dismiss_longpress_info).setOnClickListener(this);\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;        if &#x27;
                         &#x27;(TAG_CROP_TOP_AND_SIDES.equals(content.getTag())) {\n&#x27;
                         &#x27;            Drawable bg = new &#x27;
                         &#x27;BorderCropDrawable(mLauncher.getResources().getDrawable(R.drawable.cling_bg),\n&#x27;
                         &#x27;                    true, true, true, false);\n&#x27;
                         &#x27;            content.setBackground(bg);\n&#x27;
                         &#x27;        }\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;        root.addView(cling);\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;        if (showWelcome) {\n&#x27;
                         &#x27;            // This is the first cling being shown. &#x27;
                         &#x27;No need to animate.\n&#x27;
                         &#x27;            return;\n&#x27;
                         &#x27;        }\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;        // Animate\n&#x27;
                         &#x27;        &#x27;
                         &#x27;content.getViewTreeObserver().addOnGlobalLayoutListener(new &#x27;
                         &#x27;OnGlobalLayoutListener() {\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;            @Override\n&#x27;
                         &#x27;            public void onGlobalLayout() {\n&#x27;
                         &#x27;                &#x27;
                         &#x27;content.getViewTreeObserver().removeOnGlobalLayoutListener(this);\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;                ObjectAnimator anim;\n&#x27;
                         &#x27;                if &#x27;
                         &#x27;(TAG_CROP_TOP_AND_SIDES.equals(content.getTag())) {\n&#x27;
                         &#x27;                    &#x27;
                         &#x27;content.setTranslationY(-content.getMeasuredHeight());\n&#x27;
                         &#x27;                    anim = &#x27;
                         &#x27;LauncherAnimUtils.ofFloat(content, &quot;translationY&quot;, &#x27;
                         &#x27;0);\n&#x27;
                         &#x27;                } else {\n&#x27;
                         &#x27;                    content.setScaleX(0);\n&#x27;
                         &#x27;                    content.setScaleY(0);\n&#x27;
                         &#x27;                    PropertyValuesHolder scaleX = &#x27;
                         &#x27;PropertyValuesHolder.ofFloat(&quot;scaleX&quot;, 1);\n&#x27;
                         &#x27;                    PropertyValuesHolder scaleY = &#x27;
                         &#x27;PropertyValuesHolder.ofFloat(&quot;scaleY&quot;, 1);\n&#x27;
                         &#x27;                    anim = &#x27;
                         &#x27;LauncherAnimUtils.ofPropertyValuesHolder(content, &#x27;
                         &#x27;scaleX, scaleY);\n&#x27;
                         &#x27;                }\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;                &#x27;
                         &#x27;anim.setDuration(SHOW_CLING_DURATION);\n&#x27;
                         &#x27;                anim.setInterpolator(new &#x27;
                         &#x27;LogDecelerateInterpolator(100, 0));\n&#x27;
                         &#x27;                anim.start();\n&#x27;
                         &#x27;            }\n&#x27;
                         &#x27;        });\n&#x27;
                         &#x27;    }\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;    private void dismissLongPressCling() {\n&#x27;
                         &#x27;        Runnable dismissCb = new Runnable() {\n&#x27;
                         &#x27;            public void run() {\n&#x27;
                         &#x27;                &#x27;
                         &#x27;dismissCling(mLauncher.findViewById(R.id.longpress_cling), &#x27;
                         &#x27;null,\n&#x27;
                         &#x27;                        &#x27;
                         &#x27;WORKSPACE_CLING_DISMISSED_KEY, &#x27;
                         &#x27;DISMISS_CLING_DURATION);\n&#x27;
                         &#x27;            }\n&#x27;
                         &#x27;        };\n&#x27;
                         &#x27;        mLauncher.getWorkspace().post(dismissCb);\n&#x27;
                         &#x27;    }\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;    /** Hides the specified Cling */\n&#x27;
                         &#x27;    private void dismissCling(final View cling, &#x27;
                         &#x27;final Runnable postAnimationCb,\n&#x27;
                         &#x27;                              final String flag, int &#x27;
                         &#x27;duration) {\n&#x27;
                         &#x27;        // To catch cases where siblings of &#x27;
                         &#x27;top-level views are made invisible, just check &#x27;
                         &#x27;whether\n&#x27;
                         &#x27;        // the cling is directly set to GONE before &#x27;
                         &#x27;dismissing it.\n&#x27;
                         &#x27;        if (cling != null &amp;&amp; cling.getVisibility() &#x27;
                         &#x27;!= View.GONE) {\n&#x27;
                         &#x27;            final Runnable cleanUpClingCb = new &#x27;
                         &#x27;Runnable() {\n&#x27;
                         &#x27;                public void run() {\n&#x27;
                         &#x27;                    cling.setVisibility(View.GONE);\n&#x27;
                         &#x27;                    &#x27;
                         &#x27;mLauncher.getSharedPrefs().edit()\n&#x27;
                         &#x27;                        .putBoolean(flag, true)\n&#x27;
                         &#x27;                        .apply();\n&#x27;
                         &#x27;                    if (postAnimationCb != null) {\n&#x27;
                         &#x27;                        postAnimationCb.run();\n&#x27;
                         &#x27;                    }\n&#x27;
                         &#x27;                }\n&#x27;
                         &#x27;            };\n&#x27;
                         &#x27;            if (duration &lt;= 0) {\n&#x27;
                         &#x27;                cleanUpClingCb.run();\n&#x27;
                         &#x27;            } else {\n&#x27;
                         &#x27;                &#x27;
                         &#x27;cling.animate().alpha(0).setDuration(duration).withEndAction(cleanUpClingCb);\n&#x27;
                         &#x27;            }\n&#x27;
                         &#x27;        }\n&#x27;
                         &#x27;    }\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;    /** Returns whether the clings are enabled or &#x27;
                         &#x27;should be shown */\n&#x27;
                         &#x27;    private boolean areClingsEnabled() {\n&#x27;
                         &#x27;        if (DISABLE_CLINGS) {\n&#x27;
                         &#x27;            return false;\n&#x27;
                         &#x27;        }\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;        // disable clings when running in a test &#x27;
                         &#x27;harness\n&#x27;
                         &#x27;        if(ActivityManager.isRunningInTestHarness()) &#x27;
                         &#x27;return false;\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;        // Disable clings for accessibility when &#x27;
                         &#x27;explore by touch is enabled\n&#x27;
                         &#x27;        final AccessibilityManager a11yManager = &#x27;
                         &#x27;(AccessibilityManager) mLauncher.getSystemService(\n&#x27;
                         &#x27;                Launcher.ACCESSIBILITY_SERVICE);\n&#x27;
                         &#x27;        if (a11yManager.isTouchExplorationEnabled()) &#x27;
                         &#x27;{\n&#x27;
                         &#x27;            return false;\n&#x27;
                         &#x27;        }\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;        // Restricted secondary users (child mode) &#x27;
                         &#x27;will potentially have very few apps\n&#x27;
                         &#x27;        // seeded when they start up for the first &#x27;
                         &quot;time. Clings won&#x27;t work well with that\n&quot;
                         &#x27;        boolean supportsLimitedUsers =\n&#x27;
                         &#x27;                android.os.Build.VERSION.SDK_INT &gt;= &#x27;
                         &#x27;android.os.Build.VERSION_CODES.JELLY_BEAN_MR2;\n&#x27;
                         &#x27;        Account[] accounts = &#x27;
                         &#x27;AccountManager.get(mLauncher).getAccounts();\n&#x27;
                         &#x27;        if (supportsLimitedUsers &amp;&amp; accounts.length &#x27;
                         &#x27;== 0) {\n&#x27;
                         &#x27;            UserManager um = (UserManager) &#x27;
                         &#x27;mLauncher.getSystemService(Context.USER_SERVICE);\n&#x27;
                         &#x27;            Bundle restrictions = &#x27;
                         &#x27;um.getUserRestrictions();\n&#x27;
                         &#x27;            if &#x27;
                         &#x27;(restrictions.getBoolean(UserManager.DISALLOW_MODIFY_ACCOUNTS, &#x27;
                         &#x27;false)) {\n&#x27;
                         &#x27;                return false;\n&#x27;
                         &#x27;            }\n&#x27;
                         &#x27;        }\n&#x27;
                         &#x27;        if &#x27;
                         &#x27;(Settings.Secure.getInt(mLauncher.getContentResolver(), &#x27;
                         &#x27;SKIP_FIRST_USE_HINTS, 0)\n&#x27;
                         &#x27;                == 1) {\n&#x27;
                         &#x27;            return false;\n&#x27;
                         &#x27;        }\n&#x27;
                         &#x27;        return true;\n&#x27;
                         &#x27;    }\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;    public boolean &#x27;
                         &#x27;shouldShowFirstRunOrMigrationClings() {\n&#x27;
                         &#x27;        SharedPreferences sharedPrefs = &#x27;
                         &#x27;mLauncher.getSharedPrefs();\n&#x27;
                         &#x27;        return areClingsEnabled() &amp;&amp;\n&#x27;
                         &#x27;            &#x27;
                         &#x27;!sharedPrefs.getBoolean(WORKSPACE_CLING_DISMISSED_KEY, &#x27;
                         &#x27;false) &amp;&amp;\n&#x27;
                         &#x27;            &#x27;
                         &#x27;!sharedPrefs.getBoolean(MIGRATION_CLING_DISMISSED_KEY, &#x27;
                         &#x27;false);\n&#x27;
                         &#x27;    }\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;    public static void &#x27;
                         &#x27;synchonouslyMarkFirstRunClingDismissed(Context ctx) &#x27;
                         &#x27;{\n&#x27;
                         &#x27;        SharedPreferences prefs = &#x27;
                         &#x27;ctx.getSharedPreferences(\n&#x27;
                         &#x27;                &#x27;
                         &#x27;LauncherAppState.getSharedPreferencesKey(), &#x27;
                         &#x27;Context.MODE_PRIVATE);\n&#x27;
                         &#x27;        SharedPreferences.Editor editor = &#x27;
                         &#x27;prefs.edit();\n&#x27;
                         &#x27;        &#x27;
                         &#x27;editor.putBoolean(WORKSPACE_CLING_DISMISSED_KEY, &#x27;
                         &#x27;true);\n&#x27;
                         &#x27;        editor.commit();\n&#x27;,
           &#x27;CHUNK_THEIRS&#x27;: &#x27;import android.animation.Animator;\n&#x27;
                           &#x27;import android.animation.AnimatorListenerAdapter;\n&#x27;
                           &#x27;import android.app.ActivityManager;\n&#x27;
                           &#x27;import android.content.Context;\n&#x27;
                           &#x27;import android.content.SharedPreferences;\n&#x27;
                           &#x27;import android.os.Bundle;\n&#x27;
                           &#x27;import android.os.UserManager;\n&#x27;
                           &#x27;import android.view.LayoutInflater;\n&#x27;
                           &#x27;import android.view.View;\n&#x27;
                           &#x27;import android.view.ViewGroup;\n&#x27;
                           &#x27;import &#x27;
                           &#x27;android.view.accessibility.AccessibilityManager;\n&#x27;
                           &#x27;import android.widget.TextView;\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;class LauncherClings {\n&#x27;
                           &#x27;    private static final String &#x27;
                           &#x27;FIRST_RUN_CLING_DISMISSED_KEY = &#x27;
                           &#x27;&quot;cling_gel.first_run.dismissed&quot;;\n&#x27;
                           &#x27;    private static final String &#x27;
                           &#x27;MIGRATION_CLING_DISMISSED_KEY = &#x27;
                           &#x27;&quot;cling_gel.migration.dismissed&quot;;\n&#x27;
                           &#x27;    private static final String &#x27;
                           &#x27;MIGRATION_WORKSPACE_CLING_DISMISSED_KEY = &#x27;
                           &#x27;&quot;cling_gel.migration.dismissed&quot;;\n&#x27;
                           &#x27;    private static final String &#x27;
                           &#x27;WORKSPACE_CLING_DISMISSED_KEY = &#x27;
                           &#x27;&quot;cling_gel.workspace.dismissed&quot;;\n&#x27;
                           &#x27;    private static final String &#x27;
                           &#x27;FOLDER_CLING_DISMISSED_KEY = &#x27;
                           &#x27;&quot;cling_gel.folder.dismissed&quot;;\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    private static final boolean DISABLE_CLINGS = &#x27;
                           &#x27;false;\n&#x27;
                           &#x27;    private static final boolean &#x27;
                           &#x27;DISABLE_CUSTOM_CLINGS = true;\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    private static final int SHOW_CLING_DURATION = &#x27;
                           &#x27;250;\n&#x27;
                           &#x27;    private static final int &#x27;
                           &#x27;DISMISS_CLING_DURATION = 200;\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    private Launcher mLauncher;\n&#x27;
                           &#x27;    private LayoutInflater mInflater;\n&#x27;
                           &#x27;    private HideFromAccessibilityHelper &#x27;
                           &#x27;mHideFromAccessibilityHelper\n&#x27;
                           &#x27;            = new HideFromAccessibilityHelper();\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    /** Ctor */\n&#x27;
                           &#x27;    public LauncherClings(Launcher launcher) {\n&#x27;
                           &#x27;        mLauncher = launcher;\n&#x27;
                           &#x27;        mInflater = &#x27;
                           &#x27;mLauncher.getLayoutInflater();\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    /** Initializes a cling */\n&#x27;
                           &#x27;    private Cling initCling(int clingId, int &#x27;
                           &#x27;scrimId, boolean animate,\n&#x27;
                           &#x27;                            boolean &#x27;
                           &#x27;dimNavBarVisibilty) {\n&#x27;
                           &#x27;        Cling cling = (Cling) &#x27;
                           &#x27;mLauncher.findViewById(clingId);\n&#x27;
                           &#x27;        View scrim = null;\n&#x27;
                           &#x27;        if (scrimId &gt; 0) {\n&#x27;
                           &#x27;            scrim = &#x27;
                           &#x27;mLauncher.findViewById(R.id.cling_scrim);\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;        if (cling != null) {\n&#x27;
                           &#x27;            cling.init(mLauncher, scrim);\n&#x27;
                           &#x27;            cling.show(animate, &#x27;
                           &#x27;SHOW_CLING_DURATION);\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;            if (dimNavBarVisibilty) {\n&#x27;
                           &#x27;                &#x27;
                           &#x27;cling.setSystemUiVisibility(cling.getSystemUiVisibility() &#x27;
                           &#x27;|\n&#x27;
                           &#x27;                        &#x27;
                           &#x27;View.SYSTEM_UI_FLAG_LOW_PROFILE);\n&#x27;
                           &#x27;            }\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;        return cling;\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    /** Returns whether the clings are enabled or &#x27;
                           &#x27;should be shown */\n&#x27;
                           &#x27;    private boolean isClingsEnabled() {\n&#x27;
                           &#x27;        if (DISABLE_CLINGS) {\n&#x27;
                           &#x27;            return false;\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;        // For now, limit only to phones\n&#x27;
                           &#x27;        LauncherAppState app = &#x27;
                           &#x27;LauncherAppState.getInstance();\n&#x27;
                           &#x27;        DeviceProfile grid = &#x27;
                           &#x27;app.getDynamicGrid().getDeviceProfile();\n&#x27;
                           &#x27;        if (grid.isTablet()) {\n&#x27;
                           &#x27;            return false;\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;        if (grid.isLandscape) {\n&#x27;
                           &#x27;            return false;\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;        // disable clings when running in a test &#x27;
                           &#x27;harness\n&#x27;
                           &#x27;        &#x27;
                           &#x27;if(ActivityManager.isRunningInTestHarness()) &#x27;
                           &#x27;return false;\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;        // Disable clings for accessibility when &#x27;
                           &#x27;explore by touch is enabled\n&#x27;
                           &#x27;        final AccessibilityManager a11yManager = &#x27;
                           &#x27;(AccessibilityManager) &#x27;
                           &#x27;mLauncher.getSystemService(\n&#x27;
                           &#x27;                Launcher.ACCESSIBILITY_SERVICE);\n&#x27;
                           &#x27;        if &#x27;
                           &#x27;(a11yManager.isTouchExplorationEnabled()) {\n&#x27;
                           &#x27;            return false;\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;        // Restricted secondary users (child mode) &#x27;
                           &#x27;will potentially have very few apps\n&#x27;
                           &#x27;        // seeded when they start up for the first &#x27;
                           &quot;time. Clings won&#x27;t work well with that\n&quot;
                           &#x27;        boolean supportsLimitedUsers =\n&#x27;
                           &#x27;                android.os.Build.VERSION.SDK_INT &#x27;
                           &#x27;&gt;= android.os.Build.VERSION_CODES.JELLY_BEAN_MR2;\n&#x27;
                           &#x27;        Account[] accounts = &#x27;
                           &#x27;AccountManager.get(mLauncher).getAccounts();\n&#x27;
                           &#x27;        if (supportsLimitedUsers &amp;&amp; &#x27;
                           &#x27;accounts.length == 0) {\n&#x27;
                           &#x27;            UserManager um = (UserManager) &#x27;
                           &#x27;mLauncher.getSystemService(Context.USER_SERVICE);\n&#x27;
                           &#x27;            Bundle restrictions = &#x27;
                           &#x27;um.getUserRestrictions();\n&#x27;
                           &#x27;            if &#x27;
                           &#x27;(restrictions.getBoolean(UserManager.DISALLOW_MODIFY_ACCOUNTS, &#x27;
                           &#x27;false)) {\n&#x27;
                           &#x27;                return false;\n&#x27;
                           &#x27;            }\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;        return true;\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    /** Returns whether the folder cling is &#x27;
                           &#x27;visible. */\n&#x27;
                           &#x27;    public boolean isFolderClingVisible() {\n&#x27;
                           &#x27;        Cling cling = (Cling) &#x27;
                           &#x27;mLauncher.findViewById(R.id.folder_cling);\n&#x27;
                           &#x27;        if (cling != null) {\n&#x27;
                           &#x27;            return cling.getVisibility() == &#x27;
                           &#x27;View.VISIBLE;\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;        return false;\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    private boolean skipCustomClingIfNoAccounts() &#x27;
                           &#x27;{\n&#x27;
                           &#x27;        Cling cling = (Cling) &#x27;
                           &#x27;mLauncher.findViewById(R.id.workspace_cling);\n&#x27;
                           &#x27;        boolean customCling = &#x27;
                           &#x27;cling.getDrawIdentifier().equals(&quot;workspace_custom&quot;);\n&#x27;
                           &#x27;        if (customCling) {\n&#x27;
                           &#x27;            AccountManager am = &#x27;
                           &#x27;AccountManager.get(mLauncher);\n&#x27;
                           &#x27;            if (am == null) return false;\n&#x27;
                           &#x27;            Account[] accounts = &#x27;
                           &#x27;am.getAccountsByType(&quot;com.google&quot;);\n&#x27;
                           &#x27;            return accounts.length == 0;\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;        return false;\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    /** Updates the first run cling custom content &#x27;
                           &#x27;hint */\n&#x27;
                           &#x27;    private void &#x27;
                           &#x27;setCustomContentHintVisibility(Cling cling, String &#x27;
                           &#x27;ccHintStr, boolean visible,\n&#x27;
                           &#x27;                                                &#x27;
                           &#x27;boolean animate) {\n&#x27;
                           &#x27;        final TextView ccHint = (TextView) &#x27;
                           &#x27;cling.findViewById(R.id.custom_content_hint);\n&#x27;
                           &#x27;        if (ccHint != null) {\n&#x27;
                           &#x27;            if (visible &amp;&amp; !ccHintStr.isEmpty()) &#x27;
                           &#x27;{\n&#x27;
                           &#x27;                ccHint.setText(ccHintStr);\n&#x27;
                           &#x27;                &#x27;
                           &#x27;ccHint.setVisibility(View.VISIBLE);\n&#x27;
                           &#x27;                if (animate) {\n&#x27;
                           &#x27;                    ccHint.setAlpha(0f);\n&#x27;
                           &#x27;                    ccHint.animate().alpha(1f)\n&#x27;
                           &#x27;                            &#x27;
                           &#x27;.setDuration(SHOW_CLING_DURATION)\n&#x27;
                           &#x27;                            .start();\n&#x27;
                           &#x27;                } else {\n&#x27;
                           &#x27;                    ccHint.setAlpha(1f);\n&#x27;
                           &#x27;                }\n&#x27;
                           &#x27;            } else {\n&#x27;
                           &#x27;                if (animate) {\n&#x27;
                           &#x27;                    ccHint.animate().alpha(0f)\n&#x27;
                           &#x27;                            &#x27;
                           &#x27;.setDuration(SHOW_CLING_DURATION)\n&#x27;
                           &#x27;                            .setListener(new &#x27;
                           &#x27;AnimatorListenerAdapter() {\n&#x27;
                           &#x27;                                @Override\n&#x27;
                           &#x27;                                public void &#x27;
                           &#x27;onAnimationEnd(Animator animation) {\n&#x27;
                           &#x27;                                    &#x27;
                           &#x27;ccHint.setVisibility(View.GONE);\n&#x27;
                           &#x27;                                }\n&#x27;
                           &#x27;                            })\n&#x27;
                           &#x27;                            .start();\n&#x27;
                           &#x27;                } else {\n&#x27;
                           &#x27;                    ccHint.setAlpha(0f);\n&#x27;
                           &#x27;                    &#x27;
                           &#x27;ccHint.setVisibility(View.GONE);\n&#x27;
                           &#x27;                }\n&#x27;
                           &#x27;            }\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    /** Updates the first run cling custom content &#x27;
                           &#x27;hint */\n&#x27;
                           &#x27;    public void &#x27;
                           &#x27;updateCustomContentHintVisibility() {\n&#x27;
                           &#x27;        Cling cling = (Cling) &#x27;
                           &#x27;mLauncher.findViewById(R.id.first_run_cling);\n&#x27;
                           &#x27;        String ccHintStr = &#x27;
                           &#x27;mLauncher.getFirstRunCustomContentHint();\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;        if &#x27;
                           &#x27;(mLauncher.getWorkspace().hasCustomContent()) {\n&#x27;
                           &#x27;            // Show the custom content hint if &#x27;
                           &#x27;ccHintStr is not empty\n&#x27;
                           &#x27;            if (cling != null) {\n&#x27;
                           &#x27;                &#x27;
                           &#x27;setCustomContentHintVisibility(cling, ccHintStr, &#x27;
                           &#x27;true, true);\n&#x27;
                           &#x27;            }\n&#x27;
                           &#x27;        } else {\n&#x27;
                           &#x27;            // Hide the custom content hint\n&#x27;
                           &#x27;            if (cling != null) {\n&#x27;
                           &#x27;                &#x27;
                           &#x27;setCustomContentHintVisibility(cling, ccHintStr, &#x27;
                           &#x27;false, true);\n&#x27;
                           &#x27;            }\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    /** Updates the first run cling search bar &#x27;
                           &#x27;hint. */\n&#x27;
                           &#x27;    public void updateSearchBarHint(String hint) &#x27;
                           &#x27;{\n&#x27;
                           &#x27;        Cling cling = (Cling) &#x27;
                           &#x27;mLauncher.findViewById(R.id.first_run_cling);\n&#x27;
                           &#x27;        if (cling != null &amp;&amp; cling.getVisibility() &#x27;
                           &#x27;== View.VISIBLE &amp;&amp; !hint.isEmpty()) {\n&#x27;
                           &#x27;            TextView sbHint = (TextView) &#x27;
                           &#x27;cling.findViewById(R.id.search_bar_hint);\n&#x27;
                           &#x27;            sbHint.setText(hint);\n&#x27;
                           &#x27;            sbHint.setVisibility(View.VISIBLE);\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    public boolean &#x27;
                           &#x27;shouldShowFirstRunOrMigrationClings() {\n&#x27;
                           &#x27;        SharedPreferences sharedPrefs = &#x27;
                           &#x27;mLauncher.getSharedPrefs();\n&#x27;
                           &#x27;        return isClingsEnabled() &amp;&amp;\n&#x27;
                           &#x27;            &#x27;
                           &#x27;!sharedPrefs.getBoolean(FIRST_RUN_CLING_DISMISSED_KEY, &#x27;
                           &#x27;false) &amp;&amp;\n&#x27;
                           &#x27;            &#x27;
                           &#x27;!sharedPrefs.getBoolean(MIGRATION_CLING_DISMISSED_KEY, &#x27;
                           &#x27;false);\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    public void removeFirstRunAndMigrationClings() &#x27;
                           &#x27;{\n&#x27;
                           &#x27;        removeCling(R.id.first_run_cling);\n&#x27;
                           &#x27;        removeCling(R.id.migration_cling);\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    /**\n&#x27;
                           &#x27;     * Shows the first run cling.\n&#x27;
                           &#x27;     *\n&#x27;
                           &#x27;     * This flow is mutually exclusive with &#x27;
                           &#x27;showMigrationCling, and only runs if this &#x27;
                           &#x27;Launcher\n&#x27;
                           &#x27;     * package was preinstalled or there is no db &#x27;
                           &#x27;to migrate from.\n&#x27;
                           &#x27;     */\n&#x27;
                           &#x27;    public void showFirstRunCling() {\n&#x27;
                           &#x27;        if (!skipCustomClingIfNoAccounts()) {\n&#x27;
                           &#x27;            SharedPreferences sharedPrefs = &#x27;
                           &#x27;mLauncher.getSharedPrefs();\n&#x27;
                           &quot;            // If we&#x27;re not using the default &quot;
                           &#x27;workspace layout, replace workspace cling\n&#x27;
                           &#x27;            // with a custom workspace cling &#x27;
                           &#x27;(usually specified in an overlay)\n&#x27;
                           &#x27;            // For now, only do this on tablets\n&#x27;
                           &#x27;            if (!DISABLE_CUSTOM_CLINGS) {\n&#x27;
                           &#x27;                if &#x27;
                           &#x27;(sharedPrefs.getInt(LauncherProvider.DEFAULT_WORKSPACE_RESOURCE_ID, &#x27;
                           &#x27;0) != 0 &amp;&amp;\n&#x27;
                           &#x27;                        &#x27;
                           &#x27;mLauncher.getResources().getBoolean(R.bool.config_useCustomClings)) &#x27;
                           &#x27;{\n&#x27;
                           &#x27;                    // Use a custom cling\n&#x27;
                           &#x27;                    View cling = &#x27;
                           &#x27;mLauncher.findViewById(R.id.workspace_cling);\n&#x27;
                           &#x27;                    ViewGroup clingParent = &#x27;
                           &#x27;(ViewGroup) cling.getParent();\n&#x27;
                           &#x27;                    int clingIndex = &#x27;
                           &#x27;clingParent.indexOfChild(cling);\n&#x27;
                           &#x27;                    &#x27;
                           &#x27;clingParent.removeViewAt(clingIndex);\n&#x27;
                           &#x27;                    View customCling = &#x27;
                           &#x27;mInflater.inflate(R.layout.custom_workspace_cling,\n&#x27;
                           &#x27;                            clingParent, false);\n&#x27;
                           &#x27;                    &#x27;
                           &#x27;clingParent.addView(customCling, clingIndex);\n&#x27;
                           &#x27;                    &#x27;
                           &#x27;customCling.setId(R.id.workspace_cling);\n&#x27;
                           &#x27;                }\n&#x27;
                           &#x27;            }\n&#x27;
                           &#x27;            Cling cling = (Cling) &#x27;
                           &#x27;mLauncher.findViewById(R.id.first_run_cling);\n&#x27;
                           &#x27;            if (cling != null) {\n&#x27;
                           &#x27;                String sbHintStr = &#x27;
                           &#x27;mLauncher.getFirstRunClingSearchBarHint();\n&#x27;
                           &#x27;                String ccHintStr = &#x27;
                           &#x27;mLauncher.getFirstRunCustomContentHint();\n&#x27;
                           &#x27;                if (!sbHintStr.isEmpty()) {\n&#x27;
                           &#x27;                    TextView sbHint = (TextView) &#x27;
                           &#x27;cling.findViewById(R.id.search_bar_hint);\n&#x27;
                           &#x27;                    sbHint.setText(sbHintStr);\n&#x27;
                           &#x27;                    &#x27;
                           &#x27;sbHint.setVisibility(View.VISIBLE);\n&#x27;
                           &#x27;                }\n&#x27;
                           &#x27;                &#x27;
                           &#x27;setCustomContentHintVisibility(cling, ccHintStr, &#x27;
                           &#x27;true, false);\n&#x27;
                           &#x27;            }\n&#x27;
                           &#x27;            initCling(R.id.first_run_cling, 0, &#x27;
                           &#x27;false, true);\n&#x27;
                           &#x27;        } else {\n&#x27;
                           &#x27;            removeFirstRunAndMigrationClings();\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    /**\n&#x27;
                           &#x27;     * Shows the migration cling.\n&#x27;
                           &#x27;     *\n&#x27;
                           &#x27;     * This flow is mutually exclusive with &#x27;
                           &#x27;showFirstRunCling, and only runs if this Launcher\n&#x27;
                           &#x27;     * package was not preinstalled and there &#x27;
                           &#x27;exists a db to migrate from.\n&#x27;
                           &#x27;     */\n&#x27;
                           &#x27;    public void showMigrationCling() {\n&#x27;
                           &#x27;        &#x27;
                           &#x27;mLauncher.hideWorkspaceSearchAndHotseat();\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;        Cling c = initCling(R.id.migration_cling, &#x27;
                           &#x27;0, false, true);\n&#x27;
                           &#x27;        c.bringScrimToFront();\n&#x27;
                           &#x27;        c.bringToFront();\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    public void showMigrationWorkspaceCling() {\n&#x27;
                           &#x27;        // Enable the clings only if they have not &#x27;
                           &#x27;been dismissed before\n&#x27;
                           &#x27;        if (isClingsEnabled() &amp;&amp; &#x27;
                           &#x27;!mLauncher.getSharedPrefs().getBoolean(\n&#x27;
                           &#x27;                &#x27;
                           &#x27;MIGRATION_WORKSPACE_CLING_DISMISSED_KEY, false)) &#x27;
                           &#x27;{\n&#x27;
                           &#x27;            Cling c = &#x27;
                           &#x27;initCling(R.id.migration_workspace_cling, 0, &#x27;
                           &#x27;false, true);\n&#x27;
                           &#x27;            &#x27;
                           &#x27;c.updateMigrationWorkspaceBubblePosition();\n&#x27;
                           &#x27;            c.bringScrimToFront();\n&#x27;
                           &#x27;            c.bringToFront();\n&#x27;
                           &#x27;        } else {\n&#x27;
                           &#x27;            &#x27;
                           &#x27;removeCling(R.id.migration_workspace_cling);\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    public void showWorkspaceCling() {\n&#x27;
                           &#x27;        // Enable the clings only if they have not &#x27;
                           &#x27;been dismissed before\n&#x27;
                           &#x27;        if (isClingsEnabled() &amp;&amp; &#x27;
                           &#x27;!mLauncher.getSharedPrefs().getBoolean(\n&#x27;
                           &#x27;                WORKSPACE_CLING_DISMISSED_KEY, &#x27;
                           &#x27;false)) {\n&#x27;
                           &#x27;            Cling c = &#x27;
                           &#x27;initCling(R.id.workspace_cling, 0, false, true);\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;            // Set the focused hotseat app if &#x27;
                           &#x27;there is one\n&#x27;
                           &#x27;            &#x27;
                           &#x27;c.setFocusedHotseatApp(mLauncher.getFirstRunFocusedHotseatAppDrawableId(),\n&#x27;
                           &#x27;                    &#x27;
                           &#x27;mLauncher.getFirstRunFocusedHotseatAppRank(),\n&#x27;
                           &#x27;                    &#x27;
                           &#x27;mLauncher.getFirstRunFocusedHotseatAppComponentName(),\n&#x27;
                           &#x27;                    &#x27;
                           &#x27;mLauncher.getFirstRunFocusedHotseatAppBubbleTitle(),\n&#x27;
                           &#x27;                    &#x27;
                           &#x27;mLauncher.getFirstRunFocusedHotseatAppBubbleDescription());\n&#x27;
                           &#x27;        } else {\n&#x27;
                           &#x27;            removeCling(R.id.workspace_cling);\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;    public Cling showFoldersCling() {\n&#x27;
                           &#x27;        SharedPreferences sharedPrefs = &#x27;
                           &#x27;mLauncher.getSharedPrefs();\n&#x27;
                           &#x27;        // Enable the clings only if they have not &#x27;
                           &#x27;been dismissed before\n&#x27;
                           &#x27;        if (isClingsEnabled() &amp;&amp;\n&#x27;
                           &#x27;                &#x27;
                           &#x27;!sharedPrefs.getBoolean(FOLDER_CLING_DISMISSED_KEY, &#x27;
                           &#x27;false) &amp;&amp;\n&#x27;
                           &#x27;                &#x27;
                           &#x27;!sharedPrefs.getBoolean(Launcher.USER_HAS_MIGRATED, &#x27;
                           &#x27;false)) {\n&#x27;
                           &#x27;            Cling cling = &#x27;
                           &#x27;initCling(R.id.folder_cling, R.id.cling_scrim,\n&#x27;
                           &#x27;                    true, true);\n&#x27;
                           &#x27;            return cling;\n&#x27;
                           &#x27;        } else {\n&#x27;
                           &#x27;            removeCling(R.id.folder_cling);\n&#x27;
                           &#x27;            return null;\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    /** Removes the cling outright from the &#x27;
                           &#x27;DragLayer */\n&#x27;
                           &#x27;    private void removeCling(int id) {\n&#x27;
                           &#x27;        final View cling = &#x27;
                           &#x27;mLauncher.findViewById(id);\n&#x27;
                           &#x27;        if (cling != null) {\n&#x27;
                           &#x27;            final ViewGroup parent = (ViewGroup) &#x27;
                           &#x27;cling.getParent();\n&#x27;
                           &#x27;            parent.post(new Runnable() {\n&#x27;
                           &#x27;                @Override\n&#x27;
                           &#x27;                public void run() {\n&#x27;
                           &#x27;                    parent.removeView(cling);\n&#x27;
                           &#x27;                }\n&#x27;
                           &#x27;            });\n&#x27;
                           &#x27;            &#x27;
                           &#x27;mHideFromAccessibilityHelper.restoreImportantForAccessibility(mLauncher.getDragLayer());\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    /** Hides the specified Cling */\n&#x27;
                           &#x27;    private void dismissCling(final Cling cling, &#x27;
                           &#x27;final Runnable postAnimationCb,\n&#x27;
                           &#x27;                              final String flag, &#x27;
                           &#x27;int duration, boolean restoreNavBarVisibilty) {\n&#x27;
                           &#x27;        // To catch cases where siblings of &#x27;
                           &#x27;top-level views are made invisible, just check &#x27;
                           &#x27;whether\n&#x27;
                           &#x27;        // the cling is directly set to GONE &#x27;
                           &#x27;before dismissing it.\n&#x27;
                           &#x27;        if (cling != null &amp;&amp; cling.getVisibility() &#x27;
                           &#x27;!= View.GONE) {\n&#x27;
                           &#x27;            final Runnable cleanUpClingCb = new &#x27;
                           &#x27;Runnable() {\n&#x27;
                           &#x27;                public void run() {\n&#x27;
                           &#x27;                    cling.cleanup();\n&#x27;
                           &#x27;                    SharedPreferences.Editor &#x27;
                           &#x27;editor = mLauncher.getSharedPrefs().edit();\n&#x27;
                           &#x27;                    editor.putBoolean(flag, &#x27;
                           &#x27;true);\n&#x27;
                           &#x27;                    editor.apply();\n&#x27;
                           &#x27;                    if (postAnimationCb != null) &#x27;
                           &#x27;{\n&#x27;
                           &#x27;                        postAnimationCb.run();\n&#x27;
                           &#x27;                    }\n&#x27;
                           &#x27;                }\n&#x27;
                           &#x27;            };\n&#x27;
                           &#x27;            if (duration &lt;= 0) {\n&#x27;
                           &#x27;                cleanUpClingCb.run();\n&#x27;
                           &#x27;            } else {\n&#x27;
                           &#x27;                cling.hide(duration, &#x27;
                           &#x27;cleanUpClingCb);\n&#x27;
                           &#x27;            }\n&#x27;
                           &#x27;            &#x27;
                           &#x27;mHideFromAccessibilityHelper.restoreImportantForAccessibility(mLauncher.getDragLayer());\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;            if (restoreNavBarVisibilty) {\n&#x27;
                           &#x27;                &#x27;
                           &#x27;cling.setSystemUiVisibility(cling.getSystemUiVisibility() &#x27;
                           &#x27;&amp;\n&#x27;
                           &#x27;                        &#x27;
                           &#x27;~View.SYSTEM_UI_FLAG_LOW_PROFILE);\n&#x27;
                           &#x27;            }\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    public void dismissFirstRunCling(View v) {\n&#x27;
                           &#x27;        Cling cling = (Cling) &#x27;
                           &#x27;mLauncher.findViewById(R.id.first_run_cling);\n&#x27;
                           &#x27;        Runnable cb = new Runnable() {\n&#x27;
                           &#x27;            public void run() {\n&#x27;
                           &#x27;                // Show the workspace cling next\n&#x27;
                           &#x27;                showWorkspaceCling();\n&#x27;
                           &#x27;            }\n&#x27;
                           &#x27;        };\n&#x27;
                           &#x27;        dismissCling(cling, cb, &#x27;
                           &#x27;FIRST_RUN_CLING_DISMISSED_KEY,\n&#x27;
                           &#x27;                DISMISS_CLING_DURATION, false);\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;        // Fade out the search bar for the &#x27;
                           &#x27;workspace cling coming up\n&#x27;
                           &#x27;        &#x27;
                           &#x27;mLauncher.getSearchBar().hideSearchBar(true);\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    private void dismissMigrationCling() {\n&#x27;
                           &#x27;        &#x27;
                           &#x27;mLauncher.showWorkspaceSearchAndHotseat();\n&#x27;
                           &#x27;        Runnable dismissCb = new Runnable() {\n&#x27;
                           &#x27;            public void run() {\n&#x27;
                           &#x27;                Cling cling = (Cling) &#x27;
                           &#x27;mLauncher.findViewById(R.id.migration_cling);\n&#x27;
                           &#x27;                Runnable cb = new Runnable() {\n&#x27;
                           &#x27;                    public void run() {\n&#x27;
                           &#x27;                        // Show the migration &#x27;
                           &#x27;workspace cling next\n&#x27;
                           &#x27;                        &#x27;
                           &#x27;showMigrationWorkspaceCling();\n&#x27;
                           &#x27;                    }\n&#x27;
                           &#x27;                };\n&#x27;
                           &#x27;                dismissCling(cling, cb, &#x27;
                           &#x27;WORKSPACE_CLING_DISMISSED_KEY,\n&#x27;
                           &#x27;                        DISMISS_CLING_DURATION, &#x27;
                           &#x27;true);\n&#x27;
                           &#x27;            }\n&#x27;
                           &#x27;        };\n&#x27;
                           &#x27;        mLauncher.getWorkspace().post(dismissCb);\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    private void dismissAnyWorkspaceCling(Cling &#x27;
                           &#x27;cling, View v) {\n&#x27;
                           &#x27;        Runnable cb = null;\n&#x27;
                           &#x27;        if (v == null) {\n&#x27;
                           &#x27;            cb = new Runnable() {\n&#x27;
                           &#x27;                public void run() {\n&#x27;
                           &#x27;                    &#x27;
                           &#x27;mLauncher.getWorkspace().enterOverviewMode();\n&#x27;
                           &#x27;                }\n&#x27;
                           &#x27;            };\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;        dismissCling(cling, cb, &#x27;
                           &#x27;WORKSPACE_CLING_DISMISSED_KEY,\n&#x27;
                           &#x27;                DISMISS_CLING_DURATION, true);\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;        // Fade in the search bar\n&#x27;
                           &#x27;        &#x27;
                           &#x27;mLauncher.getSearchBar().showSearchBar(true);\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    public void dismissMigrationClingCopyApps(View &#x27;
                           &#x27;v) {\n&#x27;
                           &#x27;        // Copy the shortcuts from the old &#x27;
                           &#x27;database\n&#x27;
                           &#x27;        LauncherModel model = &#x27;
                           &#x27;mLauncher.getModel();\n&#x27;
                           &#x27;        model.resetLoadedState(false, true);\n&#x27;
                           &#x27;        model.startLoader(false, &#x27;
                           &#x27;PagedView.INVALID_RESTORE_PAGE,\n&#x27;
                           &#x27;                &#x27;
                           &#x27;LauncherModel.LOADER_FLAG_CLEAR_WORKSPACE\n&#x27;
                           &#x27;                        | &#x27;
                           &#x27;LauncherModel.LOADER_FLAG_MIGRATE_SHORTCUTS);\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;        // Set the flag to skip the folder cling\n&#x27;
                           &#x27;        String spKey = &#x27;
                           &#x27;LauncherAppState.getSharedPreferencesKey();\n&#x27;
                           &#x27;        SharedPreferences sp = &#x27;
                           &#x27;mLauncher.getSharedPreferences(spKey, &#x27;
                           &#x27;Context.MODE_PRIVATE);\n&#x27;
                           &#x27;        SharedPreferences.Editor editor = &#x27;
                           &#x27;sp.edit();\n&#x27;
                           &#x27;        &#x27;
                           &#x27;editor.putBoolean(Launcher.USER_HAS_MIGRATED, &#x27;
                           &#x27;true);\n&#x27;
                           &#x27;        editor.apply();\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;        // Disable the migration cling\n&#x27;
                           &#x27;        dismissMigrationCling();\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    public void &#x27;
                           &#x27;dismissMigrationClingUseDefault(View v) {\n&#x27;
                           &#x27;        // Clear the workspace\n&#x27;
                           &#x27;        LauncherModel model = &#x27;
                           &#x27;mLauncher.getModel();\n&#x27;
                           &#x27;        model.resetLoadedState(false, true);\n&#x27;
                           &#x27;        model.startLoader(false, &#x27;
                           &#x27;PagedView.INVALID_RESTORE_PAGE,\n&#x27;
                           &#x27;                &#x27;
                           &#x27;LauncherModel.LOADER_FLAG_CLEAR_WORKSPACE);\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;        // Disable the migration cling\n&#x27;
                           &#x27;        dismissMigrationCling();\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    public void &#x27;
                           &#x27;dismissMigrationWorkspaceCling(View v) {\n&#x27;
                           &#x27;        Cling cling = (Cling) &#x27;
                           &#x27;mLauncher.findViewById(R.id.migration_workspace_cling);\n&#x27;
                           &#x27;        dismissAnyWorkspaceCling(cling, v);\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    public void dismissWorkspaceCling(View v) {\n&#x27;
                           &#x27;        Cling cling = (Cling) &#x27;
                           &#x27;mLauncher.findViewById(R.id.workspace_cling);\n&#x27;
                           &#x27;        dismissAnyWorkspaceCling(cling, v);\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    public void dismissFolderCling(View v) {\n&#x27;
                           &#x27;        Cling cling = (Cling) &#x27;
                           &#x27;mLauncher.findViewById(R.id.folder_cling);\n&#x27;
                           &#x27;        dismissCling(cling, null, &#x27;
                           &#x27;FOLDER_CLING_DISMISSED_KEY,\n&#x27;
                           &#x27;                DISMISS_CLING_DURATION, true);\n&#x27;}],
   &#x27;mergers&#x27;: {&#x27;jfstmerge&#x27;}}],
 [{&#x27;eq&#x27;: [{&#x27;CHUNK_OURS&#x27;: &#x27;&#x27;,
           &#x27;CHUNK_THEIRS&#x27;: &#x27;    /** Returns whether the folder cling is &#x27;
                           &#x27;visible. */\n&#x27;
                           &#x27;    public boolean isFolderClingVisible() {\n&#x27;
                           &#x27;        Cling cling = (Cling) &#x27;
                           &#x27;mLauncher.findViewById(R.id.folder_cling);\n&#x27;
                           &#x27;        if (cling != null) {\n&#x27;
                           &#x27;            return cling.getVisibility() == &#x27;
                           &#x27;View.VISIBLE;\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;        return false;\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    private boolean skipCustomClingIfNoAccounts() &#x27;
                           &#x27;{\n&#x27;
                           &#x27;        Cling cling = (Cling) &#x27;
                           &#x27;mLauncher.findViewById(R.id.workspace_cling);\n&#x27;
                           &#x27;        boolean customCling = &#x27;
                           &#x27;cling.getDrawIdentifier().equals(&quot;workspace_custom&quot;);\n&#x27;
                           &#x27;        if (customCling) {\n&#x27;
                           &#x27;            AccountManager am = &#x27;
                           &#x27;AccountManager.get(mLauncher);\n&#x27;
                           &#x27;            if (am == null) return false;\n&#x27;
                           &#x27;            Account[] accounts = &#x27;
                           &#x27;am.getAccountsByType(&quot;com.google&quot;);\n&#x27;
                           &#x27;            return accounts.length == 0;\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;        return false;\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    /** Updates the first run cling custom content &#x27;
                           &#x27;hint */\n&#x27;
                           &#x27;    private void &#x27;
                           &#x27;setCustomContentHintVisibility(Cling cling, String &#x27;
                           &#x27;ccHintStr, boolean visible,\n&#x27;
                           &#x27;                                                &#x27;
                           &#x27;boolean animate) {\n&#x27;
                           &#x27;        final TextView ccHint = (TextView) &#x27;
                           &#x27;cling.findViewById(R.id.custom_content_hint);\n&#x27;
                           &#x27;        if (ccHint != null) {\n&#x27;
                           &#x27;            if (visible &amp;&amp; !ccHintStr.isEmpty()) &#x27;
                           &#x27;{\n&#x27;
                           &#x27;                ccHint.setText(ccHintStr);\n&#x27;
                           &#x27;                &#x27;
                           &#x27;ccHint.setVisibility(View.VISIBLE);\n&#x27;
                           &#x27;                if (animate) {\n&#x27;
                           &#x27;                    ccHint.setAlpha(0f);\n&#x27;
                           &#x27;                    ccHint.animate().alpha(1f)\n&#x27;
                           &#x27;                            &#x27;
                           &#x27;.setDuration(SHOW_CLING_DURATION)\n&#x27;
                           &#x27;                            .start();\n&#x27;
                           &#x27;                } else {\n&#x27;
                           &#x27;                    ccHint.setAlpha(1f);\n&#x27;
                           &#x27;                }\n&#x27;
                           &#x27;            } else {\n&#x27;
                           &#x27;                if (animate) {\n&#x27;
                           &#x27;                    ccHint.animate().alpha(0f)\n&#x27;
                           &#x27;                            &#x27;
                           &#x27;.setDuration(SHOW_CLING_DURATION)\n&#x27;
                           &#x27;                            .setListener(new &#x27;
                           &#x27;AnimatorListenerAdapter() {\n&#x27;
                           &#x27;                                @Override\n&#x27;
                           &#x27;                                public void &#x27;
                           &#x27;onAnimationEnd(Animator animation) {\n&#x27;
                           &#x27;                                    &#x27;
                           &#x27;ccHint.setVisibility(View.GONE);\n&#x27;
                           &#x27;                                }\n&#x27;
                           &#x27;                            })\n&#x27;
                           &#x27;                            .start();\n&#x27;
                           &#x27;                } else {\n&#x27;
                           &#x27;                    ccHint.setAlpha(0f);\n&#x27;
                           &#x27;                    &#x27;
                           &#x27;ccHint.setVisibility(View.GONE);\n&#x27;
                           &#x27;                }\n&#x27;
                           &#x27;            }\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    /** Updates the first run cling custom content &#x27;
                           &#x27;hint */\n&#x27;
                           &#x27;    public void &#x27;
                           &#x27;updateCustomContentHintVisibility() {\n&#x27;
                           &#x27;        Cling cling = (Cling) &#x27;
                           &#x27;mLauncher.findViewById(R.id.first_run_cling);\n&#x27;
                           &#x27;        String ccHintStr = &#x27;
                           &#x27;mLauncher.getFirstRunCustomContentHint();\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;        if &#x27;
                           &#x27;(mLauncher.getWorkspace().hasCustomContent()) {\n&#x27;
                           &#x27;            // Show the custom content hint if &#x27;
                           &#x27;ccHintStr is not empty\n&#x27;
                           &#x27;            if (cling != null) {\n&#x27;
                           &#x27;                &#x27;
                           &#x27;setCustomContentHintVisibility(cling, ccHintStr, &#x27;
                           &#x27;true, true);\n&#x27;
                           &#x27;            }\n&#x27;
                           &#x27;        } else {\n&#x27;
                           &#x27;            // Hide the custom content hint\n&#x27;
                           &#x27;            if (cling != null) {\n&#x27;
                           &#x27;                &#x27;
                           &#x27;setCustomContentHintVisibility(cling, ccHintStr, &#x27;
                           &#x27;false, true);\n&#x27;
                           &#x27;            }\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    /** Updates the first run cling search bar &#x27;
                           &#x27;hint. */\n&#x27;
                           &#x27;    public void updateSearchBarHint(String hint) &#x27;
                           &#x27;{\n&#x27;
                           &#x27;        Cling cling = (Cling) &#x27;
                           &#x27;mLauncher.findViewById(R.id.first_run_cling);\n&#x27;
                           &#x27;        if (cling != null &amp;&amp; cling.getVisibility() &#x27;
                           &#x27;== View.VISIBLE &amp;&amp; !hint.isEmpty()) {\n&#x27;
                           &#x27;            TextView sbHint = (TextView) &#x27;
                           &#x27;cling.findViewById(R.id.search_bar_hint);\n&#x27;
                           &#x27;            sbHint.setText(hint);\n&#x27;
                           &#x27;            sbHint.setVisibility(View.VISIBLE);\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;},
          {&#x27;CHUNK_OURS&#x27;: &#x27;import android.animation.ObjectAnimator;\n&#x27;
                         &#x27;import android.animation.PropertyValuesHolder;\n&#x27;
                         &#x27;import android.app.ActivityManager;\n&#x27;
                         &#x27;import android.content.Context;\n&#x27;
                         &#x27;import android.content.SharedPreferences;\n&#x27;
                         &#x27;import android.graphics.drawable.Drawable;\n&#x27;
                         &#x27;import android.os.Bundle;\n&#x27;
                         &#x27;import android.os.UserManager;\n&#x27;
                         &#x27;import android.provider.Settings;\n&#x27;
                         &#x27;import android.view.ContextThemeWrapper;\n&#x27;
                         &#x27;import android.view.LayoutInflater;\n&#x27;
                         &#x27;import android.view.View;\n&#x27;
                         &#x27;import android.view.View.OnClickListener;\n&#x27;
                         &#x27;import android.view.View.OnLongClickListener;\n&#x27;
                         &#x27;import android.view.ViewGroup;\n&#x27;
                         &#x27;import &#x27;
                         &#x27;android.view.ViewTreeObserver.OnGlobalLayoutListener;\n&#x27;
                         &#x27;import &#x27;
                         &#x27;android.view.accessibility.AccessibilityManager;\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;class LauncherClings implements OnClickListener {\n&#x27;
                         &#x27;    private static final String &#x27;
                         &#x27;MIGRATION_CLING_DISMISSED_KEY = &#x27;
                         &#x27;&quot;cling_gel.migration.dismissed&quot;;\n&#x27;
                         &#x27;    private static final String &#x27;
                         &#x27;WORKSPACE_CLING_DISMISSED_KEY = &#x27;
                         &#x27;&quot;cling_gel.workspace.dismissed&quot;;\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;    private static final String &#x27;
                         &#x27;TAG_CROP_TOP_AND_SIDES = &quot;crop_bg_top_and_sides&quot;;\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;    private static final boolean DISABLE_CLINGS = &#x27;
                         &#x27;false;\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;    private static final int SHOW_CLING_DURATION = &#x27;
                         &#x27;250;\n&#x27;
                         &#x27;    private static final int DISMISS_CLING_DURATION &#x27;
                         &#x27;= 200;\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;    // New Secure Setting in L\n&#x27;
                         &#x27;    private static final String SKIP_FIRST_USE_HINTS &#x27;
                         &#x27;= &quot;skip_first_use_hints&quot;;\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;    private Launcher mLauncher;\n&#x27;
                         &#x27;    private LayoutInflater mInflater;\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;    /** Ctor */\n&#x27;
                         &#x27;    public LauncherClings(Launcher launcher) {\n&#x27;
                         &#x27;        mLauncher = launcher;\n&#x27;
                         &#x27;        mInflater = LayoutInflater.from(new\n&#x27;
                         &#x27;                ContextThemeWrapper(mLauncher, &#x27;
                         &#x27;android.R.style.Theme_DeviceDefault));\n&#x27;
                         &#x27;    }\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;    @Override\n&#x27;
                         &#x27;    public void onClick(View v) {\n&#x27;
                         &#x27;        int id = v.getId();\n&#x27;
                         &#x27;        if (id == &#x27;
                         &#x27;R.id.cling_dismiss_migration_use_default) {\n&#x27;
                         &#x27;            // Disable the migration cling\n&#x27;
                         &#x27;            dismissMigrationCling();\n&#x27;
                         &#x27;        } else if (id == &#x27;
                         &#x27;R.id.cling_dismiss_migration_copy_apps) {\n&#x27;
                         &#x27;            // Copy the shortcuts from the old &#x27;
                         &#x27;database\n&#x27;
                         &#x27;            LauncherModel model = &#x27;
                         &#x27;mLauncher.getModel();\n&#x27;
                         &#x27;            model.resetLoadedState(false, true);\n&#x27;
                         &#x27;            model.startLoader(false, &#x27;
                         &#x27;PagedView.INVALID_RESTORE_PAGE,\n&#x27;
                         &#x27;                    &#x27;
                         &#x27;LauncherModel.LOADER_FLAG_CLEAR_WORKSPACE\n&#x27;
                         &#x27;                            | &#x27;
                         &#x27;LauncherModel.LOADER_FLAG_MIGRATE_SHORTCUTS);\n&#x27;
                         &#x27;            // Set the flag to skip the folder &#x27;
                         &#x27;cling\n&#x27;
                         &#x27;            String spKey = &#x27;
                         &#x27;LauncherAppState.getSharedPreferencesKey();\n&#x27;
                         &#x27;            SharedPreferences sp = &#x27;
                         &#x27;mLauncher.getSharedPreferences(spKey, &#x27;
                         &#x27;Context.MODE_PRIVATE);\n&#x27;
                         &#x27;            SharedPreferences.Editor editor = &#x27;
                         &#x27;sp.edit();\n&#x27;
                         &#x27;            &#x27;
                         &#x27;editor.putBoolean(Launcher.USER_HAS_MIGRATED, &#x27;
                         &#x27;true);\n&#x27;
                         &#x27;            editor.apply();\n&#x27;
                         &#x27;            // Disable the migration cling\n&#x27;
                         &#x27;            dismissMigrationCling();\n&#x27;
                         &#x27;        } else if (id == &#x27;
                         &#x27;R.id.cling_dismiss_longpress_info) {\n&#x27;
                         &#x27;            dismissLongPressCling();\n&#x27;
                         &#x27;        }\n&#x27;
                         &#x27;    }\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;    /**\n&#x27;
                         &#x27;     * Shows the migration cling.\n&#x27;
                         &#x27;     *\n&#x27;
                         &#x27;     * This flow is mutually exclusive with &#x27;
                         &#x27;showFirstRunCling, and only runs if this Launcher\n&#x27;
                         &#x27;     * package was not preinstalled and there exists &#x27;
                         &#x27;a db to migrate from.\n&#x27;
                         &#x27;     */\n&#x27;
                         &#x27;    public void showMigrationCling() {\n&#x27;
                         &#x27;        mLauncher.hideWorkspaceSearchAndHotseat();\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;        ViewGroup root = (ViewGroup) &#x27;
                         &#x27;mLauncher.findViewById(R.id.launcher);\n&#x27;
                         &#x27;        View inflated = &#x27;
                         &#x27;mInflater.inflate(R.layout.migration_cling, root);\n&#x27;
                         &#x27;        &#x27;
                         &#x27;inflated.findViewById(R.id.cling_dismiss_migration_copy_apps).setOnClickListener(this);\n&#x27;
                         &#x27;        &#x27;
                         &#x27;inflated.findViewById(R.id.cling_dismiss_migration_use_default).setOnClickListener(this);\n&#x27;
                         &#x27;    }\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;    private void dismissMigrationCling() {\n&#x27;
                         &#x27;        mLauncher.showWorkspaceSearchAndHotseat();\n&#x27;
                         &#x27;        Runnable dismissCb = new Runnable() {\n&#x27;
                         &#x27;            public void run() {\n&#x27;
                         &#x27;                Runnable cb = new Runnable() {\n&#x27;
                         &#x27;                    public void run() {\n&#x27;
                         &#x27;                        // Show the longpress cling &#x27;
                         &#x27;next\n&#x27;
                         &#x27;                        showLongPressCling(false);\n&#x27;
                         &#x27;                    }\n&#x27;
                         &#x27;                };\n&#x27;
                         &#x27;                &#x27;
                         &#x27;dismissCling(mLauncher.findViewById(R.id.migration_cling), &#x27;
                         &#x27;cb,\n&#x27;
                         &#x27;                        &#x27;
                         &#x27;MIGRATION_CLING_DISMISSED_KEY, &#x27;
                         &#x27;DISMISS_CLING_DURATION);\n&#x27;
                         &#x27;            }\n&#x27;
                         &#x27;        };\n&#x27;
                         &#x27;        mLauncher.getWorkspace().post(dismissCb);\n&#x27;
                         &#x27;    }\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;    public void showLongPressCling(boolean &#x27;
                         &#x27;showWelcome) {\n&#x27;
                         &#x27;        ViewGroup root = (ViewGroup) &#x27;
                         &#x27;mLauncher.findViewById(R.id.launcher);\n&#x27;
                         &#x27;        View cling = &#x27;
                         &#x27;mInflater.inflate(R.layout.longpress_cling, root, &#x27;
                         &#x27;false);\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;        cling.setOnLongClickListener(new &#x27;
                         &#x27;OnLongClickListener() {\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;            @Override\n&#x27;
                         &#x27;            public boolean onLongClick(View v) {\n&#x27;
                         &#x27;                &#x27;
                         &#x27;mLauncher.getWorkspace().enterOverviewMode();\n&#x27;
                         &#x27;                dismissLongPressCling();\n&#x27;
                         &#x27;                return true;\n&#x27;
                         &#x27;            }\n&#x27;
                         &#x27;        });\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;        final ViewGroup content = (ViewGroup) &#x27;
                         &#x27;cling.findViewById(R.id.cling_content);\n&#x27;
                         &#x27;        mInflater.inflate(showWelcome ? &#x27;
                         &#x27;R.layout.longpress_cling_welcome_content\n&#x27;
                         &#x27;                : R.layout.longpress_cling_content, &#x27;
                         &#x27;content);\n&#x27;
                         &#x27;        &#x27;
                         &#x27;content.findViewById(R.id.cling_dismiss_longpress_info).setOnClickListener(this);\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;        if &#x27;
                         &#x27;(TAG_CROP_TOP_AND_SIDES.equals(content.getTag())) {\n&#x27;
                         &#x27;            Drawable bg = new &#x27;
                         &#x27;BorderCropDrawable(mLauncher.getResources().getDrawable(R.drawable.cling_bg),\n&#x27;
                         &#x27;                    true, true, true, false);\n&#x27;
                         &#x27;            content.setBackground(bg);\n&#x27;
                         &#x27;        }\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;        root.addView(cling);\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;        if (showWelcome) {\n&#x27;
                         &#x27;            // This is the first cling being shown. &#x27;
                         &#x27;No need to animate.\n&#x27;
                         &#x27;            return;\n&#x27;
                         &#x27;        }\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;        // Animate\n&#x27;
                         &#x27;        &#x27;
                         &#x27;content.getViewTreeObserver().addOnGlobalLayoutListener(new &#x27;
                         &#x27;OnGlobalLayoutListener() {\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;            @Override\n&#x27;
                         &#x27;            public void onGlobalLayout() {\n&#x27;
                         &#x27;                &#x27;
                         &#x27;content.getViewTreeObserver().removeOnGlobalLayoutListener(this);\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;                ObjectAnimator anim;\n&#x27;
                         &#x27;                if &#x27;
                         &#x27;(TAG_CROP_TOP_AND_SIDES.equals(content.getTag())) {\n&#x27;
                         &#x27;                    &#x27;
                         &#x27;content.setTranslationY(-content.getMeasuredHeight());\n&#x27;
                         &#x27;                    anim = &#x27;
                         &#x27;LauncherAnimUtils.ofFloat(content, &quot;translationY&quot;, &#x27;
                         &#x27;0);\n&#x27;
                         &#x27;                } else {\n&#x27;
                         &#x27;                    content.setScaleX(0);\n&#x27;
                         &#x27;                    content.setScaleY(0);\n&#x27;
                         &#x27;                    PropertyValuesHolder scaleX = &#x27;
                         &#x27;PropertyValuesHolder.ofFloat(&quot;scaleX&quot;, 1);\n&#x27;
                         &#x27;                    PropertyValuesHolder scaleY = &#x27;
                         &#x27;PropertyValuesHolder.ofFloat(&quot;scaleY&quot;, 1);\n&#x27;
                         &#x27;                    anim = &#x27;
                         &#x27;LauncherAnimUtils.ofPropertyValuesHolder(content, &#x27;
                         &#x27;scaleX, scaleY);\n&#x27;
                         &#x27;                }\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;                &#x27;
                         &#x27;anim.setDuration(SHOW_CLING_DURATION);\n&#x27;
                         &#x27;                anim.setInterpolator(new &#x27;
                         &#x27;LogDecelerateInterpolator(100, 0));\n&#x27;
                         &#x27;                anim.start();\n&#x27;
                         &#x27;            }\n&#x27;
                         &#x27;        });\n&#x27;
                         &#x27;    }\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;    private void dismissLongPressCling() {\n&#x27;
                         &#x27;        Runnable dismissCb = new Runnable() {\n&#x27;
                         &#x27;            public void run() {\n&#x27;
                         &#x27;                &#x27;
                         &#x27;dismissCling(mLauncher.findViewById(R.id.longpress_cling), &#x27;
                         &#x27;null,\n&#x27;
                         &#x27;                        &#x27;
                         &#x27;WORKSPACE_CLING_DISMISSED_KEY, &#x27;
                         &#x27;DISMISS_CLING_DURATION);\n&#x27;
                         &#x27;            }\n&#x27;
                         &#x27;        };\n&#x27;
                         &#x27;        mLauncher.getWorkspace().post(dismissCb);\n&#x27;
                         &#x27;    }\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;    /** Hides the specified Cling */\n&#x27;
                         &#x27;    private void dismissCling(final View cling, &#x27;
                         &#x27;final Runnable postAnimationCb,\n&#x27;
                         &#x27;                              final String flag, int &#x27;
                         &#x27;duration) {\n&#x27;
                         &#x27;        // To catch cases where siblings of &#x27;
                         &#x27;top-level views are made invisible, just check &#x27;
                         &#x27;whether\n&#x27;
                         &#x27;        // the cling is directly set to GONE before &#x27;
                         &#x27;dismissing it.\n&#x27;
                         &#x27;        if (cling != null &amp;&amp; cling.getVisibility() &#x27;
                         &#x27;!= View.GONE) {\n&#x27;
                         &#x27;            final Runnable cleanUpClingCb = new &#x27;
                         &#x27;Runnable() {\n&#x27;
                         &#x27;                public void run() {\n&#x27;
                         &#x27;                    cling.setVisibility(View.GONE);\n&#x27;
                         &#x27;                    &#x27;
                         &#x27;mLauncher.getSharedPrefs().edit()\n&#x27;
                         &#x27;                        .putBoolean(flag, true)\n&#x27;
                         &#x27;                        .apply();\n&#x27;
                         &#x27;                    if (postAnimationCb != null) {\n&#x27;
                         &#x27;                        postAnimationCb.run();\n&#x27;
                         &#x27;                    }\n&#x27;
                         &#x27;                }\n&#x27;
                         &#x27;            };\n&#x27;
                         &#x27;            if (duration &lt;= 0) {\n&#x27;
                         &#x27;                cleanUpClingCb.run();\n&#x27;
                         &#x27;            } else {\n&#x27;
                         &#x27;                &#x27;
                         &#x27;cling.animate().alpha(0).setDuration(duration).withEndAction(cleanUpClingCb);\n&#x27;
                         &#x27;            }\n&#x27;
                         &#x27;        }\n&#x27;
                         &#x27;    }\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;    /** Returns whether the clings are enabled or &#x27;
                         &#x27;should be shown */\n&#x27;
                         &#x27;    private boolean areClingsEnabled() {\n&#x27;
                         &#x27;        if (DISABLE_CLINGS) {\n&#x27;
                         &#x27;            return false;\n&#x27;
                         &#x27;        }\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;        // disable clings when running in a test &#x27;
                         &#x27;harness\n&#x27;
                         &#x27;        if(ActivityManager.isRunningInTestHarness()) &#x27;
                         &#x27;return false;\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;        // Disable clings for accessibility when &#x27;
                         &#x27;explore by touch is enabled\n&#x27;
                         &#x27;        final AccessibilityManager a11yManager = &#x27;
                         &#x27;(AccessibilityManager) mLauncher.getSystemService(\n&#x27;
                         &#x27;                Launcher.ACCESSIBILITY_SERVICE);\n&#x27;
                         &#x27;        if (a11yManager.isTouchExplorationEnabled()) &#x27;
                         &#x27;{\n&#x27;
                         &#x27;            return false;\n&#x27;
                         &#x27;        }\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;        // Restricted secondary users (child mode) &#x27;
                         &#x27;will potentially have very few apps\n&#x27;
                         &#x27;        // seeded when they start up for the first &#x27;
                         &quot;time. Clings won&#x27;t work well with that\n&quot;
                         &#x27;        boolean supportsLimitedUsers =\n&#x27;
                         &#x27;                android.os.Build.VERSION.SDK_INT &gt;= &#x27;
                         &#x27;android.os.Build.VERSION_CODES.JELLY_BEAN_MR2;\n&#x27;
                         &#x27;        Account[] accounts = &#x27;
                         &#x27;AccountManager.get(mLauncher).getAccounts();\n&#x27;
                         &#x27;        if (supportsLimitedUsers &amp;&amp; accounts.length &#x27;
                         &#x27;== 0) {\n&#x27;
                         &#x27;            UserManager um = (UserManager) &#x27;
                         &#x27;mLauncher.getSystemService(Context.USER_SERVICE);\n&#x27;
                         &#x27;            Bundle restrictions = &#x27;
                         &#x27;um.getUserRestrictions();\n&#x27;
                         &#x27;            if &#x27;
                         &#x27;(restrictions.getBoolean(UserManager.DISALLOW_MODIFY_ACCOUNTS, &#x27;
                         &#x27;false)) {\n&#x27;
                         &#x27;                return false;\n&#x27;
                         &#x27;            }\n&#x27;
                         &#x27;        }\n&#x27;
                         &#x27;        if &#x27;
                         &#x27;(Settings.Secure.getInt(mLauncher.getContentResolver(), &#x27;
                         &#x27;SKIP_FIRST_USE_HINTS, 0)\n&#x27;
                         &#x27;                == 1) {\n&#x27;
                         &#x27;            return false;\n&#x27;
                         &#x27;        }\n&#x27;
                         &#x27;        return true;\n&#x27;
                         &#x27;    }\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;    public boolean &#x27;
                         &#x27;shouldShowFirstRunOrMigrationClings() {\n&#x27;
                         &#x27;        SharedPreferences sharedPrefs = &#x27;
                         &#x27;mLauncher.getSharedPrefs();\n&#x27;
                         &#x27;        return areClingsEnabled() &amp;&amp;\n&#x27;
                         &#x27;            &#x27;
                         &#x27;!sharedPrefs.getBoolean(WORKSPACE_CLING_DISMISSED_KEY, &#x27;
                         &#x27;false) &amp;&amp;\n&#x27;
                         &#x27;            &#x27;
                         &#x27;!sharedPrefs.getBoolean(MIGRATION_CLING_DISMISSED_KEY, &#x27;
                         &#x27;false);\n&#x27;
                         &#x27;    }\n&#x27;
                         &#x27;\n&#x27;
                         &#x27;    public static void &#x27;
                         &#x27;synchonouslyMarkFirstRunClingDismissed(Context ctx) &#x27;
                         &#x27;{\n&#x27;
                         &#x27;        SharedPreferences prefs = &#x27;
                         &#x27;ctx.getSharedPreferences(\n&#x27;
                         &#x27;                &#x27;
                         &#x27;LauncherAppState.getSharedPreferencesKey(), &#x27;
                         &#x27;Context.MODE_PRIVATE);\n&#x27;
                         &#x27;        SharedPreferences.Editor editor = &#x27;
                         &#x27;prefs.edit();\n&#x27;
                         &#x27;        &#x27;
                         &#x27;editor.putBoolean(WORKSPACE_CLING_DISMISSED_KEY, &#x27;
                         &#x27;true);\n&#x27;
                         &#x27;        editor.commit();\n&#x27;,
           &#x27;CHUNK_THEIRS&#x27;: &#x27;import android.animation.Animator;\n&#x27;
                           &#x27;import android.animation.AnimatorListenerAdapter;\n&#x27;
                           &#x27;import android.app.ActivityManager;\n&#x27;
                           &#x27;import android.content.Context;\n&#x27;
                           &#x27;import android.content.SharedPreferences;\n&#x27;
                           &#x27;import android.os.Bundle;\n&#x27;
                           &#x27;import android.os.UserManager;\n&#x27;
                           &#x27;import android.view.LayoutInflater;\n&#x27;
                           &#x27;import android.view.View;\n&#x27;
                           &#x27;import android.view.ViewGroup;\n&#x27;
                           &#x27;import &#x27;
                           &#x27;android.view.accessibility.AccessibilityManager;\n&#x27;
                           &#x27;import android.widget.TextView;\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;class LauncherClings {\n&#x27;
                           &#x27;    private static final String &#x27;
                           &#x27;FIRST_RUN_CLING_DISMISSED_KEY = &#x27;
                           &#x27;&quot;cling_gel.first_run.dismissed&quot;;\n&#x27;
                           &#x27;    private static final String &#x27;
                           &#x27;MIGRATION_CLING_DISMISSED_KEY = &#x27;
                           &#x27;&quot;cling_gel.migration.dismissed&quot;;\n&#x27;
                           &#x27;    private static final String &#x27;
                           &#x27;MIGRATION_WORKSPACE_CLING_DISMISSED_KEY = &#x27;
                           &#x27;&quot;cling_gel.migration.dismissed&quot;;\n&#x27;
                           &#x27;    private static final String &#x27;
                           &#x27;WORKSPACE_CLING_DISMISSED_KEY = &#x27;
                           &#x27;&quot;cling_gel.workspace.dismissed&quot;;\n&#x27;
                           &#x27;    private static final String &#x27;
                           &#x27;FOLDER_CLING_DISMISSED_KEY = &#x27;
                           &#x27;&quot;cling_gel.folder.dismissed&quot;;\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    private static final boolean DISABLE_CLINGS = &#x27;
                           &#x27;false;\n&#x27;
                           &#x27;    private static final boolean &#x27;
                           &#x27;DISABLE_CUSTOM_CLINGS = true;\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    private static final int SHOW_CLING_DURATION = &#x27;
                           &#x27;250;\n&#x27;
                           &#x27;    private static final int &#x27;
                           &#x27;DISMISS_CLING_DURATION = 200;\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    private Launcher mLauncher;\n&#x27;
                           &#x27;    private LayoutInflater mInflater;\n&#x27;
                           &#x27;    private HideFromAccessibilityHelper &#x27;
                           &#x27;mHideFromAccessibilityHelper\n&#x27;
                           &#x27;            = new HideFromAccessibilityHelper();\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    /** Ctor */\n&#x27;
                           &#x27;    public LauncherClings(Launcher launcher) {\n&#x27;
                           &#x27;        mLauncher = launcher;\n&#x27;
                           &#x27;        mInflater = &#x27;
                           &#x27;mLauncher.getLayoutInflater();\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    /** Initializes a cling */\n&#x27;
                           &#x27;    private Cling initCling(int clingId, int &#x27;
                           &#x27;scrimId, boolean animate,\n&#x27;
                           &#x27;                            boolean &#x27;
                           &#x27;dimNavBarVisibilty) {\n&#x27;
                           &#x27;        Cling cling = (Cling) &#x27;
                           &#x27;mLauncher.findViewById(clingId);\n&#x27;
                           &#x27;        View scrim = null;\n&#x27;
                           &#x27;        if (scrimId &gt; 0) {\n&#x27;
                           &#x27;            scrim = &#x27;
                           &#x27;mLauncher.findViewById(R.id.cling_scrim);\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;        if (cling != null) {\n&#x27;
                           &#x27;            cling.init(mLauncher, scrim);\n&#x27;
                           &#x27;            cling.show(animate, &#x27;
                           &#x27;SHOW_CLING_DURATION);\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;            if (dimNavBarVisibilty) {\n&#x27;
                           &#x27;                &#x27;
                           &#x27;cling.setSystemUiVisibility(cling.getSystemUiVisibility() &#x27;
                           &#x27;|\n&#x27;
                           &#x27;                        &#x27;
                           &#x27;View.SYSTEM_UI_FLAG_LOW_PROFILE);\n&#x27;
                           &#x27;            }\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;        return cling;\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    /** Returns whether the clings are enabled or &#x27;
                           &#x27;should be shown */\n&#x27;
                           &#x27;    private boolean isClingsEnabled() {\n&#x27;
                           &#x27;        if (DISABLE_CLINGS) {\n&#x27;
                           &#x27;            return false;\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;        // For now, limit only to phones\n&#x27;
                           &#x27;        LauncherAppState app = &#x27;
                           &#x27;LauncherAppState.getInstance();\n&#x27;
                           &#x27;        DeviceProfile grid = &#x27;
                           &#x27;app.getDynamicGrid().getDeviceProfile();\n&#x27;
                           &#x27;        if (grid.isTablet()) {\n&#x27;
                           &#x27;            return false;\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;        if (grid.isLandscape) {\n&#x27;
                           &#x27;            return false;\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;        // disable clings when running in a test &#x27;
                           &#x27;harness\n&#x27;
                           &#x27;        &#x27;
                           &#x27;if(ActivityManager.isRunningInTestHarness()) &#x27;
                           &#x27;return false;\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;        // Disable clings for accessibility when &#x27;
                           &#x27;explore by touch is enabled\n&#x27;
                           &#x27;        final AccessibilityManager a11yManager = &#x27;
                           &#x27;(AccessibilityManager) &#x27;
                           &#x27;mLauncher.getSystemService(\n&#x27;
                           &#x27;                Launcher.ACCESSIBILITY_SERVICE);\n&#x27;
                           &#x27;        if &#x27;
                           &#x27;(a11yManager.isTouchExplorationEnabled()) {\n&#x27;
                           &#x27;            return false;\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;        // Restricted secondary users (child mode) &#x27;
                           &#x27;will potentially have very few apps\n&#x27;
                           &#x27;        // seeded when they start up for the first &#x27;
                           &quot;time. Clings won&#x27;t work well with that\n&quot;
                           &#x27;        boolean supportsLimitedUsers =\n&#x27;
                           &#x27;                android.os.Build.VERSION.SDK_INT &#x27;
                           &#x27;&gt;= android.os.Build.VERSION_CODES.JELLY_BEAN_MR2;\n&#x27;
                           &#x27;        Account[] accounts = &#x27;
                           &#x27;AccountManager.get(mLauncher).getAccounts();\n&#x27;
                           &#x27;        if (supportsLimitedUsers &amp;&amp; &#x27;
                           &#x27;accounts.length == 0) {\n&#x27;
                           &#x27;            UserManager um = (UserManager) &#x27;
                           &#x27;mLauncher.getSystemService(Context.USER_SERVICE);\n&#x27;
                           &#x27;            Bundle restrictions = &#x27;
                           &#x27;um.getUserRestrictions();\n&#x27;
                           &#x27;            if &#x27;
                           &#x27;(restrictions.getBoolean(UserManager.DISALLOW_MODIFY_ACCOUNTS, &#x27;
                           &#x27;false)) {\n&#x27;
                           &#x27;                return false;\n&#x27;
                           &#x27;            }\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;        return true;\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    /** Returns whether the folder cling is &#x27;
                           &#x27;visible. */\n&#x27;
                           &#x27;    public boolean isFolderClingVisible() {\n&#x27;
                           &#x27;        Cling cling = (Cling) &#x27;
                           &#x27;mLauncher.findViewById(R.id.folder_cling);\n&#x27;
                           &#x27;        if (cling != null) {\n&#x27;
                           &#x27;            return cling.getVisibility() == &#x27;
                           &#x27;View.VISIBLE;\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;        return false;\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    private boolean skipCustomClingIfNoAccounts() &#x27;
                           &#x27;{\n&#x27;
                           &#x27;        Cling cling = (Cling) &#x27;
                           &#x27;mLauncher.findViewById(R.id.workspace_cling);\n&#x27;
                           &#x27;        boolean customCling = &#x27;
                           &#x27;cling.getDrawIdentifier().equals(&quot;workspace_custom&quot;);\n&#x27;
                           &#x27;        if (customCling) {\n&#x27;
                           &#x27;            AccountManager am = &#x27;
                           &#x27;AccountManager.get(mLauncher);\n&#x27;
                           &#x27;            if (am == null) return false;\n&#x27;
                           &#x27;            Account[] accounts = &#x27;
                           &#x27;am.getAccountsByType(&quot;com.google&quot;);\n&#x27;
                           &#x27;            return accounts.length == 0;\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;        return false;\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    /** Updates the first run cling custom content &#x27;
                           &#x27;hint */\n&#x27;
                           &#x27;    private void &#x27;
                           &#x27;setCustomContentHintVisibility(Cling cling, String &#x27;
                           &#x27;ccHintStr, boolean visible,\n&#x27;
                           &#x27;                                                &#x27;
                           &#x27;boolean animate) {\n&#x27;
                           &#x27;        final TextView ccHint = (TextView) &#x27;
                           &#x27;cling.findViewById(R.id.custom_content_hint);\n&#x27;
                           &#x27;        if (ccHint != null) {\n&#x27;
                           &#x27;            if (visible &amp;&amp; !ccHintStr.isEmpty()) &#x27;
                           &#x27;{\n&#x27;
                           &#x27;                ccHint.setText(ccHintStr);\n&#x27;
                           &#x27;                &#x27;
                           &#x27;ccHint.setVisibility(View.VISIBLE);\n&#x27;
                           &#x27;                if (animate) {\n&#x27;
                           &#x27;                    ccHint.setAlpha(0f);\n&#x27;
                           &#x27;                    ccHint.animate().alpha(1f)\n&#x27;
                           &#x27;                            &#x27;
                           &#x27;.setDuration(SHOW_CLING_DURATION)\n&#x27;
                           &#x27;                            .start();\n&#x27;
                           &#x27;                } else {\n&#x27;
                           &#x27;                    ccHint.setAlpha(1f);\n&#x27;
                           &#x27;                }\n&#x27;
                           &#x27;            } else {\n&#x27;
                           &#x27;                if (animate) {\n&#x27;
                           &#x27;                    ccHint.animate().alpha(0f)\n&#x27;
                           &#x27;                            &#x27;
                           &#x27;.setDuration(SHOW_CLING_DURATION)\n&#x27;
                           &#x27;                            .setListener(new &#x27;
                           &#x27;AnimatorListenerAdapter() {\n&#x27;
                           &#x27;                                @Override\n&#x27;
                           &#x27;                                public void &#x27;
                           &#x27;onAnimationEnd(Animator animation) {\n&#x27;
                           &#x27;                                    &#x27;
                           &#x27;ccHint.setVisibility(View.GONE);\n&#x27;
                           &#x27;                                }\n&#x27;
                           &#x27;                            })\n&#x27;
                           &#x27;                            .start();\n&#x27;
                           &#x27;                } else {\n&#x27;
                           &#x27;                    ccHint.setAlpha(0f);\n&#x27;
                           &#x27;                    &#x27;
                           &#x27;ccHint.setVisibility(View.GONE);\n&#x27;
                           &#x27;                }\n&#x27;
                           &#x27;            }\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    /** Updates the first run cling custom content &#x27;
                           &#x27;hint */\n&#x27;
                           &#x27;    public void &#x27;
                           &#x27;updateCustomContentHintVisibility() {\n&#x27;
                           &#x27;        Cling cling = (Cling) &#x27;
                           &#x27;mLauncher.findViewById(R.id.first_run_cling);\n&#x27;
                           &#x27;        String ccHintStr = &#x27;
                           &#x27;mLauncher.getFirstRunCustomContentHint();\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;        if &#x27;
                           &#x27;(mLauncher.getWorkspace().hasCustomContent()) {\n&#x27;
                           &#x27;            // Show the custom content hint if &#x27;
                           &#x27;ccHintStr is not empty\n&#x27;
                           &#x27;            if (cling != null) {\n&#x27;
                           &#x27;                &#x27;
                           &#x27;setCustomContentHintVisibility(cling, ccHintStr, &#x27;
                           &#x27;true, true);\n&#x27;
                           &#x27;            }\n&#x27;
                           &#x27;        } else {\n&#x27;
                           &#x27;            // Hide the custom content hint\n&#x27;
                           &#x27;            if (cling != null) {\n&#x27;
                           &#x27;                &#x27;
                           &#x27;setCustomContentHintVisibility(cling, ccHintStr, &#x27;
                           &#x27;false, true);\n&#x27;
                           &#x27;            }\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    /** Updates the first run cling search bar &#x27;
                           &#x27;hint. */\n&#x27;
                           &#x27;    public void updateSearchBarHint(String hint) &#x27;
                           &#x27;{\n&#x27;
                           &#x27;        Cling cling = (Cling) &#x27;
                           &#x27;mLauncher.findViewById(R.id.first_run_cling);\n&#x27;
                           &#x27;        if (cling != null &amp;&amp; cling.getVisibility() &#x27;
                           &#x27;== View.VISIBLE &amp;&amp; !hint.isEmpty()) {\n&#x27;
                           &#x27;            TextView sbHint = (TextView) &#x27;
                           &#x27;cling.findViewById(R.id.search_bar_hint);\n&#x27;
                           &#x27;            sbHint.setText(hint);\n&#x27;
                           &#x27;            sbHint.setVisibility(View.VISIBLE);\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    public boolean &#x27;
                           &#x27;shouldShowFirstRunOrMigrationClings() {\n&#x27;
                           &#x27;        SharedPreferences sharedPrefs = &#x27;
                           &#x27;mLauncher.getSharedPrefs();\n&#x27;
                           &#x27;        return isClingsEnabled() &amp;&amp;\n&#x27;
                           &#x27;            &#x27;
                           &#x27;!sharedPrefs.getBoolean(FIRST_RUN_CLING_DISMISSED_KEY, &#x27;
                           &#x27;false) &amp;&amp;\n&#x27;
                           &#x27;            &#x27;
                           &#x27;!sharedPrefs.getBoolean(MIGRATION_CLING_DISMISSED_KEY, &#x27;
                           &#x27;false);\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    public void removeFirstRunAndMigrationClings() &#x27;
                           &#x27;{\n&#x27;
                           &#x27;        removeCling(R.id.first_run_cling);\n&#x27;
                           &#x27;        removeCling(R.id.migration_cling);\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    /**\n&#x27;
                           &#x27;     * Shows the first run cling.\n&#x27;
                           &#x27;     *\n&#x27;
                           &#x27;     * This flow is mutually exclusive with &#x27;
                           &#x27;showMigrationCling, and only runs if this &#x27;
                           &#x27;Launcher\n&#x27;
                           &#x27;     * package was preinstalled or there is no db &#x27;
                           &#x27;to migrate from.\n&#x27;
                           &#x27;     */\n&#x27;
                           &#x27;    public void showFirstRunCling() {\n&#x27;
                           &#x27;        if (!skipCustomClingIfNoAccounts()) {\n&#x27;
                           &#x27;            SharedPreferences sharedPrefs = &#x27;
                           &#x27;mLauncher.getSharedPrefs();\n&#x27;
                           &quot;            // If we&#x27;re not using the default &quot;
                           &#x27;workspace layout, replace workspace cling\n&#x27;
                           &#x27;            // with a custom workspace cling &#x27;
                           &#x27;(usually specified in an overlay)\n&#x27;
                           &#x27;            // For now, only do this on tablets\n&#x27;
                           &#x27;            if (!DISABLE_CUSTOM_CLINGS) {\n&#x27;
                           &#x27;                if &#x27;
                           &#x27;(sharedPrefs.getInt(LauncherProvider.DEFAULT_WORKSPACE_RESOURCE_ID, &#x27;
                           &#x27;0) != 0 &amp;&amp;\n&#x27;
                           &#x27;                        &#x27;
                           &#x27;mLauncher.getResources().getBoolean(R.bool.config_useCustomClings)) &#x27;
                           &#x27;{\n&#x27;
                           &#x27;                    // Use a custom cling\n&#x27;
                           &#x27;                    View cling = &#x27;
                           &#x27;mLauncher.findViewById(R.id.workspace_cling);\n&#x27;
                           &#x27;                    ViewGroup clingParent = &#x27;
                           &#x27;(ViewGroup) cling.getParent();\n&#x27;
                           &#x27;                    int clingIndex = &#x27;
                           &#x27;clingParent.indexOfChild(cling);\n&#x27;
                           &#x27;                    &#x27;
                           &#x27;clingParent.removeViewAt(clingIndex);\n&#x27;
                           &#x27;                    View customCling = &#x27;
                           &#x27;mInflater.inflate(R.layout.custom_workspace_cling,\n&#x27;
                           &#x27;                            clingParent, false);\n&#x27;
                           &#x27;                    &#x27;
                           &#x27;clingParent.addView(customCling, clingIndex);\n&#x27;
                           &#x27;                    &#x27;
                           &#x27;customCling.setId(R.id.workspace_cling);\n&#x27;
                           &#x27;                }\n&#x27;
                           &#x27;            }\n&#x27;
                           &#x27;            Cling cling = (Cling) &#x27;
                           &#x27;mLauncher.findViewById(R.id.first_run_cling);\n&#x27;
                           &#x27;            if (cling != null) {\n&#x27;
                           &#x27;                String sbHintStr = &#x27;
                           &#x27;mLauncher.getFirstRunClingSearchBarHint();\n&#x27;
                           &#x27;                String ccHintStr = &#x27;
                           &#x27;mLauncher.getFirstRunCustomContentHint();\n&#x27;
                           &#x27;                if (!sbHintStr.isEmpty()) {\n&#x27;
                           &#x27;                    TextView sbHint = (TextView) &#x27;
                           &#x27;cling.findViewById(R.id.search_bar_hint);\n&#x27;
                           &#x27;                    sbHint.setText(sbHintStr);\n&#x27;
                           &#x27;                    &#x27;
                           &#x27;sbHint.setVisibility(View.VISIBLE);\n&#x27;
                           &#x27;                }\n&#x27;
                           &#x27;                &#x27;
                           &#x27;setCustomContentHintVisibility(cling, ccHintStr, &#x27;
                           &#x27;true, false);\n&#x27;
                           &#x27;            }\n&#x27;
                           &#x27;            initCling(R.id.first_run_cling, 0, &#x27;
                           &#x27;false, true);\n&#x27;
                           &#x27;        } else {\n&#x27;
                           &#x27;            removeFirstRunAndMigrationClings();\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    /**\n&#x27;
                           &#x27;     * Shows the migration cling.\n&#x27;
                           &#x27;     *\n&#x27;
                           &#x27;     * This flow is mutually exclusive with &#x27;
                           &#x27;showFirstRunCling, and only runs if this Launcher\n&#x27;
                           &#x27;     * package was not preinstalled and there &#x27;
                           &#x27;exists a db to migrate from.\n&#x27;
                           &#x27;     */\n&#x27;
                           &#x27;    public void showMigrationCling() {\n&#x27;
                           &#x27;        &#x27;
                           &#x27;mLauncher.hideWorkspaceSearchAndHotseat();\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;        Cling c = initCling(R.id.migration_cling, &#x27;
                           &#x27;0, false, true);\n&#x27;
                           &#x27;        c.bringScrimToFront();\n&#x27;
                           &#x27;        c.bringToFront();\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    public void showMigrationWorkspaceCling() {\n&#x27;
                           &#x27;        // Enable the clings only if they have not &#x27;
                           &#x27;been dismissed before\n&#x27;
                           &#x27;        if (isClingsEnabled() &amp;&amp; &#x27;
                           &#x27;!mLauncher.getSharedPrefs().getBoolean(\n&#x27;
                           &#x27;                &#x27;
                           &#x27;MIGRATION_WORKSPACE_CLING_DISMISSED_KEY, false)) &#x27;
                           &#x27;{\n&#x27;
                           &#x27;            Cling c = &#x27;
                           &#x27;initCling(R.id.migration_workspace_cling, 0, &#x27;
                           &#x27;false, true);\n&#x27;
                           &#x27;            &#x27;
                           &#x27;c.updateMigrationWorkspaceBubblePosition();\n&#x27;
                           &#x27;            c.bringScrimToFront();\n&#x27;
                           &#x27;            c.bringToFront();\n&#x27;
                           &#x27;        } else {\n&#x27;
                           &#x27;            &#x27;
                           &#x27;removeCling(R.id.migration_workspace_cling);\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    public void showWorkspaceCling() {\n&#x27;
                           &#x27;        // Enable the clings only if they have not &#x27;
                           &#x27;been dismissed before\n&#x27;
                           &#x27;        if (isClingsEnabled() &amp;&amp; &#x27;
                           &#x27;!mLauncher.getSharedPrefs().getBoolean(\n&#x27;
                           &#x27;                WORKSPACE_CLING_DISMISSED_KEY, &#x27;
                           &#x27;false)) {\n&#x27;
                           &#x27;            Cling c = &#x27;
                           &#x27;initCling(R.id.workspace_cling, 0, false, true);\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;            // Set the focused hotseat app if &#x27;
                           &#x27;there is one\n&#x27;
                           &#x27;            &#x27;
                           &#x27;c.setFocusedHotseatApp(mLauncher.getFirstRunFocusedHotseatAppDrawableId(),\n&#x27;
                           &#x27;                    &#x27;
                           &#x27;mLauncher.getFirstRunFocusedHotseatAppRank(),\n&#x27;
                           &#x27;                    &#x27;
                           &#x27;mLauncher.getFirstRunFocusedHotseatAppComponentName(),\n&#x27;
                           &#x27;                    &#x27;
                           &#x27;mLauncher.getFirstRunFocusedHotseatAppBubbleTitle(),\n&#x27;
                           &#x27;                    &#x27;
                           &#x27;mLauncher.getFirstRunFocusedHotseatAppBubbleDescription());\n&#x27;
                           &#x27;        } else {\n&#x27;
                           &#x27;            removeCling(R.id.workspace_cling);\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;    public Cling showFoldersCling() {\n&#x27;
                           &#x27;        SharedPreferences sharedPrefs = &#x27;
                           &#x27;mLauncher.getSharedPrefs();\n&#x27;
                           &#x27;        // Enable the clings only if they have not &#x27;
                           &#x27;been dismissed before\n&#x27;
                           &#x27;        if (isClingsEnabled() &amp;&amp;\n&#x27;
                           &#x27;                &#x27;
                           &#x27;!sharedPrefs.getBoolean(FOLDER_CLING_DISMISSED_KEY, &#x27;
                           &#x27;false) &amp;&amp;\n&#x27;
                           &#x27;                &#x27;
                           &#x27;!sharedPrefs.getBoolean(Launcher.USER_HAS_MIGRATED, &#x27;
                           &#x27;false)) {\n&#x27;
                           &#x27;            Cling cling = &#x27;
                           &#x27;initCling(R.id.folder_cling, R.id.cling_scrim,\n&#x27;
                           &#x27;                    true, true);\n&#x27;
                           &#x27;            return cling;\n&#x27;
                           &#x27;        } else {\n&#x27;
                           &#x27;            removeCling(R.id.folder_cling);\n&#x27;
                           &#x27;            return null;\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    /** Removes the cling outright from the &#x27;
                           &#x27;DragLayer */\n&#x27;
                           &#x27;    private void removeCling(int id) {\n&#x27;
                           &#x27;        final View cling = &#x27;
                           &#x27;mLauncher.findViewById(id);\n&#x27;
                           &#x27;        if (cling != null) {\n&#x27;
                           &#x27;            final ViewGroup parent = (ViewGroup) &#x27;
                           &#x27;cling.getParent();\n&#x27;
                           &#x27;            parent.post(new Runnable() {\n&#x27;
                           &#x27;                @Override\n&#x27;
                           &#x27;                public void run() {\n&#x27;
                           &#x27;                    parent.removeView(cling);\n&#x27;
                           &#x27;                }\n&#x27;
                           &#x27;            });\n&#x27;
                           &#x27;            &#x27;
                           &#x27;mHideFromAccessibilityHelper.restoreImportantForAccessibility(mLauncher.getDragLayer());\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    /** Hides the specified Cling */\n&#x27;
                           &#x27;    private void dismissCling(final Cling cling, &#x27;
                           &#x27;final Runnable postAnimationCb,\n&#x27;
                           &#x27;                              final String flag, &#x27;
                           &#x27;int duration, boolean restoreNavBarVisibilty) {\n&#x27;
                           &#x27;        // To catch cases where siblings of &#x27;
                           &#x27;top-level views are made invisible, just check &#x27;
                           &#x27;whether\n&#x27;
                           &#x27;        // the cling is directly set to GONE &#x27;
                           &#x27;before dismissing it.\n&#x27;
                           &#x27;        if (cling != null &amp;&amp; cling.getVisibility() &#x27;
                           &#x27;!= View.GONE) {\n&#x27;
                           &#x27;            final Runnable cleanUpClingCb = new &#x27;
                           &#x27;Runnable() {\n&#x27;
                           &#x27;                public void run() {\n&#x27;
                           &#x27;                    cling.cleanup();\n&#x27;
                           &#x27;                    SharedPreferences.Editor &#x27;
                           &#x27;editor = mLauncher.getSharedPrefs().edit();\n&#x27;
                           &#x27;                    editor.putBoolean(flag, &#x27;
                           &#x27;true);\n&#x27;
                           &#x27;                    editor.apply();\n&#x27;
                           &#x27;                    if (postAnimationCb != null) &#x27;
                           &#x27;{\n&#x27;
                           &#x27;                        postAnimationCb.run();\n&#x27;
                           &#x27;                    }\n&#x27;
                           &#x27;                }\n&#x27;
                           &#x27;            };\n&#x27;
                           &#x27;            if (duration &lt;= 0) {\n&#x27;
                           &#x27;                cleanUpClingCb.run();\n&#x27;
                           &#x27;            } else {\n&#x27;
                           &#x27;                cling.hide(duration, &#x27;
                           &#x27;cleanUpClingCb);\n&#x27;
                           &#x27;            }\n&#x27;
                           &#x27;            &#x27;
                           &#x27;mHideFromAccessibilityHelper.restoreImportantForAccessibility(mLauncher.getDragLayer());\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;            if (restoreNavBarVisibilty) {\n&#x27;
                           &#x27;                &#x27;
                           &#x27;cling.setSystemUiVisibility(cling.getSystemUiVisibility() &#x27;
                           &#x27;&amp;\n&#x27;
                           &#x27;                        &#x27;
                           &#x27;~View.SYSTEM_UI_FLAG_LOW_PROFILE);\n&#x27;
                           &#x27;            }\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    public void dismissFirstRunCling(View v) {\n&#x27;
                           &#x27;        Cling cling = (Cling) &#x27;
                           &#x27;mLauncher.findViewById(R.id.first_run_cling);\n&#x27;
                           &#x27;        Runnable cb = new Runnable() {\n&#x27;
                           &#x27;            public void run() {\n&#x27;
                           &#x27;                // Show the workspace cling next\n&#x27;
                           &#x27;                showWorkspaceCling();\n&#x27;
                           &#x27;            }\n&#x27;
                           &#x27;        };\n&#x27;
                           &#x27;        dismissCling(cling, cb, &#x27;
                           &#x27;FIRST_RUN_CLING_DISMISSED_KEY,\n&#x27;
                           &#x27;                DISMISS_CLING_DURATION, false);\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;        // Fade out the search bar for the &#x27;
                           &#x27;workspace cling coming up\n&#x27;
                           &#x27;        &#x27;
                           &#x27;mLauncher.getSearchBar().hideSearchBar(true);\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    private void dismissMigrationCling() {\n&#x27;
                           &#x27;        &#x27;
                           &#x27;mLauncher.showWorkspaceSearchAndHotseat();\n&#x27;
                           &#x27;        Runnable dismissCb = new Runnable() {\n&#x27;
                           &#x27;            public void run() {\n&#x27;
                           &#x27;                Cling cling = (Cling) &#x27;
                           &#x27;mLauncher.findViewById(R.id.migration_cling);\n&#x27;
                           &#x27;                Runnable cb = new Runnable() {\n&#x27;
                           &#x27;                    public void run() {\n&#x27;
                           &#x27;                        // Show the migration &#x27;
                           &#x27;workspace cling next\n&#x27;
                           &#x27;                        &#x27;
                           &#x27;showMigrationWorkspaceCling();\n&#x27;
                           &#x27;                    }\n&#x27;
                           &#x27;                };\n&#x27;
                           &#x27;                dismissCling(cling, cb, &#x27;
                           &#x27;WORKSPACE_CLING_DISMISSED_KEY,\n&#x27;
                           &#x27;                        DISMISS_CLING_DURATION, &#x27;
                           &#x27;true);\n&#x27;
                           &#x27;            }\n&#x27;
                           &#x27;        };\n&#x27;
                           &#x27;        mLauncher.getWorkspace().post(dismissCb);\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    private void dismissAnyWorkspaceCling(Cling &#x27;
                           &#x27;cling, View v) {\n&#x27;
                           &#x27;        Runnable cb = null;\n&#x27;
                           &#x27;        if (v == null) {\n&#x27;
                           &#x27;            cb = new Runnable() {\n&#x27;
                           &#x27;                public void run() {\n&#x27;
                           &#x27;                    &#x27;
                           &#x27;mLauncher.getWorkspace().enterOverviewMode();\n&#x27;
                           &#x27;                }\n&#x27;
                           &#x27;            };\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;        dismissCling(cling, cb, &#x27;
                           &#x27;WORKSPACE_CLING_DISMISSED_KEY,\n&#x27;
                           &#x27;                DISMISS_CLING_DURATION, true);\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;        // Fade in the search bar\n&#x27;
                           &#x27;        &#x27;
                           &#x27;mLauncher.getSearchBar().showSearchBar(true);\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    public void dismissMigrationClingCopyApps(View &#x27;
                           &#x27;v) {\n&#x27;
                           &#x27;        // Copy the shortcuts from the old &#x27;
                           &#x27;database\n&#x27;
                           &#x27;        LauncherModel model = &#x27;
                           &#x27;mLauncher.getModel();\n&#x27;
                           &#x27;        model.resetLoadedState(false, true);\n&#x27;
                           &#x27;        model.startLoader(false, &#x27;
                           &#x27;PagedView.INVALID_RESTORE_PAGE,\n&#x27;
                           &#x27;                &#x27;
                           &#x27;LauncherModel.LOADER_FLAG_CLEAR_WORKSPACE\n&#x27;
                           &#x27;                        | &#x27;
                           &#x27;LauncherModel.LOADER_FLAG_MIGRATE_SHORTCUTS);\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;        // Set the flag to skip the folder cling\n&#x27;
                           &#x27;        String spKey = &#x27;
                           &#x27;LauncherAppState.getSharedPreferencesKey();\n&#x27;
                           &#x27;        SharedPreferences sp = &#x27;
                           &#x27;mLauncher.getSharedPreferences(spKey, &#x27;
                           &#x27;Context.MODE_PRIVATE);\n&#x27;
                           &#x27;        SharedPreferences.Editor editor = &#x27;
                           &#x27;sp.edit();\n&#x27;
                           &#x27;        &#x27;
                           &#x27;editor.putBoolean(Launcher.USER_HAS_MIGRATED, &#x27;
                           &#x27;true);\n&#x27;
                           &#x27;        editor.apply();\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;        // Disable the migration cling\n&#x27;
                           &#x27;        dismissMigrationCling();\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    public void &#x27;
                           &#x27;dismissMigrationClingUseDefault(View v) {\n&#x27;
                           &#x27;        // Clear the workspace\n&#x27;
                           &#x27;        LauncherModel model = &#x27;
                           &#x27;mLauncher.getModel();\n&#x27;
                           &#x27;        model.resetLoadedState(false, true);\n&#x27;
                           &#x27;        model.startLoader(false, &#x27;
                           &#x27;PagedView.INVALID_RESTORE_PAGE,\n&#x27;
                           &#x27;                &#x27;
                           &#x27;LauncherModel.LOADER_FLAG_CLEAR_WORKSPACE);\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;        // Disable the migration cling\n&#x27;
                           &#x27;        dismissMigrationCling();\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    public void &#x27;
                           &#x27;dismissMigrationWorkspaceCling(View v) {\n&#x27;
                           &#x27;        Cling cling = (Cling) &#x27;
                           &#x27;mLauncher.findViewById(R.id.migration_workspace_cling);\n&#x27;
                           &#x27;        dismissAnyWorkspaceCling(cling, v);\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    public void dismissWorkspaceCling(View v) {\n&#x27;
                           &#x27;        Cling cling = (Cling) &#x27;
                           &#x27;mLauncher.findViewById(R.id.workspace_cling);\n&#x27;
                           &#x27;        dismissAnyWorkspaceCling(cling, v);\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    public void dismissFolderCling(View v) {\n&#x27;
                           &#x27;        Cling cling = (Cling) &#x27;
                           &#x27;mLauncher.findViewById(R.id.folder_cling);\n&#x27;
                           &#x27;        dismissCling(cling, null, &#x27;
                           &#x27;FOLDER_CLING_DISMISSED_KEY,\n&#x27;
                           &#x27;                DISMISS_CLING_DURATION, true);\n&#x27;}],
   &#x27;mergers&#x27;: {&#x27;baseline&#x27;, &#x27;jfstmerge&#x27;}},
  {&#x27;eq&#x27;: [{&#x27;CHUNK_OURS&#x27;: &#x27;        return areClingsEnabled() &amp;&amp;\n&#x27;
                         &#x27;            &#x27;
                         &#x27;!sharedPrefs.getBoolean(WORKSPACE_CLING_DISMISSED_KEY, &#x27;
                         &#x27;false) &amp;&amp;\n&#x27;
                         &#x27;            &#x27;
                         &#x27;!sharedPrefs.getBoolean(MIGRATION_CLING_DISMISSED_KEY, &#x27;
                         &#x27;false);\n&#x27;,
           &#x27;CHUNK_THEIRS&#x27;: &#x27;        return isClingsEnabled() &amp;&amp;\n&#x27;
                           &#x27;            &#x27;
                           &#x27;!sharedPrefs.getBoolean(FIRST_RUN_CLING_DISMISSED_KEY, &#x27;
                           &#x27;false) &amp;&amp;\n&#x27;
                           &#x27;            &#x27;
                           &#x27;!sharedPrefs.getBoolean(MIGRATION_CLING_DISMISSED_KEY, &#x27;
                           &#x27;false);\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    public void removeFirstRunAndMigrationClings() &#x27;
                           &#x27;{\n&#x27;
                           &#x27;        removeCling(R.id.first_run_cling);\n&#x27;
                           &#x27;        removeCling(R.id.migration_cling);\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    /**\n&#x27;
                           &#x27;     * Shows the first run cling.\n&#x27;
                           &#x27;     *\n&#x27;
                           &#x27;     * This flow is mutually exclusive with &#x27;
                           &#x27;showMigrationCling, and only runs if this &#x27;
                           &#x27;Launcher\n&#x27;
                           &#x27;     * package was preinstalled or there is no db &#x27;
                           &#x27;to migrate from.\n&#x27;
                           &#x27;     */\n&#x27;
                           &#x27;    public void showFirstRunCling() {\n&#x27;
                           &#x27;        if (!skipCustomClingIfNoAccounts()) {\n&#x27;
                           &#x27;            SharedPreferences sharedPrefs = &#x27;
                           &#x27;mLauncher.getSharedPrefs();\n&#x27;
                           &quot;            // If we&#x27;re not using the default &quot;
                           &#x27;workspace layout, replace workspace cling\n&#x27;
                           &#x27;            // with a custom workspace cling &#x27;
                           &#x27;(usually specified in an overlay)\n&#x27;
                           &#x27;            // For now, only do this on tablets\n&#x27;
                           &#x27;            if (!DISABLE_CUSTOM_CLINGS) {\n&#x27;
                           &#x27;                if &#x27;
                           &#x27;(sharedPrefs.getInt(LauncherProvider.DEFAULT_WORKSPACE_RESOURCE_ID, &#x27;
                           &#x27;0) != 0 &amp;&amp;\n&#x27;
                           &#x27;                        &#x27;
                           &#x27;mLauncher.getResources().getBoolean(R.bool.config_useCustomClings)) &#x27;
                           &#x27;{\n&#x27;
                           &#x27;                    // Use a custom cling\n&#x27;
                           &#x27;                    View cling = &#x27;
                           &#x27;mLauncher.findViewById(R.id.workspace_cling);\n&#x27;
                           &#x27;                    ViewGroup clingParent = &#x27;
                           &#x27;(ViewGroup) cling.getParent();\n&#x27;
                           &#x27;                    int clingIndex = &#x27;
                           &#x27;clingParent.indexOfChild(cling);\n&#x27;
                           &#x27;                    &#x27;
                           &#x27;clingParent.removeViewAt(clingIndex);\n&#x27;
                           &#x27;                    View customCling = &#x27;
                           &#x27;mInflater.inflate(R.layout.custom_workspace_cling,\n&#x27;
                           &#x27;                            clingParent, false);\n&#x27;
                           &#x27;                    &#x27;
                           &#x27;clingParent.addView(customCling, clingIndex);\n&#x27;
                           &#x27;                    &#x27;
                           &#x27;customCling.setId(R.id.workspace_cling);\n&#x27;
                           &#x27;                }\n&#x27;
                           &#x27;            }\n&#x27;
                           &#x27;            Cling cling = (Cling) &#x27;
                           &#x27;mLauncher.findViewById(R.id.first_run_cling);\n&#x27;
                           &#x27;            if (cling != null) {\n&#x27;
                           &#x27;                String sbHintStr = &#x27;
                           &#x27;mLauncher.getFirstRunClingSearchBarHint();\n&#x27;
                           &#x27;                String ccHintStr = &#x27;
                           &#x27;mLauncher.getFirstRunCustomContentHint();\n&#x27;
                           &#x27;                if (!sbHintStr.isEmpty()) {\n&#x27;
                           &#x27;                    TextView sbHint = (TextView) &#x27;
                           &#x27;cling.findViewById(R.id.search_bar_hint);\n&#x27;
                           &#x27;                    sbHint.setText(sbHintStr);\n&#x27;
                           &#x27;                    &#x27;
                           &#x27;sbHint.setVisibility(View.VISIBLE);\n&#x27;
                           &#x27;                }\n&#x27;
                           &#x27;                &#x27;
                           &#x27;setCustomContentHintVisibility(cling, ccHintStr, &#x27;
                           &#x27;true, false);\n&#x27;
                           &#x27;            }\n&#x27;
                           &#x27;            initCling(R.id.first_run_cling, 0, &#x27;
                           &#x27;false, true);\n&#x27;
                           &#x27;        } else {\n&#x27;
                           &#x27;            removeFirstRunAndMigrationClings();\n&#x27;
                           &#x27;        }\n&#x27;}],
   &#x27;mergers&#x27;: {&#x27;baseline&#x27;}},
  {&#x27;eq&#x27;: [{&#x27;CHUNK_OURS&#x27;: &#x27;    public static void &#x27;
                         &#x27;synchonouslyMarkFirstRunClingDismissed(Context ctx) &#x27;
                         &#x27;{\n&#x27;
                         &#x27;        SharedPreferences prefs = &#x27;
                         &#x27;ctx.getSharedPreferences(\n&#x27;
                         &#x27;                &#x27;
                         &#x27;LauncherAppState.getSharedPreferencesKey(), &#x27;
                         &#x27;Context.MODE_PRIVATE);\n&#x27;
                         &#x27;        SharedPreferences.Editor editor = &#x27;
                         &#x27;prefs.edit();\n&#x27;
                         &#x27;        &#x27;
                         &#x27;editor.putBoolean(WORKSPACE_CLING_DISMISSED_KEY, &#x27;
                         &#x27;true);\n&#x27;
                         &#x27;        editor.commit();\n&#x27;,
           &#x27;CHUNK_THEIRS&#x27;: &#x27;    /**\n&#x27;
                           &#x27;     * Shows the migration cling.\n&#x27;
                           &#x27;     *\n&#x27;
                           &#x27;     * This flow is mutually exclusive with &#x27;
                           &#x27;showFirstRunCling, and only runs if this Launcher\n&#x27;
                           &#x27;     * package was not preinstalled and there &#x27;
                           &#x27;exists a db to migrate from.\n&#x27;
                           &#x27;     */\n&#x27;
                           &#x27;    public void showMigrationCling() {\n&#x27;
                           &#x27;        &#x27;
                           &#x27;mLauncher.hideWorkspaceSearchAndHotseat();\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;        Cling c = initCling(R.id.migration_cling, &#x27;
                           &#x27;0, false, true);\n&#x27;
                           &#x27;        c.bringScrimToFront();\n&#x27;
                           &#x27;        c.bringToFront();\n&#x27;}],
   &#x27;mergers&#x27;: {&#x27;baseline&#x27;}},
  {&#x27;eq&#x27;: [{&#x27;CHUNK_OURS&#x27;: &#x27;&#x27;,
           &#x27;CHUNK_THEIRS&#x27;: &#x27;\n&#x27;
                           &#x27;    public void showMigrationWorkspaceCling() {\n&#x27;
                           &#x27;        // Enable the clings only if they have not &#x27;
                           &#x27;been dismissed before\n&#x27;
                           &#x27;        if (isClingsEnabled() &amp;&amp; &#x27;
                           &#x27;!mLauncher.getSharedPrefs().getBoolean(\n&#x27;
                           &#x27;                &#x27;
                           &#x27;MIGRATION_WORKSPACE_CLING_DISMISSED_KEY, false)) &#x27;
                           &#x27;{\n&#x27;
                           &#x27;            Cling c = &#x27;
                           &#x27;initCling(R.id.migration_workspace_cling, 0, &#x27;
                           &#x27;false, true);\n&#x27;
                           &#x27;            &#x27;
                           &#x27;c.updateMigrationWorkspaceBubblePosition();\n&#x27;
                           &#x27;            c.bringScrimToFront();\n&#x27;
                           &#x27;            c.bringToFront();\n&#x27;
                           &#x27;        } else {\n&#x27;
                           &#x27;            &#x27;
                           &#x27;removeCling(R.id.migration_workspace_cling);\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    public void showWorkspaceCling() {\n&#x27;
                           &#x27;        // Enable the clings only if they have not &#x27;
                           &#x27;been dismissed before\n&#x27;
                           &#x27;        if (isClingsEnabled() &amp;&amp; &#x27;
                           &#x27;!mLauncher.getSharedPrefs().getBoolean(\n&#x27;
                           &#x27;                WORKSPACE_CLING_DISMISSED_KEY, &#x27;
                           &#x27;false)) {\n&#x27;
                           &#x27;            Cling c = &#x27;
                           &#x27;initCling(R.id.workspace_cling, 0, false, true);\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;            // Set the focused hotseat app if &#x27;
                           &#x27;there is one\n&#x27;
                           &#x27;            &#x27;
                           &#x27;c.setFocusedHotseatApp(mLauncher.getFirstRunFocusedHotseatAppDrawableId(),\n&#x27;
                           &#x27;                    &#x27;
                           &#x27;mLauncher.getFirstRunFocusedHotseatAppRank(),\n&#x27;
                           &#x27;                    &#x27;
                           &#x27;mLauncher.getFirstRunFocusedHotseatAppComponentName(),\n&#x27;
                           &#x27;                    &#x27;
                           &#x27;mLauncher.getFirstRunFocusedHotseatAppBubbleTitle(),\n&#x27;
                           &#x27;                    &#x27;
                           &#x27;mLauncher.getFirstRunFocusedHotseatAppBubbleDescription());\n&#x27;
                           &#x27;        } else {\n&#x27;
                           &#x27;            removeCling(R.id.workspace_cling);\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;    public Cling showFoldersCling() {\n&#x27;
                           &#x27;        SharedPreferences sharedPrefs = &#x27;
                           &#x27;mLauncher.getSharedPrefs();\n&#x27;
                           &#x27;        // Enable the clings only if they have not &#x27;
                           &#x27;been dismissed before\n&#x27;
                           &#x27;        if (isClingsEnabled() &amp;&amp;\n&#x27;
                           &#x27;                &#x27;
                           &#x27;!sharedPrefs.getBoolean(FOLDER_CLING_DISMISSED_KEY, &#x27;
                           &#x27;false) &amp;&amp;\n&#x27;
                           &#x27;                &#x27;
                           &#x27;!sharedPrefs.getBoolean(Launcher.USER_HAS_MIGRATED, &#x27;
                           &#x27;false)) {\n&#x27;
                           &#x27;            Cling cling = &#x27;
                           &#x27;initCling(R.id.folder_cling, R.id.cling_scrim,\n&#x27;
                           &#x27;                    true, true);\n&#x27;
                           &#x27;            return cling;\n&#x27;
                           &#x27;        } else {\n&#x27;
                           &#x27;            removeCling(R.id.folder_cling);\n&#x27;
                           &#x27;            return null;\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    /** Removes the cling outright from the &#x27;
                           &#x27;DragLayer */\n&#x27;
                           &#x27;    private void removeCling(int id) {\n&#x27;
                           &#x27;        final View cling = &#x27;
                           &#x27;mLauncher.findViewById(id);\n&#x27;
                           &#x27;        if (cling != null) {\n&#x27;
                           &#x27;            final ViewGroup parent = (ViewGroup) &#x27;
                           &#x27;cling.getParent();\n&#x27;
                           &#x27;            parent.post(new Runnable() {\n&#x27;
                           &#x27;                @Override\n&#x27;
                           &#x27;                public void run() {\n&#x27;
                           &#x27;                    parent.removeView(cling);\n&#x27;
                           &#x27;                }\n&#x27;
                           &#x27;            });\n&#x27;
                           &#x27;            &#x27;
                           &#x27;mHideFromAccessibilityHelper.restoreImportantForAccessibility(mLauncher.getDragLayer());\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    /** Hides the specified Cling */\n&#x27;
                           &#x27;    private void dismissCling(final Cling cling, &#x27;
                           &#x27;final Runnable postAnimationCb,\n&#x27;
                           &#x27;                              final String flag, &#x27;
                           &#x27;int duration, boolean restoreNavBarVisibilty) {\n&#x27;
                           &#x27;        // To catch cases where siblings of &#x27;
                           &#x27;top-level views are made invisible, just check &#x27;
                           &#x27;whether\n&#x27;
                           &#x27;        // the cling is directly set to GONE &#x27;
                           &#x27;before dismissing it.\n&#x27;
                           &#x27;        if (cling != null &amp;&amp; cling.getVisibility() &#x27;
                           &#x27;!= View.GONE) {\n&#x27;
                           &#x27;            final Runnable cleanUpClingCb = new &#x27;
                           &#x27;Runnable() {\n&#x27;
                           &#x27;                public void run() {\n&#x27;
                           &#x27;                    cling.cleanup();\n&#x27;
                           &#x27;                    SharedPreferences.Editor &#x27;
                           &#x27;editor = mLauncher.getSharedPrefs().edit();\n&#x27;
                           &#x27;                    editor.putBoolean(flag, &#x27;
                           &#x27;true);\n&#x27;
                           &#x27;                    editor.apply();\n&#x27;
                           &#x27;                    if (postAnimationCb != null) &#x27;
                           &#x27;{\n&#x27;
                           &#x27;                        postAnimationCb.run();\n&#x27;
                           &#x27;                    }\n&#x27;
                           &#x27;                }\n&#x27;
                           &#x27;            };\n&#x27;
                           &#x27;            if (duration &lt;= 0) {\n&#x27;
                           &#x27;                cleanUpClingCb.run();\n&#x27;
                           &#x27;            } else {\n&#x27;
                           &#x27;                cling.hide(duration, &#x27;
                           &#x27;cleanUpClingCb);\n&#x27;
                           &#x27;            }\n&#x27;
                           &#x27;            &#x27;
                           &#x27;mHideFromAccessibilityHelper.restoreImportantForAccessibility(mLauncher.getDragLayer());\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;            if (restoreNavBarVisibilty) {\n&#x27;
                           &#x27;                &#x27;
                           &#x27;cling.setSystemUiVisibility(cling.getSystemUiVisibility() &#x27;
                           &#x27;&amp;\n&#x27;
                           &#x27;                        &#x27;
                           &#x27;~View.SYSTEM_UI_FLAG_LOW_PROFILE);\n&#x27;
                           &#x27;            }\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    public void dismissFirstRunCling(View v) {\n&#x27;
                           &#x27;        Cling cling = (Cling) &#x27;
                           &#x27;mLauncher.findViewById(R.id.first_run_cling);\n&#x27;
                           &#x27;        Runnable cb = new Runnable() {\n&#x27;
                           &#x27;            public void run() {\n&#x27;
                           &#x27;                // Show the workspace cling next\n&#x27;
                           &#x27;                showWorkspaceCling();\n&#x27;
                           &#x27;            }\n&#x27;
                           &#x27;        };\n&#x27;
                           &#x27;        dismissCling(cling, cb, &#x27;
                           &#x27;FIRST_RUN_CLING_DISMISSED_KEY,\n&#x27;
                           &#x27;                DISMISS_CLING_DURATION, false);\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;        // Fade out the search bar for the &#x27;
                           &#x27;workspace cling coming up\n&#x27;
                           &#x27;        &#x27;
                           &#x27;mLauncher.getSearchBar().hideSearchBar(true);\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    private void dismissMigrationCling() {\n&#x27;
                           &#x27;        &#x27;
                           &#x27;mLauncher.showWorkspaceSearchAndHotseat();\n&#x27;
                           &#x27;        Runnable dismissCb = new Runnable() {\n&#x27;
                           &#x27;            public void run() {\n&#x27;
                           &#x27;                Cling cling = (Cling) &#x27;
                           &#x27;mLauncher.findViewById(R.id.migration_cling);\n&#x27;
                           &#x27;                Runnable cb = new Runnable() {\n&#x27;
                           &#x27;                    public void run() {\n&#x27;
                           &#x27;                        // Show the migration &#x27;
                           &#x27;workspace cling next\n&#x27;
                           &#x27;                        &#x27;
                           &#x27;showMigrationWorkspaceCling();\n&#x27;
                           &#x27;                    }\n&#x27;
                           &#x27;                };\n&#x27;
                           &#x27;                dismissCling(cling, cb, &#x27;
                           &#x27;WORKSPACE_CLING_DISMISSED_KEY,\n&#x27;
                           &#x27;                        DISMISS_CLING_DURATION, &#x27;
                           &#x27;true);\n&#x27;
                           &#x27;            }\n&#x27;
                           &#x27;        };\n&#x27;
                           &#x27;        mLauncher.getWorkspace().post(dismissCb);\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    private void dismissAnyWorkspaceCling(Cling &#x27;
                           &#x27;cling, View v) {\n&#x27;
                           &#x27;        Runnable cb = null;\n&#x27;
                           &#x27;        if (v == null) {\n&#x27;
                           &#x27;            cb = new Runnable() {\n&#x27;
                           &#x27;                public void run() {\n&#x27;
                           &#x27;                    &#x27;
                           &#x27;mLauncher.getWorkspace().enterOverviewMode();\n&#x27;
                           &#x27;                }\n&#x27;
                           &#x27;            };\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;        dismissCling(cling, cb, &#x27;
                           &#x27;WORKSPACE_CLING_DISMISSED_KEY,\n&#x27;
                           &#x27;                DISMISS_CLING_DURATION, true);\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;        // Fade in the search bar\n&#x27;
                           &#x27;        &#x27;
                           &#x27;mLauncher.getSearchBar().showSearchBar(true);\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    public void dismissMigrationClingCopyApps(View &#x27;
                           &#x27;v) {\n&#x27;
                           &#x27;        // Copy the shortcuts from the old &#x27;
                           &#x27;database\n&#x27;
                           &#x27;        LauncherModel model = &#x27;
                           &#x27;mLauncher.getModel();\n&#x27;
                           &#x27;        model.resetLoadedState(false, true);\n&#x27;
                           &#x27;        model.startLoader(false, &#x27;
                           &#x27;PagedView.INVALID_RESTORE_PAGE,\n&#x27;
                           &#x27;                &#x27;
                           &#x27;LauncherModel.LOADER_FLAG_CLEAR_WORKSPACE\n&#x27;
                           &#x27;                        | &#x27;
                           &#x27;LauncherModel.LOADER_FLAG_MIGRATE_SHORTCUTS);\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;        // Set the flag to skip the folder cling\n&#x27;
                           &#x27;        String spKey = &#x27;
                           &#x27;LauncherAppState.getSharedPreferencesKey();\n&#x27;
                           &#x27;        SharedPreferences sp = &#x27;
                           &#x27;mLauncher.getSharedPreferences(spKey, &#x27;
                           &#x27;Context.MODE_PRIVATE);\n&#x27;
                           &#x27;        SharedPreferences.Editor editor = &#x27;
                           &#x27;sp.edit();\n&#x27;
                           &#x27;        &#x27;
                           &#x27;editor.putBoolean(Launcher.USER_HAS_MIGRATED, &#x27;
                           &#x27;true);\n&#x27;
                           &#x27;        editor.apply();\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;        // Disable the migration cling\n&#x27;
                           &#x27;        dismissMigrationCling();\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    public void &#x27;
                           &#x27;dismissMigrationClingUseDefault(View v) {\n&#x27;
                           &#x27;        // Clear the workspace\n&#x27;
                           &#x27;        LauncherModel model = &#x27;
                           &#x27;mLauncher.getModel();\n&#x27;
                           &#x27;        model.resetLoadedState(false, true);\n&#x27;
                           &#x27;        model.startLoader(false, &#x27;
                           &#x27;PagedView.INVALID_RESTORE_PAGE,\n&#x27;
                           &#x27;                &#x27;
                           &#x27;LauncherModel.LOADER_FLAG_CLEAR_WORKSPACE);\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;        // Disable the migration cling\n&#x27;
                           &#x27;        dismissMigrationCling();\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    public void &#x27;
                           &#x27;dismissMigrationWorkspaceCling(View v) {\n&#x27;
                           &#x27;        Cling cling = (Cling) &#x27;
                           &#x27;mLauncher.findViewById(R.id.migration_workspace_cling);\n&#x27;
                           &#x27;        dismissAnyWorkspaceCling(cling, v);\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    public void dismissWorkspaceCling(View v) {\n&#x27;
                           &#x27;        Cling cling = (Cling) &#x27;
                           &#x27;mLauncher.findViewById(R.id.workspace_cling);\n&#x27;
                           &#x27;        dismissAnyWorkspaceCling(cling, v);\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    public void dismissFolderCling(View v) {\n&#x27;
                           &#x27;        Cling cling = (Cling) &#x27;
                           &#x27;mLauncher.findViewById(R.id.folder_cling);\n&#x27;
                           &#x27;        dismissCling(cling, null, &#x27;
                           &#x27;FOLDER_CLING_DISMISSED_KEY,\n&#x27;
                           &#x27;                DISMISS_CLING_DURATION, true);\n&#x27;
                           &#x27;    }\n&#x27;}],
   &#x27;mergers&#x27;: {&#x27;baseline&#x27;}}]]</pre>
          </body>
        </html>
        